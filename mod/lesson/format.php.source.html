<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/lesson/format.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/lesson';
filename='format.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/lesson/</a> -> <a href="format.php.html">format.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="format.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="format.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * format.php  - Default format class for file imports/exports. Doesn't do</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * everything on it's own -- it needs to be extended.</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> *</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * Included by import.ph</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> *</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @package mod_lesson</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> **/</span>
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">/**</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * Import files embedded into answer or response</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> *</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @param string $field nfield name (answer or response)</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @param array $data imported data</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @param object $answer answer object</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * @param int $contextid</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> **/</span>
<a name="l39"><span class="linenum">  39</span></a>  function <a class="function" onClick="logFunction('lesson_import_question_files')" href="../../_functions/lesson_import_question_files.html" onMouseOver="funcPopup(event,'lesson_import_question_files')">lesson_import_question_files</a>(<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>) {
<a name="l40"><span class="linenum">  40</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l41"><span class="linenum">  41</span></a>      if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['itemid'])) {
<a name="l42"><span class="linenum">  42</span></a>          return;
<a name="l43"><span class="linenum">  43</span></a>      }
<a name="l44"><span class="linenum">  44</span></a>      <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['itemid'],
<a name="l45"><span class="linenum">  45</span></a>              <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'mod_lesson', 'page_' . <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> . 's', <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l46"><span class="linenum">  46</span></a>              array('subdirs' =&gt; false, 'maxfiles' =&gt; -1, 'maxbytes' =&gt; 0),
<a name="l47"><span class="linenum">  47</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>);
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_answers&quot;, <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, array(&quot;id&quot; =&gt; <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l50"><span class="linenum">  50</span></a>  }
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">/**</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> * Given some question info and some data about the the answers</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> * this function parses, organises and saves the question</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> *</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment"> * This is only used when IMPORTING questions and is only called</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment"> * from format.php</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * Lifted from mod/quiz/lib.php -</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> *    1. all reference to oldanswers removed</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment"> *    2. all reference to quiz_multichoice table removed</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment"> *    3. In shortanswer questions usecase is store in the qoption field</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment"> *    4. In numeric questions store the range as two answers</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment"> *    5. truefalse options are ignored</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment"> *    6. For multichoice questions with more than one answer the qoption field is true</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment"> *</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment"> * @param object $question Contains question data like question, type and answers.</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment"> * @param object $lesson</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> * @param int $contextid</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> * @return object Returns $result-&gt;error or $result-&gt;notice.</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> **/</span>
<a name="l71"><span class="linenum">  71</span></a>  function <a class="function" onClick="logFunction('lesson_save_question_options')" href="../../_functions/lesson_save_question_options.html" onMouseOver="funcPopup(event,'lesson_save_question_options')">lesson_save_question_options</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>) {
<a name="l72"><span class="linenum">  72</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l73"><span class="linenum">  73</span></a>  
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">    // These lines are required to ensure that all page types have</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">    // been loaded for the following switch</span>
<a name="l76"><span class="linenum">  76</span></a>      if (!(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a> instanceof lesson)) {
<a name="l77"><span class="linenum">  77</span></a>          <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lesson')" href="../../_classes/lesson.html" onMouseOver="classPopup(event,'lesson')">lesson</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l78"><span class="linenum">  78</span></a>      }
<a name="l79"><span class="linenum">  79</span></a>      <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a> = <a class="class" onClick="logClass('lesson_page_type_manager')" href="../../_classes/lesson_page_type_manager.html" onMouseOver="classPopup(event,'lesson_page_type_manager')">lesson_page_type_manager</a>::<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>      <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l82"><span class="linenum">  82</span></a>      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = new stdClass();
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">    // Default answer to avoid code duplication.</span>
<a name="l85"><span class="linenum">  85</span></a>      <a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a> = new stdClass();
<a name="l86"><span class="linenum">  86</span></a>      <a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>-&gt;<a onClick="logVariable('lessonid')" class="var it44765" onMouseOver="hilite(44765)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a>   = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('lessonid')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a>;
<a name="l87"><span class="linenum">  87</span></a>      <a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>-&gt;<a onClick="logVariable('pageid')" class="var it44765" onMouseOver="hilite(44765)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l88"><span class="linenum">  88</span></a>      <a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>-&gt;<a onClick="logVariable('timecreated')" class="var it44765" onMouseOver="hilite(44765)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>   = <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a>;
<a name="l89"><span class="linenum">  89</span></a>      <a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>-&gt;<a onClick="logVariable('answerformat')" class="var it44765" onMouseOver="hilite(44765)" onMouseOut="lolite()" href="../../_variables/answerformat.html">answerformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l90"><span class="linenum">  90</span></a>      <a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it44765" onMouseOver="hilite(44765)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> = <a class="constant" onClick="logConstant('LESSON_THISPAGE')" href="../../_constants/LESSON_THISPAGE.html" onMouseOver="constPopup(event,'LESSON_THISPAGE')">LESSON_THISPAGE</a>;
<a name="l91"><span class="linenum">  91</span></a>      <a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>-&gt;<a onClick="logVariable('grade')" class="var it44765" onMouseOver="hilite(44765)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = 0;
<a name="l92"><span class="linenum">  92</span></a>      <a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>-&gt;<a onClick="logVariable('score')" class="var it44765" onMouseOver="hilite(44765)" onMouseOut="lolite()" href="../../_variables/score.html">score</a> = 0;
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>      switch (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>) {
<a name="l95"><span class="linenum">  95</span></a>          case <a class="constant" onClick="logConstant('LESSON_PAGE_SHORTANSWER')" href="../../_constants/LESSON_PAGE_SHORTANSWER.html" onMouseOver="constPopup(event,'LESSON_PAGE_SHORTANSWER')">LESSON_PAGE_SHORTANSWER</a>:
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>              <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = array();
<a name="l98"><span class="linenum">  98</span></a>              <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> = -1;
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">            // Insert all the new answers</span>
<a name="l101"><span class="linenum"> 101</span></a>              foreach (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('answer')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it24020" onMouseOver="hilite(24020)" onMouseOut="lolite()" onClick="logVariable('dataanswer')" href="../../_variables/dataanswer.html">$dataanswer</a>) {
<a name="l102"><span class="linenum"> 102</span></a>                  if (<a class="var it24020" onMouseOver="hilite(24020)" onMouseOut="lolite()" onClick="logVariable('dataanswer')" href="../../_variables/dataanswer.html">$dataanswer</a> != &quot;&quot;) {
<a name="l103"><span class="linenum"> 103</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>);
<a name="l104"><span class="linenum"> 104</span></a>                      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] &gt;=0.5) {
<a name="l105"><span class="linenum"> 105</span></a>                          <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> = <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>;
<a name="l106"><span class="linenum"> 106</span></a>                          <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/score.html">score</a> = 1;
<a name="l107"><span class="linenum"> 107</span></a>                      }
<a name="l108"><span class="linenum"> 108</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('grade')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = <a class="phpfunction" onClick="logFunction('round')" href="../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] * 100);
<a name="l109"><span class="linenum"> 109</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>   = <a class="var it24020" onMouseOver="hilite(24020)" onMouseOut="lolite()" onClick="logVariable('dataanswer')" href="../../_variables/dataanswer.html">$dataanswer</a>;
<a name="l110"><span class="linenum"> 110</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedback')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]['text'];
<a name="l111"><span class="linenum"> 111</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('responseformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedback')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]['format'];
<a name="l112"><span class="linenum"> 112</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l113"><span class="linenum"> 113</span></a>                      <a class="function" onClick="logFunction('lesson_import_question_files')" href="../../_functions/lesson_import_question_files.html" onMouseOver="funcPopup(event,'lesson_import_question_files')">lesson_import_question_files</a>('response', <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedback')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>], <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>);
<a name="l114"><span class="linenum"> 114</span></a>                      <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>[] = <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l115"><span class="linenum"> 115</span></a>                      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] &gt; <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a>) {
<a name="l116"><span class="linenum"> 116</span></a>                          <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>];
<a name="l117"><span class="linenum"> 117</span></a>                      }
<a name="l118"><span class="linenum"> 118</span></a>                  }
<a name="l119"><span class="linenum"> 119</span></a>              }
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">            /// Perform sanity checks on fractional grades</span>
<a name="l123"><span class="linenum"> 123</span></a>              if (<a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> != 1) {
<a name="l124"><span class="linenum"> 124</span></a>                  <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> = <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> * 100;
<a name="l125"><span class="linenum"> 125</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('notice')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/notice.html">notice</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;fractionsnomax&quot;, &quot;lesson&quot;, <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a>);
<a name="l126"><span class="linenum"> 126</span></a>                  return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l127"><span class="linenum"> 127</span></a>              }
<a name="l128"><span class="linenum"> 128</span></a>              break;
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>          case <a class="constant" onClick="logConstant('LESSON_PAGE_NUMERICAL')" href="../../_constants/LESSON_PAGE_NUMERICAL.html" onMouseOver="constPopup(event,'LESSON_PAGE_NUMERICAL')">LESSON_PAGE_NUMERICAL</a>:   // Note similarities to shortanswer.
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>              <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = array();
<a name="l133"><span class="linenum"> 133</span></a>              <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> = -1;
<a name="l134"><span class="linenum"> 134</span></a>  
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">            // for each answer store the pair of min and max values even if they are the same</span>
<a name="l137"><span class="linenum"> 137</span></a>              foreach (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('answer')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it24020" onMouseOver="hilite(24020)" onMouseOut="lolite()" onClick="logVariable('dataanswer')" href="../../_variables/dataanswer.html">$dataanswer</a>) {
<a name="l138"><span class="linenum"> 138</span></a>                  if (<a class="var it24020" onMouseOver="hilite(24020)" onMouseOut="lolite()" onClick="logVariable('dataanswer')" href="../../_variables/dataanswer.html">$dataanswer</a> != &quot;&quot;) {
<a name="l139"><span class="linenum"> 139</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>);
<a name="l140"><span class="linenum"> 140</span></a>                      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] &gt;= 0.5) {
<a name="l141"><span class="linenum"> 141</span></a>                          <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> = <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>;
<a name="l142"><span class="linenum"> 142</span></a>                          <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/score.html">score</a> = 1;
<a name="l143"><span class="linenum"> 143</span></a>                      }
<a name="l144"><span class="linenum"> 144</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('grade')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = <a class="phpfunction" onClick="logFunction('round')" href="../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] * 100);
<a name="l145"><span class="linenum"> 145</span></a>                      <a class="var it2299" onMouseOver="hilite(2299)" onMouseOut="lolite()" onClick="logVariable('min')" href="../../_variables/min.html">$min</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('answer')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] - <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('tolerance')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/tolerance.html">tolerance</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>];
<a name="l146"><span class="linenum"> 146</span></a>                      <a class="var it536" onMouseOver="hilite(536)" onMouseOut="lolite()" onClick="logVariable('max')" href="../../_variables/max.html">$max</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('answer')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] + <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('tolerance')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/tolerance.html">tolerance</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>];
<a name="l147"><span class="linenum"> 147</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>   = <a class="var it2299" onMouseOver="hilite(2299)" onMouseOut="lolite()" onClick="logVariable('min')" href="../../_variables/min.html">$min</a>.&quot;:&quot;.<a class="var it536" onMouseOver="hilite(536)" onMouseOut="lolite()" onClick="logVariable('max')" href="../../_variables/max.html">$max</a>;
<a name="l148"><span class="linenum"> 148</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedback')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]['text'];
<a name="l149"><span class="linenum"> 149</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('responseformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedback')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]['format'];
<a name="l150"><span class="linenum"> 150</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l151"><span class="linenum"> 151</span></a>                      <a class="function" onClick="logFunction('lesson_import_question_files')" href="../../_functions/lesson_import_question_files.html" onMouseOver="funcPopup(event,'lesson_import_question_files')">lesson_import_question_files</a>('response', <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedback')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>], <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>);
<a name="l152"><span class="linenum"> 152</span></a>  
<a name="l153"><span class="linenum"> 153</span></a>                      <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>[] = <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l154"><span class="linenum"> 154</span></a>                      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] &gt; <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a>) {
<a name="l155"><span class="linenum"> 155</span></a>                          <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>];
<a name="l156"><span class="linenum"> 156</span></a>                      }
<a name="l157"><span class="linenum"> 157</span></a>                  }
<a name="l158"><span class="linenum"> 158</span></a>              }
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">            /// Perform sanity checks on fractional grades</span>
<a name="l161"><span class="linenum"> 161</span></a>              if (<a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> != 1) {
<a name="l162"><span class="linenum"> 162</span></a>                  <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> = <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> * 100;
<a name="l163"><span class="linenum"> 163</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('notice')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/notice.html">notice</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;fractionsnomax&quot;, &quot;lesson&quot;, <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a>);
<a name="l164"><span class="linenum"> 164</span></a>                  return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l165"><span class="linenum"> 165</span></a>              }
<a name="l166"><span class="linenum"> 166</span></a>          break;
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>  
<a name="l169"><span class="linenum"> 169</span></a>          case <a class="constant" onClick="logConstant('LESSON_PAGE_TRUEFALSE')" href="../../_constants/LESSON_PAGE_TRUEFALSE.html" onMouseOver="constPopup(event,'LESSON_PAGE_TRUEFALSE')">LESSON_PAGE_TRUEFALSE</a>:
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">            // In lesson the correct answer always come first, as it was the case</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">            // in question bank exports years ago.</span>
<a name="l173"><span class="linenum"> 173</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>);
<a name="l174"><span class="linenum"> 174</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('grade')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = 100;
<a name="l175"><span class="linenum"> 175</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> = <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>;
<a name="l176"><span class="linenum"> 176</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/score.html">score</a> = 1;
<a name="l177"><span class="linenum"> 177</span></a>              if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a>) {
<a name="l178"><span class="linenum"> 178</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;true&quot;, &quot;lesson&quot;);
<a name="l179"><span class="linenum"> 179</span></a>                  if (isset(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbacktrue')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbacktrue.html">feedbacktrue</a>)) {
<a name="l180"><span class="linenum"> 180</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbacktrue')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbacktrue.html">feedbacktrue</a>['text'];
<a name="l181"><span class="linenum"> 181</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('responseformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbacktrue')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbacktrue.html">feedbacktrue</a>['format'];
<a name="l182"><span class="linenum"> 182</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l183"><span class="linenum"> 183</span></a>                      <a class="function" onClick="logFunction('lesson_import_question_files')" href="../../_functions/lesson_import_question_files.html" onMouseOver="funcPopup(event,'lesson_import_question_files')">lesson_import_question_files</a>('response', <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbacktrue')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbacktrue.html">feedbacktrue</a>, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>);
<a name="l184"><span class="linenum"> 184</span></a>                  }
<a name="l185"><span class="linenum"> 185</span></a>              } else {
<a name="l186"><span class="linenum"> 186</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;false&quot;, &quot;lesson&quot;);
<a name="l187"><span class="linenum"> 187</span></a>                  if (isset(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbackfalse')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbackfalse.html">feedbackfalse</a>)) {
<a name="l188"><span class="linenum"> 188</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbackfalse')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbackfalse.html">feedbackfalse</a>['text'];
<a name="l189"><span class="linenum"> 189</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('responseformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbackfalse')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbackfalse.html">feedbackfalse</a>['format'];
<a name="l190"><span class="linenum"> 190</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l191"><span class="linenum"> 191</span></a>                      <a class="function" onClick="logFunction('lesson_import_question_files')" href="../../_functions/lesson_import_question_files.html" onMouseOver="funcPopup(event,'lesson_import_question_files')">lesson_import_question_files</a>('response', <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbackfalse')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbackfalse.html">feedbackfalse</a>, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>);
<a name="l192"><span class="linenum"> 192</span></a>                  }
<a name="l193"><span class="linenum"> 193</span></a>              }
<a name="l194"><span class="linenum"> 194</span></a>  
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">            // Now the wrong answer.</span>
<a name="l196"><span class="linenum"> 196</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>);
<a name="l197"><span class="linenum"> 197</span></a>              if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a>) {
<a name="l198"><span class="linenum"> 198</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;false&quot;, &quot;lesson&quot;);
<a name="l199"><span class="linenum"> 199</span></a>                  if (isset(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbackfalse')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbackfalse.html">feedbackfalse</a>)) {
<a name="l200"><span class="linenum"> 200</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbackfalse')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbackfalse.html">feedbackfalse</a>['text'];
<a name="l201"><span class="linenum"> 201</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('responseformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbackfalse')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbackfalse.html">feedbackfalse</a>['format'];
<a name="l202"><span class="linenum"> 202</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l203"><span class="linenum"> 203</span></a>                      <a class="function" onClick="logFunction('lesson_import_question_files')" href="../../_functions/lesson_import_question_files.html" onMouseOver="funcPopup(event,'lesson_import_question_files')">lesson_import_question_files</a>('response', <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbackfalse')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbackfalse.html">feedbackfalse</a>, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>);
<a name="l204"><span class="linenum"> 204</span></a>                  }
<a name="l205"><span class="linenum"> 205</span></a>              } else {
<a name="l206"><span class="linenum"> 206</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;true&quot;, &quot;lesson&quot;);
<a name="l207"><span class="linenum"> 207</span></a>                  if (isset(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbacktrue')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbacktrue.html">feedbacktrue</a>)) {
<a name="l208"><span class="linenum"> 208</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbacktrue')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbacktrue.html">feedbacktrue</a>['text'];
<a name="l209"><span class="linenum"> 209</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('responseformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbacktrue')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbacktrue.html">feedbacktrue</a>['format'];
<a name="l210"><span class="linenum"> 210</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l211"><span class="linenum"> 211</span></a>                      <a class="function" onClick="logFunction('lesson_import_question_files')" href="../../_functions/lesson_import_question_files.html" onMouseOver="funcPopup(event,'lesson_import_question_files')">lesson_import_question_files</a>('response', <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedbacktrue')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedbacktrue.html">feedbacktrue</a>, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>);
<a name="l212"><span class="linenum"> 212</span></a>                  }
<a name="l213"><span class="linenum"> 213</span></a>              }
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>            break;
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>          case <a class="constant" onClick="logConstant('LESSON_PAGE_MULTICHOICE')" href="../../_constants/LESSON_PAGE_MULTICHOICE.html" onMouseOver="constPopup(event,'LESSON_PAGE_MULTICHOICE')">LESSON_PAGE_MULTICHOICE</a>:
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>              <a class="var it11521" onMouseOver="hilite(11521)" onMouseOut="lolite()" onClick="logVariable('totalfraction')" href="../../_variables/totalfraction.html">$totalfraction</a> = 0;
<a name="l220"><span class="linenum"> 220</span></a>              <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> = -1;
<a name="l221"><span class="linenum"> 221</span></a>  
<a name="l222"><span class="linenum"> 222</span></a>              <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = array();
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">            // Insert all the new answers</span>
<a name="l225"><span class="linenum"> 225</span></a>              foreach (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('answer')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it24020" onMouseOver="hilite(24020)" onMouseOut="lolite()" onClick="logVariable('dataanswer')" href="../../_variables/dataanswer.html">$dataanswer</a>) {
<a name="l226"><span class="linenum"> 226</span></a>                  if (<a class="var it24020" onMouseOver="hilite(24020)" onMouseOut="lolite()" onClick="logVariable('dataanswer')" href="../../_variables/dataanswer.html">$dataanswer</a> != &quot;&quot;) {
<a name="l227"><span class="linenum"> 227</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>);
<a name="l228"><span class="linenum"> 228</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('grade')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = <a class="phpfunction" onClick="logFunction('round')" href="../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] * 100);
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>                      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('single')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/single.html">single</a>) {
<a name="l231"><span class="linenum"> 231</span></a>                          if (<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('grade')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> &gt; 50) {
<a name="l232"><span class="linenum"> 232</span></a>                              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> = <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>;
<a name="l233"><span class="linenum"> 233</span></a>                              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/score.html">score</a> = 1;
<a name="l234"><span class="linenum"> 234</span></a>                          }
<a name="l235"><span class="linenum"> 235</span></a>                      } else {
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">                        // If multi answer allowed, any answer with fraction &gt; 0 is considered correct.</span>
<a name="l237"><span class="linenum"> 237</span></a>                          if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] &gt; 0) {
<a name="l238"><span class="linenum"> 238</span></a>                              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> = <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>;
<a name="l239"><span class="linenum"> 239</span></a>                              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/score.html">score</a> = 1;
<a name="l240"><span class="linenum"> 240</span></a>                          }
<a name="l241"><span class="linenum"> 241</span></a>                      }
<a name="l242"><span class="linenum"> 242</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>   = <a class="var it24020" onMouseOver="hilite(24020)" onMouseOut="lolite()" onClick="logVariable('dataanswer')" href="../../_variables/dataanswer.html">$dataanswer</a>['text'];
<a name="l243"><span class="linenum"> 243</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answerformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answerformat.html">answerformat</a>   = <a class="var it24020" onMouseOver="hilite(24020)" onMouseOut="lolite()" onClick="logVariable('dataanswer')" href="../../_variables/dataanswer.html">$dataanswer</a>['format'];
<a name="l244"><span class="linenum"> 244</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedback')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]['text'];
<a name="l245"><span class="linenum"> 245</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('responseformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedback')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]['format'];
<a name="l246"><span class="linenum"> 246</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l247"><span class="linenum"> 247</span></a>                      <a class="function" onClick="logFunction('lesson_import_question_files')" href="../../_functions/lesson_import_question_files.html" onMouseOver="funcPopup(event,'lesson_import_question_files')">lesson_import_question_files</a>('answer', <a class="var it24020" onMouseOver="hilite(24020)" onMouseOut="lolite()" onClick="logVariable('dataanswer')" href="../../_variables/dataanswer.html">$dataanswer</a>, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>);
<a name="l248"><span class="linenum"> 248</span></a>                      <a class="function" onClick="logFunction('lesson_import_question_files')" href="../../_functions/lesson_import_question_files.html" onMouseOver="funcPopup(event,'lesson_import_question_files')">lesson_import_question_files</a>('response', <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('feedback')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>], <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>);
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">                    // for Sanity checks</span>
<a name="l251"><span class="linenum"> 251</span></a>                      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] &gt; 0) {
<a name="l252"><span class="linenum"> 252</span></a>                          <a class="var it11521" onMouseOver="hilite(11521)" onMouseOut="lolite()" onClick="logVariable('totalfraction')" href="../../_variables/totalfraction.html">$totalfraction</a> += <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>];
<a name="l253"><span class="linenum"> 253</span></a>                      }
<a name="l254"><span class="linenum"> 254</span></a>                      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] &gt; <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a>) {
<a name="l255"><span class="linenum"> 255</span></a>                          <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('fraction')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/fraction.html">fraction</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>];
<a name="l256"><span class="linenum"> 256</span></a>                      }
<a name="l257"><span class="linenum"> 257</span></a>                  }
<a name="l258"><span class="linenum"> 258</span></a>              }
<a name="l259"><span class="linenum"> 259</span></a>  
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">            /// Perform sanity checks on fractional grades</span>
<a name="l261"><span class="linenum"> 261</span></a>              if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('single')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/single.html">single</a>) {
<a name="l262"><span class="linenum"> 262</span></a>                  if (<a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> != 1) {
<a name="l263"><span class="linenum"> 263</span></a>                      <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> = <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a> * 100;
<a name="l264"><span class="linenum"> 264</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('notice')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/notice.html">notice</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;fractionsnomax&quot;, &quot;lesson&quot;, <a class="var it9199" onMouseOver="hilite(9199)" onMouseOut="lolite()" onClick="logVariable('maxfraction')" href="../../_variables/maxfraction.html">$maxfraction</a>);
<a name="l265"><span class="linenum"> 265</span></a>                      return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l266"><span class="linenum"> 266</span></a>                  }
<a name="l267"><span class="linenum"> 267</span></a>              } else {
<a name="l268"><span class="linenum"> 268</span></a>                  <a class="var it11521" onMouseOver="hilite(11521)" onMouseOut="lolite()" onClick="logVariable('totalfraction')" href="../../_variables/totalfraction.html">$totalfraction</a> = <a class="phpfunction" onClick="logFunction('round')" href="../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(<a class="var it11521" onMouseOver="hilite(11521)" onMouseOut="lolite()" onClick="logVariable('totalfraction')" href="../../_variables/totalfraction.html">$totalfraction</a>,2);
<a name="l269"><span class="linenum"> 269</span></a>                  if (<a class="var it11521" onMouseOver="hilite(11521)" onMouseOut="lolite()" onClick="logVariable('totalfraction')" href="../../_variables/totalfraction.html">$totalfraction</a> != 1) {
<a name="l270"><span class="linenum"> 270</span></a>                      <a class="var it11521" onMouseOver="hilite(11521)" onMouseOut="lolite()" onClick="logVariable('totalfraction')" href="../../_variables/totalfraction.html">$totalfraction</a> = <a class="var it11521" onMouseOver="hilite(11521)" onMouseOut="lolite()" onClick="logVariable('totalfraction')" href="../../_variables/totalfraction.html">$totalfraction</a> * 100;
<a name="l271"><span class="linenum"> 271</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('notice')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/notice.html">notice</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;fractionsaddwrong&quot;, &quot;lesson&quot;, <a class="var it11521" onMouseOver="hilite(11521)" onMouseOut="lolite()" onClick="logVariable('totalfraction')" href="../../_variables/totalfraction.html">$totalfraction</a>);
<a name="l272"><span class="linenum"> 272</span></a>                      return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l273"><span class="linenum"> 273</span></a>                  }
<a name="l274"><span class="linenum"> 274</span></a>              }
<a name="l275"><span class="linenum"> 275</span></a>          break;
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>          case <a class="constant" onClick="logConstant('LESSON_PAGE_MATCHING')" href="../../_constants/LESSON_PAGE_MATCHING.html" onMouseOver="constPopup(event,'LESSON_PAGE_MATCHING')">LESSON_PAGE_MATCHING</a>:
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>              <a class="var it460" onMouseOver="hilite(460)" onMouseOut="lolite()" onClick="logVariable('subquestions')" href="../../_variables/subquestions.html">$subquestions</a> = array();
<a name="l280"><span class="linenum"> 280</span></a>  
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">            // The first answer should always be the correct answer</span>
<a name="l282"><span class="linenum"> 282</span></a>              <a class="var it3041" onMouseOver="hilite(3041)" onMouseOut="lolite()" onClick="logVariable('correctanswer')" href="../../_variables/correctanswer.html">$correctanswer</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>);
<a name="l283"><span class="linenum"> 283</span></a>              <a class="var it3041" onMouseOver="hilite(3041)" onMouseOut="lolite()" onClick="logVariable('correctanswer')" href="../../_variables/correctanswer.html">$correctanswer</a>-&gt;<a onClick="logVariable('answer')" class="var it43770" onMouseOver="hilite(43770)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('thatsthecorrectanswer', 'lesson');
<a name="l284"><span class="linenum"> 284</span></a>              <a class="var it3041" onMouseOver="hilite(3041)" onMouseOut="lolite()" onClick="logVariable('correctanswer')" href="../../_variables/correctanswer.html">$correctanswer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43770" onMouseOver="hilite(43770)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> = <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>;
<a name="l285"><span class="linenum"> 285</span></a>              <a class="var it3041" onMouseOver="hilite(3041)" onMouseOut="lolite()" onClick="logVariable('correctanswer')" href="../../_variables/correctanswer.html">$correctanswer</a>-&gt;<a onClick="logVariable('score')" class="var it43770" onMouseOver="hilite(43770)" onMouseOut="lolite()" href="../../_variables/score.html">score</a> = 1;
<a name="l286"><span class="linenum"> 286</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it3041" onMouseOver="hilite(3041)" onMouseOut="lolite()" onClick="logVariable('correctanswer')" href="../../_variables/correctanswer.html">$correctanswer</a>);
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">            // The second answer should always be the wrong answer</span>
<a name="l289"><span class="linenum"> 289</span></a>              <a class="var it27531" onMouseOver="hilite(27531)" onMouseOut="lolite()" onClick="logVariable('wronganswer')" href="../../_variables/wronganswer.html">$wronganswer</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>);
<a name="l290"><span class="linenum"> 290</span></a>              <a class="var it27531" onMouseOver="hilite(27531)" onMouseOut="lolite()" onClick="logVariable('wronganswer')" href="../../_variables/wronganswer.html">$wronganswer</a>-&gt;<a onClick="logVariable('answer')" class="var it44766" onMouseOver="hilite(44766)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('thatsthewronganswer', 'lesson');
<a name="l291"><span class="linenum"> 291</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it27531" onMouseOver="hilite(27531)" onMouseOut="lolite()" onClick="logVariable('wronganswer')" href="../../_variables/wronganswer.html">$wronganswer</a>);
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>              <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0;
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment">            // Insert all the new question+answer pairs</span>
<a name="l295"><span class="linenum"> 295</span></a>              foreach (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('subquestions')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/subquestions.html">subquestions</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it446" onMouseOver="hilite(446)" onMouseOut="lolite()" onClick="logVariable('questiontext')" href="../../_variables/questiontext.html">$questiontext</a>) {
<a name="l296"><span class="linenum"> 296</span></a>                  <a class="var it10186" onMouseOver="hilite(10186)" onMouseOut="lolite()" onClick="logVariable('answertext')" href="../../_variables/answertext.html">$answertext</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('subanswers')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/subanswers.html">subanswers</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>];
<a name="l297"><span class="linenum"> 297</span></a>                  if (!empty(<a class="var it446" onMouseOver="hilite(446)" onMouseOut="lolite()" onClick="logVariable('questiontext')" href="../../_variables/questiontext.html">$questiontext</a>) and !empty(<a class="var it10186" onMouseOver="hilite(10186)" onMouseOut="lolite()" onClick="logVariable('answertext')" href="../../_variables/answertext.html">$answertext</a>)) {
<a name="l298"><span class="linenum"> 298</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it27530" onMouseOver="hilite(27530)" onMouseOut="lolite()" onClick="logVariable('defaultanswer')" href="../../_variables/defaultanswer.html">$defaultanswer</a>);
<a name="l299"><span class="linenum"> 299</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="var it446" onMouseOver="hilite(446)" onMouseOut="lolite()" onClick="logVariable('questiontext')" href="../../_variables/questiontext.html">$questiontext</a>['text'];
<a name="l300"><span class="linenum"> 300</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answerformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answerformat.html">answerformat</a>   = <a class="var it446" onMouseOver="hilite(446)" onMouseOut="lolite()" onClick="logVariable('questiontext')" href="../../_variables/questiontext.html">$questiontext</a>['format'];
<a name="l301"><span class="linenum"> 301</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>   = <a class="var it10186" onMouseOver="hilite(10186)" onMouseOut="lolite()" onClick="logVariable('answertext')" href="../../_variables/answertext.html">$answertext</a>;
<a name="l302"><span class="linenum"> 302</span></a>                      if (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> == 0) {
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">                        // first answer contains the correct answer jump</span>
<a name="l304"><span class="linenum"> 304</span></a>                          <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> = <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>;
<a name="l305"><span class="linenum"> 305</span></a>                      }
<a name="l306"><span class="linenum"> 306</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l307"><span class="linenum"> 307</span></a>                      <a class="function" onClick="logFunction('lesson_import_question_files')" href="../../_functions/lesson_import_question_files.html" onMouseOver="funcPopup(event,'lesson_import_question_files')">lesson_import_question_files</a>('answer', <a class="var it446" onMouseOver="hilite(446)" onMouseOut="lolite()" onClick="logVariable('questiontext')" href="../../_variables/questiontext.html">$questiontext</a>, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>);
<a name="l308"><span class="linenum"> 308</span></a>                      <a class="var it460" onMouseOver="hilite(460)" onMouseOut="lolite()" onClick="logVariable('subquestions')" href="../../_variables/subquestions.html">$subquestions</a>[] = <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l309"><span class="linenum"> 309</span></a>                      <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++;
<a name="l310"><span class="linenum"> 310</span></a>                  }
<a name="l311"><span class="linenum"> 311</span></a>              }
<a name="l312"><span class="linenum"> 312</span></a>  
<a name="l313"><span class="linenum"> 313</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it460" onMouseOver="hilite(460)" onMouseOut="lolite()" onClick="logVariable('subquestions')" href="../../_variables/subquestions.html">$subquestions</a>) &lt; 3) {
<a name="l314"><span class="linenum"> 314</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('notice')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/notice.html">notice</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;notenoughsubquestions&quot;, &quot;lesson&quot;);
<a name="l315"><span class="linenum"> 315</span></a>                  return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l316"><span class="linenum"> 316</span></a>              }
<a name="l317"><span class="linenum"> 317</span></a>              break;
<a name="l318"><span class="linenum"> 318</span></a>  
<a name="l319"><span class="linenum"> 319</span></a>          case <a class="constant" onClick="logConstant('LESSON_PAGE_ESSAY')" href="../../_constants/LESSON_PAGE_ESSAY.html" onMouseOver="constPopup(event,'LESSON_PAGE_ESSAY')">LESSON_PAGE_ESSAY</a>:
<a name="l320"><span class="linenum"> 320</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = new stdClass();
<a name="l321"><span class="linenum"> 321</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('lessonid')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('lessonid')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a>;
<a name="l322"><span class="linenum"> 322</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('pageid')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l323"><span class="linenum"> 323</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('timecreated')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a>;
<a name="l324"><span class="linenum"> 324</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = null;
<a name="l325"><span class="linenum"> 325</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answerformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answerformat.html">answerformat</a> = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l326"><span class="linenum"> 326</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('grade')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = 0;
<a name="l327"><span class="linenum"> 327</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/score.html">score</a> = 1;
<a name="l328"><span class="linenum"> 328</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> = <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>;
<a name="l329"><span class="linenum"> 329</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = null;
<a name="l330"><span class="linenum"> 330</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('responseformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a> = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l331"><span class="linenum"> 331</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l332"><span class="linenum"> 332</span></a>          break;
<a name="l333"><span class="linenum"> 333</span></a>          default:
<a name="l334"><span class="linenum"> 334</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('error')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/error.html">error</a> = &quot;Unsupported question <a class="function" onClick="logFunction('type')" href="../../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a> (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>)!&quot;;
<a name="l335"><span class="linenum"> 335</span></a>              return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l336"><span class="linenum"> 336</span></a>      }
<a name="l337"><span class="linenum"> 337</span></a>      return true;
<a name="l338"><span class="linenum"> 338</span></a>  }
<a name="l339"><span class="linenum"> 339</span></a>  
<a name="l340"><span class="linenum"> 340</span></a>  
<a name="l341"><span class="linenum"> 341</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('qformat_default')" href="../../_classes/qformat_default.html" onMouseOver="classPopup(event,'qformat_default')">qformat_default</a> {
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>      var <a class="var it5858" onMouseOver="hilite(5858)" onMouseOut="lolite()" onClick="logVariable('displayerrors')" href="../../_variables/displayerrors.html">$displayerrors</a> = true;
<a name="l344"><span class="linenum"> 344</span></a>      var <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a> = null;
<a name="l345"><span class="linenum"> 345</span></a>      var <a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../../_variables/questionids.html">$questionids</a> = array();
<a name="l346"><span class="linenum"> 346</span></a>      protected <a class="var it3494" onMouseOver="hilite(3494)" onMouseOut="lolite()" onClick="logVariable('importcontext')" href="../../_variables/importcontext.html">$importcontext</a> = null;
<a name="l347"><span class="linenum"> 347</span></a>      var <a class="var it27532" onMouseOver="hilite(27532)" onMouseOut="lolite()" onClick="logVariable('qtypeconvert')" href="../../_variables/qtypeconvert.html">$qtypeconvert</a> = array('numerical'   =&gt; <a class="constant" onClick="logConstant('LESSON_PAGE_NUMERICAL')" href="../../_constants/LESSON_PAGE_NUMERICAL.html" onMouseOver="constPopup(event,'LESSON_PAGE_NUMERICAL')">LESSON_PAGE_NUMERICAL</a>,
<a name="l348"><span class="linenum"> 348</span></a>                                 'multichoice' =&gt; <a class="constant" onClick="logConstant('LESSON_PAGE_MULTICHOICE')" href="../../_constants/LESSON_PAGE_MULTICHOICE.html" onMouseOver="constPopup(event,'LESSON_PAGE_MULTICHOICE')">LESSON_PAGE_MULTICHOICE</a>,
<a name="l349"><span class="linenum"> 349</span></a>                                 'truefalse'   =&gt; <a class="constant" onClick="logConstant('LESSON_PAGE_TRUEFALSE')" href="../../_constants/LESSON_PAGE_TRUEFALSE.html" onMouseOver="constPopup(event,'LESSON_PAGE_TRUEFALSE')">LESSON_PAGE_TRUEFALSE</a>,
<a name="l350"><span class="linenum"> 350</span></a>                                 'shortanswer' =&gt; <a class="constant" onClick="logConstant('LESSON_PAGE_SHORTANSWER')" href="../../_constants/LESSON_PAGE_SHORTANSWER.html" onMouseOver="constPopup(event,'LESSON_PAGE_SHORTANSWER')">LESSON_PAGE_SHORTANSWER</a>,
<a name="l351"><span class="linenum"> 351</span></a>                                 'match'       =&gt; <a class="constant" onClick="logConstant('LESSON_PAGE_MATCHING')" href="../../_constants/LESSON_PAGE_MATCHING.html" onMouseOver="constPopup(event,'LESSON_PAGE_MATCHING')">LESSON_PAGE_MATCHING</a>,
<a name="l352"><span class="linenum"> 352</span></a>                                 'essay'       =&gt; <a class="constant" onClick="logConstant('LESSON_PAGE_ESSAY')" href="../../_constants/LESSON_PAGE_ESSAY.html" onMouseOver="constPopup(event,'LESSON_PAGE_ESSAY')">LESSON_PAGE_ESSAY</a>
<a name="l353"><span class="linenum"> 353</span></a>                                );
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">    // Importing functions</span>
<a name="l356"><span class="linenum"> 356</span></a>      function <a class="function" onClick="logFunction('provide_import')" href="../../_functions/provide_import.html" onMouseOver="funcPopup(event,'provide_import')">provide_import</a>() {
<a name="l357"><span class="linenum"> 357</span></a>          return false;
<a name="l358"><span class="linenum"> 358</span></a>      }
<a name="l359"><span class="linenum"> 359</span></a>  
<a name="l360"><span class="linenum"> 360</span></a>      function <a class="function" onClick="logFunction('set_importcontext')" href="../../_functions/set_importcontext.html" onMouseOver="funcPopup(event,'set_importcontext')">set_importcontext</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l361"><span class="linenum"> 361</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('importcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/importcontext.html">importcontext</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l362"><span class="linenum"> 362</span></a>      }
<a name="l363"><span class="linenum"> 363</span></a>  
<a name="l364"><span class="linenum"> 364</span></a>      <span class="comment">/**</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">     * Handle parsing error</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">     *</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">     * @param string $message information about error</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">     * @param string $text imported text that triggered the error</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">     * @param string $questionname imported question name</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment">     */</span>
<a name="l371"><span class="linenum"> 371</span></a>      protected function <a class="function" onClick="logFunction('error')" href="../../_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>='', <a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('questionname')" href="../../_variables/questionname.html">$questionname</a>='') {
<a name="l372"><span class="linenum"> 372</span></a>          <a class="var it5871" onMouseOver="hilite(5871)" onMouseOut="lolite()" onClick="logVariable('importerrorquestion')" href="../../_variables/importerrorquestion.html">$importerrorquestion</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('importerrorquestion', 'question');
<a name="l373"><span class="linenum"> 373</span></a>  
<a name="l374"><span class="linenum"> 374</span></a>          echo &quot;&lt;div class=\&quot;importerror\&quot;&gt;\n&quot;;
<a name="l375"><span class="linenum"> 375</span></a>          echo &quot;&lt;strong&gt;<a class="var it5871" onMouseOver="hilite(5871)" onMouseOut="lolite()" onClick="logVariable('importerrorquestion')" href="../../_variables/importerrorquestion.html">$importerrorquestion</a> <a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('questionname')" href="../../_variables/questionname.html">$questionname</a>&lt;/strong&gt;&quot;;
<a name="l376"><span class="linenum"> 376</span></a>          if (!empty(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>)) {
<a name="l377"><span class="linenum"> 377</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>);
<a name="l378"><span class="linenum"> 378</span></a>              echo &quot;&lt;blockquote&gt;<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>&lt;/blockquote&gt;\n&quot;;
<a name="l379"><span class="linenum"> 379</span></a>          }
<a name="l380"><span class="linenum"> 380</span></a>          echo &quot;&lt;strong&gt;<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>&lt;/strong&gt;\n&quot;;
<a name="l381"><span class="linenum"> 381</span></a>          echo &quot;&lt;/div&gt;&quot;;
<a name="l382"><span class="linenum"> 382</span></a>      }
<a name="l383"><span class="linenum"> 383</span></a>  
<a name="l384"><span class="linenum"> 384</span></a>      <span class="comment">/**</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">     * Import for questiontype plugins</span>
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">     * @param mixed $data The segment of data containing the question</span>
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">     * @param object $question processed (so far) by standard import code if appropriate</span>
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">     * @param object $extra mixed any additional format specific data that may be passed by the format</span>
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment">     * @param string $qtypehint hint about a question type from format</span>
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment">     * @return object question object suitable for save_options() or false if cannot handle</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">     */</span>
<a name="l392"><span class="linenum"> 392</span></a>      public function <a class="function" onClick="logFunction('try_importing_using_qtypes')" href="../../_functions/try_importing_using_qtypes.html" onMouseOver="funcPopup(event,'try_importing_using_qtypes')">try_importing_using_qtypes</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a> = null, <a class="var it812" onMouseOver="hilite(812)" onMouseOut="lolite()" onClick="logVariable('extra')" href="../../_variables/extra.html">$extra</a> = null,
<a name="l393"><span class="linenum"> 393</span></a>              <a class="var it5872" onMouseOver="hilite(5872)" onMouseOut="lolite()" onClick="logVariable('qtypehint')" href="../../_variables/qtypehint.html">$qtypehint</a> = '') {
<a name="l394"><span class="linenum"> 394</span></a>  
<a name="l395"><span class="linenum"> 395</span></a>          return false;
<a name="l396"><span class="linenum"> 396</span></a>      }
<a name="l397"><span class="linenum"> 397</span></a>  
<a name="l398"><span class="linenum"> 398</span></a>      function <a class="function" onClick="logFunction('importpreprocess')" href="../../_functions/importpreprocess.html" onMouseOver="funcPopup(event,'importpreprocess')">importpreprocess</a>() {
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">        // Does any pre-processing that may be desired</span>
<a name="l400"><span class="linenum"> 400</span></a>          return true;
<a name="l401"><span class="linenum"> 401</span></a>      }
<a name="l402"><span class="linenum"> 402</span></a>  
<a name="l403"><span class="linenum"> 403</span></a>      function <a class="function" onClick="logFunction('importprocess')" href="../../_functions/importprocess.html" onMouseOver="funcPopup(event,'importprocess')">importprocess</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>) {
<a name="l404"><span class="linenum"> 404</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l405"><span class="linenum"> 405</span></a>  
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">    /// Processes a given file.  There's probably little need to change this</span>
<a name="l407"><span class="linenum"> 407</span></a>          <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>          if (! <a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('lines')" href="../../_variables/lines.html">$lines</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('readdata')" href="../../_functions/readdata.html" onMouseOver="funcPopup(event,'readdata')">readdata</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>)) {
<a name="l410"><span class="linenum"> 410</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(&quot;File could not be read, or was empty&quot;);
<a name="l411"><span class="linenum"> 411</span></a>              return false;
<a name="l412"><span class="linenum"> 412</span></a>          }
<a name="l413"><span class="linenum"> 413</span></a>  
<a name="l414"><span class="linenum"> 414</span></a>          if (! <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('readquestions')" href="../../_functions/readquestions.html" onMouseOver="funcPopup(event,'readquestions')">readquestions</a>(<a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('lines')" href="../../_variables/lines.html">$lines</a>)) {   // Extract all the questions
<a name="l415"><span class="linenum"> 415</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(&quot;There are no questions in this file!&quot;);
<a name="l416"><span class="linenum"> 416</span></a>              return false;
<a name="l417"><span class="linenum"> 417</span></a>          }
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">        //Avoid category as question type</span>
<a name="l420"><span class="linenum"> 420</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('importcount', 'lesson',
<a name="l421"><span class="linenum"> 421</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_questions')" href="../../_functions/count_questions.html" onMouseOver="funcPopup(event,'count_questions')">count_questions</a>(<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a>)), 'notifysuccess');
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = 0;
<a name="l424"><span class="linenum"> 424</span></a>          <a class="var it27533" onMouseOver="hilite(27533)" onMouseOut="lolite()" onClick="logVariable('addquestionontop')" href="../../_variables/addquestionontop.html">$addquestionontop</a> = false;
<a name="l425"><span class="linenum"> 425</span></a>          if (<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> == 0) {
<a name="l426"><span class="linenum"> 426</span></a>              <a class="var it27533" onMouseOver="hilite(27533)" onMouseOut="lolite()" onClick="logVariable('addquestionontop')" href="../../_variables/addquestionontop.html">$addquestionontop</a> = true;
<a name="l427"><span class="linenum"> 427</span></a>              <a class="var it27534" onMouseOver="hilite(27534)" onMouseOut="lolite()" onClick="logVariable('updatelessonpage')" href="../../_variables/updatelessonpage.html">$updatelessonpage</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lesson_pages', array('lessonid' =&gt; <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'prevpageid' =&gt; 0));
<a name="l428"><span class="linenum"> 428</span></a>          } else {
<a name="l429"><span class="linenum"> 429</span></a>              <a class="var it27534" onMouseOver="hilite(27534)" onMouseOut="lolite()" onClick="logVariable('updatelessonpage')" href="../../_variables/updatelessonpage.html">$updatelessonpage</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lesson_pages', array('lessonid' =&gt; <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'id' =&gt; <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>));
<a name="l430"><span class="linenum"> 430</span></a>          }
<a name="l431"><span class="linenum"> 431</span></a>  
<a name="l432"><span class="linenum"> 432</span></a>          <a class="var it27535" onMouseOver="hilite(27535)" onMouseOut="lolite()" onClick="logVariable('unsupportedquestions')" href="../../_variables/unsupportedquestions.html">$unsupportedquestions</a> = 0;
<a name="l433"><span class="linenum"> 433</span></a>  
<a name="l434"><span class="linenum"> 434</span></a>          foreach (<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a> as <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>) {   // Process and store each question
<a name="l435"><span class="linenum"> 435</span></a>              switch (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>) {
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">                //TODO: Bad way to bypass category in data... Quickfix for MDL-27964</span>
<a name="l437"><span class="linenum"> 437</span></a>                  case 'category':
<a name="l438"><span class="linenum"> 438</span></a>                      break;
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">                // the good ones</span>
<a name="l440"><span class="linenum"> 440</span></a>                  case 'shortanswer' :
<a name="l441"><span class="linenum"> 441</span></a>                  case 'numerical' :
<a name="l442"><span class="linenum"> 442</span></a>                  case 'truefalse' :
<a name="l443"><span class="linenum"> 443</span></a>                  case 'multichoice' :
<a name="l444"><span class="linenum"> 444</span></a>                  case 'match' :
<a name="l445"><span class="linenum"> 445</span></a>                  case 'essay' :
<a name="l446"><span class="linenum"> 446</span></a>                      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>++;
<a name="l447"><span class="linenum"> 447</span></a>  
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">                    //Show nice formated question in one line.</span>
<a name="l449"><span class="linenum"> 449</span></a>                      echo &quot;&lt;hr&gt;&lt;p&gt;&lt;b&gt;<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>&lt;/b&gt;. &quot;.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('format_question_text')" href="../../_functions/format_question_text.html" onMouseOver="funcPopup(event,'format_question_text')">format_question_text</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>).&quot;&lt;/p&gt;&quot;;
<a name="l450"><span class="linenum"> 450</span></a>  
<a name="l451"><span class="linenum"> 451</span></a>                      <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a> = new stdClass;
<a name="l452"><span class="linenum"> 452</span></a>                      <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('lessonid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l453"><span class="linenum"> 453</span></a>                      <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('qtype')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('qtypeconvert')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/qtypeconvert.html">qtypeconvert</a>[<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>];
<a name="l454"><span class="linenum"> 454</span></a>                      switch (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>) {
<a name="l455"><span class="linenum"> 455</span></a>                          case 'shortanswer' :
<a name="l456"><span class="linenum"> 456</span></a>                              if (isset(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('usecase')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/usecase.html">usecase</a>)) {
<a name="l457"><span class="linenum"> 457</span></a>                                  <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('qoption')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/qoption.html">qoption</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('usecase')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/usecase.html">usecase</a>;
<a name="l458"><span class="linenum"> 458</span></a>                              }
<a name="l459"><span class="linenum"> 459</span></a>                              break;
<a name="l460"><span class="linenum"> 460</span></a>                          case 'multichoice' :
<a name="l461"><span class="linenum"> 461</span></a>                              if (isset(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('single')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/single.html">single</a>)) {
<a name="l462"><span class="linenum"> 462</span></a>                                  <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('qoption')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/qoption.html">qoption</a> = !<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('single')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/single.html">single</a>;
<a name="l463"><span class="linenum"> 463</span></a>                              }
<a name="l464"><span class="linenum"> 464</span></a>                              break;
<a name="l465"><span class="linenum"> 465</span></a>                      }
<a name="l466"><span class="linenum"> 466</span></a>                      <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('timecreated')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a>;
<a name="l467"><span class="linenum"> 467</span></a>                      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('name')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> != <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('questiontext')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/questiontext.html">questiontext</a>) {
<a name="l468"><span class="linenum"> 468</span></a>                          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('title')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('name')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l469"><span class="linenum"> 469</span></a>                      } else {
<a name="l470"><span class="linenum"> 470</span></a>                          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('title')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = &quot;Page <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>&quot;;
<a name="l471"><span class="linenum"> 471</span></a>                      }
<a name="l472"><span class="linenum"> 472</span></a>                      <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('contents')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/contents.html">contents</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('questiontext')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/questiontext.html">questiontext</a>;
<a name="l473"><span class="linenum"> 473</span></a>                      <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('contentsformat')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/contentsformat.html">contentsformat</a> = isset(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('questionformat')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/questionformat.html">questionformat</a>) ? <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('questionformat')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/questionformat.html">questionformat</a> : <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l474"><span class="linenum"> 474</span></a>  
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">                    // set up page links</span>
<a name="l476"><span class="linenum"> 476</span></a>                      if (<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>) {
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">                        // the new page follows on from this page</span>
<a name="l478"><span class="linenum"> 478</span></a>                          if (!<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;lesson_pages&quot;, array(&quot;id&quot; =&gt; <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>))) {
<a name="l479"><span class="linenum"> 479</span></a>                              <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidpageid', 'lesson');
<a name="l480"><span class="linenum"> 480</span></a>                          }
<a name="l481"><span class="linenum"> 481</span></a>                          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> = <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>;
<a name="l482"><span class="linenum"> 482</span></a>                          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a>;
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment">                        // insert the page and reset $pageid</span>
<a name="l484"><span class="linenum"> 484</span></a>                          <a class="var it1253" onMouseOver="hilite(1253)" onMouseOut="lolite()" onClick="logVariable('newpageid')" href="../../_variables/newpageid.html">$newpageid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_pages&quot;, <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>);
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment">                        // update the linked list</span>
<a name="l486"><span class="linenum"> 486</span></a>                          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;nextpageid&quot;, <a class="var it1253" onMouseOver="hilite(1253)" onMouseOut="lolite()" onClick="logVariable('newpageid')" href="../../_variables/newpageid.html">$newpageid</a>, array(&quot;id&quot; =&gt; <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>));
<a name="l487"><span class="linenum"> 487</span></a>                      } else {
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment">                        // new page is the first page</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">                        // get the existing (first) page (if any)</span>
<a name="l490"><span class="linenum"> 490</span></a>                          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array (&quot;lessonid&quot; =&gt; <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;prevpageid&quot; =&gt; 0);
<a name="l491"><span class="linenum"> 491</span></a>                          if (!<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_select')" href="../../_functions/get_record_select.html" onMouseOver="funcPopup(event,'get_record_select')">get_record_select</a>(&quot;lesson_pages&quot;, &quot;lessonid = :lessonid AND prevpageid = :prevpageid&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment">                            // there are no existing pages</span>
<a name="l493"><span class="linenum"> 493</span></a>                              <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> = 0; <span class="comment">// this is a first page</span>
<a name="l494"><span class="linenum"> 494</span></a>                              <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = 0; <span class="comment">// this is the only page</span>
<a name="l495"><span class="linenum"> 495</span></a>                              <a class="var it1253" onMouseOver="hilite(1253)" onMouseOut="lolite()" onClick="logVariable('newpageid')" href="../../_variables/newpageid.html">$newpageid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_pages&quot;, <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>);
<a name="l496"><span class="linenum"> 496</span></a>                          } else {
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">                            // there are existing pages put this at the start</span>
<a name="l498"><span class="linenum"> 498</span></a>                              <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> = 0; <span class="comment">// this is a first page</span>
<a name="l499"><span class="linenum"> 499</span></a>                              <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l500"><span class="linenum"> 500</span></a>                              <a class="var it1253" onMouseOver="hilite(1253)" onMouseOut="lolite()" onClick="logVariable('newpageid')" href="../../_variables/newpageid.html">$newpageid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_pages&quot;, <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>);
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment">                            // update the linked list</span>
<a name="l502"><span class="linenum"> 502</span></a>                              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;prevpageid&quot;, <a class="var it1253" onMouseOver="hilite(1253)" onMouseOut="lolite()" onClick="logVariable('newpageid')" href="../../_variables/newpageid.html">$newpageid</a>, array(&quot;id&quot; =&gt; <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l503"><span class="linenum"> 503</span></a>                          }
<a name="l504"><span class="linenum"> 504</span></a>                      }
<a name="l505"><span class="linenum"> 505</span></a>  
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">                    // reset $pageid and put the page ID in $question, used in save_question_option()</span>
<a name="l507"><span class="linenum"> 507</span></a>                      <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it1253" onMouseOver="hilite(1253)" onMouseOut="lolite()" onClick="logVariable('newpageid')" href="../../_variables/newpageid.html">$newpageid</a>;
<a name="l508"><span class="linenum"> 508</span></a>                      <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it1253" onMouseOver="hilite(1253)" onMouseOut="lolite()" onClick="logVariable('newpageid')" href="../../_variables/newpageid.html">$newpageid</a>;
<a name="l509"><span class="linenum"> 509</span></a>  
<a name="l510"><span class="linenum"> 510</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('questionids')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/questionids.html">questionids</a>[] = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l511"><span class="linenum"> 511</span></a>  
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">                    // Import images in question text.</span>
<a name="l513"><span class="linenum"> 513</span></a>                      if (isset(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('questiontextitemid')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/questiontextitemid.html">questiontextitemid</a>)) {
<a name="l514"><span class="linenum"> 514</span></a>                          <a class="var it446" onMouseOver="hilite(446)" onMouseOut="lolite()" onClick="logVariable('questiontext')" href="../../_variables/questiontext.html">$questiontext</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('questiontextitemid')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/questiontextitemid.html">questiontextitemid</a>,
<a name="l515"><span class="linenum"> 515</span></a>                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('importcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/importcontext.html">importcontext</a>-&gt;id, 'mod_lesson', 'page_contents', <a class="var it1253" onMouseOver="hilite(1253)" onMouseOut="lolite()" onClick="logVariable('newpageid')" href="../../_variables/newpageid.html">$newpageid</a>,
<a name="l516"><span class="linenum"> 516</span></a>                                  null , <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('questiontext')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/questiontext.html">questiontext</a>);
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">                        // Update content with recoded urls.</span>
<a name="l518"><span class="linenum"> 518</span></a>                          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;contents&quot;, <a class="var it446" onMouseOver="hilite(446)" onMouseOut="lolite()" onClick="logVariable('questiontext')" href="../../_variables/questiontext.html">$questiontext</a>, array(&quot;id&quot; =&gt; <a class="var it1253" onMouseOver="hilite(1253)" onMouseOut="lolite()" onClick="logVariable('newpageid')" href="../../_variables/newpageid.html">$newpageid</a>));
<a name="l519"><span class="linenum"> 519</span></a>                      }
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">                    // Now to save all the answers and type-specific options</span>
<a name="l522"><span class="linenum"> 522</span></a>  
<a name="l523"><span class="linenum"> 523</span></a>                      <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('lessonid')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>; <span class="comment">// needed for foreign key</span>
<a name="l524"><span class="linenum"> 524</span></a>                      <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('qtypeconvert')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/qtypeconvert.html">qtypeconvert</a>[<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>];
<a name="l525"><span class="linenum"> 525</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="function" onClick="logFunction('lesson_save_question_options')" href="../../_functions/lesson_save_question_options.html" onMouseOver="funcPopup(event,'lesson_save_question_options')">lesson_save_question_options</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('importcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/importcontext.html">importcontext</a>-&gt;id);
<a name="l526"><span class="linenum"> 526</span></a>  
<a name="l527"><span class="linenum"> 527</span></a>                      if (!empty(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('error')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/error.html">error</a>)) {
<a name="l528"><span class="linenum"> 528</span></a>                          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('error')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/error.html">error</a>);
<a name="l529"><span class="linenum"> 529</span></a>                          return false;
<a name="l530"><span class="linenum"> 530</span></a>                      }
<a name="l531"><span class="linenum"> 531</span></a>  
<a name="l532"><span class="linenum"> 532</span></a>                      if (!empty(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('notice')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/notice.html">notice</a>)) {
<a name="l533"><span class="linenum"> 533</span></a>                          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('notice')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/notice.html">notice</a>);
<a name="l534"><span class="linenum"> 534</span></a>                          return true;
<a name="l535"><span class="linenum"> 535</span></a>                      }
<a name="l536"><span class="linenum"> 536</span></a>                      break;
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">            // the Bad ones</span>
<a name="l538"><span class="linenum"> 538</span></a>                  default :
<a name="l539"><span class="linenum"> 539</span></a>                      <a class="var it27535" onMouseOver="hilite(27535)" onMouseOut="lolite()" onClick="logVariable('unsupportedquestions')" href="../../_variables/unsupportedquestions.html">$unsupportedquestions</a>++;
<a name="l540"><span class="linenum"> 540</span></a>                      break;
<a name="l541"><span class="linenum"> 541</span></a>              }
<a name="l542"><span class="linenum"> 542</span></a>          }
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment">        // Update the prev links if there were existing pages.</span>
<a name="l544"><span class="linenum"> 544</span></a>          if (!empty(<a class="var it27534" onMouseOver="hilite(27534)" onMouseOut="lolite()" onClick="logVariable('updatelessonpage')" href="../../_variables/updatelessonpage.html">$updatelessonpage</a>)) {
<a name="l545"><span class="linenum"> 545</span></a>              if (<a class="var it27533" onMouseOver="hilite(27533)" onMouseOut="lolite()" onClick="logVariable('addquestionontop')" href="../../_variables/addquestionontop.html">$addquestionontop</a>) {
<a name="l546"><span class="linenum"> 546</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;prevpageid&quot;, <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array(&quot;id&quot; =&gt; <a class="var it27534" onMouseOver="hilite(27534)" onMouseOut="lolite()" onClick="logVariable('updatelessonpage')" href="../../_variables/updatelessonpage.html">$updatelessonpage</a>-&gt;<a onClick="logVariable('id')" class="var it44768" onMouseOver="hilite(44768)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l547"><span class="linenum"> 547</span></a>              } else {
<a name="l548"><span class="linenum"> 548</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;prevpageid&quot;, <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array(&quot;id&quot; =&gt; <a class="var it27534" onMouseOver="hilite(27534)" onMouseOut="lolite()" onClick="logVariable('updatelessonpage')" href="../../_variables/updatelessonpage.html">$updatelessonpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it44768" onMouseOver="hilite(44768)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a>));
<a name="l549"><span class="linenum"> 549</span></a>              }
<a name="l550"><span class="linenum"> 550</span></a>          }
<a name="l551"><span class="linenum"> 551</span></a>          if (<a class="var it27535" onMouseOver="hilite(27535)" onMouseOut="lolite()" onClick="logVariable('unsupportedquestions')" href="../../_variables/unsupportedquestions.html">$unsupportedquestions</a>) {
<a name="l552"><span class="linenum"> 552</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('unknownqtypesnotimported', 'lesson', <a class="var it27535" onMouseOver="hilite(27535)" onMouseOut="lolite()" onClick="logVariable('unsupportedquestions')" href="../../_variables/unsupportedquestions.html">$unsupportedquestions</a>));
<a name="l553"><span class="linenum"> 553</span></a>          }
<a name="l554"><span class="linenum"> 554</span></a>          return true;
<a name="l555"><span class="linenum"> 555</span></a>      }
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>      <span class="comment">/**</span>
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment">     * Count all non-category questions in the questions array.</span>
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment">     *</span>
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">     * @param array questions An array of question objects.</span>
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">     * @return int The count.</span>
<a name="l562"><span class="linenum"> 562</span></a>  <span class="comment">     *</span>
<a name="l563"><span class="linenum"> 563</span></a>  <span class="comment">     */</span>
<a name="l564"><span class="linenum"> 564</span></a>      protected function <a class="function" onClick="logFunction('count_questions')" href="../../_functions/count_questions.html" onMouseOver="funcPopup(event,'count_questions')">count_questions</a>(<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a>) {
<a name="l565"><span class="linenum"> 565</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = 0;
<a name="l566"><span class="linenum"> 566</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a>)) {
<a name="l567"><span class="linenum"> 567</span></a>              return <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>;
<a name="l568"><span class="linenum"> 568</span></a>          }
<a name="l569"><span class="linenum"> 569</span></a>          foreach (<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a> as <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>) {
<a name="l570"><span class="linenum"> 570</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>) || !isset(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>) ||
<a name="l571"><span class="linenum"> 571</span></a>                      (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> == 'category')) {
<a name="l572"><span class="linenum"> 572</span></a>                  continue;
<a name="l573"><span class="linenum"> 573</span></a>              }
<a name="l574"><span class="linenum"> 574</span></a>              <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>++;
<a name="l575"><span class="linenum"> 575</span></a>          }
<a name="l576"><span class="linenum"> 576</span></a>          return <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>;
<a name="l577"><span class="linenum"> 577</span></a>      }
<a name="l578"><span class="linenum"> 578</span></a>  
<a name="l579"><span class="linenum"> 579</span></a>      function <a class="function" onClick="logFunction('readdata')" href="../../_functions/readdata.html" onMouseOver="funcPopup(event,'readdata')">readdata</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>) {
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">    /// Returns complete file with an array, one item per line</span>
<a name="l581"><span class="linenum"> 581</span></a>  
<a name="l582"><span class="linenum"> 582</span></a>          if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>)) {
<a name="l583"><span class="linenum"> 583</span></a>              <a class="var it5889" onMouseOver="hilite(5889)" onMouseOut="lolite()" onClick="logVariable('filearray')" href="../../_variables/filearray.html">$filearray</a> = <a class="phpfunction" onClick="logFunction('file')" href="../../_functions/file.html" onMouseOver="phpfuncPopup(event,'file')">file</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>);
<a name="l584"><span class="linenum"> 584</span></a>  
<a name="l585"><span class="linenum"> 585</span></a>  <span class="comment">            /// Check for Macintosh OS line returns (ie file on one line), and fix</span>
<a name="l586"><span class="linenum"> 586</span></a>              if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;/\r/&quot;, <a class="var it5889" onMouseOver="hilite(5889)" onMouseOut="lolite()" onClick="logVariable('filearray')" href="../../_variables/filearray.html">$filearray</a>[0]) AND !<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;/\n/&quot;, <a class="var it5889" onMouseOver="hilite(5889)" onMouseOut="lolite()" onClick="logVariable('filearray')" href="../../_variables/filearray.html">$filearray</a>[0])) {
<a name="l587"><span class="linenum"> 587</span></a>                  return <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;\r&quot;, <a class="var it5889" onMouseOver="hilite(5889)" onMouseOut="lolite()" onClick="logVariable('filearray')" href="../../_variables/filearray.html">$filearray</a>[0]);
<a name="l588"><span class="linenum"> 588</span></a>              } else {
<a name="l589"><span class="linenum"> 589</span></a>                  return <a class="var it5889" onMouseOver="hilite(5889)" onMouseOut="lolite()" onClick="logVariable('filearray')" href="../../_variables/filearray.html">$filearray</a>;
<a name="l590"><span class="linenum"> 590</span></a>              }
<a name="l591"><span class="linenum"> 591</span></a>          }
<a name="l592"><span class="linenum"> 592</span></a>          return false;
<a name="l593"><span class="linenum"> 593</span></a>      }
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>      protected function <a class="function" onClick="logFunction('readquestions')" href="../../_functions/readquestions.html" onMouseOver="funcPopup(event,'readquestions')">readquestions</a>(<a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('lines')" href="../../_variables/lines.html">$lines</a>) {
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment">    /// Parses an array of lines into an array of questions,</span>
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment">    /// where each item is a question object as defined by</span>
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment">    /// readquestion().   Questions are defined as anything</span>
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment">    /// between blank lines.</span>
<a name="l600"><span class="linenum"> 600</span></a>  
<a name="l601"><span class="linenum"> 601</span></a>          <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a> = array();
<a name="l602"><span class="linenum"> 602</span></a>          <a class="var it5890" onMouseOver="hilite(5890)" onMouseOut="lolite()" onClick="logVariable('currentquestion')" href="../../_variables/currentquestion.html">$currentquestion</a> = array();
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>          foreach (<a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('lines')" href="../../_variables/lines.html">$lines</a> as <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>) {
<a name="l605"><span class="linenum"> 605</span></a>              <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>);
<a name="l606"><span class="linenum"> 606</span></a>              if (empty(<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>)) {
<a name="l607"><span class="linenum"> 607</span></a>                  if (!empty(<a class="var it5890" onMouseOver="hilite(5890)" onMouseOut="lolite()" onClick="logVariable('currentquestion')" href="../../_variables/currentquestion.html">$currentquestion</a>)) {
<a name="l608"><span class="linenum"> 608</span></a>                      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('readquestion')" href="../../_functions/readquestion.html" onMouseOver="funcPopup(event,'readquestion')">readquestion</a>(<a class="var it5890" onMouseOver="hilite(5890)" onMouseOut="lolite()" onClick="logVariable('currentquestion')" href="../../_variables/currentquestion.html">$currentquestion</a>)) {
<a name="l609"><span class="linenum"> 609</span></a>                          <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a>[] = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>;
<a name="l610"><span class="linenum"> 610</span></a>                      }
<a name="l611"><span class="linenum"> 611</span></a>                      <a class="var it5890" onMouseOver="hilite(5890)" onMouseOut="lolite()" onClick="logVariable('currentquestion')" href="../../_variables/currentquestion.html">$currentquestion</a> = array();
<a name="l612"><span class="linenum"> 612</span></a>                  }
<a name="l613"><span class="linenum"> 613</span></a>              } else {
<a name="l614"><span class="linenum"> 614</span></a>                  <a class="var it5890" onMouseOver="hilite(5890)" onMouseOut="lolite()" onClick="logVariable('currentquestion')" href="../../_variables/currentquestion.html">$currentquestion</a>[] = <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>;
<a name="l615"><span class="linenum"> 615</span></a>              }
<a name="l616"><span class="linenum"> 616</span></a>          }
<a name="l617"><span class="linenum"> 617</span></a>  
<a name="l618"><span class="linenum"> 618</span></a>          if (!empty(<a class="var it5890" onMouseOver="hilite(5890)" onMouseOut="lolite()" onClick="logVariable('currentquestion')" href="../../_variables/currentquestion.html">$currentquestion</a>)) {  // There may be a final question
<a name="l619"><span class="linenum"> 619</span></a>              if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('readquestion')" href="../../_functions/readquestion.html" onMouseOver="funcPopup(event,'readquestion')">readquestion</a>(<a class="var it5890" onMouseOver="hilite(5890)" onMouseOut="lolite()" onClick="logVariable('currentquestion')" href="../../_variables/currentquestion.html">$currentquestion</a>)) {
<a name="l620"><span class="linenum"> 620</span></a>                  <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a>[] = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>;
<a name="l621"><span class="linenum"> 621</span></a>              }
<a name="l622"><span class="linenum"> 622</span></a>          }
<a name="l623"><span class="linenum"> 623</span></a>  
<a name="l624"><span class="linenum"> 624</span></a>          return <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a>;
<a name="l625"><span class="linenum"> 625</span></a>      }
<a name="l626"><span class="linenum"> 626</span></a>  
<a name="l627"><span class="linenum"> 627</span></a>  
<a name="l628"><span class="linenum"> 628</span></a>      protected function <a class="function" onClick="logFunction('readquestion')" href="../../_functions/readquestion.html" onMouseOver="funcPopup(event,'readquestion')">readquestion</a>(<a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('lines')" href="../../_variables/lines.html">$lines</a>) {
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">    /// Given an array of lines known to define a question in</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">    /// this format, this function converts it into a question</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment">    /// object suitable for processing and insertion into Moodle.</span>
<a name="l632"><span class="linenum"> 632</span></a>  
<a name="l633"><span class="linenum"> 633</span></a>  <span class="comment">        // We should never get there unless the qformat plugin is broken.</span>
<a name="l634"><span class="linenum"> 634</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Question format plugin is missing important code: readquestion.');
<a name="l635"><span class="linenum"> 635</span></a>  
<a name="l636"><span class="linenum"> 636</span></a>          return null;
<a name="l637"><span class="linenum"> 637</span></a>      }
<a name="l638"><span class="linenum"> 638</span></a>  
<a name="l639"><span class="linenum"> 639</span></a>      <span class="comment">/**</span>
<a name="l640"><span class="linenum"> 640</span></a>  <span class="comment">     * Construct a reasonable default question name, based on the start of the question text.</span>
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">     * @param string $questiontext the question text.</span>
<a name="l642"><span class="linenum"> 642</span></a>  <span class="comment">     * @param string $default default question name to use if the constructed one comes out blank.</span>
<a name="l643"><span class="linenum"> 643</span></a>  <span class="comment">     * @return string a reasonable question name.</span>
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment">     */</span>
<a name="l645"><span class="linenum"> 645</span></a>      public function <a class="function" onClick="logFunction('create_default_question_name')" href="../../_functions/create_default_question_name.html" onMouseOver="funcPopup(event,'create_default_question_name')">create_default_question_name</a>(<a class="var it446" onMouseOver="hilite(446)" onMouseOut="lolite()" onClick="logVariable('questiontext')" href="../../_variables/questiontext.html">$questiontext</a>, <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a>) {
<a name="l646"><span class="linenum"> 646</span></a>          <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('clean_question_name')" href="../../_functions/clean_question_name.html" onMouseOver="funcPopup(event,'clean_question_name')">clean_question_name</a>(<a class="function" onClick="logFunction('shorten_text')" href="../../_functions/shorten_text.html" onMouseOver="funcPopup(event,'shorten_text')">shorten_text</a>(<a class="var it446" onMouseOver="hilite(446)" onMouseOut="lolite()" onClick="logVariable('questiontext')" href="../../_variables/questiontext.html">$questiontext</a>, 80));
<a name="l647"><span class="linenum"> 647</span></a>          if (<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) {
<a name="l648"><span class="linenum"> 648</span></a>              return <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>;
<a name="l649"><span class="linenum"> 649</span></a>          } else {
<a name="l650"><span class="linenum"> 650</span></a>              return <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a>;
<a name="l651"><span class="linenum"> 651</span></a>          }
<a name="l652"><span class="linenum"> 652</span></a>      }
<a name="l653"><span class="linenum"> 653</span></a>  
<a name="l654"><span class="linenum"> 654</span></a>      <span class="comment">/**</span>
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment">     * Ensure that a question name does not contain anything nasty, and will fit in the DB field.</span>
<a name="l656"><span class="linenum"> 656</span></a>  <span class="comment">     * @param string $name the raw question name.</span>
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment">     * @return string a safe question name.</span>
<a name="l658"><span class="linenum"> 658</span></a>  <span class="comment">     */</span>
<a name="l659"><span class="linenum"> 659</span></a>      public function <a class="function" onClick="logFunction('clean_question_name')" href="../../_functions/clean_question_name.html" onMouseOver="funcPopup(event,'clean_question_name')">clean_question_name</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) {
<a name="l660"><span class="linenum"> 660</span></a>          <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>); <span class="comment">// Matches what the question editing form does.</span>
<a name="l661"><span class="linenum"> 661</span></a>          <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l662"><span class="linenum"> 662</span></a>          <a class="var it5894" onMouseOver="hilite(5894)" onMouseOut="lolite()" onClick="logVariable('trimlength')" href="../../_variables/trimlength.html">$trimlength</a> = 251;
<a name="l663"><span class="linenum"> 663</span></a>          while (<a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) &gt; 255 &amp;&amp; <a class="var it5894" onMouseOver="hilite(5894)" onMouseOut="lolite()" onClick="logVariable('trimlength')" href="../../_variables/trimlength.html">$trimlength</a> &gt; 0) {
<a name="l664"><span class="linenum"> 664</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('shorten_text')" href="../../_functions/shorten_text.html" onMouseOver="funcPopup(event,'shorten_text')">shorten_text</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it5894" onMouseOver="hilite(5894)" onMouseOut="lolite()" onClick="logVariable('trimlength')" href="../../_variables/trimlength.html">$trimlength</a>);
<a name="l665"><span class="linenum"> 665</span></a>              <a class="var it5894" onMouseOver="hilite(5894)" onMouseOut="lolite()" onClick="logVariable('trimlength')" href="../../_variables/trimlength.html">$trimlength</a> -= 10;
<a name="l666"><span class="linenum"> 666</span></a>          }
<a name="l667"><span class="linenum"> 667</span></a>          return <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>;
<a name="l668"><span class="linenum"> 668</span></a>      }
<a name="l669"><span class="linenum"> 669</span></a>  
<a name="l670"><span class="linenum"> 670</span></a>      <span class="comment">/**</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">     * return an &quot;empty&quot; question</span>
<a name="l672"><span class="linenum"> 672</span></a>  <span class="comment">     * Somewhere to specify question parameters that are not handled</span>
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">     * by import but are required db fields.</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment">     * This should not be overridden.</span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment">     * @return object default question</span>
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment">     */</span>
<a name="l677"><span class="linenum"> 677</span></a>      protected function <a class="function" onClick="logFunction('defaultquestion')" href="../../_functions/defaultquestion.html" onMouseOver="funcPopup(event,'defaultquestion')">defaultquestion</a>() {
<a name="l678"><span class="linenum"> 678</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l679"><span class="linenum"> 679</span></a>          static <a class="var it5891" onMouseOver="hilite(5891)" onMouseOut="lolite()" onClick="logVariable('defaultshuffleanswers')" href="../../_variables/defaultshuffleanswers.html">$defaultshuffleanswers</a> = null;
<a name="l680"><span class="linenum"> 680</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it5891" onMouseOver="hilite(5891)" onMouseOut="lolite()" onClick="logVariable('defaultshuffleanswers')" href="../../_variables/defaultshuffleanswers.html">$defaultshuffleanswers</a>)) {
<a name="l681"><span class="linenum"> 681</span></a>              <a class="var it5891" onMouseOver="hilite(5891)" onMouseOut="lolite()" onClick="logVariable('defaultshuffleanswers')" href="../../_variables/defaultshuffleanswers.html">$defaultshuffleanswers</a> = <a class="function" onClick="logFunction('get_config')" href="../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('quiz', 'shuffleanswers');
<a name="l682"><span class="linenum"> 682</span></a>          }
<a name="l683"><span class="linenum"> 683</span></a>  
<a name="l684"><span class="linenum"> 684</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a> = new stdClass();
<a name="l685"><span class="linenum"> 685</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('shuffleanswers')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/shuffleanswers.html">shuffleanswers</a> = <a class="var it5891" onMouseOver="hilite(5891)" onMouseOut="lolite()" onClick="logVariable('defaultshuffleanswers')" href="../../_variables/defaultshuffleanswers.html">$defaultshuffleanswers</a>;
<a name="l686"><span class="linenum"> 686</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('defaultmark')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/defaultmark.html">defaultmark</a> = 1;
<a name="l687"><span class="linenum"> 687</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('image')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/image.html">image</a> = &quot;&quot;;
<a name="l688"><span class="linenum"> 688</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('usecase')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/usecase.html">usecase</a> = 0;
<a name="l689"><span class="linenum"> 689</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('multiplier')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/multiplier.html">multiplier</a> = array();
<a name="l690"><span class="linenum"> 690</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('questiontextformat')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/questiontextformat.html">questiontextformat</a> = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l691"><span class="linenum"> 691</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('generalfeedback')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/generalfeedback.html">generalfeedback</a> = '';
<a name="l692"><span class="linenum"> 692</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('generalfeedbackformat')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/generalfeedbackformat.html">generalfeedbackformat</a> = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l693"><span class="linenum"> 693</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('correctfeedback')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/correctfeedback.html">correctfeedback</a> = '';
<a name="l694"><span class="linenum"> 694</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('partiallycorrectfeedback')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/partiallycorrectfeedback.html">partiallycorrectfeedback</a> = '';
<a name="l695"><span class="linenum"> 695</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('incorrectfeedback')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/incorrectfeedback.html">incorrectfeedback</a> = '';
<a name="l696"><span class="linenum"> 696</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('answernumbering')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/answernumbering.html">answernumbering</a> = 'abc';
<a name="l697"><span class="linenum"> 697</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('penalty')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/penalty.html">penalty</a> = 0.3333333;
<a name="l698"><span class="linenum"> 698</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('length')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/length.html">length</a> = 1;
<a name="l699"><span class="linenum"> 699</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qoption')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/qoption.html">qoption</a> = 0;
<a name="l700"><span class="linenum"> 700</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('layout')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/layout.html">layout</a> = 1;
<a name="l701"><span class="linenum"> 701</span></a>  
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment">        // this option in case the questiontypes class wants</span>
<a name="l703"><span class="linenum"> 703</span></a>  <span class="comment">        // to know where the data came from</span>
<a name="l704"><span class="linenum"> 704</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('export_process')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/export_process.html">export_process</a> = true;
<a name="l705"><span class="linenum"> 705</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('import_process')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/import_process.html">import_process</a> = true;
<a name="l706"><span class="linenum"> 706</span></a>  
<a name="l707"><span class="linenum"> 707</span></a>          return <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>;
<a name="l708"><span class="linenum"> 708</span></a>      }
<a name="l709"><span class="linenum"> 709</span></a>  
<a name="l710"><span class="linenum"> 710</span></a>      function <a class="function" onClick="logFunction('importpostprocess')" href="../../_functions/importpostprocess.html" onMouseOver="funcPopup(event,'importpostprocess')">importpostprocess</a>() {
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment">        /// Does any post-processing that may be desired</span>
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">        /// Argument is a simple array of question ids that</span>
<a name="l713"><span class="linenum"> 713</span></a>  <span class="comment">        /// have just been added.</span>
<a name="l714"><span class="linenum"> 714</span></a>          return true;
<a name="l715"><span class="linenum"> 715</span></a>      }
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>      <span class="comment">/**</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment">     * Convert the question text to plain text, so it can safely be displayed</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment">     * during import to let the user see roughly what is going on.</span>
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment">     */</span>
<a name="l721"><span class="linenum"> 721</span></a>      protected function <a class="function" onClick="logFunction('format_question_text')" href="../../_functions/format_question_text.html" onMouseOver="funcPopup(event,'format_question_text')">format_question_text</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>) {
<a name="l722"><span class="linenum"> 722</span></a>          <a class="var it8419" onMouseOver="hilite(8419)" onMouseOut="lolite()" onClick="logVariable('formatoptions')" href="../../_variables/formatoptions.html">$formatoptions</a> = new stdClass();
<a name="l723"><span class="linenum"> 723</span></a>          <a class="var it8419" onMouseOver="hilite(8419)" onMouseOut="lolite()" onClick="logVariable('formatoptions')" href="../../_variables/formatoptions.html">$formatoptions</a>-&gt;<a onClick="logVariable('noclean')" class="var it43693" onMouseOver="hilite(43693)" onMouseOut="lolite()" href="../../_variables/noclean.html">noclean</a> = true;
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment">        // The html_to_text call strips out all URLs, but format_text complains</span>
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment">        // if it finds @@PLUGINFILE@@ tokens. So, we need to replace</span>
<a name="l726"><span class="linenum"> 726</span></a>  <span class="comment">        // @@PLUGINFILE@@ with a real URL, but it doesn't matter what.</span>
<a name="l727"><span class="linenum"> 727</span></a>  <span class="comment">        // We use http://example.com/.</span>
<a name="l728"><span class="linenum"> 728</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('@@PLUGINFILE@@/', 'http://example.com/', <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('questiontext')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/questiontext.html">questiontext</a>);
<a name="l729"><span class="linenum"> 729</span></a>          return <a class="function" onClick="logFunction('html_to_text')" href="../../_functions/html_to_text.html" onMouseOver="funcPopup(event,'html_to_text')">html_to_text</a>(<a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>,
<a name="l730"><span class="linenum"> 730</span></a>                  <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('questiontextformat')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/questiontextformat.html">questiontextformat</a>, <a class="var it8419" onMouseOver="hilite(8419)" onMouseOut="lolite()" onClick="logVariable('formatoptions')" href="../../_variables/formatoptions.html">$formatoptions</a>), 0, false);
<a name="l731"><span class="linenum"> 731</span></a>      }
<a name="l732"><span class="linenum"> 732</span></a>  
<a name="l733"><span class="linenum"> 733</span></a>      <span class="comment">/**</span>
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment">     * Since the lesson module tries to re-use the question bank import classes in</span>
<a name="l735"><span class="linenum"> 735</span></a>  <span class="comment">     * a crazy way, this is necessary to stop things breaking.</span>
<a name="l736"><span class="linenum"> 736</span></a>  <span class="comment">     */</span>
<a name="l737"><span class="linenum"> 737</span></a>      protected function <a class="function" onClick="logFunction('add_blank_combined_feedback')" href="../../_functions/add_blank_combined_feedback.html" onMouseOver="funcPopup(event,'add_blank_combined_feedback')">add_blank_combined_feedback</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>) {
<a name="l738"><span class="linenum"> 738</span></a>          return <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>;
<a name="l739"><span class="linenum"> 739</span></a>      }
<a name="l740"><span class="linenum"> 740</span></a>  }
<a name="l741"><span class="linenum"> 741</span></a>  
<a name="l742"><span class="linenum"> 742</span></a>  
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment">/**</span>
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment"> * Since the lesson module tries to re-use the question bank import classes in</span>
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment"> * a crazy way, this is necessary to stop things breaking. This should be exactly</span>
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment"> * the same as the class defined in question/format.php.</span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment"> */</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('qformat_based_on_xml')" href="../../_classes/qformat_based_on_xml.html" onMouseOver="classPopup(event,'qformat_based_on_xml')">qformat_based_on_xml</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('qformat_default')" href="../../_classes/qformat_default.html" onMouseOver="classPopup(event,'qformat_default')">qformat_default</a> {
<a name="l749"><span class="linenum"> 749</span></a>      <span class="comment">/**</span>
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">     * A lot of imported files contain unwanted entities.</span>
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment">     * This method tries to clean up all known problems.</span>
<a name="l752"><span class="linenum"> 752</span></a>  <span class="comment">     * @param string str string to correct</span>
<a name="l753"><span class="linenum"> 753</span></a>  <span class="comment">     * @return string the corrected string</span>
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment">     */</span>
<a name="l755"><span class="linenum"> 755</span></a>      public function <a class="function" onClick="logFunction('cleaninput')" href="../../_functions/cleaninput.html" onMouseOver="funcPopup(event,'cleaninput')">cleaninput</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>) {
<a name="l756"><span class="linenum"> 756</span></a>  
<a name="l757"><span class="linenum"> 757</span></a>          <a class="var it5905" onMouseOver="hilite(5905)" onMouseOut="lolite()" onClick="logVariable('html_code_list')" href="../../_variables/html_code_list.html">$html_code_list</a> = array(
<a name="l758"><span class="linenum"> 758</span></a>              &quot;&amp;#039;&quot; =&gt; &quot;'&quot;,
<a name="l759"><span class="linenum"> 759</span></a>              &quot;&amp;#8217;&quot; =&gt; &quot;'&quot;,
<a name="l760"><span class="linenum"> 760</span></a>              &quot;&amp;#8220;&quot; =&gt; &quot;\&quot;&quot;,
<a name="l761"><span class="linenum"> 761</span></a>              &quot;&amp;#8221;&quot; =&gt; &quot;\&quot;&quot;,
<a name="l762"><span class="linenum"> 762</span></a>              &quot;&amp;#8211;&quot; =&gt; &quot;-&quot;,
<a name="l763"><span class="linenum"> 763</span></a>              &quot;&amp;#8212;&quot; =&gt; &quot;-&quot;,
<a name="l764"><span class="linenum"> 764</span></a>          );
<a name="l765"><span class="linenum"> 765</span></a>          <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> = <a class="phpfunction" onClick="logFunction('strtr')" href="../../_functions/strtr.html" onMouseOver="phpfuncPopup(event,'strtr')">strtr</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>, <a class="var it5905" onMouseOver="hilite(5905)" onMouseOut="lolite()" onClick="logVariable('html_code_list')" href="../../_variables/html_code_list.html">$html_code_list</a>);
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment">        // Use core_text entities_to_utf8 function to convert only numerical entities.</span>
<a name="l767"><span class="linenum"> 767</span></a>          <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> = <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('entities_to_utf8')" href="../../_functions/entities_to_utf8.html" onMouseOver="funcPopup(event,'entities_to_utf8')">entities_to_utf8</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>, false);
<a name="l768"><span class="linenum"> 768</span></a>          return <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>;
<a name="l769"><span class="linenum"> 769</span></a>      }
<a name="l770"><span class="linenum"> 770</span></a>  
<a name="l771"><span class="linenum"> 771</span></a>      <span class="comment">/**</span>
<a name="l772"><span class="linenum"> 772</span></a>  <span class="comment">     * Return the array moodle is expecting</span>
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment">     * for an HTML text. No processing is done on $text.</span>
<a name="l774"><span class="linenum"> 774</span></a>  <span class="comment">     * qformat classes that want to process $text</span>
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">     * for instance to import external images files</span>
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment">     * and recode urls in $text must overwrite this method.</span>
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment">     * @param array $text some HTML text string</span>
<a name="l778"><span class="linenum"> 778</span></a>  <span class="comment">     * @return array with keys text, format and files.</span>
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment">     */</span>
<a name="l780"><span class="linenum"> 780</span></a>      public function <a class="function" onClick="logFunction('text_field')" href="../../_functions/text_field.html" onMouseOver="funcPopup(event,'text_field')">text_field</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>) {
<a name="l781"><span class="linenum"> 781</span></a>          return array(
<a name="l782"><span class="linenum"> 782</span></a>              'text' =&gt; <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>),
<a name="l783"><span class="linenum"> 783</span></a>              'format' =&gt; <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>,
<a name="l784"><span class="linenum"> 784</span></a>              'files' =&gt; array(),
<a name="l785"><span class="linenum"> 785</span></a>          );
<a name="l786"><span class="linenum"> 786</span></a>      }
<a name="l787"><span class="linenum"> 787</span></a>  
<a name="l788"><span class="linenum"> 788</span></a>      <span class="comment">/**</span>
<a name="l789"><span class="linenum"> 789</span></a>  <span class="comment">     * Return the value of a node, given a path to the node</span>
<a name="l790"><span class="linenum"> 790</span></a>  <span class="comment">     * if it doesn't exist return the default value.</span>
<a name="l791"><span class="linenum"> 791</span></a>  <span class="comment">     * @param array xml data to read</span>
<a name="l792"><span class="linenum"> 792</span></a>  <span class="comment">     * @param array path path to node expressed as array</span>
<a name="l793"><span class="linenum"> 793</span></a>  <span class="comment">     * @param mixed default</span>
<a name="l794"><span class="linenum"> 794</span></a>  <span class="comment">     * @param bool istext process as text</span>
<a name="l795"><span class="linenum"> 795</span></a>  <span class="comment">     * @param string error if set value must exist, return false and issue message if not</span>
<a name="l796"><span class="linenum"> 796</span></a>  <span class="comment">     * @return mixed value</span>
<a name="l797"><span class="linenum"> 797</span></a>  <span class="comment">     */</span>
<a name="l798"><span class="linenum"> 798</span></a>      public function <a class="function" onClick="logFunction('getpath')" href="../../_functions/getpath.html" onMouseOver="funcPopup(event,'getpath')">getpath</a>(<a class="var it1525" onMouseOver="hilite(1525)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>, <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>, <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a>, <a class="var it5906" onMouseOver="hilite(5906)" onMouseOut="lolite()" onClick="logVariable('istext')" href="../../_variables/istext.html">$istext</a>=false, <a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../_variables/error.html">$error</a>='') {
<a name="l799"><span class="linenum"> 799</span></a>          foreach (<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a> as <a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>) {
<a name="l800"><span class="linenum"> 800</span></a>              if (!isset(<a class="var it1525" onMouseOver="hilite(1525)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>[<a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>])) {
<a name="l801"><span class="linenum"> 801</span></a>                  if (!empty(<a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../_variables/error.html">$error</a>)) {
<a name="l802"><span class="linenum"> 802</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('error')" href="../../_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../_variables/error.html">$error</a>);
<a name="l803"><span class="linenum"> 803</span></a>                      return false;
<a name="l804"><span class="linenum"> 804</span></a>                  } else {
<a name="l805"><span class="linenum"> 805</span></a>                      return <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a>;
<a name="l806"><span class="linenum"> 806</span></a>                  }
<a name="l807"><span class="linenum"> 807</span></a>              }
<a name="l808"><span class="linenum"> 808</span></a>  
<a name="l809"><span class="linenum"> 809</span></a>              <a class="var it1525" onMouseOver="hilite(1525)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a> = <a class="var it1525" onMouseOver="hilite(1525)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>[<a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>];
<a name="l810"><span class="linenum"> 810</span></a>          }
<a name="l811"><span class="linenum"> 811</span></a>  
<a name="l812"><span class="linenum"> 812</span></a>          if (<a class="var it5906" onMouseOver="hilite(5906)" onMouseOut="lolite()" onClick="logVariable('istext')" href="../../_variables/istext.html">$istext</a>) {
<a name="l813"><span class="linenum"> 813</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_string')" href="../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it1525" onMouseOver="hilite(1525)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>)) {
<a name="l814"><span class="linenum"> 814</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('error')" href="../../_functions/error.html" onMouseOver="funcPopup(event,'error')">error</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('invalidxml', 'qformat_xml'));
<a name="l815"><span class="linenum"> 815</span></a>              }
<a name="l816"><span class="linenum"> 816</span></a>              <a class="var it1525" onMouseOver="hilite(1525)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it1525" onMouseOver="hilite(1525)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>);
<a name="l817"><span class="linenum"> 817</span></a>          }
<a name="l818"><span class="linenum"> 818</span></a>  
<a name="l819"><span class="linenum"> 819</span></a>          return <a class="var it1525" onMouseOver="hilite(1525)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>;
<a name="l820"><span class="linenum"> 820</span></a>      }
<a name="l821"><span class="linenum"> 821</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'shorten_text': ['shorten_text', 'Given some text (which may contain HTML) and an ideal length, this function truncates the text neatly on a word boundary if possible ', [['lib','moodlelib.php',7822]], 87],
'try_importing_using_qtypes': ['try_importing_using_qtypes', 'Import for questiontype plugins Do not override. ', [['question','format.php',236],['mod/lesson','format.php',384]], 5],
'get': ['get', 'Retrieves a variable reference from the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',36],['cache/stores/static','lib.php',220],['cache','disabledlib.php',55],['search/classes','document.php',299],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','DataTransfer.php',162],['lib/google/src/Google/Service','DataTransfer.php',208],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','AdSense.php',1076],['lib/google/src/Google/Service','AdSense.php',1155],['lib/google/src/Google/Service','AdSense.php',1303],['lib/google/src/Google/Service','AdSense.php',1519],['lib/google/src/Google/Service','AdSense.php',1631],['lib/google/src/Google/Service','AdSense.php',1773],['lib/google/src/Google/Service','AdSense.php',2047],['lib/google/src/Google/Service','Replicapool.php',420],['lib/google/src/Google/Service','Replicapool.php',575],['lib/google/src/Google/Service','Tasks.php',323],['lib/google/src/Google/Service','Tasks.php',442],['lib/google/src/Google/Service','Partners.php',362],['lib/google/src/Google/Service','AndroidPublisher.php',1247],['lib/google/src/Google/Service','AndroidPublisher.php',1349],['lib/google/src/Google/Service','AndroidPublisher.php',1510],['lib/google/src/Google/Service','AndroidPublisher.php',1573],['lib/google/src/Google/Service','AndroidPublisher.php',1796],['lib/google/src/Google/Service','AndroidPublisher.php',1884],['lib/google/src/Google/Service','AndroidPublisher.php',1948],['lib/google/src/Google/Service','AndroidPublisher.php',2098],['lib/google/src/Google/Service','AndroidPublisher.php',2223],['lib/google/src/Google/Service','AndroidPublisher.php',2293],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',146],['lib/google/src/Google/Service','YouTubeReporting.php',273],['lib/google/src/Google/Service','YouTubeReporting.php',326],['lib/google/src/Google/Service','Reseller.php',295],['lib/google/src/Google/Service','Reseller.php',458],['lib/google/src/Google/Cache','Memcache.php',74],['lib','filelib.php',3382],['lib','filelib.php',3630],['lib/google/src/Google/Service','Computeaccounts.php',432],['lib/google/src/Google/Service','Computeaccounts.php',512],['lib/google/src/Google/Service','Computeaccounts.php',683],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','MapsEngine.php',1530],['lib/google/src/Google/Service','MapsEngine.php',1709],['lib/google/src/Google/Service','MapsEngine.php',2006],['lib/google/src/Google/Service','MapsEngine.php',2268],['lib/google/src/Google/Service','MapsEngine.php',2360],['lib/google/src/Google/Service','MapsEngine.php',2666],['lib/google/src/Google/Service','MapsEngine.php',2927],['lib/google/src/Google/Service','MapsEngine.php',3118],['lib/google/src/Google/Cache','File.php',47],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Dns.php',307],['lib/google/src/Google/Service','Dns.php',393],['lib/google/src/Google/Service','Dns.php',444],['cache/classes','loaders.php',278],['cache/classes','loaders.php',1422],['cache/classes','loaders.php',1731],['lib/google/src/Google/Service','Appengine.php',320],['lib/google/src/Google/Service','Appengine.php',368],['lib/google/src/Google/Service','Appengine.php',472],['lib/google/src/Google/Service','Appengine.php',525],['lib/google/src/Google/Service','Urlshortener.php',109],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['lib/google/src/Google/Service','AdExchangeBuyer.php',759],['lib/google/src/Google/Service','AdExchangeBuyer.php',829],['lib/google/src/Google/Service','AdExchangeBuyer.php',870],['lib/google/src/Google/Service','AdExchangeBuyer.php',952],['lib/google/src/Google/Service','AdExchangeBuyer.php',1041],['lib/google/src/Google/Service','AdExchangeBuyer.php',1111],['lib/google/src/Google/Service','AdExchangeBuyer.php',1251],['lib/google/src/Google/Service','AdExchangeBuyer.php',1293],['lib/google/src/Google/Service','AdExchangeBuyer.php',1417],['lib/google/src/Google/Service','AdExchangeBuyer.php',1471],['lib/google/src/Google/Service','AdExchangeBuyer.php',1576],['lib/google/src/Google/Service','Books.php',1456],['lib/google/src/Google/Service','Books.php',1625],['lib/google/src/Google/Service','Books.php',1677],['lib/google/src/Google/Service','Books.php',1752],['lib/google/src/Google/Service','Books.php',2086],['lib/google/src/Google/Service','Books.php',2205],['lib/google/src/Google/Service','Books.php',2262],['lib/google/src/Google/Service','Books.php',2345],['lib/google/src/Google/Service','Books.php',2418],['lib/google/src/Google/Service','Books.php',2450],['lib/google/src/Google/Service','Oauth2.php',165],['lib/google/src/Google/Service','Oauth2.php',202],['lib/google/src/Google/Service','Analytics.php',1988],['lib/google/src/Google/Service','Analytics.php',2037],['lib/google/src/Google/Service','Analytics.php',2084],['lib/google/src/Google/Service','Analytics.php',2308],['lib/google/src/Google/Service','Analytics.php',2422],['lib/google/src/Google/Service','Analytics.php',2550],['lib/google/src/Google/Service','Analytics.php',2670],['lib/google/src/Google/Service','Analytics.php',2763],['lib/google/src/Google/Service','Analytics.php',2889],['lib/google/src/Google/Service','Analytics.php',3108],['lib/google/src/Google/Service','Analytics.php',3245],['lib/google/src/Google/Service','Analytics.php',3336],['lib/google/src/Google/Service','Analytics.php',3422],['lib/google/src/Google/Service','Analytics.php',3533],['lib/google/src/Google/Service','Coordinate.php',509],['lib/google/src/Google/Service','Coordinate.php',689],['lib','oauthlib.php',302],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/google/src/Google/Service','DeploymentManager.php',468],['lib/google/src/Google/Service','DeploymentManager.php',632],['lib/google/src/Google/Service','DeploymentManager.php',693],['lib/google/src/Google/Service','DeploymentManager.php',752],['lib/google/src/Google/Service','Blogger.php',945],['lib/google/src/Google/Service','Blogger.php',976],['lib/google/src/Google/Service','Blogger.php',1080],['lib/google/src/Google/Service','Blogger.php',1199],['lib/google/src/Google/Service','Blogger.php',1241],['lib/google/src/Google/Service','Blogger.php',1382],['lib/google/src/Google/Service','Blogger.php',1465],['lib/google/src/Google/Service','Blogger.php',1686],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['question/engine','states.php',116],['lib/google/src/Google/Service','Dataflow.php',292],['lib/horde/framework/Horde','Variables.php',135],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['competency/classes','persistent.php',86],['lib/google/src/Google/Service','CloudUserAccounts.php',542],['lib/google/src/Google/Service','CloudUserAccounts.php',643],['lib/google/src/Google/Service','CloudUserAccounts.php',908],['lib/google/src/Google/Service','Cloudresourcemanager.php',248],['lib/google/src/Google/Service','Cloudresourcemanager.php',427],['lib/editor/tinymce/classes','plugin.php',447],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','TagManager.php',950],['lib/google/src/Google/Service','TagManager.php',1036],['lib/google/src/Google/Service','TagManager.php',1128],['lib/google/src/Google/Service','TagManager.php',1280],['lib/google/src/Google/Service','TagManager.php',1373],['lib/google/src/Google/Service','TagManager.php',1467],['lib/google/src/Google/Service','TagManager.php',1561],['lib/google/src/Google/Service','TagManager.php',1711],['mod/lesson','locallib.php',3248],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapoolupdater.php',338],['lib/google/src/Google/Service','Replicapoolupdater.php',489],['lib/google/src/Google/Service','Bigquery.php',552],['lib/google/src/Google/Service','Bigquery.php',668],['lib/google/src/Google/Service','Bigquery.php',879],['lib/google/src/Google/Service','ShoppingContent.php',1066],['lib/google/src/Google/Service','ShoppingContent.php',1183],['lib/google/src/Google/Service','ShoppingContent.php',1283],['lib/google/src/Google/Service','ShoppingContent.php',1346],['lib/google/src/Google/Service','ShoppingContent.php',1464],['lib/google/src/Google/Service','ShoppingContent.php',1578],['lib/google/src/Google/Service','ShoppingContent.php',1773],['lib/google/src/Google/Service','ShoppingContent.php',1986],['lib/google/src/Google/Service','ShoppingContent.php',2063],['lib/google/src/Google/Service','Webmasters.php',371],['lib/google/src/Google/Service','Webmasters.php',464],['lib/google/src/Google/Service','Webmasters.php',540],['lib','navigationlib.php',384],['lib','navigationlib.php',836],['lib','navigationlib.php',2704],['lib','navigationlib.php',3139],['lib/google/src/Google/Service','Clouddebugger.php',399],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['lib/portfolio','exporter.php',134],['lib/google/src/Google/Service','Container.php',329],['lib/google/src/Google/Service','Container.php',396],['backup/cc/cc_lib/gral_lib','cssparser.php',147],['lib/horde/framework/Horde/Support','Array.php',30],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Storage.php',1059],['lib/google/src/Google/Service','Storage.php',1175],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1476],['lib/google/src/Google/Service','Storage.php',1709],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Genomics.php',660],['lib/google/src/Google/Service','Genomics.php',749],['lib/google/src/Google/Service','Genomics.php',918],['lib/google/src/Google/Service','Genomics.php',1007],['lib/google/src/Google/Service','Genomics.php',1185],['lib/google/src/Google/Service','Genomics.php',1268],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1475],['lib/google/src/Google/Service','Games.php',1220],['lib/google/src/Google/Service','Games.php',1339],['lib/google/src/Google/Service','Games.php',1441],['lib/google/src/Google/Service','Games.php',1699],['lib/google/src/Google/Service','Games.php',1806],['lib/google/src/Google/Service','Games.php',1948],['lib/google/src/Google/Service','Games.php',2082],['lib/google/src/Google/Service','Licensing.php',239],['lib/google/src/Google/Service','Fitness.php',417],['lib/google/src/Google/Service','Fitness.php',543],['lib/google/src/Google/Service','Reports.php',375],['lib/google/src/Google/Service','Reports.php',409],['lib/google/src/Google/Service','Gmail.php',779],['lib/google/src/Google/Service','Gmail.php',937],['lib/google/src/Google/Service','Gmail.php',1030],['lib/google/src/Google/Service','Gmail.php',1206],['lib/google/src/Google/Service','Gmail.php',1250],['lib/google/src/Google/Service','Taskqueue.php',264],['lib/google/src/Google/Service','Taskqueue.php',308],['lib/mustache/src/Mustache','HelperCollection.php',81],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Doubleclicksearch.php',257],['lib/google/src/Google/Service','Doubleclicksearch.php',381],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/google/src/Google/Service','Autoscaler.php',331],['lib/google/src/Google/Service','Autoscaler.php',445],['lib/google/src/Google/Service','AdExchangeSeller.php',444],['lib/google/src/Google/Service','AdExchangeSeller.php',552],['lib/google/src/Google/Service','AdExchangeSeller.php',666],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Prediction.php',276],['lib/behat/classes','behat_context_helper.php',63],['lib/google/src/Google/Service','SiteVerification.php',152],['lib/google/src/Google/Service','Drive.php',1333],['lib/google/src/Google/Service','Drive.php',1369],['lib/google/src/Google/Service','Drive.php',1422],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1617],['lib/google/src/Google/Service','Drive.php',1792],['lib/google/src/Google/Service','Drive.php',2054],['lib/google/src/Google/Service','Drive.php',2124],['lib/google/src/Google/Service','Drive.php',2256],['lib/google/src/Google/Service','Drive.php',2350],['lib/google/src/Google/Service','Drive.php',2418],['lib/google/src/Google/Service','Drive.php',2537],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Proximitybeacon.php',348],['lib/google/src/Google/Service','Groupssettings.php',108],['lib/google/src/Google/Service','Directory.php',1698],['lib/google/src/Google/Service','Directory.php',1766],['lib/google/src/Google/Service','Directory.php',1860],['lib/google/src/Google/Service','Directory.php',1930],['lib/google/src/Google/Service','Directory.php',2003],['lib/google/src/Google/Service','Directory.php',2072],['lib/google/src/Google/Service','Directory.php',2238],['lib/google/src/Google/Service','Directory.php',2365],['lib/google/src/Google/Service','Directory.php',2435],['lib/google/src/Google/Service','Directory.php',2531],['lib/google/src/Google/Service','Directory.php',2666],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',2850],['lib/google/src/Google/Service','Directory.php',2954],['lib/google/src/Google/Service','Directory.php',3012],['lib/google/src/Google/Service','Directory.php',3287],['lib/google/src/Google/Service','Fusiontables.php',659],['lib/google/src/Google/Service','Fusiontables.php',826],['lib/google/src/Google/Service','Fusiontables.php',950],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/google/src/Google/Service','AdSenseHost.php',645],['lib/google/src/Google/Service','AdSenseHost.php',686],['lib/google/src/Google/Service','AdSenseHost.php',751],['lib/google/src/Google/Service','AdSenseHost.php',918],['lib/google/src/Google/Service','AdSenseHost.php',1026],['lib/google/src/Google/Service','Plus.php',343],['lib/google/src/Google/Service','Plus.php',418],['lib/google/src/Google/Service','Plus.php',525],['lib/google/src/Google/Service','Mirror.php',438],['lib/google/src/Google/Service','Mirror.php',523],['lib/google/src/Google/Service','Mirror.php',563],['lib/google/src/Google/Service','Mirror.php',674],['lib/google/src/Google/Service','Mirror.php',786],['lib/google/src/Google/Service','AndroidEnterprise.php',1002],['lib/google/src/Google/Service','AndroidEnterprise.php',1109],['lib/google/src/Google/Service','AndroidEnterprise.php',1196],['lib/google/src/Google/Service','AndroidEnterprise.php',1312],['lib/google/src/Google/Service','AndroidEnterprise.php',1432],['lib/google/src/Google/Service','AndroidEnterprise.php',1524],['lib/google/src/Google/Service','AndroidEnterprise.php',1616],['lib/google/src/Google/Service','AndroidEnterprise.php',1705],['lib/google/src/Google/Service','AndroidEnterprise.php',1777],['lib/google/src/Google/Service','AndroidEnterprise.php',1879],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/testing/classes','nasty_strings.php',73],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/google/src/Google/Service','Playmoviespartner.php',411],['lib/google/src/Google/Service','Playmoviespartner.php',475],['lib/google/src/Google/Service','Playmoviespartner.php',580],['lib','coursecatlib.php',212],['lib/google/src/Google/Service','Cloudtrace.php',217],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['tag/classes','tag.php',190],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['competency/classes','url.php',55],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','Calendar.php',919],['lib/google/src/Google/Service','Calendar.php',1086],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1387],['lib/google/src/Google/Service','Calendar.php',1431],['lib/google/src/Google/Service','Calendar.php',1873],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['cache/stores/session','lib.php',225],['lib/google/src/Google/Service','Cloudbilling.php',162],['lib/google/src/Google/Service','PlusDomains.php',468],['lib/google/src/Google/Service','PlusDomains.php',593],['lib/google/src/Google/Service','PlusDomains.php',719],['lib/google/src/Google/Service','PlusDomains.php',813],['lib/google/src/Google/Service','Storagetransfer.php',248],['lib/google/src/Google/Service','Storagetransfer.php',295],['lib/google/src/Google/Service','Storagetransfer.php',396],['cache/stores/mongodb','lib.php',252],['lib/google/src/Google/Cache','Null.php',36],['lib/google/src/Google/Service','GamesConfiguration.php',265],['lib/google/src/Google/Service','GamesConfiguration.php',404],['cache/stores/file','lib.php',330],['cache/stores/memcached','lib.php',319],['lib/google/src/Google/Service','AppState.php',171],['lib/google/src/Google/Service','Resourceviews.php',354],['lib/google/src/Google/Service','Resourceviews.php',439],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','Classroom.php',484],['lib/google/src/Google/Service','Classroom.php',724],['lib/google/src/Google/Service','Classroom.php',830],['lib/google/src/Google/Service','Classroom.php',951],['lib/google/src/Google/Service','Classroom.php',1010],['lib/google/src/Google/Service','SQLAdmin.php',804],['lib/google/src/Google/Service','SQLAdmin.php',874],['lib/google/src/Google/Service','SQLAdmin.php',1076],['lib/google/src/Google/Service','SQLAdmin.php',1298],['lib/google/src/Google/Service','SQLAdmin.php',1387],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/google/src/Google/Service','Compute.php',4037],['lib/google/src/Google/Service','Compute.php',4166],['lib/google/src/Google/Service','Compute.php',4299],['lib/google/src/Google/Service','Compute.php',4460],['lib/google/src/Google/Service','Compute.php',4590],['lib/google/src/Google/Service','Compute.php',4686],['lib/google/src/Google/Service','Compute.php',4845],['lib/google/src/Google/Service','Compute.php',4957],['lib/google/src/Google/Service','Compute.php',5048],['lib/google/src/Google/Service','Compute.php',5188],['lib/google/src/Google/Service','Compute.php',5264],['lib/google/src/Google/Service','Compute.php',5394],['lib/google/src/Google/Service','Compute.php',5542],['lib/google/src/Google/Service','Compute.php',5726],['lib/google/src/Google/Service','Compute.php',6001],['lib/google/src/Google/Service','Compute.php',6171],['lib/google/src/Google/Service','Compute.php',6369],['lib/google/src/Google/Service','Compute.php',6595],['lib/google/src/Google/Service','Compute.php',6655],['lib/google/src/Google/Service','Compute.php',6732],['lib/google/src/Google/Service','Compute.php',6808],['lib/google/src/Google/Service','Compute.php',6914],['lib/google/src/Google/Service','Compute.php',6977],['lib/google/src/Google/Service','Compute.php',7052],['lib/google/src/Google/Service','Compute.php',7148],['lib/google/src/Google/Service','Compute.php',7223],['lib/google/src/Google/Service','Compute.php',7315],['lib/google/src/Google/Service','Compute.php',7425],['lib/google/src/Google/Service','Compute.php',7586],['lib/google/src/Google/Service','Compute.php',7750],['lib/google/src/Google/Service','Compute.php',7955],['lib/google/src/Google/Service','Compute.php',8050],['lib/google/src/Google/Service','Compute.php',8226],['lib/google/src/Google/Service','Compute.php',8321],['lib/google/src/Google/Service','Compute.php',8384],['lib/google/src/Google/Service','Pubsub.php',255],['lib/google/src/Google/Service','Pubsub.php',394],['lib/google/src/Google/Cache','Apc.php',52],['lib/google/src/Google/Service','Dfareporting.php',4559],['lib/google/src/Google/Service','Dfareporting.php',4587],['lib/google/src/Google/Service','Dfareporting.php',4629],['lib/google/src/Google/Service','Dfareporting.php',4671],['lib/google/src/Google/Service','Dfareporting.php',4779],['lib/google/src/Google/Service','Dfareporting.php',4867],['lib/google/src/Google/Service','Dfareporting.php',5014],['lib/google/src/Google/Service','Dfareporting.php',5117],['lib/google/src/Google/Service','Dfareporting.php',5308],['lib/google/src/Google/Service','Dfareporting.php',5427],['lib/google/src/Google/Service','Dfareporting.php',5525],['lib/google/src/Google/Service','Dfareporting.php',5580],['lib/google/src/Google/Service','Dfareporting.php',5683],['lib/google/src/Google/Service','Dfareporting.php',5769],['lib/google/src/Google/Service','Dfareporting.php',5891],['lib/google/src/Google/Service','Dfareporting.php',5997],['lib/google/src/Google/Service','Dfareporting.php',6105],['lib/google/src/Google/Service','Dfareporting.php',6255],['lib/google/src/Google/Service','Dfareporting.php',6314],['lib/google/src/Google/Service','Dfareporting.php',6411],['lib/google/src/Google/Service','Dfareporting.php',6529],['lib/google/src/Google/Service','Dfareporting.php',6609],['lib/google/src/Google/Service','Dfareporting.php',6746],['lib/google/src/Google/Service','Dfareporting.php',6862],['lib/google/src/Google/Service','Dfareporting.php',6940],['lib/google/src/Google/Service','Dfareporting.php',7011],['lib/google/src/Google/Service','Dfareporting.php',7131],['lib/google/src/Google/Service','Dfareporting.php',7172],['lib/google/src/Google/Service','Dfareporting.php',7214],['lib/google/src/Google/Service','Dfareporting.php',7256],['lib/google/src/Google/Service','Dfareporting.php',7320],['lib/google/src/Google/Service','Dfareporting.php',7378],['lib/google/src/Google/Service','Dfareporting.php',7517],['lib/google/src/Google/Service','Dfareporting.php',7640],['lib/google/src/Google/Service','Dfareporting.php',7771],['lib/google/src/Google/Service','Dfareporting.php',7812],['lib/google/src/Google/Service','Dfareporting.php',7853],['lib/google/src/Google/Service','Dfareporting.php',7935],['lib/google/src/Google/Service','Dfareporting.php',7995],['lib/google/src/Google/Service','Dfareporting.php',8116],['lib/google/src/Google/Service','Dfareporting.php',8258],['lib/google/src/Google/Service','Dfareporting.php',8307],['lib/google/src/Google/Service','Dfareporting.php',8421],['lib/google/src/Google/Service','Dfareporting.php',8482],['lib/google/src/Google/Service','Dfareporting.php',8584],['lib/google/src/Google/Service','Dfareporting.php',8643],['lib/google/src/Google/Service','Dfareporting.php',8682],['lib/google/src/Google/Service','Dfareporting.php',8724],['lib/google/src/Google/Service','Dfareporting.php',8782],['lib/google/src/Google/Service','Manager.php',259],['lib/google/src/Google/Service','Manager.php',338],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['lib','webdavlib.php',264]], 21532],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'getpath': ['getpath', 'Return the value of a node, given a path to the node if it doesn\'t exist return the default value. ', [['question','format.php',987],['lib/htmlpurifier/HTMLPurifier','Bootstrap.php',53],['lib/google/src/Google/Service','Appengine.php',1548],['lib/google/src/Google/Service','Appengine.php',1673],['lib/xmldb','xmldb_structure.php',51],['lib/minify/lib/Minify/Cache','File.php',114],['auth/cas/CAS/CAS/PGTStorage','File.php',60],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',103],['lib/google/src/Google/Service','Webmasters.php',1146],['lib/google/src/Google/Service','Clouddebugger.php',1177],['lib/google/src/Google/Service','Datastore.php',617],['question/format/xml','format.php',117],['mod/lesson','format.php',788],['lib/lessphp/Tree','Import.php',103],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',82],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',292],['lib/google/src/Google/Service','Compute.php',17075],['lib/google/src/Google/Service','Compute.php',17294],['lib/google/src/Google/Service','Manager.php',913],['lib/google/src/Google/Service','Manager.php',1468]], 231],
'importpostprocess': ['importpostprocess', 'Override if any post-processing is required ', [['question','format.php',705],['question/format/blackboard_six','formatbase.php',68],['question/format/webct','format.php',252],['mod/lesson','format.php',710]], 2],
'strlen': ['strlen', 'Counts the number of characters. Unit-tested by Kasper (single byte charsets only) ', [['lib/typo3','class.t3lib_cs.php',1520],['lib/classes','text.php',305]], 1649],
'count_questions': ['count_questions', 'Count all non-category questions in the questions array. ', [['question','format.php',454],['mod/lesson','format.php',557]], 2],
'type': ['type', 'Fetches all nodes of a given type from this collection ', [['lib','navigationlib.php',903],['lib/phpexcel/PHPExcel/Calculation','Functions.php',573]], 132],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 370],
'format_text': ['format_text', 'Formats a text string coming from the search engine. ', [['search/classes','document.php',606],['lib/classes','grading_external.php',182],['search/engine/solr/classes','document.php',129],['lib','weblib.php',1158],['lib','tablelib.php',860],['lib','tablelib.php',1667],['question/type','questionbase.php',345]], 322],
'clean_question_name': ['clean_question_name', 'Ensure that a question name does not contain anything nasty, and will fit in the DB field. ', [['question','format.php',654],['mod/lesson','format.php',654]], 13],
'error': ['error', '', [['lib','deprecatedlib.php',863],['lib/minify/lib','FirePHP.php',416],['question','format.php',218],['lib/simplepie/library','SimplePie.php',1554],['lib/adodb','adodb-active-record.inc.php',546],['auth/cas/CAS','CAS.php',535],['lib/tcpdf','tcpdf.php',2915],['lib/lessphp/Tree','DefaultFunc.php',27],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',166],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',10815],['admin/tool/uploadcourse/classes','course.php',238],['lib/yuilib/3.17.2/cookie','cookie.js',34],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',124],['lib/htmlpurifier/HTMLPurifier','VarParser.php',143],['mod/lesson','format.php',364],['lib/tcpdf','tcpdf_parser.php',797],['lib/adodb','adodb-active-recordx.inc.php',575],['lib/yuilib/3.17.2/cookie','cookie-debug.js',34],['lib/tcpdf/include','tcpdf_filters.php',467],['lib/mustache/src/Mustache/Logger','AbstractLogger.php',61],['lib/lessphp','Parser.php',2615],['lib/horde/framework/Horde/Imap/Client','DateTime.php',69],['lib/simplepie/library/SimplePie','Misc.php',154],['lib/google/src/Google/Logger','Abstract.php',200],['lib/classes','notification.php',160],['lib/mustache/src/Mustache','Logger.php',72],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',224]], 936],
'readquestion': ['readquestion', 'Given the data known to define a question in this format, this function converts it into a question object suitable for processing and insertion into Moodle. ', [['question','format.php',688],['question/format/aiken','format.php',122],['question/format/missingword','format.php',58],['mod/lesson','format.php',628],['question/format/gift','format.php',161],['question/format/examview','format.php',186]], 18],
'add_blank_combined_feedback': ['add_blank_combined_feedback', 'Add a blank combined feedback to a question object. ', [['question','format.php',670],['mod/lesson','format.php',733]], 10],
'defaultquestion': ['defaultquestion', 'return an "empty" question Somewhere to specify question parameters that are not handled by import but are required db fields. This should not be overridden. ', [['question','format.php',601],['mod/lesson','format.php',670]], 17],
'lesson_save_question_options': ['lesson_save_question_options', 'Given some question info and some data about the the answers this function parses, organises and saves the question ', [['mod/lesson','format.php',52]], 1],
'text_field': ['text_field', 'Return the array moodle is expecting for an HTML text. No processing is done on $text. qformat classes that want to process $text for instance to import external images files and recode urls in $text must overwrite this method. ', [['question','format.php',970],['question/format/blackboard_six','formatbase.php',117],['question/format/aiken','format.php',114],['question/format/webct','format.php',222],['mod/lesson','format.php',771]], 34],
'get_record_select': ['get_record_select', 'Get a single database record as an object which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1481]], 19],
's': ['s', 'Count of attempts selected by $this->whichattempts ', [['mod/quiz/report/statistics/classes','calculated.php',91],['lib','weblib.php',84]], 1072],
'importpreprocess': ['importpreprocess', 'Perform any required pre-processing ', [['question','format.php',275],['mod/lesson','format.php',398]], 2],
'file_save_draft_area_files': ['file_save_draft_area_files', 'Saves files from a draft file area to a real one (merging the list of files). Can rewrite URLs in some content at the same time if desired. ', [['lib','filelib.php',778]], 61],
'cleaninput': ['cleaninput', 'A lot of imported files contain unwanted entities. This method tries to clean up all known problems. ', [['question','format.php',948],['mod/lesson','format.php',749]], 5],
'create_default_question_name': ['create_default_question_name', 'Construct a reasonable default question name, based on the start of the question text. ', [['question','format.php',639],['mod/lesson','format.php',639]], 15],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'readquestions': ['readquestions', 'Parse the array of objects into an array of questions. Each object is the content of a .dat questions file. This *could* burn memory - but it won\'t happen that much so fingers crossed! ', [['question/format/blackboard_six','format.php',182],['question','format.php',555],['question/format/blackboard_six','formatqti.php',36],['question/format/blackboard_six','formatpool.php',43],['question/format/aiken','format.php',60],['question/format/webct','format.php',335],['question/format/multianswer','format.php',42],['question/format/xml','format.php',913],['mod/lesson','format.php',595],['question/format/examview','format.php',159]], 30],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',481]], 1488],
'entities_to_utf8': ['entities_to_utf8', 'Converts numeric entities (UNICODE, eg. decimal (&#1234;) or hexadecimal (&#x1b;)) to UTF-8 multibyte chars ', [['lib/typo3','class.t3lib_cs.php',810],['lib/classes','text.php',548]], 11],
'lesson_import_question_files': ['lesson_import_question_files', 'Import files embedded into answer or response ', [['mod/lesson','format.php',31]], 9],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2849],['lib','outputrenderers.php',4412],['lib','outputrenderers.php',4496]], 540],
'set_importcontext': ['set_importcontext', '', [['mod/lesson','format.php',360]], 1],
'get_config': ['get_config', 'Config get method. ', [['lib/classes/antivirus','scanner.php',54],['competency/classes','competency_rule.php',59],['question/engine','bank.php',109],['admin/tool/log/classes/helper','store.php',63],['lib','moodlelib.php',1409],['lib','enrollib.php',1142],['lib/editor/tinymce/classes','plugin.php',73],['competency/classes','competency_rule_points.php',43],['search/classes','base.php',169],['mod/assign','assignmentplugin.php',345],['lib/portfolio','plugin.php',546]], 934],
'html_to_text': ['html_to_text', 'Given HTML text, make it into plain text using external function ', [['lib','weblib.php',1947],['question/type','questionbase.php',367]], 65],
'importprocess': ['importprocess', 'Process the file This method should not normally be overidden ', [['question','format.php',283],['mod/lesson','format.php',403]], 2],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'format_question_text': ['format_question_text', 'Convert the question text to plain text, so it can safely be displayed during import to let the user see roughly what is going on. ', [['question','format.php',936],['mod/lesson','format.php',717]], 2],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'readdata': ['readdata', 'Return content of all files containing questions, as an array one element for each file found, For each file, the corresponding element is an array of lines. ', [['question/format/blackboard_six','format.php',75],['question','format.php',533],['question/format/webct','format.php',264],['mod/lesson','format.php',579]], 2],
'provide_import': ['provide_import', '', [['question','format.php',61],['question/format/blackboard_six','formatbase.php',40],['question/format/aiken','format.php',56],['question/format/webct','format.php',172],['question/format/multianswer','format.php',38],['question/format/xml','format.php',49],['question/format/missingword','format.php',54],['mod/lesson','format.php',356],['question/format/gift','format.php',64],['question/format/examview','format.php',56]], 2],
'str_replace': ['str_replace', '', [], 1648],
'strtr': ['strtr', '', [], 63],
'preg_match': ['preg_match', '', [], 1286],
'file': ['file', '', [], 92],
'defined': ['defined', '', [], 4731],
'round': ['round', '', [], 1002],
'is_readable': ['is_readable', '', [], 196],
'is_object': ['is_object', '', [], 544],
'is_string': ['is_string', '', [], 536],
'explode': ['explode', '', [], 1572],
'is_array': ['is_array', '', [], 1608],
'trim': ['trim', '', [], 1948],
'count': ['count', '', [], 4095],
'time': ['time', '', [], 1959],
'is_null': ['is_null', '', [], 2003]};
CLASS_DATA={
'lesson': ['lesson', 'Class representation of a lesson ', [['mod/lesson','locallib.php',921]], 28],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'lesson_page_type_manager': ['lesson_page_type_manager', 'A management class for page types ', [['mod/lesson','locallib.php',3226]], 14],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 566],
'qformat_default': ['qformat_default', 'Base class for question import and export formats. ', [['question','format.php',30],['mod/lesson','format.php',341]], 11],
'qformat_based_on_xml': ['qformat_based_on_xml', '', [['question','format.php',946],['mod/lesson','format.php',743]], 2]};
CONST_DATA={
'LESSON_PAGE_ESSAY': ['LESSON_PAGE_ESSAY', '', [['mod/lesson/pagetypes','essay.php',29]], 7],
'LESSON_NEXTPAGE': ['LESSON_NEXTPAGE', '', [['mod/lesson','locallib.php',42]], 36],
'LESSON_PAGE_SHORTANSWER': ['LESSON_PAGE_SHORTANSWER', '', [['mod/lesson/pagetypes','shortanswer.php',29]], 5],
'LESSON_PAGE_MULTICHOICE': ['LESSON_PAGE_MULTICHOICE', '', [['mod/lesson/pagetypes','multichoice.php',29]], 6],
'LESSON_PAGE_NUMERICAL': ['LESSON_PAGE_NUMERICAL', '', [['mod/lesson/pagetypes','numerical.php',29]], 5],
'LESSON_THISPAGE': ['LESSON_THISPAGE', '', [['mod/lesson','locallib.php',36]], 11],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 1121],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'LESSON_PAGE_TRUEFALSE': ['LESSON_PAGE_TRUEFALSE', '', [['mod/lesson/pagetypes','truefalse.php',29]], 5],
'LESSON_PAGE_MATCHING': ['LESSON_PAGE_MATCHING', '', [['mod/lesson/pagetypes','matching.php',29]], 6],
'PARAM_TEXT': ['PARAM_TEXT', '', [['lib','moodlelib.php',228]], 542],
'FORMAT_MOODLE': ['FORMAT_MOODLE', '', [['lib','weblib.php',42]], 506]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
