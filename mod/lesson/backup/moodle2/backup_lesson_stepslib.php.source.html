<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/lesson/backup/moodle2/backup_lesson_stepslib.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='mod/lesson/backup/moodle2';
filename='backup_lesson_stepslib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/lesson/backup/moodle2/</a> -> <a href="backup_lesson_stepslib.php.html">backup_lesson_stepslib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="backup_lesson_stepslib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="backup_lesson_stepslib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * This file contains the backup structure for the lesson module</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * This is the &quot;graphical&quot; structure of the lesson module:</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> *</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> *         lesson ----------&gt;-------------|------------&gt;---------|-----------&gt;----------|-----------&gt;----------|</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> *      (CL,pk-&gt;id)                       |                      |                      |                      |</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> *            |                           |                      |                      |                      |</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> *            |                     lesson_grades          lesson_high_scores     lesson_timer           lesson_overrides</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> *            |            (UL, pk-&gt;id,fk-&gt;lessonid) (UL, pk-&gt;id,fk-&gt;lessonid) (UL, pk-&gt;id,fk-&gt;lessonid) (UL, pk-&gt;id,fk-&gt;lessonid)</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> *            |                           |</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> *            |                           |</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> *            |                           |</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *            |                           |</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> *      lesson_pages--------&gt;-------lesson_branch</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> *   (CL,pk-&gt;id,fk-&gt;lessonid)     (UL, pk-&gt;id,fk-&gt;pageid)</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> *            |</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> *            |</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> *            |</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> *      lesson_answers</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> *   (CL,pk-&gt;id,fk-&gt;pageid)</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> *            |</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> *            |</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> *            |</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> *      lesson_attempts</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> *  (UL,pk-&gt;id,fk-&gt;answerid)</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> *</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * Meaning: pk-&gt;primary key field of the table</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> *          fk-&gt;foreign key to link with parent</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> *          nt-&gt;nested field (recursive data)</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment"> *          CL-&gt;course level info</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment"> *          UL-&gt;user level info</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> *          files-&gt;table may have files)</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> *</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment"> * @package mod_lesson</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> * @copyright  2010 Sam Hemelryk</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> */</span>
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">/**</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * Structure step class that informs a backup task how to backup the lesson module.</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> *</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment"> * @copyright  2010 Sam Hemelryk</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment"> */</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('backup_lesson_activity_structure_step')" href="../../../../_classes/backup_lesson_activity_structure_step.html" onMouseOver="classPopup(event,'backup_lesson_activity_structure_step')">backup_lesson_activity_structure_step</a> extends backup_activity_structure_step {
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>      protected function <a class="function" onClick="logFunction('define_structure')" href="../../../../_functions/define_structure.html" onMouseOver="funcPopup(event,'define_structure')">define_structure</a>() {
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">        // The lesson table</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">        // This table contains all of the goodness for the lesson module, quite</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">        // alot goes into it but nothing relational other than course when will</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">        // need to be corrected upon restore</span>
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../../../_variables/lesson.html">$lesson</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('lesson', array('id'), array(
<a name="l72"><span class="linenum">  72</span></a>              'course', 'name', 'intro', 'introformat', 'practice', 'modattempts',
<a name="l73"><span class="linenum">  73</span></a>              'usepassword', 'password',
<a name="l74"><span class="linenum">  74</span></a>              'dependency', 'conditions', 'grade', 'custom', 'ongoing', 'usemaxgrade',
<a name="l75"><span class="linenum">  75</span></a>              'maxanswers', 'maxattempts', 'review', 'nextpagedefault', 'feedback',
<a name="l76"><span class="linenum">  76</span></a>              'minquestions', 'maxpages', 'timelimit', 'retake', 'activitylink',
<a name="l77"><span class="linenum">  77</span></a>              'mediafile', 'mediaheight', 'mediawidth', 'mediaclose', 'slideshow',
<a name="l78"><span class="linenum">  78</span></a>              'width', 'height', 'bgcolor', 'displayleft', 'displayleftif', 'progressbar',
<a name="l79"><span class="linenum">  79</span></a>              'showhighscores', 'maxhighscores', 'available', 'deadline', 'timemodified',
<a name="l80"><span class="linenum">  80</span></a>              'completionendreached', 'completiontimespent'
<a name="l81"><span class="linenum">  81</span></a>          ));
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">        // Tell the lesson element about the showhighscores elements mapping to the highscores</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">        // database field.</span>
<a name="l84"><span class="linenum">  84</span></a>          <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('set_source_alias')" href="../../../../_functions/set_source_alias.html" onMouseOver="funcPopup(event,'set_source_alias')">set_source_alias</a>('highscores', 'showhighscores');
<a name="l85"><span class="linenum">  85</span></a>  
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">        // The lesson_pages table</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">        // Grouped within a `pages` element, important to note that page is relational</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">        // to the lesson, and also to the previous/next page in the series.</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">        // Upon restore prevpageid and nextpageid will need to be corrected.</span>
<a name="l90"><span class="linenum">  90</span></a>          <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../../../_variables/pages.html">$pages</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('pages');
<a name="l91"><span class="linenum">  91</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../../_variables/page.html">$page</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('page', array('id'), array(
<a name="l92"><span class="linenum">  92</span></a>              'prevpageid','nextpageid','qtype','qoption','layout',
<a name="l93"><span class="linenum">  93</span></a>              'display','timecreated','timemodified','title','contents',
<a name="l94"><span class="linenum">  94</span></a>              'contentsformat'
<a name="l95"><span class="linenum">  95</span></a>          ));
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">        // The lesson_answers table</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">        // Grouped within an answers `element`, the lesson_answers table relates</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment">        // to the page and lesson with `pageid` and `lessonid` that will both need</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">        // to be corrected during restore.</span>
<a name="l101"><span class="linenum"> 101</span></a>          <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../../../_variables/answers.html">$answers</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('answers');
<a name="l102"><span class="linenum"> 102</span></a>          <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../../_variables/answer.html">$answer</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('answer', array('id'), array(
<a name="l103"><span class="linenum"> 103</span></a>              'jumpto','grade','score','flags','timecreated','timemodified','answer_text',
<a name="l104"><span class="linenum"> 104</span></a>              'response', 'answerformat', 'responseformat'
<a name="l105"><span class="linenum"> 105</span></a>          ));
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">        // Tell the answer element about the answer_text elements mapping to the answer</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">        // database field.</span>
<a name="l108"><span class="linenum"> 108</span></a>          <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../../_variables/answer.html">$answer</a>-&gt;<a class="function" onClick="logFunction('set_source_alias')" href="../../../../_functions/set_source_alias.html" onMouseOver="funcPopup(event,'set_source_alias')">set_source_alias</a>('answer', 'answer_text');
<a name="l109"><span class="linenum"> 109</span></a>  
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">        // The lesson_attempts table</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">        // Grouped by an `attempts` element this is relational to the page, lesson,</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">        // and user.</span>
<a name="l113"><span class="linenum"> 113</span></a>          <a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../../../_variables/attempts.html">$attempts</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('attempts');
<a name="l114"><span class="linenum"> 114</span></a>          <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../../../_variables/attempt.html">$attempt</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('attempt', array('id'), array(
<a name="l115"><span class="linenum"> 115</span></a>              'userid','retry','correct','useranswer','timeseen'
<a name="l116"><span class="linenum"> 116</span></a>          ));
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">        // The lesson_branch table</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">        // Grouped by a `branch` element this is relational to the page, lesson,</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">        // and user.</span>
<a name="l121"><span class="linenum"> 121</span></a>          <a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('branches')" href="../../../../_variables/branches.html">$branches</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('branches');
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it662" onMouseOver="hilite(662)" onMouseOut="lolite()" onClick="logVariable('branch')" href="../../../../_variables/branch.html">$branch</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('branch', array('id'), array(
<a name="l123"><span class="linenum"> 123</span></a>               'userid', 'retry', 'flag', 'timeseen', 'nextpageid'
<a name="l124"><span class="linenum"> 124</span></a>          ));
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">        // The lesson_grades table</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">        // Grouped by a grades element this is relational to the lesson and user.</span>
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../../../_variables/grades.html">$grades</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('grades');
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../../_variables/grade.html">$grade</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('grade', array('id'), array(
<a name="l130"><span class="linenum"> 130</span></a>              'userid','grade','late','completed'
<a name="l131"><span class="linenum"> 131</span></a>          ));
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">        // The lesson_high_scores table</span>
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">        // Grouped by a highscores element this is relational to the lesson, user,</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">        // and possibly a grade.</span>
<a name="l136"><span class="linenum"> 136</span></a>          <a class="var it664" onMouseOver="hilite(664)" onMouseOut="lolite()" onClick="logVariable('highscores')" href="../../../../_variables/highscores.html">$highscores</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('highscores');
<a name="l137"><span class="linenum"> 137</span></a>          <a class="var it665" onMouseOver="hilite(665)" onMouseOut="lolite()" onClick="logVariable('highscore')" href="../../../../_variables/highscore.html">$highscore</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('highscore', array('id'), array(
<a name="l138"><span class="linenum"> 138</span></a>              'gradeid','userid','nickname'
<a name="l139"><span class="linenum"> 139</span></a>          ));
<a name="l140"><span class="linenum"> 140</span></a>  
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">        // The lesson_timer table</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">        // Grouped by a `timers` element this is relational to the lesson and user.</span>
<a name="l143"><span class="linenum"> 143</span></a>          <a class="var it666" onMouseOver="hilite(666)" onMouseOut="lolite()" onClick="logVariable('timers')" href="../../../../_variables/timers.html">$timers</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('timers');
<a name="l144"><span class="linenum"> 144</span></a>          <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../../../_variables/timer.html">$timer</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('timer', array('id'), array(
<a name="l145"><span class="linenum"> 145</span></a>              'userid', 'starttime', 'lessontime', 'completed'
<a name="l146"><span class="linenum"> 146</span></a>          ));
<a name="l147"><span class="linenum"> 147</span></a>  
<a name="l148"><span class="linenum"> 148</span></a>          <a class="var it668" onMouseOver="hilite(668)" onMouseOut="lolite()" onClick="logVariable('overrides')" href="../../../../_variables/overrides.html">$overrides</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('overrides');
<a name="l149"><span class="linenum"> 149</span></a>          <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../../../_variables/override.html">$override</a> = <span class="keyword">new </span><a class="class" onClick="logClass('backup_nested_element')" href="../../../../_classes/backup_nested_element.html" onMouseOver="classPopup(event,'backup_nested_element')">backup_nested_element</a>('override', array('id'), array(
<a name="l150"><span class="linenum"> 150</span></a>              'groupid', 'userid', 'available', 'deadline', 'timelimit',
<a name="l151"><span class="linenum"> 151</span></a>              'review', 'maxattempts', 'retake', 'password'));
<a name="l152"><span class="linenum"> 152</span></a>  
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">        // Now that we have all of the elements created we've got to put them</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">        // together correctly.</span>
<a name="l155"><span class="linenum"> 155</span></a>          <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../../../_variables/pages.html">$pages</a>);
<a name="l156"><span class="linenum"> 156</span></a>          <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../../../_variables/pages.html">$pages</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../../_variables/page.html">$page</a>);
<a name="l157"><span class="linenum"> 157</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../../../_variables/answers.html">$answers</a>);
<a name="l158"><span class="linenum"> 158</span></a>          <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../../../_variables/answers.html">$answers</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../../_variables/answer.html">$answer</a>);
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../../_variables/answer.html">$answer</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../../../_variables/attempts.html">$attempts</a>);
<a name="l160"><span class="linenum"> 160</span></a>          <a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../../../_variables/attempts.html">$attempts</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../../../_variables/attempt.html">$attempt</a>);
<a name="l161"><span class="linenum"> 161</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('branches')" href="../../../../_variables/branches.html">$branches</a>);
<a name="l162"><span class="linenum"> 162</span></a>          <a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('branches')" href="../../../../_variables/branches.html">$branches</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it662" onMouseOver="hilite(662)" onMouseOut="lolite()" onClick="logVariable('branch')" href="../../../../_variables/branch.html">$branch</a>);
<a name="l163"><span class="linenum"> 163</span></a>          <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../../../_variables/grades.html">$grades</a>);
<a name="l164"><span class="linenum"> 164</span></a>          <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../../../_variables/grades.html">$grades</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../../_variables/grade.html">$grade</a>);
<a name="l165"><span class="linenum"> 165</span></a>          <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it664" onMouseOver="hilite(664)" onMouseOut="lolite()" onClick="logVariable('highscores')" href="../../../../_variables/highscores.html">$highscores</a>);
<a name="l166"><span class="linenum"> 166</span></a>          <a class="var it664" onMouseOver="hilite(664)" onMouseOut="lolite()" onClick="logVariable('highscores')" href="../../../../_variables/highscores.html">$highscores</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it665" onMouseOver="hilite(665)" onMouseOut="lolite()" onClick="logVariable('highscore')" href="../../../../_variables/highscore.html">$highscore</a>);
<a name="l167"><span class="linenum"> 167</span></a>          <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it666" onMouseOver="hilite(666)" onMouseOut="lolite()" onClick="logVariable('timers')" href="../../../../_variables/timers.html">$timers</a>);
<a name="l168"><span class="linenum"> 168</span></a>          <a class="var it666" onMouseOver="hilite(666)" onMouseOut="lolite()" onClick="logVariable('timers')" href="../../../../_variables/timers.html">$timers</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../../../_variables/timer.html">$timer</a>);
<a name="l169"><span class="linenum"> 169</span></a>          <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it668" onMouseOver="hilite(668)" onMouseOut="lolite()" onClick="logVariable('overrides')" href="../../../../_variables/overrides.html">$overrides</a>);
<a name="l170"><span class="linenum"> 170</span></a>          <a class="var it668" onMouseOver="hilite(668)" onMouseOut="lolite()" onClick="logVariable('overrides')" href="../../../../_variables/overrides.html">$overrides</a>-&gt;<a class="function" onClick="logFunction('add_child')" href="../../../../_functions/add_child.html" onMouseOver="funcPopup(event,'add_child')">add_child</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../../../_variables/override.html">$override</a>);
<a name="l171"><span class="linenum"> 171</span></a>  
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">        // Set the source table for the elements that aren't reliant on the user</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">        // at this point (lesson, lesson_pages, lesson_answers)</span>
<a name="l174"><span class="linenum"> 174</span></a>          <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('set_source_table')" href="../../../../_functions/set_source_table.html" onMouseOver="funcPopup(event,'set_source_table')">set_source_table</a>('lesson', array('id' =&gt; backup::VAR_ACTIVITYID));
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">        //we use SQL here as it must be ordered by prevpageid so that restore gets the pages in the right order.</span>
<a name="l176"><span class="linenum"> 176</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('set_source_table')" href="../../../../_functions/set_source_table.html" onMouseOver="funcPopup(event,'set_source_table')">set_source_table</a>('lesson_pages', array('lessonid' =&gt; backup::VAR_PARENTID), 'prevpageid ASC');
<a name="l177"><span class="linenum"> 177</span></a>  
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">        // We use SQL here as answers must be ordered by id so that the restore gets them in the right order</span>
<a name="l179"><span class="linenum"> 179</span></a>          <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../../_variables/answer.html">$answer</a>-&gt;<a class="function" onClick="logFunction('set_source_table')" href="../../../../_functions/set_source_table.html" onMouseOver="funcPopup(event,'set_source_table')">set_source_table</a>('lesson_answers', array('pageid' =&gt; backup::VAR_PARENTID), 'id ASC');
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">        // Lesson overrides to backup are different depending of user info.</span>
<a name="l182"><span class="linenum"> 182</span></a>          <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../../../../_variables/overrideparams.html">$overrideparams</a> = array('lessonid' =&gt; backup::VAR_PARENTID);
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">        // Check if we are also backing up user information</span>
<a name="l185"><span class="linenum"> 185</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_setting_value')" href="../../../../_functions/get_setting_value.html" onMouseOver="funcPopup(event,'get_setting_value')">get_setting_value</a>('userinfo')) {
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">            // Set the source table for elements that are reliant on the user</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">            // lesson_attempts, lesson_branch, lesson_grades, lesson_high_scores, lesson_timer</span>
<a name="l188"><span class="linenum"> 188</span></a>              <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../../../_variables/attempt.html">$attempt</a>-&gt;<a class="function" onClick="logFunction('set_source_table')" href="../../../../_functions/set_source_table.html" onMouseOver="funcPopup(event,'set_source_table')">set_source_table</a>('lesson_attempts', array('answerid' =&gt; backup::VAR_PARENTID));
<a name="l189"><span class="linenum"> 189</span></a>              <a class="var it662" onMouseOver="hilite(662)" onMouseOut="lolite()" onClick="logVariable('branch')" href="../../../../_variables/branch.html">$branch</a>-&gt;<a class="function" onClick="logFunction('set_source_table')" href="../../../../_functions/set_source_table.html" onMouseOver="funcPopup(event,'set_source_table')">set_source_table</a>('lesson_branch', array('pageid' =&gt; backup::VAR_PARENTID));
<a name="l190"><span class="linenum"> 190</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../../_variables/grade.html">$grade</a>-&gt;<a class="function" onClick="logFunction('set_source_table')" href="../../../../_functions/set_source_table.html" onMouseOver="funcPopup(event,'set_source_table')">set_source_table</a>('lesson_grades', array('lessonid'=&gt;backup::VAR_PARENTID));
<a name="l191"><span class="linenum"> 191</span></a>              <a class="var it665" onMouseOver="hilite(665)" onMouseOut="lolite()" onClick="logVariable('highscore')" href="../../../../_variables/highscore.html">$highscore</a>-&gt;<a class="function" onClick="logFunction('set_source_table')" href="../../../../_functions/set_source_table.html" onMouseOver="funcPopup(event,'set_source_table')">set_source_table</a>('lesson_high_scores', array('lessonid' =&gt; backup::VAR_PARENTID));
<a name="l192"><span class="linenum"> 192</span></a>              <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../../../_variables/timer.html">$timer</a>-&gt;<a class="function" onClick="logFunction('set_source_table')" href="../../../../_functions/set_source_table.html" onMouseOver="funcPopup(event,'set_source_table')">set_source_table</a>('lesson_timer', array('lessonid' =&gt; backup::VAR_PARENTID));
<a name="l193"><span class="linenum"> 193</span></a>          } else {
<a name="l194"><span class="linenum"> 194</span></a>              <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../../../../_variables/overrideparams.html">$overrideparams</a>['userid'] = backup_helper::<a class="function" onClick="logFunction('is_sqlparam')" href="../../../../_functions/is_sqlparam.html" onMouseOver="funcPopup(event,'is_sqlparam')">is_sqlparam</a>(null); <span class="comment">//  Without userinfo, skip user overrides.</span>
<a name="l195"><span class="linenum"> 195</span></a>          }
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>          <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../../../_variables/override.html">$override</a>-&gt;<a class="function" onClick="logFunction('set_source_table')" href="../../../../_functions/set_source_table.html" onMouseOver="funcPopup(event,'set_source_table')">set_source_table</a>('lesson_overrides', <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../../../../_variables/overrideparams.html">$overrideparams</a>);
<a name="l198"><span class="linenum"> 198</span></a>  
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">        // Annotate the user id's where required.</span>
<a name="l200"><span class="linenum"> 200</span></a>          <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../../../_variables/attempt.html">$attempt</a>-&gt;<a class="function" onClick="logFunction('annotate_ids')" href="../../../../_functions/annotate_ids.html" onMouseOver="funcPopup(event,'annotate_ids')">annotate_ids</a>('user', 'userid');
<a name="l201"><span class="linenum"> 201</span></a>          <a class="var it662" onMouseOver="hilite(662)" onMouseOut="lolite()" onClick="logVariable('branch')" href="../../../../_variables/branch.html">$branch</a>-&gt;<a class="function" onClick="logFunction('annotate_ids')" href="../../../../_functions/annotate_ids.html" onMouseOver="funcPopup(event,'annotate_ids')">annotate_ids</a>('user', 'userid');
<a name="l202"><span class="linenum"> 202</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../../_variables/grade.html">$grade</a>-&gt;<a class="function" onClick="logFunction('annotate_ids')" href="../../../../_functions/annotate_ids.html" onMouseOver="funcPopup(event,'annotate_ids')">annotate_ids</a>('user', 'userid');
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it665" onMouseOver="hilite(665)" onMouseOut="lolite()" onClick="logVariable('highscore')" href="../../../../_variables/highscore.html">$highscore</a>-&gt;<a class="function" onClick="logFunction('annotate_ids')" href="../../../../_functions/annotate_ids.html" onMouseOver="funcPopup(event,'annotate_ids')">annotate_ids</a>('user', 'userid');
<a name="l204"><span class="linenum"> 204</span></a>          <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../../../_variables/timer.html">$timer</a>-&gt;<a class="function" onClick="logFunction('annotate_ids')" href="../../../../_functions/annotate_ids.html" onMouseOver="funcPopup(event,'annotate_ids')">annotate_ids</a>('user', 'userid');
<a name="l205"><span class="linenum"> 205</span></a>          <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../../../_variables/override.html">$override</a>-&gt;<a class="function" onClick="logFunction('annotate_ids')" href="../../../../_functions/annotate_ids.html" onMouseOver="funcPopup(event,'annotate_ids')">annotate_ids</a>('user', 'userid');
<a name="l206"><span class="linenum"> 206</span></a>          <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../../../_variables/override.html">$override</a>-&gt;<a class="function" onClick="logFunction('annotate_ids')" href="../../../../_functions/annotate_ids.html" onMouseOver="funcPopup(event,'annotate_ids')">annotate_ids</a>('group', 'groupid');
<a name="l207"><span class="linenum"> 207</span></a>  
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">        // Annotate the file areas in user by the lesson module.</span>
<a name="l209"><span class="linenum"> 209</span></a>          <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('annotate_files')" href="../../../../_functions/annotate_files.html" onMouseOver="funcPopup(event,'annotate_files')">annotate_files</a>('mod_lesson', 'intro', null);
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('annotate_files')" href="../../../../_functions/annotate_files.html" onMouseOver="funcPopup(event,'annotate_files')">annotate_files</a>('mod_lesson', 'mediafile', null);
<a name="l211"><span class="linenum"> 211</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('annotate_files')" href="../../../../_functions/annotate_files.html" onMouseOver="funcPopup(event,'annotate_files')">annotate_files</a>('mod_lesson', 'page_contents', 'id');
<a name="l212"><span class="linenum"> 212</span></a>          <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../../_variables/answer.html">$answer</a>-&gt;<a class="function" onClick="logFunction('annotate_files')" href="../../../../_functions/annotate_files.html" onMouseOver="funcPopup(event,'annotate_files')">annotate_files</a>('mod_lesson', 'page_answers', 'id');
<a name="l213"><span class="linenum"> 213</span></a>          <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../../_variables/answer.html">$answer</a>-&gt;<a class="function" onClick="logFunction('annotate_files')" href="../../../../_functions/annotate_files.html" onMouseOver="funcPopup(event,'annotate_files')">annotate_files</a>('mod_lesson', 'page_responses', 'id');
<a name="l214"><span class="linenum"> 214</span></a>          <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../../../_variables/attempt.html">$attempt</a>-&gt;<a class="function" onClick="logFunction('annotate_files')" href="../../../../_functions/annotate_files.html" onMouseOver="funcPopup(event,'annotate_files')">annotate_files</a>('mod_lesson', 'essay_responses', 'id');
<a name="l215"><span class="linenum"> 215</span></a>  
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">        // Prepare and return the structure we have just created for the lesson module.</span>
<a name="l217"><span class="linenum"> 217</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('prepare_activity_structure')" href="../../../../_functions/prepare_activity_structure.html" onMouseOver="funcPopup(event,'prepare_activity_structure')">prepare_activity_structure</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../../../_variables/lesson.html">$lesson</a>);
<a name="l218"><span class="linenum"> 218</span></a>      }
<a name="l219"><span class="linenum"> 219</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'define_structure': ['define_structure', '', [['mod/lesson/backup/moodle2','backup_lesson_stepslib.php',65],['mod/choice/backup/moodle2','backup_choice_stepslib.php',34],['mod/lesson/backup/moodle2','restore_lesson_stepslib.php',37],['backup/moodle2','backup_stepslib.php',314],['backup/moodle2','backup_stepslib.php',360],['backup/moodle2','backup_stepslib.php',408],['backup/moodle2','backup_stepslib.php',514],['backup/moodle2','backup_stepslib.php',571],['backup/moodle2','backup_stepslib.php',628],['backup/moodle2','backup_stepslib.php',662],['backup/moodle2','backup_stepslib.php',698],['backup/moodle2','backup_stepslib.php',735],['backup/moodle2','backup_stepslib.php',775],['backup/moodle2','backup_stepslib.php',816],['backup/moodle2','backup_stepslib.php',885],['backup/moodle2','backup_stepslib.php',941],['backup/moodle2','backup_stepslib.php',1060],['backup/moodle2','backup_stepslib.php',1118],['backup/moodle2','backup_stepslib.php',1150],['backup/moodle2','backup_stepslib.php',1240],['backup/moodle2','backup_stepslib.php',1402],['backup/moodle2','backup_stepslib.php',1461],['backup/moodle2','backup_stepslib.php',1495],['backup/moodle2','backup_stepslib.php',1529],['backup/moodle2','backup_stepslib.php',1592],['backup/moodle2','backup_stepslib.php',1630],['backup/moodle2','backup_stepslib.php',2050],['backup/moodle2','backup_stepslib.php',2187],['backup/moodle2','backup_stepslib.php',2265],['backup/moodle2','backup_stepslib.php',2357],['backup/moodle2','backup_stepslib.php',2417],['mod/feedback/backup/moodle2','backup_feedback_stepslib.php',33],['mod/assignment/backup/moodle2','restore_assignment_stepslib.php',34],['mod/glossary/backup/moodle2','backup_glossary_stepslib.php',34],['mod/data/backup/moodle2','backup_data_stepslib.php',34],['mod/label/backup/moodle2','restore_label_stepslib.php',34],['mod/page/backup/moodle2','restore_page_stepslib.php',34],['mod/chat/backup/moodle2','backup_chat_stepslib.php',28],['mod/feedback/backup/moodle2','restore_feedback_stepslib.php',33],['mod/assignment/backup/moodle2','backup_assignment_stepslib.php',34],['mod/book/backup/moodle2','backup_book_stepslib.php',32],['blocks/rss_client/backup/moodle2','restore_rss_client_stepslib.php',33],['blocks/rss_client/backup/moodle2','backup_rss_client_stepslib.php',33],['mod/assign/backup/moodle2','backup_assign_stepslib.php',36],['mod/folder/backup/moodle2','backup_folder_stepslib.php',33],['mod/glossary/backup/moodle2','restore_glossary_stepslib.php',34],['mod/survey/backup/moodle2','backup_survey_stepslib.php',34],['mod/quiz/backup/moodle2','restore_quiz_stepslib.php',49],['mod/choice/backup/moodle2','restore_choice_stepslib.php',34],['mod/assign/backup/moodle2','restore_assign_stepslib.php',42],['mod/data/backup/moodle2','restore_data_stepslib.php',34],['mod/scorm/backup/moodle2','backup_scorm_stepslib.php',33],['mod/workshop/backup/moodle2','backup_workshop_stepslib.php',36],['mod/scorm/backup/moodle2','restore_scorm_stepslib.php',33],['mod/url/backup/moodle2','backup_url_stepslib.php',33],['mod/lti/backup/moodle2','backup_lti_stepslib.php',56],['backup/util/plan/tests/fixtures','plan_fixtures.php',83],['mod/quiz/backup/moodle2','backup_quiz_stepslib.php',36],['mod/imscp/backup/moodle2','restore_imscp_stepslib.php',34],['mod/book/backup/moodle2','restore_book_stepslib.php',32],['mod/forum/backup/moodle2','backup_forum_stepslib.php',34],['mod/wiki/backup/moodle2','restore_wiki_stepslib.php',34],['mod/page/backup/moodle2','backup_page_stepslib.php',36],['mod/workshop/backup/moodle2','restore_workshop_stepslib.php',33],['mod/url/backup/moodle2','restore_url_stepslib.php',34],['mod/folder/backup/moodle2','restore_folder_stepslib.php',34],['mod/forum/backup/moodle2','restore_forum_stepslib.php',34],['mod/lti/backup/moodle2','restore_lti_stepslib.php',56],['mod/resource/backup/moodle2','backup_resource_stepslib.php',33],['backup/moodle2','restore_stepslib.php',128],['backup/moodle2','restore_stepslib.php',504],['backup/moodle2','restore_stepslib.php',813],['backup/moodle2','restore_stepslib.php',936],['backup/moodle2','restore_stepslib.php',1071],['backup/moodle2','restore_stepslib.php',1148],['backup/moodle2','restore_stepslib.php',1210],['backup/moodle2','restore_stepslib.php',1315],['backup/moodle2','restore_stepslib.php',1542],['backup/moodle2','restore_stepslib.php',1751],['backup/moodle2','restore_stepslib.php',1906],['backup/moodle2','restore_stepslib.php',2090],['backup/moodle2','restore_stepslib.php',2145],['backup/moodle2','restore_stepslib.php',2228],['backup/moodle2','restore_stepslib.php',2371],['backup/moodle2','restore_stepslib.php',2520],['backup/moodle2','restore_stepslib.php',2775],['backup/moodle2','restore_stepslib.php',2900],['backup/moodle2','restore_stepslib.php',3032],['backup/moodle2','restore_stepslib.php',3186],['backup/moodle2','restore_stepslib.php',3232],['backup/moodle2','restore_stepslib.php',3395],['backup/moodle2','restore_stepslib.php',3621],['backup/moodle2','restore_stepslib.php',3751],['mod/resource/backup/moodle2','restore_resource_stepslib.php',34],['mod/survey/backup/moodle2','restore_survey_stepslib.php',34],['mod/imscp/backup/moodle2','backup_imscp_stepslib.php',35],['mod/wiki/backup/moodle2','backup_wiki_stepslib.php',34],['mod/label/backup/moodle2','backup_label_stepslib.php',33],['mod/chat/backup/moodle2','restore_chat_stepslib.php',33]], 4],
'is_sqlparam': ['is_sqlparam', 'This function simply marks one param to be considered as straight sql param, so it won\'t be searched in the structure tree nor converted at all. Useful for better integration of definition of sources in structure and DB stuff ', [['backup/util/helper','backup_helper.class.php',356]], 16],
'annotate_ids': ['annotate_ids', '', [['backup/util/structure','backup_nested_element.class.php',246]], 106],
'get_setting_value': ['get_setting_value', 'Gets the value for the requested setting ', [['backup/util/ui','base_ui.class.php',330],['backup/util/plan','base_task.class.php',105],['backup/moodle2','restore_subplugin.class.php',162],['backup/moodle2','backup_subplugin.class.php',68],['backup/util/plan','base_step.class.php',98],['backup/moodle2','restore_plugin.class.php',230],['backup/moodle2','backup_plugin.class.php',68]], 134],
'set_source_table': ['set_source_table', '', [['backup/util/structure','backup_nested_element.class.php',196]], 158],
'add_child': ['add_child', '', [['backup/util/structure','backup_optigroup.class.php',47],['backup/util/structure','base_nested_element.class.php',166]], 396],
'set_source_alias': ['set_source_alias', '', [['backup/util/structure','backup_nested_element.class.php',217]], 19],
'annotate_files': ['annotate_files', 'Adds backup id database record for all files in the given file area. ', [['backup/util/dbops','backup_structure_dbops.class.php',106],['backup/util/structure','backup_nested_element.class.php',227]], 101],
'prepare_activity_structure': ['prepare_activity_structure', 'Wraps any activity backup structure within the common \'activity\' element that will include common to all activities information like id, context... ', [['backup/moodle2','backup_stepslib.php',152],['backup/moodle2','restore_stepslib.php',3702]], 45]};
CLASS_DATA={
'backup_lesson_activity_structure_step': ['backup_lesson_activity_structure_step', 'Structure step class that informs a backup task how to backup the lesson module. ', [['mod/lesson/backup/moodle2','backup_lesson_stepslib.php',57]], 1],
'backup_nested_element': ['backup_nested_element', 'Instantiable class representing one nestable element (non final) piece of information on backup ', [['backup/util/structure','backup_nested_element.class.php',27]], 415]};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
