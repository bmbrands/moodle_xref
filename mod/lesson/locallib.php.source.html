<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/lesson/locallib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/lesson';
filename='locallib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/lesson/</a> -> <a href="locallib.php.html">locallib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="locallib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="locallib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Local library file for Lesson.  These are non-standard functions that are used</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * only by Lesson.</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> *</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @package mod_lesson</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or late</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> **/</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment">/** Make sure this isn't being directly accessed */</span>
<a name="l28"><span class="linenum">  28</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">/** Include the files that are required by this module */</span>
<a name="l31"><span class="linenum">  31</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../course/moodleform_mod.php.html">/course/moodleform_mod.php</a>');
<a name="l32"><span class="linenum">  32</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/lesson/lib.php.html">/mod/lesson/lib.php</a>');
<a name="l33"><span class="linenum">  33</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/filelib.php');
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">/** This page */</span>
<a name="l36"><span class="linenum">  36</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('LESSON_THISPAGE')" href="../../_constants/LESSON_THISPAGE.html" onMouseOver="constPopup(event,'LESSON_THISPAGE')">LESSON_THISPAGE</a>', 0);
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">/** Next page -&gt; any page not seen before */</span>
<a name="l38"><span class="linenum">  38</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_UNSEENPAGE')" href="../../_constants/LESSON_UNSEENPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENPAGE')">LESSON_UNSEENPAGE</a>&quot;, 1);
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">/** Next page -&gt; any page not answered correctly */</span>
<a name="l40"><span class="linenum">  40</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_UNANSWEREDPAGE')" href="../../_constants/LESSON_UNANSWEREDPAGE.html" onMouseOver="constPopup(event,'LESSON_UNANSWEREDPAGE')">LESSON_UNANSWEREDPAGE</a>&quot;, 2);
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">/** Jump to Next Page */</span>
<a name="l42"><span class="linenum">  42</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>&quot;, -1);
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">/** End of Lesson */</span>
<a name="l44"><span class="linenum">  44</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>&quot;, -9);
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">/** Jump to an unseen page within a branch and end of branch or end of lesson */</span>
<a name="l46"><span class="linenum">  46</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_UNSEENBRANCHPAGE')" href="../../_constants/LESSON_UNSEENBRANCHPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENBRANCHPAGE')">LESSON_UNSEENBRANCHPAGE</a>&quot;, -50);
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">/** Jump to Previous Page */</span>
<a name="l48"><span class="linenum">  48</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_PREVIOUSPAGE')" href="../../_constants/LESSON_PREVIOUSPAGE.html" onMouseOver="constPopup(event,'LESSON_PREVIOUSPAGE')">LESSON_PREVIOUSPAGE</a>&quot;, -40);
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">/** Jump to a random page within a branch and end of branch or end of lesson */</span>
<a name="l50"><span class="linenum">  50</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_RANDOMPAGE')" href="../../_constants/LESSON_RANDOMPAGE.html" onMouseOver="constPopup(event,'LESSON_RANDOMPAGE')">LESSON_RANDOMPAGE</a>&quot;, -60);
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">/** Jump to a random Branch */</span>
<a name="l52"><span class="linenum">  52</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_RANDOMBRANCH')" href="../../_constants/LESSON_RANDOMBRANCH.html" onMouseOver="constPopup(event,'LESSON_RANDOMBRANCH')">LESSON_RANDOMBRANCH</a>&quot;, -70);
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">/** Cluster Jump */</span>
<a name="l54"><span class="linenum">  54</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_CLUSTERJUMP')" href="../../_constants/LESSON_CLUSTERJUMP.html" onMouseOver="constPopup(event,'LESSON_CLUSTERJUMP')">LESSON_CLUSTERJUMP</a>&quot;, -80);
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">/** Undefined */</span>
<a name="l56"><span class="linenum">  56</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_UNDEFINED')" href="../../_constants/LESSON_UNDEFINED.html" onMouseOver="constPopup(event,'LESSON_UNDEFINED')">LESSON_UNDEFINED</a>&quot;, -99);
<a name="l57"><span class="linenum">  57</span></a>  
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">/** LESSON_MAX_EVENT_LENGTH = 432000 ; 5 days maximum */</span>
<a name="l59"><span class="linenum">  59</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_MAX_EVENT_LENGTH')" href="../../_constants/LESSON_MAX_EVENT_LENGTH.html" onMouseOver="constPopup(event,'LESSON_MAX_EVENT_LENGTH')">LESSON_MAX_EVENT_LENGTH</a>&quot;, &quot;432000&quot;);
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">/** Answer format is HTML */</span>
<a name="l62"><span class="linenum">  62</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_ANSWER_HTML')" href="../../_constants/LESSON_ANSWER_HTML.html" onMouseOver="constPopup(event,'LESSON_ANSWER_HTML')">LESSON_ANSWER_HTML</a>&quot;, &quot;HTML&quot;);
<a name="l63"><span class="linenum">  63</span></a>  
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">//////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">/// Any other lesson functions go here.  Each of them must have a name that</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">/// starts with lesson_</span>
<a name="l67"><span class="linenum">  67</span></a>  
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">/**</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> * Checks to see if a LESSON_CLUSTERJUMP or</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> * a LESSON_UNSEENBRANCHPAGE is used in a lesson.</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment"> *</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment"> * This function is only executed when a teacher is</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> * checking the navigation for a lesson.</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment"> *</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment"> * @param stdClass $lesson Id of the lesson that is to be checked.</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment"> * @return boolean True or false.</span>
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment"> **/</span>
<a name="l78"><span class="linenum">  78</span></a>  function <a class="function" onClick="logFunction('lesson_display_teacher_warning')" href="../../_functions/lesson_display_teacher_warning.html" onMouseOver="funcPopup(event,'lesson_display_teacher_warning')">lesson_display_teacher_warning</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l79"><span class="linenum">  79</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">    // get all of the lesson answers</span>
<a name="l82"><span class="linenum">  82</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array (&quot;lessonid&quot; =&gt; <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l83"><span class="linenum">  83</span></a>      if (!<a class="var it20869" onMouseOver="hilite(20869)" onMouseOut="lolite()" onClick="logVariable('lessonanswers')" href="../../_variables/lessonanswers.html">$lessonanswers</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;lesson_answers&quot;, &quot;lessonid = :lessonid&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">        // no answers, then not using cluster or unseen</span>
<a name="l85"><span class="linenum">  85</span></a>          return false;
<a name="l86"><span class="linenum">  86</span></a>      }
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">    // just check for the first one that fulfills the requirements</span>
<a name="l88"><span class="linenum">  88</span></a>      foreach (<a class="var it20869" onMouseOver="hilite(20869)" onMouseOut="lolite()" onClick="logVariable('lessonanswers')" href="../../_variables/lessonanswers.html">$lessonanswers</a> as <a class="var it20870" onMouseOver="hilite(20870)" onMouseOut="lolite()" onClick="logVariable('lessonanswer')" href="../../_variables/lessonanswer.html">$lessonanswer</a>) {
<a name="l89"><span class="linenum">  89</span></a>          if (<a class="var it20870" onMouseOver="hilite(20870)" onMouseOut="lolite()" onClick="logVariable('lessonanswer')" href="../../_variables/lessonanswer.html">$lessonanswer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it44775" onMouseOver="hilite(44775)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> == <a class="constant" onClick="logConstant('LESSON_CLUSTERJUMP')" href="../../_constants/LESSON_CLUSTERJUMP.html" onMouseOver="constPopup(event,'LESSON_CLUSTERJUMP')">LESSON_CLUSTERJUMP</a> || <a class="var it20870" onMouseOver="hilite(20870)" onMouseOut="lolite()" onClick="logVariable('lessonanswer')" href="../../_variables/lessonanswer.html">$lessonanswer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it44775" onMouseOver="hilite(44775)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> == <a class="constant" onClick="logConstant('LESSON_UNSEENBRANCHPAGE')" href="../../_constants/LESSON_UNSEENBRANCHPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENBRANCHPAGE')">LESSON_UNSEENBRANCHPAGE</a>) {
<a name="l90"><span class="linenum">  90</span></a>              return true;
<a name="l91"><span class="linenum">  91</span></a>          }
<a name="l92"><span class="linenum">  92</span></a>      }
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">    // if no answers use either of the two jumps</span>
<a name="l95"><span class="linenum">  95</span></a>      return false;
<a name="l96"><span class="linenum">  96</span></a>  }
<a name="l97"><span class="linenum">  97</span></a>  
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">/**</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment"> * Interprets the LESSON_UNSEENBRANCHPAGE jump.</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment"> *</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment"> * will return the pageid of a random unseen page that is within a branch</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment"> *</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment"> * @param lesson $lesson</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment"> * @param int $userid Id of the user.</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment"> * @param int $pageid Id of the page from which we are jumping.</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment"> * @return int Id of the next page.</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment"> **/</span>
<a name="l108"><span class="linenum"> 108</span></a>  function <a class="function" onClick="logFunction('lesson_unseen_question_jump')" href="../../_functions/lesson_unseen_question_jump.html" onMouseOver="funcPopup(event,'lesson_unseen_question_jump')">lesson_unseen_question_jump</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>) {
<a name="l109"><span class="linenum"> 109</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">    // get the number of retakes</span>
<a name="l112"><span class="linenum"> 112</span></a>      if (!<a class="var it20871" onMouseOver="hilite(20871)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;userid&quot;=&gt;<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>))) {
<a name="l113"><span class="linenum"> 113</span></a>          <a class="var it20871" onMouseOver="hilite(20871)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = 0;
<a name="l114"><span class="linenum"> 114</span></a>      }
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">    // get all the lesson_attempts aka what the user has seen</span>
<a name="l117"><span class="linenum"> 117</span></a>      if (<a class="var it20872" onMouseOver="hilite(20872)" onMouseOut="lolite()" onClick="logVariable('viewedpages')" href="../../_variables/viewedpages.html">$viewedpages</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(&quot;lesson_attempts&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;userid&quot;=&gt;<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, &quot;retry&quot;=&gt;<a class="var it20871" onMouseOver="hilite(20871)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a>), &quot;timeseen DESC&quot;)) {
<a name="l118"><span class="linenum"> 118</span></a>          foreach(<a class="var it20872" onMouseOver="hilite(20872)" onMouseOut="lolite()" onClick="logVariable('viewedpages')" href="../../_variables/viewedpages.html">$viewedpages</a> as <a class="var it8651" onMouseOver="hilite(8651)" onMouseOut="lolite()" onClick="logVariable('viewed')" href="../../_variables/viewed.html">$viewed</a>) {
<a name="l119"><span class="linenum"> 119</span></a>              <a class="var it20873" onMouseOver="hilite(20873)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>[] = <a class="var it8651" onMouseOver="hilite(8651)" onMouseOut="lolite()" onClick="logVariable('viewed')" href="../../_variables/viewed.html">$viewed</a>-&gt;<a onClick="logVariable('pageid')" class="var it44776" onMouseOver="hilite(44776)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>;
<a name="l120"><span class="linenum"> 120</span></a>          }
<a name="l121"><span class="linenum"> 121</span></a>      } else {
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it20873" onMouseOver="hilite(20873)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a> = array();
<a name="l123"><span class="linenum"> 123</span></a>      }
<a name="l124"><span class="linenum"> 124</span></a>  
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">    // get the lesson pages</span>
<a name="l126"><span class="linenum"> 126</span></a>      <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a> = <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>      if (<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> == <a class="constant" onClick="logConstant('LESSON_UNSEENBRANCHPAGE')" href="../../_constants/LESSON_UNSEENBRANCHPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENBRANCHPAGE')">LESSON_UNSEENBRANCHPAGE</a>) {  // this only happens when a student leaves in the middle of an unseen question within a branch series
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it20873" onMouseOver="hilite(20873)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>[0];  <span class="comment">// just change the pageid to the last page viewed inside the branch table</span>
<a name="l130"><span class="linenum"> 130</span></a>      }
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">    // go up the pages till branch table</span>
<a name="l133"><span class="linenum"> 133</span></a>      while (<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> != 0) { // this condition should never be satisfied... only happens if there are no branch tables above this page
<a name="l134"><span class="linenum"> 134</span></a>          if (<a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>) {
<a name="l135"><span class="linenum"> 135</span></a>              break;
<a name="l136"><span class="linenum"> 136</span></a>          }
<a name="l137"><span class="linenum"> 137</span></a>          <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;prevpageid;
<a name="l138"><span class="linenum"> 138</span></a>      }
<a name="l139"><span class="linenum"> 139</span></a>  
<a name="l140"><span class="linenum"> 140</span></a>      <a class="var it20874" onMouseOver="hilite(20874)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a> = <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('get_sub_pages_of')" href="../../_functions/get_sub_pages_of.html" onMouseOver="funcPopup(event,'get_sub_pages_of')">get_sub_pages_of</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>, <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>));
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">    // this foreach loop stores all the pages that are within the branch table but are not in the $seenpages array</span>
<a name="l143"><span class="linenum"> 143</span></a>      <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a> = array();
<a name="l144"><span class="linenum"> 144</span></a>      foreach(<a class="var it20874" onMouseOver="hilite(20874)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a> as <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l145"><span class="linenum"> 145</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it20873" onMouseOver="hilite(20873)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>)) {
<a name="l146"><span class="linenum"> 146</span></a>              <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[] = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l147"><span class="linenum"> 147</span></a>          }
<a name="l148"><span class="linenum"> 148</span></a>      }
<a name="l149"><span class="linenum"> 149</span></a>  
<a name="l150"><span class="linenum"> 150</span></a>      if(<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>) == 0) {
<a name="l151"><span class="linenum"> 151</span></a>          if(isset(<a class="var it20874" onMouseOver="hilite(20874)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a>)) {
<a name="l152"><span class="linenum"> 152</span></a>              <a class="var it797" onMouseOver="hilite(797)" onMouseOut="lolite()" onClick="logVariable('temp')" href="../../_variables/temp.html">$temp</a> = <a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it20874" onMouseOver="hilite(20874)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a>);
<a name="l153"><span class="linenum"> 153</span></a>              <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a> = <a class="var it797" onMouseOver="hilite(797)" onMouseOut="lolite()" onClick="logVariable('temp')" href="../../_variables/temp.html">$temp</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it43878" onMouseOver="hilite(43878)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a>; <span class="comment">// they have seen all the pages in the branch, so go to EOB/next branch table/EOL</span>
<a name="l154"><span class="linenum"> 154</span></a>          } else {
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">            // there are no pages inside the branch, so return the next page</span>
<a name="l156"><span class="linenum"> 156</span></a>              <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a> = <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;nextpageid;
<a name="l157"><span class="linenum"> 157</span></a>          }
<a name="l158"><span class="linenum"> 158</span></a>          if (<a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a> == 0) {
<a name="l159"><span class="linenum"> 159</span></a>              return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;
<a name="l160"><span class="linenum"> 160</span></a>          } else {
<a name="l161"><span class="linenum"> 161</span></a>              return <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>;
<a name="l162"><span class="linenum"> 162</span></a>          }
<a name="l163"><span class="linenum"> 163</span></a>      } else {
<a name="l164"><span class="linenum"> 164</span></a>          return <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[<a class="phpfunction" onClick="logFunction('rand')" href="../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>)-1)];  <span class="comment">// returns a random page id for the next page</span>
<a name="l165"><span class="linenum"> 165</span></a>      }
<a name="l166"><span class="linenum"> 166</span></a>  }
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">/**</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment"> * Handles the unseen branch table jump.</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment"> *</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment"> * @param lesson $lesson</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment"> * @param int $userid User id.</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment"> * @return int Will return the page id of a branch table or end of lesson</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment"> **/</span>
<a name="l175"><span class="linenum"> 175</span></a>  function <a class="function" onClick="logFunction('lesson_unseen_branch_jump')" href="../../_functions/lesson_unseen_branch_jump.html" onMouseOver="funcPopup(event,'lesson_unseen_branch_jump')">lesson_unseen_branch_jump</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l176"><span class="linenum"> 176</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l177"><span class="linenum"> 177</span></a>  
<a name="l178"><span class="linenum"> 178</span></a>      if (!<a class="var it20871" onMouseOver="hilite(20871)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;userid&quot;=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>))) {
<a name="l179"><span class="linenum"> 179</span></a>          <a class="var it20871" onMouseOver="hilite(20871)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = 0;
<a name="l180"><span class="linenum"> 180</span></a>      }
<a name="l181"><span class="linenum"> 181</span></a>  
<a name="l182"><span class="linenum"> 182</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array (&quot;lessonid&quot; =&gt; <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;userid&quot; =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, &quot;retry&quot; =&gt; <a class="var it20871" onMouseOver="hilite(20871)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a>);
<a name="l183"><span class="linenum"> 183</span></a>      if (!<a class="var it20875" onMouseOver="hilite(20875)" onMouseOut="lolite()" onClick="logVariable('seenbranches')" href="../../_variables/seenbranches.html">$seenbranches</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;lesson_branch&quot;, &quot;lessonid = :lessonid AND userid = :userid AND retry = :retry&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>,
<a name="l184"><span class="linenum"> 184</span></a>                  &quot;timeseen DESC&quot;)) {
<a name="l185"><span class="linenum"> 185</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindrecords', 'lesson');
<a name="l186"><span class="linenum"> 186</span></a>      }
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">    // get the lesson pages</span>
<a name="l189"><span class="linenum"> 189</span></a>      <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a> = <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l190"><span class="linenum"> 190</span></a>  
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">    // this loads all the viewed branch tables into $seen until it finds the branch table with the flag</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">    // which is the branch table that starts the unseenbranch function</span>
<a name="l193"><span class="linenum"> 193</span></a>      <a class="var it20876" onMouseOver="hilite(20876)" onMouseOut="lolite()" onClick="logVariable('seen')" href="../../_variables/seen.html">$seen</a> = array();
<a name="l194"><span class="linenum"> 194</span></a>      foreach (<a class="var it20875" onMouseOver="hilite(20875)" onMouseOut="lolite()" onClick="logVariable('seenbranches')" href="../../_variables/seenbranches.html">$seenbranches</a> as <a class="var it20877" onMouseOver="hilite(20877)" onMouseOut="lolite()" onClick="logVariable('seenbranch')" href="../../_variables/seenbranch.html">$seenbranch</a>) {
<a name="l195"><span class="linenum"> 195</span></a>          if (!<a class="var it20877" onMouseOver="hilite(20877)" onMouseOut="lolite()" onClick="logVariable('seenbranch')" href="../../_variables/seenbranch.html">$seenbranch</a>-&gt;<a onClick="logVariable('flag')" class="var it44777" onMouseOver="hilite(44777)" onMouseOut="lolite()" href="../../_variables/flag.html">flag</a>) {
<a name="l196"><span class="linenum"> 196</span></a>              <a class="var it20876" onMouseOver="hilite(20876)" onMouseOut="lolite()" onClick="logVariable('seen')" href="../../_variables/seen.html">$seen</a>[<a class="var it20877" onMouseOver="hilite(20877)" onMouseOut="lolite()" onClick="logVariable('seenbranch')" href="../../_variables/seenbranch.html">$seenbranch</a>-&gt;<a onClick="logVariable('pageid')" class="var it44777" onMouseOver="hilite(44777)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>] = <a class="var it20877" onMouseOver="hilite(20877)" onMouseOut="lolite()" onClick="logVariable('seenbranch')" href="../../_variables/seenbranch.html">$seenbranch</a>-&gt;<a onClick="logVariable('pageid')" class="var it44777" onMouseOver="hilite(44777)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>;
<a name="l197"><span class="linenum"> 197</span></a>          } else {
<a name="l198"><span class="linenum"> 198</span></a>              <a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a> = <a class="var it20877" onMouseOver="hilite(20877)" onMouseOut="lolite()" onClick="logVariable('seenbranch')" href="../../_variables/seenbranch.html">$seenbranch</a>-&gt;<a onClick="logVariable('pageid')" class="var it44777" onMouseOver="hilite(44777)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>;
<a name="l199"><span class="linenum"> 199</span></a>              break;
<a name="l200"><span class="linenum"> 200</span></a>          }
<a name="l201"><span class="linenum"> 201</span></a>      }
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">    // this function searches through the lesson pages to find all the branch tables</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">    // that follow the flagged branch table</span>
<a name="l204"><span class="linenum"> 204</span></a>      <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>]-&gt;nextpageid; <span class="comment">// move down from the flagged branch table</span>
<a name="l205"><span class="linenum"> 205</span></a>      <a class="var it1240" onMouseOver="hilite(1240)" onMouseOut="lolite()" onClick="logVariable('branchtables')" href="../../_variables/branchtables.html">$branchtables</a> = array();
<a name="l206"><span class="linenum"> 206</span></a>      while (<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> != 0) {  // grab all of the branch table till eol
<a name="l207"><span class="linenum"> 207</span></a>          if (<a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>) {
<a name="l208"><span class="linenum"> 208</span></a>              <a class="var it1240" onMouseOver="hilite(1240)" onMouseOut="lolite()" onClick="logVariable('branchtables')" href="../../_variables/branchtables.html">$branchtables</a>[] = <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;id;
<a name="l209"><span class="linenum"> 209</span></a>          }
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;nextpageid;
<a name="l211"><span class="linenum"> 211</span></a>      }
<a name="l212"><span class="linenum"> 212</span></a>      <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a> = array();
<a name="l213"><span class="linenum"> 213</span></a>      foreach (<a class="var it1240" onMouseOver="hilite(1240)" onMouseOut="lolite()" onClick="logVariable('branchtables')" href="../../_variables/branchtables.html">$branchtables</a> as <a class="var it20878" onMouseOver="hilite(20878)" onMouseOut="lolite()" onClick="logVariable('branchtable')" href="../../_variables/branchtable.html">$branchtable</a>) {
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">        // load all of the unseen branch tables into unseen</span>
<a name="l215"><span class="linenum"> 215</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it20878" onMouseOver="hilite(20878)" onMouseOut="lolite()" onClick="logVariable('branchtable')" href="../../_variables/branchtable.html">$branchtable</a>, <a class="var it20876" onMouseOver="hilite(20876)" onMouseOut="lolite()" onClick="logVariable('seen')" href="../../_variables/seen.html">$seen</a>)) {
<a name="l216"><span class="linenum"> 216</span></a>              <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[] = <a class="var it20878" onMouseOver="hilite(20878)" onMouseOut="lolite()" onClick="logVariable('branchtable')" href="../../_variables/branchtable.html">$branchtable</a>;
<a name="l217"><span class="linenum"> 217</span></a>          }
<a name="l218"><span class="linenum"> 218</span></a>      }
<a name="l219"><span class="linenum"> 219</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>) &gt; 0) {
<a name="l220"><span class="linenum"> 220</span></a>          return <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[<a class="phpfunction" onClick="logFunction('rand')" href="../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>)-1)];  <span class="comment">// returns a random page id for the next page</span>
<a name="l221"><span class="linenum"> 221</span></a>      } else {
<a name="l222"><span class="linenum"> 222</span></a>          return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;  <span class="comment">// has viewed all of the branch tables</span>
<a name="l223"><span class="linenum"> 223</span></a>      }
<a name="l224"><span class="linenum"> 224</span></a>  }
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">/**</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment"> * Handles the random jump between a branch table and end of branch or end of lesson (LESSON_RANDOMPAGE).</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment"> *</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment"> * @param lesson $lesson</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment"> * @param int $pageid The id of the page that we are jumping from (?)</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment"> * @return int The pageid of a random page that is within a branch table</span>
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment"> **/</span>
<a name="l233"><span class="linenum"> 233</span></a>  function <a class="function" onClick="logFunction('lesson_random_question_jump')" href="../../_functions/lesson_random_question_jump.html" onMouseOver="funcPopup(event,'lesson_random_question_jump')">lesson_random_question_jump</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>) {
<a name="l234"><span class="linenum"> 234</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">    // get the lesson pages</span>
<a name="l237"><span class="linenum"> 237</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array (&quot;lessonid&quot; =&gt; <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l238"><span class="linenum"> 238</span></a>      if (!<a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;lesson_pages&quot;, &quot;lessonid = :lessonid&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l239"><span class="linenum"> 239</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindpages', 'lesson');
<a name="l240"><span class="linenum"> 240</span></a>      }
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">    // go up the pages till branch table</span>
<a name="l243"><span class="linenum"> 243</span></a>      while (<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> != 0) { // this condition should never be satisfied... only happens if there are no branch tables above this page
<a name="l244"><span class="linenum"> 244</span></a>  
<a name="l245"><span class="linenum"> 245</span></a>          if (<a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>) {
<a name="l246"><span class="linenum"> 246</span></a>              break;
<a name="l247"><span class="linenum"> 247</span></a>          }
<a name="l248"><span class="linenum"> 248</span></a>          <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;prevpageid;
<a name="l249"><span class="linenum"> 249</span></a>      }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">    // get the pages within the branch</span>
<a name="l252"><span class="linenum"> 252</span></a>      <a class="var it20874" onMouseOver="hilite(20874)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a> = <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('get_sub_pages_of')" href="../../_functions/get_sub_pages_of.html" onMouseOver="funcPopup(event,'get_sub_pages_of')">get_sub_pages_of</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>, <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>));
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>      if(<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it20874" onMouseOver="hilite(20874)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a>) == 0) {
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">        // there are no pages inside the branch, so return the next page</span>
<a name="l256"><span class="linenum"> 256</span></a>          return <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;nextpageid;
<a name="l257"><span class="linenum"> 257</span></a>      } else {
<a name="l258"><span class="linenum"> 258</span></a>          return <a class="var it20874" onMouseOver="hilite(20874)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a>[<a class="phpfunction" onClick="logFunction('rand')" href="../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it20874" onMouseOver="hilite(20874)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a>)-1)]-&gt;id;  <span class="comment">// returns a random page id for the next page</span>
<a name="l259"><span class="linenum"> 259</span></a>      }
<a name="l260"><span class="linenum"> 260</span></a>  }
<a name="l261"><span class="linenum"> 261</span></a>  
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">/**</span>
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment"> * Calculates a user's grade for a lesson.</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment"> *</span>
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment"> * @param object $lesson The lesson that the user is taking.</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment"> * @param int $retries The attempt number.</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment"> * @param int $userid Id of the user (optional, default current user).</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment"> * @return object { nquestions =&gt; number of questions answered</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">                    attempts =&gt; number of question attempts</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">                    total =&gt; max points possible</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">                    earned =&gt; points earned by student</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">                    grade =&gt; calculated percentage grade</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">                    nmanual =&gt; number of manually graded questions</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">                    manualpoints =&gt; point value for manually graded questions }</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment"> */</span>
<a name="l276"><span class="linenum"> 276</span></a>  function <a class="function" onClick="logFunction('lesson_grade')" href="../../_functions/lesson_grade.html" onMouseOver="funcPopup(event,'lesson_grade')">lesson_grade</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it1258" onMouseOver="hilite(1258)" onMouseOut="lolite()" onClick="logVariable('ntries')" href="../../_variables/ntries.html">$ntries</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = 0) {
<a name="l277"><span class="linenum"> 277</span></a>      global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>      if (empty(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l280"><span class="linenum"> 280</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l281"><span class="linenum"> 281</span></a>      }
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">    // Zero out everything</span>
<a name="l284"><span class="linenum"> 284</span></a>      <a class="var it19259" onMouseOver="hilite(19259)" onMouseOut="lolite()" onClick="logVariable('ncorrect')" href="../../_variables/ncorrect.html">$ncorrect</a>     = 0;
<a name="l285"><span class="linenum"> 285</span></a>      <a class="var it20879" onMouseOver="hilite(20879)" onMouseOut="lolite()" onClick="logVariable('nviewed')" href="../../_variables/nviewed.html">$nviewed</a>      = 0;
<a name="l286"><span class="linenum"> 286</span></a>      <a class="var it647" onMouseOver="hilite(647)" onMouseOut="lolite()" onClick="logVariable('score')" href="../../_variables/score.html">$score</a>        = 0;
<a name="l287"><span class="linenum"> 287</span></a>      <a class="var it1276" onMouseOver="hilite(1276)" onMouseOut="lolite()" onClick="logVariable('nmanual')" href="../../_variables/nmanual.html">$nmanual</a>      = 0;
<a name="l288"><span class="linenum"> 288</span></a>      <a class="var it1278" onMouseOver="hilite(1278)" onMouseOut="lolite()" onClick="logVariable('manualpoints')" href="../../_variables/manualpoints.html">$manualpoints</a> = 0;
<a name="l289"><span class="linenum"> 289</span></a>      <a class="var it20880" onMouseOver="hilite(20880)" onMouseOut="lolite()" onClick="logVariable('thegrade')" href="../../_variables/thegrade.html">$thegrade</a>     = 0;
<a name="l290"><span class="linenum"> 290</span></a>      <a class="var it1260" onMouseOver="hilite(1260)" onMouseOut="lolite()" onClick="logVariable('nquestions')" href="../../_variables/nquestions.html">$nquestions</a>   = 0;
<a name="l291"><span class="linenum"> 291</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a>        = 0;
<a name="l292"><span class="linenum"> 292</span></a>      <a class="var it1261" onMouseOver="hilite(1261)" onMouseOut="lolite()" onClick="logVariable('earned')" href="../../_variables/earned.html">$earned</a>       = 0;
<a name="l293"><span class="linenum"> 293</span></a>  
<a name="l294"><span class="linenum"> 294</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array (&quot;lessonid&quot; =&gt; <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;userid&quot; =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, &quot;retry&quot; =&gt; <a class="var it1258" onMouseOver="hilite(1258)" onMouseOut="lolite()" onClick="logVariable('ntries')" href="../../_variables/ntries.html">$ntries</a>);
<a name="l295"><span class="linenum"> 295</span></a>      if (<a class="var it12175" onMouseOver="hilite(12175)" onMouseOut="lolite()" onClick="logVariable('useranswers')" href="../../_variables/useranswers.html">$useranswers</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;lesson_attempts&quot;,  &quot;lessonid = :lessonid AND
<a name="l296"><span class="linenum"> 296</span></a>              userid = :userid AND retry = :retry&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, &quot;timeseen&quot;)) {
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">        // group each try with its page</span>
<a name="l298"><span class="linenum"> 298</span></a>          <a class="var it20881" onMouseOver="hilite(20881)" onMouseOut="lolite()" onClick="logVariable('attemptset')" href="../../_variables/attemptset.html">$attemptset</a> = array();
<a name="l299"><span class="linenum"> 299</span></a>          foreach (<a class="var it12175" onMouseOver="hilite(12175)" onMouseOut="lolite()" onClick="logVariable('useranswers')" href="../../_variables/useranswers.html">$useranswers</a> as <a class="var it3032" onMouseOver="hilite(3032)" onMouseOut="lolite()" onClick="logVariable('useranswer')" href="../../_variables/useranswer.html">$useranswer</a>) {
<a name="l300"><span class="linenum"> 300</span></a>              <a class="var it20881" onMouseOver="hilite(20881)" onMouseOut="lolite()" onClick="logVariable('attemptset')" href="../../_variables/attemptset.html">$attemptset</a>[<a class="var it3032" onMouseOver="hilite(3032)" onMouseOut="lolite()" onClick="logVariable('useranswer')" href="../../_variables/useranswer.html">$useranswer</a>-&gt;<a onClick="logVariable('pageid')" class="var it44778" onMouseOver="hilite(44778)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>][] = <a class="var it3032" onMouseOver="hilite(3032)" onMouseOut="lolite()" onClick="logVariable('useranswer')" href="../../_variables/useranswer.html">$useranswer</a>;
<a name="l301"><span class="linenum"> 301</span></a>          }
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">        // Drop all attempts that go beyond max attempts for the lesson</span>
<a name="l304"><span class="linenum"> 304</span></a>          foreach (<a class="var it20881" onMouseOver="hilite(20881)" onMouseOut="lolite()" onClick="logVariable('attemptset')" href="../../_variables/attemptset.html">$attemptset</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it5645" onMouseOver="hilite(5645)" onMouseOut="lolite()" onClick="logVariable('set')" href="../../_variables/set.html">$set</a>) {
<a name="l305"><span class="linenum"> 305</span></a>              <a class="var it20881" onMouseOver="hilite(20881)" onMouseOut="lolite()" onClick="logVariable('attemptset')" href="../../_variables/attemptset.html">$attemptset</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] = <a class="phpfunction" onClick="logFunction('array_slice')" href="../../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it5645" onMouseOver="hilite(5645)" onMouseOut="lolite()" onClick="logVariable('set')" href="../../_variables/set.html">$set</a>, 0, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>);
<a name="l306"><span class="linenum"> 306</span></a>          }
<a name="l307"><span class="linenum"> 307</span></a>  
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">        // get only the pages and their answers that the user answered</span>
<a name="l309"><span class="linenum"> 309</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2642" onMouseOver="hilite(2642)" onMouseOut="lolite()" onClick="logVariable('usql')" href="../../_variables/usql.html">$usql</a>, <a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it20881" onMouseOver="hilite(20881)" onMouseOut="lolite()" onClick="logVariable('attemptset')" href="../../_variables/attemptset.html">$attemptset</a>));
<a name="l310"><span class="linenum"> 310</span></a>          <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>(<a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l311"><span class="linenum"> 311</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;lesson_pages&quot;, &quot;lessonid = ? AND id <a class="var it2642" onMouseOver="hilite(2642)" onMouseOut="lolite()" onClick="logVariable('usql')" href="../../_variables/usql.html">$usql</a>&quot;, <a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a>);
<a name="l312"><span class="linenum"> 312</span></a>          <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;lesson_answers&quot;, &quot;lessonid = ? AND pageid <a class="var it2642" onMouseOver="hilite(2642)" onMouseOut="lolite()" onClick="logVariable('usql')" href="../../_variables/usql.html">$usql</a>&quot;, <a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a>);
<a name="l313"><span class="linenum"> 313</span></a>  
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">        // Number of pages answered</span>
<a name="l315"><span class="linenum"> 315</span></a>          <a class="var it1260" onMouseOver="hilite(1260)" onMouseOut="lolite()" onClick="logVariable('nquestions')" href="../../_variables/nquestions.html">$nquestions</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>);
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>          foreach (<a class="var it20881" onMouseOver="hilite(20881)" onMouseOut="lolite()" onClick="logVariable('attemptset')" href="../../_variables/attemptset.html">$attemptset</a> as <a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>) {
<a name="l318"><span class="linenum"> 318</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = lesson_page::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>)-&gt;pageid], <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l319"><span class="linenum"> 319</span></a>              if (<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('custom')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/custom.html">custom</a>) {
<a name="l320"><span class="linenum"> 320</span></a>                  <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a> = <a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>);
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">                // If essay question, handle it, otherwise add to score</span>
<a name="l322"><span class="linenum"> 322</span></a>                  if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('requires_manual_grading')" href="../../_functions/requires_manual_grading.html" onMouseOver="funcPopup(event,'requires_manual_grading')">requires_manual_grading</a>()) {
<a name="l323"><span class="linenum"> 323</span></a>                      <a class="var it20882" onMouseOver="hilite(20882)" onMouseOut="lolite()" onClick="logVariable('useranswerobj')" href="../../_variables/useranswerobj.html">$useranswerobj</a> = <a class="phpfunction" onClick="logFunction('unserialize')" href="../../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('useranswer')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/useranswer.html">useranswer</a>);
<a name="l324"><span class="linenum"> 324</span></a>                      if (isset(<a class="var it20882" onMouseOver="hilite(20882)" onMouseOut="lolite()" onClick="logVariable('useranswerobj')" href="../../_variables/useranswerobj.html">$useranswerobj</a>-&gt;<a onClick="logVariable('score')" class="var it44779" onMouseOver="hilite(44779)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>)) {
<a name="l325"><span class="linenum"> 325</span></a>                          <a class="var it1261" onMouseOver="hilite(1261)" onMouseOut="lolite()" onClick="logVariable('earned')" href="../../_variables/earned.html">$earned</a> += <a class="var it20882" onMouseOver="hilite(20882)" onMouseOut="lolite()" onClick="logVariable('useranswerobj')" href="../../_variables/useranswerobj.html">$useranswerobj</a>-&gt;<a onClick="logVariable('score')" class="var it44779" onMouseOver="hilite(44779)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>;
<a name="l326"><span class="linenum"> 326</span></a>                      }
<a name="l327"><span class="linenum"> 327</span></a>                      <a class="var it1276" onMouseOver="hilite(1276)" onMouseOut="lolite()" onClick="logVariable('nmanual')" href="../../_variables/nmanual.html">$nmanual</a>++;
<a name="l328"><span class="linenum"> 328</span></a>                      <a class="var it1278" onMouseOver="hilite(1278)" onMouseOut="lolite()" onClick="logVariable('manualpoints')" href="../../_variables/manualpoints.html">$manualpoints</a> += <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>[<a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('answerid')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a>]-&gt;score;
<a name="l329"><span class="linenum"> 329</span></a>                  } else if (!empty(<a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('answerid')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a>)) {
<a name="l330"><span class="linenum"> 330</span></a>                      <a class="var it1261" onMouseOver="hilite(1261)" onMouseOut="lolite()" onClick="logVariable('earned')" href="../../_variables/earned.html">$earned</a> += <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('earned_score')" href="../../_functions/earned_score.html" onMouseOver="funcPopup(event,'earned_score')">earned_score</a>(<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>, <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>);
<a name="l331"><span class="linenum"> 331</span></a>                  }
<a name="l332"><span class="linenum"> 332</span></a>              } else {
<a name="l333"><span class="linenum"> 333</span></a>                  foreach (<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> as <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>) {
<a name="l334"><span class="linenum"> 334</span></a>                      <a class="var it1261" onMouseOver="hilite(1261)" onMouseOut="lolite()" onClick="logVariable('earned')" href="../../_variables/earned.html">$earned</a> += <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('correct')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/correct.html">correct</a>;
<a name="l335"><span class="linenum"> 335</span></a>                  }
<a name="l336"><span class="linenum"> 336</span></a>                  <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a> = <a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>); <span class="comment">// doesn't matter which one</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">                // If essay question, increase numbers</span>
<a name="l338"><span class="linenum"> 338</span></a>                  if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('requires_manual_grading')" href="../../_functions/requires_manual_grading.html" onMouseOver="funcPopup(event,'requires_manual_grading')">requires_manual_grading</a>()) {
<a name="l339"><span class="linenum"> 339</span></a>                      <a class="var it1276" onMouseOver="hilite(1276)" onMouseOut="lolite()" onClick="logVariable('nmanual')" href="../../_variables/nmanual.html">$nmanual</a>++;
<a name="l340"><span class="linenum"> 340</span></a>                      <a class="var it1278" onMouseOver="hilite(1278)" onMouseOut="lolite()" onClick="logVariable('manualpoints')" href="../../_variables/manualpoints.html">$manualpoints</a>++;
<a name="l341"><span class="linenum"> 341</span></a>                  }
<a name="l342"><span class="linenum"> 342</span></a>              }
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">            // Number of times answered</span>
<a name="l344"><span class="linenum"> 344</span></a>              <a class="var it20879" onMouseOver="hilite(20879)" onMouseOut="lolite()" onClick="logVariable('nviewed')" href="../../_variables/nviewed.html">$nviewed</a> += <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>);
<a name="l345"><span class="linenum"> 345</span></a>          }
<a name="l346"><span class="linenum"> 346</span></a>  
<a name="l347"><span class="linenum"> 347</span></a>          if (<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('custom')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/custom.html">custom</a>) {
<a name="l348"><span class="linenum"> 348</span></a>              <a class="var it20883" onMouseOver="hilite(20883)" onMouseOut="lolite()" onClick="logVariable('bestscores')" href="../../_variables/bestscores.html">$bestscores</a> = array();
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">            // Find the highest possible score per page to get our total</span>
<a name="l350"><span class="linenum"> 350</span></a>              foreach (<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> as <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>) {
<a name="l351"><span class="linenum"> 351</span></a>                  if(!isset(<a class="var it20883" onMouseOver="hilite(20883)" onMouseOut="lolite()" onClick="logVariable('bestscores')" href="../../_variables/bestscores.html">$bestscores</a>[<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('pageid')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>])) {
<a name="l352"><span class="linenum"> 352</span></a>                      <a class="var it20883" onMouseOver="hilite(20883)" onMouseOut="lolite()" onClick="logVariable('bestscores')" href="../../_variables/bestscores.html">$bestscores</a>[<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('pageid')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>] = <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>;
<a name="l353"><span class="linenum"> 353</span></a>                  } else if (<a class="var it20883" onMouseOver="hilite(20883)" onMouseOut="lolite()" onClick="logVariable('bestscores')" href="../../_variables/bestscores.html">$bestscores</a>[<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('pageid')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>] &lt; <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>) {
<a name="l354"><span class="linenum"> 354</span></a>                      <a class="var it20883" onMouseOver="hilite(20883)" onMouseOut="lolite()" onClick="logVariable('bestscores')" href="../../_variables/bestscores.html">$bestscores</a>[<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('pageid')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>] = <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>;
<a name="l355"><span class="linenum"> 355</span></a>                  }
<a name="l356"><span class="linenum"> 356</span></a>              }
<a name="l357"><span class="linenum"> 357</span></a>              <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a> = <a class="phpfunction" onClick="logFunction('array_sum')" href="../../_functions/array_sum.html" onMouseOver="phpfuncPopup(event,'array_sum')">array_sum</a>(<a class="var it20883" onMouseOver="hilite(20883)" onMouseOut="lolite()" onClick="logVariable('bestscores')" href="../../_variables/bestscores.html">$bestscores</a>);
<a name="l358"><span class="linenum"> 358</span></a>          } else {
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">            // Check to make sure the student has answered the minimum questions</span>
<a name="l360"><span class="linenum"> 360</span></a>              if (<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('minquestions')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/minquestions.html">minquestions</a> and <a class="var it1260" onMouseOver="hilite(1260)" onMouseOut="lolite()" onClick="logVariable('nquestions')" href="../../_variables/nquestions.html">$nquestions</a> &lt; <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('minquestions')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/minquestions.html">minquestions</a>) {
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">                // Nope, increase number viewed by the amount of unanswered questions</span>
<a name="l362"><span class="linenum"> 362</span></a>                  <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a> =  <a class="var it20879" onMouseOver="hilite(20879)" onMouseOut="lolite()" onClick="logVariable('nviewed')" href="../../_variables/nviewed.html">$nviewed</a> + (<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('minquestions')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/minquestions.html">minquestions</a> - <a class="var it1260" onMouseOver="hilite(1260)" onMouseOut="lolite()" onClick="logVariable('nquestions')" href="../../_variables/nquestions.html">$nquestions</a>);
<a name="l363"><span class="linenum"> 363</span></a>              } else {
<a name="l364"><span class="linenum"> 364</span></a>                  <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a> = <a class="var it20879" onMouseOver="hilite(20879)" onMouseOut="lolite()" onClick="logVariable('nviewed')" href="../../_variables/nviewed.html">$nviewed</a>;
<a name="l365"><span class="linenum"> 365</span></a>              }
<a name="l366"><span class="linenum"> 366</span></a>          }
<a name="l367"><span class="linenum"> 367</span></a>      }
<a name="l368"><span class="linenum"> 368</span></a>  
<a name="l369"><span class="linenum"> 369</span></a>      if (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a>) { // not zero
<a name="l370"><span class="linenum"> 370</span></a>          <a class="var it20880" onMouseOver="hilite(20880)" onMouseOut="lolite()" onClick="logVariable('thegrade')" href="../../_variables/thegrade.html">$thegrade</a> = <a class="phpfunction" onClick="logFunction('round')" href="../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(100 * <a class="var it1261" onMouseOver="hilite(1261)" onMouseOut="lolite()" onClick="logVariable('earned')" href="../../_variables/earned.html">$earned</a> / <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a>, 5);
<a name="l371"><span class="linenum"> 371</span></a>      }
<a name="l372"><span class="linenum"> 372</span></a>  
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">    // Build the grade information object</span>
<a name="l374"><span class="linenum"> 374</span></a>      <a class="var it1259" onMouseOver="hilite(1259)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>               = new stdClass;
<a name="l375"><span class="linenum"> 375</span></a>      <a class="var it1259" onMouseOver="hilite(1259)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('nquestions')" class="var it44764" onMouseOver="hilite(44764)" onMouseOut="lolite()" href="../../_variables/nquestions.html">nquestions</a>   = <a class="var it1260" onMouseOver="hilite(1260)" onMouseOut="lolite()" onClick="logVariable('nquestions')" href="../../_variables/nquestions.html">$nquestions</a>;
<a name="l376"><span class="linenum"> 376</span></a>      <a class="var it1259" onMouseOver="hilite(1259)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('attempts')" class="var it44764" onMouseOver="hilite(44764)" onMouseOut="lolite()" href="../../_variables/attempts.html">attempts</a>     = <a class="var it20879" onMouseOver="hilite(20879)" onMouseOut="lolite()" onClick="logVariable('nviewed')" href="../../_variables/nviewed.html">$nviewed</a>;
<a name="l377"><span class="linenum"> 377</span></a>      <a class="var it1259" onMouseOver="hilite(1259)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('total')" class="var it44764" onMouseOver="hilite(44764)" onMouseOut="lolite()" href="../../_variables/total.html">total</a>        = <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a>;
<a name="l378"><span class="linenum"> 378</span></a>      <a class="var it1259" onMouseOver="hilite(1259)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('earned')" class="var it44764" onMouseOver="hilite(44764)" onMouseOut="lolite()" href="../../_variables/earned.html">earned</a>       = <a class="var it1261" onMouseOver="hilite(1261)" onMouseOut="lolite()" onClick="logVariable('earned')" href="../../_variables/earned.html">$earned</a>;
<a name="l379"><span class="linenum"> 379</span></a>      <a class="var it1259" onMouseOver="hilite(1259)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('grade')" class="var it44764" onMouseOver="hilite(44764)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>        = <a class="var it20880" onMouseOver="hilite(20880)" onMouseOut="lolite()" onClick="logVariable('thegrade')" href="../../_variables/thegrade.html">$thegrade</a>;
<a name="l380"><span class="linenum"> 380</span></a>      <a class="var it1259" onMouseOver="hilite(1259)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('nmanual')" class="var it44764" onMouseOver="hilite(44764)" onMouseOut="lolite()" href="../../_variables/nmanual.html">nmanual</a>      = <a class="var it1276" onMouseOver="hilite(1276)" onMouseOut="lolite()" onClick="logVariable('nmanual')" href="../../_variables/nmanual.html">$nmanual</a>;
<a name="l381"><span class="linenum"> 381</span></a>      <a class="var it1259" onMouseOver="hilite(1259)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('manualpoints')" class="var it44764" onMouseOver="hilite(44764)" onMouseOut="lolite()" href="../../_variables/manualpoints.html">manualpoints</a> = <a class="var it1278" onMouseOver="hilite(1278)" onMouseOut="lolite()" onClick="logVariable('manualpoints')" href="../../_variables/manualpoints.html">$manualpoints</a>;
<a name="l382"><span class="linenum"> 382</span></a>  
<a name="l383"><span class="linenum"> 383</span></a>      return <a class="var it1259" onMouseOver="hilite(1259)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>;
<a name="l384"><span class="linenum"> 384</span></a>  }
<a name="l385"><span class="linenum"> 385</span></a>  
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">/**</span>
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment"> * Determines if a user can view the left menu.  The determining factor</span>
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment"> * is whether a user has a grade greater than or equal to the lesson setting</span>
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment"> * of displayleftif</span>
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment"> *</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment"> * @param object $lesson Lesson object of the current lesson</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment"> * @return boolean 0 if the user cannot see, or $lesson-&gt;displayleft to keep displayleft unchanged</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment"> **/</span>
<a name="l394"><span class="linenum"> 394</span></a>  function <a class="function" onClick="logFunction('lesson_displayleftif')" href="../../_functions/lesson_displayleftif.html" onMouseOver="funcPopup(event,'lesson_displayleftif')">lesson_displayleftif</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l395"><span class="linenum"> 395</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l396"><span class="linenum"> 396</span></a>  
<a name="l397"><span class="linenum"> 397</span></a>      if (!empty(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('displayleftif')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/displayleftif.html">displayleftif</a>)) {
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment">        // get the current user's max grade for this lesson</span>
<a name="l399"><span class="linenum"> 399</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array (&quot;userid&quot; =&gt; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;lessonid&quot; =&gt; <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l400"><span class="linenum"> 400</span></a>          if (<a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('maxgrade')" href="../../_variables/maxgrade.html">$maxgrade</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>('SELECT userid, <a class="phpfunction" onClick="logFunction('MAX')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(grade) AS maxgrade FROM {lesson_grades} WHERE userid = :userid AND lessonid = :lessonid GROUP BY userid', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l401"><span class="linenum"> 401</span></a>              if (<a class="var it542" onMouseOver="hilite(542)" onMouseOut="lolite()" onClick="logVariable('maxgrade')" href="../../_variables/maxgrade.html">$maxgrade</a>-&gt;<a onClick="logVariable('maxgrade')" class="var it44780" onMouseOver="hilite(44780)" onMouseOut="lolite()" href="../../_variables/maxgrade.html">maxgrade</a> &lt; <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('displayleftif')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/displayleftif.html">displayleftif</a>) {
<a name="l402"><span class="linenum"> 402</span></a>                  return 0;  <span class="comment">// turn off the displayleft</span>
<a name="l403"><span class="linenum"> 403</span></a>              }
<a name="l404"><span class="linenum"> 404</span></a>          } else {
<a name="l405"><span class="linenum"> 405</span></a>              return 0; <span class="comment">// no grades</span>
<a name="l406"><span class="linenum"> 406</span></a>          }
<a name="l407"><span class="linenum"> 407</span></a>      }
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">    // if we get to here, keep the original state of displayleft lesson setting</span>
<a name="l410"><span class="linenum"> 410</span></a>      return <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('displayleft')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/displayleft.html">displayleft</a>;
<a name="l411"><span class="linenum"> 411</span></a>  }
<a name="l412"><span class="linenum"> 412</span></a>  
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">/**</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment"> *</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment"> * @param $cm</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment"> * @param $lesson</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment"> * @param $page</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment"> * @return unknown_type</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment"> */</span>
<a name="l420"><span class="linenum"> 420</span></a>  function <a class="function" onClick="logFunction('lesson_add_fake_blocks')" href="../../_functions/lesson_add_fake_blocks.html" onMouseOver="funcPopup(event,'lesson_add_fake_blocks')">lesson_add_fake_blocks</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a> = null) {
<a name="l421"><span class="linenum"> 421</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a> = <a class="function" onClick="logFunction('lesson_menu_block_contents')" href="../../_functions/lesson_menu_block_contents.html" onMouseOver="funcPopup(event,'lesson_menu_block_contents')">lesson_menu_block_contents</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l422"><span class="linenum"> 422</span></a>      if (!empty(<a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>)) {
<a name="l423"><span class="linenum"> 423</span></a>          <a class="var it8286" onMouseOver="hilite(8286)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../../_variables/regions.html">$regions</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('get_regions')" href="../../_functions/get_regions.html" onMouseOver="funcPopup(event,'get_regions')">get_regions</a>();
<a name="l424"><span class="linenum"> 424</span></a>          <a class="var it20885" onMouseOver="hilite(20885)" onMouseOut="lolite()" onClick="logVariable('firstregion')" href="../../_variables/firstregion.html">$firstregion</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it8286" onMouseOver="hilite(8286)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../../_variables/regions.html">$regions</a>);
<a name="l425"><span class="linenum"> 425</span></a>          <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_fake_block')" href="../../_functions/add_fake_block.html" onMouseOver="funcPopup(event,'add_fake_block')">add_fake_block</a>(<a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>, <a class="var it20885" onMouseOver="hilite(20885)" onMouseOut="lolite()" onClick="logVariable('firstregion')" href="../../_variables/firstregion.html">$firstregion</a>);
<a name="l426"><span class="linenum"> 426</span></a>      }
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a> = <a class="function" onClick="logFunction('lesson_mediafile_block_contents')" href="../../_functions/lesson_mediafile_block_contents.html" onMouseOver="funcPopup(event,'lesson_mediafile_block_contents')">lesson_mediafile_block_contents</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l429"><span class="linenum"> 429</span></a>      if (!empty(<a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>)) {
<a name="l430"><span class="linenum"> 430</span></a>          <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_fake_block')" href="../../_functions/add_fake_block.html" onMouseOver="funcPopup(event,'add_fake_block')">add_fake_block</a>(<a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('get_default_region')" href="../../_functions/get_default_region.html" onMouseOver="funcPopup(event,'get_default_region')">get_default_region</a>());
<a name="l431"><span class="linenum"> 431</span></a>      }
<a name="l432"><span class="linenum"> 432</span></a>  
<a name="l433"><span class="linenum"> 433</span></a>      if (!empty(<a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>)) {
<a name="l434"><span class="linenum"> 434</span></a>          <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a> = <a class="function" onClick="logFunction('lesson_clock_block_contents')" href="../../_functions/lesson_clock_block_contents.html" onMouseOver="funcPopup(event,'lesson_clock_block_contents')">lesson_clock_block_contents</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>);
<a name="l435"><span class="linenum"> 435</span></a>          if (!empty(<a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>)) {
<a name="l436"><span class="linenum"> 436</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_fake_block')" href="../../_functions/add_fake_block.html" onMouseOver="funcPopup(event,'add_fake_block')">add_fake_block</a>(<a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('get_default_region')" href="../../_functions/get_default_region.html" onMouseOver="funcPopup(event,'get_default_region')">get_default_region</a>());
<a name="l437"><span class="linenum"> 437</span></a>          }
<a name="l438"><span class="linenum"> 438</span></a>      }
<a name="l439"><span class="linenum"> 439</span></a>  }
<a name="l440"><span class="linenum"> 440</span></a>  
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">/**</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment"> * If there is a media file associated with this</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment"> * lesson, return a block_contents that displays it.</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment"> *</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment"> * @param int $cmid Course Module ID for this lesson</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment"> * @param object $lesson Full lesson record object</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment"> * @return block_contents</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment"> **/</span>
<a name="l449"><span class="linenum"> 449</span></a>  function <a class="function" onClick="logFunction('lesson_mediafile_block_contents')" href="../../_functions/lesson_mediafile_block_contents.html" onMouseOver="funcPopup(event,'lesson_mediafile_block_contents')">lesson_mediafile_block_contents</a>(<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l450"><span class="linenum"> 450</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l451"><span class="linenum"> 451</span></a>      if (empty(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediafile')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/mediafile.html">mediafile</a>)) {
<a name="l452"><span class="linenum"> 452</span></a>          return null;
<a name="l453"><span class="linenum"> 453</span></a>      }
<a name="l454"><span class="linenum"> 454</span></a>  
<a name="l455"><span class="linenum"> 455</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array();
<a name="l456"><span class="linenum"> 456</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['menubar'] = 0;
<a name="l457"><span class="linenum"> 457</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['location'] = 0;
<a name="l458"><span class="linenum"> 458</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['left'] = 5;
<a name="l459"><span class="linenum"> 459</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['top'] = 5;
<a name="l460"><span class="linenum"> 460</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['scrollbars'] = 1;
<a name="l461"><span class="linenum"> 461</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['resizable'] = 1;
<a name="l462"><span class="linenum"> 462</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['width'] = <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediawidth')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/mediawidth.html">mediawidth</a>;
<a name="l463"><span class="linenum"> 463</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['height'] = <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediaheight')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/mediaheight.html">mediaheight</a>;
<a name="l464"><span class="linenum"> 464</span></a>  
<a name="l465"><span class="linenum"> 465</span></a>      <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/mod/lesson/mediafile.php?id='.<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>);
<a name="l466"><span class="linenum"> 466</span></a>      <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = <span class="keyword">new </span><a class="class" onClick="logClass('popup_action')" href="../../_classes/popup_action.html" onMouseOver="classPopup(event,'popup_action')">popup_action</a>('click', <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>, 'lessonmediafile', <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l467"><span class="linenum"> 467</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('action_link')" href="../../_functions/action_link.html" onMouseOver="funcPopup(event,'action_link')">action_link</a>(<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('mediafilepopup', 'lesson'), <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>, array('title'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('mediafilepopup', 'lesson')));
<a name="l468"><span class="linenum"> 468</span></a>  
<a name="l469"><span class="linenum"> 469</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a> = <span class="keyword">new </span><a class="class" onClick="logClass('block_contents')" href="../../_classes/block_contents.html" onMouseOver="classPopup(event,'block_contents')">block_contents</a>();
<a name="l470"><span class="linenum"> 470</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('title')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('linkedmedia', 'lesson');
<a name="l471"><span class="linenum"> 471</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../../_variables/attributes.html">attributes</a>['class'] = 'mediafile block';
<a name="l472"><span class="linenum"> 472</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('content')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>;
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>      return <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>;
<a name="l475"><span class="linenum"> 475</span></a>  }
<a name="l476"><span class="linenum"> 476</span></a>  
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">/**</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment"> * If a timed lesson and not a teacher, then</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment"> * return a block_contents containing the clock.</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment"> *</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment"> * @param int $cmid Course Module ID for this lesson</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment"> * @param object $lesson Full lesson record object</span>
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment"> * @param object $timer Full timer record object</span>
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment"> * @return block_contents</span>
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment"> **/</span>
<a name="l486"><span class="linenum"> 486</span></a>  function <a class="function" onClick="logFunction('lesson_clock_block_contents')" href="../../_functions/lesson_clock_block_contents.html" onMouseOver="funcPopup(event,'lesson_clock_block_contents')">lesson_clock_block_contents</a>(<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment">    // Display for timed lessons and for students only</span>
<a name="l488"><span class="linenum"> 488</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>);
<a name="l489"><span class="linenum"> 489</span></a>      if (<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('timelimit')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a> == 0 || <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/lesson:manage', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l490"><span class="linenum"> 490</span></a>          return null;
<a name="l491"><span class="linenum"> 491</span></a>      }
<a name="l492"><span class="linenum"> 492</span></a>  
<a name="l493"><span class="linenum"> 493</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = '&lt;div id=&quot;lesson-timer&quot;&gt;';
<a name="l494"><span class="linenum"> 494</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> .=  <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('time_remaining')" href="../../_functions/time_remaining.html" onMouseOver="funcPopup(event,'time_remaining')">time_remaining</a>(<a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('starttime')" class="var it44758" onMouseOver="hilite(44758)" onMouseOut="lolite()" href="../../_variables/starttime.html">starttime</a>);
<a name="l495"><span class="linenum"> 495</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> .= '&lt;/div&gt;';
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>      <a class="var it20889" onMouseOver="hilite(20889)" onMouseOut="lolite()" onClick="logVariable('clocksettings')" href="../../_variables/clocksettings.html">$clocksettings</a> = array('starttime' =&gt; <a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('starttime')" class="var it44758" onMouseOver="hilite(44758)" onMouseOut="lolite()" href="../../_variables/starttime.html">starttime</a>, 'servertime' =&gt; <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), 'testlength' =&gt; <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('timelimit')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a>);
<a name="l498"><span class="linenum"> 498</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('requires')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('data_for_js')" href="../../_functions/data_for_js.html" onMouseOver="funcPopup(event,'data_for_js')">data_for_js</a>('clocksettings', <a class="var it20889" onMouseOver="hilite(20889)" onMouseOut="lolite()" onClick="logVariable('clocksettings')" href="../../_variables/clocksettings.html">$clocksettings</a>, true);
<a name="l499"><span class="linenum"> 499</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('requires')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('strings_for_js')" href="../../_functions/strings_for_js.html" onMouseOver="funcPopup(event,'strings_for_js')">strings_for_js</a>(array('timeisup'), 'lesson');
<a name="l500"><span class="linenum"> 500</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('requires')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js')" href="../../_functions/js.html" onMouseOver="funcPopup(event,'js')">js</a>('<a class="filename" href="../../mod/lesson/timer.js.html">/mod/lesson/timer.js</a>');
<a name="l501"><span class="linenum"> 501</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('requires')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js_init_call')" href="../../_functions/js_init_call.html" onMouseOver="funcPopup(event,'js_init_call')">js_init_call</a>('show_clock');
<a name="l502"><span class="linenum"> 502</span></a>  
<a name="l503"><span class="linenum"> 503</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a> = <span class="keyword">new </span><a class="class" onClick="logClass('block_contents')" href="../../_classes/block_contents.html" onMouseOver="classPopup(event,'block_contents')">block_contents</a>();
<a name="l504"><span class="linenum"> 504</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('title')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('timeremaining', 'lesson');
<a name="l505"><span class="linenum"> 505</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../../_variables/attributes.html">attributes</a>['class'] = 'clock block';
<a name="l506"><span class="linenum"> 506</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('content')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>;
<a name="l507"><span class="linenum"> 507</span></a>  
<a name="l508"><span class="linenum"> 508</span></a>      return <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>;
<a name="l509"><span class="linenum"> 509</span></a>  }
<a name="l510"><span class="linenum"> 510</span></a>  
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">/**</span>
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment"> * If left menu is turned on, then this will</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment"> * print the menu in a block</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment"> *</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment"> * @param int $cmid Course Module ID for this lesson</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment"> * @param lesson $lesson Full lesson record object</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment"> * @return void</span>
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment"> **/</span>
<a name="l519"><span class="linenum"> 519</span></a>  function <a class="function" onClick="logFunction('lesson_menu_block_contents')" href="../../_functions/lesson_menu_block_contents.html" onMouseOver="funcPopup(event,'lesson_menu_block_contents')">lesson_menu_block_contents</a>(<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l520"><span class="linenum"> 520</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l521"><span class="linenum"> 521</span></a>  
<a name="l522"><span class="linenum"> 522</span></a>      if (!<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('displayleft')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/displayleft.html">displayleft</a>) {
<a name="l523"><span class="linenum"> 523</span></a>          return null;
<a name="l524"><span class="linenum"> 524</span></a>      }
<a name="l525"><span class="linenum"> 525</span></a>  
<a name="l526"><span class="linenum"> 526</span></a>      <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l527"><span class="linenum"> 527</span></a>      foreach (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l528"><span class="linenum"> 528</span></a>          if ((int)<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> === 0) {
<a name="l529"><span class="linenum"> 529</span></a>              <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l530"><span class="linenum"> 530</span></a>              break;
<a name="l531"><span class="linenum"> 531</span></a>          }
<a name="l532"><span class="linenum"> 532</span></a>      }
<a name="l533"><span class="linenum"> 533</span></a>      <a class="var it20890" onMouseOver="hilite(20890)" onMouseOut="lolite()" onClick="logVariable('currentpageid')" href="../../_variables/currentpageid.html">$currentpageid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('pageid', <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l534"><span class="linenum"> 534</span></a>  
<a name="l535"><span class="linenum"> 535</span></a>      if (!<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> || !<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>) {
<a name="l536"><span class="linenum"> 536</span></a>          return null;
<a name="l537"><span class="linenum"> 537</span></a>      }
<a name="l538"><span class="linenum"> 538</span></a>  
<a name="l539"><span class="linenum"> 539</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = '&lt;a href=&quot;#maincontent&quot; class=&quot;skip&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('skip', 'lesson').&quot;&lt;/a&gt;\n&lt;div class=\&quot;menuwrapper\&quot;&gt;\n&lt;ul&gt;\n&quot;;
<a name="l540"><span class="linenum"> 540</span></a>  
<a name="l541"><span class="linenum"> 541</span></a>      while (<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> != 0) {
<a name="l542"><span class="linenum"> 542</span></a>          <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>];
<a name="l543"><span class="linenum"> 543</span></a>  
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">        // Only process branch tables with display turned on</span>
<a name="l545"><span class="linenum"> 545</span></a>          if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('displayinmenublock')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/displayinmenublock.html">displayinmenublock</a> &amp;&amp; <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('display')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/display.html">display</a>) {
<a name="l546"><span class="linenum"> 546</span></a>              if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it20890" onMouseOver="hilite(20890)" onMouseOut="lolite()" onClick="logVariable('currentpageid')" href="../../_variables/currentpageid.html">$currentpageid</a>) {
<a name="l547"><span class="linenum"> 547</span></a>                  <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> .= '&lt;li class=&quot;selected&quot;&gt;'.<a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('title')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/title.html">title</a>,true).&quot;&lt;/li&gt;\n&quot;;
<a name="l548"><span class="linenum"> 548</span></a>              } else {
<a name="l549"><span class="linenum"> 549</span></a>                  <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> .= &quot;&lt;li class=\&quot;notselected\&quot;&gt;&lt;a href=\&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/lesson/view.php?id=<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>&amp;amp;pageid=<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>\&quot;&gt;&quot;.<a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('title')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/title.html">title</a>,true).&quot;&lt;/a&gt;&lt;/li&gt;\n&quot;;
<a name="l550"><span class="linenum"> 550</span></a>              }
<a name="l551"><span class="linenum"> 551</span></a>  
<a name="l552"><span class="linenum"> 552</span></a>          }
<a name="l553"><span class="linenum"> 553</span></a>          <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a>;
<a name="l554"><span class="linenum"> 554</span></a>      }
<a name="l555"><span class="linenum"> 555</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> .= &quot;&lt;/ul&gt;\n&lt;/div&gt;\n&quot;;
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a> = <span class="keyword">new </span><a class="class" onClick="logClass('block_contents')" href="../../_classes/block_contents.html" onMouseOver="classPopup(event,'block_contents')">block_contents</a>();
<a name="l558"><span class="linenum"> 558</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('title')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('lessonmenu', 'lesson');
<a name="l559"><span class="linenum"> 559</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../../_variables/attributes.html">attributes</a>['class'] = 'menu block';
<a name="l560"><span class="linenum"> 560</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('content')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>;
<a name="l561"><span class="linenum"> 561</span></a>  
<a name="l562"><span class="linenum"> 562</span></a>      return <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>;
<a name="l563"><span class="linenum"> 563</span></a>  }
<a name="l564"><span class="linenum"> 564</span></a>  
<a name="l565"><span class="linenum"> 565</span></a>  <span class="comment">/**</span>
<a name="l566"><span class="linenum"> 566</span></a>  <span class="comment"> * Adds header buttons to the page for the lesson</span>
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment"> *</span>
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment"> * @param object $context</span>
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment"> * @param bool $extraeditbuttons</span>
<a name="l571"><span class="linenum"> 571</span></a>  <span class="comment"> * @param int $lessonpageid</span>
<a name="l572"><span class="linenum"> 572</span></a>  <span class="comment"> */</span>
<a name="l573"><span class="linenum"> 573</span></a>  function <a class="function" onClick="logFunction('lesson_add_header_buttons')" href="../../_functions/lesson_add_header_buttons.html" onMouseOver="funcPopup(event,'lesson_add_header_buttons')">lesson_add_header_buttons</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1249" onMouseOver="hilite(1249)" onMouseOut="lolite()" onClick="logVariable('extraeditbuttons')" href="../../_variables/extraeditbuttons.html">$extraeditbuttons</a>=false, <a class="var it1250" onMouseOver="hilite(1250)" onMouseOut="lolite()" onClick="logVariable('lessonpageid')" href="../../_variables/lessonpageid.html">$lessonpageid</a>=null) {
<a name="l574"><span class="linenum"> 574</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l575"><span class="linenum"> 575</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/lesson:edit', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) &amp;&amp; <a class="var it1249" onMouseOver="hilite(1249)" onMouseOut="lolite()" onClick="logVariable('extraeditbuttons')" href="../../_variables/extraeditbuttons.html">$extraeditbuttons</a>) {
<a name="l576"><span class="linenum"> 576</span></a>          if (<a class="var it1250" onMouseOver="hilite(1250)" onMouseOut="lolite()" onClick="logVariable('lessonpageid')" href="../../_variables/lessonpageid.html">$lessonpageid</a> === null) {
<a name="l577"><span class="linenum"> 577</span></a>              <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidpageid', 'lesson');
<a name="l578"><span class="linenum"> 578</span></a>          }
<a name="l579"><span class="linenum"> 579</span></a>          if (!empty(<a class="var it1250" onMouseOver="hilite(1250)" onMouseOut="lolite()" onClick="logVariable('lessonpageid')" href="../../_variables/lessonpageid.html">$lessonpageid</a>) &amp;&amp; <a class="var it1250" onMouseOver="hilite(1250)" onMouseOut="lolite()" onClick="logVariable('lessonpageid')" href="../../_variables/lessonpageid.html">$lessonpageid</a> != <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>) {
<a name="l580"><span class="linenum"> 580</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/lesson/editpage.php.html">/mod/lesson/editpage.php</a>', array(
<a name="l581"><span class="linenum"> 581</span></a>                  'id'       =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l582"><span class="linenum"> 582</span></a>                  'pageid'   =&gt; <a class="var it1250" onMouseOver="hilite(1250)" onMouseOut="lolite()" onClick="logVariable('lessonpageid')" href="../../_variables/lessonpageid.html">$lessonpageid</a>,
<a name="l583"><span class="linenum"> 583</span></a>                  'edit'     =&gt; 1,
<a name="l584"><span class="linenum"> 584</span></a>                  'returnto' =&gt; <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/url.html">url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false)
<a name="l585"><span class="linenum"> 585</span></a>              ));
<a name="l586"><span class="linenum"> 586</span></a>              <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_button')" href="../../_functions/set_button.html" onMouseOver="funcPopup(event,'set_button')">set_button</a>(<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editpagecontent', 'lesson')));
<a name="l587"><span class="linenum"> 587</span></a>          }
<a name="l588"><span class="linenum"> 588</span></a>      }
<a name="l589"><span class="linenum"> 589</span></a>  }
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">/**</span>
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment"> * This is a function used to detect media types and generate html code.</span>
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment"> *</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment"> * @global object $CFG</span>
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment"> * @global object $PAGE</span>
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment"> * @param object $lesson</span>
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment"> * @param object $context</span>
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment"> * @return string $code the html code of media</span>
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment"> */</span>
<a name="l600"><span class="linenum"> 600</span></a>  function <a class="function" onClick="logFunction('lesson_get_media_html')" href="../../_functions/lesson_get_media_html.html" onMouseOver="funcPopup(event,'lesson_get_media_html')">lesson_get_media_html</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l601"><span class="linenum"> 601</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l602"><span class="linenum"> 602</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/resourcelib.php&quot;);
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">    // get the media file link</span>
<a name="l605"><span class="linenum"> 605</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediafile')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/mediafile.html">mediafile</a>, '://') !== false) {
<a name="l606"><span class="linenum"> 606</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediafile')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/mediafile.html">mediafile</a>);
<a name="l607"><span class="linenum"> 607</span></a>      } else {
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment">        // the timemodified is used to prevent caching problems, instead of '/' we should better read from files table and use sortorder</span>
<a name="l609"><span class="linenum"> 609</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_pluginfile_url')" href="../../_functions/make_pluginfile_url.html" onMouseOver="funcPopup(event,'make_pluginfile_url')">make_pluginfile_url</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'mediafile', <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>, '/', <a class="phpfunction" onClick="logFunction('ltrim')" href="../../_functions/ltrim.html" onMouseOver="phpfuncPopup(event,'ltrim')">ltrim</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediafile')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/mediafile.html">mediafile</a>, '/'));
<a name="l610"><span class="linenum"> 610</span></a>      }
<a name="l611"><span class="linenum"> 611</span></a>      <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediafile')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/mediafile.html">mediafile</a>;
<a name="l612"><span class="linenum"> 612</span></a>  
<a name="l613"><span class="linenum"> 613</span></a>      <a class="var it4382" onMouseOver="hilite(4382)" onMouseOut="lolite()" onClick="logVariable('clicktoopen')" href="../../_variables/clicktoopen.html">$clicktoopen</a> = <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('download'));
<a name="l614"><span class="linenum"> 614</span></a>  
<a name="l615"><span class="linenum"> 615</span></a>      <a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a> = <a class="function" onClick="logFunction('resourcelib_guess_url_mimetype')" href="../../_functions/resourcelib_guess_url_mimetype.html" onMouseOver="funcPopup(event,'resourcelib_guess_url_mimetype')">resourcelib_guess_url_mimetype</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>);
<a name="l616"><span class="linenum"> 616</span></a>  
<a name="l617"><span class="linenum"> 617</span></a>      <a class="var it2554" onMouseOver="hilite(2554)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a> = <a class="function" onClick="logFunction('resourcelib_get_extension')" href="../../_functions/resourcelib_get_extension.html" onMouseOver="funcPopup(event,'resourcelib_get_extension')">resourcelib_get_extension</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false));
<a name="l618"><span class="linenum"> 618</span></a>  
<a name="l619"><span class="linenum"> 619</span></a>      <a class="var it4384" onMouseOver="hilite(4384)" onMouseOut="lolite()" onClick="logVariable('mediarenderer')" href="../../_variables/mediarenderer.html">$mediarenderer</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'media');
<a name="l620"><span class="linenum"> 620</span></a>      <a class="var it4385" onMouseOver="hilite(4385)" onMouseOut="lolite()" onClick="logVariable('embedoptions')" href="../../_variables/embedoptions.html">$embedoptions</a> = array(
<a name="l621"><span class="linenum"> 621</span></a>          core_media::OPTION_TRUSTED =&gt; true,
<a name="l622"><span class="linenum"> 622</span></a>          core_media::OPTION_BLOCK =&gt; true
<a name="l623"><span class="linenum"> 623</span></a>      );
<a name="l624"><span class="linenum"> 624</span></a>  
<a name="l625"><span class="linenum"> 625</span></a>  <span class="comment">    // find the correct type and print it out</span>
<a name="l626"><span class="linenum"> 626</span></a>      if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a>, array('image/gif','image/jpeg','image/png'))) {  // It's an image
<a name="l627"><span class="linenum"> 627</span></a>          <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> = <a class="function" onClick="logFunction('resourcelib_embed_image')" href="../../_functions/resourcelib_embed_image.html" onMouseOver="funcPopup(event,'resourcelib_embed_image')">resourcelib_embed_image</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>);
<a name="l628"><span class="linenum"> 628</span></a>  
<a name="l629"><span class="linenum"> 629</span></a>      } else if (<a class="var it4384" onMouseOver="hilite(4384)" onMouseOut="lolite()" onClick="logVariable('mediarenderer')" href="../../_variables/mediarenderer.html">$mediarenderer</a>-&gt;<a class="function" onClick="logFunction('can_embed_url')" href="../../_functions/can_embed_url.html" onMouseOver="funcPopup(event,'can_embed_url')">can_embed_url</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it4385" onMouseOver="hilite(4385)" onMouseOut="lolite()" onClick="logVariable('embedoptions')" href="../../_variables/embedoptions.html">$embedoptions</a>)) {
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">        // Media (audio/video) file.</span>
<a name="l631"><span class="linenum"> 631</span></a>          <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> = <a class="var it4384" onMouseOver="hilite(4384)" onMouseOut="lolite()" onClick="logVariable('mediarenderer')" href="../../_variables/mediarenderer.html">$mediarenderer</a>-&gt;<a class="function" onClick="logFunction('embed_url')" href="../../_functions/embed_url.html" onMouseOver="funcPopup(event,'embed_url')">embed_url</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>, 0, 0, <a class="var it4385" onMouseOver="hilite(4385)" onMouseOut="lolite()" onClick="logVariable('embedoptions')" href="../../_variables/embedoptions.html">$embedoptions</a>);
<a name="l632"><span class="linenum"> 632</span></a>  
<a name="l633"><span class="linenum"> 633</span></a>      } else {
<a name="l634"><span class="linenum"> 634</span></a>  <span class="comment">        // anything else - just try object tag enlarged as much as possible</span>
<a name="l635"><span class="linenum"> 635</span></a>          <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> = <a class="function" onClick="logFunction('resourcelib_embed_general')" href="../../_functions/resourcelib_embed_general.html" onMouseOver="funcPopup(event,'resourcelib_embed_general')">resourcelib_embed_general</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>, <a class="var it4382" onMouseOver="hilite(4382)" onMouseOut="lolite()" onClick="logVariable('clicktoopen')" href="../../_variables/clicktoopen.html">$clicktoopen</a>, <a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a>);
<a name="l636"><span class="linenum"> 636</span></a>      }
<a name="l637"><span class="linenum"> 637</span></a>  
<a name="l638"><span class="linenum"> 638</span></a>      return <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a>;
<a name="l639"><span class="linenum"> 639</span></a>  }
<a name="l640"><span class="linenum"> 640</span></a>  
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">/**</span>
<a name="l642"><span class="linenum"> 642</span></a>  <span class="comment"> * Logic to happen when a/some group(s) has/have been deleted in a course.</span>
<a name="l643"><span class="linenum"> 643</span></a>  <span class="comment"> *</span>
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment"> * @param int $courseid The course ID.</span>
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment"> * @param int $groupid The group id if it is known</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment"> * @return void</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment"> */</span>
<a name="l648"><span class="linenum"> 648</span></a>  function <a class="function" onClick="logFunction('lesson_process_group_deleted_in_course')" href="../../_functions/lesson_process_group_deleted_in_course.html" onMouseOver="funcPopup(event,'lesson_process_group_deleted_in_course')">lesson_process_group_deleted_in_course</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = null) {
<a name="l649"><span class="linenum"> 649</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l650"><span class="linenum"> 650</span></a>  
<a name="l651"><span class="linenum"> 651</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('courseid' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>);
<a name="l652"><span class="linenum"> 652</span></a>      if (<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) {
<a name="l653"><span class="linenum"> 653</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['groupid'] = <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>;
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment">        // We just update the group that was deleted.</span>
<a name="l655"><span class="linenum"> 655</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT o.id, o.lessonid
<a name="l656"><span class="linenum"> 656</span></a>                    FROM {lesson_overrides} o
<a name="l657"><span class="linenum"> 657</span></a>                    JOIN {lesson} lesson ON lesson.id = o.lessonid
<a name="l658"><span class="linenum"> 658</span></a>                   WHERE lesson.course = :courseid
<a name="l659"><span class="linenum"> 659</span></a>                     AND o.groupid = :groupid&quot;;
<a name="l660"><span class="linenum"> 660</span></a>      } else {
<a name="l661"><span class="linenum"> 661</span></a>  <span class="comment">        // No groupid, we update all orphaned group overrides for all lessons in course.</span>
<a name="l662"><span class="linenum"> 662</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT o.id, o.lessonid
<a name="l663"><span class="linenum"> 663</span></a>                    FROM {lesson_overrides} o
<a name="l664"><span class="linenum"> 664</span></a>                    JOIN {lesson} lesson ON lesson.id = o.lessonid
<a name="l665"><span class="linenum"> 665</span></a>               LEFT JOIN {groups} grp ON grp.id = o.groupid
<a name="l666"><span class="linenum"> 666</span></a>                   WHERE lesson.course = :courseid
<a name="l667"><span class="linenum"> 667</span></a>                     AND o.groupid IS NOT NULL
<a name="l668"><span class="linenum"> 668</span></a>                     AND grp.id IS NULL&quot;;
<a name="l669"><span class="linenum"> 669</span></a>      }
<a name="l670"><span class="linenum"> 670</span></a>      <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql_menu')" href="../../_functions/get_records_sql_menu.html" onMouseOver="funcPopup(event,'get_records_sql_menu')">get_records_sql_menu</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l671"><span class="linenum"> 671</span></a>      if (!<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>) {
<a name="l672"><span class="linenum"> 672</span></a>          return; <span class="comment">// Nothing to do.</span>
<a name="l673"><span class="linenum"> 673</span></a>      }
<a name="l674"><span class="linenum"> 674</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_list')" href="../../_functions/delete_records_list.html" onMouseOver="funcPopup(event,'delete_records_list')">delete_records_list</a>('lesson_overrides', 'id', <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>));
<a name="l675"><span class="linenum"> 675</span></a>  }
<a name="l676"><span class="linenum"> 676</span></a>  
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">/**</span>
<a name="l678"><span class="linenum"> 678</span></a>  <span class="comment"> * Abstract class that page type's MUST inherit from.</span>
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment"> *</span>
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment"> * This is the abstract class that ALL add page type forms must extend.</span>
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment"> * You will notice that all but two of the methods this class contains are final.</span>
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment"> * Essentially the only thing that extending classes can do is extend custom_definition.</span>
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment"> * OR if it has a special requirement on creation it can extend construction_override</span>
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment"> *</span>
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment"> * @abstract</span>
<a name="l686"><span class="linenum"> 686</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment"> */</span>
<a name="l689"><span class="linenum"> 689</span></a>  abstract class lesson_add_page_form_base extends moodleform {
<a name="l690"><span class="linenum"> 690</span></a>  
<a name="l691"><span class="linenum"> 691</span></a>      <span class="comment">/**</span>
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment">     * This is the classic define that is used to identify this pagetype.</span>
<a name="l693"><span class="linenum"> 693</span></a>  <span class="comment">     * Will be one of LESSON_*</span>
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment">     * @var int</span>
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment">     */</span>
<a name="l696"><span class="linenum"> 696</span></a>      public <a class="var it260" onMouseOver="hilite(260)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../../_variables/qtype.html">$qtype</a>;
<a name="l697"><span class="linenum"> 697</span></a>  
<a name="l698"><span class="linenum"> 698</span></a>      <span class="comment">/**</span>
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">     * The simple string that describes the page type e.g. truefalse, multichoice</span>
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment">     * @var string</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment">     */</span>
<a name="l702"><span class="linenum"> 702</span></a>      public <a class="var it3050" onMouseOver="hilite(3050)" onMouseOut="lolite()" onClick="logVariable('qtypestring')" href="../../_variables/qtypestring.html">$qtypestring</a>;
<a name="l703"><span class="linenum"> 703</span></a>  
<a name="l704"><span class="linenum"> 704</span></a>      <span class="comment">/**</span>
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment">     * An array of options used in the htmleditor</span>
<a name="l706"><span class="linenum"> 706</span></a>  <span class="comment">     * @var array</span>
<a name="l707"><span class="linenum"> 707</span></a>  <span class="comment">     */</span>
<a name="l708"><span class="linenum"> 708</span></a>      protected <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../_variables/editoroptions.html">$editoroptions</a> = array();
<a name="l709"><span class="linenum"> 709</span></a>  
<a name="l710"><span class="linenum"> 710</span></a>      <span class="comment">/**</span>
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment">     * True if this is a standard page of false if it does something special.</span>
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">     * Questions are standard pages, branch tables are not</span>
<a name="l713"><span class="linenum"> 713</span></a>  <span class="comment">     * @var bool</span>
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment">     */</span>
<a name="l715"><span class="linenum"> 715</span></a>      protected <a class="var it5924" onMouseOver="hilite(5924)" onMouseOut="lolite()" onClick="logVariable('standard')" href="../../_variables/standard.html">$standard</a> = true;
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>      <span class="comment">/**</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment">     * Answer format supported by question type.</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment">     */</span>
<a name="l720"><span class="linenum"> 720</span></a>      protected <a class="var it3042" onMouseOver="hilite(3042)" onMouseOut="lolite()" onClick="logVariable('answerformat')" href="../../_variables/answerformat.html">$answerformat</a> = '';
<a name="l721"><span class="linenum"> 721</span></a>  
<a name="l722"><span class="linenum"> 722</span></a>      <span class="comment">/**</span>
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment">     * Response format supported by question type.</span>
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment">     */</span>
<a name="l725"><span class="linenum"> 725</span></a>      protected <a class="var it3040" onMouseOver="hilite(3040)" onMouseOut="lolite()" onClick="logVariable('responseformat')" href="../../_variables/responseformat.html">$responseformat</a> = '';
<a name="l726"><span class="linenum"> 726</span></a>  
<a name="l727"><span class="linenum"> 727</span></a>      <span class="comment">/**</span>
<a name="l728"><span class="linenum"> 728</span></a>  <span class="comment">     * Each page type can and should override this to add any custom elements to</span>
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">     * the basic form that they want</span>
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">     */</span>
<a name="l731"><span class="linenum"> 731</span></a>      public function <a class="function" onClick="logFunction('custom_definition')" href="../../_functions/custom_definition.html" onMouseOver="funcPopup(event,'custom_definition')">custom_definition</a>() {}
<a name="l732"><span class="linenum"> 732</span></a>  
<a name="l733"><span class="linenum"> 733</span></a>      <span class="comment">/**</span>
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment">     * Returns answer format used by question type.</span>
<a name="l735"><span class="linenum"> 735</span></a>  <span class="comment">     */</span>
<a name="l736"><span class="linenum"> 736</span></a>      public function <a class="function" onClick="logFunction('get_answer_format')" href="../../_functions/get_answer_format.html" onMouseOver="funcPopup(event,'get_answer_format')">get_answer_format</a>() {
<a name="l737"><span class="linenum"> 737</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answerformat')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answerformat.html">answerformat</a>;
<a name="l738"><span class="linenum"> 738</span></a>      }
<a name="l739"><span class="linenum"> 739</span></a>  
<a name="l740"><span class="linenum"> 740</span></a>      <span class="comment">/**</span>
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment">     * Returns response format used by question type.</span>
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">     */</span>
<a name="l743"><span class="linenum"> 743</span></a>      public function <a class="function" onClick="logFunction('get_response_format')" href="../../_functions/get_response_format.html" onMouseOver="funcPopup(event,'get_response_format')">get_response_format</a>() {
<a name="l744"><span class="linenum"> 744</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('responseformat')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a>;
<a name="l745"><span class="linenum"> 745</span></a>      }
<a name="l746"><span class="linenum"> 746</span></a>  
<a name="l747"><span class="linenum"> 747</span></a>      <span class="comment">/**</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment">     * Used to determine if this is a standard page or a special page</span>
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment">     * @return bool</span>
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">     */</span>
<a name="l751"><span class="linenum"> 751</span></a>      public final function <a class="function" onClick="logFunction('is_standard')" href="../../_functions/is_standard.html" onMouseOver="funcPopup(event,'is_standard')">is_standard</a>() {
<a name="l752"><span class="linenum"> 752</span></a>          return (bool)<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('standard')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/standard.html">standard</a>;
<a name="l753"><span class="linenum"> 753</span></a>      }
<a name="l754"><span class="linenum"> 754</span></a>  
<a name="l755"><span class="linenum"> 755</span></a>      <span class="comment">/**</span>
<a name="l756"><span class="linenum"> 756</span></a>  <span class="comment">     * Add the required basic elements to the form.</span>
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">     *</span>
<a name="l758"><span class="linenum"> 758</span></a>  <span class="comment">     * This method adds the basic elements to the form including title and contents</span>
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">     * and then calls custom_definition();</span>
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment">     */</span>
<a name="l761"><span class="linenum"> 761</span></a>      public final function <a class="function" onClick="logFunction('definition')" href="../../_functions/definition.html" onMouseOver="funcPopup(event,'definition')">definition</a>() {
<a name="l762"><span class="linenum"> 762</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>;
<a name="l763"><span class="linenum"> 763</span></a>          <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../_variables/editoroptions.html">$editoroptions</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['editoroptions'];
<a name="l764"><span class="linenum"> 764</span></a>  
<a name="l765"><span class="linenum"> 765</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'qtypeheading', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('createaquestionpage', 'lesson', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('qtypestring')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/qtypestring.html">qtypestring</a>, 'lesson')));
<a name="l766"><span class="linenum"> 766</span></a>  
<a name="l767"><span class="linenum"> 767</span></a>          if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['returnto'])) {
<a name="l768"><span class="linenum"> 768</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'returnto', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['returnto']);
<a name="l769"><span class="linenum"> 769</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('returnto', <a class="constant" onClick="logConstant('PARAM_URL')" href="../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>);
<a name="l770"><span class="linenum"> 770</span></a>          }
<a name="l771"><span class="linenum"> 771</span></a>  
<a name="l772"><span class="linenum"> 772</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'id');
<a name="l773"><span class="linenum"> 773</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('id', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l774"><span class="linenum"> 774</span></a>  
<a name="l775"><span class="linenum"> 775</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'pageid');
<a name="l776"><span class="linenum"> 776</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('pageid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l777"><span class="linenum"> 777</span></a>  
<a name="l778"><span class="linenum"> 778</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('standard')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/standard.html">standard</a> === true) {
<a name="l779"><span class="linenum"> 779</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'qtype');
<a name="l780"><span class="linenum"> 780</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('qtype', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l781"><span class="linenum"> 781</span></a>  
<a name="l782"><span class="linenum"> 782</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('text', 'title', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pagetitle', 'lesson'), array('size'=&gt;70));
<a name="l783"><span class="linenum"> 783</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('title', <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l784"><span class="linenum"> 784</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addRule')" href="../../_functions/addrule.html" onMouseOver="funcPopup(event,'addrule')">addRule</a>('title', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('required'), 'required', null, 'client');
<a name="l785"><span class="linenum"> 785</span></a>  
<a name="l786"><span class="linenum"> 786</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/editoroptions.html">editoroptions</a> = array('noclean'=&gt;true, 'maxfiles'=&gt;<a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['maxbytes']);
<a name="l787"><span class="linenum"> 787</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('editor', 'contents_editor', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pagecontents', 'lesson'), null, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/editoroptions.html">editoroptions</a>);
<a name="l788"><span class="linenum"> 788</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('contents_editor', <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l789"><span class="linenum"> 789</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addRule')" href="../../_functions/addrule.html" onMouseOver="funcPopup(event,'addrule')">addRule</a>('contents_editor', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('required'), 'required', null, 'client');
<a name="l790"><span class="linenum"> 790</span></a>          }
<a name="l791"><span class="linenum"> 791</span></a>  
<a name="l792"><span class="linenum"> 792</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('custom_definition')" href="../../_functions/custom_definition.html" onMouseOver="funcPopup(event,'custom_definition')">custom_definition</a>();
<a name="l793"><span class="linenum"> 793</span></a>  
<a name="l794"><span class="linenum"> 794</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['edit'] === true) {
<a name="l795"><span class="linenum"> 795</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'edit', 1);
<a name="l796"><span class="linenum"> 796</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('edit', <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l797"><span class="linenum"> 797</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_action_buttons')" href="../../_functions/add_action_buttons.html" onMouseOver="funcPopup(event,'add_action_buttons')">add_action_buttons</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cancel'), <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savepage', 'lesson'));
<a name="l798"><span class="linenum"> 798</span></a>          } else if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('qtype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> === 'questiontype') {
<a name="l799"><span class="linenum"> 799</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_action_buttons')" href="../../_functions/add_action_buttons.html" onMouseOver="funcPopup(event,'add_action_buttons')">add_action_buttons</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cancel'), <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addaquestionpage', 'lesson'));
<a name="l800"><span class="linenum"> 800</span></a>          } else {
<a name="l801"><span class="linenum"> 801</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_action_buttons')" href="../../_functions/add_action_buttons.html" onMouseOver="funcPopup(event,'add_action_buttons')">add_action_buttons</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cancel'), <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savepage', 'lesson'));
<a name="l802"><span class="linenum"> 802</span></a>          }
<a name="l803"><span class="linenum"> 803</span></a>      }
<a name="l804"><span class="linenum"> 804</span></a>  
<a name="l805"><span class="linenum"> 805</span></a>      <span class="comment">/**</span>
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment">     * Convenience function: Adds a jumpto select element</span>
<a name="l807"><span class="linenum"> 807</span></a>  <span class="comment">     *</span>
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment">     * @param string $name</span>
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment">     * @param string|null $label</span>
<a name="l810"><span class="linenum"> 810</span></a>  <span class="comment">     * @param int $selected The page to select by default</span>
<a name="l811"><span class="linenum"> 811</span></a>  <span class="comment">     */</span>
<a name="l812"><span class="linenum"> 812</span></a>      protected final function <a class="function" onClick="logFunction('add_jumpto')" href="../../_functions/add_jumpto.html" onMouseOver="funcPopup(event,'add_jumpto')">add_jumpto</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>=null, <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a>=<a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>) {
<a name="l813"><span class="linenum"> 813</span></a>          <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;jump&quot;, &quot;lesson&quot;);
<a name="l814"><span class="linenum"> 814</span></a>          if (<a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> === null) {
<a name="l815"><span class="linenum"> 815</span></a>              <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> = <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>;
<a name="l816"><span class="linenum"> 816</span></a>          }
<a name="l817"><span class="linenum"> 817</span></a>          if (is_int(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>)) {
<a name="l818"><span class="linenum"> 818</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = &quot;jumpto[<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>]&quot;;
<a name="l819"><span class="linenum"> 819</span></a>          }
<a name="l820"><span class="linenum"> 820</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('select', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['jumpto']);
<a name="l821"><span class="linenum"> 821</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a>);
<a name="l822"><span class="linenum"> 822</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addHelpButton')" href="../../_functions/addhelpbutton.html" onMouseOver="funcPopup(event,'addhelpbutton')">addHelpButton</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, 'jumps', 'lesson');
<a name="l823"><span class="linenum"> 823</span></a>      }
<a name="l824"><span class="linenum"> 824</span></a>  
<a name="l825"><span class="linenum"> 825</span></a>      <span class="comment">/**</span>
<a name="l826"><span class="linenum"> 826</span></a>  <span class="comment">     * Convenience function: Adds a score input element</span>
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment">     *</span>
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment">     * @param string $name</span>
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment">     * @param string|null $label</span>
<a name="l830"><span class="linenum"> 830</span></a>  <span class="comment">     * @param mixed $value The default value</span>
<a name="l831"><span class="linenum"> 831</span></a>  <span class="comment">     */</span>
<a name="l832"><span class="linenum"> 832</span></a>      protected final function <a class="function" onClick="logFunction('add_score')" href="../../_functions/add_score.html" onMouseOver="funcPopup(event,'add_score')">add_score</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>=null, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>=null) {
<a name="l833"><span class="linenum"> 833</span></a>          if (<a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> === null) {
<a name="l834"><span class="linenum"> 834</span></a>              <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;score&quot;, &quot;lesson&quot;);
<a name="l835"><span class="linenum"> 835</span></a>          }
<a name="l836"><span class="linenum"> 836</span></a>  
<a name="l837"><span class="linenum"> 837</span></a>          if (is_int(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>)) {
<a name="l838"><span class="linenum"> 838</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = &quot;score[<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>]&quot;;
<a name="l839"><span class="linenum"> 839</span></a>          }
<a name="l840"><span class="linenum"> 840</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('text', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>, array('size'=&gt;5));
<a name="l841"><span class="linenum"> 841</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l842"><span class="linenum"> 842</span></a>          if (<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> !== null) {
<a name="l843"><span class="linenum"> 843</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l844"><span class="linenum"> 844</span></a>          }
<a name="l845"><span class="linenum"> 845</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addHelpButton')" href="../../_functions/addhelpbutton.html" onMouseOver="funcPopup(event,'addhelpbutton')">addHelpButton</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, 'score', 'lesson');
<a name="l846"><span class="linenum"> 846</span></a>  
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment">        // Score is only used for custom scoring. Disable the element when not in use to stop some confusion.</span>
<a name="l848"><span class="linenum"> 848</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['lesson']-&gt;custom) {
<a name="l849"><span class="linenum"> 849</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('freeze')" href="../../_functions/freeze.html" onMouseOver="funcPopup(event,'freeze')">freeze</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l850"><span class="linenum"> 850</span></a>          }
<a name="l851"><span class="linenum"> 851</span></a>      }
<a name="l852"><span class="linenum"> 852</span></a>  
<a name="l853"><span class="linenum"> 853</span></a>      <span class="comment">/**</span>
<a name="l854"><span class="linenum"> 854</span></a>  <span class="comment">     * Convenience function: Adds an answer editor</span>
<a name="l855"><span class="linenum"> 855</span></a>  <span class="comment">     *</span>
<a name="l856"><span class="linenum"> 856</span></a>  <span class="comment">     * @param int $count The count of the element to add</span>
<a name="l857"><span class="linenum"> 857</span></a>  <span class="comment">     * @param string $label, null means default</span>
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment">     * @param bool $required</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">     * @param string $format</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">     * @return void</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">     */</span>
<a name="l862"><span class="linenum"> 862</span></a>      protected final function <a class="function" onClick="logFunction('add_answer')" href="../../_functions/add_answer.html" onMouseOver="funcPopup(event,'add_answer')">add_answer</a>(<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>, <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> = null, <a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../_variables/required.html">$required</a> = false, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>= '') {
<a name="l863"><span class="linenum"> 863</span></a>          if (<a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> === null) {
<a name="l864"><span class="linenum"> 864</span></a>              <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('answer', 'lesson');
<a name="l865"><span class="linenum"> 865</span></a>          }
<a name="l866"><span class="linenum"> 866</span></a>  
<a name="l867"><span class="linenum"> 867</span></a>          if (<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a> == <a class="constant" onClick="logConstant('LESSON_ANSWER_HTML')" href="../../_constants/LESSON_ANSWER_HTML.html" onMouseOver="constPopup(event,'LESSON_ANSWER_HTML')">LESSON_ANSWER_HTML</a>) {
<a name="l868"><span class="linenum"> 868</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('editor', 'answer_editor['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>,
<a name="l869"><span class="linenum"> 869</span></a>                      array('rows' =&gt; '4', 'columns' =&gt; '80'),
<a name="l870"><span class="linenum"> 870</span></a>                      array('noclean' =&gt; true, 'maxfiles' =&gt; <a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['maxbytes']));
<a name="l871"><span class="linenum"> 871</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('answer_editor['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l872"><span class="linenum"> 872</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>('answer_editor['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', array('text' =&gt; '', 'format' =&gt; <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>));
<a name="l873"><span class="linenum"> 873</span></a>          } else {
<a name="l874"><span class="linenum"> 874</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('text', 'answer_editor['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>,
<a name="l875"><span class="linenum"> 875</span></a>                      array('size' =&gt; '50', 'maxlength' =&gt; '200'));
<a name="l876"><span class="linenum"> 876</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('answer_editor['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l877"><span class="linenum"> 877</span></a>          }
<a name="l878"><span class="linenum"> 878</span></a>  
<a name="l879"><span class="linenum"> 879</span></a>          if (<a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../_variables/required.html">$required</a>) {
<a name="l880"><span class="linenum"> 880</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addRule')" href="../../_functions/addrule.html" onMouseOver="funcPopup(event,'addrule')">addRule</a>('answer_editor['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('required'), 'required', null, 'client');
<a name="l881"><span class="linenum"> 881</span></a>          }
<a name="l882"><span class="linenum"> 882</span></a>      }
<a name="l883"><span class="linenum"> 883</span></a>      <span class="comment">/**</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment">     * Convenience function: Adds an response editor</span>
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">     *</span>
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment">     * @param int $count The count of the element to add</span>
<a name="l887"><span class="linenum"> 887</span></a>  <span class="comment">     * @param string $label, null means default</span>
<a name="l888"><span class="linenum"> 888</span></a>  <span class="comment">     * @param bool $required</span>
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment">     * @return void</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment">     */</span>
<a name="l891"><span class="linenum"> 891</span></a>      protected final function <a class="function" onClick="logFunction('add_response')" href="../../_functions/add_response.html" onMouseOver="funcPopup(event,'add_response')">add_response</a>(<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>, <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> = null, <a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../_variables/required.html">$required</a> = false) {
<a name="l892"><span class="linenum"> 892</span></a>          if (<a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> === null) {
<a name="l893"><span class="linenum"> 893</span></a>              <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('response', 'lesson');
<a name="l894"><span class="linenum"> 894</span></a>          }
<a name="l895"><span class="linenum"> 895</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('editor', 'response_editor['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>,
<a name="l896"><span class="linenum"> 896</span></a>                   array('rows' =&gt; '4', 'columns' =&gt; '80'),
<a name="l897"><span class="linenum"> 897</span></a>                   array('noclean' =&gt; true, 'maxfiles' =&gt; <a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['maxbytes']));
<a name="l898"><span class="linenum"> 898</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('response_editor['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l899"><span class="linenum"> 899</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>('response_editor['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', array('text' =&gt; '', 'format' =&gt; <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>));
<a name="l900"><span class="linenum"> 900</span></a>  
<a name="l901"><span class="linenum"> 901</span></a>          if (<a class="var it321" onMouseOver="hilite(321)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../_variables/required.html">$required</a>) {
<a name="l902"><span class="linenum"> 902</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addRule')" href="../../_functions/addrule.html" onMouseOver="funcPopup(event,'addrule')">addRule</a>('response_editor['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('required'), 'required', null, 'client');
<a name="l903"><span class="linenum"> 903</span></a>          }
<a name="l904"><span class="linenum"> 904</span></a>      }
<a name="l905"><span class="linenum"> 905</span></a>  
<a name="l906"><span class="linenum"> 906</span></a>      <span class="comment">/**</span>
<a name="l907"><span class="linenum"> 907</span></a>  <span class="comment">     * A function that gets called upon init of this object by the calling script.</span>
<a name="l908"><span class="linenum"> 908</span></a>  <span class="comment">     *</span>
<a name="l909"><span class="linenum"> 909</span></a>  <span class="comment">     * This can be used to process an immediate action if required. Currently it</span>
<a name="l910"><span class="linenum"> 910</span></a>  <span class="comment">     * is only used in special cases by non-standard page types.</span>
<a name="l911"><span class="linenum"> 911</span></a>  <span class="comment">     *</span>
<a name="l912"><span class="linenum"> 912</span></a>  <span class="comment">     * @return bool</span>
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment">     */</span>
<a name="l914"><span class="linenum"> 914</span></a>      public function <a class="function" onClick="logFunction('construction_override')" href="../../_functions/construction_override.html" onMouseOver="funcPopup(event,'construction_override')">construction_override</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, lesson <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l915"><span class="linenum"> 915</span></a>          return true;
<a name="l916"><span class="linenum"> 916</span></a>      }
<a name="l917"><span class="linenum"> 917</span></a>  }
<a name="l918"><span class="linenum"> 918</span></a>  
<a name="l919"><span class="linenum"> 919</span></a>  
<a name="l920"><span class="linenum"> 920</span></a>  
<a name="l921"><span class="linenum"> 921</span></a>  <span class="comment">/**</span>
<a name="l922"><span class="linenum"> 922</span></a>  <span class="comment"> * Class representation of a lesson</span>
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment"> *</span>
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment"> * This class is used the interact with, and manage a lesson once instantiated.</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment"> * If you need to fetch a lesson object you can do so by calling</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment"> *</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment"> * &lt;code&gt;</span>
<a name="l928"><span class="linenum"> 928</span></a>  <span class="comment"> * lesson::load($lessonid);</span>
<a name="l929"><span class="linenum"> 929</span></a>  <span class="comment"> * // or</span>
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment"> * $lessonrecord = $DB-&gt;get_record('lesson', $lessonid);</span>
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment"> * $lesson = new lesson($lessonrecord);</span>
<a name="l932"><span class="linenum"> 932</span></a>  <span class="comment"> * &lt;/code&gt;</span>
<a name="l933"><span class="linenum"> 933</span></a>  <span class="comment"> *</span>
<a name="l934"><span class="linenum"> 934</span></a>  <span class="comment"> * The class itself extends lesson_base as all classes within the lesson module should</span>
<a name="l935"><span class="linenum"> 935</span></a>  <span class="comment"> *</span>
<a name="l936"><span class="linenum"> 936</span></a>  <span class="comment"> * These properties are from the database</span>
<a name="l937"><span class="linenum"> 937</span></a>  <span class="comment"> * @property int $id The id of this lesson</span>
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment"> * @property int $course The ID of the course this lesson belongs to</span>
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment"> * @property string $name The name of this lesson</span>
<a name="l940"><span class="linenum"> 940</span></a>  <span class="comment"> * @property int $practice Flag to toggle this as a practice lesson</span>
<a name="l941"><span class="linenum"> 941</span></a>  <span class="comment"> * @property int $modattempts Toggle to allow the user to go back and review answers</span>
<a name="l942"><span class="linenum"> 942</span></a>  <span class="comment"> * @property int $usepassword Toggle the use of a password for entry</span>
<a name="l943"><span class="linenum"> 943</span></a>  <span class="comment"> * @property string $password The password to require users to enter</span>
<a name="l944"><span class="linenum"> 944</span></a>  <span class="comment"> * @property int $dependency ID of another lesson this lesson is dependent on</span>
<a name="l945"><span class="linenum"> 945</span></a>  <span class="comment"> * @property string $conditions Conditions of the lesson dependency</span>
<a name="l946"><span class="linenum"> 946</span></a>  <span class="comment"> * @property int $grade The maximum grade a user can achieve (%)</span>
<a name="l947"><span class="linenum"> 947</span></a>  <span class="comment"> * @property int $custom Toggle custom scoring on or off</span>
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment"> * @property int $ongoing Toggle display of an ongoing score</span>
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment"> * @property int $usemaxgrade How retakes are handled (max=1, mean=0)</span>
<a name="l950"><span class="linenum"> 950</span></a>  <span class="comment"> * @property int $maxanswers The max number of answers or branches</span>
<a name="l951"><span class="linenum"> 951</span></a>  <span class="comment"> * @property int $maxattempts The maximum number of attempts a user can record</span>
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment"> * @property int $review Toggle use or wrong answer review button</span>
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment"> * @property int $nextpagedefault Override the default next page</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment"> * @property int $feedback Toggles display of default feedback</span>
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment"> * @property int $minquestions Sets a minimum value of pages seen when calculating grades</span>
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment"> * @property int $maxpages Maximum number of pages this lesson can contain</span>
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment"> * @property int $retake Flag to allow users to retake a lesson</span>
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment"> * @property int $activitylink Relate this lesson to another lesson</span>
<a name="l959"><span class="linenum"> 959</span></a>  <span class="comment"> * @property string $mediafile File to pop up to or webpage to display</span>
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment"> * @property int $mediaheight Sets the height of the media file popup</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment"> * @property int $mediawidth Sets the width of the media file popup</span>
<a name="l962"><span class="linenum"> 962</span></a>  <span class="comment"> * @property int $mediaclose Toggle display of a media close button</span>
<a name="l963"><span class="linenum"> 963</span></a>  <span class="comment"> * @property int $slideshow Flag for whether branch pages should be shown as slideshows</span>
<a name="l964"><span class="linenum"> 964</span></a>  <span class="comment"> * @property int $width Width of slideshow</span>
<a name="l965"><span class="linenum"> 965</span></a>  <span class="comment"> * @property int $height Height of slideshow</span>
<a name="l966"><span class="linenum"> 966</span></a>  <span class="comment"> * @property string $bgcolor Background colour of slideshow</span>
<a name="l967"><span class="linenum"> 967</span></a>  <span class="comment"> * @property int $displayleft Display a left menu</span>
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment"> * @property int $displayleftif Sets the condition on which the left menu is displayed</span>
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment"> * @property int $progressbar Flag to toggle display of a lesson progress bar</span>
<a name="l970"><span class="linenum"> 970</span></a>  <span class="comment"> * @property int $available Timestamp of when this lesson becomes available</span>
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment"> * @property int $deadline Timestamp of when this lesson is no longer available</span>
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment"> * @property int $timemodified Timestamp when lesson was last modified</span>
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment"> *</span>
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment"> * These properties are calculated</span>
<a name="l975"><span class="linenum"> 975</span></a>  <span class="comment"> * @property int $firstpageid Id of the first page of this lesson (prevpageid=0)</span>
<a name="l976"><span class="linenum"> 976</span></a>  <span class="comment"> * @property int $lastpageid Id of the last page of this lesson (nextpageid=0)</span>
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment"> *</span>
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l979"><span class="linenum"> 979</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l980"><span class="linenum"> 980</span></a>  <span class="comment"> */</span>
<a name="l981"><span class="linenum"> 981</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('lesson')" href="../../_classes/lesson.html" onMouseOver="classPopup(event,'lesson')">lesson</a> extends lesson_base {
<a name="l982"><span class="linenum"> 982</span></a>  
<a name="l983"><span class="linenum"> 983</span></a>      <span class="comment">/**</span>
<a name="l984"><span class="linenum"> 984</span></a>  <span class="comment">     * The id of the first page (where prevpageid = 0) gets set and retrieved by</span>
<a name="l985"><span class="linenum"> 985</span></a>  <span class="comment">     * {@see get_firstpageid()} by directly calling &lt;code&gt;$lesson-&gt;firstpageid;&lt;/code&gt;</span>
<a name="l986"><span class="linenum"> 986</span></a>  <span class="comment">     * @var int</span>
<a name="l987"><span class="linenum"> 987</span></a>  <span class="comment">     */</span>
<a name="l988"><span class="linenum"> 988</span></a>      protected <a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('firstpageid')" href="../../_variables/firstpageid.html">$firstpageid</a> = null;
<a name="l989"><span class="linenum"> 989</span></a>      <span class="comment">/**</span>
<a name="l990"><span class="linenum"> 990</span></a>  <span class="comment">     * The id of the last page (where nextpageid = 0) gets set and retrieved by</span>
<a name="l991"><span class="linenum"> 991</span></a>  <span class="comment">     * {@see get_lastpageid()} by directly calling &lt;code&gt;$lesson-&gt;lastpageid;&lt;/code&gt;</span>
<a name="l992"><span class="linenum"> 992</span></a>  <span class="comment">     * @var int</span>
<a name="l993"><span class="linenum"> 993</span></a>  <span class="comment">     */</span>
<a name="l994"><span class="linenum"> 994</span></a>      protected <a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> = null;
<a name="l995"><span class="linenum"> 995</span></a>      <span class="comment">/**</span>
<a name="l996"><span class="linenum"> 996</span></a>  <span class="comment">     * An array used to cache the pages associated with this lesson after the first</span>
<a name="l997"><span class="linenum"> 997</span></a>  <span class="comment">     * time they have been loaded.</span>
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">     * A note to developers: If you are going to be working with MORE than one or</span>
<a name="l999"><span class="linenum"> 999</span></a>  <span class="comment">     * two pages from a lesson you should probably call {@see $lesson-&gt;load_all_pages()}</span>
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment">     * in order to save excess database queries.</span>
<a name="l1001"><span class="linenum">1001</span></a>  <span class="comment">     * @var array An array of lesson_page objects</span>
<a name="l1002"><span class="linenum">1002</span></a>  <span class="comment">     */</span>
<a name="l1003"><span class="linenum">1003</span></a>      protected <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = array();
<a name="l1004"><span class="linenum">1004</span></a>      <span class="comment">/**</span>
<a name="l1005"><span class="linenum">1005</span></a>  <span class="comment">     * Flag that gets set to true once all of the pages associated with the lesson</span>
<a name="l1006"><span class="linenum">1006</span></a>  <span class="comment">     * have been loaded.</span>
<a name="l1007"><span class="linenum">1007</span></a>  <span class="comment">     * @var bool</span>
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment">     */</span>
<a name="l1009"><span class="linenum">1009</span></a>      protected <a class="var it20893" onMouseOver="hilite(20893)" onMouseOut="lolite()" onClick="logVariable('loadedallpages')" href="../../_variables/loadedallpages.html">$loadedallpages</a> = false;
<a name="l1010"><span class="linenum">1010</span></a>  
<a name="l1011"><span class="linenum">1011</span></a>      <span class="comment">/**</span>
<a name="l1012"><span class="linenum">1012</span></a>  <span class="comment">     * Simply generates a lesson object given an array/object of properties</span>
<a name="l1013"><span class="linenum">1013</span></a>  <span class="comment">     * Overrides {@see lesson_base-&gt;create()}</span>
<a name="l1014"><span class="linenum">1014</span></a>  <span class="comment">     * @static</span>
<a name="l1015"><span class="linenum">1015</span></a>  <span class="comment">     * @param object|array $properties</span>
<a name="l1016"><span class="linenum">1016</span></a>  <span class="comment">     * @return lesson</span>
<a name="l1017"><span class="linenum">1017</span></a>  <span class="comment">     */</span>
<a name="l1018"><span class="linenum">1018</span></a>      public static function <a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>) {
<a name="l1019"><span class="linenum">1019</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('lesson')" href="../../_classes/lesson.html" onMouseOver="classPopup(event,'lesson')">lesson</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>);
<a name="l1020"><span class="linenum">1020</span></a>      }
<a name="l1021"><span class="linenum">1021</span></a>  
<a name="l1022"><span class="linenum">1022</span></a>      <span class="comment">/**</span>
<a name="l1023"><span class="linenum">1023</span></a>  <span class="comment">     * Generates a lesson object from the database given its id</span>
<a name="l1024"><span class="linenum">1024</span></a>  <span class="comment">     * @static</span>
<a name="l1025"><span class="linenum">1025</span></a>  <span class="comment">     * @param int $lessonid</span>
<a name="l1026"><span class="linenum">1026</span></a>  <span class="comment">     * @return lesson</span>
<a name="l1027"><span class="linenum">1027</span></a>  <span class="comment">     */</span>
<a name="l1028"><span class="linenum">1028</span></a>      public static function <a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it1280" onMouseOver="hilite(1280)" onMouseOut="lolite()" onClick="logVariable('lessonid')" href="../../_variables/lessonid.html">$lessonid</a>) {
<a name="l1029"><span class="linenum">1029</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1030"><span class="linenum">1030</span></a>  
<a name="l1031"><span class="linenum">1031</span></a>          if (!<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lesson', array('id' =&gt; <a class="var it1280" onMouseOver="hilite(1280)" onMouseOut="lolite()" onClick="logVariable('lessonid')" href="../../_variables/lessonid.html">$lessonid</a>))) {
<a name="l1032"><span class="linenum">1032</span></a>              <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidcoursemodule');
<a name="l1033"><span class="linenum">1033</span></a>          }
<a name="l1034"><span class="linenum">1034</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('lesson')" href="../../_classes/lesson.html" onMouseOver="classPopup(event,'lesson')">lesson</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l1035"><span class="linenum">1035</span></a>      }
<a name="l1036"><span class="linenum">1036</span></a>  
<a name="l1037"><span class="linenum">1037</span></a>      <span class="comment">/**</span>
<a name="l1038"><span class="linenum">1038</span></a>  <span class="comment">     * Deletes this lesson from the database</span>
<a name="l1039"><span class="linenum">1039</span></a>  <span class="comment">     */</span>
<a name="l1040"><span class="linenum">1040</span></a>      public function <a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>() {
<a name="l1041"><span class="linenum">1041</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1042"><span class="linenum">1042</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l1043"><span class="linenum">1043</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../calendar/lib.php.html">/calendar/lib.php</a>');
<a name="l1044"><span class="linenum">1044</span></a>  
<a name="l1045"><span class="linenum">1045</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course);
<a name="l1046"><span class="linenum">1046</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1047"><span class="linenum">1047</span></a>  
<a name="l1048"><span class="linenum">1048</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('delete_all_overrides')" href="../../_functions/delete_all_overrides.html" onMouseOver="funcPopup(event,'delete_all_overrides')">delete_all_overrides</a>();
<a name="l1049"><span class="linenum">1049</span></a>  
<a name="l1050"><span class="linenum">1050</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson&quot;, array(&quot;id&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1051"><span class="linenum">1051</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_pages&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1052"><span class="linenum">1052</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_answers&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1053"><span class="linenum">1053</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_attempts&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1054"><span class="linenum">1054</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1055"><span class="linenum">1055</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_timer&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1056"><span class="linenum">1056</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_branch&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1057"><span class="linenum">1057</span></a>          if (<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', array(&quot;modulename&quot;=&gt;'lesson', &quot;instance&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id))) {
<a name="l1058"><span class="linenum">1058</span></a>              foreach(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> as <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>) {
<a name="l1059"><span class="linenum">1059</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l1060"><span class="linenum">1060</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l1061"><span class="linenum">1061</span></a>              }
<a name="l1062"><span class="linenum">1062</span></a>          }
<a name="l1063"><span class="linenum">1063</span></a>  
<a name="l1064"><span class="linenum">1064</span></a>  <span class="comment">        // Delete files associated with this module.</span>
<a name="l1065"><span class="linenum">1065</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1066"><span class="linenum">1066</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1067"><span class="linenum">1067</span></a>  
<a name="l1068"><span class="linenum">1068</span></a>          <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>('mod/lesson', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course, 'mod', 'lesson', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, 0, null, array('deleted'=&gt;1));
<a name="l1069"><span class="linenum">1069</span></a>          return true;
<a name="l1070"><span class="linenum">1070</span></a>      }
<a name="l1071"><span class="linenum">1071</span></a>  
<a name="l1072"><span class="linenum">1072</span></a>      <span class="comment">/**</span>
<a name="l1073"><span class="linenum">1073</span></a>  <span class="comment">     * Deletes a lesson override from the database and clears any corresponding calendar events</span>
<a name="l1074"><span class="linenum">1074</span></a>  <span class="comment">     *</span>
<a name="l1075"><span class="linenum">1075</span></a>  <span class="comment">     * @param int $overrideid The id of the override being deleted</span>
<a name="l1076"><span class="linenum">1076</span></a>  <span class="comment">     * @return bool true on success</span>
<a name="l1077"><span class="linenum">1077</span></a>  <span class="comment">     */</span>
<a name="l1078"><span class="linenum">1078</span></a>      public function <a class="function" onClick="logFunction('delete_override')" href="../../_functions/delete_override.html" onMouseOver="funcPopup(event,'delete_override')">delete_override</a>(<a class="var it6069" onMouseOver="hilite(6069)" onMouseOut="lolite()" onClick="logVariable('overrideid')" href="../../_variables/overrideid.html">$overrideid</a>) {
<a name="l1079"><span class="linenum">1079</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1080"><span class="linenum">1080</span></a>  
<a name="l1081"><span class="linenum">1081</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../calendar/lib.php.html">/calendar/lib.php</a>');
<a name="l1082"><span class="linenum">1082</span></a>  
<a name="l1083"><span class="linenum">1083</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course);
<a name="l1084"><span class="linenum">1084</span></a>  
<a name="l1085"><span class="linenum">1085</span></a>          <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lesson_overrides', array('id' =&gt; <a class="var it6069" onMouseOver="hilite(6069)" onMouseOut="lolite()" onClick="logVariable('overrideid')" href="../../_variables/overrideid.html">$overrideid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1086"><span class="linenum">1086</span></a>  
<a name="l1087"><span class="linenum">1087</span></a>  <span class="comment">        // Delete the events.</span>
<a name="l1088"><span class="linenum">1088</span></a>          <a class="var it9821" onMouseOver="hilite(9821)" onMouseOut="lolite()" onClick="logVariable('conds')" href="../../_variables/conds.html">$conds</a> = array('modulename' =&gt; 'lesson',
<a name="l1089"><span class="linenum">1089</span></a>                  'instance' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id);
<a name="l1090"><span class="linenum">1090</span></a>          if (isset(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('userid')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>)) {
<a name="l1091"><span class="linenum">1091</span></a>              <a class="var it9821" onMouseOver="hilite(9821)" onMouseOut="lolite()" onClick="logVariable('conds')" href="../../_variables/conds.html">$conds</a>['userid'] = <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('userid')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l1092"><span class="linenum">1092</span></a>          } else {
<a name="l1093"><span class="linenum">1093</span></a>              <a class="var it9821" onMouseOver="hilite(9821)" onMouseOut="lolite()" onClick="logVariable('conds')" href="../../_variables/conds.html">$conds</a>['groupid'] = <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('groupid')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>;
<a name="l1094"><span class="linenum">1094</span></a>          }
<a name="l1095"><span class="linenum">1095</span></a>          <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', <a class="var it9821" onMouseOver="hilite(9821)" onMouseOut="lolite()" onClick="logVariable('conds')" href="../../_variables/conds.html">$conds</a>);
<a name="l1096"><span class="linenum">1096</span></a>          foreach (<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> as <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>) {
<a name="l1097"><span class="linenum">1097</span></a>              <a class="var it9781" onMouseOver="hilite(9781)" onMouseOut="lolite()" onClick="logVariable('eventold')" href="../../_variables/eventold.html">$eventold</a> = <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l1098"><span class="linenum">1098</span></a>              <a class="var it9781" onMouseOver="hilite(9781)" onMouseOut="lolite()" onClick="logVariable('eventold')" href="../../_variables/eventold.html">$eventold</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l1099"><span class="linenum">1099</span></a>          }
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('lesson_overrides', array('id' =&gt; <a class="var it6069" onMouseOver="hilite(6069)" onMouseOut="lolite()" onClick="logVariable('overrideid')" href="../../_variables/overrideid.html">$overrideid</a>));
<a name="l1102"><span class="linenum">1102</span></a>  
<a name="l1103"><span class="linenum">1103</span></a>  <span class="comment">        // Set the common parameters for one of the events we will be triggering.</span>
<a name="l1104"><span class="linenum">1104</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(
<a name="l1105"><span class="linenum">1105</span></a>              'objectid' =&gt; <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('id')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1106"><span class="linenum">1106</span></a>              'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l1107"><span class="linenum">1107</span></a>              'other' =&gt; array(
<a name="l1108"><span class="linenum">1108</span></a>                  'lessonid' =&gt; <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;lessonid
<a name="l1109"><span class="linenum">1109</span></a>              )
<a name="l1110"><span class="linenum">1110</span></a>          );
<a name="l1111"><span class="linenum">1111</span></a>  <span class="comment">        // Determine which override deleted event to fire.</span>
<a name="l1112"><span class="linenum">1112</span></a>          if (!empty(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('userid')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>)) {
<a name="l1113"><span class="linenum">1113</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['relateduserid'] = <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('userid')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l1114"><span class="linenum">1114</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('user_override_deleted')" href="../../_classes/user_override_deleted.html" onMouseOver="classPopup(event,'user_override_deleted')">user_override_deleted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1115"><span class="linenum">1115</span></a>          } else {
<a name="l1116"><span class="linenum">1116</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['other']['groupid'] = <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('groupid')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>;
<a name="l1117"><span class="linenum">1117</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('group_override_deleted')" href="../../_classes/group_override_deleted.html" onMouseOver="classPopup(event,'group_override_deleted')">group_override_deleted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1118"><span class="linenum">1118</span></a>          }
<a name="l1119"><span class="linenum">1119</span></a>  
<a name="l1120"><span class="linenum">1120</span></a>  <span class="comment">        // Trigger the override deleted event.</span>
<a name="l1121"><span class="linenum">1121</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('lesson_overrides', <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>);
<a name="l1122"><span class="linenum">1122</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1123"><span class="linenum">1123</span></a>  
<a name="l1124"><span class="linenum">1124</span></a>          return true;
<a name="l1125"><span class="linenum">1125</span></a>      }
<a name="l1126"><span class="linenum">1126</span></a>  
<a name="l1127"><span class="linenum">1127</span></a>      <span class="comment">/**</span>
<a name="l1128"><span class="linenum">1128</span></a>  <span class="comment">     * Deletes all lesson overrides from the database and clears any corresponding calendar events</span>
<a name="l1129"><span class="linenum">1129</span></a>  <span class="comment">     */</span>
<a name="l1130"><span class="linenum">1130</span></a>      public function <a class="function" onClick="logFunction('delete_all_overrides')" href="../../_functions/delete_all_overrides.html" onMouseOver="funcPopup(event,'delete_all_overrides')">delete_all_overrides</a>() {
<a name="l1131"><span class="linenum">1131</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1132"><span class="linenum">1132</span></a>  
<a name="l1133"><span class="linenum">1133</span></a>          <a class="var it9782" onMouseOver="hilite(9782)" onMouseOut="lolite()" onClick="logVariable('overrides')" href="../../_variables/overrides.html">$overrides</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_overrides', array('lessonid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id), 'id');
<a name="l1134"><span class="linenum">1134</span></a>          foreach (<a class="var it9782" onMouseOver="hilite(9782)" onMouseOut="lolite()" onClick="logVariable('overrides')" href="../../_variables/overrides.html">$overrides</a> as <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>) {
<a name="l1135"><span class="linenum">1135</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('delete_override')" href="../../_functions/delete_override.html" onMouseOver="funcPopup(event,'delete_override')">delete_override</a>(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('id')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1136"><span class="linenum">1136</span></a>          }
<a name="l1137"><span class="linenum">1137</span></a>      }
<a name="l1138"><span class="linenum">1138</span></a>  
<a name="l1139"><span class="linenum">1139</span></a>      <span class="comment">/**</span>
<a name="l1140"><span class="linenum">1140</span></a>  <span class="comment">     * Updates the lesson properties with override information for a user.</span>
<a name="l1141"><span class="linenum">1141</span></a>  <span class="comment">     *</span>
<a name="l1142"><span class="linenum">1142</span></a>  <span class="comment">     * Algorithm:  For each lesson setting, if there is a matching user-specific override,</span>
<a name="l1143"><span class="linenum">1143</span></a>  <span class="comment">     *   then use that otherwise, if there are group-specific overrides, return the most</span>
<a name="l1144"><span class="linenum">1144</span></a>  <span class="comment">     *   lenient combination of them.  If neither applies, leave the quiz setting unchanged.</span>
<a name="l1145"><span class="linenum">1145</span></a>  <span class="comment">     *</span>
<a name="l1146"><span class="linenum">1146</span></a>  <span class="comment">     *   Special case: if there is more than one password that applies to the user, then</span>
<a name="l1147"><span class="linenum">1147</span></a>  <span class="comment">     *   lesson-&gt;extrapasswords will contain an array of strings giving the remaining</span>
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment">     *   passwords.</span>
<a name="l1149"><span class="linenum">1149</span></a>  <span class="comment">     *</span>
<a name="l1150"><span class="linenum">1150</span></a>  <span class="comment">     * @param int $userid The userid.</span>
<a name="l1151"><span class="linenum">1151</span></a>  <span class="comment">     */</span>
<a name="l1152"><span class="linenum">1152</span></a>      public function <a class="function" onClick="logFunction('update_effective_access')" href="../../_functions/update_effective_access.html" onMouseOver="funcPopup(event,'update_effective_access')">update_effective_access</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l1153"><span class="linenum">1153</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1154"><span class="linenum">1154</span></a>  
<a name="l1155"><span class="linenum">1155</span></a>  <span class="comment">        // Check for user override.</span>
<a name="l1156"><span class="linenum">1156</span></a>          <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lesson_overrides', array('lessonid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, 'userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l1157"><span class="linenum">1157</span></a>  
<a name="l1158"><span class="linenum">1158</span></a>          if (!<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>) {
<a name="l1159"><span class="linenum">1159</span></a>              <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a> = new stdClass();
<a name="l1160"><span class="linenum">1160</span></a>              <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('available')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/available.html">available</a> = null;
<a name="l1161"><span class="linenum">1161</span></a>              <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('deadline')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/deadline.html">deadline</a> = null;
<a name="l1162"><span class="linenum">1162</span></a>              <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timelimit')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a> = null;
<a name="l1163"><span class="linenum">1163</span></a>              <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('review')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/review.html">review</a> = null;
<a name="l1164"><span class="linenum">1164</span></a>              <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a> = null;
<a name="l1165"><span class="linenum">1165</span></a>              <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('retake')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/retake.html">retake</a> = null;
<a name="l1166"><span class="linenum">1166</span></a>              <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/password.html">password</a> = null;
<a name="l1167"><span class="linenum">1167</span></a>          }
<a name="l1168"><span class="linenum">1168</span></a>  
<a name="l1169"><span class="linenum">1169</span></a>  <span class="comment">        // Check for group overrides.</span>
<a name="l1170"><span class="linenum">1170</span></a>          <a class="var it671" onMouseOver="hilite(671)" onMouseOut="lolite()" onClick="logVariable('groupings')" href="../../_variables/groupings.html">$groupings</a> = <a class="function" onClick="logFunction('groups_get_user_groups')" href="../../_functions/groups_get_user_groups.html" onMouseOver="funcPopup(event,'groups_get_user_groups')">groups_get_user_groups</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l1171"><span class="linenum">1171</span></a>  
<a name="l1172"><span class="linenum">1172</span></a>          if (!empty(<a class="var it671" onMouseOver="hilite(671)" onMouseOut="lolite()" onClick="logVariable('groupings')" href="../../_variables/groupings.html">$groupings</a>[0])) {
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment">            // Select all overrides that apply to the User's groups.</span>
<a name="l1174"><span class="linenum">1174</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it812" onMouseOver="hilite(812)" onMouseOut="lolite()" onClick="logVariable('extra')" href="../../_variables/extra.html">$extra</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it671" onMouseOver="hilite(671)" onMouseOut="lolite()" onClick="logVariable('groupings')" href="../../_variables/groupings.html">$groupings</a>[0]));
<a name="l1175"><span class="linenum">1175</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT * FROM {lesson_overrides}
<a name="l1176"><span class="linenum">1176</span></a>                      WHERE groupid <a class="var it812" onMouseOver="hilite(812)" onMouseOut="lolite()" onClick="logVariable('extra')" href="../../_variables/extra.html">$extra</a> AND lessonid = ?&quot;;
<a name="l1177"><span class="linenum">1177</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l1178"><span class="linenum">1178</span></a>              <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1179"><span class="linenum">1179</span></a>  
<a name="l1180"><span class="linenum">1180</span></a>  <span class="comment">            // Combine the overrides.</span>
<a name="l1181"><span class="linenum">1181</span></a>              <a class="var it20894" onMouseOver="hilite(20894)" onMouseOut="lolite()" onClick="logVariable('availables')" href="../../_variables/availables.html">$availables</a> = array();
<a name="l1182"><span class="linenum">1182</span></a>              <a class="var it18273" onMouseOver="hilite(18273)" onMouseOut="lolite()" onClick="logVariable('deadlines')" href="../../_variables/deadlines.html">$deadlines</a> = array();
<a name="l1183"><span class="linenum">1183</span></a>              <a class="var it20895" onMouseOver="hilite(20895)" onMouseOut="lolite()" onClick="logVariable('timelimits')" href="../../_variables/timelimits.html">$timelimits</a> = array();
<a name="l1184"><span class="linenum">1184</span></a>              <a class="var it20896" onMouseOver="hilite(20896)" onMouseOut="lolite()" onClick="logVariable('reviews')" href="../../_variables/reviews.html">$reviews</a> = array();
<a name="l1185"><span class="linenum">1185</span></a>              <a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> = array();
<a name="l1186"><span class="linenum">1186</span></a>              <a class="var it20871" onMouseOver="hilite(20871)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = array();
<a name="l1187"><span class="linenum">1187</span></a>              <a class="var it9786" onMouseOver="hilite(9786)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a> = array();
<a name="l1188"><span class="linenum">1188</span></a>  
<a name="l1189"><span class="linenum">1189</span></a>              foreach (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> as <a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>) {
<a name="l1190"><span class="linenum">1190</span></a>                  if (isset(<a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('available')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/available.html">available</a>)) {
<a name="l1191"><span class="linenum">1191</span></a>                      <a class="var it20894" onMouseOver="hilite(20894)" onMouseOut="lolite()" onClick="logVariable('availables')" href="../../_variables/availables.html">$availables</a>[] = <a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('available')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/available.html">available</a>;
<a name="l1192"><span class="linenum">1192</span></a>                  }
<a name="l1193"><span class="linenum">1193</span></a>                  if (isset(<a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('deadline')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/deadline.html">deadline</a>)) {
<a name="l1194"><span class="linenum">1194</span></a>                      <a class="var it18273" onMouseOver="hilite(18273)" onMouseOut="lolite()" onClick="logVariable('deadlines')" href="../../_variables/deadlines.html">$deadlines</a>[] = <a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('deadline')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/deadline.html">deadline</a>;
<a name="l1195"><span class="linenum">1195</span></a>                  }
<a name="l1196"><span class="linenum">1196</span></a>                  if (isset(<a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('timelimit')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a>)) {
<a name="l1197"><span class="linenum">1197</span></a>                      <a class="var it20895" onMouseOver="hilite(20895)" onMouseOut="lolite()" onClick="logVariable('timelimits')" href="../../_variables/timelimits.html">$timelimits</a>[] = <a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('timelimit')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a>;
<a name="l1198"><span class="linenum">1198</span></a>                  }
<a name="l1199"><span class="linenum">1199</span></a>                  if (isset(<a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('review')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/review.html">review</a>)) {
<a name="l1200"><span class="linenum">1200</span></a>                      <a class="var it20896" onMouseOver="hilite(20896)" onMouseOut="lolite()" onClick="logVariable('reviews')" href="../../_variables/reviews.html">$reviews</a>[] = <a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('review')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/review.html">review</a>;
<a name="l1201"><span class="linenum">1201</span></a>                  }
<a name="l1202"><span class="linenum">1202</span></a>                  if (isset(<a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>)) {
<a name="l1203"><span class="linenum">1203</span></a>                      <a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>[] = <a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>;
<a name="l1204"><span class="linenum">1204</span></a>                  }
<a name="l1205"><span class="linenum">1205</span></a>                  if (isset(<a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('retake')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/retake.html">retake</a>)) {
<a name="l1206"><span class="linenum">1206</span></a>                      <a class="var it20871" onMouseOver="hilite(20871)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a>[] = <a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('retake')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/retake.html">retake</a>;
<a name="l1207"><span class="linenum">1207</span></a>                  }
<a name="l1208"><span class="linenum">1208</span></a>                  if (isset(<a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('password')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/password.html">password</a>)) {
<a name="l1209"><span class="linenum">1209</span></a>                      <a class="var it9786" onMouseOver="hilite(9786)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>[] = <a class="var it9787" onMouseOver="hilite(9787)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('password')" class="var it44781" onMouseOver="hilite(44781)" onMouseOut="lolite()" href="../../_variables/password.html">password</a>;
<a name="l1210"><span class="linenum">1210</span></a>                  }
<a name="l1211"><span class="linenum">1211</span></a>              }
<a name="l1212"><span class="linenum">1212</span></a>  <span class="comment">            // If there is a user override for a setting, ignore the group override.</span>
<a name="l1213"><span class="linenum">1213</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('available')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/available.html">available</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it20894" onMouseOver="hilite(20894)" onMouseOut="lolite()" onClick="logVariable('availables')" href="../../_variables/availables.html">$availables</a>)) {
<a name="l1214"><span class="linenum">1214</span></a>                  <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('available')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/available.html">available</a> = <a class="phpfunction" onClick="logFunction('min')" href="../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(<a class="var it20894" onMouseOver="hilite(20894)" onMouseOut="lolite()" onClick="logVariable('availables')" href="../../_variables/availables.html">$availables</a>);
<a name="l1215"><span class="linenum">1215</span></a>              }
<a name="l1216"><span class="linenum">1216</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('deadline')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/deadline.html">deadline</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it18273" onMouseOver="hilite(18273)" onMouseOut="lolite()" onClick="logVariable('deadlines')" href="../../_variables/deadlines.html">$deadlines</a>)) {
<a name="l1217"><span class="linenum">1217</span></a>                  if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(0, <a class="var it18273" onMouseOver="hilite(18273)" onMouseOut="lolite()" onClick="logVariable('deadlines')" href="../../_variables/deadlines.html">$deadlines</a>)) {
<a name="l1218"><span class="linenum">1218</span></a>                      <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('deadline')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/deadline.html">deadline</a> = 0;
<a name="l1219"><span class="linenum">1219</span></a>                  } else {
<a name="l1220"><span class="linenum">1220</span></a>                      <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('deadline')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/deadline.html">deadline</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it18273" onMouseOver="hilite(18273)" onMouseOut="lolite()" onClick="logVariable('deadlines')" href="../../_variables/deadlines.html">$deadlines</a>);
<a name="l1221"><span class="linenum">1221</span></a>                  }
<a name="l1222"><span class="linenum">1222</span></a>              }
<a name="l1223"><span class="linenum">1223</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timelimit')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it20895" onMouseOver="hilite(20895)" onMouseOut="lolite()" onClick="logVariable('timelimits')" href="../../_variables/timelimits.html">$timelimits</a>)) {
<a name="l1224"><span class="linenum">1224</span></a>                  if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(0, <a class="var it20895" onMouseOver="hilite(20895)" onMouseOut="lolite()" onClick="logVariable('timelimits')" href="../../_variables/timelimits.html">$timelimits</a>)) {
<a name="l1225"><span class="linenum">1225</span></a>                      <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timelimit')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a> = 0;
<a name="l1226"><span class="linenum">1226</span></a>                  } else {
<a name="l1227"><span class="linenum">1227</span></a>                      <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timelimit')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it20895" onMouseOver="hilite(20895)" onMouseOut="lolite()" onClick="logVariable('timelimits')" href="../../_variables/timelimits.html">$timelimits</a>);
<a name="l1228"><span class="linenum">1228</span></a>                  }
<a name="l1229"><span class="linenum">1229</span></a>              }
<a name="l1230"><span class="linenum">1230</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('review')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/review.html">review</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it20896" onMouseOver="hilite(20896)" onMouseOut="lolite()" onClick="logVariable('reviews')" href="../../_variables/reviews.html">$reviews</a>)) {
<a name="l1231"><span class="linenum">1231</span></a>                  <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('review')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/review.html">review</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it20896" onMouseOver="hilite(20896)" onMouseOut="lolite()" onClick="logVariable('reviews')" href="../../_variables/reviews.html">$reviews</a>);
<a name="l1232"><span class="linenum">1232</span></a>              }
<a name="l1233"><span class="linenum">1233</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>)) {
<a name="l1234"><span class="linenum">1234</span></a>                  <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>);
<a name="l1235"><span class="linenum">1235</span></a>              }
<a name="l1236"><span class="linenum">1236</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('retake')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/retake.html">retake</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it20871" onMouseOver="hilite(20871)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a>)) {
<a name="l1237"><span class="linenum">1237</span></a>                  <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('retake')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/retake.html">retake</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it20871" onMouseOver="hilite(20871)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a>);
<a name="l1238"><span class="linenum">1238</span></a>              }
<a name="l1239"><span class="linenum">1239</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/password.html">password</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it9786" onMouseOver="hilite(9786)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>)) {
<a name="l1240"><span class="linenum">1240</span></a>                  <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/password.html">password</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it9786" onMouseOver="hilite(9786)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>);
<a name="l1241"><span class="linenum">1241</span></a>                  if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it9786" onMouseOver="hilite(9786)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>)) {
<a name="l1242"><span class="linenum">1242</span></a>                      <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('extrapasswords')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/extrapasswords.html">extrapasswords</a> = <a class="var it9786" onMouseOver="hilite(9786)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>;
<a name="l1243"><span class="linenum">1243</span></a>                  }
<a name="l1244"><span class="linenum">1244</span></a>              }
<a name="l1245"><span class="linenum">1245</span></a>  
<a name="l1246"><span class="linenum">1246</span></a>          }
<a name="l1247"><span class="linenum">1247</span></a>  
<a name="l1248"><span class="linenum">1248</span></a>  <span class="comment">        // Merge with lesson defaults.</span>
<a name="l1249"><span class="linenum">1249</span></a>          <a class="var it408" onMouseOver="hilite(408)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a> = array('available', 'deadline', 'timelimit', 'maxattempts', 'review', 'retake');
<a name="l1250"><span class="linenum">1250</span></a>          foreach (<a class="var it408" onMouseOver="hilite(408)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>) {
<a name="l1251"><span class="linenum">1251</span></a>              if (isset(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;{<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>})) {
<a name="l1252"><span class="linenum">1252</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;{<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>} = <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;{<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>};
<a name="l1253"><span class="linenum">1253</span></a>              }
<a name="l1254"><span class="linenum">1254</span></a>          }
<a name="l1255"><span class="linenum">1255</span></a>  
<a name="l1256"><span class="linenum">1256</span></a>  <span class="comment">        // Special handling of lesson usepassword and password.</span>
<a name="l1257"><span class="linenum">1257</span></a>          if (isset(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/password.html">password</a>)) {
<a name="l1258"><span class="linenum">1258</span></a>              if (<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/password.html">password</a> == '') {
<a name="l1259"><span class="linenum">1259</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;usepassword = 0;
<a name="l1260"><span class="linenum">1260</span></a>              } else {
<a name="l1261"><span class="linenum">1261</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;usepassword = 1;
<a name="l1262"><span class="linenum">1262</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;password = <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/password.html">password</a>;
<a name="l1263"><span class="linenum">1263</span></a>                  if (isset(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('extrapasswords')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/extrapasswords.html">extrapasswords</a>)) {
<a name="l1264"><span class="linenum">1264</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;extrapasswords = <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('extrapasswords')" class="var it43563" onMouseOver="hilite(43563)" onMouseOut="lolite()" href="../../_variables/extrapasswords.html">extrapasswords</a>;
<a name="l1265"><span class="linenum">1265</span></a>                  }
<a name="l1266"><span class="linenum">1266</span></a>              }
<a name="l1267"><span class="linenum">1267</span></a>          }
<a name="l1268"><span class="linenum">1268</span></a>      }
<a name="l1269"><span class="linenum">1269</span></a>  
<a name="l1270"><span class="linenum">1270</span></a>      <span class="comment">/**</span>
<a name="l1271"><span class="linenum">1271</span></a>  <span class="comment">     * Fetches messages from the session that may have been set in previous page</span>
<a name="l1272"><span class="linenum">1272</span></a>  <span class="comment">     * actions.</span>
<a name="l1273"><span class="linenum">1273</span></a>  <span class="comment">     *</span>
<a name="l1274"><span class="linenum">1274</span></a>  <span class="comment">     * &lt;code&gt;</span>
<a name="l1275"><span class="linenum">1275</span></a>  <span class="comment">     * // Do not call this method directly instead use</span>
<a name="l1276"><span class="linenum">1276</span></a>  <span class="comment">     * $lesson-&gt;messages;</span>
<a name="l1277"><span class="linenum">1277</span></a>  <span class="comment">     * &lt;/code&gt;</span>
<a name="l1278"><span class="linenum">1278</span></a>  <span class="comment">     *</span>
<a name="l1279"><span class="linenum">1279</span></a>  <span class="comment">     * @return array</span>
<a name="l1280"><span class="linenum">1280</span></a>  <span class="comment">     */</span>
<a name="l1281"><span class="linenum">1281</span></a>      protected function <a class="function" onClick="logFunction('get_messages')" href="../../_functions/get_messages.html" onMouseOver="funcPopup(event,'get_messages')">get_messages</a>() {
<a name="l1282"><span class="linenum">1282</span></a>          global <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>;
<a name="l1283"><span class="linenum">1283</span></a>  
<a name="l1284"><span class="linenum">1284</span></a>          <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../_variables/messages.html">$messages</a> = array();
<a name="l1285"><span class="linenum">1285</span></a>          if (!empty(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>)) {
<a name="l1286"><span class="linenum">1286</span></a>              <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../_variables/messages.html">$messages</a> = <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id];
<a name="l1287"><span class="linenum">1287</span></a>              unset(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id]);
<a name="l1288"><span class="linenum">1288</span></a>          }
<a name="l1289"><span class="linenum">1289</span></a>  
<a name="l1290"><span class="linenum">1290</span></a>          return <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../_variables/messages.html">$messages</a>;
<a name="l1291"><span class="linenum">1291</span></a>      }
<a name="l1292"><span class="linenum">1292</span></a>  
<a name="l1293"><span class="linenum">1293</span></a>      <span class="comment">/**</span>
<a name="l1294"><span class="linenum">1294</span></a>  <span class="comment">     * Get all of the attempts for the current user.</span>
<a name="l1295"><span class="linenum">1295</span></a>  <span class="comment">     *</span>
<a name="l1296"><span class="linenum">1296</span></a>  <span class="comment">     * @param int $retries</span>
<a name="l1297"><span class="linenum">1297</span></a>  <span class="comment">     * @param bool $correct Optional: only fetch correct attempts</span>
<a name="l1298"><span class="linenum">1298</span></a>  <span class="comment">     * @param int $pageid Optional: only fetch attempts at the given page</span>
<a name="l1299"><span class="linenum">1299</span></a>  <span class="comment">     * @param int $userid Optional: defaults to the current user if not set</span>
<a name="l1300"><span class="linenum">1300</span></a>  <span class="comment">     * @return array|false</span>
<a name="l1301"><span class="linenum">1301</span></a>  <span class="comment">     */</span>
<a name="l1302"><span class="linenum">1302</span></a>      public function <a class="function" onClick="logFunction('get_attempts')" href="../../_functions/get_attempts.html" onMouseOver="funcPopup(event,'get_attempts')">get_attempts</a>(<a class="var it1229" onMouseOver="hilite(1229)" onMouseOut="lolite()" onClick="logVariable('retries')" href="../../_variables/retries.html">$retries</a>, <a class="var it3049" onMouseOver="hilite(3049)" onMouseOut="lolite()" onClick="logVariable('correct')" href="../../_variables/correct.html">$correct</a>=false, <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>=null, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>=null) {
<a name="l1303"><span class="linenum">1303</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1304"><span class="linenum">1304</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(&quot;lessonid&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, &quot;userid&quot;=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, &quot;retry&quot;=&gt;<a class="var it1229" onMouseOver="hilite(1229)" onMouseOut="lolite()" onClick="logVariable('retries')" href="../../_variables/retries.html">$retries</a>);
<a name="l1305"><span class="linenum">1305</span></a>          if (<a class="var it3049" onMouseOver="hilite(3049)" onMouseOut="lolite()" onClick="logVariable('correct')" href="../../_variables/correct.html">$correct</a>) {
<a name="l1306"><span class="linenum">1306</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['correct'] = 1;
<a name="l1307"><span class="linenum">1307</span></a>          }
<a name="l1308"><span class="linenum">1308</span></a>          if (<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> !== null) {
<a name="l1309"><span class="linenum">1309</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['pageid'] = <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>;
<a name="l1310"><span class="linenum">1310</span></a>          }
<a name="l1311"><span class="linenum">1311</span></a>          if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> === null) {
<a name="l1312"><span class="linenum">1312</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['userid'] = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1313"><span class="linenum">1313</span></a>          }
<a name="l1314"><span class="linenum">1314</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_attempts', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'timeseen ASC');
<a name="l1315"><span class="linenum">1315</span></a>      }
<a name="l1316"><span class="linenum">1316</span></a>  
<a name="l1317"><span class="linenum">1317</span></a>      <span class="comment">/**</span>
<a name="l1318"><span class="linenum">1318</span></a>  <span class="comment">     * Returns the first page for the lesson or false if there isn't one.</span>
<a name="l1319"><span class="linenum">1319</span></a>  <span class="comment">     *</span>
<a name="l1320"><span class="linenum">1320</span></a>  <span class="comment">     * This method should be called via the magic method __get();</span>
<a name="l1321"><span class="linenum">1321</span></a>  <span class="comment">     * &lt;code&gt;</span>
<a name="l1322"><span class="linenum">1322</span></a>  <span class="comment">     * $firstpage = $lesson-&gt;firstpage;</span>
<a name="l1323"><span class="linenum">1323</span></a>  <span class="comment">     * &lt;/code&gt;</span>
<a name="l1324"><span class="linenum">1324</span></a>  <span class="comment">     *</span>
<a name="l1325"><span class="linenum">1325</span></a>  <span class="comment">     * @return lesson_page|bool Returns the lesson_page specialised object or false</span>
<a name="l1326"><span class="linenum">1326</span></a>  <span class="comment">     */</span>
<a name="l1327"><span class="linenum">1327</span></a>      protected function <a class="function" onClick="logFunction('get_firstpage')" href="../../_functions/get_firstpage.html" onMouseOver="funcPopup(event,'get_firstpage')">get_firstpage</a>() {
<a name="l1328"><span class="linenum">1328</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1329"><span class="linenum">1329</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>) &gt; 0) {
<a name="l1330"><span class="linenum">1330</span></a>              foreach (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l1331"><span class="linenum">1331</span></a>                  if ((int)<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> === 0) {
<a name="l1332"><span class="linenum">1332</span></a>                      return <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>;
<a name="l1333"><span class="linenum">1333</span></a>                  }
<a name="l1334"><span class="linenum">1334</span></a>              }
<a name="l1335"><span class="linenum">1335</span></a>          }
<a name="l1336"><span class="linenum">1336</span></a>          return false;
<a name="l1337"><span class="linenum">1337</span></a>      }
<a name="l1338"><span class="linenum">1338</span></a>  
<a name="l1339"><span class="linenum">1339</span></a>      <span class="comment">/**</span>
<a name="l1340"><span class="linenum">1340</span></a>  <span class="comment">     * Returns the last page for the lesson or false if there isn't one.</span>
<a name="l1341"><span class="linenum">1341</span></a>  <span class="comment">     *</span>
<a name="l1342"><span class="linenum">1342</span></a>  <span class="comment">     * This method should be called via the magic method __get();</span>
<a name="l1343"><span class="linenum">1343</span></a>  <span class="comment">     * &lt;code&gt;</span>
<a name="l1344"><span class="linenum">1344</span></a>  <span class="comment">     * $lastpage = $lesson-&gt;lastpage;</span>
<a name="l1345"><span class="linenum">1345</span></a>  <span class="comment">     * &lt;/code&gt;</span>
<a name="l1346"><span class="linenum">1346</span></a>  <span class="comment">     *</span>
<a name="l1347"><span class="linenum">1347</span></a>  <span class="comment">     * @return lesson_page|bool Returns the lesson_page specialised object or false</span>
<a name="l1348"><span class="linenum">1348</span></a>  <span class="comment">     */</span>
<a name="l1349"><span class="linenum">1349</span></a>      protected function <a class="function" onClick="logFunction('get_lastpage')" href="../../_functions/get_lastpage.html" onMouseOver="funcPopup(event,'get_lastpage')">get_lastpage</a>() {
<a name="l1350"><span class="linenum">1350</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1351"><span class="linenum">1351</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>) &gt; 0) {
<a name="l1352"><span class="linenum">1352</span></a>              foreach (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l1353"><span class="linenum">1353</span></a>                  if ((int)<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> === 0) {
<a name="l1354"><span class="linenum">1354</span></a>                      return <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>;
<a name="l1355"><span class="linenum">1355</span></a>                  }
<a name="l1356"><span class="linenum">1356</span></a>              }
<a name="l1357"><span class="linenum">1357</span></a>          }
<a name="l1358"><span class="linenum">1358</span></a>          return false;
<a name="l1359"><span class="linenum">1359</span></a>      }
<a name="l1360"><span class="linenum">1360</span></a>  
<a name="l1361"><span class="linenum">1361</span></a>      <span class="comment">/**</span>
<a name="l1362"><span class="linenum">1362</span></a>  <span class="comment">     * Returns the id of the first page of this lesson. (prevpageid = 0)</span>
<a name="l1363"><span class="linenum">1363</span></a>  <span class="comment">     * @return int</span>
<a name="l1364"><span class="linenum">1364</span></a>  <span class="comment">     */</span>
<a name="l1365"><span class="linenum">1365</span></a>      protected function <a class="function" onClick="logFunction('get_firstpageid')" href="../../_functions/get_firstpageid.html" onMouseOver="funcPopup(event,'get_firstpageid')">get_firstpageid</a>() {
<a name="l1366"><span class="linenum">1366</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1367"><span class="linenum">1367</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('firstpageid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/firstpageid.html">firstpageid</a> == null) {
<a name="l1368"><span class="linenum">1368</span></a>              if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('loadedallpages')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/loadedallpages.html">loadedallpages</a>) {
<a name="l1369"><span class="linenum">1369</span></a>                  <a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('firstpageid')" href="../../_variables/firstpageid.html">$firstpageid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('lesson_pages', 'id', array('lessonid'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, 'prevpageid'=&gt;0));
<a name="l1370"><span class="linenum">1370</span></a>                  if (!<a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('firstpageid')" href="../../_variables/firstpageid.html">$firstpageid</a>) {
<a name="l1371"><span class="linenum">1371</span></a>                      <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindfirstpage', 'lesson');
<a name="l1372"><span class="linenum">1372</span></a>                  }
<a name="l1373"><span class="linenum">1373</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('firstpageid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/firstpageid.html">firstpageid</a> = <a class="var it1245" onMouseOver="hilite(1245)" onMouseOut="lolite()" onClick="logVariable('firstpageid')" href="../../_variables/firstpageid.html">$firstpageid</a>;
<a name="l1374"><span class="linenum">1374</span></a>              } else {
<a name="l1375"><span class="linenum">1375</span></a>                  <a class="var it20898" onMouseOver="hilite(20898)" onMouseOut="lolite()" onClick="logVariable('firstpage')" href="../../_variables/firstpage.html">$firstpage</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_firstpage')" href="../../_functions/get_firstpage.html" onMouseOver="funcPopup(event,'get_firstpage')">get_firstpage</a>();
<a name="l1376"><span class="linenum">1376</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('firstpageid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/firstpageid.html">firstpageid</a> = <a class="var it20898" onMouseOver="hilite(20898)" onMouseOut="lolite()" onClick="logVariable('firstpage')" href="../../_variables/firstpage.html">$firstpage</a>-&gt;<a onClick="logVariable('id')" class="var it44488" onMouseOver="hilite(44488)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1377"><span class="linenum">1377</span></a>              }
<a name="l1378"><span class="linenum">1378</span></a>          }
<a name="l1379"><span class="linenum">1379</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('firstpageid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/firstpageid.html">firstpageid</a>;
<a name="l1380"><span class="linenum">1380</span></a>      }
<a name="l1381"><span class="linenum">1381</span></a>  
<a name="l1382"><span class="linenum">1382</span></a>      <span class="comment">/**</span>
<a name="l1383"><span class="linenum">1383</span></a>  <span class="comment">     * Returns the id of the last page of this lesson. (nextpageid = 0)</span>
<a name="l1384"><span class="linenum">1384</span></a>  <span class="comment">     * @return int</span>
<a name="l1385"><span class="linenum">1385</span></a>  <span class="comment">     */</span>
<a name="l1386"><span class="linenum">1386</span></a>      public function <a class="function" onClick="logFunction('get_lastpageid')" href="../../_functions/get_lastpageid.html" onMouseOver="funcPopup(event,'get_lastpageid')">get_lastpageid</a>() {
<a name="l1387"><span class="linenum">1387</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1388"><span class="linenum">1388</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastpageid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lastpageid.html">lastpageid</a> == null) {
<a name="l1389"><span class="linenum">1389</span></a>              if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('loadedallpages')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/loadedallpages.html">loadedallpages</a>) {
<a name="l1390"><span class="linenum">1390</span></a>                  <a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('lesson_pages', 'id', array('lessonid'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, 'nextpageid'=&gt;0));
<a name="l1391"><span class="linenum">1391</span></a>                  if (!<a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>) {
<a name="l1392"><span class="linenum">1392</span></a>                      <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindlastpage', 'lesson');
<a name="l1393"><span class="linenum">1393</span></a>                  }
<a name="l1394"><span class="linenum">1394</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastpageid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lastpageid.html">lastpageid</a> = <a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>;
<a name="l1395"><span class="linenum">1395</span></a>              } else {
<a name="l1396"><span class="linenum">1396</span></a>                  <a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_lastpage')" href="../../_functions/get_lastpage.html" onMouseOver="funcPopup(event,'get_lastpage')">get_lastpage</a>();
<a name="l1397"><span class="linenum">1397</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastpageid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lastpageid.html">lastpageid</a> = <a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>-&gt;<a onClick="logVariable('id')" class="var it44782" onMouseOver="hilite(44782)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1398"><span class="linenum">1398</span></a>              }
<a name="l1399"><span class="linenum">1399</span></a>          }
<a name="l1400"><span class="linenum">1400</span></a>  
<a name="l1401"><span class="linenum">1401</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastpageid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lastpageid.html">lastpageid</a>;
<a name="l1402"><span class="linenum">1402</span></a>      }
<a name="l1403"><span class="linenum">1403</span></a>  
<a name="l1404"><span class="linenum">1404</span></a>       <span class="comment">/**</span>
<a name="l1405"><span class="linenum">1405</span></a>  <span class="comment">     * Gets the next page id to display after the one that is provided.</span>
<a name="l1406"><span class="linenum">1406</span></a>  <span class="comment">     * @param int $nextpageid</span>
<a name="l1407"><span class="linenum">1407</span></a>  <span class="comment">     * @return bool</span>
<a name="l1408"><span class="linenum">1408</span></a>  <span class="comment">     */</span>
<a name="l1409"><span class="linenum">1409</span></a>      public function <a class="function" onClick="logFunction('get_next_page')" href="../../_functions/get_next_page.html" onMouseOver="funcPopup(event,'get_next_page')">get_next_page</a>(<a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('nextpageid')" href="../../_variables/nextpageid.html">$nextpageid</a>) {
<a name="l1410"><span class="linenum">1410</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1411"><span class="linenum">1411</span></a>          <a class="var it20899" onMouseOver="hilite(20899)" onMouseOut="lolite()" onClick="logVariable('allpages')" href="../../_variables/allpages.html">$allpages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1412"><span class="linenum">1412</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpagedefault) {
<a name="l1413"><span class="linenum">1413</span></a>  <span class="comment">            // in Flash Card mode...first get number of retakes</span>
<a name="l1414"><span class="linenum">1414</span></a>              <a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot; =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, &quot;userid&quot; =&gt; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1415"><span class="linenum">1415</span></a>              <a class="phpfunction" onClick="logFunction('shuffle')" href="../../_functions/shuffle.html" onMouseOver="phpfuncPopup(event,'shuffle')">shuffle</a>(<a class="var it20899" onMouseOver="hilite(20899)" onMouseOut="lolite()" onClick="logVariable('allpages')" href="../../_variables/allpages.html">$allpages</a>);
<a name="l1416"><span class="linenum">1416</span></a>              <a class="var it811" onMouseOver="hilite(811)" onMouseOut="lolite()" onClick="logVariable('found')" href="../../_variables/found.html">$found</a> = false;
<a name="l1417"><span class="linenum">1417</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpagedefault == <a class="constant" onClick="logConstant('LESSON_UNSEENPAGE')" href="../../_constants/LESSON_UNSEENPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENPAGE')">LESSON_UNSEENPAGE</a>) {
<a name="l1418"><span class="linenum">1418</span></a>                  foreach (<a class="var it20899" onMouseOver="hilite(20899)" onMouseOut="lolite()" onClick="logVariable('allpages')" href="../../_variables/allpages.html">$allpages</a> as <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>) {
<a name="l1419"><span class="linenum">1419</span></a>                      if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_attempts&quot;, array(&quot;pageid&quot; =&gt; <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it44783" onMouseOver="hilite(44783)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;userid&quot; =&gt; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;retry&quot; =&gt; <a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>))) {
<a name="l1420"><span class="linenum">1420</span></a>                          <a class="var it811" onMouseOver="hilite(811)" onMouseOut="lolite()" onClick="logVariable('found')" href="../../_variables/found.html">$found</a> = true;
<a name="l1421"><span class="linenum">1421</span></a>                          break;
<a name="l1422"><span class="linenum">1422</span></a>                      }
<a name="l1423"><span class="linenum">1423</span></a>                  }
<a name="l1424"><span class="linenum">1424</span></a>              } elseif (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpagedefault == <a class="constant" onClick="logConstant('LESSON_UNANSWEREDPAGE')" href="../../_constants/LESSON_UNANSWEREDPAGE.html" onMouseOver="constPopup(event,'LESSON_UNANSWEREDPAGE')">LESSON_UNANSWEREDPAGE</a>) {
<a name="l1425"><span class="linenum">1425</span></a>                  foreach (<a class="var it20899" onMouseOver="hilite(20899)" onMouseOut="lolite()" onClick="logVariable('allpages')" href="../../_variables/allpages.html">$allpages</a> as <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>) {
<a name="l1426"><span class="linenum">1426</span></a>                      if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_attempts&quot;, array('pageid' =&gt; <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it44783" onMouseOver="hilite(44783)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid' =&gt; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'correct' =&gt; 1, 'retry' =&gt; <a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>))) {
<a name="l1427"><span class="linenum">1427</span></a>                          <a class="var it811" onMouseOver="hilite(811)" onMouseOut="lolite()" onClick="logVariable('found')" href="../../_variables/found.html">$found</a> = true;
<a name="l1428"><span class="linenum">1428</span></a>                          break;
<a name="l1429"><span class="linenum">1429</span></a>                      }
<a name="l1430"><span class="linenum">1430</span></a>                  }
<a name="l1431"><span class="linenum">1431</span></a>              }
<a name="l1432"><span class="linenum">1432</span></a>              if (<a class="var it811" onMouseOver="hilite(811)" onMouseOut="lolite()" onClick="logVariable('found')" href="../../_variables/found.html">$found</a>) {
<a name="l1433"><span class="linenum">1433</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;maxpages) {
<a name="l1434"><span class="linenum">1434</span></a>  <span class="comment">                    // check number of pages viewed (in the lesson)</span>
<a name="l1435"><span class="linenum">1435</span></a>                      if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_attempts&quot;, array(&quot;lessonid&quot; =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, &quot;userid&quot; =&gt; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;retry&quot; =&gt; <a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>)) &gt;= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;maxpages) {
<a name="l1436"><span class="linenum">1436</span></a>                          return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;
<a name="l1437"><span class="linenum">1437</span></a>                      }
<a name="l1438"><span class="linenum">1438</span></a>                  }
<a name="l1439"><span class="linenum">1439</span></a>                  return <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it44783" onMouseOver="hilite(44783)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1440"><span class="linenum">1440</span></a>              }
<a name="l1441"><span class="linenum">1441</span></a>          }
<a name="l1442"><span class="linenum">1442</span></a>  <span class="comment">        // In a normal lesson mode</span>
<a name="l1443"><span class="linenum">1443</span></a>          foreach (<a class="var it20899" onMouseOver="hilite(20899)" onMouseOut="lolite()" onClick="logVariable('allpages')" href="../../_variables/allpages.html">$allpages</a> as <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>) {
<a name="l1444"><span class="linenum">1444</span></a>              if ((int)<a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it44783" onMouseOver="hilite(44783)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> === (int)<a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('nextpageid')" href="../../_variables/nextpageid.html">$nextpageid</a>) {
<a name="l1445"><span class="linenum">1445</span></a>                  return <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it44783" onMouseOver="hilite(44783)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1446"><span class="linenum">1446</span></a>              }
<a name="l1447"><span class="linenum">1447</span></a>          }
<a name="l1448"><span class="linenum">1448</span></a>          return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;
<a name="l1449"><span class="linenum">1449</span></a>      }
<a name="l1450"><span class="linenum">1450</span></a>  
<a name="l1451"><span class="linenum">1451</span></a>      <span class="comment">/**</span>
<a name="l1452"><span class="linenum">1452</span></a>  <span class="comment">     * Sets a message against the session for this lesson that will displayed next</span>
<a name="l1453"><span class="linenum">1453</span></a>  <span class="comment">     * time the lesson processes messages</span>
<a name="l1454"><span class="linenum">1454</span></a>  <span class="comment">     *</span>
<a name="l1455"><span class="linenum">1455</span></a>  <span class="comment">     * @param string $message</span>
<a name="l1456"><span class="linenum">1456</span></a>  <span class="comment">     * @param string $class</span>
<a name="l1457"><span class="linenum">1457</span></a>  <span class="comment">     * @param string $align</span>
<a name="l1458"><span class="linenum">1458</span></a>  <span class="comment">     * @return bool</span>
<a name="l1459"><span class="linenum">1459</span></a>  <span class="comment">     */</span>
<a name="l1460"><span class="linenum">1460</span></a>      public function <a class="function" onClick="logFunction('add_message')" href="../../_functions/add_message.html" onMouseOver="funcPopup(event,'add_message')">add_message</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>=&quot;notifyproblem&quot;, <a class="var it1850" onMouseOver="hilite(1850)" onMouseOut="lolite()" onClick="logVariable('align')" href="../../_variables/align.html">$align</a>='center') {
<a name="l1461"><span class="linenum">1461</span></a>          global <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>;
<a name="l1462"><span class="linenum">1462</span></a>  
<a name="l1463"><span class="linenum">1463</span></a>          if (empty(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>) || !<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>)) {
<a name="l1464"><span class="linenum">1464</span></a>              <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a> = array();
<a name="l1465"><span class="linenum">1465</span></a>              <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id] = array();
<a name="l1466"><span class="linenum">1466</span></a>          } else if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>)) {
<a name="l1467"><span class="linenum">1467</span></a>              <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id] = array();
<a name="l1468"><span class="linenum">1468</span></a>          }
<a name="l1469"><span class="linenum">1469</span></a>  
<a name="l1470"><span class="linenum">1470</span></a>          <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id][] = array(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>, <a class="var it1850" onMouseOver="hilite(1850)" onMouseOut="lolite()" onClick="logVariable('align')" href="../../_variables/align.html">$align</a>);
<a name="l1471"><span class="linenum">1471</span></a>  
<a name="l1472"><span class="linenum">1472</span></a>          return true;
<a name="l1473"><span class="linenum">1473</span></a>      }
<a name="l1474"><span class="linenum">1474</span></a>  
<a name="l1475"><span class="linenum">1475</span></a>      <span class="comment">/**</span>
<a name="l1476"><span class="linenum">1476</span></a>  <span class="comment">     * Check if the lesson is accessible at the present time</span>
<a name="l1477"><span class="linenum">1477</span></a>  <span class="comment">     * @return bool True if the lesson is accessible, false otherwise</span>
<a name="l1478"><span class="linenum">1478</span></a>  <span class="comment">     */</span>
<a name="l1479"><span class="linenum">1479</span></a>      public function <a class="function" onClick="logFunction('is_accessible')" href="../../_functions/is_accessible.html" onMouseOver="funcPopup(event,'is_accessible')">is_accessible</a>() {
<a name="l1480"><span class="linenum">1480</span></a>          <a class="var it1211" onMouseOver="hilite(1211)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;available;
<a name="l1481"><span class="linenum">1481</span></a>          <a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('deadline')" href="../../_variables/deadline.html">$deadline</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;deadline;
<a name="l1482"><span class="linenum">1482</span></a>          return ((<a class="var it1211" onMouseOver="hilite(1211)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a> == 0 || <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() &gt;= <a class="var it1211" onMouseOver="hilite(1211)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a>) &amp;&amp; (<a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('deadline')" href="../../_variables/deadline.html">$deadline</a> == 0 || <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() &lt; <a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('deadline')" href="../../_variables/deadline.html">$deadline</a>));
<a name="l1483"><span class="linenum">1483</span></a>      }
<a name="l1484"><span class="linenum">1484</span></a>  
<a name="l1485"><span class="linenum">1485</span></a>      <span class="comment">/**</span>
<a name="l1486"><span class="linenum">1486</span></a>  <span class="comment">     * Starts the lesson time for the current user</span>
<a name="l1487"><span class="linenum">1487</span></a>  <span class="comment">     * @return bool Returns true</span>
<a name="l1488"><span class="linenum">1488</span></a>  <span class="comment">     */</span>
<a name="l1489"><span class="linenum">1489</span></a>      public function <a class="function" onClick="logFunction('start_timer')" href="../../_functions/start_timer.html" onMouseOver="funcPopup(event,'start_timer')">start_timer</a>() {
<a name="l1490"><span class="linenum">1490</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1491"><span class="linenum">1491</span></a>  
<a name="l1492"><span class="linenum">1492</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;id, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;course,
<a name="l1493"><span class="linenum">1493</span></a>              false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1494"><span class="linenum">1494</span></a>  
<a name="l1495"><span class="linenum">1495</span></a>  <span class="comment">        // Trigger lesson started event.</span>
<a name="l1496"><span class="linenum">1496</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('lesson_started')" href="../../_classes/lesson_started.html" onMouseOver="classPopup(event,'lesson_started')">lesson_started</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1497"><span class="linenum">1497</span></a>              'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;id,
<a name="l1498"><span class="linenum">1498</span></a>              'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l1499"><span class="linenum">1499</span></a>              'courseid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;course
<a name="l1500"><span class="linenum">1500</span></a>          ));
<a name="l1501"><span class="linenum">1501</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1502"><span class="linenum">1502</span></a>  
<a name="l1503"><span class="linenum">1503</span></a>          <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('startlesson')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/startlesson.html">startlesson</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id] = true;
<a name="l1504"><span class="linenum">1504</span></a>          <a class="var it1247" onMouseOver="hilite(1247)" onMouseOut="lolite()" onClick="logVariable('startlesson')" href="../../_variables/startlesson.html">$startlesson</a> = new stdClass;
<a name="l1505"><span class="linenum">1505</span></a>          <a class="var it1247" onMouseOver="hilite(1247)" onMouseOut="lolite()" onClick="logVariable('startlesson')" href="../../_variables/startlesson.html">$startlesson</a>-&gt;<a onClick="logVariable('lessonid')" class="var it44784" onMouseOver="hilite(44784)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l1506"><span class="linenum">1506</span></a>          <a class="var it1247" onMouseOver="hilite(1247)" onMouseOut="lolite()" onClick="logVariable('startlesson')" href="../../_variables/startlesson.html">$startlesson</a>-&gt;<a onClick="logVariable('userid')" class="var it44784" onMouseOver="hilite(44784)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1507"><span class="linenum">1507</span></a>          <a class="var it1247" onMouseOver="hilite(1247)" onMouseOut="lolite()" onClick="logVariable('startlesson')" href="../../_variables/startlesson.html">$startlesson</a>-&gt;<a onClick="logVariable('starttime')" class="var it44784" onMouseOver="hilite(44784)" onMouseOut="lolite()" href="../../_variables/starttime.html">starttime</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1508"><span class="linenum">1508</span></a>          <a class="var it1247" onMouseOver="hilite(1247)" onMouseOut="lolite()" onClick="logVariable('startlesson')" href="../../_variables/startlesson.html">$startlesson</a>-&gt;<a onClick="logVariable('lessontime')" class="var it44784" onMouseOver="hilite(44784)" onMouseOut="lolite()" href="../../_variables/lessontime.html">lessontime</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1509"><span class="linenum">1509</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('lesson_timer', <a class="var it1247" onMouseOver="hilite(1247)" onMouseOut="lolite()" onClick="logVariable('startlesson')" href="../../_variables/startlesson.html">$startlesson</a>);
<a name="l1510"><span class="linenum">1510</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;timelimit) {
<a name="l1511"><span class="linenum">1511</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_message')" href="../../_functions/add_message.html" onMouseOver="funcPopup(event,'add_message')">add_message</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('timelimitwarning', 'lesson', <a class="function" onClick="logFunction('format_time')" href="../../_functions/format_time.html" onMouseOver="funcPopup(event,'format_time')">format_time</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;timelimit)), 'center');
<a name="l1512"><span class="linenum">1512</span></a>          }
<a name="l1513"><span class="linenum">1513</span></a>          return true;
<a name="l1514"><span class="linenum">1514</span></a>      }
<a name="l1515"><span class="linenum">1515</span></a>  
<a name="l1516"><span class="linenum">1516</span></a>      <span class="comment">/**</span>
<a name="l1517"><span class="linenum">1517</span></a>  <span class="comment">     * Updates the timer to the current time and returns the new timer object</span>
<a name="l1518"><span class="linenum">1518</span></a>  <span class="comment">     * @param bool $restart If set to true the timer is restarted</span>
<a name="l1519"><span class="linenum">1519</span></a>  <span class="comment">     * @param bool $continue If set to true AND $restart=true then the timer</span>
<a name="l1520"><span class="linenum">1520</span></a>  <span class="comment">     *                        will continue from a previous attempt</span>
<a name="l1521"><span class="linenum">1521</span></a>  <span class="comment">     * @return stdClass The new timer</span>
<a name="l1522"><span class="linenum">1522</span></a>  <span class="comment">     */</span>
<a name="l1523"><span class="linenum">1523</span></a>      public function <a class="function" onClick="logFunction('update_timer')" href="../../_functions/update_timer.html" onMouseOver="funcPopup(event,'update_timer')">update_timer</a>(<a class="var it1255" onMouseOver="hilite(1255)" onMouseOut="lolite()" onClick="logVariable('restart')" href="../../_variables/restart.html">$restart</a>=false, <a class="var it392" onMouseOver="hilite(392)" onMouseOut="lolite()" onClick="logVariable('continue')" href="../../_variables/continue.html">$continue</a>=false, <a class="var it15804" onMouseOver="hilite(15804)" onMouseOut="lolite()" onClick="logVariable('endreached')" href="../../_variables/endreached.html">$endreached</a> =false) {
<a name="l1524"><span class="linenum">1524</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1525"><span class="linenum">1525</span></a>  
<a name="l1526"><span class="linenum">1526</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course);
<a name="l1527"><span class="linenum">1527</span></a>  
<a name="l1528"><span class="linenum">1528</span></a>  <span class="comment">        // clock code</span>
<a name="l1529"><span class="linenum">1529</span></a>  <span class="comment">        // get time information for this user</span>
<a name="l1530"><span class="linenum">1530</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(&quot;lessonid&quot; =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, &quot;userid&quot; =&gt; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1531"><span class="linenum">1531</span></a>          if (!<a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_timer', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'starttime DESC', '*', 0, 1)) {
<a name="l1532"><span class="linenum">1532</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('start_timer')" href="../../_functions/start_timer.html" onMouseOver="funcPopup(event,'start_timer')">start_timer</a>();
<a name="l1533"><span class="linenum">1533</span></a>              <a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_timer', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'starttime DESC', '*', 0, 1);
<a name="l1534"><span class="linenum">1534</span></a>          }
<a name="l1535"><span class="linenum">1535</span></a>          <a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a> = <a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>); <span class="comment">// This will get the latest start time record.</span>
<a name="l1536"><span class="linenum">1536</span></a>  
<a name="l1537"><span class="linenum">1537</span></a>          if (<a class="var it1255" onMouseOver="hilite(1255)" onMouseOut="lolite()" onClick="logVariable('restart')" href="../../_variables/restart.html">$restart</a>) {
<a name="l1538"><span class="linenum">1538</span></a>              if (<a class="var it392" onMouseOver="hilite(392)" onMouseOut="lolite()" onClick="logVariable('continue')" href="../../_variables/continue.html">$continue</a>) {
<a name="l1539"><span class="linenum">1539</span></a>  <span class="comment">                // continue a previous test, need to update the clock  (think this option is disabled atm)</span>
<a name="l1540"><span class="linenum">1540</span></a>                  <a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('starttime')" class="var it44758" onMouseOver="hilite(44758)" onMouseOut="lolite()" href="../../_variables/starttime.html">starttime</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - (<a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('lessontime')" class="var it44758" onMouseOver="hilite(44758)" onMouseOut="lolite()" href="../../_variables/lessontime.html">lessontime</a> - <a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('starttime')" class="var it44758" onMouseOver="hilite(44758)" onMouseOut="lolite()" href="../../_variables/starttime.html">starttime</a>);
<a name="l1541"><span class="linenum">1541</span></a>  
<a name="l1542"><span class="linenum">1542</span></a>  <span class="comment">                // Trigger lesson resumed event.</span>
<a name="l1543"><span class="linenum">1543</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('lesson_resumed')" href="../../_classes/lesson_resumed.html" onMouseOver="classPopup(event,'lesson_resumed')">lesson_resumed</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1544"><span class="linenum">1544</span></a>                      'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id,
<a name="l1545"><span class="linenum">1545</span></a>                      'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l1546"><span class="linenum">1546</span></a>                      'courseid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course
<a name="l1547"><span class="linenum">1547</span></a>                  ));
<a name="l1548"><span class="linenum">1548</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1549"><span class="linenum">1549</span></a>  
<a name="l1550"><span class="linenum">1550</span></a>              } else {
<a name="l1551"><span class="linenum">1551</span></a>  <span class="comment">                // starting over, so reset the clock</span>
<a name="l1552"><span class="linenum">1552</span></a>                  <a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('starttime')" class="var it44758" onMouseOver="hilite(44758)" onMouseOut="lolite()" href="../../_variables/starttime.html">starttime</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1553"><span class="linenum">1553</span></a>  
<a name="l1554"><span class="linenum">1554</span></a>  <span class="comment">                // Trigger lesson restarted event.</span>
<a name="l1555"><span class="linenum">1555</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('lesson_restarted')" href="../../_classes/lesson_restarted.html" onMouseOver="classPopup(event,'lesson_restarted')">lesson_restarted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1556"><span class="linenum">1556</span></a>                      'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id,
<a name="l1557"><span class="linenum">1557</span></a>                      'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l1558"><span class="linenum">1558</span></a>                      'courseid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course
<a name="l1559"><span class="linenum">1559</span></a>                  ));
<a name="l1560"><span class="linenum">1560</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1561"><span class="linenum">1561</span></a>  
<a name="l1562"><span class="linenum">1562</span></a>              }
<a name="l1563"><span class="linenum">1563</span></a>          }
<a name="l1564"><span class="linenum">1564</span></a>  
<a name="l1565"><span class="linenum">1565</span></a>          <a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('lessontime')" class="var it44758" onMouseOver="hilite(44758)" onMouseOut="lolite()" href="../../_variables/lessontime.html">lessontime</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1566"><span class="linenum">1566</span></a>          <a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('completed')" class="var it44758" onMouseOver="hilite(44758)" onMouseOut="lolite()" href="../../_variables/completed.html">completed</a> = <a class="var it15804" onMouseOver="hilite(15804)" onMouseOut="lolite()" onClick="logVariable('endreached')" href="../../_variables/endreached.html">$endreached</a>;
<a name="l1567"><span class="linenum">1567</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('lesson_timer', <a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>);
<a name="l1568"><span class="linenum">1568</span></a>  
<a name="l1569"><span class="linenum">1569</span></a>  <span class="comment">        // Update completion state.</span>
<a name="l1570"><span class="linenum">1570</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;id, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;course,
<a name="l1571"><span class="linenum">1571</span></a>              false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1572"><span class="linenum">1572</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>);
<a name="l1573"><span class="linenum">1573</span></a>          <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l1574"><span class="linenum">1574</span></a>          if (<a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;completiontimespent &gt; 0) {
<a name="l1575"><span class="linenum">1575</span></a>              <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('update_state')" href="../../_functions/update_state.html" onMouseOver="funcPopup(event,'update_state')">update_state</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="constant" onClick="logConstant('COMPLETION_COMPLETE')" href="../../_constants/COMPLETION_COMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_COMPLETE')">COMPLETION_COMPLETE</a>);
<a name="l1576"><span class="linenum">1576</span></a>          }
<a name="l1577"><span class="linenum">1577</span></a>          return <a class="var it1251" onMouseOver="hilite(1251)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>;
<a name="l1578"><span class="linenum">1578</span></a>      }
<a name="l1579"><span class="linenum">1579</span></a>  
<a name="l1580"><span class="linenum">1580</span></a>      <span class="comment">/**</span>
<a name="l1581"><span class="linenum">1581</span></a>  <span class="comment">     * Updates the timer to the current time then stops it by unsetting the user var</span>
<a name="l1582"><span class="linenum">1582</span></a>  <span class="comment">     * @return bool Returns true</span>
<a name="l1583"><span class="linenum">1583</span></a>  <span class="comment">     */</span>
<a name="l1584"><span class="linenum">1584</span></a>      public function <a class="function" onClick="logFunction('stop_timer')" href="../../_functions/stop_timer.html" onMouseOver="funcPopup(event,'stop_timer')">stop_timer</a>() {
<a name="l1585"><span class="linenum">1585</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1586"><span class="linenum">1586</span></a>          unset(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('startlesson')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/startlesson.html">startlesson</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id]);
<a name="l1587"><span class="linenum">1587</span></a>  
<a name="l1588"><span class="linenum">1588</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;id, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;course,
<a name="l1589"><span class="linenum">1589</span></a>              false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1590"><span class="linenum">1590</span></a>  
<a name="l1591"><span class="linenum">1591</span></a>  <span class="comment">        // Trigger lesson ended event.</span>
<a name="l1592"><span class="linenum">1592</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('lesson_ended')" href="../../_classes/lesson_ended.html" onMouseOver="classPopup(event,'lesson_ended')">lesson_ended</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1593"><span class="linenum">1593</span></a>              'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;id,
<a name="l1594"><span class="linenum">1594</span></a>              'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l1595"><span class="linenum">1595</span></a>              'courseid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;course
<a name="l1596"><span class="linenum">1596</span></a>          ));
<a name="l1597"><span class="linenum">1597</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1598"><span class="linenum">1598</span></a>  
<a name="l1599"><span class="linenum">1599</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_timer')" href="../../_functions/update_timer.html" onMouseOver="funcPopup(event,'update_timer')">update_timer</a>(false, false, true);
<a name="l1600"><span class="linenum">1600</span></a>      }
<a name="l1601"><span class="linenum">1601</span></a>  
<a name="l1602"><span class="linenum">1602</span></a>      <span class="comment">/**</span>
<a name="l1603"><span class="linenum">1603</span></a>  <span class="comment">     * Checks to see if the lesson has pages</span>
<a name="l1604"><span class="linenum">1604</span></a>  <span class="comment">     */</span>
<a name="l1605"><span class="linenum">1605</span></a>      public function <a class="function" onClick="logFunction('has_pages')" href="../../_functions/has_pages.html" onMouseOver="funcPopup(event,'has_pages')">has_pages</a>() {
<a name="l1606"><span class="linenum">1606</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1607"><span class="linenum">1607</span></a>          <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../_variables/pagecount.html">$pagecount</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('lesson_pages', array('lessonid'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1608"><span class="linenum">1608</span></a>          return (<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../_variables/pagecount.html">$pagecount</a>&gt;0);
<a name="l1609"><span class="linenum">1609</span></a>      }
<a name="l1610"><span class="linenum">1610</span></a>  
<a name="l1611"><span class="linenum">1611</span></a>      <span class="comment">/**</span>
<a name="l1612"><span class="linenum">1612</span></a>  <span class="comment">     * Returns the link for the related activity</span>
<a name="l1613"><span class="linenum">1613</span></a>  <span class="comment">     * @return array|false</span>
<a name="l1614"><span class="linenum">1614</span></a>  <span class="comment">     */</span>
<a name="l1615"><span class="linenum">1615</span></a>      public function <a class="function" onClick="logFunction('link_for_activitylink')" href="../../_functions/link_for_activitylink.html" onMouseOver="funcPopup(event,'link_for_activitylink')">link_for_activitylink</a>() {
<a name="l1616"><span class="linenum">1616</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1617"><span class="linenum">1617</span></a>          <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_modules', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;activitylink));
<a name="l1618"><span class="linenum">1618</span></a>          if (<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>) {
<a name="l1619"><span class="linenum">1619</span></a>              <a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../../_variables/modname.html">$modname</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('modules', 'name', array('id' =&gt; <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('module')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../../_variables/module.html">module</a>));
<a name="l1620"><span class="linenum">1620</span></a>              if (<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../../_variables/modname.html">$modname</a>) {
<a name="l1621"><span class="linenum">1621</span></a>                  <a class="var it8900" onMouseOver="hilite(8900)" onMouseOut="lolite()" onClick="logVariable('instancename')" href="../../_variables/instancename.html">$instancename</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../../_variables/modname.html">$modname</a>, 'name', array('id' =&gt; <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('instance')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>));
<a name="l1622"><span class="linenum">1622</span></a>                  if (<a class="var it8900" onMouseOver="hilite(8900)" onMouseOut="lolite()" onClick="logVariable('instancename')" href="../../_variables/instancename.html">$instancename</a>) {
<a name="l1623"><span class="linenum">1623</span></a>                      return <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/mod/'.<a class="var it2355" onMouseOver="hilite(2355)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../../_variables/modname.html">$modname</a>.'/view.php', array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;activitylink)),
<a name="l1624"><span class="linenum">1624</span></a>                          <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('activitylinkname', 'lesson', <a class="var it8900" onMouseOver="hilite(8900)" onMouseOut="lolite()" onClick="logVariable('instancename')" href="../../_variables/instancename.html">$instancename</a>),
<a name="l1625"><span class="linenum">1625</span></a>                          array('class'=&gt;'centerpadded lessonbutton standardbutton'));
<a name="l1626"><span class="linenum">1626</span></a>                  }
<a name="l1627"><span class="linenum">1627</span></a>              }
<a name="l1628"><span class="linenum">1628</span></a>          }
<a name="l1629"><span class="linenum">1629</span></a>          return '';
<a name="l1630"><span class="linenum">1630</span></a>      }
<a name="l1631"><span class="linenum">1631</span></a>  
<a name="l1632"><span class="linenum">1632</span></a>      <span class="comment">/**</span>
<a name="l1633"><span class="linenum">1633</span></a>  <span class="comment">     * Loads the requested page.</span>
<a name="l1634"><span class="linenum">1634</span></a>  <span class="comment">     *</span>
<a name="l1635"><span class="linenum">1635</span></a>  <span class="comment">     * This function will return the requested page id as either a specialised</span>
<a name="l1636"><span class="linenum">1636</span></a>  <span class="comment">     * lesson_page object OR as a generic lesson_page.</span>
<a name="l1637"><span class="linenum">1637</span></a>  <span class="comment">     * If the page has been loaded previously it will be returned from the pages</span>
<a name="l1638"><span class="linenum">1638</span></a>  <span class="comment">     * array, otherwise it will be loaded from the database first</span>
<a name="l1639"><span class="linenum">1639</span></a>  <span class="comment">     *</span>
<a name="l1640"><span class="linenum">1640</span></a>  <span class="comment">     * @param int $pageid</span>
<a name="l1641"><span class="linenum">1641</span></a>  <span class="comment">     * @return lesson_page A lesson_page object or an object that extends it</span>
<a name="l1642"><span class="linenum">1642</span></a>  <span class="comment">     */</span>
<a name="l1643"><span class="linenum">1643</span></a>      public function <a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>) {
<a name="l1644"><span class="linenum">1644</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/pages.html">pages</a>)) {
<a name="l1645"><span class="linenum">1645</span></a>              <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a> = <a class="class" onClick="logClass('lesson_page_type_manager')" href="../../_classes/lesson_page_type_manager.html" onMouseOver="classPopup(event,'lesson_page_type_manager')">lesson_page_type_manager</a>::<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>);
<a name="l1646"><span class="linenum">1646</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/pages.html">pages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>] = <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a>-&gt;<a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>);
<a name="l1647"><span class="linenum">1647</span></a>          }
<a name="l1648"><span class="linenum">1648</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/pages.html">pages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>];
<a name="l1649"><span class="linenum">1649</span></a>      }
<a name="l1650"><span class="linenum">1650</span></a>  
<a name="l1651"><span class="linenum">1651</span></a>      <span class="comment">/**</span>
<a name="l1652"><span class="linenum">1652</span></a>  <span class="comment">     * Loads ALL of the pages for this lesson</span>
<a name="l1653"><span class="linenum">1653</span></a>  <span class="comment">     *</span>
<a name="l1654"><span class="linenum">1654</span></a>  <span class="comment">     * @return array An array containing all pages from this lesson</span>
<a name="l1655"><span class="linenum">1655</span></a>  <span class="comment">     */</span>
<a name="l1656"><span class="linenum">1656</span></a>      public function <a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>() {
<a name="l1657"><span class="linenum">1657</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('loadedallpages')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/loadedallpages.html">loadedallpages</a>) {
<a name="l1658"><span class="linenum">1658</span></a>              <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a> = <a class="class" onClick="logClass('lesson_page_type_manager')" href="../../_classes/lesson_page_type_manager.html" onMouseOver="classPopup(event,'lesson_page_type_manager')">lesson_page_type_manager</a>::<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>);
<a name="l1659"><span class="linenum">1659</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/pages.html">pages</a> = <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>);
<a name="l1660"><span class="linenum">1660</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('loadedallpages')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/loadedallpages.html">loadedallpages</a> = true;
<a name="l1661"><span class="linenum">1661</span></a>          }
<a name="l1662"><span class="linenum">1662</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/pages.html">pages</a>;
<a name="l1663"><span class="linenum">1663</span></a>      }
<a name="l1664"><span class="linenum">1664</span></a>  
<a name="l1665"><span class="linenum">1665</span></a>      <span class="comment">/**</span>
<a name="l1666"><span class="linenum">1666</span></a>  <span class="comment">     * Determines if a jumpto value is correct or not.</span>
<a name="l1667"><span class="linenum">1667</span></a>  <span class="comment">     *</span>
<a name="l1668"><span class="linenum">1668</span></a>  <span class="comment">     * returns true if jumpto page is (logically) after the pageid page or</span>
<a name="l1669"><span class="linenum">1669</span></a>  <span class="comment">     * if the jumpto value is a special value.  Returns false in all other cases.</span>
<a name="l1670"><span class="linenum">1670</span></a>  <span class="comment">     *</span>
<a name="l1671"><span class="linenum">1671</span></a>  <span class="comment">     * @param int $pageid Id of the page from which you are jumping from.</span>
<a name="l1672"><span class="linenum">1672</span></a>  <span class="comment">     * @param int $jumpto The jumpto number.</span>
<a name="l1673"><span class="linenum">1673</span></a>  <span class="comment">     * @return boolean True or false after a series of tests.</span>
<a name="l1674"><span class="linenum">1674</span></a>  <span class="comment">     **/</span>
<a name="l1675"><span class="linenum">1675</span></a>      public function <a class="function" onClick="logFunction('jumpto_is_correct')" href="../../_functions/jumpto_is_correct.html" onMouseOver="funcPopup(event,'jumpto_is_correct')">jumpto_is_correct</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>) {
<a name="l1676"><span class="linenum">1676</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1677"><span class="linenum">1677</span></a>  
<a name="l1678"><span class="linenum">1678</span></a>  <span class="comment">        // first test the special values</span>
<a name="l1679"><span class="linenum">1679</span></a>          if (!<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>) {
<a name="l1680"><span class="linenum">1680</span></a>  <span class="comment">            // same page</span>
<a name="l1681"><span class="linenum">1681</span></a>              return false;
<a name="l1682"><span class="linenum">1682</span></a>          } elseif (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>) {
<a name="l1683"><span class="linenum">1683</span></a>              return true;
<a name="l1684"><span class="linenum">1684</span></a>          } elseif (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_UNSEENBRANCHPAGE')" href="../../_constants/LESSON_UNSEENBRANCHPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENBRANCHPAGE')">LESSON_UNSEENBRANCHPAGE</a>) {
<a name="l1685"><span class="linenum">1685</span></a>              return true;
<a name="l1686"><span class="linenum">1686</span></a>          } elseif (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_RANDOMPAGE')" href="../../_constants/LESSON_RANDOMPAGE.html" onMouseOver="constPopup(event,'LESSON_RANDOMPAGE')">LESSON_RANDOMPAGE</a>) {
<a name="l1687"><span class="linenum">1687</span></a>              return true;
<a name="l1688"><span class="linenum">1688</span></a>          } elseif (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_CLUSTERJUMP')" href="../../_constants/LESSON_CLUSTERJUMP.html" onMouseOver="constPopup(event,'LESSON_CLUSTERJUMP')">LESSON_CLUSTERJUMP</a>) {
<a name="l1689"><span class="linenum">1689</span></a>              return true;
<a name="l1690"><span class="linenum">1690</span></a>          } elseif (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>) {
<a name="l1691"><span class="linenum">1691</span></a>              return true;
<a name="l1692"><span class="linenum">1692</span></a>          }
<a name="l1693"><span class="linenum">1693</span></a>  
<a name="l1694"><span class="linenum">1694</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1695"><span class="linenum">1695</span></a>          <a class="var it20901" onMouseOver="hilite(20901)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a> = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;nextpageid;
<a name="l1696"><span class="linenum">1696</span></a>          while (<a class="var it20901" onMouseOver="hilite(20901)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a> != 0) {
<a name="l1697"><span class="linenum">1697</span></a>              if (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="var it20901" onMouseOver="hilite(20901)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a>) {
<a name="l1698"><span class="linenum">1698</span></a>                  return true;
<a name="l1699"><span class="linenum">1699</span></a>              }
<a name="l1700"><span class="linenum">1700</span></a>              <a class="var it20901" onMouseOver="hilite(20901)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a> = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it20901" onMouseOver="hilite(20901)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a>]-&gt;nextpageid;
<a name="l1701"><span class="linenum">1701</span></a>          }
<a name="l1702"><span class="linenum">1702</span></a>          return false;
<a name="l1703"><span class="linenum">1703</span></a>      }
<a name="l1704"><span class="linenum">1704</span></a>  
<a name="l1705"><span class="linenum">1705</span></a>      <span class="comment">/**</span>
<a name="l1706"><span class="linenum">1706</span></a>  <span class="comment">     * Returns the time a user has remaining on this lesson</span>
<a name="l1707"><span class="linenum">1707</span></a>  <span class="comment">     * @param int $starttime Starttime timestamp</span>
<a name="l1708"><span class="linenum">1708</span></a>  <span class="comment">     * @return string</span>
<a name="l1709"><span class="linenum">1709</span></a>  <span class="comment">     */</span>
<a name="l1710"><span class="linenum">1710</span></a>      public function <a class="function" onClick="logFunction('time_remaining')" href="../../_functions/time_remaining.html" onMouseOver="funcPopup(event,'time_remaining')">time_remaining</a>(<a class="var it1223" onMouseOver="hilite(1223)" onMouseOut="lolite()" onClick="logVariable('starttime')" href="../../_variables/starttime.html">$starttime</a>) {
<a name="l1711"><span class="linenum">1711</span></a>          <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('timeleft')" href="../../_variables/timeleft.html">$timeleft</a> = <a class="var it1223" onMouseOver="hilite(1223)" onMouseOut="lolite()" onClick="logVariable('starttime')" href="../../_variables/starttime.html">$starttime</a> + <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;timelimit - <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1712"><span class="linenum">1712</span></a>          <a class="var it8638" onMouseOver="hilite(8638)" onMouseOut="lolite()" onClick="logVariable('hours')" href="../../_variables/hours.html">$hours</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>(<a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('timeleft')" href="../../_variables/timeleft.html">$timeleft</a>/3600);
<a name="l1713"><span class="linenum">1713</span></a>          <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('timeleft')" href="../../_variables/timeleft.html">$timeleft</a> = <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('timeleft')" href="../../_variables/timeleft.html">$timeleft</a> - (<a class="var it8638" onMouseOver="hilite(8638)" onMouseOut="lolite()" onClick="logVariable('hours')" href="../../_variables/hours.html">$hours</a> * 3600);
<a name="l1714"><span class="linenum">1714</span></a>          <a class="var it20556" onMouseOver="hilite(20556)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>(<a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('timeleft')" href="../../_variables/timeleft.html">$timeleft</a>/60);
<a name="l1715"><span class="linenum">1715</span></a>          <a class="var it5729" onMouseOver="hilite(5729)" onMouseOut="lolite()" onClick="logVariable('secs')" href="../../_variables/secs.html">$secs</a> = <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('timeleft')" href="../../_variables/timeleft.html">$timeleft</a> - (<a class="var it20556" onMouseOver="hilite(20556)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a> * 60);
<a name="l1716"><span class="linenum">1716</span></a>  
<a name="l1717"><span class="linenum">1717</span></a>          if (<a class="var it20556" onMouseOver="hilite(20556)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a> &lt; 10) {
<a name="l1718"><span class="linenum">1718</span></a>              <a class="var it20556" onMouseOver="hilite(20556)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a> = &quot;0<a class="var it20556" onMouseOver="hilite(20556)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a>&quot;;
<a name="l1719"><span class="linenum">1719</span></a>          }
<a name="l1720"><span class="linenum">1720</span></a>          if (<a class="var it5729" onMouseOver="hilite(5729)" onMouseOut="lolite()" onClick="logVariable('secs')" href="../../_variables/secs.html">$secs</a> &lt; 10) {
<a name="l1721"><span class="linenum">1721</span></a>              <a class="var it5729" onMouseOver="hilite(5729)" onMouseOut="lolite()" onClick="logVariable('secs')" href="../../_variables/secs.html">$secs</a> = &quot;0<a class="var it5729" onMouseOver="hilite(5729)" onMouseOut="lolite()" onClick="logVariable('secs')" href="../../_variables/secs.html">$secs</a>&quot;;
<a name="l1722"><span class="linenum">1722</span></a>          }
<a name="l1723"><span class="linenum">1723</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>   = array();
<a name="l1724"><span class="linenum">1724</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>[] = <a class="var it8638" onMouseOver="hilite(8638)" onMouseOut="lolite()" onClick="logVariable('hours')" href="../../_variables/hours.html">$hours</a>;
<a name="l1725"><span class="linenum">1725</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>[] = <a class="var it20556" onMouseOver="hilite(20556)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a>;
<a name="l1726"><span class="linenum">1726</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>[] = <a class="var it5729" onMouseOver="hilite(5729)" onMouseOut="lolite()" onClick="logVariable('secs')" href="../../_variables/secs.html">$secs</a>;
<a name="l1727"><span class="linenum">1727</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(':', <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>);
<a name="l1728"><span class="linenum">1728</span></a>          return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>;
<a name="l1729"><span class="linenum">1729</span></a>      }
<a name="l1730"><span class="linenum">1730</span></a>  
<a name="l1731"><span class="linenum">1731</span></a>      <span class="comment">/**</span>
<a name="l1732"><span class="linenum">1732</span></a>  <span class="comment">     * Interprets LESSON_CLUSTERJUMP jumpto value.</span>
<a name="l1733"><span class="linenum">1733</span></a>  <span class="comment">     *</span>
<a name="l1734"><span class="linenum">1734</span></a>  <span class="comment">     * This will select a page randomly</span>
<a name="l1735"><span class="linenum">1735</span></a>  <span class="comment">     * and the page selected will be inbetween a cluster page and end of clutter or end of lesson</span>
<a name="l1736"><span class="linenum">1736</span></a>  <span class="comment">     * and the page selected will be a page that has not been viewed already</span>
<a name="l1737"><span class="linenum">1737</span></a>  <span class="comment">     * and if any pages are within a branch table or end of branch then only 1 page within</span>
<a name="l1738"><span class="linenum">1738</span></a>  <span class="comment">     * the branch table or end of branch will be randomly selected (sub clustering).</span>
<a name="l1739"><span class="linenum">1739</span></a>  <span class="comment">     *</span>
<a name="l1740"><span class="linenum">1740</span></a>  <span class="comment">     * @param int $pageid Id of the current page from which we are jumping from.</span>
<a name="l1741"><span class="linenum">1741</span></a>  <span class="comment">     * @param int $userid Id of the user.</span>
<a name="l1742"><span class="linenum">1742</span></a>  <span class="comment">     * @return int The id of the next page.</span>
<a name="l1743"><span class="linenum">1743</span></a>  <span class="comment">     **/</span>
<a name="l1744"><span class="linenum">1744</span></a>      public function <a class="function" onClick="logFunction('cluster_jump')" href="../../_functions/cluster_jump.html" onMouseOver="funcPopup(event,'cluster_jump')">cluster_jump</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>=null) {
<a name="l1745"><span class="linenum">1745</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l1746"><span class="linenum">1746</span></a>  
<a name="l1747"><span class="linenum">1747</span></a>          if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>===null) {
<a name="l1748"><span class="linenum">1748</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1749"><span class="linenum">1749</span></a>          }
<a name="l1750"><span class="linenum">1750</span></a>  <span class="comment">        // get the number of retakes</span>
<a name="l1751"><span class="linenum">1751</span></a>          if (!<a class="var it20871" onMouseOver="hilite(20871)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, &quot;userid&quot;=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>))) {
<a name="l1752"><span class="linenum">1752</span></a>              <a class="var it20871" onMouseOver="hilite(20871)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = 0;
<a name="l1753"><span class="linenum">1753</span></a>          }
<a name="l1754"><span class="linenum">1754</span></a>  <span class="comment">        // get all the lesson_attempts aka what the user has seen</span>
<a name="l1755"><span class="linenum">1755</span></a>          <a class="var it20873" onMouseOver="hilite(20873)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a> = array();
<a name="l1756"><span class="linenum">1756</span></a>          if (<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_attempts')" href="../../_functions/get_attempts.html" onMouseOver="funcPopup(event,'get_attempts')">get_attempts</a>(<a class="var it20871" onMouseOver="hilite(20871)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a>)) {
<a name="l1757"><span class="linenum">1757</span></a>              foreach (<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> as <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>) {
<a name="l1758"><span class="linenum">1758</span></a>                  <a class="var it20873" onMouseOver="hilite(20873)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>[<a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('pageid')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>] = <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('pageid')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>;
<a name="l1759"><span class="linenum">1759</span></a>              }
<a name="l1760"><span class="linenum">1760</span></a>  
<a name="l1761"><span class="linenum">1761</span></a>          }
<a name="l1762"><span class="linenum">1762</span></a>  
<a name="l1763"><span class="linenum">1763</span></a>  <span class="comment">        // get the lesson pages</span>
<a name="l1764"><span class="linenum">1764</span></a>          <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1765"><span class="linenum">1765</span></a>  <span class="comment">        // find the start of the cluster</span>
<a name="l1766"><span class="linenum">1766</span></a>          while (<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> != 0) { // this condition should not be satisfied... should be a cluster page
<a name="l1767"><span class="linenum">1767</span></a>              if (<a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_CLUSTER')" href="../../_constants/LESSON_PAGE_CLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_CLUSTER')">LESSON_PAGE_CLUSTER</a>) {
<a name="l1768"><span class="linenum">1768</span></a>                  break;
<a name="l1769"><span class="linenum">1769</span></a>              }
<a name="l1770"><span class="linenum">1770</span></a>              <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;prevpageid;
<a name="l1771"><span class="linenum">1771</span></a>          }
<a name="l1772"><span class="linenum">1772</span></a>  
<a name="l1773"><span class="linenum">1773</span></a>          <a class="var it20902" onMouseOver="hilite(20902)" onMouseOut="lolite()" onClick="logVariable('clusterpages')" href="../../_variables/clusterpages.html">$clusterpages</a> = array();
<a name="l1774"><span class="linenum">1774</span></a>          <a class="var it20902" onMouseOver="hilite(20902)" onMouseOut="lolite()" onClick="logVariable('clusterpages')" href="../../_variables/clusterpages.html">$clusterpages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_sub_pages_of')" href="../../_functions/get_sub_pages_of.html" onMouseOver="funcPopup(event,'get_sub_pages_of')">get_sub_pages_of</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFCLUSTER')" href="../../_constants/LESSON_PAGE_ENDOFCLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFCLUSTER')">LESSON_PAGE_ENDOFCLUSTER</a>));
<a name="l1775"><span class="linenum">1775</span></a>          <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a> = array();
<a name="l1776"><span class="linenum">1776</span></a>          foreach (<a class="var it20902" onMouseOver="hilite(20902)" onMouseOut="lolite()" onClick="logVariable('clusterpages')" href="../../_variables/clusterpages.html">$clusterpages</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>=&gt;<a class="var it1263" onMouseOver="hilite(1263)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>) {
<a name="l1777"><span class="linenum">1777</span></a>  <span class="comment">            // Remove the page if  it is in a branch table or is an endofbranch.</span>
<a name="l1778"><span class="linenum">1778</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_sub_page_of_type')" href="../../_functions/is_sub_page_of_type.html" onMouseOver="funcPopup(event,'is_sub_page_of_type')">is_sub_page_of_type</a>(<a class="var it1263" onMouseOver="hilite(1263)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>-&gt;<a onClick="logVariable('id')" class="var it44785" onMouseOver="hilite(44785)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1779"><span class="linenum">1779</span></a>                      array(<a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>), array(<a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>, <a class="constant" onClick="logConstant('LESSON_PAGE_CLUSTER')" href="../../_constants/LESSON_PAGE_CLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_CLUSTER')">LESSON_PAGE_CLUSTER</a>))
<a name="l1780"><span class="linenum">1780</span></a>                      || <a class="var it1263" onMouseOver="hilite(1263)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>-&gt;<a onClick="logVariable('qtype')" class="var it44785" onMouseOver="hilite(44785)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> == <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>) {
<a name="l1781"><span class="linenum">1781</span></a>                  unset(<a class="var it20902" onMouseOver="hilite(20902)" onMouseOut="lolite()" onClick="logVariable('clusterpages')" href="../../_variables/clusterpages.html">$clusterpages</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]);
<a name="l1782"><span class="linenum">1782</span></a>              } else if (<a class="var it1263" onMouseOver="hilite(1263)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>-&gt;<a onClick="logVariable('qtype')" class="var it44785" onMouseOver="hilite(44785)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> == <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>) {
<a name="l1783"><span class="linenum">1783</span></a>  <span class="comment">                // If branchtable, check to see if any pages inside have been viewed.</span>
<a name="l1784"><span class="linenum">1784</span></a>                  <a class="var it20903" onMouseOver="hilite(20903)" onMouseOut="lolite()" onClick="logVariable('branchpages')" href="../../_variables/branchpages.html">$branchpages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_sub_pages_of')" href="../../_functions/get_sub_pages_of.html" onMouseOver="funcPopup(event,'get_sub_pages_of')">get_sub_pages_of</a>(<a class="var it1263" onMouseOver="hilite(1263)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>-&gt;<a onClick="logVariable('id')" class="var it44785" onMouseOver="hilite(44785)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>, <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>));
<a name="l1785"><span class="linenum">1785</span></a>                  <a class="var it4598" onMouseOver="hilite(4598)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../_variables/flag.html">$flag</a> = true;
<a name="l1786"><span class="linenum">1786</span></a>                  foreach (<a class="var it20903" onMouseOver="hilite(20903)" onMouseOut="lolite()" onClick="logVariable('branchpages')" href="../../_variables/branchpages.html">$branchpages</a> as <a class="var it20904" onMouseOver="hilite(20904)" onMouseOut="lolite()" onClick="logVariable('branchpage')" href="../../_variables/branchpage.html">$branchpage</a>) {
<a name="l1787"><span class="linenum">1787</span></a>                      if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it20904" onMouseOver="hilite(20904)" onMouseOut="lolite()" onClick="logVariable('branchpage')" href="../../_variables/branchpage.html">$branchpage</a>-&gt;<a onClick="logVariable('id')" class="var it44786" onMouseOver="hilite(44786)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it20873" onMouseOver="hilite(20873)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>)) {  // Check if any of the pages have been viewed.
<a name="l1788"><span class="linenum">1788</span></a>                          <a class="var it4598" onMouseOver="hilite(4598)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../_variables/flag.html">$flag</a> = false;
<a name="l1789"><span class="linenum">1789</span></a>                      }
<a name="l1790"><span class="linenum">1790</span></a>                  }
<a name="l1791"><span class="linenum">1791</span></a>                  if (<a class="var it4598" onMouseOver="hilite(4598)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../_variables/flag.html">$flag</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it20903" onMouseOver="hilite(20903)" onMouseOut="lolite()" onClick="logVariable('branchpages')" href="../../_variables/branchpages.html">$branchpages</a>) &gt; 0) {
<a name="l1792"><span class="linenum">1792</span></a>  <span class="comment">                    // Add branch table.</span>
<a name="l1793"><span class="linenum">1793</span></a>                      <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[] = <a class="var it1263" onMouseOver="hilite(1263)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>;
<a name="l1794"><span class="linenum">1794</span></a>                  }
<a name="l1795"><span class="linenum">1795</span></a>              } elseif (<a class="var it1263" onMouseOver="hilite(1263)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>-&gt;<a class="function" onClick="logFunction('is_unseen')" href="../../_functions/is_unseen.html" onMouseOver="funcPopup(event,'is_unseen')">is_unseen</a>(<a class="var it20873" onMouseOver="hilite(20873)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>)) {
<a name="l1796"><span class="linenum">1796</span></a>                  <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[] = <a class="var it1263" onMouseOver="hilite(1263)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>;
<a name="l1797"><span class="linenum">1797</span></a>              }
<a name="l1798"><span class="linenum">1798</span></a>          }
<a name="l1799"><span class="linenum">1799</span></a>  
<a name="l1800"><span class="linenum">1800</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>) &gt; 0) {
<a name="l1801"><span class="linenum">1801</span></a>  <span class="comment">            // it does not contain elements, then use exitjump, otherwise find out next page/branch</span>
<a name="l1802"><span class="linenum">1802</span></a>              <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a> = <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[<a class="phpfunction" onClick="logFunction('rand')" href="../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>)-1)];
<a name="l1803"><span class="linenum">1803</span></a>              if (<a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('qtype')" class="var it44783" onMouseOver="hilite(44783)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> == <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>) {
<a name="l1804"><span class="linenum">1804</span></a>  <span class="comment">                // if branch table, then pick a random page inside of it</span>
<a name="l1805"><span class="linenum">1805</span></a>                  <a class="var it20903" onMouseOver="hilite(20903)" onMouseOut="lolite()" onClick="logVariable('branchpages')" href="../../_variables/branchpages.html">$branchpages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_sub_pages_of')" href="../../_functions/get_sub_pages_of.html" onMouseOver="funcPopup(event,'get_sub_pages_of')">get_sub_pages_of</a>(<a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it44783" onMouseOver="hilite(44783)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>, <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>));
<a name="l1806"><span class="linenum">1806</span></a>                  return <a class="var it20903" onMouseOver="hilite(20903)" onMouseOut="lolite()" onClick="logVariable('branchpages')" href="../../_variables/branchpages.html">$branchpages</a>[<a class="phpfunction" onClick="logFunction('rand')" href="../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it20903" onMouseOver="hilite(20903)" onMouseOut="lolite()" onClick="logVariable('branchpages')" href="../../_variables/branchpages.html">$branchpages</a>)-1)]-&gt;id;
<a name="l1807"><span class="linenum">1807</span></a>              } else { // otherwise, return the page's id
<a name="l1808"><span class="linenum">1808</span></a>                  return <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it44783" onMouseOver="hilite(44783)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1809"><span class="linenum">1809</span></a>              }
<a name="l1810"><span class="linenum">1810</span></a>          } else {
<a name="l1811"><span class="linenum">1811</span></a>  <span class="comment">            // seen all there is to see, leave the cluster</span>
<a name="l1812"><span class="linenum">1812</span></a>              if (<a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it20902" onMouseOver="hilite(20902)" onMouseOut="lolite()" onClick="logVariable('clusterpages')" href="../../_variables/clusterpages.html">$clusterpages</a>)-&gt;nextpageid == 0) {
<a name="l1813"><span class="linenum">1813</span></a>                  return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;
<a name="l1814"><span class="linenum">1814</span></a>              } else {
<a name="l1815"><span class="linenum">1815</span></a>                  <a class="var it20905" onMouseOver="hilite(20905)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a> = <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>;
<a name="l1816"><span class="linenum">1816</span></a>                  while (<a class="var it20905" onMouseOver="hilite(20905)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a> != 0) { // This condition should not be satisfied... should be an end of cluster page.
<a name="l1817"><span class="linenum">1817</span></a>                      if (<a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it20905" onMouseOver="hilite(20905)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFCLUSTER')" href="../../_constants/LESSON_PAGE_ENDOFCLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFCLUSTER')">LESSON_PAGE_ENDOFCLUSTER</a>) {
<a name="l1818"><span class="linenum">1818</span></a>                          break;
<a name="l1819"><span class="linenum">1819</span></a>                      }
<a name="l1820"><span class="linenum">1820</span></a>                      <a class="var it20905" onMouseOver="hilite(20905)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a> = <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it20905" onMouseOver="hilite(20905)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a>]-&gt;nextpageid;
<a name="l1821"><span class="linenum">1821</span></a>                  }
<a name="l1822"><span class="linenum">1822</span></a>                  <a class="var it20906" onMouseOver="hilite(20906)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(&quot;lesson_answers&quot;, &quot;jumpto&quot;, array(&quot;pageid&quot; =&gt; <a class="var it20905" onMouseOver="hilite(20905)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a>, &quot;lessonid&quot; =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1823"><span class="linenum">1823</span></a>                  if (<a class="var it20906" onMouseOver="hilite(20906)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> == <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>) {
<a name="l1824"><span class="linenum">1824</span></a>                      <a class="var it20906" onMouseOver="hilite(20906)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> = <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it20905" onMouseOver="hilite(20905)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a>]-&gt;nextpageid;
<a name="l1825"><span class="linenum">1825</span></a>                  }
<a name="l1826"><span class="linenum">1826</span></a>                  if (<a class="var it20906" onMouseOver="hilite(20906)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> == 0) {
<a name="l1827"><span class="linenum">1827</span></a>                      return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;
<a name="l1828"><span class="linenum">1828</span></a>                  } else if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it20906" onMouseOver="hilite(20906)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a>, array(<a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>, <a class="constant" onClick="logConstant('LESSON_PREVIOUSPAGE')" href="../../_constants/LESSON_PREVIOUSPAGE.html" onMouseOver="constPopup(event,'LESSON_PREVIOUSPAGE')">LESSON_PREVIOUSPAGE</a>))) {
<a name="l1829"><span class="linenum">1829</span></a>                      return <a class="var it20906" onMouseOver="hilite(20906)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a>;
<a name="l1830"><span class="linenum">1830</span></a>                  } else {
<a name="l1831"><span class="linenum">1831</span></a>                      if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it20906" onMouseOver="hilite(20906)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a>, <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>)) {
<a name="l1832"><span class="linenum">1832</span></a>                          <a class="var it811" onMouseOver="hilite(811)" onMouseOut="lolite()" onClick="logVariable('found')" href="../../_variables/found.html">$found</a> = false;
<a name="l1833"><span class="linenum">1833</span></a>                          foreach (<a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a> as <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l1834"><span class="linenum">1834</span></a>                              if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> === <a class="var it20905" onMouseOver="hilite(20905)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a>) {
<a name="l1835"><span class="linenum">1835</span></a>                                  <a class="var it811" onMouseOver="hilite(811)" onMouseOut="lolite()" onClick="logVariable('found')" href="../../_variables/found.html">$found</a> = true;
<a name="l1836"><span class="linenum">1836</span></a>                              } else if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('qtype')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> == <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFCLUSTER')" href="../../_constants/LESSON_PAGE_ENDOFCLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFCLUSTER')">LESSON_PAGE_ENDOFCLUSTER</a>) {
<a name="l1837"><span class="linenum">1837</span></a>                                  <a class="var it20906" onMouseOver="hilite(20906)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(&quot;lesson_answers&quot;, &quot;jumpto&quot;, array(&quot;pageid&quot; =&gt; <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;lessonid&quot; =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1838"><span class="linenum">1838</span></a>                                  if (<a class="var it20906" onMouseOver="hilite(20906)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> == <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>) {
<a name="l1839"><span class="linenum">1839</span></a>                                      <a class="var it20906" onMouseOver="hilite(20906)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> = <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]-&gt;nextpageid;
<a name="l1840"><span class="linenum">1840</span></a>                                  }
<a name="l1841"><span class="linenum">1841</span></a>                                  break;
<a name="l1842"><span class="linenum">1842</span></a>                              }
<a name="l1843"><span class="linenum">1843</span></a>                          }
<a name="l1844"><span class="linenum">1844</span></a>                      }
<a name="l1845"><span class="linenum">1845</span></a>                      if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it20906" onMouseOver="hilite(20906)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a>, <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>)) {
<a name="l1846"><span class="linenum">1846</span></a>                          return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;
<a name="l1847"><span class="linenum">1847</span></a>                      }
<a name="l1848"><span class="linenum">1848</span></a>                      return <a class="var it20906" onMouseOver="hilite(20906)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a>;
<a name="l1849"><span class="linenum">1849</span></a>                  }
<a name="l1850"><span class="linenum">1850</span></a>              }
<a name="l1851"><span class="linenum">1851</span></a>          }
<a name="l1852"><span class="linenum">1852</span></a>      }
<a name="l1853"><span class="linenum">1853</span></a>  
<a name="l1854"><span class="linenum">1854</span></a>      <span class="comment">/**</span>
<a name="l1855"><span class="linenum">1855</span></a>  <span class="comment">     * Finds all pages that appear to be a subtype of the provided pageid until</span>
<a name="l1856"><span class="linenum">1856</span></a>  <span class="comment">     * an end point specified within $ends is encountered or no more pages exist</span>
<a name="l1857"><span class="linenum">1857</span></a>  <span class="comment">     *</span>
<a name="l1858"><span class="linenum">1858</span></a>  <span class="comment">     * @param int $pageid</span>
<a name="l1859"><span class="linenum">1859</span></a>  <span class="comment">     * @param array $ends An array of LESSON_PAGE_* types that signify an end of</span>
<a name="l1860"><span class="linenum">1860</span></a>  <span class="comment">     *               the subtype</span>
<a name="l1861"><span class="linenum">1861</span></a>  <span class="comment">     * @return array An array of specialised lesson_page objects</span>
<a name="l1862"><span class="linenum">1862</span></a>  <span class="comment">     */</span>
<a name="l1863"><span class="linenum">1863</span></a>      public function <a class="function" onClick="logFunction('get_sub_pages_of')" href="../../_functions/get_sub_pages_of.html" onMouseOver="funcPopup(event,'get_sub_pages_of')">get_sub_pages_of</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array <a class="var it20907" onMouseOver="hilite(20907)" onMouseOut="lolite()" onClick="logVariable('ends')" href="../../_variables/ends.html">$ends</a>) {
<a name="l1864"><span class="linenum">1864</span></a>          <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1865"><span class="linenum">1865</span></a>          <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;nextpageid;  <span class="comment">// move to the first page after the branch table</span>
<a name="l1866"><span class="linenum">1866</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = array();
<a name="l1867"><span class="linenum">1867</span></a>  
<a name="l1868"><span class="linenum">1868</span></a>          while (true) {
<a name="l1869"><span class="linenum">1869</span></a>              if (<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> == 0 || <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype, <a class="var it20907" onMouseOver="hilite(20907)" onMouseOut="lolite()" onClick="logVariable('ends')" href="../../_variables/ends.html">$ends</a>)) {
<a name="l1870"><span class="linenum">1870</span></a>                  break;
<a name="l1871"><span class="linenum">1871</span></a>              }
<a name="l1872"><span class="linenum">1872</span></a>              <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[] = <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>];
<a name="l1873"><span class="linenum">1873</span></a>              <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it14975" onMouseOver="hilite(14975)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;nextpageid;
<a name="l1874"><span class="linenum">1874</span></a>          }
<a name="l1875"><span class="linenum">1875</span></a>  
<a name="l1876"><span class="linenum">1876</span></a>          return <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>;
<a name="l1877"><span class="linenum">1877</span></a>      }
<a name="l1878"><span class="linenum">1878</span></a>  
<a name="l1879"><span class="linenum">1879</span></a>      <span class="comment">/**</span>
<a name="l1880"><span class="linenum">1880</span></a>  <span class="comment">     * Checks to see if the specified page[id] is a subpage of a type specified in</span>
<a name="l1881"><span class="linenum">1881</span></a>  <span class="comment">     * the $types array, until either there are no more pages of we find a type</span>
<a name="l1882"><span class="linenum">1882</span></a>  <span class="comment">     * corresponding to that of a type specified in $ends</span>
<a name="l1883"><span class="linenum">1883</span></a>  <span class="comment">     *</span>
<a name="l1884"><span class="linenum">1884</span></a>  <span class="comment">     * @param int $pageid The id of the page to check</span>
<a name="l1885"><span class="linenum">1885</span></a>  <span class="comment">     * @param array $types An array of types that would signify this page was a subpage</span>
<a name="l1886"><span class="linenum">1886</span></a>  <span class="comment">     * @param array $ends An array of types that mean this is not a subpage</span>
<a name="l1887"><span class="linenum">1887</span></a>  <span class="comment">     * @return bool</span>
<a name="l1888"><span class="linenum">1888</span></a>  <span class="comment">     */</span>
<a name="l1889"><span class="linenum">1889</span></a>      public function <a class="function" onClick="logFunction('is_sub_page_of_type')" href="../../_functions/is_sub_page_of_type.html" onMouseOver="funcPopup(event,'is_sub_page_of_type')">is_sub_page_of_type</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>, array <a class="var it20907" onMouseOver="hilite(20907)" onMouseOut="lolite()" onClick="logVariable('ends')" href="../../_variables/ends.html">$ends</a>) {
<a name="l1890"><span class="linenum">1890</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1891"><span class="linenum">1891</span></a>          <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;prevpageid; <span class="comment">// move up one</span>
<a name="l1892"><span class="linenum">1892</span></a>  
<a name="l1893"><span class="linenum">1893</span></a>          <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>(<a class="var it20907" onMouseOver="hilite(20907)" onMouseOut="lolite()" onClick="logVariable('ends')" href="../../_variables/ends.html">$ends</a>, 0);
<a name="l1894"><span class="linenum">1894</span></a>  <span class="comment">        // go up the pages till branch table</span>
<a name="l1895"><span class="linenum">1895</span></a>          while (true) {
<a name="l1896"><span class="linenum">1896</span></a>              if (<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>==0 || <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype, <a class="var it20907" onMouseOver="hilite(20907)" onMouseOut="lolite()" onClick="logVariable('ends')" href="../../_variables/ends.html">$ends</a>)) {
<a name="l1897"><span class="linenum">1897</span></a>                  return false;
<a name="l1898"><span class="linenum">1898</span></a>              } else if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype, <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>)) {
<a name="l1899"><span class="linenum">1899</span></a>                  return true;
<a name="l1900"><span class="linenum">1900</span></a>              }
<a name="l1901"><span class="linenum">1901</span></a>              <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;prevpageid;
<a name="l1902"><span class="linenum">1902</span></a>          }
<a name="l1903"><span class="linenum">1903</span></a>      }
<a name="l1904"><span class="linenum">1904</span></a>  
<a name="l1905"><span class="linenum">1905</span></a>      <span class="comment">/**</span>
<a name="l1906"><span class="linenum">1906</span></a>  <span class="comment">     * Move a page resorting all other pages.</span>
<a name="l1907"><span class="linenum">1907</span></a>  <span class="comment">     *</span>
<a name="l1908"><span class="linenum">1908</span></a>  <span class="comment">     * @param int $pageid</span>
<a name="l1909"><span class="linenum">1909</span></a>  <span class="comment">     * @param int $after</span>
<a name="l1910"><span class="linenum">1910</span></a>  <span class="comment">     * @return void</span>
<a name="l1911"><span class="linenum">1911</span></a>  <span class="comment">     */</span>
<a name="l1912"><span class="linenum">1912</span></a>      public function <a class="function" onClick="logFunction('resort_pages')" href="../../_functions/resort_pages.html" onMouseOver="funcPopup(event,'resort_pages')">resort_pages</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="var it6083" onMouseOver="hilite(6083)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a>) {
<a name="l1913"><span class="linenum">1913</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1914"><span class="linenum">1914</span></a>  
<a name="l1915"><span class="linenum">1915</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course);
<a name="l1916"><span class="linenum">1916</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1917"><span class="linenum">1917</span></a>  
<a name="l1918"><span class="linenum">1918</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1919"><span class="linenum">1919</span></a>  
<a name="l1920"><span class="linenum">1920</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>) || (<a class="var it6083" onMouseOver="hilite(6083)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a>!=0 &amp;&amp; !<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it6083" onMouseOver="hilite(6083)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a>, <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>))) {
<a name="l1921"><span class="linenum">1921</span></a>              <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindpages', 'lesson', &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/lesson/edit.php?id=<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&quot;);
<a name="l1922"><span class="linenum">1922</span></a>          }
<a name="l1923"><span class="linenum">1923</span></a>  
<a name="l1924"><span class="linenum">1924</span></a>          <a class="var it20908" onMouseOver="hilite(20908)" onMouseOut="lolite()" onClick="logVariable('pagetomove')" href="../../_variables/pagetomove.html">$pagetomove</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]);
<a name="l1925"><span class="linenum">1925</span></a>          unset(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]);
<a name="l1926"><span class="linenum">1926</span></a>  
<a name="l1927"><span class="linenum">1927</span></a>          <a class="var it1036" onMouseOver="hilite(1036)" onMouseOut="lolite()" onClick="logVariable('pageids')" href="../../_variables/pageids.html">$pageids</a> = array();
<a name="l1928"><span class="linenum">1928</span></a>          if (<a class="var it6083" onMouseOver="hilite(6083)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a> === 0) {
<a name="l1929"><span class="linenum">1929</span></a>              <a class="var it1036" onMouseOver="hilite(1036)" onMouseOut="lolite()" onClick="logVariable('pageids')" href="../../_variables/pageids.html">$pageids</a>['p0'] = <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>;
<a name="l1930"><span class="linenum">1930</span></a>          }
<a name="l1931"><span class="linenum">1931</span></a>          foreach (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l1932"><span class="linenum">1932</span></a>              <a class="var it1036" onMouseOver="hilite(1036)" onMouseOut="lolite()" onClick="logVariable('pageids')" href="../../_variables/pageids.html">$pageids</a>[] = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1933"><span class="linenum">1933</span></a>              if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it6083" onMouseOver="hilite(6083)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a>) {
<a name="l1934"><span class="linenum">1934</span></a>                  <a class="var it1036" onMouseOver="hilite(1036)" onMouseOut="lolite()" onClick="logVariable('pageids')" href="../../_variables/pageids.html">$pageids</a>[] = <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>;
<a name="l1935"><span class="linenum">1935</span></a>              }
<a name="l1936"><span class="linenum">1936</span></a>          }
<a name="l1937"><span class="linenum">1937</span></a>  
<a name="l1938"><span class="linenum">1938</span></a>          <a class="var it20909" onMouseOver="hilite(20909)" onMouseOut="lolite()" onClick="logVariable('pageidsref')" href="../../_variables/pageidsref.html">$pageidsref</a> = <a class="var it1036" onMouseOver="hilite(1036)" onMouseOut="lolite()" onClick="logVariable('pageids')" href="../../_variables/pageids.html">$pageids</a>;
<a name="l1939"><span class="linenum">1939</span></a>          <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it20909" onMouseOver="hilite(20909)" onMouseOut="lolite()" onClick="logVariable('pageidsref')" href="../../_variables/pageidsref.html">$pageidsref</a>);
<a name="l1940"><span class="linenum">1940</span></a>          <a class="var it3959" onMouseOver="hilite(3959)" onMouseOut="lolite()" onClick="logVariable('prev')" href="../../_variables/prev.html">$prev</a> = 0;
<a name="l1941"><span class="linenum">1941</span></a>          <a class="var it3028" onMouseOver="hilite(3028)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a> = <a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>(<a class="var it20909" onMouseOver="hilite(20909)" onMouseOut="lolite()" onClick="logVariable('pageidsref')" href="../../_variables/pageidsref.html">$pageidsref</a>);
<a name="l1942"><span class="linenum">1942</span></a>          foreach (<a class="var it1036" onMouseOver="hilite(1036)" onMouseOut="lolite()" onClick="logVariable('pageids')" href="../../_variables/pageids.html">$pageids</a> as <a class="var it18850" onMouseOver="hilite(18850)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a>) {
<a name="l1943"><span class="linenum">1943</span></a>              if (<a class="var it18850" onMouseOver="hilite(18850)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a> === <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>) {
<a name="l1944"><span class="linenum">1944</span></a>                  <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it20908" onMouseOver="hilite(20908)" onMouseOut="lolite()" onClick="logVariable('pagetomove')" href="../../_variables/pagetomove.html">$pagetomove</a>;
<a name="l1945"><span class="linenum">1945</span></a>              } else {
<a name="l1946"><span class="linenum">1946</span></a>                  <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it18850" onMouseOver="hilite(18850)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a>];
<a name="l1947"><span class="linenum">1947</span></a>              }
<a name="l1948"><span class="linenum">1948</span></a>              if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> != <a class="var it3959" onMouseOver="hilite(3959)" onMouseOut="lolite()" onClick="logVariable('prev')" href="../../_variables/prev.html">$prev</a> || <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> != <a class="var it3028" onMouseOver="hilite(3028)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a>) {
<a name="l1949"><span class="linenum">1949</span></a>                  <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('move')" href="../../_functions/move.html" onMouseOver="funcPopup(event,'move')">move</a>(<a class="var it3028" onMouseOver="hilite(3028)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a>, <a class="var it3959" onMouseOver="hilite(3959)" onMouseOut="lolite()" onClick="logVariable('prev')" href="../../_variables/prev.html">$prev</a>);
<a name="l1950"><span class="linenum">1950</span></a>  
<a name="l1951"><span class="linenum">1951</span></a>                  if (<a class="var it18850" onMouseOver="hilite(18850)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a> === <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>) {
<a name="l1952"><span class="linenum">1952</span></a>  <span class="comment">                    // We will trigger an event.</span>
<a name="l1953"><span class="linenum">1953</span></a>                      <a class="var it20910" onMouseOver="hilite(20910)" onMouseOut="lolite()" onClick="logVariable('pageupdated')" href="../../_variables/pageupdated.html">$pageupdated</a> = array('next' =&gt; <a class="var it3028" onMouseOver="hilite(3028)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a>, 'prev' =&gt; <a class="var it3959" onMouseOver="hilite(3959)" onMouseOut="lolite()" onClick="logVariable('prev')" href="../../_variables/prev.html">$prev</a>);
<a name="l1954"><span class="linenum">1954</span></a>                  }
<a name="l1955"><span class="linenum">1955</span></a>              }
<a name="l1956"><span class="linenum">1956</span></a>  
<a name="l1957"><span class="linenum">1957</span></a>              <a class="var it3959" onMouseOver="hilite(3959)" onMouseOut="lolite()" onClick="logVariable('prev')" href="../../_variables/prev.html">$prev</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1958"><span class="linenum">1958</span></a>              <a class="var it3028" onMouseOver="hilite(3028)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a> = <a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>(<a class="var it20909" onMouseOver="hilite(20909)" onMouseOut="lolite()" onClick="logVariable('pageidsref')" href="../../_variables/pageidsref.html">$pageidsref</a>);
<a name="l1959"><span class="linenum">1959</span></a>              if (!<a class="var it3028" onMouseOver="hilite(3028)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a>) {
<a name="l1960"><span class="linenum">1960</span></a>                  <a class="var it3028" onMouseOver="hilite(3028)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a> = 0;
<a name="l1961"><span class="linenum">1961</span></a>              }
<a name="l1962"><span class="linenum">1962</span></a>          }
<a name="l1963"><span class="linenum">1963</span></a>  
<a name="l1964"><span class="linenum">1964</span></a>  <span class="comment">        // Trigger an event: page moved.</span>
<a name="l1965"><span class="linenum">1965</span></a>          if (!empty(<a class="var it20910" onMouseOver="hilite(20910)" onMouseOut="lolite()" onClick="logVariable('pageupdated')" href="../../_variables/pageupdated.html">$pageupdated</a>)) {
<a name="l1966"><span class="linenum">1966</span></a>              <a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a> = array(
<a name="l1967"><span class="linenum">1967</span></a>                  'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l1968"><span class="linenum">1968</span></a>                  'objectid' =&gt; <a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>,
<a name="l1969"><span class="linenum">1969</span></a>                  'other' =&gt; array(
<a name="l1970"><span class="linenum">1970</span></a>                      'pagetype' =&gt; <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('get_typestring')" href="../../_functions/get_typestring.html" onMouseOver="funcPopup(event,'get_typestring')">get_typestring</a>(),
<a name="l1971"><span class="linenum">1971</span></a>                      'prevpageid' =&gt; <a class="var it20910" onMouseOver="hilite(20910)" onMouseOut="lolite()" onClick="logVariable('pageupdated')" href="../../_variables/pageupdated.html">$pageupdated</a>['prev'],
<a name="l1972"><span class="linenum">1972</span></a>                      'nextpageid' =&gt; <a class="var it20910" onMouseOver="hilite(20910)" onMouseOut="lolite()" onClick="logVariable('pageupdated')" href="../../_variables/pageupdated.html">$pageupdated</a>['next']
<a name="l1973"><span class="linenum">1973</span></a>                  )
<a name="l1974"><span class="linenum">1974</span></a>              );
<a name="l1975"><span class="linenum">1975</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('page_moved')" href="../../_classes/page_moved.html" onMouseOver="classPopup(event,'page_moved')">page_moved</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a>);
<a name="l1976"><span class="linenum">1976</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1977"><span class="linenum">1977</span></a>          }
<a name="l1978"><span class="linenum">1978</span></a>  
<a name="l1979"><span class="linenum">1979</span></a>      }
<a name="l1980"><span class="linenum">1980</span></a>  }
<a name="l1981"><span class="linenum">1981</span></a>  
<a name="l1982"><span class="linenum">1982</span></a>  
<a name="l1983"><span class="linenum">1983</span></a>  <span class="comment">/**</span>
<a name="l1984"><span class="linenum">1984</span></a>  <span class="comment"> * Abstract class to provide a core functions to the all lesson classes</span>
<a name="l1985"><span class="linenum">1985</span></a>  <span class="comment"> *</span>
<a name="l1986"><span class="linenum">1986</span></a>  <span class="comment"> * This class should be abstracted by ALL classes with the lesson module to ensure</span>
<a name="l1987"><span class="linenum">1987</span></a>  <span class="comment"> * that all classes within this module can be interacted with in the same way.</span>
<a name="l1988"><span class="linenum">1988</span></a>  <span class="comment"> *</span>
<a name="l1989"><span class="linenum">1989</span></a>  <span class="comment"> * This class provides the user with a basic properties array that can be fetched</span>
<a name="l1990"><span class="linenum">1990</span></a>  <span class="comment"> * or set via magic methods, or alternatively by defining methods get_blah() or</span>
<a name="l1991"><span class="linenum">1991</span></a>  <span class="comment"> * set_blah() within the extending object.</span>
<a name="l1992"><span class="linenum">1992</span></a>  <span class="comment"> *</span>
<a name="l1993"><span class="linenum">1993</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l1994"><span class="linenum">1994</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l1995"><span class="linenum">1995</span></a>  <span class="comment"> */</span>
<a name="l1996"><span class="linenum">1996</span></a>  abstract class lesson_base {
<a name="l1997"><span class="linenum">1997</span></a>  
<a name="l1998"><span class="linenum">1998</span></a>      <span class="comment">/**</span>
<a name="l1999"><span class="linenum">1999</span></a>  <span class="comment">     * An object containing properties</span>
<a name="l2000"><span class="linenum">2000</span></a>  <span class="comment">     * @var stdClass</span>
<a name="l2001"><span class="linenum">2001</span></a>  <span class="comment">     */</span>
<a name="l2002"><span class="linenum">2002</span></a>      protected <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>;
<a name="l2003"><span class="linenum">2003</span></a>  
<a name="l2004"><span class="linenum">2004</span></a>      <span class="comment">/**</span>
<a name="l2005"><span class="linenum">2005</span></a>  <span class="comment">     * The constructor</span>
<a name="l2006"><span class="linenum">2006</span></a>  <span class="comment">     * @param stdClass $properties</span>
<a name="l2007"><span class="linenum">2007</span></a>  <span class="comment">     */</span>
<a name="l2008"><span class="linenum">2008</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>) {
<a name="l2009"><span class="linenum">2009</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a> = (object)<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>;
<a name="l2010"><span class="linenum">2010</span></a>      }
<a name="l2011"><span class="linenum">2011</span></a>  
<a name="l2012"><span class="linenum">2012</span></a>      <span class="comment">/**</span>
<a name="l2013"><span class="linenum">2013</span></a>  <span class="comment">     * Magic property method</span>
<a name="l2014"><span class="linenum">2014</span></a>  <span class="comment">     *</span>
<a name="l2015"><span class="linenum">2015</span></a>  <span class="comment">     * Attempts to call a set_$key method if one exists otherwise falls back</span>
<a name="l2016"><span class="linenum">2016</span></a>  <span class="comment">     * to simply set the property</span>
<a name="l2017"><span class="linenum">2017</span></a>  <span class="comment">     *</span>
<a name="l2018"><span class="linenum">2018</span></a>  <span class="comment">     * @param string $key</span>
<a name="l2019"><span class="linenum">2019</span></a>  <span class="comment">     * @param mixed $value</span>
<a name="l2020"><span class="linenum">2020</span></a>  <span class="comment">     */</span>
<a name="l2021"><span class="linenum">2021</span></a>      public function <a class="function" onClick="logFunction('__set')" href="../../_functions/__set.html" onMouseOver="funcPopup(event,'__set')">__set</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l2022"><span class="linenum">2022</span></a>          if (<a class="phpfunction" onClick="logFunction('method_exists')" href="../../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, 'set_'.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>)) {
<a name="l2023"><span class="linenum">2023</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;{'set_'.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>}(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l2024"><span class="linenum">2024</span></a>          }
<a name="l2025"><span class="linenum">2025</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;{<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>} = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>;
<a name="l2026"><span class="linenum">2026</span></a>      }
<a name="l2027"><span class="linenum">2027</span></a>  
<a name="l2028"><span class="linenum">2028</span></a>      <span class="comment">/**</span>
<a name="l2029"><span class="linenum">2029</span></a>  <span class="comment">     * Magic get method</span>
<a name="l2030"><span class="linenum">2030</span></a>  <span class="comment">     *</span>
<a name="l2031"><span class="linenum">2031</span></a>  <span class="comment">     * Attempts to call a get_$key method to return the property and ralls over</span>
<a name="l2032"><span class="linenum">2032</span></a>  <span class="comment">     * to return the raw property</span>
<a name="l2033"><span class="linenum">2033</span></a>  <span class="comment">     *</span>
<a name="l2034"><span class="linenum">2034</span></a>  <span class="comment">     * @param str $key</span>
<a name="l2035"><span class="linenum">2035</span></a>  <span class="comment">     * @return mixed</span>
<a name="l2036"><span class="linenum">2036</span></a>  <span class="comment">     */</span>
<a name="l2037"><span class="linenum">2037</span></a>      public function <a class="function" onClick="logFunction('__get')" href="../../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>) {
<a name="l2038"><span class="linenum">2038</span></a>          if (<a class="phpfunction" onClick="logFunction('method_exists')" href="../../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, 'get_'.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>)) {
<a name="l2039"><span class="linenum">2039</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;{'get_'.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>}();
<a name="l2040"><span class="linenum">2040</span></a>          }
<a name="l2041"><span class="linenum">2041</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;{<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>};
<a name="l2042"><span class="linenum">2042</span></a>      }
<a name="l2043"><span class="linenum">2043</span></a>  
<a name="l2044"><span class="linenum">2044</span></a>      <span class="comment">/**</span>
<a name="l2045"><span class="linenum">2045</span></a>  <span class="comment">     * Stupid PHP needs an isset magic method if you use the get magic method and</span>
<a name="l2046"><span class="linenum">2046</span></a>  <span class="comment">     * still want empty calls to work.... blah ~!</span>
<a name="l2047"><span class="linenum">2047</span></a>  <span class="comment">     *</span>
<a name="l2048"><span class="linenum">2048</span></a>  <span class="comment">     * @param string $key</span>
<a name="l2049"><span class="linenum">2049</span></a>  <span class="comment">     * @return bool</span>
<a name="l2050"><span class="linenum">2050</span></a>  <span class="comment">     */</span>
<a name="l2051"><span class="linenum">2051</span></a>      public function <a class="function" onClick="logFunction('__isset')" href="../../_functions/__isset.html" onMouseOver="funcPopup(event,'__isset')">__isset</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>) {
<a name="l2052"><span class="linenum">2052</span></a>          if (<a class="phpfunction" onClick="logFunction('method_exists')" href="../../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, 'get_'.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>)) {
<a name="l2053"><span class="linenum">2053</span></a>              <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;{'get_'.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>}();
<a name="l2054"><span class="linenum">2054</span></a>              return !empty(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>);
<a name="l2055"><span class="linenum">2055</span></a>          }
<a name="l2056"><span class="linenum">2056</span></a>          return !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;{<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>});
<a name="l2057"><span class="linenum">2057</span></a>      }
<a name="l2058"><span class="linenum">2058</span></a>  
<a name="l2059"><span class="linenum">2059</span></a>  <span class="comment">    //NOTE: E_STRICT does not allow to change function signature!</span>
<a name="l2060"><span class="linenum">2060</span></a>  
<a name="l2061"><span class="linenum">2061</span></a>      <span class="comment">/**</span>
<a name="l2062"><span class="linenum">2062</span></a>  <span class="comment">     * If implemented should create a new instance, save it in the DB and return it</span>
<a name="l2063"><span class="linenum">2063</span></a>  <span class="comment">     */</span>
<a name="l2064"><span class="linenum">2064</span></a>  <span class="comment">    //public static function create() {}</span>
<a name="l2065"><span class="linenum">2065</span></a>      <span class="comment">/**</span>
<a name="l2066"><span class="linenum">2066</span></a>  <span class="comment">     * If implemented should load an instance from the DB and return it</span>
<a name="l2067"><span class="linenum">2067</span></a>  <span class="comment">     */</span>
<a name="l2068"><span class="linenum">2068</span></a>  <span class="comment">    //public static function load() {}</span>
<a name="l2069"><span class="linenum">2069</span></a>      <span class="comment">/**</span>
<a name="l2070"><span class="linenum">2070</span></a>  <span class="comment">     * Fetches all of the properties of the object</span>
<a name="l2071"><span class="linenum">2071</span></a>  <span class="comment">     * @return stdClass</span>
<a name="l2072"><span class="linenum">2072</span></a>  <span class="comment">     */</span>
<a name="l2073"><span class="linenum">2073</span></a>      public function <a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>() {
<a name="l2074"><span class="linenum">2074</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>;
<a name="l2075"><span class="linenum">2075</span></a>      }
<a name="l2076"><span class="linenum">2076</span></a>  }
<a name="l2077"><span class="linenum">2077</span></a>  
<a name="l2078"><span class="linenum">2078</span></a>  
<a name="l2079"><span class="linenum">2079</span></a>  <span class="comment">/**</span>
<a name="l2080"><span class="linenum">2080</span></a>  <span class="comment"> * Abstract class representation of a page associated with a lesson.</span>
<a name="l2081"><span class="linenum">2081</span></a>  <span class="comment"> *</span>
<a name="l2082"><span class="linenum">2082</span></a>  <span class="comment"> * This class should MUST be extended by all specialised page types defined in</span>
<a name="l2083"><span class="linenum">2083</span></a>  <span class="comment"> * mod/lesson/pagetypes/.</span>
<a name="l2084"><span class="linenum">2084</span></a>  <span class="comment"> * There are a handful of abstract methods that need to be defined as well as</span>
<a name="l2085"><span class="linenum">2085</span></a>  <span class="comment"> * severl methods that can optionally be defined in order to make the page type</span>
<a name="l2086"><span class="linenum">2086</span></a>  <span class="comment"> * operate in the desired way</span>
<a name="l2087"><span class="linenum">2087</span></a>  <span class="comment"> *</span>
<a name="l2088"><span class="linenum">2088</span></a>  <span class="comment"> * Database properties</span>
<a name="l2089"><span class="linenum">2089</span></a>  <span class="comment"> * @property int $id The id of this lesson page</span>
<a name="l2090"><span class="linenum">2090</span></a>  <span class="comment"> * @property int $lessonid The id of the lesson this page belongs to</span>
<a name="l2091"><span class="linenum">2091</span></a>  <span class="comment"> * @property int $prevpageid The id of the page before this one</span>
<a name="l2092"><span class="linenum">2092</span></a>  <span class="comment"> * @property int $nextpageid The id of the next page in the page sequence</span>
<a name="l2093"><span class="linenum">2093</span></a>  <span class="comment"> * @property int $qtype Identifies the page type of this page</span>
<a name="l2094"><span class="linenum">2094</span></a>  <span class="comment"> * @property int $qoption Used to record page type specific options</span>
<a name="l2095"><span class="linenum">2095</span></a>  <span class="comment"> * @property int $layout Used to record page specific layout selections</span>
<a name="l2096"><span class="linenum">2096</span></a>  <span class="comment"> * @property int $display Used to record page specific display selections</span>
<a name="l2097"><span class="linenum">2097</span></a>  <span class="comment"> * @property int $timecreated Timestamp for when the page was created</span>
<a name="l2098"><span class="linenum">2098</span></a>  <span class="comment"> * @property int $timemodified Timestamp for when the page was last modified</span>
<a name="l2099"><span class="linenum">2099</span></a>  <span class="comment"> * @property string $title The title of this page</span>
<a name="l2100"><span class="linenum">2100</span></a>  <span class="comment"> * @property string $contents The rich content shown to describe the page</span>
<a name="l2101"><span class="linenum">2101</span></a>  <span class="comment"> * @property int $contentsformat The format of the contents field</span>
<a name="l2102"><span class="linenum">2102</span></a>  <span class="comment"> *</span>
<a name="l2103"><span class="linenum">2103</span></a>  <span class="comment"> * Calculated properties</span>
<a name="l2104"><span class="linenum">2104</span></a>  <span class="comment"> * @property-read array $answers An array of answers for this page</span>
<a name="l2105"><span class="linenum">2105</span></a>  <span class="comment"> * @property-read bool $displayinmenublock Toggles display in the left menu block</span>
<a name="l2106"><span class="linenum">2106</span></a>  <span class="comment"> * @property-read array $jumps An array containing all the jumps this page uses</span>
<a name="l2107"><span class="linenum">2107</span></a>  <span class="comment"> * @property-read lesson $lesson The lesson this page belongs to</span>
<a name="l2108"><span class="linenum">2108</span></a>  <span class="comment"> * @property-read int $type The type of the page [question | structure]</span>
<a name="l2109"><span class="linenum">2109</span></a>  <span class="comment"> * @property-read typeid The unique identifier for the page type</span>
<a name="l2110"><span class="linenum">2110</span></a>  <span class="comment"> * @property-read typestring The string that describes this page type</span>
<a name="l2111"><span class="linenum">2111</span></a>  <span class="comment"> *</span>
<a name="l2112"><span class="linenum">2112</span></a>  <span class="comment"> * @abstract</span>
<a name="l2113"><span class="linenum">2113</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l2114"><span class="linenum">2114</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l2115"><span class="linenum">2115</span></a>  <span class="comment"> */</span>
<a name="l2116"><span class="linenum">2116</span></a>  abstract class lesson_page extends lesson_base {
<a name="l2117"><span class="linenum">2117</span></a>  
<a name="l2118"><span class="linenum">2118</span></a>      <span class="comment">/**</span>
<a name="l2119"><span class="linenum">2119</span></a>  <span class="comment">     * A reference to the lesson this page belongs to</span>
<a name="l2120"><span class="linenum">2120</span></a>  <span class="comment">     * @var lesson</span>
<a name="l2121"><span class="linenum">2121</span></a>  <span class="comment">     */</span>
<a name="l2122"><span class="linenum">2122</span></a>      protected <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a> = null;
<a name="l2123"><span class="linenum">2123</span></a>      <span class="comment">/**</span>
<a name="l2124"><span class="linenum">2124</span></a>  <span class="comment">     * Contains the answers to this lesson_page once loaded</span>
<a name="l2125"><span class="linenum">2125</span></a>  <span class="comment">     * @var null|array</span>
<a name="l2126"><span class="linenum">2126</span></a>  <span class="comment">     */</span>
<a name="l2127"><span class="linenum">2127</span></a>      protected <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = null;
<a name="l2128"><span class="linenum">2128</span></a>      <span class="comment">/**</span>
<a name="l2129"><span class="linenum">2129</span></a>  <span class="comment">     * This sets the type of the page, can be one of the constants defined below</span>
<a name="l2130"><span class="linenum">2130</span></a>  <span class="comment">     * @var int</span>
<a name="l2131"><span class="linenum">2131</span></a>  <span class="comment">     */</span>
<a name="l2132"><span class="linenum">2132</span></a>      protected <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 0;
<a name="l2133"><span class="linenum">2133</span></a>  
<a name="l2134"><span class="linenum">2134</span></a>      <span class="comment">/**</span>
<a name="l2135"><span class="linenum">2135</span></a>  <span class="comment">     * Constants used to identify the type of the page</span>
<a name="l2136"><span class="linenum">2136</span></a>  <span class="comment">     */</span>
<a name="l2137"><span class="linenum">2137</span></a>      const TYPE_QUESTION = 0;
<a name="l2138"><span class="linenum">2138</span></a>      const TYPE_STRUCTURE = 1;
<a name="l2139"><span class="linenum">2139</span></a>  
<a name="l2140"><span class="linenum">2140</span></a>      <span class="comment">/**</span>
<a name="l2141"><span class="linenum">2141</span></a>  <span class="comment">     * This method should return the integer used to identify the page type within</span>
<a name="l2142"><span class="linenum">2142</span></a>  <span class="comment">     * the database and throughout code. This maps back to the defines used in 1.x</span>
<a name="l2143"><span class="linenum">2143</span></a>  <span class="comment">     * @abstract</span>
<a name="l2144"><span class="linenum">2144</span></a>  <span class="comment">     * @return int</span>
<a name="l2145"><span class="linenum">2145</span></a>  <span class="comment">     */</span>
<a name="l2146"><span class="linenum">2146</span></a>      abstract protected function <a class="function" onClick="logFunction('get_typeid')" href="../../_functions/get_typeid.html" onMouseOver="funcPopup(event,'get_typeid')">get_typeid</a>();
<a name="l2147"><span class="linenum">2147</span></a>      <span class="comment">/**</span>
<a name="l2148"><span class="linenum">2148</span></a>  <span class="comment">     * This method should return the string that describes the pagetype</span>
<a name="l2149"><span class="linenum">2149</span></a>  <span class="comment">     * @abstract</span>
<a name="l2150"><span class="linenum">2150</span></a>  <span class="comment">     * @return string</span>
<a name="l2151"><span class="linenum">2151</span></a>  <span class="comment">     */</span>
<a name="l2152"><span class="linenum">2152</span></a>      abstract protected function <a class="function" onClick="logFunction('get_typestring')" href="../../_functions/get_typestring.html" onMouseOver="funcPopup(event,'get_typestring')">get_typestring</a>();
<a name="l2153"><span class="linenum">2153</span></a>  
<a name="l2154"><span class="linenum">2154</span></a>      <span class="comment">/**</span>
<a name="l2155"><span class="linenum">2155</span></a>  <span class="comment">     * This method gets called to display the page to the user taking the lesson</span>
<a name="l2156"><span class="linenum">2156</span></a>  <span class="comment">     * @abstract</span>
<a name="l2157"><span class="linenum">2157</span></a>  <span class="comment">     * @param object $renderer</span>
<a name="l2158"><span class="linenum">2158</span></a>  <span class="comment">     * @param object $attempt</span>
<a name="l2159"><span class="linenum">2159</span></a>  <span class="comment">     * @return string</span>
<a name="l2160"><span class="linenum">2160</span></a>  <span class="comment">     */</span>
<a name="l2161"><span class="linenum">2161</span></a>      abstract public function <a class="function" onClick="logFunction('display')" href="../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>(<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('renderer')" href="../../_variables/renderer.html">$renderer</a>, <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>);
<a name="l2162"><span class="linenum">2162</span></a>  
<a name="l2163"><span class="linenum">2163</span></a>      <span class="comment">/**</span>
<a name="l2164"><span class="linenum">2164</span></a>  <span class="comment">     * Creates a new lesson_page within the database and returns the correct pagetype</span>
<a name="l2165"><span class="linenum">2165</span></a>  <span class="comment">     * object to use to interact with the new lesson</span>
<a name="l2166"><span class="linenum">2166</span></a>  <span class="comment">     *</span>
<a name="l2167"><span class="linenum">2167</span></a>  <span class="comment">     * @final</span>
<a name="l2168"><span class="linenum">2168</span></a>  <span class="comment">     * @static</span>
<a name="l2169"><span class="linenum">2169</span></a>  <span class="comment">     * @param object $properties</span>
<a name="l2170"><span class="linenum">2170</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l2171"><span class="linenum">2171</span></a>  <span class="comment">     * @return lesson_page Specialised object that extends lesson_page</span>
<a name="l2172"><span class="linenum">2172</span></a>  <span class="comment">     */</span>
<a name="l2173"><span class="linenum">2173</span></a>      final public static function <a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>, lesson <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>) {
<a name="l2174"><span class="linenum">2174</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2175"><span class="linenum">2175</span></a>          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a> = new stdClass;
<a name="l2176"><span class="linenum">2176</span></a>          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('title')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('title')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/title.html">title</a>;
<a name="l2177"><span class="linenum">2177</span></a>          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('contents')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/contents.html">contents</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('contents_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/contents_editor.html">contents_editor</a>['text'];
<a name="l2178"><span class="linenum">2178</span></a>          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('contentsformat')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/contentsformat.html">contentsformat</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('contents_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/contents_editor.html">contents_editor</a>['format'];
<a name="l2179"><span class="linenum">2179</span></a>          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('lessonid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2180"><span class="linenum">2180</span></a>          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('timecreated')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2181"><span class="linenum">2181</span></a>          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('qtype')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('qtype')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>;
<a name="l2182"><span class="linenum">2182</span></a>          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('qoption')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/qoption.html">qoption</a> = (isset(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('qoption')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/qoption.html">qoption</a>))?1:0;
<a name="l2183"><span class="linenum">2183</span></a>          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('layout')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/layout.html">layout</a> = (isset(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('layout')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/layout.html">layout</a>))?1:0;
<a name="l2184"><span class="linenum">2184</span></a>          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('display')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/display.html">display</a> = (isset(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('display')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/display.html">display</a>))?1:0;
<a name="l2185"><span class="linenum">2185</span></a>          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> = 0; <span class="comment">// this is a first page</span>
<a name="l2186"><span class="linenum">2186</span></a>          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = 0; <span class="comment">// this is the only page</span>
<a name="l2187"><span class="linenum">2187</span></a>  
<a name="l2188"><span class="linenum">2188</span></a>          if (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('pageid')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>) {
<a name="l2189"><span class="linenum">2189</span></a>              <a class="var it20913" onMouseOver="hilite(20913)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;lesson_pages&quot;, array(&quot;id&quot; =&gt; <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('pageid')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>), 'id, nextpageid');
<a name="l2190"><span class="linenum">2190</span></a>              if (!<a class="var it20913" onMouseOver="hilite(20913)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>) {
<a name="l2191"><span class="linenum">2191</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindpages', 'lesson');
<a name="l2192"><span class="linenum">2192</span></a>              }
<a name="l2193"><span class="linenum">2193</span></a>              <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> = <a class="var it20913" onMouseOver="hilite(20913)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>-&gt;<a onClick="logVariable('id')" class="var it44787" onMouseOver="hilite(44787)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2194"><span class="linenum">2194</span></a>              <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = <a class="var it20913" onMouseOver="hilite(20913)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it44787" onMouseOver="hilite(44787)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a>;
<a name="l2195"><span class="linenum">2195</span></a>          } else {
<a name="l2196"><span class="linenum">2196</span></a>              <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lesson_pages', array('lessonid'=&gt;<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'prevpageid'=&gt;0), 'id');
<a name="l2197"><span class="linenum">2197</span></a>              if (<a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>) {
<a name="l2198"><span class="linenum">2198</span></a>  <span class="comment">                // This is the first page, there are existing pages put this at the start</span>
<a name="l2199"><span class="linenum">2199</span></a>                  <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it44783" onMouseOver="hilite(44783)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2200"><span class="linenum">2200</span></a>              }
<a name="l2201"><span class="linenum">2201</span></a>          }
<a name="l2202"><span class="linenum">2202</span></a>  
<a name="l2203"><span class="linenum">2203</span></a>          <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('id')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_pages&quot;, <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>);
<a name="l2204"><span class="linenum">2204</span></a>  
<a name="l2205"><span class="linenum">2205</span></a>          <a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a> = new stdClass;
<a name="l2206"><span class="linenum">2206</span></a>          <a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>-&gt;<a onClick="logVariable('id')" class="var it44788" onMouseOver="hilite(44788)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('id')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2207"><span class="linenum">2207</span></a>          <a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>-&gt;<a onClick="logVariable('contents_editor')" class="var it44788" onMouseOver="hilite(44788)" onMouseOut="lolite()" href="../../_variables/contents_editor.html">contents_editor</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('contents_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/contents_editor.html">contents_editor</a>;
<a name="l2208"><span class="linenum">2208</span></a>          <a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a> = <a class="function" onClick="logFunction('file_postupdate_standard_editor')" href="../../_functions/file_postupdate_standard_editor.html" onMouseOver="funcPopup(event,'file_postupdate_standard_editor')">file_postupdate_standard_editor</a>(<a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>, 'contents', array('noclean'=&gt;true, 'maxfiles'=&gt;<a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes'=&gt;<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>), <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, 'mod_lesson', 'page_contents', <a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>-&gt;<a onClick="logVariable('id')" class="var it44788" onMouseOver="hilite(44788)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2209"><span class="linenum">2209</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(&quot;lesson_pages&quot;, <a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>);
<a name="l2210"><span class="linenum">2210</span></a>  
<a name="l2211"><span class="linenum">2211</span></a>          if (<a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> &gt; 0) {
<a name="l2212"><span class="linenum">2212</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;nextpageid&quot;, <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('id')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array(&quot;id&quot; =&gt; <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a>));
<a name="l2213"><span class="linenum">2213</span></a>          }
<a name="l2214"><span class="linenum">2214</span></a>          if (<a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> &gt; 0) {
<a name="l2215"><span class="linenum">2215</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;prevpageid&quot;, <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('id')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array(&quot;id&quot; =&gt; <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a>));
<a name="l2216"><span class="linenum">2216</span></a>          }
<a name="l2217"><span class="linenum">2217</span></a>  
<a name="l2218"><span class="linenum">2218</span></a>          <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = lesson_page::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l2219"><span class="linenum">2219</span></a>          <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('create_answers')" href="../../_functions/create_answers.html" onMouseOver="funcPopup(event,'create_answers')">create_answers</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>);
<a name="l2220"><span class="linenum">2220</span></a>  
<a name="l2221"><span class="linenum">2221</span></a>  <span class="comment">        // Trigger an event: page created.</span>
<a name="l2222"><span class="linenum">2222</span></a>          <a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a> = array(
<a name="l2223"><span class="linenum">2223</span></a>              'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l2224"><span class="linenum">2224</span></a>              'objectid' =&gt; <a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('id')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2225"><span class="linenum">2225</span></a>              'other' =&gt; array(
<a name="l2226"><span class="linenum">2226</span></a>                  'pagetype' =&gt; <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('get_typestring')" href="../../_functions/get_typestring.html" onMouseOver="funcPopup(event,'get_typestring')">get_typestring</a>()
<a name="l2227"><span class="linenum">2227</span></a>                  )
<a name="l2228"><span class="linenum">2228</span></a>              );
<a name="l2229"><span class="linenum">2229</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('page_created')" href="../../_classes/page_created.html" onMouseOver="classPopup(event,'page_created')">page_created</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a>);
<a name="l2230"><span class="linenum">2230</span></a>          <a class="var it20914" onMouseOver="hilite(20914)" onMouseOut="lolite()" onClick="logVariable('snapshot')" href="../../_variables/snapshot.html">$snapshot</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>);
<a name="l2231"><span class="linenum">2231</span></a>          <a class="var it20914" onMouseOver="hilite(20914)" onMouseOut="lolite()" onClick="logVariable('snapshot')" href="../../_variables/snapshot.html">$snapshot</a>-&gt;<a onClick="logVariable('timemodified')" class="var it44789" onMouseOver="hilite(44789)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = 0;
<a name="l2232"><span class="linenum">2232</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('lesson_pages', <a class="var it20914" onMouseOver="hilite(20914)" onMouseOut="lolite()" onClick="logVariable('snapshot')" href="../../_variables/snapshot.html">$snapshot</a>);
<a name="l2233"><span class="linenum">2233</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2234"><span class="linenum">2234</span></a>  
<a name="l2235"><span class="linenum">2235</span></a>          <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('add_message')" href="../../_functions/add_message.html" onMouseOver="funcPopup(event,'add_message')">add_message</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('insertedpage', 'lesson').': '.<a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it10654" onMouseOver="hilite(10654)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('title')" class="var it44767" onMouseOver="hilite(44767)" onMouseOut="lolite()" href="../../_variables/title.html">title</a>, true), 'notifysuccess');
<a name="l2236"><span class="linenum">2236</span></a>  
<a name="l2237"><span class="linenum">2237</span></a>          return <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>;
<a name="l2238"><span class="linenum">2238</span></a>      }
<a name="l2239"><span class="linenum">2239</span></a>  
<a name="l2240"><span class="linenum">2240</span></a>      <span class="comment">/**</span>
<a name="l2241"><span class="linenum">2241</span></a>  <span class="comment">     * This method loads a page object from the database and returns it as a</span>
<a name="l2242"><span class="linenum">2242</span></a>  <span class="comment">     * specialised object that extends lesson_page</span>
<a name="l2243"><span class="linenum">2243</span></a>  <span class="comment">     *</span>
<a name="l2244"><span class="linenum">2244</span></a>  <span class="comment">     * @final</span>
<a name="l2245"><span class="linenum">2245</span></a>  <span class="comment">     * @static</span>
<a name="l2246"><span class="linenum">2246</span></a>  <span class="comment">     * @param int $id</span>
<a name="l2247"><span class="linenum">2247</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l2248"><span class="linenum">2248</span></a>  <span class="comment">     * @return lesson_page Specialised lesson_page object</span>
<a name="l2249"><span class="linenum">2249</span></a>  <span class="comment">     */</span>
<a name="l2250"><span class="linenum">2250</span></a>      final public static function <a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>, lesson <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l2251"><span class="linenum">2251</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2252"><span class="linenum">2252</span></a>  
<a name="l2253"><span class="linenum">2253</span></a>          if (<a class="phpfunction" onClick="logFunction('is_object')" href="../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) &amp;&amp; !empty(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>-&gt;<a onClick="logVariable('qtype')" class="var it44790" onMouseOver="hilite(44790)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>)) {
<a name="l2254"><span class="linenum">2254</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>;
<a name="l2255"><span class="linenum">2255</span></a>          } else {
<a name="l2256"><span class="linenum">2256</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;lesson_pages&quot;, array(&quot;id&quot; =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l2257"><span class="linenum">2257</span></a>              if (!<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l2258"><span class="linenum">2258</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindpages', 'lesson');
<a name="l2259"><span class="linenum">2259</span></a>              }
<a name="l2260"><span class="linenum">2260</span></a>          }
<a name="l2261"><span class="linenum">2261</span></a>          <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a> = <a class="class" onClick="logClass('lesson_page_type_manager')" href="../../_classes/lesson_page_type_manager.html" onMouseOver="classPopup(event,'lesson_page_type_manager')">lesson_page_type_manager</a>::<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l2262"><span class="linenum">2262</span></a>  
<a name="l2263"><span class="linenum">2263</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'lesson_page_type_'.<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a>-&gt;<a class="function" onClick="logFunction('get_page_type_idstring')" href="../../_functions/get_page_type_idstring.html" onMouseOver="funcPopup(event,'get_page_type_idstring')">get_page_type_idstring</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('qtype')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>);
<a name="l2264"><span class="linenum">2264</span></a>          if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>)) {
<a name="l2265"><span class="linenum">2265</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'lesson_page';
<a name="l2266"><span class="linenum">2266</span></a>          }
<a name="l2267"><span class="linenum">2267</span></a>  
<a name="l2268"><span class="linenum">2268</span></a>          return new <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l2269"><span class="linenum">2269</span></a>      }
<a name="l2270"><span class="linenum">2270</span></a>  
<a name="l2271"><span class="linenum">2271</span></a>      <span class="comment">/**</span>
<a name="l2272"><span class="linenum">2272</span></a>  <span class="comment">     * Deletes a lesson_page from the database as well as any associated records.</span>
<a name="l2273"><span class="linenum">2273</span></a>  <span class="comment">     * @final</span>
<a name="l2274"><span class="linenum">2274</span></a>  <span class="comment">     * @return bool</span>
<a name="l2275"><span class="linenum">2275</span></a>  <span class="comment">     */</span>
<a name="l2276"><span class="linenum">2276</span></a>      final public function <a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>() {
<a name="l2277"><span class="linenum">2277</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2278"><span class="linenum">2278</span></a>  
<a name="l2279"><span class="linenum">2279</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;course);
<a name="l2280"><span class="linenum">2280</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2281"><span class="linenum">2281</span></a>  
<a name="l2282"><span class="linenum">2282</span></a>  <span class="comment">        // Delete files associated with attempts.</span>
<a name="l2283"><span class="linenum">2283</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2284"><span class="linenum">2284</span></a>          if (<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_attempts', array(&quot;pageid&quot; =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id))) {
<a name="l2285"><span class="linenum">2285</span></a>              foreach (<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> as <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>) {
<a name="l2286"><span class="linenum">2286</span></a>                  <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'essay_responses', <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('id')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2287"><span class="linenum">2287</span></a>              }
<a name="l2288"><span class="linenum">2288</span></a>          }
<a name="l2289"><span class="linenum">2289</span></a>  
<a name="l2290"><span class="linenum">2290</span></a>  <span class="comment">        // Then delete all the associated records...</span>
<a name="l2291"><span class="linenum">2291</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_attempts&quot;, array(&quot;pageid&quot; =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l2292"><span class="linenum">2292</span></a>  
<a name="l2293"><span class="linenum">2293</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_branch&quot;, array(&quot;pageid&quot; =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l2294"><span class="linenum">2294</span></a>  <span class="comment">        // ...now delete the answers...</span>
<a name="l2295"><span class="linenum">2295</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_answers&quot;, array(&quot;pageid&quot; =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l2296"><span class="linenum">2296</span></a>  <span class="comment">        // ..and the page itself</span>
<a name="l2297"><span class="linenum">2297</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_pages&quot;, array(&quot;id&quot; =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l2298"><span class="linenum">2298</span></a>  
<a name="l2299"><span class="linenum">2299</span></a>  <span class="comment">        // Trigger an event: page deleted.</span>
<a name="l2300"><span class="linenum">2300</span></a>          <a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a> = array(
<a name="l2301"><span class="linenum">2301</span></a>              'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l2302"><span class="linenum">2302</span></a>              'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id,
<a name="l2303"><span class="linenum">2303</span></a>              'other' =&gt; array(
<a name="l2304"><span class="linenum">2304</span></a>                  'pagetype' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_typestring')" href="../../_functions/get_typestring.html" onMouseOver="funcPopup(event,'get_typestring')">get_typestring</a>()
<a name="l2305"><span class="linenum">2305</span></a>                  )
<a name="l2306"><span class="linenum">2306</span></a>              );
<a name="l2307"><span class="linenum">2307</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('page_deleted')" href="../../_classes/page_deleted.html" onMouseOver="classPopup(event,'page_deleted')">page_deleted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a>);
<a name="l2308"><span class="linenum">2308</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('lesson_pages', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>);
<a name="l2309"><span class="linenum">2309</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2310"><span class="linenum">2310</span></a>  
<a name="l2311"><span class="linenum">2311</span></a>  <span class="comment">        // Delete files associated with this page.</span>
<a name="l2312"><span class="linenum">2312</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'page_contents', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id);
<a name="l2313"><span class="linenum">2313</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'page_answers', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id);
<a name="l2314"><span class="linenum">2314</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'page_responses', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id);
<a name="l2315"><span class="linenum">2315</span></a>  
<a name="l2316"><span class="linenum">2316</span></a>  <span class="comment">        // repair the hole in the linkage</span>
<a name="l2317"><span class="linenum">2317</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;prevpageid &amp;&amp; !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid) {
<a name="l2318"><span class="linenum">2318</span></a>  <span class="comment">            //This is the only page, no repair needed</span>
<a name="l2319"><span class="linenum">2319</span></a>          } elseif (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;prevpageid) {
<a name="l2320"><span class="linenum">2320</span></a>  <span class="comment">            // this is the first page...</span>
<a name="l2321"><span class="linenum">2321</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;<a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid);
<a name="l2322"><span class="linenum">2322</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('move')" href="../../_functions/move.html" onMouseOver="funcPopup(event,'move')">move</a>(null, 0);
<a name="l2323"><span class="linenum">2323</span></a>          } elseif (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid) {
<a name="l2324"><span class="linenum">2324</span></a>  <span class="comment">            // this is the last page...</span>
<a name="l2325"><span class="linenum">2325</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;<a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;prevpageid);
<a name="l2326"><span class="linenum">2326</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('move')" href="../../_functions/move.html" onMouseOver="funcPopup(event,'move')">move</a>(0);
<a name="l2327"><span class="linenum">2327</span></a>          } else {
<a name="l2328"><span class="linenum">2328</span></a>  <span class="comment">            // page is in the middle...</span>
<a name="l2329"><span class="linenum">2329</span></a>              <a class="var it20913" onMouseOver="hilite(20913)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;<a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;prevpageid);
<a name="l2330"><span class="linenum">2330</span></a>              <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;<a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid);
<a name="l2331"><span class="linenum">2331</span></a>  
<a name="l2332"><span class="linenum">2332</span></a>              <a class="var it20913" onMouseOver="hilite(20913)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>-&gt;<a class="function" onClick="logFunction('move')" href="../../_functions/move.html" onMouseOver="funcPopup(event,'move')">move</a>(<a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it44783" onMouseOver="hilite(44783)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2333"><span class="linenum">2333</span></a>              <a class="var it6241" onMouseOver="hilite(6241)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a class="function" onClick="logFunction('move')" href="../../_functions/move.html" onMouseOver="funcPopup(event,'move')">move</a>(null, <a class="var it20913" onMouseOver="hilite(20913)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>-&gt;<a onClick="logVariable('id')" class="var it44787" onMouseOver="hilite(44787)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2334"><span class="linenum">2334</span></a>          }
<a name="l2335"><span class="linenum">2335</span></a>          return true;
<a name="l2336"><span class="linenum">2336</span></a>      }
<a name="l2337"><span class="linenum">2337</span></a>  
<a name="l2338"><span class="linenum">2338</span></a>      <span class="comment">/**</span>
<a name="l2339"><span class="linenum">2339</span></a>  <span class="comment">     * Moves a page by updating its nextpageid and prevpageid values within</span>
<a name="l2340"><span class="linenum">2340</span></a>  <span class="comment">     * the database</span>
<a name="l2341"><span class="linenum">2341</span></a>  <span class="comment">     *</span>
<a name="l2342"><span class="linenum">2342</span></a>  <span class="comment">     * @final</span>
<a name="l2343"><span class="linenum">2343</span></a>  <span class="comment">     * @param int $nextpageid</span>
<a name="l2344"><span class="linenum">2344</span></a>  <span class="comment">     * @param int $prevpageid</span>
<a name="l2345"><span class="linenum">2345</span></a>  <span class="comment">     */</span>
<a name="l2346"><span class="linenum">2346</span></a>      final public function <a class="function" onClick="logFunction('move')" href="../../_functions/move.html" onMouseOver="funcPopup(event,'move')">move</a>(<a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('nextpageid')" href="../../_variables/nextpageid.html">$nextpageid</a>=null, <a class="var it9380" onMouseOver="hilite(9380)" onMouseOut="lolite()" onClick="logVariable('prevpageid')" href="../../_variables/prevpageid.html">$prevpageid</a>=null) {
<a name="l2347"><span class="linenum">2347</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2348"><span class="linenum">2348</span></a>          if (<a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('nextpageid')" href="../../_variables/nextpageid.html">$nextpageid</a> === null) {
<a name="l2349"><span class="linenum">2349</span></a>              <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('nextpageid')" href="../../_variables/nextpageid.html">$nextpageid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid;
<a name="l2350"><span class="linenum">2350</span></a>          }
<a name="l2351"><span class="linenum">2351</span></a>          if (<a class="var it9380" onMouseOver="hilite(9380)" onMouseOut="lolite()" onClick="logVariable('prevpageid')" href="../../_variables/prevpageid.html">$prevpageid</a> === null) {
<a name="l2352"><span class="linenum">2352</span></a>              <a class="var it9380" onMouseOver="hilite(9380)" onMouseOut="lolite()" onClick="logVariable('prevpageid')" href="../../_variables/prevpageid.html">$prevpageid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;prevpageid;
<a name="l2353"><span class="linenum">2353</span></a>          }
<a name="l2354"><span class="linenum">2354</span></a>          <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a> = new stdClass;
<a name="l2355"><span class="linenum">2355</span></a>          <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('id')" class="var it43038" onMouseOver="hilite(43038)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l2356"><span class="linenum">2356</span></a>          <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it43038" onMouseOver="hilite(43038)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> = <a class="var it9380" onMouseOver="hilite(9380)" onMouseOut="lolite()" onClick="logVariable('prevpageid')" href="../../_variables/prevpageid.html">$prevpageid</a>;
<a name="l2357"><span class="linenum">2357</span></a>          <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it43038" onMouseOver="hilite(43038)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = <a class="var it1239" onMouseOver="hilite(1239)" onMouseOut="lolite()" onClick="logVariable('nextpageid')" href="../../_variables/nextpageid.html">$nextpageid</a>;
<a name="l2358"><span class="linenum">2358</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('lesson_pages', <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>);
<a name="l2359"><span class="linenum">2359</span></a>      }
<a name="l2360"><span class="linenum">2360</span></a>  
<a name="l2361"><span class="linenum">2361</span></a>      <span class="comment">/**</span>
<a name="l2362"><span class="linenum">2362</span></a>  <span class="comment">     * Returns the answers that are associated with this page in the database</span>
<a name="l2363"><span class="linenum">2363</span></a>  <span class="comment">     *</span>
<a name="l2364"><span class="linenum">2364</span></a>  <span class="comment">     * @final</span>
<a name="l2365"><span class="linenum">2365</span></a>  <span class="comment">     * @return array</span>
<a name="l2366"><span class="linenum">2366</span></a>  <span class="comment">     */</span>
<a name="l2367"><span class="linenum">2367</span></a>      final public function <a class="function" onClick="logFunction('get_answers')" href="../../_functions/get_answers.html" onMouseOver="funcPopup(event,'get_answers')">get_answers</a>() {
<a name="l2368"><span class="linenum">2368</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2369"><span class="linenum">2369</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a> === null) {
<a name="l2370"><span class="linenum">2370</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a> = array();
<a name="l2371"><span class="linenum">2371</span></a>              <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_answers', array('pageid'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, 'lessonid'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id), 'id');
<a name="l2372"><span class="linenum">2372</span></a>              if (!<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>) {
<a name="l2373"><span class="linenum">2373</span></a>  <span class="comment">                // It is possible that a lesson upgraded from Moodle 1.9 still</span>
<a name="l2374"><span class="linenum">2374</span></a>  <span class="comment">                // contains questions without any answers [MDL-25632].</span>
<a name="l2375"><span class="linenum">2375</span></a>  <span class="comment">                // debugging(get_string('cannotfindanswer', 'lesson'));</span>
<a name="l2376"><span class="linenum">2376</span></a>                  return array();
<a name="l2377"><span class="linenum">2377</span></a>              }
<a name="l2378"><span class="linenum">2378</span></a>              foreach (<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> as <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>) {
<a name="l2379"><span class="linenum">2379</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>)] = <span class="keyword">new </span><a class="class" onClick="logClass('lesson_page_answer')" href="../../_classes/lesson_page_answer.html" onMouseOver="classPopup(event,'lesson_page_answer')">lesson_page_answer</a>(<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l2380"><span class="linenum">2380</span></a>              }
<a name="l2381"><span class="linenum">2381</span></a>          }
<a name="l2382"><span class="linenum">2382</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>;
<a name="l2383"><span class="linenum">2383</span></a>      }
<a name="l2384"><span class="linenum">2384</span></a>  
<a name="l2385"><span class="linenum">2385</span></a>      <span class="comment">/**</span>
<a name="l2386"><span class="linenum">2386</span></a>  <span class="comment">     * Returns the lesson this page is associated with</span>
<a name="l2387"><span class="linenum">2387</span></a>  <span class="comment">     * @final</span>
<a name="l2388"><span class="linenum">2388</span></a>  <span class="comment">     * @return lesson</span>
<a name="l2389"><span class="linenum">2389</span></a>  <span class="comment">     */</span>
<a name="l2390"><span class="linenum">2390</span></a>      final protected function <a class="function" onClick="logFunction('get_lesson')" href="../../_functions/get_lesson.html" onMouseOver="funcPopup(event,'get_lesson')">get_lesson</a>() {
<a name="l2391"><span class="linenum">2391</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>;
<a name="l2392"><span class="linenum">2392</span></a>      }
<a name="l2393"><span class="linenum">2393</span></a>  
<a name="l2394"><span class="linenum">2394</span></a>      <span class="comment">/**</span>
<a name="l2395"><span class="linenum">2395</span></a>  <span class="comment">     * Returns the type of page this is. Not to be confused with page type</span>
<a name="l2396"><span class="linenum">2396</span></a>  <span class="comment">     * @final</span>
<a name="l2397"><span class="linenum">2397</span></a>  <span class="comment">     * @return int</span>
<a name="l2398"><span class="linenum">2398</span></a>  <span class="comment">     */</span>
<a name="l2399"><span class="linenum">2399</span></a>      final protected function <a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>() {
<a name="l2400"><span class="linenum">2400</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>;
<a name="l2401"><span class="linenum">2401</span></a>      }
<a name="l2402"><span class="linenum">2402</span></a>  
<a name="l2403"><span class="linenum">2403</span></a>      <span class="comment">/**</span>
<a name="l2404"><span class="linenum">2404</span></a>  <span class="comment">     * Records an attempt at this page</span>
<a name="l2405"><span class="linenum">2405</span></a>  <span class="comment">     *</span>
<a name="l2406"><span class="linenum">2406</span></a>  <span class="comment">     * @final</span>
<a name="l2407"><span class="linenum">2407</span></a>  <span class="comment">     * @global moodle_database $DB</span>
<a name="l2408"><span class="linenum">2408</span></a>  <span class="comment">     * @param stdClass $context</span>
<a name="l2409"><span class="linenum">2409</span></a>  <span class="comment">     * @return stdClass Returns the result of the attempt</span>
<a name="l2410"><span class="linenum">2410</span></a>  <span class="comment">     */</span>
<a name="l2411"><span class="linenum">2411</span></a>      final public function <a class="function" onClick="logFunction('record_attempt')" href="../../_functions/record_attempt.html" onMouseOver="funcPopup(event,'record_attempt')">record_attempt</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l2412"><span class="linenum">2412</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l2413"><span class="linenum">2413</span></a>  
<a name="l2414"><span class="linenum">2414</span></a>          <span class="comment">/**</span>
<a name="l2415"><span class="linenum">2415</span></a>  <span class="comment">         * This should be overridden by each page type to actually check the response</span>
<a name="l2416"><span class="linenum">2416</span></a>  <span class="comment">         * against what ever custom criteria they have defined</span>
<a name="l2417"><span class="linenum">2417</span></a>  <span class="comment">         */</span>
<a name="l2418"><span class="linenum">2418</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_answer')" href="../../_functions/check_answer.html" onMouseOver="funcPopup(event,'check_answer')">check_answer</a>();
<a name="l2419"><span class="linenum">2419</span></a>  
<a name="l2420"><span class="linenum">2420</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('attemptsremaining')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/attemptsremaining.html">attemptsremaining</a>  = 0;
<a name="l2421"><span class="linenum">2421</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('maxattemptsreached')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/maxattemptsreached.html">maxattemptsreached</a> = false;
<a name="l2422"><span class="linenum">2422</span></a>  
<a name="l2423"><span class="linenum">2423</span></a>          if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('noanswer')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/noanswer.html">noanswer</a>) {
<a name="l2424"><span class="linenum">2424</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id; <span class="comment">// display same page again</span>
<a name="l2425"><span class="linenum">2425</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>  = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('noanswer', 'lesson');
<a name="l2426"><span class="linenum">2426</span></a>          } else {
<a name="l2427"><span class="linenum">2427</span></a>              if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/lesson:manage', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2428"><span class="linenum">2428</span></a>                  <a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id, &quot;userid&quot;=&gt;<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2429"><span class="linenum">2429</span></a>  
<a name="l2430"><span class="linenum">2430</span></a>  <span class="comment">                // Get the number of attempts that have been made on this question for this student and retake,</span>
<a name="l2431"><span class="linenum">2431</span></a>                  <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('nattempts')" href="../../_variables/nattempts.html">$nattempts</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('lesson_attempts', array('lessonid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id,
<a name="l2432"><span class="linenum">2432</span></a>                      'userid' =&gt; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'pageid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, 'retry' =&gt; <a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>));
<a name="l2433"><span class="linenum">2433</span></a>  
<a name="l2434"><span class="linenum">2434</span></a>  <span class="comment">                // Check if they have reached (or exceeded) the maximum number of attempts allowed.</span>
<a name="l2435"><span class="linenum">2435</span></a>                  if (<a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('nattempts')" href="../../_variables/nattempts.html">$nattempts</a> &gt;= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;maxattempts) {
<a name="l2436"><span class="linenum">2436</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('maxattemptsreached')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/maxattemptsreached.html">maxattemptsreached</a> = true;
<a name="l2437"><span class="linenum">2437</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('maximumnumberofattemptsreached', 'lesson');
<a name="l2438"><span class="linenum">2438</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;<a class="function" onClick="logFunction('get_next_page')" href="../../_functions/get_next_page.html" onMouseOver="funcPopup(event,'get_next_page')">get_next_page</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid);
<a name="l2439"><span class="linenum">2439</span></a>                      return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l2440"><span class="linenum">2440</span></a>                  }
<a name="l2441"><span class="linenum">2441</span></a>  
<a name="l2442"><span class="linenum">2442</span></a>  <span class="comment">                // record student's attempt</span>
<a name="l2443"><span class="linenum">2443</span></a>                  <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a> = new stdClass;
<a name="l2444"><span class="linenum">2444</span></a>                  <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('lessonid')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id;
<a name="l2445"><span class="linenum">2445</span></a>                  <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('pageid')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l2446"><span class="linenum">2446</span></a>                  <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('userid')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2447"><span class="linenum">2447</span></a>                  <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('answerid')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a> = <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('answerid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a>;
<a name="l2448"><span class="linenum">2448</span></a>                  <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('retry')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/retry.html">retry</a> = <a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>;
<a name="l2449"><span class="linenum">2449</span></a>                  <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('correct')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/correct.html">correct</a> = <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a>;
<a name="l2450"><span class="linenum">2450</span></a>                  if(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('userresponse')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/userresponse.html">userresponse</a> !== null) {
<a name="l2451"><span class="linenum">2451</span></a>                      <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('useranswer')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/useranswer.html">useranswer</a> = <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('userresponse')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/userresponse.html">userresponse</a>;
<a name="l2452"><span class="linenum">2452</span></a>                  }
<a name="l2453"><span class="linenum">2453</span></a>  
<a name="l2454"><span class="linenum">2454</span></a>                  <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('timeseen')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/timeseen.html">timeseen</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2455"><span class="linenum">2455</span></a>  <span class="comment">                // if allow modattempts, then update the old attempt record, otherwise, insert new answer record</span>
<a name="l2456"><span class="linenum">2456</span></a>                  <a class="var it20917" onMouseOver="hilite(20917)" onMouseOut="lolite()" onClick="logVariable('userisreviewing')" href="../../_variables/userisreviewing.html">$userisreviewing</a> = false;
<a name="l2457"><span class="linenum">2457</span></a>                  if (isset(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('modattempts')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/modattempts.html">modattempts</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id])) {
<a name="l2458"><span class="linenum">2458</span></a>                      <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('retry')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/retry.html">retry</a> = <a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a> - 1; <span class="comment">// they are going through on review, $nretakes will be too high</span>
<a name="l2459"><span class="linenum">2459</span></a>                      <a class="var it20917" onMouseOver="hilite(20917)" onMouseOut="lolite()" onClick="logVariable('userisreviewing')" href="../../_variables/userisreviewing.html">$userisreviewing</a> = true;
<a name="l2460"><span class="linenum">2460</span></a>                  }
<a name="l2461"><span class="linenum">2461</span></a>  
<a name="l2462"><span class="linenum">2462</span></a>  <span class="comment">                // Only insert a record if we are not reviewing the lesson.</span>
<a name="l2463"><span class="linenum">2463</span></a>                  if (!<a class="var it20917" onMouseOver="hilite(20917)" onMouseOut="lolite()" onClick="logVariable('userisreviewing')" href="../../_variables/userisreviewing.html">$userisreviewing</a>) {
<a name="l2464"><span class="linenum">2464</span></a>                      if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;retake || (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;retake &amp;&amp; <a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a> == 0)) {
<a name="l2465"><span class="linenum">2465</span></a>                          <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('id')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_attempts&quot;, <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>);
<a name="l2466"><span class="linenum">2466</span></a>  <span class="comment">                        // Trigger an event: question answered.</span>
<a name="l2467"><span class="linenum">2467</span></a>                          <a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a> = array(
<a name="l2468"><span class="linenum">2468</span></a>                              'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id),
<a name="l2469"><span class="linenum">2469</span></a>                              'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id,
<a name="l2470"><span class="linenum">2470</span></a>                              'other' =&gt; array(
<a name="l2471"><span class="linenum">2471</span></a>                                  'pagetype' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_typestring')" href="../../_functions/get_typestring.html" onMouseOver="funcPopup(event,'get_typestring')">get_typestring</a>()
<a name="l2472"><span class="linenum">2472</span></a>                                  )
<a name="l2473"><span class="linenum">2473</span></a>                              );
<a name="l2474"><span class="linenum">2474</span></a>                          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('question_answered')" href="../../_classes/question_answered.html" onMouseOver="classPopup(event,'question_answered')">question_answered</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a>);
<a name="l2475"><span class="linenum">2475</span></a>                          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('lesson_attempts', <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>);
<a name="l2476"><span class="linenum">2476</span></a>                          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2477"><span class="linenum">2477</span></a>  
<a name="l2478"><span class="linenum">2478</span></a>  <span class="comment">                        // Increase the number of attempts made.</span>
<a name="l2479"><span class="linenum">2479</span></a>                          <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('nattempts')" href="../../_variables/nattempts.html">$nattempts</a>++;
<a name="l2480"><span class="linenum">2480</span></a>                      }
<a name="l2481"><span class="linenum">2481</span></a>                  }
<a name="l2482"><span class="linenum">2482</span></a>  <span class="comment">                // &quot;number of attempts remaining&quot; message if $this-&gt;lesson-&gt;maxattempts &gt; 1</span>
<a name="l2483"><span class="linenum">2483</span></a>  <span class="comment">                // displaying of message(s) is at the end of page for more ergonomic display</span>
<a name="l2484"><span class="linenum">2484</span></a>                  if (!<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a> &amp;&amp; (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> == 0)) {
<a name="l2485"><span class="linenum">2485</span></a>  <span class="comment">                    // retreive the number of attempts left counter for displaying at bottom of feedback page</span>
<a name="l2486"><span class="linenum">2486</span></a>                      if (<a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('nattempts')" href="../../_variables/nattempts.html">$nattempts</a> &gt;= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;maxattempts) {
<a name="l2487"><span class="linenum">2487</span></a>                          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;maxattempts &gt; 1) { // don't bother with message if only one attempt
<a name="l2488"><span class="linenum">2488</span></a>                              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('maxattemptsreached')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/maxattemptsreached.html">maxattemptsreached</a> = true;
<a name="l2489"><span class="linenum">2489</span></a>                          }
<a name="l2490"><span class="linenum">2490</span></a>                          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> = <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>;
<a name="l2491"><span class="linenum">2491</span></a>                      } else if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;maxattempts &gt; 1) { // don't bother with message if only one attempt
<a name="l2492"><span class="linenum">2492</span></a>                          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('attemptsremaining')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/attemptsremaining.html">attemptsremaining</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;maxattempts - <a class="var it1235" onMouseOver="hilite(1235)" onMouseOut="lolite()" onClick="logVariable('nattempts')" href="../../_variables/nattempts.html">$nattempts</a>;
<a name="l2493"><span class="linenum">2493</span></a>                      }
<a name="l2494"><span class="linenum">2494</span></a>                  }
<a name="l2495"><span class="linenum">2495</span></a>              }
<a name="l2496"><span class="linenum">2496</span></a>  <span class="comment">            // TODO: merge this code with the jump code below.  Convert jumpto page into a proper page id</span>
<a name="l2497"><span class="linenum">2497</span></a>              if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> == 0) {
<a name="l2498"><span class="linenum">2498</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l2499"><span class="linenum">2499</span></a>              } elseif (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> == <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>) {
<a name="l2500"><span class="linenum">2500</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;<a class="function" onClick="logFunction('get_next_page')" href="../../_functions/get_next_page.html" onMouseOver="funcPopup(event,'get_next_page')">get_next_page</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid);
<a name="l2501"><span class="linenum">2501</span></a>              }
<a name="l2502"><span class="linenum">2502</span></a>  
<a name="l2503"><span class="linenum">2503</span></a>  <span class="comment">            // Determine default feedback if necessary</span>
<a name="l2504"><span class="linenum">2504</span></a>              if (empty(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>)) {
<a name="l2505"><span class="linenum">2505</span></a>                  if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;feedback &amp;&amp; !<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('noanswer')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/noanswer.html">noanswer</a> &amp;&amp; !(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;review &amp; !<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a> &amp;&amp; !<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('isessayquestion')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/isessayquestion.html">isessayquestion</a>)) {
<a name="l2506"><span class="linenum">2506</span></a>  <span class="comment">                    // These conditions have been met:</span>
<a name="l2507"><span class="linenum">2507</span></a>  <span class="comment">                    //  1. The lesson manager has not supplied feedback to the student</span>
<a name="l2508"><span class="linenum">2508</span></a>  <span class="comment">                    //  2. Not displaying default feedback</span>
<a name="l2509"><span class="linenum">2509</span></a>  <span class="comment">                    //  3. The user did provide an answer</span>
<a name="l2510"><span class="linenum">2510</span></a>  <span class="comment">                    //  4. We are not reviewing with an incorrect answer (and not reviewing an essay question)</span>
<a name="l2511"><span class="linenum">2511</span></a>  
<a name="l2512"><span class="linenum">2512</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('nodefaultresponse')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/nodefaultresponse.html">nodefaultresponse</a> = true;  <span class="comment">// This will cause a redirect below</span>
<a name="l2513"><span class="linenum">2513</span></a>                  } else if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('isessayquestion')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/isessayquestion.html">isessayquestion</a>) {
<a name="l2514"><span class="linenum">2514</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('defaultessayresponse', 'lesson');
<a name="l2515"><span class="linenum">2515</span></a>                  } else if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a>) {
<a name="l2516"><span class="linenum">2516</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('thatsthecorrectanswer', 'lesson');
<a name="l2517"><span class="linenum">2517</span></a>                  } else {
<a name="l2518"><span class="linenum">2518</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('thatsthewronganswer', 'lesson');
<a name="l2519"><span class="linenum">2519</span></a>                  }
<a name="l2520"><span class="linenum">2520</span></a>              }
<a name="l2521"><span class="linenum">2521</span></a>  
<a name="l2522"><span class="linenum">2522</span></a>              if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>) {
<a name="l2523"><span class="linenum">2523</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;review &amp;&amp; !<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a> &amp;&amp; !<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('isessayquestion')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/isessayquestion.html">isessayquestion</a>) {
<a name="l2524"><span class="linenum">2524</span></a>                      <a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id, &quot;userid&quot;=&gt;<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2525"><span class="linenum">2525</span></a>                      <a class="var it20920" onMouseOver="hilite(20920)" onMouseOut="lolite()" onClick="logVariable('qattempts')" href="../../_variables/qattempts.html">$qattempts</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_attempts&quot;, array(&quot;userid&quot;=&gt;<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;retry&quot;=&gt;<a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>, &quot;pageid&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l2526"><span class="linenum">2526</span></a>                      if (<a class="var it20920" onMouseOver="hilite(20920)" onMouseOut="lolite()" onClick="logVariable('qattempts')" href="../../_variables/qattempts.html">$qattempts</a> == 1) {
<a name="l2527"><span class="linenum">2527</span></a>                          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;firstwrong&quot;, &quot;lesson&quot;), 'feedback');
<a name="l2528"><span class="linenum">2528</span></a>                      } else {
<a name="l2529"><span class="linenum">2529</span></a>                          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;secondpluswrong&quot;, &quot;lesson&quot;), 'feedback');
<a name="l2530"><span class="linenum">2530</span></a>                      }
<a name="l2531"><span class="linenum">2531</span></a>                  } else {
<a name="l2532"><span class="linenum">2532</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = '';
<a name="l2533"><span class="linenum">2533</span></a>                  }
<a name="l2534"><span class="linenum">2534</span></a>                  <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'response';
<a name="l2535"><span class="linenum">2535</span></a>                  if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a>) {
<a name="l2536"><span class="linenum">2536</span></a>                      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> .= ' correct'; <span class="comment">// CSS over-ride this if they exist (!important).</span>
<a name="l2537"><span class="linenum">2537</span></a>                  } else if (!<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('isessayquestion')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/isessayquestion.html">isessayquestion</a>) {
<a name="l2538"><span class="linenum">2538</span></a>                      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> .= ' incorrect'; <span class="comment">// CSS over-ride this if they exist (!important).</span>
<a name="l2539"><span class="linenum">2539</span></a>                  }
<a name="l2540"><span class="linenum">2540</span></a>                  <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = new stdClass;
<a name="l2541"><span class="linenum">2541</span></a>                  <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('noclean')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/noclean.html">noclean</a> = true;
<a name="l2542"><span class="linenum">2542</span></a>                  <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('para')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/para.html">para</a> = true;
<a name="l2543"><span class="linenum">2543</span></a>                  <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('overflowdiv')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/overflowdiv.html">overflowdiv</a> = true;
<a name="l2544"><span class="linenum">2544</span></a>                  <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('context')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l2545"><span class="linenum">2545</span></a>  
<a name="l2546"><span class="linenum">2546</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> .= <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_contents')" href="../../_functions/get_contents.html" onMouseOver="funcPopup(event,'get_contents')">get_contents</a>(), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;contentsformat, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>),
<a name="l2547"><span class="linenum">2547</span></a>                          'generalbox boxaligncenter');
<a name="l2548"><span class="linenum">2548</span></a>                  if (isset(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('studentanswerformat')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/studentanswerformat.html">studentanswerformat</a>)) {
<a name="l2549"><span class="linenum">2549</span></a>  <span class="comment">                    // This is the student's answer so it should be cleaned.</span>
<a name="l2550"><span class="linenum">2550</span></a>                      <a class="var it3036" onMouseOver="hilite(3036)" onMouseOut="lolite()" onClick="logVariable('studentanswer')" href="../../_variables/studentanswer.html">$studentanswer</a> = <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('studentanswer')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/studentanswer.html">studentanswer</a>, <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('studentanswerformat')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/studentanswerformat.html">studentanswerformat</a>,
<a name="l2551"><span class="linenum">2551</span></a>                              array('context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, 'para' =&gt; true));
<a name="l2552"><span class="linenum">2552</span></a>                  } else {
<a name="l2553"><span class="linenum">2553</span></a>                      <a class="var it3036" onMouseOver="hilite(3036)" onMouseOut="lolite()" onClick="logVariable('studentanswer')" href="../../_variables/studentanswer.html">$studentanswer</a> = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('studentanswer')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/studentanswer.html">studentanswer</a>);
<a name="l2554"><span class="linenum">2554</span></a>                  }
<a name="l2555"><span class="linenum">2555</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> .= '&lt;div class=&quot;correctanswer generalbox&quot;&gt;&lt;em&gt;'
<a name="l2556"><span class="linenum">2556</span></a>                          . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;youranswer&quot;, &quot;lesson&quot;).'&lt;/em&gt; : ' . <a class="var it3036" onMouseOver="hilite(3036)" onMouseOut="lolite()" onClick="logVariable('studentanswer')" href="../../_variables/studentanswer.html">$studentanswer</a>;
<a name="l2557"><span class="linenum">2557</span></a>                  if (isset(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('responseformat')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a>)) {
<a name="l2558"><span class="linenum">2558</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, '<a class="filename" href="../../pluginfile.php.html">pluginfile.php</a>', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2559"><span class="linenum">2559</span></a>                              'mod_lesson', 'page_responses', <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('answerid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a>);
<a name="l2560"><span class="linenum">2560</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> .= <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('responseformat')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>)
<a name="l2561"><span class="linenum">2561</span></a>                              , <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>);
<a name="l2562"><span class="linenum">2562</span></a>                  } else {
<a name="l2563"><span class="linenum">2563</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> .= <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>);
<a name="l2564"><span class="linenum">2564</span></a>                  }
<a name="l2565"><span class="linenum">2565</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> .= '&lt;/div&gt;';
<a name="l2566"><span class="linenum">2566</span></a>              }
<a name="l2567"><span class="linenum">2567</span></a>          }
<a name="l2568"><span class="linenum">2568</span></a>  
<a name="l2569"><span class="linenum">2569</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l2570"><span class="linenum">2570</span></a>      }
<a name="l2571"><span class="linenum">2571</span></a>  
<a name="l2572"><span class="linenum">2572</span></a>      <span class="comment">/**</span>
<a name="l2573"><span class="linenum">2573</span></a>  <span class="comment">     * Returns the string for a jump name</span>
<a name="l2574"><span class="linenum">2574</span></a>  <span class="comment">     *</span>
<a name="l2575"><span class="linenum">2575</span></a>  <span class="comment">     * @final</span>
<a name="l2576"><span class="linenum">2576</span></a>  <span class="comment">     * @param int $jumpto Jump code or page ID</span>
<a name="l2577"><span class="linenum">2577</span></a>  <span class="comment">     * @return string</span>
<a name="l2578"><span class="linenum">2578</span></a>  <span class="comment">     **/</span>
<a name="l2579"><span class="linenum">2579</span></a>      final protected function <a class="function" onClick="logFunction('get_jump_name')" href="../../_functions/get_jump_name.html" onMouseOver="funcPopup(event,'get_jump_name')">get_jump_name</a>(<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>) {
<a name="l2580"><span class="linenum">2580</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2581"><span class="linenum">2581</span></a>          static <a class="var it20921" onMouseOver="hilite(20921)" onMouseOut="lolite()" onClick="logVariable('jumpnames')" href="../../_variables/jumpnames.html">$jumpnames</a> = array();
<a name="l2582"><span class="linenum">2582</span></a>  
<a name="l2583"><span class="linenum">2583</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>, <a class="var it20921" onMouseOver="hilite(20921)" onMouseOut="lolite()" onClick="logVariable('jumpnames')" href="../../_variables/jumpnames.html">$jumpnames</a>)) {
<a name="l2584"><span class="linenum">2584</span></a>              if (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_THISPAGE')" href="../../_constants/LESSON_THISPAGE.html" onMouseOver="constPopup(event,'LESSON_THISPAGE')">LESSON_THISPAGE</a>) {
<a name="l2585"><span class="linenum">2585</span></a>                  <a class="var it20922" onMouseOver="hilite(20922)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('thispage', 'lesson');
<a name="l2586"><span class="linenum">2586</span></a>              } elseif (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>) {
<a name="l2587"><span class="linenum">2587</span></a>                  <a class="var it20922" onMouseOver="hilite(20922)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nextpage', 'lesson');
<a name="l2588"><span class="linenum">2588</span></a>              } elseif (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>) {
<a name="l2589"><span class="linenum">2589</span></a>                  <a class="var it20922" onMouseOver="hilite(20922)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('endoflesson', 'lesson');
<a name="l2590"><span class="linenum">2590</span></a>              } elseif (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_UNSEENBRANCHPAGE')" href="../../_constants/LESSON_UNSEENBRANCHPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENBRANCHPAGE')">LESSON_UNSEENBRANCHPAGE</a>) {
<a name="l2591"><span class="linenum">2591</span></a>                  <a class="var it20922" onMouseOver="hilite(20922)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('unseenpageinbranch', 'lesson');
<a name="l2592"><span class="linenum">2592</span></a>              } elseif (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_PREVIOUSPAGE')" href="../../_constants/LESSON_PREVIOUSPAGE.html" onMouseOver="constPopup(event,'LESSON_PREVIOUSPAGE')">LESSON_PREVIOUSPAGE</a>) {
<a name="l2593"><span class="linenum">2593</span></a>                  <a class="var it20922" onMouseOver="hilite(20922)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('previouspage', 'lesson');
<a name="l2594"><span class="linenum">2594</span></a>              } elseif (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_RANDOMPAGE')" href="../../_constants/LESSON_RANDOMPAGE.html" onMouseOver="constPopup(event,'LESSON_RANDOMPAGE')">LESSON_RANDOMPAGE</a>) {
<a name="l2595"><span class="linenum">2595</span></a>                  <a class="var it20922" onMouseOver="hilite(20922)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('randompageinbranch', 'lesson');
<a name="l2596"><span class="linenum">2596</span></a>              } elseif (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_RANDOMBRANCH')" href="../../_constants/LESSON_RANDOMBRANCH.html" onMouseOver="constPopup(event,'LESSON_RANDOMBRANCH')">LESSON_RANDOMBRANCH</a>) {
<a name="l2597"><span class="linenum">2597</span></a>                  <a class="var it20922" onMouseOver="hilite(20922)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('randombranch', 'lesson');
<a name="l2598"><span class="linenum">2598</span></a>              } elseif (<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_CLUSTERJUMP')" href="../../_constants/LESSON_CLUSTERJUMP.html" onMouseOver="constPopup(event,'LESSON_CLUSTERJUMP')">LESSON_CLUSTERJUMP</a>) {
<a name="l2599"><span class="linenum">2599</span></a>                  <a class="var it20922" onMouseOver="hilite(20922)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('clusterjump', 'lesson');
<a name="l2600"><span class="linenum">2600</span></a>              } else {
<a name="l2601"><span class="linenum">2601</span></a>                  if (!<a class="var it20922" onMouseOver="hilite(20922)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('lesson_pages', 'title', array('id' =&gt; <a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>))) {
<a name="l2602"><span class="linenum">2602</span></a>                      <a class="var it20922" onMouseOver="hilite(20922)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = '&lt;strong&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('notdefined', 'lesson').'&lt;/strong&gt;';
<a name="l2603"><span class="linenum">2603</span></a>                  }
<a name="l2604"><span class="linenum">2604</span></a>              }
<a name="l2605"><span class="linenum">2605</span></a>              <a class="var it20921" onMouseOver="hilite(20921)" onMouseOut="lolite()" onClick="logVariable('jumpnames')" href="../../_variables/jumpnames.html">$jumpnames</a>[<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>] = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it20922" onMouseOver="hilite(20922)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a>,true);
<a name="l2606"><span class="linenum">2606</span></a>          }
<a name="l2607"><span class="linenum">2607</span></a>  
<a name="l2608"><span class="linenum">2608</span></a>          return <a class="var it20921" onMouseOver="hilite(20921)" onMouseOut="lolite()" onClick="logVariable('jumpnames')" href="../../_variables/jumpnames.html">$jumpnames</a>[<a class="var it1233" onMouseOver="hilite(1233)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>];
<a name="l2609"><span class="linenum">2609</span></a>      }
<a name="l2610"><span class="linenum">2610</span></a>  
<a name="l2611"><span class="linenum">2611</span></a>      <span class="comment">/**</span>
<a name="l2612"><span class="linenum">2612</span></a>  <span class="comment">     * Constructor method</span>
<a name="l2613"><span class="linenum">2613</span></a>  <span class="comment">     * @param object $properties</span>
<a name="l2614"><span class="linenum">2614</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l2615"><span class="linenum">2615</span></a>  <span class="comment">     */</span>
<a name="l2616"><span class="linenum">2616</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>, lesson <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l2617"><span class="linenum">2617</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>);
<a name="l2618"><span class="linenum">2618</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a> = <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>;
<a name="l2619"><span class="linenum">2619</span></a>      }
<a name="l2620"><span class="linenum">2620</span></a>  
<a name="l2621"><span class="linenum">2621</span></a>      <span class="comment">/**</span>
<a name="l2622"><span class="linenum">2622</span></a>  <span class="comment">     * Returns the score for the attempt</span>
<a name="l2623"><span class="linenum">2623</span></a>  <span class="comment">     * This may be overridden by page types that require manual grading</span>
<a name="l2624"><span class="linenum">2624</span></a>  <span class="comment">     * @param array $answers</span>
<a name="l2625"><span class="linenum">2625</span></a>  <span class="comment">     * @param object $attempt</span>
<a name="l2626"><span class="linenum">2626</span></a>  <span class="comment">     * @return int</span>
<a name="l2627"><span class="linenum">2627</span></a>  <span class="comment">     */</span>
<a name="l2628"><span class="linenum">2628</span></a>      public function <a class="function" onClick="logFunction('earned_score')" href="../../_functions/earned_score.html" onMouseOver="funcPopup(event,'earned_score')">earned_score</a>(<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>, <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>) {
<a name="l2629"><span class="linenum">2629</span></a>          return <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>[<a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('answerid')" class="var it43015" onMouseOver="hilite(43015)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a>]-&gt;score;
<a name="l2630"><span class="linenum">2630</span></a>      }
<a name="l2631"><span class="linenum">2631</span></a>  
<a name="l2632"><span class="linenum">2632</span></a>      <span class="comment">/**</span>
<a name="l2633"><span class="linenum">2633</span></a>  <span class="comment">     * This is a callback method that can be override and gets called when ever a page</span>
<a name="l2634"><span class="linenum">2634</span></a>  <span class="comment">     * is viewed</span>
<a name="l2635"><span class="linenum">2635</span></a>  <span class="comment">     *</span>
<a name="l2636"><span class="linenum">2636</span></a>  <span class="comment">     * @param bool $canmanage True if the user has the manage cap</span>
<a name="l2637"><span class="linenum">2637</span></a>  <span class="comment">     * @return mixed</span>
<a name="l2638"><span class="linenum">2638</span></a>  <span class="comment">     */</span>
<a name="l2639"><span class="linenum">2639</span></a>      public function <a class="function" onClick="logFunction('callback_on_view')" href="../../_functions/callback_on_view.html" onMouseOver="funcPopup(event,'callback_on_view')">callback_on_view</a>(<a class="var it1205" onMouseOver="hilite(1205)" onMouseOut="lolite()" onClick="logVariable('canmanage')" href="../../_variables/canmanage.html">$canmanage</a>) {
<a name="l2640"><span class="linenum">2640</span></a>          return true;
<a name="l2641"><span class="linenum">2641</span></a>      }
<a name="l2642"><span class="linenum">2642</span></a>  
<a name="l2643"><span class="linenum">2643</span></a>      <span class="comment">/**</span>
<a name="l2644"><span class="linenum">2644</span></a>  <span class="comment">     * save editor answers files and update answer record</span>
<a name="l2645"><span class="linenum">2645</span></a>  <span class="comment">     *</span>
<a name="l2646"><span class="linenum">2646</span></a>  <span class="comment">     * @param object $context</span>
<a name="l2647"><span class="linenum">2647</span></a>  <span class="comment">     * @param int $maxbytes</span>
<a name="l2648"><span class="linenum">2648</span></a>  <span class="comment">     * @param object $answer</span>
<a name="l2649"><span class="linenum">2649</span></a>  <span class="comment">     * @param object $answereditor</span>
<a name="l2650"><span class="linenum">2650</span></a>  <span class="comment">     * @param object $responseeditor</span>
<a name="l2651"><span class="linenum">2651</span></a>  <span class="comment">     */</span>
<a name="l2652"><span class="linenum">2652</span></a>      public function <a class="function" onClick="logFunction('save_answers_files')" href="../../_functions/save_answers_files.html" onMouseOver="funcPopup(event,'save_answers_files')">save_answers_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>, &amp;<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it20923" onMouseOver="hilite(20923)" onMouseOut="lolite()" onClick="logVariable('answereditor')" href="../../_variables/answereditor.html">$answereditor</a> = '', <a class="var it20924" onMouseOver="hilite(20924)" onMouseOut="lolite()" onClick="logVariable('responseeditor')" href="../../_variables/responseeditor.html">$responseeditor</a> = '') {
<a name="l2653"><span class="linenum">2653</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2654"><span class="linenum">2654</span></a>          if (isset(<a class="var it20923" onMouseOver="hilite(20923)" onMouseOut="lolite()" onClick="logVariable('answereditor')" href="../../_variables/answereditor.html">$answereditor</a>['itemid'])) {
<a name="l2655"><span class="linenum">2655</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it20923" onMouseOver="hilite(20923)" onMouseOut="lolite()" onClick="logVariable('answereditor')" href="../../_variables/answereditor.html">$answereditor</a>['itemid'],
<a name="l2656"><span class="linenum">2656</span></a>                      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'page_answers', <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2657"><span class="linenum">2657</span></a>                      array('noclean' =&gt; true, 'maxfiles' =&gt; <a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes' =&gt; <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>),
<a name="l2658"><span class="linenum">2658</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>, null);
<a name="l2659"><span class="linenum">2659</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('lesson_answers', 'answer', <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>, array('id' =&gt; <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2660"><span class="linenum">2660</span></a>          }
<a name="l2661"><span class="linenum">2661</span></a>          if (isset(<a class="var it20924" onMouseOver="hilite(20924)" onMouseOut="lolite()" onClick="logVariable('responseeditor')" href="../../_variables/responseeditor.html">$responseeditor</a>['itemid'])) {
<a name="l2662"><span class="linenum">2662</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it20924" onMouseOver="hilite(20924)" onMouseOut="lolite()" onClick="logVariable('responseeditor')" href="../../_variables/responseeditor.html">$responseeditor</a>['itemid'],
<a name="l2663"><span class="linenum">2663</span></a>                      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'page_responses', <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2664"><span class="linenum">2664</span></a>                      array('noclean' =&gt; true, 'maxfiles' =&gt; <a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes' =&gt; <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>),
<a name="l2665"><span class="linenum">2665</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, null);
<a name="l2666"><span class="linenum">2666</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('lesson_answers', 'response', <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, array('id' =&gt; <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2667"><span class="linenum">2667</span></a>          }
<a name="l2668"><span class="linenum">2668</span></a>      }
<a name="l2669"><span class="linenum">2669</span></a>  
<a name="l2670"><span class="linenum">2670</span></a>      <span class="comment">/**</span>
<a name="l2671"><span class="linenum">2671</span></a>  <span class="comment">     * Rewrite urls in response and optionality answer of a question answer</span>
<a name="l2672"><span class="linenum">2672</span></a>  <span class="comment">     *</span>
<a name="l2673"><span class="linenum">2673</span></a>  <span class="comment">     * @param object $answer</span>
<a name="l2674"><span class="linenum">2674</span></a>  <span class="comment">     * @param bool $rewriteanswer must rewrite answer</span>
<a name="l2675"><span class="linenum">2675</span></a>  <span class="comment">     * @return object answer with rewritten urls</span>
<a name="l2676"><span class="linenum">2676</span></a>  <span class="comment">     */</span>
<a name="l2677"><span class="linenum">2677</span></a>      public static function <a class="function" onClick="logFunction('rewrite_answers_urls')" href="../../_functions/rewrite_answers_urls.html" onMouseOver="funcPopup(event,'rewrite_answers_urls')">rewrite_answers_urls</a>(<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it20925" onMouseOver="hilite(20925)" onMouseOut="lolite()" onClick="logVariable('rewriteanswer')" href="../../_variables/rewriteanswer.html">$rewriteanswer</a> = true) {
<a name="l2678"><span class="linenum">2678</span></a>          global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l2679"><span class="linenum">2679</span></a>  
<a name="l2680"><span class="linenum">2680</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id);
<a name="l2681"><span class="linenum">2681</span></a>          if (<a class="var it20925" onMouseOver="hilite(20925)" onMouseOut="lolite()" onClick="logVariable('rewriteanswer')" href="../../_variables/rewriteanswer.html">$rewriteanswer</a>) {
<a name="l2682"><span class="linenum">2682</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>, '<a class="filename" href="../../pluginfile.php.html">pluginfile.php</a>', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2683"><span class="linenum">2683</span></a>                      'mod_lesson', 'page_answers', <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2684"><span class="linenum">2684</span></a>          }
<a name="l2685"><span class="linenum">2685</span></a>          <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, '<a class="filename" href="../../pluginfile.php.html">pluginfile.php</a>', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2686"><span class="linenum">2686</span></a>                  'mod_lesson', 'page_responses', <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2687"><span class="linenum">2687</span></a>  
<a name="l2688"><span class="linenum">2688</span></a>          return <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>;
<a name="l2689"><span class="linenum">2689</span></a>      }
<a name="l2690"><span class="linenum">2690</span></a>  
<a name="l2691"><span class="linenum">2691</span></a>      <span class="comment">/**</span>
<a name="l2692"><span class="linenum">2692</span></a>  <span class="comment">     * Updates a lesson page and its answers within the database</span>
<a name="l2693"><span class="linenum">2693</span></a>  <span class="comment">     *</span>
<a name="l2694"><span class="linenum">2694</span></a>  <span class="comment">     * @param object $properties</span>
<a name="l2695"><span class="linenum">2695</span></a>  <span class="comment">     * @return bool</span>
<a name="l2696"><span class="linenum">2696</span></a>  <span class="comment">     */</span>
<a name="l2697"><span class="linenum">2697</span></a>      public function <a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = null, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a> = null) {
<a name="l2698"><span class="linenum">2698</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l2699"><span class="linenum">2699</span></a>          <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>  = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_answers')" href="../../_functions/get_answers.html" onMouseOver="funcPopup(event,'get_answers')">get_answers</a>();
<a name="l2700"><span class="linenum">2700</span></a>          <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('id')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l2701"><span class="linenum">2701</span></a>          <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('lessonid')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id;
<a name="l2702"><span class="linenum">2702</span></a>          if (empty(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('qoption')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/qoption.html">qoption</a>)) {
<a name="l2703"><span class="linenum">2703</span></a>              <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('qoption')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/qoption.html">qoption</a> = '0';
<a name="l2704"><span class="linenum">2704</span></a>          }
<a name="l2705"><span class="linenum">2705</span></a>          if (empty(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2706"><span class="linenum">2706</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('context')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>;
<a name="l2707"><span class="linenum">2707</span></a>          }
<a name="l2708"><span class="linenum">2708</span></a>          if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a> === null) {
<a name="l2709"><span class="linenum">2709</span></a>              <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a> = <a class="function" onClick="logFunction('get_user_max_upload_file_size')" href="../../_functions/get_user_max_upload_file_size.html" onMouseOver="funcPopup(event,'get_user_max_upload_file_size')">get_user_max_upload_file_size</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l2710"><span class="linenum">2710</span></a>          }
<a name="l2711"><span class="linenum">2711</span></a>          <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2712"><span class="linenum">2712</span></a>          <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a> = <a class="function" onClick="logFunction('file_postupdate_standard_editor')" href="../../_functions/file_postupdate_standard_editor.html" onMouseOver="funcPopup(event,'file_postupdate_standard_editor')">file_postupdate_standard_editor</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>, 'contents', array('noclean'=&gt;true, 'maxfiles'=&gt;<a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes'=&gt;<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>), <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, 'mod_lesson', 'page_contents', <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('id')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2713"><span class="linenum">2713</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(&quot;lesson_pages&quot;, <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>);
<a name="l2714"><span class="linenum">2714</span></a>  
<a name="l2715"><span class="linenum">2715</span></a>  <span class="comment">        // Trigger an event: page updated.</span>
<a name="l2716"><span class="linenum">2716</span></a>          \mod_lesson\event\<a class="class" onClick="logClass('page_updated')" href="../../_classes/page_updated.html" onMouseOver="classPopup(event,'page_updated')">page_updated</a>::<a class="function" onClick="logFunction('create_from_lesson_page')" href="../../_functions/create_from_lesson_page.html" onMouseOver="funcPopup(event,'create_from_lesson_page')">create_from_lesson_page</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2717"><span class="linenum">2717</span></a>  
<a name="l2718"><span class="linenum">2718</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/type.html">type</a> == self::TYPE_STRUCTURE &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_typeid')" href="../../_functions/get_typeid.html" onMouseOver="funcPopup(event,'get_typeid')">get_typeid</a>() != <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>) {
<a name="l2719"><span class="linenum">2719</span></a>  <span class="comment">            // These page types have only one answer to save the jump and score.</span>
<a name="l2720"><span class="linenum">2720</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>) &gt; 1) {
<a name="l2721"><span class="linenum">2721</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>);
<a name="l2722"><span class="linenum">2722</span></a>                  foreach (<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> as <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>) {
<a name="l2723"><span class="linenum">2723</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;delete_record('lesson_answers', array('id' =&gt; <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('id')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2724"><span class="linenum">2724</span></a>                  }
<a name="l2725"><span class="linenum">2725</span></a>              } else if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>) == 1) {
<a name="l2726"><span class="linenum">2726</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>);
<a name="l2727"><span class="linenum">2727</span></a>              } else {
<a name="l2728"><span class="linenum">2728</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = new stdClass;
<a name="l2729"><span class="linenum">2729</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('lessonid')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('lessonid')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a>;
<a name="l2730"><span class="linenum">2730</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('pageid')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('id')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2731"><span class="linenum">2731</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('timecreated')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2732"><span class="linenum">2732</span></a>              }
<a name="l2733"><span class="linenum">2733</span></a>  
<a name="l2734"><span class="linenum">2734</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2735"><span class="linenum">2735</span></a>              if (isset(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>[0])) {
<a name="l2736"><span class="linenum">2736</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>[0];
<a name="l2737"><span class="linenum">2737</span></a>              }
<a name="l2738"><span class="linenum">2738</span></a>              if (isset(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('score')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>[0])) {
<a name="l2739"><span class="linenum">2739</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/score.html">score</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('score')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>[0];
<a name="l2740"><span class="linenum">2740</span></a>              }
<a name="l2741"><span class="linenum">2741</span></a>              if (!empty(<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l2742"><span class="linenum">2742</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(&quot;lesson_answers&quot;, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>());
<a name="l2743"><span class="linenum">2743</span></a>              } else {
<a name="l2744"><span class="linenum">2744</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l2745"><span class="linenum">2745</span></a>              }
<a name="l2746"><span class="linenum">2746</span></a>          } else {
<a name="l2747"><span class="linenum">2747</span></a>              for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;maxanswers; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l2748"><span class="linenum">2748</span></a>                  if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>)) {
<a name="l2749"><span class="linenum">2749</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = new stdClass;
<a name="l2750"><span class="linenum">2750</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;lessonid = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id;
<a name="l2751"><span class="linenum">2751</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;pageid = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2752"><span class="linenum">2752</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;timecreated = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>;
<a name="l2753"><span class="linenum">2753</span></a>                  }
<a name="l2754"><span class="linenum">2754</span></a>  
<a name="l2755"><span class="linenum">2755</span></a>                  if (isset(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2756"><span class="linenum">2756</span></a>                      if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2757"><span class="linenum">2757</span></a>  <span class="comment">                        // Multichoice and true/false pages have an HTML editor.</span>
<a name="l2758"><span class="linenum">2758</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;answer = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text'];
<a name="l2759"><span class="linenum">2759</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;answerformat = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['format'];
<a name="l2760"><span class="linenum">2760</span></a>                      } else {
<a name="l2761"><span class="linenum">2761</span></a>  <span class="comment">                        // Branch tables, shortanswer and mumerical pages have only a text field.</span>
<a name="l2762"><span class="linenum">2762</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;answer = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>];
<a name="l2763"><span class="linenum">2763</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;answerformat = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l2764"><span class="linenum">2764</span></a>                      }
<a name="l2765"><span class="linenum">2765</span></a>                  }
<a name="l2766"><span class="linenum">2766</span></a>  
<a name="l2767"><span class="linenum">2767</span></a>                  if (!empty(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2768"><span class="linenum">2768</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;response = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text'];
<a name="l2769"><span class="linenum">2769</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;responseformat = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['format'];
<a name="l2770"><span class="linenum">2770</span></a>                  }
<a name="l2771"><span class="linenum">2771</span></a>  
<a name="l2772"><span class="linenum">2772</span></a>                  if (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;answer) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;answer != '') {
<a name="l2773"><span class="linenum">2773</span></a>                      if (isset(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2774"><span class="linenum">2774</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;jumpto = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>];
<a name="l2775"><span class="linenum">2775</span></a>                      }
<a name="l2776"><span class="linenum">2776</span></a>                      if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;custom &amp;&amp; isset(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('score')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2777"><span class="linenum">2777</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;score = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('score')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>];
<a name="l2778"><span class="linenum">2778</span></a>                      }
<a name="l2779"><span class="linenum">2779</span></a>                      if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id)) {
<a name="l2780"><span class="linenum">2780</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]);
<a name="l2781"><span class="linenum">2781</span></a>                      } else {
<a name="l2782"><span class="linenum">2782</span></a>                          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(&quot;lesson_answers&quot;, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>());
<a name="l2783"><span class="linenum">2783</span></a>                      }
<a name="l2784"><span class="linenum">2784</span></a>  
<a name="l2785"><span class="linenum">2785</span></a>  <span class="comment">                    // Save files in answers and responses.</span>
<a name="l2786"><span class="linenum">2786</span></a>                      if (isset(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2787"><span class="linenum">2787</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_answers_files')" href="../../_functions/save_answers_files.html" onMouseOver="funcPopup(event,'save_answers_files')">save_answers_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>],
<a name="l2788"><span class="linenum">2788</span></a>                                  <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>], <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]);
<a name="l2789"><span class="linenum">2789</span></a>                      } else {
<a name="l2790"><span class="linenum">2790</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_answers_files')" href="../../_functions/save_answers_files.html" onMouseOver="funcPopup(event,'save_answers_files')">save_answers_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>],
<a name="l2791"><span class="linenum">2791</span></a>                                  <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]);
<a name="l2792"><span class="linenum">2792</span></a>                      }
<a name="l2793"><span class="linenum">2793</span></a>  
<a name="l2794"><span class="linenum">2794</span></a>                  } else if (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id)) {
<a name="l2795"><span class="linenum">2795</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('lesson_answers', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id));
<a name="l2796"><span class="linenum">2796</span></a>                      unset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]);
<a name="l2797"><span class="linenum">2797</span></a>                  }
<a name="l2798"><span class="linenum">2798</span></a>              }
<a name="l2799"><span class="linenum">2799</span></a>          }
<a name="l2800"><span class="linenum">2800</span></a>          return true;
<a name="l2801"><span class="linenum">2801</span></a>      }
<a name="l2802"><span class="linenum">2802</span></a>  
<a name="l2803"><span class="linenum">2803</span></a>      <span class="comment">/**</span>
<a name="l2804"><span class="linenum">2804</span></a>  <span class="comment">     * Can be set to true if the page requires a static link to create a new instance</span>
<a name="l2805"><span class="linenum">2805</span></a>  <span class="comment">     * instead of simply being included in the dropdown</span>
<a name="l2806"><span class="linenum">2806</span></a>  <span class="comment">     * @param int $previd</span>
<a name="l2807"><span class="linenum">2807</span></a>  <span class="comment">     * @return bool</span>
<a name="l2808"><span class="linenum">2808</span></a>  <span class="comment">     */</span>
<a name="l2809"><span class="linenum">2809</span></a>      public function <a class="function" onClick="logFunction('add_page_link')" href="../../_functions/add_page_link.html" onMouseOver="funcPopup(event,'add_page_link')">add_page_link</a>(<a class="var it10651" onMouseOver="hilite(10651)" onMouseOut="lolite()" onClick="logVariable('previd')" href="../../_variables/previd.html">$previd</a>) {
<a name="l2810"><span class="linenum">2810</span></a>          return false;
<a name="l2811"><span class="linenum">2811</span></a>      }
<a name="l2812"><span class="linenum">2812</span></a>  
<a name="l2813"><span class="linenum">2813</span></a>      <span class="comment">/**</span>
<a name="l2814"><span class="linenum">2814</span></a>  <span class="comment">     * Returns true if a page has been viewed before</span>
<a name="l2815"><span class="linenum">2815</span></a>  <span class="comment">     *</span>
<a name="l2816"><span class="linenum">2816</span></a>  <span class="comment">     * @param array|int $param Either an array of pages that have been seen or the</span>
<a name="l2817"><span class="linenum">2817</span></a>  <span class="comment">     *                   number of retakes a user has had</span>
<a name="l2818"><span class="linenum">2818</span></a>  <span class="comment">     * @return bool</span>
<a name="l2819"><span class="linenum">2819</span></a>  <span class="comment">     */</span>
<a name="l2820"><span class="linenum">2820</span></a>      public function <a class="function" onClick="logFunction('is_unseen')" href="../../_functions/is_unseen.html" onMouseOver="funcPopup(event,'is_unseen')">is_unseen</a>(<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>) {
<a name="l2821"><span class="linenum">2821</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2822"><span class="linenum">2822</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>)) {
<a name="l2823"><span class="linenum">2823</span></a>              <a class="var it20873" onMouseOver="hilite(20873)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a> = <a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>;
<a name="l2824"><span class="linenum">2824</span></a>              return (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it20873" onMouseOver="hilite(20873)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>));
<a name="l2825"><span class="linenum">2825</span></a>          } else {
<a name="l2826"><span class="linenum">2826</span></a>              <a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a> = <a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>;
<a name="l2827"><span class="linenum">2827</span></a>              if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_attempts&quot;, array(&quot;pageid&quot;=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, &quot;userid&quot;=&gt;<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;retry&quot;=&gt;<a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>))) {
<a name="l2828"><span class="linenum">2828</span></a>                  return true;
<a name="l2829"><span class="linenum">2829</span></a>              }
<a name="l2830"><span class="linenum">2830</span></a>          }
<a name="l2831"><span class="linenum">2831</span></a>          return false;
<a name="l2832"><span class="linenum">2832</span></a>      }
<a name="l2833"><span class="linenum">2833</span></a>  
<a name="l2834"><span class="linenum">2834</span></a>      <span class="comment">/**</span>
<a name="l2835"><span class="linenum">2835</span></a>  <span class="comment">     * Checks to see if a page has been answered previously</span>
<a name="l2836"><span class="linenum">2836</span></a>  <span class="comment">     * @param int $nretakes</span>
<a name="l2837"><span class="linenum">2837</span></a>  <span class="comment">     * @return bool</span>
<a name="l2838"><span class="linenum">2838</span></a>  <span class="comment">     */</span>
<a name="l2839"><span class="linenum">2839</span></a>      public function <a class="function" onClick="logFunction('is_unanswered')" href="../../_functions/is_unanswered.html" onMouseOver="funcPopup(event,'is_unanswered')">is_unanswered</a>(<a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>) {
<a name="l2840"><span class="linenum">2840</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l2841"><span class="linenum">2841</span></a>          if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_attempts&quot;, array('pageid'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, 'userid'=&gt;<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'correct'=&gt;1, 'retry'=&gt;<a class="var it20900" onMouseOver="hilite(20900)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>))) {
<a name="l2842"><span class="linenum">2842</span></a>              return true;
<a name="l2843"><span class="linenum">2843</span></a>          }
<a name="l2844"><span class="linenum">2844</span></a>          return false;
<a name="l2845"><span class="linenum">2845</span></a>      }
<a name="l2846"><span class="linenum">2846</span></a>  
<a name="l2847"><span class="linenum">2847</span></a>      <span class="comment">/**</span>
<a name="l2848"><span class="linenum">2848</span></a>  <span class="comment">     * Creates answers within the database for this lesson_page. Usually only ever</span>
<a name="l2849"><span class="linenum">2849</span></a>  <span class="comment">     * called when creating a new page instance</span>
<a name="l2850"><span class="linenum">2850</span></a>  <span class="comment">     * @param object $properties</span>
<a name="l2851"><span class="linenum">2851</span></a>  <span class="comment">     * @return array</span>
<a name="l2852"><span class="linenum">2852</span></a>  <span class="comment">     */</span>
<a name="l2853"><span class="linenum">2853</span></a>      public function <a class="function" onClick="logFunction('create_answers')" href="../../_functions/create_answers.html" onMouseOver="funcPopup(event,'create_answers')">create_answers</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>) {
<a name="l2854"><span class="linenum">2854</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l2855"><span class="linenum">2855</span></a>  <span class="comment">        // now add the answers</span>
<a name="l2856"><span class="linenum">2856</span></a>          <a class="var it10655" onMouseOver="hilite(10655)" onMouseOut="lolite()" onClick="logVariable('newanswer')" href="../../_variables/newanswer.html">$newanswer</a> = new stdClass;
<a name="l2857"><span class="linenum">2857</span></a>          <a class="var it10655" onMouseOver="hilite(10655)" onMouseOut="lolite()" onClick="logVariable('newanswer')" href="../../_variables/newanswer.html">$newanswer</a>-&gt;<a onClick="logVariable('lessonid')" class="var it44664" onMouseOver="hilite(44664)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id;
<a name="l2858"><span class="linenum">2858</span></a>          <a class="var it10655" onMouseOver="hilite(10655)" onMouseOut="lolite()" onClick="logVariable('newanswer')" href="../../_variables/newanswer.html">$newanswer</a>-&gt;<a onClick="logVariable('pageid')" class="var it44664" onMouseOver="hilite(44664)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l2859"><span class="linenum">2859</span></a>          <a class="var it10655" onMouseOver="hilite(10655)" onMouseOut="lolite()" onClick="logVariable('newanswer')" href="../../_variables/newanswer.html">$newanswer</a>-&gt;<a onClick="logVariable('timecreated')" class="var it44664" onMouseOver="hilite(44664)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;timecreated;
<a name="l2860"><span class="linenum">2860</span></a>  
<a name="l2861"><span class="linenum">2861</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;course);
<a name="l2862"><span class="linenum">2862</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2863"><span class="linenum">2863</span></a>  
<a name="l2864"><span class="linenum">2864</span></a>          <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = array();
<a name="l2865"><span class="linenum">2865</span></a>  
<a name="l2866"><span class="linenum">2866</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;maxanswers; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l2867"><span class="linenum">2867</span></a>              <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it10655" onMouseOver="hilite(10655)" onMouseOut="lolite()" onClick="logVariable('newanswer')" href="../../_variables/newanswer.html">$newanswer</a>);
<a name="l2868"><span class="linenum">2868</span></a>  
<a name="l2869"><span class="linenum">2869</span></a>              if (!empty(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2870"><span class="linenum">2870</span></a>                  if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2871"><span class="linenum">2871</span></a>  <span class="comment">                    // Multichoice and true/false pages have an HTML editor.</span>
<a name="l2872"><span class="linenum">2872</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text'];
<a name="l2873"><span class="linenum">2873</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answerformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answerformat.html">answerformat</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['format'];
<a name="l2874"><span class="linenum">2874</span></a>                  } else {
<a name="l2875"><span class="linenum">2875</span></a>  <span class="comment">                    // Branch tables, shortanswer and mumerical pages have only a text field.</span>
<a name="l2876"><span class="linenum">2876</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>];
<a name="l2877"><span class="linenum">2877</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answerformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answerformat.html">answerformat</a> = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l2878"><span class="linenum">2878</span></a>                  }
<a name="l2879"><span class="linenum">2879</span></a>              }
<a name="l2880"><span class="linenum">2880</span></a>              if (!empty(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2881"><span class="linenum">2881</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text'];
<a name="l2882"><span class="linenum">2882</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('responseformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['format'];
<a name="l2883"><span class="linenum">2883</span></a>              }
<a name="l2884"><span class="linenum">2884</span></a>  
<a name="l2885"><span class="linenum">2885</span></a>              if (isset(<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>) &amp;&amp; <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> != '') {
<a name="l2886"><span class="linenum">2886</span></a>                  if (isset(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2887"><span class="linenum">2887</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>];
<a name="l2888"><span class="linenum">2888</span></a>                  }
<a name="l2889"><span class="linenum">2889</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;custom &amp;&amp; isset(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('score')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2890"><span class="linenum">2890</span></a>                      <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/score.html">score</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('score')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>];
<a name="l2891"><span class="linenum">2891</span></a>                  }
<a name="l2892"><span class="linenum">2892</span></a>                  <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l2893"><span class="linenum">2893</span></a>                  if (isset(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2894"><span class="linenum">2894</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_answers_files')" href="../../_functions/save_answers_files.html" onMouseOver="funcPopup(event,'save_answers_files')">save_answers_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('course')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>-&gt;maxbytes, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>,
<a name="l2895"><span class="linenum">2895</span></a>                              <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>], <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]);
<a name="l2896"><span class="linenum">2896</span></a>                  } else {
<a name="l2897"><span class="linenum">2897</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_answers_files')" href="../../_functions/save_answers_files.html" onMouseOver="funcPopup(event,'save_answers_files')">save_answers_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('course')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>-&gt;maxbytes, <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>,
<a name="l2898"><span class="linenum">2898</span></a>                              <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]);
<a name="l2899"><span class="linenum">2899</span></a>                  }
<a name="l2900"><span class="linenum">2900</span></a>                  <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>[<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <span class="keyword">new </span><a class="class" onClick="logClass('lesson_page_answer')" href="../../_classes/lesson_page_answer.html" onMouseOver="classPopup(event,'lesson_page_answer')">lesson_page_answer</a>(<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l2901"><span class="linenum">2901</span></a>              } else {
<a name="l2902"><span class="linenum">2902</span></a>                  break;
<a name="l2903"><span class="linenum">2903</span></a>              }
<a name="l2904"><span class="linenum">2904</span></a>          }
<a name="l2905"><span class="linenum">2905</span></a>  
<a name="l2906"><span class="linenum">2906</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a> = <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>;
<a name="l2907"><span class="linenum">2907</span></a>          return <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>;
<a name="l2908"><span class="linenum">2908</span></a>      }
<a name="l2909"><span class="linenum">2909</span></a>  
<a name="l2910"><span class="linenum">2910</span></a>      <span class="comment">/**</span>
<a name="l2911"><span class="linenum">2911</span></a>  <span class="comment">     * This method MUST be overridden by all question page types, or page types that</span>
<a name="l2912"><span class="linenum">2912</span></a>  <span class="comment">     * wish to score a page.</span>
<a name="l2913"><span class="linenum">2913</span></a>  <span class="comment">     *</span>
<a name="l2914"><span class="linenum">2914</span></a>  <span class="comment">     * The structure of result should always be the same so it is a good idea when</span>
<a name="l2915"><span class="linenum">2915</span></a>  <span class="comment">     * overriding this method on a page type to call</span>
<a name="l2916"><span class="linenum">2916</span></a>  <span class="comment">     * &lt;code&gt;</span>
<a name="l2917"><span class="linenum">2917</span></a>  <span class="comment">     * $result = parent::check_answer();</span>
<a name="l2918"><span class="linenum">2918</span></a>  <span class="comment">     * &lt;/code&gt;</span>
<a name="l2919"><span class="linenum">2919</span></a>  <span class="comment">     * before modifying it as required.</span>
<a name="l2920"><span class="linenum">2920</span></a>  <span class="comment">     *</span>
<a name="l2921"><span class="linenum">2921</span></a>  <span class="comment">     * @return stdClass</span>
<a name="l2922"><span class="linenum">2922</span></a>  <span class="comment">     */</span>
<a name="l2923"><span class="linenum">2923</span></a>      public function <a class="function" onClick="logFunction('check_answer')" href="../../_functions/check_answer.html" onMouseOver="funcPopup(event,'check_answer')">check_answer</a>() {
<a name="l2924"><span class="linenum">2924</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = new stdClass;
<a name="l2925"><span class="linenum">2925</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('answerid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a>        = 0;
<a name="l2926"><span class="linenum">2926</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('noanswer')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/noanswer.html">noanswer</a>        = false;
<a name="l2927"><span class="linenum">2927</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a>   = false;
<a name="l2928"><span class="linenum">2928</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('isessayquestion')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/isessayquestion.html">isessayquestion</a> = false;   <span class="comment">// use this to turn off review button on essay questions</span>
<a name="l2929"><span class="linenum">2929</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>        = '';
<a name="l2930"><span class="linenum">2930</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a>       = 0;       <span class="comment">// stay on the page</span>
<a name="l2931"><span class="linenum">2931</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('studentanswer')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/studentanswer.html">studentanswer</a>   = '';      <span class="comment">// use this to store student's answer(s) in order to display it on feedback page</span>
<a name="l2932"><span class="linenum">2932</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('userresponse')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/userresponse.html">userresponse</a>    = null;
<a name="l2933"><span class="linenum">2933</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>        = '';
<a name="l2934"><span class="linenum">2934</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('nodefaultresponse')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/nodefaultresponse.html">nodefaultresponse</a>  = false; <span class="comment">// Flag for redirecting when default feedback is turned off</span>
<a name="l2935"><span class="linenum">2935</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l2936"><span class="linenum">2936</span></a>      }
<a name="l2937"><span class="linenum">2937</span></a>  
<a name="l2938"><span class="linenum">2938</span></a>      <span class="comment">/**</span>
<a name="l2939"><span class="linenum">2939</span></a>  <span class="comment">     * True if the page uses a custom option</span>
<a name="l2940"><span class="linenum">2940</span></a>  <span class="comment">     *</span>
<a name="l2941"><span class="linenum">2941</span></a>  <span class="comment">     * Should be override and set to true if the page uses a custom option.</span>
<a name="l2942"><span class="linenum">2942</span></a>  <span class="comment">     *</span>
<a name="l2943"><span class="linenum">2943</span></a>  <span class="comment">     * @return bool</span>
<a name="l2944"><span class="linenum">2944</span></a>  <span class="comment">     */</span>
<a name="l2945"><span class="linenum">2945</span></a>      public function <a class="function" onClick="logFunction('has_option')" href="../../_functions/has_option.html" onMouseOver="funcPopup(event,'has_option')">has_option</a>() {
<a name="l2946"><span class="linenum">2946</span></a>          return false;
<a name="l2947"><span class="linenum">2947</span></a>      }
<a name="l2948"><span class="linenum">2948</span></a>  
<a name="l2949"><span class="linenum">2949</span></a>      <span class="comment">/**</span>
<a name="l2950"><span class="linenum">2950</span></a>  <span class="comment">     * Returns the maximum number of answers for this page given the maximum number</span>
<a name="l2951"><span class="linenum">2951</span></a>  <span class="comment">     * of answers permitted by the lesson.</span>
<a name="l2952"><span class="linenum">2952</span></a>  <span class="comment">     *</span>
<a name="l2953"><span class="linenum">2953</span></a>  <span class="comment">     * @param int $default</span>
<a name="l2954"><span class="linenum">2954</span></a>  <span class="comment">     * @return int</span>
<a name="l2955"><span class="linenum">2955</span></a>  <span class="comment">     */</span>
<a name="l2956"><span class="linenum">2956</span></a>      public function <a class="function" onClick="logFunction('max_answers')" href="../../_functions/max_answers.html" onMouseOver="funcPopup(event,'max_answers')">max_answers</a>(<a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a>) {
<a name="l2957"><span class="linenum">2957</span></a>          return <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a>;
<a name="l2958"><span class="linenum">2958</span></a>      }
<a name="l2959"><span class="linenum">2959</span></a>  
<a name="l2960"><span class="linenum">2960</span></a>      <span class="comment">/**</span>
<a name="l2961"><span class="linenum">2961</span></a>  <span class="comment">     * Returns the properties of this lesson page as an object</span>
<a name="l2962"><span class="linenum">2962</span></a>  <span class="comment">     * @return stdClass;</span>
<a name="l2963"><span class="linenum">2963</span></a>  <span class="comment">     */</span>
<a name="l2964"><span class="linenum">2964</span></a>      public function <a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>() {
<a name="l2965"><span class="linenum">2965</span></a>          <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>);
<a name="l2966"><span class="linenum">2966</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a> === null) {
<a name="l2967"><span class="linenum">2967</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_answers')" href="../../_functions/get_answers.html" onMouseOver="funcPopup(event,'get_answers')">get_answers</a>();
<a name="l2968"><span class="linenum">2968</span></a>          }
<a name="l2969"><span class="linenum">2969</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>)&gt;0) {
<a name="l2970"><span class="linenum">2970</span></a>              <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = 0;
<a name="l2971"><span class="linenum">2971</span></a>              <a class="var it260" onMouseOver="hilite(260)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../../_variables/qtype.html">$qtype</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('qtype')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>;
<a name="l2972"><span class="linenum">2972</span></a>              foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a> as <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>) {
<a name="l2973"><span class="linenum">2973</span></a>                  <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;{'answer_editor['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']'} = array('text' =&gt; <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>, 'format' =&gt; <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answerformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answerformat.html">answerformat</a>);
<a name="l2974"><span class="linenum">2974</span></a>                  if (<a class="var it260" onMouseOver="hilite(260)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../../_variables/qtype.html">$qtype</a> != <a class="constant" onClick="logConstant('LESSON_PAGE_MATCHING')" href="../../_constants/LESSON_PAGE_MATCHING.html" onMouseOver="constPopup(event,'LESSON_PAGE_MATCHING')">LESSON_PAGE_MATCHING</a>) {
<a name="l2975"><span class="linenum">2975</span></a>                      <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;{'response_editor['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']'} = array('text' =&gt; <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, 'format' =&gt; <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('responseformat')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a>);
<a name="l2976"><span class="linenum">2976</span></a>                  } else {
<a name="l2977"><span class="linenum">2977</span></a>                      <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;{'response_editor['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']'} = <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>;
<a name="l2978"><span class="linenum">2978</span></a>                  }
<a name="l2979"><span class="linenum">2979</span></a>                  <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;{'jumpto['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']'} = <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>;
<a name="l2980"><span class="linenum">2980</span></a>                  <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;{'score['.<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']'} = <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>;
<a name="l2981"><span class="linenum">2981</span></a>                  <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>++;
<a name="l2982"><span class="linenum">2982</span></a>              }
<a name="l2983"><span class="linenum">2983</span></a>          }
<a name="l2984"><span class="linenum">2984</span></a>          return <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>;
<a name="l2985"><span class="linenum">2985</span></a>      }
<a name="l2986"><span class="linenum">2986</span></a>  
<a name="l2987"><span class="linenum">2987</span></a>      <span class="comment">/**</span>
<a name="l2988"><span class="linenum">2988</span></a>  <span class="comment">     * Returns an array of options to display when choosing the jumpto for a page/answer</span>
<a name="l2989"><span class="linenum">2989</span></a>  <span class="comment">     * @static</span>
<a name="l2990"><span class="linenum">2990</span></a>  <span class="comment">     * @param int $pageid</span>
<a name="l2991"><span class="linenum">2991</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l2992"><span class="linenum">2992</span></a>  <span class="comment">     * @return array</span>
<a name="l2993"><span class="linenum">2993</span></a>  <span class="comment">     */</span>
<a name="l2994"><span class="linenum">2994</span></a>      public static function <a class="function" onClick="logFunction('get_jumptooptions')" href="../../_functions/get_jumptooptions.html" onMouseOver="funcPopup(event,'get_jumptooptions')">get_jumptooptions</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, lesson <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l2995"><span class="linenum">2995</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2996"><span class="linenum">2996</span></a>          <a class="var it10650" onMouseOver="hilite(10650)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a> = array();
<a name="l2997"><span class="linenum">2997</span></a>          <a class="var it10650" onMouseOver="hilite(10650)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[0] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;thispage&quot;, &quot;lesson&quot;);
<a name="l2998"><span class="linenum">2998</span></a>          <a class="var it10650" onMouseOver="hilite(10650)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;nextpage&quot;, &quot;lesson&quot;);
<a name="l2999"><span class="linenum">2999</span></a>          <a class="var it10650" onMouseOver="hilite(10650)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="constant" onClick="logConstant('LESSON_PREVIOUSPAGE')" href="../../_constants/LESSON_PREVIOUSPAGE.html" onMouseOver="constPopup(event,'LESSON_PREVIOUSPAGE')">LESSON_PREVIOUSPAGE</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;previouspage&quot;, &quot;lesson&quot;);
<a name="l3000"><span class="linenum">3000</span></a>          <a class="var it10650" onMouseOver="hilite(10650)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;endoflesson&quot;, &quot;lesson&quot;);
<a name="l3001"><span class="linenum">3001</span></a>  
<a name="l3002"><span class="linenum">3002</span></a>          if (<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> == 0) {
<a name="l3003"><span class="linenum">3003</span></a>              return <a class="var it10650" onMouseOver="hilite(10650)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>;
<a name="l3004"><span class="linenum">3004</span></a>          }
<a name="l3005"><span class="linenum">3005</span></a>  
<a name="l3006"><span class="linenum">3006</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l3007"><span class="linenum">3007</span></a>          if (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a> || <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('is_sub_page_of_type')" href="../../_functions/is_sub_page_of_type.html" onMouseOver="funcPopup(event,'is_sub_page_of_type')">is_sub_page_of_type</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>), array(<a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>, <a class="constant" onClick="logConstant('LESSON_PAGE_CLUSTER')" href="../../_constants/LESSON_PAGE_CLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_CLUSTER')">LESSON_PAGE_CLUSTER</a>))) {
<a name="l3008"><span class="linenum">3008</span></a>              <a class="var it10650" onMouseOver="hilite(10650)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="constant" onClick="logConstant('LESSON_UNSEENBRANCHPAGE')" href="../../_constants/LESSON_UNSEENBRANCHPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENBRANCHPAGE')">LESSON_UNSEENBRANCHPAGE</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;unseenpageinbranch&quot;, &quot;lesson&quot;);
<a name="l3009"><span class="linenum">3009</span></a>              <a class="var it10650" onMouseOver="hilite(10650)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="constant" onClick="logConstant('LESSON_RANDOMPAGE')" href="../../_constants/LESSON_RANDOMPAGE.html" onMouseOver="constPopup(event,'LESSON_RANDOMPAGE')">LESSON_RANDOMPAGE</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;randompageinbranch&quot;, &quot;lesson&quot;);
<a name="l3010"><span class="linenum">3010</span></a>          }
<a name="l3011"><span class="linenum">3011</span></a>          if(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_CLUSTER')" href="../../_constants/LESSON_PAGE_CLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_CLUSTER')">LESSON_PAGE_CLUSTER</a> || <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('is_sub_page_of_type')" href="../../_functions/is_sub_page_of_type.html" onMouseOver="funcPopup(event,'is_sub_page_of_type')">is_sub_page_of_type</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_CLUSTER')" href="../../_constants/LESSON_PAGE_CLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_CLUSTER')">LESSON_PAGE_CLUSTER</a>), array(<a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFCLUSTER')" href="../../_constants/LESSON_PAGE_ENDOFCLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFCLUSTER')">LESSON_PAGE_ENDOFCLUSTER</a>))) {
<a name="l3012"><span class="linenum">3012</span></a>              <a class="var it10650" onMouseOver="hilite(10650)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="constant" onClick="logConstant('LESSON_CLUSTERJUMP')" href="../../_constants/LESSON_CLUSTERJUMP.html" onMouseOver="constPopup(event,'LESSON_CLUSTERJUMP')">LESSON_CLUSTERJUMP</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;clusterjump&quot;, &quot;lesson&quot;);
<a name="l3013"><span class="linenum">3013</span></a>          }
<a name="l3014"><span class="linenum">3014</span></a>          if (!<a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('firstpage', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>)) {
<a name="l3015"><span class="linenum">3015</span></a>              <a class="var it20901" onMouseOver="hilite(20901)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(&quot;lesson_pages&quot;, &quot;id&quot;, array(&quot;lessonid&quot; =&gt; <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;prevpageid&quot; =&gt; 0));
<a name="l3016"><span class="linenum">3016</span></a>              while (true) {
<a name="l3017"><span class="linenum">3017</span></a>                  if (<a class="var it20901" onMouseOver="hilite(20901)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a>) {
<a name="l3018"><span class="linenum">3018</span></a>                      <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(&quot;lesson_pages&quot;, &quot;title&quot;, array(&quot;id&quot; =&gt; <a class="var it20901" onMouseOver="hilite(20901)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a>));
<a name="l3019"><span class="linenum">3019</span></a>                      <a class="var it10650" onMouseOver="hilite(10650)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="var it20901" onMouseOver="hilite(20901)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a>] = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>,true));
<a name="l3020"><span class="linenum">3020</span></a>                      <a class="var it20901" onMouseOver="hilite(20901)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(&quot;lesson_pages&quot;, &quot;nextpageid&quot;, array(&quot;id&quot; =&gt; <a class="var it20901" onMouseOver="hilite(20901)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a>));
<a name="l3021"><span class="linenum">3021</span></a>                  } else {
<a name="l3022"><span class="linenum">3022</span></a>  <span class="comment">                    // last page reached</span>
<a name="l3023"><span class="linenum">3023</span></a>                      break;
<a name="l3024"><span class="linenum">3024</span></a>                  }
<a name="l3025"><span class="linenum">3025</span></a>              }
<a name="l3026"><span class="linenum">3026</span></a>          }
<a name="l3027"><span class="linenum">3027</span></a>          return <a class="var it10650" onMouseOver="hilite(10650)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>;
<a name="l3028"><span class="linenum">3028</span></a>      }
<a name="l3029"><span class="linenum">3029</span></a>      <span class="comment">/**</span>
<a name="l3030"><span class="linenum">3030</span></a>  <span class="comment">     * Returns the contents field for the page properly formatted and with plugin</span>
<a name="l3031"><span class="linenum">3031</span></a>  <span class="comment">     * file url's converted</span>
<a name="l3032"><span class="linenum">3032</span></a>  <span class="comment">     * @return string</span>
<a name="l3033"><span class="linenum">3033</span></a>  <span class="comment">     */</span>
<a name="l3034"><span class="linenum">3034</span></a>      public function <a class="function" onClick="logFunction('get_contents')" href="../../_functions/get_contents.html" onMouseOver="funcPopup(event,'get_contents')">get_contents</a>() {
<a name="l3035"><span class="linenum">3035</span></a>          global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l3036"><span class="linenum">3036</span></a>          if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;contents)) {
<a name="l3037"><span class="linenum">3037</span></a>              if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;contentsformat)) {
<a name="l3038"><span class="linenum">3038</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;contentsformat = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l3039"><span class="linenum">3039</span></a>              }
<a name="l3040"><span class="linenum">3040</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id);
<a name="l3041"><span class="linenum">3041</span></a>              <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;contents, '<a class="filename" href="../../pluginfile.php.html">pluginfile.php</a>', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson',
<a name="l3042"><span class="linenum">3042</span></a>                                                       'page_contents', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id);  <span class="comment">// Must do this BEFORE format_text()!</span>
<a name="l3043"><span class="linenum">3043</span></a>              return <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;contentsformat,
<a name="l3044"><span class="linenum">3044</span></a>                                 array('context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, 'noclean' =&gt; true,
<a name="l3045"><span class="linenum">3045</span></a>                                       'overflowdiv' =&gt; true));  <span class="comment">// Page edit is marked with XSS, we want all content here.</span>
<a name="l3046"><span class="linenum">3046</span></a>          } else {
<a name="l3047"><span class="linenum">3047</span></a>              return '';
<a name="l3048"><span class="linenum">3048</span></a>          }
<a name="l3049"><span class="linenum">3049</span></a>      }
<a name="l3050"><span class="linenum">3050</span></a>  
<a name="l3051"><span class="linenum">3051</span></a>      <span class="comment">/**</span>
<a name="l3052"><span class="linenum">3052</span></a>  <span class="comment">     * Set to true if this page should display in the menu block</span>
<a name="l3053"><span class="linenum">3053</span></a>  <span class="comment">     * @return bool</span>
<a name="l3054"><span class="linenum">3054</span></a>  <span class="comment">     */</span>
<a name="l3055"><span class="linenum">3055</span></a>      protected function <a class="function" onClick="logFunction('get_displayinmenublock')" href="../../_functions/get_displayinmenublock.html" onMouseOver="funcPopup(event,'get_displayinmenublock')">get_displayinmenublock</a>() {
<a name="l3056"><span class="linenum">3056</span></a>          return false;
<a name="l3057"><span class="linenum">3057</span></a>      }
<a name="l3058"><span class="linenum">3058</span></a>  
<a name="l3059"><span class="linenum">3059</span></a>      <span class="comment">/**</span>
<a name="l3060"><span class="linenum">3060</span></a>  <span class="comment">     * Get the string that describes the options of this page type</span>
<a name="l3061"><span class="linenum">3061</span></a>  <span class="comment">     * @return string</span>
<a name="l3062"><span class="linenum">3062</span></a>  <span class="comment">     */</span>
<a name="l3063"><span class="linenum">3063</span></a>      public function <a class="function" onClick="logFunction('option_description_string')" href="../../_functions/option_description_string.html" onMouseOver="funcPopup(event,'option_description_string')">option_description_string</a>() {
<a name="l3064"><span class="linenum">3064</span></a>          return '';
<a name="l3065"><span class="linenum">3065</span></a>      }
<a name="l3066"><span class="linenum">3066</span></a>  
<a name="l3067"><span class="linenum">3067</span></a>      <span class="comment">/**</span>
<a name="l3068"><span class="linenum">3068</span></a>  <span class="comment">     * Updates a table with the answers for this page</span>
<a name="l3069"><span class="linenum">3069</span></a>  <span class="comment">     * @param html_table $table</span>
<a name="l3070"><span class="linenum">3070</span></a>  <span class="comment">     * @return html_table</span>
<a name="l3071"><span class="linenum">3071</span></a>  <span class="comment">     */</span>
<a name="l3072"><span class="linenum">3072</span></a>      public function <a class="function" onClick="logFunction('display_answers')" href="../../_functions/display_answers.html" onMouseOver="funcPopup(event,'display_answers')">display_answers</a>(html_table <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>) {
<a name="l3073"><span class="linenum">3073</span></a>          <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_answers')" href="../../_functions/get_answers.html" onMouseOver="funcPopup(event,'get_answers')">get_answers</a>();
<a name="l3074"><span class="linenum">3074</span></a>          <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 1;
<a name="l3075"><span class="linenum">3075</span></a>          foreach (<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> as <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>) {
<a name="l3076"><span class="linenum">3076</span></a>              <a class="var it909" onMouseOver="hilite(909)" onMouseOut="lolite()" onClick="logVariable('cells')" href="../../_variables/cells.html">$cells</a> = array();
<a name="l3077"><span class="linenum">3077</span></a>              <a class="var it909" onMouseOver="hilite(909)" onMouseOut="lolite()" onClick="logVariable('cells')" href="../../_variables/cells.html">$cells</a>[] = &quot;&lt;span class=\&quot;label\&quot;&gt;&quot;.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;jump&quot;, &quot;lesson&quot;).&quot; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&lt;span&gt;: &quot;;
<a name="l3078"><span class="linenum">3078</span></a>              <a class="var it909" onMouseOver="hilite(909)" onMouseOut="lolite()" onClick="logVariable('cells')" href="../../_variables/cells.html">$cells</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_jump_name')" href="../../_functions/get_jump_name.html" onMouseOver="funcPopup(event,'get_jump_name')">get_jump_name</a>(<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>);
<a name="l3079"><span class="linenum">3079</span></a>              <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('html_table_row')" href="../../_classes/html_table_row.html" onMouseOver="classPopup(event,'html_table_row')">html_table_row</a>(<a class="var it909" onMouseOver="hilite(909)" onMouseOut="lolite()" onClick="logVariable('cells')" href="../../_variables/cells.html">$cells</a>);
<a name="l3080"><span class="linenum">3080</span></a>              if (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> === 1){
<a name="l3081"><span class="linenum">3081</span></a>                  <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>[<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>)-1]-&gt;cells[0]-&gt;style = 'width:20%;';
<a name="l3082"><span class="linenum">3082</span></a>              }
<a name="l3083"><span class="linenum">3083</span></a>              <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++;
<a name="l3084"><span class="linenum">3084</span></a>          }
<a name="l3085"><span class="linenum">3085</span></a>          return <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>;
<a name="l3086"><span class="linenum">3086</span></a>      }
<a name="l3087"><span class="linenum">3087</span></a>  
<a name="l3088"><span class="linenum">3088</span></a>      <span class="comment">/**</span>
<a name="l3089"><span class="linenum">3089</span></a>  <span class="comment">     * Determines if this page should be grayed out on the management/report screens</span>
<a name="l3090"><span class="linenum">3090</span></a>  <span class="comment">     * @return int 0 or 1</span>
<a name="l3091"><span class="linenum">3091</span></a>  <span class="comment">     */</span>
<a name="l3092"><span class="linenum">3092</span></a>      protected function <a class="function" onClick="logFunction('get_grayout')" href="../../_functions/get_grayout.html" onMouseOver="funcPopup(event,'get_grayout')">get_grayout</a>() {
<a name="l3093"><span class="linenum">3093</span></a>          return 0;
<a name="l3094"><span class="linenum">3094</span></a>      }
<a name="l3095"><span class="linenum">3095</span></a>  
<a name="l3096"><span class="linenum">3096</span></a>      <span class="comment">/**</span>
<a name="l3097"><span class="linenum">3097</span></a>  <span class="comment">     * Adds stats for this page to the &amp;pagestats object. This should be defined</span>
<a name="l3098"><span class="linenum">3098</span></a>  <span class="comment">     * for all page types that grade</span>
<a name="l3099"><span class="linenum">3099</span></a>  <span class="comment">     * @param array $pagestats</span>
<a name="l3100"><span class="linenum">3100</span></a>  <span class="comment">     * @param int $tries</span>
<a name="l3101"><span class="linenum">3101</span></a>  <span class="comment">     * @return bool</span>
<a name="l3102"><span class="linenum">3102</span></a>  <span class="comment">     */</span>
<a name="l3103"><span class="linenum">3103</span></a>      public function <a class="function" onClick="logFunction('stats')" href="../../_functions/stats.html" onMouseOver="funcPopup(event,'stats')">stats</a>(array &amp;<a class="var it3043" onMouseOver="hilite(3043)" onMouseOut="lolite()" onClick="logVariable('pagestats')" href="../../_variables/pagestats.html">$pagestats</a>, <a class="var it3044" onMouseOver="hilite(3044)" onMouseOut="lolite()" onClick="logVariable('tries')" href="../../_variables/tries.html">$tries</a>) {
<a name="l3104"><span class="linenum">3104</span></a>          return true;
<a name="l3105"><span class="linenum">3105</span></a>      }
<a name="l3106"><span class="linenum">3106</span></a>  
<a name="l3107"><span class="linenum">3107</span></a>      <span class="comment">/**</span>
<a name="l3108"><span class="linenum">3108</span></a>  <span class="comment">     * Formats the answers of this page for a report</span>
<a name="l3109"><span class="linenum">3109</span></a>  <span class="comment">     *</span>
<a name="l3110"><span class="linenum">3110</span></a>  <span class="comment">     * @param object $answerpage</span>
<a name="l3111"><span class="linenum">3111</span></a>  <span class="comment">     * @param object $answerdata</span>
<a name="l3112"><span class="linenum">3112</span></a>  <span class="comment">     * @param object $useranswer</span>
<a name="l3113"><span class="linenum">3113</span></a>  <span class="comment">     * @param array $pagestats</span>
<a name="l3114"><span class="linenum">3114</span></a>  <span class="comment">     * @param int $i Count of first level answers</span>
<a name="l3115"><span class="linenum">3115</span></a>  <span class="comment">     * @param int $n Count of second level answers</span>
<a name="l3116"><span class="linenum">3116</span></a>  <span class="comment">     * @return object The answer page for this</span>
<a name="l3117"><span class="linenum">3117</span></a>  <span class="comment">     */</span>
<a name="l3118"><span class="linenum">3118</span></a>      public function <a class="function" onClick="logFunction('report_answers')" href="../../_functions/report_answers.html" onMouseOver="funcPopup(event,'report_answers')">report_answers</a>(<a class="var it3045" onMouseOver="hilite(3045)" onMouseOut="lolite()" onClick="logVariable('answerpage')" href="../../_variables/answerpage.html">$answerpage</a>, <a class="var it3046" onMouseOver="hilite(3046)" onMouseOut="lolite()" onClick="logVariable('answerdata')" href="../../_variables/answerdata.html">$answerdata</a>, <a class="var it3032" onMouseOver="hilite(3032)" onMouseOut="lolite()" onClick="logVariable('useranswer')" href="../../_variables/useranswer.html">$useranswer</a>, <a class="var it3043" onMouseOver="hilite(3043)" onMouseOut="lolite()" onClick="logVariable('pagestats')" href="../../_variables/pagestats.html">$pagestats</a>, &amp;<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, &amp;<a class="var it2074" onMouseOver="hilite(2074)" onMouseOut="lolite()" onClick="logVariable('n')" href="../../_variables/n.html">$n</a>) {
<a name="l3119"><span class="linenum">3119</span></a>          <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_answers')" href="../../_functions/get_answers.html" onMouseOver="funcPopup(event,'get_answers')">get_answers</a>();
<a name="l3120"><span class="linenum">3120</span></a>          <a class="var it3034" onMouseOver="hilite(3034)" onMouseOut="lolite()" onClick="logVariable('formattextdefoptions')" href="../../_variables/formattextdefoptions.html">$formattextdefoptions</a> = new stdClass;
<a name="l3121"><span class="linenum">3121</span></a>          <a class="var it3034" onMouseOver="hilite(3034)" onMouseOut="lolite()" onClick="logVariable('formattextdefoptions')" href="../../_variables/formattextdefoptions.html">$formattextdefoptions</a>-&gt;<a onClick="logVariable('para')" class="var it44761" onMouseOver="hilite(44761)" onMouseOut="lolite()" href="../../_variables/para.html">para</a> = false;  <span class="comment">//I'll use it widely in this page</span>
<a name="l3122"><span class="linenum">3122</span></a>          foreach (<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> as <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>) {
<a name="l3123"><span class="linenum">3123</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('jumpsto', 'lesson', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_jump_name')" href="../../_functions/get_jump_name.html" onMouseOver="funcPopup(event,'get_jump_name')">get_jump_name</a>(<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>));
<a name="l3124"><span class="linenum">3124</span></a>              <a class="var it3046" onMouseOver="hilite(3046)" onMouseOut="lolite()" onClick="logVariable('answerdata')" href="../../_variables/answerdata.html">$answerdata</a>-&gt;<a onClick="logVariable('answers')" class="var it44791" onMouseOver="hilite(44791)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[] = array(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, &quot;&quot;);
<a name="l3125"><span class="linenum">3125</span></a>              <a class="var it3045" onMouseOver="hilite(3045)" onMouseOut="lolite()" onClick="logVariable('answerpage')" href="../../_variables/answerpage.html">$answerpage</a>-&gt;<a onClick="logVariable('answerdata')" class="var it44792" onMouseOver="hilite(44792)" onMouseOut="lolite()" href="../../_variables/answerdata.html">answerdata</a> = <a class="var it3046" onMouseOver="hilite(3046)" onMouseOut="lolite()" onClick="logVariable('answerdata')" href="../../_variables/answerdata.html">$answerdata</a>;
<a name="l3126"><span class="linenum">3126</span></a>          }
<a name="l3127"><span class="linenum">3127</span></a>          return <a class="var it3045" onMouseOver="hilite(3045)" onMouseOut="lolite()" onClick="logVariable('answerpage')" href="../../_variables/answerpage.html">$answerpage</a>;
<a name="l3128"><span class="linenum">3128</span></a>      }
<a name="l3129"><span class="linenum">3129</span></a>  
<a name="l3130"><span class="linenum">3130</span></a>      <span class="comment">/**</span>
<a name="l3131"><span class="linenum">3131</span></a>  <span class="comment">     * Gets an array of the jumps used by the answers of this page</span>
<a name="l3132"><span class="linenum">3132</span></a>  <span class="comment">     *</span>
<a name="l3133"><span class="linenum">3133</span></a>  <span class="comment">     * @return array</span>
<a name="l3134"><span class="linenum">3134</span></a>  <span class="comment">     */</span>
<a name="l3135"><span class="linenum">3135</span></a>      public function <a class="function" onClick="logFunction('get_jumps')" href="../../_functions/get_jumps.html" onMouseOver="funcPopup(event,'get_jumps')">get_jumps</a>() {
<a name="l3136"><span class="linenum">3136</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3137"><span class="linenum">3137</span></a>          <a class="var it12179" onMouseOver="hilite(12179)" onMouseOut="lolite()" onClick="logVariable('jumps')" href="../../_variables/jumps.html">$jumps</a> = array();
<a name="l3138"><span class="linenum">3138</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array (&quot;lessonid&quot; =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id, &quot;pageid&quot; =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id);
<a name="l3139"><span class="linenum">3139</span></a>          if (<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_answers')" href="../../_functions/get_answers.html" onMouseOver="funcPopup(event,'get_answers')">get_answers</a>()) {
<a name="l3140"><span class="linenum">3140</span></a>              foreach (<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> as <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>) {
<a name="l3141"><span class="linenum">3141</span></a>                  <a class="var it12179" onMouseOver="hilite(12179)" onMouseOut="lolite()" onClick="logVariable('jumps')" href="../../_variables/jumps.html">$jumps</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_jump_name')" href="../../_functions/get_jump_name.html" onMouseOver="funcPopup(event,'get_jump_name')">get_jump_name</a>(<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>);
<a name="l3142"><span class="linenum">3142</span></a>              }
<a name="l3143"><span class="linenum">3143</span></a>          } else {
<a name="l3144"><span class="linenum">3144</span></a>              <a class="var it12179" onMouseOver="hilite(12179)" onMouseOut="lolite()" onClick="logVariable('jumps')" href="../../_variables/jumps.html">$jumps</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_jump_name')" href="../../_functions/get_jump_name.html" onMouseOver="funcPopup(event,'get_jump_name')">get_jump_name</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid);
<a name="l3145"><span class="linenum">3145</span></a>          }
<a name="l3146"><span class="linenum">3146</span></a>          return <a class="var it12179" onMouseOver="hilite(12179)" onMouseOut="lolite()" onClick="logVariable('jumps')" href="../../_variables/jumps.html">$jumps</a>;
<a name="l3147"><span class="linenum">3147</span></a>      }
<a name="l3148"><span class="linenum">3148</span></a>      <span class="comment">/**</span>
<a name="l3149"><span class="linenum">3149</span></a>  <span class="comment">     * Informs whether this page type require manual grading or not</span>
<a name="l3150"><span class="linenum">3150</span></a>  <span class="comment">     * @return bool</span>
<a name="l3151"><span class="linenum">3151</span></a>  <span class="comment">     */</span>
<a name="l3152"><span class="linenum">3152</span></a>      public function <a class="function" onClick="logFunction('requires_manual_grading')" href="../../_functions/requires_manual_grading.html" onMouseOver="funcPopup(event,'requires_manual_grading')">requires_manual_grading</a>() {
<a name="l3153"><span class="linenum">3153</span></a>          return false;
<a name="l3154"><span class="linenum">3154</span></a>      }
<a name="l3155"><span class="linenum">3155</span></a>  
<a name="l3156"><span class="linenum">3156</span></a>      <span class="comment">/**</span>
<a name="l3157"><span class="linenum">3157</span></a>  <span class="comment">     * A callback method that allows a page to override the next page a user will</span>
<a name="l3158"><span class="linenum">3158</span></a>  <span class="comment">     * see during when this page is being completed.</span>
<a name="l3159"><span class="linenum">3159</span></a>  <span class="comment">     * @return false|int</span>
<a name="l3160"><span class="linenum">3160</span></a>  <span class="comment">     */</span>
<a name="l3161"><span class="linenum">3161</span></a>      public function <a class="function" onClick="logFunction('override_next_page')" href="../../_functions/override_next_page.html" onMouseOver="funcPopup(event,'override_next_page')">override_next_page</a>() {
<a name="l3162"><span class="linenum">3162</span></a>          return false;
<a name="l3163"><span class="linenum">3163</span></a>      }
<a name="l3164"><span class="linenum">3164</span></a>  
<a name="l3165"><span class="linenum">3165</span></a>      <span class="comment">/**</span>
<a name="l3166"><span class="linenum">3166</span></a>  <span class="comment">     * This method is used to determine if this page is a valid page</span>
<a name="l3167"><span class="linenum">3167</span></a>  <span class="comment">     *</span>
<a name="l3168"><span class="linenum">3168</span></a>  <span class="comment">     * @param array $validpages</span>
<a name="l3169"><span class="linenum">3169</span></a>  <span class="comment">     * @param array $pageviews</span>
<a name="l3170"><span class="linenum">3170</span></a>  <span class="comment">     * @return int The next page id to check</span>
<a name="l3171"><span class="linenum">3171</span></a>  <span class="comment">     */</span>
<a name="l3172"><span class="linenum">3172</span></a>      public function <a class="function" onClick="logFunction('valid_page_and_view')" href="../../_functions/valid_page_and_view.html" onMouseOver="funcPopup(event,'valid_page_and_view')">valid_page_and_view</a>(&amp;<a class="var it10652" onMouseOver="hilite(10652)" onMouseOut="lolite()" onClick="logVariable('validpages')" href="../../_variables/validpages.html">$validpages</a>, &amp;<a class="var it1011" onMouseOver="hilite(1011)" onMouseOut="lolite()" onClick="logVariable('pageviews')" href="../../_variables/pageviews.html">$pageviews</a>) {
<a name="l3173"><span class="linenum">3173</span></a>          <a class="var it10652" onMouseOver="hilite(10652)" onMouseOut="lolite()" onClick="logVariable('validpages')" href="../../_variables/validpages.html">$validpages</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id] = 1;
<a name="l3174"><span class="linenum">3174</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid;
<a name="l3175"><span class="linenum">3175</span></a>      }
<a name="l3176"><span class="linenum">3176</span></a>  }
<a name="l3177"><span class="linenum">3177</span></a>  
<a name="l3178"><span class="linenum">3178</span></a>  
<a name="l3179"><span class="linenum">3179</span></a>  
<a name="l3180"><span class="linenum">3180</span></a>  <span class="comment">/**</span>
<a name="l3181"><span class="linenum">3181</span></a>  <span class="comment"> * Class used to represent an answer to a page</span>
<a name="l3182"><span class="linenum">3182</span></a>  <span class="comment"> *</span>
<a name="l3183"><span class="linenum">3183</span></a>  <span class="comment"> * @property int $id The ID of this answer in the database</span>
<a name="l3184"><span class="linenum">3184</span></a>  <span class="comment"> * @property int $lessonid The ID of the lesson this answer belongs to</span>
<a name="l3185"><span class="linenum">3185</span></a>  <span class="comment"> * @property int $pageid The ID of the page this answer belongs to</span>
<a name="l3186"><span class="linenum">3186</span></a>  <span class="comment"> * @property int $jumpto Identifies where the user goes upon completing a page with this answer</span>
<a name="l3187"><span class="linenum">3187</span></a>  <span class="comment"> * @property int $grade The grade this answer is worth</span>
<a name="l3188"><span class="linenum">3188</span></a>  <span class="comment"> * @property int $score The score this answer will give</span>
<a name="l3189"><span class="linenum">3189</span></a>  <span class="comment"> * @property int $flags Used to store options for the answer</span>
<a name="l3190"><span class="linenum">3190</span></a>  <span class="comment"> * @property int $timecreated A timestamp of when the answer was created</span>
<a name="l3191"><span class="linenum">3191</span></a>  <span class="comment"> * @property int $timemodified A timestamp of when the answer was modified</span>
<a name="l3192"><span class="linenum">3192</span></a>  <span class="comment"> * @property string $answer The answer itself</span>
<a name="l3193"><span class="linenum">3193</span></a>  <span class="comment"> * @property string $response The response the user sees if selecting this answer</span>
<a name="l3194"><span class="linenum">3194</span></a>  <span class="comment"> *</span>
<a name="l3195"><span class="linenum">3195</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l3196"><span class="linenum">3196</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3197"><span class="linenum">3197</span></a>  <span class="comment"> */</span>
<a name="l3198"><span class="linenum">3198</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('lesson_page_answer')" href="../../_classes/lesson_page_answer.html" onMouseOver="classPopup(event,'lesson_page_answer')">lesson_page_answer</a> extends lesson_base {
<a name="l3199"><span class="linenum">3199</span></a>  
<a name="l3200"><span class="linenum">3200</span></a>      <span class="comment">/**</span>
<a name="l3201"><span class="linenum">3201</span></a>  <span class="comment">     * Loads an page answer from the DB</span>
<a name="l3202"><span class="linenum">3202</span></a>  <span class="comment">     *</span>
<a name="l3203"><span class="linenum">3203</span></a>  <span class="comment">     * @param int $id</span>
<a name="l3204"><span class="linenum">3204</span></a>  <span class="comment">     * @return lesson_page_answer</span>
<a name="l3205"><span class="linenum">3205</span></a>  <span class="comment">     */</span>
<a name="l3206"><span class="linenum">3206</span></a>      public static function <a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l3207"><span class="linenum">3207</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3208"><span class="linenum">3208</span></a>          <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;lesson_answers&quot;, array(&quot;id&quot; =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l3209"><span class="linenum">3209</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('lesson_page_answer')" href="../../_classes/lesson_page_answer.html" onMouseOver="classPopup(event,'lesson_page_answer')">lesson_page_answer</a>(<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l3210"><span class="linenum">3210</span></a>      }
<a name="l3211"><span class="linenum">3211</span></a>  
<a name="l3212"><span class="linenum">3212</span></a>      <span class="comment">/**</span>
<a name="l3213"><span class="linenum">3213</span></a>  <span class="comment">     * Given an object of properties and a page created answer(s) and saves them</span>
<a name="l3214"><span class="linenum">3214</span></a>  <span class="comment">     * in the database.</span>
<a name="l3215"><span class="linenum">3215</span></a>  <span class="comment">     *</span>
<a name="l3216"><span class="linenum">3216</span></a>  <span class="comment">     * @param stdClass $properties</span>
<a name="l3217"><span class="linenum">3217</span></a>  <span class="comment">     * @param lesson_page $page</span>
<a name="l3218"><span class="linenum">3218</span></a>  <span class="comment">     * @return array</span>
<a name="l3219"><span class="linenum">3219</span></a>  <span class="comment">     */</span>
<a name="l3220"><span class="linenum">3220</span></a>      public static function <a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>, lesson_page <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l3221"><span class="linenum">3221</span></a>          return <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('create_answers')" href="../../_functions/create_answers.html" onMouseOver="funcPopup(event,'create_answers')">create_answers</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>);
<a name="l3222"><span class="linenum">3222</span></a>      }
<a name="l3223"><span class="linenum">3223</span></a>  
<a name="l3224"><span class="linenum">3224</span></a>  }
<a name="l3225"><span class="linenum">3225</span></a>  
<a name="l3226"><span class="linenum">3226</span></a>  <span class="comment">/**</span>
<a name="l3227"><span class="linenum">3227</span></a>  <span class="comment"> * A management class for page types</span>
<a name="l3228"><span class="linenum">3228</span></a>  <span class="comment"> *</span>
<a name="l3229"><span class="linenum">3229</span></a>  <span class="comment"> * This class is responsible for managing the different pages. A manager object can</span>
<a name="l3230"><span class="linenum">3230</span></a>  <span class="comment"> * be retrieved by calling the following line of code:</span>
<a name="l3231"><span class="linenum">3231</span></a>  <span class="comment"> * &lt;code&gt;</span>
<a name="l3232"><span class="linenum">3232</span></a>  <span class="comment"> * $manager  = lesson_page_type_manager::get($lesson);</span>
<a name="l3233"><span class="linenum">3233</span></a>  <span class="comment"> * &lt;/code&gt;</span>
<a name="l3234"><span class="linenum">3234</span></a>  <span class="comment"> * The first time the page type manager is retrieved the it includes all of the</span>
<a name="l3235"><span class="linenum">3235</span></a>  <span class="comment"> * different page types located in mod/lesson/pagetypes.</span>
<a name="l3236"><span class="linenum">3236</span></a>  <span class="comment"> *</span>
<a name="l3237"><span class="linenum">3237</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l3238"><span class="linenum">3238</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3239"><span class="linenum">3239</span></a>  <span class="comment"> */</span>
<a name="l3240"><span class="linenum">3240</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('lesson_page_type_manager')" href="../../_classes/lesson_page_type_manager.html" onMouseOver="classPopup(event,'lesson_page_type_manager')">lesson_page_type_manager</a> {
<a name="l3241"><span class="linenum">3241</span></a>  
<a name="l3242"><span class="linenum">3242</span></a>      <span class="comment">/**</span>
<a name="l3243"><span class="linenum">3243</span></a>  <span class="comment">     * An array of different page type classes</span>
<a name="l3244"><span class="linenum">3244</span></a>  <span class="comment">     * @var array</span>
<a name="l3245"><span class="linenum">3245</span></a>  <span class="comment">     */</span>
<a name="l3246"><span class="linenum">3246</span></a>      protected <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = array();
<a name="l3247"><span class="linenum">3247</span></a>  
<a name="l3248"><span class="linenum">3248</span></a>      <span class="comment">/**</span>
<a name="l3249"><span class="linenum">3249</span></a>  <span class="comment">     * Retrieves the lesson page type manager object</span>
<a name="l3250"><span class="linenum">3250</span></a>  <span class="comment">     *</span>
<a name="l3251"><span class="linenum">3251</span></a>  <span class="comment">     * If the object hasn't yet been created it is created here.</span>
<a name="l3252"><span class="linenum">3252</span></a>  <span class="comment">     *</span>
<a name="l3253"><span class="linenum">3253</span></a>  <span class="comment">     * @staticvar lesson_page_type_manager $pagetypemanager</span>
<a name="l3254"><span class="linenum">3254</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l3255"><span class="linenum">3255</span></a>  <span class="comment">     * @return lesson_page_type_manager</span>
<a name="l3256"><span class="linenum">3256</span></a>  <span class="comment">     */</span>
<a name="l3257"><span class="linenum">3257</span></a>      public static function <a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(lesson <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l3258"><span class="linenum">3258</span></a>          static <a class="var it20926" onMouseOver="hilite(20926)" onMouseOut="lolite()" onClick="logVariable('pagetypemanager')" href="../../_variables/pagetypemanager.html">$pagetypemanager</a>;
<a name="l3259"><span class="linenum">3259</span></a>          if (!(<a class="var it20926" onMouseOver="hilite(20926)" onMouseOut="lolite()" onClick="logVariable('pagetypemanager')" href="../../_variables/pagetypemanager.html">$pagetypemanager</a> instanceof lesson_page_type_manager)) {
<a name="l3260"><span class="linenum">3260</span></a>              <a class="var it20926" onMouseOver="hilite(20926)" onMouseOut="lolite()" onClick="logVariable('pagetypemanager')" href="../../_variables/pagetypemanager.html">$pagetypemanager</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lesson_page_type_manager')" href="../../_classes/lesson_page_type_manager.html" onMouseOver="classPopup(event,'lesson_page_type_manager')">lesson_page_type_manager</a>();
<a name="l3261"><span class="linenum">3261</span></a>              <a class="var it20926" onMouseOver="hilite(20926)" onMouseOut="lolite()" onClick="logVariable('pagetypemanager')" href="../../_variables/pagetypemanager.html">$pagetypemanager</a>-&gt;<a class="function" onClick="logFunction('load_lesson_types')" href="../../_functions/load_lesson_types.html" onMouseOver="funcPopup(event,'load_lesson_types')">load_lesson_types</a>(<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l3262"><span class="linenum">3262</span></a>          }
<a name="l3263"><span class="linenum">3263</span></a>          return <a class="var it20926" onMouseOver="hilite(20926)" onMouseOut="lolite()" onClick="logVariable('pagetypemanager')" href="../../_variables/pagetypemanager.html">$pagetypemanager</a>;
<a name="l3264"><span class="linenum">3264</span></a>      }
<a name="l3265"><span class="linenum">3265</span></a>  
<a name="l3266"><span class="linenum">3266</span></a>      <span class="comment">/**</span>
<a name="l3267"><span class="linenum">3267</span></a>  <span class="comment">     * Finds and loads all lesson page types in mod/lesson/pagetypes</span>
<a name="l3268"><span class="linenum">3268</span></a>  <span class="comment">     *</span>
<a name="l3269"><span class="linenum">3269</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l3270"><span class="linenum">3270</span></a>  <span class="comment">     */</span>
<a name="l3271"><span class="linenum">3271</span></a>      public function <a class="function" onClick="logFunction('load_lesson_types')" href="../../_functions/load_lesson_types.html" onMouseOver="funcPopup(event,'load_lesson_types')">load_lesson_types</a>(lesson <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l3272"><span class="linenum">3272</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l3273"><span class="linenum">3273</span></a>          <a class="var it3893" onMouseOver="hilite(3893)" onMouseOut="lolite()" onClick="logVariable('basedir')" href="../../_variables/basedir.html">$basedir</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/mod/lesson/pagetypes/';
<a name="l3274"><span class="linenum">3274</span></a>          <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a> = dir(<a class="var it3893" onMouseOver="hilite(3893)" onMouseOut="lolite()" onClick="logVariable('basedir')" href="../../_variables/basedir.html">$basedir</a>);
<a name="l3275"><span class="linenum">3275</span></a>          while (false !== (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a> = <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>-&gt;<a class="function" onClick="logFunction('read')" href="../../_functions/read.html" onMouseOver="funcPopup(event,'read')">read</a>())) {
<a name="l3276"><span class="linenum">3276</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, '.')===0 || !<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('#^[a-zA-Z]+\.php#i', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>)) {
<a name="l3277"><span class="linenum">3277</span></a>                  continue;
<a name="l3278"><span class="linenum">3278</span></a>              }
<a name="l3279"><span class="linenum">3279</span></a>              require_once(<a class="var it3893" onMouseOver="hilite(3893)" onMouseOut="lolite()" onClick="logVariable('basedir')" href="../../_variables/basedir.html">$basedir</a>.<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>);
<a name="l3280"><span class="linenum">3280</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'lesson_page_type_'.<a class="phpfunction" onClick="logFunction('strtok')" href="../../_functions/strtok.html" onMouseOver="phpfuncPopup(event,'strtok')">strtok</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>,'.');
<a name="l3281"><span class="linenum">3281</span></a>              if (<a class="phpfunction" onClick="logFunction('class_exists')" href="../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>)) {
<a name="l3282"><span class="linenum">3282</span></a>                  <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a> = new <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>(new stdClass, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l3283"><span class="linenum">3283</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('types')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/types.html">types</a>[<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a onClick="logVariable('typeid')" class="var it44793" onMouseOver="hilite(44793)" onMouseOut="lolite()" href="../../_variables/typeid.html">typeid</a>] = <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>;
<a name="l3284"><span class="linenum">3284</span></a>              }
<a name="l3285"><span class="linenum">3285</span></a>          }
<a name="l3286"><span class="linenum">3286</span></a>  
<a name="l3287"><span class="linenum">3287</span></a>      }
<a name="l3288"><span class="linenum">3288</span></a>  
<a name="l3289"><span class="linenum">3289</span></a>      <span class="comment">/**</span>
<a name="l3290"><span class="linenum">3290</span></a>  <span class="comment">     * Returns an array of strings to describe the loaded page types</span>
<a name="l3291"><span class="linenum">3291</span></a>  <span class="comment">     *</span>
<a name="l3292"><span class="linenum">3292</span></a>  <span class="comment">     * @param int $type Can be used to return JUST the string for the requested type</span>
<a name="l3293"><span class="linenum">3293</span></a>  <span class="comment">     * @return array</span>
<a name="l3294"><span class="linenum">3294</span></a>  <span class="comment">     */</span>
<a name="l3295"><span class="linenum">3295</span></a>      public function <a class="function" onClick="logFunction('get_page_type_strings')" href="../../_functions/get_page_type_strings.html" onMouseOver="funcPopup(event,'get_page_type_strings')">get_page_type_strings</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>=null, <a class="var it5373" onMouseOver="hilite(5373)" onMouseOut="lolite()" onClick="logVariable('special')" href="../../_variables/special.html">$special</a>=true) {
<a name="l3296"><span class="linenum">3296</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = array();
<a name="l3297"><span class="linenum">3297</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('types')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/types.html">types</a> as <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>) {
<a name="l3298"><span class="linenum">3298</span></a>              if ((<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>===null || <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a onClick="logVariable('type')" class="var it44793" onMouseOver="hilite(44793)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>===<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) &amp;&amp; (<a class="var it5373" onMouseOver="hilite(5373)" onMouseOut="lolite()" onClick="logVariable('special')" href="../../_variables/special.html">$special</a>===true || <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a class="function" onClick="logFunction('is_standard')" href="../../_functions/is_standard.html" onMouseOver="funcPopup(event,'is_standard')">is_standard</a>())) {
<a name="l3299"><span class="linenum">3299</span></a>                  <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>[<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a onClick="logVariable('typeid')" class="var it44793" onMouseOver="hilite(44793)" onMouseOut="lolite()" href="../../_variables/typeid.html">typeid</a>] = <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a onClick="logVariable('typestring')" class="var it44793" onMouseOver="hilite(44793)" onMouseOut="lolite()" href="../../_variables/typestring.html">typestring</a>;
<a name="l3300"><span class="linenum">3300</span></a>              }
<a name="l3301"><span class="linenum">3301</span></a>          }
<a name="l3302"><span class="linenum">3302</span></a>          return <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>;
<a name="l3303"><span class="linenum">3303</span></a>      }
<a name="l3304"><span class="linenum">3304</span></a>  
<a name="l3305"><span class="linenum">3305</span></a>      <span class="comment">/**</span>
<a name="l3306"><span class="linenum">3306</span></a>  <span class="comment">     * Returns the basic string used to identify a page type provided with an id</span>
<a name="l3307"><span class="linenum">3307</span></a>  <span class="comment">     *</span>
<a name="l3308"><span class="linenum">3308</span></a>  <span class="comment">     * This string can be used to instantiate or identify the page type class.</span>
<a name="l3309"><span class="linenum">3309</span></a>  <span class="comment">     * If the page type id is unknown then 'unknown' is returned</span>
<a name="l3310"><span class="linenum">3310</span></a>  <span class="comment">     *</span>
<a name="l3311"><span class="linenum">3311</span></a>  <span class="comment">     * @param int $id</span>
<a name="l3312"><span class="linenum">3312</span></a>  <span class="comment">     * @return string</span>
<a name="l3313"><span class="linenum">3313</span></a>  <span class="comment">     */</span>
<a name="l3314"><span class="linenum">3314</span></a>      public function <a class="function" onClick="logFunction('get_page_type_idstring')" href="../../_functions/get_page_type_idstring.html" onMouseOver="funcPopup(event,'get_page_type_idstring')">get_page_type_idstring</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l3315"><span class="linenum">3315</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('types')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/types.html">types</a> as <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>) {
<a name="l3316"><span class="linenum">3316</span></a>              if ((int)<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a onClick="logVariable('typeid')" class="var it44793" onMouseOver="hilite(44793)" onMouseOut="lolite()" href="../../_variables/typeid.html">typeid</a> === (int)<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l3317"><span class="linenum">3317</span></a>                  return <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a onClick="logVariable('idstring')" class="var it44793" onMouseOver="hilite(44793)" onMouseOut="lolite()" href="../../_variables/idstring.html">idstring</a>;
<a name="l3318"><span class="linenum">3318</span></a>              }
<a name="l3319"><span class="linenum">3319</span></a>          }
<a name="l3320"><span class="linenum">3320</span></a>          return 'unknown';
<a name="l3321"><span class="linenum">3321</span></a>      }
<a name="l3322"><span class="linenum">3322</span></a>  
<a name="l3323"><span class="linenum">3323</span></a>      <span class="comment">/**</span>
<a name="l3324"><span class="linenum">3324</span></a>  <span class="comment">     * Loads a page for the provided lesson given it's id</span>
<a name="l3325"><span class="linenum">3325</span></a>  <span class="comment">     *</span>
<a name="l3326"><span class="linenum">3326</span></a>  <span class="comment">     * This function loads a page from the lesson when given both the lesson it belongs</span>
<a name="l3327"><span class="linenum">3327</span></a>  <span class="comment">     * to as well as the page's id.</span>
<a name="l3328"><span class="linenum">3328</span></a>  <span class="comment">     * If the page doesn't exist an error is thrown</span>
<a name="l3329"><span class="linenum">3329</span></a>  <span class="comment">     *</span>
<a name="l3330"><span class="linenum">3330</span></a>  <span class="comment">     * @param int $pageid The id of the page to load</span>
<a name="l3331"><span class="linenum">3331</span></a>  <span class="comment">     * @param lesson $lesson The lesson the page belongs to</span>
<a name="l3332"><span class="linenum">3332</span></a>  <span class="comment">     * @return lesson_page A class that extends lesson_page</span>
<a name="l3333"><span class="linenum">3333</span></a>  <span class="comment">     */</span>
<a name="l3334"><span class="linenum">3334</span></a>      public function <a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, lesson <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l3335"><span class="linenum">3335</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3336"><span class="linenum">3336</span></a>          if (!(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> =<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lesson_pages', array('id'=&gt;<a class="var it987" onMouseOver="hilite(987)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, 'lessonid'=&gt;<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)))) {
<a name="l3337"><span class="linenum">3337</span></a>              <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindpages', 'lesson');
<a name="l3338"><span class="linenum">3338</span></a>          }
<a name="l3339"><span class="linenum">3339</span></a>          <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a> = <a class="phpfunction" onClick="logFunction('get_class')" href="../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('types')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/types.html">types</a>[<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('qtype')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>]);
<a name="l3340"><span class="linenum">3340</span></a>          <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = new <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l3341"><span class="linenum">3341</span></a>          return <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>;
<a name="l3342"><span class="linenum">3342</span></a>      }
<a name="l3343"><span class="linenum">3343</span></a>  
<a name="l3344"><span class="linenum">3344</span></a>      <span class="comment">/**</span>
<a name="l3345"><span class="linenum">3345</span></a>  <span class="comment">     * This function detects errors in the ordering between 2 pages and updates the page records.</span>
<a name="l3346"><span class="linenum">3346</span></a>  <span class="comment">     *</span>
<a name="l3347"><span class="linenum">3347</span></a>  <span class="comment">     * @param stdClass $page1 Either the first of 2 pages or null if the $page2 param is the first in the list.</span>
<a name="l3348"><span class="linenum">3348</span></a>  <span class="comment">     * @param stdClass $page1 Either the second of 2 pages or null if the $page1 param is the last in the list.</span>
<a name="l3349"><span class="linenum">3349</span></a>  <span class="comment">     */</span>
<a name="l3350"><span class="linenum">3350</span></a>      protected function <a class="function" onClick="logFunction('check_page_order')" href="../../_functions/check_page_order.html" onMouseOver="funcPopup(event,'check_page_order')">check_page_order</a>(<a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>, <a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>) {
<a name="l3351"><span class="linenum">3351</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3352"><span class="linenum">3352</span></a>          if (empty(<a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>)) {
<a name="l3353"><span class="linenum">3353</span></a>              if (<a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it43510" onMouseOver="hilite(43510)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> != 0) {
<a name="l3354"><span class="linenum">3354</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;***prevpageid of page &quot; . <a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it43510" onMouseOver="hilite(43510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot; set to 0***&quot;);
<a name="l3355"><span class="linenum">3355</span></a>                  <a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it43510" onMouseOver="hilite(43510)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> = 0;
<a name="l3356"><span class="linenum">3356</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;prevpageid&quot;, 0, array(&quot;id&quot; =&gt; <a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it43510" onMouseOver="hilite(43510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3357"><span class="linenum">3357</span></a>              }
<a name="l3358"><span class="linenum">3358</span></a>          } else if (empty(<a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>)) {
<a name="l3359"><span class="linenum">3359</span></a>              if (<a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it43508" onMouseOver="hilite(43508)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> != 0) {
<a name="l3360"><span class="linenum">3360</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;***nextpageid of page &quot; . <a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it43508" onMouseOver="hilite(43508)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot; set to 0***&quot;);
<a name="l3361"><span class="linenum">3361</span></a>                  <a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it43508" onMouseOver="hilite(43508)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = 0;
<a name="l3362"><span class="linenum">3362</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;nextpageid&quot;, 0, array(&quot;id&quot; =&gt; <a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it43508" onMouseOver="hilite(43508)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3363"><span class="linenum">3363</span></a>              }
<a name="l3364"><span class="linenum">3364</span></a>          } else {
<a name="l3365"><span class="linenum">3365</span></a>              if (<a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it43508" onMouseOver="hilite(43508)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> != <a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it43510" onMouseOver="hilite(43510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l3366"><span class="linenum">3366</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;***nextpageid of page &quot; . <a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it43508" onMouseOver="hilite(43508)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot; set to &quot; . <a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it43510" onMouseOver="hilite(43510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot;***&quot;);
<a name="l3367"><span class="linenum">3367</span></a>                  <a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it43508" onMouseOver="hilite(43508)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = <a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it43510" onMouseOver="hilite(43510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3368"><span class="linenum">3368</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;nextpageid&quot;, <a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it43510" onMouseOver="hilite(43510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array(&quot;id&quot; =&gt; <a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it43508" onMouseOver="hilite(43508)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3369"><span class="linenum">3369</span></a>              }
<a name="l3370"><span class="linenum">3370</span></a>              if (<a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it43510" onMouseOver="hilite(43510)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> != <a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it43508" onMouseOver="hilite(43508)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l3371"><span class="linenum">3371</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;***prevpageid of page &quot; . <a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it43510" onMouseOver="hilite(43510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot; set to &quot; . <a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it43508" onMouseOver="hilite(43508)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot;***&quot;);
<a name="l3372"><span class="linenum">3372</span></a>                  <a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it43510" onMouseOver="hilite(43510)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> = <a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it43508" onMouseOver="hilite(43508)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3373"><span class="linenum">3373</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;prevpageid&quot;, <a class="var it7685" onMouseOver="hilite(7685)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it43508" onMouseOver="hilite(43508)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array(&quot;id&quot; =&gt; <a class="var it7687" onMouseOver="hilite(7687)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it43510" onMouseOver="hilite(43510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3374"><span class="linenum">3374</span></a>              }
<a name="l3375"><span class="linenum">3375</span></a>          }
<a name="l3376"><span class="linenum">3376</span></a>      }
<a name="l3377"><span class="linenum">3377</span></a>  
<a name="l3378"><span class="linenum">3378</span></a>      <span class="comment">/**</span>
<a name="l3379"><span class="linenum">3379</span></a>  <span class="comment">     * This function loads ALL pages that belong to the lesson.</span>
<a name="l3380"><span class="linenum">3380</span></a>  <span class="comment">     *</span>
<a name="l3381"><span class="linenum">3381</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l3382"><span class="linenum">3382</span></a>  <span class="comment">     * @return array An array of lesson_page_type_*</span>
<a name="l3383"><span class="linenum">3383</span></a>  <span class="comment">     */</span>
<a name="l3384"><span class="linenum">3384</span></a>      public function <a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>(lesson <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l3385"><span class="linenum">3385</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3386"><span class="linenum">3386</span></a>          if (!(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> =<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_pages', array('lessonid'=&gt;<a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it43331" onMouseOver="hilite(43331)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)))) {
<a name="l3387"><span class="linenum">3387</span></a>              return array(); <span class="comment">// Records returned empty.</span>
<a name="l3388"><span class="linenum">3388</span></a>          }
<a name="l3389"><span class="linenum">3389</span></a>          foreach (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>=&gt;<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l3390"><span class="linenum">3390</span></a>              <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a> = <a class="phpfunction" onClick="logFunction('get_class')" href="../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('types')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/types.html">types</a>[<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('qtype')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>]);
<a name="l3391"><span class="linenum">3391</span></a>              <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] = new <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it1204" onMouseOver="hilite(1204)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l3392"><span class="linenum">3392</span></a>          }
<a name="l3393"><span class="linenum">3393</span></a>  
<a name="l3394"><span class="linenum">3394</span></a>          <a class="var it20928" onMouseOver="hilite(20928)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a> = array();
<a name="l3395"><span class="linenum">3395</span></a>          <a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> = 0;
<a name="l3396"><span class="linenum">3396</span></a>          <a class="var it20929" onMouseOver="hilite(20929)" onMouseOut="lolite()" onClick="logVariable('morepages')" href="../../_variables/morepages.html">$morepages</a> = true;
<a name="l3397"><span class="linenum">3397</span></a>          while (<a class="var it20929" onMouseOver="hilite(20929)" onMouseOut="lolite()" onClick="logVariable('morepages')" href="../../_variables/morepages.html">$morepages</a>) {
<a name="l3398"><span class="linenum">3398</span></a>              <a class="var it20929" onMouseOver="hilite(20929)" onMouseOut="lolite()" onClick="logVariable('morepages')" href="../../_variables/morepages.html">$morepages</a> = false;
<a name="l3399"><span class="linenum">3399</span></a>              foreach (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l3400"><span class="linenum">3400</span></a>                  if ((int)<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> === (int)<a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>) {
<a name="l3401"><span class="linenum">3401</span></a>  <span class="comment">                    // Check for errors in page ordering and fix them on the fly.</span>
<a name="l3402"><span class="linenum">3402</span></a>                      <a class="var it20913" onMouseOver="hilite(20913)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a> = null;
<a name="l3403"><span class="linenum">3403</span></a>                      if (<a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> !== 0) {
<a name="l3404"><span class="linenum">3404</span></a>                          <a class="var it20913" onMouseOver="hilite(20913)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a> = <a class="var it20928" onMouseOver="hilite(20928)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a>[<a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>];
<a name="l3405"><span class="linenum">3405</span></a>                      }
<a name="l3406"><span class="linenum">3406</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_page_order')" href="../../_functions/check_page_order.html" onMouseOver="funcPopup(event,'check_page_order')">check_page_order</a>(<a class="var it20913" onMouseOver="hilite(20913)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>);
<a name="l3407"><span class="linenum">3407</span></a>                      <a class="var it20929" onMouseOver="hilite(20929)" onMouseOut="lolite()" onClick="logVariable('morepages')" href="../../_variables/morepages.html">$morepages</a> = true;
<a name="l3408"><span class="linenum">3408</span></a>                      <a class="var it20928" onMouseOver="hilite(20928)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a>[<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>;
<a name="l3409"><span class="linenum">3409</span></a>                      unset(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]);
<a name="l3410"><span class="linenum">3410</span></a>                      <a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3411"><span class="linenum">3411</span></a>                      if ((int)<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a>===0) {
<a name="l3412"><span class="linenum">3412</span></a>                          break 2;
<a name="l3413"><span class="linenum">3413</span></a>                      } else {
<a name="l3414"><span class="linenum">3414</span></a>                          break 1;
<a name="l3415"><span class="linenum">3415</span></a>                      }
<a name="l3416"><span class="linenum">3416</span></a>                  }
<a name="l3417"><span class="linenum">3417</span></a>              }
<a name="l3418"><span class="linenum">3418</span></a>          }
<a name="l3419"><span class="linenum">3419</span></a>  
<a name="l3420"><span class="linenum">3420</span></a>  <span class="comment">        // Add remaining pages and fix the nextpageid links for each page.</span>
<a name="l3421"><span class="linenum">3421</span></a>          foreach (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l3422"><span class="linenum">3422</span></a>  <span class="comment">            // Check for errors in page ordering and fix them on the fly.</span>
<a name="l3423"><span class="linenum">3423</span></a>              <a class="var it20913" onMouseOver="hilite(20913)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a> = null;
<a name="l3424"><span class="linenum">3424</span></a>              if (<a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> !== 0) {
<a name="l3425"><span class="linenum">3425</span></a>                  <a class="var it20913" onMouseOver="hilite(20913)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a> = <a class="var it20928" onMouseOver="hilite(20928)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a>[<a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>];
<a name="l3426"><span class="linenum">3426</span></a>              }
<a name="l3427"><span class="linenum">3427</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_page_order')" href="../../_functions/check_page_order.html" onMouseOver="funcPopup(event,'check_page_order')">check_page_order</a>(<a class="var it20913" onMouseOver="hilite(20913)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>);
<a name="l3428"><span class="linenum">3428</span></a>              <a class="var it20928" onMouseOver="hilite(20928)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a>[<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>;
<a name="l3429"><span class="linenum">3429</span></a>              unset(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]);
<a name="l3430"><span class="linenum">3430</span></a>              <a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3431"><span class="linenum">3431</span></a>          }
<a name="l3432"><span class="linenum">3432</span></a>  
<a name="l3433"><span class="linenum">3433</span></a>          if (<a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> !== 0) {
<a name="l3434"><span class="linenum">3434</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_page_order')" href="../../_functions/check_page_order.html" onMouseOver="funcPopup(event,'check_page_order')">check_page_order</a>(<a class="var it20928" onMouseOver="hilite(20928)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a>[<a class="var it20892" onMouseOver="hilite(20892)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>], null);
<a name="l3435"><span class="linenum">3435</span></a>          }
<a name="l3436"><span class="linenum">3436</span></a>  
<a name="l3437"><span class="linenum">3437</span></a>          return <a class="var it20928" onMouseOver="hilite(20928)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a>;
<a name="l3438"><span class="linenum">3438</span></a>      }
<a name="l3439"><span class="linenum">3439</span></a>  
<a name="l3440"><span class="linenum">3440</span></a>      <span class="comment">/**</span>
<a name="l3441"><span class="linenum">3441</span></a>  <span class="comment">     * Fetches an mform that can be used to create/edit an page</span>
<a name="l3442"><span class="linenum">3442</span></a>  <span class="comment">     *</span>
<a name="l3443"><span class="linenum">3443</span></a>  <span class="comment">     * @param int $type The id for the page type</span>
<a name="l3444"><span class="linenum">3444</span></a>  <span class="comment">     * @param array $arguments Any arguments to pass to the mform</span>
<a name="l3445"><span class="linenum">3445</span></a>  <span class="comment">     * @return lesson_add_page_form_base</span>
<a name="l3446"><span class="linenum">3446</span></a>  <span class="comment">     */</span>
<a name="l3447"><span class="linenum">3447</span></a>      public function <a class="function" onClick="logFunction('get_page_form')" href="../../_functions/get_page_form.html" onMouseOver="funcPopup(event,'get_page_form')">get_page_form</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>, <a class="var it3451" onMouseOver="hilite(3451)" onMouseOut="lolite()" onClick="logVariable('arguments')" href="../../_variables/arguments.html">$arguments</a>) {
<a name="l3448"><span class="linenum">3448</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'lesson_add_page_form_'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_page_type_idstring')" href="../../_functions/get_page_type_idstring.html" onMouseOver="funcPopup(event,'get_page_type_idstring')">get_page_type_idstring</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>);
<a name="l3449"><span class="linenum">3449</span></a>          if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>) || <a class="phpfunction" onClick="logFunction('get_parent_class')" href="../../_functions/get_parent_class.html" onMouseOver="phpfuncPopup(event,'get_parent_class')">get_parent_class</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>)!=='lesson_add_page_form_base') {
<a name="l3450"><span class="linenum">3450</span></a>              <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Lesson page type unknown class requested '.<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l3451"><span class="linenum">3451</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'lesson_add_page_form_selection';
<a name="l3452"><span class="linenum">3452</span></a>          } else if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> === 'lesson_add_page_form_unknown') {
<a name="l3453"><span class="linenum">3453</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'lesson_add_page_form_selection';
<a name="l3454"><span class="linenum">3454</span></a>          }
<a name="l3455"><span class="linenum">3455</span></a>          return new <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>(null, <a class="var it3451" onMouseOver="hilite(3451)" onMouseOut="lolite()" onClick="logVariable('arguments')" href="../../_variables/arguments.html">$arguments</a>);
<a name="l3456"><span class="linenum">3456</span></a>      }
<a name="l3457"><span class="linenum">3457</span></a>  
<a name="l3458"><span class="linenum">3458</span></a>      <span class="comment">/**</span>
<a name="l3459"><span class="linenum">3459</span></a>  <span class="comment">     * Returns an array of links to use as add page links</span>
<a name="l3460"><span class="linenum">3460</span></a>  <span class="comment">     * @param int $previd The id of the previous page</span>
<a name="l3461"><span class="linenum">3461</span></a>  <span class="comment">     * @return array</span>
<a name="l3462"><span class="linenum">3462</span></a>  <span class="comment">     */</span>
<a name="l3463"><span class="linenum">3463</span></a>      public function <a class="function" onClick="logFunction('get_add_page_type_links')" href="../../_functions/get_add_page_type_links.html" onMouseOver="funcPopup(event,'get_add_page_type_links')">get_add_page_type_links</a>(<a class="var it10651" onMouseOver="hilite(10651)" onMouseOut="lolite()" onClick="logVariable('previd')" href="../../_variables/previd.html">$previd</a>) {
<a name="l3464"><span class="linenum">3464</span></a>          global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l3465"><span class="linenum">3465</span></a>  
<a name="l3466"><span class="linenum">3466</span></a>          <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a> = array();
<a name="l3467"><span class="linenum">3467</span></a>  
<a name="l3468"><span class="linenum">3468</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('types')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/types.html">types</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>=&gt;<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l3469"><span class="linenum">3469</span></a>              if (<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('add_page_link')" href="../../_functions/add_page_link.html" onMouseOver="funcPopup(event,'add_page_link')">add_page_link</a>(<a class="var it10651" onMouseOver="hilite(10651)" onMouseOut="lolite()" onClick="logVariable('previd')" href="../../_variables/previd.html">$previd</a>)) {
<a name="l3470"><span class="linenum">3470</span></a>                  <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] = <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>;
<a name="l3471"><span class="linenum">3471</span></a>              }
<a name="l3472"><span class="linenum">3472</span></a>          }
<a name="l3473"><span class="linenum">3473</span></a>  
<a name="l3474"><span class="linenum">3474</span></a>          return <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>;
<a name="l3475"><span class="linenum">3475</span></a>      }
<a name="l3476"><span class="linenum">3476</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'update': ['update', 'In addition to update() as defined in grade_object, handle the grade_outcome and grade_scale objects. Force regrading if necessary, rounds the float numbers using php function, the reason is we need to compare the db value with computed number to skip regrading if possible. ', [['lib/grade','grade_item.php',274],['lib/google/src/Google/Service','Tasks.php',386],['lib/google/src/Google/Service','Tasks.php',556],['lib/google/src/Google/Service','AndroidPublisher.php',1413],['lib/google/src/Google/Service','AndroidPublisher.php',1545],['lib/google/src/Google/Service','AndroidPublisher.php',1615],['lib/google/src/Google/Service','AndroidPublisher.php',1853],['lib/google/src/Google/Service','AndroidPublisher.php',1919],['lib/google/src/Google/Service','AndroidPublisher.php',2003],['lib/google/src/Google/Service','AndroidPublisher.php',2177],['lib/google/src/Google/Service','Reseller.php',344],['lib/grade','grade_category.php',226],['lib/grade','grade_scale.php',125],['lib/adodb','adodb-active-record.inc.php',1004],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','YouTubeAnalytics.php',534],['completion','data_object.php',252],['mod/lesson/pagetypes','matching.php',308],['tag/classes','collection.php',215],['lib/google/src/Google/Service','AdExchangeBuyer.php',802],['lib/google/src/Google/Service','AdExchangeBuyer.php',906],['lib/google/src/Google/Service','AdExchangeBuyer.php',1013],['lib/google/src/Google/Service','AdExchangeBuyer.php',1181],['lib/google/src/Google/Service','AdExchangeBuyer.php',1357],['lib/google/src/Google/Service','AdExchangeBuyer.php',1640],['lib/google/src/Google/Service','Books.php',2025],['lib/grade','grade_grade.php',1009],['lib/grade','grade_outcome.php',144],['lib/google/src/Google/Service','Analytics.php',2215],['lib/google/src/Google/Service','Analytics.php',2388],['lib/google/src/Google/Service','Analytics.php',2501],['lib/google/src/Google/Service','Analytics.php',2626],['lib/google/src/Google/Service','Analytics.php',2736],['lib/google/src/Google/Service','Analytics.php',2843],['lib/google/src/Google/Service','Analytics.php',2971],['lib/google/src/Google/Service','Analytics.php',3062],['lib/google/src/Google/Service','Analytics.php',3185],['lib/google/src/Google/Service','Analytics.php',3502],['lib/google/src/Google/Service','Analytics.php',3604],['lib/google/src/Google/Service','Analytics.php',3686],['lib/google/src/Google/Service','Coordinate.php',611],['lib/google/src/Google/Service','Coordinate.php',727],['lib/google/src/Google/Service','DeploymentManager.php',589],['tag/classes/output','tagareacollection.php',68],['lib','weblib.php',3312],['lib/google/src/Google/Service','Blogger.php',1349],['lib/google/src/Google/Service','Blogger.php',1647],['lib/google/src/Google/Service','Dataflow.php',350],['tag/classes/output','tagcollname.php',58],['competency/classes','persistent.php',452],['lib/google/src/Google/Service','Cloudresourcemanager.php',344],['lib/google/src/Google/Service','Cloudresourcemanager.php',555],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1066],['lib/google/src/Google/Service','TagManager.php',1159],['lib/google/src/Google/Service','TagManager.php',1219],['lib/google/src/Google/Service','TagManager.php',1311],['lib/google/src/Google/Service','TagManager.php',1405],['lib/google/src/Google/Service','TagManager.php',1499],['lib/google/src/Google/Service','TagManager.php',1650],['lib/google/src/Google/Service','TagManager.php',1743],['mod/lesson','locallib.php',2691],['lib/google/src/Google/Service','Bigquery.php',621],['lib/google/src/Google/Service','Bigquery.php',953],['lib/google/src/Google/Service','ShoppingContent.php',1136],['lib/google/src/Google/Service','ShoppingContent.php',1238],['lib/google/src/Google/Service','ShoppingContent.php',1401],['lib/google/src/Google/Service','ShoppingContent.php',1534],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Clouddebugger.php',307],['lib/filestorage','stored_file.php',103],['lib/google/src/Google/Service','Container.php',366],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Storage.php',1127],['lib/google/src/Google/Service','Storage.php',1268],['lib/google/src/Google/Service','Storage.php',1423],['lib/google/src/Google/Service','Storage.php',1564],['lib/google/src/Google/Service','Storage.php',1904],['tag/classes/output','tagname.php',56],['tag/classes/output','tagcollsearchable.php',72],['lib/google/src/Google/Service','Games.php',1508],['lib/google/src/Google/Service','Licensing.php',335],['lib/google/src/Google/Service','Fitness.php',478],['lib/google/src/Google/Service','Fitness.php',691],['lib/google/src/Google/Service','Gmail.php',833],['lib/google/src/Google/Service','Gmail.php',986],['lib/google/src/Google/Service','Taskqueue.php',398],['lib/adodb','adodb-active-recordx.inc.php',1136],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Doubleclicksearch.php',326],['lib/google/src/Google/Service','Autoscaler.php',400],['tag/classes/output','tagisstandard.php',70],['lib/google/src/Google/Service','Prediction.php',339],['lib/google/src/Google/Service','SiteVerification.php',227],['lib/google/src/Google/Service','Drive.php',1691],['lib/google/src/Google/Service','Drive.php',1961],['lib/google/src/Google/Service','Drive.php',2208],['lib/google/src/Google/Service','Drive.php',2320],['lib/google/src/Google/Service','Drive.php',2370],['lib/google/src/Google/Service','Drive.php',2494],['lib/google/src/Google/Service','Drive.php',2582],['tag/classes/output','tagflag.php',71],['lib/google/src/Google/Service','Proximitybeacon.php',440],['lib/google/src/Google/Service','Groupssettings.php',138],['lib/google/src/Google/Service','Directory.php',1829],['lib/google/src/Google/Service','Directory.php',1889],['lib/google/src/Google/Service','Directory.php',2141],['lib/google/src/Google/Service','Directory.php',2306],['lib/google/src/Google/Service','Directory.php',2489],['lib/google/src/Google/Service','Directory.php',2597],['lib/google/src/Google/Service','Directory.php',2808],['lib/google/src/Google/Service','Directory.php',2910],['lib/google/src/Google/Service','Directory.php',3131],['lib/google/src/Google/Service','Directory.php',3317],['lib/google/src/Google/Service','Fusiontables.php',727],['lib/google/src/Google/Service','Fusiontables.php',892],['lib/google/src/Google/Service','Fusiontables.php',1094],['lib/google/src/Google/Service','Fusiontables.php',1269],['lib/google/src/Google/Service','AdSenseHost.php',846],['lib/google/src/Google/Service','AdSenseHost.php',1097],['course/classes/output','course_module_name.php',81],['lib/google/src/Google/Service','Mirror.php',496],['lib/google/src/Google/Service','Mirror.php',634],['lib/google/src/Google/Service','Mirror.php',745],['tag/classes','area.php',226],['lib/google/src/Google/Service','AndroidEnterprise.php',1064],['lib/google/src/Google/Service','AndroidEnterprise.php',1165],['lib/google/src/Google/Service','AndroidEnterprise.php',1489],['lib/google/src/Google/Service','AndroidEnterprise.php',1672],['grade/grading/form/rubric','lib.php',828],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['mod/lesson/pagetypes','essay.php',158],['lib','coursecatlib.php',438],['tag/classes','tag.php',893],['lib/google/src/Google/Service','Calendar.php',1006],['lib/google/src/Google/Service','Calendar.php',1181],['lib/google/src/Google/Service','Calendar.php',1333],['lib/google/src/Google/Service','Calendar.php',1714],['lib/google/src/Google/Service','PlusDomains.php',692],['lib/google/src/Google/Service','GamesConfiguration.php',334],['lib/google/src/Google/Service','GamesConfiguration.php',473],['mod/lesson/pagetypes','branchtable.php',262],['tag/classes/output','tagareashowstandard.php',64],['lib/google/src/Google/Service','AppState.php',202],['calendar','lib.php',2206],['tag/classes/output','tagareaenabled.php',69],['cohort/classes/output','cohortidnumber.php',53],['lib/google/src/Google/Service','Classroom.php',564],['cohort/classes/output','cohortname.php',53],['lib/google/src/Google/Service','SQLAdmin.php',947],['lib/google/src/Google/Service','SQLAdmin.php',1267],['lib/google/src/Google/Service','SQLAdmin.php',1534],['grade/grading/form/guide','lib.php',836],['lib/google/src/Google/Service','Compute.php',4253],['lib/google/src/Google/Service','Compute.php',4398],['lib/google/src/Google/Service','Compute.php',4767],['lib/google/src/Google/Service','Compute.php',5348],['lib/google/src/Google/Service','Compute.php',5478],['lib/google/src/Google/Service','Compute.php',8131],['lib/google/src/Google/Service','YouTube.php',1959],['lib/google/src/Google/Service','YouTube.php',2194],['lib/google/src/Google/Service','YouTube.php',2303],['lib/google/src/Google/Service','YouTube.php',2429],['lib/google/src/Google/Service','YouTube.php',2570],['lib/google/src/Google/Service','YouTube.php',3111],['lib/google/src/Google/Service','YouTube.php',3348],['lib/google/src/Google/Service','YouTube.php',3518],['lib/google/src/Google/Service','YouTube.php',3708],['lib/google/src/Google/Service','YouTube.php',4400],['lib/google/src/Google/Service','Dfareporting.php',4752],['lib/google/src/Google/Service','Dfareporting.php',4840],['lib/google/src/Google/Service','Dfareporting.php',4973],['lib/google/src/Google/Service','Dfareporting.php',5090],['lib/google/src/Google/Service','Dfareporting.php',5204],['lib/google/src/Google/Service','Dfareporting.php',5400],['lib/google/src/Google/Service','Dfareporting.php',5656],['lib/google/src/Google/Service','Dfareporting.php',5848],['lib/google/src/Google/Service','Dfareporting.php',5970],['lib/google/src/Google/Service','Dfareporting.php',6078],['lib/google/src/Google/Service','Dfareporting.php',6196],['lib/google/src/Google/Service','Dfareporting.php',6502],['lib/google/src/Google/Service','Dfareporting.php',6704],['lib/google/src/Google/Service','Dfareporting.php',6834],['lib/google/src/Google/Service','Dfareporting.php',6912],['lib/google/src/Google/Service','Dfareporting.php',7077],['lib/google/src/Google/Service','Dfareporting.php',7476],['lib/google/src/Google/Service','Dfareporting.php',7594],['lib/google/src/Google/Service','Dfareporting.php',7744],['lib/google/src/Google/Service','Dfareporting.php',7968],['lib/google/src/Google/Service','Dfareporting.php',8075],['lib/google/src/Google/Service','Dfareporting.php',8202],['lib/google/src/Google/Service','Dfareporting.php',8394],['lib/google/src/Google/Service','Dfareporting.php',8557],['lib/google/src/Google/Service','Dfareporting.php',8861],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72]], 498],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'time_remaining': ['time_remaining', 'Returns the time a user has remaining on this lesson ', [['mod/lesson','locallib.php',1705]], 1],
'get_type': ['get_type', 'Get the type of the feed ', [['lib/simplepie/library','SimplePie.php',1624],['lib/simplepie/library/SimplePie','Restriction.php',122],['backup/util/ui','backup_ui_setting.class.php',102],['backup/util/ui','base_ui.class.php',294],['mod/lesson','locallib.php',2394],['lib/simplepie/library/SimplePie','Enclosure.php',877],['lib/classes','chart_series.php',127],['grade/report/singleview/classes/local/ui','bulk_insert.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',79],['backup/util/plan','backup_plan.class.php',70],['availability/classes','condition.php',102],['mod/assign','assignmentplugin.php',153],['backup/controller','backup_controller.class.php',244],['lib/classes','chart_base.php',150],['mod/workshop','locallib.php',3936],['mod/lti/classes/local/ltiservice','resource_base.php',114],['lib/simplepie/library/SimplePie','Caption.php',193],['backup/controller','restore_controller.class.php',261]], 90],
'file_rewrite_pluginfile_urls': ['file_rewrite_pluginfile_urls', 'Convert encoded URLs in $text from the @@PLUGINFILE@@/... form to an actual URL. Passing a new option reverse = true in the $options var will make the function to convert actual URLs in $text to encoded URLs in the @@PLUGINFILE@@ form. ', [['lib','filelib.php',446]], 96],
'requires_manual_grading': ['requires_manual_grading', 'Informs whether this page type require manual grading or not ', [['mod/lesson','locallib.php',3148],['mod/lesson/pagetypes','essay.php',277]], 2],
'get_lesson': ['get_lesson', 'Returns the lesson this page is associated with ', [['mod/lesson','locallib.php',2385]], 0],
'delete': ['delete', 'Deletes an item from the cache store. ', [['cache/stores/static','lib.php',374],['cache','disabledlib.php',102],['lib/google/src/Google/Service','AdSense.php',1258],['lib/google/src/Google/Service','AdSense.php',1730],['lib/grade','grade_item.php',396],['lib/google/src/Google/Service','Replicapool.php',378],['lib/google/src/Google/Service','Tasks.php',310],['lib/google/src/Google/Service','Tasks.php',428],['lib/google/src/Google/Service','AndroidPublisher.php',1230],['lib/google/src/Google/Service','AndroidPublisher.php',1310],['lib/google/src/Google/Service','AndroidPublisher.php',1668],['lib/google/src/Google/Service','AndroidPublisher.php',1763],['lib/google/src/Google/Service','AndroidPublisher.php',2083],['lib/google/src/Google/Service','YouTubeReporting.php',255],['lib/google/src/Google/Service','Reseller.php',441],['lib/google/src/Google/Cache','Memcache.php',144],['lib','filelib.php',3481],['lib/google/src/Google/Service','Computeaccounts.php',418],['lib/google/src/Google/Service','Computeaccounts.php',497],['lib/google/src/Google/Service','Computeaccounts.php',668],['lib/grade','grade_category.php',281],['lib/grade','grade_scale.php',136],['lib/adodb','adodb-active-record.inc.php',901],['lib/grade','grade_object.php',270],['lib/google/src/Google/Service','YouTubeAnalytics.php',352],['lib/google/src/Google/Service','YouTubeAnalytics.php',447],['lib/google/src/Google/Service','MapsEngine.php',1693],['lib/google/src/Google/Service','MapsEngine.php',1991],['lib/google/src/Google/Service','MapsEngine.php',2344],['lib/google/src/Google/Service','MapsEngine.php',2651],['lib/google/src/Google/Service','MapsEngine.php',2912],['completion','data_object.php',273],['lib/google/src/Google/Cache','File.php',115],['cache/classes','dummystore.php',198],['lib/google/src/Google/Service','Dns.php',378],['cache/classes','loaders.php',792],['cache/classes','loaders.php',1471],['cache/classes','loaders.php',1841],['lib/google/src/Google/Service','Appengine.php',352],['lib/google/src/Google/Service','Appengine.php',455],['tag/classes','collection.php',260],['lib/filebrowser','file_info.php',418],['lib/google/src/Google/Service','AdExchangeBuyer.php',938],['lib/google/src/Google/Service','AdExchangeBuyer.php',1137],['lib/google/src/Google/Service','AdExchangeBuyer.php',1561],['lib/filebrowser','virtual_root_file.php',69],['lib/google/src/Google/Service','Books.php',1946],['lib/grade','grade_grade.php',1024],['lib/grade','grade_outcome.php',97],['lib/google/src/Google/Service','Analytics.php',2165],['lib/google/src/Google/Service','Analytics.php',2534],['lib/google/src/Google/Service','Analytics.php',2655],['lib/google/src/Google/Service','Analytics.php',2872],['lib/google/src/Google/Service','Analytics.php',3001],['lib/google/src/Google/Service','Analytics.php',3092],['lib/google/src/Google/Service','Analytics.php',3406],['lib/google/src/Google/Service','Analytics.php',3631],['lib/google/src/Google/Service','DeploymentManager.php',452],['lib/google/src/Google/Service','Blogger.php',1065],['lib/google/src/Google/Service','Blogger.php',1227],['lib/google/src/Google/Service','Blogger.php',1451],['lib/filebrowser','file_info_stored.php',631],['competency/classes','persistent.php',510],['lib/google/src/Google/Service','CloudUserAccounts.php',528],['lib/google/src/Google/Service','CloudUserAccounts.php',628],['lib/google/src/Google/Service','CloudUserAccounts.php',893],['lib/google/src/Google/Service','Cloudresourcemanager.php',390],['lib/htmlpurifier/HTMLPurifier','Zipper.php',89],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',960],['lib/google/src/Google/Service','TagManager.php',1022],['lib/google/src/Google/Service','TagManager.php',1113],['lib/google/src/Google/Service','TagManager.php',1265],['lib/google/src/Google/Service','TagManager.php',1358],['lib/google/src/Google/Service','TagManager.php',1452],['lib/google/src/Google/Service','TagManager.php',1546],['lib/google/src/Google/Service','TagManager.php',1696],['mod/lesson','locallib.php',1037],['mod/lesson','locallib.php',2271],['repository','lib.php',427],['repository','lib.php',1962],['admin/tool/uploadcourse/classes','course.php',226],['lib','badgeslib.php',640],['lib/google/src/Google/Service','Bigquery.php',531],['lib/google/src/Google/Service','Bigquery.php',863],['lib/google/src/Google/Service','ShoppingContent.php',1050],['lib/google/src/Google/Service','ShoppingContent.php',1448],['lib/google/src/Google/Service','ShoppingContent.php',1970],['lib/google/src/Google/Service','Webmasters.php',355],['lib/google/src/Google/Service','Webmasters.php',449],['lib/google/src/Google/Service','Clouddebugger.php',384],['lib/filestorage','stored_file.php',323],['lib/google/src/Google/Service','Container.php',309],['lib/google/src/Google/Service','Storage.php',1042],['lib/google/src/Google/Service','Storage.php',1157],['lib/google/src/Google/Service','Storage.php',1332],['lib/google/src/Google/Service','Storage.php',1454],['lib/google/src/Google/Service','Storage.php',1681],['cache/stores/memcache','lib.php',401],['lib/google/src/Google/Service','Genomics.php',646],['lib/google/src/Google/Service','Genomics.php',735],['lib/google/src/Google/Service','Genomics.php',903],['lib/google/src/Google/Service','Genomics.php',971],['lib/google/src/Google/Service','Genomics.php',1326],['lib/google/src/Google/Service','Genomics.php',1443],['lib/google/src/Google/Service','Licensing.php',224],['lib/google/src/Google/Service','Fitness.php',400],['lib/google/src/Google/Service','Fitness.php',512],['lib/google/src/Google/Service','Fitness.php',647],['comment','lib.php',790],['lib/google/src/Google/Service','Gmail.php',763],['lib/google/src/Google/Service','Gmail.php',921],['lib/google/src/Google/Service','Gmail.php',1014],['lib/google/src/Google/Service','Gmail.php',1234],['lib/google/src/Google/Service','Taskqueue.php',293],['lib/adodb','adodb-active-recordx.inc.php',1016],['lib','accesslib.php',5580],['cache/classes','interfaces.php',161],['lib/google/src/Google/Service','Autoscaler.php',315],['lib/google/src/Google/Service','Autoscaler.php',429],['lib/google/src/Google/Service','Prediction.php',262],['lib/google/src/Google/Service','SiteVerification.php',139],['lib/google/src/Google/Service','Drive.php',1522],['lib/google/src/Google/Service','Drive.php',1603],['lib/google/src/Google/Service','Drive.php',1748],['lib/google/src/Google/Service','Drive.php',2040],['lib/google/src/Google/Service','Drive.php',2110],['lib/google/src/Google/Service','Drive.php',2240],['lib/google/src/Google/Service','Drive.php',2403],['lib/google/src/Google/Service','Drive.php',2523],['lib/google/src/Google/Service','Proximitybeacon.php',522],['lib/google/src/Google/Service','Directory.php',1683],['lib/google/src/Google/Service','Directory.php',1916],['lib/google/src/Google/Service','Directory.php',1989],['lib/google/src/Google/Service','Directory.php',2059],['lib/google/src/Google/Service','Directory.php',2169],['lib/google/src/Google/Service','Directory.php',2224],['lib/google/src/Google/Service','Directory.php',2351],['lib/google/src/Google/Service','Directory.php',2420],['lib/google/src/Google/Service','Directory.php',2517],['lib/google/src/Google/Service','Directory.php',2652],['lib/google/src/Google/Service','Directory.php',2731],['lib/google/src/Google/Service','Directory.php',2836],['lib/google/src/Google/Service','Directory.php',2938],['lib/google/src/Google/Service','Directory.php',2999],['lib/google/src/Google/Service','Directory.php',3199],['lib/google/src/Google/Service','Directory.php',3274],['lib/google/src/Google/Service','Fusiontables.php',645],['lib/google/src/Google/Service','Fusiontables.php',812],['lib/google/src/Google/Service','Fusiontables.php',937],['lib/google/src/Google/Service','Fusiontables.php',1126],['lib/google/src/Google/Service','Fusiontables.php',1188],['lib/google/src/Google/Service','AdSenseHost.php',734],['lib/google/src/Google/Service','AdSenseHost.php',1010],['lib/google/src/Google/Service','AdSenseHost.php',1168],['lib/google/src/Google/Service','Mirror.php',425],['lib/google/src/Google/Service','Mirror.php',593],['lib/google/src/Google/Service','Mirror.php',661],['lib/google/src/Google/Service','Mirror.php',772],['tag/classes','area.php',187],['lib/google/src/Google/Service','AndroidEnterprise.php',988],['lib/google/src/Google/Service','AndroidEnterprise.php',1092],['lib/google/src/Google/Service','AndroidEnterprise.php',1280],['lib/google/src/Google/Service','AndroidEnterprise.php',1415],['lib/google/src/Google/Service','AndroidEnterprise.php',1597],['course','lib.php',3263],['mnet','peer.php',118],['search/tests/fixtures','mock_search_engine.php',48],['lib/google/src/Google/Service','Calendar.php',903],['lib/google/src/Google/Service','Calendar.php',1071],['lib/google/src/Google/Service','Calendar.php',1269],['lib/google/src/Google/Service','Calendar.php',1412],['cache/stores/session','lib.php',417],['blog','locallib.php',322],['lib/google/src/Google/Service','Storagetransfer.php',381],['cache/stores/mongodb','lib.php',361],['lib/google/src/Google/Cache','Null.php',53],['lib/google/src/Google/Service','GamesConfiguration.php',251],['lib/google/src/Google/Service','GamesConfiguration.php',390],['cache/stores/file','lib.php',393],['badges/criteria','award_criteria.php',330],['cache/stores/memcached','lib.php',402],['lib/google/src/Google/Service','AppState.php',154],['lib/google/src/Google/Service','Resourceviews.php',423],['lib/portfolio','plugin.php',692],['calendar','lib.php',2423],['lib/google/src/Google/Service','Classroom.php',466],['lib/google/src/Google/Service','Classroom.php',615],['lib/google/src/Google/Service','Classroom.php',701],['lib/google/src/Google/Service','Classroom.php',806],['lib/google/src/Google/Service','Classroom.php',934],['lib/google/src/Google/Service','SQLAdmin.php',786],['lib/google/src/Google/Service','SQLAdmin.php',856],['lib/google/src/Google/Service','SQLAdmin.php',1023],['lib/google/src/Google/Service','SQLAdmin.php',1368],['lib/google/src/Google/Service','SQLAdmin.php',1483],['badges/criteria','award_criteria_manual.php',220],['search/engine/solr/classes','engine.php',1045],['lib/google/src/Google/Service','Compute.php',4021],['lib/google/src/Google/Service','Compute.php',4149],['lib/google/src/Google/Service','Compute.php',4284],['lib/google/src/Google/Service','Compute.php',4571],['lib/google/src/Google/Service','Compute.php',4671],['lib/google/src/Google/Service','Compute.php',4829],['lib/google/src/Google/Service','Compute.php',4942],['lib/google/src/Google/Service','Compute.php',5033],['lib/google/src/Google/Service','Compute.php',5174],['lib/google/src/Google/Service','Compute.php',5248],['lib/google/src/Google/Service','Compute.php',5378],['lib/google/src/Google/Service','Compute.php',5508],['lib/google/src/Google/Service','Compute.php',5683],['lib/google/src/Google/Service','Compute.php',5984],['lib/google/src/Google/Service','Compute.php',6156],['lib/google/src/Google/Service','Compute.php',6316],['lib/google/src/Google/Service','Compute.php',6717],['lib/google/src/Google/Service','Compute.php',6898],['lib/google/src/Google/Service','Compute.php',7037],['lib/google/src/Google/Service','Compute.php',7128],['lib/google/src/Google/Service','Compute.php',7208],['lib/google/src/Google/Service','Compute.php',7299],['lib/google/src/Google/Service','Compute.php',7409],['lib/google/src/Google/Service','Compute.php',7570],['lib/google/src/Google/Service','Compute.php',7734],['lib/google/src/Google/Service','Compute.php',7938],['lib/google/src/Google/Service','Compute.php',8035],['lib/google/src/Google/Service','Compute.php',8210],['lib/google/src/Google/Service','Compute.php',8305],['lib/google/src/Google/Service','Pubsub.php',240],['lib/google/src/Google/Service','Pubsub.php',379],['lib/google/src/Google/Service','YouTube.php',1810],['lib/google/src/Google/Service','YouTube.php',2061],['lib/google/src/Google/Service','YouTube.php',2459],['lib/google/src/Google/Service','YouTube.php',2889],['lib/google/src/Google/Service','YouTube.php',3187],['lib/google/src/Google/Service','YouTube.php',3419],['lib/google/src/Google/Service','YouTube.php',3559],['lib/google/src/Google/Service','YouTube.php',3928],['lib/google/src/Google/Service','YouTube.php',4158],['lib/google/src/Google/Cache','Apc.php',105],['lib/google/src/Google/Service','Dfareporting.php',5000],['lib/google/src/Google/Service','Dfareporting.php',5566],['lib/google/src/Google/Service','Dfareporting.php',5753],['lib/google/src/Google/Service','Dfareporting.php',5877],['lib/google/src/Google/Service','Dfareporting.php',6397],['lib/google/src/Google/Service','Dfareporting.php',6578],['lib/google/src/Google/Service','Dfareporting.php',6731],['lib/google/src/Google/Service','Dfareporting.php',6996],['lib/google/src/Google/Service','Dfareporting.php',7503],['lib/google/src/Google/Service','Dfareporting.php',8102],['lib/google/src/Google/Service','Dfareporting.php',8768],['lib/google/src/Google/Service','Manager.php',244],['lib/google/src/Google/Service','Manager.php',324],['lib/google/src/Google/Service','CloudMonitoring.php',274],['lib','webdavlib.php',691]], 317],
'__construct': ['__construct', '', [['lib/adodb/drivers','adodb-odbc_mssql.inc.php',50],['lib/adodb/drivers','adodb-odbc_mssql.inc.php',359],['question/classes/statistics/responses','analyser.php',69],['auth/radius','auth.php',38],['lib/xmldb','xmldb_file.php',43],['lib/lessphp/Tree/Mixin','Definition.php',18],['cache/stores/static','lib.php',127],['lib/classes/session','file.php',40],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['backup/util/ui','base_moodleform.class.php',68],['lib/simplepie/library/SimplePie','Author.php',81],['lib/filestorage','zip_archive.php',66],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/phpexcel/PHPExcel','HashTable.php',44],['mod/quiz/tests','repaginate_test.php',39],['lib/form','modvisible.php',43],['lib/phpexcel/PHPExcel/Worksheet','Row.php',44],['cache','disabledlib.php',44],['lib/phpexcel/PHPExcel/Worksheet','Dimension.php',58],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['question/type/ddwtos','question.php',61],['mnet/xmlrpc','client.php',25],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes','useragent.php',115],['lib/pear/HTML/QuickForm','advcheckbox.php',66],['lib/classes/update','checker_exception.php',37],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',53],['lib/jabber/XMPP','XMPP.php',101],['lib/form','radio.php',44],['lib/spout/src/Spout/Reader/XLSX/Helper','StyleHelper.php',45],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/phpexcel/PHPExcel/Style','Border.php',67],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['lib/adodb/drivers','adodb-oci8quercus.inc.php',31],['lib/adodb/drivers','adodb-oci8quercus.inc.php',45],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',29],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/phpexcel/PHPExcel','DocumentProperties.php',123],['lib/typo3','class.t3lib_cs.php',509],['mod/workshop/allocation/scheduled','lib.php',48],['lib/adodb/drivers','adodb-netezza.inc.php',53],['lib/adodb/drivers','adodb-netezza.inc.php',144],['mod/feedback/classes','complete_form.php',58],['search/classes','document.php',188],['webservice/rest','locallib.php',40],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',57],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['backup/moodle2','backup_block_task.class.php',43],['lib/lessphp/Tree','Negative.php',14],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/pear/HTML/QuickForm','header.php',33],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','InMemoryStrategy.php',26],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',51],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',60],['lib/spout/src/Spout/Reader/ODS','Sheet.php',33],['question/type/calculated/tests','helper.php',205],['lib/adodb/drivers','adodb-odbtp.inc.php',38],['lib/adodb/drivers','adodb-odbtp.inc.php',673],['lib/adodb/drivers','adodb-odbtp.inc.php',796],['lib/adodb/drivers','adodb-odbtp.inc.php',806],['lib/adodb/drivers','adodb-odbtp.inc.php',816],['lib/adodb/drivers','adodb-odbtp.inc.php',826],['lib/adodb/drivers','adodb-odbtp.inc.php',836],['enrol/lti/ims-blti','blti.php',28],['backup/cc','cc2moodle.php',105],['mod/chat','locallib.php',181],['mod/chat','locallib.php',229],['user/filters','simpleselect.php',45],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',244],['lib/dml','pdo_moodle_database.php',42],['lib/adodb/drivers','adodb-sqlite3.inc.php',36],['lib/adodb/drivers','adodb-sqlite3.inc.php',350],['lib/pear/HTML/QuickForm','static.php',44],['competency/classes/external','comment_area_exporter.php',48],['lib/lessphp/Tree','Selector.php',31],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['auth/fc','fcFPP.php',33],['lib/xmldb','xmldb_key.php',43],['grade/grading/form/rubric','rubriceditor.php',56],['lib/google/src/Google/Service','Cloudlatencytest.php',40],['course','moodleform_mod.php',69],['auth/nntp','auth.php',35],['grade/report/grader','lib.php',111],['admin/tool/generator/classes','course_backend.php',116],['lib/minify/lib','FirePHP.php',189],['lib/adodb/drivers','adodb-sqlitepo.inc.php',38],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',66],['lib/lessphp/Tree','Rule.php',24],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/google/src/Google/Service','DataTransfer.php',44],['lib/google/src/Google/Http','Batch.php',42],['backup/util/structure','base_processor.class.php',49],['admin/tool/lpmigrate/classes','framework_mapper.php',50],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',46],['lib/lessphp/Tree','NameValue.php',22],['mod/quiz/classes','admin_review_setting.php',82],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['mod/quiz/report','attemptsreport_table.php',76],['blocks/lp/classes/output','summary.php',59],['lib/google/src/Google/IO','Stream.php',45],['lib/google/src/Google/Service','Freebase.php',38],['grade/tests','reportlib_test.php',36],['search/classes','manager.php',100],['question/behaviour/adaptive','behaviour.php',310],['admin/tool/lp/classes/form','framework_autocomplete.php',48],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['lib/google/src/Google/Task','Runner.php',76],['backup/util/settings/root','root_backup_setting.class.php',34],['lib','componentlib.class.php',179],['lib','componentlib.class.php',610],['lib','componentlib.class.php',834],['lib/google/src/Google/Service','AdSense.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['lib/spout/src/Spout/Reader/CSV','Sheet.php',24],['lib/filebrowser','file_info_context_system.php',37],['lib/grade','grade_item.php',260],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['auth/email','auth.php',34],['mod/wiki/editors','wikifiletable.php',40],['lib/google/src/Google/Service','Replicapool.php',51],['lib/dtl','database_exporter.php',55],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/phpexcel/PHPExcel/Writer','CSV.php',79],['lib/google/src/Google/Service','Tasks.php',44],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/minify/lib/Minify','Source.php',43],['lib/jabber/XMPP','Roster.php',48],['lib/lessphp/Tree','Element.php',19],['lib/classes','string_manager_install.php',43],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib/form','filemanager.php',54],['lib/form','filemanager.php',316],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['backup/util/ui','renderer.php',813],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',44],['question/classes/statistics/questions','calculator.php',66],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/google/src/Google/Service','Resource.php',62],['lib/form','autocomplete.php',56],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',60],['mod/lesson/classes','file_info.php',45],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['lib/google/src/Google/Service','Partners.php',43],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',635],['grade/edit/tree','lib.php',668],['grade/edit/tree','lib.php',834],['lib/simplepie/library/SimplePie','Cache.php',69],['mod/wiki/diff','difflib.php',277],['mod/wiki/diff','difflib.php',381],['mod/wiki/diff','difflib.php',478],['lib/pear/HTML/QuickForm','select.php',58],['lib/classes/output','mustache_javascript_helper.php',40],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/data','export_form.php',16],['lib/pear/HTML/QuickForm','autocomplete.php',67],['question/type/shortanswer','question.php',44],['lib/google/src/Google/Service','AndroidPublisher.php',52],['lib/google/src/Google/Verifier','Pem.php',31],['lib/classes/antivirus','scanner.php',41],['lib/phpexcel/PHPExcel/Reader','Excel5.php',414],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/classes/output','inplace_editable.php',107],['lib/adodb/drivers','adodb-informix.inc.php',37],['competency/classes','competency_rule.php',45],['lib/phpexcel/PHPExcel','RichText.php',37],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',59],['lib/pear/HTML/QuickForm','input.php',38],['repository/picasa','lib.php',41],['mod/feedback/classes','structure.php',48],['backup/util/plan','backup_structure_step.class.php',38],['question/classes/bank','random_question_loader.php',61],['mod/quiz/report/statistics/classes','calculated.php',43],['lib/horde/framework/Horde/Stream','String.php',27],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['mod/workshop/backup/moodle1','lib.php',308],['lib/google/src/Google/Service','YouTubeReporting.php',47],['grade/export/txt','grade_export_txt.php',27],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['mod/imscp','locallib.php',289],['lib/form','selectyesno.php',42],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['mod/lti/service/profile/classes/local/service','profile.php',41],['repository/flickr_public','lib.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['admin/tool/lp/classes/output','template_cohorts_table.php',53],['lib/simplepie/library','SimplePie.php',611],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/testing/generator','component_generator_base.php',45],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',175],['lib/classes','plugin_manager.php',91],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/xmldb','xmldb_field.php',84],['lib/adodb/drivers','adodb-ibase.inc.php',59],['lib/adodb/drivers','adodb-ibase.inc.php',764],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['admin/roles/classes','view_role_definition_table.php',28],['lib/google/src/Google/Cache','Memcache.php',44],['lib/pear/HTML/QuickForm','radio.php',48],['lib/filebrowser','file_info_context_coursecat.php',39],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',37],['mod/workshop/eval/best','lib.php',44],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',38],['grade/report','lib.php',156],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['availability/classes','info_module.php',40],['mod/book','locallib.php',414],['question/engine','datalib.php',68],['question/engine','datalib.php',1331],['question/engine','datalib.php',1632],['question/engine','datalib.php',1740],['question/engine','datalib.php',1870],['question/engine','datalib.php',1941],['webservice','lib.php',745],['webservice','lib.php',841],['lib/adodb/drivers','adodb-informix72.inc.php',59],['lib/adodb/drivers','adodb-informix72.inc.php',399],['lib/adodb','adodb-pager.inc.php',60],['user/classes/output/myprofile','category.php',68],['lib/lessphp/Visitor','extendFinder.php',15],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib','filelib.php',2720],['lib','filelib.php',3601],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',32],['report/competency/classes/output','report.php',56],['lib/google/src/Google/Service','Computeaccounts.php',49],['question/type','edit_question_form.php',96],['lib/filebrowser','file_info_context_user.php',39],['admin/tool/lp/classes/output','template_plans_page.php',37],['lib/phpexcel/PHPExcel','Style.php',93],['lib/minify/lib/Minify','HTML.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/form','password.php',44],['backup','backup.class.php',146],['mod/feedback/classes','course_select_form.php',39],['lib/google/src/Google/Auth','AppIdentity.php',39],['lib/adodb','adodb-active-record.inc.php',121],['lib/phpexcel/PHPExcel','Chart.php',169],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['admin/roles/classes','allow_switch_page.php',33],['lib/grade','grade_object.php',80],['lib/google/src/Google/IO','Exception.php',29],['auth/lti','auth.php',38],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier','HTMLPurifier.php',104],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',47],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/evalmath','evalmath.class.php',120],['lib/form','url.php',46],['lib/dml','pdo_moodle_recordset.php',41],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['backup/cc/cc_lib','xmlbase.php',52],['badges/lib','bakerlib.php',52],['lib/google/src/Google/Signer','P12.php',35],['availability/classes','info_section.php',40],['lib/form','static.php',47],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['lib/google/src/Google/Service','YouTubeAnalytics.php',56],['admin/roles/classes','check_capability_table.php',40],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/adodb/drivers','adodb-postgres64.inc.php',127],['lib/adodb/drivers','adodb-postgres64.inc.php',919],['backup/util/helper','restore_prechecks_helper.class.php',213],['user/profile','lib.php',59],['lib/google/src/Google/Service','Admin.php',40],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',62],['lib/google/src/Google/Service','MapsEngine.php',66],['lib','listlib.php',82],['lib','listlib.php',485],['lib/phpexcel/PHPExcel/Writer','HTML.php',128],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/simplepie/library/SimplePie','Source.php',61],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/google/src/Google/Cache','File.php',41],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['backup/util/ui','backup_moodleform.class.php',41],['availability/condition/grouping/classes','condition.php',46],['lib/classes/session','memcache.php',50],['cache/classes','dummystore.php',62],['badges/classes','assertion.php',49],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['availability/tests/fixtures','mock_condition.php',52],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['mod/quiz/report','attemptsreport_options.php',95],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',39],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/google/src/Google/Service','Dns.php',53],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['backup/moodle2','restore_block_task.class.php',45],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',54],['lib/form','recaptcha.php',48],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/phpexcel/PHPExcel/Chart','Legend.php',75],['lib/phpexcel/PHPExcel','WorksheetIterator.php',44],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1189],['cache/classes','loaders.php',1586],['lib/google/src/Google/Service','Appengine.php',44],['admin/tool/lp/classes/output','template_cohorts_page.php',37],['search/classes','engine.php',77],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/classes/progress','display.php',48],['lib/lessphp/Tree','Call.php',19],['course/format','lib.php',78],['question/type/calculated','datasetdefinitions_form.php',53],['lib/google/src/Google/Service','Translate.php',40],['enrol/database','settingslib.php',34],['lib/lessphp/Tree/Mixin','Call.php',14],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/tests','collator_test.php',310],['lib/google/src/Google/Auth','Simple.php',31],['backup/cc/cc_lib','cc_manifest.php',45],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['lib/phpmailer','moodle_phpmailer.php',47],['availability/tests/fixtures','mock_info.php',40],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['admin/tool/lp/classes/form','persistent.php',68],['lib/adodb/drivers','adodb-mysqlt.inc.php',32],['lib/adodb/drivers','adodb-mysqlt.inc.php',96],['webservice/tests','lib_test.php',213],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['filter','local_settings_form.php',33],['mod/quiz/accessrule','accessrulebase.php',52],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['mod/assign/feedback/editpdf/fpdi','pdf_parser.php',170],['lib/lessphp/Tree','Dimension.php',15],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/adodb/perf','perf-oci8.inc.php',203],['lib/phpexcel','PHPExcel.php',361],['backup/util/helper','restore_questions_parser_processor.class.php',42],['backup/moodle2','backup_plugin.class.php',44],['lib/classes/antivirus','scanner_exception.php',38],['webservice/xmlrpc','lib.php',43],['report/loglive/classes','renderable.php',73],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['lib/filebrowser','file_info.php',43],['lib/adodb/drivers','adodb-access.inc.php',34],['lib/adodb/drivers','adodb-access.inc.php',83],['mod/feedback/classes','responses_table.php',54],['lib/editor/tinymce','adminlib.php',36],['admin/tool/monitor/classes','rule.php',44],['lib/google/src/Google/Service','AdExchangeBuyer.php',55],['lib/filebrowser','virtual_root_file.php',45],['lib/phpexcel/PHPExcel/RichText','Run.php',35],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/google/src/Google/Service','CivicInfo.php',40],['mod/feedback/classes/output','summary.php',52],['lib/minify/lib/Minify','Build.php',77],['lib/adodb/drivers','adodb-ado_mssql.inc.php',146],['lib/adodb/drivers','adodb-odbc.inc.php',44],['lib/adodb/drivers','adodb-odbc.inc.php',611],['lib','moodlelib.php',9421],['lib','moodlelib.php',9632],['user/selector','lib.php',85],['user/selector','lib.php',674],['admin/tool/lp/classes/output','plan_page.php',49],['repository/dropbox','lib.php',49],['lib/horde/framework/Horde/Mime','Part.php',261],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','CachingStrategyFactory.php',56],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',777],['lib/google/src/Google/Service','Books.php',60],['lib/google/src/Google/Service','Oauth2.php',50],['admin/tool/log/classes/log','store.php',30],['admin/tool/recyclebin/classes','category_bin.php',45],['lib/phpexcel/PHPExcel/Style','Color.php',64],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',69],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['lib/classes/update','checker.php',50],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',243],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/phpexcel/PHPExcel/Chart','Title.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/adodb/drivers','adodb-text.inc.php',93],['lib/adodb/drivers','adodb-text.inc.php',379],['lib/phpexcel/PHPExcel','Calculation.php',2071],['lib/adodb/drivers','adodb-sqlite.inc.php',36],['lib/adodb/drivers','adodb-sqlite.inc.php',367],['lib/google/src/Google/Service','Analytics.php',77],['blocks/lp/classes/output','plans_to_review_page.php',48],['lib/google/src/Google/Service','Coordinate.php',48],['availability/condition/group/classes','condition.php',43],['lib/lessphp/Exception','Chunk.php',19],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['backup/cc/cc_lib','cc_resources.php',102],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['question/classes/statistics/questions','calculated.php',181],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/xmldb','xmldb_structure.php',40],['lib/ddl','sqlite_sql_generator.php',73],['lib/pear/HTML/QuickForm','Renderer.php',31],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['lib/pear/HTML/QuickForm','file.php',54],['lib/minify/lib/Minify/Cache','File.php',9],['lib/pear/HTML/QuickForm','xbutton.php',39],['lib/htmlpurifier','locallib.php',134],['admin/tool/recyclebin/classes','course_bin.php',45],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',174],['backup/util/helper','backup_helper.class.php',381],['lib/form','htmleditor.php',48],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['repository/skydrive','lib.php',42],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',260],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/horde/framework/Horde/Exception','Pear.php',22],['lib/portfolio','exceptions.php',50],['backup/moodle2','restore_plugin.class.php',43],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',177],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/minify/lib/Minify/JS','ClosureCompiler.php',101],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/form','dateselector.php',70],['lib/spout/src/Spout/Common/Helper','EncodingHelper.php',38],['report/competency/classes/output','user_course_navigation.php',51],['lib/adodb/drivers','adodb-postgres7.inc.php',98],['lib/adodb/drivers','adodb-postgres7.inc.php',311],['lib/adodb/drivers','adodb-postgres7.inc.php',342],['lib/lessphp/Tree','Alpha.php',13],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',46],['lib/tcpdf','tcpdf.php',1822],['lib/adodb/drivers','adodb-sybase.inc.php',47],['lib/adodb/drivers','adodb-sybase.inc.php',313],['lib/adodb/drivers','adodb-sybase.inc.php',394],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',44],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',136],['mod/lesson','editpage_form.php',41],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/horde/framework/Horde','Domhtml.php',53],['lib','formslib.php',142],['lib','formslib.php',1442],['lib','formslib.php',2653],['rating','lib.php',114],['rating','lib.php',1070],['lib/phpexcel/PHPExcel/Worksheet','Column.php',44],['lib/google/src/Google/Service','Script.php',67],['lib/adodb','adodb-xmlschema.inc.php',118],['lib/adodb','adodb-xmlschema.inc.php',245],['lib/adodb','adodb-xmlschema.inc.php',637],['lib/adodb','adodb-xmlschema.inc.php',781],['lib/adodb','adodb-xmlschema.inc.php',982],['lib/adodb','adodb-xmlschema.inc.php',1295],['lib/google/src/Google/Service','DeploymentManager.php',54],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',546],['mod/quiz','attemptlib.php',2337],['mod/quiz','attemptlib.php',2392],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib','boxlib.php',264],['lib/simplepie/library/SimplePie','Restriction.php',81],['admin/roles/classes','allow_assign_page.php',31],['lib/adodb/drivers','adodb-pdo.inc.php',90],['lib/adodb/drivers','adodb-pdo.inc.php',553],['lib/adodb/drivers','adodb-pdo.inc.php',630],['tag/classes/output','tagareacollection.php',40],['admin/tool/lp/classes','template_statistics.php',62],['lib','weblib.php',313],['lib','weblib.php',3183],['lib','weblib.php',3483],['lib','weblib.php',3518],['lib','weblib.php',3593],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/html2text','Html2Text.php',232],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/pear/HTML/QuickForm/Renderer','Array.php',143],['question/engine','lib.php',774],['question/engine','lib.php',1011],['question/engine','lib.php',1059],['lib/jabber/XMPP','XMLObj.php',76],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/editor/atto','adminlib.php',109],['lib/pear/HTML/QuickForm/Renderer','Tableless.php',116],['grade/report/history/classes/output','tablelog.php',72],['lib/google/src/Google/IO','Curl.php',38],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',31],['lib/pear/HTML/QuickForm','hiddenselect.php',41],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['lib/adodb/drivers','adodb-mysqlpo.inc.php',35],['lib/adodb/drivers','adodb-mysqlpo.inc.php',82],['lib/adodb/drivers','adodb-mysqlpo.inc.php',119],['lib/google/src/Google/Service','Blogger.php',50],['backup/util/xml/output','file_xml_output.class.php',37],['lib/form','tags.php',75],['admin/tool/installaddon/classes','installer.php',219],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['lib/simplepie/library/SimplePie','IRI.php',252],['comment','locallib.php',39],['question/engine','states.php',61],['lib/spout/src/Spout/Reader/XLSX/Helper','CellValueFormatter.php',52],['lib/google/src/Google/Service','Dataflow.php',45],['mod/data','locallib.php',66],['mod/data','locallib.php',433],['lib/horde/framework/Horde','Variables.php',60],['backup/util/ui','base_ui.class.php',84],['lib/simplepie/library/SimplePie','Registry.php',99],['cache/locks/file','lib.php',66],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/filebrowser','file_info_stored.php',51],['tag/classes/output','tagcollname.php',42],['competency/classes','persistent.php',54],['admin/tool/lp/classes/output','competency_plan_navigation.php',54],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',146],['lib/pear/HTML/QuickForm','textarea.php',48],['lib/lessphp','Visitor.php',14],['lib/google/src/Google/Service','CloudUserAccounts.php',52],['question/classes/bank','column_base.php',44],['lib/minify/lib/MrClay','Cli.php',74],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',589],['lib','outputcomponents.php',665],['lib','outputcomponents.php',783],['lib','outputcomponents.php',925],['lib','outputcomponents.php',1009],['lib','outputcomponents.php',2183],['lib','outputcomponents.php',2222],['lib','outputcomponents.php',2295],['lib','outputcomponents.php',2376],['lib','outputcomponents.php',2579],['lib','outputcomponents.php',2627],['lib','outputcomponents.php',2687],['lib','outputcomponents.php',2860],['lib','outputcomponents.php',3030],['lib','outputcomponents.php',3134],['lib','outputcomponents.php',3201],['lib','outputcomponents.php',3329],['lib','outputcomponents.php',3613],['lib','outputcomponents.php',3642],['lib','outputcomponents.php',3668],['lib','outputcomponents.php',3690],['lib','outputcomponents.php',3719],['lib','outputcomponents.php',3751],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/phpexcel/PHPExcel','Cell.php',114],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['repository/wikimedia','wikimedia.php',35],['lib/phpexcel/PHPExcel/Style','Fill.php',81],['lib/google/src/Google/Service','Cloudresourcemanager.php',42],['lib/editor/tinymce/classes','plugin.php',49],['mod/wiki/parser/markups','html.php',21],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/horde/framework/Horde/Support','Inflector.php',115],['question/type/gapselect','question.php',55],['lib/google/src/Google','Config.php',33],['badges/criteria','award_criteria_activity.php',45],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['course/format/topics','renderer.php',38],['lib/adodb/drivers','adodb-oci8po.inc.php',33],['lib/adodb/drivers','adodb-oci8po.inc.php',99],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/filestorage','tgz_packer.php',749],['lib/filestorage','tgz_packer.php',831],['tag/classes','index_builder.php',96],['lib/pear/HTML/QuickForm','reset.php',37],['lib/classes/lock','lock.php',55],['admin/roles/classes','assign_user_selector_base.php',40],['backup/util/output','output_controller.class.php',44],['question/type/randomsamatch','question.php',114],['lib/google/src/Google/Service','Customsearch.php',38],['lib/lessphp/Tree','Extend.php',28],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',215],['lib/google/src/Google/Service','TagManager.php',67],['question/type/gapselect/tests','edit_form_test.php',41],['mod/lesson','locallib.php',2004],['mod/lesson','locallib.php',2611],['backup/util/helper','restore_structure_parser_processor.class.php',41],['course','renderer.php',52],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib','modinfolib.php',429],['lib','modinfolib.php',1665],['lib','modinfolib.php',2492],['lib','tablelib.php',128],['lib','tablelib.php',1468],['lib','tablelib.php',1633],['lib','tablelib.php',1698],['user/filters','cohort.php',36],['user/filters','text.php',37],['lib','outputrenderers.php',120],['lib','outputrenderers.php',285],['lib','outputrenderers.php',408],['lib','outputrenderers.php',4578],['lib','outputrenderers.php',4831],['repository','lib.php',116],['repository','lib.php',533],['lib','adminlib.php',791],['lib','adminlib.php',1138],['lib','adminlib.php',1212],['lib','adminlib.php',1355],['lib','adminlib.php',1556],['lib','adminlib.php',1928],['lib','adminlib.php',2040],['lib','adminlib.php',2106],['lib','adminlib.php',2199],['lib','adminlib.php',2260],['lib','adminlib.php',2302],['lib','adminlib.php',2341],['lib','adminlib.php',2429],['lib','adminlib.php',2463],['lib','adminlib.php',2621],['lib','adminlib.php',2706],['lib','adminlib.php',2935],['lib','adminlib.php',3091],['lib','adminlib.php',3233],['lib','adminlib.php',3324],['lib','adminlib.php',3488],['lib','adminlib.php',3571],['lib','adminlib.php',3682],['lib','adminlib.php',3833],['lib','adminlib.php',4067],['lib','adminlib.php',4134],['lib','adminlib.php',4352],['lib','adminlib.php',4381],['lib','adminlib.php',4410],['lib','adminlib.php',4434],['lib','adminlib.php',4464],['lib','adminlib.php',4500],['lib','adminlib.php',4535],['lib','adminlib.php',4567],['lib','adminlib.php',4657],['lib','adminlib.php',4690],['lib','adminlib.php',4748],['lib','adminlib.php',4790],['lib','adminlib.php',4814],['lib','adminlib.php',4840],['lib','adminlib.php',4863],['lib','adminlib.php',4880],['lib','adminlib.php',4925],['lib','adminlib.php',4943],['lib','adminlib.php',5002],['lib','adminlib.php',5045],['lib','adminlib.php',5080],['lib','adminlib.php',5123],['lib','adminlib.php',5206],['lib','adminlib.php',5336],['lib','adminlib.php',5378],['lib','adminlib.php',5423],['lib','adminlib.php',5480],['lib','adminlib.php',5496],['lib','adminlib.php',5552],['lib','adminlib.php',5777],['lib','adminlib.php',5831],['lib','adminlib.php',5885],['lib','adminlib.php',5902],['lib','adminlib.php',5950],['lib','adminlib.php',5992],['lib','adminlib.php',6043],['lib','adminlib.php',6099],['lib','adminlib.php',6328],['lib','adminlib.php',6508],['lib','adminlib.php',6688],['lib','adminlib.php',6782],['lib','adminlib.php',6931],['lib','adminlib.php',7088],['lib','adminlib.php',7712],['lib','adminlib.php',8147],['lib','adminlib.php',8330],['lib','adminlib.php',8617],['lib','adminlib.php',8764],['lib','adminlib.php',8924],['lib','adminlib.php',9071],['lib','adminlib.php',9235],['lib','adminlib.php',9428],['lib','adminlib.php',9482],['lib','adminlib.php',9544],['lib','adminlib.php',9589],['lib','adminlib.php',9626],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',81],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['question/type/numerical','questiontype.php',507],['auth/mnet','auth.php',35],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['auth/imap','auth.php',35],['tag/classes/output','taglist.php',54],['lib','pdflib.php',161],['lib/phpexcel/PHPExcel/RichText','TextElement.php',35],['lib/dml','database_column_info.php',112],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['mod/wiki/editors','wikieditor.php',36],['lib/lessphp/SourceMap','Base64VLQ.php',67],['repository/s3','lib.php',44],['admin/tool/uploadcourse/classes','course.php',111],['lib/google/src/Google/Service','Replicapoolupdater.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',102],['mod/feedback/item','feedback_item_class.php',28],['lib/adodb/drivers','adodb-mssql_n.inc.php',245],['lib','badgeslib.php',133],['lib/pear/HTML/QuickForm','text.php',38],['lib/simplepie/library/SimplePie','Enclosure.php',219],['calendar/classes','rrule_manager.php',182],['auth/webservice','auth.php',35],['lib','outputrequirementslib.php',171],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib','questionlib.php',1261],['lib','questionlib.php',1505],['lib','uploadlib.php',40],['lib/spout/src/Spout/Writer/Common/Helper','ZipHelper.php',28],['lib/google/src/Google/Service','Cloudsearch.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/spout/src/Spout/Writer/Common','Sheet.php',39],['question/behaviour','behaviourbase.php',50],['blocks/rss_client/classes/output','footer.php',47],['lib/dtl','file_xml_database_importer.php',34],['admin/roles/classes','capability_table_with_risks.php',45],['lib/adodb/drivers','adodb-mssql.inc.php',110],['lib/adodb/drivers','adodb-mssql.inc.php',870],['lib/adodb/drivers','adodb-mssql.inc.php',1077],['lib/google/src/Google/Service','Bigquery.php',62],['lib/google/src/Google/Service','ShoppingContent.php',50],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['repository/equella','lib.php',42],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',199],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['cache/classes','helper.php',90],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/classes','chart_series.php',62],['lib/classes/dml','recordset_walk.php',64],['lib/google/src/Google/Service','Webmasters.php',47],['lib/tcpdf/include/barcodes','qrcode.php',631],['backup/moodle2','backup_settingslib.php',42],['backup/moodle2','backup_settingslib.php',138],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',40],['course/tests/fixtures','course_capability_assignment.php',60],['mod/forum/classes','subscriber_selector_base.php',53],['lib','blocklib.php',54],['lib','blocklib.php',152],['report/loglive/classes','table_log.php',50],['lib','navigationlib.php',147],['lib','navigationlib.php',1015],['lib','navigationlib.php',2825],['lib','navigationlib.php',3086],['lib','navigationlib.php',3412],['lib','navigationlib.php',3459],['lib','navigationlib.php',4888],['lib','navigationlib.php',5070],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',41],['grade/report/history/classes/output','user_button.php',40],['user/filters','courserole.php',34],['lib/phpexcel/PHPExcel','IOFactory.php',69],['lib/lessphp/Tree','Color.php',15],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',70],['lib/adodb/drivers','adodb-vfp.inc.php',72],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/google/src/Google/Service','Clouddebugger.php',50],['lib/horde/framework/Horde/Exception','NotFound.php',15],['admin/tool/lp/classes/output','user_competency_course_navigation.php',55],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib','mathslib.php',45],['lib/filestorage','tgz_extractor.php',119],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['filter/emoticon/tests','filter_test.php',68],['mnet/xmlrpc','xmlparser.php',15],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',31],['admin/roles/classes','capability_table_base.php',51],['lib/simplepie/library/SimplePie','Item.php',82],['lib/form','selectgroups.php',57],['auth/shibboleth','auth.php',38],['admin/tool/langimport/classes','controller.php',48],['lib/form','warning.php',49],['lib/filestorage','stored_file.php',63],['grade/grading/form/guide','guideeditor.php',49],['lib/pear/HTML/QuickForm','group.php',80],['backup/moodle2','restore_subplugin.class.php',45],['grade/export','lib.php',60],['grade/export','lib.php',625],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',98],['backup/moodle2','backup_section_task.class.php',40],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib','flickrlib.php',53],['mod/assign/classes/output','grading_app.php',59],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['user/profile/field/menu','field.class.php',39],['lib/spout/src/Spout/Writer/Common/Internal','AbstractWorkbook.php',30],['lib/portfolio','exporter.php',113],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/horde/framework/Horde','Secret.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/classes/update','info.php',48],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/lessphp/Tree','Anonymous.php',21],['admin/tool/lp/classes','course_competencies_form_element.php',43],['lib/lessphp/Tree','Comment.php',17],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/adodb/drivers','adodb-mysql.inc.php',54],['lib/adodb/drivers','adodb-mysql.inc.php',717],['lib/adodb/drivers','adodb-mysql.inc.php',880],['enrol/ldap','lib.php',43],['mod/quiz/report/statistics','statistics_table.php',45],['lib/form','listing.php',68],['lib/google/src/Google/Service','Container.php',43],['mod/quiz','accessmanager.php',45],['lib/classes/message/inbound','processing_failed_exception.php',36],['blocks/online_users/classes','fetcher.php',45],['lib/pear/HTML/QuickForm','checkbox.php',48],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['lib/classes','chart_axis.php',65],['mod/glossary/classes','entry_query_builder.php',83],['mod/feedback/item/label','lib.php',26],['lib/adodb/drivers','adodb-mssqlnative.inc.php',131],['lib/adodb/drivers','adodb-mssqlnative.inc.php',847],['lib/adodb/drivers','adodb-mssqlnative.inc.php',1099],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['lib/form','editor.php',62],['lib','environmentlib.php',1258],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['mod/feedback/classes','templates_table.php',39],['tag/classes','manage_table.php',44],['lib/adodb/drivers','adodb-odbc_db2.inc.php',115],['lib/adodb/drivers','adodb-odbc_db2.inc.php',309],['backup/cc/cc_lib/gral_lib','cssparser.php',21],['lib/horde/framework/Horde/Support','Array.php',21],['lib/google/src/Google/Service','GroupsMigration.php',40],['admin/tool/lp/classes/output','user_evidence_list_page.php',61],['lib/google/src/Google/Service','Audit.php',39],['lib/simplepie/library/SimplePie','File.php',68],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['enrol/lti/classes','manage_table.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['question/type/ddimageortext','question.php',64],['question/type/ddimageortext','question.php',122],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',456],['lib/minify/lib','CSSmin.php',43],['lib/dml','moodle_temptables.php',51],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['blocks/rss_client/classes/output','block.php',47],['question/type/ddmarker','question.php',417],['question/type/ddmarker','question.php',469],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',51],['backup/util/helper','convert_helper.class.php',378],['lib/classes/update','validator.php',265],['lib/lessphp/Tree','Attribute.php',16],['admin/tool/generator/classes','backend.php',84],['backup/util/loggers','file_logger.class.php',35],['lib/adodb','adodb-exceptions.inc.php',30],['lib/google/src/Google','Client.php',70],['user/filters','profilefield.php',36],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['cache/tests/fixtures','lib.php',326],['mod/lti/service/profile/classes/local/resource','profile.php',43],['competency/classes','invalid_persistent_exception.php',38],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',63],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/dml','moodle_database.php',139],['search/classes','base.php',69],['admin/tool/lp/classes/output','competency_summary.php',54],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['mod/workshop/form/rubric','lib.php',105],['grade','lib.php',103],['grade','lib.php',927],['grade','lib.php',1089],['grade','lib.php',2053],['grade','lib.php',2213],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',35],['lib/google/src/Google/Service','Datastore.php',46],['admin/tool/lpmigrate/classes','framework_processor.php',98],['lib/dtl','database_importer.php',61],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['badges/lib','awardlib.php',55],['backup/util/helper','backup_array_iterator.class.php',39],['admin/tool/monitor/classes','subscription.php',43],['question/type/calculated','edit_calculated_form.php',51],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','FileBasedStrategy.php',57],['lib/form','datetimeselector.php',72],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['lib/classes','collator.php',58],['admin/tool/lp/classes','course_competency_statistics.php',48],['lib/google/src/Google/Service','Storage.php',57],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',28],['lib/lessphp/Tree','Paren.php',14],['mod/lti/classes','service_exception_handler.php',63],['lib/tcpdf/include/barcodes','pdf417.php',523],['mod/assign/feedback/offline','importgradeslib.php',66],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['question/engine/upgrade','upgradelib.php',283],['question/engine/upgrade','upgradelib.php',384],['question/type/numerical','question.php',323],['lib/pear/PEAR','Exception.php',107],['course/format','renderer.php',44],['lib/dml','oci_native_moodle_recordset.php',34],['question/behaviour','behaviourtypebase.php',133],['lib/pear/HTML','QuickForm.php',246],['lib/pear/HTML','QuickForm.php',1979],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['lib/google/src/Google/Auth','LoginTicket.php',37],['lib/adodb/drivers','adodb-csv.inc.php',41],['lib/adodb/drivers','adodb-csv.inc.php',196],['user/filters','yesno.php',33],['mod/wiki/parser','parser.php',98],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',87],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['admin/tool/lpmigrate/classes/form','migrate_framework.php',45],['backup/util/xml/parser/tests','parser_test.php',797],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['lib/tests','medialib_test.php',644],['lib/google/src/Google/Service','QPXExpress.php',39],['tag/classes/output','tagname.php',41],['lib/mustache/src/Mustache','Context.php',20],['lib/adodb/drivers','adodb-oracle.inc.php',32],['lib/adodb/drivers','adodb-oracle.inc.php',224],['backup/moodle2','restore_section_task.class.php',42],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['mod/forum/classes/output','forum_post.php',110],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['repository/googledocs','lib.php',65],['cache/stores/memcache','lib.php',120],['lib/filestorage','file_storage.php',78],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['lib/form','duration.php',55],['lib','outputlib.php',480],['lib','outputlib.php',2038],['filter/tex','latex.php',13],['backup/moodle2','backup_course_task.class.php',39],['lib/adodb','adodb.inc.php',310],['lib/adodb','adodb.inc.php',3035],['lib/adodb','adodb.inc.php',3160],['lib/adodb','adodb.inc.php',3242],['lib/adodb','adodb.inc.php',4353],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/google/src/Google/Logger','File.php',51],['admin/roles/classes','allow_role_page.php',37],['mod/quiz/report/overview','overview_table.php',41],['lib/lessphp/Tree','Keyword.php',17],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['question/type/ddmarker','questiontype.php',48],['mod/folder','renderer.php',159],['lib','portfoliolib.php',101],['tag/classes/output','tagcollsearchable.php',40],['webservice/soap/classes','wsdl.php',88],['lib/lessphp/Exception','Parser.php',30],['badges','renderer.php',973],['badges','renderer.php',1014],['badges','renderer.php',1078],['badges','renderer.php',1111],['badges','renderer.php',1137],['competency/classes/external','exporter.php',56],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['lib/google/src/Google/Service','Genomics.php',63],['lib/phpexcel/PHPExcel/Writer','PDF.php',38],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',125],['lib/google/src/Google/Service','Games.php',60],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',141],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/google/src/Google/Service','Licensing.php',40],['mod/workshop/form/comments','lib.php',99],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['lib/google/src/Google/Service','Fitness.php',58],['blocks/private_files','renderer.php',83],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',51],['enrol/flatfile','adminlib.php',35],['lib/xmldb','xmldb_object.php',55],['lib/google/src/Google/Service','Reports.php',47],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['auth/pam','auth.php',53],['lib/horde/framework/Horde','Stream.php',50],['comment','lib.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',53],['lib/google/src/Google/Service','Gmail.php',64],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/horde/framework/Horde/Mime','Related.php',32],['blocks','moodleblock.class.php',111],['lib/tcpdf','tcpdf_parser.php',92],['backup/util/plan','restore_structure_step.class.php',46],['blocks/rss_client/classes/output','channel_image.php',61],['lib/pear/HTML/QuickForm','hierselect.php',105],['question/type/numerical/tests','form_test.php',40],['badges/lib','backpacklib.php',40],['mod/workshop/allocation/manual','lib.php',51],['mod/quiz/report/responses','last_responses_table.php',39],['lib/simplepie','autoloader.php',62],['lib/spout/src/Spout/Common/Helper','StringHelper.php',21],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',121],['lib/pear/Crypt','CHAP.php',82],['lib/pear/Crypt','CHAP.php',170],['lib/pear/Crypt','CHAP.php',424],['lib/spout/src/Spout/Writer/Common/Helper','AbstractStyleHelper.php',22],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',63],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',77],['lib/simplepie/library/SimplePie','gzdecode.php',186],['mod/wiki','renderer.php',540],['lib/adodb','adodb-active-recordx.inc.php',138],['availability/classes','result.php',46],['lib','accesslib.php',5352],['lib','accesslib.php',5897],['lib','accesslib.php',6167],['lib','accesslib.php',6408],['lib','accesslib.php',6595],['lib','accesslib.php',6827],['lib','accesslib.php',7049],['lib','accesslib.php',7291],['lib/phpexcel/PHPExcel/Shared/OLE','PPS.php',110],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['auth/manual','auth.php',46],['question/engine/upgrade','behaviourconverters.php',78],['mod/wiki/diff','diff_nwiki.php',35],['mod/wiki/diff','diff_nwiki.php',50],['mod/wiki/diff','diff_nwiki.php',63],['mod/wiki/diff','diff_nwiki.php',76],['mod/wiki/diff','diff_nwiki.php',495],['mod/wiki/diff','diff_nwiki.php',640],['mod/wiki/diff','diff_nwiki.php',850],['mod/wiki/diff','diff_nwiki.php',901],['mod/wiki/diff','diff_nwiki.php',953],['lib/adodb/drivers','adodb-proxy.inc.php',28],['lib/classes/lock','file_lock_factory.php',57],['lib/google/src/Google/Auth','OAuth2.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['lib/filebrowser','file_info_context_module.php',47],['auth/none','auth.php',34],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/horde/framework/Horde/Text','Flowed.php',75],['admin/tool/log/store/legacy/classes/log','store.php',33],['lib/mustache/src/Mustache','HelperCollection.php',19],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['admin/tool/lp/classes/output','related_competencies.php',47],['mod/quiz/classes/question/bank','custom_view.php',44],['files','renderer.php',1083],['lib/form','text.php',47],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',398],['backup/cc','cc112moodle.php',59],['admin/tool/cohortroles/classes/output','cohort_role_assignments_table.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/google/src/Google/Service','Logging.php',39],['lib/lessphp/Tree','Expression.php',16],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/phpexcel/PHPExcel/Reader','HTML.php',118],['search/engine/solr/classes','schema.php',60],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['lib/adodb/drivers','adodb-ado5.inc.php',42],['lib/adodb/drivers','adodb-ado5.inc.php',380],['mod/assign/feedback/editpdf/classes','comment.php',58],['cache/classes','interfaces.php',473],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['repository/merlot','lib.php',37],['lib/adodb/drivers','adodb-firebird.inc.php',69],['backup/util/settings','backup_setting.class.php',43],['lib/adodb/drivers','adodb-fbsql.inc.php',28],['lib/adodb/drivers','adodb-fbsql.inc.php',167],['mnet/xmlrpc','serverlib.php',674],['webservice/soap','lib.php',45],['admin/tool/log/store/database/classes/log','store.php',47],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/form','passwordunmask.php',46],['lib/lessphp/Tree','Variable.php',20],['report/log/classes','renderable.php',96],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['question/classes/bank','view.php',70],['grade/report/singleview/classes/local/ui','range.php',38],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['admin/roles/classes','define_role_table_basic.php',31],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['blocks/rss_client','editfeed.php',36],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',55],['blocks/lp/classes/output','competencies_to_review_page.php',49],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',187],['mod/assign/feedback/file','renderable.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/adodb/drivers','adodb-db2.inc.php',66],['lib/adodb/drivers','adodb-db2.inc.php',731],['lib/adodb','adodb-xmlschema03.inc.php',136],['lib/adodb','adodb-xmlschema03.inc.php',270],['lib/adodb','adodb-xmlschema03.inc.php',678],['lib/adodb','adodb-xmlschema03.inc.php',823],['lib/adodb','adodb-xmlschema03.inc.php',1081],['lib/adodb','adodb-xmlschema03.inc.php',1399],['repository/youtube','lib.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',38],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/adodb/drivers','adodb-sybase_ase.inc.php',25],['lib/adodb/drivers','adodb-sybase_ase.inc.php',115],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/adodb','adodb-memcache.lib.inc.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',118],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',117],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['lib/spout/src/Spout/Common/Helper','FileSystemHelper.php',22],['lib/pear/HTML/QuickForm','button.php',37],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/mustache/src/Mustache','Engine.php',63],['lib/google/src/Google/Http','MediaFileUpload.php',75],['lib/phpexcel/PHPExcel','Worksheet.php',327],['mod/assign','gradingtable.php',68],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1196],['repository/webdav','lib.php',38],['tag/classes/output','tagisstandard.php',39],['lib/google/src/Google/Service','Appsactivity.php',52],['badges/criteria','award_criteria_course.php',47],['lib','searchlib.php',53],['lib','searchlib.php',95],['lib/lessphp/Output','Mapped.php',39],['availability/classes','tree.php',118],['lib/lessphp/Tree','Javascript.php',20],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/mustache/src/Mustache/Loader','InlineLoader.php',56],['repository/url','lib.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',293],['lib/lessphp/Tree','Ruleset.php',45],['tag/classes/output','tagindex.php',52],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/google/src/Google/Service','Prediction.php',51],['lib/classes/output','notification.php',101],['lib/lessphp/Tree','Unit.php',16],['backup/util/settings/course','course_backup_setting.class.php',25],['lib/spout/src/Spout/Writer','AbstractWriter.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib','dtllib.php',66],['mod/assign','assignmentplugin.php',50],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['backup/cc/cc_lib','cc_version11.php',57],['availability/condition/completion/classes','condition.php',48],['admin/roles/classes','allow_override_page.php',31],['mod/workshop/allocation','lib.php',103],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',23],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/phpexcel/PHPExcel/Calculation','Function.php',64],['availability/classes','capability_checker.php',49],['lib/google/src/Google/Service','Drive.php',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',56],['lib','setuplib.php',67],['lib','setuplib.php',113],['lib','setuplib.php',165],['lib','setuplib.php',184],['lib','setuplib.php',199],['lib','setuplib.php',219],['lib','setuplib.php',249],['lib','setuplib.php',271],['lib','setuplib.php',287],['lib','setuplib.php',309],['lib','setuplib.php',328],['lib','setuplib.php',346],['lib/form','textarea.php',50],['webservice/soap','locallib.php',57],['availability/classes','info.php',55],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/spout/src/Spout/Reader/XLSX/Helper','SheetHelper.php',49],['filter/urltolink/tests','filter_test.php',209],['lib/simplepie/library/SimplePie','Category.php',81],['admin/tool/lp/classes/output','manage_competencies_page.php',65],['lib/markdown','Markdown.php',99],['mod/assign','locallib.php',160],['mod/assign','locallib.php',8131],['lib/adodb/drivers','adodb-ldap.inc.php',48],['lib/adodb/drivers','adodb-ldap.inc.php',297],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',32],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',373],['lib','odslib.class.php',42],['lib','odslib.class.php',124],['lib','odslib.class.php',422],['lib','odslib.class.php',827],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',36],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/lessphp/Tree','Quoted.php',20],['mod/lesson','mod_form.php',36],['blocks/rss_client/classes/output','item.php',89],['lib/google/src/Google/Service','IdentityToolkit.php',38],['lib/horde/framework/Horde/Stream','Temp.php',25],['tag/classes/output','tagflag.php',39],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['lib/behat/form_field','behat_form_field.php',59],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',93],['lib/spout/src/Spout/Reader/ODS/Helper','CellValueFormatter.php',42],['tag/classes','collections_table.php',36],['lib/google/src/Google/Service','Spectrum.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['admin/tool/lp/classes/output','user_competency_summary.php',49],['lib/phpexcel/PHPExcel','NamedRange.php',65],['lib/pear/HTML/QuickForm','image.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['lib/form','searchableselector.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',52],['lib/adodb/drivers','adodb-oci805.inc.php',51],['lib/google/src/Google','Service.php',28],['lib/google/src/Google/IO','Abstract.php',50],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',46],['lib/form','header.php',45],['question/type/randomsamatch/tests','helper.php',121],['mod/workshop/form/accumulative','lib.php',99],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',89],['lib/form','submit.php',41],['report/log/classes','table_log.php',45],['admin/roles/classes','admins_potential_selector.php',30],['question/classes/engine/variants','least_used_strategy.php',51],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['mod/data','lib.php',68],['mod/data','lib.php',2278],['mod/data','lib.php',2552],['mod/data','lib.php',2573],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['mod/scorm','renderer.php',129],['lib/phpunit/classes','advanced_testcase.php',45],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',41],['backup/cc/cc_lib','cc_version1.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['tag/classes','areas_table.php',36],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',125],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/google/src/Google/Service','Proximitybeacon.php',42],['lib/pear','PEAR.php',139],['lib/pear','PEAR.php',818],['competency/classes/external','persistent_exporter.php',42],['lib/google/src/Google/Service','Groupssettings.php',40],['lib/phpexcel/PHPExcel/Reader','CSV.php',87],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/google/src/Google/Service','Directory.php',134],['lib/google/src/Google/Service','Fusiontables.php',48],['question/type/missingtype','edit_missingtype_form.php',38],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/lessphp/Tree','Directive.php',20],['auth/ldap','auth.php',119],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',245],['availability/condition/date/classes','condition.php',52],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes','string_manager_standard.php',53],['repository/skydrive','microsoftliveapi.php',50],['user/filters','globalrole.php',35],['enrol/lti/ims-blti','OAuth.php',16],['enrol/lti/ims-blti','OAuth.php',32],['enrol/lti/ims-blti','OAuth.php',187],['enrol/lti/ims-blti','OAuth.php',451],['course/classes/output','course_module_name.php',46],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Mime','Mdn.php',35],['lib/pear/HTML/QuickForm','html.php',36],['repository/s3','S3.php',193],['repository/s3','S3.php',2018],['repository/s3','S3.php',2374],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',39],['question/classes/bank/search','hidden_condition.php',42],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/pear/HTML/QuickForm','element.php',73],['question/classes/statistics/responses','analysis_for_subpart.php',50],['admin/tool/log/classes','setting_managestores.php',30],['lib/google/src/Google/Service','Mirror.php',49],['lib/adodb/drivers','adodb-db2ora.inc.php',80],['lib/minify/lib/HTTP','Encoder.php',75],['mod/feedback/classes','completion.php',47],['admin/tool/uploadcourse/classes','processor.php',122],['lib/lessphp','Parser.php',78],['lib/adodb/drivers','adodb-sapdb.inc.php',36],['lib/adodb/drivers','adodb-sapdb.inc.php',179],['lib/ddl','sql_generator.php',175],['lib/google/src/Google/Service','AndroidEnterprise.php',51],['admin/tool/lp/classes/output','template_competencies_page.php',70],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['mod/assignment/backup/moodle1','lib.php',223],['blocks','edit_form.php',47],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['mod/quiz/report/statistics','statistics_question_table.php',49],['mod/workshop/form/numerrors','lib.php',102],['mod/quiz/classes','repaginate.php',49],['lib/classes/session','memcached.php',51],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',43],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',206],['mod/workshop','mod_form.php',43],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',48],['availability/condition/profile/classes','condition.php',73],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['auth/cas/CAS/CAS','Client.php',862],['lib/xhprof','xhprof_moodle.php',788],['lib/dtl','file_xml_database_exporter.php',36],['course','lib.php',3061],['lib/adodb/drivers','adodb-mssqlpo.inc.php',54],['lib/xmldb','xmldb_table.php',49],['lib/adodb/perf','perf-postgres.inc.php',92],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['question/type/ddmarker','shapes.php',40],['question/type/ddmarker','shapes.php',203],['question/type/ddmarker','shapes.php',267],['question/type/ddmarker','shapes.php',332],['question/type/ddmarker','shapes.php',470],['mod/lti/classes/local/ltiservice','response.php',58],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/pear/HTML','Common.php',79],['mod/glossary','locallib.php',481],['lib/adodb/perf','perf-mssqlnative.inc.php',70],['lib/adodb/perf','perf-mssql.inc.php',70],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['lib/classes/event','base.php',124],['lib/form','checkbox.php',46],['admin/roles/classes','permissions_table.php',38],['lib/pear/HTML/QuickForm','submit.php',37],['auth/fc','auth.php',37],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/minify/lib/Minify/Cache','Memcache.php',22],['lib/lessphp/Tree','Condition.php',18],['admin/tool/lp/classes/output','plans_page.php',59],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',52],['lib/phpexcel/PHPExcel','Comment.php',93],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/lessphp/Tree','Url.php',17],['mod/lesson','override_form.php',58],['lib/form','button.php',45],['admin/tool/lp/classes/output','manage_templates_page.php',56],['lib/google/src/Google/Service','Playmoviespartner.php',44],['backup/util/ui','base_ui_stage.class.php',67],['backup/cc/cc_lib','cc_converters.php',75],['lib/dtl','database_mover.php',33],['enrol','locallib.php',125],['enrol','locallib.php',1256],['enrol','locallib.php',1379],['enrol','locallib.php',1430],['enrol','locallib.php',1463],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['backup/moodle2','restore_course_task.class.php',41],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib','xmlize.php',31],['lib','googleapi.php',52],['lib','googleapi.php',243],['grade/report/singleview/classes/local/ui','element.php',47],['lib/html2text','lib.php',43],['user/filters','lib.php',52],['user/filters','lib.php',272],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/classes/lock','db_record_lock_factory.php',61],['lib/pear/HTML/QuickForm','link.php',47],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['lib/phpunit/classes','hint_resultprinter.php',37],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['auth/pop3','auth.php',35],['lib/adodb/drivers','adodb-oci8.inc.php',106],['lib/adodb/drivers','adodb-oci8.inc.php',1539],['lib/adodb/drivers','adodb-oci8.inc.php',1805],['lib/classes/session','database.php',52],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['question/classes/bank/search','category_condition.php',60],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',63],['lib/jabber/XMPP','Log.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/lessphp/Tree','Assignment.php',15],['lib/dtl','string_xml_database_importer.php',34],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',62],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['repository/recent','lib.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['admin/webservice','lib.php',38],['lib','coursecatlib.php',194],['lib','coursecatlib.php',2782],['lib/google/src/Google/Service','Cloudtrace.php',43],['lib','filterlib.php',73],['lib','filterlib.php',377],['lib','filterlib.php',456],['lib/classes/lock','lock_factory.php',39],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['enrol','renderer.php',426],['enrol','renderer.php',723],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['admin/tool/lp/classes','course_competency_rule_form_element.php',45],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/phpunit/classes','basic_testcase.php',39],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',49],['backup/util/dbops','backup_dbops.class.php',37],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/structure','backup_optigroup_element.class.php',51],['mod/quiz/report/grading','gradingsettings_form.php',44],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/form','hidden.php',44],['repository/filesystem','lib.php',48],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',409],['backup/util/helper','restore_log_rule.class.php',62],['tag/classes','tag.php',77],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/spout/src/Spout/Writer/Style','StyleBuilder.php',19],['lib/dml','sqlsrv_native_moodle_database.php',53],['user/filters','date.php',40],['auth/nologin','auth.php',35],['lib/google/src/Google','Model.php',35],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/adodb/drivers','adodb-mysqli.inc.php',66],['lib/adodb/drivers','adodb-mysqli.inc.php',887],['lib/adodb/drivers','adodb-mysqli.inc.php',1193],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/form','questioncategory.php',46],['lib/mustache/src/Mustache','Template.php',29],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/google/src/Google/Logger','Abstract.php',123],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel','ReferenceHelper.php',58],['lib/pear/HTML/QuickForm','password.php',37],['lib/dml','moodle_transaction.php',40],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['repository/flickr','lib.php',51],['lib/form','grading.php',57],['lib/classes/update','api.php',71],['backup/cc/cc_lib','cc_converter_lti.php',29],['backup/moodle2','backup_subplugin.class.php',44],['lib/portfolio','caller.php',67],['lib/classes/progress','display_if_slow.php',60],['lib/adodb/perf','perf-informix.inc.php',66],['lib/classes','chart_base.php',52],['lib/lessphp/Tree','Media.php',18],['lib/spout/src/Spout/Common/Escaper','XLSX.php',19],['grade/export/ods','grade_export_ods.php',24],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/google/src/Google/Service','Calendar.php',50],['lib/form','group.php',44],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',44],['lib/pear/HTML/QuickForm/Renderer','Object.php',75],['admin/tool/lp/classes/output','user_evidence_page.php',48],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['grade/export/xls','grade_export_xls.php',24],['lib/classes/output','mustache_pix_helper.php',43],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/google/src/Google/Auth','ComputeEngine.php',35],['cache/stores/session','lib.php',131],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['admin/tool/log/store/database/backup/moodle2','backup_logstore_database_nested_element.php',43],['user','renderer.php',220],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['availability/condition/grade/classes','condition.php',46],['lib/lessphp/Tree','RulesetCall.php',14],['blocks/rss_client/classes/output','feed.php',75],['lib/form','select.php',47],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/lessphp/Visitor','toCSS.php',13],['lib','outputfragmentrequirementslib.php',40],['backup/util/ui','restore_moodleform.class.php',34],['lib/google/src/Google/Service','Cloudbilling.php',43],['lib/google/src/Google/Service','PlusDomains.php',72],['lib','externallib.php',37],['lib','externallib.php',531],['lib','externallib.php',562],['lib','externallib.php',593],['lib','externallib.php',622],['lib','externallib.php',648],['lib','externallib.php',778],['lib','externallib.php',813],['lib','externallib.php',984],['lib','externallib.php',1177],['blog','locallib.php',71],['blog','locallib.php',564],['blog','locallib.php',847],['blog','locallib.php',892],['blog','locallib.php',965],['blog','locallib.php',1016],['blog','locallib.php',1041],['blog','locallib.php',1051],['blog','locallib.php',1063],['blog','locallib.php',1084],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',53],['auth/cas','auth.php',39],['lib','lexer.php',41],['lib','lexer.php',145],['lib','lexer.php',217],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/google/src/Google/Service','Exception.php',34],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['tag/classes/output','tagcloud.php',49],['lib/google/src/Google/Service','Storagetransfer.php',44],['user/filters','select.php',46],['cache/stores/mongodb','lib.php',116],['admin/tool/lp/classes/output','course_competencies_page.php',73],['lib/google/src/Google/Cache','Null.php',28],['lib','graphlib.php',1176],['lib/phpexcel/PHPExcel/Style','Protection.php',49],['lib/google/src/Google/Service','GamesConfiguration.php',42],['repository/dropbox','locallib.php',46],['lib/phpexcel/PHPExcel/Style','Alignment.php',100],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['cache/stores/file','lib.php',117],['tag/classes/output','tagareashowstandard.php',41],['question/type/multianswer','edit_multianswer_form.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',395],['mod/assign','renderable.php',531],['mod/assign','renderable.php',586],['mod/assign','renderable.php',670],['mod/assign','renderable.php',707],['mod/assign','renderable.php',747],['mod/assign','renderable.php',800],['mod/assign','renderable.php',854],['lib/form','selectwithlink.php',56],['backup/moodle2','backup_activity_task.class.php',45],['lib/phpmailer','class.phpmailer.php',633],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['auth/db','auth.php',36],['lib/lessphp/Tree','Value.php',14],['lib/form','course.php',62],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['cohort','locallib.php',37],['cohort','locallib.php',101],['badges/criteria','award_criteria.php',127],['lib/adodb/perf','perf-mysql.inc.php',86],['cache/stores/memcached','lib.php',133],['grade/report/singleview/classes/local/ui','empty_element.php',38],['lib/google/src/Google/Service','AppState.php',40],['lib/adodb/drivers','adodb-odbc_oracle.inc.php',107],['lib/pear/HTML/QuickForm/Renderer','Default.php',139],['tag/classes/output','tag.php',46],['question','previewlib.php',122],['backup/util/loggers','database_logger.class.php',40],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/phpexcel/PHPExcel/Reader','SYLK.php',67],['lib/form','submitlink.php',47],['backup/util/dbops','restore_dbops.class.php',1788],['lib/xmldb','xmldb_index.php',56],['question','category_class.php',58],['question','category_class.php',160],['lib/google/src/Google/Service','Webfonts.php',38],['webservice/xmlrpc','locallib.php',41],['admin/roles/classes','check_users_selector.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['user/profile/field/checkbox','field.class.php',33],['lib/form','cancel.php',47],['lib/google/src/Google/Service','Resourceviews.php',57],['lib/phpexcel/PHPExcel/Style','Font.php',100],['lib/portfolio','plugin.php',445],['calendar','lib.php',2003],['calendar','lib.php',2774],['mod/wiki','pagelib.php',93],['mod/wiki','pagelib.php',380],['mod/wiki','pagelib.php',981],['mod/wiki','pagelib.php',1190],['mod/wiki','pagelib.php',2194],['mod/wiki','pagelib.php',2422],['tag/classes/output','tagfeed.php',43],['tag/classes/output','tagareaenabled.php',38],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['mod/workshop','locallib.php',183],['mod/workshop','locallib.php',2976],['mod/workshop','locallib.php',3411],['mod/workshop','locallib.php',3647],['mod/workshop','locallib.php',3889],['mod/workshop','locallib.php',3975],['mod/workshop','locallib.php',4060],['mod/workshop','locallib.php',4079],['lib/form','advcheckbox.php',48],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['cohort/classes/output','cohortidnumber.php',37],['lib/adodb/drivers','adodb-ado.inc.php',42],['lib/adodb/drivers','adodb-ado.inc.php',346],['lib/form','filepicker.php',53],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/tests/fixtures','test_renderer_factory.php',41],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['grade/report/singleview','lib.php',69],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/google/src/Google/Logger','Psr.php',39],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['lib/lessphp/Tree','Import.php',30],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',37],['lib/google/src/Google/Service','Classroom.php',60],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',875],['admin/tool/lp/classes/external','competency_path_exporter.php',38],['cohort/classes/output','cohortname.php',37],['grade/report/overview','lib.php',76],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpunit/classes','arraydataset.php',45],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1532],['question/engine','questionattempt.php',1618],['question/engine','questionattempt.php',1703],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['webservice/rest','lib.php',47],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',79],['backup/util/xml/output','memory_xml_output.class.php',37],['repository/flickr_public','image.php',34],['mod/lti/classes/local/ltiservice','resource_base.php',62],['admin/tool/lp/classes/output','template_plans_table.php',53],['mod/quiz','mod_form.php',48],['lib/simplepie/library/SimplePie','Caption.php',98],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',30],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['backup/moodle2','backup_theme_plugin.class.php',61],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/phpexcel/PHPExcel','DocumentSecurity.php',65],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',45],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',49],['lib/lessphp/Tree','Operation.php',19],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',461],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1699],['backup/cc/cc_lib','cc_converter_folder.php',28],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/google/src/Google/Service','SQLAdmin.php',50],['lib/lessphp/Tree','DetachedRuleset.php',15],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['mod/quiz','override_form.php',58],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',97],['lib/adodb/perf','perf-db2.inc.php',61],['lib/phpexcel/PHPExcel/Style','Supervisor.php',44],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['lib/ddl','database_manager.php',48],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['admin/roles/classes','define_role_table_advanced.php',46],['lib/dml','oci_native_moodle_temptables.php',40],['lib/horde/framework/Horde/Stream','Existing.php',28],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['availability/classes','multiple_messages.php',56],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/pear/Net','GeoIP.php',323],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/form','modgrade.php',78],['admin/tool/log/store/database/backup/moodle2','restore_logstore_database_subplugin.class.php',40],['cache/classes','config.php',80],['lib/pear/HTML/QuickForm','hidden.php',37],['question/type/calculated','datasetitems_form.php',72],['lib/tests','navigationlib_test.php',554],['lib/tests','navigationlib_test.php',612],['lib/tests','navigationlib_test.php',639],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/tests','completionlib_test.php',882],['admin/tool/generator/classes','site_backend.php',58],['lib/jabber/XMPP','XMLStream.php',171],['lib/simplepie/library/SimplePie','Sanitize.php',75],['cache/classes','factory.php',149],['lib/minify/lib/Minify/Cache','WinCache.php',20],['user/classes/output/myprofile','node.php',82],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/adodb/drivers','adodb-borland_ibase.inc.php',83],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',44],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',262],['lib/classes/update','code_manager.php',57],['search/engine/solr/classes','engine.php',103],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/google/src/Google/Service','Compute.php',89],['lib/phpexcel/PHPExcel/Style','Borders.php',113],['lib','completionlib.php',243],['lib/google/src/Google/Service','Pubsub.php',44],['lib/adodb/drivers','adodb-ads.inc.php',69],['lib/adodb/drivers','adodb-ads.inc.php',657],['lib/markdown','MarkdownExtra.php',56],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/google/src/Google/Service','YouTube.php',75],['lib/lessphp','Functions.php',15],['auth/cas/CAS/CAS','AuthenticationException.php',53],['mod/quiz','locallib.php',1923],['competency/classes/external','stored_file_exporter.php',45],['user/filters','checkbox.php',51],['backup/moodle2','restore_settingslib.php',86],['backup/moodle2','restore_settingslib.php',149],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/pear/HTML/QuickForm','date.php',260],['lib/lessphp/SourceMap','Generator.php',82],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['mod/lti/service/memberships/classes/local/service','memberships.php',50],['lib/google/src/Google/Cache','Apc.php',37],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['lib/pear/Auth','RADIUS.php',120],['lib/pear/Auth','RADIUS.php',579],['lib/pear/Auth','RADIUS.php',672],['lib/pear/Auth','RADIUS.php',879],['lib/adodb/drivers','adodb-ado_access.inc.php',46],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',519],['lib/google/src/Google/Http','Request.php',58],['lib/google/src/Google/Service','Dfareporting.php',99],['lib/google/src/Google/Service','Manager.php',60],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/google/src/Google/Service','CloudMonitoring.php',45],['lib/editor/tinymce/plugins/spellchecker/classes','SpellChecker.php',11],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['lib','webdavlib.php',84],['lib/dml','pgsql_native_moodle_recordset.php',43],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/mustache/src/Mustache','LambdaHelper.php',25],['question/engine/upgrade/tests','helper.php',45],['admin/tool/uploadcourse/classes','tracker.php',72],['grade/report/user','lib.php',188],['lib/adodb/drivers','adodb-sqlanywhere.inc.php',156],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/adodb/drivers','adodb-db2oci.inc.php',220]], 1102],
'construction_override': ['construction_override', '', [['mod/lesson/pagetypes','endofcluster.php',126],['mod/lesson','locallib.php',906],['mod/lesson/pagetypes','endofbranch.php',144],['mod/lesson/pagetypes','cluster.php',122]], 1],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'get_page_type_strings': ['get_page_type_strings', 'Returns an array of strings to describe the loaded page types ', [['mod/lesson','locallib.php',3289]], 4],
'delete_records_list': ['delete_records_list', 'Delete the records from a table where one field match one list of values. ', [['lib/dml','moodle_database.php',1883]], 37],
'is_unanswered': ['is_unanswered', 'Checks to see if a page has been answered previously ', [['mod/lesson','locallib.php',2834],['mod/lesson/pagetypes','essay.php',270]], 0],
'delete_override': ['delete_override', 'Deletes a lesson override from the database and clears any corresponding calendar events ', [['mod/lesson','locallib.php',1072]], 5],
'box': ['box', 'Outputs a box. ', [['lib','outputrenderers.php',3089]], 288],
'update_state': ['update_state', 'Updates (if necessary) the completion state of activity $cm for the given user. ', [['lib','completionlib.php',507]], 40],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'lesson_random_question_jump': ['lesson_random_question_jump', 'Handles the random jump between a branch table and end of branch or end of lesson (LESSON_RANDOMPAGE). ', [['mod/lesson','locallib.php',226]], 2],
'save_answers_files': ['save_answers_files', 'save editor answers files and update answer record ', [['mod/lesson','locallib.php',2643]], 8],
'get': ['get', 'Retrieves a variable reference from the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',36],['cache/stores/static','lib.php',220],['cache','disabledlib.php',55],['search/classes','document.php',299],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','DataTransfer.php',162],['lib/google/src/Google/Service','DataTransfer.php',208],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','AdSense.php',1076],['lib/google/src/Google/Service','AdSense.php',1155],['lib/google/src/Google/Service','AdSense.php',1303],['lib/google/src/Google/Service','AdSense.php',1519],['lib/google/src/Google/Service','AdSense.php',1631],['lib/google/src/Google/Service','AdSense.php',1773],['lib/google/src/Google/Service','AdSense.php',2047],['lib/google/src/Google/Service','Replicapool.php',420],['lib/google/src/Google/Service','Replicapool.php',575],['lib/google/src/Google/Service','Tasks.php',323],['lib/google/src/Google/Service','Tasks.php',442],['lib/google/src/Google/Service','Partners.php',362],['lib/google/src/Google/Service','AndroidPublisher.php',1247],['lib/google/src/Google/Service','AndroidPublisher.php',1349],['lib/google/src/Google/Service','AndroidPublisher.php',1510],['lib/google/src/Google/Service','AndroidPublisher.php',1573],['lib/google/src/Google/Service','AndroidPublisher.php',1796],['lib/google/src/Google/Service','AndroidPublisher.php',1884],['lib/google/src/Google/Service','AndroidPublisher.php',1948],['lib/google/src/Google/Service','AndroidPublisher.php',2098],['lib/google/src/Google/Service','AndroidPublisher.php',2223],['lib/google/src/Google/Service','AndroidPublisher.php',2293],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',146],['lib/google/src/Google/Service','YouTubeReporting.php',273],['lib/google/src/Google/Service','YouTubeReporting.php',326],['lib/google/src/Google/Service','Reseller.php',295],['lib/google/src/Google/Service','Reseller.php',458],['lib/google/src/Google/Cache','Memcache.php',74],['lib','filelib.php',3382],['lib','filelib.php',3630],['lib/google/src/Google/Service','Computeaccounts.php',432],['lib/google/src/Google/Service','Computeaccounts.php',512],['lib/google/src/Google/Service','Computeaccounts.php',683],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','MapsEngine.php',1530],['lib/google/src/Google/Service','MapsEngine.php',1709],['lib/google/src/Google/Service','MapsEngine.php',2006],['lib/google/src/Google/Service','MapsEngine.php',2268],['lib/google/src/Google/Service','MapsEngine.php',2360],['lib/google/src/Google/Service','MapsEngine.php',2666],['lib/google/src/Google/Service','MapsEngine.php',2927],['lib/google/src/Google/Service','MapsEngine.php',3118],['lib/google/src/Google/Cache','File.php',47],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Dns.php',307],['lib/google/src/Google/Service','Dns.php',393],['lib/google/src/Google/Service','Dns.php',444],['cache/classes','loaders.php',278],['cache/classes','loaders.php',1422],['cache/classes','loaders.php',1731],['lib/google/src/Google/Service','Appengine.php',320],['lib/google/src/Google/Service','Appengine.php',368],['lib/google/src/Google/Service','Appengine.php',472],['lib/google/src/Google/Service','Appengine.php',525],['lib/google/src/Google/Service','Urlshortener.php',109],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['lib/google/src/Google/Service','AdExchangeBuyer.php',759],['lib/google/src/Google/Service','AdExchangeBuyer.php',829],['lib/google/src/Google/Service','AdExchangeBuyer.php',870],['lib/google/src/Google/Service','AdExchangeBuyer.php',952],['lib/google/src/Google/Service','AdExchangeBuyer.php',1041],['lib/google/src/Google/Service','AdExchangeBuyer.php',1111],['lib/google/src/Google/Service','AdExchangeBuyer.php',1251],['lib/google/src/Google/Service','AdExchangeBuyer.php',1293],['lib/google/src/Google/Service','AdExchangeBuyer.php',1417],['lib/google/src/Google/Service','AdExchangeBuyer.php',1471],['lib/google/src/Google/Service','AdExchangeBuyer.php',1576],['lib/google/src/Google/Service','Books.php',1456],['lib/google/src/Google/Service','Books.php',1625],['lib/google/src/Google/Service','Books.php',1677],['lib/google/src/Google/Service','Books.php',1752],['lib/google/src/Google/Service','Books.php',2086],['lib/google/src/Google/Service','Books.php',2205],['lib/google/src/Google/Service','Books.php',2262],['lib/google/src/Google/Service','Books.php',2345],['lib/google/src/Google/Service','Books.php',2418],['lib/google/src/Google/Service','Books.php',2450],['lib/google/src/Google/Service','Oauth2.php',165],['lib/google/src/Google/Service','Oauth2.php',202],['lib/google/src/Google/Service','Analytics.php',1988],['lib/google/src/Google/Service','Analytics.php',2037],['lib/google/src/Google/Service','Analytics.php',2084],['lib/google/src/Google/Service','Analytics.php',2308],['lib/google/src/Google/Service','Analytics.php',2422],['lib/google/src/Google/Service','Analytics.php',2550],['lib/google/src/Google/Service','Analytics.php',2670],['lib/google/src/Google/Service','Analytics.php',2763],['lib/google/src/Google/Service','Analytics.php',2889],['lib/google/src/Google/Service','Analytics.php',3108],['lib/google/src/Google/Service','Analytics.php',3245],['lib/google/src/Google/Service','Analytics.php',3336],['lib/google/src/Google/Service','Analytics.php',3422],['lib/google/src/Google/Service','Analytics.php',3533],['lib/google/src/Google/Service','Coordinate.php',509],['lib/google/src/Google/Service','Coordinate.php',689],['lib','oauthlib.php',302],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/google/src/Google/Service','DeploymentManager.php',468],['lib/google/src/Google/Service','DeploymentManager.php',632],['lib/google/src/Google/Service','DeploymentManager.php',693],['lib/google/src/Google/Service','DeploymentManager.php',752],['lib/google/src/Google/Service','Blogger.php',945],['lib/google/src/Google/Service','Blogger.php',976],['lib/google/src/Google/Service','Blogger.php',1080],['lib/google/src/Google/Service','Blogger.php',1199],['lib/google/src/Google/Service','Blogger.php',1241],['lib/google/src/Google/Service','Blogger.php',1382],['lib/google/src/Google/Service','Blogger.php',1465],['lib/google/src/Google/Service','Blogger.php',1686],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['question/engine','states.php',116],['lib/google/src/Google/Service','Dataflow.php',292],['lib/horde/framework/Horde','Variables.php',135],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['competency/classes','persistent.php',86],['lib/google/src/Google/Service','CloudUserAccounts.php',542],['lib/google/src/Google/Service','CloudUserAccounts.php',643],['lib/google/src/Google/Service','CloudUserAccounts.php',908],['lib/google/src/Google/Service','Cloudresourcemanager.php',248],['lib/google/src/Google/Service','Cloudresourcemanager.php',427],['lib/editor/tinymce/classes','plugin.php',447],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','TagManager.php',950],['lib/google/src/Google/Service','TagManager.php',1036],['lib/google/src/Google/Service','TagManager.php',1128],['lib/google/src/Google/Service','TagManager.php',1280],['lib/google/src/Google/Service','TagManager.php',1373],['lib/google/src/Google/Service','TagManager.php',1467],['lib/google/src/Google/Service','TagManager.php',1561],['lib/google/src/Google/Service','TagManager.php',1711],['mod/lesson','locallib.php',3248],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapoolupdater.php',338],['lib/google/src/Google/Service','Replicapoolupdater.php',489],['lib/google/src/Google/Service','Bigquery.php',552],['lib/google/src/Google/Service','Bigquery.php',668],['lib/google/src/Google/Service','Bigquery.php',879],['lib/google/src/Google/Service','ShoppingContent.php',1066],['lib/google/src/Google/Service','ShoppingContent.php',1183],['lib/google/src/Google/Service','ShoppingContent.php',1283],['lib/google/src/Google/Service','ShoppingContent.php',1346],['lib/google/src/Google/Service','ShoppingContent.php',1464],['lib/google/src/Google/Service','ShoppingContent.php',1578],['lib/google/src/Google/Service','ShoppingContent.php',1773],['lib/google/src/Google/Service','ShoppingContent.php',1986],['lib/google/src/Google/Service','ShoppingContent.php',2063],['lib/google/src/Google/Service','Webmasters.php',371],['lib/google/src/Google/Service','Webmasters.php',464],['lib/google/src/Google/Service','Webmasters.php',540],['lib','navigationlib.php',384],['lib','navigationlib.php',836],['lib','navigationlib.php',2704],['lib','navigationlib.php',3139],['lib/google/src/Google/Service','Clouddebugger.php',399],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['lib/portfolio','exporter.php',134],['lib/google/src/Google/Service','Container.php',329],['lib/google/src/Google/Service','Container.php',396],['backup/cc/cc_lib/gral_lib','cssparser.php',147],['lib/horde/framework/Horde/Support','Array.php',30],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Storage.php',1059],['lib/google/src/Google/Service','Storage.php',1175],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1476],['lib/google/src/Google/Service','Storage.php',1709],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Genomics.php',660],['lib/google/src/Google/Service','Genomics.php',749],['lib/google/src/Google/Service','Genomics.php',918],['lib/google/src/Google/Service','Genomics.php',1007],['lib/google/src/Google/Service','Genomics.php',1185],['lib/google/src/Google/Service','Genomics.php',1268],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1475],['lib/google/src/Google/Service','Games.php',1220],['lib/google/src/Google/Service','Games.php',1339],['lib/google/src/Google/Service','Games.php',1441],['lib/google/src/Google/Service','Games.php',1699],['lib/google/src/Google/Service','Games.php',1806],['lib/google/src/Google/Service','Games.php',1948],['lib/google/src/Google/Service','Games.php',2082],['lib/google/src/Google/Service','Licensing.php',239],['lib/google/src/Google/Service','Fitness.php',417],['lib/google/src/Google/Service','Fitness.php',543],['lib/google/src/Google/Service','Reports.php',375],['lib/google/src/Google/Service','Reports.php',409],['lib/google/src/Google/Service','Gmail.php',779],['lib/google/src/Google/Service','Gmail.php',937],['lib/google/src/Google/Service','Gmail.php',1030],['lib/google/src/Google/Service','Gmail.php',1206],['lib/google/src/Google/Service','Gmail.php',1250],['lib/google/src/Google/Service','Taskqueue.php',264],['lib/google/src/Google/Service','Taskqueue.php',308],['lib/mustache/src/Mustache','HelperCollection.php',81],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Doubleclicksearch.php',257],['lib/google/src/Google/Service','Doubleclicksearch.php',381],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/google/src/Google/Service','Autoscaler.php',331],['lib/google/src/Google/Service','Autoscaler.php',445],['lib/google/src/Google/Service','AdExchangeSeller.php',444],['lib/google/src/Google/Service','AdExchangeSeller.php',552],['lib/google/src/Google/Service','AdExchangeSeller.php',666],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Prediction.php',276],['lib/behat/classes','behat_context_helper.php',63],['lib/google/src/Google/Service','SiteVerification.php',152],['lib/google/src/Google/Service','Drive.php',1333],['lib/google/src/Google/Service','Drive.php',1369],['lib/google/src/Google/Service','Drive.php',1422],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1617],['lib/google/src/Google/Service','Drive.php',1792],['lib/google/src/Google/Service','Drive.php',2054],['lib/google/src/Google/Service','Drive.php',2124],['lib/google/src/Google/Service','Drive.php',2256],['lib/google/src/Google/Service','Drive.php',2350],['lib/google/src/Google/Service','Drive.php',2418],['lib/google/src/Google/Service','Drive.php',2537],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Proximitybeacon.php',348],['lib/google/src/Google/Service','Groupssettings.php',108],['lib/google/src/Google/Service','Directory.php',1698],['lib/google/src/Google/Service','Directory.php',1766],['lib/google/src/Google/Service','Directory.php',1860],['lib/google/src/Google/Service','Directory.php',1930],['lib/google/src/Google/Service','Directory.php',2003],['lib/google/src/Google/Service','Directory.php',2072],['lib/google/src/Google/Service','Directory.php',2238],['lib/google/src/Google/Service','Directory.php',2365],['lib/google/src/Google/Service','Directory.php',2435],['lib/google/src/Google/Service','Directory.php',2531],['lib/google/src/Google/Service','Directory.php',2666],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',2850],['lib/google/src/Google/Service','Directory.php',2954],['lib/google/src/Google/Service','Directory.php',3012],['lib/google/src/Google/Service','Directory.php',3287],['lib/google/src/Google/Service','Fusiontables.php',659],['lib/google/src/Google/Service','Fusiontables.php',826],['lib/google/src/Google/Service','Fusiontables.php',950],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/google/src/Google/Service','AdSenseHost.php',645],['lib/google/src/Google/Service','AdSenseHost.php',686],['lib/google/src/Google/Service','AdSenseHost.php',751],['lib/google/src/Google/Service','AdSenseHost.php',918],['lib/google/src/Google/Service','AdSenseHost.php',1026],['lib/google/src/Google/Service','Plus.php',343],['lib/google/src/Google/Service','Plus.php',418],['lib/google/src/Google/Service','Plus.php',525],['lib/google/src/Google/Service','Mirror.php',438],['lib/google/src/Google/Service','Mirror.php',523],['lib/google/src/Google/Service','Mirror.php',563],['lib/google/src/Google/Service','Mirror.php',674],['lib/google/src/Google/Service','Mirror.php',786],['lib/google/src/Google/Service','AndroidEnterprise.php',1002],['lib/google/src/Google/Service','AndroidEnterprise.php',1109],['lib/google/src/Google/Service','AndroidEnterprise.php',1196],['lib/google/src/Google/Service','AndroidEnterprise.php',1312],['lib/google/src/Google/Service','AndroidEnterprise.php',1432],['lib/google/src/Google/Service','AndroidEnterprise.php',1524],['lib/google/src/Google/Service','AndroidEnterprise.php',1616],['lib/google/src/Google/Service','AndroidEnterprise.php',1705],['lib/google/src/Google/Service','AndroidEnterprise.php',1777],['lib/google/src/Google/Service','AndroidEnterprise.php',1879],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/testing/classes','nasty_strings.php',73],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/google/src/Google/Service','Playmoviespartner.php',411],['lib/google/src/Google/Service','Playmoviespartner.php',475],['lib/google/src/Google/Service','Playmoviespartner.php',580],['lib','coursecatlib.php',212],['lib/google/src/Google/Service','Cloudtrace.php',217],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['tag/classes','tag.php',190],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['competency/classes','url.php',55],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','Calendar.php',919],['lib/google/src/Google/Service','Calendar.php',1086],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1387],['lib/google/src/Google/Service','Calendar.php',1431],['lib/google/src/Google/Service','Calendar.php',1873],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['cache/stores/session','lib.php',225],['lib/google/src/Google/Service','Cloudbilling.php',162],['lib/google/src/Google/Service','PlusDomains.php',468],['lib/google/src/Google/Service','PlusDomains.php',593],['lib/google/src/Google/Service','PlusDomains.php',719],['lib/google/src/Google/Service','PlusDomains.php',813],['lib/google/src/Google/Service','Storagetransfer.php',248],['lib/google/src/Google/Service','Storagetransfer.php',295],['lib/google/src/Google/Service','Storagetransfer.php',396],['cache/stores/mongodb','lib.php',252],['lib/google/src/Google/Cache','Null.php',36],['lib/google/src/Google/Service','GamesConfiguration.php',265],['lib/google/src/Google/Service','GamesConfiguration.php',404],['cache/stores/file','lib.php',330],['cache/stores/memcached','lib.php',319],['lib/google/src/Google/Service','AppState.php',171],['lib/google/src/Google/Service','Resourceviews.php',354],['lib/google/src/Google/Service','Resourceviews.php',439],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','Classroom.php',484],['lib/google/src/Google/Service','Classroom.php',724],['lib/google/src/Google/Service','Classroom.php',830],['lib/google/src/Google/Service','Classroom.php',951],['lib/google/src/Google/Service','Classroom.php',1010],['lib/google/src/Google/Service','SQLAdmin.php',804],['lib/google/src/Google/Service','SQLAdmin.php',874],['lib/google/src/Google/Service','SQLAdmin.php',1076],['lib/google/src/Google/Service','SQLAdmin.php',1298],['lib/google/src/Google/Service','SQLAdmin.php',1387],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/google/src/Google/Service','Compute.php',4037],['lib/google/src/Google/Service','Compute.php',4166],['lib/google/src/Google/Service','Compute.php',4299],['lib/google/src/Google/Service','Compute.php',4460],['lib/google/src/Google/Service','Compute.php',4590],['lib/google/src/Google/Service','Compute.php',4686],['lib/google/src/Google/Service','Compute.php',4845],['lib/google/src/Google/Service','Compute.php',4957],['lib/google/src/Google/Service','Compute.php',5048],['lib/google/src/Google/Service','Compute.php',5188],['lib/google/src/Google/Service','Compute.php',5264],['lib/google/src/Google/Service','Compute.php',5394],['lib/google/src/Google/Service','Compute.php',5542],['lib/google/src/Google/Service','Compute.php',5726],['lib/google/src/Google/Service','Compute.php',6001],['lib/google/src/Google/Service','Compute.php',6171],['lib/google/src/Google/Service','Compute.php',6369],['lib/google/src/Google/Service','Compute.php',6595],['lib/google/src/Google/Service','Compute.php',6655],['lib/google/src/Google/Service','Compute.php',6732],['lib/google/src/Google/Service','Compute.php',6808],['lib/google/src/Google/Service','Compute.php',6914],['lib/google/src/Google/Service','Compute.php',6977],['lib/google/src/Google/Service','Compute.php',7052],['lib/google/src/Google/Service','Compute.php',7148],['lib/google/src/Google/Service','Compute.php',7223],['lib/google/src/Google/Service','Compute.php',7315],['lib/google/src/Google/Service','Compute.php',7425],['lib/google/src/Google/Service','Compute.php',7586],['lib/google/src/Google/Service','Compute.php',7750],['lib/google/src/Google/Service','Compute.php',7955],['lib/google/src/Google/Service','Compute.php',8050],['lib/google/src/Google/Service','Compute.php',8226],['lib/google/src/Google/Service','Compute.php',8321],['lib/google/src/Google/Service','Compute.php',8384],['lib/google/src/Google/Service','Pubsub.php',255],['lib/google/src/Google/Service','Pubsub.php',394],['lib/google/src/Google/Cache','Apc.php',52],['lib/google/src/Google/Service','Dfareporting.php',4559],['lib/google/src/Google/Service','Dfareporting.php',4587],['lib/google/src/Google/Service','Dfareporting.php',4629],['lib/google/src/Google/Service','Dfareporting.php',4671],['lib/google/src/Google/Service','Dfareporting.php',4779],['lib/google/src/Google/Service','Dfareporting.php',4867],['lib/google/src/Google/Service','Dfareporting.php',5014],['lib/google/src/Google/Service','Dfareporting.php',5117],['lib/google/src/Google/Service','Dfareporting.php',5308],['lib/google/src/Google/Service','Dfareporting.php',5427],['lib/google/src/Google/Service','Dfareporting.php',5525],['lib/google/src/Google/Service','Dfareporting.php',5580],['lib/google/src/Google/Service','Dfareporting.php',5683],['lib/google/src/Google/Service','Dfareporting.php',5769],['lib/google/src/Google/Service','Dfareporting.php',5891],['lib/google/src/Google/Service','Dfareporting.php',5997],['lib/google/src/Google/Service','Dfareporting.php',6105],['lib/google/src/Google/Service','Dfareporting.php',6255],['lib/google/src/Google/Service','Dfareporting.php',6314],['lib/google/src/Google/Service','Dfareporting.php',6411],['lib/google/src/Google/Service','Dfareporting.php',6529],['lib/google/src/Google/Service','Dfareporting.php',6609],['lib/google/src/Google/Service','Dfareporting.php',6746],['lib/google/src/Google/Service','Dfareporting.php',6862],['lib/google/src/Google/Service','Dfareporting.php',6940],['lib/google/src/Google/Service','Dfareporting.php',7011],['lib/google/src/Google/Service','Dfareporting.php',7131],['lib/google/src/Google/Service','Dfareporting.php',7172],['lib/google/src/Google/Service','Dfareporting.php',7214],['lib/google/src/Google/Service','Dfareporting.php',7256],['lib/google/src/Google/Service','Dfareporting.php',7320],['lib/google/src/Google/Service','Dfareporting.php',7378],['lib/google/src/Google/Service','Dfareporting.php',7517],['lib/google/src/Google/Service','Dfareporting.php',7640],['lib/google/src/Google/Service','Dfareporting.php',7771],['lib/google/src/Google/Service','Dfareporting.php',7812],['lib/google/src/Google/Service','Dfareporting.php',7853],['lib/google/src/Google/Service','Dfareporting.php',7935],['lib/google/src/Google/Service','Dfareporting.php',7995],['lib/google/src/Google/Service','Dfareporting.php',8116],['lib/google/src/Google/Service','Dfareporting.php',8258],['lib/google/src/Google/Service','Dfareporting.php',8307],['lib/google/src/Google/Service','Dfareporting.php',8421],['lib/google/src/Google/Service','Dfareporting.php',8482],['lib/google/src/Google/Service','Dfareporting.php',8584],['lib/google/src/Google/Service','Dfareporting.php',8643],['lib/google/src/Google/Service','Dfareporting.php',8682],['lib/google/src/Google/Service','Dfareporting.php',8724],['lib/google/src/Google/Service','Dfareporting.php',8782],['lib/google/src/Google/Service','Manager.php',259],['lib/google/src/Google/Service','Manager.php',338],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['lib','webdavlib.php',264]], 21532],
'lesson_menu_block_contents': ['lesson_menu_block_contents', 'If left menu is turned on, then this will print the menu in a block ', [['mod/lesson','locallib.php',511]], 1],
'has_pages': ['has_pages', 'Checks to see if the lesson has pages ', [['mod/lesson','locallib.php',1602]], 2],
'can_embed_url': ['can_embed_url', 'Checks whether a file can be embedded. If this returns true you will get an embedded player; if this returns false, you will just get a download link. ', [['lib','outputrenderers.php',4749]], 9],
'custom_definition': ['custom_definition', '', [['mod/lesson/pagetypes','numerical.php',268],['mod/lesson/pagetypes','endofcluster.php',103],['mod/lesson/pagetypes','matching.php',491],['mod/lesson','editpage_form.php',46],['mod/lesson/pagetypes','multichoice.php',463],['mod/lesson','locallib.php',727],['mod/lesson/pagetypes','truefalse.php',357],['mod/lesson/pagetypes','endofbranch.php',121],['mod/lesson/pagetypes','shortanswer.php',334],['mod/lesson/pagetypes','essay.php',291],['mod/lesson/pagetypes','branchtable.php',306],['mod/lesson/pagetypes','cluster.php',98]], 1],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'make_pluginfile_url': ['make_pluginfile_url', 'Factory method for creation of url pointing to plugin file. ', [['lib','weblib.php',768]], 26],
'lesson_get_media_html': ['lesson_get_media_html', 'This is a function used to detect media types and generate html code. ', [['mod/lesson','locallib.php',591]], 1],
'create_from_lesson_page': ['create_from_lesson_page', 'Create instance of event. ', [['mod/lesson/classes/event','page_updated.php',45]], 4],
'get_attempts': ['get_attempts', 'Get all of the attempts for the current user. ', [['mod/lesson','locallib.php',1293]], 6],
'out': ['out', 'Returns the selector for use in a CSS rule ', [['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['mod/feedback/classes','responses_table.php',332],['lib','moodlelib.php',9729],['lib','weblib.php',545],['lib','tablelib.php',1594],['report/loglive/classes','table_log_ajax.php',37]], 626],
'add_jumpto': ['add_jumpto', 'Convenience function: Adds a jumpto select element ', [['mod/lesson','locallib.php',805]], 11],
'lesson_displayleftif': ['lesson_displayleftif', 'Determines if a user can view the left menu.  The determining factor is whether a user has a grade greater than or equal to the lesson setting of displayleftif ', [['mod/lesson','locallib.php',386]], 2],
'resourcelib_guess_url_mimetype': ['resourcelib_guess_url_mimetype', 'Tries to guess correct mimetype for arbitrary URL ', [['lib','resourcelib.php',140]], 3],
'cluster_jump': ['cluster_jump', 'Interprets LESSON_CLUSTERJUMP jumpto value. ', [['mod/lesson','locallib.php',1731]], 5],
'get_answers': ['get_answers', '', [['question/type/tests','question_first_matching_answer_grading_strategy_test.php',44],['question/type/shortanswer','question.php',77],['backup/cc','entity.quiz.class.php',661],['mod/lesson','locallib.php',2361],['question/type','questionbase.php',982],['backup/cc','entity11.quiz.class.php',681]], 36],
'resourcelib_get_extension': ['resourcelib_get_extension', 'Looks for the extension. ', [['lib','resourcelib.php',184]], 3],
'move': ['move', 'Moves the specified task to another position in the task list. This can include putting it as a child task under a new parent and/or move it to a different position among its sibling tasks. (tasks.move) ', [['lib/google/src/Google/Service','Tasks.php',516],['mod/chat','lib.php',39],['mod/lesson','locallib.php',2338],['lib/adodb','adodb.inc.php',3720],['lib/google/src/Google/Service','Calendar.php',1639],['lib','webdavlib.php',531]], 50],
'update_timer': ['update_timer', 'Updates the timer to the current time and returns the new timer object ', [['mod/lesson','locallib.php',1516]], 5],
'jumpto_is_correct': ['jumpto_is_correct', 'Determines if a jumpto value is correct or not. ', [['mod/lesson','locallib.php',1665]], 14],
'get_jumptooptions': ['get_jumptooptions', 'Returns an array of options to display when choosing the jumpto for a page/answer ', [['mod/lesson','locallib.php',2987],['mod/lesson/pagetypes','branchtable.php',74]], 5],
'callback_on_view': ['callback_on_view', '', [['mod/lesson/pagetypes','endofcluster.php',54],['mod/lesson','locallib.php',2632],['mod/lesson/pagetypes','endofbranch.php',54],['mod/lesson/pagetypes','cluster.php',58]], 1],
'get_contents': ['get_contents', 'Returns the contents field for the page properly formatted and with plugin file url\'s converted ', [['mod/lesson','locallib.php',3029]], 14],
'freeze': ['freeze', 'Freeze the element so that only its value is returned ', [['lib/pear/HTML/QuickForm','file.php',112],['lib/pear/HTML/QuickForm','xbutton.php',76],['lib/pear/HTML/QuickForm','reset.php',67],['lib/pear/HTML/QuickForm','group.php',556],['lib/pear/HTML','QuickForm.php',1544],['lib/form','text.php',77],['lib/pear/HTML/QuickForm','button.php',68],['lib/pear/HTML/QuickForm','image.php',114],['lib/form','submit.php',104],['lib/pear/HTML/QuickForm','element.php',199],['lib/pear/HTML/QuickForm','submit.php',66],['lib/form','cancel.php',113],['lib/pear/HTML/QuickForm','hidden.php',67]], 62],
'get_record_sql': ['get_record_sql', 'Get a single database record as an object using a SQL statement. ', [['lib/dml','oci_native_moodle_database.php',1076],['lib/dml','moodle_database.php',1506]], 157],
'single_button': ['single_button', 'Returns a form with a single button. ', [['lib','outputrenderers.php',1772]], 316],
'set_button': ['set_button', 'Specify a fragment of HTML that goes where the \'Turn editing on\' button normally goes. ', [['lib','pagelib.php',1312]], 29],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'load_page': ['load_page', 'Loads the requested page. ', [['mod/lesson','locallib.php',1632],['mod/lesson','locallib.php',3323]], 24],
'get_grayout': ['get_grayout', '', [['mod/lesson/pagetypes','endofcluster.php',67],['mod/lesson','locallib.php',3088],['mod/lesson/pagetypes','endofbranch.php',98],['mod/lesson/pagetypes','branchtable.php',244],['mod/lesson/pagetypes','cluster.php',55]], 0],
'start_timer': ['start_timer', 'Starts the lesson time for the current user ', [['mod/lesson','locallib.php',1485]], 5],
'__isset': ['__isset', 'Overload __isset() to provide access via properties ', [['lib/simplepie/library/SimplePie','IRI.php',221],['lib/horde/framework/Horde','Variables.php',111],['mod/lesson','locallib.php',2044],['lib','modinfolib.php',140],['lib','modinfolib.php',1178],['lib','modinfolib.php',2545],['lib','adminlib.php',1101],['lib/dml','database_column_info.php',102],['lib/classes/message','message.php',218],['lib/horde/framework/Horde/Support','Array.php',128],['admin/tool/monitor/classes','subscription.php',68],['lib','accesslib.php',5305],['lib/mustache/src/Mustache','HelperCollection.php',99],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',170],['tag/classes/output','tagindex.php',133],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',115],['lib/horde/framework/Horde/Support','ObjectStub.php',57],['course','lib.php',3099],['lib/classes/event','base.php',942],['lib','coursecatlib.php',155],['lib','coursecatlib.php',2933],['tag/classes','tag.php',99],['lib/google/src/Google','Model.php',286],['calendar','lib.php',2096],['lib/horde/framework/Horde/Support','Stub.php',53],['lib/pear/Net/GeoIP','Location.php',187]], 2],
'override_next_page': ['override_next_page', '', [['mod/lesson/pagetypes','endofcluster.php',71],['mod/lesson','locallib.php',3156],['mod/lesson/pagetypes','cluster.php',68]], 1],
'get_records_sql_menu': ['get_records_sql_menu', 'Get the first two columns from a number of records as an associative array using a SQL statement. ', [['lib/dml','moodle_database.php',1436]], 30],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1300]], 441],
'resourcelib_embed_image': ['resourcelib_embed_image', 'Returns image embedding html. ', [['lib','resourcelib.php',210]], 3],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',840]], 332],
'groups_get_user_groups': ['groups_get_user_groups', 'Returns info about user\'s groups in course. ', [['lib','grouplib.php',290]], 20],
'lesson_add_header_buttons': ['lesson_add_header_buttons', 'Adds header buttons to the page for the lesson ', [['mod/lesson','locallib.php',565]], 1],
'__get': ['__get', '', [['lib/horde/framework/Horde/Imap/Client','Url.php',196],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',84],['lib/minify/lib','JSMinPlus.php',1686],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',121],['user/classes/output/myprofile','category.php',185],['lib/adodb','adodb-active-record.inc.php',295],['lib/horde/framework/Horde/Mail/Rfc822','List.php',75],['admin/tool/monitor/classes','rule.php',166],['lib/horde/framework/Horde/Socket','Client.php',91],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',85],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',92],['lib/simplepie/library/SimplePie','IRI.php',168],['lib/horde/framework/Horde','Variables.php',150],['mod/lesson','locallib.php',2028],['lib','modinfolib.php',124],['lib','modinfolib.php',1138],['lib','modinfolib.php',2577],['lib','adminlib.php',1071],['lib/dml','database_column_info.php',87],['lib/classes/message/inbound','handler.php',79],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',72],['lib','navigationlib.php',5107],['lib/classes/plugininfo','block.php',44],['lib/classes/message','message.php',187],['lib/horde/framework/Horde/Crypt','Blowfish.php',86],['lib/horde/framework/Horde/Imap/Client','Ids.php',92],['lib/horde/framework/Horde/Support','Array.php',116],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',85],['admin/tool/monitor/classes','subscription.php',54],['lib','pagelib.php',761],['user/classes/output/myprofile','tree.php',144],['lib/horde/framework/Horde','Stream.php',74],['lib/adodb','adodb-active-recordx.inc.php',341],['lib','accesslib.php',5286],['lib/mustache/src/Mustache','HelperCollection.php',67],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',63],['lib/minify/lib/MrClay/Cli','Arg.php',170],['tag/classes/output','tagindex.php',123],['calendar/tests','rrule_manager_tests.php',523],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',67],['lib/horde/framework/Horde/Support','ObjectStub.php',41],['lib/classes/plugininfo','mod.php',43],['course','lib.php',3089],['lib/classes/plugininfo','base.php',177],['lib/classes/event','base.php',909],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',69],['lib','coursecatlib.php',131],['lib','coursecatlib.php',2943],['tag/classes','tag.php',89],['lib/google/src/Google','Model.php',49],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',70],['calendar','lib.php',2077],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',108],['lib/htmlpurifier/HTMLPurifier','Token.php',48],['mod/quiz','renderer.php',1349],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',255],['user/classes/output/myprofile','node.php',106],['lib/horde/framework/Horde/Stream','TempString.php',65],['lib/horde/framework/Horde/Support','Stub.php',41],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',56],['lib/pear/Net/GeoIP','Location.php',158]], 20],
'delete_all_overrides': ['delete_all_overrides', 'Deletes all lesson overrides from the database and clears any corresponding calendar events ', [['mod/lesson','locallib.php',1127]], 1],
'display_answers': ['display_answers', '', [['mod/lesson/pagetypes','numerical.php',131],['mod/lesson/pagetypes','matching.php',235],['mod/lesson/pagetypes','multichoice.php',290],['mod/lesson','locallib.php',3067],['mod/lesson/pagetypes','truefalse.php',116],['mod/lesson/pagetypes','shortanswer.php',191],['mod/lesson/pagetypes','branchtable.php',216]], 1],
'report_answers': ['report_answers', '', [['mod/lesson/pagetypes','numerical.php',195],['mod/lesson/pagetypes','matching.php',400],['mod/lesson/pagetypes','multichoice.php',365],['mod/lesson','locallib.php',3107],['mod/lesson/pagetypes','truefalse.php',258],['mod/lesson/pagetypes','shortanswer.php',255],['mod/lesson/pagetypes','essay.php',213],['mod/lesson/pagetypes','branchtable.php',247]], 1],
'definition': ['definition', 'Overrides the abstract moodleform::definition method for defining what the form that is to be presented to the user. ', [['tag','edit_form.php',41],['admin/webservice','testclient_forms.php',7],['admin/webservice','testclient_forms.php',39],['admin/webservice','testclient_forms.php',123],['admin/webservice','testclient_forms.php',211],['grade/edit/outcome','import_outcomes_form.php',33],['report/eventlist/classes','filter_form.php',30],['course','completion_form.php',38],['mod/scorm','mod_form.php',26],['backup/util/ui','base_moodleform.class.php',93],['mod/feedback/item/multichoicerated','multichoicerated_form.php',22],['mod/workshop/eval','lib.php',78],['grade/edit/tree','grade_form.php',33],['mod/feedback/classes','complete_form.php',75],['mod/scorm','reportsettings_form.php',24],['mod/assign','extensionform.php',42],['admin/tool/lp/classes/form','competency.php',42],['grade/edit/tree','category_form.php',34],['mod/wiki','mod_form.php',44],['mod/lesson/pagetypes','numerical.php',281],['course','edit_form.php',16],['admin/tool/customlang','filter_form.php',33],['login','forgot_password_form.php',39],['admin/tool/uploadcourse/classes','step1_form.php',38],['login','signup_form.php',34],['mod/assign','mod_form.php',39],['admin/tool/lp/classes/form','plan.php',42],['mod/lti','register_form.php',41],['mod/lesson','view_form.php',42],['mod/imscp','mod_form.php',38],['mod/assign','submission_form.php',40],['mod/feedback','use_templ_form.php',32],['grade/report/singleview/classes/local/screen','tablelike.php',107],['course','reset_form.php',36],['mod/data','export_form.php',33],['admin/user','user_bulk_cohortadd_form.php',30],['lib/form/tests','dateselector_test.php',174],['mod/glossary','edit_form.php',10],['mod/lti','mod_form.php',56],['admin/tool/lp/classes/form','user_evidence.php',41],['mod/lesson','import_form.php',35],['group','group_form.php',39],['grade/report/grader','preferences_form.php',37],['admin/tool/uploaduser','user_form.php',38],['admin/tool/uploaduser','user_form.php',76],['admin/tool/uploadcourse/classes','step2_form.php',36],['search/classes/output/form','search.php',33],['question/type','edit_question_form.php',116],['admin/tool/dbtransfer','database_transfer_form.php',39],['mod/feedback/classes','course_select_form.php',52],['mod/feedback/item/label','label_form.php',23],['user/classes','course_form.php',44],['mod/feedback/item/captcha','captcha_form.php',22],['mod/forum/classes','prune_form.php',40],['message','send_form.php',39],['user','files_form.php',37],['admin/tool/task/classes','edit_scheduled_task_form.php',36],['mod/workshop/allocation/scheduled','settings_form.php',39],['mod/feedback/item/textfield','textfield_form.php',22],['mod/feedback','edit_form.php',34],['mod/feedback','edit_form.php',97],['grade/edit/settings','form.php',37],['login','restored_password_form.php',44],['question/type/random','edit_random_form.php',37],['lib/tests','formslib_test.php',616],['lib/tests','formslib_test.php',647],['lib/tests','formslib_test.php',658],['lib/tests','formslib_test.php',669],['lib/tests','formslib_test.php',680],['lib/tests','formslib_test.php',695],['lib/tests','formslib_test.php',710],['lib/tests','formslib_test.php',725],['lib/tests','formslib_test.php',740],['lib/tests','formslib_test.php',752],['lib/tests','formslib_test.php',767],['lib/tests','formslib_test.php',782],['lib/tests','formslib_test.php',800],['lib/tests','formslib_test.php',886],['lib/tests','formslib_test.php',898],['calendar','managesubscriptions_form.php',38],['question/type/calculated','datasetdefinitions_form.php',72],['mod/lesson/pagetypes','matching.php',530],['mod/data','import_form.php',11],['mod/workshop','feedbackauthor_form.php',32],['course/classes','editcategory_form.php',39],['question','move_form.php',39],['admin/tool/behat','steps_definitions_form.php',38],['filter','local_settings_form.php',39],['grade/export','grade_export_form.php',25],['mod/feedback','mod_form.php',34],['mod/feedback/item/info','info_form.php',22],['enrol/self/classes','empty_form.php',33],['mod/book/tool/importhtml','import_form.php',31],['enrol','users_forms.php',30],['enrol','users_forms.php',81],['enrol','users_forms.php',140],['lib/classes','grading_external.php',237],['grade/edit/tree','outcomeitem_form.php',32],['mod/glossary','import_form.php',10],['blog','edit_form.php',26],['mod/feedback/item/textarea','textarea_form.php',22],['mod/survey','mod_form.php',10],['mod/assign/feedback/offline','importgradesform.php',39],['mod/feedback/item/numeric','numeric_form.php',22],['mod/label','mod_form.php',32],['mod/chat','mod_form.php',25],['admin/mnet','peer_forms.php',36],['admin/mnet','peer_forms.php',74],['mod/lesson/pagetypes','multichoice.php',481],['mod/lesson/pagetypes','multichoice.php',542],['admin/roles/classes','preset_form.php',39],['badges','preferences_form.php',34],['calendar','event_form.php',42],['grade/export','key_form.php',35],['lib/editor/atto/plugins/managefiles','manage_form.php',40],['mod/scorm/report/interactions','responsessettings_form.php',30],['course','request_form.php',45],['course','request_form.php',136],['mod/quiz/report/statistics','statistics_form.php',39],['cohort','upload_form.php',44],['admin/tool/uploadcourse/classes','base_form.php',37],['mod/lesson','locallib.php',755],['repository','lib.php',2842],['repository','lib.php',2941],['user/profile','index_category_form.php',39],['admin/tool/generator/classes','make_testplan_form.php',38],['mod/assign','batchsetallocatedmarkerform.php',38],['mod/book','edit_form.php',31],['enrol','bulkchange_forms.php',37],['enrol','bulkchange_forms.php',101],['mod/assign','gradingoptionsform.php',39],['mod/assign','quickgradingform.php',39],['grade/edit/scale','edit_form.php',32],['blog','preferences_form.php',34],['mod/wiki','comments_form.php',10],['mod/lesson/pagetypes','truefalse.php',374],['admin/user','user_message_form.php',11],['mod/folder','edit_form.php',31],['mod/wiki','filesedit_form.php',30],['enrol','editenrolment_form.php',30],['admin/roles/classes','permission_prohibit_form.php',32],['mod/scorm/report/objectives','responsessettings_form.php',35],['admin/tool/profiling','import_form.php',30],['user','forum_form.php',42],['admin/webservice','forms.php',33],['admin/webservice','forms.php',59],['admin/webservice','forms.php',184],['admin/webservice','forms.php',227],['mod/assign','gradeform.php',43],['admin/tool/lp/classes/form','template.php',39],['mod/resource','mod_form.php',33],['backup','backupfilesedit_form.php',27],['admin/tool/lp/classes/form','template_cohorts.php',41],['user','editor_form.php',39],['grade/import/direct/classes','import_form.php',32],['admin/tool/dbtransfer','database_export_form.php',38],['grade/import/direct/classes','mapping_form.php',33],['mod/wiki','create_form.php',31],['mod/assign','batchsetmarkingworkflowstateform.php',38],['mod/workshop','submission_form.php',32],['mod/feedback','import_form.php',33],['grade/edit/letter','edit_form.php',33],['question','import_form.php',40],['admin/tool/lpmigrate/classes/form','migrate_framework.php',54],['admin/roles/classes','permission_allow_form.php',31],['admin/tool/assignmentupgrade','upgradableassignmentsbatchform.php',37],['course','tags_form.php',38],['cohort','edit_form.php',31],['admin/tool/cohortroles/classes/form','assign_role_cohort.php',42],['user','edit_form.php',39],['mod/quiz','addrandomform.php',39],['lib/form/tests','datetimeselector_test.php',188],['backup','restorefile_form.php',27],['mod/assignment','mod_form.php',38],['grade/import','key_form.php',35],['calendar','preferences_form.php',43],['grade/edit/outcome','edit_form.php',32],['admin/tool/monitor/classes','rule_form.php',39],['blocks/rss_client','editfeed.php',42],['admin/mnet','profilefields_form.php',38],['login','change_password_form.php',33],['mod/workshop/form','edit_form.php',43],['mod/folder','mod_form.php',31],['mod/wiki','edit_form.php',38],['mod/assign/feedback/offline','uploadgradesform.php',37],['admin/tool/replace/classes','form.php',33],['lib/editor/tinymce/plugins/managefiles','manage_form.php',39],['mod/quiz/report','attemptsreport_form.php',31],['mod/forum/classes','post_form.php',77],['user','language_form.php',39],['blocks/community','forms.php',37],['mod/lesson','essay_form.php',41],['mod/lesson','mod_form.php',51],['group','import_form.php',40],['grade/edit/tree','item_form.php',34],['admin/user','user_bulk_forms.php',7],['admin/user','user_bulk_forms.php',41],['grade/grading/form/guide','edit_form.php',41],['admin/tool/assignmentupgrade','paginationform.php',37],['user/profile','index_field_form.php',42],['admin/tool/installaddon/classes','installfromzip_form.php',38],['grade/report/history/classes','filter_form.php',43],['mod/assign','gradingbatchoperationsform.php',38],['mod/page','mod_form.php',33],['badges','edit_form.php',39],['badges','edit_form.php',199],['mod/data','preset_form.php',10],['mod/data','preset_form.php',27],['mod/data','preset_form.php',42],['mod/data','preset_form.php',53],['admin/tool/uploaduser','picture_form.php',31],['blocks','edit_form.php',60],['mod/lesson/pagetypes','shortanswer.php',353],['mod/feedback/classes','course_map_form.php',34],['mod/quiz','accessmanager_form.php',39],['question','export_form.php',40],['mod/workshop','mod_form.php',51],['grade/grading','pick_form.php',38],['course','editsection_form.php',19],['group','autogroup_form.php',41],['admin/tool/capability/classes','settings_form.php',39],['user/filters','user_filter_forms.php',35],['user/filters','user_filter_forms.php',69],['mod/url','mod_form.php',32],['mod/lesson/pagetypes','essay.php',301],['grade/import','grade_import_form.php',26],['grade/import','grade_import_form.php',89],['mod/workshop/form','assessment_form.php',40],['calendar/classes','export_form.php',40],['mod/lesson','override_form.php',80],['enrol/self','locallib.php',69],['grade/grading/form/rubric','edit_form.php',40],['group','grouping_form.php',41],['mod/feedback/item','feedback_item_form_class.php',22],['admin/mnet','services_form.php',36],['admin/tool/filetypes','edit_form.php',36],['mod/data','mod_form.php',10],['mod/workshop/allocation/random','settings_form.php',41],['admin/tool/lp/classes/form','competency_framework.php',41],['course','recent_form.php',33],['mod/forum','mod_form.php',32],['question','category_form.php',40],['mod/quiz/report/grading','gradingsettings_form.php',54],['admin/tool/generator/classes','make_course_form.php',38],['files','coursefilesedit_form.php',21],['mod/workshop','feedbackreviewer_form.php',32],['lib/portfolio','forms.php',48],['lib/portfolio','forms.php',159],['lib/portfolio','forms.php',266],['lib/portfolio','forms.php',315],['course/classes','deletecategory_form.php',45],['mod/book','mod_form.php',32],['mod/lti','edit_form.php',56],['question','previewlib.php',39],['lib/tests/fixtures','max_input_vars.php',38],['enrol','editinstance_form.php',38],['course/publish','forms.php',44],['course/publish','forms.php',96],['mod/glossary','mod_form.php',10],['mod/assign/feedback/file','uploadzipform.php',37],['grade/import/xml','grade_import_form.php',25],['enrol/guest','locallib.php',32],['grade/edit/tree','calculation_form.php',35],['mod/quiz','mod_form.php',61],['admin/tool/lp/classes/form','template_plans.php',41],['login','set_password_form.php',42],['mod/quiz','override_form.php',80],['notes','edit_form.php',25],['cache','forms.php',42],['cache','forms.php',131],['cache','forms.php',202],['cache','forms.php',281],['cache','forms.php',328],['admin/registration','forms.php',42],['admin/registration','forms.php',76],['admin/registration','forms.php',110],['admin/registration','forms.php',192],['blog','external_blog_edit_form.php',34],['user','editadvanced_form.php',39],['question/type/calculated','datasetitems_form.php',116],['mod/assign','submissionconfirmform.php',38],['mod/assign/feedback/file','batchuploadfilesform.php',38],['badges','criteria_form.php',37],['mod/assign/feedback/file','importzipform.php',39],['mod/feedback/item/multichoice','multichoice_form.php',22],['mod/choice','mod_form.php',10],['admin/tool/messageinbound/classes','edit_handler_form.php',37],['badges','backpack_form.php',38],['badges','backpack_form.php',101]], 19],
'get_lastpage': ['get_lastpage', 'Returns the last page for the lesson or false if there isn\'t one. ', [['mod/lesson','locallib.php',1339]], 1],
'link_for_activitylink': ['link_for_activitylink', 'Returns the link for the related activity ', [['mod/lesson','locallib.php',1611]], 1],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'embed_url': ['embed_url', 'Renders a media file (audio or video) using suitable embedded player. ', [['lib','outputrenderers.php',4650]], 34],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'stop_timer': ['stop_timer', 'Updates the timer to the current time then stops it by unsetting the user var ', [['mod/lesson','locallib.php',1580]], 2],
'format_text': ['format_text', 'Formats a text string coming from the search engine. ', [['search/classes','document.php',606],['lib/classes','grading_external.php',182],['search/engine/solr/classes','document.php',129],['lib','weblib.php',1158],['lib','tablelib.php',860],['lib','tablelib.php',1667],['question/type','questionbase.php',345]], 322],
'get_messages': ['get_messages', 'Returns all redirected messages. ', [['lib/phpunit/classes','phpmailer_sink.php',60],['mod/lesson','locallib.php',1270],['message','externallib.php',638],['lib/classes/update','validator.php',152],['lib/phpunit/classes','message_sink.php',58]], 112],
'js': ['js', 'Minify JS code. ', [['lib/classes','minify.php',31],['lib','outputrequirementslib.php',407],['grade/report/singleview/classes/local/screen','screen.php',245]], 68],
'is_unseen': ['is_unseen', 'Returns true if a page has been viewed before ', [['mod/lesson','locallib.php',2813],['mod/lesson/pagetypes','branchtable.php',279]], 1],
'get_firstpage': ['get_firstpage', 'Returns the first page for the lesson or false if there isn\'t one. ', [['mod/lesson','locallib.php',1317]], 1],
'lesson_clock_block_contents': ['lesson_clock_block_contents', 'If a timed lesson and not a teacher, then return a block_contents containing the clock. ', [['mod/lesson','locallib.php',477]], 1],
'has_option': ['has_option', 'True if the page uses a custom option ', [['mod/lesson','locallib.php',2938]], 0],
'addrule': ['addrule', 'Adds a validation rule for the given field ', [['lib','formslib.php',2023],['lib/pear/HTML','QuickForm.php',1016],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',330]], 314],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'load_all_pages': ['load_all_pages', 'Loads ALL of the pages for this lesson ', [['mod/lesson','locallib.php',1651],['mod/lesson','locallib.php',3378]], 27],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 370],
'lesson_unseen_question_jump': ['lesson_unseen_question_jump', 'Interprets the LESSON_UNSEENBRANCHPAGE jump. ', [['mod/lesson','locallib.php',98]], 3],
'is_accessible': ['is_accessible', 'Check if the lesson is accessible at the present time ', [['mod/lesson','locallib.php',1475]], 2],
'lesson_display_teacher_warning': ['lesson_display_teacher_warning', 'Checks to see if a LESSON_CLUSTERJUMP or a LESSON_UNSEENBRANCHPAGE is used in a lesson. ', [['mod/lesson','locallib.php',68]], 2],
'option_description_string': ['option_description_string', '', [['mod/lesson/pagetypes','matching.php',231],['mod/lesson/pagetypes','multichoice.php',283],['mod/lesson','locallib.php',3059],['mod/lesson/pagetypes','shortanswer.php',184]], 4],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'earned_score': ['earned_score', 'Returns the score for the attempt This may be overridden by page types that require manual grading ', [['mod/lesson','locallib.php',2621]], 1],
'get_default_region': ['get_default_region', 'Get the region name of the region blocks are added to by default ', [['lib','blocklib.php',176]], 6],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'get_lastpageid': ['get_lastpageid', 'Returns the id of the last page of this lesson. (nextpageid = 0) ', [['mod/lesson','locallib.php',1382]], 0],
'file_postupdate_standard_editor': ['file_postupdate_standard_editor', 'Prepares the content of the \'editor\' form element with embedded media files to be saved in database ', [['lib','filelib.php',202]], 45],
'lesson_unseen_branch_jump': ['lesson_unseen_branch_jump', 'Handles the unseen branch table jump. ', [['mod/lesson','locallib.php',168]], 2],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'__set': ['__set', '', [['lib/minify/lib','JSMinPlus.php',1681],['lib/adodb','adodb-active-record.inc.php',114],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',74],['lib/simplepie/library/SimplePie','IRI.php',143],['lib/horde/framework/Horde','Variables.php',199],['mod/lesson','locallib.php',2012],['lib','modinfolib.php',168],['lib','modinfolib.php',1206],['lib','adminlib.php',1085],['lib/dml','database_column_info.php',76],['lib','navigationlib.php',5121],['lib/classes/message','message.php',202],['lib/horde/framework/Horde/Support','Array.php',123],['lib','pagelib.php',779],['mod/forum/classes/output','forum_post.php',230],['lib/horde/framework/Horde','Stream.php',84],['lib/simplepie/library/SimplePie','gzdecode.php',175],['lib/adodb','adodb-active-recordx.inc.php',122],['lib','accesslib.php',5277],['lib/mustache/src/Mustache','HelperCollection.php',43],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',121],['tag/classes/output','tagindex.php',113],['lib/portfolio/formats/leap2a','lib.php',277],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',94],['lib/horde/framework/Horde/Support','ObjectStub.php',50],['lib/classes/event','base.php',927],['lib','coursecatlib.php',121],['lib','coursecatlib.php',2979],['calendar','lib.php',2061],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',88],['lib/horde/framework/Horde/Stream','TempString.php',83],['lib/horde/framework/Horde/Support','Stub.php',31],['lib','webdavlib.php',98],['lib/pear/Net/GeoIP','Location.php',142]], 4],
'load_lesson_types': ['load_lesson_types', 'Finds and loads all lesson page types in mod/lesson/pagetypes ', [['mod/lesson','locallib.php',3266]], 1],
'get_jumps': ['get_jumps', '', [['mod/lesson/pagetypes','matching.php',469],['mod/lesson/pagetypes','multichoice.php',51],['mod/lesson','locallib.php',3130],['mod/lesson/pagetypes','branchtable.php',49]], 0],
'resort_pages': ['resort_pages', 'Move a page resorting all other pages. ', [['mod/lesson','locallib.php',1905]], 2],
'max_answers': ['max_answers', 'Returns the maximum number of answers for this page given the maximum number of answers permitted by the lesson. ', [['mod/lesson','locallib.php',2949]], 0],
'display': ['display', 'Displays the form ', [['backup/util/ui','base_moodleform.class.php',365],['mod/feedback/classes','complete_form.php',536],['lib/minify/lib/Minify/Cache','APC.php',79],['mod/lesson/pagetypes','numerical.php',50],['mod/scorm/report/interactions/classes','report.php',31],['mod/scorm/report/basic/classes','report.php',30],['backup/util/ui','restore_ui.class.php',375],['mod/scorm/report/objectives/classes','report.php',37],['mod/lesson/pagetypes','endofcluster.php',39],['mod/lesson/pagetypes','matching.php',50],['mod/feedback/classes','responses_table.php',344],['user/selector','lib.php',205],['lib/minify/lib/Minify/Cache','File.php',72],['lib','formslib.php',935],['backup/util/ui','base_ui.class.php',169],['mod/lesson/pagetypes','multichoice.php',87],['question/classes/bank','column_base.php',164],['cohort','upload_form.php',316],['mod/quiz/report/statistics','report.php',51],['admin/roles/classes','capability_table_with_risks.php',131],['mod/lesson/pagetypes','truefalse.php',50],['admin/roles/classes','capability_table_base.php',71],['mod/quiz/report/overview','report.php',42],['mod/feedback/classes','templates_table.php',62],['lib/minify/lib/Minify/Cache','ZendPlatform.php',84],['mod/lesson/pagetypes','endofbranch.php',39],['mod/scorm/classes','report.php',39],['backup/util/ui','import_extensions.php',154],['question/classes/bank','view.php',451],['backup/util/ui','backup_ui_stage.class.php',545],['backup/util/ui','backup_ui_stage.class.php',588],['mod/quiz/report/grading','report.php',51],['mod/lesson/pagetypes','shortanswer.php',50],['lib/pear/HTML','Common.php',438],['mod/lesson/pagetypes','essay.php',67],['lib/minify/lib/Minify/Cache','Memcache.php',85],['backup/util/ui','base_ui_stage.class.php',126],['mod/scorm/report/graphs/classes','report.php',127],['mod/lesson/pagetypes','branchtable.php',105],['repository/flickr_public','image.php',149],['admin/roles/classes','define_role_table_advanced.php',612],['mod/quiz/report/responses','report.php',51],['mod/lesson/pagetypes','cluster.php',39],['lib/minify/lib/Minify/Cache','WinCache.php',79],['lib/minify/lib/Minify/Cache','XCache.php',74],['course/format/singleactivity','renderer.php',36],['backup/util/ui','restore_ui_stage.class.php',355],['backup/util/ui','restore_ui_stage.class.php',497],['backup/util/ui','restore_ui_stage.class.php',1025],['backup/util/ui','restore_ui_stage.class.php',1112]], 320],
'is_sub_page_of_type': ['is_sub_page_of_type', 'Checks to see if the specified page[id] is a subpage of a type specified in the $types array, until either there are no more pages of we find a type corresponding to that of a type specified in $ends ', [['mod/lesson','locallib.php',1879]], 3],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',592]], 3302],
'load': ['load', 'Load the class from cache using `require_once`. ', [['lib/mustache/src/Mustache/Cache','FilesystemCache.php',39],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',320],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',284],['lib/pear/HTML/QuickForm','select.php',430],['lib/phpexcel/PHPExcel/Reader','Excel5.php',612],['lib/mustache/src/Mustache/Cache','NoopCache.php',20],['lib/adodb','adodb-active-record.inc.php',775],['backup/cc/cc_lib','xmlbase.php',92],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',69],['lib/simplepie/library/SimplePie/Cache','File.php',118],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',48],['lib/phpexcel/PHPExcel','Autoloader.php',58],['lib/phpexcel/PHPExcel/Reader','IReader.php',38],['grade/grading','lib.php',227],['mod/lesson','locallib.php',1022],['mod/lesson','locallib.php',2240],['mod/lesson','locallib.php',3200],['lib/phpexcel/PHPExcel','IOFactory.php',180],['lib/mustache/src/Mustache','Cache.php',20],['lib','outputlib.php',432],['cache/classes','definition.php',335],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',87],['lib/adodb','adodb-active-recordx.inc.php',813],['lib/simplepie/library/SimplePie/Cache','Base.php',87],['lib/phpexcel/PHPExcel/Reader','HTML.php',143],['lib/simplepie/library/SimplePie/Cache','MySQL.php',286],['lib/mustache/src/Mustache/Loader','InlineLoader.php',87],['lib/mustache/src/Mustache','Loader.php',17],['lib/phpexcel/PHPExcel/Reader','CSV.php',203],['lib/simplepie/library/SimplePie/Cache','Memcache.php',123],['lib/mustache/src/Mustache/Loader','StringLoader.php',28],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',44],['lib/phpunit/classes','autoloader.php',46],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',216],['lib/htmlpurifier/HTMLPurifier','Language.php',69],['lib/phpexcel/PHPExcel/Reader','SYLK.php',190],['calendar','lib.php',2666],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',189],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',41],['cache/classes','config.php',128]], 190],
'valid_page_and_view': ['valid_page_and_view', '', [['mod/lesson/pagetypes','endofcluster.php',92],['mod/lesson','locallib.php',3165],['mod/lesson/pagetypes','endofbranch.php',110],['mod/lesson/pagetypes','cluster.php',77]], 1],
'stats': ['stats', '', [['mod/lesson/pagetypes','numerical.php',175],['mod/lesson/pagetypes','matching.php',379],['mod/lesson/pagetypes','multichoice.php',334],['mod/lesson','locallib.php',3096],['mod/lesson/pagetypes','truefalse.php',227],['mod/lesson/pagetypes','shortanswer.php',235],['mod/lesson/pagetypes','essay.php',190]], 1],
'is_enabled': ['is_enabled', 'Tools cannot be disabled. ', [['lib/classes/plugininfo','tool.php',39],['admin/tool/recyclebin/classes','category_bin.php',54],['admin/tool/log/classes/plugininfo','logstore.php',35],['admin/tool/recyclebin/classes','course_bin.php',54],['mod/assign/feedback/offline','locallib.php',380],['admin/tool/recyclebin/classes','base_bin.php',38],['lib','adminlib.php',1955],['search/classes','base.php',190],['lib','medialib.php',318],['lib','medialib.php',635],['lib','medialib.php',1268],['admin/tool/health','index.php',393],['lib/classes/plugininfo','mnetservice.php',33],['lib/classes/message/inbound','manager.php',37],['mod/assignment/classes/plugininfo','assignment.php',32],['competency/classes','api.php',49],['mod/assign','assignmentplugin.php',223],['lib/classes/plugininfo','orphaned.php',37],['search/tests/fixtures','mock_search_area.php',38],['tag/classes','area.php',106],['lib/classes/plugininfo','base.php',383],['mod/assign/feedback/editpdf','locallib.php',340],['tag/classes','tag.php',1269],['mod/assign/submission/comments','locallib.php',172],['lib','completionlib.php',269]], 276],
'create_answers': ['create_answers', '', [['mod/lesson/pagetypes','matching.php',110],['mod/lesson','locallib.php',2847],['mod/lesson/pagetypes','essay.php',94]], 2],
'get_page_form': ['get_page_form', 'Fetches an mform that can be used to create/edit an page ', [['mod/lesson','locallib.php',3440]], 2],
'action_link': ['action_link', 'Renders a special html link with attached action ', [['lib','outputrenderers.php',1623],['report/loglive/classes','table_log.php',285],['report/log/classes','table_log.php',332]], 75],
'check_page_order': ['check_page_order', 'This function detects errors in the ordering between 2 pages and updates the page records. ', [['mod/lesson','locallib.php',3344]], 3],
'get_course': ['get_course', 'Get the course id. ', [['course','moodleform_mod.php',132],['search/classes','engine.php',102],['course/format','lib.php',231],['mod/quiz','attemptlib.php',180],['mod/quiz','attemptlib.php',722],['tag/classes','index_builder.php',296],['lib','modinfolib.php',180],['lib','modinfolib.php',1424],['lib','modinfolib.php',2706],['lib','datalib.php',568],['availability/classes','info.php',70],['mod/assign','locallib.php',1316],['admin/tool/uploadcourse/classes','processor.php',232],['enrol','locallib.php',912],['search/tests/fixtures','mock_search_engine.php',56]], 302],
'get_next_page': ['get_next_page', 'Gets the next page id to display after the one that is provided. ', [['mod/lesson','locallib.php',1404],['mod/feedback/classes','completion.php',300]], 7],
'file_save_draft_area_files': ['file_save_draft_area_files', 'Saves files from a draft file area to a real one (merging the list of files). Can rewrite URLs in some content at the same time if desired. ', [['lib','filelib.php',778]], 61],
'get_typeid': ['get_typeid', '', [['mod/lesson/pagetypes','numerical.php',38],['mod/lesson/pagetypes','endofcluster.php',42],['mod/lesson/pagetypes','matching.php',38],['mod/lesson/pagetypes','multichoice.php',38],['mod/lesson/pagetypes','truefalse.php',38],['mod/lesson/pagetypes','endofbranch.php',42],['mod/lesson/pagetypes','shortanswer.php',38],['mod/lesson/pagetypes','essay.php',38],['mod/lesson/pagetypes','branchtable.php',39],['mod/lesson/pagetypes','cluster.php',43]], 2],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'js_init_call': ['js_init_call', 'Ensure that the specified JavaScript function is called from an inline script from page footer. ', [['lib','outputrequirementslib.php',1066]], 95],
'add_message': ['add_message', 'To be called from phpunit_util only! ', [['lib/phpunit/classes','phpmailer_sink.php',50],['mod/lesson','locallib.php',1451],['lib/classes/update','validator.php',548],['lib/phpunit/classes','message_sink.php',48]], 62],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'get_regions': ['get_regions', 'Get an array of all region names on this page where a block may appear ', [['lib','blocklib.php',164]], 16],
'add_page_link': ['add_page_link', '', [['mod/lesson/pagetypes','endofcluster.php',84],['mod/lesson','locallib.php',2803],['mod/lesson/pagetypes','endofbranch.php',102],['mod/lesson/pagetypes','branchtable.php',271],['mod/lesson/pagetypes','cluster.php',72]], 1],
'setdefault': ['setdefault', 'Set the field default ', [['lib/xmldb','xmldb_field.php',246],['lib','formslib.php',1896],['lib/google/src/Google/Service','YouTube.php',9537],['lib/google/src/Google/Service','YouTube.php',11044],['lib/google/src/Google/Service','Dfareporting.php',15827]], 718],
'get_sub_pages_of': ['get_sub_pages_of', 'Finds all pages that appear to be a subtype of the provided pageid until an end point specified within $ends is encountered or no more pages exist ', [['mod/lesson','locallib.php',1854]], 7],
'add_score': ['add_score', 'Convenience function: Adds a score input element ', [['mod/lesson','locallib.php',825]], 8],
'get_jump_name': ['get_jump_name', 'Returns the string for a jump name ', [['mod/lesson','locallib.php',2572]], 18],
'lesson_add_fake_blocks': ['lesson_add_fake_blocks', '', [['mod/lesson','locallib.php',420]], 3],
'get_typestring': ['get_typestring', '', [['mod/lesson/pagetypes','numerical.php',41],['mod/lesson/pagetypes','endofcluster.php',45],['mod/lesson/pagetypes','matching.php',41],['mod/lesson/pagetypes','multichoice.php',41],['mod/lesson/pagetypes','truefalse.php',41],['mod/lesson/pagetypes','endofbranch.php',45],['mod/lesson/pagetypes','shortanswer.php',41],['mod/lesson/pagetypes','essay.php',41],['mod/lesson/pagetypes','branchtable.php',42],['mod/lesson/pagetypes','cluster.php',46]], 12],
'delete_area_files': ['delete_area_files', 'Delete all area files (optionally limited by itemid). ', [['lib/filestorage','file_storage.php',992]], 123],
'grade_update': ['grade_update', 'Submit new or update grade; update/create grade_item definition. Grade must have userid specified, rawgrade and feedback with format are optional. rawgrade NULL means \'Not graded\'. Missing property or key means does not change the existing value. ', [['lib','gradelib.php',40]], 27],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'get_records_select': ['get_records_select', 'Load a list of records based on a select query. ', [['competency/classes','persistent.php',751],['lib/dml','moodle_database.php',1332]], 166],
'count_records': ['count_records', 'Count a list of records. ', [['competency/classes','persistent.php',815],['mod/glossary/classes','entry_query_builder.php',152],['lib/dml','moodle_database.php',1766]], 1630],
'properties': ['properties', '', [['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',1044],['mod/lesson','locallib.php',2069],['mod/lesson','locallib.php',2960],['calendar','lib.php',2511]], 69],
'lesson_process_group_deleted_in_course': ['lesson_process_group_deleted_in_course', 'Logic to happen when a/some group(s) has/have been deleted in a course. ', [['mod/lesson','locallib.php',641]], 2],
'strings_for_js': ['strings_for_js', 'Make an array of language strings available for JS. ', [['lib','outputrequirementslib.php',1183],['enrol','locallib.php',1311]], 73],
'add_fake_block': ['add_fake_block', 'Add something that looks like a block, but which isn\'t an actual block_instance, to this page. ', [['lib','blocklib.php',450]], 8],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',609]], 2210],
'add_action_buttons': ['add_action_buttons', 'Overriding formslib\'s add_action_buttons() method, to add an extra submit "save changes and return" button. ', [['course','moodleform_mod.php',914],['admin/tool/uploadcourse/classes','step2_form.php',176],['lib','formslib.php',1200]], 208],
'add_response': ['add_response', 'Add an actual response to the data structure. ', [['question/classes/statistics/responses','analysis_for_class.php',114],['mod/lesson','locallib.php',883]], 7],
'read': ['read', 'Read data from incoming POP3 stream. ', [['lib/horde/framework/Horde/Imap/Client/Socket/Connection','Pop3.php',54],['auth/cas/CAS/CAS/PGTStorage','File.php',222],['competency/classes','persistent.php',354],['lib/horde/framework/Horde','Secret.php',79],['lib/spout/src/Spout/Reader/Wrapper','XMLReader.php',114],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',341],['auth/cas/CAS/CAS/PGTStorage','Db.php',384],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',203],['lib/jabber/XMPP','XMLStream.php',660],['lib/horde/framework/Horde/Imap/Client/Socket/Connection','Socket.php',110]], 170],
'get_displayinmenublock': ['get_displayinmenublock', 'Set to true if this page should display in the menu block ', [['mod/lesson','locallib.php',3051],['mod/lesson/pagetypes','branchtable.php',276]], 0],
'get_user_max_upload_file_size': ['get_user_max_upload_file_size', 'Returns the maximum size for uploading files for the current user ', [['lib','moodlelib.php',6307]], 14],
'is_standard': ['is_standard', 'Used to determine if this is a standard page or a special page ', [['mod/lesson','locallib.php',747],['lib/classes/plugininfo','base.php',318]], 13],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'lesson_grade': ['lesson_grade', 'Calculates a user\'s grade for a lesson. ', [['mod/lesson','locallib.php',262]], 5],
'get_page_type_idstring': ['get_page_type_idstring', 'Returns the basic string used to identify a page type provided with an id ', [['mod/lesson','locallib.php',3305]], 2],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'check_answer': ['check_answer', '', [['mod/lesson/pagetypes','numerical.php',74],['mod/lesson/pagetypes','matching.php',159],['mod/lesson/pagetypes','multichoice.php',117],['mod/lesson','locallib.php',2910],['mod/lesson/pagetypes','truefalse.php',78],['mod/lesson/pagetypes','shortanswer.php',74],['mod/lesson/pagetypes','essay.php',113],['mod/lesson/pagetypes','branchtable.php',160]], 7],
'addhelpbutton': ['addhelpbutton', 'Add a help button to element, only one button per element is allowed. ', [['lib','formslib.php',1909]], 670],
'data_for_js': ['data_for_js', '!!!!!!DEPRECATED!!!!!! please use js_init_call() for everything now. ', [['lib','outputrequirementslib.php',1218]], 7],
'lesson_mediafile_block_contents': ['lesson_mediafile_block_contents', 'If there is a media file associated with this lesson, return a block_contents that displays it. ', [['mod/lesson','locallib.php',441]], 1],
'update_effective_access': ['update_effective_access', 'Updates the lesson properties with override information for a user. ', [['mod/lesson','locallib.php',1139]], 5],
'record_attempt': ['record_attempt', 'Records an attempt at this page ', [['mod/lesson','locallib.php',2403]], 1],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'get_add_page_type_links': ['get_add_page_type_links', 'Returns an array of links to use as add page links ', [['mod/lesson','locallib.php',3458]], 3],
'get_renderer': ['get_renderer', 'Returns instance of page renderer used by this plugin ', [['course/format','lib.php',905],['question/type/multichoice','question.php',156],['question/type/multichoice','question.php',278],['question/behaviour','behaviourbase.php',135],['question/type','questionbase.php',275],['lib','pagelib.php',802],['lib','outputlib.php',1828],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['mod/assign','locallib.php',2987],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49],['grade/grading/form/guide','lib.php',492]], 452],
'resourcelib_embed_general': ['resourcelib_embed_general', 'Returns general link or file embedding html. ', [['lib','resourcelib.php',250]], 4],
'get_answer_format': ['get_answer_format', 'Returns answer format used by question type. ', [['mod/lesson','locallib.php',733]], 4],
'rewrite_answers_urls': ['rewrite_answers_urls', 'Rewrite urls in response and optionality answer of a question answer ', [['mod/lesson','locallib.php',2670]], 14],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',481]], 1488],
'get_response_format': ['get_response_format', 'Returns response format used by question type. ', [['mod/lesson','locallib.php',740]], 1],
'format_time': ['format_time', 'Format a date/time (seconds) as weeks, days, hours etc as needed ', [['lib','moodlelib.php',2065]], 70],
'add_answer': ['add_answer', 'Convenience function: Adds an answer editor ', [['mod/lesson','locallib.php',853],['backup/cc/cc_lib','cc_asssesment.php',1893]], 11],
'get_firstpageid': ['get_firstpageid', 'Returns the id of the first page of this lesson. (prevpageid = 0) ', [['mod/lesson','locallib.php',1361]], 0],
'defined': ['defined', '', [], 4731],
'array_slice': ['array_slice', '', [], 165],
'class_exists': ['class_exists', '', [], 279],
'array_unshift': ['array_unshift', '', [], 115],
'strip_tags': ['strip_tags', '', [], 150],
'floor': ['floor', '', [], 514],
'round': ['round', '', [], 1002],
'ltrim': ['ltrim', '', [], 92],
'unserialize': ['unserialize', '', [], 192],
'array_keys': ['array_keys', '', [], 1256],
'preg_match': ['preg_match', '', [], 1286],
'next': ['next', '', [], 624],
'array_key_exists': ['array_key_exists', '', [], 1445],
'reset': ['reset', '', [], 1213],
'implode': ['implode', '', [], 1281],
'is_array': ['is_array', '', [], 1608],
'method_exists': ['method_exists', '', [], 265],
'get_parent_class': ['get_parent_class', '', [], 7],
'strpos': ['strpos', '', [], 1604],
'time': ['time', '', [], 1959],
'count': ['count', '', [], 4095],
'define': ['define', '', [], 2373],
'strtok': ['strtok', '', [], 23],
'array_values': ['array_values', '', [], 342],
'is_null': ['is_null', '', [], 2003],
'array_sum': ['array_sum', '', [], 30],
'shuffle': ['shuffle', '', [], 27],
'min': ['min', '', [], 898],
'array_shift': ['array_shift', '', [], 700],
'link': ['link', '', [], 695],
'is_object': ['is_object', '', [], 544],
'end': ['end', '', [], 433],
'in_array': ['in_array', '', [], 1234],
'rand': ['rand', '', [], 99],
'max': ['max', '', [], 1266],
'current': ['current', '', [], 155],
'get_class': ['get_class', '', [], 305],
'settype': ['settype', '', [], 1429]};
CLASS_DATA={
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'page_created': ['page_created', 'The mod_wiki page created event class. ', [['mod/wiki/classes/event','page_created.php',28],['mod/lesson/classes/event','page_created.php',29]], 2],
'user_override_deleted': ['user_override_deleted', 'The mod_lesson user override deleted event class. ', [['mod/lesson/classes/event','user_override_deleted.php',28],['mod/quiz/classes/event','user_override_deleted.php',28]], 2],
'lesson_page_answer': ['lesson_page_answer', 'Class used to represent an answer to a page ', [['mod/lesson','locallib.php',3180]], 6],
'html_table_row': ['html_table_row', 'Component representing a table row. ', [['lib','outputcomponents.php',2191]], 157],
'lesson_resumed': ['lesson_resumed', 'The mod_lesson lesson resumed event class ', [['mod/lesson/classes/event','lesson_resumed.php',29]], 1],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'page_updated': ['page_updated', 'The mod_wiki page updated event class. ', [['mod/wiki/classes/event','page_updated.php',28],['mod/lesson/classes/event','page_updated.php',29]], 6],
'block_contents': ['block_contents', 'This class represents how a block appears on a page. ', [['lib','outputcomponents.php',2469]], 15],
'lesson_started': ['lesson_started', 'The mod_lesson lesson started event class. ', [['mod/lesson/classes/event','lesson_started.php',29]], 1],
'calendar_event': ['calendar_event', 'Manage calendar events ', [['calendar','lib.php',1951]], 75],
'lesson_page_type_manager': ['lesson_page_type_manager', 'A management class for page types ', [['mod/lesson','locallib.php',3226]], 14],
'page_moved': ['page_moved', 'The mod_lesson page_moved event class. ', [['mod/lesson/classes/event','page_moved.php',29]], 1],
'lesson_ended': ['lesson_ended', 'The mod_lesson lesson ended event class. ', [['mod/lesson/classes/event','lesson_ended.php',29]], 1],
'question_answered': ['question_answered', 'The mod_lesson question answered event class. ', [['mod/lesson/classes/event','question_answered.php',29]], 2],
'popup_action': ['popup_action', 'Component action for a popup window. ', [['lib','outputactions.php',114]], 31],
'lesson': ['lesson', 'Class representation of a lesson ', [['mod/lesson','locallib.php',921]], 28],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'lesson_restarted': ['lesson_restarted', 'The mod_lesson lesson restarted event class ', [['mod/lesson/classes/event','lesson_restarted.php',29]], 1],
'group_override_deleted': ['group_override_deleted', 'The mod_lesson group override deleted event class. ', [['mod/lesson/classes/event','group_override_deleted.php',28],['mod/quiz/classes/event','group_override_deleted.php',28]], 2],
'page_deleted': ['page_deleted', 'The mod_wiki page deleted event class. ', [['mod/wiki/classes/event','page_deleted.php',28],['mod/lesson/classes/event','page_deleted.php',29]], 2],
'completion_info': ['completion_info', 'Class represents completion information for a course. ', [['lib','completionlib.php',210]], 141]};
CONST_DATA={
'LESSON_ANSWER_HTML': ['LESSON_ANSWER_HTML', '', [['mod/lesson','locallib.php',62]], 13],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'LESSON_UNSEENBRANCHPAGE': ['LESSON_UNSEENBRANCHPAGE', '', [['mod/lesson','locallib.php',46]], 10],
'LESSON_RANDOMBRANCH': ['LESSON_RANDOMBRANCH', '', [['mod/lesson','locallib.php',52]], 6],
'LESSON_PAGE_CLUSTER': ['LESSON_PAGE_CLUSTER', '', [['mod/lesson/pagetypes','cluster.php',29]], 10],
'PARAM_URL': ['PARAM_URL', '', [['lib','moodlelib.php',239]], 165],
'LESSON_UNDEFINED': ['LESSON_UNDEFINED', '', [['mod/lesson','locallib.php',56]], 1],
'LESSON_PAGE_BRANCHTABLE': ['LESSON_PAGE_BRANCHTABLE', '', [['mod/lesson/pagetypes','branchtable.php',29]], 25],
'LESSON_PREVIOUSPAGE': ['LESSON_PREVIOUSPAGE', '', [['mod/lesson','locallib.php',48]], 8],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 921],
'LESSON_UNANSWEREDPAGE': ['LESSON_UNANSWEREDPAGE', '', [['mod/lesson','locallib.php',40]], 4],
'LESSON_PAGE_ENDOFBRANCH': ['LESSON_PAGE_ENDOFBRANCH', '', [['mod/lesson/pagetypes','endofbranch.php',29]], 13],
'COMPLETION_COMPLETE': ['COMPLETION_COMPLETE', '', [['lib','completionlib.php',76]], 90],
'LESSON_NEXTPAGE': ['LESSON_NEXTPAGE', '', [['mod/lesson','locallib.php',42]], 36],
'LESSON_EOL': ['LESSON_EOL', '', [['mod/lesson','locallib.php',44]], 29],
'LESSON_PAGE_ENDOFCLUSTER': ['LESSON_PAGE_ENDOFCLUSTER', '', [['mod/lesson/pagetypes','endofcluster.php',29]], 10],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 802],
'LESSON_PAGE_MATCHING': ['LESSON_PAGE_MATCHING', '', [['mod/lesson/pagetypes','matching.php',29]], 6],
'LESSON_CLUSTERJUMP': ['LESSON_CLUSTERJUMP', '', [['mod/lesson','locallib.php',54]], 10],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812],
'LESSON_RANDOMPAGE': ['LESSON_RANDOMPAGE', '', [['mod/lesson','locallib.php',50]], 7],
'FORMAT_MOODLE': ['FORMAT_MOODLE', '', [['lib','weblib.php',42]], 506],
'LESSON_UNSEENPAGE': ['LESSON_UNSEENPAGE', '', [['mod/lesson','locallib.php',38]], 4],
'PARAM_TEXT': ['PARAM_TEXT', '', [['lib','moodlelib.php',228]], 542],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 1121],
'LESSON_MAX_EVENT_LENGTH': ['LESSON_MAX_EVENT_LENGTH', '', [['mod/lesson','locallib.php',59]], 2],
'LESSON_THISPAGE': ['LESSON_THISPAGE', '', [['mod/lesson','locallib.php',36]], 11],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'EDITOR_UNLIMITED_FILES': ['EDITOR_UNLIMITED_FILES', '', [['lib','formslib.php',51]], 41]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
