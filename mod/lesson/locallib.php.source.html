<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/lesson/locallib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/lesson';
filename='locallib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/lesson/</a> -> <a href="locallib.php.html">locallib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="locallib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="locallib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Local library file for Lesson.  These are non-standard functions that are used</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * only by Lesson.</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> *</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @package mod_lesson</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or late</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> **/</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment">/** Make sure this isn't being directly accessed */</span>
<a name="l28"><span class="linenum">  28</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">/** Include the files that are required by this module */</span>
<a name="l31"><span class="linenum">  31</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../course/moodleform_mod.php.html">/course/moodleform_mod.php</a>');
<a name="l32"><span class="linenum">  32</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/lesson/lib.php.html">/mod/lesson/lib.php</a>');
<a name="l33"><span class="linenum">  33</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/filelib.php');
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">/** This page */</span>
<a name="l36"><span class="linenum">  36</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('LESSON_THISPAGE')" href="../../_constants/LESSON_THISPAGE.html" onMouseOver="constPopup(event,'LESSON_THISPAGE')">LESSON_THISPAGE</a>', 0);
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">/** Next page -&gt; any page not seen before */</span>
<a name="l38"><span class="linenum">  38</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_UNSEENPAGE')" href="../../_constants/LESSON_UNSEENPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENPAGE')">LESSON_UNSEENPAGE</a>&quot;, 1);
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">/** Next page -&gt; any page not answered correctly */</span>
<a name="l40"><span class="linenum">  40</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_UNANSWEREDPAGE')" href="../../_constants/LESSON_UNANSWEREDPAGE.html" onMouseOver="constPopup(event,'LESSON_UNANSWEREDPAGE')">LESSON_UNANSWEREDPAGE</a>&quot;, 2);
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">/** Jump to Next Page */</span>
<a name="l42"><span class="linenum">  42</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>&quot;, -1);
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">/** End of Lesson */</span>
<a name="l44"><span class="linenum">  44</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>&quot;, -9);
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">/** Jump to an unseen page within a branch and end of branch or end of lesson */</span>
<a name="l46"><span class="linenum">  46</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_UNSEENBRANCHPAGE')" href="../../_constants/LESSON_UNSEENBRANCHPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENBRANCHPAGE')">LESSON_UNSEENBRANCHPAGE</a>&quot;, -50);
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">/** Jump to Previous Page */</span>
<a name="l48"><span class="linenum">  48</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_PREVIOUSPAGE')" href="../../_constants/LESSON_PREVIOUSPAGE.html" onMouseOver="constPopup(event,'LESSON_PREVIOUSPAGE')">LESSON_PREVIOUSPAGE</a>&quot;, -40);
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">/** Jump to a random page within a branch and end of branch or end of lesson */</span>
<a name="l50"><span class="linenum">  50</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_RANDOMPAGE')" href="../../_constants/LESSON_RANDOMPAGE.html" onMouseOver="constPopup(event,'LESSON_RANDOMPAGE')">LESSON_RANDOMPAGE</a>&quot;, -60);
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">/** Jump to a random Branch */</span>
<a name="l52"><span class="linenum">  52</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_RANDOMBRANCH')" href="../../_constants/LESSON_RANDOMBRANCH.html" onMouseOver="constPopup(event,'LESSON_RANDOMBRANCH')">LESSON_RANDOMBRANCH</a>&quot;, -70);
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">/** Cluster Jump */</span>
<a name="l54"><span class="linenum">  54</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_CLUSTERJUMP')" href="../../_constants/LESSON_CLUSTERJUMP.html" onMouseOver="constPopup(event,'LESSON_CLUSTERJUMP')">LESSON_CLUSTERJUMP</a>&quot;, -80);
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">/** Undefined */</span>
<a name="l56"><span class="linenum">  56</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_UNDEFINED')" href="../../_constants/LESSON_UNDEFINED.html" onMouseOver="constPopup(event,'LESSON_UNDEFINED')">LESSON_UNDEFINED</a>&quot;, -99);
<a name="l57"><span class="linenum">  57</span></a>  
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">/** LESSON_MAX_EVENT_LENGTH = 432000 ; 5 days maximum */</span>
<a name="l59"><span class="linenum">  59</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_MAX_EVENT_LENGTH')" href="../../_constants/LESSON_MAX_EVENT_LENGTH.html" onMouseOver="constPopup(event,'LESSON_MAX_EVENT_LENGTH')">LESSON_MAX_EVENT_LENGTH</a>&quot;, &quot;432000&quot;);
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">/** Answer format is HTML */</span>
<a name="l62"><span class="linenum">  62</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('LESSON_ANSWER_HTML')" href="../../_constants/LESSON_ANSWER_HTML.html" onMouseOver="constPopup(event,'LESSON_ANSWER_HTML')">LESSON_ANSWER_HTML</a>&quot;, &quot;HTML&quot;);
<a name="l63"><span class="linenum">  63</span></a>  
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">//////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">/// Any other lesson functions go here.  Each of them must have a name that</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">/// starts with lesson_</span>
<a name="l67"><span class="linenum">  67</span></a>  
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">/**</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> * Checks to see if a LESSON_CLUSTERJUMP or</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> * a LESSON_UNSEENBRANCHPAGE is used in a lesson.</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment"> *</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment"> * This function is only executed when a teacher is</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> * checking the navigation for a lesson.</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment"> *</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment"> * @param stdClass $lesson Id of the lesson that is to be checked.</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment"> * @return boolean True or false.</span>
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment"> **/</span>
<a name="l78"><span class="linenum">  78</span></a>  function <a class="function" onClick="logFunction('lesson_display_teacher_warning')" href="../../_functions/lesson_display_teacher_warning.html" onMouseOver="funcPopup(event,'lesson_display_teacher_warning')">lesson_display_teacher_warning</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l79"><span class="linenum">  79</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">    // get all of the lesson answers</span>
<a name="l82"><span class="linenum">  82</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array (&quot;lessonid&quot; =&gt; <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l83"><span class="linenum">  83</span></a>      if (!<a class="var it23905" onMouseOver="hilite(23905)" onMouseOut="lolite()" onClick="logVariable('lessonanswers')" href="../../_variables/lessonanswers.html">$lessonanswers</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;lesson_answers&quot;, &quot;lessonid = :lessonid&quot;, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">        // no answers, then not using cluster or unseen</span>
<a name="l85"><span class="linenum">  85</span></a>          return false;
<a name="l86"><span class="linenum">  86</span></a>      }
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">    // just check for the first one that fulfills the requirements</span>
<a name="l88"><span class="linenum">  88</span></a>      foreach (<a class="var it23905" onMouseOver="hilite(23905)" onMouseOut="lolite()" onClick="logVariable('lessonanswers')" href="../../_variables/lessonanswers.html">$lessonanswers</a> as <a class="var it23906" onMouseOver="hilite(23906)" onMouseOut="lolite()" onClick="logVariable('lessonanswer')" href="../../_variables/lessonanswer.html">$lessonanswer</a>) {
<a name="l89"><span class="linenum">  89</span></a>          if (<a class="var it23906" onMouseOver="hilite(23906)" onMouseOut="lolite()" onClick="logVariable('lessonanswer')" href="../../_variables/lessonanswer.html">$lessonanswer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it41632" onMouseOver="hilite(41632)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> == <a class="constant" onClick="logConstant('LESSON_CLUSTERJUMP')" href="../../_constants/LESSON_CLUSTERJUMP.html" onMouseOver="constPopup(event,'LESSON_CLUSTERJUMP')">LESSON_CLUSTERJUMP</a> || <a class="var it23906" onMouseOver="hilite(23906)" onMouseOut="lolite()" onClick="logVariable('lessonanswer')" href="../../_variables/lessonanswer.html">$lessonanswer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it41632" onMouseOver="hilite(41632)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> == <a class="constant" onClick="logConstant('LESSON_UNSEENBRANCHPAGE')" href="../../_constants/LESSON_UNSEENBRANCHPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENBRANCHPAGE')">LESSON_UNSEENBRANCHPAGE</a>) {
<a name="l90"><span class="linenum">  90</span></a>              return true;
<a name="l91"><span class="linenum">  91</span></a>          }
<a name="l92"><span class="linenum">  92</span></a>      }
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">    // if no answers use either of the two jumps</span>
<a name="l95"><span class="linenum">  95</span></a>      return false;
<a name="l96"><span class="linenum">  96</span></a>  }
<a name="l97"><span class="linenum">  97</span></a>  
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">/**</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment"> * Interprets the LESSON_UNSEENBRANCHPAGE jump.</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment"> *</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment"> * will return the pageid of a random unseen page that is within a branch</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment"> *</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment"> * @param lesson $lesson</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment"> * @param int $userid Id of the user.</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment"> * @param int $pageid Id of the page from which we are jumping.</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment"> * @return int Id of the next page.</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment"> **/</span>
<a name="l108"><span class="linenum"> 108</span></a>  function <a class="function" onClick="logFunction('lesson_unseen_question_jump')" href="../../_functions/lesson_unseen_question_jump.html" onMouseOver="funcPopup(event,'lesson_unseen_question_jump')">lesson_unseen_question_jump</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>) {
<a name="l109"><span class="linenum"> 109</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">    // get the number of retakes</span>
<a name="l112"><span class="linenum"> 112</span></a>      if (!<a class="var it23907" onMouseOver="hilite(23907)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;userid&quot;=&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>))) {
<a name="l113"><span class="linenum"> 113</span></a>          <a class="var it23907" onMouseOver="hilite(23907)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = 0;
<a name="l114"><span class="linenum"> 114</span></a>      }
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">    // get all the lesson_attempts aka what the user has seen</span>
<a name="l117"><span class="linenum"> 117</span></a>      if (<a class="var it23908" onMouseOver="hilite(23908)" onMouseOut="lolite()" onClick="logVariable('viewedpages')" href="../../_variables/viewedpages.html">$viewedpages</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(&quot;lesson_attempts&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;userid&quot;=&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, &quot;retry&quot;=&gt;<a class="var it23907" onMouseOver="hilite(23907)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a>), &quot;timeseen DESC&quot;)) {
<a name="l118"><span class="linenum"> 118</span></a>          foreach(<a class="var it23908" onMouseOver="hilite(23908)" onMouseOut="lolite()" onClick="logVariable('viewedpages')" href="../../_variables/viewedpages.html">$viewedpages</a> as <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('viewed')" href="../../_variables/viewed.html">$viewed</a>) {
<a name="l119"><span class="linenum"> 119</span></a>              <a class="var it23909" onMouseOver="hilite(23909)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>[] = <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('viewed')" href="../../_variables/viewed.html">$viewed</a>-&gt;<a onClick="logVariable('pageid')" class="var it41633" onMouseOver="hilite(41633)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>;
<a name="l120"><span class="linenum"> 120</span></a>          }
<a name="l121"><span class="linenum"> 121</span></a>      } else {
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it23909" onMouseOver="hilite(23909)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a> = array();
<a name="l123"><span class="linenum"> 123</span></a>      }
<a name="l124"><span class="linenum"> 124</span></a>  
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">    // get the lesson pages</span>
<a name="l126"><span class="linenum"> 126</span></a>      <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a> = <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>      if (<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> == <a class="constant" onClick="logConstant('LESSON_UNSEENBRANCHPAGE')" href="../../_constants/LESSON_UNSEENBRANCHPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENBRANCHPAGE')">LESSON_UNSEENBRANCHPAGE</a>) {  // this only happens when a student leaves in the middle of an unseen question within a branch series
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it23909" onMouseOver="hilite(23909)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>[0];  <span class="comment">// just change the pageid to the last page viewed inside the branch table</span>
<a name="l130"><span class="linenum"> 130</span></a>      }
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">    // go up the pages till branch table</span>
<a name="l133"><span class="linenum"> 133</span></a>      while (<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> != 0) { // this condition should never be satisfied... only happens if there are no branch tables above this page
<a name="l134"><span class="linenum"> 134</span></a>          if (<a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>) {
<a name="l135"><span class="linenum"> 135</span></a>              break;
<a name="l136"><span class="linenum"> 136</span></a>          }
<a name="l137"><span class="linenum"> 137</span></a>          <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;prevpageid;
<a name="l138"><span class="linenum"> 138</span></a>      }
<a name="l139"><span class="linenum"> 139</span></a>  
<a name="l140"><span class="linenum"> 140</span></a>      <a class="var it23911" onMouseOver="hilite(23911)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a> = <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('get_sub_pages_of')" href="../../_functions/get_sub_pages_of.html" onMouseOver="funcPopup(event,'get_sub_pages_of')">get_sub_pages_of</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>, <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>));
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">    // this foreach loop stores all the pages that are within the branch table but are not in the $seenpages array</span>
<a name="l143"><span class="linenum"> 143</span></a>      <a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a> = array();
<a name="l144"><span class="linenum"> 144</span></a>      foreach(<a class="var it23911" onMouseOver="hilite(23911)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a> as <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l145"><span class="linenum"> 145</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it23909" onMouseOver="hilite(23909)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>)) {
<a name="l146"><span class="linenum"> 146</span></a>              <a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[] = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l147"><span class="linenum"> 147</span></a>          }
<a name="l148"><span class="linenum"> 148</span></a>      }
<a name="l149"><span class="linenum"> 149</span></a>  
<a name="l150"><span class="linenum"> 150</span></a>      if(<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>) == 0) {
<a name="l151"><span class="linenum"> 151</span></a>          if(isset(<a class="var it23911" onMouseOver="hilite(23911)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a>)) {
<a name="l152"><span class="linenum"> 152</span></a>              <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('temp')" href="../../_variables/temp.html">$temp</a> = <a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it23911" onMouseOver="hilite(23911)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a>);
<a name="l153"><span class="linenum"> 153</span></a>              <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a> = <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('temp')" href="../../_variables/temp.html">$temp</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it40433" onMouseOver="hilite(40433)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a>; <span class="comment">// they have seen all the pages in the branch, so go to EOB/next branch table/EOL</span>
<a name="l154"><span class="linenum"> 154</span></a>          } else {
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">            // there are no pages inside the branch, so return the next page</span>
<a name="l156"><span class="linenum"> 156</span></a>              <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a> = <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;nextpageid;
<a name="l157"><span class="linenum"> 157</span></a>          }
<a name="l158"><span class="linenum"> 158</span></a>          if (<a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a> == 0) {
<a name="l159"><span class="linenum"> 159</span></a>              return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;
<a name="l160"><span class="linenum"> 160</span></a>          } else {
<a name="l161"><span class="linenum"> 161</span></a>              return <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>;
<a name="l162"><span class="linenum"> 162</span></a>          }
<a name="l163"><span class="linenum"> 163</span></a>      } else {
<a name="l164"><span class="linenum"> 164</span></a>          return <a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[<a class="phpfunction" onClick="logFunction('rand')" href="../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>)-1)];  <span class="comment">// returns a random page id for the next page</span>
<a name="l165"><span class="linenum"> 165</span></a>      }
<a name="l166"><span class="linenum"> 166</span></a>  }
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">/**</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment"> * Handles the unseen branch table jump.</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment"> *</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment"> * @param lesson $lesson</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment"> * @param int $userid User id.</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment"> * @return int Will return the page id of a branch table or end of lesson</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment"> **/</span>
<a name="l175"><span class="linenum"> 175</span></a>  function <a class="function" onClick="logFunction('lesson_unseen_branch_jump')" href="../../_functions/lesson_unseen_branch_jump.html" onMouseOver="funcPopup(event,'lesson_unseen_branch_jump')">lesson_unseen_branch_jump</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l176"><span class="linenum"> 176</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l177"><span class="linenum"> 177</span></a>  
<a name="l178"><span class="linenum"> 178</span></a>      if (!<a class="var it23907" onMouseOver="hilite(23907)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;userid&quot;=&gt;<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>))) {
<a name="l179"><span class="linenum"> 179</span></a>          <a class="var it23907" onMouseOver="hilite(23907)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = 0;
<a name="l180"><span class="linenum"> 180</span></a>      }
<a name="l181"><span class="linenum"> 181</span></a>  
<a name="l182"><span class="linenum"> 182</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array (&quot;lessonid&quot; =&gt; <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;userid&quot; =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, &quot;retry&quot; =&gt; <a class="var it23907" onMouseOver="hilite(23907)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a>);
<a name="l183"><span class="linenum"> 183</span></a>      if (!<a class="var it23912" onMouseOver="hilite(23912)" onMouseOut="lolite()" onClick="logVariable('seenbranches')" href="../../_variables/seenbranches.html">$seenbranches</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;lesson_branch&quot;, &quot;lessonid = :lessonid AND userid = :userid AND retry = :retry&quot;, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>,
<a name="l184"><span class="linenum"> 184</span></a>                  &quot;timeseen DESC&quot;)) {
<a name="l185"><span class="linenum"> 185</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindrecords', 'lesson');
<a name="l186"><span class="linenum"> 186</span></a>      }
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">    // get the lesson pages</span>
<a name="l189"><span class="linenum"> 189</span></a>      <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a> = <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l190"><span class="linenum"> 190</span></a>  
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">    // this loads all the viewed branch tables into $seen until it finds the branch table with the flag</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">    // which is the branch table that starts the unseenbranch function</span>
<a name="l193"><span class="linenum"> 193</span></a>      <a class="var it617" onMouseOver="hilite(617)" onMouseOut="lolite()" onClick="logVariable('seen')" href="../../_variables/seen.html">$seen</a> = array();
<a name="l194"><span class="linenum"> 194</span></a>      foreach (<a class="var it23912" onMouseOver="hilite(23912)" onMouseOut="lolite()" onClick="logVariable('seenbranches')" href="../../_variables/seenbranches.html">$seenbranches</a> as <a class="var it23913" onMouseOver="hilite(23913)" onMouseOut="lolite()" onClick="logVariable('seenbranch')" href="../../_variables/seenbranch.html">$seenbranch</a>) {
<a name="l195"><span class="linenum"> 195</span></a>          if (!<a class="var it23913" onMouseOver="hilite(23913)" onMouseOut="lolite()" onClick="logVariable('seenbranch')" href="../../_variables/seenbranch.html">$seenbranch</a>-&gt;<a onClick="logVariable('flag')" class="var it41634" onMouseOver="hilite(41634)" onMouseOut="lolite()" href="../../_variables/flag.html">flag</a>) {
<a name="l196"><span class="linenum"> 196</span></a>              <a class="var it617" onMouseOver="hilite(617)" onMouseOut="lolite()" onClick="logVariable('seen')" href="../../_variables/seen.html">$seen</a>[<a class="var it23913" onMouseOver="hilite(23913)" onMouseOut="lolite()" onClick="logVariable('seenbranch')" href="../../_variables/seenbranch.html">$seenbranch</a>-&gt;<a onClick="logVariable('pageid')" class="var it41634" onMouseOver="hilite(41634)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>] = <a class="var it23913" onMouseOver="hilite(23913)" onMouseOut="lolite()" onClick="logVariable('seenbranch')" href="../../_variables/seenbranch.html">$seenbranch</a>-&gt;<a onClick="logVariable('pageid')" class="var it41634" onMouseOver="hilite(41634)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>;
<a name="l197"><span class="linenum"> 197</span></a>          } else {
<a name="l198"><span class="linenum"> 198</span></a>              <a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a> = <a class="var it23913" onMouseOver="hilite(23913)" onMouseOut="lolite()" onClick="logVariable('seenbranch')" href="../../_variables/seenbranch.html">$seenbranch</a>-&gt;<a onClick="logVariable('pageid')" class="var it41634" onMouseOver="hilite(41634)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>;
<a name="l199"><span class="linenum"> 199</span></a>              break;
<a name="l200"><span class="linenum"> 200</span></a>          }
<a name="l201"><span class="linenum"> 201</span></a>      }
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">    // this function searches through the lesson pages to find all the branch tables</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">    // that follow the flagged branch table</span>
<a name="l204"><span class="linenum"> 204</span></a>      <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it340" onMouseOver="hilite(340)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>]-&gt;nextpageid; <span class="comment">// move down from the flagged branch table</span>
<a name="l205"><span class="linenum"> 205</span></a>      <a class="var it10069" onMouseOver="hilite(10069)" onMouseOut="lolite()" onClick="logVariable('branchtables')" href="../../_variables/branchtables.html">$branchtables</a> = array();
<a name="l206"><span class="linenum"> 206</span></a>      while (<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> != 0) {  // grab all of the branch table till eol
<a name="l207"><span class="linenum"> 207</span></a>          if (<a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>) {
<a name="l208"><span class="linenum"> 208</span></a>              <a class="var it10069" onMouseOver="hilite(10069)" onMouseOut="lolite()" onClick="logVariable('branchtables')" href="../../_variables/branchtables.html">$branchtables</a>[] = <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;id;
<a name="l209"><span class="linenum"> 209</span></a>          }
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;nextpageid;
<a name="l211"><span class="linenum"> 211</span></a>      }
<a name="l212"><span class="linenum"> 212</span></a>      <a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a> = array();
<a name="l213"><span class="linenum"> 213</span></a>      foreach (<a class="var it10069" onMouseOver="hilite(10069)" onMouseOut="lolite()" onClick="logVariable('branchtables')" href="../../_variables/branchtables.html">$branchtables</a> as <a class="var it23914" onMouseOver="hilite(23914)" onMouseOut="lolite()" onClick="logVariable('branchtable')" href="../../_variables/branchtable.html">$branchtable</a>) {
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">        // load all of the unseen branch tables into unseen</span>
<a name="l215"><span class="linenum"> 215</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it23914" onMouseOver="hilite(23914)" onMouseOut="lolite()" onClick="logVariable('branchtable')" href="../../_variables/branchtable.html">$branchtable</a>, <a class="var it617" onMouseOver="hilite(617)" onMouseOut="lolite()" onClick="logVariable('seen')" href="../../_variables/seen.html">$seen</a>)) {
<a name="l216"><span class="linenum"> 216</span></a>              <a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[] = <a class="var it23914" onMouseOver="hilite(23914)" onMouseOut="lolite()" onClick="logVariable('branchtable')" href="../../_variables/branchtable.html">$branchtable</a>;
<a name="l217"><span class="linenum"> 217</span></a>          }
<a name="l218"><span class="linenum"> 218</span></a>      }
<a name="l219"><span class="linenum"> 219</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>) &gt; 0) {
<a name="l220"><span class="linenum"> 220</span></a>          return <a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[<a class="phpfunction" onClick="logFunction('rand')" href="../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>)-1)];  <span class="comment">// returns a random page id for the next page</span>
<a name="l221"><span class="linenum"> 221</span></a>      } else {
<a name="l222"><span class="linenum"> 222</span></a>          return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;  <span class="comment">// has viewed all of the branch tables</span>
<a name="l223"><span class="linenum"> 223</span></a>      }
<a name="l224"><span class="linenum"> 224</span></a>  }
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">/**</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment"> * Handles the random jump between a branch table and end of branch or end of lesson (LESSON_RANDOMPAGE).</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment"> *</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment"> * @param lesson $lesson</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment"> * @param int $pageid The id of the page that we are jumping from (?)</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment"> * @return int The pageid of a random page that is within a branch table</span>
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment"> **/</span>
<a name="l233"><span class="linenum"> 233</span></a>  function <a class="function" onClick="logFunction('lesson_random_question_jump')" href="../../_functions/lesson_random_question_jump.html" onMouseOver="funcPopup(event,'lesson_random_question_jump')">lesson_random_question_jump</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>) {
<a name="l234"><span class="linenum"> 234</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">    // get the lesson pages</span>
<a name="l237"><span class="linenum"> 237</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array (&quot;lessonid&quot; =&gt; <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l238"><span class="linenum"> 238</span></a>      if (!<a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;lesson_pages&quot;, &quot;lessonid = :lessonid&quot;, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l239"><span class="linenum"> 239</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindpages', 'lesson');
<a name="l240"><span class="linenum"> 240</span></a>      }
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">    // go up the pages till branch table</span>
<a name="l243"><span class="linenum"> 243</span></a>      while (<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> != 0) { // this condition should never be satisfied... only happens if there are no branch tables above this page
<a name="l244"><span class="linenum"> 244</span></a>  
<a name="l245"><span class="linenum"> 245</span></a>          if (<a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>) {
<a name="l246"><span class="linenum"> 246</span></a>              break;
<a name="l247"><span class="linenum"> 247</span></a>          }
<a name="l248"><span class="linenum"> 248</span></a>          <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;prevpageid;
<a name="l249"><span class="linenum"> 249</span></a>      }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">    // get the pages within the branch</span>
<a name="l252"><span class="linenum"> 252</span></a>      <a class="var it23911" onMouseOver="hilite(23911)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a> = <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('get_sub_pages_of')" href="../../_functions/get_sub_pages_of.html" onMouseOver="funcPopup(event,'get_sub_pages_of')">get_sub_pages_of</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>, <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>));
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>      if(<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23911" onMouseOver="hilite(23911)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a>) == 0) {
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">        // there are no pages inside the branch, so return the next page</span>
<a name="l256"><span class="linenum"> 256</span></a>          return <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;nextpageid;
<a name="l257"><span class="linenum"> 257</span></a>      } else {
<a name="l258"><span class="linenum"> 258</span></a>          return <a class="var it23911" onMouseOver="hilite(23911)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a>[<a class="phpfunction" onClick="logFunction('rand')" href="../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23911" onMouseOver="hilite(23911)" onMouseOut="lolite()" onClick="logVariable('pagesinbranch')" href="../../_variables/pagesinbranch.html">$pagesinbranch</a>)-1)]-&gt;id;  <span class="comment">// returns a random page id for the next page</span>
<a name="l259"><span class="linenum"> 259</span></a>      }
<a name="l260"><span class="linenum"> 260</span></a>  }
<a name="l261"><span class="linenum"> 261</span></a>  
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">/**</span>
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment"> * Calculates a user's grade for a lesson.</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment"> *</span>
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment"> * @param object $lesson The lesson that the user is taking.</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment"> * @param int $retries The attempt number.</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment"> * @param int $userid Id of the user (optional, default current user).</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment"> * @return object { nquestions =&gt; number of questions answered</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">                    attempts =&gt; number of question attempts</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">                    total =&gt; max points possible</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">                    earned =&gt; points earned by student</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">                    grade =&gt; calculated percentage grade</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">                    nmanual =&gt; number of manually graded questions</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">                    manualpoints =&gt; point value for manually graded questions }</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment"> */</span>
<a name="l276"><span class="linenum"> 276</span></a>  function <a class="function" onClick="logFunction('lesson_grade')" href="../../_functions/lesson_grade.html" onMouseOver="funcPopup(event,'lesson_grade')">lesson_grade</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it9371" onMouseOver="hilite(9371)" onMouseOut="lolite()" onClick="logVariable('ntries')" href="../../_variables/ntries.html">$ntries</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = 0) {
<a name="l277"><span class="linenum"> 277</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>      if (empty(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l280"><span class="linenum"> 280</span></a>          <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l281"><span class="linenum"> 281</span></a>      }
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">    // Zero out everything</span>
<a name="l284"><span class="linenum"> 284</span></a>      <a class="var it23915" onMouseOver="hilite(23915)" onMouseOut="lolite()" onClick="logVariable('ncorrect')" href="../../_variables/ncorrect.html">$ncorrect</a>     = 0;
<a name="l285"><span class="linenum"> 285</span></a>      <a class="var it23916" onMouseOver="hilite(23916)" onMouseOut="lolite()" onClick="logVariable('nviewed')" href="../../_variables/nviewed.html">$nviewed</a>      = 0;
<a name="l286"><span class="linenum"> 286</span></a>      <a class="var it1634" onMouseOver="hilite(1634)" onMouseOut="lolite()" onClick="logVariable('score')" href="../../_variables/score.html">$score</a>        = 0;
<a name="l287"><span class="linenum"> 287</span></a>      <a class="var it10080" onMouseOver="hilite(10080)" onMouseOut="lolite()" onClick="logVariable('nmanual')" href="../../_variables/nmanual.html">$nmanual</a>      = 0;
<a name="l288"><span class="linenum"> 288</span></a>      <a class="var it10082" onMouseOver="hilite(10082)" onMouseOut="lolite()" onClick="logVariable('manualpoints')" href="../../_variables/manualpoints.html">$manualpoints</a> = 0;
<a name="l289"><span class="linenum"> 289</span></a>      <a class="var it23917" onMouseOver="hilite(23917)" onMouseOut="lolite()" onClick="logVariable('thegrade')" href="../../_variables/thegrade.html">$thegrade</a>     = 0;
<a name="l290"><span class="linenum"> 290</span></a>      <a class="var it10076" onMouseOver="hilite(10076)" onMouseOut="lolite()" onClick="logVariable('nquestions')" href="../../_variables/nquestions.html">$nquestions</a>   = 0;
<a name="l291"><span class="linenum"> 291</span></a>      <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a>        = 0;
<a name="l292"><span class="linenum"> 292</span></a>      <a class="var it9373" onMouseOver="hilite(9373)" onMouseOut="lolite()" onClick="logVariable('earned')" href="../../_variables/earned.html">$earned</a>       = 0;
<a name="l293"><span class="linenum"> 293</span></a>  
<a name="l294"><span class="linenum"> 294</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array (&quot;lessonid&quot; =&gt; <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;userid&quot; =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, &quot;retry&quot; =&gt; <a class="var it9371" onMouseOver="hilite(9371)" onMouseOut="lolite()" onClick="logVariable('ntries')" href="../../_variables/ntries.html">$ntries</a>);
<a name="l295"><span class="linenum"> 295</span></a>      if (<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('useranswers')" href="../../_variables/useranswers.html">$useranswers</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;lesson_attempts&quot;,  &quot;lessonid = :lessonid AND
<a name="l296"><span class="linenum"> 296</span></a>              userid = :userid AND retry = :retry&quot;, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, &quot;timeseen&quot;)) {
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">        // group each try with its page</span>
<a name="l298"><span class="linenum"> 298</span></a>          <a class="var it23918" onMouseOver="hilite(23918)" onMouseOut="lolite()" onClick="logVariable('attemptset')" href="../../_variables/attemptset.html">$attemptset</a> = array();
<a name="l299"><span class="linenum"> 299</span></a>          foreach (<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('useranswers')" href="../../_variables/useranswers.html">$useranswers</a> as <a class="var it1770" onMouseOver="hilite(1770)" onMouseOut="lolite()" onClick="logVariable('useranswer')" href="../../_variables/useranswer.html">$useranswer</a>) {
<a name="l300"><span class="linenum"> 300</span></a>              <a class="var it23918" onMouseOver="hilite(23918)" onMouseOut="lolite()" onClick="logVariable('attemptset')" href="../../_variables/attemptset.html">$attemptset</a>[<a class="var it1770" onMouseOver="hilite(1770)" onMouseOut="lolite()" onClick="logVariable('useranswer')" href="../../_variables/useranswer.html">$useranswer</a>-&gt;<a onClick="logVariable('pageid')" class="var it41573" onMouseOver="hilite(41573)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>][] = <a class="var it1770" onMouseOver="hilite(1770)" onMouseOut="lolite()" onClick="logVariable('useranswer')" href="../../_variables/useranswer.html">$useranswer</a>;
<a name="l301"><span class="linenum"> 301</span></a>          }
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">        // Drop all attempts that go beyond max attempts for the lesson</span>
<a name="l304"><span class="linenum"> 304</span></a>          foreach (<a class="var it23918" onMouseOver="hilite(23918)" onMouseOut="lolite()" onClick="logVariable('attemptset')" href="../../_variables/attemptset.html">$attemptset</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it5567" onMouseOver="hilite(5567)" onMouseOut="lolite()" onClick="logVariable('set')" href="../../_variables/set.html">$set</a>) {
<a name="l305"><span class="linenum"> 305</span></a>              <a class="var it23918" onMouseOver="hilite(23918)" onMouseOut="lolite()" onClick="logVariable('attemptset')" href="../../_variables/attemptset.html">$attemptset</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] = <a class="phpfunction" onClick="logFunction('array_slice')" href="../../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it5567" onMouseOver="hilite(5567)" onMouseOut="lolite()" onClick="logVariable('set')" href="../../_variables/set.html">$set</a>, 0, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>);
<a name="l306"><span class="linenum"> 306</span></a>          }
<a name="l307"><span class="linenum"> 307</span></a>  
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">        // get only the pages and their answers that the user answered</span>
<a name="l309"><span class="linenum"> 309</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2909" onMouseOver="hilite(2909)" onMouseOut="lolite()" onClick="logVariable('usql')" href="../../_variables/usql.html">$usql</a>, <a class="var it343" onMouseOver="hilite(343)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it23918" onMouseOver="hilite(23918)" onMouseOut="lolite()" onClick="logVariable('attemptset')" href="../../_variables/attemptset.html">$attemptset</a>));
<a name="l310"><span class="linenum"> 310</span></a>          <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>(<a class="var it343" onMouseOver="hilite(343)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a>, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l311"><span class="linenum"> 311</span></a>          <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;lesson_pages&quot;, &quot;lessonid = ? AND id <a class="var it2909" onMouseOver="hilite(2909)" onMouseOut="lolite()" onClick="logVariable('usql')" href="../../_variables/usql.html">$usql</a>&quot;, <a class="var it343" onMouseOver="hilite(343)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a>);
<a name="l312"><span class="linenum"> 312</span></a>          <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;lesson_answers&quot;, &quot;lessonid = ? AND pageid <a class="var it2909" onMouseOver="hilite(2909)" onMouseOut="lolite()" onClick="logVariable('usql')" href="../../_variables/usql.html">$usql</a>&quot;, <a class="var it343" onMouseOver="hilite(343)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a>);
<a name="l313"><span class="linenum"> 313</span></a>  
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">        // Number of pages answered</span>
<a name="l315"><span class="linenum"> 315</span></a>          <a class="var it10076" onMouseOver="hilite(10076)" onMouseOut="lolite()" onClick="logVariable('nquestions')" href="../../_variables/nquestions.html">$nquestions</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>);
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>          foreach (<a class="var it23918" onMouseOver="hilite(23918)" onMouseOut="lolite()" onClick="logVariable('attemptset')" href="../../_variables/attemptset.html">$attemptset</a> as <a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>) {
<a name="l318"><span class="linenum"> 318</span></a>              <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = lesson_page::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>)-&gt;pageid], <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l319"><span class="linenum"> 319</span></a>              if (<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('custom')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/custom.html">custom</a>) {
<a name="l320"><span class="linenum"> 320</span></a>                  <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a> = <a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>);
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">                // If essay question, handle it, otherwise add to score</span>
<a name="l322"><span class="linenum"> 322</span></a>                  if (<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('requires_manual_grading')" href="../../_functions/requires_manual_grading.html" onMouseOver="funcPopup(event,'requires_manual_grading')">requires_manual_grading</a>()) {
<a name="l323"><span class="linenum"> 323</span></a>                      <a class="var it23919" onMouseOver="hilite(23919)" onMouseOut="lolite()" onClick="logVariable('useranswerobj')" href="../../_variables/useranswerobj.html">$useranswerobj</a> = <a class="phpfunction" onClick="logFunction('unserialize')" href="../../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('useranswer')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/useranswer.html">useranswer</a>);
<a name="l324"><span class="linenum"> 324</span></a>                      if (isset(<a class="var it23919" onMouseOver="hilite(23919)" onMouseOut="lolite()" onClick="logVariable('useranswerobj')" href="../../_variables/useranswerobj.html">$useranswerobj</a>-&gt;<a onClick="logVariable('score')" class="var it41635" onMouseOver="hilite(41635)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>)) {
<a name="l325"><span class="linenum"> 325</span></a>                          <a class="var it9373" onMouseOver="hilite(9373)" onMouseOut="lolite()" onClick="logVariable('earned')" href="../../_variables/earned.html">$earned</a> += <a class="var it23919" onMouseOver="hilite(23919)" onMouseOut="lolite()" onClick="logVariable('useranswerobj')" href="../../_variables/useranswerobj.html">$useranswerobj</a>-&gt;<a onClick="logVariable('score')" class="var it41635" onMouseOver="hilite(41635)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>;
<a name="l326"><span class="linenum"> 326</span></a>                      }
<a name="l327"><span class="linenum"> 327</span></a>                      <a class="var it10080" onMouseOver="hilite(10080)" onMouseOut="lolite()" onClick="logVariable('nmanual')" href="../../_variables/nmanual.html">$nmanual</a>++;
<a name="l328"><span class="linenum"> 328</span></a>                      <a class="var it10082" onMouseOver="hilite(10082)" onMouseOut="lolite()" onClick="logVariable('manualpoints')" href="../../_variables/manualpoints.html">$manualpoints</a> += <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>[<a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('answerid')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a>]-&gt;score;
<a name="l329"><span class="linenum"> 329</span></a>                  } else if (!empty(<a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('answerid')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a>)) {
<a name="l330"><span class="linenum"> 330</span></a>                      <a class="var it9373" onMouseOver="hilite(9373)" onMouseOut="lolite()" onClick="logVariable('earned')" href="../../_variables/earned.html">$earned</a> += <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('earned_score')" href="../../_functions/earned_score.html" onMouseOver="funcPopup(event,'earned_score')">earned_score</a>(<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>, <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>);
<a name="l331"><span class="linenum"> 331</span></a>                  }
<a name="l332"><span class="linenum"> 332</span></a>              } else {
<a name="l333"><span class="linenum"> 333</span></a>                  foreach (<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> as <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>) {
<a name="l334"><span class="linenum"> 334</span></a>                      <a class="var it9373" onMouseOver="hilite(9373)" onMouseOut="lolite()" onClick="logVariable('earned')" href="../../_variables/earned.html">$earned</a> += <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('correct')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/correct.html">correct</a>;
<a name="l335"><span class="linenum"> 335</span></a>                  }
<a name="l336"><span class="linenum"> 336</span></a>                  <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a> = <a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>); <span class="comment">// doesn't matter which one</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">                // If essay question, increase numbers</span>
<a name="l338"><span class="linenum"> 338</span></a>                  if (<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('requires_manual_grading')" href="../../_functions/requires_manual_grading.html" onMouseOver="funcPopup(event,'requires_manual_grading')">requires_manual_grading</a>()) {
<a name="l339"><span class="linenum"> 339</span></a>                      <a class="var it10080" onMouseOver="hilite(10080)" onMouseOut="lolite()" onClick="logVariable('nmanual')" href="../../_variables/nmanual.html">$nmanual</a>++;
<a name="l340"><span class="linenum"> 340</span></a>                      <a class="var it10082" onMouseOver="hilite(10082)" onMouseOut="lolite()" onClick="logVariable('manualpoints')" href="../../_variables/manualpoints.html">$manualpoints</a>++;
<a name="l341"><span class="linenum"> 341</span></a>                  }
<a name="l342"><span class="linenum"> 342</span></a>              }
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">            // Number of times answered</span>
<a name="l344"><span class="linenum"> 344</span></a>              <a class="var it23916" onMouseOver="hilite(23916)" onMouseOut="lolite()" onClick="logVariable('nviewed')" href="../../_variables/nviewed.html">$nviewed</a> += <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>);
<a name="l345"><span class="linenum"> 345</span></a>          }
<a name="l346"><span class="linenum"> 346</span></a>  
<a name="l347"><span class="linenum"> 347</span></a>          if (<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('custom')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/custom.html">custom</a>) {
<a name="l348"><span class="linenum"> 348</span></a>              <a class="var it23920" onMouseOver="hilite(23920)" onMouseOut="lolite()" onClick="logVariable('bestscores')" href="../../_variables/bestscores.html">$bestscores</a> = array();
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">            // Find the highest possible score per page to get our total</span>
<a name="l350"><span class="linenum"> 350</span></a>              foreach (<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> as <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>) {
<a name="l351"><span class="linenum"> 351</span></a>                  if(!isset(<a class="var it23920" onMouseOver="hilite(23920)" onMouseOut="lolite()" onClick="logVariable('bestscores')" href="../../_variables/bestscores.html">$bestscores</a>[<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('pageid')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>])) {
<a name="l352"><span class="linenum"> 352</span></a>                      <a class="var it23920" onMouseOver="hilite(23920)" onMouseOut="lolite()" onClick="logVariable('bestscores')" href="../../_variables/bestscores.html">$bestscores</a>[<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('pageid')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>] = <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>;
<a name="l353"><span class="linenum"> 353</span></a>                  } else if (<a class="var it23920" onMouseOver="hilite(23920)" onMouseOut="lolite()" onClick="logVariable('bestscores')" href="../../_variables/bestscores.html">$bestscores</a>[<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('pageid')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>] &lt; <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>) {
<a name="l354"><span class="linenum"> 354</span></a>                      <a class="var it23920" onMouseOver="hilite(23920)" onMouseOut="lolite()" onClick="logVariable('bestscores')" href="../../_variables/bestscores.html">$bestscores</a>[<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('pageid')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>] = <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>;
<a name="l355"><span class="linenum"> 355</span></a>                  }
<a name="l356"><span class="linenum"> 356</span></a>              }
<a name="l357"><span class="linenum"> 357</span></a>              <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a> = <a class="phpfunction" onClick="logFunction('array_sum')" href="../../_functions/array_sum.html" onMouseOver="phpfuncPopup(event,'array_sum')">array_sum</a>(<a class="var it23920" onMouseOver="hilite(23920)" onMouseOut="lolite()" onClick="logVariable('bestscores')" href="../../_variables/bestscores.html">$bestscores</a>);
<a name="l358"><span class="linenum"> 358</span></a>          } else {
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">            // Check to make sure the student has answered the minimum questions</span>
<a name="l360"><span class="linenum"> 360</span></a>              if (<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('minquestions')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/minquestions.html">minquestions</a> and <a class="var it10076" onMouseOver="hilite(10076)" onMouseOut="lolite()" onClick="logVariable('nquestions')" href="../../_variables/nquestions.html">$nquestions</a> &lt; <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('minquestions')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/minquestions.html">minquestions</a>) {
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">                // Nope, increase number viewed by the amount of unanswered questions</span>
<a name="l362"><span class="linenum"> 362</span></a>                  <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a> =  <a class="var it23916" onMouseOver="hilite(23916)" onMouseOut="lolite()" onClick="logVariable('nviewed')" href="../../_variables/nviewed.html">$nviewed</a> + (<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('minquestions')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/minquestions.html">minquestions</a> - <a class="var it10076" onMouseOver="hilite(10076)" onMouseOut="lolite()" onClick="logVariable('nquestions')" href="../../_variables/nquestions.html">$nquestions</a>);
<a name="l363"><span class="linenum"> 363</span></a>              } else {
<a name="l364"><span class="linenum"> 364</span></a>                  <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a> = <a class="var it23916" onMouseOver="hilite(23916)" onMouseOut="lolite()" onClick="logVariable('nviewed')" href="../../_variables/nviewed.html">$nviewed</a>;
<a name="l365"><span class="linenum"> 365</span></a>              }
<a name="l366"><span class="linenum"> 366</span></a>          }
<a name="l367"><span class="linenum"> 367</span></a>      }
<a name="l368"><span class="linenum"> 368</span></a>  
<a name="l369"><span class="linenum"> 369</span></a>      if (<a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a>) { // not zero
<a name="l370"><span class="linenum"> 370</span></a>          <a class="var it23917" onMouseOver="hilite(23917)" onMouseOut="lolite()" onClick="logVariable('thegrade')" href="../../_variables/thegrade.html">$thegrade</a> = <a class="phpfunction" onClick="logFunction('round')" href="../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(100 * <a class="var it9373" onMouseOver="hilite(9373)" onMouseOut="lolite()" onClick="logVariable('earned')" href="../../_variables/earned.html">$earned</a> / <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a>, 5);
<a name="l371"><span class="linenum"> 371</span></a>      }
<a name="l372"><span class="linenum"> 372</span></a>  
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">    // Build the grade information object</span>
<a name="l374"><span class="linenum"> 374</span></a>      <a class="var it9372" onMouseOver="hilite(9372)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>               = new stdClass;
<a name="l375"><span class="linenum"> 375</span></a>      <a class="var it9372" onMouseOver="hilite(9372)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('nquestions')" class="var it41621" onMouseOver="hilite(41621)" onMouseOut="lolite()" href="../../_variables/nquestions.html">nquestions</a>   = <a class="var it10076" onMouseOver="hilite(10076)" onMouseOut="lolite()" onClick="logVariable('nquestions')" href="../../_variables/nquestions.html">$nquestions</a>;
<a name="l376"><span class="linenum"> 376</span></a>      <a class="var it9372" onMouseOver="hilite(9372)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('attempts')" class="var it41621" onMouseOver="hilite(41621)" onMouseOut="lolite()" href="../../_variables/attempts.html">attempts</a>     = <a class="var it23916" onMouseOver="hilite(23916)" onMouseOut="lolite()" onClick="logVariable('nviewed')" href="../../_variables/nviewed.html">$nviewed</a>;
<a name="l377"><span class="linenum"> 377</span></a>      <a class="var it9372" onMouseOver="hilite(9372)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('total')" class="var it41621" onMouseOver="hilite(41621)" onMouseOut="lolite()" href="../../_variables/total.html">total</a>        = <a class="var it364" onMouseOver="hilite(364)" onMouseOut="lolite()" onClick="logVariable('total')" href="../../_variables/total.html">$total</a>;
<a name="l378"><span class="linenum"> 378</span></a>      <a class="var it9372" onMouseOver="hilite(9372)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('earned')" class="var it41621" onMouseOver="hilite(41621)" onMouseOut="lolite()" href="../../_variables/earned.html">earned</a>       = <a class="var it9373" onMouseOver="hilite(9373)" onMouseOut="lolite()" onClick="logVariable('earned')" href="../../_variables/earned.html">$earned</a>;
<a name="l379"><span class="linenum"> 379</span></a>      <a class="var it9372" onMouseOver="hilite(9372)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('grade')" class="var it41621" onMouseOver="hilite(41621)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>        = <a class="var it23917" onMouseOver="hilite(23917)" onMouseOut="lolite()" onClick="logVariable('thegrade')" href="../../_variables/thegrade.html">$thegrade</a>;
<a name="l380"><span class="linenum"> 380</span></a>      <a class="var it9372" onMouseOver="hilite(9372)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('nmanual')" class="var it41621" onMouseOver="hilite(41621)" onMouseOut="lolite()" href="../../_variables/nmanual.html">nmanual</a>      = <a class="var it10080" onMouseOver="hilite(10080)" onMouseOut="lolite()" onClick="logVariable('nmanual')" href="../../_variables/nmanual.html">$nmanual</a>;
<a name="l381"><span class="linenum"> 381</span></a>      <a class="var it9372" onMouseOver="hilite(9372)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>-&gt;<a onClick="logVariable('manualpoints')" class="var it41621" onMouseOver="hilite(41621)" onMouseOut="lolite()" href="../../_variables/manualpoints.html">manualpoints</a> = <a class="var it10082" onMouseOver="hilite(10082)" onMouseOut="lolite()" onClick="logVariable('manualpoints')" href="../../_variables/manualpoints.html">$manualpoints</a>;
<a name="l382"><span class="linenum"> 382</span></a>  
<a name="l383"><span class="linenum"> 383</span></a>      return <a class="var it9372" onMouseOver="hilite(9372)" onMouseOut="lolite()" onClick="logVariable('gradeinfo')" href="../../_variables/gradeinfo.html">$gradeinfo</a>;
<a name="l384"><span class="linenum"> 384</span></a>  }
<a name="l385"><span class="linenum"> 385</span></a>  
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">/**</span>
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment"> * Determines if a user can view the left menu.  The determining factor</span>
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment"> * is whether a user has a grade greater than or equal to the lesson setting</span>
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment"> * of displayleftif</span>
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment"> *</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment"> * @param object $lesson Lesson object of the current lesson</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment"> * @return boolean 0 if the user cannot see, or $lesson-&gt;displayleft to keep displayleft unchanged</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment"> **/</span>
<a name="l394"><span class="linenum"> 394</span></a>  function <a class="function" onClick="logFunction('lesson_displayleftif')" href="../../_functions/lesson_displayleftif.html" onMouseOver="funcPopup(event,'lesson_displayleftif')">lesson_displayleftif</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l395"><span class="linenum"> 395</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l396"><span class="linenum"> 396</span></a>  
<a name="l397"><span class="linenum"> 397</span></a>      if (!empty(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('displayleftif')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/displayleftif.html">displayleftif</a>)) {
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment">        // get the current user's max grade for this lesson</span>
<a name="l399"><span class="linenum"> 399</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array (&quot;userid&quot; =&gt; <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;lessonid&quot; =&gt; <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l400"><span class="linenum"> 400</span></a>          if (<a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('maxgrade')" href="../../_variables/maxgrade.html">$maxgrade</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>('SELECT userid, <a class="phpfunction" onClick="logFunction('MAX')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(grade) AS maxgrade FROM {lesson_grades} WHERE userid = :userid AND lessonid = :lessonid GROUP BY userid', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l401"><span class="linenum"> 401</span></a>              if (<a class="var it5553" onMouseOver="hilite(5553)" onMouseOut="lolite()" onClick="logVariable('maxgrade')" href="../../_variables/maxgrade.html">$maxgrade</a>-&gt;<a onClick="logVariable('maxgrade')" class="var it41636" onMouseOver="hilite(41636)" onMouseOut="lolite()" href="../../_variables/maxgrade.html">maxgrade</a> &lt; <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('displayleftif')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/displayleftif.html">displayleftif</a>) {
<a name="l402"><span class="linenum"> 402</span></a>                  return 0;  <span class="comment">// turn off the displayleft</span>
<a name="l403"><span class="linenum"> 403</span></a>              }
<a name="l404"><span class="linenum"> 404</span></a>          } else {
<a name="l405"><span class="linenum"> 405</span></a>              return 0; <span class="comment">// no grades</span>
<a name="l406"><span class="linenum"> 406</span></a>          }
<a name="l407"><span class="linenum"> 407</span></a>      }
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">    // if we get to here, keep the original state of displayleft lesson setting</span>
<a name="l410"><span class="linenum"> 410</span></a>      return <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('displayleft')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/displayleft.html">displayleft</a>;
<a name="l411"><span class="linenum"> 411</span></a>  }
<a name="l412"><span class="linenum"> 412</span></a>  
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">/**</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment"> *</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment"> * @param $cm</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment"> * @param $lesson</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment"> * @param $page</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment"> * @return unknown_type</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment"> */</span>
<a name="l420"><span class="linenum"> 420</span></a>  function <a class="function" onClick="logFunction('lesson_add_fake_blocks')" href="../../_functions/lesson_add_fake_blocks.html" onMouseOver="funcPopup(event,'lesson_add_fake_blocks')">lesson_add_fake_blocks</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a> = null) {
<a name="l421"><span class="linenum"> 421</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a> = <a class="function" onClick="logFunction('lesson_menu_block_contents')" href="../../_functions/lesson_menu_block_contents.html" onMouseOver="funcPopup(event,'lesson_menu_block_contents')">lesson_menu_block_contents</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l422"><span class="linenum"> 422</span></a>      if (!empty(<a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>)) {
<a name="l423"><span class="linenum"> 423</span></a>          <a class="var it1191" onMouseOver="hilite(1191)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../../_variables/regions.html">$regions</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('get_regions')" href="../../_functions/get_regions.html" onMouseOver="funcPopup(event,'get_regions')">get_regions</a>();
<a name="l424"><span class="linenum"> 424</span></a>          <a class="var it23922" onMouseOver="hilite(23922)" onMouseOut="lolite()" onClick="logVariable('firstregion')" href="../../_variables/firstregion.html">$firstregion</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it1191" onMouseOver="hilite(1191)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../../_variables/regions.html">$regions</a>);
<a name="l425"><span class="linenum"> 425</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_fake_block')" href="../../_functions/add_fake_block.html" onMouseOver="funcPopup(event,'add_fake_block')">add_fake_block</a>(<a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>, <a class="var it23922" onMouseOver="hilite(23922)" onMouseOut="lolite()" onClick="logVariable('firstregion')" href="../../_variables/firstregion.html">$firstregion</a>);
<a name="l426"><span class="linenum"> 426</span></a>      }
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a> = <a class="function" onClick="logFunction('lesson_mediafile_block_contents')" href="../../_functions/lesson_mediafile_block_contents.html" onMouseOver="funcPopup(event,'lesson_mediafile_block_contents')">lesson_mediafile_block_contents</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l429"><span class="linenum"> 429</span></a>      if (!empty(<a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>)) {
<a name="l430"><span class="linenum"> 430</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_fake_block')" href="../../_functions/add_fake_block.html" onMouseOver="funcPopup(event,'add_fake_block')">add_fake_block</a>(<a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('get_default_region')" href="../../_functions/get_default_region.html" onMouseOver="funcPopup(event,'get_default_region')">get_default_region</a>());
<a name="l431"><span class="linenum"> 431</span></a>      }
<a name="l432"><span class="linenum"> 432</span></a>  
<a name="l433"><span class="linenum"> 433</span></a>      if (!empty(<a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>)) {
<a name="l434"><span class="linenum"> 434</span></a>          <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a> = <a class="function" onClick="logFunction('lesson_clock_block_contents')" href="../../_functions/lesson_clock_block_contents.html" onMouseOver="funcPopup(event,'lesson_clock_block_contents')">lesson_clock_block_contents</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>);
<a name="l435"><span class="linenum"> 435</span></a>          if (!empty(<a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>)) {
<a name="l436"><span class="linenum"> 436</span></a>              <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_fake_block')" href="../../_functions/add_fake_block.html" onMouseOver="funcPopup(event,'add_fake_block')">add_fake_block</a>(<a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('get_default_region')" href="../../_functions/get_default_region.html" onMouseOver="funcPopup(event,'get_default_region')">get_default_region</a>());
<a name="l437"><span class="linenum"> 437</span></a>          }
<a name="l438"><span class="linenum"> 438</span></a>      }
<a name="l439"><span class="linenum"> 439</span></a>  }
<a name="l440"><span class="linenum"> 440</span></a>  
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">/**</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment"> * If there is a media file associated with this</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment"> * lesson, return a block_contents that displays it.</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment"> *</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment"> * @param int $cmid Course Module ID for this lesson</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment"> * @param object $lesson Full lesson record object</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment"> * @return block_contents</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment"> **/</span>
<a name="l449"><span class="linenum"> 449</span></a>  function <a class="function" onClick="logFunction('lesson_mediafile_block_contents')" href="../../_functions/lesson_mediafile_block_contents.html" onMouseOver="funcPopup(event,'lesson_mediafile_block_contents')">lesson_mediafile_block_contents</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l450"><span class="linenum"> 450</span></a>      global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l451"><span class="linenum"> 451</span></a>      if (empty(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediafile')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/mediafile.html">mediafile</a>)) {
<a name="l452"><span class="linenum"> 452</span></a>          return null;
<a name="l453"><span class="linenum"> 453</span></a>      }
<a name="l454"><span class="linenum"> 454</span></a>  
<a name="l455"><span class="linenum"> 455</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array();
<a name="l456"><span class="linenum"> 456</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['menubar'] = 0;
<a name="l457"><span class="linenum"> 457</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['location'] = 0;
<a name="l458"><span class="linenum"> 458</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['left'] = 5;
<a name="l459"><span class="linenum"> 459</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['top'] = 5;
<a name="l460"><span class="linenum"> 460</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['scrollbars'] = 1;
<a name="l461"><span class="linenum"> 461</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['resizable'] = 1;
<a name="l462"><span class="linenum"> 462</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['width'] = <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediawidth')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/mediawidth.html">mediawidth</a>;
<a name="l463"><span class="linenum"> 463</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['height'] = <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediaheight')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/mediaheight.html">mediaheight</a>;
<a name="l464"><span class="linenum"> 464</span></a>  
<a name="l465"><span class="linenum"> 465</span></a>      <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/mod/lesson/mediafile.php?id='.<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>);
<a name="l466"><span class="linenum"> 466</span></a>      <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = <span class="keyword">new </span><a class="class" onClick="logClass('popup_action')" href="../../_classes/popup_action.html" onMouseOver="classPopup(event,'popup_action')">popup_action</a>('click', <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>, 'lessonmediafile', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l467"><span class="linenum"> 467</span></a>      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('action_link')" href="../../_functions/action_link.html" onMouseOver="funcPopup(event,'action_link')">action_link</a>(<a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('mediafilepopup', 'lesson'), <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>, array('title'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('mediafilepopup', 'lesson')));
<a name="l468"><span class="linenum"> 468</span></a>  
<a name="l469"><span class="linenum"> 469</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a> = <span class="keyword">new </span><a class="class" onClick="logClass('block_contents')" href="../../_classes/block_contents.html" onMouseOver="classPopup(event,'block_contents')">block_contents</a>();
<a name="l470"><span class="linenum"> 470</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('title')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('linkedmedia', 'lesson');
<a name="l471"><span class="linenum"> 471</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../../_variables/attributes.html">attributes</a>['class'] = 'mediafile block';
<a name="l472"><span class="linenum"> 472</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('content')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>;
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>      return <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>;
<a name="l475"><span class="linenum"> 475</span></a>  }
<a name="l476"><span class="linenum"> 476</span></a>  
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">/**</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment"> * If a timed lesson and not a teacher, then</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment"> * return a block_contents containing the clock.</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment"> *</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment"> * @param int $cmid Course Module ID for this lesson</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment"> * @param object $lesson Full lesson record object</span>
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment"> * @param object $timer Full timer record object</span>
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment"> * @return block_contents</span>
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment"> **/</span>
<a name="l486"><span class="linenum"> 486</span></a>  function <a class="function" onClick="logFunction('lesson_clock_block_contents')" href="../../_functions/lesson_clock_block_contents.html" onMouseOver="funcPopup(event,'lesson_clock_block_contents')">lesson_clock_block_contents</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment">    // Display for timed lessons and for students only</span>
<a name="l488"><span class="linenum"> 488</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>);
<a name="l489"><span class="linenum"> 489</span></a>      if (<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('timelimit')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a> == 0 || <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/lesson:manage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l490"><span class="linenum"> 490</span></a>          return null;
<a name="l491"><span class="linenum"> 491</span></a>      }
<a name="l492"><span class="linenum"> 492</span></a>  
<a name="l493"><span class="linenum"> 493</span></a>      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = '&lt;div id=&quot;lesson-timer&quot;&gt;';
<a name="l494"><span class="linenum"> 494</span></a>      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> .=  <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('time_remaining')" href="../../_functions/time_remaining.html" onMouseOver="funcPopup(event,'time_remaining')">time_remaining</a>(<a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('starttime')" class="var it41617" onMouseOver="hilite(41617)" onMouseOut="lolite()" href="../../_variables/starttime.html">starttime</a>);
<a name="l495"><span class="linenum"> 495</span></a>      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> .= '&lt;/div&gt;';
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>      <a class="var it23925" onMouseOver="hilite(23925)" onMouseOut="lolite()" onClick="logVariable('clocksettings')" href="../../_variables/clocksettings.html">$clocksettings</a> = array('starttime' =&gt; <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('starttime')" class="var it41617" onMouseOver="hilite(41617)" onMouseOut="lolite()" href="../../_variables/starttime.html">starttime</a>, 'servertime' =&gt; <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), 'testlength' =&gt; <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('timelimit')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a>);
<a name="l498"><span class="linenum"> 498</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('requires')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('data_for_js')" href="../../_functions/data_for_js.html" onMouseOver="funcPopup(event,'data_for_js')">data_for_js</a>('clocksettings', <a class="var it23925" onMouseOver="hilite(23925)" onMouseOut="lolite()" onClick="logVariable('clocksettings')" href="../../_variables/clocksettings.html">$clocksettings</a>, true);
<a name="l499"><span class="linenum"> 499</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('requires')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('strings_for_js')" href="../../_functions/strings_for_js.html" onMouseOver="funcPopup(event,'strings_for_js')">strings_for_js</a>(array('timeisup'), 'lesson');
<a name="l500"><span class="linenum"> 500</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('requires')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js')" href="../../_functions/js.html" onMouseOver="funcPopup(event,'js')">js</a>('<a class="filename" href="../../mod/lesson/timer.js.html">/mod/lesson/timer.js</a>');
<a name="l501"><span class="linenum"> 501</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('requires')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js_init_call')" href="../../_functions/js_init_call.html" onMouseOver="funcPopup(event,'js_init_call')">js_init_call</a>('show_clock');
<a name="l502"><span class="linenum"> 502</span></a>  
<a name="l503"><span class="linenum"> 503</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a> = <span class="keyword">new </span><a class="class" onClick="logClass('block_contents')" href="../../_classes/block_contents.html" onMouseOver="classPopup(event,'block_contents')">block_contents</a>();
<a name="l504"><span class="linenum"> 504</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('title')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('timeremaining', 'lesson');
<a name="l505"><span class="linenum"> 505</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../../_variables/attributes.html">attributes</a>['class'] = 'clock block';
<a name="l506"><span class="linenum"> 506</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('content')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>;
<a name="l507"><span class="linenum"> 507</span></a>  
<a name="l508"><span class="linenum"> 508</span></a>      return <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>;
<a name="l509"><span class="linenum"> 509</span></a>  }
<a name="l510"><span class="linenum"> 510</span></a>  
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">/**</span>
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment"> * If left menu is turned on, then this will</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment"> * print the menu in a block</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment"> *</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment"> * @param int $cmid Course Module ID for this lesson</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment"> * @param lesson $lesson Full lesson record object</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment"> * @return void</span>
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment"> **/</span>
<a name="l519"><span class="linenum"> 519</span></a>  function <a class="function" onClick="logFunction('lesson_menu_block_contents')" href="../../_functions/lesson_menu_block_contents.html" onMouseOver="funcPopup(event,'lesson_menu_block_contents')">lesson_menu_block_contents</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l520"><span class="linenum"> 520</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l521"><span class="linenum"> 521</span></a>  
<a name="l522"><span class="linenum"> 522</span></a>      if (!<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('displayleft')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/displayleft.html">displayleft</a>) {
<a name="l523"><span class="linenum"> 523</span></a>          return null;
<a name="l524"><span class="linenum"> 524</span></a>      }
<a name="l525"><span class="linenum"> 525</span></a>  
<a name="l526"><span class="linenum"> 526</span></a>      <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l527"><span class="linenum"> 527</span></a>      foreach (<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l528"><span class="linenum"> 528</span></a>          if ((int)<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> === 0) {
<a name="l529"><span class="linenum"> 529</span></a>              <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l530"><span class="linenum"> 530</span></a>              break;
<a name="l531"><span class="linenum"> 531</span></a>          }
<a name="l532"><span class="linenum"> 532</span></a>      }
<a name="l533"><span class="linenum"> 533</span></a>      <a class="var it23926" onMouseOver="hilite(23926)" onMouseOut="lolite()" onClick="logVariable('currentpageid')" href="../../_variables/currentpageid.html">$currentpageid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('pageid', <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l534"><span class="linenum"> 534</span></a>  
<a name="l535"><span class="linenum"> 535</span></a>      if (!<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> || !<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>) {
<a name="l536"><span class="linenum"> 536</span></a>          return null;
<a name="l537"><span class="linenum"> 537</span></a>      }
<a name="l538"><span class="linenum"> 538</span></a>  
<a name="l539"><span class="linenum"> 539</span></a>      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = '&lt;a href=&quot;#maincontent&quot; class=&quot;skip&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('skip', 'lesson').&quot;&lt;/a&gt;\n&lt;div class=\&quot;menuwrapper\&quot;&gt;\n&lt;ul&gt;\n&quot;;
<a name="l540"><span class="linenum"> 540</span></a>  
<a name="l541"><span class="linenum"> 541</span></a>      while (<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> != 0) {
<a name="l542"><span class="linenum"> 542</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>];
<a name="l543"><span class="linenum"> 543</span></a>  
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">        // Only process branch tables with display turned on</span>
<a name="l545"><span class="linenum"> 545</span></a>          if (<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('displayinmenublock')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/displayinmenublock.html">displayinmenublock</a> &amp;&amp; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('display')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/display.html">display</a>) {
<a name="l546"><span class="linenum"> 546</span></a>              if (<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it23926" onMouseOver="hilite(23926)" onMouseOut="lolite()" onClick="logVariable('currentpageid')" href="../../_variables/currentpageid.html">$currentpageid</a>) {
<a name="l547"><span class="linenum"> 547</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> .= '&lt;li class=&quot;selected&quot;&gt;'.<a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('title')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/title.html">title</a>,true).&quot;&lt;/li&gt;\n&quot;;
<a name="l548"><span class="linenum"> 548</span></a>              } else {
<a name="l549"><span class="linenum"> 549</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> .= &quot;&lt;li class=\&quot;notselected\&quot;&gt;&lt;a href=\&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/lesson/view.php?id=<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>&amp;amp;pageid=<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>\&quot;&gt;&quot;.<a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('title')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/title.html">title</a>,true).&quot;&lt;/a&gt;&lt;/li&gt;\n&quot;;
<a name="l550"><span class="linenum"> 550</span></a>              }
<a name="l551"><span class="linenum"> 551</span></a>  
<a name="l552"><span class="linenum"> 552</span></a>          }
<a name="l553"><span class="linenum"> 553</span></a>          <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a>;
<a name="l554"><span class="linenum"> 554</span></a>      }
<a name="l555"><span class="linenum"> 555</span></a>      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> .= &quot;&lt;/ul&gt;\n&lt;/div&gt;\n&quot;;
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a> = <span class="keyword">new </span><a class="class" onClick="logClass('block_contents')" href="../../_classes/block_contents.html" onMouseOver="classPopup(event,'block_contents')">block_contents</a>();
<a name="l558"><span class="linenum"> 558</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('title')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('lessonmenu', 'lesson');
<a name="l559"><span class="linenum"> 559</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../../_variables/attributes.html">attributes</a>['class'] = 'menu block';
<a name="l560"><span class="linenum"> 560</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('content')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>;
<a name="l561"><span class="linenum"> 561</span></a>  
<a name="l562"><span class="linenum"> 562</span></a>      return <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../_variables/bc.html">$bc</a>;
<a name="l563"><span class="linenum"> 563</span></a>  }
<a name="l564"><span class="linenum"> 564</span></a>  
<a name="l565"><span class="linenum"> 565</span></a>  <span class="comment">/**</span>
<a name="l566"><span class="linenum"> 566</span></a>  <span class="comment"> * Adds header buttons to the page for the lesson</span>
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment"> *</span>
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment"> * @param object $context</span>
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment"> * @param bool $extraeditbuttons</span>
<a name="l571"><span class="linenum"> 571</span></a>  <span class="comment"> * @param int $lessonpageid</span>
<a name="l572"><span class="linenum"> 572</span></a>  <span class="comment"> */</span>
<a name="l573"><span class="linenum"> 573</span></a>  function <a class="function" onClick="logFunction('lesson_add_header_buttons')" href="../../_functions/lesson_add_header_buttons.html" onMouseOver="funcPopup(event,'lesson_add_header_buttons')">lesson_add_header_buttons</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it9347" onMouseOver="hilite(9347)" onMouseOut="lolite()" onClick="logVariable('extraeditbuttons')" href="../../_variables/extraeditbuttons.html">$extraeditbuttons</a>=false, <a class="var it9348" onMouseOver="hilite(9348)" onMouseOut="lolite()" onClick="logVariable('lessonpageid')" href="../../_variables/lessonpageid.html">$lessonpageid</a>=null) {
<a name="l574"><span class="linenum"> 574</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l575"><span class="linenum"> 575</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/lesson:edit', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) &amp;&amp; <a class="var it9347" onMouseOver="hilite(9347)" onMouseOut="lolite()" onClick="logVariable('extraeditbuttons')" href="../../_variables/extraeditbuttons.html">$extraeditbuttons</a>) {
<a name="l576"><span class="linenum"> 576</span></a>          if (<a class="var it9348" onMouseOver="hilite(9348)" onMouseOut="lolite()" onClick="logVariable('lessonpageid')" href="../../_variables/lessonpageid.html">$lessonpageid</a> === null) {
<a name="l577"><span class="linenum"> 577</span></a>              <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidpageid', 'lesson');
<a name="l578"><span class="linenum"> 578</span></a>          }
<a name="l579"><span class="linenum"> 579</span></a>          if (!empty(<a class="var it9348" onMouseOver="hilite(9348)" onMouseOut="lolite()" onClick="logVariable('lessonpageid')" href="../../_variables/lessonpageid.html">$lessonpageid</a>) &amp;&amp; <a class="var it9348" onMouseOver="hilite(9348)" onMouseOut="lolite()" onClick="logVariable('lessonpageid')" href="../../_variables/lessonpageid.html">$lessonpageid</a> != <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>) {
<a name="l580"><span class="linenum"> 580</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/lesson/editpage.php.html">/mod/lesson/editpage.php</a>', array(
<a name="l581"><span class="linenum"> 581</span></a>                  'id'       =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l582"><span class="linenum"> 582</span></a>                  'pageid'   =&gt; <a class="var it9348" onMouseOver="hilite(9348)" onMouseOut="lolite()" onClick="logVariable('lessonpageid')" href="../../_variables/lessonpageid.html">$lessonpageid</a>,
<a name="l583"><span class="linenum"> 583</span></a>                  'edit'     =&gt; 1,
<a name="l584"><span class="linenum"> 584</span></a>                  'returnto' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/url.html">url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false)
<a name="l585"><span class="linenum"> 585</span></a>              ));
<a name="l586"><span class="linenum"> 586</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_button')" href="../../_functions/set_button.html" onMouseOver="funcPopup(event,'set_button')">set_button</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editpagecontent', 'lesson')));
<a name="l587"><span class="linenum"> 587</span></a>          }
<a name="l588"><span class="linenum"> 588</span></a>      }
<a name="l589"><span class="linenum"> 589</span></a>  }
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">/**</span>
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment"> * This is a function used to detect media types and generate html code.</span>
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment"> *</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment"> * @global object $CFG</span>
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment"> * @global object $PAGE</span>
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment"> * @param object $lesson</span>
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment"> * @param object $context</span>
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment"> * @return string $code the html code of media</span>
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment"> */</span>
<a name="l600"><span class="linenum"> 600</span></a>  function <a class="function" onClick="logFunction('lesson_get_media_html')" href="../../_functions/lesson_get_media_html.html" onMouseOver="funcPopup(event,'lesson_get_media_html')">lesson_get_media_html</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l601"><span class="linenum"> 601</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l602"><span class="linenum"> 602</span></a>      require_once(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/resourcelib.php&quot;);
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">    // get the media file link</span>
<a name="l605"><span class="linenum"> 605</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediafile')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/mediafile.html">mediafile</a>, '://') !== false) {
<a name="l606"><span class="linenum"> 606</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediafile')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/mediafile.html">mediafile</a>);
<a name="l607"><span class="linenum"> 607</span></a>      } else {
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment">        // the timemodified is used to prevent caching problems, instead of '/' we should better read from files table and use sortorder</span>
<a name="l609"><span class="linenum"> 609</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_pluginfile_url')" href="../../_functions/make_pluginfile_url.html" onMouseOver="funcPopup(event,'make_pluginfile_url')">make_pluginfile_url</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'mediafile', <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>, '/', <a class="phpfunction" onClick="logFunction('ltrim')" href="../../_functions/ltrim.html" onMouseOver="phpfuncPopup(event,'ltrim')">ltrim</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediafile')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/mediafile.html">mediafile</a>, '/'));
<a name="l610"><span class="linenum"> 610</span></a>      }
<a name="l611"><span class="linenum"> 611</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('mediafile')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/mediafile.html">mediafile</a>;
<a name="l612"><span class="linenum"> 612</span></a>  
<a name="l613"><span class="linenum"> 613</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('clicktoopen')" href="../../_variables/clicktoopen.html">$clicktoopen</a> = <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('download'));
<a name="l614"><span class="linenum"> 614</span></a>  
<a name="l615"><span class="linenum"> 615</span></a>      <a class="var it2542" onMouseOver="hilite(2542)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a> = <a class="function" onClick="logFunction('resourcelib_guess_url_mimetype')" href="../../_functions/resourcelib_guess_url_mimetype.html" onMouseOver="funcPopup(event,'resourcelib_guess_url_mimetype')">resourcelib_guess_url_mimetype</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>);
<a name="l616"><span class="linenum"> 616</span></a>  
<a name="l617"><span class="linenum"> 617</span></a>      <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a> = <a class="function" onClick="logFunction('resourcelib_get_extension')" href="../../_functions/resourcelib_get_extension.html" onMouseOver="funcPopup(event,'resourcelib_get_extension')">resourcelib_get_extension</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false));
<a name="l618"><span class="linenum"> 618</span></a>  
<a name="l619"><span class="linenum"> 619</span></a>      <a class="var it2294" onMouseOver="hilite(2294)" onMouseOut="lolite()" onClick="logVariable('mediarenderer')" href="../../_variables/mediarenderer.html">$mediarenderer</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'media');
<a name="l620"><span class="linenum"> 620</span></a>      <a class="var it12696" onMouseOver="hilite(12696)" onMouseOut="lolite()" onClick="logVariable('embedoptions')" href="../../_variables/embedoptions.html">$embedoptions</a> = array(
<a name="l621"><span class="linenum"> 621</span></a>          core_media::OPTION_TRUSTED =&gt; true,
<a name="l622"><span class="linenum"> 622</span></a>          core_media::OPTION_BLOCK =&gt; true
<a name="l623"><span class="linenum"> 623</span></a>      );
<a name="l624"><span class="linenum"> 624</span></a>  
<a name="l625"><span class="linenum"> 625</span></a>  <span class="comment">    // find the correct type and print it out</span>
<a name="l626"><span class="linenum"> 626</span></a>      if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it2542" onMouseOver="hilite(2542)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a>, array('image/gif','image/jpeg','image/png'))) {  // It's an image
<a name="l627"><span class="linenum"> 627</span></a>          <a class="var it2562" onMouseOver="hilite(2562)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> = <a class="function" onClick="logFunction('resourcelib_embed_image')" href="../../_functions/resourcelib_embed_image.html" onMouseOver="funcPopup(event,'resourcelib_embed_image')">resourcelib_embed_image</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>);
<a name="l628"><span class="linenum"> 628</span></a>  
<a name="l629"><span class="linenum"> 629</span></a>      } else if (<a class="var it2294" onMouseOver="hilite(2294)" onMouseOut="lolite()" onClick="logVariable('mediarenderer')" href="../../_variables/mediarenderer.html">$mediarenderer</a>-&gt;<a class="function" onClick="logFunction('can_embed_url')" href="../../_functions/can_embed_url.html" onMouseOver="funcPopup(event,'can_embed_url')">can_embed_url</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it12696" onMouseOver="hilite(12696)" onMouseOut="lolite()" onClick="logVariable('embedoptions')" href="../../_variables/embedoptions.html">$embedoptions</a>)) {
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">        // Media (audio/video) file.</span>
<a name="l631"><span class="linenum"> 631</span></a>          <a class="var it2562" onMouseOver="hilite(2562)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> = <a class="var it2294" onMouseOver="hilite(2294)" onMouseOut="lolite()" onClick="logVariable('mediarenderer')" href="../../_variables/mediarenderer.html">$mediarenderer</a>-&gt;<a class="function" onClick="logFunction('embed_url')" href="../../_functions/embed_url.html" onMouseOver="funcPopup(event,'embed_url')">embed_url</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>, 0, 0, <a class="var it12696" onMouseOver="hilite(12696)" onMouseOut="lolite()" onClick="logVariable('embedoptions')" href="../../_variables/embedoptions.html">$embedoptions</a>);
<a name="l632"><span class="linenum"> 632</span></a>  
<a name="l633"><span class="linenum"> 633</span></a>      } else {
<a name="l634"><span class="linenum"> 634</span></a>  <span class="comment">        // anything else - just try object tag enlarged as much as possible</span>
<a name="l635"><span class="linenum"> 635</span></a>          <a class="var it2562" onMouseOver="hilite(2562)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> = <a class="function" onClick="logFunction('resourcelib_embed_general')" href="../../_functions/resourcelib_embed_general.html" onMouseOver="funcPopup(event,'resourcelib_embed_general')">resourcelib_embed_general</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>, <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('clicktoopen')" href="../../_variables/clicktoopen.html">$clicktoopen</a>, <a class="var it2542" onMouseOver="hilite(2542)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a>);
<a name="l636"><span class="linenum"> 636</span></a>      }
<a name="l637"><span class="linenum"> 637</span></a>  
<a name="l638"><span class="linenum"> 638</span></a>      return <a class="var it2562" onMouseOver="hilite(2562)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a>;
<a name="l639"><span class="linenum"> 639</span></a>  }
<a name="l640"><span class="linenum"> 640</span></a>  
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">/**</span>
<a name="l642"><span class="linenum"> 642</span></a>  <span class="comment"> * Logic to happen when a/some group(s) has/have been deleted in a course.</span>
<a name="l643"><span class="linenum"> 643</span></a>  <span class="comment"> *</span>
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment"> * @param int $courseid The course ID.</span>
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment"> * @param int $groupid The group id if it is known</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment"> * @return void</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment"> */</span>
<a name="l648"><span class="linenum"> 648</span></a>  function <a class="function" onClick="logFunction('lesson_process_group_deleted_in_course')" href="../../_functions/lesson_process_group_deleted_in_course.html" onMouseOver="funcPopup(event,'lesson_process_group_deleted_in_course')">lesson_process_group_deleted_in_course</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = null) {
<a name="l649"><span class="linenum"> 649</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l650"><span class="linenum"> 650</span></a>  
<a name="l651"><span class="linenum"> 651</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('courseid' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>);
<a name="l652"><span class="linenum"> 652</span></a>      if (<a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) {
<a name="l653"><span class="linenum"> 653</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['groupid'] = <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>;
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment">        // We just update the group that was deleted.</span>
<a name="l655"><span class="linenum"> 655</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT o.id, o.lessonid
<a name="l656"><span class="linenum"> 656</span></a>                    FROM {lesson_overrides} o
<a name="l657"><span class="linenum"> 657</span></a>                    JOIN {lesson} lesson ON lesson.id = o.lessonid
<a name="l658"><span class="linenum"> 658</span></a>                   WHERE lesson.course = :courseid
<a name="l659"><span class="linenum"> 659</span></a>                     AND o.groupid = :groupid&quot;;
<a name="l660"><span class="linenum"> 660</span></a>      } else {
<a name="l661"><span class="linenum"> 661</span></a>  <span class="comment">        // No groupid, we update all orphaned group overrides for all lessons in course.</span>
<a name="l662"><span class="linenum"> 662</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT o.id, o.lessonid
<a name="l663"><span class="linenum"> 663</span></a>                    FROM {lesson_overrides} o
<a name="l664"><span class="linenum"> 664</span></a>                    JOIN {lesson} lesson ON lesson.id = o.lessonid
<a name="l665"><span class="linenum"> 665</span></a>               LEFT JOIN {groups} grp ON grp.id = o.groupid
<a name="l666"><span class="linenum"> 666</span></a>                   WHERE lesson.course = :courseid
<a name="l667"><span class="linenum"> 667</span></a>                     AND o.groupid IS NOT NULL
<a name="l668"><span class="linenum"> 668</span></a>                     AND grp.id IS NULL&quot;;
<a name="l669"><span class="linenum"> 669</span></a>      }
<a name="l670"><span class="linenum"> 670</span></a>      <a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql_menu')" href="../../_functions/get_records_sql_menu.html" onMouseOver="funcPopup(event,'get_records_sql_menu')">get_records_sql_menu</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l671"><span class="linenum"> 671</span></a>      if (!<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>) {
<a name="l672"><span class="linenum"> 672</span></a>          return; <span class="comment">// Nothing to do.</span>
<a name="l673"><span class="linenum"> 673</span></a>      }
<a name="l674"><span class="linenum"> 674</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_list')" href="../../_functions/delete_records_list.html" onMouseOver="funcPopup(event,'delete_records_list')">delete_records_list</a>('lesson_overrides', 'id', <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>));
<a name="l675"><span class="linenum"> 675</span></a>  }
<a name="l676"><span class="linenum"> 676</span></a>  
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">/**</span>
<a name="l678"><span class="linenum"> 678</span></a>  <span class="comment"> * Abstract class that page type's MUST inherit from.</span>
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment"> *</span>
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment"> * This is the abstract class that ALL add page type forms must extend.</span>
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment"> * You will notice that all but two of the methods this class contains are final.</span>
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment"> * Essentially the only thing that extending classes can do is extend custom_definition.</span>
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment"> * OR if it has a special requirement on creation it can extend construction_override</span>
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment"> *</span>
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment"> * @abstract</span>
<a name="l686"><span class="linenum"> 686</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment"> */</span>
<a name="l689"><span class="linenum"> 689</span></a>  abstract class lesson_add_page_form_base extends moodleform {
<a name="l690"><span class="linenum"> 690</span></a>  
<a name="l691"><span class="linenum"> 691</span></a>      <span class="comment">/**</span>
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment">     * This is the classic define that is used to identify this pagetype.</span>
<a name="l693"><span class="linenum"> 693</span></a>  <span class="comment">     * Will be one of LESSON_*</span>
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment">     * @var int</span>
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment">     */</span>
<a name="l696"><span class="linenum"> 696</span></a>      public <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../../_variables/qtype.html">$qtype</a>;
<a name="l697"><span class="linenum"> 697</span></a>  
<a name="l698"><span class="linenum"> 698</span></a>      <span class="comment">/**</span>
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">     * The simple string that describes the page type e.g. truefalse, multichoice</span>
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment">     * @var string</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment">     */</span>
<a name="l702"><span class="linenum"> 702</span></a>      public <a class="var it1795" onMouseOver="hilite(1795)" onMouseOut="lolite()" onClick="logVariable('qtypestring')" href="../../_variables/qtypestring.html">$qtypestring</a>;
<a name="l703"><span class="linenum"> 703</span></a>  
<a name="l704"><span class="linenum"> 704</span></a>      <span class="comment">/**</span>
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment">     * An array of options used in the htmleditor</span>
<a name="l706"><span class="linenum"> 706</span></a>  <span class="comment">     * @var array</span>
<a name="l707"><span class="linenum"> 707</span></a>  <span class="comment">     */</span>
<a name="l708"><span class="linenum"> 708</span></a>      protected <a class="var it2672" onMouseOver="hilite(2672)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../_variables/editoroptions.html">$editoroptions</a> = array();
<a name="l709"><span class="linenum"> 709</span></a>  
<a name="l710"><span class="linenum"> 710</span></a>      <span class="comment">/**</span>
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment">     * True if this is a standard page of false if it does something special.</span>
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">     * Questions are standard pages, branch tables are not</span>
<a name="l713"><span class="linenum"> 713</span></a>  <span class="comment">     * @var bool</span>
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment">     */</span>
<a name="l715"><span class="linenum"> 715</span></a>      protected <a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('standard')" href="../../_variables/standard.html">$standard</a> = true;
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>      <span class="comment">/**</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment">     * Answer format supported by question type.</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment">     */</span>
<a name="l720"><span class="linenum"> 720</span></a>      protected <a class="var it1775" onMouseOver="hilite(1775)" onMouseOut="lolite()" onClick="logVariable('answerformat')" href="../../_variables/answerformat.html">$answerformat</a> = '';
<a name="l721"><span class="linenum"> 721</span></a>  
<a name="l722"><span class="linenum"> 722</span></a>      <span class="comment">/**</span>
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment">     * Response format supported by question type.</span>
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment">     */</span>
<a name="l725"><span class="linenum"> 725</span></a>      protected <a class="var it722" onMouseOver="hilite(722)" onMouseOut="lolite()" onClick="logVariable('responseformat')" href="../../_variables/responseformat.html">$responseformat</a> = '';
<a name="l726"><span class="linenum"> 726</span></a>  
<a name="l727"><span class="linenum"> 727</span></a>      <span class="comment">/**</span>
<a name="l728"><span class="linenum"> 728</span></a>  <span class="comment">     * Each page type can and should override this to add any custom elements to</span>
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">     * the basic form that they want</span>
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">     */</span>
<a name="l731"><span class="linenum"> 731</span></a>      public function <a class="function" onClick="logFunction('custom_definition')" href="../../_functions/custom_definition.html" onMouseOver="funcPopup(event,'custom_definition')">custom_definition</a>() {}
<a name="l732"><span class="linenum"> 732</span></a>  
<a name="l733"><span class="linenum"> 733</span></a>      <span class="comment">/**</span>
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment">     * Returns answer format used by question type.</span>
<a name="l735"><span class="linenum"> 735</span></a>  <span class="comment">     */</span>
<a name="l736"><span class="linenum"> 736</span></a>      public function <a class="function" onClick="logFunction('get_answer_format')" href="../../_functions/get_answer_format.html" onMouseOver="funcPopup(event,'get_answer_format')">get_answer_format</a>() {
<a name="l737"><span class="linenum"> 737</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answerformat')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answerformat.html">answerformat</a>;
<a name="l738"><span class="linenum"> 738</span></a>      }
<a name="l739"><span class="linenum"> 739</span></a>  
<a name="l740"><span class="linenum"> 740</span></a>      <span class="comment">/**</span>
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment">     * Returns response format used by question type.</span>
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">     */</span>
<a name="l743"><span class="linenum"> 743</span></a>      public function <a class="function" onClick="logFunction('get_response_format')" href="../../_functions/get_response_format.html" onMouseOver="funcPopup(event,'get_response_format')">get_response_format</a>() {
<a name="l744"><span class="linenum"> 744</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('responseformat')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a>;
<a name="l745"><span class="linenum"> 745</span></a>      }
<a name="l746"><span class="linenum"> 746</span></a>  
<a name="l747"><span class="linenum"> 747</span></a>      <span class="comment">/**</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment">     * Used to determine if this is a standard page or a special page</span>
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment">     * @return bool</span>
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">     */</span>
<a name="l751"><span class="linenum"> 751</span></a>      public final function <a class="function" onClick="logFunction('is_standard')" href="../../_functions/is_standard.html" onMouseOver="funcPopup(event,'is_standard')">is_standard</a>() {
<a name="l752"><span class="linenum"> 752</span></a>          return (bool)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('standard')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/standard.html">standard</a>;
<a name="l753"><span class="linenum"> 753</span></a>      }
<a name="l754"><span class="linenum"> 754</span></a>  
<a name="l755"><span class="linenum"> 755</span></a>      <span class="comment">/**</span>
<a name="l756"><span class="linenum"> 756</span></a>  <span class="comment">     * Add the required basic elements to the form.</span>
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">     *</span>
<a name="l758"><span class="linenum"> 758</span></a>  <span class="comment">     * This method adds the basic elements to the form including title and contents</span>
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">     * and then calls custom_definition();</span>
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment">     */</span>
<a name="l761"><span class="linenum"> 761</span></a>      public final function <a class="function" onClick="logFunction('definition')" href="../../_functions/definition.html" onMouseOver="funcPopup(event,'definition')">definition</a>() {
<a name="l762"><span class="linenum"> 762</span></a>          <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>;
<a name="l763"><span class="linenum"> 763</span></a>          <a class="var it2672" onMouseOver="hilite(2672)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../_variables/editoroptions.html">$editoroptions</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['editoroptions'];
<a name="l764"><span class="linenum"> 764</span></a>  
<a name="l765"><span class="linenum"> 765</span></a>          <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'qtypeheading', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('createaquestionpage', 'lesson', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('qtypestring')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/qtypestring.html">qtypestring</a>, 'lesson')));
<a name="l766"><span class="linenum"> 766</span></a>  
<a name="l767"><span class="linenum"> 767</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['returnto'])) {
<a name="l768"><span class="linenum"> 768</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'returnto', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['returnto']);
<a name="l769"><span class="linenum"> 769</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('returnto', <a class="constant" onClick="logConstant('PARAM_URL')" href="../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>);
<a name="l770"><span class="linenum"> 770</span></a>          }
<a name="l771"><span class="linenum"> 771</span></a>  
<a name="l772"><span class="linenum"> 772</span></a>          <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'id');
<a name="l773"><span class="linenum"> 773</span></a>          <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('id', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l774"><span class="linenum"> 774</span></a>  
<a name="l775"><span class="linenum"> 775</span></a>          <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'pageid');
<a name="l776"><span class="linenum"> 776</span></a>          <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('pageid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l777"><span class="linenum"> 777</span></a>  
<a name="l778"><span class="linenum"> 778</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('standard')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/standard.html">standard</a> === true) {
<a name="l779"><span class="linenum"> 779</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'qtype');
<a name="l780"><span class="linenum"> 780</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('qtype', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l781"><span class="linenum"> 781</span></a>  
<a name="l782"><span class="linenum"> 782</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('text', 'title', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pagetitle', 'lesson'), array('size'=&gt;70));
<a name="l783"><span class="linenum"> 783</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('title', <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l784"><span class="linenum"> 784</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addRule')" href="../../_functions/addrule.html" onMouseOver="funcPopup(event,'addrule')">addRule</a>('title', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('required'), 'required', null, 'client');
<a name="l785"><span class="linenum"> 785</span></a>  
<a name="l786"><span class="linenum"> 786</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/editoroptions.html">editoroptions</a> = array('noclean'=&gt;true, 'maxfiles'=&gt;<a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['maxbytes']);
<a name="l787"><span class="linenum"> 787</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('editor', 'contents_editor', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pagecontents', 'lesson'), null, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/editoroptions.html">editoroptions</a>);
<a name="l788"><span class="linenum"> 788</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('contents_editor', <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l789"><span class="linenum"> 789</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addRule')" href="../../_functions/addrule.html" onMouseOver="funcPopup(event,'addrule')">addRule</a>('contents_editor', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('required'), 'required', null, 'client');
<a name="l790"><span class="linenum"> 790</span></a>          }
<a name="l791"><span class="linenum"> 791</span></a>  
<a name="l792"><span class="linenum"> 792</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('custom_definition')" href="../../_functions/custom_definition.html" onMouseOver="funcPopup(event,'custom_definition')">custom_definition</a>();
<a name="l793"><span class="linenum"> 793</span></a>  
<a name="l794"><span class="linenum"> 794</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['edit'] === true) {
<a name="l795"><span class="linenum"> 795</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'edit', 1);
<a name="l796"><span class="linenum"> 796</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('edit', <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l797"><span class="linenum"> 797</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_action_buttons')" href="../../_functions/add_action_buttons.html" onMouseOver="funcPopup(event,'add_action_buttons')">add_action_buttons</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cancel'), <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savepage', 'lesson'));
<a name="l798"><span class="linenum"> 798</span></a>          } else if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('qtype')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> === 'questiontype') {
<a name="l799"><span class="linenum"> 799</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_action_buttons')" href="../../_functions/add_action_buttons.html" onMouseOver="funcPopup(event,'add_action_buttons')">add_action_buttons</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cancel'), <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addaquestionpage', 'lesson'));
<a name="l800"><span class="linenum"> 800</span></a>          } else {
<a name="l801"><span class="linenum"> 801</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_action_buttons')" href="../../_functions/add_action_buttons.html" onMouseOver="funcPopup(event,'add_action_buttons')">add_action_buttons</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cancel'), <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savepage', 'lesson'));
<a name="l802"><span class="linenum"> 802</span></a>          }
<a name="l803"><span class="linenum"> 803</span></a>      }
<a name="l804"><span class="linenum"> 804</span></a>  
<a name="l805"><span class="linenum"> 805</span></a>      <span class="comment">/**</span>
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment">     * Convenience function: Adds a jumpto select element</span>
<a name="l807"><span class="linenum"> 807</span></a>  <span class="comment">     *</span>
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment">     * @param string $name</span>
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment">     * @param string|null $label</span>
<a name="l810"><span class="linenum"> 810</span></a>  <span class="comment">     * @param int $selected The page to select by default</span>
<a name="l811"><span class="linenum"> 811</span></a>  <span class="comment">     */</span>
<a name="l812"><span class="linenum"> 812</span></a>      protected final function <a class="function" onClick="logFunction('add_jumpto')" href="../../_functions/add_jumpto.html" onMouseOver="funcPopup(event,'add_jumpto')">add_jumpto</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>=null, <a class="var it4428" onMouseOver="hilite(4428)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a>=<a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>) {
<a name="l813"><span class="linenum"> 813</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;jump&quot;, &quot;lesson&quot;);
<a name="l814"><span class="linenum"> 814</span></a>          if (<a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> === null) {
<a name="l815"><span class="linenum"> 815</span></a>              <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> = <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>;
<a name="l816"><span class="linenum"> 816</span></a>          }
<a name="l817"><span class="linenum"> 817</span></a>          if (is_int(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>)) {
<a name="l818"><span class="linenum"> 818</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = &quot;jumpto[<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>]&quot;;
<a name="l819"><span class="linenum"> 819</span></a>          }
<a name="l820"><span class="linenum"> 820</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('select', <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['jumpto']);
<a name="l821"><span class="linenum"> 821</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it4428" onMouseOver="hilite(4428)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a>);
<a name="l822"><span class="linenum"> 822</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addHelpButton')" href="../../_functions/addhelpbutton.html" onMouseOver="funcPopup(event,'addhelpbutton')">addHelpButton</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, 'jumps', 'lesson');
<a name="l823"><span class="linenum"> 823</span></a>      }
<a name="l824"><span class="linenum"> 824</span></a>  
<a name="l825"><span class="linenum"> 825</span></a>      <span class="comment">/**</span>
<a name="l826"><span class="linenum"> 826</span></a>  <span class="comment">     * Convenience function: Adds a score input element</span>
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment">     *</span>
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment">     * @param string $name</span>
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment">     * @param string|null $label</span>
<a name="l830"><span class="linenum"> 830</span></a>  <span class="comment">     * @param mixed $value The default value</span>
<a name="l831"><span class="linenum"> 831</span></a>  <span class="comment">     */</span>
<a name="l832"><span class="linenum"> 832</span></a>      protected final function <a class="function" onClick="logFunction('add_score')" href="../../_functions/add_score.html" onMouseOver="funcPopup(event,'add_score')">add_score</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>=null, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>=null) {
<a name="l833"><span class="linenum"> 833</span></a>          if (<a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> === null) {
<a name="l834"><span class="linenum"> 834</span></a>              <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;score&quot;, &quot;lesson&quot;);
<a name="l835"><span class="linenum"> 835</span></a>          }
<a name="l836"><span class="linenum"> 836</span></a>  
<a name="l837"><span class="linenum"> 837</span></a>          if (is_int(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>)) {
<a name="l838"><span class="linenum"> 838</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = &quot;score[<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>]&quot;;
<a name="l839"><span class="linenum"> 839</span></a>          }
<a name="l840"><span class="linenum"> 840</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('text', <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>, array('size'=&gt;5));
<a name="l841"><span class="linenum"> 841</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l842"><span class="linenum"> 842</span></a>          if (<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> !== null) {
<a name="l843"><span class="linenum"> 843</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l844"><span class="linenum"> 844</span></a>          }
<a name="l845"><span class="linenum"> 845</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addHelpButton')" href="../../_functions/addhelpbutton.html" onMouseOver="funcPopup(event,'addhelpbutton')">addHelpButton</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, 'score', 'lesson');
<a name="l846"><span class="linenum"> 846</span></a>  
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment">        // Score is only used for custom scoring. Disable the element when not in use to stop some confusion.</span>
<a name="l848"><span class="linenum"> 848</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['lesson']-&gt;custom) {
<a name="l849"><span class="linenum"> 849</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('freeze')" href="../../_functions/freeze.html" onMouseOver="funcPopup(event,'freeze')">freeze</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l850"><span class="linenum"> 850</span></a>          }
<a name="l851"><span class="linenum"> 851</span></a>      }
<a name="l852"><span class="linenum"> 852</span></a>  
<a name="l853"><span class="linenum"> 853</span></a>      <span class="comment">/**</span>
<a name="l854"><span class="linenum"> 854</span></a>  <span class="comment">     * Convenience function: Adds an answer editor</span>
<a name="l855"><span class="linenum"> 855</span></a>  <span class="comment">     *</span>
<a name="l856"><span class="linenum"> 856</span></a>  <span class="comment">     * @param int $count The count of the element to add</span>
<a name="l857"><span class="linenum"> 857</span></a>  <span class="comment">     * @param string $label, null means default</span>
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment">     * @param bool $required</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">     * @param string $format</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">     * @return void</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">     */</span>
<a name="l862"><span class="linenum"> 862</span></a>      protected final function <a class="function" onClick="logFunction('add_answer')" href="../../_functions/add_answer.html" onMouseOver="funcPopup(event,'add_answer')">add_answer</a>(<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>, <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> = null, <a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../_variables/required.html">$required</a> = false, <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>= '') {
<a name="l863"><span class="linenum"> 863</span></a>          if (<a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> === null) {
<a name="l864"><span class="linenum"> 864</span></a>              <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('answer', 'lesson');
<a name="l865"><span class="linenum"> 865</span></a>          }
<a name="l866"><span class="linenum"> 866</span></a>  
<a name="l867"><span class="linenum"> 867</span></a>          if (<a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a> == <a class="constant" onClick="logConstant('LESSON_ANSWER_HTML')" href="../../_constants/LESSON_ANSWER_HTML.html" onMouseOver="constPopup(event,'LESSON_ANSWER_HTML')">LESSON_ANSWER_HTML</a>) {
<a name="l868"><span class="linenum"> 868</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('editor', 'answer_editor['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>,
<a name="l869"><span class="linenum"> 869</span></a>                      array('rows' =&gt; '4', 'columns' =&gt; '80'),
<a name="l870"><span class="linenum"> 870</span></a>                      array('noclean' =&gt; true, 'maxfiles' =&gt; <a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['maxbytes']));
<a name="l871"><span class="linenum"> 871</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('answer_editor['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l872"><span class="linenum"> 872</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>('answer_editor['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', array('text' =&gt; '', 'format' =&gt; <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>));
<a name="l873"><span class="linenum"> 873</span></a>          } else {
<a name="l874"><span class="linenum"> 874</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('text', 'answer_editor['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>,
<a name="l875"><span class="linenum"> 875</span></a>                      array('size' =&gt; '50', 'maxlength' =&gt; '200'));
<a name="l876"><span class="linenum"> 876</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('answer_editor['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l877"><span class="linenum"> 877</span></a>          }
<a name="l878"><span class="linenum"> 878</span></a>  
<a name="l879"><span class="linenum"> 879</span></a>          if (<a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../_variables/required.html">$required</a>) {
<a name="l880"><span class="linenum"> 880</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addRule')" href="../../_functions/addrule.html" onMouseOver="funcPopup(event,'addrule')">addRule</a>('answer_editor['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('required'), 'required', null, 'client');
<a name="l881"><span class="linenum"> 881</span></a>          }
<a name="l882"><span class="linenum"> 882</span></a>      }
<a name="l883"><span class="linenum"> 883</span></a>      <span class="comment">/**</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment">     * Convenience function: Adds an response editor</span>
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">     *</span>
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment">     * @param int $count The count of the element to add</span>
<a name="l887"><span class="linenum"> 887</span></a>  <span class="comment">     * @param string $label, null means default</span>
<a name="l888"><span class="linenum"> 888</span></a>  <span class="comment">     * @param bool $required</span>
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment">     * @return void</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment">     */</span>
<a name="l891"><span class="linenum"> 891</span></a>      protected final function <a class="function" onClick="logFunction('add_response')" href="../../_functions/add_response.html" onMouseOver="funcPopup(event,'add_response')">add_response</a>(<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>, <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> = null, <a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../_variables/required.html">$required</a> = false) {
<a name="l892"><span class="linenum"> 892</span></a>          if (<a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> === null) {
<a name="l893"><span class="linenum"> 893</span></a>              <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('response', 'lesson');
<a name="l894"><span class="linenum"> 894</span></a>          }
<a name="l895"><span class="linenum"> 895</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('editor', 'response_editor['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="var it329" onMouseOver="hilite(329)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>,
<a name="l896"><span class="linenum"> 896</span></a>                   array('rows' =&gt; '4', 'columns' =&gt; '80'),
<a name="l897"><span class="linenum"> 897</span></a>                   array('noclean' =&gt; true, 'maxfiles' =&gt; <a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_customdata.html">_customdata</a>['maxbytes']));
<a name="l898"><span class="linenum"> 898</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('response_editor['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l899"><span class="linenum"> 899</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>('response_editor['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', array('text' =&gt; '', 'format' =&gt; <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>));
<a name="l900"><span class="linenum"> 900</span></a>  
<a name="l901"><span class="linenum"> 901</span></a>          if (<a class="var it620" onMouseOver="hilite(620)" onMouseOut="lolite()" onClick="logVariable('required')" href="../../_variables/required.html">$required</a>) {
<a name="l902"><span class="linenum"> 902</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/_form.html">_form</a>-&gt;<a class="function" onClick="logFunction('addRule')" href="../../_functions/addrule.html" onMouseOver="funcPopup(event,'addrule')">addRule</a>('response_editor['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('required'), 'required', null, 'client');
<a name="l903"><span class="linenum"> 903</span></a>          }
<a name="l904"><span class="linenum"> 904</span></a>      }
<a name="l905"><span class="linenum"> 905</span></a>  
<a name="l906"><span class="linenum"> 906</span></a>      <span class="comment">/**</span>
<a name="l907"><span class="linenum"> 907</span></a>  <span class="comment">     * A function that gets called upon init of this object by the calling script.</span>
<a name="l908"><span class="linenum"> 908</span></a>  <span class="comment">     *</span>
<a name="l909"><span class="linenum"> 909</span></a>  <span class="comment">     * This can be used to process an immediate action if required. Currently it</span>
<a name="l910"><span class="linenum"> 910</span></a>  <span class="comment">     * is only used in special cases by non-standard page types.</span>
<a name="l911"><span class="linenum"> 911</span></a>  <span class="comment">     *</span>
<a name="l912"><span class="linenum"> 912</span></a>  <span class="comment">     * @return bool</span>
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment">     */</span>
<a name="l914"><span class="linenum"> 914</span></a>      public function <a class="function" onClick="logFunction('construction_override')" href="../../_functions/construction_override.html" onMouseOver="funcPopup(event,'construction_override')">construction_override</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, lesson <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l915"><span class="linenum"> 915</span></a>          return true;
<a name="l916"><span class="linenum"> 916</span></a>      }
<a name="l917"><span class="linenum"> 917</span></a>  }
<a name="l918"><span class="linenum"> 918</span></a>  
<a name="l919"><span class="linenum"> 919</span></a>  
<a name="l920"><span class="linenum"> 920</span></a>  
<a name="l921"><span class="linenum"> 921</span></a>  <span class="comment">/**</span>
<a name="l922"><span class="linenum"> 922</span></a>  <span class="comment"> * Class representation of a lesson</span>
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment"> *</span>
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment"> * This class is used the interact with, and manage a lesson once instantiated.</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment"> * If you need to fetch a lesson object you can do so by calling</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment"> *</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment"> * &lt;code&gt;</span>
<a name="l928"><span class="linenum"> 928</span></a>  <span class="comment"> * lesson::load($lessonid);</span>
<a name="l929"><span class="linenum"> 929</span></a>  <span class="comment"> * // or</span>
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment"> * $lessonrecord = $DB-&gt;get_record('lesson', $lessonid);</span>
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment"> * $lesson = new lesson($lessonrecord);</span>
<a name="l932"><span class="linenum"> 932</span></a>  <span class="comment"> * &lt;/code&gt;</span>
<a name="l933"><span class="linenum"> 933</span></a>  <span class="comment"> *</span>
<a name="l934"><span class="linenum"> 934</span></a>  <span class="comment"> * The class itself extends lesson_base as all classes within the lesson module should</span>
<a name="l935"><span class="linenum"> 935</span></a>  <span class="comment"> *</span>
<a name="l936"><span class="linenum"> 936</span></a>  <span class="comment"> * These properties are from the database</span>
<a name="l937"><span class="linenum"> 937</span></a>  <span class="comment"> * @property int $id The id of this lesson</span>
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment"> * @property int $course The ID of the course this lesson belongs to</span>
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment"> * @property string $name The name of this lesson</span>
<a name="l940"><span class="linenum"> 940</span></a>  <span class="comment"> * @property int $practice Flag to toggle this as a practice lesson</span>
<a name="l941"><span class="linenum"> 941</span></a>  <span class="comment"> * @property int $modattempts Toggle to allow the user to go back and review answers</span>
<a name="l942"><span class="linenum"> 942</span></a>  <span class="comment"> * @property int $usepassword Toggle the use of a password for entry</span>
<a name="l943"><span class="linenum"> 943</span></a>  <span class="comment"> * @property string $password The password to require users to enter</span>
<a name="l944"><span class="linenum"> 944</span></a>  <span class="comment"> * @property int $dependency ID of another lesson this lesson is dependent on</span>
<a name="l945"><span class="linenum"> 945</span></a>  <span class="comment"> * @property string $conditions Conditions of the lesson dependency</span>
<a name="l946"><span class="linenum"> 946</span></a>  <span class="comment"> * @property int $grade The maximum grade a user can achieve (%)</span>
<a name="l947"><span class="linenum"> 947</span></a>  <span class="comment"> * @property int $custom Toggle custom scoring on or off</span>
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment"> * @property int $ongoing Toggle display of an ongoing score</span>
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment"> * @property int $usemaxgrade How retakes are handled (max=1, mean=0)</span>
<a name="l950"><span class="linenum"> 950</span></a>  <span class="comment"> * @property int $maxanswers The max number of answers or branches</span>
<a name="l951"><span class="linenum"> 951</span></a>  <span class="comment"> * @property int $maxattempts The maximum number of attempts a user can record</span>
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment"> * @property int $review Toggle use or wrong answer review button</span>
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment"> * @property int $nextpagedefault Override the default next page</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment"> * @property int $feedback Toggles display of default feedback</span>
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment"> * @property int $minquestions Sets a minimum value of pages seen when calculating grades</span>
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment"> * @property int $maxpages Maximum number of pages this lesson can contain</span>
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment"> * @property int $retake Flag to allow users to retake a lesson</span>
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment"> * @property int $activitylink Relate this lesson to another lesson</span>
<a name="l959"><span class="linenum"> 959</span></a>  <span class="comment"> * @property string $mediafile File to pop up to or webpage to display</span>
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment"> * @property int $mediaheight Sets the height of the media file popup</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment"> * @property int $mediawidth Sets the width of the media file popup</span>
<a name="l962"><span class="linenum"> 962</span></a>  <span class="comment"> * @property int $mediaclose Toggle display of a media close button</span>
<a name="l963"><span class="linenum"> 963</span></a>  <span class="comment"> * @property int $slideshow Flag for whether branch pages should be shown as slideshows</span>
<a name="l964"><span class="linenum"> 964</span></a>  <span class="comment"> * @property int $width Width of slideshow</span>
<a name="l965"><span class="linenum"> 965</span></a>  <span class="comment"> * @property int $height Height of slideshow</span>
<a name="l966"><span class="linenum"> 966</span></a>  <span class="comment"> * @property string $bgcolor Background colour of slideshow</span>
<a name="l967"><span class="linenum"> 967</span></a>  <span class="comment"> * @property int $displayleft Display a left menu</span>
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment"> * @property int $displayleftif Sets the condition on which the left menu is displayed</span>
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment"> * @property int $progressbar Flag to toggle display of a lesson progress bar</span>
<a name="l970"><span class="linenum"> 970</span></a>  <span class="comment"> * @property int $highscores Flag to toggle collection of high scores</span>
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment"> * @property int $maxhighscores Number of high scores to limit to</span>
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment"> * @property int $available Timestamp of when this lesson becomes available</span>
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment"> * @property int $deadline Timestamp of when this lesson is no longer available</span>
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment"> * @property int $timemodified Timestamp when lesson was last modified</span>
<a name="l975"><span class="linenum"> 975</span></a>  <span class="comment"> *</span>
<a name="l976"><span class="linenum"> 976</span></a>  <span class="comment"> * These properties are calculated</span>
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment"> * @property int $firstpageid Id of the first page of this lesson (prevpageid=0)</span>
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment"> * @property int $lastpageid Id of the last page of this lesson (nextpageid=0)</span>
<a name="l979"><span class="linenum"> 979</span></a>  <span class="comment"> *</span>
<a name="l980"><span class="linenum"> 980</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l981"><span class="linenum"> 981</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l982"><span class="linenum"> 982</span></a>  <span class="comment"> */</span>
<a name="l983"><span class="linenum"> 983</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('lesson')" href="../../_classes/lesson.html" onMouseOver="classPopup(event,'lesson')">lesson</a> extends lesson_base {
<a name="l984"><span class="linenum"> 984</span></a>  
<a name="l985"><span class="linenum"> 985</span></a>      <span class="comment">/**</span>
<a name="l986"><span class="linenum"> 986</span></a>  <span class="comment">     * The id of the first page (where prevpageid = 0) gets set and retrieved by</span>
<a name="l987"><span class="linenum"> 987</span></a>  <span class="comment">     * {@see get_firstpageid()} by directly calling &lt;code&gt;$lesson-&gt;firstpageid;&lt;/code&gt;</span>
<a name="l988"><span class="linenum"> 988</span></a>  <span class="comment">     * @var int</span>
<a name="l989"><span class="linenum"> 989</span></a>  <span class="comment">     */</span>
<a name="l990"><span class="linenum"> 990</span></a>      protected <a class="var it7958" onMouseOver="hilite(7958)" onMouseOut="lolite()" onClick="logVariable('firstpageid')" href="../../_variables/firstpageid.html">$firstpageid</a> = null;
<a name="l991"><span class="linenum"> 991</span></a>      <span class="comment">/**</span>
<a name="l992"><span class="linenum"> 992</span></a>  <span class="comment">     * The id of the last page (where nextpageid = 0) gets set and retrieved by</span>
<a name="l993"><span class="linenum"> 993</span></a>  <span class="comment">     * {@see get_lastpageid()} by directly calling &lt;code&gt;$lesson-&gt;lastpageid;&lt;/code&gt;</span>
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment">     * @var int</span>
<a name="l995"><span class="linenum"> 995</span></a>  <span class="comment">     */</span>
<a name="l996"><span class="linenum"> 996</span></a>      protected <a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> = null;
<a name="l997"><span class="linenum"> 997</span></a>      <span class="comment">/**</span>
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">     * An array used to cache the pages associated with this lesson after the first</span>
<a name="l999"><span class="linenum"> 999</span></a>  <span class="comment">     * time they have been loaded.</span>
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment">     * A note to developers: If you are going to be working with MORE than one or</span>
<a name="l1001"><span class="linenum">1001</span></a>  <span class="comment">     * two pages from a lesson you should probably call {@see $lesson-&gt;load_all_pages()}</span>
<a name="l1002"><span class="linenum">1002</span></a>  <span class="comment">     * in order to save excess database queries.</span>
<a name="l1003"><span class="linenum">1003</span></a>  <span class="comment">     * @var array An array of lesson_page objects</span>
<a name="l1004"><span class="linenum">1004</span></a>  <span class="comment">     */</span>
<a name="l1005"><span class="linenum">1005</span></a>      protected <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = array();
<a name="l1006"><span class="linenum">1006</span></a>      <span class="comment">/**</span>
<a name="l1007"><span class="linenum">1007</span></a>  <span class="comment">     * Flag that gets set to true once all of the pages associated with the lesson</span>
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment">     * have been loaded.</span>
<a name="l1009"><span class="linenum">1009</span></a>  <span class="comment">     * @var bool</span>
<a name="l1010"><span class="linenum">1010</span></a>  <span class="comment">     */</span>
<a name="l1011"><span class="linenum">1011</span></a>      protected <a class="var it23929" onMouseOver="hilite(23929)" onMouseOut="lolite()" onClick="logVariable('loadedallpages')" href="../../_variables/loadedallpages.html">$loadedallpages</a> = false;
<a name="l1012"><span class="linenum">1012</span></a>  
<a name="l1013"><span class="linenum">1013</span></a>      <span class="comment">/**</span>
<a name="l1014"><span class="linenum">1014</span></a>  <span class="comment">     * Simply generates a lesson object given an array/object of properties</span>
<a name="l1015"><span class="linenum">1015</span></a>  <span class="comment">     * Overrides {@see lesson_base-&gt;create()}</span>
<a name="l1016"><span class="linenum">1016</span></a>  <span class="comment">     * @static</span>
<a name="l1017"><span class="linenum">1017</span></a>  <span class="comment">     * @param object|array $properties</span>
<a name="l1018"><span class="linenum">1018</span></a>  <span class="comment">     * @return lesson</span>
<a name="l1019"><span class="linenum">1019</span></a>  <span class="comment">     */</span>
<a name="l1020"><span class="linenum">1020</span></a>      public static function <a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>) {
<a name="l1021"><span class="linenum">1021</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('lesson')" href="../../_classes/lesson.html" onMouseOver="classPopup(event,'lesson')">lesson</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>);
<a name="l1022"><span class="linenum">1022</span></a>      }
<a name="l1023"><span class="linenum">1023</span></a>  
<a name="l1024"><span class="linenum">1024</span></a>      <span class="comment">/**</span>
<a name="l1025"><span class="linenum">1025</span></a>  <span class="comment">     * Generates a lesson object from the database given its id</span>
<a name="l1026"><span class="linenum">1026</span></a>  <span class="comment">     * @static</span>
<a name="l1027"><span class="linenum">1027</span></a>  <span class="comment">     * @param int $lessonid</span>
<a name="l1028"><span class="linenum">1028</span></a>  <span class="comment">     * @return lesson</span>
<a name="l1029"><span class="linenum">1029</span></a>  <span class="comment">     */</span>
<a name="l1030"><span class="linenum">1030</span></a>      public static function <a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it1773" onMouseOver="hilite(1773)" onMouseOut="lolite()" onClick="logVariable('lessonid')" href="../../_variables/lessonid.html">$lessonid</a>) {
<a name="l1031"><span class="linenum">1031</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1032"><span class="linenum">1032</span></a>  
<a name="l1033"><span class="linenum">1033</span></a>          if (!<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lesson', array('id' =&gt; <a class="var it1773" onMouseOver="hilite(1773)" onMouseOut="lolite()" onClick="logVariable('lessonid')" href="../../_variables/lessonid.html">$lessonid</a>))) {
<a name="l1034"><span class="linenum">1034</span></a>              <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidcoursemodule');
<a name="l1035"><span class="linenum">1035</span></a>          }
<a name="l1036"><span class="linenum">1036</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('lesson')" href="../../_classes/lesson.html" onMouseOver="classPopup(event,'lesson')">lesson</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l1037"><span class="linenum">1037</span></a>      }
<a name="l1038"><span class="linenum">1038</span></a>  
<a name="l1039"><span class="linenum">1039</span></a>      <span class="comment">/**</span>
<a name="l1040"><span class="linenum">1040</span></a>  <span class="comment">     * Deletes this lesson from the database</span>
<a name="l1041"><span class="linenum">1041</span></a>  <span class="comment">     */</span>
<a name="l1042"><span class="linenum">1042</span></a>      public function <a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>() {
<a name="l1043"><span class="linenum">1043</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1044"><span class="linenum">1044</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l1045"><span class="linenum">1045</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../calendar/lib.php.html">/calendar/lib.php</a>');
<a name="l1046"><span class="linenum">1046</span></a>  
<a name="l1047"><span class="linenum">1047</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course);
<a name="l1048"><span class="linenum">1048</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1049"><span class="linenum">1049</span></a>  
<a name="l1050"><span class="linenum">1050</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('delete_all_overrides')" href="../../_functions/delete_all_overrides.html" onMouseOver="funcPopup(event,'delete_all_overrides')">delete_all_overrides</a>();
<a name="l1051"><span class="linenum">1051</span></a>  
<a name="l1052"><span class="linenum">1052</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson&quot;, array(&quot;id&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1053"><span class="linenum">1053</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_pages&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1054"><span class="linenum">1054</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_answers&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1055"><span class="linenum">1055</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_attempts&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1056"><span class="linenum">1056</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1057"><span class="linenum">1057</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_timer&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1058"><span class="linenum">1058</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_branch&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1059"><span class="linenum">1059</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_high_scores&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1060"><span class="linenum">1060</span></a>          if (<a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', array(&quot;modulename&quot;=&gt;'lesson', &quot;instance&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id))) {
<a name="l1061"><span class="linenum">1061</span></a>              foreach(<a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> as <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>) {
<a name="l1062"><span class="linenum">1062</span></a>                  <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l1063"><span class="linenum">1063</span></a>                  <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l1064"><span class="linenum">1064</span></a>              }
<a name="l1065"><span class="linenum">1065</span></a>          }
<a name="l1066"><span class="linenum">1066</span></a>  
<a name="l1067"><span class="linenum">1067</span></a>  <span class="comment">        // Delete files associated with this module.</span>
<a name="l1068"><span class="linenum">1068</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1069"><span class="linenum">1069</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1070"><span class="linenum">1070</span></a>  
<a name="l1071"><span class="linenum">1071</span></a>          <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>('mod/lesson', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course, 'mod', 'lesson', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, 0, null, array('deleted'=&gt;1));
<a name="l1072"><span class="linenum">1072</span></a>          return true;
<a name="l1073"><span class="linenum">1073</span></a>      }
<a name="l1074"><span class="linenum">1074</span></a>  
<a name="l1075"><span class="linenum">1075</span></a>      <span class="comment">/**</span>
<a name="l1076"><span class="linenum">1076</span></a>  <span class="comment">     * Deletes a lesson override from the database and clears any corresponding calendar events</span>
<a name="l1077"><span class="linenum">1077</span></a>  <span class="comment">     *</span>
<a name="l1078"><span class="linenum">1078</span></a>  <span class="comment">     * @param int $overrideid The id of the override being deleted</span>
<a name="l1079"><span class="linenum">1079</span></a>  <span class="comment">     * @return bool true on success</span>
<a name="l1080"><span class="linenum">1080</span></a>  <span class="comment">     */</span>
<a name="l1081"><span class="linenum">1081</span></a>      public function <a class="function" onClick="logFunction('delete_override')" href="../../_functions/delete_override.html" onMouseOver="funcPopup(event,'delete_override')">delete_override</a>(<a class="var it23930" onMouseOver="hilite(23930)" onMouseOut="lolite()" onClick="logVariable('overrideid')" href="../../_variables/overrideid.html">$overrideid</a>) {
<a name="l1082"><span class="linenum">1082</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1083"><span class="linenum">1083</span></a>  
<a name="l1084"><span class="linenum">1084</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../calendar/lib.php.html">/calendar/lib.php</a>');
<a name="l1085"><span class="linenum">1085</span></a>  
<a name="l1086"><span class="linenum">1086</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course);
<a name="l1087"><span class="linenum">1087</span></a>  
<a name="l1088"><span class="linenum">1088</span></a>          <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lesson_overrides', array('id' =&gt; <a class="var it23930" onMouseOver="hilite(23930)" onMouseOut="lolite()" onClick="logVariable('overrideid')" href="../../_variables/overrideid.html">$overrideid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1089"><span class="linenum">1089</span></a>  
<a name="l1090"><span class="linenum">1090</span></a>  <span class="comment">        // Delete the events.</span>
<a name="l1091"><span class="linenum">1091</span></a>          <a class="var it23931" onMouseOver="hilite(23931)" onMouseOut="lolite()" onClick="logVariable('conds')" href="../../_variables/conds.html">$conds</a> = array('modulename' =&gt; 'lesson',
<a name="l1092"><span class="linenum">1092</span></a>                  'instance' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id);
<a name="l1093"><span class="linenum">1093</span></a>          if (isset(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('userid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>)) {
<a name="l1094"><span class="linenum">1094</span></a>              <a class="var it23931" onMouseOver="hilite(23931)" onMouseOut="lolite()" onClick="logVariable('conds')" href="../../_variables/conds.html">$conds</a>['userid'] = <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('userid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l1095"><span class="linenum">1095</span></a>          } else {
<a name="l1096"><span class="linenum">1096</span></a>              <a class="var it23931" onMouseOver="hilite(23931)" onMouseOut="lolite()" onClick="logVariable('conds')" href="../../_variables/conds.html">$conds</a>['groupid'] = <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('groupid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>;
<a name="l1097"><span class="linenum">1097</span></a>          }
<a name="l1098"><span class="linenum">1098</span></a>          <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', <a class="var it23931" onMouseOver="hilite(23931)" onMouseOut="lolite()" onClick="logVariable('conds')" href="../../_variables/conds.html">$conds</a>);
<a name="l1099"><span class="linenum">1099</span></a>          foreach (<a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> as <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>) {
<a name="l1100"><span class="linenum">1100</span></a>              <a class="var it23932" onMouseOver="hilite(23932)" onMouseOut="lolite()" onClick="logVariable('eventold')" href="../../_variables/eventold.html">$eventold</a> = <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l1101"><span class="linenum">1101</span></a>              <a class="var it23932" onMouseOver="hilite(23932)" onMouseOut="lolite()" onClick="logVariable('eventold')" href="../../_variables/eventold.html">$eventold</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l1102"><span class="linenum">1102</span></a>          }
<a name="l1103"><span class="linenum">1103</span></a>  
<a name="l1104"><span class="linenum">1104</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('lesson_overrides', array('id' =&gt; <a class="var it23930" onMouseOver="hilite(23930)" onMouseOut="lolite()" onClick="logVariable('overrideid')" href="../../_variables/overrideid.html">$overrideid</a>));
<a name="l1105"><span class="linenum">1105</span></a>  
<a name="l1106"><span class="linenum">1106</span></a>  <span class="comment">        // Set the common parameters for one of the events we will be triggering.</span>
<a name="l1107"><span class="linenum">1107</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(
<a name="l1108"><span class="linenum">1108</span></a>              'objectid' =&gt; <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('id')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1109"><span class="linenum">1109</span></a>              'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l1110"><span class="linenum">1110</span></a>              'other' =&gt; array(
<a name="l1111"><span class="linenum">1111</span></a>                  'lessonid' =&gt; <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;lessonid
<a name="l1112"><span class="linenum">1112</span></a>              )
<a name="l1113"><span class="linenum">1113</span></a>          );
<a name="l1114"><span class="linenum">1114</span></a>  <span class="comment">        // Determine which override deleted event to fire.</span>
<a name="l1115"><span class="linenum">1115</span></a>          if (!empty(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('userid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>)) {
<a name="l1116"><span class="linenum">1116</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['relateduserid'] = <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('userid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l1117"><span class="linenum">1117</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('user_override_deleted')" href="../../_classes/user_override_deleted.html" onMouseOver="classPopup(event,'user_override_deleted')">user_override_deleted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1118"><span class="linenum">1118</span></a>          } else {
<a name="l1119"><span class="linenum">1119</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['other']['groupid'] = <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('groupid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>;
<a name="l1120"><span class="linenum">1120</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('group_override_deleted')" href="../../_classes/group_override_deleted.html" onMouseOver="classPopup(event,'group_override_deleted')">group_override_deleted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1121"><span class="linenum">1121</span></a>          }
<a name="l1122"><span class="linenum">1122</span></a>  
<a name="l1123"><span class="linenum">1123</span></a>  <span class="comment">        // Trigger the override deleted event.</span>
<a name="l1124"><span class="linenum">1124</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('lesson_overrides', <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>);
<a name="l1125"><span class="linenum">1125</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1126"><span class="linenum">1126</span></a>  
<a name="l1127"><span class="linenum">1127</span></a>          return true;
<a name="l1128"><span class="linenum">1128</span></a>      }
<a name="l1129"><span class="linenum">1129</span></a>  
<a name="l1130"><span class="linenum">1130</span></a>      <span class="comment">/**</span>
<a name="l1131"><span class="linenum">1131</span></a>  <span class="comment">     * Deletes all lesson overrides from the database and clears any corresponding calendar events</span>
<a name="l1132"><span class="linenum">1132</span></a>  <span class="comment">     */</span>
<a name="l1133"><span class="linenum">1133</span></a>      public function <a class="function" onClick="logFunction('delete_all_overrides')" href="../../_functions/delete_all_overrides.html" onMouseOver="funcPopup(event,'delete_all_overrides')">delete_all_overrides</a>() {
<a name="l1134"><span class="linenum">1134</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1135"><span class="linenum">1135</span></a>  
<a name="l1136"><span class="linenum">1136</span></a>          <a class="var it668" onMouseOver="hilite(668)" onMouseOut="lolite()" onClick="logVariable('overrides')" href="../../_variables/overrides.html">$overrides</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_overrides', array('lessonid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id), 'id');
<a name="l1137"><span class="linenum">1137</span></a>          foreach (<a class="var it668" onMouseOver="hilite(668)" onMouseOut="lolite()" onClick="logVariable('overrides')" href="../../_variables/overrides.html">$overrides</a> as <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>) {
<a name="l1138"><span class="linenum">1138</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('delete_override')" href="../../_functions/delete_override.html" onMouseOver="funcPopup(event,'delete_override')">delete_override</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('id')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1139"><span class="linenum">1139</span></a>          }
<a name="l1140"><span class="linenum">1140</span></a>      }
<a name="l1141"><span class="linenum">1141</span></a>  
<a name="l1142"><span class="linenum">1142</span></a>      <span class="comment">/**</span>
<a name="l1143"><span class="linenum">1143</span></a>  <span class="comment">     * Updates the lesson properties with override information for a user.</span>
<a name="l1144"><span class="linenum">1144</span></a>  <span class="comment">     *</span>
<a name="l1145"><span class="linenum">1145</span></a>  <span class="comment">     * Algorithm:  For each lesson setting, if there is a matching user-specific override,</span>
<a name="l1146"><span class="linenum">1146</span></a>  <span class="comment">     *   then use that otherwise, if there are group-specific overrides, return the most</span>
<a name="l1147"><span class="linenum">1147</span></a>  <span class="comment">     *   lenient combination of them.  If neither applies, leave the quiz setting unchanged.</span>
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment">     *</span>
<a name="l1149"><span class="linenum">1149</span></a>  <span class="comment">     *   Special case: if there is more than one password that applies to the user, then</span>
<a name="l1150"><span class="linenum">1150</span></a>  <span class="comment">     *   lesson-&gt;extrapasswords will contain an array of strings giving the remaining</span>
<a name="l1151"><span class="linenum">1151</span></a>  <span class="comment">     *   passwords.</span>
<a name="l1152"><span class="linenum">1152</span></a>  <span class="comment">     *</span>
<a name="l1153"><span class="linenum">1153</span></a>  <span class="comment">     * @param int $userid The userid.</span>
<a name="l1154"><span class="linenum">1154</span></a>  <span class="comment">     */</span>
<a name="l1155"><span class="linenum">1155</span></a>      public function <a class="function" onClick="logFunction('update_effective_access')" href="../../_functions/update_effective_access.html" onMouseOver="funcPopup(event,'update_effective_access')">update_effective_access</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l1156"><span class="linenum">1156</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1157"><span class="linenum">1157</span></a>  
<a name="l1158"><span class="linenum">1158</span></a>  <span class="comment">        // Check for user override.</span>
<a name="l1159"><span class="linenum">1159</span></a>          <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lesson_overrides', array('lessonid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, 'userid' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l1160"><span class="linenum">1160</span></a>  
<a name="l1161"><span class="linenum">1161</span></a>          if (!<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>) {
<a name="l1162"><span class="linenum">1162</span></a>              <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a> = new stdClass();
<a name="l1163"><span class="linenum">1163</span></a>              <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('available')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/available.html">available</a> = null;
<a name="l1164"><span class="linenum">1164</span></a>              <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('deadline')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/deadline.html">deadline</a> = null;
<a name="l1165"><span class="linenum">1165</span></a>              <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timelimit')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a> = null;
<a name="l1166"><span class="linenum">1166</span></a>              <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('review')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/review.html">review</a> = null;
<a name="l1167"><span class="linenum">1167</span></a>              <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a> = null;
<a name="l1168"><span class="linenum">1168</span></a>              <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('retake')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/retake.html">retake</a> = null;
<a name="l1169"><span class="linenum">1169</span></a>              <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/password.html">password</a> = null;
<a name="l1170"><span class="linenum">1170</span></a>          }
<a name="l1171"><span class="linenum">1171</span></a>  
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment">        // Check for group overrides.</span>
<a name="l1173"><span class="linenum">1173</span></a>          <a class="var it2827" onMouseOver="hilite(2827)" onMouseOut="lolite()" onClick="logVariable('groupings')" href="../../_variables/groupings.html">$groupings</a> = <a class="function" onClick="logFunction('groups_get_user_groups')" href="../../_functions/groups_get_user_groups.html" onMouseOver="funcPopup(event,'groups_get_user_groups')">groups_get_user_groups</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l1174"><span class="linenum">1174</span></a>  
<a name="l1175"><span class="linenum">1175</span></a>          if (!empty(<a class="var it2827" onMouseOver="hilite(2827)" onMouseOut="lolite()" onClick="logVariable('groupings')" href="../../_variables/groupings.html">$groupings</a>[0])) {
<a name="l1176"><span class="linenum">1176</span></a>  <span class="comment">            // Select all overrides that apply to the User's groups.</span>
<a name="l1177"><span class="linenum">1177</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2018" onMouseOver="hilite(2018)" onMouseOut="lolite()" onClick="logVariable('extra')" href="../../_variables/extra.html">$extra</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it2827" onMouseOver="hilite(2827)" onMouseOut="lolite()" onClick="logVariable('groupings')" href="../../_variables/groupings.html">$groupings</a>[0]));
<a name="l1178"><span class="linenum">1178</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT * FROM {lesson_overrides}
<a name="l1179"><span class="linenum">1179</span></a>                      WHERE groupid <a class="var it2018" onMouseOver="hilite(2018)" onMouseOut="lolite()" onClick="logVariable('extra')" href="../../_variables/extra.html">$extra</a> AND lessonid = ?&quot;;
<a name="l1180"><span class="linenum">1180</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l1181"><span class="linenum">1181</span></a>              <a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1182"><span class="linenum">1182</span></a>  
<a name="l1183"><span class="linenum">1183</span></a>  <span class="comment">            // Combine the overrides.</span>
<a name="l1184"><span class="linenum">1184</span></a>              <a class="var it23933" onMouseOver="hilite(23933)" onMouseOut="lolite()" onClick="logVariable('availables')" href="../../_variables/availables.html">$availables</a> = array();
<a name="l1185"><span class="linenum">1185</span></a>              <a class="var it23934" onMouseOver="hilite(23934)" onMouseOut="lolite()" onClick="logVariable('deadlines')" href="../../_variables/deadlines.html">$deadlines</a> = array();
<a name="l1186"><span class="linenum">1186</span></a>              <a class="var it23935" onMouseOver="hilite(23935)" onMouseOut="lolite()" onClick="logVariable('timelimits')" href="../../_variables/timelimits.html">$timelimits</a> = array();
<a name="l1187"><span class="linenum">1187</span></a>              <a class="var it23936" onMouseOver="hilite(23936)" onMouseOut="lolite()" onClick="logVariable('reviews')" href="../../_variables/reviews.html">$reviews</a> = array();
<a name="l1188"><span class="linenum">1188</span></a>              <a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> = array();
<a name="l1189"><span class="linenum">1189</span></a>              <a class="var it23907" onMouseOver="hilite(23907)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = array();
<a name="l1190"><span class="linenum">1190</span></a>              <a class="var it23937" onMouseOver="hilite(23937)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a> = array();
<a name="l1191"><span class="linenum">1191</span></a>  
<a name="l1192"><span class="linenum">1192</span></a>              foreach (<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> as <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>) {
<a name="l1193"><span class="linenum">1193</span></a>                  if (isset(<a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('available')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/available.html">available</a>)) {
<a name="l1194"><span class="linenum">1194</span></a>                      <a class="var it23933" onMouseOver="hilite(23933)" onMouseOut="lolite()" onClick="logVariable('availables')" href="../../_variables/availables.html">$availables</a>[] = <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('available')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/available.html">available</a>;
<a name="l1195"><span class="linenum">1195</span></a>                  }
<a name="l1196"><span class="linenum">1196</span></a>                  if (isset(<a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('deadline')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/deadline.html">deadline</a>)) {
<a name="l1197"><span class="linenum">1197</span></a>                      <a class="var it23934" onMouseOver="hilite(23934)" onMouseOut="lolite()" onClick="logVariable('deadlines')" href="../../_variables/deadlines.html">$deadlines</a>[] = <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('deadline')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/deadline.html">deadline</a>;
<a name="l1198"><span class="linenum">1198</span></a>                  }
<a name="l1199"><span class="linenum">1199</span></a>                  if (isset(<a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('timelimit')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a>)) {
<a name="l1200"><span class="linenum">1200</span></a>                      <a class="var it23935" onMouseOver="hilite(23935)" onMouseOut="lolite()" onClick="logVariable('timelimits')" href="../../_variables/timelimits.html">$timelimits</a>[] = <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('timelimit')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a>;
<a name="l1201"><span class="linenum">1201</span></a>                  }
<a name="l1202"><span class="linenum">1202</span></a>                  if (isset(<a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('review')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/review.html">review</a>)) {
<a name="l1203"><span class="linenum">1203</span></a>                      <a class="var it23936" onMouseOver="hilite(23936)" onMouseOut="lolite()" onClick="logVariable('reviews')" href="../../_variables/reviews.html">$reviews</a>[] = <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('review')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/review.html">review</a>;
<a name="l1204"><span class="linenum">1204</span></a>                  }
<a name="l1205"><span class="linenum">1205</span></a>                  if (isset(<a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>)) {
<a name="l1206"><span class="linenum">1206</span></a>                      <a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>[] = <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>;
<a name="l1207"><span class="linenum">1207</span></a>                  }
<a name="l1208"><span class="linenum">1208</span></a>                  if (isset(<a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('retake')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/retake.html">retake</a>)) {
<a name="l1209"><span class="linenum">1209</span></a>                      <a class="var it23907" onMouseOver="hilite(23907)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a>[] = <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('retake')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/retake.html">retake</a>;
<a name="l1210"><span class="linenum">1210</span></a>                  }
<a name="l1211"><span class="linenum">1211</span></a>                  if (isset(<a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('password')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/password.html">password</a>)) {
<a name="l1212"><span class="linenum">1212</span></a>                      <a class="var it23937" onMouseOver="hilite(23937)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>[] = <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('password')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/password.html">password</a>;
<a name="l1213"><span class="linenum">1213</span></a>                  }
<a name="l1214"><span class="linenum">1214</span></a>              }
<a name="l1215"><span class="linenum">1215</span></a>  <span class="comment">            // If there is a user override for a setting, ignore the group override.</span>
<a name="l1216"><span class="linenum">1216</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('available')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/available.html">available</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23933" onMouseOver="hilite(23933)" onMouseOut="lolite()" onClick="logVariable('availables')" href="../../_variables/availables.html">$availables</a>)) {
<a name="l1217"><span class="linenum">1217</span></a>                  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('available')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/available.html">available</a> = <a class="phpfunction" onClick="logFunction('min')" href="../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(<a class="var it23933" onMouseOver="hilite(23933)" onMouseOut="lolite()" onClick="logVariable('availables')" href="../../_variables/availables.html">$availables</a>);
<a name="l1218"><span class="linenum">1218</span></a>              }
<a name="l1219"><span class="linenum">1219</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('deadline')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/deadline.html">deadline</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23934" onMouseOver="hilite(23934)" onMouseOut="lolite()" onClick="logVariable('deadlines')" href="../../_variables/deadlines.html">$deadlines</a>)) {
<a name="l1220"><span class="linenum">1220</span></a>                  if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(0, <a class="var it23934" onMouseOver="hilite(23934)" onMouseOut="lolite()" onClick="logVariable('deadlines')" href="../../_variables/deadlines.html">$deadlines</a>)) {
<a name="l1221"><span class="linenum">1221</span></a>                      <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('deadline')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/deadline.html">deadline</a> = 0;
<a name="l1222"><span class="linenum">1222</span></a>                  } else {
<a name="l1223"><span class="linenum">1223</span></a>                      <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('deadline')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/deadline.html">deadline</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it23934" onMouseOver="hilite(23934)" onMouseOut="lolite()" onClick="logVariable('deadlines')" href="../../_variables/deadlines.html">$deadlines</a>);
<a name="l1224"><span class="linenum">1224</span></a>                  }
<a name="l1225"><span class="linenum">1225</span></a>              }
<a name="l1226"><span class="linenum">1226</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timelimit')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23935" onMouseOver="hilite(23935)" onMouseOut="lolite()" onClick="logVariable('timelimits')" href="../../_variables/timelimits.html">$timelimits</a>)) {
<a name="l1227"><span class="linenum">1227</span></a>                  if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(0, <a class="var it23935" onMouseOver="hilite(23935)" onMouseOut="lolite()" onClick="logVariable('timelimits')" href="../../_variables/timelimits.html">$timelimits</a>)) {
<a name="l1228"><span class="linenum">1228</span></a>                      <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timelimit')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a> = 0;
<a name="l1229"><span class="linenum">1229</span></a>                  } else {
<a name="l1230"><span class="linenum">1230</span></a>                      <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timelimit')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it23935" onMouseOver="hilite(23935)" onMouseOut="lolite()" onClick="logVariable('timelimits')" href="../../_variables/timelimits.html">$timelimits</a>);
<a name="l1231"><span class="linenum">1231</span></a>                  }
<a name="l1232"><span class="linenum">1232</span></a>              }
<a name="l1233"><span class="linenum">1233</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('review')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/review.html">review</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23936" onMouseOver="hilite(23936)" onMouseOut="lolite()" onClick="logVariable('reviews')" href="../../_variables/reviews.html">$reviews</a>)) {
<a name="l1234"><span class="linenum">1234</span></a>                  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('review')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/review.html">review</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it23936" onMouseOver="hilite(23936)" onMouseOut="lolite()" onClick="logVariable('reviews')" href="../../_variables/reviews.html">$reviews</a>);
<a name="l1235"><span class="linenum">1235</span></a>              }
<a name="l1236"><span class="linenum">1236</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>)) {
<a name="l1237"><span class="linenum">1237</span></a>                  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>);
<a name="l1238"><span class="linenum">1238</span></a>              }
<a name="l1239"><span class="linenum">1239</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('retake')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/retake.html">retake</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23907" onMouseOver="hilite(23907)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a>)) {
<a name="l1240"><span class="linenum">1240</span></a>                  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('retake')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/retake.html">retake</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it23907" onMouseOver="hilite(23907)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a>);
<a name="l1241"><span class="linenum">1241</span></a>              }
<a name="l1242"><span class="linenum">1242</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/password.html">password</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23937" onMouseOver="hilite(23937)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>)) {
<a name="l1243"><span class="linenum">1243</span></a>                  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/password.html">password</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it23937" onMouseOver="hilite(23937)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>);
<a name="l1244"><span class="linenum">1244</span></a>                  if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23937" onMouseOver="hilite(23937)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>)) {
<a name="l1245"><span class="linenum">1245</span></a>                      <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('extrapasswords')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/extrapasswords.html">extrapasswords</a> = <a class="var it23937" onMouseOver="hilite(23937)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>;
<a name="l1246"><span class="linenum">1246</span></a>                  }
<a name="l1247"><span class="linenum">1247</span></a>              }
<a name="l1248"><span class="linenum">1248</span></a>  
<a name="l1249"><span class="linenum">1249</span></a>          }
<a name="l1250"><span class="linenum">1250</span></a>  
<a name="l1251"><span class="linenum">1251</span></a>  <span class="comment">        // Merge with lesson defaults.</span>
<a name="l1252"><span class="linenum">1252</span></a>          <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a> = array('available', 'deadline', 'timelimit', 'maxattempts', 'review', 'retake');
<a name="l1253"><span class="linenum">1253</span></a>          foreach (<a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>) {
<a name="l1254"><span class="linenum">1254</span></a>              if (isset(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;{<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>})) {
<a name="l1255"><span class="linenum">1255</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;{<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>} = <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;{<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>};
<a name="l1256"><span class="linenum">1256</span></a>              }
<a name="l1257"><span class="linenum">1257</span></a>          }
<a name="l1258"><span class="linenum">1258</span></a>  
<a name="l1259"><span class="linenum">1259</span></a>  <span class="comment">        // Special handling of lesson usepassword and password.</span>
<a name="l1260"><span class="linenum">1260</span></a>          if (isset(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/password.html">password</a>)) {
<a name="l1261"><span class="linenum">1261</span></a>              if (<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/password.html">password</a> == '') {
<a name="l1262"><span class="linenum">1262</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;usepassword = 0;
<a name="l1263"><span class="linenum">1263</span></a>              } else {
<a name="l1264"><span class="linenum">1264</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;usepassword = 1;
<a name="l1265"><span class="linenum">1265</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;password = <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/password.html">password</a>;
<a name="l1266"><span class="linenum">1266</span></a>                  if (isset(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('extrapasswords')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/extrapasswords.html">extrapasswords</a>)) {
<a name="l1267"><span class="linenum">1267</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;extrapasswords = <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('extrapasswords')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/extrapasswords.html">extrapasswords</a>;
<a name="l1268"><span class="linenum">1268</span></a>                  }
<a name="l1269"><span class="linenum">1269</span></a>              }
<a name="l1270"><span class="linenum">1270</span></a>          }
<a name="l1271"><span class="linenum">1271</span></a>      }
<a name="l1272"><span class="linenum">1272</span></a>  
<a name="l1273"><span class="linenum">1273</span></a>      <span class="comment">/**</span>
<a name="l1274"><span class="linenum">1274</span></a>  <span class="comment">     * Fetches messages from the session that may have been set in previous page</span>
<a name="l1275"><span class="linenum">1275</span></a>  <span class="comment">     * actions.</span>
<a name="l1276"><span class="linenum">1276</span></a>  <span class="comment">     *</span>
<a name="l1277"><span class="linenum">1277</span></a>  <span class="comment">     * &lt;code&gt;</span>
<a name="l1278"><span class="linenum">1278</span></a>  <span class="comment">     * // Do not call this method directly instead use</span>
<a name="l1279"><span class="linenum">1279</span></a>  <span class="comment">     * $lesson-&gt;messages;</span>
<a name="l1280"><span class="linenum">1280</span></a>  <span class="comment">     * &lt;/code&gt;</span>
<a name="l1281"><span class="linenum">1281</span></a>  <span class="comment">     *</span>
<a name="l1282"><span class="linenum">1282</span></a>  <span class="comment">     * @return array</span>
<a name="l1283"><span class="linenum">1283</span></a>  <span class="comment">     */</span>
<a name="l1284"><span class="linenum">1284</span></a>      protected function <a class="function" onClick="logFunction('get_messages')" href="../../_functions/get_messages.html" onMouseOver="funcPopup(event,'get_messages')">get_messages</a>() {
<a name="l1285"><span class="linenum">1285</span></a>          global <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>;
<a name="l1286"><span class="linenum">1286</span></a>  
<a name="l1287"><span class="linenum">1287</span></a>          <a class="var it1262" onMouseOver="hilite(1262)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../_variables/messages.html">$messages</a> = array();
<a name="l1288"><span class="linenum">1288</span></a>          if (!empty(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>)) {
<a name="l1289"><span class="linenum">1289</span></a>              <a class="var it1262" onMouseOver="hilite(1262)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../_variables/messages.html">$messages</a> = <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id];
<a name="l1290"><span class="linenum">1290</span></a>              unset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id]);
<a name="l1291"><span class="linenum">1291</span></a>          }
<a name="l1292"><span class="linenum">1292</span></a>  
<a name="l1293"><span class="linenum">1293</span></a>          return <a class="var it1262" onMouseOver="hilite(1262)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../_variables/messages.html">$messages</a>;
<a name="l1294"><span class="linenum">1294</span></a>      }
<a name="l1295"><span class="linenum">1295</span></a>  
<a name="l1296"><span class="linenum">1296</span></a>      <span class="comment">/**</span>
<a name="l1297"><span class="linenum">1297</span></a>  <span class="comment">     * Get all of the attempts for the current user.</span>
<a name="l1298"><span class="linenum">1298</span></a>  <span class="comment">     *</span>
<a name="l1299"><span class="linenum">1299</span></a>  <span class="comment">     * @param int $retries</span>
<a name="l1300"><span class="linenum">1300</span></a>  <span class="comment">     * @param bool $correct Optional: only fetch correct attempts</span>
<a name="l1301"><span class="linenum">1301</span></a>  <span class="comment">     * @param int $pageid Optional: only fetch attempts at the given page</span>
<a name="l1302"><span class="linenum">1302</span></a>  <span class="comment">     * @param int $userid Optional: defaults to the current user if not set</span>
<a name="l1303"><span class="linenum">1303</span></a>  <span class="comment">     * @return array|false</span>
<a name="l1304"><span class="linenum">1304</span></a>  <span class="comment">     */</span>
<a name="l1305"><span class="linenum">1305</span></a>      public function <a class="function" onClick="logFunction('get_attempts')" href="../../_functions/get_attempts.html" onMouseOver="funcPopup(event,'get_attempts')">get_attempts</a>(<a class="var it10063" onMouseOver="hilite(10063)" onMouseOut="lolite()" onClick="logVariable('retries')" href="../../_variables/retries.html">$retries</a>, <a class="var it1779" onMouseOver="hilite(1779)" onMouseOut="lolite()" onClick="logVariable('correct')" href="../../_variables/correct.html">$correct</a>=false, <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>=null, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>=null) {
<a name="l1306"><span class="linenum">1306</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1307"><span class="linenum">1307</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(&quot;lessonid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, &quot;userid&quot;=&gt;<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, &quot;retry&quot;=&gt;<a class="var it10063" onMouseOver="hilite(10063)" onMouseOut="lolite()" onClick="logVariable('retries')" href="../../_variables/retries.html">$retries</a>);
<a name="l1308"><span class="linenum">1308</span></a>          if (<a class="var it1779" onMouseOver="hilite(1779)" onMouseOut="lolite()" onClick="logVariable('correct')" href="../../_variables/correct.html">$correct</a>) {
<a name="l1309"><span class="linenum">1309</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['correct'] = 1;
<a name="l1310"><span class="linenum">1310</span></a>          }
<a name="l1311"><span class="linenum">1311</span></a>          if (<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> !== null) {
<a name="l1312"><span class="linenum">1312</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['pageid'] = <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>;
<a name="l1313"><span class="linenum">1313</span></a>          }
<a name="l1314"><span class="linenum">1314</span></a>          if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> === null) {
<a name="l1315"><span class="linenum">1315</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['userid'] = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1316"><span class="linenum">1316</span></a>          }
<a name="l1317"><span class="linenum">1317</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_attempts', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'timeseen ASC');
<a name="l1318"><span class="linenum">1318</span></a>      }
<a name="l1319"><span class="linenum">1319</span></a>  
<a name="l1320"><span class="linenum">1320</span></a>      <span class="comment">/**</span>
<a name="l1321"><span class="linenum">1321</span></a>  <span class="comment">     * Returns the first page for the lesson or false if there isn't one.</span>
<a name="l1322"><span class="linenum">1322</span></a>  <span class="comment">     *</span>
<a name="l1323"><span class="linenum">1323</span></a>  <span class="comment">     * This method should be called via the magic method __get();</span>
<a name="l1324"><span class="linenum">1324</span></a>  <span class="comment">     * &lt;code&gt;</span>
<a name="l1325"><span class="linenum">1325</span></a>  <span class="comment">     * $firstpage = $lesson-&gt;firstpage;</span>
<a name="l1326"><span class="linenum">1326</span></a>  <span class="comment">     * &lt;/code&gt;</span>
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment">     *</span>
<a name="l1328"><span class="linenum">1328</span></a>  <span class="comment">     * @return lesson_page|bool Returns the lesson_page specialised object or false</span>
<a name="l1329"><span class="linenum">1329</span></a>  <span class="comment">     */</span>
<a name="l1330"><span class="linenum">1330</span></a>      protected function <a class="function" onClick="logFunction('get_firstpage')" href="../../_functions/get_firstpage.html" onMouseOver="funcPopup(event,'get_firstpage')">get_firstpage</a>() {
<a name="l1331"><span class="linenum">1331</span></a>          <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1332"><span class="linenum">1332</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>) &gt; 0) {
<a name="l1333"><span class="linenum">1333</span></a>              foreach (<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l1334"><span class="linenum">1334</span></a>                  if ((int)<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> === 0) {
<a name="l1335"><span class="linenum">1335</span></a>                      return <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>;
<a name="l1336"><span class="linenum">1336</span></a>                  }
<a name="l1337"><span class="linenum">1337</span></a>              }
<a name="l1338"><span class="linenum">1338</span></a>          }
<a name="l1339"><span class="linenum">1339</span></a>          return false;
<a name="l1340"><span class="linenum">1340</span></a>      }
<a name="l1341"><span class="linenum">1341</span></a>  
<a name="l1342"><span class="linenum">1342</span></a>      <span class="comment">/**</span>
<a name="l1343"><span class="linenum">1343</span></a>  <span class="comment">     * Returns the last page for the lesson or false if there isn't one.</span>
<a name="l1344"><span class="linenum">1344</span></a>  <span class="comment">     *</span>
<a name="l1345"><span class="linenum">1345</span></a>  <span class="comment">     * This method should be called via the magic method __get();</span>
<a name="l1346"><span class="linenum">1346</span></a>  <span class="comment">     * &lt;code&gt;</span>
<a name="l1347"><span class="linenum">1347</span></a>  <span class="comment">     * $lastpage = $lesson-&gt;lastpage;</span>
<a name="l1348"><span class="linenum">1348</span></a>  <span class="comment">     * &lt;/code&gt;</span>
<a name="l1349"><span class="linenum">1349</span></a>  <span class="comment">     *</span>
<a name="l1350"><span class="linenum">1350</span></a>  <span class="comment">     * @return lesson_page|bool Returns the lesson_page specialised object or false</span>
<a name="l1351"><span class="linenum">1351</span></a>  <span class="comment">     */</span>
<a name="l1352"><span class="linenum">1352</span></a>      protected function <a class="function" onClick="logFunction('get_lastpage')" href="../../_functions/get_lastpage.html" onMouseOver="funcPopup(event,'get_lastpage')">get_lastpage</a>() {
<a name="l1353"><span class="linenum">1353</span></a>          <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1354"><span class="linenum">1354</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>) &gt; 0) {
<a name="l1355"><span class="linenum">1355</span></a>              foreach (<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l1356"><span class="linenum">1356</span></a>                  if ((int)<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> === 0) {
<a name="l1357"><span class="linenum">1357</span></a>                      return <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>;
<a name="l1358"><span class="linenum">1358</span></a>                  }
<a name="l1359"><span class="linenum">1359</span></a>              }
<a name="l1360"><span class="linenum">1360</span></a>          }
<a name="l1361"><span class="linenum">1361</span></a>          return false;
<a name="l1362"><span class="linenum">1362</span></a>      }
<a name="l1363"><span class="linenum">1363</span></a>  
<a name="l1364"><span class="linenum">1364</span></a>      <span class="comment">/**</span>
<a name="l1365"><span class="linenum">1365</span></a>  <span class="comment">     * Returns the id of the first page of this lesson. (prevpageid = 0)</span>
<a name="l1366"><span class="linenum">1366</span></a>  <span class="comment">     * @return int</span>
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment">     */</span>
<a name="l1368"><span class="linenum">1368</span></a>      protected function <a class="function" onClick="logFunction('get_firstpageid')" href="../../_functions/get_firstpageid.html" onMouseOver="funcPopup(event,'get_firstpageid')">get_firstpageid</a>() {
<a name="l1369"><span class="linenum">1369</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1370"><span class="linenum">1370</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('firstpageid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/firstpageid.html">firstpageid</a> == null) {
<a name="l1371"><span class="linenum">1371</span></a>              if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('loadedallpages')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/loadedallpages.html">loadedallpages</a>) {
<a name="l1372"><span class="linenum">1372</span></a>                  <a class="var it7958" onMouseOver="hilite(7958)" onMouseOut="lolite()" onClick="logVariable('firstpageid')" href="../../_variables/firstpageid.html">$firstpageid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('lesson_pages', 'id', array('lessonid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, 'prevpageid'=&gt;0));
<a name="l1373"><span class="linenum">1373</span></a>                  if (!<a class="var it7958" onMouseOver="hilite(7958)" onMouseOut="lolite()" onClick="logVariable('firstpageid')" href="../../_variables/firstpageid.html">$firstpageid</a>) {
<a name="l1374"><span class="linenum">1374</span></a>                      <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindfirstpage', 'lesson');
<a name="l1375"><span class="linenum">1375</span></a>                  }
<a name="l1376"><span class="linenum">1376</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('firstpageid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/firstpageid.html">firstpageid</a> = <a class="var it7958" onMouseOver="hilite(7958)" onMouseOut="lolite()" onClick="logVariable('firstpageid')" href="../../_variables/firstpageid.html">$firstpageid</a>;
<a name="l1377"><span class="linenum">1377</span></a>              } else {
<a name="l1378"><span class="linenum">1378</span></a>                  <a class="var it19224" onMouseOver="hilite(19224)" onMouseOut="lolite()" onClick="logVariable('firstpage')" href="../../_variables/firstpage.html">$firstpage</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_firstpage')" href="../../_functions/get_firstpage.html" onMouseOver="funcPopup(event,'get_firstpage')">get_firstpage</a>();
<a name="l1379"><span class="linenum">1379</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('firstpageid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/firstpageid.html">firstpageid</a> = <a class="var it19224" onMouseOver="hilite(19224)" onMouseOut="lolite()" onClick="logVariable('firstpage')" href="../../_variables/firstpage.html">$firstpage</a>-&gt;<a onClick="logVariable('id')" class="var it41637" onMouseOver="hilite(41637)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1380"><span class="linenum">1380</span></a>              }
<a name="l1381"><span class="linenum">1381</span></a>          }
<a name="l1382"><span class="linenum">1382</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('firstpageid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/firstpageid.html">firstpageid</a>;
<a name="l1383"><span class="linenum">1383</span></a>      }
<a name="l1384"><span class="linenum">1384</span></a>  
<a name="l1385"><span class="linenum">1385</span></a>      <span class="comment">/**</span>
<a name="l1386"><span class="linenum">1386</span></a>  <span class="comment">     * Returns the id of the last page of this lesson. (nextpageid = 0)</span>
<a name="l1387"><span class="linenum">1387</span></a>  <span class="comment">     * @return int</span>
<a name="l1388"><span class="linenum">1388</span></a>  <span class="comment">     */</span>
<a name="l1389"><span class="linenum">1389</span></a>      public function <a class="function" onClick="logFunction('get_lastpageid')" href="../../_functions/get_lastpageid.html" onMouseOver="funcPopup(event,'get_lastpageid')">get_lastpageid</a>() {
<a name="l1390"><span class="linenum">1390</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1391"><span class="linenum">1391</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastpageid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lastpageid.html">lastpageid</a> == null) {
<a name="l1392"><span class="linenum">1392</span></a>              if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('loadedallpages')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/loadedallpages.html">loadedallpages</a>) {
<a name="l1393"><span class="linenum">1393</span></a>                  <a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('lesson_pages', 'id', array('lessonid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, 'nextpageid'=&gt;0));
<a name="l1394"><span class="linenum">1394</span></a>                  if (!<a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>) {
<a name="l1395"><span class="linenum">1395</span></a>                      <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindlastpage', 'lesson');
<a name="l1396"><span class="linenum">1396</span></a>                  }
<a name="l1397"><span class="linenum">1397</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastpageid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lastpageid.html">lastpageid</a> = <a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>;
<a name="l1398"><span class="linenum">1398</span></a>              } else {
<a name="l1399"><span class="linenum">1399</span></a>                  <a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_lastpage')" href="../../_functions/get_lastpage.html" onMouseOver="funcPopup(event,'get_lastpage')">get_lastpage</a>();
<a name="l1400"><span class="linenum">1400</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastpageid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lastpageid.html">lastpageid</a> = <a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>-&gt;<a onClick="logVariable('id')" class="var it41638" onMouseOver="hilite(41638)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1401"><span class="linenum">1401</span></a>              }
<a name="l1402"><span class="linenum">1402</span></a>          }
<a name="l1403"><span class="linenum">1403</span></a>  
<a name="l1404"><span class="linenum">1404</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastpageid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lastpageid.html">lastpageid</a>;
<a name="l1405"><span class="linenum">1405</span></a>      }
<a name="l1406"><span class="linenum">1406</span></a>  
<a name="l1407"><span class="linenum">1407</span></a>       <span class="comment">/**</span>
<a name="l1408"><span class="linenum">1408</span></a>  <span class="comment">     * Gets the next page id to display after the one that is provided.</span>
<a name="l1409"><span class="linenum">1409</span></a>  <span class="comment">     * @param int $nextpageid</span>
<a name="l1410"><span class="linenum">1410</span></a>  <span class="comment">     * @return bool</span>
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment">     */</span>
<a name="l1412"><span class="linenum">1412</span></a>      public function <a class="function" onClick="logFunction('get_next_page')" href="../../_functions/get_next_page.html" onMouseOver="funcPopup(event,'get_next_page')">get_next_page</a>(<a class="var it2675" onMouseOver="hilite(2675)" onMouseOut="lolite()" onClick="logVariable('nextpageid')" href="../../_variables/nextpageid.html">$nextpageid</a>) {
<a name="l1413"><span class="linenum">1413</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1414"><span class="linenum">1414</span></a>          <a class="var it23940" onMouseOver="hilite(23940)" onMouseOut="lolite()" onClick="logVariable('allpages')" href="../../_variables/allpages.html">$allpages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1415"><span class="linenum">1415</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpagedefault) {
<a name="l1416"><span class="linenum">1416</span></a>  <span class="comment">            // in Flash Card mode...first get number of retakes</span>
<a name="l1417"><span class="linenum">1417</span></a>              <a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, &quot;userid&quot; =&gt; <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1418"><span class="linenum">1418</span></a>              <a class="phpfunction" onClick="logFunction('shuffle')" href="../../_functions/shuffle.html" onMouseOver="phpfuncPopup(event,'shuffle')">shuffle</a>(<a class="var it23940" onMouseOver="hilite(23940)" onMouseOut="lolite()" onClick="logVariable('allpages')" href="../../_variables/allpages.html">$allpages</a>);
<a name="l1419"><span class="linenum">1419</span></a>              <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('found')" href="../../_variables/found.html">$found</a> = false;
<a name="l1420"><span class="linenum">1420</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpagedefault == <a class="constant" onClick="logConstant('LESSON_UNSEENPAGE')" href="../../_constants/LESSON_UNSEENPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENPAGE')">LESSON_UNSEENPAGE</a>) {
<a name="l1421"><span class="linenum">1421</span></a>                  foreach (<a class="var it23940" onMouseOver="hilite(23940)" onMouseOut="lolite()" onClick="logVariable('allpages')" href="../../_variables/allpages.html">$allpages</a> as <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>) {
<a name="l1422"><span class="linenum">1422</span></a>                      if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_attempts&quot;, array(&quot;pageid&quot; =&gt; <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it41639" onMouseOver="hilite(41639)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;userid&quot; =&gt; <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;retry&quot; =&gt; <a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>))) {
<a name="l1423"><span class="linenum">1423</span></a>                          <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('found')" href="../../_variables/found.html">$found</a> = true;
<a name="l1424"><span class="linenum">1424</span></a>                          break;
<a name="l1425"><span class="linenum">1425</span></a>                      }
<a name="l1426"><span class="linenum">1426</span></a>                  }
<a name="l1427"><span class="linenum">1427</span></a>              } elseif (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpagedefault == <a class="constant" onClick="logConstant('LESSON_UNANSWEREDPAGE')" href="../../_constants/LESSON_UNANSWEREDPAGE.html" onMouseOver="constPopup(event,'LESSON_UNANSWEREDPAGE')">LESSON_UNANSWEREDPAGE</a>) {
<a name="l1428"><span class="linenum">1428</span></a>                  foreach (<a class="var it23940" onMouseOver="hilite(23940)" onMouseOut="lolite()" onClick="logVariable('allpages')" href="../../_variables/allpages.html">$allpages</a> as <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>) {
<a name="l1429"><span class="linenum">1429</span></a>                      if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_attempts&quot;, array('pageid' =&gt; <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it41639" onMouseOver="hilite(41639)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid' =&gt; <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'correct' =&gt; 1, 'retry' =&gt; <a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>))) {
<a name="l1430"><span class="linenum">1430</span></a>                          <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('found')" href="../../_variables/found.html">$found</a> = true;
<a name="l1431"><span class="linenum">1431</span></a>                          break;
<a name="l1432"><span class="linenum">1432</span></a>                      }
<a name="l1433"><span class="linenum">1433</span></a>                  }
<a name="l1434"><span class="linenum">1434</span></a>              }
<a name="l1435"><span class="linenum">1435</span></a>              if (<a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('found')" href="../../_variables/found.html">$found</a>) {
<a name="l1436"><span class="linenum">1436</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;maxpages) {
<a name="l1437"><span class="linenum">1437</span></a>  <span class="comment">                    // check number of pages viewed (in the lesson)</span>
<a name="l1438"><span class="linenum">1438</span></a>                      if (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_attempts&quot;, array(&quot;lessonid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, &quot;userid&quot; =&gt; <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;retry&quot; =&gt; <a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>)) &gt;= <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;maxpages) {
<a name="l1439"><span class="linenum">1439</span></a>                          return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;
<a name="l1440"><span class="linenum">1440</span></a>                      }
<a name="l1441"><span class="linenum">1441</span></a>                  }
<a name="l1442"><span class="linenum">1442</span></a>                  return <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it41639" onMouseOver="hilite(41639)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1443"><span class="linenum">1443</span></a>              }
<a name="l1444"><span class="linenum">1444</span></a>          }
<a name="l1445"><span class="linenum">1445</span></a>  <span class="comment">        // In a normal lesson mode</span>
<a name="l1446"><span class="linenum">1446</span></a>          foreach (<a class="var it23940" onMouseOver="hilite(23940)" onMouseOut="lolite()" onClick="logVariable('allpages')" href="../../_variables/allpages.html">$allpages</a> as <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>) {
<a name="l1447"><span class="linenum">1447</span></a>              if ((int)<a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it41639" onMouseOver="hilite(41639)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> === (int)<a class="var it2675" onMouseOver="hilite(2675)" onMouseOut="lolite()" onClick="logVariable('nextpageid')" href="../../_variables/nextpageid.html">$nextpageid</a>) {
<a name="l1448"><span class="linenum">1448</span></a>                  return <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it41639" onMouseOver="hilite(41639)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1449"><span class="linenum">1449</span></a>              }
<a name="l1450"><span class="linenum">1450</span></a>          }
<a name="l1451"><span class="linenum">1451</span></a>          return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;
<a name="l1452"><span class="linenum">1452</span></a>      }
<a name="l1453"><span class="linenum">1453</span></a>  
<a name="l1454"><span class="linenum">1454</span></a>      <span class="comment">/**</span>
<a name="l1455"><span class="linenum">1455</span></a>  <span class="comment">     * Sets a message against the session for this lesson that will displayed next</span>
<a name="l1456"><span class="linenum">1456</span></a>  <span class="comment">     * time the lesson processes messages</span>
<a name="l1457"><span class="linenum">1457</span></a>  <span class="comment">     *</span>
<a name="l1458"><span class="linenum">1458</span></a>  <span class="comment">     * @param string $message</span>
<a name="l1459"><span class="linenum">1459</span></a>  <span class="comment">     * @param string $class</span>
<a name="l1460"><span class="linenum">1460</span></a>  <span class="comment">     * @param string $align</span>
<a name="l1461"><span class="linenum">1461</span></a>  <span class="comment">     * @return bool</span>
<a name="l1462"><span class="linenum">1462</span></a>  <span class="comment">     */</span>
<a name="l1463"><span class="linenum">1463</span></a>      public function <a class="function" onClick="logFunction('add_message')" href="../../_functions/add_message.html" onMouseOver="funcPopup(event,'add_message')">add_message</a>(<a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>, <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>=&quot;notifyproblem&quot;, <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('align')" href="../../_variables/align.html">$align</a>='center') {
<a name="l1464"><span class="linenum">1464</span></a>          global <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>;
<a name="l1465"><span class="linenum">1465</span></a>  
<a name="l1466"><span class="linenum">1466</span></a>          if (empty(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>) || !<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>)) {
<a name="l1467"><span class="linenum">1467</span></a>              <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a> = array();
<a name="l1468"><span class="linenum">1468</span></a>              <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id] = array();
<a name="l1469"><span class="linenum">1469</span></a>          } else if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>)) {
<a name="l1470"><span class="linenum">1470</span></a>              <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id] = array();
<a name="l1471"><span class="linenum">1471</span></a>          }
<a name="l1472"><span class="linenum">1472</span></a>  
<a name="l1473"><span class="linenum">1473</span></a>          <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('lesson_messages')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/lesson_messages.html">lesson_messages</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id][] = array(<a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>, <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>, <a class="var it60" onMouseOver="hilite(60)" onMouseOut="lolite()" onClick="logVariable('align')" href="../../_variables/align.html">$align</a>);
<a name="l1474"><span class="linenum">1474</span></a>  
<a name="l1475"><span class="linenum">1475</span></a>          return true;
<a name="l1476"><span class="linenum">1476</span></a>      }
<a name="l1477"><span class="linenum">1477</span></a>  
<a name="l1478"><span class="linenum">1478</span></a>      <span class="comment">/**</span>
<a name="l1479"><span class="linenum">1479</span></a>  <span class="comment">     * Check if the lesson is accessible at the present time</span>
<a name="l1480"><span class="linenum">1480</span></a>  <span class="comment">     * @return bool True if the lesson is accessible, false otherwise</span>
<a name="l1481"><span class="linenum">1481</span></a>  <span class="comment">     */</span>
<a name="l1482"><span class="linenum">1482</span></a>      public function <a class="function" onClick="logFunction('is_accessible')" href="../../_functions/is_accessible.html" onMouseOver="funcPopup(event,'is_accessible')">is_accessible</a>() {
<a name="l1483"><span class="linenum">1483</span></a>          <a class="var it527" onMouseOver="hilite(527)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;available;
<a name="l1484"><span class="linenum">1484</span></a>          <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('deadline')" href="../../_variables/deadline.html">$deadline</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;deadline;
<a name="l1485"><span class="linenum">1485</span></a>          return ((<a class="var it527" onMouseOver="hilite(527)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a> == 0 || <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() &gt;= <a class="var it527" onMouseOver="hilite(527)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a>) &amp;&amp; (<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('deadline')" href="../../_variables/deadline.html">$deadline</a> == 0 || <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() &lt; <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('deadline')" href="../../_variables/deadline.html">$deadline</a>));
<a name="l1486"><span class="linenum">1486</span></a>      }
<a name="l1487"><span class="linenum">1487</span></a>  
<a name="l1488"><span class="linenum">1488</span></a>      <span class="comment">/**</span>
<a name="l1489"><span class="linenum">1489</span></a>  <span class="comment">     * Starts the lesson time for the current user</span>
<a name="l1490"><span class="linenum">1490</span></a>  <span class="comment">     * @return bool Returns true</span>
<a name="l1491"><span class="linenum">1491</span></a>  <span class="comment">     */</span>
<a name="l1492"><span class="linenum">1492</span></a>      public function <a class="function" onClick="logFunction('start_timer')" href="../../_functions/start_timer.html" onMouseOver="funcPopup(event,'start_timer')">start_timer</a>() {
<a name="l1493"><span class="linenum">1493</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1494"><span class="linenum">1494</span></a>  
<a name="l1495"><span class="linenum">1495</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;id, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;course,
<a name="l1496"><span class="linenum">1496</span></a>              false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1497"><span class="linenum">1497</span></a>  
<a name="l1498"><span class="linenum">1498</span></a>  <span class="comment">        // Trigger lesson started event.</span>
<a name="l1499"><span class="linenum">1499</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('lesson_started')" href="../../_classes/lesson_started.html" onMouseOver="classPopup(event,'lesson_started')">lesson_started</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1500"><span class="linenum">1500</span></a>              'objectid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;id,
<a name="l1501"><span class="linenum">1501</span></a>              'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l1502"><span class="linenum">1502</span></a>              'courseid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;course
<a name="l1503"><span class="linenum">1503</span></a>          ));
<a name="l1504"><span class="linenum">1504</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1505"><span class="linenum">1505</span></a>  
<a name="l1506"><span class="linenum">1506</span></a>          <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('startlesson')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/startlesson.html">startlesson</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id] = true;
<a name="l1507"><span class="linenum">1507</span></a>          <a class="var it10072" onMouseOver="hilite(10072)" onMouseOut="lolite()" onClick="logVariable('startlesson')" href="../../_variables/startlesson.html">$startlesson</a> = new stdClass;
<a name="l1508"><span class="linenum">1508</span></a>          <a class="var it10072" onMouseOver="hilite(10072)" onMouseOut="lolite()" onClick="logVariable('startlesson')" href="../../_variables/startlesson.html">$startlesson</a>-&gt;<a onClick="logVariable('lessonid')" class="var it41640" onMouseOver="hilite(41640)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l1509"><span class="linenum">1509</span></a>          <a class="var it10072" onMouseOver="hilite(10072)" onMouseOut="lolite()" onClick="logVariable('startlesson')" href="../../_variables/startlesson.html">$startlesson</a>-&gt;<a onClick="logVariable('userid')" class="var it41640" onMouseOver="hilite(41640)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1510"><span class="linenum">1510</span></a>          <a class="var it10072" onMouseOver="hilite(10072)" onMouseOut="lolite()" onClick="logVariable('startlesson')" href="../../_variables/startlesson.html">$startlesson</a>-&gt;<a onClick="logVariable('starttime')" class="var it41640" onMouseOver="hilite(41640)" onMouseOut="lolite()" href="../../_variables/starttime.html">starttime</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1511"><span class="linenum">1511</span></a>          <a class="var it10072" onMouseOver="hilite(10072)" onMouseOut="lolite()" onClick="logVariable('startlesson')" href="../../_variables/startlesson.html">$startlesson</a>-&gt;<a onClick="logVariable('lessontime')" class="var it41640" onMouseOver="hilite(41640)" onMouseOut="lolite()" href="../../_variables/lessontime.html">lessontime</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1512"><span class="linenum">1512</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('lesson_timer', <a class="var it10072" onMouseOver="hilite(10072)" onMouseOut="lolite()" onClick="logVariable('startlesson')" href="../../_variables/startlesson.html">$startlesson</a>);
<a name="l1513"><span class="linenum">1513</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;timelimit) {
<a name="l1514"><span class="linenum">1514</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_message')" href="../../_functions/add_message.html" onMouseOver="funcPopup(event,'add_message')">add_message</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('timelimitwarning', 'lesson', <a class="function" onClick="logFunction('format_time')" href="../../_functions/format_time.html" onMouseOver="funcPopup(event,'format_time')">format_time</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;timelimit)), 'center');
<a name="l1515"><span class="linenum">1515</span></a>          }
<a name="l1516"><span class="linenum">1516</span></a>          return true;
<a name="l1517"><span class="linenum">1517</span></a>      }
<a name="l1518"><span class="linenum">1518</span></a>  
<a name="l1519"><span class="linenum">1519</span></a>      <span class="comment">/**</span>
<a name="l1520"><span class="linenum">1520</span></a>  <span class="comment">     * Updates the timer to the current time and returns the new timer object</span>
<a name="l1521"><span class="linenum">1521</span></a>  <span class="comment">     * @param bool $restart If set to true the timer is restarted</span>
<a name="l1522"><span class="linenum">1522</span></a>  <span class="comment">     * @param bool $continue If set to true AND $restart=true then the timer</span>
<a name="l1523"><span class="linenum">1523</span></a>  <span class="comment">     *                        will continue from a previous attempt</span>
<a name="l1524"><span class="linenum">1524</span></a>  <span class="comment">     * @return stdClass The new timer</span>
<a name="l1525"><span class="linenum">1525</span></a>  <span class="comment">     */</span>
<a name="l1526"><span class="linenum">1526</span></a>      public function <a class="function" onClick="logFunction('update_timer')" href="../../_functions/update_timer.html" onMouseOver="funcPopup(event,'update_timer')">update_timer</a>(<a class="var it10074" onMouseOver="hilite(10074)" onMouseOut="lolite()" onClick="logVariable('restart')" href="../../_variables/restart.html">$restart</a>=false, <a class="var it4215" onMouseOver="hilite(4215)" onMouseOut="lolite()" onClick="logVariable('continue')" href="../../_variables/continue.html">$continue</a>=false, <a class="var it23941" onMouseOver="hilite(23941)" onMouseOut="lolite()" onClick="logVariable('endreached')" href="../../_variables/endreached.html">$endreached</a> =false) {
<a name="l1527"><span class="linenum">1527</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1528"><span class="linenum">1528</span></a>  
<a name="l1529"><span class="linenum">1529</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course);
<a name="l1530"><span class="linenum">1530</span></a>  
<a name="l1531"><span class="linenum">1531</span></a>  <span class="comment">        // clock code</span>
<a name="l1532"><span class="linenum">1532</span></a>  <span class="comment">        // get time information for this user</span>
<a name="l1533"><span class="linenum">1533</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(&quot;lessonid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, &quot;userid&quot; =&gt; <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1534"><span class="linenum">1534</span></a>          if (!<a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_timer', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'starttime DESC', '*', 0, 1)) {
<a name="l1535"><span class="linenum">1535</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('start_timer')" href="../../_functions/start_timer.html" onMouseOver="funcPopup(event,'start_timer')">start_timer</a>();
<a name="l1536"><span class="linenum">1536</span></a>              <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_timer', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'starttime DESC', '*', 0, 1);
<a name="l1537"><span class="linenum">1537</span></a>          }
<a name="l1538"><span class="linenum">1538</span></a>          <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a> = <a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>); <span class="comment">// This will get the latest start time record.</span>
<a name="l1539"><span class="linenum">1539</span></a>  
<a name="l1540"><span class="linenum">1540</span></a>          if (<a class="var it10074" onMouseOver="hilite(10074)" onMouseOut="lolite()" onClick="logVariable('restart')" href="../../_variables/restart.html">$restart</a>) {
<a name="l1541"><span class="linenum">1541</span></a>              if (<a class="var it4215" onMouseOver="hilite(4215)" onMouseOut="lolite()" onClick="logVariable('continue')" href="../../_variables/continue.html">$continue</a>) {
<a name="l1542"><span class="linenum">1542</span></a>  <span class="comment">                // continue a previous test, need to update the clock  (think this option is disabled atm)</span>
<a name="l1543"><span class="linenum">1543</span></a>                  <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('starttime')" class="var it41617" onMouseOver="hilite(41617)" onMouseOut="lolite()" href="../../_variables/starttime.html">starttime</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - (<a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('lessontime')" class="var it41617" onMouseOver="hilite(41617)" onMouseOut="lolite()" href="../../_variables/lessontime.html">lessontime</a> - <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('starttime')" class="var it41617" onMouseOver="hilite(41617)" onMouseOut="lolite()" href="../../_variables/starttime.html">starttime</a>);
<a name="l1544"><span class="linenum">1544</span></a>  
<a name="l1545"><span class="linenum">1545</span></a>  <span class="comment">                // Trigger lesson resumed event.</span>
<a name="l1546"><span class="linenum">1546</span></a>                  <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('lesson_resumed')" href="../../_classes/lesson_resumed.html" onMouseOver="classPopup(event,'lesson_resumed')">lesson_resumed</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1547"><span class="linenum">1547</span></a>                      'objectid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id,
<a name="l1548"><span class="linenum">1548</span></a>                      'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l1549"><span class="linenum">1549</span></a>                      'courseid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course
<a name="l1550"><span class="linenum">1550</span></a>                  ));
<a name="l1551"><span class="linenum">1551</span></a>                  <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1552"><span class="linenum">1552</span></a>  
<a name="l1553"><span class="linenum">1553</span></a>              } else {
<a name="l1554"><span class="linenum">1554</span></a>  <span class="comment">                // starting over, so reset the clock</span>
<a name="l1555"><span class="linenum">1555</span></a>                  <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('starttime')" class="var it41617" onMouseOver="hilite(41617)" onMouseOut="lolite()" href="../../_variables/starttime.html">starttime</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1556"><span class="linenum">1556</span></a>  
<a name="l1557"><span class="linenum">1557</span></a>  <span class="comment">                // Trigger lesson restarted event.</span>
<a name="l1558"><span class="linenum">1558</span></a>                  <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('lesson_restarted')" href="../../_classes/lesson_restarted.html" onMouseOver="classPopup(event,'lesson_restarted')">lesson_restarted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1559"><span class="linenum">1559</span></a>                      'objectid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id,
<a name="l1560"><span class="linenum">1560</span></a>                      'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l1561"><span class="linenum">1561</span></a>                      'courseid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course
<a name="l1562"><span class="linenum">1562</span></a>                  ));
<a name="l1563"><span class="linenum">1563</span></a>                  <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1564"><span class="linenum">1564</span></a>  
<a name="l1565"><span class="linenum">1565</span></a>              }
<a name="l1566"><span class="linenum">1566</span></a>          }
<a name="l1567"><span class="linenum">1567</span></a>  
<a name="l1568"><span class="linenum">1568</span></a>          <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('lessontime')" class="var it41617" onMouseOver="hilite(41617)" onMouseOut="lolite()" href="../../_variables/lessontime.html">lessontime</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1569"><span class="linenum">1569</span></a>          <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>-&gt;<a onClick="logVariable('completed')" class="var it41617" onMouseOver="hilite(41617)" onMouseOut="lolite()" href="../../_variables/completed.html">completed</a> = <a class="var it23941" onMouseOver="hilite(23941)" onMouseOut="lolite()" onClick="logVariable('endreached')" href="../../_variables/endreached.html">$endreached</a>;
<a name="l1570"><span class="linenum">1570</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('lesson_timer', <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>);
<a name="l1571"><span class="linenum">1571</span></a>  
<a name="l1572"><span class="linenum">1572</span></a>  <span class="comment">        // Update completion state.</span>
<a name="l1573"><span class="linenum">1573</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;id, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;course,
<a name="l1574"><span class="linenum">1574</span></a>              false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1575"><span class="linenum">1575</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>);
<a name="l1576"><span class="linenum">1576</span></a>          <a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l1577"><span class="linenum">1577</span></a>          if (<a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;completiontimespent &gt; 0) {
<a name="l1578"><span class="linenum">1578</span></a>              <a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('update_state')" href="../../_functions/update_state.html" onMouseOver="funcPopup(event,'update_state')">update_state</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="constant" onClick="logConstant('COMPLETION_COMPLETE')" href="../../_constants/COMPLETION_COMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_COMPLETE')">COMPLETION_COMPLETE</a>);
<a name="l1579"><span class="linenum">1579</span></a>          }
<a name="l1580"><span class="linenum">1580</span></a>          return <a class="var it667" onMouseOver="hilite(667)" onMouseOut="lolite()" onClick="logVariable('timer')" href="../../_variables/timer.html">$timer</a>;
<a name="l1581"><span class="linenum">1581</span></a>      }
<a name="l1582"><span class="linenum">1582</span></a>  
<a name="l1583"><span class="linenum">1583</span></a>      <span class="comment">/**</span>
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment">     * Updates the timer to the current time then stops it by unsetting the user var</span>
<a name="l1585"><span class="linenum">1585</span></a>  <span class="comment">     * @return bool Returns true</span>
<a name="l1586"><span class="linenum">1586</span></a>  <span class="comment">     */</span>
<a name="l1587"><span class="linenum">1587</span></a>      public function <a class="function" onClick="logFunction('stop_timer')" href="../../_functions/stop_timer.html" onMouseOver="funcPopup(event,'stop_timer')">stop_timer</a>() {
<a name="l1588"><span class="linenum">1588</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1589"><span class="linenum">1589</span></a>          unset(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('startlesson')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/startlesson.html">startlesson</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id]);
<a name="l1590"><span class="linenum">1590</span></a>  
<a name="l1591"><span class="linenum">1591</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;id, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;course,
<a name="l1592"><span class="linenum">1592</span></a>              false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1593"><span class="linenum">1593</span></a>  
<a name="l1594"><span class="linenum">1594</span></a>  <span class="comment">        // Trigger lesson ended event.</span>
<a name="l1595"><span class="linenum">1595</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('lesson_ended')" href="../../_classes/lesson_ended.html" onMouseOver="classPopup(event,'lesson_ended')">lesson_ended</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1596"><span class="linenum">1596</span></a>              'objectid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;id,
<a name="l1597"><span class="linenum">1597</span></a>              'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l1598"><span class="linenum">1598</span></a>              'courseid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>()-&gt;course
<a name="l1599"><span class="linenum">1599</span></a>          ));
<a name="l1600"><span class="linenum">1600</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1601"><span class="linenum">1601</span></a>  
<a name="l1602"><span class="linenum">1602</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_timer')" href="../../_functions/update_timer.html" onMouseOver="funcPopup(event,'update_timer')">update_timer</a>(false, false, true);
<a name="l1603"><span class="linenum">1603</span></a>      }
<a name="l1604"><span class="linenum">1604</span></a>  
<a name="l1605"><span class="linenum">1605</span></a>      <span class="comment">/**</span>
<a name="l1606"><span class="linenum">1606</span></a>  <span class="comment">     * Checks to see if the lesson has pages</span>
<a name="l1607"><span class="linenum">1607</span></a>  <span class="comment">     */</span>
<a name="l1608"><span class="linenum">1608</span></a>      public function <a class="function" onClick="logFunction('has_pages')" href="../../_functions/has_pages.html" onMouseOver="funcPopup(event,'has_pages')">has_pages</a>() {
<a name="l1609"><span class="linenum">1609</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1610"><span class="linenum">1610</span></a>          <a class="var it11976" onMouseOver="hilite(11976)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../_variables/pagecount.html">$pagecount</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('lesson_pages', array('lessonid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1611"><span class="linenum">1611</span></a>          return (<a class="var it11976" onMouseOver="hilite(11976)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../_variables/pagecount.html">$pagecount</a>&gt;0);
<a name="l1612"><span class="linenum">1612</span></a>      }
<a name="l1613"><span class="linenum">1613</span></a>  
<a name="l1614"><span class="linenum">1614</span></a>      <span class="comment">/**</span>
<a name="l1615"><span class="linenum">1615</span></a>  <span class="comment">     * Returns the link for the related activity</span>
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment">     * @return array|false</span>
<a name="l1617"><span class="linenum">1617</span></a>  <span class="comment">     */</span>
<a name="l1618"><span class="linenum">1618</span></a>      public function <a class="function" onClick="logFunction('link_for_activitylink')" href="../../_functions/link_for_activitylink.html" onMouseOver="funcPopup(event,'link_for_activitylink')">link_for_activitylink</a>() {
<a name="l1619"><span class="linenum">1619</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1620"><span class="linenum">1620</span></a>          <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_modules', array('id' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;activitylink));
<a name="l1621"><span class="linenum">1621</span></a>          if (<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>) {
<a name="l1622"><span class="linenum">1622</span></a>              <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../../_variables/modname.html">$modname</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('modules', 'name', array('id' =&gt; <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('module')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../../_variables/module.html">module</a>));
<a name="l1623"><span class="linenum">1623</span></a>              if (<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../../_variables/modname.html">$modname</a>) {
<a name="l1624"><span class="linenum">1624</span></a>                  <a class="var it5844" onMouseOver="hilite(5844)" onMouseOut="lolite()" onClick="logVariable('instancename')" href="../../_variables/instancename.html">$instancename</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../../_variables/modname.html">$modname</a>, 'name', array('id' =&gt; <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('instance')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>));
<a name="l1625"><span class="linenum">1625</span></a>                  if (<a class="var it5844" onMouseOver="hilite(5844)" onMouseOut="lolite()" onClick="logVariable('instancename')" href="../../_variables/instancename.html">$instancename</a>) {
<a name="l1626"><span class="linenum">1626</span></a>                      return <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/mod/'.<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../../_variables/modname.html">$modname</a>.'/view.php', array('id'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;activitylink)),
<a name="l1627"><span class="linenum">1627</span></a>                          <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('activitylinkname', 'lesson', <a class="var it5844" onMouseOver="hilite(5844)" onMouseOut="lolite()" onClick="logVariable('instancename')" href="../../_variables/instancename.html">$instancename</a>),
<a name="l1628"><span class="linenum">1628</span></a>                          array('class'=&gt;'centerpadded lessonbutton standardbutton'));
<a name="l1629"><span class="linenum">1629</span></a>                  }
<a name="l1630"><span class="linenum">1630</span></a>              }
<a name="l1631"><span class="linenum">1631</span></a>          }
<a name="l1632"><span class="linenum">1632</span></a>          return '';
<a name="l1633"><span class="linenum">1633</span></a>      }
<a name="l1634"><span class="linenum">1634</span></a>  
<a name="l1635"><span class="linenum">1635</span></a>      <span class="comment">/**</span>
<a name="l1636"><span class="linenum">1636</span></a>  <span class="comment">     * Loads the requested page.</span>
<a name="l1637"><span class="linenum">1637</span></a>  <span class="comment">     *</span>
<a name="l1638"><span class="linenum">1638</span></a>  <span class="comment">     * This function will return the requested page id as either a specialised</span>
<a name="l1639"><span class="linenum">1639</span></a>  <span class="comment">     * lesson_page object OR as a generic lesson_page.</span>
<a name="l1640"><span class="linenum">1640</span></a>  <span class="comment">     * If the page has been loaded previously it will be returned from the pages</span>
<a name="l1641"><span class="linenum">1641</span></a>  <span class="comment">     * array, otherwise it will be loaded from the database first</span>
<a name="l1642"><span class="linenum">1642</span></a>  <span class="comment">     *</span>
<a name="l1643"><span class="linenum">1643</span></a>  <span class="comment">     * @param int $pageid</span>
<a name="l1644"><span class="linenum">1644</span></a>  <span class="comment">     * @return lesson_page A lesson_page object or an object that extends it</span>
<a name="l1645"><span class="linenum">1645</span></a>  <span class="comment">     */</span>
<a name="l1646"><span class="linenum">1646</span></a>      public function <a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>) {
<a name="l1647"><span class="linenum">1647</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/pages.html">pages</a>)) {
<a name="l1648"><span class="linenum">1648</span></a>              <a class="var it384" onMouseOver="hilite(384)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a> = <a class="class" onClick="logClass('lesson_page_type_manager')" href="../../_classes/lesson_page_type_manager.html" onMouseOver="classPopup(event,'lesson_page_type_manager')">lesson_page_type_manager</a>::<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>);
<a name="l1649"><span class="linenum">1649</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/pages.html">pages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>] = <a class="var it384" onMouseOver="hilite(384)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a>-&gt;<a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>);
<a name="l1650"><span class="linenum">1650</span></a>          }
<a name="l1651"><span class="linenum">1651</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/pages.html">pages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>];
<a name="l1652"><span class="linenum">1652</span></a>      }
<a name="l1653"><span class="linenum">1653</span></a>  
<a name="l1654"><span class="linenum">1654</span></a>      <span class="comment">/**</span>
<a name="l1655"><span class="linenum">1655</span></a>  <span class="comment">     * Loads ALL of the pages for this lesson</span>
<a name="l1656"><span class="linenum">1656</span></a>  <span class="comment">     *</span>
<a name="l1657"><span class="linenum">1657</span></a>  <span class="comment">     * @return array An array containing all pages from this lesson</span>
<a name="l1658"><span class="linenum">1658</span></a>  <span class="comment">     */</span>
<a name="l1659"><span class="linenum">1659</span></a>      public function <a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>() {
<a name="l1660"><span class="linenum">1660</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('loadedallpages')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/loadedallpages.html">loadedallpages</a>) {
<a name="l1661"><span class="linenum">1661</span></a>              <a class="var it384" onMouseOver="hilite(384)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a> = <a class="class" onClick="logClass('lesson_page_type_manager')" href="../../_classes/lesson_page_type_manager.html" onMouseOver="classPopup(event,'lesson_page_type_manager')">lesson_page_type_manager</a>::<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>);
<a name="l1662"><span class="linenum">1662</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/pages.html">pages</a> = <a class="var it384" onMouseOver="hilite(384)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>);
<a name="l1663"><span class="linenum">1663</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('loadedallpages')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/loadedallpages.html">loadedallpages</a> = true;
<a name="l1664"><span class="linenum">1664</span></a>          }
<a name="l1665"><span class="linenum">1665</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pages')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/pages.html">pages</a>;
<a name="l1666"><span class="linenum">1666</span></a>      }
<a name="l1667"><span class="linenum">1667</span></a>  
<a name="l1668"><span class="linenum">1668</span></a>      <span class="comment">/**</span>
<a name="l1669"><span class="linenum">1669</span></a>  <span class="comment">     * Determines if a jumpto value is correct or not.</span>
<a name="l1670"><span class="linenum">1670</span></a>  <span class="comment">     *</span>
<a name="l1671"><span class="linenum">1671</span></a>  <span class="comment">     * returns true if jumpto page is (logically) after the pageid page or</span>
<a name="l1672"><span class="linenum">1672</span></a>  <span class="comment">     * if the jumpto value is a special value.  Returns false in all other cases.</span>
<a name="l1673"><span class="linenum">1673</span></a>  <span class="comment">     *</span>
<a name="l1674"><span class="linenum">1674</span></a>  <span class="comment">     * @param int $pageid Id of the page from which you are jumping from.</span>
<a name="l1675"><span class="linenum">1675</span></a>  <span class="comment">     * @param int $jumpto The jumpto number.</span>
<a name="l1676"><span class="linenum">1676</span></a>  <span class="comment">     * @return boolean True or false after a series of tests.</span>
<a name="l1677"><span class="linenum">1677</span></a>  <span class="comment">     **/</span>
<a name="l1678"><span class="linenum">1678</span></a>      public function <a class="function" onClick="logFunction('jumpto_is_correct')" href="../../_functions/jumpto_is_correct.html" onMouseOver="funcPopup(event,'jumpto_is_correct')">jumpto_is_correct</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>) {
<a name="l1679"><span class="linenum">1679</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1680"><span class="linenum">1680</span></a>  
<a name="l1681"><span class="linenum">1681</span></a>  <span class="comment">        // first test the special values</span>
<a name="l1682"><span class="linenum">1682</span></a>          if (!<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>) {
<a name="l1683"><span class="linenum">1683</span></a>  <span class="comment">            // same page</span>
<a name="l1684"><span class="linenum">1684</span></a>              return false;
<a name="l1685"><span class="linenum">1685</span></a>          } elseif (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>) {
<a name="l1686"><span class="linenum">1686</span></a>              return true;
<a name="l1687"><span class="linenum">1687</span></a>          } elseif (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_UNSEENBRANCHPAGE')" href="../../_constants/LESSON_UNSEENBRANCHPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENBRANCHPAGE')">LESSON_UNSEENBRANCHPAGE</a>) {
<a name="l1688"><span class="linenum">1688</span></a>              return true;
<a name="l1689"><span class="linenum">1689</span></a>          } elseif (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_RANDOMPAGE')" href="../../_constants/LESSON_RANDOMPAGE.html" onMouseOver="constPopup(event,'LESSON_RANDOMPAGE')">LESSON_RANDOMPAGE</a>) {
<a name="l1690"><span class="linenum">1690</span></a>              return true;
<a name="l1691"><span class="linenum">1691</span></a>          } elseif (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_CLUSTERJUMP')" href="../../_constants/LESSON_CLUSTERJUMP.html" onMouseOver="constPopup(event,'LESSON_CLUSTERJUMP')">LESSON_CLUSTERJUMP</a>) {
<a name="l1692"><span class="linenum">1692</span></a>              return true;
<a name="l1693"><span class="linenum">1693</span></a>          } elseif (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>) {
<a name="l1694"><span class="linenum">1694</span></a>              return true;
<a name="l1695"><span class="linenum">1695</span></a>          }
<a name="l1696"><span class="linenum">1696</span></a>  
<a name="l1697"><span class="linenum">1697</span></a>          <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1698"><span class="linenum">1698</span></a>          <a class="var it23942" onMouseOver="hilite(23942)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a> = <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;nextpageid;
<a name="l1699"><span class="linenum">1699</span></a>          while (<a class="var it23942" onMouseOver="hilite(23942)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a> != 0) {
<a name="l1700"><span class="linenum">1700</span></a>              if (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="var it23942" onMouseOver="hilite(23942)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a>) {
<a name="l1701"><span class="linenum">1701</span></a>                  return true;
<a name="l1702"><span class="linenum">1702</span></a>              }
<a name="l1703"><span class="linenum">1703</span></a>              <a class="var it23942" onMouseOver="hilite(23942)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a> = <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it23942" onMouseOver="hilite(23942)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a>]-&gt;nextpageid;
<a name="l1704"><span class="linenum">1704</span></a>          }
<a name="l1705"><span class="linenum">1705</span></a>          return false;
<a name="l1706"><span class="linenum">1706</span></a>      }
<a name="l1707"><span class="linenum">1707</span></a>  
<a name="l1708"><span class="linenum">1708</span></a>      <span class="comment">/**</span>
<a name="l1709"><span class="linenum">1709</span></a>  <span class="comment">     * Returns the time a user has remaining on this lesson</span>
<a name="l1710"><span class="linenum">1710</span></a>  <span class="comment">     * @param int $starttime Starttime timestamp</span>
<a name="l1711"><span class="linenum">1711</span></a>  <span class="comment">     * @return string</span>
<a name="l1712"><span class="linenum">1712</span></a>  <span class="comment">     */</span>
<a name="l1713"><span class="linenum">1713</span></a>      public function <a class="function" onClick="logFunction('time_remaining')" href="../../_functions/time_remaining.html" onMouseOver="funcPopup(event,'time_remaining')">time_remaining</a>(<a class="var it2488" onMouseOver="hilite(2488)" onMouseOut="lolite()" onClick="logVariable('starttime')" href="../../_variables/starttime.html">$starttime</a>) {
<a name="l1714"><span class="linenum">1714</span></a>          <a class="var it5433" onMouseOver="hilite(5433)" onMouseOut="lolite()" onClick="logVariable('timeleft')" href="../../_variables/timeleft.html">$timeleft</a> = <a class="var it2488" onMouseOver="hilite(2488)" onMouseOut="lolite()" onClick="logVariable('starttime')" href="../../_variables/starttime.html">$starttime</a> + <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;timelimit - <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1715"><span class="linenum">1715</span></a>          <a class="var it1307" onMouseOver="hilite(1307)" onMouseOut="lolite()" onClick="logVariable('hours')" href="../../_variables/hours.html">$hours</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>(<a class="var it5433" onMouseOver="hilite(5433)" onMouseOut="lolite()" onClick="logVariable('timeleft')" href="../../_variables/timeleft.html">$timeleft</a>/3600);
<a name="l1716"><span class="linenum">1716</span></a>          <a class="var it5433" onMouseOver="hilite(5433)" onMouseOut="lolite()" onClick="logVariable('timeleft')" href="../../_variables/timeleft.html">$timeleft</a> = <a class="var it5433" onMouseOver="hilite(5433)" onMouseOut="lolite()" onClick="logVariable('timeleft')" href="../../_variables/timeleft.html">$timeleft</a> - (<a class="var it1307" onMouseOver="hilite(1307)" onMouseOut="lolite()" onClick="logVariable('hours')" href="../../_variables/hours.html">$hours</a> * 3600);
<a name="l1717"><span class="linenum">1717</span></a>          <a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>(<a class="var it5433" onMouseOver="hilite(5433)" onMouseOut="lolite()" onClick="logVariable('timeleft')" href="../../_variables/timeleft.html">$timeleft</a>/60);
<a name="l1718"><span class="linenum">1718</span></a>          <a class="var it6340" onMouseOver="hilite(6340)" onMouseOut="lolite()" onClick="logVariable('secs')" href="../../_variables/secs.html">$secs</a> = <a class="var it5433" onMouseOver="hilite(5433)" onMouseOut="lolite()" onClick="logVariable('timeleft')" href="../../_variables/timeleft.html">$timeleft</a> - (<a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a> * 60);
<a name="l1719"><span class="linenum">1719</span></a>  
<a name="l1720"><span class="linenum">1720</span></a>          if (<a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a> &lt; 10) {
<a name="l1721"><span class="linenum">1721</span></a>              <a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a> = &quot;0<a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a>&quot;;
<a name="l1722"><span class="linenum">1722</span></a>          }
<a name="l1723"><span class="linenum">1723</span></a>          if (<a class="var it6340" onMouseOver="hilite(6340)" onMouseOut="lolite()" onClick="logVariable('secs')" href="../../_variables/secs.html">$secs</a> &lt; 10) {
<a name="l1724"><span class="linenum">1724</span></a>              <a class="var it6340" onMouseOver="hilite(6340)" onMouseOut="lolite()" onClick="logVariable('secs')" href="../../_variables/secs.html">$secs</a> = &quot;0<a class="var it6340" onMouseOver="hilite(6340)" onMouseOut="lolite()" onClick="logVariable('secs')" href="../../_variables/secs.html">$secs</a>&quot;;
<a name="l1725"><span class="linenum">1725</span></a>          }
<a name="l1726"><span class="linenum">1726</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>   = array();
<a name="l1727"><span class="linenum">1727</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>[] = <a class="var it1307" onMouseOver="hilite(1307)" onMouseOut="lolite()" onClick="logVariable('hours')" href="../../_variables/hours.html">$hours</a>;
<a name="l1728"><span class="linenum">1728</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>[] = <a class="var it1308" onMouseOver="hilite(1308)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a>;
<a name="l1729"><span class="linenum">1729</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>[] = <a class="var it6340" onMouseOver="hilite(6340)" onMouseOut="lolite()" onClick="logVariable('secs')" href="../../_variables/secs.html">$secs</a>;
<a name="l1730"><span class="linenum">1730</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(':', <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>);
<a name="l1731"><span class="linenum">1731</span></a>          return <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>;
<a name="l1732"><span class="linenum">1732</span></a>      }
<a name="l1733"><span class="linenum">1733</span></a>  
<a name="l1734"><span class="linenum">1734</span></a>      <span class="comment">/**</span>
<a name="l1735"><span class="linenum">1735</span></a>  <span class="comment">     * Interprets LESSON_CLUSTERJUMP jumpto value.</span>
<a name="l1736"><span class="linenum">1736</span></a>  <span class="comment">     *</span>
<a name="l1737"><span class="linenum">1737</span></a>  <span class="comment">     * This will select a page randomly</span>
<a name="l1738"><span class="linenum">1738</span></a>  <span class="comment">     * and the page selected will be inbetween a cluster page and end of clutter or end of lesson</span>
<a name="l1739"><span class="linenum">1739</span></a>  <span class="comment">     * and the page selected will be a page that has not been viewed already</span>
<a name="l1740"><span class="linenum">1740</span></a>  <span class="comment">     * and if any pages are within a branch table or end of branch then only 1 page within</span>
<a name="l1741"><span class="linenum">1741</span></a>  <span class="comment">     * the branch table or end of branch will be randomly selected (sub clustering).</span>
<a name="l1742"><span class="linenum">1742</span></a>  <span class="comment">     *</span>
<a name="l1743"><span class="linenum">1743</span></a>  <span class="comment">     * @param int $pageid Id of the current page from which we are jumping from.</span>
<a name="l1744"><span class="linenum">1744</span></a>  <span class="comment">     * @param int $userid Id of the user.</span>
<a name="l1745"><span class="linenum">1745</span></a>  <span class="comment">     * @return int The id of the next page.</span>
<a name="l1746"><span class="linenum">1746</span></a>  <span class="comment">     **/</span>
<a name="l1747"><span class="linenum">1747</span></a>      public function <a class="function" onClick="logFunction('cluster_jump')" href="../../_functions/cluster_jump.html" onMouseOver="funcPopup(event,'cluster_jump')">cluster_jump</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>=null) {
<a name="l1748"><span class="linenum">1748</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l1749"><span class="linenum">1749</span></a>  
<a name="l1750"><span class="linenum">1750</span></a>          if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>===null) {
<a name="l1751"><span class="linenum">1751</span></a>              <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1752"><span class="linenum">1752</span></a>          }
<a name="l1753"><span class="linenum">1753</span></a>  <span class="comment">        // get the number of retakes</span>
<a name="l1754"><span class="linenum">1754</span></a>          if (!<a class="var it23907" onMouseOver="hilite(23907)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, &quot;userid&quot;=&gt;<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>))) {
<a name="l1755"><span class="linenum">1755</span></a>              <a class="var it23907" onMouseOver="hilite(23907)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a> = 0;
<a name="l1756"><span class="linenum">1756</span></a>          }
<a name="l1757"><span class="linenum">1757</span></a>  <span class="comment">        // get all the lesson_attempts aka what the user has seen</span>
<a name="l1758"><span class="linenum">1758</span></a>          <a class="var it23909" onMouseOver="hilite(23909)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a> = array();
<a name="l1759"><span class="linenum">1759</span></a>          if (<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_attempts')" href="../../_functions/get_attempts.html" onMouseOver="funcPopup(event,'get_attempts')">get_attempts</a>(<a class="var it23907" onMouseOver="hilite(23907)" onMouseOut="lolite()" onClick="logVariable('retakes')" href="../../_variables/retakes.html">$retakes</a>)) {
<a name="l1760"><span class="linenum">1760</span></a>              foreach (<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> as <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>) {
<a name="l1761"><span class="linenum">1761</span></a>                  <a class="var it23909" onMouseOver="hilite(23909)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>[<a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('pageid')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>] = <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('pageid')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>;
<a name="l1762"><span class="linenum">1762</span></a>              }
<a name="l1763"><span class="linenum">1763</span></a>  
<a name="l1764"><span class="linenum">1764</span></a>          }
<a name="l1765"><span class="linenum">1765</span></a>  
<a name="l1766"><span class="linenum">1766</span></a>  <span class="comment">        // get the lesson pages</span>
<a name="l1767"><span class="linenum">1767</span></a>          <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1768"><span class="linenum">1768</span></a>  <span class="comment">        // find the start of the cluster</span>
<a name="l1769"><span class="linenum">1769</span></a>          while (<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> != 0) { // this condition should not be satisfied... should be a cluster page
<a name="l1770"><span class="linenum">1770</span></a>              if (<a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_CLUSTER')" href="../../_constants/LESSON_PAGE_CLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_CLUSTER')">LESSON_PAGE_CLUSTER</a>) {
<a name="l1771"><span class="linenum">1771</span></a>                  break;
<a name="l1772"><span class="linenum">1772</span></a>              }
<a name="l1773"><span class="linenum">1773</span></a>              <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;prevpageid;
<a name="l1774"><span class="linenum">1774</span></a>          }
<a name="l1775"><span class="linenum">1775</span></a>  
<a name="l1776"><span class="linenum">1776</span></a>          <a class="var it23943" onMouseOver="hilite(23943)" onMouseOut="lolite()" onClick="logVariable('clusterpages')" href="../../_variables/clusterpages.html">$clusterpages</a> = array();
<a name="l1777"><span class="linenum">1777</span></a>          <a class="var it23943" onMouseOver="hilite(23943)" onMouseOut="lolite()" onClick="logVariable('clusterpages')" href="../../_variables/clusterpages.html">$clusterpages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_sub_pages_of')" href="../../_functions/get_sub_pages_of.html" onMouseOver="funcPopup(event,'get_sub_pages_of')">get_sub_pages_of</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFCLUSTER')" href="../../_constants/LESSON_PAGE_ENDOFCLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFCLUSTER')">LESSON_PAGE_ENDOFCLUSTER</a>));
<a name="l1778"><span class="linenum">1778</span></a>          <a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a> = array();
<a name="l1779"><span class="linenum">1779</span></a>          foreach (<a class="var it23943" onMouseOver="hilite(23943)" onMouseOut="lolite()" onClick="logVariable('clusterpages')" href="../../_variables/clusterpages.html">$clusterpages</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>=&gt;<a class="var it5441" onMouseOver="hilite(5441)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>) {
<a name="l1780"><span class="linenum">1780</span></a>  <span class="comment">            // Remove the page if  it is in a branch table or is an endofbranch.</span>
<a name="l1781"><span class="linenum">1781</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_sub_page_of_type')" href="../../_functions/is_sub_page_of_type.html" onMouseOver="funcPopup(event,'is_sub_page_of_type')">is_sub_page_of_type</a>(<a class="var it5441" onMouseOver="hilite(5441)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>-&gt;<a onClick="logVariable('id')" class="var it41641" onMouseOver="hilite(41641)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1782"><span class="linenum">1782</span></a>                      array(<a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>), array(<a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>, <a class="constant" onClick="logConstant('LESSON_PAGE_CLUSTER')" href="../../_constants/LESSON_PAGE_CLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_CLUSTER')">LESSON_PAGE_CLUSTER</a>))
<a name="l1783"><span class="linenum">1783</span></a>                      || <a class="var it5441" onMouseOver="hilite(5441)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>-&gt;<a onClick="logVariable('qtype')" class="var it41641" onMouseOver="hilite(41641)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> == <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>) {
<a name="l1784"><span class="linenum">1784</span></a>                  unset(<a class="var it23943" onMouseOver="hilite(23943)" onMouseOut="lolite()" onClick="logVariable('clusterpages')" href="../../_variables/clusterpages.html">$clusterpages</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]);
<a name="l1785"><span class="linenum">1785</span></a>              } else if (<a class="var it5441" onMouseOver="hilite(5441)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>-&gt;<a onClick="logVariable('qtype')" class="var it41641" onMouseOver="hilite(41641)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> == <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>) {
<a name="l1786"><span class="linenum">1786</span></a>  <span class="comment">                // If branchtable, check to see if any pages inside have been viewed.</span>
<a name="l1787"><span class="linenum">1787</span></a>                  <a class="var it23944" onMouseOver="hilite(23944)" onMouseOut="lolite()" onClick="logVariable('branchpages')" href="../../_variables/branchpages.html">$branchpages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_sub_pages_of')" href="../../_functions/get_sub_pages_of.html" onMouseOver="funcPopup(event,'get_sub_pages_of')">get_sub_pages_of</a>(<a class="var it5441" onMouseOver="hilite(5441)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>-&gt;<a onClick="logVariable('id')" class="var it41641" onMouseOver="hilite(41641)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>, <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>));
<a name="l1788"><span class="linenum">1788</span></a>                  <a class="var it3085" onMouseOver="hilite(3085)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../_variables/flag.html">$flag</a> = true;
<a name="l1789"><span class="linenum">1789</span></a>                  foreach (<a class="var it23944" onMouseOver="hilite(23944)" onMouseOut="lolite()" onClick="logVariable('branchpages')" href="../../_variables/branchpages.html">$branchpages</a> as <a class="var it23945" onMouseOver="hilite(23945)" onMouseOut="lolite()" onClick="logVariable('branchpage')" href="../../_variables/branchpage.html">$branchpage</a>) {
<a name="l1790"><span class="linenum">1790</span></a>                      if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it23945" onMouseOver="hilite(23945)" onMouseOut="lolite()" onClick="logVariable('branchpage')" href="../../_variables/branchpage.html">$branchpage</a>-&gt;<a onClick="logVariable('id')" class="var it41566" onMouseOver="hilite(41566)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it23909" onMouseOver="hilite(23909)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>)) {  // Check if any of the pages have been viewed.
<a name="l1791"><span class="linenum">1791</span></a>                          <a class="var it3085" onMouseOver="hilite(3085)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../_variables/flag.html">$flag</a> = false;
<a name="l1792"><span class="linenum">1792</span></a>                      }
<a name="l1793"><span class="linenum">1793</span></a>                  }
<a name="l1794"><span class="linenum">1794</span></a>                  if (<a class="var it3085" onMouseOver="hilite(3085)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../_variables/flag.html">$flag</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23944" onMouseOver="hilite(23944)" onMouseOut="lolite()" onClick="logVariable('branchpages')" href="../../_variables/branchpages.html">$branchpages</a>) &gt; 0) {
<a name="l1795"><span class="linenum">1795</span></a>  <span class="comment">                    // Add branch table.</span>
<a name="l1796"><span class="linenum">1796</span></a>                      <a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[] = <a class="var it5441" onMouseOver="hilite(5441)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>;
<a name="l1797"><span class="linenum">1797</span></a>                  }
<a name="l1798"><span class="linenum">1798</span></a>              } elseif (<a class="var it5441" onMouseOver="hilite(5441)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>-&gt;<a class="function" onClick="logFunction('is_unseen')" href="../../_functions/is_unseen.html" onMouseOver="funcPopup(event,'is_unseen')">is_unseen</a>(<a class="var it23909" onMouseOver="hilite(23909)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>)) {
<a name="l1799"><span class="linenum">1799</span></a>                  <a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[] = <a class="var it5441" onMouseOver="hilite(5441)" onMouseOut="lolite()" onClick="logVariable('cluster')" href="../../_variables/cluster.html">$cluster</a>;
<a name="l1800"><span class="linenum">1800</span></a>              }
<a name="l1801"><span class="linenum">1801</span></a>          }
<a name="l1802"><span class="linenum">1802</span></a>  
<a name="l1803"><span class="linenum">1803</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>) &gt; 0) {
<a name="l1804"><span class="linenum">1804</span></a>  <span class="comment">            // it does not contain elements, then use exitjump, otherwise find out next page/branch</span>
<a name="l1805"><span class="linenum">1805</span></a>              <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a> = <a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>[<a class="phpfunction" onClick="logFunction('rand')" href="../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5442" onMouseOver="hilite(5442)" onMouseOut="lolite()" onClick="logVariable('unseen')" href="../../_variables/unseen.html">$unseen</a>)-1)];
<a name="l1806"><span class="linenum">1806</span></a>              if (<a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('qtype')" class="var it41639" onMouseOver="hilite(41639)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> == <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>) {
<a name="l1807"><span class="linenum">1807</span></a>  <span class="comment">                // if branch table, then pick a random page inside of it</span>
<a name="l1808"><span class="linenum">1808</span></a>                  <a class="var it23944" onMouseOver="hilite(23944)" onMouseOut="lolite()" onClick="logVariable('branchpages')" href="../../_variables/branchpages.html">$branchpages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_sub_pages_of')" href="../../_functions/get_sub_pages_of.html" onMouseOver="funcPopup(event,'get_sub_pages_of')">get_sub_pages_of</a>(<a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it41639" onMouseOver="hilite(41639)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>, <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>));
<a name="l1809"><span class="linenum">1809</span></a>                  return <a class="var it23944" onMouseOver="hilite(23944)" onMouseOut="lolite()" onClick="logVariable('branchpages')" href="../../_variables/branchpages.html">$branchpages</a>[<a class="phpfunction" onClick="logFunction('rand')" href="../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23944" onMouseOver="hilite(23944)" onMouseOut="lolite()" onClick="logVariable('branchpages')" href="../../_variables/branchpages.html">$branchpages</a>)-1)]-&gt;id;
<a name="l1810"><span class="linenum">1810</span></a>              } else { // otherwise, return the page's id
<a name="l1811"><span class="linenum">1811</span></a>                  return <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it41639" onMouseOver="hilite(41639)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1812"><span class="linenum">1812</span></a>              }
<a name="l1813"><span class="linenum">1813</span></a>          } else {
<a name="l1814"><span class="linenum">1814</span></a>  <span class="comment">            // seen all there is to see, leave the cluster</span>
<a name="l1815"><span class="linenum">1815</span></a>              if (<a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it23943" onMouseOver="hilite(23943)" onMouseOut="lolite()" onClick="logVariable('clusterpages')" href="../../_variables/clusterpages.html">$clusterpages</a>)-&gt;nextpageid == 0) {
<a name="l1816"><span class="linenum">1816</span></a>                  return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;
<a name="l1817"><span class="linenum">1817</span></a>              } else {
<a name="l1818"><span class="linenum">1818</span></a>                  <a class="var it23946" onMouseOver="hilite(23946)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a> = <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>;
<a name="l1819"><span class="linenum">1819</span></a>                  while (<a class="var it23946" onMouseOver="hilite(23946)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a> != 0) { // This condition should not be satisfied... should be an end of cluster page.
<a name="l1820"><span class="linenum">1820</span></a>                      if (<a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it23946" onMouseOver="hilite(23946)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFCLUSTER')" href="../../_constants/LESSON_PAGE_ENDOFCLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFCLUSTER')">LESSON_PAGE_ENDOFCLUSTER</a>) {
<a name="l1821"><span class="linenum">1821</span></a>                          break;
<a name="l1822"><span class="linenum">1822</span></a>                      }
<a name="l1823"><span class="linenum">1823</span></a>                      <a class="var it23946" onMouseOver="hilite(23946)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a> = <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it23946" onMouseOver="hilite(23946)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a>]-&gt;nextpageid;
<a name="l1824"><span class="linenum">1824</span></a>                  }
<a name="l1825"><span class="linenum">1825</span></a>                  <a class="var it23947" onMouseOver="hilite(23947)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(&quot;lesson_answers&quot;, &quot;jumpto&quot;, array(&quot;pageid&quot; =&gt; <a class="var it23946" onMouseOver="hilite(23946)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a>, &quot;lessonid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1826"><span class="linenum">1826</span></a>                  if (<a class="var it23947" onMouseOver="hilite(23947)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> == <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>) {
<a name="l1827"><span class="linenum">1827</span></a>                      <a class="var it23947" onMouseOver="hilite(23947)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> = <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it23946" onMouseOver="hilite(23946)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a>]-&gt;nextpageid;
<a name="l1828"><span class="linenum">1828</span></a>                  }
<a name="l1829"><span class="linenum">1829</span></a>                  if (<a class="var it23947" onMouseOver="hilite(23947)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> == 0) {
<a name="l1830"><span class="linenum">1830</span></a>                      return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;
<a name="l1831"><span class="linenum">1831</span></a>                  } else if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it23947" onMouseOver="hilite(23947)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a>, array(<a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>, <a class="constant" onClick="logConstant('LESSON_PREVIOUSPAGE')" href="../../_constants/LESSON_PREVIOUSPAGE.html" onMouseOver="constPopup(event,'LESSON_PREVIOUSPAGE')">LESSON_PREVIOUSPAGE</a>))) {
<a name="l1832"><span class="linenum">1832</span></a>                      return <a class="var it23947" onMouseOver="hilite(23947)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a>;
<a name="l1833"><span class="linenum">1833</span></a>                  } else {
<a name="l1834"><span class="linenum">1834</span></a>                      if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it23947" onMouseOver="hilite(23947)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a>, <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>)) {
<a name="l1835"><span class="linenum">1835</span></a>                          <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('found')" href="../../_variables/found.html">$found</a> = false;
<a name="l1836"><span class="linenum">1836</span></a>                          foreach (<a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a> as <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l1837"><span class="linenum">1837</span></a>                              if (<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> === <a class="var it23946" onMouseOver="hilite(23946)" onMouseOut="lolite()" onClick="logVariable('clusterendid')" href="../../_variables/clusterendid.html">$clusterendid</a>) {
<a name="l1838"><span class="linenum">1838</span></a>                                  <a class="var it1608" onMouseOver="hilite(1608)" onMouseOut="lolite()" onClick="logVariable('found')" href="../../_variables/found.html">$found</a> = true;
<a name="l1839"><span class="linenum">1839</span></a>                              } else if (<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('qtype')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> == <a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFCLUSTER')" href="../../_constants/LESSON_PAGE_ENDOFCLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFCLUSTER')">LESSON_PAGE_ENDOFCLUSTER</a>) {
<a name="l1840"><span class="linenum">1840</span></a>                                  <a class="var it23947" onMouseOver="hilite(23947)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(&quot;lesson_answers&quot;, &quot;jumpto&quot;, array(&quot;pageid&quot; =&gt; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;lessonid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l1841"><span class="linenum">1841</span></a>                                  if (<a class="var it23947" onMouseOver="hilite(23947)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> == <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>) {
<a name="l1842"><span class="linenum">1842</span></a>                                      <a class="var it23947" onMouseOver="hilite(23947)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a> = <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]-&gt;nextpageid;
<a name="l1843"><span class="linenum">1843</span></a>                                  }
<a name="l1844"><span class="linenum">1844</span></a>                                  break;
<a name="l1845"><span class="linenum">1845</span></a>                              }
<a name="l1846"><span class="linenum">1846</span></a>                          }
<a name="l1847"><span class="linenum">1847</span></a>                      }
<a name="l1848"><span class="linenum">1848</span></a>                      if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it23947" onMouseOver="hilite(23947)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a>, <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>)) {
<a name="l1849"><span class="linenum">1849</span></a>                          return <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>;
<a name="l1850"><span class="linenum">1850</span></a>                      }
<a name="l1851"><span class="linenum">1851</span></a>                      return <a class="var it23947" onMouseOver="hilite(23947)" onMouseOut="lolite()" onClick="logVariable('exitjump')" href="../../_variables/exitjump.html">$exitjump</a>;
<a name="l1852"><span class="linenum">1852</span></a>                  }
<a name="l1853"><span class="linenum">1853</span></a>              }
<a name="l1854"><span class="linenum">1854</span></a>          }
<a name="l1855"><span class="linenum">1855</span></a>      }
<a name="l1856"><span class="linenum">1856</span></a>  
<a name="l1857"><span class="linenum">1857</span></a>      <span class="comment">/**</span>
<a name="l1858"><span class="linenum">1858</span></a>  <span class="comment">     * Finds all pages that appear to be a subtype of the provided pageid until</span>
<a name="l1859"><span class="linenum">1859</span></a>  <span class="comment">     * an end point specified within $ends is encountered or no more pages exist</span>
<a name="l1860"><span class="linenum">1860</span></a>  <span class="comment">     *</span>
<a name="l1861"><span class="linenum">1861</span></a>  <span class="comment">     * @param int $pageid</span>
<a name="l1862"><span class="linenum">1862</span></a>  <span class="comment">     * @param array $ends An array of LESSON_PAGE_* types that signify an end of</span>
<a name="l1863"><span class="linenum">1863</span></a>  <span class="comment">     *               the subtype</span>
<a name="l1864"><span class="linenum">1864</span></a>  <span class="comment">     * @return array An array of specialised lesson_page objects</span>
<a name="l1865"><span class="linenum">1865</span></a>  <span class="comment">     */</span>
<a name="l1866"><span class="linenum">1866</span></a>      public function <a class="function" onClick="logFunction('get_sub_pages_of')" href="../../_functions/get_sub_pages_of.html" onMouseOver="funcPopup(event,'get_sub_pages_of')">get_sub_pages_of</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array <a class="var it23948" onMouseOver="hilite(23948)" onMouseOut="lolite()" onClick="logVariable('ends')" href="../../_variables/ends.html">$ends</a>) {
<a name="l1867"><span class="linenum">1867</span></a>          <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1868"><span class="linenum">1868</span></a>          <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;nextpageid;  <span class="comment">// move to the first page after the branch table</span>
<a name="l1869"><span class="linenum">1869</span></a>          <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = array();
<a name="l1870"><span class="linenum">1870</span></a>  
<a name="l1871"><span class="linenum">1871</span></a>          while (true) {
<a name="l1872"><span class="linenum">1872</span></a>              if (<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> == 0 || <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype, <a class="var it23948" onMouseOver="hilite(23948)" onMouseOut="lolite()" onClick="logVariable('ends')" href="../../_variables/ends.html">$ends</a>)) {
<a name="l1873"><span class="linenum">1873</span></a>                  break;
<a name="l1874"><span class="linenum">1874</span></a>              }
<a name="l1875"><span class="linenum">1875</span></a>              <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[] = <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>];
<a name="l1876"><span class="linenum">1876</span></a>              <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it23910" onMouseOver="hilite(23910)" onMouseOut="lolite()" onClick="logVariable('lessonpages')" href="../../_variables/lessonpages.html">$lessonpages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;nextpageid;
<a name="l1877"><span class="linenum">1877</span></a>          }
<a name="l1878"><span class="linenum">1878</span></a>  
<a name="l1879"><span class="linenum">1879</span></a>          return <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>;
<a name="l1880"><span class="linenum">1880</span></a>      }
<a name="l1881"><span class="linenum">1881</span></a>  
<a name="l1882"><span class="linenum">1882</span></a>      <span class="comment">/**</span>
<a name="l1883"><span class="linenum">1883</span></a>  <span class="comment">     * Checks to see if the specified page[id] is a subpage of a type specified in</span>
<a name="l1884"><span class="linenum">1884</span></a>  <span class="comment">     * the $types array, until either there are no more pages of we find a type</span>
<a name="l1885"><span class="linenum">1885</span></a>  <span class="comment">     * corresponding to that of a type specified in $ends</span>
<a name="l1886"><span class="linenum">1886</span></a>  <span class="comment">     *</span>
<a name="l1887"><span class="linenum">1887</span></a>  <span class="comment">     * @param int $pageid The id of the page to check</span>
<a name="l1888"><span class="linenum">1888</span></a>  <span class="comment">     * @param array $types An array of types that would signify this page was a subpage</span>
<a name="l1889"><span class="linenum">1889</span></a>  <span class="comment">     * @param array $ends An array of types that mean this is not a subpage</span>
<a name="l1890"><span class="linenum">1890</span></a>  <span class="comment">     * @return bool</span>
<a name="l1891"><span class="linenum">1891</span></a>  <span class="comment">     */</span>
<a name="l1892"><span class="linenum">1892</span></a>      public function <a class="function" onClick="logFunction('is_sub_page_of_type')" href="../../_functions/is_sub_page_of_type.html" onMouseOver="funcPopup(event,'is_sub_page_of_type')">is_sub_page_of_type</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array <a class="var it2894" onMouseOver="hilite(2894)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>, array <a class="var it23948" onMouseOver="hilite(23948)" onMouseOut="lolite()" onClick="logVariable('ends')" href="../../_variables/ends.html">$ends</a>) {
<a name="l1893"><span class="linenum">1893</span></a>          <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1894"><span class="linenum">1894</span></a>          <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;prevpageid; <span class="comment">// move up one</span>
<a name="l1895"><span class="linenum">1895</span></a>  
<a name="l1896"><span class="linenum">1896</span></a>          <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>(<a class="var it23948" onMouseOver="hilite(23948)" onMouseOut="lolite()" onClick="logVariable('ends')" href="../../_variables/ends.html">$ends</a>, 0);
<a name="l1897"><span class="linenum">1897</span></a>  <span class="comment">        // go up the pages till branch table</span>
<a name="l1898"><span class="linenum">1898</span></a>          while (true) {
<a name="l1899"><span class="linenum">1899</span></a>              if (<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>==0 || <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype, <a class="var it23948" onMouseOver="hilite(23948)" onMouseOut="lolite()" onClick="logVariable('ends')" href="../../_variables/ends.html">$ends</a>)) {
<a name="l1900"><span class="linenum">1900</span></a>                  return false;
<a name="l1901"><span class="linenum">1901</span></a>              } else if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype, <a class="var it2894" onMouseOver="hilite(2894)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>)) {
<a name="l1902"><span class="linenum">1902</span></a>                  return true;
<a name="l1903"><span class="linenum">1903</span></a>              }
<a name="l1904"><span class="linenum">1904</span></a>              <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;prevpageid;
<a name="l1905"><span class="linenum">1905</span></a>          }
<a name="l1906"><span class="linenum">1906</span></a>      }
<a name="l1907"><span class="linenum">1907</span></a>  
<a name="l1908"><span class="linenum">1908</span></a>      <span class="comment">/**</span>
<a name="l1909"><span class="linenum">1909</span></a>  <span class="comment">     * Move a page resorting all other pages.</span>
<a name="l1910"><span class="linenum">1910</span></a>  <span class="comment">     *</span>
<a name="l1911"><span class="linenum">1911</span></a>  <span class="comment">     * @param int $pageid</span>
<a name="l1912"><span class="linenum">1912</span></a>  <span class="comment">     * @param int $after</span>
<a name="l1913"><span class="linenum">1913</span></a>  <span class="comment">     * @return void</span>
<a name="l1914"><span class="linenum">1914</span></a>  <span class="comment">     */</span>
<a name="l1915"><span class="linenum">1915</span></a>      public function <a class="function" onClick="logFunction('resort_pages')" href="../../_functions/resort_pages.html" onMouseOver="funcPopup(event,'resort_pages')">resort_pages</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="var it1663" onMouseOver="hilite(1663)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a>) {
<a name="l1916"><span class="linenum">1916</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1917"><span class="linenum">1917</span></a>  
<a name="l1918"><span class="linenum">1918</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;course);
<a name="l1919"><span class="linenum">1919</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1920"><span class="linenum">1920</span></a>  
<a name="l1921"><span class="linenum">1921</span></a>          <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l1922"><span class="linenum">1922</span></a>  
<a name="l1923"><span class="linenum">1923</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>) || (<a class="var it1663" onMouseOver="hilite(1663)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a>!=0 &amp;&amp; !<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1663" onMouseOver="hilite(1663)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a>, <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>))) {
<a name="l1924"><span class="linenum">1924</span></a>              <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindpages', 'lesson', &quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/lesson/edit.php?id=<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&quot;);
<a name="l1925"><span class="linenum">1925</span></a>          }
<a name="l1926"><span class="linenum">1926</span></a>  
<a name="l1927"><span class="linenum">1927</span></a>          <a class="var it23949" onMouseOver="hilite(23949)" onMouseOut="lolite()" onClick="logVariable('pagetomove')" href="../../_variables/pagetomove.html">$pagetomove</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]);
<a name="l1928"><span class="linenum">1928</span></a>          unset(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]);
<a name="l1929"><span class="linenum">1929</span></a>  
<a name="l1930"><span class="linenum">1930</span></a>          <a class="var it23950" onMouseOver="hilite(23950)" onMouseOut="lolite()" onClick="logVariable('pageids')" href="../../_variables/pageids.html">$pageids</a> = array();
<a name="l1931"><span class="linenum">1931</span></a>          if (<a class="var it1663" onMouseOver="hilite(1663)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a> === 0) {
<a name="l1932"><span class="linenum">1932</span></a>              <a class="var it23950" onMouseOver="hilite(23950)" onMouseOut="lolite()" onClick="logVariable('pageids')" href="../../_variables/pageids.html">$pageids</a>['p0'] = <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>;
<a name="l1933"><span class="linenum">1933</span></a>          }
<a name="l1934"><span class="linenum">1934</span></a>          foreach (<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l1935"><span class="linenum">1935</span></a>              <a class="var it23950" onMouseOver="hilite(23950)" onMouseOut="lolite()" onClick="logVariable('pageids')" href="../../_variables/pageids.html">$pageids</a>[] = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1936"><span class="linenum">1936</span></a>              if (<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it1663" onMouseOver="hilite(1663)" onMouseOut="lolite()" onClick="logVariable('after')" href="../../_variables/after.html">$after</a>) {
<a name="l1937"><span class="linenum">1937</span></a>                  <a class="var it23950" onMouseOver="hilite(23950)" onMouseOut="lolite()" onClick="logVariable('pageids')" href="../../_variables/pageids.html">$pageids</a>[] = <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>;
<a name="l1938"><span class="linenum">1938</span></a>              }
<a name="l1939"><span class="linenum">1939</span></a>          }
<a name="l1940"><span class="linenum">1940</span></a>  
<a name="l1941"><span class="linenum">1941</span></a>          <a class="var it23951" onMouseOver="hilite(23951)" onMouseOut="lolite()" onClick="logVariable('pageidsref')" href="../../_variables/pageidsref.html">$pageidsref</a> = <a class="var it23950" onMouseOver="hilite(23950)" onMouseOut="lolite()" onClick="logVariable('pageids')" href="../../_variables/pageids.html">$pageids</a>;
<a name="l1942"><span class="linenum">1942</span></a>          <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it23951" onMouseOver="hilite(23951)" onMouseOut="lolite()" onClick="logVariable('pageidsref')" href="../../_variables/pageidsref.html">$pageidsref</a>);
<a name="l1943"><span class="linenum">1943</span></a>          <a class="var it1476" onMouseOver="hilite(1476)" onMouseOut="lolite()" onClick="logVariable('prev')" href="../../_variables/prev.html">$prev</a> = 0;
<a name="l1944"><span class="linenum">1944</span></a>          <a class="var it393" onMouseOver="hilite(393)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a> = <a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>(<a class="var it23951" onMouseOver="hilite(23951)" onMouseOut="lolite()" onClick="logVariable('pageidsref')" href="../../_variables/pageidsref.html">$pageidsref</a>);
<a name="l1945"><span class="linenum">1945</span></a>          foreach (<a class="var it23950" onMouseOver="hilite(23950)" onMouseOut="lolite()" onClick="logVariable('pageids')" href="../../_variables/pageids.html">$pageids</a> as <a class="var it9840" onMouseOver="hilite(9840)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a>) {
<a name="l1946"><span class="linenum">1946</span></a>              if (<a class="var it9840" onMouseOver="hilite(9840)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a> === <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>) {
<a name="l1947"><span class="linenum">1947</span></a>                  <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it23949" onMouseOver="hilite(23949)" onMouseOut="lolite()" onClick="logVariable('pagetomove')" href="../../_variables/pagetomove.html">$pagetomove</a>;
<a name="l1948"><span class="linenum">1948</span></a>              } else {
<a name="l1949"><span class="linenum">1949</span></a>                  <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it9840" onMouseOver="hilite(9840)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a>];
<a name="l1950"><span class="linenum">1950</span></a>              }
<a name="l1951"><span class="linenum">1951</span></a>              if (<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> != <a class="var it1476" onMouseOver="hilite(1476)" onMouseOut="lolite()" onClick="logVariable('prev')" href="../../_variables/prev.html">$prev</a> || <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> != <a class="var it393" onMouseOver="hilite(393)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a>) {
<a name="l1952"><span class="linenum">1952</span></a>                  <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('move')" href="../../_functions/move.html" onMouseOver="funcPopup(event,'move')">move</a>(<a class="var it393" onMouseOver="hilite(393)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a>, <a class="var it1476" onMouseOver="hilite(1476)" onMouseOut="lolite()" onClick="logVariable('prev')" href="../../_variables/prev.html">$prev</a>);
<a name="l1953"><span class="linenum">1953</span></a>  
<a name="l1954"><span class="linenum">1954</span></a>                  if (<a class="var it9840" onMouseOver="hilite(9840)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a> === <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>) {
<a name="l1955"><span class="linenum">1955</span></a>  <span class="comment">                    // We will trigger an event.</span>
<a name="l1956"><span class="linenum">1956</span></a>                      <a class="var it23952" onMouseOver="hilite(23952)" onMouseOut="lolite()" onClick="logVariable('pageupdated')" href="../../_variables/pageupdated.html">$pageupdated</a> = array('next' =&gt; <a class="var it393" onMouseOver="hilite(393)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a>, 'prev' =&gt; <a class="var it1476" onMouseOver="hilite(1476)" onMouseOut="lolite()" onClick="logVariable('prev')" href="../../_variables/prev.html">$prev</a>);
<a name="l1957"><span class="linenum">1957</span></a>                  }
<a name="l1958"><span class="linenum">1958</span></a>              }
<a name="l1959"><span class="linenum">1959</span></a>  
<a name="l1960"><span class="linenum">1960</span></a>              <a class="var it1476" onMouseOver="hilite(1476)" onMouseOut="lolite()" onClick="logVariable('prev')" href="../../_variables/prev.html">$prev</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1961"><span class="linenum">1961</span></a>              <a class="var it393" onMouseOver="hilite(393)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a> = <a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>(<a class="var it23951" onMouseOver="hilite(23951)" onMouseOut="lolite()" onClick="logVariable('pageidsref')" href="../../_variables/pageidsref.html">$pageidsref</a>);
<a name="l1962"><span class="linenum">1962</span></a>              if (!<a class="var it393" onMouseOver="hilite(393)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a>) {
<a name="l1963"><span class="linenum">1963</span></a>                  <a class="var it393" onMouseOver="hilite(393)" onMouseOut="lolite()" onClick="logVariable('next')" href="../../_variables/next.html">$next</a> = 0;
<a name="l1964"><span class="linenum">1964</span></a>              }
<a name="l1965"><span class="linenum">1965</span></a>          }
<a name="l1966"><span class="linenum">1966</span></a>  
<a name="l1967"><span class="linenum">1967</span></a>  <span class="comment">        // Trigger an event: page moved.</span>
<a name="l1968"><span class="linenum">1968</span></a>          if (!empty(<a class="var it23952" onMouseOver="hilite(23952)" onMouseOut="lolite()" onClick="logVariable('pageupdated')" href="../../_variables/pageupdated.html">$pageupdated</a>)) {
<a name="l1969"><span class="linenum">1969</span></a>              <a class="var it1765" onMouseOver="hilite(1765)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a> = array(
<a name="l1970"><span class="linenum">1970</span></a>                  'context' =&gt; <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l1971"><span class="linenum">1971</span></a>                  'objectid' =&gt; <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>,
<a name="l1972"><span class="linenum">1972</span></a>                  'other' =&gt; array(
<a name="l1973"><span class="linenum">1973</span></a>                      'pagetype' =&gt; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('get_typestring')" href="../../_functions/get_typestring.html" onMouseOver="funcPopup(event,'get_typestring')">get_typestring</a>(),
<a name="l1974"><span class="linenum">1974</span></a>                      'prevpageid' =&gt; <a class="var it23952" onMouseOver="hilite(23952)" onMouseOut="lolite()" onClick="logVariable('pageupdated')" href="../../_variables/pageupdated.html">$pageupdated</a>['prev'],
<a name="l1975"><span class="linenum">1975</span></a>                      'nextpageid' =&gt; <a class="var it23952" onMouseOver="hilite(23952)" onMouseOut="lolite()" onClick="logVariable('pageupdated')" href="../../_variables/pageupdated.html">$pageupdated</a>['next']
<a name="l1976"><span class="linenum">1976</span></a>                  )
<a name="l1977"><span class="linenum">1977</span></a>              );
<a name="l1978"><span class="linenum">1978</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('page_moved')" href="../../_classes/page_moved.html" onMouseOver="classPopup(event,'page_moved')">page_moved</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it1765" onMouseOver="hilite(1765)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a>);
<a name="l1979"><span class="linenum">1979</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1980"><span class="linenum">1980</span></a>          }
<a name="l1981"><span class="linenum">1981</span></a>  
<a name="l1982"><span class="linenum">1982</span></a>      }
<a name="l1983"><span class="linenum">1983</span></a>  }
<a name="l1984"><span class="linenum">1984</span></a>  
<a name="l1985"><span class="linenum">1985</span></a>  
<a name="l1986"><span class="linenum">1986</span></a>  <span class="comment">/**</span>
<a name="l1987"><span class="linenum">1987</span></a>  <span class="comment"> * Abstract class to provide a core functions to the all lesson classes</span>
<a name="l1988"><span class="linenum">1988</span></a>  <span class="comment"> *</span>
<a name="l1989"><span class="linenum">1989</span></a>  <span class="comment"> * This class should be abstracted by ALL classes with the lesson module to ensure</span>
<a name="l1990"><span class="linenum">1990</span></a>  <span class="comment"> * that all classes within this module can be interacted with in the same way.</span>
<a name="l1991"><span class="linenum">1991</span></a>  <span class="comment"> *</span>
<a name="l1992"><span class="linenum">1992</span></a>  <span class="comment"> * This class provides the user with a basic properties array that can be fetched</span>
<a name="l1993"><span class="linenum">1993</span></a>  <span class="comment"> * or set via magic methods, or alternatively by defining methods get_blah() or</span>
<a name="l1994"><span class="linenum">1994</span></a>  <span class="comment"> * set_blah() within the extending object.</span>
<a name="l1995"><span class="linenum">1995</span></a>  <span class="comment"> *</span>
<a name="l1996"><span class="linenum">1996</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l1997"><span class="linenum">1997</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l1998"><span class="linenum">1998</span></a>  <span class="comment"> */</span>
<a name="l1999"><span class="linenum">1999</span></a>  abstract class lesson_base {
<a name="l2000"><span class="linenum">2000</span></a>  
<a name="l2001"><span class="linenum">2001</span></a>      <span class="comment">/**</span>
<a name="l2002"><span class="linenum">2002</span></a>  <span class="comment">     * An object containing properties</span>
<a name="l2003"><span class="linenum">2003</span></a>  <span class="comment">     * @var stdClass</span>
<a name="l2004"><span class="linenum">2004</span></a>  <span class="comment">     */</span>
<a name="l2005"><span class="linenum">2005</span></a>      protected <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>;
<a name="l2006"><span class="linenum">2006</span></a>  
<a name="l2007"><span class="linenum">2007</span></a>      <span class="comment">/**</span>
<a name="l2008"><span class="linenum">2008</span></a>  <span class="comment">     * The constructor</span>
<a name="l2009"><span class="linenum">2009</span></a>  <span class="comment">     * @param stdClass $properties</span>
<a name="l2010"><span class="linenum">2010</span></a>  <span class="comment">     */</span>
<a name="l2011"><span class="linenum">2011</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>) {
<a name="l2012"><span class="linenum">2012</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a> = (object)<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>;
<a name="l2013"><span class="linenum">2013</span></a>      }
<a name="l2014"><span class="linenum">2014</span></a>  
<a name="l2015"><span class="linenum">2015</span></a>      <span class="comment">/**</span>
<a name="l2016"><span class="linenum">2016</span></a>  <span class="comment">     * Magic property method</span>
<a name="l2017"><span class="linenum">2017</span></a>  <span class="comment">     *</span>
<a name="l2018"><span class="linenum">2018</span></a>  <span class="comment">     * Attempts to call a set_$key method if one exists otherwise falls back</span>
<a name="l2019"><span class="linenum">2019</span></a>  <span class="comment">     * to simply set the property</span>
<a name="l2020"><span class="linenum">2020</span></a>  <span class="comment">     *</span>
<a name="l2021"><span class="linenum">2021</span></a>  <span class="comment">     * @param string $key</span>
<a name="l2022"><span class="linenum">2022</span></a>  <span class="comment">     * @param mixed $value</span>
<a name="l2023"><span class="linenum">2023</span></a>  <span class="comment">     */</span>
<a name="l2024"><span class="linenum">2024</span></a>      public function <a class="function" onClick="logFunction('__set')" href="../../_functions/__set.html" onMouseOver="funcPopup(event,'__set')">__set</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l2025"><span class="linenum">2025</span></a>          if (<a class="phpfunction" onClick="logFunction('method_exists')" href="../../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, 'set_'.<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>)) {
<a name="l2026"><span class="linenum">2026</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;{'set_'.<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>}(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l2027"><span class="linenum">2027</span></a>          }
<a name="l2028"><span class="linenum">2028</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;{<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>} = <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>;
<a name="l2029"><span class="linenum">2029</span></a>      }
<a name="l2030"><span class="linenum">2030</span></a>  
<a name="l2031"><span class="linenum">2031</span></a>      <span class="comment">/**</span>
<a name="l2032"><span class="linenum">2032</span></a>  <span class="comment">     * Magic get method</span>
<a name="l2033"><span class="linenum">2033</span></a>  <span class="comment">     *</span>
<a name="l2034"><span class="linenum">2034</span></a>  <span class="comment">     * Attempts to call a get_$key method to return the property and ralls over</span>
<a name="l2035"><span class="linenum">2035</span></a>  <span class="comment">     * to return the raw property</span>
<a name="l2036"><span class="linenum">2036</span></a>  <span class="comment">     *</span>
<a name="l2037"><span class="linenum">2037</span></a>  <span class="comment">     * @param str $key</span>
<a name="l2038"><span class="linenum">2038</span></a>  <span class="comment">     * @return mixed</span>
<a name="l2039"><span class="linenum">2039</span></a>  <span class="comment">     */</span>
<a name="l2040"><span class="linenum">2040</span></a>      public function <a class="function" onClick="logFunction('__get')" href="../../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>) {
<a name="l2041"><span class="linenum">2041</span></a>          if (<a class="phpfunction" onClick="logFunction('method_exists')" href="../../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, 'get_'.<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>)) {
<a name="l2042"><span class="linenum">2042</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;{'get_'.<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>}();
<a name="l2043"><span class="linenum">2043</span></a>          }
<a name="l2044"><span class="linenum">2044</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;{<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>};
<a name="l2045"><span class="linenum">2045</span></a>      }
<a name="l2046"><span class="linenum">2046</span></a>  
<a name="l2047"><span class="linenum">2047</span></a>      <span class="comment">/**</span>
<a name="l2048"><span class="linenum">2048</span></a>  <span class="comment">     * Stupid PHP needs an isset magic method if you use the get magic method and</span>
<a name="l2049"><span class="linenum">2049</span></a>  <span class="comment">     * still want empty calls to work.... blah ~!</span>
<a name="l2050"><span class="linenum">2050</span></a>  <span class="comment">     *</span>
<a name="l2051"><span class="linenum">2051</span></a>  <span class="comment">     * @param string $key</span>
<a name="l2052"><span class="linenum">2052</span></a>  <span class="comment">     * @return bool</span>
<a name="l2053"><span class="linenum">2053</span></a>  <span class="comment">     */</span>
<a name="l2054"><span class="linenum">2054</span></a>      public function <a class="function" onClick="logFunction('__isset')" href="../../_functions/__isset.html" onMouseOver="funcPopup(event,'__isset')">__isset</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>) {
<a name="l2055"><span class="linenum">2055</span></a>          if (<a class="phpfunction" onClick="logFunction('method_exists')" href="../../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, 'get_'.<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>)) {
<a name="l2056"><span class="linenum">2056</span></a>              <a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;{'get_'.<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>}();
<a name="l2057"><span class="linenum">2057</span></a>              return !empty(<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>);
<a name="l2058"><span class="linenum">2058</span></a>          }
<a name="l2059"><span class="linenum">2059</span></a>          return !empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;{<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>});
<a name="l2060"><span class="linenum">2060</span></a>      }
<a name="l2061"><span class="linenum">2061</span></a>  
<a name="l2062"><span class="linenum">2062</span></a>  <span class="comment">    //NOTE: E_STRICT does not allow to change function signature!</span>
<a name="l2063"><span class="linenum">2063</span></a>  
<a name="l2064"><span class="linenum">2064</span></a>      <span class="comment">/**</span>
<a name="l2065"><span class="linenum">2065</span></a>  <span class="comment">     * If implemented should create a new instance, save it in the DB and return it</span>
<a name="l2066"><span class="linenum">2066</span></a>  <span class="comment">     */</span>
<a name="l2067"><span class="linenum">2067</span></a>  <span class="comment">    //public static function create() {}</span>
<a name="l2068"><span class="linenum">2068</span></a>      <span class="comment">/**</span>
<a name="l2069"><span class="linenum">2069</span></a>  <span class="comment">     * If implemented should load an instance from the DB and return it</span>
<a name="l2070"><span class="linenum">2070</span></a>  <span class="comment">     */</span>
<a name="l2071"><span class="linenum">2071</span></a>  <span class="comment">    //public static function load() {}</span>
<a name="l2072"><span class="linenum">2072</span></a>      <span class="comment">/**</span>
<a name="l2073"><span class="linenum">2073</span></a>  <span class="comment">     * Fetches all of the properties of the object</span>
<a name="l2074"><span class="linenum">2074</span></a>  <span class="comment">     * @return stdClass</span>
<a name="l2075"><span class="linenum">2075</span></a>  <span class="comment">     */</span>
<a name="l2076"><span class="linenum">2076</span></a>      public function <a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>() {
<a name="l2077"><span class="linenum">2077</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>;
<a name="l2078"><span class="linenum">2078</span></a>      }
<a name="l2079"><span class="linenum">2079</span></a>  }
<a name="l2080"><span class="linenum">2080</span></a>  
<a name="l2081"><span class="linenum">2081</span></a>  
<a name="l2082"><span class="linenum">2082</span></a>  <span class="comment">/**</span>
<a name="l2083"><span class="linenum">2083</span></a>  <span class="comment"> * Abstract class representation of a page associated with a lesson.</span>
<a name="l2084"><span class="linenum">2084</span></a>  <span class="comment"> *</span>
<a name="l2085"><span class="linenum">2085</span></a>  <span class="comment"> * This class should MUST be extended by all specialised page types defined in</span>
<a name="l2086"><span class="linenum">2086</span></a>  <span class="comment"> * mod/lesson/pagetypes/.</span>
<a name="l2087"><span class="linenum">2087</span></a>  <span class="comment"> * There are a handful of abstract methods that need to be defined as well as</span>
<a name="l2088"><span class="linenum">2088</span></a>  <span class="comment"> * severl methods that can optionally be defined in order to make the page type</span>
<a name="l2089"><span class="linenum">2089</span></a>  <span class="comment"> * operate in the desired way</span>
<a name="l2090"><span class="linenum">2090</span></a>  <span class="comment"> *</span>
<a name="l2091"><span class="linenum">2091</span></a>  <span class="comment"> * Database properties</span>
<a name="l2092"><span class="linenum">2092</span></a>  <span class="comment"> * @property int $id The id of this lesson page</span>
<a name="l2093"><span class="linenum">2093</span></a>  <span class="comment"> * @property int $lessonid The id of the lesson this page belongs to</span>
<a name="l2094"><span class="linenum">2094</span></a>  <span class="comment"> * @property int $prevpageid The id of the page before this one</span>
<a name="l2095"><span class="linenum">2095</span></a>  <span class="comment"> * @property int $nextpageid The id of the next page in the page sequence</span>
<a name="l2096"><span class="linenum">2096</span></a>  <span class="comment"> * @property int $qtype Identifies the page type of this page</span>
<a name="l2097"><span class="linenum">2097</span></a>  <span class="comment"> * @property int $qoption Used to record page type specific options</span>
<a name="l2098"><span class="linenum">2098</span></a>  <span class="comment"> * @property int $layout Used to record page specific layout selections</span>
<a name="l2099"><span class="linenum">2099</span></a>  <span class="comment"> * @property int $display Used to record page specific display selections</span>
<a name="l2100"><span class="linenum">2100</span></a>  <span class="comment"> * @property int $timecreated Timestamp for when the page was created</span>
<a name="l2101"><span class="linenum">2101</span></a>  <span class="comment"> * @property int $timemodified Timestamp for when the page was last modified</span>
<a name="l2102"><span class="linenum">2102</span></a>  <span class="comment"> * @property string $title The title of this page</span>
<a name="l2103"><span class="linenum">2103</span></a>  <span class="comment"> * @property string $contents The rich content shown to describe the page</span>
<a name="l2104"><span class="linenum">2104</span></a>  <span class="comment"> * @property int $contentsformat The format of the contents field</span>
<a name="l2105"><span class="linenum">2105</span></a>  <span class="comment"> *</span>
<a name="l2106"><span class="linenum">2106</span></a>  <span class="comment"> * Calculated properties</span>
<a name="l2107"><span class="linenum">2107</span></a>  <span class="comment"> * @property-read array $answers An array of answers for this page</span>
<a name="l2108"><span class="linenum">2108</span></a>  <span class="comment"> * @property-read bool $displayinmenublock Toggles display in the left menu block</span>
<a name="l2109"><span class="linenum">2109</span></a>  <span class="comment"> * @property-read array $jumps An array containing all the jumps this page uses</span>
<a name="l2110"><span class="linenum">2110</span></a>  <span class="comment"> * @property-read lesson $lesson The lesson this page belongs to</span>
<a name="l2111"><span class="linenum">2111</span></a>  <span class="comment"> * @property-read int $type The type of the page [question | structure]</span>
<a name="l2112"><span class="linenum">2112</span></a>  <span class="comment"> * @property-read typeid The unique identifier for the page type</span>
<a name="l2113"><span class="linenum">2113</span></a>  <span class="comment"> * @property-read typestring The string that describes this page type</span>
<a name="l2114"><span class="linenum">2114</span></a>  <span class="comment"> *</span>
<a name="l2115"><span class="linenum">2115</span></a>  <span class="comment"> * @abstract</span>
<a name="l2116"><span class="linenum">2116</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l2117"><span class="linenum">2117</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l2118"><span class="linenum">2118</span></a>  <span class="comment"> */</span>
<a name="l2119"><span class="linenum">2119</span></a>  abstract class lesson_page extends lesson_base {
<a name="l2120"><span class="linenum">2120</span></a>  
<a name="l2121"><span class="linenum">2121</span></a>      <span class="comment">/**</span>
<a name="l2122"><span class="linenum">2122</span></a>  <span class="comment">     * A reference to the lesson this page belongs to</span>
<a name="l2123"><span class="linenum">2123</span></a>  <span class="comment">     * @var lesson</span>
<a name="l2124"><span class="linenum">2124</span></a>  <span class="comment">     */</span>
<a name="l2125"><span class="linenum">2125</span></a>      protected <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a> = null;
<a name="l2126"><span class="linenum">2126</span></a>      <span class="comment">/**</span>
<a name="l2127"><span class="linenum">2127</span></a>  <span class="comment">     * Contains the answers to this lesson_page once loaded</span>
<a name="l2128"><span class="linenum">2128</span></a>  <span class="comment">     * @var null|array</span>
<a name="l2129"><span class="linenum">2129</span></a>  <span class="comment">     */</span>
<a name="l2130"><span class="linenum">2130</span></a>      protected <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = null;
<a name="l2131"><span class="linenum">2131</span></a>      <span class="comment">/**</span>
<a name="l2132"><span class="linenum">2132</span></a>  <span class="comment">     * This sets the type of the page, can be one of the constants defined below</span>
<a name="l2133"><span class="linenum">2133</span></a>  <span class="comment">     * @var int</span>
<a name="l2134"><span class="linenum">2134</span></a>  <span class="comment">     */</span>
<a name="l2135"><span class="linenum">2135</span></a>      protected <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 0;
<a name="l2136"><span class="linenum">2136</span></a>  
<a name="l2137"><span class="linenum">2137</span></a>      <span class="comment">/**</span>
<a name="l2138"><span class="linenum">2138</span></a>  <span class="comment">     * Constants used to identify the type of the page</span>
<a name="l2139"><span class="linenum">2139</span></a>  <span class="comment">     */</span>
<a name="l2140"><span class="linenum">2140</span></a>      const TYPE_QUESTION = 0;
<a name="l2141"><span class="linenum">2141</span></a>      const TYPE_STRUCTURE = 1;
<a name="l2142"><span class="linenum">2142</span></a>  
<a name="l2143"><span class="linenum">2143</span></a>      <span class="comment">/**</span>
<a name="l2144"><span class="linenum">2144</span></a>  <span class="comment">     * This method should return the integer used to identify the page type within</span>
<a name="l2145"><span class="linenum">2145</span></a>  <span class="comment">     * the database and throughout code. This maps back to the defines used in 1.x</span>
<a name="l2146"><span class="linenum">2146</span></a>  <span class="comment">     * @abstract</span>
<a name="l2147"><span class="linenum">2147</span></a>  <span class="comment">     * @return int</span>
<a name="l2148"><span class="linenum">2148</span></a>  <span class="comment">     */</span>
<a name="l2149"><span class="linenum">2149</span></a>      abstract protected function <a class="function" onClick="logFunction('get_typeid')" href="../../_functions/get_typeid.html" onMouseOver="funcPopup(event,'get_typeid')">get_typeid</a>();
<a name="l2150"><span class="linenum">2150</span></a>      <span class="comment">/**</span>
<a name="l2151"><span class="linenum">2151</span></a>  <span class="comment">     * This method should return the string that describes the pagetype</span>
<a name="l2152"><span class="linenum">2152</span></a>  <span class="comment">     * @abstract</span>
<a name="l2153"><span class="linenum">2153</span></a>  <span class="comment">     * @return string</span>
<a name="l2154"><span class="linenum">2154</span></a>  <span class="comment">     */</span>
<a name="l2155"><span class="linenum">2155</span></a>      abstract protected function <a class="function" onClick="logFunction('get_typestring')" href="../../_functions/get_typestring.html" onMouseOver="funcPopup(event,'get_typestring')">get_typestring</a>();
<a name="l2156"><span class="linenum">2156</span></a>  
<a name="l2157"><span class="linenum">2157</span></a>      <span class="comment">/**</span>
<a name="l2158"><span class="linenum">2158</span></a>  <span class="comment">     * This method gets called to display the page to the user taking the lesson</span>
<a name="l2159"><span class="linenum">2159</span></a>  <span class="comment">     * @abstract</span>
<a name="l2160"><span class="linenum">2160</span></a>  <span class="comment">     * @param object $renderer</span>
<a name="l2161"><span class="linenum">2161</span></a>  <span class="comment">     * @param object $attempt</span>
<a name="l2162"><span class="linenum">2162</span></a>  <span class="comment">     * @return string</span>
<a name="l2163"><span class="linenum">2163</span></a>  <span class="comment">     */</span>
<a name="l2164"><span class="linenum">2164</span></a>      abstract public function <a class="function" onClick="logFunction('display')" href="../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>(<a class="var it1689" onMouseOver="hilite(1689)" onMouseOut="lolite()" onClick="logVariable('renderer')" href="../../_variables/renderer.html">$renderer</a>, <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>);
<a name="l2165"><span class="linenum">2165</span></a>  
<a name="l2166"><span class="linenum">2166</span></a>      <span class="comment">/**</span>
<a name="l2167"><span class="linenum">2167</span></a>  <span class="comment">     * Creates a new lesson_page within the database and returns the correct pagetype</span>
<a name="l2168"><span class="linenum">2168</span></a>  <span class="comment">     * object to use to interact with the new lesson</span>
<a name="l2169"><span class="linenum">2169</span></a>  <span class="comment">     *</span>
<a name="l2170"><span class="linenum">2170</span></a>  <span class="comment">     * @final</span>
<a name="l2171"><span class="linenum">2171</span></a>  <span class="comment">     * @static</span>
<a name="l2172"><span class="linenum">2172</span></a>  <span class="comment">     * @param object $properties</span>
<a name="l2173"><span class="linenum">2173</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l2174"><span class="linenum">2174</span></a>  <span class="comment">     * @return lesson_page Specialised object that extends lesson_page</span>
<a name="l2175"><span class="linenum">2175</span></a>  <span class="comment">     */</span>
<a name="l2176"><span class="linenum">2176</span></a>      final public static function <a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>, lesson <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1436" onMouseOver="hilite(1436)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>) {
<a name="l2177"><span class="linenum">2177</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2178"><span class="linenum">2178</span></a>          <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a> = new stdClass;
<a name="l2179"><span class="linenum">2179</span></a>          <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('title')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('title')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/title.html">title</a>;
<a name="l2180"><span class="linenum">2180</span></a>          <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('contents')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/contents.html">contents</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('contents_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/contents_editor.html">contents_editor</a>['text'];
<a name="l2181"><span class="linenum">2181</span></a>          <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('contentsformat')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/contentsformat.html">contentsformat</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('contents_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/contents_editor.html">contents_editor</a>['format'];
<a name="l2182"><span class="linenum">2182</span></a>          <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('lessonid')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2183"><span class="linenum">2183</span></a>          <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('timecreated')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2184"><span class="linenum">2184</span></a>          <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('qtype')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('qtype')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>;
<a name="l2185"><span class="linenum">2185</span></a>          <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('qoption')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/qoption.html">qoption</a> = (isset(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('qoption')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/qoption.html">qoption</a>))?1:0;
<a name="l2186"><span class="linenum">2186</span></a>          <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('layout')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/layout.html">layout</a> = (isset(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('layout')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/layout.html">layout</a>))?1:0;
<a name="l2187"><span class="linenum">2187</span></a>          <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('display')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/display.html">display</a> = (isset(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('display')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/display.html">display</a>))?1:0;
<a name="l2188"><span class="linenum">2188</span></a>          <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> = 0; <span class="comment">// this is a first page</span>
<a name="l2189"><span class="linenum">2189</span></a>          <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = 0; <span class="comment">// this is the only page</span>
<a name="l2190"><span class="linenum">2190</span></a>  
<a name="l2191"><span class="linenum">2191</span></a>          if (<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('pageid')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>) {
<a name="l2192"><span class="linenum">2192</span></a>              <a class="var it23956" onMouseOver="hilite(23956)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;lesson_pages&quot;, array(&quot;id&quot; =&gt; <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('pageid')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a>), 'id, nextpageid');
<a name="l2193"><span class="linenum">2193</span></a>              if (!<a class="var it23956" onMouseOver="hilite(23956)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>) {
<a name="l2194"><span class="linenum">2194</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindpages', 'lesson');
<a name="l2195"><span class="linenum">2195</span></a>              }
<a name="l2196"><span class="linenum">2196</span></a>              <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> = <a class="var it23956" onMouseOver="hilite(23956)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>-&gt;<a onClick="logVariable('id')" class="var it41642" onMouseOver="hilite(41642)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2197"><span class="linenum">2197</span></a>              <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = <a class="var it23956" onMouseOver="hilite(23956)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it41642" onMouseOver="hilite(41642)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a>;
<a name="l2198"><span class="linenum">2198</span></a>          } else {
<a name="l2199"><span class="linenum">2199</span></a>              <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lesson_pages', array('lessonid'=&gt;<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'prevpageid'=&gt;0), 'id');
<a name="l2200"><span class="linenum">2200</span></a>              if (<a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>) {
<a name="l2201"><span class="linenum">2201</span></a>  <span class="comment">                // This is the first page, there are existing pages put this at the start</span>
<a name="l2202"><span class="linenum">2202</span></a>                  <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it41639" onMouseOver="hilite(41639)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2203"><span class="linenum">2203</span></a>              }
<a name="l2204"><span class="linenum">2204</span></a>          }
<a name="l2205"><span class="linenum">2205</span></a>  
<a name="l2206"><span class="linenum">2206</span></a>          <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('id')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_pages&quot;, <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>);
<a name="l2207"><span class="linenum">2207</span></a>  
<a name="l2208"><span class="linenum">2208</span></a>          <a class="var it10214" onMouseOver="hilite(10214)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a> = new stdClass;
<a name="l2209"><span class="linenum">2209</span></a>          <a class="var it10214" onMouseOver="hilite(10214)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>-&gt;<a onClick="logVariable('id')" class="var it39597" onMouseOver="hilite(39597)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('id')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2210"><span class="linenum">2210</span></a>          <a class="var it10214" onMouseOver="hilite(10214)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>-&gt;<a onClick="logVariable('contents_editor')" class="var it39597" onMouseOver="hilite(39597)" onMouseOut="lolite()" href="../../_variables/contents_editor.html">contents_editor</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('contents_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/contents_editor.html">contents_editor</a>;
<a name="l2211"><span class="linenum">2211</span></a>          <a class="var it10214" onMouseOver="hilite(10214)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a> = <a class="function" onClick="logFunction('file_postupdate_standard_editor')" href="../../_functions/file_postupdate_standard_editor.html" onMouseOver="funcPopup(event,'file_postupdate_standard_editor')">file_postupdate_standard_editor</a>(<a class="var it10214" onMouseOver="hilite(10214)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>, 'contents', array('noclean'=&gt;true, 'maxfiles'=&gt;<a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes'=&gt;<a class="var it1436" onMouseOver="hilite(1436)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>), <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, 'mod_lesson', 'page_contents', <a class="var it10214" onMouseOver="hilite(10214)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>-&gt;<a onClick="logVariable('id')" class="var it39597" onMouseOver="hilite(39597)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2212"><span class="linenum">2212</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(&quot;lesson_pages&quot;, <a class="var it10214" onMouseOver="hilite(10214)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>);
<a name="l2213"><span class="linenum">2213</span></a>  
<a name="l2214"><span class="linenum">2214</span></a>          if (<a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> &gt; 0) {
<a name="l2215"><span class="linenum">2215</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;nextpageid&quot;, <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('id')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array(&quot;id&quot; =&gt; <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a>));
<a name="l2216"><span class="linenum">2216</span></a>          }
<a name="l2217"><span class="linenum">2217</span></a>          if (<a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> &gt; 0) {
<a name="l2218"><span class="linenum">2218</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;prevpageid&quot;, <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('id')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array(&quot;id&quot; =&gt; <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a>));
<a name="l2219"><span class="linenum">2219</span></a>          }
<a name="l2220"><span class="linenum">2220</span></a>  
<a name="l2221"><span class="linenum">2221</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = lesson_page::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l2222"><span class="linenum">2222</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('create_answers')" href="../../_functions/create_answers.html" onMouseOver="funcPopup(event,'create_answers')">create_answers</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>);
<a name="l2223"><span class="linenum">2223</span></a>  
<a name="l2224"><span class="linenum">2224</span></a>  <span class="comment">        // Trigger an event: page created.</span>
<a name="l2225"><span class="linenum">2225</span></a>          <a class="var it1765" onMouseOver="hilite(1765)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a> = array(
<a name="l2226"><span class="linenum">2226</span></a>              'context' =&gt; <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l2227"><span class="linenum">2227</span></a>              'objectid' =&gt; <a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('id')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2228"><span class="linenum">2228</span></a>              'other' =&gt; array(
<a name="l2229"><span class="linenum">2229</span></a>                  'pagetype' =&gt; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('get_typestring')" href="../../_functions/get_typestring.html" onMouseOver="funcPopup(event,'get_typestring')">get_typestring</a>()
<a name="l2230"><span class="linenum">2230</span></a>                  )
<a name="l2231"><span class="linenum">2231</span></a>              );
<a name="l2232"><span class="linenum">2232</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('page_created')" href="../../_classes/page_created.html" onMouseOver="classPopup(event,'page_created')">page_created</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it1765" onMouseOver="hilite(1765)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a>);
<a name="l2233"><span class="linenum">2233</span></a>          <a class="var it23957" onMouseOver="hilite(23957)" onMouseOut="lolite()" onClick="logVariable('snapshot')" href="../../_variables/snapshot.html">$snapshot</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>);
<a name="l2234"><span class="linenum">2234</span></a>          <a class="var it23957" onMouseOver="hilite(23957)" onMouseOut="lolite()" onClick="logVariable('snapshot')" href="../../_variables/snapshot.html">$snapshot</a>-&gt;<a onClick="logVariable('timemodified')" class="var it41643" onMouseOver="hilite(41643)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = 0;
<a name="l2235"><span class="linenum">2235</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('lesson_pages', <a class="var it23957" onMouseOver="hilite(23957)" onMouseOut="lolite()" onClick="logVariable('snapshot')" href="../../_variables/snapshot.html">$snapshot</a>);
<a name="l2236"><span class="linenum">2236</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2237"><span class="linenum">2237</span></a>  
<a name="l2238"><span class="linenum">2238</span></a>          <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('add_message')" href="../../_functions/add_message.html" onMouseOver="funcPopup(event,'add_message')">add_message</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('insertedpage', 'lesson').': '.<a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it2673" onMouseOver="hilite(2673)" onMouseOut="lolite()" onClick="logVariable('newpage')" href="../../_variables/newpage.html">$newpage</a>-&gt;<a onClick="logVariable('title')" class="var it41568" onMouseOver="hilite(41568)" onMouseOut="lolite()" href="../../_variables/title.html">title</a>, true), 'notifysuccess');
<a name="l2239"><span class="linenum">2239</span></a>  
<a name="l2240"><span class="linenum">2240</span></a>          return <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>;
<a name="l2241"><span class="linenum">2241</span></a>      }
<a name="l2242"><span class="linenum">2242</span></a>  
<a name="l2243"><span class="linenum">2243</span></a>      <span class="comment">/**</span>
<a name="l2244"><span class="linenum">2244</span></a>  <span class="comment">     * This method loads a page object from the database and returns it as a</span>
<a name="l2245"><span class="linenum">2245</span></a>  <span class="comment">     * specialised object that extends lesson_page</span>
<a name="l2246"><span class="linenum">2246</span></a>  <span class="comment">     *</span>
<a name="l2247"><span class="linenum">2247</span></a>  <span class="comment">     * @final</span>
<a name="l2248"><span class="linenum">2248</span></a>  <span class="comment">     * @static</span>
<a name="l2249"><span class="linenum">2249</span></a>  <span class="comment">     * @param int $id</span>
<a name="l2250"><span class="linenum">2250</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l2251"><span class="linenum">2251</span></a>  <span class="comment">     * @return lesson_page Specialised lesson_page object</span>
<a name="l2252"><span class="linenum">2252</span></a>  <span class="comment">     */</span>
<a name="l2253"><span class="linenum">2253</span></a>      final public static function <a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>, lesson <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l2254"><span class="linenum">2254</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2255"><span class="linenum">2255</span></a>  
<a name="l2256"><span class="linenum">2256</span></a>          if (<a class="phpfunction" onClick="logFunction('is_object')" href="../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) &amp;&amp; !empty(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>-&gt;<a onClick="logVariable('qtype')" class="var it40168" onMouseOver="hilite(40168)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>)) {
<a name="l2257"><span class="linenum">2257</span></a>              <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>;
<a name="l2258"><span class="linenum">2258</span></a>          } else {
<a name="l2259"><span class="linenum">2259</span></a>              <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;lesson_pages&quot;, array(&quot;id&quot; =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l2260"><span class="linenum">2260</span></a>              if (!<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l2261"><span class="linenum">2261</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindpages', 'lesson');
<a name="l2262"><span class="linenum">2262</span></a>              }
<a name="l2263"><span class="linenum">2263</span></a>          }
<a name="l2264"><span class="linenum">2264</span></a>          <a class="var it384" onMouseOver="hilite(384)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a> = <a class="class" onClick="logClass('lesson_page_type_manager')" href="../../_classes/lesson_page_type_manager.html" onMouseOver="classPopup(event,'lesson_page_type_manager')">lesson_page_type_manager</a>::<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l2265"><span class="linenum">2265</span></a>  
<a name="l2266"><span class="linenum">2266</span></a>          <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'lesson_page_type_'.<a class="var it384" onMouseOver="hilite(384)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a>-&gt;<a class="function" onClick="logFunction('get_page_type_idstring')" href="../../_functions/get_page_type_idstring.html" onMouseOver="funcPopup(event,'get_page_type_idstring')">get_page_type_idstring</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('qtype')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>);
<a name="l2267"><span class="linenum">2267</span></a>          if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>)) {
<a name="l2268"><span class="linenum">2268</span></a>              <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'lesson_page';
<a name="l2269"><span class="linenum">2269</span></a>          }
<a name="l2270"><span class="linenum">2270</span></a>  
<a name="l2271"><span class="linenum">2271</span></a>          return new <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l2272"><span class="linenum">2272</span></a>      }
<a name="l2273"><span class="linenum">2273</span></a>  
<a name="l2274"><span class="linenum">2274</span></a>      <span class="comment">/**</span>
<a name="l2275"><span class="linenum">2275</span></a>  <span class="comment">     * Deletes a lesson_page from the database as well as any associated records.</span>
<a name="l2276"><span class="linenum">2276</span></a>  <span class="comment">     * @final</span>
<a name="l2277"><span class="linenum">2277</span></a>  <span class="comment">     * @return bool</span>
<a name="l2278"><span class="linenum">2278</span></a>  <span class="comment">     */</span>
<a name="l2279"><span class="linenum">2279</span></a>      final public function <a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>() {
<a name="l2280"><span class="linenum">2280</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2281"><span class="linenum">2281</span></a>  
<a name="l2282"><span class="linenum">2282</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;course);
<a name="l2283"><span class="linenum">2283</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2284"><span class="linenum">2284</span></a>  
<a name="l2285"><span class="linenum">2285</span></a>  <span class="comment">        // Delete files associated with attempts.</span>
<a name="l2286"><span class="linenum">2286</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2287"><span class="linenum">2287</span></a>          if (<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_attempts', array(&quot;pageid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id))) {
<a name="l2288"><span class="linenum">2288</span></a>              foreach (<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> as <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>) {
<a name="l2289"><span class="linenum">2289</span></a>                  <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'essay_responses', <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('id')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2290"><span class="linenum">2290</span></a>              }
<a name="l2291"><span class="linenum">2291</span></a>          }
<a name="l2292"><span class="linenum">2292</span></a>  
<a name="l2293"><span class="linenum">2293</span></a>  <span class="comment">        // Then delete all the associated records...</span>
<a name="l2294"><span class="linenum">2294</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_attempts&quot;, array(&quot;pageid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l2295"><span class="linenum">2295</span></a>  
<a name="l2296"><span class="linenum">2296</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_branch&quot;, array(&quot;pageid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l2297"><span class="linenum">2297</span></a>  <span class="comment">        // ...now delete the answers...</span>
<a name="l2298"><span class="linenum">2298</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_answers&quot;, array(&quot;pageid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l2299"><span class="linenum">2299</span></a>  <span class="comment">        // ..and the page itself</span>
<a name="l2300"><span class="linenum">2300</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;lesson_pages&quot;, array(&quot;id&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l2301"><span class="linenum">2301</span></a>  
<a name="l2302"><span class="linenum">2302</span></a>  <span class="comment">        // Trigger an event: page deleted.</span>
<a name="l2303"><span class="linenum">2303</span></a>          <a class="var it1765" onMouseOver="hilite(1765)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a> = array(
<a name="l2304"><span class="linenum">2304</span></a>              'context' =&gt; <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l2305"><span class="linenum">2305</span></a>              'objectid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id,
<a name="l2306"><span class="linenum">2306</span></a>              'other' =&gt; array(
<a name="l2307"><span class="linenum">2307</span></a>                  'pagetype' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_typestring')" href="../../_functions/get_typestring.html" onMouseOver="funcPopup(event,'get_typestring')">get_typestring</a>()
<a name="l2308"><span class="linenum">2308</span></a>                  )
<a name="l2309"><span class="linenum">2309</span></a>              );
<a name="l2310"><span class="linenum">2310</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('page_deleted')" href="../../_classes/page_deleted.html" onMouseOver="classPopup(event,'page_deleted')">page_deleted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it1765" onMouseOver="hilite(1765)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a>);
<a name="l2311"><span class="linenum">2311</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('lesson_pages', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>);
<a name="l2312"><span class="linenum">2312</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2313"><span class="linenum">2313</span></a>  
<a name="l2314"><span class="linenum">2314</span></a>  <span class="comment">        // Delete files associated with this page.</span>
<a name="l2315"><span class="linenum">2315</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'page_contents', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id);
<a name="l2316"><span class="linenum">2316</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'page_answers', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id);
<a name="l2317"><span class="linenum">2317</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'page_responses', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id);
<a name="l2318"><span class="linenum">2318</span></a>  
<a name="l2319"><span class="linenum">2319</span></a>  <span class="comment">        // repair the hole in the linkage</span>
<a name="l2320"><span class="linenum">2320</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;prevpageid &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid) {
<a name="l2321"><span class="linenum">2321</span></a>  <span class="comment">            //This is the only page, no repair needed</span>
<a name="l2322"><span class="linenum">2322</span></a>          } elseif (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;prevpageid) {
<a name="l2323"><span class="linenum">2323</span></a>  <span class="comment">            // this is the first page...</span>
<a name="l2324"><span class="linenum">2324</span></a>              <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;<a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid);
<a name="l2325"><span class="linenum">2325</span></a>              <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('move')" href="../../_functions/move.html" onMouseOver="funcPopup(event,'move')">move</a>(null, 0);
<a name="l2326"><span class="linenum">2326</span></a>          } elseif (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid) {
<a name="l2327"><span class="linenum">2327</span></a>  <span class="comment">            // this is the last page...</span>
<a name="l2328"><span class="linenum">2328</span></a>              <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;<a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;prevpageid);
<a name="l2329"><span class="linenum">2329</span></a>              <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('move')" href="../../_functions/move.html" onMouseOver="funcPopup(event,'move')">move</a>(0);
<a name="l2330"><span class="linenum">2330</span></a>          } else {
<a name="l2331"><span class="linenum">2331</span></a>  <span class="comment">            // page is in the middle...</span>
<a name="l2332"><span class="linenum">2332</span></a>              <a class="var it23956" onMouseOver="hilite(23956)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;<a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;prevpageid);
<a name="l2333"><span class="linenum">2333</span></a>              <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;<a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid);
<a name="l2334"><span class="linenum">2334</span></a>  
<a name="l2335"><span class="linenum">2335</span></a>              <a class="var it23956" onMouseOver="hilite(23956)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>-&gt;<a class="function" onClick="logFunction('move')" href="../../_functions/move.html" onMouseOver="funcPopup(event,'move')">move</a>(<a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a onClick="logVariable('id')" class="var it41639" onMouseOver="hilite(41639)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2336"><span class="linenum">2336</span></a>              <a class="var it16023" onMouseOver="hilite(16023)" onMouseOut="lolite()" onClick="logVariable('nextpage')" href="../../_variables/nextpage.html">$nextpage</a>-&gt;<a class="function" onClick="logFunction('move')" href="../../_functions/move.html" onMouseOver="funcPopup(event,'move')">move</a>(null, <a class="var it23956" onMouseOver="hilite(23956)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>-&gt;<a onClick="logVariable('id')" class="var it41642" onMouseOver="hilite(41642)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2337"><span class="linenum">2337</span></a>          }
<a name="l2338"><span class="linenum">2338</span></a>          return true;
<a name="l2339"><span class="linenum">2339</span></a>      }
<a name="l2340"><span class="linenum">2340</span></a>  
<a name="l2341"><span class="linenum">2341</span></a>      <span class="comment">/**</span>
<a name="l2342"><span class="linenum">2342</span></a>  <span class="comment">     * Moves a page by updating its nextpageid and prevpageid values within</span>
<a name="l2343"><span class="linenum">2343</span></a>  <span class="comment">     * the database</span>
<a name="l2344"><span class="linenum">2344</span></a>  <span class="comment">     *</span>
<a name="l2345"><span class="linenum">2345</span></a>  <span class="comment">     * @final</span>
<a name="l2346"><span class="linenum">2346</span></a>  <span class="comment">     * @param int $nextpageid</span>
<a name="l2347"><span class="linenum">2347</span></a>  <span class="comment">     * @param int $prevpageid</span>
<a name="l2348"><span class="linenum">2348</span></a>  <span class="comment">     */</span>
<a name="l2349"><span class="linenum">2349</span></a>      final public function <a class="function" onClick="logFunction('move')" href="../../_functions/move.html" onMouseOver="funcPopup(event,'move')">move</a>(<a class="var it2675" onMouseOver="hilite(2675)" onMouseOut="lolite()" onClick="logVariable('nextpageid')" href="../../_variables/nextpageid.html">$nextpageid</a>=null, <a class="var it2674" onMouseOver="hilite(2674)" onMouseOut="lolite()" onClick="logVariable('prevpageid')" href="../../_variables/prevpageid.html">$prevpageid</a>=null) {
<a name="l2350"><span class="linenum">2350</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2351"><span class="linenum">2351</span></a>          if (<a class="var it2675" onMouseOver="hilite(2675)" onMouseOut="lolite()" onClick="logVariable('nextpageid')" href="../../_variables/nextpageid.html">$nextpageid</a> === null) {
<a name="l2352"><span class="linenum">2352</span></a>              <a class="var it2675" onMouseOver="hilite(2675)" onMouseOut="lolite()" onClick="logVariable('nextpageid')" href="../../_variables/nextpageid.html">$nextpageid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid;
<a name="l2353"><span class="linenum">2353</span></a>          }
<a name="l2354"><span class="linenum">2354</span></a>          if (<a class="var it2674" onMouseOver="hilite(2674)" onMouseOut="lolite()" onClick="logVariable('prevpageid')" href="../../_variables/prevpageid.html">$prevpageid</a> === null) {
<a name="l2355"><span class="linenum">2355</span></a>              <a class="var it2674" onMouseOver="hilite(2674)" onMouseOut="lolite()" onClick="logVariable('prevpageid')" href="../../_variables/prevpageid.html">$prevpageid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;prevpageid;
<a name="l2356"><span class="linenum">2356</span></a>          }
<a name="l2357"><span class="linenum">2357</span></a>          <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a> = new stdClass;
<a name="l2358"><span class="linenum">2358</span></a>          <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('id')" class="var it39461" onMouseOver="hilite(39461)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l2359"><span class="linenum">2359</span></a>          <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it39461" onMouseOver="hilite(39461)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> = <a class="var it2674" onMouseOver="hilite(2674)" onMouseOut="lolite()" onClick="logVariable('prevpageid')" href="../../_variables/prevpageid.html">$prevpageid</a>;
<a name="l2360"><span class="linenum">2360</span></a>          <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it39461" onMouseOver="hilite(39461)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = <a class="var it2675" onMouseOver="hilite(2675)" onMouseOut="lolite()" onClick="logVariable('nextpageid')" href="../../_variables/nextpageid.html">$nextpageid</a>;
<a name="l2361"><span class="linenum">2361</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('lesson_pages', <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>);
<a name="l2362"><span class="linenum">2362</span></a>      }
<a name="l2363"><span class="linenum">2363</span></a>  
<a name="l2364"><span class="linenum">2364</span></a>      <span class="comment">/**</span>
<a name="l2365"><span class="linenum">2365</span></a>  <span class="comment">     * Returns the answers that are associated with this page in the database</span>
<a name="l2366"><span class="linenum">2366</span></a>  <span class="comment">     *</span>
<a name="l2367"><span class="linenum">2367</span></a>  <span class="comment">     * @final</span>
<a name="l2368"><span class="linenum">2368</span></a>  <span class="comment">     * @return array</span>
<a name="l2369"><span class="linenum">2369</span></a>  <span class="comment">     */</span>
<a name="l2370"><span class="linenum">2370</span></a>      final public function <a class="function" onClick="logFunction('get_answers')" href="../../_functions/get_answers.html" onMouseOver="funcPopup(event,'get_answers')">get_answers</a>() {
<a name="l2371"><span class="linenum">2371</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2372"><span class="linenum">2372</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a> === null) {
<a name="l2373"><span class="linenum">2373</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a> = array();
<a name="l2374"><span class="linenum">2374</span></a>              <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_answers', array('pageid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, 'lessonid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id), 'id');
<a name="l2375"><span class="linenum">2375</span></a>              if (!<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>) {
<a name="l2376"><span class="linenum">2376</span></a>  <span class="comment">                // It is possible that a lesson upgraded from Moodle 1.9 still</span>
<a name="l2377"><span class="linenum">2377</span></a>  <span class="comment">                // contains questions without any answers [MDL-25632].</span>
<a name="l2378"><span class="linenum">2378</span></a>  <span class="comment">                // debugging(get_string('cannotfindanswer', 'lesson'));</span>
<a name="l2379"><span class="linenum">2379</span></a>                  return array();
<a name="l2380"><span class="linenum">2380</span></a>              }
<a name="l2381"><span class="linenum">2381</span></a>              foreach (<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> as <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>) {
<a name="l2382"><span class="linenum">2382</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>)] = <span class="keyword">new </span><a class="class" onClick="logClass('lesson_page_answer')" href="../../_classes/lesson_page_answer.html" onMouseOver="classPopup(event,'lesson_page_answer')">lesson_page_answer</a>(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l2383"><span class="linenum">2383</span></a>              }
<a name="l2384"><span class="linenum">2384</span></a>          }
<a name="l2385"><span class="linenum">2385</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>;
<a name="l2386"><span class="linenum">2386</span></a>      }
<a name="l2387"><span class="linenum">2387</span></a>  
<a name="l2388"><span class="linenum">2388</span></a>      <span class="comment">/**</span>
<a name="l2389"><span class="linenum">2389</span></a>  <span class="comment">     * Returns the lesson this page is associated with</span>
<a name="l2390"><span class="linenum">2390</span></a>  <span class="comment">     * @final</span>
<a name="l2391"><span class="linenum">2391</span></a>  <span class="comment">     * @return lesson</span>
<a name="l2392"><span class="linenum">2392</span></a>  <span class="comment">     */</span>
<a name="l2393"><span class="linenum">2393</span></a>      final protected function <a class="function" onClick="logFunction('get_lesson')" href="../../_functions/get_lesson.html" onMouseOver="funcPopup(event,'get_lesson')">get_lesson</a>() {
<a name="l2394"><span class="linenum">2394</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>;
<a name="l2395"><span class="linenum">2395</span></a>      }
<a name="l2396"><span class="linenum">2396</span></a>  
<a name="l2397"><span class="linenum">2397</span></a>      <span class="comment">/**</span>
<a name="l2398"><span class="linenum">2398</span></a>  <span class="comment">     * Returns the type of page this is. Not to be confused with page type</span>
<a name="l2399"><span class="linenum">2399</span></a>  <span class="comment">     * @final</span>
<a name="l2400"><span class="linenum">2400</span></a>  <span class="comment">     * @return int</span>
<a name="l2401"><span class="linenum">2401</span></a>  <span class="comment">     */</span>
<a name="l2402"><span class="linenum">2402</span></a>      final protected function <a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>() {
<a name="l2403"><span class="linenum">2403</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>;
<a name="l2404"><span class="linenum">2404</span></a>      }
<a name="l2405"><span class="linenum">2405</span></a>  
<a name="l2406"><span class="linenum">2406</span></a>      <span class="comment">/**</span>
<a name="l2407"><span class="linenum">2407</span></a>  <span class="comment">     * Records an attempt at this page</span>
<a name="l2408"><span class="linenum">2408</span></a>  <span class="comment">     *</span>
<a name="l2409"><span class="linenum">2409</span></a>  <span class="comment">     * @final</span>
<a name="l2410"><span class="linenum">2410</span></a>  <span class="comment">     * @global moodle_database $DB</span>
<a name="l2411"><span class="linenum">2411</span></a>  <span class="comment">     * @param stdClass $context</span>
<a name="l2412"><span class="linenum">2412</span></a>  <span class="comment">     * @return stdClass Returns the result of the attempt</span>
<a name="l2413"><span class="linenum">2413</span></a>  <span class="comment">     */</span>
<a name="l2414"><span class="linenum">2414</span></a>      final public function <a class="function" onClick="logFunction('record_attempt')" href="../../_functions/record_attempt.html" onMouseOver="funcPopup(event,'record_attempt')">record_attempt</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l2415"><span class="linenum">2415</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l2416"><span class="linenum">2416</span></a>  
<a name="l2417"><span class="linenum">2417</span></a>          <span class="comment">/**</span>
<a name="l2418"><span class="linenum">2418</span></a>  <span class="comment">         * This should be overridden by each page type to actually check the response</span>
<a name="l2419"><span class="linenum">2419</span></a>  <span class="comment">         * against what ever custom criteria they have defined</span>
<a name="l2420"><span class="linenum">2420</span></a>  <span class="comment">         */</span>
<a name="l2421"><span class="linenum">2421</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_answer')" href="../../_functions/check_answer.html" onMouseOver="funcPopup(event,'check_answer')">check_answer</a>();
<a name="l2422"><span class="linenum">2422</span></a>  
<a name="l2423"><span class="linenum">2423</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('attemptsremaining')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/attemptsremaining.html">attemptsremaining</a>  = 0;
<a name="l2424"><span class="linenum">2424</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('maxattemptsreached')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/maxattemptsreached.html">maxattemptsreached</a> = false;
<a name="l2425"><span class="linenum">2425</span></a>  
<a name="l2426"><span class="linenum">2426</span></a>          if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('noanswer')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/noanswer.html">noanswer</a>) {
<a name="l2427"><span class="linenum">2427</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id; <span class="comment">// display same page again</span>
<a name="l2428"><span class="linenum">2428</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>  = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('noanswer', 'lesson');
<a name="l2429"><span class="linenum">2429</span></a>          } else {
<a name="l2430"><span class="linenum">2430</span></a>              if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/lesson:manage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2431"><span class="linenum">2431</span></a>                  <a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id, &quot;userid&quot;=&gt;<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2432"><span class="linenum">2432</span></a>  <span class="comment">                // record student's attempt</span>
<a name="l2433"><span class="linenum">2433</span></a>                  <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a> = new stdClass;
<a name="l2434"><span class="linenum">2434</span></a>                  <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('lessonid')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id;
<a name="l2435"><span class="linenum">2435</span></a>                  <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('pageid')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l2436"><span class="linenum">2436</span></a>                  <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('userid')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2437"><span class="linenum">2437</span></a>                  <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('answerid')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('answerid')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a>;
<a name="l2438"><span class="linenum">2438</span></a>                  <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('retry')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/retry.html">retry</a> = <a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>;
<a name="l2439"><span class="linenum">2439</span></a>                  <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('correct')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/correct.html">correct</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a>;
<a name="l2440"><span class="linenum">2440</span></a>                  if(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('userresponse')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/userresponse.html">userresponse</a> !== null) {
<a name="l2441"><span class="linenum">2441</span></a>                      <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('useranswer')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/useranswer.html">useranswer</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('userresponse')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/userresponse.html">userresponse</a>;
<a name="l2442"><span class="linenum">2442</span></a>                  }
<a name="l2443"><span class="linenum">2443</span></a>  
<a name="l2444"><span class="linenum">2444</span></a>                  <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('timeseen')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/timeseen.html">timeseen</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2445"><span class="linenum">2445</span></a>  <span class="comment">                // if allow modattempts, then update the old attempt record, otherwise, insert new answer record</span>
<a name="l2446"><span class="linenum">2446</span></a>                  <a class="var it23958" onMouseOver="hilite(23958)" onMouseOut="lolite()" onClick="logVariable('userisreviewing')" href="../../_variables/userisreviewing.html">$userisreviewing</a> = false;
<a name="l2447"><span class="linenum">2447</span></a>                  if (isset(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('modattempts')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/modattempts.html">modattempts</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id])) {
<a name="l2448"><span class="linenum">2448</span></a>                      <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('retry')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/retry.html">retry</a> = <a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a> - 1; <span class="comment">// they are going through on review, $nretakes will be too high</span>
<a name="l2449"><span class="linenum">2449</span></a>                      <a class="var it23958" onMouseOver="hilite(23958)" onMouseOut="lolite()" onClick="logVariable('userisreviewing')" href="../../_variables/userisreviewing.html">$userisreviewing</a> = true;
<a name="l2450"><span class="linenum">2450</span></a>                  }
<a name="l2451"><span class="linenum">2451</span></a>  
<a name="l2452"><span class="linenum">2452</span></a>  <span class="comment">                // Only insert a record if we are not reviewing the lesson.</span>
<a name="l2453"><span class="linenum">2453</span></a>                  if (!<a class="var it23958" onMouseOver="hilite(23958)" onMouseOut="lolite()" onClick="logVariable('userisreviewing')" href="../../_variables/userisreviewing.html">$userisreviewing</a>) {
<a name="l2454"><span class="linenum">2454</span></a>                      if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;retake || (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;retake &amp;&amp; <a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a> == 0)) {
<a name="l2455"><span class="linenum">2455</span></a>                          <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('id')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_attempts&quot;, <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>);
<a name="l2456"><span class="linenum">2456</span></a>  <span class="comment">                        // Trigger an event: question answered.</span>
<a name="l2457"><span class="linenum">2457</span></a>                          <a class="var it1765" onMouseOver="hilite(1765)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a> = array(
<a name="l2458"><span class="linenum">2458</span></a>                              'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id),
<a name="l2459"><span class="linenum">2459</span></a>                              'objectid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id,
<a name="l2460"><span class="linenum">2460</span></a>                              'other' =&gt; array(
<a name="l2461"><span class="linenum">2461</span></a>                                  'pagetype' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_typestring')" href="../../_functions/get_typestring.html" onMouseOver="funcPopup(event,'get_typestring')">get_typestring</a>()
<a name="l2462"><span class="linenum">2462</span></a>                                  )
<a name="l2463"><span class="linenum">2463</span></a>                              );
<a name="l2464"><span class="linenum">2464</span></a>                          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_lesson\event\<a class="class" onClick="logClass('question_answered')" href="../../_classes/question_answered.html" onMouseOver="classPopup(event,'question_answered')">question_answered</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it1765" onMouseOver="hilite(1765)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../../_variables/eventparams.html">$eventparams</a>);
<a name="l2465"><span class="linenum">2465</span></a>                          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('lesson_attempts', <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>);
<a name="l2466"><span class="linenum">2466</span></a>                          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2467"><span class="linenum">2467</span></a>  
<a name="l2468"><span class="linenum">2468</span></a>                      }
<a name="l2469"><span class="linenum">2469</span></a>                  }
<a name="l2470"><span class="linenum">2470</span></a>  <span class="comment">                // &quot;number of attempts remaining&quot; message if $this-&gt;lesson-&gt;maxattempts &gt; 1</span>
<a name="l2471"><span class="linenum">2471</span></a>  <span class="comment">                // displaying of message(s) is at the end of page for more ergonomic display</span>
<a name="l2472"><span class="linenum">2472</span></a>                  if (!<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a> &amp;&amp; (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> == 0)) {
<a name="l2473"><span class="linenum">2473</span></a>  <span class="comment">                    // wrong answer and student is stuck on this page - check how many attempts</span>
<a name="l2474"><span class="linenum">2474</span></a>  <span class="comment">                    // the student has had at this page/question</span>
<a name="l2475"><span class="linenum">2475</span></a>                      <a class="var it10066" onMouseOver="hilite(10066)" onMouseOut="lolite()" onClick="logVariable('nattempts')" href="../../_variables/nattempts.html">$nattempts</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_attempts&quot;, array(&quot;pageid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, &quot;userid&quot;=&gt;<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;retry&quot; =&gt; <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('retry')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/retry.html">retry</a>));
<a name="l2476"><span class="linenum">2476</span></a>  <span class="comment">                    // retreive the number of attempts left counter for displaying at bottom of feedback page</span>
<a name="l2477"><span class="linenum">2477</span></a>                      if (<a class="var it10066" onMouseOver="hilite(10066)" onMouseOut="lolite()" onClick="logVariable('nattempts')" href="../../_variables/nattempts.html">$nattempts</a> &gt;= <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;maxattempts) {
<a name="l2478"><span class="linenum">2478</span></a>                          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;maxattempts &gt; 1) { // don't bother with message if only one attempt
<a name="l2479"><span class="linenum">2479</span></a>                              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('maxattemptsreached')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/maxattemptsreached.html">maxattemptsreached</a> = true;
<a name="l2480"><span class="linenum">2480</span></a>                          }
<a name="l2481"><span class="linenum">2481</span></a>                          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> = <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>;
<a name="l2482"><span class="linenum">2482</span></a>                      } else if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;maxattempts &gt; 1) { // don't bother with message if only one attempt
<a name="l2483"><span class="linenum">2483</span></a>                          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('attemptsremaining')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/attemptsremaining.html">attemptsremaining</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;maxattempts - <a class="var it10066" onMouseOver="hilite(10066)" onMouseOut="lolite()" onClick="logVariable('nattempts')" href="../../_variables/nattempts.html">$nattempts</a>;
<a name="l2484"><span class="linenum">2484</span></a>                      }
<a name="l2485"><span class="linenum">2485</span></a>                  }
<a name="l2486"><span class="linenum">2486</span></a>              }
<a name="l2487"><span class="linenum">2487</span></a>  <span class="comment">            // TODO: merge this code with the jump code below.  Convert jumpto page into a proper page id</span>
<a name="l2488"><span class="linenum">2488</span></a>              if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> == 0) {
<a name="l2489"><span class="linenum">2489</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l2490"><span class="linenum">2490</span></a>              } elseif (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> == <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>) {
<a name="l2491"><span class="linenum">2491</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;<a class="function" onClick="logFunction('get_next_page')" href="../../_functions/get_next_page.html" onMouseOver="funcPopup(event,'get_next_page')">get_next_page</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid);
<a name="l2492"><span class="linenum">2492</span></a>              }
<a name="l2493"><span class="linenum">2493</span></a>  
<a name="l2494"><span class="linenum">2494</span></a>  <span class="comment">            // Determine default feedback if necessary</span>
<a name="l2495"><span class="linenum">2495</span></a>              if (empty(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>)) {
<a name="l2496"><span class="linenum">2496</span></a>                  if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;feedback &amp;&amp; !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('noanswer')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/noanswer.html">noanswer</a> &amp;&amp; !(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;review &amp; !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a> &amp;&amp; !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('isessayquestion')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/isessayquestion.html">isessayquestion</a>)) {
<a name="l2497"><span class="linenum">2497</span></a>  <span class="comment">                    // These conditions have been met:</span>
<a name="l2498"><span class="linenum">2498</span></a>  <span class="comment">                    //  1. The lesson manager has not supplied feedback to the student</span>
<a name="l2499"><span class="linenum">2499</span></a>  <span class="comment">                    //  2. Not displaying default feedback</span>
<a name="l2500"><span class="linenum">2500</span></a>  <span class="comment">                    //  3. The user did provide an answer</span>
<a name="l2501"><span class="linenum">2501</span></a>  <span class="comment">                    //  4. We are not reviewing with an incorrect answer (and not reviewing an essay question)</span>
<a name="l2502"><span class="linenum">2502</span></a>  
<a name="l2503"><span class="linenum">2503</span></a>                      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('nodefaultresponse')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/nodefaultresponse.html">nodefaultresponse</a> = true;  <span class="comment">// This will cause a redirect below</span>
<a name="l2504"><span class="linenum">2504</span></a>                  } else if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('isessayquestion')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/isessayquestion.html">isessayquestion</a>) {
<a name="l2505"><span class="linenum">2505</span></a>                      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('defaultessayresponse', 'lesson');
<a name="l2506"><span class="linenum">2506</span></a>                  } else if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a>) {
<a name="l2507"><span class="linenum">2507</span></a>                      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('thatsthecorrectanswer', 'lesson');
<a name="l2508"><span class="linenum">2508</span></a>                  } else {
<a name="l2509"><span class="linenum">2509</span></a>                      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('thatsthewronganswer', 'lesson');
<a name="l2510"><span class="linenum">2510</span></a>                  }
<a name="l2511"><span class="linenum">2511</span></a>              }
<a name="l2512"><span class="linenum">2512</span></a>  
<a name="l2513"><span class="linenum">2513</span></a>              if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>) {
<a name="l2514"><span class="linenum">2514</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;review &amp;&amp; !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a> &amp;&amp; !<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('isessayquestion')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/isessayquestion.html">isessayquestion</a>) {
<a name="l2515"><span class="linenum">2515</span></a>                      <a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_grades&quot;, array(&quot;lessonid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id, &quot;userid&quot;=&gt;<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2516"><span class="linenum">2516</span></a>                      <a class="var it23959" onMouseOver="hilite(23959)" onMouseOut="lolite()" onClick="logVariable('qattempts')" href="../../_variables/qattempts.html">$qattempts</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_attempts&quot;, array(&quot;userid&quot;=&gt;<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;retry&quot;=&gt;<a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>, &quot;pageid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id));
<a name="l2517"><span class="linenum">2517</span></a>                      if (<a class="var it23959" onMouseOver="hilite(23959)" onMouseOut="lolite()" onClick="logVariable('qattempts')" href="../../_variables/qattempts.html">$qattempts</a> == 1) {
<a name="l2518"><span class="linenum">2518</span></a>                          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;firstwrong&quot;, &quot;lesson&quot;), 'feedback');
<a name="l2519"><span class="linenum">2519</span></a>                      } else {
<a name="l2520"><span class="linenum">2520</span></a>                          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;secondpluswrong&quot;, &quot;lesson&quot;), 'feedback');
<a name="l2521"><span class="linenum">2521</span></a>                      }
<a name="l2522"><span class="linenum">2522</span></a>                  } else {
<a name="l2523"><span class="linenum">2523</span></a>                      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = '';
<a name="l2524"><span class="linenum">2524</span></a>                  }
<a name="l2525"><span class="linenum">2525</span></a>                  <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'response';
<a name="l2526"><span class="linenum">2526</span></a>                  if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a>) {
<a name="l2527"><span class="linenum">2527</span></a>                      <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> .= ' correct'; <span class="comment">// CSS over-ride this if they exist (!important).</span>
<a name="l2528"><span class="linenum">2528</span></a>                  } else if (!<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('isessayquestion')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/isessayquestion.html">isessayquestion</a>) {
<a name="l2529"><span class="linenum">2529</span></a>                      <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> .= ' incorrect'; <span class="comment">// CSS over-ride this if they exist (!important).</span>
<a name="l2530"><span class="linenum">2530</span></a>                  }
<a name="l2531"><span class="linenum">2531</span></a>                  <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = new stdClass;
<a name="l2532"><span class="linenum">2532</span></a>                  <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('noclean')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../_variables/noclean.html">noclean</a> = true;
<a name="l2533"><span class="linenum">2533</span></a>                  <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('para')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../_variables/para.html">para</a> = true;
<a name="l2534"><span class="linenum">2534</span></a>                  <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('overflowdiv')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../_variables/overflowdiv.html">overflowdiv</a> = true;
<a name="l2535"><span class="linenum">2535</span></a>                  <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('context')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l2536"><span class="linenum">2536</span></a>  
<a name="l2537"><span class="linenum">2537</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> .= <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_contents')" href="../../_functions/get_contents.html" onMouseOver="funcPopup(event,'get_contents')">get_contents</a>(), <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;contentsformat, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>),
<a name="l2538"><span class="linenum">2538</span></a>                          'generalbox boxaligncenter');
<a name="l2539"><span class="linenum">2539</span></a>                  if (isset(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('studentanswerformat')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/studentanswerformat.html">studentanswerformat</a>)) {
<a name="l2540"><span class="linenum">2540</span></a>  <span class="comment">                    // This is the student's answer so it should be cleaned.</span>
<a name="l2541"><span class="linenum">2541</span></a>                      <a class="var it1785" onMouseOver="hilite(1785)" onMouseOut="lolite()" onClick="logVariable('studentanswer')" href="../../_variables/studentanswer.html">$studentanswer</a> = <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('studentanswer')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/studentanswer.html">studentanswer</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('studentanswerformat')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/studentanswerformat.html">studentanswerformat</a>,
<a name="l2542"><span class="linenum">2542</span></a>                              array('context' =&gt; <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, 'para' =&gt; true));
<a name="l2543"><span class="linenum">2543</span></a>                  } else {
<a name="l2544"><span class="linenum">2544</span></a>                      <a class="var it1785" onMouseOver="hilite(1785)" onMouseOut="lolite()" onClick="logVariable('studentanswer')" href="../../_variables/studentanswer.html">$studentanswer</a> = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('studentanswer')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/studentanswer.html">studentanswer</a>);
<a name="l2545"><span class="linenum">2545</span></a>                  }
<a name="l2546"><span class="linenum">2546</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> .= '&lt;div class=&quot;correctanswer generalbox&quot;&gt;&lt;em&gt;'
<a name="l2547"><span class="linenum">2547</span></a>                          . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;youranswer&quot;, &quot;lesson&quot;).'&lt;/em&gt; : ' . <a class="var it1785" onMouseOver="hilite(1785)" onMouseOut="lolite()" onClick="logVariable('studentanswer')" href="../../_variables/studentanswer.html">$studentanswer</a>;
<a name="l2548"><span class="linenum">2548</span></a>                  if (isset(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('responseformat')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a>)) {
<a name="l2549"><span class="linenum">2549</span></a>                      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, '<a class="filename" href="../../pluginfile.php.html">pluginfile.php</a>', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2550"><span class="linenum">2550</span></a>                              'mod_lesson', 'page_responses', <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('answerid')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a>);
<a name="l2551"><span class="linenum">2551</span></a>                      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> .= <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('responseformat')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>)
<a name="l2552"><span class="linenum">2552</span></a>                              , <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>);
<a name="l2553"><span class="linenum">2553</span></a>                  } else {
<a name="l2554"><span class="linenum">2554</span></a>                      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> .= <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>);
<a name="l2555"><span class="linenum">2555</span></a>                  }
<a name="l2556"><span class="linenum">2556</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> .= '&lt;/div&gt;';
<a name="l2557"><span class="linenum">2557</span></a>              }
<a name="l2558"><span class="linenum">2558</span></a>          }
<a name="l2559"><span class="linenum">2559</span></a>  
<a name="l2560"><span class="linenum">2560</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l2561"><span class="linenum">2561</span></a>      }
<a name="l2562"><span class="linenum">2562</span></a>  
<a name="l2563"><span class="linenum">2563</span></a>      <span class="comment">/**</span>
<a name="l2564"><span class="linenum">2564</span></a>  <span class="comment">     * Returns the string for a jump name</span>
<a name="l2565"><span class="linenum">2565</span></a>  <span class="comment">     *</span>
<a name="l2566"><span class="linenum">2566</span></a>  <span class="comment">     * @final</span>
<a name="l2567"><span class="linenum">2567</span></a>  <span class="comment">     * @param int $jumpto Jump code or page ID</span>
<a name="l2568"><span class="linenum">2568</span></a>  <span class="comment">     * @return string</span>
<a name="l2569"><span class="linenum">2569</span></a>  <span class="comment">     **/</span>
<a name="l2570"><span class="linenum">2570</span></a>      final protected function <a class="function" onClick="logFunction('get_jump_name')" href="../../_functions/get_jump_name.html" onMouseOver="funcPopup(event,'get_jump_name')">get_jump_name</a>(<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>) {
<a name="l2571"><span class="linenum">2571</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2572"><span class="linenum">2572</span></a>          static <a class="var it23960" onMouseOver="hilite(23960)" onMouseOut="lolite()" onClick="logVariable('jumpnames')" href="../../_variables/jumpnames.html">$jumpnames</a> = array();
<a name="l2573"><span class="linenum">2573</span></a>  
<a name="l2574"><span class="linenum">2574</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>, <a class="var it23960" onMouseOver="hilite(23960)" onMouseOut="lolite()" onClick="logVariable('jumpnames')" href="../../_variables/jumpnames.html">$jumpnames</a>)) {
<a name="l2575"><span class="linenum">2575</span></a>              if (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_THISPAGE')" href="../../_constants/LESSON_THISPAGE.html" onMouseOver="constPopup(event,'LESSON_THISPAGE')">LESSON_THISPAGE</a>) {
<a name="l2576"><span class="linenum">2576</span></a>                  <a class="var it23961" onMouseOver="hilite(23961)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('thispage', 'lesson');
<a name="l2577"><span class="linenum">2577</span></a>              } elseif (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>) {
<a name="l2578"><span class="linenum">2578</span></a>                  <a class="var it23961" onMouseOver="hilite(23961)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nextpage', 'lesson');
<a name="l2579"><span class="linenum">2579</span></a>              } elseif (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>) {
<a name="l2580"><span class="linenum">2580</span></a>                  <a class="var it23961" onMouseOver="hilite(23961)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('endoflesson', 'lesson');
<a name="l2581"><span class="linenum">2581</span></a>              } elseif (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_UNSEENBRANCHPAGE')" href="../../_constants/LESSON_UNSEENBRANCHPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENBRANCHPAGE')">LESSON_UNSEENBRANCHPAGE</a>) {
<a name="l2582"><span class="linenum">2582</span></a>                  <a class="var it23961" onMouseOver="hilite(23961)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('unseenpageinbranch', 'lesson');
<a name="l2583"><span class="linenum">2583</span></a>              } elseif (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_PREVIOUSPAGE')" href="../../_constants/LESSON_PREVIOUSPAGE.html" onMouseOver="constPopup(event,'LESSON_PREVIOUSPAGE')">LESSON_PREVIOUSPAGE</a>) {
<a name="l2584"><span class="linenum">2584</span></a>                  <a class="var it23961" onMouseOver="hilite(23961)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('previouspage', 'lesson');
<a name="l2585"><span class="linenum">2585</span></a>              } elseif (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_RANDOMPAGE')" href="../../_constants/LESSON_RANDOMPAGE.html" onMouseOver="constPopup(event,'LESSON_RANDOMPAGE')">LESSON_RANDOMPAGE</a>) {
<a name="l2586"><span class="linenum">2586</span></a>                  <a class="var it23961" onMouseOver="hilite(23961)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('randompageinbranch', 'lesson');
<a name="l2587"><span class="linenum">2587</span></a>              } elseif (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_RANDOMBRANCH')" href="../../_constants/LESSON_RANDOMBRANCH.html" onMouseOver="constPopup(event,'LESSON_RANDOMBRANCH')">LESSON_RANDOMBRANCH</a>) {
<a name="l2588"><span class="linenum">2588</span></a>                  <a class="var it23961" onMouseOver="hilite(23961)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('randombranch', 'lesson');
<a name="l2589"><span class="linenum">2589</span></a>              } elseif (<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a> == <a class="constant" onClick="logConstant('LESSON_CLUSTERJUMP')" href="../../_constants/LESSON_CLUSTERJUMP.html" onMouseOver="constPopup(event,'LESSON_CLUSTERJUMP')">LESSON_CLUSTERJUMP</a>) {
<a name="l2590"><span class="linenum">2590</span></a>                  <a class="var it23961" onMouseOver="hilite(23961)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('clusterjump', 'lesson');
<a name="l2591"><span class="linenum">2591</span></a>              } else {
<a name="l2592"><span class="linenum">2592</span></a>                  if (!<a class="var it23961" onMouseOver="hilite(23961)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('lesson_pages', 'title', array('id' =&gt; <a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>))) {
<a name="l2593"><span class="linenum">2593</span></a>                      <a class="var it23961" onMouseOver="hilite(23961)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a> = '&lt;strong&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('notdefined', 'lesson').'&lt;/strong&gt;';
<a name="l2594"><span class="linenum">2594</span></a>                  }
<a name="l2595"><span class="linenum">2595</span></a>              }
<a name="l2596"><span class="linenum">2596</span></a>              <a class="var it23960" onMouseOver="hilite(23960)" onMouseOut="lolite()" onClick="logVariable('jumpnames')" href="../../_variables/jumpnames.html">$jumpnames</a>[<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>] = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it23961" onMouseOver="hilite(23961)" onMouseOut="lolite()" onClick="logVariable('jumptitle')" href="../../_variables/jumptitle.html">$jumptitle</a>,true);
<a name="l2597"><span class="linenum">2597</span></a>          }
<a name="l2598"><span class="linenum">2598</span></a>  
<a name="l2599"><span class="linenum">2599</span></a>          return <a class="var it23960" onMouseOver="hilite(23960)" onMouseOut="lolite()" onClick="logVariable('jumpnames')" href="../../_variables/jumpnames.html">$jumpnames</a>[<a class="var it1777" onMouseOver="hilite(1777)" onMouseOut="lolite()" onClick="logVariable('jumpto')" href="../../_variables/jumpto.html">$jumpto</a>];
<a name="l2600"><span class="linenum">2600</span></a>      }
<a name="l2601"><span class="linenum">2601</span></a>  
<a name="l2602"><span class="linenum">2602</span></a>      <span class="comment">/**</span>
<a name="l2603"><span class="linenum">2603</span></a>  <span class="comment">     * Constructor method</span>
<a name="l2604"><span class="linenum">2604</span></a>  <span class="comment">     * @param object $properties</span>
<a name="l2605"><span class="linenum">2605</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l2606"><span class="linenum">2606</span></a>  <span class="comment">     */</span>
<a name="l2607"><span class="linenum">2607</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>, lesson <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l2608"><span class="linenum">2608</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>);
<a name="l2609"><span class="linenum">2609</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a> = <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>;
<a name="l2610"><span class="linenum">2610</span></a>      }
<a name="l2611"><span class="linenum">2611</span></a>  
<a name="l2612"><span class="linenum">2612</span></a>      <span class="comment">/**</span>
<a name="l2613"><span class="linenum">2613</span></a>  <span class="comment">     * Returns the score for the attempt</span>
<a name="l2614"><span class="linenum">2614</span></a>  <span class="comment">     * This may be overridden by page types that require manual grading</span>
<a name="l2615"><span class="linenum">2615</span></a>  <span class="comment">     * @param array $answers</span>
<a name="l2616"><span class="linenum">2616</span></a>  <span class="comment">     * @param object $attempt</span>
<a name="l2617"><span class="linenum">2617</span></a>  <span class="comment">     * @return int</span>
<a name="l2618"><span class="linenum">2618</span></a>  <span class="comment">     */</span>
<a name="l2619"><span class="linenum">2619</span></a>      public function <a class="function" onClick="logFunction('earned_score')" href="../../_functions/earned_score.html" onMouseOver="funcPopup(event,'earned_score')">earned_score</a>(<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>, <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>) {
<a name="l2620"><span class="linenum">2620</span></a>          return <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>[<a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('answerid')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a>]-&gt;score;
<a name="l2621"><span class="linenum">2621</span></a>      }
<a name="l2622"><span class="linenum">2622</span></a>  
<a name="l2623"><span class="linenum">2623</span></a>      <span class="comment">/**</span>
<a name="l2624"><span class="linenum">2624</span></a>  <span class="comment">     * This is a callback method that can be override and gets called when ever a page</span>
<a name="l2625"><span class="linenum">2625</span></a>  <span class="comment">     * is viewed</span>
<a name="l2626"><span class="linenum">2626</span></a>  <span class="comment">     *</span>
<a name="l2627"><span class="linenum">2627</span></a>  <span class="comment">     * @param bool $canmanage True if the user has the manage cap</span>
<a name="l2628"><span class="linenum">2628</span></a>  <span class="comment">     * @return mixed</span>
<a name="l2629"><span class="linenum">2629</span></a>  <span class="comment">     */</span>
<a name="l2630"><span class="linenum">2630</span></a>      public function <a class="function" onClick="logFunction('callback_on_view')" href="../../_functions/callback_on_view.html" onMouseOver="funcPopup(event,'callback_on_view')">callback_on_view</a>(<a class="var it2540" onMouseOver="hilite(2540)" onMouseOut="lolite()" onClick="logVariable('canmanage')" href="../../_variables/canmanage.html">$canmanage</a>) {
<a name="l2631"><span class="linenum">2631</span></a>          return true;
<a name="l2632"><span class="linenum">2632</span></a>      }
<a name="l2633"><span class="linenum">2633</span></a>  
<a name="l2634"><span class="linenum">2634</span></a>      <span class="comment">/**</span>
<a name="l2635"><span class="linenum">2635</span></a>  <span class="comment">     * save editor answers files and update answer record</span>
<a name="l2636"><span class="linenum">2636</span></a>  <span class="comment">     *</span>
<a name="l2637"><span class="linenum">2637</span></a>  <span class="comment">     * @param object $context</span>
<a name="l2638"><span class="linenum">2638</span></a>  <span class="comment">     * @param int $maxbytes</span>
<a name="l2639"><span class="linenum">2639</span></a>  <span class="comment">     * @param object $answer</span>
<a name="l2640"><span class="linenum">2640</span></a>  <span class="comment">     * @param object $answereditor</span>
<a name="l2641"><span class="linenum">2641</span></a>  <span class="comment">     * @param object $responseeditor</span>
<a name="l2642"><span class="linenum">2642</span></a>  <span class="comment">     */</span>
<a name="l2643"><span class="linenum">2643</span></a>      public function <a class="function" onClick="logFunction('save_answers_files')" href="../../_functions/save_answers_files.html" onMouseOver="funcPopup(event,'save_answers_files')">save_answers_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1436" onMouseOver="hilite(1436)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>, &amp;<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it23962" onMouseOver="hilite(23962)" onMouseOut="lolite()" onClick="logVariable('answereditor')" href="../../_variables/answereditor.html">$answereditor</a> = '', <a class="var it23963" onMouseOver="hilite(23963)" onMouseOut="lolite()" onClick="logVariable('responseeditor')" href="../../_variables/responseeditor.html">$responseeditor</a> = '') {
<a name="l2644"><span class="linenum">2644</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2645"><span class="linenum">2645</span></a>          if (isset(<a class="var it23962" onMouseOver="hilite(23962)" onMouseOut="lolite()" onClick="logVariable('answereditor')" href="../../_variables/answereditor.html">$answereditor</a>['itemid'])) {
<a name="l2646"><span class="linenum">2646</span></a>              <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it23962" onMouseOver="hilite(23962)" onMouseOut="lolite()" onClick="logVariable('answereditor')" href="../../_variables/answereditor.html">$answereditor</a>['itemid'],
<a name="l2647"><span class="linenum">2647</span></a>                      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'page_answers', <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2648"><span class="linenum">2648</span></a>                      array('noclean' =&gt; true, 'maxfiles' =&gt; <a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes' =&gt; <a class="var it1436" onMouseOver="hilite(1436)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>),
<a name="l2649"><span class="linenum">2649</span></a>                      <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>, null);
<a name="l2650"><span class="linenum">2650</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('lesson_answers', 'answer', <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>, array('id' =&gt; <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2651"><span class="linenum">2651</span></a>          }
<a name="l2652"><span class="linenum">2652</span></a>          if (isset(<a class="var it23963" onMouseOver="hilite(23963)" onMouseOut="lolite()" onClick="logVariable('responseeditor')" href="../../_variables/responseeditor.html">$responseeditor</a>['itemid'])) {
<a name="l2653"><span class="linenum">2653</span></a>              <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it23963" onMouseOver="hilite(23963)" onMouseOut="lolite()" onClick="logVariable('responseeditor')" href="../../_variables/responseeditor.html">$responseeditor</a>['itemid'],
<a name="l2654"><span class="linenum">2654</span></a>                      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson', 'page_responses', <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2655"><span class="linenum">2655</span></a>                      array('noclean' =&gt; true, 'maxfiles' =&gt; <a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes' =&gt; <a class="var it1436" onMouseOver="hilite(1436)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>),
<a name="l2656"><span class="linenum">2656</span></a>                      <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, null);
<a name="l2657"><span class="linenum">2657</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('lesson_answers', 'response', <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, array('id' =&gt; <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2658"><span class="linenum">2658</span></a>          }
<a name="l2659"><span class="linenum">2659</span></a>      }
<a name="l2660"><span class="linenum">2660</span></a>  
<a name="l2661"><span class="linenum">2661</span></a>      <span class="comment">/**</span>
<a name="l2662"><span class="linenum">2662</span></a>  <span class="comment">     * Rewrite urls in response and optionality answer of a question answer</span>
<a name="l2663"><span class="linenum">2663</span></a>  <span class="comment">     *</span>
<a name="l2664"><span class="linenum">2664</span></a>  <span class="comment">     * @param object $answer</span>
<a name="l2665"><span class="linenum">2665</span></a>  <span class="comment">     * @param bool $rewriteanswer must rewrite answer</span>
<a name="l2666"><span class="linenum">2666</span></a>  <span class="comment">     * @return object answer with rewritten urls</span>
<a name="l2667"><span class="linenum">2667</span></a>  <span class="comment">     */</span>
<a name="l2668"><span class="linenum">2668</span></a>      public static function <a class="function" onClick="logFunction('rewrite_answers_urls')" href="../../_functions/rewrite_answers_urls.html" onMouseOver="funcPopup(event,'rewrite_answers_urls')">rewrite_answers_urls</a>(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>, <a class="var it23964" onMouseOver="hilite(23964)" onMouseOut="lolite()" onClick="logVariable('rewriteanswer')" href="../../_variables/rewriteanswer.html">$rewriteanswer</a> = true) {
<a name="l2669"><span class="linenum">2669</span></a>          global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l2670"><span class="linenum">2670</span></a>  
<a name="l2671"><span class="linenum">2671</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id);
<a name="l2672"><span class="linenum">2672</span></a>          if (<a class="var it23964" onMouseOver="hilite(23964)" onMouseOut="lolite()" onClick="logVariable('rewriteanswer')" href="../../_variables/rewriteanswer.html">$rewriteanswer</a>) {
<a name="l2673"><span class="linenum">2673</span></a>              <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>, '<a class="filename" href="../../pluginfile.php.html">pluginfile.php</a>', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2674"><span class="linenum">2674</span></a>                      'mod_lesson', 'page_answers', <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2675"><span class="linenum">2675</span></a>          }
<a name="l2676"><span class="linenum">2676</span></a>          <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, '<a class="filename" href="../../pluginfile.php.html">pluginfile.php</a>', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2677"><span class="linenum">2677</span></a>                  'mod_lesson', 'page_responses', <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2678"><span class="linenum">2678</span></a>  
<a name="l2679"><span class="linenum">2679</span></a>          return <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>;
<a name="l2680"><span class="linenum">2680</span></a>      }
<a name="l2681"><span class="linenum">2681</span></a>  
<a name="l2682"><span class="linenum">2682</span></a>      <span class="comment">/**</span>
<a name="l2683"><span class="linenum">2683</span></a>  <span class="comment">     * Updates a lesson page and its answers within the database</span>
<a name="l2684"><span class="linenum">2684</span></a>  <span class="comment">     *</span>
<a name="l2685"><span class="linenum">2685</span></a>  <span class="comment">     * @param object $properties</span>
<a name="l2686"><span class="linenum">2686</span></a>  <span class="comment">     * @return bool</span>
<a name="l2687"><span class="linenum">2687</span></a>  <span class="comment">     */</span>
<a name="l2688"><span class="linenum">2688</span></a>      public function <a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = null, <a class="var it1436" onMouseOver="hilite(1436)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a> = null) {
<a name="l2689"><span class="linenum">2689</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l2690"><span class="linenum">2690</span></a>          <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>  = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_answers')" href="../../_functions/get_answers.html" onMouseOver="funcPopup(event,'get_answers')">get_answers</a>();
<a name="l2691"><span class="linenum">2691</span></a>          <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('id')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l2692"><span class="linenum">2692</span></a>          <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('lessonid')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id;
<a name="l2693"><span class="linenum">2693</span></a>          if (empty(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('qoption')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/qoption.html">qoption</a>)) {
<a name="l2694"><span class="linenum">2694</span></a>              <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('qoption')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/qoption.html">qoption</a> = '0';
<a name="l2695"><span class="linenum">2695</span></a>          }
<a name="l2696"><span class="linenum">2696</span></a>          if (empty(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2697"><span class="linenum">2697</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('context')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>;
<a name="l2698"><span class="linenum">2698</span></a>          }
<a name="l2699"><span class="linenum">2699</span></a>          if (<a class="var it1436" onMouseOver="hilite(1436)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a> === null) {
<a name="l2700"><span class="linenum">2700</span></a>              <a class="var it1436" onMouseOver="hilite(1436)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a> = <a class="function" onClick="logFunction('get_user_max_upload_file_size')" href="../../_functions/get_user_max_upload_file_size.html" onMouseOver="funcPopup(event,'get_user_max_upload_file_size')">get_user_max_upload_file_size</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l2701"><span class="linenum">2701</span></a>          }
<a name="l2702"><span class="linenum">2702</span></a>          <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('timemodified')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2703"><span class="linenum">2703</span></a>          <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a> = <a class="function" onClick="logFunction('file_postupdate_standard_editor')" href="../../_functions/file_postupdate_standard_editor.html" onMouseOver="funcPopup(event,'file_postupdate_standard_editor')">file_postupdate_standard_editor</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>, 'contents', array('noclean'=&gt;true, 'maxfiles'=&gt;<a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>, 'maxbytes'=&gt;<a class="var it1436" onMouseOver="hilite(1436)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>), <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, 'mod_lesson', 'page_contents', <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('id')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2704"><span class="linenum">2704</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(&quot;lesson_pages&quot;, <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>);
<a name="l2705"><span class="linenum">2705</span></a>  
<a name="l2706"><span class="linenum">2706</span></a>  <span class="comment">        // Trigger an event: page updated.</span>
<a name="l2707"><span class="linenum">2707</span></a>          \mod_lesson\event\<a class="class" onClick="logClass('page_updated')" href="../../_classes/page_updated.html" onMouseOver="classPopup(event,'page_updated')">page_updated</a>::<a class="function" onClick="logFunction('create_from_lesson_page')" href="../../_functions/create_from_lesson_page.html" onMouseOver="funcPopup(event,'create_from_lesson_page')">create_from_lesson_page</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2708"><span class="linenum">2708</span></a>  
<a name="l2709"><span class="linenum">2709</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/type.html">type</a> == self::TYPE_STRUCTURE &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_typeid')" href="../../_functions/get_typeid.html" onMouseOver="funcPopup(event,'get_typeid')">get_typeid</a>() != <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>) {
<a name="l2710"><span class="linenum">2710</span></a>  <span class="comment">            // These page types have only one answer to save the jump and score.</span>
<a name="l2711"><span class="linenum">2711</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>) &gt; 1) {
<a name="l2712"><span class="linenum">2712</span></a>                  <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>);
<a name="l2713"><span class="linenum">2713</span></a>                  foreach (<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> as <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>) {
<a name="l2714"><span class="linenum">2714</span></a>                      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;delete_record('lesson_answers', array('id' =&gt; <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('id')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2715"><span class="linenum">2715</span></a>                  }
<a name="l2716"><span class="linenum">2716</span></a>              } else if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>) == 1) {
<a name="l2717"><span class="linenum">2717</span></a>                  <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>);
<a name="l2718"><span class="linenum">2718</span></a>              } else {
<a name="l2719"><span class="linenum">2719</span></a>                  <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = new stdClass;
<a name="l2720"><span class="linenum">2720</span></a>                  <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('lessonid')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('lessonid')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a>;
<a name="l2721"><span class="linenum">2721</span></a>                  <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('pageid')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('id')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2722"><span class="linenum">2722</span></a>                  <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('timecreated')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2723"><span class="linenum">2723</span></a>              }
<a name="l2724"><span class="linenum">2724</span></a>  
<a name="l2725"><span class="linenum">2725</span></a>              <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2726"><span class="linenum">2726</span></a>              if (isset(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('jumpto')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>[0])) {
<a name="l2727"><span class="linenum">2727</span></a>                  <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('jumpto')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>[0];
<a name="l2728"><span class="linenum">2728</span></a>              }
<a name="l2729"><span class="linenum">2729</span></a>              if (isset(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('score')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>[0])) {
<a name="l2730"><span class="linenum">2730</span></a>                  <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/score.html">score</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('score')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>[0];
<a name="l2731"><span class="linenum">2731</span></a>              }
<a name="l2732"><span class="linenum">2732</span></a>              if (!empty(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l2733"><span class="linenum">2733</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(&quot;lesson_answers&quot;, <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>());
<a name="l2734"><span class="linenum">2734</span></a>              } else {
<a name="l2735"><span class="linenum">2735</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l2736"><span class="linenum">2736</span></a>              }
<a name="l2737"><span class="linenum">2737</span></a>          } else {
<a name="l2738"><span class="linenum">2738</span></a>              for (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;maxanswers; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l2739"><span class="linenum">2739</span></a>                  if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>)) {
<a name="l2740"><span class="linenum">2740</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = new stdClass;
<a name="l2741"><span class="linenum">2741</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;lessonid = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id;
<a name="l2742"><span class="linenum">2742</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;pageid = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2743"><span class="linenum">2743</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;timecreated = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('timecreated')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>;
<a name="l2744"><span class="linenum">2744</span></a>                  }
<a name="l2745"><span class="linenum">2745</span></a>  
<a name="l2746"><span class="linenum">2746</span></a>                  if (!empty(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2747"><span class="linenum">2747</span></a>                      if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2748"><span class="linenum">2748</span></a>  <span class="comment">                        // Multichoice and true/false pages have an HTML editor.</span>
<a name="l2749"><span class="linenum">2749</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;answer = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text'];
<a name="l2750"><span class="linenum">2750</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;answerformat = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['format'];
<a name="l2751"><span class="linenum">2751</span></a>                      } else {
<a name="l2752"><span class="linenum">2752</span></a>  <span class="comment">                        // Branch tables, shortanswer and mumerical pages have only a text field.</span>
<a name="l2753"><span class="linenum">2753</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;answer = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>];
<a name="l2754"><span class="linenum">2754</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;answerformat = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l2755"><span class="linenum">2755</span></a>                      }
<a name="l2756"><span class="linenum">2756</span></a>                  }
<a name="l2757"><span class="linenum">2757</span></a>  
<a name="l2758"><span class="linenum">2758</span></a>                  if (!empty(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2759"><span class="linenum">2759</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;response = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text'];
<a name="l2760"><span class="linenum">2760</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;responseformat = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['format'];
<a name="l2761"><span class="linenum">2761</span></a>                  }
<a name="l2762"><span class="linenum">2762</span></a>  
<a name="l2763"><span class="linenum">2763</span></a>                  if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;answer) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;answer != '') {
<a name="l2764"><span class="linenum">2764</span></a>                      if (isset(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('jumpto')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2765"><span class="linenum">2765</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;jumpto = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('jumpto')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>];
<a name="l2766"><span class="linenum">2766</span></a>                      }
<a name="l2767"><span class="linenum">2767</span></a>                      if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;custom &amp;&amp; isset(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('score')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2768"><span class="linenum">2768</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;score = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('score')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>];
<a name="l2769"><span class="linenum">2769</span></a>                      }
<a name="l2770"><span class="linenum">2770</span></a>                      if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id)) {
<a name="l2771"><span class="linenum">2771</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]);
<a name="l2772"><span class="linenum">2772</span></a>                      } else {
<a name="l2773"><span class="linenum">2773</span></a>                          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(&quot;lesson_answers&quot;, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;<a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>());
<a name="l2774"><span class="linenum">2774</span></a>                      }
<a name="l2775"><span class="linenum">2775</span></a>  
<a name="l2776"><span class="linenum">2776</span></a>  <span class="comment">                    // Save files in answers and responses.</span>
<a name="l2777"><span class="linenum">2777</span></a>                      if (isset(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2778"><span class="linenum">2778</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_answers_files')" href="../../_functions/save_answers_files.html" onMouseOver="funcPopup(event,'save_answers_files')">save_answers_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1436" onMouseOver="hilite(1436)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>],
<a name="l2779"><span class="linenum">2779</span></a>                                  <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>], <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]);
<a name="l2780"><span class="linenum">2780</span></a>                      } else {
<a name="l2781"><span class="linenum">2781</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_answers_files')" href="../../_functions/save_answers_files.html" onMouseOver="funcPopup(event,'save_answers_files')">save_answers_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1436" onMouseOver="hilite(1436)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../../_variables/maxbytes.html">$maxbytes</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>],
<a name="l2782"><span class="linenum">2782</span></a>                                  <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]);
<a name="l2783"><span class="linenum">2783</span></a>                      }
<a name="l2784"><span class="linenum">2784</span></a>  
<a name="l2785"><span class="linenum">2785</span></a>                  } else if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id)) {
<a name="l2786"><span class="linenum">2786</span></a>                      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('lesson_answers', array('id' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id));
<a name="l2787"><span class="linenum">2787</span></a>                      unset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]);
<a name="l2788"><span class="linenum">2788</span></a>                  }
<a name="l2789"><span class="linenum">2789</span></a>              }
<a name="l2790"><span class="linenum">2790</span></a>          }
<a name="l2791"><span class="linenum">2791</span></a>          return true;
<a name="l2792"><span class="linenum">2792</span></a>      }
<a name="l2793"><span class="linenum">2793</span></a>  
<a name="l2794"><span class="linenum">2794</span></a>      <span class="comment">/**</span>
<a name="l2795"><span class="linenum">2795</span></a>  <span class="comment">     * Can be set to true if the page requires a static link to create a new instance</span>
<a name="l2796"><span class="linenum">2796</span></a>  <span class="comment">     * instead of simply being included in the dropdown</span>
<a name="l2797"><span class="linenum">2797</span></a>  <span class="comment">     * @param int $previd</span>
<a name="l2798"><span class="linenum">2798</span></a>  <span class="comment">     * @return bool</span>
<a name="l2799"><span class="linenum">2799</span></a>  <span class="comment">     */</span>
<a name="l2800"><span class="linenum">2800</span></a>      public function <a class="function" onClick="logFunction('add_page_link')" href="../../_functions/add_page_link.html" onMouseOver="funcPopup(event,'add_page_link')">add_page_link</a>(<a class="var it2665" onMouseOver="hilite(2665)" onMouseOut="lolite()" onClick="logVariable('previd')" href="../../_variables/previd.html">$previd</a>) {
<a name="l2801"><span class="linenum">2801</span></a>          return false;
<a name="l2802"><span class="linenum">2802</span></a>      }
<a name="l2803"><span class="linenum">2803</span></a>  
<a name="l2804"><span class="linenum">2804</span></a>      <span class="comment">/**</span>
<a name="l2805"><span class="linenum">2805</span></a>  <span class="comment">     * Returns true if a page has been viewed before</span>
<a name="l2806"><span class="linenum">2806</span></a>  <span class="comment">     *</span>
<a name="l2807"><span class="linenum">2807</span></a>  <span class="comment">     * @param array|int $param Either an array of pages that have been seen or the</span>
<a name="l2808"><span class="linenum">2808</span></a>  <span class="comment">     *                   number of retakes a user has had</span>
<a name="l2809"><span class="linenum">2809</span></a>  <span class="comment">     * @return bool</span>
<a name="l2810"><span class="linenum">2810</span></a>  <span class="comment">     */</span>
<a name="l2811"><span class="linenum">2811</span></a>      public function <a class="function" onClick="logFunction('is_unseen')" href="../../_functions/is_unseen.html" onMouseOver="funcPopup(event,'is_unseen')">is_unseen</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>) {
<a name="l2812"><span class="linenum">2812</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2813"><span class="linenum">2813</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>)) {
<a name="l2814"><span class="linenum">2814</span></a>              <a class="var it23909" onMouseOver="hilite(23909)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a> = <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>;
<a name="l2815"><span class="linenum">2815</span></a>              return (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, <a class="var it23909" onMouseOver="hilite(23909)" onMouseOut="lolite()" onClick="logVariable('seenpages')" href="../../_variables/seenpages.html">$seenpages</a>));
<a name="l2816"><span class="linenum">2816</span></a>          } else {
<a name="l2817"><span class="linenum">2817</span></a>              <a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a> = <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>;
<a name="l2818"><span class="linenum">2818</span></a>              if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_attempts&quot;, array(&quot;pageid&quot;=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, &quot;userid&quot;=&gt;<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;retry&quot;=&gt;<a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>))) {
<a name="l2819"><span class="linenum">2819</span></a>                  return true;
<a name="l2820"><span class="linenum">2820</span></a>              }
<a name="l2821"><span class="linenum">2821</span></a>          }
<a name="l2822"><span class="linenum">2822</span></a>          return false;
<a name="l2823"><span class="linenum">2823</span></a>      }
<a name="l2824"><span class="linenum">2824</span></a>  
<a name="l2825"><span class="linenum">2825</span></a>      <span class="comment">/**</span>
<a name="l2826"><span class="linenum">2826</span></a>  <span class="comment">     * Checks to see if a page has been answered previously</span>
<a name="l2827"><span class="linenum">2827</span></a>  <span class="comment">     * @param int $nretakes</span>
<a name="l2828"><span class="linenum">2828</span></a>  <span class="comment">     * @return bool</span>
<a name="l2829"><span class="linenum">2829</span></a>  <span class="comment">     */</span>
<a name="l2830"><span class="linenum">2830</span></a>      public function <a class="function" onClick="logFunction('is_unanswered')" href="../../_functions/is_unanswered.html" onMouseOver="funcPopup(event,'is_unanswered')">is_unanswered</a>(<a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>) {
<a name="l2831"><span class="linenum">2831</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l2832"><span class="linenum">2832</span></a>          if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>(&quot;lesson_attempts&quot;, array('pageid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id, 'userid'=&gt;<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'correct'=&gt;1, 'retry'=&gt;<a class="var it5438" onMouseOver="hilite(5438)" onMouseOut="lolite()" onClick="logVariable('nretakes')" href="../../_variables/nretakes.html">$nretakes</a>))) {
<a name="l2833"><span class="linenum">2833</span></a>              return true;
<a name="l2834"><span class="linenum">2834</span></a>          }
<a name="l2835"><span class="linenum">2835</span></a>          return false;
<a name="l2836"><span class="linenum">2836</span></a>      }
<a name="l2837"><span class="linenum">2837</span></a>  
<a name="l2838"><span class="linenum">2838</span></a>      <span class="comment">/**</span>
<a name="l2839"><span class="linenum">2839</span></a>  <span class="comment">     * Creates answers within the database for this lesson_page. Usually only ever</span>
<a name="l2840"><span class="linenum">2840</span></a>  <span class="comment">     * called when creating a new page instance</span>
<a name="l2841"><span class="linenum">2841</span></a>  <span class="comment">     * @param object $properties</span>
<a name="l2842"><span class="linenum">2842</span></a>  <span class="comment">     * @return array</span>
<a name="l2843"><span class="linenum">2843</span></a>  <span class="comment">     */</span>
<a name="l2844"><span class="linenum">2844</span></a>      public function <a class="function" onClick="logFunction('create_answers')" href="../../_functions/create_answers.html" onMouseOver="funcPopup(event,'create_answers')">create_answers</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>) {
<a name="l2845"><span class="linenum">2845</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l2846"><span class="linenum">2846</span></a>  <span class="comment">        // now add the answers</span>
<a name="l2847"><span class="linenum">2847</span></a>          <a class="var it1772" onMouseOver="hilite(1772)" onMouseOut="lolite()" onClick="logVariable('newanswer')" href="../../_variables/newanswer.html">$newanswer</a> = new stdClass;
<a name="l2848"><span class="linenum">2848</span></a>          <a class="var it1772" onMouseOver="hilite(1772)" onMouseOut="lolite()" onClick="logVariable('newanswer')" href="../../_variables/newanswer.html">$newanswer</a>-&gt;<a onClick="logVariable('lessonid')" class="var it40929" onMouseOver="hilite(40929)" onMouseOut="lolite()" href="../../_variables/lessonid.html">lessonid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id;
<a name="l2849"><span class="linenum">2849</span></a>          <a class="var it1772" onMouseOver="hilite(1772)" onMouseOut="lolite()" onClick="logVariable('newanswer')" href="../../_variables/newanswer.html">$newanswer</a>-&gt;<a onClick="logVariable('pageid')" class="var it40929" onMouseOver="hilite(40929)" onMouseOut="lolite()" href="../../_variables/pageid.html">pageid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id;
<a name="l2850"><span class="linenum">2850</span></a>          <a class="var it1772" onMouseOver="hilite(1772)" onMouseOut="lolite()" onClick="logVariable('newanswer')" href="../../_variables/newanswer.html">$newanswer</a>-&gt;<a onClick="logVariable('timecreated')" class="var it40929" onMouseOver="hilite(40929)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;timecreated;
<a name="l2851"><span class="linenum">2851</span></a>  
<a name="l2852"><span class="linenum">2852</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('lesson', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;course);
<a name="l2853"><span class="linenum">2853</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2854"><span class="linenum">2854</span></a>  
<a name="l2855"><span class="linenum">2855</span></a>          <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = array();
<a name="l2856"><span class="linenum">2856</span></a>  
<a name="l2857"><span class="linenum">2857</span></a>          for (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;maxanswers; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l2858"><span class="linenum">2858</span></a>              <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it1772" onMouseOver="hilite(1772)" onMouseOut="lolite()" onClick="logVariable('newanswer')" href="../../_variables/newanswer.html">$newanswer</a>);
<a name="l2859"><span class="linenum">2859</span></a>  
<a name="l2860"><span class="linenum">2860</span></a>              if (!empty(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2861"><span class="linenum">2861</span></a>                  if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2862"><span class="linenum">2862</span></a>  <span class="comment">                    // Multichoice and true/false pages have an HTML editor.</span>
<a name="l2863"><span class="linenum">2863</span></a>                      <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text'];
<a name="l2864"><span class="linenum">2864</span></a>                      <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answerformat')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/answerformat.html">answerformat</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['format'];
<a name="l2865"><span class="linenum">2865</span></a>                  } else {
<a name="l2866"><span class="linenum">2866</span></a>  <span class="comment">                    // Branch tables, shortanswer and mumerical pages have only a text field.</span>
<a name="l2867"><span class="linenum">2867</span></a>                      <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>];
<a name="l2868"><span class="linenum">2868</span></a>                      <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answerformat')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/answerformat.html">answerformat</a> = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l2869"><span class="linenum">2869</span></a>                  }
<a name="l2870"><span class="linenum">2870</span></a>              }
<a name="l2871"><span class="linenum">2871</span></a>              if (!empty(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2872"><span class="linenum">2872</span></a>                  <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/response.html">response</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text'];
<a name="l2873"><span class="linenum">2873</span></a>                  <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('responseformat')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['format'];
<a name="l2874"><span class="linenum">2874</span></a>              }
<a name="l2875"><span class="linenum">2875</span></a>  
<a name="l2876"><span class="linenum">2876</span></a>              if (isset(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>) &amp;&amp; <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a> != '') {
<a name="l2877"><span class="linenum">2877</span></a>                  if (isset(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('jumpto')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2878"><span class="linenum">2878</span></a>                      <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('jumpto')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>];
<a name="l2879"><span class="linenum">2879</span></a>                  }
<a name="l2880"><span class="linenum">2880</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;custom &amp;&amp; isset(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('score')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2881"><span class="linenum">2881</span></a>                      <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/score.html">score</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('score')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>];
<a name="l2882"><span class="linenum">2882</span></a>                  }
<a name="l2883"><span class="linenum">2883</span></a>                  <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;lesson_answers&quot;, <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l2884"><span class="linenum">2884</span></a>                  if (isset(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l2885"><span class="linenum">2885</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_answers_files')" href="../../_functions/save_answers_files.html" onMouseOver="funcPopup(event,'save_answers_files')">save_answers_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('course')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>-&gt;maxbytes, <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>,
<a name="l2886"><span class="linenum">2886</span></a>                              <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>], <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('response_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/response_editor.html">response_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]);
<a name="l2887"><span class="linenum">2887</span></a>                  } else {
<a name="l2888"><span class="linenum">2888</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_answers_files')" href="../../_functions/save_answers_files.html" onMouseOver="funcPopup(event,'save_answers_files')">save_answers_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('course')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>-&gt;maxbytes, <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>,
<a name="l2889"><span class="linenum">2889</span></a>                              <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('answer_editor')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/answer_editor.html">answer_editor</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]);
<a name="l2890"><span class="linenum">2890</span></a>                  }
<a name="l2891"><span class="linenum">2891</span></a>                  <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>[<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('id')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <span class="keyword">new </span><a class="class" onClick="logClass('lesson_page_answer')" href="../../_classes/lesson_page_answer.html" onMouseOver="classPopup(event,'lesson_page_answer')">lesson_page_answer</a>(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l2892"><span class="linenum">2892</span></a>              } else {
<a name="l2893"><span class="linenum">2893</span></a>                  break;
<a name="l2894"><span class="linenum">2894</span></a>              }
<a name="l2895"><span class="linenum">2895</span></a>          }
<a name="l2896"><span class="linenum">2896</span></a>  
<a name="l2897"><span class="linenum">2897</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a> = <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>;
<a name="l2898"><span class="linenum">2898</span></a>          return <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>;
<a name="l2899"><span class="linenum">2899</span></a>      }
<a name="l2900"><span class="linenum">2900</span></a>  
<a name="l2901"><span class="linenum">2901</span></a>      <span class="comment">/**</span>
<a name="l2902"><span class="linenum">2902</span></a>  <span class="comment">     * This method MUST be overridden by all question page types, or page types that</span>
<a name="l2903"><span class="linenum">2903</span></a>  <span class="comment">     * wish to score a page.</span>
<a name="l2904"><span class="linenum">2904</span></a>  <span class="comment">     *</span>
<a name="l2905"><span class="linenum">2905</span></a>  <span class="comment">     * The structure of result should always be the same so it is a good idea when</span>
<a name="l2906"><span class="linenum">2906</span></a>  <span class="comment">     * overriding this method on a page type to call</span>
<a name="l2907"><span class="linenum">2907</span></a>  <span class="comment">     * &lt;code&gt;</span>
<a name="l2908"><span class="linenum">2908</span></a>  <span class="comment">     * $result = parent::check_answer();</span>
<a name="l2909"><span class="linenum">2909</span></a>  <span class="comment">     * &lt;/code&gt;</span>
<a name="l2910"><span class="linenum">2910</span></a>  <span class="comment">     * before modifying it as required.</span>
<a name="l2911"><span class="linenum">2911</span></a>  <span class="comment">     *</span>
<a name="l2912"><span class="linenum">2912</span></a>  <span class="comment">     * @return stdClass</span>
<a name="l2913"><span class="linenum">2913</span></a>  <span class="comment">     */</span>
<a name="l2914"><span class="linenum">2914</span></a>      public function <a class="function" onClick="logFunction('check_answer')" href="../../_functions/check_answer.html" onMouseOver="funcPopup(event,'check_answer')">check_answer</a>() {
<a name="l2915"><span class="linenum">2915</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = new stdClass;
<a name="l2916"><span class="linenum">2916</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('answerid')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/answerid.html">answerid</a>        = 0;
<a name="l2917"><span class="linenum">2917</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('noanswer')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/noanswer.html">noanswer</a>        = false;
<a name="l2918"><span class="linenum">2918</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('correctanswer')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/correctanswer.html">correctanswer</a>   = false;
<a name="l2919"><span class="linenum">2919</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('isessayquestion')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/isessayquestion.html">isessayquestion</a> = false;   <span class="comment">// use this to turn off review button on essay questions</span>
<a name="l2920"><span class="linenum">2920</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('response')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>        = '';
<a name="l2921"><span class="linenum">2921</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('newpageid')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/newpageid.html">newpageid</a>       = 0;       <span class="comment">// stay on the page</span>
<a name="l2922"><span class="linenum">2922</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('studentanswer')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/studentanswer.html">studentanswer</a>   = '';      <span class="comment">// use this to store student's answer(s) in order to display it on feedback page</span>
<a name="l2923"><span class="linenum">2923</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('userresponse')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/userresponse.html">userresponse</a>    = null;
<a name="l2924"><span class="linenum">2924</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('feedback')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>        = '';
<a name="l2925"><span class="linenum">2925</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('nodefaultresponse')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/nodefaultresponse.html">nodefaultresponse</a>  = false; <span class="comment">// Flag for redirecting when default feedback is turned off</span>
<a name="l2926"><span class="linenum">2926</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l2927"><span class="linenum">2927</span></a>      }
<a name="l2928"><span class="linenum">2928</span></a>  
<a name="l2929"><span class="linenum">2929</span></a>      <span class="comment">/**</span>
<a name="l2930"><span class="linenum">2930</span></a>  <span class="comment">     * True if the page uses a custom option</span>
<a name="l2931"><span class="linenum">2931</span></a>  <span class="comment">     *</span>
<a name="l2932"><span class="linenum">2932</span></a>  <span class="comment">     * Should be override and set to true if the page uses a custom option.</span>
<a name="l2933"><span class="linenum">2933</span></a>  <span class="comment">     *</span>
<a name="l2934"><span class="linenum">2934</span></a>  <span class="comment">     * @return bool</span>
<a name="l2935"><span class="linenum">2935</span></a>  <span class="comment">     */</span>
<a name="l2936"><span class="linenum">2936</span></a>      public function <a class="function" onClick="logFunction('has_option')" href="../../_functions/has_option.html" onMouseOver="funcPopup(event,'has_option')">has_option</a>() {
<a name="l2937"><span class="linenum">2937</span></a>          return false;
<a name="l2938"><span class="linenum">2938</span></a>      }
<a name="l2939"><span class="linenum">2939</span></a>  
<a name="l2940"><span class="linenum">2940</span></a>      <span class="comment">/**</span>
<a name="l2941"><span class="linenum">2941</span></a>  <span class="comment">     * Returns the maximum number of answers for this page given the maximum number</span>
<a name="l2942"><span class="linenum">2942</span></a>  <span class="comment">     * of answers permitted by the lesson.</span>
<a name="l2943"><span class="linenum">2943</span></a>  <span class="comment">     *</span>
<a name="l2944"><span class="linenum">2944</span></a>  <span class="comment">     * @param int $default</span>
<a name="l2945"><span class="linenum">2945</span></a>  <span class="comment">     * @return int</span>
<a name="l2946"><span class="linenum">2946</span></a>  <span class="comment">     */</span>
<a name="l2947"><span class="linenum">2947</span></a>      public function <a class="function" onClick="logFunction('max_answers')" href="../../_functions/max_answers.html" onMouseOver="funcPopup(event,'max_answers')">max_answers</a>(<a class="var it1163" onMouseOver="hilite(1163)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a>) {
<a name="l2948"><span class="linenum">2948</span></a>          return <a class="var it1163" onMouseOver="hilite(1163)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a>;
<a name="l2949"><span class="linenum">2949</span></a>      }
<a name="l2950"><span class="linenum">2950</span></a>  
<a name="l2951"><span class="linenum">2951</span></a>      <span class="comment">/**</span>
<a name="l2952"><span class="linenum">2952</span></a>  <span class="comment">     * Returns the properties of this lesson page as an object</span>
<a name="l2953"><span class="linenum">2953</span></a>  <span class="comment">     * @return stdClass;</span>
<a name="l2954"><span class="linenum">2954</span></a>  <span class="comment">     */</span>
<a name="l2955"><span class="linenum">2955</span></a>      public function <a class="function" onClick="logFunction('properties')" href="../../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>() {
<a name="l2956"><span class="linenum">2956</span></a>          <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>);
<a name="l2957"><span class="linenum">2957</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a> === null) {
<a name="l2958"><span class="linenum">2958</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_answers')" href="../../_functions/get_answers.html" onMouseOver="funcPopup(event,'get_answers')">get_answers</a>();
<a name="l2959"><span class="linenum">2959</span></a>          }
<a name="l2960"><span class="linenum">2960</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>)&gt;0) {
<a name="l2961"><span class="linenum">2961</span></a>              <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = 0;
<a name="l2962"><span class="linenum">2962</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../../_variables/qtype.html">$qtype</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('qtype')" class="var it40041" onMouseOver="hilite(40041)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>;
<a name="l2963"><span class="linenum">2963</span></a>              foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('answers')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a> as <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>) {
<a name="l2964"><span class="linenum">2964</span></a>                  <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;{'answer_editor['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']'} = array('text' =&gt; <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/answer.html">answer</a>, 'format' =&gt; <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answerformat')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/answerformat.html">answerformat</a>);
<a name="l2965"><span class="linenum">2965</span></a>                  if (<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../../_variables/qtype.html">$qtype</a> != <a class="constant" onClick="logConstant('LESSON_PAGE_MATCHING')" href="../../_constants/LESSON_PAGE_MATCHING.html" onMouseOver="constPopup(event,'LESSON_PAGE_MATCHING')">LESSON_PAGE_MATCHING</a>) {
<a name="l2966"><span class="linenum">2966</span></a>                      <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;{'response_editor['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']'} = array('text' =&gt; <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>, 'format' =&gt; <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('responseformat')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/responseformat.html">responseformat</a>);
<a name="l2967"><span class="linenum">2967</span></a>                  } else {
<a name="l2968"><span class="linenum">2968</span></a>                      <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;{'response_editor['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']'} = <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('response')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/response.html">response</a>;
<a name="l2969"><span class="linenum">2969</span></a>                  }
<a name="l2970"><span class="linenum">2970</span></a>                  <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;{'jumpto['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']'} = <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>;
<a name="l2971"><span class="linenum">2971</span></a>                  <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>-&gt;{'score['.<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>.']'} = <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('score')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/score.html">score</a>;
<a name="l2972"><span class="linenum">2972</span></a>                  <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>++;
<a name="l2973"><span class="linenum">2973</span></a>              }
<a name="l2974"><span class="linenum">2974</span></a>          }
<a name="l2975"><span class="linenum">2975</span></a>          return <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>;
<a name="l2976"><span class="linenum">2976</span></a>      }
<a name="l2977"><span class="linenum">2977</span></a>  
<a name="l2978"><span class="linenum">2978</span></a>      <span class="comment">/**</span>
<a name="l2979"><span class="linenum">2979</span></a>  <span class="comment">     * Returns an array of options to display when choosing the jumpto for a page/answer</span>
<a name="l2980"><span class="linenum">2980</span></a>  <span class="comment">     * @static</span>
<a name="l2981"><span class="linenum">2981</span></a>  <span class="comment">     * @param int $pageid</span>
<a name="l2982"><span class="linenum">2982</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l2983"><span class="linenum">2983</span></a>  <span class="comment">     * @return array</span>
<a name="l2984"><span class="linenum">2984</span></a>  <span class="comment">     */</span>
<a name="l2985"><span class="linenum">2985</span></a>      public static function <a class="function" onClick="logFunction('get_jumptooptions')" href="../../_functions/get_jumptooptions.html" onMouseOver="funcPopup(event,'get_jumptooptions')">get_jumptooptions</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, lesson <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l2986"><span class="linenum">2986</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2987"><span class="linenum">2987</span></a>          <a class="var it1287" onMouseOver="hilite(1287)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a> = array();
<a name="l2988"><span class="linenum">2988</span></a>          <a class="var it1287" onMouseOver="hilite(1287)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[0] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;thispage&quot;, &quot;lesson&quot;);
<a name="l2989"><span class="linenum">2989</span></a>          <a class="var it1287" onMouseOver="hilite(1287)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="constant" onClick="logConstant('LESSON_NEXTPAGE')" href="../../_constants/LESSON_NEXTPAGE.html" onMouseOver="constPopup(event,'LESSON_NEXTPAGE')">LESSON_NEXTPAGE</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;nextpage&quot;, &quot;lesson&quot;);
<a name="l2990"><span class="linenum">2990</span></a>          <a class="var it1287" onMouseOver="hilite(1287)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="constant" onClick="logConstant('LESSON_PREVIOUSPAGE')" href="../../_constants/LESSON_PREVIOUSPAGE.html" onMouseOver="constPopup(event,'LESSON_PREVIOUSPAGE')">LESSON_PREVIOUSPAGE</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;previouspage&quot;, &quot;lesson&quot;);
<a name="l2991"><span class="linenum">2991</span></a>          <a class="var it1287" onMouseOver="hilite(1287)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="constant" onClick="logConstant('LESSON_EOL')" href="../../_constants/LESSON_EOL.html" onMouseOver="constPopup(event,'LESSON_EOL')">LESSON_EOL</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;endoflesson&quot;, &quot;lesson&quot;);
<a name="l2992"><span class="linenum">2992</span></a>  
<a name="l2993"><span class="linenum">2993</span></a>          if (<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> == 0) {
<a name="l2994"><span class="linenum">2994</span></a>              return <a class="var it1287" onMouseOver="hilite(1287)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>;
<a name="l2995"><span class="linenum">2995</span></a>          }
<a name="l2996"><span class="linenum">2996</span></a>  
<a name="l2997"><span class="linenum">2997</span></a>          <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l2998"><span class="linenum">2998</span></a>          if (<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a> || <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('is_sub_page_of_type')" href="../../_functions/is_sub_page_of_type.html" onMouseOver="funcPopup(event,'is_sub_page_of_type')">is_sub_page_of_type</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_BRANCHTABLE')" href="../../_constants/LESSON_PAGE_BRANCHTABLE.html" onMouseOver="constPopup(event,'LESSON_PAGE_BRANCHTABLE')">LESSON_PAGE_BRANCHTABLE</a>), array(<a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFBRANCH')" href="../../_constants/LESSON_PAGE_ENDOFBRANCH.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFBRANCH')">LESSON_PAGE_ENDOFBRANCH</a>, <a class="constant" onClick="logConstant('LESSON_PAGE_CLUSTER')" href="../../_constants/LESSON_PAGE_CLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_CLUSTER')">LESSON_PAGE_CLUSTER</a>))) {
<a name="l2999"><span class="linenum">2999</span></a>              <a class="var it1287" onMouseOver="hilite(1287)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="constant" onClick="logConstant('LESSON_UNSEENBRANCHPAGE')" href="../../_constants/LESSON_UNSEENBRANCHPAGE.html" onMouseOver="constPopup(event,'LESSON_UNSEENBRANCHPAGE')">LESSON_UNSEENBRANCHPAGE</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;unseenpageinbranch&quot;, &quot;lesson&quot;);
<a name="l3000"><span class="linenum">3000</span></a>              <a class="var it1287" onMouseOver="hilite(1287)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="constant" onClick="logConstant('LESSON_RANDOMPAGE')" href="../../_constants/LESSON_RANDOMPAGE.html" onMouseOver="constPopup(event,'LESSON_RANDOMPAGE')">LESSON_RANDOMPAGE</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;randompageinbranch&quot;, &quot;lesson&quot;);
<a name="l3001"><span class="linenum">3001</span></a>          }
<a name="l3002"><span class="linenum">3002</span></a>          if(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>]-&gt;qtype == <a class="constant" onClick="logConstant('LESSON_PAGE_CLUSTER')" href="../../_constants/LESSON_PAGE_CLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_CLUSTER')">LESSON_PAGE_CLUSTER</a> || <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a class="function" onClick="logFunction('is_sub_page_of_type')" href="../../_functions/is_sub_page_of_type.html" onMouseOver="funcPopup(event,'is_sub_page_of_type')">is_sub_page_of_type</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, array(<a class="constant" onClick="logConstant('LESSON_PAGE_CLUSTER')" href="../../_constants/LESSON_PAGE_CLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_CLUSTER')">LESSON_PAGE_CLUSTER</a>), array(<a class="constant" onClick="logConstant('LESSON_PAGE_ENDOFCLUSTER')" href="../../_constants/LESSON_PAGE_ENDOFCLUSTER.html" onMouseOver="constPopup(event,'LESSON_PAGE_ENDOFCLUSTER')">LESSON_PAGE_ENDOFCLUSTER</a>))) {
<a name="l3003"><span class="linenum">3003</span></a>              <a class="var it1287" onMouseOver="hilite(1287)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="constant" onClick="logConstant('LESSON_CLUSTERJUMP')" href="../../_constants/LESSON_CLUSTERJUMP.html" onMouseOver="constPopup(event,'LESSON_CLUSTERJUMP')">LESSON_CLUSTERJUMP</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;clusterjump&quot;, &quot;lesson&quot;);
<a name="l3004"><span class="linenum">3004</span></a>          }
<a name="l3005"><span class="linenum">3005</span></a>          if (!<a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('firstpage', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>)) {
<a name="l3006"><span class="linenum">3006</span></a>              <a class="var it23942" onMouseOver="hilite(23942)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(&quot;lesson_pages&quot;, &quot;id&quot;, array(&quot;lessonid&quot; =&gt; <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;prevpageid&quot; =&gt; 0));
<a name="l3007"><span class="linenum">3007</span></a>              while (true) {
<a name="l3008"><span class="linenum">3008</span></a>                  if (<a class="var it23942" onMouseOver="hilite(23942)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a>) {
<a name="l3009"><span class="linenum">3009</span></a>                      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(&quot;lesson_pages&quot;, &quot;title&quot;, array(&quot;id&quot; =&gt; <a class="var it23942" onMouseOver="hilite(23942)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a>));
<a name="l3010"><span class="linenum">3010</span></a>                      <a class="var it1287" onMouseOver="hilite(1287)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>[<a class="var it23942" onMouseOver="hilite(23942)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a>] = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>,true));
<a name="l3011"><span class="linenum">3011</span></a>                      <a class="var it23942" onMouseOver="hilite(23942)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(&quot;lesson_pages&quot;, &quot;nextpageid&quot;, array(&quot;id&quot; =&gt; <a class="var it23942" onMouseOver="hilite(23942)" onMouseOut="lolite()" onClick="logVariable('apageid')" href="../../_variables/apageid.html">$apageid</a>));
<a name="l3012"><span class="linenum">3012</span></a>                  } else {
<a name="l3013"><span class="linenum">3013</span></a>  <span class="comment">                    // last page reached</span>
<a name="l3014"><span class="linenum">3014</span></a>                      break;
<a name="l3015"><span class="linenum">3015</span></a>                  }
<a name="l3016"><span class="linenum">3016</span></a>              }
<a name="l3017"><span class="linenum">3017</span></a>          }
<a name="l3018"><span class="linenum">3018</span></a>          return <a class="var it1287" onMouseOver="hilite(1287)" onMouseOut="lolite()" onClick="logVariable('jump')" href="../../_variables/jump.html">$jump</a>;
<a name="l3019"><span class="linenum">3019</span></a>      }
<a name="l3020"><span class="linenum">3020</span></a>      <span class="comment">/**</span>
<a name="l3021"><span class="linenum">3021</span></a>  <span class="comment">     * Returns the contents field for the page properly formatted and with plugin</span>
<a name="l3022"><span class="linenum">3022</span></a>  <span class="comment">     * file url's converted</span>
<a name="l3023"><span class="linenum">3023</span></a>  <span class="comment">     * @return string</span>
<a name="l3024"><span class="linenum">3024</span></a>  <span class="comment">     */</span>
<a name="l3025"><span class="linenum">3025</span></a>      public function <a class="function" onClick="logFunction('get_contents')" href="../../_functions/get_contents.html" onMouseOver="funcPopup(event,'get_contents')">get_contents</a>() {
<a name="l3026"><span class="linenum">3026</span></a>          global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l3027"><span class="linenum">3027</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;contents)) {
<a name="l3028"><span class="linenum">3028</span></a>              if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;contentsformat)) {
<a name="l3029"><span class="linenum">3029</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;contentsformat = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l3030"><span class="linenum">3030</span></a>              }
<a name="l3031"><span class="linenum">3031</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id);
<a name="l3032"><span class="linenum">3032</span></a>              <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;contents, '<a class="filename" href="../../pluginfile.php.html">pluginfile.php</a>', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_lesson',
<a name="l3033"><span class="linenum">3033</span></a>                                                       'page_contents', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id);  <span class="comment">// Must do this BEFORE format_text()!</span>
<a name="l3034"><span class="linenum">3034</span></a>              return <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;contentsformat,
<a name="l3035"><span class="linenum">3035</span></a>                                 array('context' =&gt; <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, 'noclean' =&gt; true,
<a name="l3036"><span class="linenum">3036</span></a>                                       'overflowdiv' =&gt; true));  <span class="comment">// Page edit is marked with XSS, we want all content here.</span>
<a name="l3037"><span class="linenum">3037</span></a>          } else {
<a name="l3038"><span class="linenum">3038</span></a>              return '';
<a name="l3039"><span class="linenum">3039</span></a>          }
<a name="l3040"><span class="linenum">3040</span></a>      }
<a name="l3041"><span class="linenum">3041</span></a>  
<a name="l3042"><span class="linenum">3042</span></a>      <span class="comment">/**</span>
<a name="l3043"><span class="linenum">3043</span></a>  <span class="comment">     * Set to true if this page should display in the menu block</span>
<a name="l3044"><span class="linenum">3044</span></a>  <span class="comment">     * @return bool</span>
<a name="l3045"><span class="linenum">3045</span></a>  <span class="comment">     */</span>
<a name="l3046"><span class="linenum">3046</span></a>      protected function <a class="function" onClick="logFunction('get_displayinmenublock')" href="../../_functions/get_displayinmenublock.html" onMouseOver="funcPopup(event,'get_displayinmenublock')">get_displayinmenublock</a>() {
<a name="l3047"><span class="linenum">3047</span></a>          return false;
<a name="l3048"><span class="linenum">3048</span></a>      }
<a name="l3049"><span class="linenum">3049</span></a>  
<a name="l3050"><span class="linenum">3050</span></a>      <span class="comment">/**</span>
<a name="l3051"><span class="linenum">3051</span></a>  <span class="comment">     * Get the string that describes the options of this page type</span>
<a name="l3052"><span class="linenum">3052</span></a>  <span class="comment">     * @return string</span>
<a name="l3053"><span class="linenum">3053</span></a>  <span class="comment">     */</span>
<a name="l3054"><span class="linenum">3054</span></a>      public function <a class="function" onClick="logFunction('option_description_string')" href="../../_functions/option_description_string.html" onMouseOver="funcPopup(event,'option_description_string')">option_description_string</a>() {
<a name="l3055"><span class="linenum">3055</span></a>          return '';
<a name="l3056"><span class="linenum">3056</span></a>      }
<a name="l3057"><span class="linenum">3057</span></a>  
<a name="l3058"><span class="linenum">3058</span></a>      <span class="comment">/**</span>
<a name="l3059"><span class="linenum">3059</span></a>  <span class="comment">     * Updates a table with the answers for this page</span>
<a name="l3060"><span class="linenum">3060</span></a>  <span class="comment">     * @param html_table $table</span>
<a name="l3061"><span class="linenum">3061</span></a>  <span class="comment">     * @return html_table</span>
<a name="l3062"><span class="linenum">3062</span></a>  <span class="comment">     */</span>
<a name="l3063"><span class="linenum">3063</span></a>      public function <a class="function" onClick="logFunction('display_answers')" href="../../_functions/display_answers.html" onMouseOver="funcPopup(event,'display_answers')">display_answers</a>(html_table <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>) {
<a name="l3064"><span class="linenum">3064</span></a>          <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_answers')" href="../../_functions/get_answers.html" onMouseOver="funcPopup(event,'get_answers')">get_answers</a>();
<a name="l3065"><span class="linenum">3065</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 1;
<a name="l3066"><span class="linenum">3066</span></a>          foreach (<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> as <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>) {
<a name="l3067"><span class="linenum">3067</span></a>              <a class="var it751" onMouseOver="hilite(751)" onMouseOut="lolite()" onClick="logVariable('cells')" href="../../_variables/cells.html">$cells</a> = array();
<a name="l3068"><span class="linenum">3068</span></a>              <a class="var it751" onMouseOver="hilite(751)" onMouseOut="lolite()" onClick="logVariable('cells')" href="../../_variables/cells.html">$cells</a>[] = &quot;&lt;span class=\&quot;label\&quot;&gt;&quot;.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;jump&quot;, &quot;lesson&quot;).&quot; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&lt;span&gt;: &quot;;
<a name="l3069"><span class="linenum">3069</span></a>              <a class="var it751" onMouseOver="hilite(751)" onMouseOut="lolite()" onClick="logVariable('cells')" href="../../_variables/cells.html">$cells</a>[] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_jump_name')" href="../../_functions/get_jump_name.html" onMouseOver="funcPopup(event,'get_jump_name')">get_jump_name</a>(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>);
<a name="l3070"><span class="linenum">3070</span></a>              <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it39441" onMouseOver="hilite(39441)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('html_table_row')" href="../../_classes/html_table_row.html" onMouseOver="classPopup(event,'html_table_row')">html_table_row</a>(<a class="var it751" onMouseOver="hilite(751)" onMouseOut="lolite()" onClick="logVariable('cells')" href="../../_variables/cells.html">$cells</a>);
<a name="l3071"><span class="linenum">3071</span></a>              if (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> === 1){
<a name="l3072"><span class="linenum">3072</span></a>                  <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it39441" onMouseOver="hilite(39441)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>[<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it39441" onMouseOver="hilite(39441)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>)-1]-&gt;cells[0]-&gt;style = 'width:20%;';
<a name="l3073"><span class="linenum">3073</span></a>              }
<a name="l3074"><span class="linenum">3074</span></a>              <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++;
<a name="l3075"><span class="linenum">3075</span></a>          }
<a name="l3076"><span class="linenum">3076</span></a>          return <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>;
<a name="l3077"><span class="linenum">3077</span></a>      }
<a name="l3078"><span class="linenum">3078</span></a>  
<a name="l3079"><span class="linenum">3079</span></a>      <span class="comment">/**</span>
<a name="l3080"><span class="linenum">3080</span></a>  <span class="comment">     * Determines if this page should be grayed out on the management/report screens</span>
<a name="l3081"><span class="linenum">3081</span></a>  <span class="comment">     * @return int 0 or 1</span>
<a name="l3082"><span class="linenum">3082</span></a>  <span class="comment">     */</span>
<a name="l3083"><span class="linenum">3083</span></a>      protected function <a class="function" onClick="logFunction('get_grayout')" href="../../_functions/get_grayout.html" onMouseOver="funcPopup(event,'get_grayout')">get_grayout</a>() {
<a name="l3084"><span class="linenum">3084</span></a>          return 0;
<a name="l3085"><span class="linenum">3085</span></a>      }
<a name="l3086"><span class="linenum">3086</span></a>  
<a name="l3087"><span class="linenum">3087</span></a>      <span class="comment">/**</span>
<a name="l3088"><span class="linenum">3088</span></a>  <span class="comment">     * Adds stats for this page to the &amp;pagestats object. This should be defined</span>
<a name="l3089"><span class="linenum">3089</span></a>  <span class="comment">     * for all page types that grade</span>
<a name="l3090"><span class="linenum">3090</span></a>  <span class="comment">     * @param array $pagestats</span>
<a name="l3091"><span class="linenum">3091</span></a>  <span class="comment">     * @param int $tries</span>
<a name="l3092"><span class="linenum">3092</span></a>  <span class="comment">     * @return bool</span>
<a name="l3093"><span class="linenum">3093</span></a>  <span class="comment">     */</span>
<a name="l3094"><span class="linenum">3094</span></a>      public function <a class="function" onClick="logFunction('stats')" href="../../_functions/stats.html" onMouseOver="funcPopup(event,'stats')">stats</a>(array &amp;<a class="var it1789" onMouseOver="hilite(1789)" onMouseOut="lolite()" onClick="logVariable('pagestats')" href="../../_variables/pagestats.html">$pagestats</a>, <a class="var it1790" onMouseOver="hilite(1790)" onMouseOut="lolite()" onClick="logVariable('tries')" href="../../_variables/tries.html">$tries</a>) {
<a name="l3095"><span class="linenum">3095</span></a>          return true;
<a name="l3096"><span class="linenum">3096</span></a>      }
<a name="l3097"><span class="linenum">3097</span></a>  
<a name="l3098"><span class="linenum">3098</span></a>      <span class="comment">/**</span>
<a name="l3099"><span class="linenum">3099</span></a>  <span class="comment">     * Formats the answers of this page for a report</span>
<a name="l3100"><span class="linenum">3100</span></a>  <span class="comment">     *</span>
<a name="l3101"><span class="linenum">3101</span></a>  <span class="comment">     * @param object $answerpage</span>
<a name="l3102"><span class="linenum">3102</span></a>  <span class="comment">     * @param object $answerdata</span>
<a name="l3103"><span class="linenum">3103</span></a>  <span class="comment">     * @param object $useranswer</span>
<a name="l3104"><span class="linenum">3104</span></a>  <span class="comment">     * @param array $pagestats</span>
<a name="l3105"><span class="linenum">3105</span></a>  <span class="comment">     * @param int $i Count of first level answers</span>
<a name="l3106"><span class="linenum">3106</span></a>  <span class="comment">     * @param int $n Count of second level answers</span>
<a name="l3107"><span class="linenum">3107</span></a>  <span class="comment">     * @return object The answer page for this</span>
<a name="l3108"><span class="linenum">3108</span></a>  <span class="comment">     */</span>
<a name="l3109"><span class="linenum">3109</span></a>      public function <a class="function" onClick="logFunction('report_answers')" href="../../_functions/report_answers.html" onMouseOver="funcPopup(event,'report_answers')">report_answers</a>(<a class="var it1791" onMouseOver="hilite(1791)" onMouseOut="lolite()" onClick="logVariable('answerpage')" href="../../_variables/answerpage.html">$answerpage</a>, <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('answerdata')" href="../../_variables/answerdata.html">$answerdata</a>, <a class="var it1770" onMouseOver="hilite(1770)" onMouseOut="lolite()" onClick="logVariable('useranswer')" href="../../_variables/useranswer.html">$useranswer</a>, <a class="var it1789" onMouseOver="hilite(1789)" onMouseOut="lolite()" onClick="logVariable('pagestats')" href="../../_variables/pagestats.html">$pagestats</a>, &amp;<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, &amp;<a class="var it291" onMouseOver="hilite(291)" onMouseOut="lolite()" onClick="logVariable('n')" href="../../_variables/n.html">$n</a>) {
<a name="l3110"><span class="linenum">3110</span></a>          <a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_answers')" href="../../_functions/get_answers.html" onMouseOver="funcPopup(event,'get_answers')">get_answers</a>();
<a name="l3111"><span class="linenum">3111</span></a>          <a class="var it1778" onMouseOver="hilite(1778)" onMouseOut="lolite()" onClick="logVariable('formattextdefoptions')" href="../../_variables/formattextdefoptions.html">$formattextdefoptions</a> = new stdClass;
<a name="l3112"><span class="linenum">3112</span></a>          <a class="var it1778" onMouseOver="hilite(1778)" onMouseOut="lolite()" onClick="logVariable('formattextdefoptions')" href="../../_variables/formattextdefoptions.html">$formattextdefoptions</a>-&gt;<a onClick="logVariable('para')" class="var it41563" onMouseOver="hilite(41563)" onMouseOut="lolite()" href="../../_variables/para.html">para</a> = false;  <span class="comment">//I'll use it widely in this page</span>
<a name="l3113"><span class="linenum">3113</span></a>          foreach (<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> as <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>) {
<a name="l3114"><span class="linenum">3114</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('jumpsto', 'lesson', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_jump_name')" href="../../_functions/get_jump_name.html" onMouseOver="funcPopup(event,'get_jump_name')">get_jump_name</a>(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>));
<a name="l3115"><span class="linenum">3115</span></a>              <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('answerdata')" href="../../_variables/answerdata.html">$answerdata</a>-&gt;<a onClick="logVariable('answers')" class="var it41565" onMouseOver="hilite(41565)" onMouseOut="lolite()" href="../../_variables/answers.html">answers</a>[] = array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, &quot;&quot;);
<a name="l3116"><span class="linenum">3116</span></a>              <a class="var it1791" onMouseOver="hilite(1791)" onMouseOut="lolite()" onClick="logVariable('answerpage')" href="../../_variables/answerpage.html">$answerpage</a>-&gt;<a onClick="logVariable('answerdata')" class="var it41564" onMouseOver="hilite(41564)" onMouseOut="lolite()" href="../../_variables/answerdata.html">answerdata</a> = <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('answerdata')" href="../../_variables/answerdata.html">$answerdata</a>;
<a name="l3117"><span class="linenum">3117</span></a>          }
<a name="l3118"><span class="linenum">3118</span></a>          return <a class="var it1791" onMouseOver="hilite(1791)" onMouseOut="lolite()" onClick="logVariable('answerpage')" href="../../_variables/answerpage.html">$answerpage</a>;
<a name="l3119"><span class="linenum">3119</span></a>      }
<a name="l3120"><span class="linenum">3120</span></a>  
<a name="l3121"><span class="linenum">3121</span></a>      <span class="comment">/**</span>
<a name="l3122"><span class="linenum">3122</span></a>  <span class="comment">     * Gets an array of the jumps used by the answers of this page</span>
<a name="l3123"><span class="linenum">3123</span></a>  <span class="comment">     *</span>
<a name="l3124"><span class="linenum">3124</span></a>  <span class="comment">     * @return array</span>
<a name="l3125"><span class="linenum">3125</span></a>  <span class="comment">     */</span>
<a name="l3126"><span class="linenum">3126</span></a>      public function <a class="function" onClick="logFunction('get_jumps')" href="../../_functions/get_jumps.html" onMouseOver="funcPopup(event,'get_jumps')">get_jumps</a>() {
<a name="l3127"><span class="linenum">3127</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3128"><span class="linenum">3128</span></a>          <a class="var it1794" onMouseOver="hilite(1794)" onMouseOut="lolite()" onClick="logVariable('jumps')" href="../../_variables/jumps.html">$jumps</a> = array();
<a name="l3129"><span class="linenum">3129</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array (&quot;lessonid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lesson')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/lesson.html">lesson</a>-&gt;id, &quot;pageid&quot; =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id);
<a name="l3130"><span class="linenum">3130</span></a>          if (<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_answers')" href="../../_functions/get_answers.html" onMouseOver="funcPopup(event,'get_answers')">get_answers</a>()) {
<a name="l3131"><span class="linenum">3131</span></a>              foreach (<a class="var it489" onMouseOver="hilite(489)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> as <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>) {
<a name="l3132"><span class="linenum">3132</span></a>                  <a class="var it1794" onMouseOver="hilite(1794)" onMouseOut="lolite()" onClick="logVariable('jumps')" href="../../_variables/jumps.html">$jumps</a>[] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_jump_name')" href="../../_functions/get_jump_name.html" onMouseOver="funcPopup(event,'get_jump_name')">get_jump_name</a>(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('jumpto')" class="var it39604" onMouseOver="hilite(39604)" onMouseOut="lolite()" href="../../_variables/jumpto.html">jumpto</a>);
<a name="l3133"><span class="linenum">3133</span></a>              }
<a name="l3134"><span class="linenum">3134</span></a>          } else {
<a name="l3135"><span class="linenum">3135</span></a>              <a class="var it1794" onMouseOver="hilite(1794)" onMouseOut="lolite()" onClick="logVariable('jumps')" href="../../_variables/jumps.html">$jumps</a>[] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_jump_name')" href="../../_functions/get_jump_name.html" onMouseOver="funcPopup(event,'get_jump_name')">get_jump_name</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid);
<a name="l3136"><span class="linenum">3136</span></a>          }
<a name="l3137"><span class="linenum">3137</span></a>          return <a class="var it1794" onMouseOver="hilite(1794)" onMouseOut="lolite()" onClick="logVariable('jumps')" href="../../_variables/jumps.html">$jumps</a>;
<a name="l3138"><span class="linenum">3138</span></a>      }
<a name="l3139"><span class="linenum">3139</span></a>      <span class="comment">/**</span>
<a name="l3140"><span class="linenum">3140</span></a>  <span class="comment">     * Informs whether this page type require manual grading or not</span>
<a name="l3141"><span class="linenum">3141</span></a>  <span class="comment">     * @return bool</span>
<a name="l3142"><span class="linenum">3142</span></a>  <span class="comment">     */</span>
<a name="l3143"><span class="linenum">3143</span></a>      public function <a class="function" onClick="logFunction('requires_manual_grading')" href="../../_functions/requires_manual_grading.html" onMouseOver="funcPopup(event,'requires_manual_grading')">requires_manual_grading</a>() {
<a name="l3144"><span class="linenum">3144</span></a>          return false;
<a name="l3145"><span class="linenum">3145</span></a>      }
<a name="l3146"><span class="linenum">3146</span></a>  
<a name="l3147"><span class="linenum">3147</span></a>      <span class="comment">/**</span>
<a name="l3148"><span class="linenum">3148</span></a>  <span class="comment">     * A callback method that allows a page to override the next page a user will</span>
<a name="l3149"><span class="linenum">3149</span></a>  <span class="comment">     * see during when this page is being completed.</span>
<a name="l3150"><span class="linenum">3150</span></a>  <span class="comment">     * @return false|int</span>
<a name="l3151"><span class="linenum">3151</span></a>  <span class="comment">     */</span>
<a name="l3152"><span class="linenum">3152</span></a>      public function <a class="function" onClick="logFunction('override_next_page')" href="../../_functions/override_next_page.html" onMouseOver="funcPopup(event,'override_next_page')">override_next_page</a>() {
<a name="l3153"><span class="linenum">3153</span></a>          return false;
<a name="l3154"><span class="linenum">3154</span></a>      }
<a name="l3155"><span class="linenum">3155</span></a>  
<a name="l3156"><span class="linenum">3156</span></a>      <span class="comment">/**</span>
<a name="l3157"><span class="linenum">3157</span></a>  <span class="comment">     * This method is used to determine if this page is a valid page</span>
<a name="l3158"><span class="linenum">3158</span></a>  <span class="comment">     *</span>
<a name="l3159"><span class="linenum">3159</span></a>  <span class="comment">     * @param array $validpages</span>
<a name="l3160"><span class="linenum">3160</span></a>  <span class="comment">     * @param array $pageviews</span>
<a name="l3161"><span class="linenum">3161</span></a>  <span class="comment">     * @return int The next page id to check</span>
<a name="l3162"><span class="linenum">3162</span></a>  <span class="comment">     */</span>
<a name="l3163"><span class="linenum">3163</span></a>      public function <a class="function" onClick="logFunction('valid_page_and_view')" href="../../_functions/valid_page_and_view.html" onMouseOver="funcPopup(event,'valid_page_and_view')">valid_page_and_view</a>(&amp;<a class="var it2667" onMouseOver="hilite(2667)" onMouseOut="lolite()" onClick="logVariable('validpages')" href="../../_variables/validpages.html">$validpages</a>, &amp;<a class="var it2668" onMouseOver="hilite(2668)" onMouseOut="lolite()" onClick="logVariable('pageviews')" href="../../_variables/pageviews.html">$pageviews</a>) {
<a name="l3164"><span class="linenum">3164</span></a>          <a class="var it2667" onMouseOver="hilite(2667)" onMouseOut="lolite()" onClick="logVariable('validpages')" href="../../_variables/validpages.html">$validpages</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;id] = 1;
<a name="l3165"><span class="linenum">3165</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/properties.html">properties</a>-&gt;nextpageid;
<a name="l3166"><span class="linenum">3166</span></a>      }
<a name="l3167"><span class="linenum">3167</span></a>  }
<a name="l3168"><span class="linenum">3168</span></a>  
<a name="l3169"><span class="linenum">3169</span></a>  
<a name="l3170"><span class="linenum">3170</span></a>  
<a name="l3171"><span class="linenum">3171</span></a>  <span class="comment">/**</span>
<a name="l3172"><span class="linenum">3172</span></a>  <span class="comment"> * Class used to represent an answer to a page</span>
<a name="l3173"><span class="linenum">3173</span></a>  <span class="comment"> *</span>
<a name="l3174"><span class="linenum">3174</span></a>  <span class="comment"> * @property int $id The ID of this answer in the database</span>
<a name="l3175"><span class="linenum">3175</span></a>  <span class="comment"> * @property int $lessonid The ID of the lesson this answer belongs to</span>
<a name="l3176"><span class="linenum">3176</span></a>  <span class="comment"> * @property int $pageid The ID of the page this answer belongs to</span>
<a name="l3177"><span class="linenum">3177</span></a>  <span class="comment"> * @property int $jumpto Identifies where the user goes upon completing a page with this answer</span>
<a name="l3178"><span class="linenum">3178</span></a>  <span class="comment"> * @property int $grade The grade this answer is worth</span>
<a name="l3179"><span class="linenum">3179</span></a>  <span class="comment"> * @property int $score The score this answer will give</span>
<a name="l3180"><span class="linenum">3180</span></a>  <span class="comment"> * @property int $flags Used to store options for the answer</span>
<a name="l3181"><span class="linenum">3181</span></a>  <span class="comment"> * @property int $timecreated A timestamp of when the answer was created</span>
<a name="l3182"><span class="linenum">3182</span></a>  <span class="comment"> * @property int $timemodified A timestamp of when the answer was modified</span>
<a name="l3183"><span class="linenum">3183</span></a>  <span class="comment"> * @property string $answer The answer itself</span>
<a name="l3184"><span class="linenum">3184</span></a>  <span class="comment"> * @property string $response The response the user sees if selecting this answer</span>
<a name="l3185"><span class="linenum">3185</span></a>  <span class="comment"> *</span>
<a name="l3186"><span class="linenum">3186</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l3187"><span class="linenum">3187</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3188"><span class="linenum">3188</span></a>  <span class="comment"> */</span>
<a name="l3189"><span class="linenum">3189</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('lesson_page_answer')" href="../../_classes/lesson_page_answer.html" onMouseOver="classPopup(event,'lesson_page_answer')">lesson_page_answer</a> extends lesson_base {
<a name="l3190"><span class="linenum">3190</span></a>  
<a name="l3191"><span class="linenum">3191</span></a>      <span class="comment">/**</span>
<a name="l3192"><span class="linenum">3192</span></a>  <span class="comment">     * Loads an page answer from the DB</span>
<a name="l3193"><span class="linenum">3193</span></a>  <span class="comment">     *</span>
<a name="l3194"><span class="linenum">3194</span></a>  <span class="comment">     * @param int $id</span>
<a name="l3195"><span class="linenum">3195</span></a>  <span class="comment">     * @return lesson_page_answer</span>
<a name="l3196"><span class="linenum">3196</span></a>  <span class="comment">     */</span>
<a name="l3197"><span class="linenum">3197</span></a>      public static function <a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l3198"><span class="linenum">3198</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3199"><span class="linenum">3199</span></a>          <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;lesson_answers&quot;, array(&quot;id&quot; =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l3200"><span class="linenum">3200</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('lesson_page_answer')" href="../../_classes/lesson_page_answer.html" onMouseOver="classPopup(event,'lesson_page_answer')">lesson_page_answer</a>(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>);
<a name="l3201"><span class="linenum">3201</span></a>      }
<a name="l3202"><span class="linenum">3202</span></a>  
<a name="l3203"><span class="linenum">3203</span></a>      <span class="comment">/**</span>
<a name="l3204"><span class="linenum">3204</span></a>  <span class="comment">     * Given an object of properties and a page created answer(s) and saves them</span>
<a name="l3205"><span class="linenum">3205</span></a>  <span class="comment">     * in the database.</span>
<a name="l3206"><span class="linenum">3206</span></a>  <span class="comment">     *</span>
<a name="l3207"><span class="linenum">3207</span></a>  <span class="comment">     * @param stdClass $properties</span>
<a name="l3208"><span class="linenum">3208</span></a>  <span class="comment">     * @param lesson_page $page</span>
<a name="l3209"><span class="linenum">3209</span></a>  <span class="comment">     * @return array</span>
<a name="l3210"><span class="linenum">3210</span></a>  <span class="comment">     */</span>
<a name="l3211"><span class="linenum">3211</span></a>      public static function <a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>, lesson_page <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l3212"><span class="linenum">3212</span></a>          return <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('create_answers')" href="../../_functions/create_answers.html" onMouseOver="funcPopup(event,'create_answers')">create_answers</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>);
<a name="l3213"><span class="linenum">3213</span></a>      }
<a name="l3214"><span class="linenum">3214</span></a>  
<a name="l3215"><span class="linenum">3215</span></a>  }
<a name="l3216"><span class="linenum">3216</span></a>  
<a name="l3217"><span class="linenum">3217</span></a>  <span class="comment">/**</span>
<a name="l3218"><span class="linenum">3218</span></a>  <span class="comment"> * A management class for page types</span>
<a name="l3219"><span class="linenum">3219</span></a>  <span class="comment"> *</span>
<a name="l3220"><span class="linenum">3220</span></a>  <span class="comment"> * This class is responsible for managing the different pages. A manager object can</span>
<a name="l3221"><span class="linenum">3221</span></a>  <span class="comment"> * be retrieved by calling the following line of code:</span>
<a name="l3222"><span class="linenum">3222</span></a>  <span class="comment"> * &lt;code&gt;</span>
<a name="l3223"><span class="linenum">3223</span></a>  <span class="comment"> * $manager  = lesson_page_type_manager::get($lesson);</span>
<a name="l3224"><span class="linenum">3224</span></a>  <span class="comment"> * &lt;/code&gt;</span>
<a name="l3225"><span class="linenum">3225</span></a>  <span class="comment"> * The first time the page type manager is retrieved the it includes all of the</span>
<a name="l3226"><span class="linenum">3226</span></a>  <span class="comment"> * different page types located in mod/lesson/pagetypes.</span>
<a name="l3227"><span class="linenum">3227</span></a>  <span class="comment"> *</span>
<a name="l3228"><span class="linenum">3228</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l3229"><span class="linenum">3229</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3230"><span class="linenum">3230</span></a>  <span class="comment"> */</span>
<a name="l3231"><span class="linenum">3231</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('lesson_page_type_manager')" href="../../_classes/lesson_page_type_manager.html" onMouseOver="classPopup(event,'lesson_page_type_manager')">lesson_page_type_manager</a> {
<a name="l3232"><span class="linenum">3232</span></a>  
<a name="l3233"><span class="linenum">3233</span></a>      <span class="comment">/**</span>
<a name="l3234"><span class="linenum">3234</span></a>  <span class="comment">     * An array of different page type classes</span>
<a name="l3235"><span class="linenum">3235</span></a>  <span class="comment">     * @var array</span>
<a name="l3236"><span class="linenum">3236</span></a>  <span class="comment">     */</span>
<a name="l3237"><span class="linenum">3237</span></a>      protected <a class="var it2894" onMouseOver="hilite(2894)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = array();
<a name="l3238"><span class="linenum">3238</span></a>  
<a name="l3239"><span class="linenum">3239</span></a>      <span class="comment">/**</span>
<a name="l3240"><span class="linenum">3240</span></a>  <span class="comment">     * Retrieves the lesson page type manager object</span>
<a name="l3241"><span class="linenum">3241</span></a>  <span class="comment">     *</span>
<a name="l3242"><span class="linenum">3242</span></a>  <span class="comment">     * If the object hasn't yet been created it is created here.</span>
<a name="l3243"><span class="linenum">3243</span></a>  <span class="comment">     *</span>
<a name="l3244"><span class="linenum">3244</span></a>  <span class="comment">     * @staticvar lesson_page_type_manager $pagetypemanager</span>
<a name="l3245"><span class="linenum">3245</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l3246"><span class="linenum">3246</span></a>  <span class="comment">     * @return lesson_page_type_manager</span>
<a name="l3247"><span class="linenum">3247</span></a>  <span class="comment">     */</span>
<a name="l3248"><span class="linenum">3248</span></a>      public static function <a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(lesson <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l3249"><span class="linenum">3249</span></a>          static <a class="var it23965" onMouseOver="hilite(23965)" onMouseOut="lolite()" onClick="logVariable('pagetypemanager')" href="../../_variables/pagetypemanager.html">$pagetypemanager</a>;
<a name="l3250"><span class="linenum">3250</span></a>          if (!(<a class="var it23965" onMouseOver="hilite(23965)" onMouseOut="lolite()" onClick="logVariable('pagetypemanager')" href="../../_variables/pagetypemanager.html">$pagetypemanager</a> instanceof lesson_page_type_manager)) {
<a name="l3251"><span class="linenum">3251</span></a>              <a class="var it23965" onMouseOver="hilite(23965)" onMouseOut="lolite()" onClick="logVariable('pagetypemanager')" href="../../_variables/pagetypemanager.html">$pagetypemanager</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lesson_page_type_manager')" href="../../_classes/lesson_page_type_manager.html" onMouseOver="classPopup(event,'lesson_page_type_manager')">lesson_page_type_manager</a>();
<a name="l3252"><span class="linenum">3252</span></a>              <a class="var it23965" onMouseOver="hilite(23965)" onMouseOut="lolite()" onClick="logVariable('pagetypemanager')" href="../../_variables/pagetypemanager.html">$pagetypemanager</a>-&gt;<a class="function" onClick="logFunction('load_lesson_types')" href="../../_functions/load_lesson_types.html" onMouseOver="funcPopup(event,'load_lesson_types')">load_lesson_types</a>(<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l3253"><span class="linenum">3253</span></a>          }
<a name="l3254"><span class="linenum">3254</span></a>          return <a class="var it23965" onMouseOver="hilite(23965)" onMouseOut="lolite()" onClick="logVariable('pagetypemanager')" href="../../_variables/pagetypemanager.html">$pagetypemanager</a>;
<a name="l3255"><span class="linenum">3255</span></a>      }
<a name="l3256"><span class="linenum">3256</span></a>  
<a name="l3257"><span class="linenum">3257</span></a>      <span class="comment">/**</span>
<a name="l3258"><span class="linenum">3258</span></a>  <span class="comment">     * Finds and loads all lesson page types in mod/lesson/pagetypes</span>
<a name="l3259"><span class="linenum">3259</span></a>  <span class="comment">     *</span>
<a name="l3260"><span class="linenum">3260</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l3261"><span class="linenum">3261</span></a>  <span class="comment">     */</span>
<a name="l3262"><span class="linenum">3262</span></a>      public function <a class="function" onClick="logFunction('load_lesson_types')" href="../../_functions/load_lesson_types.html" onMouseOver="funcPopup(event,'load_lesson_types')">load_lesson_types</a>(lesson <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l3263"><span class="linenum">3263</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l3264"><span class="linenum">3264</span></a>          <a class="var it13148" onMouseOver="hilite(13148)" onMouseOut="lolite()" onClick="logVariable('basedir')" href="../../_variables/basedir.html">$basedir</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/mod/lesson/pagetypes/';
<a name="l3265"><span class="linenum">3265</span></a>          <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a> = dir(<a class="var it13148" onMouseOver="hilite(13148)" onMouseOut="lolite()" onClick="logVariable('basedir')" href="../../_variables/basedir.html">$basedir</a>);
<a name="l3266"><span class="linenum">3266</span></a>          while (false !== (<a class="var it3473" onMouseOver="hilite(3473)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a> = <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>-&gt;<a class="function" onClick="logFunction('read')" href="../../_functions/read.html" onMouseOver="funcPopup(event,'read')">read</a>())) {
<a name="l3267"><span class="linenum">3267</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it3473" onMouseOver="hilite(3473)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, '.')===0 || !<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('#^[a-zA-Z]+\.php#i', <a class="var it3473" onMouseOver="hilite(3473)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>)) {
<a name="l3268"><span class="linenum">3268</span></a>                  continue;
<a name="l3269"><span class="linenum">3269</span></a>              }
<a name="l3270"><span class="linenum">3270</span></a>              require_once(<a class="var it13148" onMouseOver="hilite(13148)" onMouseOut="lolite()" onClick="logVariable('basedir')" href="../../_variables/basedir.html">$basedir</a>.<a class="var it3473" onMouseOver="hilite(3473)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>);
<a name="l3271"><span class="linenum">3271</span></a>              <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'lesson_page_type_'.<a class="phpfunction" onClick="logFunction('strtok')" href="../../_functions/strtok.html" onMouseOver="phpfuncPopup(event,'strtok')">strtok</a>(<a class="var it3473" onMouseOver="hilite(3473)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>,'.');
<a name="l3272"><span class="linenum">3272</span></a>              if (<a class="phpfunction" onClick="logFunction('class_exists')" href="../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>)) {
<a name="l3273"><span class="linenum">3273</span></a>                  <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a> = new <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>(new stdClass, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l3274"><span class="linenum">3274</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('types')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/types.html">types</a>[<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a onClick="logVariable('typeid')" class="var it41644" onMouseOver="hilite(41644)" onMouseOut="lolite()" href="../../_variables/typeid.html">typeid</a>] = <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>;
<a name="l3275"><span class="linenum">3275</span></a>              }
<a name="l3276"><span class="linenum">3276</span></a>          }
<a name="l3277"><span class="linenum">3277</span></a>  
<a name="l3278"><span class="linenum">3278</span></a>      }
<a name="l3279"><span class="linenum">3279</span></a>  
<a name="l3280"><span class="linenum">3280</span></a>      <span class="comment">/**</span>
<a name="l3281"><span class="linenum">3281</span></a>  <span class="comment">     * Returns an array of strings to describe the loaded page types</span>
<a name="l3282"><span class="linenum">3282</span></a>  <span class="comment">     *</span>
<a name="l3283"><span class="linenum">3283</span></a>  <span class="comment">     * @param int $type Can be used to return JUST the string for the requested type</span>
<a name="l3284"><span class="linenum">3284</span></a>  <span class="comment">     * @return array</span>
<a name="l3285"><span class="linenum">3285</span></a>  <span class="comment">     */</span>
<a name="l3286"><span class="linenum">3286</span></a>      public function <a class="function" onClick="logFunction('get_page_type_strings')" href="../../_functions/get_page_type_strings.html" onMouseOver="funcPopup(event,'get_page_type_strings')">get_page_type_strings</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>=null, <a class="var it14872" onMouseOver="hilite(14872)" onMouseOut="lolite()" onClick="logVariable('special')" href="../../_variables/special.html">$special</a>=true) {
<a name="l3287"><span class="linenum">3287</span></a>          <a class="var it2894" onMouseOver="hilite(2894)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = array();
<a name="l3288"><span class="linenum">3288</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('types')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/types.html">types</a> as <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>) {
<a name="l3289"><span class="linenum">3289</span></a>              if ((<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>===null || <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a onClick="logVariable('type')" class="var it41644" onMouseOver="hilite(41644)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>===<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) &amp;&amp; (<a class="var it14872" onMouseOver="hilite(14872)" onMouseOut="lolite()" onClick="logVariable('special')" href="../../_variables/special.html">$special</a>===true || <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a class="function" onClick="logFunction('is_standard')" href="../../_functions/is_standard.html" onMouseOver="funcPopup(event,'is_standard')">is_standard</a>())) {
<a name="l3290"><span class="linenum">3290</span></a>                  <a class="var it2894" onMouseOver="hilite(2894)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>[<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a onClick="logVariable('typeid')" class="var it41644" onMouseOver="hilite(41644)" onMouseOut="lolite()" href="../../_variables/typeid.html">typeid</a>] = <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a onClick="logVariable('typestring')" class="var it41644" onMouseOver="hilite(41644)" onMouseOut="lolite()" href="../../_variables/typestring.html">typestring</a>;
<a name="l3291"><span class="linenum">3291</span></a>              }
<a name="l3292"><span class="linenum">3292</span></a>          }
<a name="l3293"><span class="linenum">3293</span></a>          return <a class="var it2894" onMouseOver="hilite(2894)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>;
<a name="l3294"><span class="linenum">3294</span></a>      }
<a name="l3295"><span class="linenum">3295</span></a>  
<a name="l3296"><span class="linenum">3296</span></a>      <span class="comment">/**</span>
<a name="l3297"><span class="linenum">3297</span></a>  <span class="comment">     * Returns the basic string used to identify a page type provided with an id</span>
<a name="l3298"><span class="linenum">3298</span></a>  <span class="comment">     *</span>
<a name="l3299"><span class="linenum">3299</span></a>  <span class="comment">     * This string can be used to instantiate or identify the page type class.</span>
<a name="l3300"><span class="linenum">3300</span></a>  <span class="comment">     * If the page type id is unknown then 'unknown' is returned</span>
<a name="l3301"><span class="linenum">3301</span></a>  <span class="comment">     *</span>
<a name="l3302"><span class="linenum">3302</span></a>  <span class="comment">     * @param int $id</span>
<a name="l3303"><span class="linenum">3303</span></a>  <span class="comment">     * @return string</span>
<a name="l3304"><span class="linenum">3304</span></a>  <span class="comment">     */</span>
<a name="l3305"><span class="linenum">3305</span></a>      public function <a class="function" onClick="logFunction('get_page_type_idstring')" href="../../_functions/get_page_type_idstring.html" onMouseOver="funcPopup(event,'get_page_type_idstring')">get_page_type_idstring</a>(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l3306"><span class="linenum">3306</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('types')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/types.html">types</a> as <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>) {
<a name="l3307"><span class="linenum">3307</span></a>              if ((int)<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a onClick="logVariable('typeid')" class="var it41644" onMouseOver="hilite(41644)" onMouseOut="lolite()" href="../../_variables/typeid.html">typeid</a> === (int)<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l3308"><span class="linenum">3308</span></a>                  return <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>-&gt;<a onClick="logVariable('idstring')" class="var it41644" onMouseOver="hilite(41644)" onMouseOut="lolite()" href="../../_variables/idstring.html">idstring</a>;
<a name="l3309"><span class="linenum">3309</span></a>              }
<a name="l3310"><span class="linenum">3310</span></a>          }
<a name="l3311"><span class="linenum">3311</span></a>          return 'unknown';
<a name="l3312"><span class="linenum">3312</span></a>      }
<a name="l3313"><span class="linenum">3313</span></a>  
<a name="l3314"><span class="linenum">3314</span></a>      <span class="comment">/**</span>
<a name="l3315"><span class="linenum">3315</span></a>  <span class="comment">     * Loads a page for the provided lesson given it's id</span>
<a name="l3316"><span class="linenum">3316</span></a>  <span class="comment">     *</span>
<a name="l3317"><span class="linenum">3317</span></a>  <span class="comment">     * This function loads a page from the lesson when given both the lesson it belongs</span>
<a name="l3318"><span class="linenum">3318</span></a>  <span class="comment">     * to as well as the page's id.</span>
<a name="l3319"><span class="linenum">3319</span></a>  <span class="comment">     * If the page doesn't exist an error is thrown</span>
<a name="l3320"><span class="linenum">3320</span></a>  <span class="comment">     *</span>
<a name="l3321"><span class="linenum">3321</span></a>  <span class="comment">     * @param int $pageid The id of the page to load</span>
<a name="l3322"><span class="linenum">3322</span></a>  <span class="comment">     * @param lesson $lesson The lesson the page belongs to</span>
<a name="l3323"><span class="linenum">3323</span></a>  <span class="comment">     * @return lesson_page A class that extends lesson_page</span>
<a name="l3324"><span class="linenum">3324</span></a>  <span class="comment">     */</span>
<a name="l3325"><span class="linenum">3325</span></a>      public function <a class="function" onClick="logFunction('load_page')" href="../../_functions/load_page.html" onMouseOver="funcPopup(event,'load_page')">load_page</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, lesson <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l3326"><span class="linenum">3326</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3327"><span class="linenum">3327</span></a>          if (!(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> =<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lesson_pages', array('id'=&gt;<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>, 'lessonid'=&gt;<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)))) {
<a name="l3328"><span class="linenum">3328</span></a>              <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindpages', 'lesson');
<a name="l3329"><span class="linenum">3329</span></a>          }
<a name="l3330"><span class="linenum">3330</span></a>          <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a> = <a class="phpfunction" onClick="logFunction('get_class')" href="../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('types')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/types.html">types</a>[<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('qtype')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>]);
<a name="l3331"><span class="linenum">3331</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = new <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l3332"><span class="linenum">3332</span></a>          return <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>;
<a name="l3333"><span class="linenum">3333</span></a>      }
<a name="l3334"><span class="linenum">3334</span></a>  
<a name="l3335"><span class="linenum">3335</span></a>      <span class="comment">/**</span>
<a name="l3336"><span class="linenum">3336</span></a>  <span class="comment">     * This function detects errors in the ordering between 2 pages and updates the page records.</span>
<a name="l3337"><span class="linenum">3337</span></a>  <span class="comment">     *</span>
<a name="l3338"><span class="linenum">3338</span></a>  <span class="comment">     * @param stdClass $page1 Either the first of 2 pages or null if the $page2 param is the first in the list.</span>
<a name="l3339"><span class="linenum">3339</span></a>  <span class="comment">     * @param stdClass $page1 Either the second of 2 pages or null if the $page1 param is the last in the list.</span>
<a name="l3340"><span class="linenum">3340</span></a>  <span class="comment">     */</span>
<a name="l3341"><span class="linenum">3341</span></a>      protected function <a class="function" onClick="logFunction('check_page_order')" href="../../_functions/check_page_order.html" onMouseOver="funcPopup(event,'check_page_order')">check_page_order</a>(<a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>, <a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>) {
<a name="l3342"><span class="linenum">3342</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3343"><span class="linenum">3343</span></a>          if (empty(<a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>)) {
<a name="l3344"><span class="linenum">3344</span></a>              if (<a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it40295" onMouseOver="hilite(40295)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> != 0) {
<a name="l3345"><span class="linenum">3345</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;***prevpageid of page &quot; . <a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it40295" onMouseOver="hilite(40295)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot; set to 0***&quot;);
<a name="l3346"><span class="linenum">3346</span></a>                  <a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it40295" onMouseOver="hilite(40295)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> = 0;
<a name="l3347"><span class="linenum">3347</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;prevpageid&quot;, 0, array(&quot;id&quot; =&gt; <a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it40295" onMouseOver="hilite(40295)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3348"><span class="linenum">3348</span></a>              }
<a name="l3349"><span class="linenum">3349</span></a>          } else if (empty(<a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>)) {
<a name="l3350"><span class="linenum">3350</span></a>              if (<a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it40294" onMouseOver="hilite(40294)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> != 0) {
<a name="l3351"><span class="linenum">3351</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;***nextpageid of page &quot; . <a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it40294" onMouseOver="hilite(40294)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot; set to 0***&quot;);
<a name="l3352"><span class="linenum">3352</span></a>                  <a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it40294" onMouseOver="hilite(40294)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = 0;
<a name="l3353"><span class="linenum">3353</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;nextpageid&quot;, 0, array(&quot;id&quot; =&gt; <a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it40294" onMouseOver="hilite(40294)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3354"><span class="linenum">3354</span></a>              }
<a name="l3355"><span class="linenum">3355</span></a>          } else {
<a name="l3356"><span class="linenum">3356</span></a>              if (<a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it40294" onMouseOver="hilite(40294)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> != <a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it40295" onMouseOver="hilite(40295)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l3357"><span class="linenum">3357</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;***nextpageid of page &quot; . <a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it40294" onMouseOver="hilite(40294)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot; set to &quot; . <a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it40295" onMouseOver="hilite(40295)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot;***&quot;);
<a name="l3358"><span class="linenum">3358</span></a>                  <a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it40294" onMouseOver="hilite(40294)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a> = <a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it40295" onMouseOver="hilite(40295)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3359"><span class="linenum">3359</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;nextpageid&quot;, <a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it40295" onMouseOver="hilite(40295)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array(&quot;id&quot; =&gt; <a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it40294" onMouseOver="hilite(40294)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3360"><span class="linenum">3360</span></a>              }
<a name="l3361"><span class="linenum">3361</span></a>              if (<a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it40295" onMouseOver="hilite(40295)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> != <a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it40294" onMouseOver="hilite(40294)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l3362"><span class="linenum">3362</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;***prevpageid of page &quot; . <a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it40295" onMouseOver="hilite(40295)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot; set to &quot; . <a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it40294" onMouseOver="hilite(40294)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot;***&quot;);
<a name="l3363"><span class="linenum">3363</span></a>                  <a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it40295" onMouseOver="hilite(40295)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> = <a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it40294" onMouseOver="hilite(40294)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3364"><span class="linenum">3364</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>(&quot;lesson_pages&quot;, &quot;prevpageid&quot;, <a class="var it3674" onMouseOver="hilite(3674)" onMouseOut="lolite()" onClick="logVariable('page1')" href="../../_variables/page1.html">$page1</a>-&gt;<a onClick="logVariable('id')" class="var it40294" onMouseOver="hilite(40294)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array(&quot;id&quot; =&gt; <a class="var it3676" onMouseOver="hilite(3676)" onMouseOut="lolite()" onClick="logVariable('page2')" href="../../_variables/page2.html">$page2</a>-&gt;<a onClick="logVariable('id')" class="var it40295" onMouseOver="hilite(40295)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3365"><span class="linenum">3365</span></a>              }
<a name="l3366"><span class="linenum">3366</span></a>          }
<a name="l3367"><span class="linenum">3367</span></a>      }
<a name="l3368"><span class="linenum">3368</span></a>  
<a name="l3369"><span class="linenum">3369</span></a>      <span class="comment">/**</span>
<a name="l3370"><span class="linenum">3370</span></a>  <span class="comment">     * This function loads ALL pages that belong to the lesson.</span>
<a name="l3371"><span class="linenum">3371</span></a>  <span class="comment">     *</span>
<a name="l3372"><span class="linenum">3372</span></a>  <span class="comment">     * @param lesson $lesson</span>
<a name="l3373"><span class="linenum">3373</span></a>  <span class="comment">     * @return array An array of lesson_page_type_*</span>
<a name="l3374"><span class="linenum">3374</span></a>  <span class="comment">     */</span>
<a name="l3375"><span class="linenum">3375</span></a>      public function <a class="function" onClick="logFunction('load_all_pages')" href="../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>(lesson <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>) {
<a name="l3376"><span class="linenum">3376</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3377"><span class="linenum">3377</span></a>          if (!(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> =<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('lesson_pages', array('lessonid'=&gt;<a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>-&gt;<a onClick="logVariable('id')" class="var it39901" onMouseOver="hilite(39901)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)))) {
<a name="l3378"><span class="linenum">3378</span></a>              return array(); <span class="comment">// Records returned empty.</span>
<a name="l3379"><span class="linenum">3379</span></a>          }
<a name="l3380"><span class="linenum">3380</span></a>          foreach (<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>=&gt;<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l3381"><span class="linenum">3381</span></a>              <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a> = <a class="phpfunction" onClick="logFunction('get_class')" href="../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('types')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/types.html">types</a>[<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('qtype')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/qtype.html">qtype</a>]);
<a name="l3382"><span class="linenum">3382</span></a>              <a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] = new <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it657" onMouseOver="hilite(657)" onMouseOut="lolite()" onClick="logVariable('lesson')" href="../../_variables/lesson.html">$lesson</a>);
<a name="l3383"><span class="linenum">3383</span></a>          }
<a name="l3384"><span class="linenum">3384</span></a>  
<a name="l3385"><span class="linenum">3385</span></a>          <a class="var it23968" onMouseOver="hilite(23968)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a> = array();
<a name="l3386"><span class="linenum">3386</span></a>          <a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> = 0;
<a name="l3387"><span class="linenum">3387</span></a>          <a class="var it23969" onMouseOver="hilite(23969)" onMouseOut="lolite()" onClick="logVariable('morepages')" href="../../_variables/morepages.html">$morepages</a> = true;
<a name="l3388"><span class="linenum">3388</span></a>          while (<a class="var it23969" onMouseOver="hilite(23969)" onMouseOut="lolite()" onClick="logVariable('morepages')" href="../../_variables/morepages.html">$morepages</a>) {
<a name="l3389"><span class="linenum">3389</span></a>              <a class="var it23969" onMouseOver="hilite(23969)" onMouseOut="lolite()" onClick="logVariable('morepages')" href="../../_variables/morepages.html">$morepages</a> = false;
<a name="l3390"><span class="linenum">3390</span></a>              foreach (<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l3391"><span class="linenum">3391</span></a>                  if ((int)<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('prevpageid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/prevpageid.html">prevpageid</a> === (int)<a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>) {
<a name="l3392"><span class="linenum">3392</span></a>  <span class="comment">                    // Check for errors in page ordering and fix them on the fly.</span>
<a name="l3393"><span class="linenum">3393</span></a>                      <a class="var it23956" onMouseOver="hilite(23956)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a> = null;
<a name="l3394"><span class="linenum">3394</span></a>                      if (<a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> !== 0) {
<a name="l3395"><span class="linenum">3395</span></a>                          <a class="var it23956" onMouseOver="hilite(23956)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a> = <a class="var it23968" onMouseOver="hilite(23968)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a>[<a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>];
<a name="l3396"><span class="linenum">3396</span></a>                      }
<a name="l3397"><span class="linenum">3397</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_page_order')" href="../../_functions/check_page_order.html" onMouseOver="funcPopup(event,'check_page_order')">check_page_order</a>(<a class="var it23956" onMouseOver="hilite(23956)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>);
<a name="l3398"><span class="linenum">3398</span></a>                      <a class="var it23969" onMouseOver="hilite(23969)" onMouseOut="lolite()" onClick="logVariable('morepages')" href="../../_variables/morepages.html">$morepages</a> = true;
<a name="l3399"><span class="linenum">3399</span></a>                      <a class="var it23968" onMouseOver="hilite(23968)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a>[<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>;
<a name="l3400"><span class="linenum">3400</span></a>                      unset(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]);
<a name="l3401"><span class="linenum">3401</span></a>                      <a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3402"><span class="linenum">3402</span></a>                      if ((int)<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('nextpageid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/nextpageid.html">nextpageid</a>===0) {
<a name="l3403"><span class="linenum">3403</span></a>                          break 2;
<a name="l3404"><span class="linenum">3404</span></a>                      } else {
<a name="l3405"><span class="linenum">3405</span></a>                          break 1;
<a name="l3406"><span class="linenum">3406</span></a>                      }
<a name="l3407"><span class="linenum">3407</span></a>                  }
<a name="l3408"><span class="linenum">3408</span></a>              }
<a name="l3409"><span class="linenum">3409</span></a>          }
<a name="l3410"><span class="linenum">3410</span></a>  
<a name="l3411"><span class="linenum">3411</span></a>  <span class="comment">        // Add remaining pages and fix the nextpageid links for each page.</span>
<a name="l3412"><span class="linenum">3412</span></a>          foreach (<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l3413"><span class="linenum">3413</span></a>  <span class="comment">            // Check for errors in page ordering and fix them on the fly.</span>
<a name="l3414"><span class="linenum">3414</span></a>              <a class="var it23956" onMouseOver="hilite(23956)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a> = null;
<a name="l3415"><span class="linenum">3415</span></a>              if (<a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> !== 0) {
<a name="l3416"><span class="linenum">3416</span></a>                  <a class="var it23956" onMouseOver="hilite(23956)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a> = <a class="var it23968" onMouseOver="hilite(23968)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a>[<a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>];
<a name="l3417"><span class="linenum">3417</span></a>              }
<a name="l3418"><span class="linenum">3418</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_page_order')" href="../../_functions/check_page_order.html" onMouseOver="funcPopup(event,'check_page_order')">check_page_order</a>(<a class="var it23956" onMouseOver="hilite(23956)" onMouseOut="lolite()" onClick="logVariable('prevpage')" href="../../_variables/prevpage.html">$prevpage</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>);
<a name="l3419"><span class="linenum">3419</span></a>              <a class="var it23968" onMouseOver="hilite(23968)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a>[<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>;
<a name="l3420"><span class="linenum">3420</span></a>              unset(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>[<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]);
<a name="l3421"><span class="linenum">3421</span></a>              <a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3422"><span class="linenum">3422</span></a>          }
<a name="l3423"><span class="linenum">3423</span></a>  
<a name="l3424"><span class="linenum">3424</span></a>          if (<a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a> !== 0) {
<a name="l3425"><span class="linenum">3425</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_page_order')" href="../../_functions/check_page_order.html" onMouseOver="funcPopup(event,'check_page_order')">check_page_order</a>(<a class="var it23968" onMouseOver="hilite(23968)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a>[<a class="var it23928" onMouseOver="hilite(23928)" onMouseOut="lolite()" onClick="logVariable('lastpageid')" href="../../_variables/lastpageid.html">$lastpageid</a>], null);
<a name="l3426"><span class="linenum">3426</span></a>          }
<a name="l3427"><span class="linenum">3427</span></a>  
<a name="l3428"><span class="linenum">3428</span></a>          return <a class="var it23968" onMouseOver="hilite(23968)" onMouseOut="lolite()" onClick="logVariable('orderedpages')" href="../../_variables/orderedpages.html">$orderedpages</a>;
<a name="l3429"><span class="linenum">3429</span></a>      }
<a name="l3430"><span class="linenum">3430</span></a>  
<a name="l3431"><span class="linenum">3431</span></a>      <span class="comment">/**</span>
<a name="l3432"><span class="linenum">3432</span></a>  <span class="comment">     * Fetches an mform that can be used to create/edit an page</span>
<a name="l3433"><span class="linenum">3433</span></a>  <span class="comment">     *</span>
<a name="l3434"><span class="linenum">3434</span></a>  <span class="comment">     * @param int $type The id for the page type</span>
<a name="l3435"><span class="linenum">3435</span></a>  <span class="comment">     * @param array $arguments Any arguments to pass to the mform</span>
<a name="l3436"><span class="linenum">3436</span></a>  <span class="comment">     * @return lesson_add_page_form_base</span>
<a name="l3437"><span class="linenum">3437</span></a>  <span class="comment">     */</span>
<a name="l3438"><span class="linenum">3438</span></a>      public function <a class="function" onClick="logFunction('get_page_form')" href="../../_functions/get_page_form.html" onMouseOver="funcPopup(event,'get_page_form')">get_page_form</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>, <a class="var it2696" onMouseOver="hilite(2696)" onMouseOut="lolite()" onClick="logVariable('arguments')" href="../../_variables/arguments.html">$arguments</a>) {
<a name="l3439"><span class="linenum">3439</span></a>          <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'lesson_add_page_form_'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_page_type_idstring')" href="../../_functions/get_page_type_idstring.html" onMouseOver="funcPopup(event,'get_page_type_idstring')">get_page_type_idstring</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>);
<a name="l3440"><span class="linenum">3440</span></a>          if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>) || <a class="phpfunction" onClick="logFunction('get_parent_class')" href="../../_functions/get_parent_class.html" onMouseOver="phpfuncPopup(event,'get_parent_class')">get_parent_class</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>)!=='lesson_add_page_form_base') {
<a name="l3441"><span class="linenum">3441</span></a>              <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Lesson page type unknown class requested '.<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l3442"><span class="linenum">3442</span></a>              <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'lesson_add_page_form_selection';
<a name="l3443"><span class="linenum">3443</span></a>          } else if (<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> === 'lesson_add_page_form_unknown') {
<a name="l3444"><span class="linenum">3444</span></a>              <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = 'lesson_add_page_form_selection';
<a name="l3445"><span class="linenum">3445</span></a>          }
<a name="l3446"><span class="linenum">3446</span></a>          return new <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>(null, <a class="var it2696" onMouseOver="hilite(2696)" onMouseOut="lolite()" onClick="logVariable('arguments')" href="../../_variables/arguments.html">$arguments</a>);
<a name="l3447"><span class="linenum">3447</span></a>      }
<a name="l3448"><span class="linenum">3448</span></a>  
<a name="l3449"><span class="linenum">3449</span></a>      <span class="comment">/**</span>
<a name="l3450"><span class="linenum">3450</span></a>  <span class="comment">     * Returns an array of links to use as add page links</span>
<a name="l3451"><span class="linenum">3451</span></a>  <span class="comment">     * @param int $previd The id of the previous page</span>
<a name="l3452"><span class="linenum">3452</span></a>  <span class="comment">     * @return array</span>
<a name="l3453"><span class="linenum">3453</span></a>  <span class="comment">     */</span>
<a name="l3454"><span class="linenum">3454</span></a>      public function <a class="function" onClick="logFunction('get_add_page_type_links')" href="../../_functions/get_add_page_type_links.html" onMouseOver="funcPopup(event,'get_add_page_type_links')">get_add_page_type_links</a>(<a class="var it2665" onMouseOver="hilite(2665)" onMouseOut="lolite()" onClick="logVariable('previd')" href="../../_variables/previd.html">$previd</a>) {
<a name="l3455"><span class="linenum">3455</span></a>          global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l3456"><span class="linenum">3456</span></a>  
<a name="l3457"><span class="linenum">3457</span></a>          <a class="var it9363" onMouseOver="hilite(9363)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a> = array();
<a name="l3458"><span class="linenum">3458</span></a>  
<a name="l3459"><span class="linenum">3459</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('types')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/types.html">types</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>=&gt;<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l3460"><span class="linenum">3460</span></a>              if (<a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('add_page_link')" href="../../_functions/add_page_link.html" onMouseOver="funcPopup(event,'add_page_link')">add_page_link</a>(<a class="var it2665" onMouseOver="hilite(2665)" onMouseOut="lolite()" onClick="logVariable('previd')" href="../../_variables/previd.html">$previd</a>)) {
<a name="l3461"><span class="linenum">3461</span></a>                  <a class="var it9363" onMouseOver="hilite(9363)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] = <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>;
<a name="l3462"><span class="linenum">3462</span></a>              }
<a name="l3463"><span class="linenum">3463</span></a>          }
<a name="l3464"><span class="linenum">3464</span></a>  
<a name="l3465"><span class="linenum">3465</span></a>          return <a class="var it9363" onMouseOver="hilite(9363)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>;
<a name="l3466"><span class="linenum">3466</span></a>      }
<a name="l3467"><span class="linenum">3467</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'setdefault': ['setdefault', 'Set the field default ', [['lib/xmldb','xmldb_field.php',246],['lib/google/src/Google/Service','YouTube.php',7343],['lib/google/src/Google/Service','YouTube.php',8783],['lib','formslib.php',1857]], 684],
'lesson_random_question_jump': ['lesson_random_question_jump', 'Handles the random jump between a branch table and end of branch or end of lesson (LESSON_RANDOMPAGE). ', [['mod/lesson','locallib.php',226]], 2],
'groups_get_user_groups': ['groups_get_user_groups', 'Returns info about user\'s groups in course. ', [['lib','grouplib.php',290]], 20],
'load': ['load', 'Load the config.php file for a particular theme, and return an instance of this class. (That is, this is a factory method.) ', [['lib','outputlib.php',399],['lib/adodb','adodb-active-recordx.inc.php',747],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',94],['lib/htmlpurifier/HTMLPurifier','Language.php',69],['cache/classes','definition.php',323],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',44],['lib/mustache/src/Mustache','Loader.php',17],['lib/phpexcel/PHPExcel','IOFactory.php',181],['lib/simplepie/library/SimplePie/Cache','MySQL.php',286],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',293],['lib/mustache/src/Mustache/Cache','NoopCache.php',20],['lib/phpexcel/PHPExcel/Reader','SYLK.php',197],['lib/phpexcel/PHPExcel/Reader','Excel5.php',602],['lib/simplepie/library/SimplePie/Cache','Base.php',87],['lib/pear/HTML/QuickForm','select.php',421],['lib/simplepie/library/SimplePie/Cache','File.php',118],['calendar','lib.php',2631],['backup/cc/cc_lib','xmlbase.php',92],['mod/lesson','locallib.php',1024],['mod/lesson','locallib.php',2243],['mod/lesson','locallib.php',3191],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',337],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',39],['lib/zend/Zend/Loader','PluginLoader.php',350],['lib/mustache/src/Mustache/Loader','StringLoader.php',28],['cache/classes','config.php',128],['lib/phpexcel/PHPExcel/Reader','IReader.php',46],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',69],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',224],['lib/phpexcel/PHPExcel/Reader','CSV.php',218],['lib/phpexcel/PHPExcel','Autoloader.php',62],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',205],['lib/zend/Zend/Loader/PluginLoader','Interface.php',68],['lib/mustache/src/Mustache','Cache.php',20],['lib/simplepie/library/SimplePie/Cache','Memcache.php',123],['lib/phpunit/classes','autoloader.php',46],['grade/grading','lib.php',227],['lib/zend/Zend/Loader/Autoloader','Resource.php',428],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',41],['lib/phpexcel/PHPExcel/Reader','HTML.php',128],['lib/mustache/src/Mustache/Loader','InlineLoader.php',87],['lib/adodb','adodb-active-record.inc.php',682],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',48]], 182],
'get_renderer': ['get_renderer', 'Get the renderer for a part of Moodle for this theme. ', [['lib','outputlib.php',1790],['mod/assign','locallib.php',2734],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['course/format','lib.php',889],['question/type/multichoice','question.php',137],['question/type/multichoice','question.php',259],['question/type','questionbase.php',275],['grade/grading/form/guide','lib.php',482],['question/behaviour','behaviourbase.php',135],['lib','pagelib.php',797],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49]], 339],
'get_jumptooptions': ['get_jumptooptions', 'Returns an array of options to display when choosing the jumpto for a page/answer ', [['mod/lesson','locallib.php',2978],['mod/lesson/pagetypes','branchtable.php',74]], 5],
'get_messages': ['get_messages', 'Get messages function implementation. ', [['message','externallib.php',637],['mod/lesson','locallib.php',1273],['admin/tool/installaddon/classes','validator.php',149],['lib/phpunit/classes','phpmailer_sink.php',60],['lib/phpunit/classes','message_sink.php',58]], 93],
'get_records_sql_menu': ['get_records_sql_menu', 'Get the first two columns from a number of records as an associative array using a SQL statement. ', [['lib/dml','moodle_database.php',1387]], 33],
'resourcelib_get_extension': ['resourcelib_get_extension', 'Looks for the extension. ', [['lib','resourcelib.php',184]], 3],
'load_page': ['load_page', 'Loads the requested page. ', [['mod/lesson','locallib.php',1635],['mod/lesson','locallib.php',3314]], 24],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1318]], 854],
'delete_records_list': ['delete_records_list', 'Delete the records from a table where one field match one list of values. ', [['lib/dml','moodle_database.php',1834]], 36],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/zend/Zend/Soap','Wsdl.php',641],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',582]], 3296],
'is_accessible': ['is_accessible', 'Check if the lesson is accessible at the present time ', [['mod/lesson','locallib.php',1478]], 2],
'create_from_lesson_page': ['create_from_lesson_page', 'Create instance of event. ', [['mod/lesson/classes/event','page_updated.php',44]], 4],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',438],['lib/classes/event','base.php',682]], 778],
'data_for_js': ['data_for_js', '!!!!!!DEPRECATED!!!!!! please use js_init_call() for everything now. ', [['lib','outputrequirementslib.php',1202]], 9],
'delete_override': ['delete_override', 'Deletes a lesson override from the database and clears any corresponding calendar events ', [['mod/lesson','locallib.php',1075]], 5],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',2854]], 853],
'get_add_page_type_links': ['get_add_page_type_links', 'Returns an array of links to use as add page links ', [['mod/lesson','locallib.php',3449]], 3],
'earned_score': ['earned_score', 'Returns the score for the attempt This may be overridden by page types that require manual grading ', [['mod/lesson','locallib.php',2612]], 1],
'get_type': ['get_type', 'Get the type ', [['lib/simplepie/library/SimplePie','Restriction.php',122],['mod/assign','assignmentplugin.php',153],['backup/util/ui','base_ui.class.php',294],['grade/report/singleview/classes/local/ui','bulk_insert.php',62],['backup/util/plan','backup_plan.class.php',70],['lib/simplepie/library/SimplePie','Caption.php',193],['lib/simplepie/library/SimplePie','Enclosure.php',877],['lib/simplepie/library','SimplePie.php',1624],['mod/lesson','locallib.php',2397],['mod/workshop','locallib.php',3761],['mod/lti/classes/local/ltiservice','resource_base.php',114],['backup/util/ui','backup_ui_setting.class.php',102],['availability/classes','condition.php',102],['backup/controller','restore_controller.class.php',259],['backup/controller','backup_controller.class.php',242],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',79]], 85],
'add_score': ['add_score', 'Convenience function: Adds a score input element ', [['mod/lesson','locallib.php',825]], 8],
'set_button': ['set_button', 'Specify a fragment of HTML that goes where the \'Turn editing on\' button normally goes. ', [['lib','pagelib.php',1283]], 26],
'display_answers': ['display_answers', '', [['mod/lesson/pagetypes','matching.php',235],['mod/lesson/pagetypes','numerical.php',126],['mod/lesson','locallib.php',3058],['mod/lesson/pagetypes','truefalse.php',116],['mod/lesson/pagetypes','shortanswer.php',191],['mod/lesson/pagetypes','multichoice.php',290],['mod/lesson/pagetypes','branchtable.php',216]], 1],
'count_records': ['count_records', 'Count the records in a table where all the given conditions met. ', [['lib/dml','moodle_database.php',1717]], 1399],
'lesson_display_teacher_warning': ['lesson_display_teacher_warning', 'Checks to see if a LESSON_CLUSTERJUMP or a LESSON_UNSEENBRANCHPAGE is used in a lesson. ', [['mod/lesson','locallib.php',68]], 2],
'delete_area_files': ['delete_area_files', 'Delete all area files (optionally limited by itemid). ', [['lib/filestorage','file_storage.php',740]], 117],
'add_response': ['add_response', 'Add an actual response to the data structure. ', [['question/classes/statistics/responses','analysis_for_class.php',114],['mod/lesson','locallib.php',883]], 7],
'add_message': ['add_message', 'Sets a message against the session for this lesson that will displayed next time the lesson processes messages ', [['mod/lesson','locallib.php',1454],['admin/tool/installaddon/classes','validator.php',484],['lib/phpunit/classes','phpmailer_sink.php',50],['lib/phpunit/classes','message_sink.php',48]], 61],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 315],
'update_state': ['update_state', 'Updates (if necessary) the completion state of activity $cm for the given user. ', [['lib','completionlib.php',520]], 37],
'callback_on_view': ['callback_on_view', '', [['mod/lesson/pagetypes','cluster.php',58],['mod/lesson/pagetypes','endofcluster.php',54],['mod/lesson','locallib.php',2623],['mod/lesson/pagetypes','endofbranch.php',54]], 1],
'strings_for_js': ['strings_for_js', 'Make an array of language strings available for JS. ', [['lib','outputrequirementslib.php',1167],['enrol','locallib.php',1295]], 69],
'check_page_order': ['check_page_order', 'This function detects errors in the ordering between 2 pages and updates the page records. ', [['mod/lesson','locallib.php',3335]], 3],
'get_grayout': ['get_grayout', '', [['mod/lesson/pagetypes','cluster.php',55],['mod/lesson/pagetypes','endofcluster.php',67],['mod/lesson','locallib.php',3079],['mod/lesson/pagetypes','endofbranch.php',98],['mod/lesson/pagetypes','branchtable.php',244]], 0],
'get_jump_name': ['get_jump_name', 'Returns the string for a jump name ', [['mod/lesson','locallib.php',2563]], 18],
'is_unanswered': ['is_unanswered', 'Checks to see if a page has been answered previously ', [['mod/lesson','locallib.php',2825],['mod/lesson/pagetypes','essay.php',270]], 0],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'get_typestring': ['get_typestring', '', [['mod/lesson/pagetypes','matching.php',41],['mod/lesson/pagetypes','cluster.php',46],['mod/lesson/pagetypes','numerical.php',41],['mod/lesson/pagetypes','endofcluster.php',45],['mod/lesson/pagetypes','truefalse.php',41],['mod/lesson/pagetypes','endofbranch.php',45],['mod/lesson/pagetypes','essay.php',41],['mod/lesson/pagetypes','shortanswer.php',41],['mod/lesson/pagetypes','multichoice.php',41],['mod/lesson/pagetypes','branchtable.php',42]], 12],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'lesson_unseen_question_jump': ['lesson_unseen_question_jump', 'Interprets the LESSON_UNSEENBRANCHPAGE jump. ', [['mod/lesson','locallib.php',98]], 3],
'resourcelib_embed_image': ['resourcelib_embed_image', 'Returns image embedding html. ', [['lib','resourcelib.php',210]], 3],
'get_typeid': ['get_typeid', '', [['mod/lesson/pagetypes','matching.php',38],['mod/lesson/pagetypes','cluster.php',43],['mod/lesson/pagetypes','numerical.php',38],['mod/lesson/pagetypes','endofcluster.php',42],['mod/lesson/pagetypes','truefalse.php',38],['mod/lesson/pagetypes','endofbranch.php',42],['mod/lesson/pagetypes','essay.php',38],['mod/lesson/pagetypes','shortanswer.php',38],['mod/lesson/pagetypes','multichoice.php',38],['mod/lesson/pagetypes','branchtable.php',39]], 2],
'lesson_add_header_buttons': ['lesson_add_header_buttons', 'Adds header buttons to the page for the lesson ', [['mod/lesson','locallib.php',565]], 1],
'file_save_draft_area_files': ['file_save_draft_area_files', 'Saves files from a draft file area to a real one (merging the list of files). Can rewrite URLs in some content at the same time if desired. ', [['lib','filelib.php',772]], 53],
'delete': ['delete', 'Deletes a key pair ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',110],['lib/google/src/Google/Service','Reseller.php',440],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',1006],['lib/adodb','adodb-active-recordx.inc.php',949],['lib/zend/Zend/Service/Delicious','Post.php',236],['lib/grade','grade_object.php',270],['lib/zend/Zend/Gdata','Gapps.php',258],['lib/google/src/Google/Service','Fusiontables.php',644],['lib/google/src/Google/Service','Fusiontables.php',809],['lib/google/src/Google/Service','Fusiontables.php',934],['lib/google/src/Google/Service','Fusiontables.php',1127],['lib/google/src/Google/Service','Fusiontables.php',1188],['blog','locallib.php',325],['lib/google/src/Google/Service','Blogger.php',1051],['lib/google/src/Google/Service','Blogger.php',1212],['lib/google/src/Google/Service','Blogger.php',1434],['lib/portfolio','plugin.php',692],['lib/google/src/Google/Service','AdExchangeBuyer.php',605],['lib/google/src/Google/Service','Manager.php',240],['lib/google/src/Google/Service','Manager.php',320],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',137],['lib','webdavlib.php',691],['lib/grade','grade_item.php',354],['lib/google/src/Google/Service','Gmail.php',686],['lib/google/src/Google/Service','Gmail.php',843],['lib/google/src/Google/Service','Gmail.php',936],['lib/google/src/Google/Service','Gmail.php',1146],['course','lib.php',3133],['lib/google/src/Google/Service','Mirror.php',424],['lib/google/src/Google/Service','Mirror.php',592],['lib/google/src/Google/Service','Mirror.php',660],['lib/google/src/Google/Service','Mirror.php',771],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',731],['lib/google/src/Google/Service','Genomics.php',963],['lib/google/src/Google/Service','Genomics.php',1327],['lib/google/src/Google/Service','Genomics.php',1399],['cache/classes','interfaces.php',161],['lib/google/src/Google/Service','Dfareporting.php',470],['lib/zend/Zend/Gdata/Gbase','ItemEntry.php',133],['lib/google/src/Google/Service','Licensing.php',221],['lib/google/src/Google/Service','Drive.php',1462],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1681],['lib/google/src/Google/Service','Drive.php',1932],['lib/google/src/Google/Service','Drive.php',2002],['lib/google/src/Google/Service','Drive.php',2131],['lib/google/src/Google/Service','Drive.php',2294],['lib/google/src/Google/Service','Drive.php',2414],['completion','data_object.php',272],['lib/google/src/Google/Service','Books.php',1804],['lib/zend/Zend/Gdata','App.php',914],['lib/google/src/Google/Cache','Memcache.php',142],['lib/google/src/Google/Service','Bigquery.php',512],['lib/google/src/Google/Service','Bigquery.php',822],['cache','disabledlib.php',102],['lib/zend/Zend/Server','Cache.php',132],['lib/zend/Zend/Gdata/App','Entry.php',212],['cache/stores/memcached','lib.php',368],['lib/google/src/Google/Service','YouTube.php',1470],['lib/google/src/Google/Service','YouTube.php',1979],['lib/google/src/Google/Service','YouTube.php',2277],['lib/google/src/Google/Service','YouTube.php',2510],['lib/google/src/Google/Service','YouTube.php',2657],['lib/google/src/Google/Service','YouTube.php',2998],['lib/google/src/Google/Service','YouTube.php',3196],['lib/google/src/Google/Service','Webmasters.php',298],['lib/google/src/Google/Service','Webmasters.php',388],['lib/google/src/Google/Service','Autoscaler.php',314],['lib/google/src/Google/Service','Autoscaler.php',428],['calendar','lib.php',2388],['lib/zend/Zend/Service/Amazon','Sqs.php',129],['lib/google/src/Google/Service','ShoppingContent.php',553],['lib/google/src/Google/Service','ShoppingContent.php',735],['lib/google/src/Google/Service','ShoppingContent.php',969],['mod/lesson','locallib.php',1039],['mod/lesson','locallib.php',2274],['lib/google/src/Google/Service','SQLAdmin.php',628],['lib/google/src/Google/Service','SQLAdmin.php',923],['lib/google/src/Google/Service','Fitness.php',458],['lib/google/src/Google/Service','Fitness.php',563],['lib/google/src/Google/Service','TagManager.php',1049],['lib/google/src/Google/Service','TagManager.php',1140],['lib/google/src/Google/Service','TagManager.php',1233],['lib/google/src/Google/Service','TagManager.php',1326],['lib/google/src/Google/Service','TagManager.php',1419],['lib/google/src/Google/Service','TagManager.php',1513],['lib/google/src/Google/Service','TagManager.php',1607],['lib/google/src/Google/Service','TagManager.php',1757],['lib/google/src/Google/Service','Directory.php',1300],['lib/google/src/Google/Service','Directory.php',1477],['lib/google/src/Google/Service','Directory.php',1587],['lib/google/src/Google/Service','Directory.php',1642],['lib/google/src/Google/Service','Directory.php',1769],['lib/google/src/Google/Service','Directory.php',1838],['lib/google/src/Google/Service','Directory.php',1935],['lib/google/src/Google/Service','Directory.php',2042],['lib/google/src/Google/Service','Directory.php',2144],['lib/google/src/Google/Service','Directory.php',2205],['lib/google/src/Google/Service','Directory.php',2405],['lib/google/src/Google/Service','Directory.php',2480],['cache/stores/static','lib.php',374],['lib/google/src/Google/Service','AppState.php',153],['lib/google/src/Google/Service','Taskqueue.php',292],['lib/google/src/Google/Service','Container.php',343],['lib/google/src/Google/Service','AndroidPublisher.php',1177],['lib/google/src/Google/Service','AndroidPublisher.php',1257],['lib/google/src/Google/Service','AndroidPublisher.php',1595],['lib/google/src/Google/Service','AndroidPublisher.php',1690],['lib/google/src/Google/Service','AndroidPublisher.php',1972],['repository','lib.php',427],['repository','lib.php',2012],['lib','accesslib.php',5529],['lib/google/src/Google/Service','AdSenseHost.php',733],['lib/google/src/Google/Service','AdSenseHost.php',1009],['lib/google/src/Google/Service','AdSenseHost.php',1167],['cache/stores/memcache','lib.php',401],['lib','filelib.php',3440],['lib/google/src/Google/Service','MapsEngine.php',1692],['lib/google/src/Google/Service','MapsEngine.php',1990],['lib/google/src/Google/Service','MapsEngine.php',2343],['lib/google/src/Google/Service','MapsEngine.php',2650],['lib/google/src/Google/Service','MapsEngine.php',2911],['lib/grade','grade_grade.php',955],['comment','lib.php',786],['lib/google/src/Google/Service','SiteVerification.php',138],['lib/google/src/Google/Service','Prediction.php',261],['cache/stores/session','lib.php',417],['cache/classes','dummystore.php',198],['lib/google/src/Google/Service','Compute.php',2812],['lib/google/src/Google/Service','Compute.php',2896],['lib/google/src/Google/Service','Compute.php',3139],['lib/google/src/Google/Service','Compute.php',3225],['lib/google/src/Google/Service','Compute.php',3361],['lib/google/src/Google/Service','Compute.php',3463],['lib/google/src/Google/Service','Compute.php',3543],['lib/google/src/Google/Service','Compute.php',3662],['lib/google/src/Google/Service','Compute.php',3725],['lib/google/src/Google/Service','Compute.php',3844],['lib/google/src/Google/Service','Compute.php',3941],['lib/google/src/Google/Service','Compute.php',4080],['lib/google/src/Google/Service','Compute.php',4406],['lib/google/src/Google/Service','Compute.php',4543],['lib/google/src/Google/Service','Compute.php',4660],['lib/google/src/Google/Service','Compute.php',4740],['lib/google/src/Google/Service','Compute.php',4806],['lib/google/src/Google/Service','Compute.php',4927],['lib/google/src/Google/Service','Compute.php',5069],['lib/google/src/Google/Service','Compute.php',5229],['lib/google/src/Google/Service','Compute.php',5360],['badges/criteria','award_criteria.php',330],['badges/criteria','award_criteria_manual.php',220],['lib/google/src/Google/Service','Calendar.php',886],['lib/google/src/Google/Service','Calendar.php',1040],['lib/google/src/Google/Service','Calendar.php',1228],['lib/google/src/Google/Service','Calendar.php',1362],['lib/google/src/Google/Service','Analytics.php',2068],['lib/google/src/Google/Service','Analytics.php',2211],['lib/google/src/Google/Service','Analytics.php',2293],['lib/google/src/Google/Service','Analytics.php',2414],['lib/google/src/Google/Service','Analytics.php',2631],['lib/google/src/Google/Service','Analytics.php',2760],['lib/google/src/Google/Service','Analytics.php',2851],['lib/google/src/Google/Service','Analytics.php',3181],['lib/google/src/Google/Service','Analytics.php',3406],['lib/google/src/Google/Service','Tasks.php',309],['lib/google/src/Google/Service','Tasks.php',427],['cache/classes','loaders.php',777],['cache/classes','loaders.php',1491],['cache/classes','loaders.php',1859],['cache/stores/mongodb','lib.php',361],['lib/grade','grade_category.php',259],['cache/stores/file','lib.php',392],['lib/google/src/Google/Service','Storage.php',945],['lib/google/src/Google/Service','Storage.php',1060],['lib/google/src/Google/Service','Storage.php',1227],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1565],['admin/tool/uploadcourse/classes','course.php',226],['lib/google/src/Google/Cache','Null.php',51],['lib/filestorage','stored_file.php',323],['lib/filebrowser','virtual_root_file.php',69],['lib/google/src/Google/Service','AdSense.php',1257],['lib/google/src/Google/Service','AdSense.php',1729],['lib/google/src/Google/Service','Pubsub.php',239],['lib/google/src/Google/Service','Pubsub.php',378],['lib/grade','grade_scale.php',136],['lib/filebrowser','file_info.php',418],['lib/google/src/Google/Cache','File.php',106],['lib/htmlpurifier/HTMLPurifier','Zipper.php',89],['lib/google/src/Google/Service','Dns.php',370],['lib/filebrowser','file_info_stored.php',631],['lib/google/src/Google/Service','Replicapool.php',374],['lib/google/src/Google/Service','Resourceviews.php',419],['lib','badgeslib.php',620],['lib/google/src/Google/Cache','Apc.php',103],['lib/adodb','adodb-active-record.inc.php',792],['mnet','peer.php',122],['lib/grade','grade_outcome.php',97]], 260],
'get_records_select': ['get_records_select', 'Get a number of records as an array of objects which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1283]], 163],
'get_answer_format': ['get_answer_format', 'Returns answer format used by question type. ', [['mod/lesson','locallib.php',733]], 4],
'load_lesson_types': ['load_lesson_types', 'Finds and loads all lesson page types in mod/lesson/pagetypes ', [['mod/lesson','locallib.php',3257]], 1],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'get_page_type_strings': ['get_page_type_strings', 'Returns an array of strings to describe the loaded page types ', [['mod/lesson','locallib.php',3280]], 4],
'update': ['update', 'Update a customer resource if one it exists and is owned by the reseller. (customers.update) ', [['lib/google/src/Google/Service','Reseller.php',343],['mod/lesson/pagetypes','matching.php',308],['lib/adodb','adodb-active-recordx.inc.php',1047],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','Fusiontables.php',726],['lib/google/src/Google/Service','Fusiontables.php',889],['lib/google/src/Google/Service','Fusiontables.php',1095],['lib/google/src/Google/Service','Fusiontables.php',1269],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Blogger.php',1332],['lib/google/src/Google/Service','Blogger.php',1630],['lib/google/src/Google/Service','Doubleclicksearch.php',325],['lib/google/src/Google/Service','AdExchangeBuyer.php',392],['lib/google/src/Google/Service','AdExchangeBuyer.php',684],['lib/grade','grade_item.php',260],['lib/google/src/Google/Service','Gmail.php',756],['lib/google/src/Google/Service','Gmail.php',908],['lib/google/src/Google/Service','Mirror.php',495],['lib/google/src/Google/Service','Mirror.php',633],['lib/google/src/Google/Service','Mirror.php',744],['lib/google/src/Google/Service','Genomics.php',690],['lib/google/src/Google/Service','Genomics.php',811],['lib/google/src/Google/Service','Genomics.php',1064],['lib/google/src/Google/Service','Genomics.php',1370],['lib/google/src/Google/Service','Genomics.php',1521],['lib/google/src/Google/Service','Dfareporting.php',570],['lib/google/src/Google/Service','PlusDomains.php',691],['lib/google/src/Google/Service','Licensing.php',332],['lib/google/src/Google/Service','Drive.php',1624],['lib/google/src/Google/Service','Drive.php',1859],['lib/google/src/Google/Service','Drive.php',2100],['lib/google/src/Google/Service','Drive.php',2211],['lib/google/src/Google/Service','Drive.php',2261],['lib/google/src/Google/Service','Drive.php',2385],['lib/google/src/Google/Service','Drive.php',2473],['completion','data_object.php',251],['lib/google/src/Google/Service','Books.php',1901],['lib/google/src/Google/Service','Bigquery.php',603],['lib/google/src/Google/Service','Bigquery.php',911],['lib/google/src/Google/Service','Groupssettings.php',137],['lib/google/src/Google/Service','YouTube.php',1596],['lib/google/src/Google/Service','YouTube.php',1697],['lib/google/src/Google/Service','YouTube.php',2201],['lib/google/src/Google/Service','YouTube.php',2439],['lib/google/src/Google/Service','YouTube.php',2613],['lib/google/src/Google/Service','YouTube.php',2809],['lib/google/src/Google/Service','YouTube.php',3419],['lib/google/src/Google/Service','Coordinate.php',568],['lib/google/src/Google/Service','Coordinate.php',680],['lib/google/src/Google/Service','Autoscaler.php',399],['calendar','lib.php',2171],['lib/google/src/Google/Service','ShoppingContent.php',633],['lib/google/src/Google/Service','ShoppingContent.php',815],['lib','weblib.php',3154],['mod/lesson','locallib.php',2682],['lib/google/src/Google/Service','SQLAdmin.php',843],['lib/google/src/Google/Service','Fitness.php',424],['lib/google/src/Google/Service','Fitness.php',607],['lib/google/src/Google/Service','TagManager.php',1004],['lib/google/src/Google/Service','TagManager.php',1093],['lib/google/src/Google/Service','TagManager.php',1186],['lib/google/src/Google/Service','TagManager.php',1279],['lib/google/src/Google/Service','TagManager.php',1372],['lib/google/src/Google/Service','TagManager.php',1466],['lib/google/src/Google/Service','TagManager.php',1560],['lib/google/src/Google/Service','TagManager.php',1711],['lib/google/src/Google/Service','TagManager.php',1804],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Directory.php',1446],['lib/google/src/Google/Service','Directory.php',1559],['lib/google/src/Google/Service','Directory.php',1724],['lib/google/src/Google/Service','Directory.php',1907],['lib/google/src/Google/Service','Directory.php',2014],['lib/google/src/Google/Service','Directory.php',2116],['lib/google/src/Google/Service','Directory.php',2337],['lib/google/src/Google/Service','Directory.php',2523],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['lib/google/src/Google/Service','AppState.php',201],['lib/google/src/Google/Service','Taskqueue.php',397],['lib/google/src/Google/Service','AndroidPublisher.php',1360],['lib/google/src/Google/Service','AndroidPublisher.php',1472],['lib/google/src/Google/Service','AndroidPublisher.php',1542],['lib/google/src/Google/Service','AndroidPublisher.php',1780],['lib/google/src/Google/Service','AndroidPublisher.php',1846],['lib/google/src/Google/Service','AndroidPublisher.php',1928],['lib/google/src/Google/Service','AndroidPublisher.php',2066],['mod/lesson/pagetypes','essay.php',158],['lib/google/src/Google/Service','AdSenseHost.php',845],['lib/google/src/Google/Service','AdSenseHost.php',1096],['lib/google/src/Google/Service','Games.php',1507],['lib/grade','grade_grade.php',940],['lib/google/src/Google/Service','SiteVerification.php',226],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Prediction.php',338],['lib/google/src/Google/Service','Compute.php',2999],['lib/google/src/Google/Service','Compute.php',3310],['lib/google/src/Google/Service','Compute.php',3814],['lib/google/src/Google/Service','Compute.php',5314],['lib/google/src/Google/Service','Calendar.php',979],['lib/google/src/Google/Service','Calendar.php',1144],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1633],['lib/google/src/Google/Service','Analytics.php',2118],['lib/google/src/Google/Service','Analytics.php',2385],['lib/google/src/Google/Service','Analytics.php',2495],['lib/google/src/Google/Service','Analytics.php',2602],['lib/google/src/Google/Service','Analytics.php',2730],['lib/google/src/Google/Service','Analytics.php',2821],['lib/google/src/Google/Service','Analytics.php',2944],['lib/google/src/Google/Service','Analytics.php',3277],['lib/google/src/Google/Service','Analytics.php',3379],['lib/google/src/Google/Service','Analytics.php',3461],['lib/google/src/Google/Service','Tasks.php',385],['lib/google/src/Google/Service','Tasks.php',555],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72],['grade/grading/form/guide','lib.php',826],['lib/grade','grade_category.php',204],['lib/google/src/Google/Service','Storage.php',1030],['lib/google/src/Google/Service','Storage.php',1165],['lib/google/src/Google/Service','Storage.php',1318],['lib/google/src/Google/Service','Storage.php',1454],['lib/google/src/Google/Service','Storage.php',1718],['lib/filestorage','stored_file.php',103],['grade/grading/form/rubric','lib.php',828],['lib/grade','grade_scale.php',125],['lib','coursecatlib.php',441],['lib/adodb','adodb-active-record.inc.php',878],['lib/grade','grade_outcome.php',144],['mod/lesson/pagetypes','branchtable.php',262]], 290],
'valid_page_and_view': ['valid_page_and_view', '', [['mod/lesson/pagetypes','cluster.php',77],['mod/lesson/pagetypes','endofcluster.php',92],['mod/lesson','locallib.php',3156],['mod/lesson/pagetypes','endofbranch.php',110]], 1],
'custom_definition': ['custom_definition', '', [['mod/lesson/pagetypes','matching.php',491],['mod/lesson/pagetypes','cluster.php',98],['mod/lesson/pagetypes','numerical.php',263],['mod/lesson/pagetypes','endofcluster.php',103],['mod/lesson','locallib.php',727],['mod/lesson/pagetypes','truefalse.php',357],['mod/lesson/pagetypes','endofbranch.php',121],['mod/lesson/pagetypes','essay.php',291],['mod/lesson/pagetypes','shortanswer.php',334],['mod/lesson/pagetypes','multichoice.php',463],['mod/lesson','editpage_form.php',46],['mod/lesson/pagetypes','branchtable.php',306]], 1],
'get_next_page': ['get_next_page', 'Gets the next page id to display after the one that is provided. ', [['mod/lesson','locallib.php',1407]], 4],
'cluster_jump': ['cluster_jump', 'Interprets LESSON_CLUSTERJUMP jumpto value. ', [['mod/lesson','locallib.php',1734]], 4],
'time_remaining': ['time_remaining', 'Returns the time a user has remaining on this lesson ', [['mod/lesson','locallib.php',1708]], 1],
'set_field': ['set_field', 'Sets the custom profile field used for testing. ', [['availability/condition/profile/tests','condition_test.php',349],['lib/dml','moodle_database.php',1688]], 462],
'lesson_process_group_deleted_in_course': ['lesson_process_group_deleted_in_course', 'Logic to happen when a/some group(s) has/have been deleted in a course. ', [['mod/lesson','locallib.php',641]], 2],
'get_user_max_upload_file_size': ['get_user_max_upload_file_size', 'Returns the maximum size for uploading files for the current user ', [['lib','moodlelib.php',6112]], 13],
'construction_override': ['construction_override', '', [['mod/lesson/pagetypes','cluster.php',122],['mod/lesson/pagetypes','endofcluster.php',126],['mod/lesson','locallib.php',906],['mod/lesson/pagetypes','endofbranch.php',144]], 1],
'move': ['move', 'Random access to a specific row in the recordset. Some databases do not support access to previous rows in the databases (no scrolling backwards). ', [['lib/adodb','adodb.inc.php',3419],['lib','webdavlib.php',531],['mod/chat','lib.php',37],['mod/lesson','locallib.php',2341],['lib/google/src/Google/Service','Calendar.php',1564],['lib/google/src/Google/Service','Tasks.php',515]], 49],
'create_answers': ['create_answers', '', [['mod/lesson/pagetypes','matching.php',110],['mod/lesson','locallib.php',2838],['mod/lesson/pagetypes','essay.php',94]], 2],
'make_pluginfile_url': ['make_pluginfile_url', 'Factory method for creation of url pointing to plugin file. ', [['lib','weblib.php',725]], 29],
'get_firstpageid': ['get_firstpageid', 'Returns the id of the first page of this lesson. (prevpageid = 0) ', [['mod/lesson','locallib.php',1364]], 0],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'get_record_sql': ['get_record_sql', 'Get a single database record as an object using a SQL statement. ', [['lib/dml','oci_native_moodle_database.php',1035],['lib/dml','moodle_database.php',1457]], 140],
'get_answers': ['get_answers', '', [['backup/cc','entity.quiz.class.php',661],['backup/cc','entity11.quiz.class.php',681],['question/type/shortanswer','question.php',76],['mod/lesson','locallib.php',2364],['question/type','questionbase.php',982],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',44]], 36],
'is_unseen': ['is_unseen', 'Returns true if a page has been viewed before ', [['mod/lesson','locallib.php',2804],['mod/lesson/pagetypes','branchtable.php',279]], 1],
'lesson_add_fake_blocks': ['lesson_add_fake_blocks', '', [['mod/lesson','locallib.php',420]], 3],
'read': ['read', 'Read response from server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',310],['lib/horde/framework/Horde','Secret.php',79],['lib/zend/Zend/Gdata','MimeBodyString.php',60],['lib/horde/framework/Horde/Imap/Client/Socket/Connection','Pop3.php',54],['auth/cas/CAS/CAS/PGTStorage','File.php',222],['lib/zend/Zend/Http/Client/Adapter','Test.php',174],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',97],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',203],['lib/zend/Zend/Http/Client/Adapter','Interface.php',66],['lib/horde/framework/Horde/Imap/Client/Socket/Connection','Socket.php',110],['lib/jabber/XMPP','XMLStream.php',660],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',331],['auth/cas/CAS/CAS/PGTStorage','Db.php',384],['lib/zend/Zend/Http/Client/Adapter','Curl.php',450],['lib/zend/Zend/Gdata','MimeFile.php',54],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',119],['lib/zend/Zend/Gdata','MediaMimeStream.php',128]], 56],
'is_enabled': ['is_enabled', 'Allows hiding this plugin from the submission/feedback screen if it is not enabled. ', [['mod/assign','assignmentplugin.php',223],['lib/classes/plugininfo','orphaned.php',37],['lib','completionlib.php',269],['mod/assign/submission/comments','locallib.php',172],['mod/assign/feedback/editpdf','locallib.php',276],['lib/classes/plugininfo','base.php',371],['lib/classes/plugininfo','tool.php',39],['admin/tool/health','index.php',393],['admin/tool/log/classes/plugininfo','logstore.php',35],['lib/classes/message/inbound','manager.php',37],['lib/classes/plugininfo','mnetservice.php',33],['mod/assignment/classes/plugininfo','assignment.php',32],['lib','adminlib.php',1952],['mod/assign/feedback/offline','locallib.php',365],['lib','medialib.php',318],['lib','medialib.php',634],['lib','medialib.php',1265]], 200],
'__get': ['__get', '__get override. ', [['lib/alfresco/Service','Version.php',59],['lib/minify/lib/MrClay/Cli','Arg.php',170],['lib/adodb','adodb-active-recordx.inc.php',333],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',63],['lib/zend/Zend/Service/WindowsAzure/Storage','SignedIdentifier.php',82],['lib/zend/Zend/Gdata','Query.php',396],['lib/zend/Zend/Rest/Client','Result.php',93],['user/classes/output/myprofile','tree.php',144],['lib/zend/Zend/Server/Reflection/Function','Abstract.php',376],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',70],['lib/zend/Zend/Service/StrikeIron','Decorator.php',59],['course','lib.php',2960],['lib/pear/Net/GeoIP','Location.php',158],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobContainer.php',83],['lib/horde/framework/Horde/Imap/Client','Ids.php',92],['lib/classes/event','base.php',826],['lib/horde/framework/Horde/Support','Stub.php',41],['lib/zend/Zend/XmlRpc/Client','ServerProxy.php',67],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',84],['lib/zend/Zend/Validate','Abstract.php',175],['lib/horde/framework/Horde/Stream','TempString.php',65],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueMessage.php',89],['lib/zend/Zend/Gdata/App','FeedSourceParent.php',121],['lib','modinfolib.php',124],['lib','modinfolib.php',1153],['lib','modinfolib.php',2601],['calendar/tests','rrule_manager_tests.php',521],['lib/htmlpurifier/HTMLPurifier','Token.php',48],['lib/horde/framework/Horde/Mail/Rfc822','List.php',75],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',67],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',85],['lib/classes/message/inbound','handler.php',79],['user/classes/output/myprofile','node.php',106],['lib/classes/plugininfo','mod.php',43],['calendar','lib.php',2042],['lib/horde/framework/Horde/Imap/Client','Url.php',196],['lib/zend/Zend/Service','Twitter.php',216],['lib/zend/Zend/Gdata/App','Base.php',466],['mod/lesson','locallib.php',2031],['lib/horde/framework/Horde','Variables.php',150],['lib/zend/Zend/Gdata/App','BaseMediaSource.php',102],['lib/classes/plugininfo','base.php',168],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',92],['lib/zend/Zend/Service/Nirvanix','Response.php',81],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',85],['lib/horde/framework/Horde/Socket','Client.php',91],['lib','accesslib.php',5235],['lib/zend/Zend/Gdata/App','Feed.php',68],['lib/zend/Zend/Server/Reflection','Class.php',112],['lib/zend/Zend/Service/WindowsAzure/Storage','DynamicTableEntity.php',61],['lib/minify/lib','JSMinPlus.php',1686],['lib/classes/plugininfo','block.php',44],['lib/horde/framework/Horde/Support','Array.php',116],['lib/zend/Zend/Service/WindowsAzure/Storage','TableInstance.php',83],['user/classes/output/myprofile','category.php',185],['lib/horde/framework/Horde','Stream.php',74],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',108],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',56],['lib','adminlib.php',1072],['lib/google/src/Google','Model.php',46],['lib/horde/framework/Horde/Crypt','Blowfish.php',86],['lib/simplepie/library/SimplePie','IRI.php',168],['lib','pagelib.php',756],['lib/alfresco/Service','BaseObject.php',23],['lib/alfresco/Service','Node.php',251],['admin/tool/monitor/classes','subscription.php',54],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobInstance.php',104],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',255],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueInstance.php',79],['lib','navigationlib.php',4993],['lib/mustache/src/Mustache','HelperCollection.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',69],['lib/classes/message','message.php',187],['lib','coursecatlib.php',134],['lib','coursecatlib.php',2829],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',72],['lib/adodb','adodb-active-record.inc.php',269],['lib/horde/framework/Horde/Support','ObjectStub.php',41],['admin/tool/monitor/classes','rule.php',166],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',121]], 25],
'js_init_call': ['js_init_call', 'Ensure that the specified JavaScript function is called from an inline script from page footer. ', [['lib','outputrequirementslib.php',1050]], 95],
'get_lastpage': ['get_lastpage', 'Returns the last page for the lesson or false if there isn\'t one. ', [['mod/lesson','locallib.php',1342]], 1],
'get_default_region': ['get_default_region', 'Get the region name of the region blocks are added to by default ', [['lib','blocklib.php',176]], 6],
'format_time': ['format_time', 'Format a date/time (seconds) as weeks, days, hours etc as needed ', [['lib','moodlelib.php',2060]], 59],
'max_answers': ['max_answers', 'Returns the maximum number of answers for this page given the maximum number of answers permitted by the lesson. ', [['mod/lesson','locallib.php',2940]], 0],
'get_regions': ['get_regions', 'Get an array of all region names on this page where a block may appear ', [['lib','blocklib.php',164]], 16],
'lesson_get_media_html': ['lesson_get_media_html', 'This is a function used to detect media types and generate html code. ', [['mod/lesson','locallib.php',591]], 1],
'has_option': ['has_option', 'Was the given option passed? ', [['','mdeploy.php',443],['mod/lesson','locallib.php',2929]], 8],
'addhelpbutton': ['addhelpbutton', 'Add a help button to element, only one button per element is allowed. ', [['lib','formslib.php',1870]], 612],
'delete_all_overrides': ['delete_all_overrides', 'Deletes all lesson overrides from the database and clears any corresponding calendar events ', [['mod/lesson','locallib.php',1130]], 1],
'rewrite_answers_urls': ['rewrite_answers_urls', 'Rewrite urls in response and optionality answer of a question answer ', [['mod/lesson','locallib.php',2661]], 13],
'display': ['display', '', [['mod/lesson/pagetypes','matching.php',50],['mod/lesson/pagetypes','cluster.php',39],['lib/minify/lib/Minify/Cache','XCache.php',74],['mod/quiz/report/grading','report.php',51],['question/classes/bank','view.php',451],['mod/scorm/report/objectives/classes','report.php',37],['backup/util/ui','base_ui.class.php',169],['lib/minify/lib/Minify/Cache','Memcache.php',85],['lib/minify/lib/Minify/Cache','APC.php',79],['mod/lesson/pagetypes','numerical.php',50],['mod/scorm/report/interactions/classes','report.php',31],['lib/pear/HTML','Common.php',428],['backup/util/ui','import_extensions.php',154],['mod/quiz/report/responses','report.php',51],['mod/quiz/report/statistics','report.php',51],['question/classes/bank','column_base.php',164],['backup/util/ui','restore_ui.class.php',373],['course/format/singleactivity','renderer.php',36],['mod/lesson/pagetypes','endofcluster.php',39],['user/selector','lib.php',205],['backup/util/ui','base_moodleform.class.php',365],['admin/roles/classes','capability_table_with_risks.php',132],['lib','formslib.php',913],['backup/util/ui','restore_ui_stage.class.php',355],['backup/util/ui','restore_ui_stage.class.php',497],['backup/util/ui','restore_ui_stage.class.php',1025],['backup/util/ui','restore_ui_stage.class.php',1112],['mod/lesson/pagetypes','truefalse.php',50],['repository/flickr_public','image.php',149],['mod/scorm/report/basic/classes','report.php',30],['admin/roles/classes','capability_table_base.php',71],['mod/lesson/pagetypes','endofbranch.php',39],['mod/lesson/pagetypes','essay.php',67],['mod/scorm/classes','report.php',39],['mod/quiz/report/overview','report.php',42],['backup/util/ui','backup_ui_stage.class.php',545],['backup/util/ui','backup_ui_stage.class.php',588],['lib/minify/lib/Minify/Cache','ZendPlatform.php',84],['mod/lesson/pagetypes','shortanswer.php',50],['cohort','upload_form.php',316],['mod/scorm/report/graphs/classes','report.php',36],['backup/util/ui','base_ui_stage.class.php',126],['mod/lesson/pagetypes','multichoice.php',87],['lib/minify/lib/Minify/Cache','File.php',72],['admin/roles/classes','define_role_table_advanced.php',603],['mod/lesson/pagetypes','branchtable.php',105]], 297],
'get_lesson': ['get_lesson', 'Returns the lesson this page is associated with ', [['mod/lesson','locallib.php',2388]], 0],
'grade_update': ['grade_update', 'Submit new or update grade; update/create grade_item definition. Grade must have userid specified, rawgrade and feedback with format are optional. rawgrade NULL means \'Not graded\'. Missing property or key means does not change the existing value. ', [['lib','gradelib.php',40]], 27],
'report_answers': ['report_answers', '', [['mod/lesson/pagetypes','matching.php',400],['mod/lesson/pagetypes','numerical.php',190],['mod/lesson','locallib.php',3098],['mod/lesson/pagetypes','truefalse.php',258],['mod/lesson/pagetypes','essay.php',213],['mod/lesson/pagetypes','shortanswer.php',255],['mod/lesson/pagetypes','multichoice.php',365],['mod/lesson/pagetypes','branchtable.php',247]], 1],
'get_page_type_idstring': ['get_page_type_idstring', 'Returns the basic string used to identify a page type provided with an id ', [['mod/lesson','locallib.php',3296]], 2],
'js': ['js', 'Ensure that the specified JavaScript file is linked to from this page. ', [['lib','outputrequirementslib.php',398],['lib/classes','minify.php',31],['grade/report/singleview/classes/local/screen','screen.php',245]], 75],
'has_pages': ['has_pages', 'Checks to see if the lesson has pages ', [['mod/lesson','locallib.php',1605]], 2],
'get': ['get', 'Gets a customer resource if one exists and is owned by the reseller. (customers.get) ', [['lib/google/src/Google/Service','Reseller.php',294],['lib/google/src/Google/Service','Reseller.php',457],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['lib/google/src/Google/Service','Replicapoolupdater.php',275],['lib/zend/Zend/Gdata','Gapps.php',187],['lib/google/src/Google/Service','Fusiontables.php',658],['lib/google/src/Google/Service','Fusiontables.php',823],['lib/google/src/Google/Service','Fusiontables.php',947],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',148],['lib/htmlpurifier/HTMLPurifier','Context.php',36],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','Blogger.php',931],['lib/google/src/Google/Service','Blogger.php',962],['lib/google/src/Google/Service','Blogger.php',1066],['lib/google/src/Google/Service','Blogger.php',1184],['lib/google/src/Google/Service','Blogger.php',1226],['lib/google/src/Google/Service','Blogger.php',1365],['lib/google/src/Google/Service','Blogger.php',1448],['lib/google/src/Google/Service','Blogger.php',1669],['lib/google/src/Google/Service','Doubleclicksearch.php',256],['lib/google/src/Google/Service','Doubleclicksearch.php',380],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','AdExchangeBuyer.php',349],['lib/google/src/Google/Service','AdExchangeBuyer.php',419],['lib/google/src/Google/Service','AdExchangeBuyer.php',460],['lib/google/src/Google/Service','AdExchangeBuyer.php',528],['lib/google/src/Google/Service','AdExchangeBuyer.php',620],['lib/google/src/Google/Service','Manager.php',255],['lib/google/src/Google/Service','Manager.php',334],['lib/google/src/Google/Service','Reports.php',374],['lib/google/src/Google/Service','Reports.php',408],['lib/portfolio','exporter.php',134],['lib','webdavlib.php',264],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','Gmail.php',702],['lib/google/src/Google/Service','Gmail.php',859],['lib/google/src/Google/Service','Gmail.php',952],['lib/google/src/Google/Service','Gmail.php',1118],['lib/google/src/Google/Service','Gmail.php',1162],['lib/google/src/Google/Service','Plus.php',352],['lib/google/src/Google/Service','Plus.php',427],['lib/google/src/Google/Service','Plus.php',547],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/testing/classes','nasty_strings.php',73],['lib/google/src/Google/Service','Mirror.php',437],['lib/google/src/Google/Service','Mirror.php',522],['lib/google/src/Google/Service','Mirror.php',562],['lib/google/src/Google/Service','Mirror.php',673],['lib/google/src/Google/Service','Mirror.php',785],['lib/google/src/Google/Service','Genomics.php',645],['lib/google/src/Google/Service','Genomics.php',744],['lib/google/src/Google/Service','Genomics.php',891],['lib/google/src/Google/Service','Genomics.php',997],['lib/google/src/Google/Service','Genomics.php',1187],['lib/google/src/Google/Service','Genomics.php',1269],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1430],['lib/google/src/Google/Service','Urlshortener.php',108],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Dfareporting.php',421],['lib/google/src/Google/Service','Dfareporting.php',484],['lib/google/src/Google/Service','Dfareporting.php',626],['lib/google/src/Google/Service','Dfareporting.php',675],['lib/google/src/Google/Service','PlusDomains.php',467],['lib/google/src/Google/Service','PlusDomains.php',592],['lib/google/src/Google/Service','PlusDomains.php',718],['lib/google/src/Google/Service','PlusDomains.php',812],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','Licensing.php',236],['lib/google/src/Google/Service','Drive.php',1277],['lib/google/src/Google/Service','Drive.php',1313],['lib/google/src/Google/Service','Drive.php',1366],['lib/google/src/Google/Service','Drive.php',1476],['lib/google/src/Google/Service','Drive.php',1550],['lib/google/src/Google/Service','Drive.php',1706],['lib/google/src/Google/Service','Drive.php',1946],['lib/google/src/Google/Service','Drive.php',2016],['lib/google/src/Google/Service','Drive.php',2147],['lib/google/src/Google/Service','Drive.php',2241],['lib/google/src/Google/Service','Drive.php',2309],['lib/google/src/Google/Service','Drive.php',2428],['lib/google/src/Google/Service','Books.php',1343],['lib/google/src/Google/Service','Books.php',1512],['lib/google/src/Google/Service','Books.php',1564],['lib/google/src/Google/Service','Books.php',1639],['lib/google/src/Google/Service','Books.php',1819],['lib/google/src/Google/Service','Books.php',1960],['lib/google/src/Google/Service','Books.php',2077],['lib/google/src/Google/Service','Books.php',2175],['lib/google/src/Google/Service','Books.php',2207],['lib/zend/Zend/Gdata','App.php',847],['lib/google/src/Google/Service','AdExchangeSeller.php',443],['lib/google/src/Google/Service','AdExchangeSeller.php',551],['lib/google/src/Google/Service','AdExchangeSeller.php',665],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['lib/google/src/Google/Cache','Memcache.php',72],['lib/google/src/Google/Service','Bigquery.php',533],['lib/google/src/Google/Service','Bigquery.php',633],['lib/google/src/Google/Service','Bigquery.php',838],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['cache','disabledlib.php',55],['lib/zend/Zend/Server','Cache.php',78],['lib/google/src/Google/Service','Groupssettings.php',107],['cache/stores/memcached','lib.php',285],['lib/google/src/Google/Service','Coordinate.php',476],['lib/google/src/Google/Service','Coordinate.php',642],['lib/zend/Zend','Registry.php',130],['lib/google/src/Google/Service','Webmasters.php',314],['lib/google/src/Google/Service','Webmasters.php',403],['lib/google/src/Google/Service','Webmasters.php',479],['lib/google/src/Google/Service','Autoscaler.php',330],['lib/google/src/Google/Service','Autoscaler.php',444],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/google/src/Google/Service','ShoppingContent.php',567],['lib/google/src/Google/Service','ShoppingContent.php',675],['lib/google/src/Google/Service','ShoppingContent.php',749],['lib/google/src/Google/Service','ShoppingContent.php',857],['lib/google/src/Google/Service','ShoppingContent.php',985],['lib/google/src/Google/Service','ShoppingContent.php',1062],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/editor/tinymce/classes','plugin.php',447],['mod/lesson','locallib.php',3239],['lib/horde/framework/Horde','Variables.php',135],['lib/google/src/Google/Service','SQLAdmin.php',528],['lib/google/src/Google/Service','SQLAdmin.php',664],['lib/google/src/Google/Service','SQLAdmin.php',872],['lib/google/src/Google/Service','SQLAdmin.php',941],['lib/google/src/Google/Service','Fitness.php',363],['lib/google/src/Google/Service','Fitness.php',489],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1063],['lib/google/src/Google/Service','TagManager.php',1155],['lib/google/src/Google/Service','TagManager.php',1248],['lib/google/src/Google/Service','TagManager.php',1341],['lib/google/src/Google/Service','TagManager.php',1434],['lib/google/src/Google/Service','TagManager.php',1528],['lib/google/src/Google/Service','TagManager.php',1622],['lib/google/src/Google/Service','TagManager.php',1772],['lib/google/src/Google/Service','Directory.php',1315],['lib/google/src/Google/Service','Directory.php',1383],['lib/google/src/Google/Service','Directory.php',1490],['lib/google/src/Google/Service','Directory.php',1656],['lib/google/src/Google/Service','Directory.php',1783],['lib/google/src/Google/Service','Directory.php',1853],['lib/google/src/Google/Service','Directory.php',1949],['lib/google/src/Google/Service','Directory.php',2056],['lib/google/src/Google/Service','Directory.php',2160],['lib/google/src/Google/Service','Directory.php',2218],['lib/google/src/Google/Service','Directory.php',2493],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['cache/stores/static','lib.php',220],['question/engine','states.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/google/src/Google/Service','AppState.php',170],['lib/google/src/Google/Service','Taskqueue.php',263],['lib/google/src/Google/Service','Taskqueue.php',307],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Container.php',364],['lib/google/src/Google/Service','Container.php',411],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','AndroidPublisher.php',1194],['lib/google/src/Google/Service','AndroidPublisher.php',1296],['lib/google/src/Google/Service','AndroidPublisher.php',1437],['lib/google/src/Google/Service','AndroidPublisher.php',1500],['lib/google/src/Google/Service','AndroidPublisher.php',1723],['lib/google/src/Google/Service','AndroidPublisher.php',1811],['lib/google/src/Google/Service','AndroidPublisher.php',1875],['lib/google/src/Google/Service','AndroidPublisher.php',1987],['lib/google/src/Google/Service','AndroidPublisher.php',2112],['lib/google/src/Google/Service','AndroidPublisher.php',2182],['lib/zend/Zend','Date.php',516],['lib/google/src/Google/Service','AdSenseHost.php',644],['lib/google/src/Google/Service','AdSenseHost.php',685],['lib/google/src/Google/Service','AdSenseHost.php',750],['lib/google/src/Google/Service','AdSenseHost.php',917],['lib/google/src/Google/Service','AdSenseHost.php',1025],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Games.php',1219],['lib/google/src/Google/Service','Games.php',1338],['lib/google/src/Google/Service','Games.php',1440],['lib/google/src/Google/Service','Games.php',1698],['lib/google/src/Google/Service','Games.php',1805],['lib/google/src/Google/Service','Games.php',1947],['lib/google/src/Google/Service','Games.php',2081],['lib','filelib.php',3341],['lib','filelib.php',3589],['lib','oauthlib.php',302],['lib/google/src/Google/Service','MapsEngine.php',1529],['lib/google/src/Google/Service','MapsEngine.php',1708],['lib/google/src/Google/Service','MapsEngine.php',2005],['lib/google/src/Google/Service','MapsEngine.php',2267],['lib/google/src/Google/Service','MapsEngine.php',2359],['lib/google/src/Google/Service','MapsEngine.php',2665],['lib/google/src/Google/Service','MapsEngine.php',2926],['lib/google/src/Google/Service','MapsEngine.php',3117],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','SiteVerification.php',151],['lib/horde/framework/Horde/Support','Array.php',30],['lib/google/src/Google/Service','Prediction.php',275],['cache/stores/session','lib.php',225],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Compute.php',2828],['lib/google/src/Google/Service','Compute.php',2911],['lib/google/src/Google/Service','Compute.php',3050],['lib/google/src/Google/Service','Compute.php',3155],['lib/google/src/Google/Service','Compute.php',3240],['lib/google/src/Google/Service','Compute.php',3377],['lib/google/src/Google/Service','Compute.php',3478],['lib/google/src/Google/Service','Compute.php',3558],['lib/google/src/Google/Service','Compute.php',3676],['lib/google/src/Google/Service','Compute.php',3741],['lib/google/src/Google/Service','Compute.php',3876],['lib/google/src/Google/Service','Compute.php',3957],['lib/google/src/Google/Service','Compute.php',4132],['lib/google/src/Google/Service','Compute.php',4306],['lib/google/src/Google/Service','Compute.php',4355],['lib/google/src/Google/Service','Compute.php',4421],['lib/google/src/Google/Service','Compute.php',4486],['lib/google/src/Google/Service','Compute.php',4559],['lib/google/src/Google/Service','Compute.php',4611],['lib/google/src/Google/Service','Compute.php',4675],['lib/google/src/Google/Service','Compute.php',4756],['lib/google/src/Google/Service','Compute.php',4822],['lib/google/src/Google/Service','Compute.php',4943],['lib/google/src/Google/Service','Compute.php',5085],['lib/google/src/Google/Service','Compute.php',5244],['lib/google/src/Google/Service','Compute.php',5376],['lib/google/src/Google/Service','Compute.php',5428],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Calendar.php',900],['lib/google/src/Google/Service','Calendar.php',1053],['lib/google/src/Google/Service','Calendar.php',1241],['lib/google/src/Google/Service','Calendar.php',1337],['lib/google/src/Google/Service','Calendar.php',1379],['lib/google/src/Google/Service','Calendar.php',1780],['lib/google/src/Google/Service','Analytics.php',1891],['lib/google/src/Google/Service','Analytics.php',1940],['lib/google/src/Google/Service','Analytics.php',1987],['lib/google/src/Google/Service','Analytics.php',2309],['lib/google/src/Google/Service','Analytics.php',2429],['lib/google/src/Google/Service','Analytics.php',2522],['lib/google/src/Google/Service','Analytics.php',2648],['lib/google/src/Google/Service','Analytics.php',2867],['lib/google/src/Google/Service','Analytics.php',3004],['lib/google/src/Google/Service','Analytics.php',3095],['lib/google/src/Google/Service','Analytics.php',3197],['lib/google/src/Google/Service','Analytics.php',3308],['lib/google/src/Google/Service','Tasks.php',322],['lib/google/src/Google/Service','Tasks.php',441],['lib/behat/classes','behat_context_helper.php',66],['backup/cc/cc_lib/gral_lib','cssparser.php',137],['cache/classes','loaders.php',270],['cache/classes','loaders.php',1442],['cache/classes','loaders.php',1749],['cache/stores/mongodb','lib.php',252],['lib/zend/Zend/Service','Audioscrobbler.php',110],['lib/google/src/Google/Service','Oauth2.php',143],['lib/google/src/Google/Service','Oauth2.php',180],['cache/stores/file','lib.php',329],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Storage.php',962],['lib/google/src/Google/Service','Storage.php',1078],['lib/google/src/Google/Service','Storage.php',1244],['lib/google/src/Google/Service','Storage.php',1370],['lib/google/src/Google/Service','Storage.php',1592],['lib/google/src/Google/Cache','Null.php',34],['lib/google/src/Google/Service','AdSense.php',1075],['lib/google/src/Google/Service','AdSense.php',1154],['lib/google/src/Google/Service','AdSense.php',1302],['lib/google/src/Google/Service','AdSense.php',1518],['lib/google/src/Google/Service','AdSense.php',1630],['lib/google/src/Google/Service','AdSense.php',1772],['lib/google/src/Google/Service','AdSense.php',2046],['lib/google/src/Google/Service','Pubsub.php',254],['lib/google/src/Google/Service','Pubsub.php',393],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['lib/google/src/Google/Cache','File.php',45],['lib','navigationlib.php',382],['lib','navigationlib.php',833],['lib','navigationlib.php',2693],['lib','navigationlib.php',3126],['lib/google/src/Google/Service','Dns.php',299],['lib/google/src/Google/Service','Dns.php',385],['lib/google/src/Google/Service','Dns.php',434],['lib/mustache/src/Mustache','HelperCollection.php',81],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapool.php',416],['lib/google/src/Google/Service','Replicapool.php',571],['lib/google/src/Google/Service','Resourceviews.php',350],['lib/google/src/Google/Service','Resourceviews.php',435],['lib','coursecatlib.php',215],['lib/google/src/Google/Cache','Apc.php',50],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163]], 21003],
'get_contents': ['get_contents', 'Returns the contents field for the page properly formatted and with plugin file url\'s converted ', [['mod/lesson','locallib.php',3020]], 14],
'stop_timer': ['stop_timer', 'Updates the timer to the current time then stops it by unsetting the user var ', [['mod/lesson','locallib.php',1583]], 2],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',757]], 262],
'get_page_form': ['get_page_form', 'Fetches an mform that can be used to create/edit an page ', [['mod/lesson','locallib.php',3431]], 2],
'update_effective_access': ['update_effective_access', 'Updates the lesson properties with override information for a user. ', [['mod/lesson','locallib.php',1142]], 5],
'resourcelib_guess_url_mimetype': ['resourcelib_guess_url_mimetype', 'Tries to guess correct mimetype for arbitrary URL ', [['lib','resourcelib.php',140]], 3],
'is_sub_page_of_type': ['is_sub_page_of_type', 'Checks to see if the specified page[id] is a subpage of a type specified in the $types array, until either there are no more pages of we find a type corresponding to that of a type specified in $ends ', [['mod/lesson','locallib.php',1882]], 3],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'out': ['out', 'Returns the string ', [['lib','moodlelib.php',9451],['lib','weblib.php',547],['lib','tablelib.php',1526],['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['report/loglive/classes','table_log_ajax.php',37]], 549],
'freeze': ['freeze', 'Freeze the element so that only its value is returned ', [['lib/pear/HTML/QuickForm','reset.php',58],['lib/form','text.php',67],['lib/form','cancel.php',104],['lib/form','submit.php',94],['lib/pear/HTML/QuickForm','button.php',59],['lib/pear/HTML/QuickForm','element.php',190],['lib/pear/HTML','QuickForm.php',1543],['lib/pear/HTML/QuickForm','file.php',103],['lib/pear/HTML/QuickForm','submit.php',57],['lib/pear/HTML/QuickForm','hidden.php',58],['lib/pear/HTML/QuickForm','group.php',547],['lib/pear/HTML/QuickForm','xbutton.php',68],['lib/pear/HTML/QuickForm','image.php',105]], 50],
'lesson_menu_block_contents': ['lesson_menu_block_contents', 'If left menu is turned on, then this will print the menu in a block ', [['mod/lesson','locallib.php',511]], 1],
'__isset': ['__isset', '', [['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',170],['lib/zend/Zend/Rest/Client','Result.php',144],['course','lib.php',2970],['lib/pear/Net/GeoIP','Location.php',187],['lib/classes/event','base.php',859],['lib/horde/framework/Horde/Support','Stub.php',53],['lib','modinfolib.php',140],['lib','modinfolib.php',1193],['lib','modinfolib.php',2569],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',115],['calendar','lib.php',2061],['lib/zend/Zend/Gdata/App','Base.php',515],['mod/lesson','locallib.php',2047],['lib/horde/framework/Horde','Variables.php',111],['lib/zend/Zend/Gdata/App','BaseMediaSource.php',149],['lib','accesslib.php',5254],['lib/horde/framework/Horde/Support','Array.php',128],['lib','adminlib.php',1102],['lib/google/src/Google','Model.php',272],['lib/simplepie/library/SimplePie','IRI.php',221],['lib/mustache/src/Mustache','HelperCollection.php',99],['lib','coursecatlib.php',158],['lib','coursecatlib.php',2819],['lib/horde/framework/Horde/Support','ObjectStub.php',57]], 2],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1331]], 365],
'create': ['create', 'Creates a new 2048 bit RSA key pair and returns a unique ID that can be used to reference this key pair when launching new instances. ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',39],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',271],['repository/filesystem','lib.php',283],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',39],['lib/google/src/Google/Service','Gmail.php',670],['lib/google/src/Google/Service','Gmail.php',827],['course','lib.php',2874],['lib/classes/event','base.php',139],['lib/google/src/Google/Service','Genomics.php',618],['lib/google/src/Google/Service','Genomics.php',717],['lib/google/src/Google/Service','Genomics.php',850],['lib/google/src/Google/Service','Genomics.php',1313],['lib','modinfolib.php',1747],['calendar','lib.php',2651],['lib/zend/Zend/Service/Amazon','Sqs.php',82],['lib','weblib.php',3048],['mod/lesson','locallib.php',1013],['mod/lesson','locallib.php',2166],['mod/lesson','locallib.php',3203],['lib/google/src/Google/Service','Fitness.php',340],['lib/google/src/Google/Service','TagManager.php',1034],['lib/google/src/Google/Service','TagManager.php',1124],['lib/google/src/Google/Service','TagManager.php',1217],['lib/google/src/Google/Service','TagManager.php',1310],['lib/google/src/Google/Service','TagManager.php',1403],['lib/google/src/Google/Service','TagManager.php',1497],['lib/google/src/Google/Service','TagManager.php',1591],['lib/google/src/Google/Service','TagManager.php',1742],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Container.php',314],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['repository','lib.php',206],['repository','lib.php',1960],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',555],['lib/google/src/Google/Service','Games.php',1648],['lib/google/src/Google/Service','Games.php',2012],['lib/google/src/Google/Service','MapsEngine.php',1676],['lib/google/src/Google/Service','MapsEngine.php',1976],['lib/google/src/Google/Service','MapsEngine.php',2252],['lib/google/src/Google/Service','MapsEngine.php',2329],['lib/google/src/Google/Service','MapsEngine.php',2897],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Pubsub.php',219],['lib/google/src/Google/Service','Pubsub.php',364],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/simplepie/library/SimplePie','Registry.php',153],['lib','navigationlib.php',266],['lib/google/src/Google/Service','Dns.php',282],['lib/google/src/Google/Service','Dns.php',355],['lib','coursecatlib.php',328],['mod/quiz/classes','structure.php',65]], 3074],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',605]], 2167],
'get_sub_pages_of': ['get_sub_pages_of', 'Finds all pages that appear to be a subtype of the provided pageid until an end point specified within $ends is encountered or no more pages exist ', [['mod/lesson','locallib.php',1857]], 7],
'get_lastpageid': ['get_lastpageid', 'Returns the id of the last page of this lesson. (nextpageid = 0) ', [['mod/lesson','locallib.php',1385]], 0],
'record_attempt': ['record_attempt', 'Records an attempt at this page ', [['mod/lesson','locallib.php',2406]], 1],
'jumpto_is_correct': ['jumpto_is_correct', 'Determines if a jumpto value is correct or not. ', [['mod/lesson','locallib.php',1668]], 14],
'check_answer': ['check_answer', '', [['mod/lesson/pagetypes','matching.php',159],['mod/lesson/pagetypes','numerical.php',74],['mod/lesson','locallib.php',2901],['mod/lesson/pagetypes','truefalse.php',78],['mod/lesson/pagetypes','essay.php',113],['mod/lesson/pagetypes','shortanswer.php',74],['mod/lesson/pagetypes','multichoice.php',117],['mod/lesson/pagetypes','branchtable.php',160]], 7],
'save_answers_files': ['save_answers_files', 'save editor answers files and update answer record ', [['mod/lesson','locallib.php',2634]], 8],
'lesson_displayleftif': ['lesson_displayleftif', 'Determines if a user can view the left menu.  The determining factor is whether a user has a grade greater than or equal to the lesson setting of displayleftif ', [['mod/lesson','locallib.php',386]], 2],
'add_fake_block': ['add_fake_block', 'Add something that looks like a block, but which isn\'t an actual block_instance, to this page. ', [['lib','blocklib.php',447]], 8],
'load_all_pages': ['load_all_pages', 'Loads ALL of the pages for this lesson ', [['mod/lesson','locallib.php',1654],['mod/lesson','locallib.php',3369]], 23],
'requires_manual_grading': ['requires_manual_grading', 'Informs whether this page type require manual grading or not ', [['mod/lesson','locallib.php',3139],['mod/lesson/pagetypes','essay.php',277]], 2],
'get_displayinmenublock': ['get_displayinmenublock', 'Set to true if this page should display in the menu block ', [['mod/lesson','locallib.php',3042],['mod/lesson/pagetypes','branchtable.php',276]], 0],
'__construct': ['__construct', 'Constructor ', [['lib/jabber/XMPP','Log.php',67],['lib/zend/Zend/Gdata/Books','VolumeFeed.php',41],['lib/markdown','MarkdownExtra.php',51],['lib/zend/Zend/Gdata/Books/Extension','BooksCategory.php',42],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/zend/Zend/Validate','Iban.php',106],['repository/wikimedia','wikimedia.php',35],['lib/lessphp/Tree','Operation.php',19],['lib/alfresco/Service','Version.php',38],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['backup/moodle2','backup_activity_task.class.php',45],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/phpunit/classes','advanced_testcase.php',45],['lib/zend/Zend/Service/DeveloperGarden/Request','RequestAbstract.php',40],['lib','outputlib.php',447],['lib','outputlib.php',2000],['repository/filesystem','lib.php',48],['lib/zend/Zend/XmlRpc/Value','Nil.php',40],['lib/lessphp/Tree','NameValue.php',21],['lib/zend/Zend/Gdata/YouTube','UserProfileEntry.php',283],['lib/zend/Zend/Gdata/Gapps','EmailListRecipientEntry.php',69],['lib/simplepie/library/SimplePie','Restriction.php',81],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes/update','checker.php',50],['lib/adodb','adodb-active-recordx.inc.php',131],['lib/phpexcel/PHPExcel','Calculation.php',1721],['lib/zend/Zend/Gdata/Photos/Extension','NumPhotos.php',50],['availability/classes','info_module.php',40],['lib/zend/Zend/Gdata/Geo/Extension','GmlPos.php',49],['lib/zend/Zend/Gdata/App/Extension','Link.php',49],['lib/zend/Zend/Gdata/Photos/Extension','Access.php',51],['lib/zend/Zend/Server/Reflection','Parameter.php',58],['lib/zend/Zend/Service/DeveloperGarden/Client','ClientAbstract.php',129],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['lib/zend/Zend/Validate/Db','Abstract.php',79],['cache/locks/file','lib.php',66],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',180],['question/type/missingtype','edit_missingtype_form.php',38],['auth/cas/CAS/CAS','Client.php',862],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/zend/Zend/Gdata/Books','VolumeQuery.php',46],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/zend/Zend/XmlRpc','Request.php',92],['lib/zend/Zend/Service/Delicious','Post.php',74],['lib/zend/Zend/Gdata/Extension','FeedLink.php',53],['lib/zend/Zend/Http/Client/Adapter','Socket.php',97],['lib/grade','grade_object.php',80],['lib/zend/Zend/Gdata/YouTube','ContactFeed.php',55],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['lib/google/src/Google/Auth','LoginTicket.php',35],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',84],['lib/zend/Zend/Service/DeveloperGarden/SecurityTokenServer','Cache.php',59],['question/type/randomsamatch','question.php',114],['lib/zend/Zend/Service/WindowsAzure/Storage','SignedIdentifier.php',49],['lib/zend/Zend/Amf/Parse','OutputStream.php',40],['blocks','moodleblock.class.php',111],['lib/simplepie','autoloader.php',62],['mod/scorm','renderer.php',129],['lib/zend/Zend/Gdata/Extension','Who.php',64],['lib/zend/Zend/Gdata/Gapps','EmailListQuery.php',54],['lib/zend/Zend/Service/Simpy','LinkSet.php',47],['repository/flickr_public','lib.php',49],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Replicapoolupdater.php',47],['admin/tool/generator/classes','site_backend.php',58],['mod/assign','assignmentplugin.php',50],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['mod/lti/service/profile/classes/local/resource','profile.php',43],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['lib/lessphp/Tree','Anonymous.php',21],['user','renderer.php',186],['lib/zend/Zend/Service/WindowsAzure','Storage.php',170],['lib/google/src/Google','Service.php',26],['lib/lessphp/Tree','Url.php',17],['webservice','lib.php',745],['webservice','lib.php',841],['webservice','lib.php',1120],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',270],['lib/zend/Zend/Gdata/YouTube/Extension','MediaContent.php',55],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib/tests','completionlib_test.php',863],['lib/zend/Zend/Service/Amazon','Accessories.php',44],['lib/zend/Zend/Validate/Barcode','Code39ext.php',47],['mod/assign/feedback/editpdf/classes','comment.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',46],['backup/moodle2','backup_settingslib.php',42],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateListRequest.php',46],['lib/zend/Zend/XmlRpc/Value','Base64.php',40],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['lib/zend/Zend/Service/WindowsAzure/Storage','Blob.php',117],['lib/lessphp','Parser.php',75],['lib/zend/Zend/Service/DeveloperGarden/Response/IpLocation','LocateIPResponse.php',47],['lib/zend/Zend/Gdata','Query.php',72],['lib/zend/Zend/Service/Technorati','TagResultSet.php',57],['lib/zend/Zend/Rest/Client','Result.php',42],['lib/lessphp/Tree','Call.php',19],['lib/zend/Zend/Server/Method','Callback.php',59],['lib/minify/lib/Minify/JS','ClosureCompiler.php',38],['mod/workshop/backup/moodle1','lib.php',308],['lib/zend/Zend/Gdata/YouTube','ActivityFeed.php',54],['admin/tool/log/store/database/classes/log','store.php',47],['lib/zend/Zend/Validate','Alpha.php',65],['lib/zend/Zend/Gdata','Gapps.php',109],['lib/zend/Zend/Service/Flickr','Result.php',174],['question/type/multianswer','edit_multianswer_form.php',58],['mod/assign/feedback/file','renderable.php',44],['lib/horde/framework/Horde','Secret.php',48],['lib/zend/Zend/Gdata/Photos/Extension','AlbumId.php',51],['lib/lessphp/SourceMap','Base64VLQ.php',67],['lib/lessphp/Tree/Mixin','Call.php',14],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/google/src/Google/Service','Fusiontables.php',48],['grade/report/singleview','lib.php',69],['lib/classes/lock','lock.php',55],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['blog','locallib.php',71],['blog','locallib.php',581],['blog','locallib.php',849],['blog','locallib.php',894],['blog','locallib.php',953],['blog','locallib.php',1004],['blog','locallib.php',1028],['blog','locallib.php',1038],['blog','locallib.php',1050],['blog','locallib.php',1071],['lib/zend/Zend/Gdata/Exif/Extension','Flash.php',49],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',61],['admin/webservice','lib.php',38],['lib/zend/Zend/Validate/File','FilesSize.php',60],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',46],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['lib/zend/Zend/Validate','Int.php',53],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['lib/zend/Zend/Soap','Server.php',146],['lib/zend/Zend/Gdata/Photos','PhotoEntry.php',215],['lib/zend/Zend/Service/Yahoo','LocalResult.php',111],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','GetAccountBalance.php',40],['badges/lib','backpacklib.php',40],['lib/zend/Zend/Service/Yahoo','Result.php',77],['lib/form','filemanager.php',306],['lib/lessphp/Tree','Condition.php',18],['lib/pear/PEAR','Exception.php',107],['lib/zend/Zend/Gdata/YouTube/Extension','Racy.php',45],['question/classes/bank','view.php',70],['lib/adodb','adodb.inc.php',2790],['lib/adodb','adodb.inc.php',2865],['lib/zend/Zend/Gdata/App/Extension','Text.php',45],['question/engine/upgrade/tests','helper.php',45],['lib/zend/Zend/Validate/Barcode','Ean5.php',47],['blocks/private_files','renderer.php',83],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/classes','useragent.php',115],['lib/zend/Zend/Gdata/Photos/Extension','CommentCount.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/zend/Zend/Gdata/Spreadsheets/Extension','ColCount.php',49],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/portfolio','exceptions.php',50],['lib/zend/Zend/Gdata/Calendar/Extension','QuickAdd.php',45],['lib/xmldb','xmldb_object.php',55],['lib/zend/Zend/Service','SlideShare.php',283],['webservice/amf','introspector.php',52],['question/behaviour/adaptive','behaviour.php',310],['question/behaviour','behaviourtypebase.php',133],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['course','renderer.php',52],['lib/zend/Zend/Validate','Hostname.php',315],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',249],['lib/zend/Zend/Amf','Server.php',134],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/zend/Zend/Http','Cookie.php',98],['lib/lessphp/Tree','Extend.php',28],['lib/zend/Zend/Validate','Barcode.php',75],['lib/zend/Zend/XmlRpc/Value','BigInteger.php',47],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/google/src/Google/Service','QPXExpress.php',39],['lib/zend/Zend/Server/Reflection/Function','Abstract.php',105],['lib/phpexcel/PHPExcel/Style','Color.php',72],['lib/zend/Zend/Validate/File','Hash.php',60],['backup/util/settings/root','root_backup_setting.class.php',34],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/zend/Zend/Gdata/Photos/Extension','QuotaCurrent.php',50],['lib/zend/Zend/Service/Nirvanix/Namespace','Base.php',76],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['lib/zend/Zend/Service/Technorati','DailyCountsResult.php',60],['lib/zend/Zend/Rest','Server.php',102],['lib/zend/Zend/Gdata/Photos','UserFeed.php',106],['lib/tcpdf/include/barcodes','pdf417.php',523],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/zend/Zend/Gdata/YouTube/Extension','VideoId.php',44],['lib/google/src/Google/Service','Blogger.php',50],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['lib/zend/Zend/Gdata/App/Extension','Published.php',43],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',129],['lib/zend/Zend/Gdata/Photos','AlbumEntry.php',193],['lib/zend/Zend/Gdata/Docs','DocumentListFeed.php',56],['lib/zend/Zend/Gdata/App/Extension','Icon.php',43],['lib/portfolio','plugin.php',445],['lib/zend/Zend/Gdata/Extension','OpenSearchItemsPerPage.php',44],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['lib/zend/Zend/Service/Yahoo','WebResult.php',83],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['lib/google/src/Google/Service','AdExchangeBuyer.php',46],['lib/dtl','file_xml_database_exporter.php',36],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/zend/Zend/Gdata/YouTube/Extension','Token.php',44],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',87],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',47],['lib/xmldb','xmldb_field.php',84],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',126],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceStatusRequest.php',65],['lib/google/src/Google/Service','Manager.php',57],['lib/zend/Zend/Service/Amazon','Offer.php',79],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['lib/zend/Zend/Gdata/App','FeedEntryParent.php',129],['lib/zend/Zend/Service/Technorati','KeyInfoResult.php',61],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['webservice/rest','lib.php',47],['lib/zend/Zend/Service/StrikeIron','Decorator.php',47],['lib/google/src/Google/Http','Batch.php',38],['lib/google/src/Google/Service','Reports.php',47],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['lib/zend/Zend/Gdata/Media/Extension','MediaKeywords.php',43],['repository/url','lib.php',46],['lib','xmlize.php',31],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/filebrowser','file_info_context_system.php',37],['lib/zend/Zend/Service/Amazon','Abstract.php',74],['lib/zend/Zend/Server','Definition.php',43],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/zend/Zend/Amf/Util','BinaryStream.php',53],['lib/portfolio','exporter.php',113],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/zend/Zend/Gdata/YouTube','SubscriptionFeed.php',55],['lib/alfresco/Service','SpacesStore.php',28],['repository/recent','lib.php',39],['lib/zend/Zend/Service/DeveloperGarden/IpLocation','IpAddress.php',59],['lib/zend/Zend/Validate','Regex.php',62],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',135],['lib/phpexcel/PHPExcel','ReferenceHelper.php',65],['lib','webdavlib.php',84],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['auth/cas/CAS/CAS','AuthenticationException.php',53],['lib/zend/Zend/Gdata/Gapps','NicknameQuery.php',54],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',36],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['lib/horde/framework/Horde','Domhtml.php',53],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/google/src/Google/Service','Customsearch.php',38],['lib/zend/Zend/Gdata/App','MediaFileSource.php',54],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/lessphp/Tree','Comment.php',17],['availability/tests/fixtures','mock_info.php',40],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['backup/util/ui','base_ui.class.php',84],['lib/phpexcel/PHPExcel','DocumentSecurity.php',73],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['backup/cc/cc_lib','cc_converter_lti.php',29],['lib/zend/Zend/Gdata/YouTube/Extension','Position.php',44],['lib/zend/Zend/Service/WindowsAzure/Credentials','CredentialsAbstract.php',77],['lib/zend/Zend/Soap','AutoDiscover.php',94],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['lib/phpexcel/PHPExcel','IOFactory.php',77],['lib/zend/Zend/Gdata/App/Extension','Email.php',43],['lib/zend/Zend/Gdata/Media/Extension','MediaHash.php',45],['lib/zend/Zend/Gdata/App/Extension','Element.php',42],['lib/google/src/Google/Service','Gmail.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['repository/dropbox','lib.php',49],['lib/minify/lib/Minify','Source.php',43],['backup/util/dbops','backup_dbops.class.php',37],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/google/src/Google/Service','Spectrum.php',38],['files','renderer.php',1080],['lib/zend/Zend/Validate/Barcode','Ean2.php',47],['course','lib.php',2932],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/zend/Zend/Service/Simpy','Watchlist.php',89],['lib/phpexcel/PHPExcel','Style.php',101],['lib/zend/Zend/Gdata/YouTube/Extension','CountHint.php',44],['lib/minify/lib/Minify/Cache','Memcache.php',22],['auth/db','auth.php',36],['lib/zend/Zend/Gdata/Gapps','UserQuery.php',54],['admin/roles/classes','assign_user_selector_base.php',40],['lib/zend/Zend/Gdata/Exif/Extension','Model.php',49],['lib/zend/Zend/Gdata/YouTube','PlaylistListFeed.php',55],['lib/zend/Zend/Gdata/Docs','DocumentListEntry.php',42],['mod/quiz/tests','repaginate_test.php',39],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['lib/zend/Zend/Service/Twitter','Search.php',70],['lib/zend/Zend/Server/Method','Parameter.php',59],['lib/phpunit/classes','basic_testcase.php',39],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobContainer.php',50],['lib/zend/Zend/Service/DeveloperGarden/Response/LocalSearch','LocalSearchResponse.php',50],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['mod/wiki/parser/markups','html.php',18],['lib/google/src/Google/Service','Mirror.php',49],['lib/classes/event','base.php',114],['lib/alfresco/Service','Repository.php',36],['lib/zend/Zend/Service/Technorati','CosmosResult.php',84],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',42],['lib/zend/Zend/Service/Yahoo','PageDataResult.php',47],['lib/zend/Zend/Service/WindowsAzure/Storage','Table.php',99],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceTemplateRequest.php',60],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',775],['lib/tcpdf','tcpdf_parser.php',92],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/zend/Zend/Gdata','MimeBodyString.php',49],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',55],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',92],['lib/google/src/Google/Http','MediaFileUpload.php',73],['lib/zend/Zend/XmlRpc/Client','ServerProxy.php',54],['lib','listlib.php',82],['lib','listlib.php',485],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/zend/Zend/Gdata/Health','ProfileFeed.php',49],['lib/google/src/Google/Service','Genomics.php',60],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/zend/Zend/Server/Reflection','Method.php',51],['lib/tests','medialib_test.php',631],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['lib/zend/Zend/Soap/Client','DotNet.php',43],['admin/roles/classes','allow_role_page.php',37],['backup/util/dbops','restore_dbops.class.php',1755],['lib/zend/Zend/Service/Yahoo','NewsResult.php',97],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['webservice/rest','locallib.php',40],['lib/simplepie/library/SimplePie','Sanitize.php',75],['lib','uploadlib.php',40],['lib/zend/Zend/Gdata','Health.php',109],['lib','questionlib.php',1269],['lib','questionlib.php',1513],['lib/dml','oci_native_moodle_recordset.php',34],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveParticipantRequest.php',53],['lib/zend/Zend/XmlRpc/Value','String.php',38],['lib/zend/Zend/Gdata/Calendar/Extension','AccessLevel.php',45],['lib/ddl','database_manager.php',48],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CreateConferenceTemplateRequest.php',60],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib/dtl','database_exporter.php',55],['mod/workshop/form/accumulative','lib.php',99],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib/zend/Zend/Validate','Float.php',53],['lib/zend/Zend/Gdata/Gapps/Extension','EmailList.php',59],['cache/classes','interfaces.php',473],['lib/zend/Zend/Gdata/App/Extension','Edited.php',43],['lib/zend/Zend/Gdata/Gapps','UserEntry.php',103],['lib/lessphp/Tree','Element.php',19],['lib','moodlelib.php',9143],['lib','moodlelib.php',9354],['repository/picasa','lib.php',41],['webservice/soap','lib.php',42],['lib/zend/Zend/Gdata/Calendar','EventEntry.php',71],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',98],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/zend/Zend/Service/WindowsAzure/RetryPolicy','RetryN.php',56],['lib/dml','moodle_temptables.php',51],['lib/zend/Zend/Gdata/Media/Extension','MediaContent.php',116],['lib/zend/Zend/Gdata/Gapps','EmailListEntry.php',80],['admin/roles/classes','allow_assign_page.php',31],['lib/zend/Zend/Gdata','Books.php',80],['lib/zend/Zend/Amf/Value','MessageHeader.php',64],['lib/zend/Zend/Validate','GreaterThan.php',59],['lib/zend/Zend/Gdata/YouTube/Extension','PlaylistId.php',44],['calendar/classes','rrule_manager.php',182],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',45],['lib/zend/Zend/Service/ReCaptcha','Response.php',53],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',106],['lib/zend/Zend/Amf/Value/Messaging','RemotingMessage.php',58],['lib/tcpdf','tcpdf.php',1822],['lib/zend/Zend/Gdata/YouTube/Extension','Username.php',44],['lib/zend/Zend/Gdata/Photos/Extension','Version.php',51],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/zend/Zend/Service/WindowsAzure/Storage','Batch.php',77],['lib/mustache/src/Mustache','Engine.php',61],['lib/xmldb','xmldb_structure.php',40],['lib/zend/Zend/Gdata/Photos','TagEntry.php',61],['webservice/amf','locallib.php',41],['webservice/amf','locallib.php',60],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['question/type/numerical/tests','form_test.php',40],['lib/google/src/Google/Service','IdentityToolkit.php',38],['comment','locallib.php',39],['lib/zend/Zend/Gdata/Extension','Comments.php',50],['lib/google/src/Google/Service','Resource.php',60],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/zend/Zend/Gdata/YouTube/Extension','Recorded.php',44],['lib/zend/Zend/Amf/Request','Http.php',46],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['question/engine/upgrade','behaviourconverters.php',78],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantDetail.php',62],['repository/s3','lib.php',39],['lib/minify/lib/MrClay','Cli.php',74],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/zend/Zend/Gdata/App','HttpException.php',51],['lib/zend/Zend/Soap/Client','Common.php',40],['lib/google/src/Google/Service','Dfareporting.php',45],['lib/lessphp/Output','Mapped.php',39],['lib/classes/output','notification.php',66],['lib/google/src/Google/Service','PlusDomains.php',72],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/editor/tinymce','adminlib.php',36],['lib/zend/Zend/Service/Amazon/Ec2','Exception.php',41],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',52],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',846],['lib/xmldb','xmldb_key.php',43],['user/filters','checkbox.php',51],['lib/phpexcel/PHPExcel/Reader','SYLK.php',75],['question/type/numerical','questiontype.php',507],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/zend/Zend/Gdata/App/Extension','Control.php',50],['lib/minify/lib','FirePHP.php',189],['lib/lessphp/Tree/Mixin','Definition.php',18],['lib/zend/Zend/Service/Yahoo','LocalResultSet.php',61],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['admin/tool/langimport/classes','controller.php',48],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['lib/horde/framework/Horde/Stream','String.php',27],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',454],['lib/horde/framework/Horde/Stream','Temp.php',25],['lib/alfresco/Service','VersionHistory.php',34],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceSchedule.php',81],['mod/quiz/classes','repaginate.php',49],['lib/zend/Zend/Validate','Isbn.php',65],['lib/zend/Zend/Service/Amazon','Image.php',55],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['lib/classes/lock','db_record_lock_factory.php',61],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/zend/Zend/Gdata/Spreadsheets/Extension','Cell.php',76],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['lib/horde/framework/Horde/Text','Flowed.php',75],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/zend/Zend/Gdata/Gapps/Extension','Login.php',111],['mod/workshop/form/rubric','lib.php',105],['cohort','locallib.php',37],['cohort','locallib.php',101],['lib/zend/Zend/XmlRpc/Value','DateTime.php',53],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueMessage.php',52],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/zend/Zend/Amf/Parse','Serializer.php',40],['lib/google/src/Google/Service','GroupsMigration.php',38],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['lib/zend/Zend/Gdata/Gapps','ServiceException.php',61],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/zend/Zend/XmlRpc','Fault.php',100],['lib/zend/Zend/Gdata','Photos.php',124],['question/type/calculated','datasetdefinitions_form.php',53],['lib/phpexcel/PHPExcel/Reader','Excel5.php',424],['question/type/shortanswer','question.php',43],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/zend/Zend/Service','LiveDocx.php',67],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/google/src/Google/Auth','AppIdentity.php',38],['lib/zend/Zend/Gdata/Exif/Extension','FocalLength.php',49],['lib/zend/Zend/Gdata/App/Extension','Id.php',43],['lib/zend/Zend/Gdata/Books/Extension','PreviewLink.php',42],['mod/chat','locallib.php',179],['mod/chat','locallib.php',227],['lib/google/src/Google/Service','Licensing.php',38],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['lib/zend/Zend/Server/Method','Definition.php',64],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetParticipantStatusRequest.php',53],['question/classes/bank','column_base.php',44],['lib/zend/Zend/XmlRpc/Server','Fault.php',67],['lib/zend/Zend/Amf/Value/Messaging','AcknowledgeMessage.php',40],['grade/report/singleview/classes/local/ui','range.php',38],['lib/zend/Zend/Gdata/Books/Extension','Viewability.php',45],['mod/book','locallib.php',405],['lib/zend/Zend/XmlRpc/Value','Array.php',39],['lib/zend/Zend/Service/Technorati','Result.php',63],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceTemplateRequest.php',46],['lib/zend/Zend/Gdata/Exif/Extension','Exposure.php',49],['lib/zend/Zend/Gdata/Exif','Feed.php',58],['question/type/randomsamatch/tests','helper.php',121],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/zend/Zend/Gdata/Spreadsheets','CellEntry.php',49],['lib/zend/Zend/Gdata/Photos/Extension','PhotoId.php',49],['lib/zend/Zend/Http/Response','Stream.php',120],['lib','modinfolib.php',429],['lib','modinfolib.php',1680],['lib','modinfolib.php',2516],['lib/dtl','database_importer.php',61],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['lib/zend/Zend/Gdata/Exif/Extension','Iso.php',49],['lib/zend/Zend/Gdata/YouTube','VideoQuery.php',48],['lib/lessphp/Tree','Variable.php',20],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['lib/google/src/Google/Signer','P12.php',33],['lib/lessphp/Tree','DetachedRuleset.php',15],['lib/zend/Zend/Gdata/YouTube','SubscriptionEntry.php',138],['lib/zend/Zend/Http/Client/Adapter','Test.php',81],['','mdeploy.php',120],['lib/ddl','sqlite_sql_generator.php',73],['lib/google/src/Google/Service','Drive.php',70],['mod/quiz/classes','admin_review_setting.php',82],['lib','pdflib.php',161],['lib/zend/Zend/Gdata/YouTube/Extension','Duration.php',45],['mod/quiz/report','attemptsreport_options.php',95],['lib/zend/Zend/Validate/File','Md5.php',60],['backup/util/helper','restore_questions_parser_processor.class.php',42],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/filebrowser','file_info_context_coursecat.php',39],['badges','renderer.php',972],['badges','renderer.php',1013],['badges','renderer.php',1077],['badges','renderer.php',1110],['badges','renderer.php',1136],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['lib/zend/Zend/Gdata/Gapps/Extension','Nickname.php',59],['lib/zend/Zend/Gdata/YouTube/Extension','MediaRating.php',54],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['mnet/xmlrpc','serverlib.php',674],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/simplepie/library/SimplePie','gzdecode.php',186],['lib/jabber/XMPP','Roster.php',48],['lib/classes/dml','recordset_walk.php',64],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',129],['lib/google/src/Google/Service','Books.php',57],['mod/assign/feedback/offline','importgradeslib.php',60],['lib/zend/Zend/Gdata','App.php',165],['lib/pear/Net','GeoIP.php',323],['lib/zend/Zend/Gdata/Photos/Extension','Name.php',50],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['lib/zend/Zend/Gdata/Docs','Query.php',75],['lib/zend/Zend/Gdata/YouTube/Extension','Occupation.php',44],['lib/zend/Zend/Gdata/Exif/Extension','Time.php',49],['cache/tests/fixtures','lib.php',325],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['lib/google/src/Google/Cache','Memcache.php',42],['lib/dml','sqlsrv_native_moodle_database.php',47],['backup/util/structure','backup_optigroup_element.class.php',51],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/simplepie/library/SimplePie','Caption.php',98],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['lib/classes','collator.php',58],['lib/zend/Zend/Service/Delicious','PostList.php',56],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/zend/Zend/Service/Amazon/Ec2','Abstract.php',91],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['mod/workshop/form/numerrors','lib.php',102],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateRequest.php',46],['report/log/classes','table_log.php',52],['lib/zend/Zend/Gdata/YouTube','CommentEntry.php',48],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/zend/Zend/Gdata/YouTube/Extension','Status.php',44],['lib/adodb','adodb-exceptions.inc.php',28],['backup/util/helper','backup_array_iterator.class.php',39],['lib/zend/Zend/Rest','Client.php',54],['lib/zend/Zend/Gdata/YouTube/Extension','Company.php',44],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceTemplateParticipantRequest.php',53],['question/engine','lib.php',770],['question/engine','lib.php',1000],['question/engine','lib.php',1048],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/google/src/Google/Service','Bigquery.php',59],['backup/moodle2','restore_course_task.class.php',41],['lib/zend/Zend/Gdata/Media/Extension','MediaRestriction.php',54],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/phpexcel/PHPExcel/Writer','CSV.php',86],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['cache','disabledlib.php',44],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['webservice/xmlrpc','locallib.php',85],['lib/google/src/Google/Service','Freebase.php',38],['mod/lti/service/profile/classes/local/service','profile.php',41],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['backup/util/settings','backup_setting.class.php',43],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/alfresco/Service','ContentData.php',38],['enrol/ldap','lib.php',36],['lib/zend/Zend/Validate/File','MimeType.php',112],['lib/zend/Zend/Gdata/Gbase/Extension','BaseAttribute.php',47],['lib/zend/Zend/Gdata/Gapps','NicknameEntry.php',79],['lib/minify/lib/Minify','HTML.php',49],['lib/zend/Zend/Gdata/Extension','OriginalEvent.php',56],['lib/zend/Zend/Gdata/YouTube','InboxFeed.php',55],['lib/google/src/Google/Service','Groupssettings.php',40],['availability/classes','info.php',55],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['lib/tests','navigationlib_test.php',472],['lib/tests','navigationlib_test.php',530],['lib/tests','navigationlib_test.php',557],['lib/zend/Zend/Service/DeveloperGarden/Request/IpLocation','LocateIPRequest.php',58],['mod/quiz/report/statistics/classes','calculated.php',43],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['cache/stores/memcached','lib.php',107],['lib/zend/Zend/Validate','Between.php',89],['lib/zend/Zend/Gdata/Media/Extension','MediaGroup.php',183],['user/selector','lib.php',85],['user/selector','lib.php',674],['lib/google/src/Google/Service','YouTube.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/zend/Zend/Gdata','Exif.php',51],['backup/util/helper','backup_helper.class.php',380],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',154],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',71],['lib/zend/Zend/Gdata','YouTube.php',192],['lib/zend/Zend/Gdata/Calendar/Extension','Link.php',48],['blocks','edit_form.php',47],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign','locallib.php',149],['mod/assign','locallib.php',7411],['grade/report/user','lib.php',188],['lib/zend/Zend/Validate/Barcode','Code93ext.php',47],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','ChangeQuotaPool.php',47],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',294],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['lib/zend/Zend/Gdata','Media.php',51],['lib/zend/Zend/Gdata/Gapps/Extension','Quota.php',59],['lib/zend/Zend/Amf/Value','ByteArray.php',38],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/behat/form_field','behat_form_field.php',59],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['backup/moodle2','restore_subplugin.class.php',45],['lib/zend/Zend/Gdata/Spreadsheets','SpreadsheetFeed.php',54],['backup/util/structure','base_processor.class.php',49],['lib/zend/Zend/Gdata/Calendar/Extension','Timezone.php',45],['lib/zend/Zend/Validate','Ip.php',56],['lib/zend/Zend/Gdata/Extension','OpenSearchTotalResults.php',44],['badges/criteria','award_criteria_activity.php',45],['lib/zend/Zend/Service/Technorati','DailyCountsResultSet.php',67],['lib/zend/Zend/XmlRpc/Value','Collection.php',40],['lib/google/src/Google/Service','Coordinate.php',47],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['lib/classes/output','mustache_pix_helper.php',43],['lib/zend/Zend/Amf/Value','MessageBody.php',81],['user/classes/output/myprofile','node.php',82],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['lib/zend/Zend','Registry.php',186],['lib/lessphp/Exception','Chunk.php',19],['lib/dtl','database_mover.php',33],['lib/zend/Zend/Http','CookieJar.php',106],['lib/zend/Zend/Gdata/Extension','Transparency.php',44],['lib/zend/Zend/Gdata/Media/Extension','MediaText.php',64],['lib/phpexcel/PHPExcel/RichText','TextElement.php',43],['lib/simplepie/library/SimplePie','Enclosure.php',219],['lib/google/src/Google/Service','Webmasters.php',46],['lib/lessphp/Tree','Value.php',14],['lib/simplepie/library','SimplePie.php',611],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/zend/Zend/Gdata/App','CaptchaRequiredException.php',64],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['mod/folder','renderer.php',139],['lib/google/src/Google/Service','Webfonts.php',38],['lib/zend/Zend/Gdata/DublinCore/Extension','Description.php',44],['admin/roles/classes','admins_potential_selector.php',30],['lib/zend/Zend/Soap/Client','Local.php',52],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/lessphp/Tree','Negative.php',14],['mod/quiz','override_form.php',58],['lib/classes/session','file.php',40],['lib/google/src/Google/Auth','OAuth2.php',55],['admin/roles/classes','check_users_selector.php',38],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/alfresco/Service','Store.php',31],['lib/google/src/Google/Service','Audit.php',39],['lib/zend/Zend/Gdata','Gbase.php',95],['mod/wiki','pagelib.php',94],['mod/wiki','pagelib.php',381],['mod/wiki','pagelib.php',986],['mod/wiki','pagelib.php',1195],['mod/wiki','pagelib.php',2201],['mod/wiki','pagelib.php',2429],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['calendar','lib.php',1968],['calendar','lib.php',2709],['lib/zend/Zend/Gdata/Photos','AlbumFeed.php',133],['lib/phpmailer','class.phpmailer.php',572],['lib/google/src/Google/Service','Datastore.php',46],['lib/google/src/Google/Service','YouTubeAnalytics.php',45],['lib/lessphp/Tree','Keyword.php',17],['lib/zend/Zend/Service/Amazon','Sqs.php',70],['backup/util/plan','backup_structure_step.class.php',38],['availability/condition/profile/classes','condition.php',73],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/simplepie/library/SimplePie','Author.php',81],['report/loglive/classes','table_log.php',50],['lib','completionlib.php',243],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/zend/Zend/Gdata/Exif/Extension','Make.php',49],['lib/dml','moodle_database.php',139],['lib/lessphp/Tree','Media.php',18],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes/update','info.php',48],['backup/moodle2','backup_subplugin.class.php',44],['backup/util/ui','base_moodleform.class.php',68],['lib/zend/Zend/Gdata/DublinCore/Extension','Creator.php',44],['lib/alfresco/Service','Association.php',28],['lib/zend/Zend/Gdata/Geo/Extension','GeoRssWhere.php',62],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/zend/Zend/Service','Twitter.php',125],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['admin/tool/log/classes/log','store.php',30],['lib/phpexcel/PHPExcel','Comment.php',101],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CommitConferenceRequest.php',46],['filter','local_settings_form.php',33],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['badges/classes','assertion.php',49],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateParticipantRequest.php',67],['lib/phpexcel/PHPExcel','RichText.php',45],['lib/zend/Zend/Gdata/App','Base.php',111],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/filestorage','file_storage.php',57],['lib/adodb/drivers','adodb-postgres64.inc.php',125],['lib/adodb/drivers','adodb-postgres64.inc.php',904],['lib/phpexcel/PHPExcel/Chart','Title.php',53],['lib/zend/Zend/Mime','Part.php',51],['lib/phpexcel/PHPExcel','Worksheet.php',335],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',78],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/zend/Zend/Gdata/DublinCore/Extension','Language.php',44],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',77],['lib/alfresco/Service/WebService','AlfrescoWebService.php',30],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['lib/google/src/Google/Service','ShoppingContent.php',47],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib/zend/Zend/Gdata/Spreadsheets','ListQuery.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['mod/workshop/allocation/scheduled','lib.php',48],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib/zend/Zend/Gdata/Spreadsheets','ListEntry.php',62],['repository/merlot','lib.php',37],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/lessphp/Visitor','extendFinder.php',15],['lib/zend/Zend/Gdata/YouTube/Extension','MediaGroup.php',112],['mod/quiz/report/grading','gradingsettings_form.php',44],['lib/zend/Zend/Service/Simpy','Note.php',104],['lib/zend/Zend/Gdata/Photos/Extension','Rotation.php',51],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',89],['lib/editor/tinymce/classes','plugin.php',49],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/zend/Zend/XmlRpc/Value','Integer.php',40],['lib/zend/Zend/Validate/File','Upload.php',74],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',201],['admin/roles/classes','capability_table_with_risks.php',46],['lib/zend/Zend/Gdata/Extension','EntryLink.php',52],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib','outputrequirementslib.php',166],['lib/google/src/Google/Service','Appsactivity.php',49],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/zend/Zend/Loader','Autoloader.php',446],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/zend/Zend/Gdata','Docs.php',87],['lib/alfresco/Service/Logger','Logger.php',27],['lib/zend/Zend/Gdata/App/Extension','Logo.php',43],['lib/dml','pgsql_native_moodle_recordset.php',44],['backup/cc/cc_lib','cc_version11.php',57],['lib','weblib.php',315],['lib','weblib.php',3025],['lib','weblib.php',3325],['lib','weblib.php',3360],['lib','weblib.php',3435],['backup/cc/cc_lib','xmlbase.php',52],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['mod/lesson','locallib.php',2007],['mod/lesson','locallib.php',2602],['lib/zend/Zend/Service/LiveDocx','MailMerge.php',61],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',101],['lib/zend/Zend/Server/Reflection','ReturnValue.php',47],['lib/minify/lib/Minify','Build.php',77],['lib/horde/framework/Horde','Variables.php',60],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/phpexcel/PHPExcel','NamedRange.php',73],['lib/zend/Zend/Gdata/Extension','OpenSearchStartIndex.php',44],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['lib/zend/Zend/Service/Amazon','OfferSet.php',79],['grade/export/txt','grade_export_txt.php',27],['admin/roles/classes','allow_override_page.php',31],['lib/lessphp/Tree','Assignment.php',15],['lib/zend/Zend/Gdata/Books/Extension','ThumbnailLink.php',42],['lib/zend/Zend/Gdata/YouTube/Extension','Uploaded.php',44],['lib/zend/Zend/Gdata/Extension','AttendeeStatus.php',44],['lib/tcpdf/include/barcodes','qrcode.php',631],['lib/zend/Zend/Gdata/Photos/Extension','Weight.php',51],['enrol','locallib.php',125],['enrol','locallib.php',1240],['enrol','locallib.php',1363],['enrol','locallib.php',1414],['enrol','locallib.php',1447],['lib/lessphp/Visitor','toCSS.php',13],['question/classes/statistics/questions','calculator.php',66],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['backup/util/helper','restore_prechecks_helper.class.php',213],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',605],['grade/edit/tree','lib.php',638],['grade/edit/tree','lib.php',804],['lib/zend/Zend/Gdata','Geo.php',56],['lib/zend/Zend/Gdata/Books','CollectionFeed.php',41],['lib/classes','string_manager_standard.php',53],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',163],['admin/tool/installaddon/classes','validator.php',223],['admin/tool/generator/classes','backend.php',84],['lib/zend/Zend/Service/WindowsAzure/Credentials','SharedAccessSignature.php',53],['lib/zend/Zend/Gdata/Spreadsheets/Extension','Custom.php',49],['availability/condition/completion/classes','condition.php',48],['question/classes/statistics/questions','calculated.php',181],['lib/lessphp/Tree','Javascript.php',20],['mod/quiz','locallib.php',1898],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',89],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',62],['lib/zend/Zend/Gdata/DublinCore/Extension','Date.php',45],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['lib/zend/Zend/Loader','PluginLoader.php',95],['lib/zend/Zend/Gdata/YouTube/Extension','Description.php',44],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/zend/Zend/Gdata/App/Extension','Generator.php',45],['lib/zend/Zend/Gdata/DublinCore/Extension','Rights.php',44],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['repository/skydrive','lib.php',42],['lib/google/src/Google/Service','SQLAdmin.php',48],['lib/zend/Zend/Gdata/YouTube/Extension','NoEmbed.php',44],['lib/zend/Zend/Gdata/Exif/Extension','ImageUniqueId.php',49],['lib/simplepie/library/SimplePie','Item.php',82],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',214],['lib/zend/Zend/Validate/File','IsImage.php',53],['lib/zend/Zend/Date','Exception.php',39],['lib/zend/Zend/Amf/Adobe','Introspector.php',65],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/zend/Zend/Service','ReCaptcha.php',117],['lib/zend/Zend/Gdata/Health','ProfileEntry.php',61],['lib/zend/Zend/Server/Reflection','Prototype.php',45],['admin/roles/classes','allow_switch_page.php',33],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',140],['lib/google/src/Google/Service','Fitness.php',57],['filter/emoticon/tests','filter_test.php',68],['backup/util/helper','convert_helper.class.php',378],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['repository/webdav','lib.php',38],['repository/dropbox','locallib.php',46],['lib/lessphp/Exception','Parser.php',30],['lib/filestorage','tgz_packer.php',726],['lib/filestorage','tgz_packer.php',808],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['lib/classes/output','mustache_javascript_helper.php',40],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/zend/Zend/Gdata/YouTube/Extension','FirstName.php',44],['lib/zend/Zend/Service/WindowsAzure/Storage','Queue.php',83],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/zend/Zend/Gdata/Media/Extension','MediaDescription.php',53],['lib/google/src/Google/Service','TagManager.php',66],['lib/zend/Zend/Server','Abstract.php',89],['cache/classes','config.php',80],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',579],['lib','outputcomponents.php',655],['lib','outputcomponents.php',773],['lib','outputcomponents.php',915],['lib','outputcomponents.php',999],['lib','outputcomponents.php',2178],['lib','outputcomponents.php',2217],['lib','outputcomponents.php',2290],['lib','outputcomponents.php',2371],['lib','outputcomponents.php',2574],['lib','outputcomponents.php',2622],['lib','outputcomponents.php',2682],['lib','outputcomponents.php',2855],['lib','outputcomponents.php',3025],['lib','outputcomponents.php',3129],['lib','outputcomponents.php',3196],['lib','outputcomponents.php',3324],['lib','outputcomponents.php',3608],['lib','outputcomponents.php',3637],['lib','outputcomponents.php',3663],['lib','outputcomponents.php',3685],['lib','outputcomponents.php',3714],['lib','outputcomponents.php',3746],['lib/zend/Zend/Validate/Barcode','Code25.php',53],['lib/zend/Zend/Gdata/YouTube','CommentFeed.php',53],['lib/dtl','string_xml_database_importer.php',34],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/simplepie/library/SimplePie','Cache.php',69],['backup/util/ui','renderer.php',813],['grade/export/xls','grade_export_xls.php',24],['lib/google/src/Google/Service','Directory.php',110],['lib/zend/Zend/Gdata/YouTube/Extension','State.php',47],['lib/phpexcel/PHPExcel/Style','Alignment.php',97],['mod/quiz/report/statistics','statistics_table.php',45],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/zend/Zend/Gdata/DublinCore/Extension','Title.php',44],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib/zend/Zend/Validate/Barcode','Code93.php',67],['lib/lessphp','Functions.php',15],['lib/adodb/drivers','adodb-postgres7.inc.php',78],['lib/adodb/drivers','adodb-postgres7.inc.php',273],['lib/adodb/drivers','adodb-postgres7.inc.php',304],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetRunningConferenceRequest.php',46],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceRequest.php',74],['lib/zend/Zend/Validate','EmailAddress.php',118],['mod/workshop','locallib.php',178],['mod/workshop','locallib.php',2801],['mod/workshop','locallib.php',3236],['mod/workshop','locallib.php',3472],['mod/workshop','locallib.php',3714],['mod/workshop','locallib.php',3800],['mod/workshop','locallib.php',3885],['mod/workshop','locallib.php',3904],['lib/zend/Zend/XmlRpc/Value','Struct.php',39],['lib/zend/Zend/Gdata/Books/Extension','Embeddability.php',45],['lib/horde/framework/Horde/Mime','Mdn.php',35],['cache/stores/static','lib.php',127],['lib','blocklib.php',54],['lib','blocklib.php',152],['lib/zend/Zend/Gdata/Books/Extension','Review.php',46],['lib','componentlib.class.php',597],['lib','componentlib.class.php',821],['lib/zend/Zend/Validate/Barcode','Code39.php',66],['lib/filebrowser','file_info_context_module.php',47],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',42],['question/engine','states.php',61],['lib/jabber/XMPP','XMLStream.php',171],['lib/jabber/XMPP','XMPP.php',101],['lib/classes/lock','lock_factory.php',39],['lib/tests','collator_test.php',310],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['course/format','lib.php',78],['lib/ddl','sql_generator.php',175],['lib/zend/Zend/XmlRpc/Generator','GeneratorAbstract.php',35],['mod/quiz','accessmanager.php',45],['lib/zend/Zend/Amf/Value','TraitsInfo.php',53],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['lib/zend/Zend/Service/Nirvanix','Response.php',43],['lib','boxlib.php',293],['repository/flickr_public','image.php',34],['lib/google/src/Google/Service','AppState.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/filestorage','zip_archive.php',66],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/zend/Zend/Server/Method','Prototype.php',49],['lib/zend/Zend/Service/Technorati','Author.php',90],['mod/workshop/form/comments','lib.php',99],['lib/phpexcel/PHPExcel/RichText','Run.php',43],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',89],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',69],['lib/zend/Zend/Service/Simpy','WatchlistFilter.php',48],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceRequest.php',46],['lib/zend/Zend/Gdata/Photos','UserEntry.php',131],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['lib/zend/Zend/Gdata/Spreadsheets','ListFeed.php',54],['lib/phpexcel/PHPExcel','DocumentProperties.php',131],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',62],['lib/lessphp/Tree','Paren.php',14],['lib/zend/Zend/Gdata/Photos/Extension','Thumbnail.php',50],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['lib/filebrowser','file_info_context_user.php',39],['lib/google/src/Google/Service','CivicInfo.php',40],['lib/zend/Zend/Gdata/YouTube/Extension','Private.php',44],['lib/zend/Zend/Gdata/YouTube/Extension','Music.php',44],['backup/moodle2','restore_block_task.class.php',45],['lib/zend/Zend','Gdata.php',99],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/phpunit/classes','hint_resultprinter.php',37],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['admin/roles/classes','capability_table_base.php',51],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['lib/google/src/Google/Service','Container.php',44],['lib/zend/Zend/Service/Simpy','TagSet.php',47],['lib/phpexcel/PHPExcel/Chart','Legend.php',82],['question/type/calculated/tests','helper.php',205],['lib/phpexcel/PHPExcel/Reader','CSV.php',103],['availability/classes','result.php',46],['lib/zend/Zend/XmlRpc/Value','Double.php',40],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',462],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1700],['lib/horde/framework/Horde/Mime','Related.php',32],['report/log/classes','renderable.php',93],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/phpexcel/PHPExcel/Style','Font.php',108],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['course/tests/fixtures','course_capability_assignment.php',60],['lib/zend/Zend/Service/Amazon','ResultSet.php',68],['lib/zend/Zend/Validate','Callback.php',69],['lib/zend/Zend/Gdata/Books','CollectionEntry.php',41],['lib/zend/Zend/Gdata/DublinCore/Extension','Publisher.php',44],['lib/zend/Zend/Gdata/Spreadsheets','WorksheetEntry.php',56],['badges/lib','bakerlib.php',52],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['lib/portfolio','caller.php',67],['lib/zend/Zend/Validate/File','Sha1.php',60],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/zend/Zend/Gdata/Media','Feed.php',58],['lib/zend/Zend/Gdata/YouTube/Extension','LastName.php',44],['mod/data','locallib.php',64],['mod/data','locallib.php',431],['lib/zend/Zend/Gdata/App/Extension','Content.php',44],['lib/classes/update','checker_exception.php',37],['backup/cc/cc_lib','cc_manifest.php',45],['lib','odslib.class.php',42],['lib','odslib.class.php',121],['lib','odslib.class.php',419],['lib','odslib.class.php',824],['lib/zend/Zend/Gdata/Books/Extension','AnnotationLink.php',42],['lib/zend/Zend/Gdata/Calendar/Extension','Color.php',46],['backup/util/helper','restore_structure_parser_processor.class.php',41],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/alfresco/Service','Session.php',39],['grade/report/singleview/classes/local/ui','empty_element.php',38],['enrol/database','settingslib.php',34],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',125],['lib/google/src/Google/Service','AndroidPublisher.php',51],['lib/zend/Zend/Service','StrikeIron.php',43],['lib/zend/Zend/Gdata/Books/Extension','InfoLink.php',41],['lib/lessphp/SourceMap','Generator.php',82],['filter/urltolink/tests','filter_test.php',209],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/zend/Zend/Service/Amazon','Item.php',112],['repository','lib.php',116],['repository','lib.php',533],['admin/roles/classes','define_role_table_basic.php',31],['lib/phpexcel/PHPExcel','WorksheetIterator.php',54],['lib/zend/Zend/Gdata/Photos/Extension','NumPhotosRemaining.php',50],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',505],['mod/quiz','attemptlib.php',2058],['mod/quiz','attemptlib.php',2113],['lib/zend/Zend/Server/Reflection','Node.php',51],['lib/zend/Zend/Gdata/Media/Extension','MediaTitle.php',49],['lib/zend/Zend','Date.php',123],['lib/zend/Zend','Mime.php',290],['lib','accesslib.php',5301],['lib','accesslib.php',5846],['lib','accesslib.php',6116],['lib','accesslib.php',6357],['lib','accesslib.php',6544],['lib','accesslib.php',6776],['lib','accesslib.php',6998],['lib','accesslib.php',7240],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1180],['lib/zend/Zend/Validate','Ccnum.php',62],['lib/zend/Zend/Gdata/Extension','EventStatus.php',44],['lib/google/src/Google/Verifier','Pem.php',29],['lib/zend/Zend/Service/Technorati','BlogInfoResult.php',74],['admin/tool/log/classes','setting_managestores.php',30],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['backup/util/ui','restore_moodleform.class.php',34],['grade/report/singleview/classes/local/ui','element.php',47],['mod/quiz/report','attemptsreport_table.php',76],['lib/lessphp/Tree','Attribute.php',16],['lib/phpexcel/PHPExcel/Style','Supervisor.php',52],['lib/zend/Zend/Gdata/Media/Extension','MediaCategory.php',50],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/zend/Zend/Gdata/Photos/Extension','Checksum.php',51],['lib/lessphp/Tree','Expression.php',16],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['course/format','renderer.php',44],['lib/zend/Zend/XmlRpc/Value','Boolean.php',40],['blocks/rss_client','editfeed.php',36],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['question/type/numerical','question.php',321],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['lib/typo3','class.t3lib_cs.php',509],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/zend/Zend/Gdata/Health','ProfileListEntry.php',49],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['cache/stores/memcache','lib.php',120],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['lib/zend/Zend/Gdata/Calendar/Extension','WebContent.php',47],['lib/zend/Zend/Gdata/Photos/Extension','Id.php',50],['lib/google/src/Google/Service','Games.php',60],['lib/zend/Zend/Validate/File','Size.php',92],['lib/classes/lock','file_lock_factory.php',57],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',64],['lib','filelib.php',2700],['lib','filelib.php',3560],['lib/classes/session','database.php',52],['lib/zend/Zend/Gdata/YouTube/Extension','Movies.php',44],['grade','lib.php',103],['grade','lib.php',785],['availability/condition/grouping/classes','condition.php',46],['lib/zend/Zend/Service/Technorati','SearchResult.php',84],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/zend/Zend/XmlRpc','Server.php',186],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/htmlpurifier','HTMLPurifier.php',104],['lib/zend/Zend/Gdata/Media/Extension','MediaPlayer.php',59],['lib/phpexcel/PHPExcel','Cell.php',122],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',248],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['backup/util/helper','restore_log_rule.class.php',62],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',108],['lib/zend/Zend/Server/Reflection','Class.php',66],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['repository/flickr','lib.php',51],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/google/src/Google/Service','MapsEngine.php',66],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['lib/filestorage','tgz_extractor.php',119],['lib/zend/Zend/Soap','Client.php',142],['lib/zend/Zend/Gdata/Calendar/Extension','Hidden.php',45],['cache/classes','factory.php',149],['lib/zend/Zend/Gdata/Media/Extension','MediaCredit.php',54],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['mod/lti/classes/local/ltiservice','resource_base.php',62],['lib/zend/Zend/Http','Response.php',132],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceListRequest.php',63],['backup/util/ui','backup_moodleform.class.php',41],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['comment','lib.php',100],['lib/phpexcel','PHPExcel.php',354],['grade/export/ods','grade_export_ods.php',24],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/zend/Zend/Gdata/YouTube/Extension','Location.php',44],['lib/lessphp/Tree','Dimension.php',15],['lib/phpexcel/PHPExcel/Worksheet','Row.php',54],['lib/phpexcel/PHPExcel/Writer','HTML.php',135],['lib/zend/Zend/Service/Technorati','TagsResultSet.php',41],['backup/moodle2','backup_theme_plugin.class.php',61],['lib/zend/Zend/Gdata','Extension.php',43],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['mod/forum/classes','subscriber_selector_base.php',53],['lib/zend/Zend','Auth.php',45],['lib/phpexcel/PHPExcel/Style','Borders.php',121],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CreateConferenceRequest.php',67],['lib/zend/Zend/Gdata/Calendar','ListFeed.php',54],['lib/zend/Zend/Gdata/Extension','Visibility.php',44],['webservice/xmlrpc','lib.php',42],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',76],['lib/zend/Zend/Gdata/App','MediaEntry.php',57],['lib/horde/framework/Horde/Mime','Part.php',261],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['question/classes/engine/variants','least_used_strategy.php',51],['lib/horde/framework/Horde/Support','Array.php',21],['lib/zend/Zend/Gdata/YouTube/Extension','Statistics.php',93],['lib/zend/Zend/Gdata/Photos/Extension','BytesUsed.php',50],['lib','tablelib.php',127],['lib','tablelib.php',1400],['lib','tablelib.php',1723],['lib/zend/Zend/Gdata/App/Extension','Uri.php',43],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/zend/Zend/Gdata/Media/Extension','MediaCopyright.php',53],['lib/zend/Zend/Gdata/DublinCore/Extension','Identifier.php',44],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/zend/Zend/Gdata/Gbase','Feed.php',49],['availability/condition/date/classes','condition.php',52],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['admin/tool/generator/classes','course_backend.php',116],['lib/google/src/Google/Service','Prediction.php',51],['cache/stores/session','lib.php',131],['cache/classes','dummystore.php',62],['lib/zend/Zend/XmlRpc/Server','System.php',39],['lib/zend/Zend/Service/WindowsAzure/Storage','TableInstance.php',50],['backup/util/settings/course','course_backup_setting.class.php',25],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['mod/lesson','override_form.php',58],['lib/zend/Zend/Service/Simpy','WatchlistSet.php',47],['lib/google/src/Google/Service','Compute.php',78],['badges/criteria','award_criteria.php',127],['lib/zend/Zend/Gdata/Calendar/Extension','Selected.php',45],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['lib/zend/Zend/Validate','PostCode.php',65],['lib/dml','oci_native_moodle_temptables.php',40],['lib/zend/Zend/Gdata/Photos/Extension','CommentingEnabled.php',51],['lib/simplepie/library/SimplePie','Category.php',81],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',45],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['user/classes/output/myprofile','category.php',68],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['mod/wiki/parser','parser.php',98],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['repository/googledocs','lib.php',65],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/zend/Zend/Validate/File','Extension.php',71],['mod/imscp','locallib.php',289],['lib/classes/session','memcache.php',50],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/zend/Zend/Service','Simpy.php',53],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/zend/Zend/Gdata/Gapps','EmailListRecipientQuery.php',54],['lib/zend/Zend/Gdata/YouTube','PlaylistVideoEntry.php',55],['lib/zend/Zend/Gdata/Photos','CommentEntry.php',85],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/zend/Zend/Gdata/YouTube','InboxEntry.php',92],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/phpexcel/PHPExcel/Style','Border.php',75],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateParticipantRequest.php',53],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['lib/zend/Zend/Gdata/Exif/Extension','Distance.php',49],['lib/phpexcel/PHPExcel/Writer','PDF.php',46],['lib/zend/Zend/Gdata/Photos/Extension','Size.php',50],['lib/google/src/Google/Service','CloudMonitoring.php',42],['backup/util/xml/output','memory_xml_output.class.php',37],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/zend/Zend/Service','Delicious.php',112],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib','outputrenderers.php',117],['lib','outputrenderers.php',282],['lib','outputrenderers.php',405],['lib','outputrenderers.php',4280],['lib','outputrenderers.php',4533],['lib/zend/Zend/Service/Amazon','ListmaniaList.php',44],['lib/zend/Zend/Service','Flickr.php',54],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['lib/google/src/Google/Logger','File.php',49],['backup','backup.class.php',146],['lib/zend/Zend/Gdata/App/Extension','Updated.php',43],['lib/zend/Zend/Gdata/YouTube','PlaylistVideoFeed.php',55],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',137],['lib/zend/Zend/Gdata/Geo','Feed.php',51],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',107],['backup/util/loggers','file_logger.class.php',35],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',57],['lib/zend/Zend/Gdata/Extension','Reminder.php',48],['course/format/topics','renderer.php',38],['mod/lesson/classes','file_info.php',45],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',62],['lib/minify/lib/HTTP','Encoder.php',75],['lib/zend/Zend/Gdata/App/Extension','Name.php',43],['lib/google/src/Google/Service','Calendar.php',50],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['lib/dml','database_column_info.php',137],['lib/zend/Zend/Gdata/YouTube/Extension','Gender.php',44],['lib/zend/Zend/Service','Yahoo.php',49],['lib/zend/Zend/Service/Amazon','SimilarProduct.php',44],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/horde/framework/Horde','Stream.php',50],['lib/google/src/Google/Service','Analytics.php',76],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['lib/xmldb','xmldb_file.php',43],['lib/zend/Zend/Gdata/YouTube','PlaylistListEntry.php',97],['lib/zend/Zend/Service/Amazon/Ec2','Response.php',78],['lib/zend/Zend/Soap/Wsdl/Strategy','Composite.php',60],['lib/google/src/Google/Service','Tasks.php',44],['lib/zend/Zend/XmlRpc','Response.php',68],['lib/horde/framework/Horde/Exception','NotFound.php',15],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['lib/zend/Zend/Gdata/Books','VolumeEntry.php',131],['question','previewlib.php',122],['mod/wiki','renderer.php',537],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',62],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',393],['mod/assign','renderable.php',517],['mod/assign','renderable.php',576],['mod/assign','renderable.php',613],['mod/assign','renderable.php',653],['mod/assign','renderable.php',706],['mod/assign','renderable.php',760],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/zend/Zend/Service/DeveloperGarden/Request/SmsValidation','Invalidate.php',46],['lib/zend/Zend/Service/Yahoo','ImageResult.php',97],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',183],['mod/quiz/classes/question/bank','custom_view.php',44],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['lib/zend/Zend/Amf/Adobe','Auth.php',56],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/zend/Zend/Amf/Parse','Deserializer.php',45],['lib/zend/Zend/Service/Delicious','SimplePost.php',56],['lib/zend/Zend/Service/Technorati','ResultSet.php',112],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1211],['cache/classes','loaders.php',1606],['lib/zend/Zend/Gdata/Gbase','Entry.php',62],['lib/zend/Zend/Validate','Identical.php',64],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['cache/stores/mongodb','lib.php',116],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/zend/Zend/Gdata/App/Extension','Draft.php',44],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceDetail.php',54],['lib/zend/Zend/Service/Yahoo','InlinkDataResult.php',47],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/lessphp/Tree','Directive.php',20],['lib/zend/Zend/Service/Yahoo','VideoResult.php',118],['question/type/calculated','edit_calculated_form.php',51],['lib/classes','string_manager_install.php',43],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/google/src/Google/Logger','Psr.php',37],['grade/report/history/classes/output','user_button.php',40],['lib','externallib.php',129],['lib','externallib.php',426],['lib','externallib.php',457],['lib','externallib.php',488],['lib','externallib.php',517],['lib','externallib.php',649],['lib','externallib.php',684],['lib','externallib.php',782],['backup/util/ui','base_ui_stage.class.php',67],['lib/zend/Zend/Validate','CreditCard.php',136],['lib/zend/Zend/Gdata/Spreadsheets','CellQuery.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['mod/quiz/accessrule','accessrulebase.php',52],['lib/mustache/src/Mustache','Context.php',20],['lib/zend/Zend/Service/DeveloperGarden/Request/VoiceButler','CallStatus.php',46],['lib/zend/Zend/Gdata/Spreadsheets','CellFeed.php',78],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['lib/lessphp/Tree','Color.php',15],['lib/zend/Zend/Service/StrikeIron','Base.php',56],['lib/zend/Zend/Gdata/Exif/Extension','FStop.php',49],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/zend/Zend/Service/Simpy','Tag.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['cache/classes','helper.php',90],['lib/zend/Zend/Soap','Wsdl.php',73],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['lib/zend/Zend/Validate/Barcode','Code25interleaved.php',53],['webservice/soap','locallib.php',162],['lib/lessphp/Tree','Quoted.php',20],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['lib/zend/Zend/Gdata/YouTube','ActivityEntry.php',88],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',517],['lib/zend/Zend/Service','Audioscrobbler.php',65],['lib/zend/Zend/Service/Flickr','ResultSet.php',82],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['lib/zend/Zend/XmlRpc/Request','Stdin.php',47],['lib/zend/Zend/Service/DeveloperGarden/Request/SmsValidation','Validate.php',63],['mod/glossary','locallib.php',481],['lib/google/src/Google/Logger','Abstract.php',121],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/zend/Zend/Http/Client/Adapter','Curl.php',92],['lib/google/src/Google/Service','Oauth2.php',50],['lib/phpmailer','moodle_phpmailer.php',47],['lib/zend/Zend/Validate/Barcode','Intelligentmail.php',47],['repository/skydrive','microsoftliveapi.php',50],['mod/workshop/allocation/manual','lib.php',51],['lib/zend/Zend/Validate/File','Exists.php',62],['lib/xhprof','xhprof_moodle.php',788],['question/classes/bank/search','category_condition.php',60],['lib/markdown','Markdown.php',96],['grade/report/grader','lib.php',104],['lib/zend/Zend/Gdata/YouTube/Extension','Control.php',48],['lib/zend/Zend/Validate','StringLength.php',79],['question/behaviour','behaviourbase.php',50],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib/zend/Zend/Gdata/Photos/Extension','Nickname.php',50],['lib/zend/Zend/Gdata/Exif/Extension','Tags.php',169],['lib/zend/Zend/Uri','Http.php',108],['lib/zend/Zend/Gdata/YouTube/Extension','Hometown.php',44],['cache/stores/file','lib.php',117],['lib/zend/Zend/Service','Amazon.php',75],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/zend/Zend/Gdata/Media/Extension','MediaThumbnail.php',64],['lib/zend/Zend/Service/Yahoo','Image.php',56],['lib/zend/Zend/Gdata','Feed.php',87],['lib/google/src/Google/Service','Storage.php',54],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['admin/tool/uploadcourse/classes','course.php',111],['lib/zend/Zend/Gdata/Extension','Where.php',52],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/zend/Zend/Service/Amazon','S3.php',102],['lib/horde/framework/Horde/Stream','Existing.php',28],['backup/util/output','output_controller.class.php',44],['backup/cc/cc_lib','cc_version1.php',57],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/zend/Zend/Service/Simpy','Link.php',104],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['lib/zend/Zend/Gdata','Calendar.php',77],['lib/zend/Zend/Validate','Date.php',71],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/xmldb','xmldb_table.php',49],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['backup/cc','cc112moodle.php',59],['lib/zend/Zend/XmlRpc/Client','ServerIntrospection.php',43],['lib/zend/Zend/Gdata/Photos','PhotoFeed.php',147],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',407],['lib','adminlib.php',792],['lib','adminlib.php',1139],['lib','adminlib.php',1213],['lib','adminlib.php',1356],['lib','adminlib.php',1553],['lib','adminlib.php',1925],['lib','adminlib.php',2037],['lib','adminlib.php',2103],['lib','adminlib.php',2204],['lib','adminlib.php',2246],['lib','adminlib.php',2284],['lib','adminlib.php',2372],['lib','adminlib.php',2406],['lib','adminlib.php',2563],['lib','adminlib.php',2648],['lib','adminlib.php',2877],['lib','adminlib.php',3033],['lib','adminlib.php',3175],['lib','adminlib.php',3266],['lib','adminlib.php',3430],['lib','adminlib.php',3510],['lib','adminlib.php',3621],['lib','adminlib.php',3772],['lib','adminlib.php',4001],['lib','adminlib.php',4068],['lib','adminlib.php',4286],['lib','adminlib.php',4315],['lib','adminlib.php',4344],['lib','adminlib.php',4368],['lib','adminlib.php',4398],['lib','adminlib.php',4434],['lib','adminlib.php',4469],['lib','adminlib.php',4501],['lib','adminlib.php',4591],['lib','adminlib.php',4624],['lib','adminlib.php',4680],['lib','adminlib.php',4704],['lib','adminlib.php',4730],['lib','adminlib.php',4753],['lib','adminlib.php',4770],['lib','adminlib.php',4815],['lib','adminlib.php',4878],['lib','adminlib.php',4913],['lib','adminlib.php',4956],['lib','adminlib.php',5039],['lib','adminlib.php',5169],['lib','adminlib.php',5211],['lib','adminlib.php',5256],['lib','adminlib.php',5313],['lib','adminlib.php',5329],['lib','adminlib.php',5385],['lib','adminlib.php',5610],['lib','adminlib.php',5664],['lib','adminlib.php',5718],['lib','adminlib.php',5735],['lib','adminlib.php',5783],['lib','adminlib.php',5825],['lib','adminlib.php',5876],['lib','adminlib.php',5932],['lib','adminlib.php',6161],['lib','adminlib.php',6341],['lib','adminlib.php',6435],['lib','adminlib.php',6582],['lib','adminlib.php',7206],['lib','adminlib.php',7658],['lib','adminlib.php',7841],['lib','adminlib.php',8128],['lib','adminlib.php',8275],['lib','adminlib.php',8435],['lib','adminlib.php',8582],['lib','adminlib.php',8746],['lib','adminlib.php',8939],['lib','adminlib.php',8993],['lib','adminlib.php',9055],['lib','adminlib.php',9100],['mod/workshop/eval/best','lib.php',44],['lib/zend/Zend/Gdata/Calendar','EventQuery.php',91],['lib/zend/Zend/Service/Technorati','TagResult.php',94],['lib/google/src/Google/Cache','Null.php',26],['enrol/flatfile','adminlib.php',35],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',52],['mod/quiz/report/statistics','statistics_question_table.php',49],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','AddConferenceTemplateParticipantRequest.php',53],['mod/data','lib.php',66],['mod/data','lib.php',2164],['mod/data','lib.php',2438],['mod/data','lib.php',2459],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/classes/session','memcached.php',51],['lib/google/src/Google/IO','Abstract.php',37],['availability/classes','info_section.php',40],['lib/zend/Zend/Gdata/YouTube/Extension','Books.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/filestorage','stored_file.php',63],['grade/report/history/classes/output','tablelog.php',72],['lib/classes','plugin_manager.php',71],['lib/google/src/Google','Model.php',32],['lib/zend/Zend/Gdata/YouTube/Extension','Relationship.php',44],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/filebrowser','virtual_root_file.php',45],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['availability/condition/grade/classes','condition.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',188],['admin/roles/classes','check_capability_table.php',40],['lib/zend/Zend/Gdata/Media','Entry.php',60],['lib/zend/Zend/Gdata','MimeFile.php',43],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/cc/cc_lib','cc_resources.php',102],['lib/zend/Zend/Loader/Autoloader','Resource.php',62],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/simplepie/library/SimplePie','IRI.php',252],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/zend/Zend/Gdata/Calendar/Extension','SendEventNotifications.php',44],['lib/zend/Zend/Service/WindowsAzure/Storage','TableEntity.php',66],['lib/zend/Zend/Service/DeveloperGarden/Request/LocalSearch','LocalSearchRequest.php',60],['mod/quiz/report/overview','overview_table.php',41],['lib/zend/Zend/Gdata/Photos/Extension','Client.php',51],['backup/cc/cc_lib','cc_converters.php',75],['lib/google/src/Google/Service','AdSense.php',68],['lib/zend/Zend/Gdata','Entry.php',48],['lib','filterlib.php',74],['lib','filterlib.php',382],['lib/lessphp/Tree','Alpha.php',13],['lib/zend/Zend/Gdata','DublinCore.php',51],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/lessphp/Tree','Selector.php',31],['lib/zend/Zend/Service','Nirvanix.php',47],['lib/dtl','file_xml_database_importer.php',34],['mod/workshop','mod_form.php',44],['lib/zend/Zend/Service/Technorati','CosmosResultSet.php',73],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['lib/zend/Zend/Gdata/YouTube/Extension','Age.php',44],['repository/s3','S3.php',176],['repository/s3','S3.php',1994],['repository/s3','S3.php',2346],['lib/lessphp/Tree','Ruleset.php',45],['lib/zend/Zend/Service/Simpy','NoteSet.php',47],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['lib/google/src/Google/Service','Pubsub.php',44],['lib/alfresco/Service','Node.php',51],['lib/zend/Zend/Service','Technorati.php',79],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['admin/tool/monitor/classes','subscription.php',43],['lib/zend/Zend/Gdata/App/Extension','Person.php',61],['backup/moodle2','backup_course_task.class.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['lib/zend/Zend/Gdata/YouTube','ContactEntry.php',61],['lib/zend/Zend/Gdata/Extension','AttendeeType.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['mod/assignment/backup/moodle1','lib.php',223],['lib/zend/Zend/Gdata/Health/Extension','Ccr.php',43],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['mod/quiz','mod_form.php',48],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/zend/Zend/Gdata/Calendar','EventFeed.php',55],['lib/zend/Zend/Gdata/Spreadsheets','DocumentQuery.php',57],['availability/tests/fixtures','mock_condition.php',52],['lib/lessphp','Visitor.php',14],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/minify/lib/Minify/Cache','File.php',9],['lib/zend/Zend/Gdata/Exif','Entry.php',64],['grade/tests','reportlib_test.php',36],['mod/workshop/allocation','lib.php',103],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobInstance.php',57],['lib/zend/Zend/Gdata/Photos/Extension','User.php',50],['admin/tool/uploadcourse/classes','tracker.php',72],['lib/zend/Zend/Service/Technorati','GetInfoResult.php',52],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',61],['lib/zend/Zend/Gdata/YouTube/Extension','Hobbies.php',44],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/zend/Zend/Gdata/Photos/Extension','Width.php',50],['admin/roles/classes','view_role_definition_table.php',28],['lib/phpunit/classes','arraydataset.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/zend/Zend','Exception.php',34],['backup/util/xml/parser/tests','parser_test.php',797],['lib/zend/Zend/Validate/File','ImageSize.php',113],['lib/zend/Zend/Validate','Alnum.php',65],['lib/zend/Zend/Service/Flickr','Image.php',62],['lib/phpexcel/PHPExcel/Calculation','Function.php',71],['lib/horde/framework/Horde/Support','Inflector.php',115],['lib/horde/framework/Horde/Exception','Pear.php',22],['question/classes/bank','random_question_loader.php',61],['lib/phpexcel/PHPExcel/Reader','HTML.php',104],['lib/mustache/src/Mustache/Loader','InlineLoader.php',57],['lib/zend/Zend/Gdata/Photos/Extension','QuotaLimit.php',51],['admin/tool/uploadcourse/classes','processor.php',122],['lib/zend/Zend/Gdata/Spreadsheets','WorksheetFeed.php',40],['lib/lessphp/Tree','Rule.php',24],['lib/zend/Zend/Service/Amazon','EditorialReview.php',44],['lib/zend/Zend/Service/ReCaptcha','MailHide.php',86],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['lib/classes/progress','display_if_slow.php',60],['availability/condition/group/classes','condition.php',43],['lib/zend/Zend/Gdata/Photos/Extension','Location.php',50],['backup/moodle2','restore_settingslib.php',125],['lib/filebrowser','file_info.php',43],['repository/equella','lib.php',42],['lib/zend/Zend/Http','Client.php',242],['lib/alfresco/Service','ChildAssociation.php',30],['lib/zend/Zend/Gdata/DublinCore/Extension','Subject.php',44],['lib/zend/Zend/Gdata/App/Extension','Category.php',46],['badges/lib','awardlib.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/mustache/src/Mustache','Template.php',29],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueInstance.php',49],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['admin/roles/classes','define_role_table_advanced.php',46],['backup/moodle2','restore_section_task.class.php',42],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib/google/src/Google','Client.php',71],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['backup/moodle2','restore_plugin.class.php',43],['lib/simplepie/library/SimplePie','Registry.php',99],['backup/cc','cc2moodle.php',105],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',56],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['lib/zend/Zend/Validate/File','Count.php',92],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/editor/atto','adminlib.php',109],['lib/google/src/Google/Service','Admin.php',40],['lib/dml','moodle_transaction.php',40],['backup/util/plan','restore_structure_step.class.php',46],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1513],['question/engine','questionattempt.php',1599],['question/engine','questionattempt.php',1684],['lib/zend/Zend/Service/Technorati','Weblog.php',152],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantStatus.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['lib/google/src/Google/Cache','File.php',39],['lib/google/src/Google/Http','Request.php',55],['backup/moodle2','backup_block_task.class.php',43],['lib/simplepie/library/SimplePie','Source.php',61],['lib/google/src/Google/Service','Translate.php',40],['availability/classes','capability_checker.php',49],['lib','navigationlib.php',145],['lib','navigationlib.php',1012],['lib','navigationlib.php',2814],['lib','navigationlib.php',3075],['lib','navigationlib.php',3409],['lib','navigationlib.php',4775],['lib','navigationlib.php',4956],['lib/zend/Zend/Gdata/YouTube/Extension','MediaCredit.php',64],['lib/dml','pdo_moodle_database.php',42],['lib/zend/Zend/Gdata/YouTube/Extension','ReleaseDate.php',44],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','NewParticipantRequest.php',53],['lib/zend/Zend/Gdata/Spreadsheets/Extension','RowCount.php',49],['lib/zend/Zend/Validate/File','IsCompressed.php',53],['lib/zend/Zend/Gdata/Photos/Extension','MaxPhotosPerAlbum.php',51],['lib/zend/Zend/Gdata/Extension','When.php',52],['question/classes/bank/search','hidden_condition.php',42],['report/loglive/classes','renderable.php',73],['mod/lti/classes/local/ltiservice','response.php',58],['lib/zend/Zend/Gdata/Extension','Recurrence.php',43],['lib/zend/Zend/Gdata/Books/Extension','BooksLink.php',41],['backup/util/loggers','database_logger.class.php',40],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',250],['lib/phpexcel/PHPExcel','HashTable.php',52],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/classes/update','deployer.php',42],['lib/zend/Zend/Gdata/YouTube','VideoFeed.php',53],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','GetQuotaInformation.php',40],['lib/minify/lib','CSSmin.php',43],['lib/zend/Zend/Validate/File','Crc32.php',60],['mod/feedback/item','feedback_item_class.php',20],['question/engine/upgrade','upgradelib.php',280],['question/engine/upgrade','upgradelib.php',381],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/zend/Zend/Gdata/Spreadsheets','SpreadsheetEntry.php',43],['lib/google/src/Google/Service','Dns.php',50],['lib/zend/Zend/Gdata/Gapps','Query.php',57],['lib/zend/Zend/Gdata/YouTube/Extension','School.php',44],['lib/mustache/src/Mustache','HelperCollection.php',19],['mod/assign','gradingtable.php',68],['backup/util/xml/output','file_xml_output.class.php',37],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/zend/Zend/Service','Akismet.php',77],['lib','googleapi.php',52],['lib','googleapi.php',243],['lib/zend/Zend/Service/Yahoo','ResultSet.php',84],['lib/classes/message/inbound','processing_failed_exception.php',36],['lib','portfoliolib.php',101],['lib/lessphp/Tree','Import.php',30],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',53],['lib/tests/fixtures','test_renderer_factory.php',41],['mod/lesson','editpage_form.php',41],['grade/report','lib.php',156],['lib/zend/Zend/XmlRpc/Request','Http.php',53],['lib/filebrowser','file_info_stored.php',51],['lib/phpexcel/PHPExcel/Style','Protection.php',57],['lib/google/src/Google','Config.php',30],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/zend/Zend/Validate','LessThan.php',58],['grade/export','lib.php',60],['lib/zend/Zend/Gdata/YouTube/Extension','PlaylistTitle.php',44],['availability/classes','tree.php',118],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['question/classes/statistics/responses','analysis_for_subpart.php',50],['lib/zend/Zend/Validate','InArray.php',65],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['lib/zend/Zend/Gdata/Photos/Extension','Height.php',50],['lib/zend/Zend/Gdata/Gapps','Error.php',76],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['lib/phpexcel/PHPExcel','Chart.php',150],['lib/google/src/Google/Service','Replicapool.php',48],['lib/zend/Zend/Gdata/Media/Extension','MediaRating.php',49],['lib/zend/Zend/Gdata/YouTube','VideoEntry.php',175],['admin/tool/installaddon/classes','pluginfo_client.php',68],['admin/tool/installaddon/classes','pluginfo_client.php',206],['lib/google/src/Google/Service','Resourceviews.php',54],['admin/tool/log/store/legacy/classes/log','store.php',33],['backup/moodle2','backup_section_task.class.php',40],['lib/phpexcel/PHPExcel/Worksheet','CellIterator.php',68],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['repository/youtube','lib.php',40],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/testing/generator','component_generator_base.php',45],['lib/zend/Zend/Gdata/DublinCore/Extension','Format.php',44],['lib','badgeslib.php',133],['admin/tool/installaddon/classes','installer.php',488],['admin/tool/installaddon/classes','installer.php',745],['lib/zend/Zend/XmlRpc','Client.php',122],['lib/mustache/src/Mustache','LambdaHelper.php',24],['admin/roles/classes','permissions_table.php',38],['lib/jabber/XMPP','XMLObj.php',76],['lib','coursecatlib.php',197],['lib','coursecatlib.php',2668],['question/type','edit_question_form.php',96],['lib/zend/Zend/Gdata','MediaMimeStream.php',80],['mod/quiz/report/responses','last_responses_table.php',39],['lib/zend/Zend/Gdata/Photos/Extension','Timestamp.php',51],['lib','setuplib.php',106],['lib','setuplib.php',158],['lib','setuplib.php',174],['lib','setuplib.php',194],['lib','setuplib.php',224],['lib','setuplib.php',246],['lib','setuplib.php',262],['lib','setuplib.php',284],['lib','setuplib.php',303],['lib','setuplib.php',321],['lib/google/src/Google/Cache','Apc.php',35],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/lessphp/Tree','Unit.php',16],['lib/zend/Zend/Service/DeveloperGarden/Request/VoiceButler','TearDownCall.php',46],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',261],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['lib/zend/Zend/Service/Amazon','CustomerReview.php',69],['lib/zend/Zend/Gdata/YouTube/Extension','QueryString.php',44],['lib/zend/Zend/Gdata/Gapps/Extension','Name.php',65],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/lessphp/Tree','RulesetCall.php',14],['lib/zend/Zend/Gdata/Extension','Rating.php',49],['repository/alfresco','lib.php',42],['lib/zend/Zend/Service/Technorati','SearchResultSet.php',49],['lib/zend/Zend/Gdata/Photos','UserQuery.php',71],['enrol','renderer.php',426],['enrol','renderer.php',728],['badges/criteria','award_criteria_course.php',47],['lib/zend/Zend/Gdata/Extension','RecurrenceException.php',56],['lib/phpexcel/PHPExcel/Style','Fill.php',89],['lib/zend/Zend/Service/Technorati','TagsResult.php',60],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/google/src/Google/Service','Exception.php',12],['lib/zend/Zend/Gdata','Spreadsheets.php',115],['lib/xmldb','xmldb_index.php',56],['question/classes/statistics/responses','analyser.php',69],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['lib/zend/Zend/Gdata/Photos/Extension','Position.php',50],['lib/google/src/Google/Auth','Simple.php',32],['lib/zend/Zend/Gdata/Geo/Extension','GmlPoint.php',62],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/zend/Zend/Rest','Route.php',71],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceTemplateParticipantRequest.php',60],['question','category_class.php',58],['lib/classes/progress','display.php',48],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['lib/zend/Zend/Gdata/App/Extension','Rights.php',43],['lib/adodb','adodb-active-record.inc.php',113],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['lib/zend/Zend/Validate','NotEmpty.php',77],['question/type/calculated','datasetitems_form.php',72],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['lib/dml','pdo_moodle_recordset.php',41],['backup/cc/cc_lib','cc_converter_folder.php',28],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib/zend/Zend/Gdata/Calendar','ListEntry.php',85],['admin/tool/monitor/classes','rule.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/zend/Zend/Gdata/Geo','Entry.php',55],['lib/zend/Zend/Gdata/YouTube/Extension','Link.php',48],['lib','flickrlib.php',53],['lib/zend/Zend/Gdata/YouTube/Extension','AboutMe.php',44],['lib/zend/Zend/Service/DeveloperGarden','Credential.php',54],['grade/report/overview','lib.php',76],['lib/simplepie/library/SimplePie','File.php',68],['backup/moodle2','backup_plugin.class.php',44],['lib/zend/Zend/Gdata/Extension','ExtendedProperty.php',46],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['rating','lib.php',114],['rating','lib.php',1070],['lib','dtllib.php',66],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['question/engine','datalib.php',68],['question/engine','datalib.php',1330],['question/engine','datalib.php',1631],['question/engine','datalib.php',1739],['question/engine','datalib.php',1869],['question/engine','datalib.php',1940],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',405]], 1047],
'start_timer': ['start_timer', 'Starts the lesson time for the current user ', [['mod/lesson','locallib.php',1488]], 5],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'properties': ['properties', '', [['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',1089],['calendar','lib.php',2476],['mod/lesson','locallib.php',2072],['mod/lesson','locallib.php',2951]], 79],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'box': ['box', 'Outputs a box. ', [['lib','outputrenderers.php',2974]], 295],
'get_firstpage': ['get_firstpage', 'Returns the first page for the lesson or false if there isn\'t one. ', [['mod/lesson','locallib.php',1320]], 1],
'lesson_clock_block_contents': ['lesson_clock_block_contents', 'If a timed lesson and not a teacher, then return a block_contents containing the clock. ', [['mod/lesson','locallib.php',477]], 1],
'addrule': ['addrule', 'Adds a validation rule for the given field ', [['lib','formslib.php',1984],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',322],['lib/pear/HTML','QuickForm.php',1006]], 283],
'action_link': ['action_link', 'Method to create a link with popup action. ', [['report/log/classes','table_log.php',344],['report/loglive/classes','table_log.php',285],['lib','outputrenderers.php',1586]], 71],
'stats': ['stats', '', [['mod/lesson/pagetypes','matching.php',379],['mod/lesson/pagetypes','numerical.php',170],['mod/lesson','locallib.php',3087],['mod/lesson/pagetypes','truefalse.php',227],['mod/lesson/pagetypes','essay.php',190],['mod/lesson/pagetypes','shortanswer.php',235],['mod/lesson/pagetypes','multichoice.php',334]], 1],
'file_postupdate_standard_editor': ['file_postupdate_standard_editor', 'Prepares the content of the \'editor\' form element with embedded media files to be saved in database ', [['lib','filelib.php',202]], 44],
'lesson_mediafile_block_contents': ['lesson_mediafile_block_contents', 'If there is a media file associated with this lesson, return a block_contents that displays it. ', [['mod/lesson','locallib.php',441]], 1],
'embed_url': ['embed_url', 'Renders a media file (audio or video) using suitable embedded player. ', [['lib','outputrenderers.php',4352]], 35],
'get_response_format': ['get_response_format', 'Returns response format used by question type. ', [['mod/lesson','locallib.php',740]], 1],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pgsql_native_moodle_database.php',1137],['lib/dml','oci_native_moodle_database.php',1355],['lib/dml','sqlsrv_native_moodle_database.php',1081],['lib/dml','mssql_native_moodle_database.php',1003],['lib/dml','mysqli_native_moodle_database.php',1397],['lib/dml/tests','dml_test.php',5430],['lib/dml','pdo_moodle_database.php',460]], 565],
'definition': ['definition', 'Defines the standard structure of the form ', [['enrol','bulkchange_forms.php',37],['enrol','bulkchange_forms.php',101],['mod/lesson/pagetypes','matching.php',530],['user/filters','user_filter_forms.php',35],['user/filters','user_filter_forms.php',69],['mod/imscp','mod_form.php',38],['mod/assign','mod_form.php',39],['admin/tool/uploadcourse/classes','step1_form.php',38],['mod/assign','batchsetmarkingworkflowstateform.php',38],['group','import_form.php',40],['course/classes','deletecategory_form.php',45],['login','change_password_form.php',33],['grade/grading/form/guide','edit_form.php',41],['calendar','preferences_form.php',43],['course/publish','forms.php',44],['course/publish','forms.php',96],['grade/grading','pick_form.php',38],['user','forum_form.php',42],['group','group_form.php',39],['mod/feedback/item/label','label_form.php',23],['admin/roles/classes','permission_allow_form.php',31],['mod/data','mod_form.php',10],['grade/grading/form/rubric','edit_form.php',40],['mod/url','mod_form.php',32],['blog','edit_form.php',26],['mod/feedback/item/multichoicerated','multichoicerated_form.php',22],['mod/workshop','feedbackauthor_form.php',32],['grade/edit/outcome','import_outcomes_form.php',33],['lib/portfolio','forms.php',48],['lib/portfolio','forms.php',159],['lib/portfolio','forms.php',266],['lib/portfolio','forms.php',315],['mod/assign/feedback/file','importzipform.php',39],['mod/scorm','mod_form.php',26],['grade/edit/scale','edit_form.php',32],['enrol/meta','addinstance_form.php',32],['enrol/manual','edit_form.php',32],['course/classes','editcategory_form.php',39],['mod/lesson/pagetypes','numerical.php',276],['mod/data','import_form.php',11],['enrol/paypal','edit_form.php',32],['mod/workshop/allocation/random','settings_form.php',41],['login','restored_password_form.php',44],['question','category_form.php',40],['enrol/cohort','edit_form.php',31],['mod/book/tool/importhtml','import_form.php',31],['question','export_form.php',40],['group','grouping_form.php',41],['admin/user','user_bulk_forms.php',7],['admin/user','user_bulk_forms.php',45],['lib/editor/tinymce/plugins/managefiles','manage_form.php',39],['admin/mnet','peer_forms.php',36],['admin/mnet','peer_forms.php',74],['enrol','users_forms.php',30],['enrol','users_forms.php',81],['enrol','users_forms.php',140],['user/profile','index_field_form.php',42],['mod/lesson','import_form.php',35],['question/type/calculated','datasetdefinitions_form.php',72],['grade/report/singleview/classes/local/screen','tablelike.php',107],['mod/assign/feedback/file','uploadzipform.php',37],['badges','criteria_form.php',37],['backup','restorefile_form.php',27],['course','request_form.php',45],['course','request_form.php',136],['user','editadvanced_form.php',39],['mod/assign','batchsetallocatedmarkerform.php',38],['mod/workshop/form','assessment_form.php',40],['mod/wiki','filesedit_form.php',30],['mod/assign/feedback/file','batchuploadfilesform.php',38],['mod/feedback','mod_form.php',34],['mod/lti','edit_form.php',56],['grade/report/grader','preferences_form.php',37],['mod/glossary','import_form.php',10],['admin/tool/behat','steps_definitions_form.php',38],['user','language_form.php',39],['course','completion_form.php',38],['mod/assign','gradingbatchoperationsform.php',38],['mod/lti','register_form.php',41],['mod/quiz/report','attemptsreport_form.php',31],['mod/feedback/item/multichoice','multichoice_form.php',22],['mod/assign','gradingoptionsform.php',39],['mod/book','edit_form.php',31],['admin/tool/profiling','import_form.php',30],['mod/folder','edit_form.php',31],['lib/tests','formslib_test.php',560],['lib/tests','formslib_test.php',591],['lib/tests','formslib_test.php',602],['lib/tests','formslib_test.php',613],['lib/tests','formslib_test.php',624],['lib/tests','formslib_test.php',639],['lib/tests','formslib_test.php',654],['lib/tests','formslib_test.php',669],['lib/tests','formslib_test.php',684],['lib/tests','formslib_test.php',696],['lib/tests','formslib_test.php',711],['lib/tests','formslib_test.php',726],['lib/tests','formslib_test.php',744],['admin/tool/generator/classes','make_course_form.php',38],['blocks','edit_form.php',60],['admin/roles/classes','preset_form.php',39],['badges','edit_form.php',39],['badges','edit_form.php',199],['grade/export','grade_export_form.php',25],['admin/mnet','profilefields_form.php',38],['mod/wiki','comments_form.php',10],['mod/quiz','addrandomform.php',39],['mod/quiz','override_form.php',80],['badges','preferences_form.php',34],['grade/report/history/classes','filter_form.php',43],['user','edit_form.php',39],['backup/util/ui','base_moodleform.class.php',93],['login','set_password_form.php',42],['filter','local_settings_form.php',39],['grade/import','key_form.php',35],['mod/book','mod_form.php',32],['mod/survey','mod_form.php',10],['admin/mnet','services_form.php',36],['mod/quiz/report/grading','gradingsettings_form.php',54],['mod/wiki','edit_form.php',38],['report/eventlist/classes','filter_form.php',30],['mod/assign/feedback/offline','uploadgradesform.php',37],['mod/lesson','locallib.php',755],['lib/form/tests','datetimeselector_test.php',188],['mod/data','preset_form.php',10],['mod/data','preset_form.php',27],['mod/data','preset_form.php',42],['mod/data','preset_form.php',53],['mod/assignment','mod_form.php',38],['admin/tool/capability/classes','settings_form.php',39],['mod/feedback','edit_form.php',33],['mod/feedback','edit_form.php',58],['mod/feedback','edit_form.php',137],['mod/assign','submission_form.php',40],['course','recent_form.php',33],['admin/tool/dbtransfer','database_transfer_form.php',39],['mod/assign','extensionform.php',42],['login','signup_form.php',34],['mod/lesson/pagetypes','truefalse.php',374],['mod/folder','mod_form.php',31],['enrol/guest','locallib.php',32],['grade/import','grade_import_form.php',26],['grade/import','grade_import_form.php',85],['grade/import/xml','grade_import_form.php',25],['admin/tool/generator/classes','make_testplan_form.php',38],['mod/feedback','use_templ_form.php',32],['admin/tool/task/classes','edit_scheduled_task_form.php',36],['course','reset_form.php',36],['admin/webservice','testclient_forms.php',7],['admin/webservice','testclient_forms.php',32],['admin/webservice','testclient_forms.php',116],['admin/webservice','testclient_forms.php',210],['admin/webservice','testclient_forms.php',282],['admin/webservice','testclient_forms.php',355],['admin/webservice','testclient_forms.php',422],['admin/webservice','testclient_forms.php',485],['admin/webservice','testclient_forms.php',538],['admin/webservice','testclient_forms.php',603],['admin/webservice','testclient_forms.php',666],['admin/webservice','testclient_forms.php',730],['admin/webservice','testclient_forms.php',801],['admin/webservice','testclient_forms.php',885],['admin/webservice','testclient_forms.php',973],['admin/tool/customlang','filter_form.php',33],['mod/chat','mod_form.php',25],['mod/scorm/report/objectives','responsessettings_form.php',35],['grade/edit/tree','category_form.php',34],['user','files_form.php',37],['mod/glossary','mod_form.php',10],['grade/import/direct/classes','mapping_form.php',33],['admin/registration','forms.php',42],['admin/registration','forms.php',76],['admin/registration','forms.php',110],['admin/registration','forms.php',192],['mod/data','export_form.php',23],['mod/feedback/item/captcha','captcha_form.php',22],['question','move_form.php',39],['grade/edit/letter','edit_form.php',33],['repository','lib.php',2881],['repository','lib.php',2980],['mod/feedback/item/textfield','textfield_form.php',22],['badges','backpack_form.php',38],['badges','backpack_form.php',101],['grade/import/direct/classes','import_form.php',32],['mod/lesson/pagetypes','essay.php',301],['lib/editor/atto/plugins/managefiles','manage_form.php',40],['blocks/rss_client','editfeed.php',42],['admin/tool/filetypes','edit_form.php',36],['mod/workshop/allocation/scheduled','settings_form.php',39],['mod/quiz/report/statistics','statistics_form.php',39],['enrol/mnet','addinstance_form.php',30],['grade/edit/tree','grade_form.php',33],['mod/lesson','mod_form.php',41],['admin/tool/uploaduser','user_form.php',38],['admin/tool/uploaduser','user_form.php',76],['tag','edit_form.php',41],['admin/webservice','forms.php',33],['admin/webservice','forms.php',59],['admin/webservice','forms.php',184],['admin/webservice','forms.php',227],['mod/feedback/item/numeric','numeric_form.php',22],['calendar','event_form.php',42],['mod/resource','mod_form.php',33],['mod/scorm','reportsettings_form.php',24],['mod/wiki','create_form.php',31],['notes','edit_form.php',25],['mod/lesson','override_form.php',80],['mod/lti','mod_form.php',56],['calendar','managesubscriptions_form.php',38],['mod/lesson/pagetypes','shortanswer.php',353],['mod/feedback','delete_completed_form.php',33],['user/profile','index_category_form.php',39],['mod/choice','mod_form.php',10],['mod/feedback/item/textarea','textarea_form.php',22],['mod/label','mod_form.php',32],['mod/workshop','submission_form.php',32],['group','autogroup_form.php',41],['mod/forum','mod_form.php',32],['mod/assign','submissionconfirmform.php',38],['question','previewlib.php',39],['message','send_form.php',39],['user','editor_form.php',39],['admin/roles/classes','permission_prohibit_form.php',32],['cohort','upload_form.php',44],['mod/feedback/item','feedback_item_form_class.php',22],['mod/feedback','delete_item_form.php',33],['mod/scorm/report/interactions','responsessettings_form.php',30],['question/type/random','edit_random_form.php',37],['mod/feedback/item/info','info_form.php',22],['mod/workshop/eval','lib.php',78],['grade/edit/outcome','edit_form.php',32],['mod/lesson/pagetypes','multichoice.php',481],['mod/lesson/pagetypes','multichoice.php',542],['admin/tool/replace/classes','form.php',33],['lib/classes','grading_external.php',237],['admin/tool/monitor/classes','rule_form.php',39],['admin/user','user_message_form.php',11],['cache','forms.php',42],['cache','forms.php',131],['cache','forms.php',192],['cache','forms.php',271],['cache','forms.php',318],['mod/workshop/form','edit_form.php',43],['mod/page','mod_form.php',33],['admin/user','user_bulk_cohortadd_form.php',30],['admin/tool/assignmentupgrade','upgradableassignmentsbatchform.php',37],['mod/feedback','delete_template_form.php',33],['calendar/classes','export_form.php',40],['mod/lesson','essay_form.php',41],['blog','external_blog_edit_form.php',34],['cohort','edit_form.php',31],['mod/workshop','feedbackreviewer_form.php',32],['admin/tool/messageinbound/classes','edit_handler_form.php',37],['mod/workshop','mod_form.php',52],['grade/edit/tree','item_form.php',34],['enrol/self','edit_form.php',33],['mod/lesson','view_form.php',42],['mod/assign/feedback/offline','importgradesform.php',39],['mod/quiz','mod_form.php',61],['grade/export','key_form.php',35],['course','edit_form.php',16],['enrol/self','locallib.php',43],['admin/tool/dbtransfer','database_export_form.php',38],['mod/assign','quickgradingform.php',39],['mod/forum/classes','post_form.php',77],['backup','backupfilesedit_form.php',27],['files','coursefilesedit_form.php',21],['mod/glossary','edit_form.php',10],['admin/tool/uploadcourse/classes','step2_form.php',36],['grade/edit/tree','outcomeitem_form.php',32],['course','editsection_form.php',19],['question/type','edit_question_form.php',116],['question','import_form.php',40],['lib/form/tests','dateselector_test.php',174],['login','forgot_password_form.php',39],['admin/tool/assignmentupgrade','paginationform.php',37],['admin/tool/uploadcourse/classes','base_form.php',37],['blog','preferences_form.php',34],['blocks/community','forms.php',37],['mod/quiz','accessmanager_form.php',39],['admin/tool/uploaduser','picture_form.php',31],['admin/tool/installaddon/classes','installfromzip_form.php',38],['grade/edit/tree','calculation_form.php',35],['question/type/calculated','datasetitems_form.php',116],['mod/feedback','import_form.php',33],['mod/wiki','mod_form.php',44],['mod/assign','gradeform.php',43],['grade/edit/settings','form.php',37],['enrol','editenrolment_form.php',30]], 18],
'resourcelib_embed_general': ['resourcelib_embed_general', 'Returns general link or file embedding html. ', [['lib','resourcelib.php',250]], 4],
'option_description_string': ['option_description_string', '', [['mod/lesson/pagetypes','matching.php',231],['mod/lesson','locallib.php',3050],['mod/lesson/pagetypes','shortanswer.php',184],['mod/lesson/pagetypes','multichoice.php',283]], 4],
'add_action_buttons': ['add_action_buttons', 'Overriding formslib\'s add_action_buttons() method, to add an extra submit "save changes and return" button. ', [['course','moodleform_mod.php',727],['lib','formslib.php',1178],['admin/tool/uploadcourse/classes','step2_form.php',176]], 216],
'add_answer': ['add_answer', 'Convenience function: Adds an answer editor ', [['mod/lesson','locallib.php',853],['backup/cc/cc_lib','cc_asssesment.php',1893]], 11],
'get_jumps': ['get_jumps', '', [['mod/lesson/pagetypes','matching.php',469],['mod/lesson','locallib.php',3121],['mod/lesson/pagetypes','multichoice.php',51],['mod/lesson/pagetypes','branchtable.php',49]], 0],
'lesson_grade': ['lesson_grade', 'Calculates a user\'s grade for a lesson. ', [['mod/lesson','locallib.php',262]], 5],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1583],['lib/dml','moodle_database.php',678]], 375],
'get_course': ['get_course', 'Gets a course object from database. If the course id corresponds to an already-loaded $COURSE or $SITE object, then the loaded object will be used, saving a database query. ', [['lib','datalib.php',568],['lib','modinfolib.php',180],['lib','modinfolib.php',1439],['lib','modinfolib.php',2730],['availability/classes','info.php',70],['mod/assign','locallib.php',1256],['enrol','locallib.php',897],['course/format','lib.php',231],['mod/quiz','attemptlib.php',180],['mod/quiz','attemptlib.php',681],['admin/tool/uploadcourse/classes','processor.php',232]], 268],
'override_next_page': ['override_next_page', '', [['mod/lesson/pagetypes','cluster.php',68],['mod/lesson/pagetypes','endofcluster.php',71],['mod/lesson','locallib.php',3147]], 1],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',449]], 1560],
'update_timer': ['update_timer', 'Updates the timer to the current time and returns the new timer object ', [['mod/lesson','locallib.php',1519]], 5],
'lesson_unseen_branch_jump': ['lesson_unseen_branch_jump', 'Handles the unseen branch table jump. ', [['mod/lesson','locallib.php',168]], 2],
'single_button': ['single_button', 'Returns a form with a single button. ', [['lib','outputrenderers.php',1735]], 298],
'get_attempts': ['get_attempts', 'Get all of the attempts for the current user. ', [['mod/lesson','locallib.php',1296]], 6],
'link_for_activitylink': ['link_for_activitylink', 'Returns the link for the related activity ', [['mod/lesson','locallib.php',1614]], 1],
'__set': ['__set', '', [['lib/adodb','adodb-active-recordx.inc.php',115],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',121],['lib/zend/Zend/Service/WindowsAzure/Storage','SignedIdentifier.php',67],['lib/zend/Zend/Gdata','Query.php',407],['lib/zend/Zend/Server/Reflection/Function','Abstract.php',394],['lib','webdavlib.php',98],['lib/pear/Net/GeoIP','Location.php',142],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobContainer.php',68],['lib/classes/event','base.php',844],['lib/horde/framework/Horde/Support','Stub.php',31],['lib/horde/framework/Horde/Stream','TempString.php',83],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueMessage.php',74],['lib/portfolio/formats/leap2a','lib.php',277],['lib','modinfolib.php',168],['lib','modinfolib.php',1221],['lib/simplepie/library/SimplePie','gzdecode.php',175],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',94],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',74],['calendar','lib.php',2026],['lib/zend/Zend/Gdata/App','Base.php',489],['mod/lesson','locallib.php',2015],['lib/horde/framework/Horde','Variables.php',199],['lib/zend/Zend/Gdata/App','BaseMediaSource.php',125],['lib','accesslib.php',5226],['lib/zend/Zend/Server/Reflection','Class.php',130],['lib/zend/Zend/Service/WindowsAzure/Storage','DynamicTableEntity.php',51],['lib/minify/lib','JSMinPlus.php',1681],['lib/horde/framework/Horde/Support','Array.php',123],['lib/zend/Zend/Service/WindowsAzure/Storage','TableInstance.php',68],['lib/horde/framework/Horde','Stream.php',84],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',88],['lib','adminlib.php',1086],['lib/simplepie/library/SimplePie','IRI.php',143],['lib','pagelib.php',774],['lib/alfresco/Service','BaseObject.php',35],['lib/alfresco/Service','Node.php',272],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobInstance.php',89],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueInstance.php',64],['lib','navigationlib.php',5007],['lib/mustache/src/Mustache','HelperCollection.php',43],['lib/classes/message','message.php',202],['lib','coursecatlib.php',124],['lib','coursecatlib.php',2865],['lib/adodb','adodb-active-record.inc.php',106],['lib/horde/framework/Horde/Support','ObjectStub.php',50]], 5],
'is_standard': ['is_standard', 'Used to determine if this is a standard page or a special page ', [['mod/lesson','locallib.php',747],['lib/classes/plugininfo','base.php',308]], 12],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','moodle_database.php',1815],['lib/dml','sqlite3_pdo_moodle_database.php',337]], 778],
'get_field': ['get_field', 'Get the right field name to fetch a stat for these attempts that is calculated for more than one $whichattempts (count or avg). ', [['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1497],['user/filters','lib.php',124],['lib/behat','behat_field_manager.php',243]], 485],
'file_rewrite_pluginfile_urls': ['file_rewrite_pluginfile_urls', 'Convert encoded URLs in $text from the @@PLUGINFILE@@/... form to an actual URL. ', [['lib','filelib.php',446]], 85],
'add_jumpto': ['add_jumpto', 'Convenience function: Adds a jumpto select element ', [['mod/lesson','locallib.php',805]], 11],
'add_page_link': ['add_page_link', '', [['mod/lesson/pagetypes','cluster.php',72],['mod/lesson/pagetypes','endofcluster.php',84],['mod/lesson','locallib.php',2794],['mod/lesson/pagetypes','endofbranch.php',102],['mod/lesson/pagetypes','branchtable.php',271]], 1],
'can_embed_url': ['can_embed_url', 'Checks whether a file can be embedded. If this returns true you will get an embedded player; if this returns false, you will just get a download link. ', [['lib','outputrenderers.php',4451]], 9],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',5950]], 486],
'resort_pages': ['resort_pages', 'Move a page resorting all other pages. ', [['mod/lesson','locallib.php',1908]], 2],
'format_text': ['format_text', 'Given text in a variety of format codings, this function returns the text as safe HTML. ', [['lib','weblib.php',1115],['lib','tablelib.php',846],['lib','tablelib.php',1583],['lib','tablelib.php',1900],['question/type','questionbase.php',345],['lib/classes','grading_external.php',182]], 325],
'floor': ['floor', '', [], 467],
'is_array': ['is_array', '', [], 1820],
'count': ['count', '', [], 3984],
'class_exists': ['class_exists', '', [], 273],
'in_array': ['in_array', '', [], 1173],
'time': ['time', '', [], 1768],
'round': ['round', '', [], 903],
'array_shift': ['array_shift', '', [], 607],
'shuffle': ['shuffle', '', [], 25],
'implode': ['implode', '', [], 1259],
'array_unshift': ['array_unshift', '', [], 114],
'array_slice': ['array_slice', '', [], 169],
'next': ['next', '', [], 565],
'array_key_exists': ['array_key_exists', '', [], 1539],
'is_null': ['is_null', '', [], 1992],
'array_keys': ['array_keys', '', [], 1152],
'unserialize': ['unserialize', '', [], 180],
'settype': ['settype', '', [], 1490],
'get_class': ['get_class', '', [], 332],
'ltrim': ['ltrim', '', [], 83],
'strip_tags': ['strip_tags', '', [], 149],
'array_values': ['array_values', '', [], 283],
'define': ['define', '', [], 2170],
'max': ['max', '', [], 1096],
'strpos': ['strpos', '', [], 1623],
'defined': ['defined', '', [], 4098],
'preg_match': ['preg_match', '', [], 1317],
'end': ['end', '', [], 432],
'array_sum': ['array_sum', '', [], 29],
'get_parent_class': ['get_parent_class', '', [], 6],
'method_exists': ['method_exists', '', [], 279],
'reset': ['reset', '', [], 1070],
'current': ['current', '', [], 156],
'link': ['link', '', [], 635],
'is_object': ['is_object', '', [], 508],
'rand': ['rand', '', [], 107],
'min': ['min', '', [], 754],
'strtok': ['strtok', '', [], 23]};
CLASS_DATA={
'lesson_page_answer': ['lesson_page_answer', 'Class used to represent an answer to a page ', [['mod/lesson','locallib.php',3171]], 6],
'lesson_resumed': ['lesson_resumed', 'The mod_lesson lesson resumed event class ', [['mod/lesson/classes/event','lesson_resumed.php',29]], 1],
'html_table_row': ['html_table_row', 'Component representing a table row. ', [['lib','outputcomponents.php',2186]], 159],
'group_override_deleted': ['group_override_deleted', 'The mod_lesson group override deleted event class. ', [['mod/lesson/classes/event','group_override_deleted.php',28],['mod/quiz/classes/event','group_override_deleted.php',28]], 2],
'lesson_restarted': ['lesson_restarted', 'The mod_lesson lesson restarted event class ', [['mod/lesson/classes/event','lesson_restarted.php',29]], 1],
'page_updated': ['page_updated', 'The mod_lesson page_updated event class. ', [['mod/lesson/classes/event','page_updated.php',29],['mod/wiki/classes/event','page_updated.php',28]], 6],
'page_moved': ['page_moved', 'The mod_lesson page_moved event class. ', [['mod/lesson/classes/event','page_moved.php',29]], 1],
'question_answered': ['question_answered', 'The mod_lesson question answered event class. ', [['mod/lesson/classes/event','question_answered.php',29]], 2],
'lesson_started': ['lesson_started', 'The mod_lesson lesson started event class. ', [['mod/lesson/classes/event','lesson_started.php',29]], 1],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'block_contents': ['block_contents', 'This class represents how a block appears on a page. ', [['lib','outputcomponents.php',2464]], 15],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',6988]], 942],
'page_deleted': ['page_deleted', 'The mod_wiki page deleted event class. ', [['mod/wiki/classes/event','page_deleted.php',28],['mod/lesson/classes/event','page_deleted.php',29]], 2],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1052]], 4832],
'lesson_ended': ['lesson_ended', 'The mod_lesson lesson ended event class. ', [['mod/lesson/classes/event','lesson_ended.php',29]], 1],
'user_override_deleted': ['user_override_deleted', 'The mod_quiz user override deleted event class. ', [['mod/quiz/classes/event','user_override_deleted.php',28],['mod/lesson/classes/event','user_override_deleted.php',28]], 2],
'page_created': ['page_created', 'The mod_lesson page_created event class. ', [['mod/lesson/classes/event','page_created.php',29],['mod/wiki/classes/event','page_created.php',28]], 2],
'lesson': ['lesson', 'Class representation of a lesson ', [['mod/lesson','locallib.php',921]], 28],
'popup_action': ['popup_action', 'Component action for a popup window. ', [['lib','outputactions.php',114]], 32],
'completion_info': ['completion_info', 'Class represents completion information for a course. ', [['lib','completionlib.php',210]], 119],
'calendar_event': ['calendar_event', 'Manage calendar events ', [['calendar','lib.php',1916]], 59],
'lesson_page_type_manager': ['lesson_page_type_manager', 'A management class for page types ', [['mod/lesson','locallib.php',3217]], 14]};
CONST_DATA={
'PARAM_URL': ['PARAM_URL', '', [['lib','moodlelib.php',239]], 121],
'LESSON_CLUSTERJUMP': ['LESSON_CLUSTERJUMP', '', [['mod/lesson','locallib.php',54]], 9],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 2948],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 554],
'EDITOR_UNLIMITED_FILES': ['EDITOR_UNLIMITED_FILES', '', [['lib','formslib.php',51]], 40],
'LESSON_MAX_EVENT_LENGTH': ['LESSON_MAX_EVENT_LENGTH', '', [['mod/lesson','locallib.php',59]], 2],
'FORMAT_MOODLE': ['FORMAT_MOODLE', '', [['lib','weblib.php',42]], 378],
'LESSON_ANSWER_HTML': ['LESSON_ANSWER_HTML', '', [['mod/lesson','locallib.php',62]], 13],
'LESSON_PAGE_BRANCHTABLE': ['LESSON_PAGE_BRANCHTABLE', '', [['mod/lesson/pagetypes','branchtable.php',29]], 24],
'LESSON_PAGE_MATCHING': ['LESSON_PAGE_MATCHING', '', [['mod/lesson/pagetypes','matching.php',29]], 6],
'LESSON_PAGE_ENDOFBRANCH': ['LESSON_PAGE_ENDOFBRANCH', '', [['mod/lesson/pagetypes','endofbranch.php',29]], 13],
'LESSON_EOL': ['LESSON_EOL', '', [['mod/lesson','locallib.php',44]], 29],
'LESSON_PAGE_CLUSTER': ['LESSON_PAGE_CLUSTER', '', [['mod/lesson/pagetypes','cluster.php',29]], 10],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 999],
'LESSON_PREVIOUSPAGE': ['LESSON_PREVIOUSPAGE', '', [['mod/lesson','locallib.php',48]], 8],
'COMPLETION_COMPLETE': ['COMPLETION_COMPLETE', '', [['lib','completionlib.php',76]], 80],
'LESSON_RANDOMBRANCH': ['LESSON_RANDOMBRANCH', '', [['mod/lesson','locallib.php',52]], 6],
'PARAM_TEXT': ['PARAM_TEXT', '', [['lib','moodlelib.php',228]], 476],
'LESSON_PAGE_ENDOFCLUSTER': ['LESSON_PAGE_ENDOFCLUSTER', '', [['mod/lesson/pagetypes','endofcluster.php',29]], 10],
'LESSON_NEXTPAGE': ['LESSON_NEXTPAGE', '', [['mod/lesson','locallib.php',42]], 36],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1252],
'LESSON_UNANSWEREDPAGE': ['LESSON_UNANSWEREDPAGE', '', [['mod/lesson','locallib.php',40]], 4],
'LESSON_THISPAGE': ['LESSON_THISPAGE', '', [['mod/lesson','locallib.php',36]], 11],
'LESSON_UNDEFINED': ['LESSON_UNDEFINED', '', [['mod/lesson','locallib.php',56]], 1],
'LESSON_RANDOMPAGE': ['LESSON_RANDOMPAGE', '', [['mod/lesson','locallib.php',50]], 7],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 692],
'LESSON_UNSEENPAGE': ['LESSON_UNSEENPAGE', '', [['mod/lesson','locallib.php',38]], 4],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 502],
'LESSON_UNSEENBRANCHPAGE': ['LESSON_UNSEENBRANCHPAGE', '', [['mod/lesson','locallib.php',46]], 10]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
