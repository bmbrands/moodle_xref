<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/lti/servicelib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/lti';
filename='servicelib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/lti/</a> -> <a href="servicelib.php.html">servicelib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="servicelib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="servicelib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Utility code for LTI service handling.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package mod_lti</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  Copyright (c) 2011 Moodlerooms Inc. (http://www.moodlerooms.com)</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @author     Chris Scribner</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die;
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../mod/lti/OAuthBody.php.html">/mod/lti/OAuthBody.php</a>');
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">// TODO: Switch to core oauthlib once implemented - MDL-30149.</span>
<a name="l31"><span class="linenum">  31</span></a>  use moodle\mod\lti as lti;
<a name="l32"><span class="linenum">  32</span></a>  
<a name="l33"><span class="linenum">  33</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('LTI_ITEM_TYPE')" href="../../_constants/LTI_ITEM_TYPE.html" onMouseOver="constPopup(event,'LTI_ITEM_TYPE')">LTI_ITEM_TYPE</a>', 'mod');
<a name="l34"><span class="linenum">  34</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('LTI_ITEM_MODULE')" href="../../_constants/LTI_ITEM_MODULE.html" onMouseOver="constPopup(event,'LTI_ITEM_MODULE')">LTI_ITEM_MODULE</a>', 'lti');
<a name="l35"><span class="linenum">  35</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('LTI_SOURCE')" href="../../_constants/LTI_SOURCE.html" onMouseOver="constPopup(event,'LTI_SOURCE')">LTI_SOURCE</a>', 'mod/lti');
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>  function <a class="function" onClick="logFunction('lti_get_response_xml')" href="../../_functions/lti_get_response_xml.html" onMouseOver="funcPopup(event,'lti_get_response_xml')">lti_get_response_xml</a>(<a class="var it33554" onMouseOver="hilite(33554)" onMouseOut="lolite()" onClick="logVariable('codemajor')" href="../../_variables/codemajor.html">$codemajor</a>, <a class="var it507" onMouseOver="hilite(507)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../_variables/description.html">$description</a>, <a class="var it33555" onMouseOver="hilite(33555)" onMouseOut="lolite()" onClick="logVariable('messageref')" href="../../_variables/messageref.html">$messageref</a>, <a class="var it8006" onMouseOver="hilite(8006)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a>) {
<a name="l38"><span class="linenum">  38</span></a>      <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a> = new SimpleXMLElement('&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;imsx_POXEnvelopeResponse /&gt;');
<a name="l39"><span class="linenum">  39</span></a>      <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>-&gt;<a class="function" onClick="logFunction('addAttribute')" href="../../_functions/addattribute.html" onMouseOver="funcPopup(event,'addattribute')">addAttribute</a>('xmlns', 'http://www.imsglobal.org/services/ltiv1p1/xsd/imsoms_v1p0');
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>      <a class="var it11159" onMouseOver="hilite(11159)" onMouseOut="lolite()" onClick="logVariable('headerinfo')" href="../../_variables/headerinfo.html">$headerinfo</a> = <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>-&gt;<a class="function" onClick="logFunction('addChild')" href="../../_functions/addchild.html" onMouseOver="funcPopup(event,'addchild')">addChild</a>('imsx_POXHeader')-&gt;<a class="function" onClick="logFunction('addChild')" href="../../_functions/addchild.html" onMouseOver="funcPopup(event,'addchild')">addChild</a>('imsx_POXResponseHeaderInfo');
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>      <a class="var it11159" onMouseOver="hilite(11159)" onMouseOut="lolite()" onClick="logVariable('headerinfo')" href="../../_variables/headerinfo.html">$headerinfo</a>-&gt;<a class="function" onClick="logFunction('addChild')" href="../../_functions/addchild.html" onMouseOver="funcPopup(event,'addchild')">addChild</a>('imsx_version', 'V1.0');
<a name="l44"><span class="linenum">  44</span></a>      <a class="var it11159" onMouseOver="hilite(11159)" onMouseOut="lolite()" onClick="logVariable('headerinfo')" href="../../_variables/headerinfo.html">$headerinfo</a>-&gt;<a class="function" onClick="logFunction('addChild')" href="../../_functions/addchild.html" onMouseOver="funcPopup(event,'addchild')">addChild</a>('imsx_messageIdentifier', (string)<a class="phpfunction" onClick="logFunction('mt_rand')" href="../../_functions/mt_rand.html" onMouseOver="phpfuncPopup(event,'mt_rand')">mt_rand</a>());
<a name="l45"><span class="linenum">  45</span></a>  
<a name="l46"><span class="linenum">  46</span></a>      <a class="var it33556" onMouseOver="hilite(33556)" onMouseOut="lolite()" onClick="logVariable('statusinfo')" href="../../_variables/statusinfo.html">$statusinfo</a> = <a class="var it11159" onMouseOver="hilite(11159)" onMouseOut="lolite()" onClick="logVariable('headerinfo')" href="../../_variables/headerinfo.html">$headerinfo</a>-&gt;<a class="function" onClick="logFunction('addChild')" href="../../_functions/addchild.html" onMouseOver="funcPopup(event,'addchild')">addChild</a>('imsx_statusInfo');
<a name="l47"><span class="linenum">  47</span></a>      <a class="var it33556" onMouseOver="hilite(33556)" onMouseOut="lolite()" onClick="logVariable('statusinfo')" href="../../_variables/statusinfo.html">$statusinfo</a>-&gt;<a class="function" onClick="logFunction('addchild')" href="../../_functions/addchild.html" onMouseOver="funcPopup(event,'addchild')">addchild</a>('imsx_codeMajor', <a class="var it33554" onMouseOver="hilite(33554)" onMouseOut="lolite()" onClick="logVariable('codemajor')" href="../../_variables/codemajor.html">$codemajor</a>);
<a name="l48"><span class="linenum">  48</span></a>      <a class="var it33556" onMouseOver="hilite(33556)" onMouseOut="lolite()" onClick="logVariable('statusinfo')" href="../../_variables/statusinfo.html">$statusinfo</a>-&gt;<a class="function" onClick="logFunction('addChild')" href="../../_functions/addchild.html" onMouseOver="funcPopup(event,'addchild')">addChild</a>('imsx_severity', 'status');
<a name="l49"><span class="linenum">  49</span></a>      <a class="var it33556" onMouseOver="hilite(33556)" onMouseOut="lolite()" onClick="logVariable('statusinfo')" href="../../_variables/statusinfo.html">$statusinfo</a>-&gt;<a class="function" onClick="logFunction('addChild')" href="../../_functions/addchild.html" onMouseOver="funcPopup(event,'addchild')">addChild</a>('imsx_description', <a class="var it507" onMouseOver="hilite(507)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../_variables/description.html">$description</a>);
<a name="l50"><span class="linenum">  50</span></a>      <a class="var it33556" onMouseOver="hilite(33556)" onMouseOut="lolite()" onClick="logVariable('statusinfo')" href="../../_variables/statusinfo.html">$statusinfo</a>-&gt;<a class="function" onClick="logFunction('addChild')" href="../../_functions/addchild.html" onMouseOver="funcPopup(event,'addchild')">addChild</a>('imsx_messageRefIdentifier', <a class="var it33555" onMouseOver="hilite(33555)" onMouseOut="lolite()" onClick="logVariable('messageref')" href="../../_variables/messageref.html">$messageref</a>);
<a name="l51"><span class="linenum">  51</span></a>      <a class="var it33557" onMouseOver="hilite(33557)" onMouseOut="lolite()" onClick="logVariable('incomingtype')" href="../../_variables/incomingtype.html">$incomingtype</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('Response', 'Request', <a class="var it8006" onMouseOver="hilite(8006)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a>);
<a name="l52"><span class="linenum">  52</span></a>      <a class="var it33556" onMouseOver="hilite(33556)" onMouseOut="lolite()" onClick="logVariable('statusinfo')" href="../../_variables/statusinfo.html">$statusinfo</a>-&gt;<a class="function" onClick="logFunction('addChild')" href="../../_functions/addchild.html" onMouseOver="funcPopup(event,'addchild')">addChild</a>('imsx_operationRefIdentifier', <a class="var it33557" onMouseOver="hilite(33557)" onMouseOut="lolite()" onClick="logVariable('incomingtype')" href="../../_variables/incomingtype.html">$incomingtype</a>);
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>      <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>-&gt;<a class="function" onClick="logFunction('addChild')" href="../../_functions/addchild.html" onMouseOver="funcPopup(event,'addchild')">addChild</a>('imsx_POXBody')-&gt;<a class="function" onClick="logFunction('addChild')" href="../../_functions/addchild.html" onMouseOver="funcPopup(event,'addchild')">addChild</a>(<a class="var it8006" onMouseOver="hilite(8006)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a>);
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>      return <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>;
<a name="l57"><span class="linenum">  57</span></a>  }
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>  function <a class="function" onClick="logFunction('lti_parse_message_id')" href="../../_functions/lti_parse_message_id.html" onMouseOver="funcPopup(event,'lti_parse_message_id')">lti_parse_message_id</a>(<a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>) {
<a name="l60"><span class="linenum">  60</span></a>      <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>-&gt;<a onClick="logVariable('imsx_POXHeader')" class="var it39637" onMouseOver="hilite(39637)" onMouseOut="lolite()" href="../../_variables/imsx_POXHeader.html">imsx_POXHeader</a>-&gt;imsx_POXRequestHeaderInfo-&gt;imsx_messageIdentifier;
<a name="l61"><span class="linenum">  61</span></a>      <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../_variables/messageid.html">$messageid</a> = (string)<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a>;
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>      return <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../_variables/messageid.html">$messageid</a>;
<a name="l64"><span class="linenum">  64</span></a>  }
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>  function <a class="function" onClick="logFunction('lti_parse_grade_replace_message')" href="../../_functions/lti_parse_grade_replace_message.html" onMouseOver="funcPopup(event,'lti_parse_grade_replace_message')">lti_parse_grade_replace_message</a>(<a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>) {
<a name="l67"><span class="linenum">  67</span></a>      <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>-&gt;<a onClick="logVariable('imsx_POXBody')" class="var it39637" onMouseOver="hilite(39637)" onMouseOut="lolite()" href="../../_variables/imsx_POXBody.html">imsx_POXBody</a>-&gt;replaceResultRequest-&gt;resultRecord-&gt;sourcedGUID-&gt;sourcedId;
<a name="l68"><span class="linenum">  68</span></a>      <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a> = json_decode((string)<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a>);
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>      <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>-&gt;<a onClick="logVariable('imsx_POXBody')" class="var it39637" onMouseOver="hilite(39637)" onMouseOut="lolite()" href="../../_variables/imsx_POXBody.html">imsx_POXBody</a>-&gt;replaceResultRequest-&gt;resultRecord-&gt;result-&gt;resultScore-&gt;textString;
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>      <a class="var it1634" onMouseOver="hilite(1634)" onMouseOut="lolite()" onClick="logVariable('score')" href="../../_variables/score.html">$score</a> = (string) <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a>;
<a name="l73"><span class="linenum">  73</span></a>      if ( ! <a class="phpfunction" onClick="logFunction('is_numeric')" href="../../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it1634" onMouseOver="hilite(1634)" onMouseOut="lolite()" onClick="logVariable('score')" href="../../_variables/score.html">$score</a>) ) {
<a name="l74"><span class="linenum">  74</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('Exception')" href="../../_classes/exception.html" onMouseOver="classPopup(event,'exception')">Exception</a>('Score must be numeric');
<a name="l75"><span class="linenum">  75</span></a>      }
<a name="l76"><span class="linenum">  76</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="phpfunction" onClick="logFunction('floatval')" href="../../_functions/floatval.html" onMouseOver="phpfuncPopup(event,'floatval')">floatval</a>(<a class="var it1634" onMouseOver="hilite(1634)" onMouseOut="lolite()" onClick="logVariable('score')" href="../../_variables/score.html">$score</a>);
<a name="l77"><span class="linenum">  77</span></a>      if ( <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> &lt; 0.0 || <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> &gt; 1.0 ) {
<a name="l78"><span class="linenum">  78</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('Exception')" href="../../_classes/exception.html" onMouseOver="classPopup(event,'exception')">Exception</a>('Score not between 0.0 and 1.0');
<a name="l79"><span class="linenum">  79</span></a>      }
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a> = new stdClass();
<a name="l82"><span class="linenum">  82</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('gradeval')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/gradeval.html">gradeval</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>;
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('instanceid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/instanceid.html">instanceid</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('data')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;instanceid;
<a name="l85"><span class="linenum">  85</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('userid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('data')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;userid;
<a name="l86"><span class="linenum">  86</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('launchid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/launchid.html">launchid</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('data')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;launchid;
<a name="l87"><span class="linenum">  87</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('typeid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/typeid.html">typeid</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('data')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;typeid;
<a name="l88"><span class="linenum">  88</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('sourcedidhash')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/sourcedidhash.html">sourcedidhash</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('hash')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/hash.html">hash</a>;
<a name="l89"><span class="linenum">  89</span></a>  
<a name="l90"><span class="linenum">  90</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('messageid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/messageid.html">messageid</a> = <a class="function" onClick="logFunction('lti_parse_message_id')" href="../../_functions/lti_parse_message_id.html" onMouseOver="funcPopup(event,'lti_parse_message_id')">lti_parse_message_id</a>(<a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>);
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>      return <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>;
<a name="l93"><span class="linenum">  93</span></a>  }
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>  function <a class="function" onClick="logFunction('lti_parse_grade_read_message')" href="../../_functions/lti_parse_grade_read_message.html" onMouseOver="funcPopup(event,'lti_parse_grade_read_message')">lti_parse_grade_read_message</a>(<a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>) {
<a name="l96"><span class="linenum">  96</span></a>      <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>-&gt;<a onClick="logVariable('imsx_POXBody')" class="var it39637" onMouseOver="hilite(39637)" onMouseOut="lolite()" href="../../_variables/imsx_POXBody.html">imsx_POXBody</a>-&gt;readResultRequest-&gt;resultRecord-&gt;sourcedGUID-&gt;sourcedId;
<a name="l97"><span class="linenum">  97</span></a>      <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a> = json_decode((string)<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a>);
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a> = new stdClass();
<a name="l100"><span class="linenum"> 100</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('instanceid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/instanceid.html">instanceid</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('data')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;instanceid;
<a name="l101"><span class="linenum"> 101</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('userid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('data')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;userid;
<a name="l102"><span class="linenum"> 102</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('launchid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/launchid.html">launchid</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('data')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;launchid;
<a name="l103"><span class="linenum"> 103</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('typeid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/typeid.html">typeid</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('data')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;typeid;
<a name="l104"><span class="linenum"> 104</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('sourcedidhash')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/sourcedidhash.html">sourcedidhash</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('hash')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/hash.html">hash</a>;
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('messageid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/messageid.html">messageid</a> = <a class="function" onClick="logFunction('lti_parse_message_id')" href="../../_functions/lti_parse_message_id.html" onMouseOver="funcPopup(event,'lti_parse_message_id')">lti_parse_message_id</a>(<a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>);
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>      return <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>;
<a name="l109"><span class="linenum"> 109</span></a>  }
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>  function <a class="function" onClick="logFunction('lti_parse_grade_delete_message')" href="../../_functions/lti_parse_grade_delete_message.html" onMouseOver="funcPopup(event,'lti_parse_grade_delete_message')">lti_parse_grade_delete_message</a>(<a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>) {
<a name="l112"><span class="linenum"> 112</span></a>      <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>-&gt;<a onClick="logVariable('imsx_POXBody')" class="var it39637" onMouseOver="hilite(39637)" onMouseOut="lolite()" href="../../_variables/imsx_POXBody.html">imsx_POXBody</a>-&gt;deleteResultRequest-&gt;resultRecord-&gt;sourcedGUID-&gt;sourcedId;
<a name="l113"><span class="linenum"> 113</span></a>      <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a> = json_decode((string)<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a>);
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a> = new stdClass();
<a name="l116"><span class="linenum"> 116</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('instanceid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/instanceid.html">instanceid</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('data')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;instanceid;
<a name="l117"><span class="linenum"> 117</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('userid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('data')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;userid;
<a name="l118"><span class="linenum"> 118</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('launchid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/launchid.html">launchid</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('data')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;launchid;
<a name="l119"><span class="linenum"> 119</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('typeid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/typeid.html">typeid</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('data')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;typeid;
<a name="l120"><span class="linenum"> 120</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('sourcedidhash')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/sourcedidhash.html">sourcedidhash</a> = <a class="var it28258" onMouseOver="hilite(28258)" onMouseOut="lolite()" onClick="logVariable('resultjson')" href="../../_variables/resultjson.html">$resultjson</a>-&gt;<a onClick="logVariable('hash')" class="var it41990" onMouseOver="hilite(41990)" onMouseOut="lolite()" href="../../_variables/hash.html">hash</a>;
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>      <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('messageid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/messageid.html">messageid</a> = <a class="function" onClick="logFunction('lti_parse_message_id')" href="../../_functions/lti_parse_message_id.html" onMouseOver="funcPopup(event,'lti_parse_message_id')">lti_parse_message_id</a>(<a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>);
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>      return <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>;
<a name="l125"><span class="linenum"> 125</span></a>  }
<a name="l126"><span class="linenum"> 126</span></a>  
<a name="l127"><span class="linenum"> 127</span></a>  function <a class="function" onClick="logFunction('lti_accepts_grades')" href="../../_functions/lti_accepts_grades.html" onMouseOver="funcPopup(event,'lti_accepts_grades')">lti_accepts_grades</a>(<a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>) {
<a name="l128"><span class="linenum"> 128</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>      <a class="var it33559" onMouseOver="hilite(33559)" onMouseOut="lolite()" onClick="logVariable('acceptsgrades')" href="../../_variables/acceptsgrades.html">$acceptsgrades</a> = true;
<a name="l131"><span class="linenum"> 131</span></a>      <a class="var it4378" onMouseOver="hilite(4378)" onMouseOut="lolite()" onClick="logVariable('ltitype')" href="../../_variables/ltitype.html">$ltitype</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lti_types', array('id' =&gt; <a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('typeid')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/typeid.html">typeid</a>));
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>      if (empty(<a class="var it4378" onMouseOver="hilite(4378)" onMouseOut="lolite()" onClick="logVariable('ltitype')" href="../../_variables/ltitype.html">$ltitype</a>-&gt;<a onClick="logVariable('toolproxyid')" class="var it41443" onMouseOver="hilite(41443)" onMouseOut="lolite()" href="../../_variables/toolproxyid.html">toolproxyid</a>)) {
<a name="l134"><span class="linenum"> 134</span></a>          <a class="var it11275" onMouseOver="hilite(11275)" onMouseOut="lolite()" onClick="logVariable('typeconfig')" href="../../_variables/typeconfig.html">$typeconfig</a> = <a class="function" onClick="logFunction('lti_get_config')" href="../../_functions/lti_get_config.html" onMouseOver="funcPopup(event,'lti_get_config')">lti_get_config</a>(<a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>);
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>          <a class="var it33560" onMouseOver="hilite(33560)" onMouseOut="lolite()" onClick="logVariable('typeacceptgrades')" href="../../_variables/typeacceptgrades.html">$typeacceptgrades</a> = isset(<a class="var it11275" onMouseOver="hilite(11275)" onMouseOut="lolite()" onClick="logVariable('typeconfig')" href="../../_variables/typeconfig.html">$typeconfig</a>['acceptgrades']) ? <a class="var it11275" onMouseOver="hilite(11275)" onMouseOut="lolite()" onClick="logVariable('typeconfig')" href="../../_variables/typeconfig.html">$typeconfig</a>['acceptgrades'] : <a class="constant" onClick="logConstant('LTI_SETTING_DELEGATE')" href="../../_constants/LTI_SETTING_DELEGATE.html" onMouseOver="constPopup(event,'LTI_SETTING_DELEGATE')">LTI_SETTING_DELEGATE</a>;
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>          if (!(<a class="var it33560" onMouseOver="hilite(33560)" onMouseOut="lolite()" onClick="logVariable('typeacceptgrades')" href="../../_variables/typeacceptgrades.html">$typeacceptgrades</a> == <a class="constant" onClick="logConstant('LTI_SETTING_ALWAYS')" href="../../_constants/LTI_SETTING_ALWAYS.html" onMouseOver="constPopup(event,'LTI_SETTING_ALWAYS')">LTI_SETTING_ALWAYS</a> ||
<a name="l139"><span class="linenum"> 139</span></a>              (<a class="var it33560" onMouseOver="hilite(33560)" onMouseOut="lolite()" onClick="logVariable('typeacceptgrades')" href="../../_variables/typeacceptgrades.html">$typeacceptgrades</a> == <a class="constant" onClick="logConstant('LTI_SETTING_DELEGATE')" href="../../_constants/LTI_SETTING_DELEGATE.html" onMouseOver="constPopup(event,'LTI_SETTING_DELEGATE')">LTI_SETTING_DELEGATE</a> &amp;&amp; <a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('instructorchoiceacceptgrades')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/instructorchoiceacceptgrades.html">instructorchoiceacceptgrades</a> == <a class="constant" onClick="logConstant('LTI_SETTING_ALWAYS')" href="../../_constants/LTI_SETTING_ALWAYS.html" onMouseOver="constPopup(event,'LTI_SETTING_ALWAYS')">LTI_SETTING_ALWAYS</a>))) {
<a name="l140"><span class="linenum"> 140</span></a>              <a class="var it33559" onMouseOver="hilite(33559)" onMouseOut="lolite()" onClick="logVariable('acceptsgrades')" href="../../_variables/acceptsgrades.html">$acceptsgrades</a> = false;
<a name="l141"><span class="linenum"> 141</span></a>          }
<a name="l142"><span class="linenum"> 142</span></a>      } else {
<a name="l143"><span class="linenum"> 143</span></a>          <a class="var it28203" onMouseOver="hilite(28203)" onMouseOut="lolite()" onClick="logVariable('enabledcapabilities')" href="../../_variables/enabledcapabilities.html">$enabledcapabilities</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;\n&quot;, <a class="var it4378" onMouseOver="hilite(4378)" onMouseOut="lolite()" onClick="logVariable('ltitype')" href="../../_variables/ltitype.html">$ltitype</a>-&gt;<a onClick="logVariable('enabledcapability')" class="var it41443" onMouseOver="hilite(41443)" onMouseOut="lolite()" href="../../_variables/enabledcapability.html">enabledcapability</a>);
<a name="l144"><span class="linenum"> 144</span></a>          <a class="var it33559" onMouseOver="hilite(33559)" onMouseOut="lolite()" onClick="logVariable('acceptsgrades')" href="../../_variables/acceptsgrades.html">$acceptsgrades</a> = <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>('Result.autocreate', <a class="var it28203" onMouseOver="hilite(28203)" onMouseOut="lolite()" onClick="logVariable('enabledcapabilities')" href="../../_variables/enabledcapabilities.html">$enabledcapabilities</a>);
<a name="l145"><span class="linenum"> 145</span></a>      }
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>      return <a class="var it33559" onMouseOver="hilite(33559)" onMouseOut="lolite()" onClick="logVariable('acceptsgrades')" href="../../_variables/acceptsgrades.html">$acceptsgrades</a>;
<a name="l148"><span class="linenum"> 148</span></a>  }
<a name="l149"><span class="linenum"> 149</span></a>  
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">/**</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment"> * Set the passed user ID to the session user.</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment"> *</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment"> * @param int $userid</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment"> */</span>
<a name="l155"><span class="linenum"> 155</span></a>  function <a class="function" onClick="logFunction('lti_set_session_user')" href="../../_functions/lti_set_session_user.html" onMouseOver="funcPopup(event,'lti_set_session_user')">lti_set_session_user</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l156"><span class="linenum"> 156</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>      if (<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>))) {
<a name="l159"><span class="linenum"> 159</span></a>          \core\session\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('set_user')" href="../../_functions/set_user.html" onMouseOver="funcPopup(event,'set_user')">set_user</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l160"><span class="linenum"> 160</span></a>      }
<a name="l161"><span class="linenum"> 161</span></a>  }
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>  function <a class="function" onClick="logFunction('lti_update_grade')" href="../../_functions/lti_update_grade.html" onMouseOver="funcPopup(event,'lti_update_grade')">lti_update_grade</a>(<a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it8010" onMouseOver="hilite(8010)" onMouseOut="lolite()" onClick="logVariable('launchid')" href="../../_variables/launchid.html">$launchid</a>, <a class="var it8011" onMouseOver="hilite(8011)" onMouseOut="lolite()" onClick="logVariable('gradeval')" href="../../_variables/gradeval.html">$gradeval</a>) {
<a name="l164"><span class="linenum"> 164</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l165"><span class="linenum"> 165</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l168"><span class="linenum"> 168</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['itemname'] = <a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('name')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l169"><span class="linenum"> 169</span></a>  
<a name="l170"><span class="linenum"> 170</span></a>      <a class="var it8011" onMouseOver="hilite(8011)" onMouseOut="lolite()" onClick="logVariable('gradeval')" href="../../_variables/gradeval.html">$gradeval</a> = <a class="var it8011" onMouseOver="hilite(8011)" onMouseOut="lolite()" onClick="logVariable('gradeval')" href="../../_variables/gradeval.html">$gradeval</a> * <a class="phpfunction" onClick="logFunction('floatval')" href="../../_functions/floatval.html" onMouseOver="phpfuncPopup(event,'floatval')">floatval</a>(<a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('grade')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>);
<a name="l171"><span class="linenum"> 171</span></a>  
<a name="l172"><span class="linenum"> 172</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = new stdClass();
<a name="l173"><span class="linenum"> 173</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>   = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l174"><span class="linenum"> 174</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/rawgrade.html">rawgrade</a> = <a class="var it8011" onMouseOver="hilite(8011)" onMouseOut="lolite()" onClick="logVariable('gradeval')" href="../../_variables/gradeval.html">$gradeval</a>;
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>      <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>(<a class="constant" onClick="logConstant('LTI_SOURCE')" href="../../_constants/LTI_SOURCE.html" onMouseOver="constPopup(event,'LTI_SOURCE')">LTI_SOURCE</a>, <a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('course')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, <a class="constant" onClick="logConstant('LTI_ITEM_TYPE')" href="../../_constants/LTI_ITEM_TYPE.html" onMouseOver="constPopup(event,'LTI_ITEM_TYPE')">LTI_ITEM_TYPE</a>, <a class="constant" onClick="logConstant('LTI_ITEM_MODULE')" href="../../_constants/LTI_ITEM_MODULE.html" onMouseOver="constPopup(event,'LTI_ITEM_MODULE')">LTI_ITEM_MODULE</a>, <a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('id')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l177"><span class="linenum"> 177</span></a>  
<a name="l178"><span class="linenum"> 178</span></a>      <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('lti_submission', array('ltiid' =&gt; <a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('id')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>,
<a name="l179"><span class="linenum"> 179</span></a>          'launchid' =&gt; <a class="var it8010" onMouseOver="hilite(8010)" onMouseOut="lolite()" onClick="logVariable('launchid')" href="../../_variables/launchid.html">$launchid</a>), 'id');
<a name="l180"><span class="linenum"> 180</span></a>      if (<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l181"><span class="linenum"> 181</span></a>          <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l182"><span class="linenum"> 182</span></a>      } else {
<a name="l183"><span class="linenum"> 183</span></a>          <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> = null;
<a name="l184"><span class="linenum"> 184</span></a>      }
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>      if (!empty(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>)) {
<a name="l187"><span class="linenum"> 187</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('lti_submission', array(
<a name="l188"><span class="linenum"> 188</span></a>              'id' =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>,
<a name="l189"><span class="linenum"> 189</span></a>              'dateupdated' =&gt; <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(),
<a name="l190"><span class="linenum"> 190</span></a>              'gradepercent' =&gt; <a class="var it8011" onMouseOver="hilite(8011)" onMouseOut="lolite()" onClick="logVariable('gradeval')" href="../../_variables/gradeval.html">$gradeval</a>,
<a name="l191"><span class="linenum"> 191</span></a>              'state' =&gt; 2
<a name="l192"><span class="linenum"> 192</span></a>          ));
<a name="l193"><span class="linenum"> 193</span></a>      } else {
<a name="l194"><span class="linenum"> 194</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('lti_submission', array(
<a name="l195"><span class="linenum"> 195</span></a>              'ltiid' =&gt; <a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('id')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l196"><span class="linenum"> 196</span></a>              'userid' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>,
<a name="l197"><span class="linenum"> 197</span></a>              'datesubmitted' =&gt; <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(),
<a name="l198"><span class="linenum"> 198</span></a>              'dateupdated' =&gt; <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(),
<a name="l199"><span class="linenum"> 199</span></a>              'gradepercent' =&gt; <a class="var it8011" onMouseOver="hilite(8011)" onMouseOut="lolite()" onClick="logVariable('gradeval')" href="../../_variables/gradeval.html">$gradeval</a>,
<a name="l200"><span class="linenum"> 200</span></a>              'originalgrade' =&gt; <a class="var it8011" onMouseOver="hilite(8011)" onMouseOut="lolite()" onClick="logVariable('gradeval')" href="../../_variables/gradeval.html">$gradeval</a>,
<a name="l201"><span class="linenum"> 201</span></a>              'launchid' =&gt; <a class="var it8010" onMouseOver="hilite(8010)" onMouseOut="lolite()" onClick="logVariable('launchid')" href="../../_variables/launchid.html">$launchid</a>,
<a name="l202"><span class="linenum"> 202</span></a>              'state' =&gt; 1
<a name="l203"><span class="linenum"> 203</span></a>          ));
<a name="l204"><span class="linenum"> 204</span></a>      }
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>      return <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> == <a class="constant" onClick="logConstant('GRADE_UPDATE_OK')" href="../../_constants/GRADE_UPDATE_OK.html" onMouseOver="constPopup(event,'GRADE_UPDATE_OK')">GRADE_UPDATE_OK</a>;
<a name="l207"><span class="linenum"> 207</span></a>  }
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>  function <a class="function" onClick="logFunction('lti_read_grade')" href="../../_functions/lti_read_grade.html" onMouseOver="funcPopup(event,'lti_read_grade')">lti_read_grade</a>(<a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l210"><span class="linenum"> 210</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l211"><span class="linenum"> 211</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l212"><span class="linenum"> 212</span></a>  
<a name="l213"><span class="linenum"> 213</span></a>      <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('course')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, <a class="constant" onClick="logConstant('LTI_ITEM_TYPE')" href="../../_constants/LTI_ITEM_TYPE.html" onMouseOver="constPopup(event,'LTI_ITEM_TYPE')">LTI_ITEM_TYPE</a>, <a class="constant" onClick="logConstant('LTI_ITEM_MODULE')" href="../../_constants/LTI_ITEM_MODULE.html" onMouseOver="constPopup(event,'LTI_ITEM_MODULE')">LTI_ITEM_MODULE</a>, <a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('id')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>      <a class="var it33561" onMouseOver="hilite(33561)" onMouseOut="lolite()" onClick="logVariable('ltigrade')" href="../../_variables/ltigrade.html">$ltigrade</a> = <a class="phpfunction" onClick="logFunction('floatval')" href="../../_functions/floatval.html" onMouseOver="phpfuncPopup(event,'floatval')">floatval</a>(<a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('grade')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>);
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>      if (!empty(<a class="var it33561" onMouseOver="hilite(33561)" onMouseOut="lolite()" onClick="logVariable('ltigrade')" href="../../_variables/ltigrade.html">$ltigrade</a>) &amp;&amp; isset(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>) &amp;&amp; isset(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades)) {
<a name="l218"><span class="linenum"> 218</span></a>          foreach (<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades as <a class="var it33562" onMouseOver="hilite(33562)" onMouseOut="lolite()" onClick="logVariable('agrade')" href="../../_variables/agrade.html">$agrade</a>) {
<a name="l219"><span class="linenum"> 219</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it33562" onMouseOver="hilite(33562)" onMouseOut="lolite()" onClick="logVariable('agrade')" href="../../_variables/agrade.html">$agrade</a>-&gt;<a onClick="logVariable('grade')" class="var it41994" onMouseOver="hilite(41994)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>;
<a name="l220"><span class="linenum"> 220</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> / <a class="var it33561" onMouseOver="hilite(33561)" onMouseOut="lolite()" onClick="logVariable('ltigrade')" href="../../_variables/ltigrade.html">$ltigrade</a>;
<a name="l221"><span class="linenum"> 221</span></a>              break;
<a name="l222"><span class="linenum"> 222</span></a>          }
<a name="l223"><span class="linenum"> 223</span></a>      }
<a name="l224"><span class="linenum"> 224</span></a>  
<a name="l225"><span class="linenum"> 225</span></a>      if (isset(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>)) {
<a name="l226"><span class="linenum"> 226</span></a>          return <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>;
<a name="l227"><span class="linenum"> 227</span></a>      }
<a name="l228"><span class="linenum"> 228</span></a>  }
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>  function <a class="function" onClick="logFunction('lti_delete_grade')" href="../../_functions/lti_delete_grade.html" onMouseOver="funcPopup(event,'lti_delete_grade')">lti_delete_grade</a>(<a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l231"><span class="linenum"> 231</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l232"><span class="linenum"> 232</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = new stdClass();
<a name="l235"><span class="linenum"> 235</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>   = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l236"><span class="linenum"> 236</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/rawgrade.html">rawgrade</a> = null;
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>      <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>(<a class="constant" onClick="logConstant('LTI_SOURCE')" href="../../_constants/LTI_SOURCE.html" onMouseOver="constPopup(event,'LTI_SOURCE')">LTI_SOURCE</a>, <a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('course')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, <a class="constant" onClick="logConstant('LTI_ITEM_TYPE')" href="../../_constants/LTI_ITEM_TYPE.html" onMouseOver="constPopup(event,'LTI_ITEM_TYPE')">LTI_ITEM_TYPE</a>, <a class="constant" onClick="logConstant('LTI_ITEM_MODULE')" href="../../_constants/LTI_ITEM_MODULE.html" onMouseOver="constPopup(event,'LTI_ITEM_MODULE')">LTI_ITEM_MODULE</a>, <a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('id')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l239"><span class="linenum"> 239</span></a>  
<a name="l240"><span class="linenum"> 240</span></a>      return <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> == <a class="constant" onClick="logConstant('GRADE_UPDATE_OK')" href="../../_constants/GRADE_UPDATE_OK.html" onMouseOver="constPopup(event,'GRADE_UPDATE_OK')">GRADE_UPDATE_OK</a>;
<a name="l241"><span class="linenum"> 241</span></a>  }
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>  function <a class="function" onClick="logFunction('lti_verify_message')" href="../../_functions/lti_verify_message.html" onMouseOver="funcPopup(event,'lti_verify_message')">lti_verify_message</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, <a class="var it28218" onMouseOver="hilite(28218)" onMouseOut="lolite()" onClick="logVariable('sharedsecrets')" href="../../_variables/sharedsecrets.html">$sharedsecrets</a>, <a class="var it2792" onMouseOver="hilite(2792)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../_variables/body.html">$body</a>, <a class="var it293" onMouseOver="hilite(293)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../_variables/headers.html">$headers</a> = null) {
<a name="l244"><span class="linenum"> 244</span></a>      foreach (<a class="var it28218" onMouseOver="hilite(28218)" onMouseOut="lolite()" onClick="logVariable('sharedsecrets')" href="../../_variables/sharedsecrets.html">$sharedsecrets</a> as <a class="var it3338" onMouseOver="hilite(3338)" onMouseOut="lolite()" onClick="logVariable('secret')" href="../../_variables/secret.html">$secret</a>) {
<a name="l245"><span class="linenum"> 245</span></a>          <a class="var it33563" onMouseOver="hilite(33563)" onMouseOut="lolite()" onClick="logVariable('signaturefailed')" href="../../_variables/signaturefailed.html">$signaturefailed</a> = false;
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>          try {
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">            // TODO: Switch to core oauthlib once implemented - MDL-30149.</span>
<a name="l249"><span class="linenum"> 249</span></a>              lti\<a class="function" onClick="logFunction('handle_oauth_body_post')" href="../../_functions/handle_oauth_body_post.html" onMouseOver="funcPopup(event,'handle_oauth_body_post')">handle_oauth_body_post</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, <a class="var it3338" onMouseOver="hilite(3338)" onMouseOut="lolite()" onClick="logVariable('secret')" href="../../_variables/secret.html">$secret</a>, <a class="var it2792" onMouseOver="hilite(2792)" onMouseOut="lolite()" onClick="logVariable('body')" href="../../_variables/body.html">$body</a>, <a class="var it293" onMouseOver="hilite(293)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../_variables/headers.html">$headers</a>);
<a name="l250"><span class="linenum"> 250</span></a>          } catch (Exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l251"><span class="linenum"> 251</span></a>              <a class="var it33563" onMouseOver="hilite(33563)" onMouseOut="lolite()" onClick="logVariable('signaturefailed')" href="../../_variables/signaturefailed.html">$signaturefailed</a> = true;
<a name="l252"><span class="linenum"> 252</span></a>          }
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>          if (!<a class="var it33563" onMouseOver="hilite(33563)" onMouseOut="lolite()" onClick="logVariable('signaturefailed')" href="../../_variables/signaturefailed.html">$signaturefailed</a>) {
<a name="l255"><span class="linenum"> 255</span></a>              return <a class="var it3338" onMouseOver="hilite(3338)" onMouseOut="lolite()" onClick="logVariable('secret')" href="../../_variables/secret.html">$secret</a>; <span class="comment">// Return the secret used to sign the message).</span>
<a name="l256"><span class="linenum"> 256</span></a>          }
<a name="l257"><span class="linenum"> 257</span></a>      }
<a name="l258"><span class="linenum"> 258</span></a>  
<a name="l259"><span class="linenum"> 259</span></a>      return false;
<a name="l260"><span class="linenum"> 260</span></a>  }
<a name="l261"><span class="linenum"> 261</span></a>  
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">/**</span>
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment"> * Validate source ID from external request</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment"> *</span>
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment"> * @param object $ltiinstance</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment"> * @param object $parsed</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment"> * @throws Exception</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment"> */</span>
<a name="l269"><span class="linenum"> 269</span></a>  function <a class="function" onClick="logFunction('lti_verify_sourcedid')" href="../../_functions/lti_verify_sourcedid.html" onMouseOver="funcPopup(event,'lti_verify_sourcedid')">lti_verify_sourcedid</a>(<a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>, <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>) {
<a name="l270"><span class="linenum"> 270</span></a>      <a class="var it33564" onMouseOver="hilite(33564)" onMouseOut="lolite()" onClick="logVariable('sourceid')" href="../../_variables/sourceid.html">$sourceid</a> = <a class="function" onClick="logFunction('lti_build_sourcedid')" href="../../_functions/lti_build_sourcedid.html" onMouseOver="funcPopup(event,'lti_build_sourcedid')">lti_build_sourcedid</a>(<a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('instanceid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/instanceid.html">instanceid</a>, <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('userid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>,
<a name="l271"><span class="linenum"> 271</span></a>          <a class="var it8008" onMouseOver="hilite(8008)" onMouseOut="lolite()" onClick="logVariable('ltiinstance')" href="../../_variables/ltiinstance.html">$ltiinstance</a>-&gt;<a onClick="logVariable('servicesalt')" class="var it41992" onMouseOver="hilite(41992)" onMouseOut="lolite()" href="../../_variables/servicesalt.html">servicesalt</a>, <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('typeid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/typeid.html">typeid</a>, <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('launchid')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/launchid.html">launchid</a>);
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>      if (<a class="var it33564" onMouseOver="hilite(33564)" onMouseOut="lolite()" onClick="logVariable('sourceid')" href="../../_variables/sourceid.html">$sourceid</a>-&gt;<a onClick="logVariable('hash')" class="var it41995" onMouseOver="hilite(41995)" onMouseOut="lolite()" href="../../_variables/hash.html">hash</a> != <a class="var it251" onMouseOver="hilite(251)" onMouseOut="lolite()" onClick="logVariable('parsed')" href="../../_variables/parsed.html">$parsed</a>-&gt;<a onClick="logVariable('sourcedidhash')" class="var it40524" onMouseOver="hilite(40524)" onMouseOut="lolite()" href="../../_variables/sourcedidhash.html">sourcedidhash</a>) {
<a name="l274"><span class="linenum"> 274</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('Exception')" href="../../_classes/exception.html" onMouseOver="classPopup(event,'exception')">Exception</a>('SourcedId hash not valid');
<a name="l275"><span class="linenum"> 275</span></a>      }
<a name="l276"><span class="linenum"> 276</span></a>  }
<a name="l277"><span class="linenum"> 277</span></a>  
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">/**</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment"> * Extend the LTI services through the ltisource plugins</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment"> *</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment"> * @param stdClass $data LTI request data</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment"> * @return bool</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment"> * @throws coding_exception</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment"> */</span>
<a name="l285"><span class="linenum"> 285</span></a>  function <a class="function" onClick="logFunction('lti_extend_lti_services')" href="../../_functions/lti_extend_lti_services.html" onMouseOver="funcPopup(event,'lti_extend_lti_services')">lti_extend_lti_services</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l286"><span class="linenum"> 286</span></a>      <a class="var it1127" onMouseOver="hilite(1127)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> = <a class="function" onClick="logFunction('get_plugin_list_with_function')" href="../../_functions/get_plugin_list_with_function.html" onMouseOver="funcPopup(event,'get_plugin_list_with_function')">get_plugin_list_with_function</a>('ltisource', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('messagetype')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/messagetype.html">messagetype</a>);
<a name="l287"><span class="linenum"> 287</span></a>      if (!empty(<a class="var it1127" onMouseOver="hilite(1127)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a>)) {
<a name="l288"><span class="linenum"> 288</span></a>          try {
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment">            // There can only be one.</span>
<a name="l290"><span class="linenum"> 290</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1127" onMouseOver="hilite(1127)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a>) &gt; 1) {
<a name="l291"><span class="linenum"> 291</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('More than one ltisource plugin handler found');
<a name="l292"><span class="linenum"> 292</span></a>              }
<a name="l293"><span class="linenum"> 293</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('xml')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/xml.html">xml</a> = new SimpleXMLElement(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('body')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/body.html">body</a>);
<a name="l294"><span class="linenum"> 294</span></a>              <a class="var it1032" onMouseOver="hilite(1032)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../_variables/callback.html">$callback</a> = <a class="phpfunction" onClick="logFunction('current')" href="../../_functions/current.html" onMouseOver="phpfuncPopup(event,'current')">current</a>(<a class="var it1127" onMouseOver="hilite(1127)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a>);
<a name="l295"><span class="linenum"> 295</span></a>              <a class="phpfunction" onClick="logFunction('call_user_func')" href="../../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>(<a class="var it1032" onMouseOver="hilite(1032)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../_variables/callback.html">$callback</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l296"><span class="linenum"> 296</span></a>          } catch (moodle_exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l297"><span class="linenum"> 297</span></a>              <a class="var it111" onMouseOver="hilite(111)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../_variables/error.html">$error</a> = <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>();
<a name="l298"><span class="linenum"> 298</span></a>              if (<a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>)) {
<a name="l299"><span class="linenum"> 299</span></a>                  <a class="var it111" onMouseOver="hilite(111)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../_variables/error.html">$error</a> .= ' '.<a class="function" onClick="logFunction('format_backtrace')" href="../../_functions/format_backtrace.html" onMouseOver="funcPopup(event,'format_backtrace')">format_backtrace</a>(<a class="function" onClick="logFunction('get_exception_info')" href="../../_functions/get_exception_info.html" onMouseOver="funcPopup(event,'get_exception_info')">get_exception_info</a>(<a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>)-&gt;backtrace);
<a name="l300"><span class="linenum"> 300</span></a>              }
<a name="l301"><span class="linenum"> 301</span></a>              <a class="var it8007" onMouseOver="hilite(8007)" onMouseOut="lolite()" onClick="logVariable('responsexml')" href="../../_variables/responsexml.html">$responsexml</a> = <a class="function" onClick="logFunction('lti_get_response_xml')" href="../../_functions/lti_get_response_xml.html" onMouseOver="funcPopup(event,'lti_get_response_xml')">lti_get_response_xml</a>(
<a name="l302"><span class="linenum"> 302</span></a>                  'failure',
<a name="l303"><span class="linenum"> 303</span></a>                  <a class="var it111" onMouseOver="hilite(111)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../_variables/error.html">$error</a>,
<a name="l304"><span class="linenum"> 304</span></a>                  <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('messageid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/messageid.html">messageid</a>,
<a name="l305"><span class="linenum"> 305</span></a>                  <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;messagetype
<a name="l306"><span class="linenum"> 306</span></a>              );
<a name="l307"><span class="linenum"> 307</span></a>  
<a name="l308"><span class="linenum"> 308</span></a>              <a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('HTTP/1.0 400 bad request');
<a name="l309"><span class="linenum"> 309</span></a>              echo <a class="var it8007" onMouseOver="hilite(8007)" onMouseOut="lolite()" onClick="logVariable('responsexml')" href="../../_variables/responsexml.html">$responsexml</a>-&gt;<a class="function" onClick="logFunction('asXML')" href="../../_functions/asxml.html" onMouseOver="funcPopup(event,'asxml')">asXML</a>();
<a name="l310"><span class="linenum"> 310</span></a>          }
<a name="l311"><span class="linenum"> 311</span></a>          return true;
<a name="l312"><span class="linenum"> 312</span></a>      }
<a name="l313"><span class="linenum"> 313</span></a>      return false;
<a name="l314"><span class="linenum"> 314</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'addattribute': ['addattribute', 'Adds a custom attribute to a pre-existing element ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',104]], 19],
'format_backtrace': ['format_backtrace', 'Formats a backtrace ready for output. ', [['lib','setuplib.php',697]], 16],
'lti_parse_grade_replace_message': ['lti_parse_grade_replace_message', '', [['mod/lti','servicelib.php',66]], 2],
'lti_parse_grade_delete_message': ['lti_parse_grade_delete_message', '', [['mod/lti','servicelib.php',111]], 1],
'addchild': ['addchild', 'Add a child. This will be either spgrContainer or spContainer ', [['lib/phpexcel/PHPExcel/Shared/Escher/DgContainer','SpgrContainer.php',71],['lib/alfresco/Service','Node.php',179]], 42],
'lti_parse_grade_read_message': ['lti_parse_grade_read_message', '', [['mod/lti','servicelib.php',95]], 1],
'lti_update_grade': ['lti_update_grade', '', [['mod/lti','servicelib.php',163]], 1],
'grade_get_grades': ['grade_get_grades', 'Returns grading information for given activity, optionally with user grades Manual, course or category items can not be queried. ', [['lib','gradelib.php',328]], 53],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',2854]], 853],
'lti_verify_message': ['lti_verify_message', '', [['mod/lti','servicelib.php',243]], 1],
'lti_read_grade': ['lti_read_grade', '', [['mod/lti','servicelib.php',209]], 1],
'asxml': ['asxml', 'Returns the item\'s original XML ', [['lib/zend/Zend/Service/Amazon','Item.php',263]], 15],
'handle_oauth_body_post': ['handle_oauth_body_post', '', [['mod/lti','OAuthBody.php',53]], 2],
'lti_get_response_xml': ['lti_get_response_xml', '', [['mod/lti','servicelib.php',37]], 6],
'get_plugin_list_with_function': ['get_plugin_list_with_function', 'Get a list of all the plugins of a given type that define a certain API function in a certain file. The plugin component names and function names are returned. ', [['lib','moodlelib.php',7009]], 15],
'lti_accepts_grades': ['lti_accepts_grades', '', [['mod/lti','servicelib.php',127]], 3],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'getmessage': ['getmessage', 'Get the error message from an error object. ', [['lib/pear','PEAR.php',921],['lib/htmlpurifier/HTMLPurifier','Language.php',86],['lib/google/src/Google/Service','Reports.php',1105],['lib/google/src/Google/Service','Gmail.php',1283],['lib/google/src/Google/Service','IdentityToolkit.php',1159],['lib/google/src/Google/Service','Dfareporting.php',2039],['lib/zend/Zend/XmlRpc','Fault.php',152],['lib/google/src/Google/Service','Books.php',3266],['lib/google/src/Google/Service','Books.php',3951],['lib/google/src/Google/Service','AdExchangeSeller.php',1042],['lib/google/src/Google/Service','Bigquery.php',1245],['lib/google/src/Google/Service','Freebase.php',440],['lib/google/src/Google/Service','Autoscaler.php',1078],['lib/google/src/Google/Service','Autoscaler.php',1170],['lib/google/src/Google/Service','ShoppingContent.php',2096],['lib/google/src/Google/Service','ShoppingContent.php',2498],['lib/google/src/Google/Service','ShoppingContent.php',2543],['lib/zend/Zend/Http','Response.php',323],['lib/google/src/Google/Service','Compute.php',5785],['lib/google/src/Google/Service','Compute.php',6842],['lib/google/src/Google/Service','Compute.php',6934],['lib/google/src/Google/Service','Compute.php',7440],['lib/google/src/Google/Service','Compute.php',8566],['lib/google/src/Google/Service','Compute.php',8969],['lib/google/src/Google/Service','Compute.php',9561],['lib/google/src/Google/Service','Compute.php',9653],['lib/google/src/Google/Service','Compute.php',9745],['lib/google/src/Google/Service','Compute.php',10382],['lib/google/src/Google/Service','Compute.php',11098],['lib/google/src/Google/Service','Compute.php',11524],['lib/zend/Zend/Service/DeveloperGarden/Request/SendSms','SendSmsAbstract.php',148],['lib/google/src/Google/Service','AdSense.php',2959],['lib/google/src/Google/Service','Pubsub.php',700],['lib/google/src/Google/Service','Pubsub.php',737],['lib/google/src/Google/Service','Replicapool.php',1151],['lib/google/src/Google/Service','Replicapool.php',1243],['lib/google/src/Google/Service','Resourceviews.php',890],['lib/google/src/Google/Service','Resourceviews.php',982]], 434],
'lti_extend_lti_services': ['lti_extend_lti_services', 'Extend the LTI services through the ltisource plugins ', [['mod/lti','servicelib.php',278]], 1],
'lti_delete_grade': ['lti_delete_grade', '', [['mod/lti','servicelib.php',230]], 1],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'lti_get_config': ['lti_get_config', 'Transforms a basic LTI object to an array ', [['mod/lti','locallib.php',1170]], 2],
'get_exception_info': ['get_exception_info', 'Wrapper to call {@link get_exception_info()}. ', [['lib/tests','setuplib_test.php',497],['lib','setuplib.php',466]], 21],
'grade_update': ['grade_update', 'Submit new or update grade; update/create grade_item definition. Grade must have userid specified, rawgrade and feedback with format are optional. rawgrade NULL means \'Not graded\'. Missing property or key means does not change the existing value. ', [['lib','gradelib.php',40]], 27],
'set_user': ['set_user', 'Set current user. ', [['lib/classes/session','manager.php',681]], 29],
'lti_verify_sourcedid': ['lti_verify_sourcedid', 'Validate source ID from external request ', [['mod/lti','servicelib.php',262]], 4],
'lti_parse_message_id': ['lti_parse_message_id', '', [['mod/lti','servicelib.php',59]], 5],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pgsql_native_moodle_database.php',1137],['lib/dml','oci_native_moodle_database.php',1355],['lib/dml','sqlsrv_native_moodle_database.php',1081],['lib/dml','mssql_native_moodle_database.php',1003],['lib/dml','mysqli_native_moodle_database.php',1397],['lib/dml/tests','dml_test.php',5430],['lib/dml','pdo_moodle_database.php',460]], 565],
'lti_build_sourcedid': ['lti_build_sourcedid', 'Build source ID ', [['mod/lti','locallib.php',291]], 2],
'lti_set_session_user': ['lti_set_session_user', 'Set the passed user ID to the session user. ', [['mod/lti','servicelib.php',150]], 2],
'explode': ['explode', '', [], 1599],
'is_array': ['is_array', '', [], 1820],
'count': ['count', '', [], 3984],
'in_array': ['in_array', '', [], 1173],
'time': ['time', '', [], 1768],
'floatval': ['floatval', '', [], 110],
'str_replace': ['str_replace', '', [], 1667],
'is_numeric': ['is_numeric', '', [], 723],
'call_user_func': ['call_user_func', '', [], 126],
'define': ['define', '', [], 2170],
'mt_rand': ['mt_rand', '', [], 54],
'defined': ['defined', '', [], 4098],
'current': ['current', '', [], 156],
'header': ['header', '', [], 1294]};
CLASS_DATA={
'manager': ['manager', 'Defines MAnager class for myprofile navigation tree. ', [['user/classes/output/myprofile','manager.php',28],['lib/classes/log','manager.php',29],['admin/tool/messageinbound/classes','manager.php',29],['lib/classes/message','manager.php',31],['lib/classes/message/inbound','manager.php',29],['admin/tool/log/classes/log','manager.php',29],['lib/classes/session','manager.php',29],['lib/classes/task','manager.php',28],['lib/classes/event','manager.php',30]], 346],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',214]], 867],
'exception': ['exception', 'Session related exception class. ', [['lib/classes/session','exception.php',29],['lib/horde/framework/Horde/Socket/Client','Exception.php',17]], 223]};
CONST_DATA={
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 554],
'LTI_ITEM_MODULE': ['LTI_ITEM_MODULE', '', [['mod/lti','servicelib.php',34]], 4],
'LTI_SOURCE': ['LTI_SOURCE', '', [['mod/lti','servicelib.php',35]], 3],
'GRADE_UPDATE_OK': ['GRADE_UPDATE_OK', '', [['lib/grade','constants.php',103]], 18],
'LTI_ITEM_TYPE': ['LTI_ITEM_TYPE', '', [['mod/lti','servicelib.php',33]], 4],
'LTI_SETTING_ALWAYS': ['LTI_SETTING_ALWAYS', '', [['mod/lti','locallib.php',76]], 14],
'LTI_SETTING_DELEGATE': ['LTI_SETTING_DELEGATE', '', [['mod/lti','locallib.php',77]], 12],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
