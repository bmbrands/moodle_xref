<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/lti/amd/src/external_registration.js source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='mod/lti/amd/src';
filename='external_registration.js.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/lti/amd/src/</a> -> <a href="external_registration.js.html">external_registration.js</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="external_registration.js.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="external_registration.js.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">//</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">//</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">//</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l15"><span class="linenum">  15</span></a>  
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">/**</span>
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment"> * Encapsules the behavior for creating a tool type and tool proxy from a</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * registration url in Moodle.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * Manages the UI while operations are occuring, including rendering external</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * registration page within the iframe.</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> *</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * See template: mod_lti/external_registration</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> *</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * @module     mod_lti/external_registration</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * @class      external_registration</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * @package    mod_lti</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * @copyright  2015 Ryan Wyllie &lt;ryan@moodle.com&gt;</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @since      3.1</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> */</span>
<a name="l32"><span class="linenum">  32</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(['jquery', 'core/ajax', 'core/notification', 'core/templates', 'mod_lti/events',
<a name="l33"><span class="linenum">  33</span></a>          'mod_lti/tool_proxy', 'mod_lti/tool_type', 'mod_lti/keys', 'core/str'],
<a name="l34"><span class="linenum">  34</span></a>          function($, ajax, notification, templates, ltiEvents, toolProxy, toolType, KEYS, str) {
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>      var SELECTORS = {
<a name="l37"><span class="linenum">  37</span></a>          EXTERNAL_REGISTRATION_CONTAINER: '#external-registration-page-container',
<a name="l38"><span class="linenum">  38</span></a>          EXTERNAL_REGISTRATION_TEMPLATE_CONTAINER: '#external-registration-template-container',
<a name="l39"><span class="linenum">  39</span></a>          EXTERNAL_REGISTRATION_CANCEL_BUTTON: '#cancel-external-registration',
<a name="l40"><span class="linenum">  40</span></a>          TOOL_TYPE_CAPABILITIES_CONTAINER: '#tool-type-capabilities-container',
<a name="l41"><span class="linenum">  41</span></a>          TOOL_TYPE_CAPABILITIES_TEMPLATE_CONTAINER: '#tool-type-capabilities-template-container',
<a name="l42"><span class="linenum">  42</span></a>          CAPABILITIES_AGREE_CONTAINER: '.capabilities-container',
<a name="l43"><span class="linenum">  43</span></a>      };
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>      <span class="comment">/**</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     * Return the external registration cancel button element. This button is</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">     * the cancel button that appears while the iframe is rendered.</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     *</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     * @method getExternalRegistrationCancelButton</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     * @private</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     * @return {JQuery} jQuery object</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     */</span>
<a name="l53"><span class="linenum">  53</span></a>      var getExternalRegistrationCancelButton = function() {
<a name="l54"><span class="linenum">  54</span></a>          return $(SELECTORS.EXTERNAL_REGISTRATION_CANCEL_BUTTON);
<a name="l55"><span class="linenum">  55</span></a>      };
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>      <span class="comment">/**</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     * Return the container that holds all elements for the external registration, including</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">     * the cancel button and the iframe.</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     *</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">     * @method getExternalRegistrationContainer</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">     * @private</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     * @return {JQuery} jQuery object</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     */</span>
<a name="l65"><span class="linenum">  65</span></a>      var getExternalRegistrationContainer = function() {
<a name="l66"><span class="linenum">  66</span></a>          return $(SELECTORS.EXTERNAL_REGISTRATION_CONTAINER);
<a name="l67"><span class="linenum">  67</span></a>      };
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>      <span class="comment">/**</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">     * Return the container that holds the external registration page template. It should</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment">     * be the iframe.</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">     *</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     * @method getExternalRegistrationTemplateContainer</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     * @private</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">     * @return {JQuery} jQuery object</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">     */</span>
<a name="l77"><span class="linenum">  77</span></a>      var getExternalRegistrationTemplateContainer = function() {
<a name="l78"><span class="linenum">  78</span></a>          return $(SELECTORS.EXTERNAL_REGISTRATION_TEMPLATE_CONTAINER);
<a name="l79"><span class="linenum">  79</span></a>      };
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>      <span class="comment">/**</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">     * Return the container that holds the elements for displaying the list of capabilities</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">     * that this tool type requires. This container wraps the loading indicator and the template</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">     * container.</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">     *</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">     * @method getToolTypeCapabilitiesContainer</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">     * @private</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">     * @return {JQuery} jQuery object</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">     */</span>
<a name="l90"><span class="linenum">  90</span></a>      var getToolTypeCapabilitiesContainer = function() {
<a name="l91"><span class="linenum">  91</span></a>          return $(SELECTORS.TOOL_TYPE_CAPABILITIES_CONTAINER);
<a name="l92"><span class="linenum">  92</span></a>      };
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>      <span class="comment">/**</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">     * Return the container that holds the template that lists the capabilities that the</span>
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">     * tool type will require.</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">     *</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">     * @method getToolTypeCapabilitiesTemplateContainer</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment">     * @private</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">     * @return {JQuery} jQuery object</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">     */</span>
<a name="l102"><span class="linenum"> 102</span></a>      var getToolTypeCapabilitiesTemplateContainer = function() {
<a name="l103"><span class="linenum"> 103</span></a>          return $(SELECTORS.TOOL_TYPE_CAPABILITIES_TEMPLATE_CONTAINER);
<a name="l104"><span class="linenum"> 104</span></a>      };
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>      <span class="comment">/**</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">     * Triggers a visual indicator to show that the capabilities section is loading.</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     *</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     * @method startLoadingCapabilitiesContainer</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">     * @private</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     */</span>
<a name="l112"><span class="linenum"> 112</span></a>      var startLoadingCapabilitiesContainer = function() {
<a name="l113"><span class="linenum"> 113</span></a>          getToolTypeCapabilitiesContainer().<a class="function" onClick="logFunction('addClass')" href="../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('loading');
<a name="l114"><span class="linenum"> 114</span></a>      };
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>      <span class="comment">/**</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     * Removes the visual indicator that shows the capabilities section is loading.</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">     *</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">     * @method stopLoadingCapabilitiesContainer</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">     * @private</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     */</span>
<a name="l122"><span class="linenum"> 122</span></a>      var stopLoadingCapabilitiesContainer = function() {
<a name="l123"><span class="linenum"> 123</span></a>          getToolTypeCapabilitiesContainer().removeClass('loading');
<a name="l124"><span class="linenum"> 124</span></a>      };
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>      <span class="comment">/**</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     * Adds a visual indicator that shows the cancel button is loading.</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">     *</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     * @method startLoadingCancel</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     * @private</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">     */</span>
<a name="l132"><span class="linenum"> 132</span></a>      var startLoadingCancel = function() {
<a name="l133"><span class="linenum"> 133</span></a>          getExternalRegistrationCancelButton().<a class="function" onClick="logFunction('addClass')" href="../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('loading');
<a name="l134"><span class="linenum"> 134</span></a>      };
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>      <span class="comment">/**</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">     * Adds a visual indicator that shows the cancel button is loading.</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     *</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     * @method startLoadingCancel</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">     * @private</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">     */</span>
<a name="l142"><span class="linenum"> 142</span></a>      var stopLoadingCancel = function() {
<a name="l143"><span class="linenum"> 143</span></a>          getExternalRegistrationCancelButton().removeClass('loading');
<a name="l144"><span class="linenum"> 144</span></a>      };
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>      <span class="comment">/**</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">     * Stops displaying the tool type capabilities container.</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     *</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     * @method hideToolTypeCapabilitiesContainer</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     * @private</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">     */</span>
<a name="l152"><span class="linenum"> 152</span></a>      var hideToolTypeCapabilitiesContainer = function() {
<a name="l153"><span class="linenum"> 153</span></a>          getToolTypeCapabilitiesContainer().<a class="function" onClick="logFunction('addClass')" href="../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('hidden');
<a name="l154"><span class="linenum"> 154</span></a>      };
<a name="l155"><span class="linenum"> 155</span></a>  
<a name="l156"><span class="linenum"> 156</span></a>      <span class="comment">/**</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">     * Displays the tool type capabilities container.</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">     *</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">     * @method showToolTypeCapabilitiesContainer</span>
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">     * @private</span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">     */</span>
<a name="l162"><span class="linenum"> 162</span></a>      var showToolTypeCapabilitiesContainer = function() {
<a name="l163"><span class="linenum"> 163</span></a>          getToolTypeCapabilitiesContainer().removeClass('hidden');
<a name="l164"><span class="linenum"> 164</span></a>      };
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>      <span class="comment">/**</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     * Stops displaying the external registration content.</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     *</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     * @method hideExternalRegistrationContent</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     * @private</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">     */</span>
<a name="l172"><span class="linenum"> 172</span></a>      var hideExternalRegistrationContent = function() {
<a name="l173"><span class="linenum"> 173</span></a>          getExternalRegistrationContainer().<a class="function" onClick="logFunction('addClass')" href="../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('hidden');
<a name="l174"><span class="linenum"> 174</span></a>      };
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>      <span class="comment">/**</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">     * Displays the external registration content.</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">     *</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">     * @method showExternalRegistrationContent</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     * @private</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     */</span>
<a name="l182"><span class="linenum"> 182</span></a>      var showExternalRegistrationContent = function() {
<a name="l183"><span class="linenum"> 183</span></a>          getExternalRegistrationContainer().removeClass('hidden');
<a name="l184"><span class="linenum"> 184</span></a>      };
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>      <span class="comment">/**</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">     * Save the given tool proxy id on the DOM.</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">     *</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">     * @method setToolProxyId</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">     * @private</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">     * @param {Integer} id Tool proxy ID</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">     */</span>
<a name="l193"><span class="linenum"> 193</span></a>      var setToolProxyId = function(id) {
<a name="l194"><span class="linenum"> 194</span></a>          var button = getExternalRegistrationCancelButton();
<a name="l195"><span class="linenum"> 195</span></a>          button.attr('data-tool-proxy-id', id);
<a name="l196"><span class="linenum"> 196</span></a>      };
<a name="l197"><span class="linenum"> 197</span></a>  
<a name="l198"><span class="linenum"> 198</span></a>      <span class="comment">/**</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">     * Return the saved tool proxy id.</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">     *</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">     * @method getToolProxyId</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">     * @private</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">     * @return {String} Tool proxy ID</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">     */</span>
<a name="l205"><span class="linenum"> 205</span></a>      var getToolProxyId = function() {
<a name="l206"><span class="linenum"> 206</span></a>          var button = getExternalRegistrationCancelButton();
<a name="l207"><span class="linenum"> 207</span></a>          return button.attr('data-tool-proxy-id');
<a name="l208"><span class="linenum"> 208</span></a>      };
<a name="l209"><span class="linenum"> 209</span></a>  
<a name="l210"><span class="linenum"> 210</span></a>      <span class="comment">/**</span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">     * Remove the saved tool proxy id.</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">     *</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     * @method clearToolProxyId</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     * @private</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     */</span>
<a name="l216"><span class="linenum"> 216</span></a>      var clearToolProxyId = function() {
<a name="l217"><span class="linenum"> 217</span></a>          var button = getExternalRegistrationCancelButton();
<a name="l218"><span class="linenum"> 218</span></a>          button.removeAttr('data-tool-proxy-id');
<a name="l219"><span class="linenum"> 219</span></a>      };
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>      <span class="comment">/**</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">     * Returns true if a tool proxy id has been recorded.</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">     *</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">     * @method hasToolProxyId</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment">     * @private</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">     * @return {Boolean}</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">     */</span>
<a name="l228"><span class="linenum"> 228</span></a>      var hasToolProxyId = function() {
<a name="l229"><span class="linenum"> 229</span></a>          return getToolProxyId() ? true : false;
<a name="l230"><span class="linenum"> 230</span></a>      };
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>      <span class="comment">/**</span>
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">     * Checks if this process has created a tool proxy within</span>
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment">     * Moodle yet.</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">     *</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">     * @method hasCreatedToolProxy</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">     * @private</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">     * @return {Boolean}</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">     */</span>
<a name="l240"><span class="linenum"> 240</span></a>      var hasCreatedToolProxy = function() {
<a name="l241"><span class="linenum"> 241</span></a>          var button = getExternalRegistrationCancelButton();
<a name="l242"><span class="linenum"> 242</span></a>          return button.attr('data-tool-proxy-new') &amp;&amp; hasToolProxyId();
<a name="l243"><span class="linenum"> 243</span></a>      };
<a name="l244"><span class="linenum"> 244</span></a>  
<a name="l245"><span class="linenum"> 245</span></a>      <span class="comment">/**</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">     * Records that this process has created a tool proxy.</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">     *</span>
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">     * @method setProxyAsNew</span>
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">     * @private</span>
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">     * @return {Boolean}</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">     */</span>
<a name="l252"><span class="linenum"> 252</span></a>      var setProxyAsNew = function() {
<a name="l253"><span class="linenum"> 253</span></a>          var button = getExternalRegistrationCancelButton();
<a name="l254"><span class="linenum"> 254</span></a>          return button.attr('data-tool-proxy-new', &quot;new&quot;);
<a name="l255"><span class="linenum"> 255</span></a>      };
<a name="l256"><span class="linenum"> 256</span></a>  
<a name="l257"><span class="linenum"> 257</span></a>      <span class="comment">/**</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">     * Records that this process has not created a tool proxy.</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">     *</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">     * @method setProxyAsOld</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">     * @private</span>
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">     * @return {Boolean}</span>
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment">     */</span>
<a name="l264"><span class="linenum"> 264</span></a>      var setProxyAsOld = function() {
<a name="l265"><span class="linenum"> 265</span></a>          var button = getExternalRegistrationCancelButton();
<a name="l266"><span class="linenum"> 266</span></a>          return button.removeAttr('data-tool-proxy-new');
<a name="l267"><span class="linenum"> 267</span></a>      };
<a name="l268"><span class="linenum"> 268</span></a>  
<a name="l269"><span class="linenum"> 269</span></a>      <span class="comment">/**</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">     * Gets the external registration request required to be sent to the external</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">     * registration page using a form.</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">     *</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">     * See mod_lti/tool_proxy_registration_form template.</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">     *</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">     * @method getRegistrationRequest</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">     * @private</span>
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">     * @param {Integer} id Tool Proxy ID</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">     * @return {Promise} jQuery Deferred object</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">     */</span>
<a name="l280"><span class="linenum"> 280</span></a>      var getRegistrationRequest = function(id) {
<a name="l281"><span class="linenum"> 281</span></a>          var request = {
<a name="l282"><span class="linenum"> 282</span></a>              methodname: 'mod_lti_get_tool_proxy_registration_request',
<a name="l283"><span class="linenum"> 283</span></a>              args: {
<a name="l284"><span class="linenum"> 284</span></a>                  id: id
<a name="l285"><span class="linenum"> 285</span></a>              }
<a name="l286"><span class="linenum"> 286</span></a>          };
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>          return ajax.<a class="function" onClick="logFunction('call')" href="../../../../_functions/call.html" onMouseOver="funcPopup(event,'call')">call</a>([request])[0];
<a name="l289"><span class="linenum"> 289</span></a>      };
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>      <span class="comment">/**</span>
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">     * Cancel an in progress external registration. This will perform any necessary</span>
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">     * clean up of tool proxies and return the page section back to the home section.</span>
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment">     *</span>
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment">     * @method cancelRegistration</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment">     * @private</span>
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">     * @return {Promise} jQuery Deferred object</span>
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">     */</span>
<a name="l299"><span class="linenum"> 299</span></a>      var cancelRegistration = function() {
<a name="l300"><span class="linenum"> 300</span></a>          startLoadingCancel();
<a name="l301"><span class="linenum"> 301</span></a>          var promise = $.Deferred();
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">        // If we've created a proxy as part of this process then</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">        // we need to delete it to clean up the data in the back end.</span>
<a name="l305"><span class="linenum"> 305</span></a>          if (hasCreatedToolProxy()) {
<a name="l306"><span class="linenum"> 306</span></a>              var id = getToolProxyId();
<a name="l307"><span class="linenum"> 307</span></a>              toolProxy.<a class="function" onClick="logFunction('delete')" href="../../../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>(id).<a class="function" onClick="logFunction('done')" href="../../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function() {
<a name="l308"><span class="linenum"> 308</span></a>                  promise.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>();
<a name="l309"><span class="linenum"> 309</span></a>              }).<a class="function" onClick="logFunction('fail')" href="../../../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>(function(failure) {
<a name="l310"><span class="linenum"> 310</span></a>                  promise.<a class="function" onClick="logFunction('reject')" href="../../../../_functions/reject.html" onMouseOver="funcPopup(event,'reject')">reject</a>(failure);
<a name="l311"><span class="linenum"> 311</span></a>              });
<a name="l312"><span class="linenum"> 312</span></a>          } else {
<a name="l313"><span class="linenum"> 313</span></a>              promise.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>();
<a name="l314"><span class="linenum"> 314</span></a>          }
<a name="l315"><span class="linenum"> 315</span></a>  
<a name="l316"><span class="linenum"> 316</span></a>          promise.<a class="function" onClick="logFunction('done')" href="../../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function() {
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">            // Return to the original page.</span>
<a name="l318"><span class="linenum"> 318</span></a>              finishExternalRegistration();
<a name="l319"><span class="linenum"> 319</span></a>              stopLoadingCancel();
<a name="l320"><span class="linenum"> 320</span></a>          }).<a class="function" onClick="logFunction('fail')" href="../../../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>(function(failure) {
<a name="l321"><span class="linenum"> 321</span></a>              notification.exception(failure);
<a name="l322"><span class="linenum"> 322</span></a>              finishExternalRegistration();
<a name="l323"><span class="linenum"> 323</span></a>              stopLoadingCancel();
<a name="l324"><span class="linenum"> 324</span></a>              str.<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('failedtodeletetoolproxy', 'mod_lti').<a class="function" onClick="logFunction('done')" href="../../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function(s) {
<a name="l325"><span class="linenum"> 325</span></a>                  var feedback = {
<a name="l326"><span class="linenum"> 326</span></a>                      message: s,
<a name="l327"><span class="linenum"> 327</span></a>                      error: true
<a name="l328"><span class="linenum"> 328</span></a>                  };
<a name="l329"><span class="linenum"> 329</span></a>                  $(document).<a class="function" onClick="logFunction('trigger')" href="../../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>(ltiEvents.REGISTRATION_FEEDBACK, feedback);
<a name="l330"><span class="linenum"> 330</span></a>              }).<a class="function" onClick="logFunction('fail')" href="../../../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>(notification.exception);
<a name="l331"><span class="linenum"> 331</span></a>          });
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>          return promise;
<a name="l334"><span class="linenum"> 334</span></a>      };
<a name="l335"><span class="linenum"> 335</span></a>  
<a name="l336"><span class="linenum"> 336</span></a>      <span class="comment">/**</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">     * Load the external registration template and render it in the DOM and display it.</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">     *</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">     * @method renderExternalRegistrationWindow</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">     * @private</span>
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">     * @param {Object} registrationRequest</span>
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment">     * @return {Promise} jQuery Deferred object</span>
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">     */</span>
<a name="l344"><span class="linenum"> 344</span></a>      var renderExternalRegistrationWindow = function(registrationRequest) {
<a name="l345"><span class="linenum"> 345</span></a>          var promise = templates.<a class="function" onClick="logFunction('render')" href="../../../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>('mod_lti/tool_proxy_registration_form', registrationRequest);
<a name="l346"><span class="linenum"> 346</span></a>  
<a name="l347"><span class="linenum"> 347</span></a>          promise.<a class="function" onClick="logFunction('done')" href="../../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function(html, js) {
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">            // Show the external registration page in an iframe.</span>
<a name="l349"><span class="linenum"> 349</span></a>              var container = getExternalRegistrationTemplateContainer();
<a name="l350"><span class="linenum"> 350</span></a>              container.<a class="function" onClick="logFunction('append')" href="../../../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>(html);
<a name="l351"><span class="linenum"> 351</span></a>              templates.runTemplateJS(js);
<a name="l352"><span class="linenum"> 352</span></a>  
<a name="l353"><span class="linenum"> 353</span></a>              container.<a class="function" onClick="logFunction('find')" href="../../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>('form').<a class="function" onClick="logFunction('submit')" href="../../../../_functions/submit.html" onMouseOver="funcPopup(event,'submit')">submit</a>();
<a name="l354"><span class="linenum"> 354</span></a>              showExternalRegistrationContent();
<a name="l355"><span class="linenum"> 355</span></a>          }).<a class="function" onClick="logFunction('fail')" href="../../../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>(notification.exception);
<a name="l356"><span class="linenum"> 356</span></a>  
<a name="l357"><span class="linenum"> 357</span></a>          return promise;
<a name="l358"><span class="linenum"> 358</span></a>      };
<a name="l359"><span class="linenum"> 359</span></a>  
<a name="l360"><span class="linenum"> 360</span></a>      <span class="comment">/**</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">     * Send a request to Moodle server to set the state of the tool type to configured (active).</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">     *</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">     * @method setTypeStatusActive</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">     * @private</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">     * @param {Object} typeData A set of data representing a type, as returned by a request to get a type</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">     *               from the Moodle server.</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">     * @return {Promise} jQuery Deferred object</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">     */</span>
<a name="l369"><span class="linenum"> 369</span></a>      var setTypeStatusActive = function(typeData) {
<a name="l370"><span class="linenum"> 370</span></a>          return toolType.<a class="function" onClick="logFunction('update')" href="../../../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>({
<a name="l371"><span class="linenum"> 371</span></a>              id: typeData.id,
<a name="l372"><span class="linenum"> 372</span></a>              state: toolType.constants.state.configured
<a name="l373"><span class="linenum"> 373</span></a>          });
<a name="l374"><span class="linenum"> 374</span></a>      };
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>      <span class="comment">/**</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">     * Render and display an agreement page for the user to acknowledge the list of capabilities</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">     * (groups of data) that the external tool requires in order to work. If the user agrees then</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">     * we will activate the tool so that it is immediately available. If they don't agree then</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     * the tool remains in a pending state within Moodle until agreement is given.</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">     *</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">     * @method promptForToolTypeCapabilitiesAgreement</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">     * @private</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">     * @param {Object} typeData A set of data representing a type, as returned by a request to get a type</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">     *               from the Moodle server.</span>
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">     * @return {Promise} jQuery Deferred object</span>
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">     */</span>
<a name="l388"><span class="linenum"> 388</span></a>      var promptForToolTypeCapabilitiesAgreement = function(typeData) {
<a name="l389"><span class="linenum"> 389</span></a>          var promise = $.Deferred();
<a name="l390"><span class="linenum"> 390</span></a>  
<a name="l391"><span class="linenum"> 391</span></a>          templates.<a class="function" onClick="logFunction('render')" href="../../../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>('mod_lti/tool_type_capabilities_agree', typeData).<a class="function" onClick="logFunction('done')" href="../../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function(html, js) {
<a name="l392"><span class="linenum"> 392</span></a>              var container = getToolTypeCapabilitiesTemplateContainer();
<a name="l393"><span class="linenum"> 393</span></a>  
<a name="l394"><span class="linenum"> 394</span></a>              hideExternalRegistrationContent();
<a name="l395"><span class="linenum"> 395</span></a>              showToolTypeCapabilitiesContainer();
<a name="l396"><span class="linenum"> 396</span></a>  
<a name="l397"><span class="linenum"> 397</span></a>              templates.replaceNodeContents(container, html, js);
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>              var choiceContainer = container.<a class="function" onClick="logFunction('find')" href="../../../../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(SELECTORS.CAPABILITIES_AGREE_CONTAINER);
<a name="l400"><span class="linenum"> 400</span></a>  
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">            // The user agrees to allow the tool to use the groups of data so we can go</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">            // ahead and activate it for them so that it can be used straight away.</span>
<a name="l403"><span class="linenum"> 403</span></a>              choiceContainer.<a class="function" onClick="logFunction('on')" href="../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(ltiEvents.CAPABILITIES_AGREE, function() {
<a name="l404"><span class="linenum"> 404</span></a>                  startLoadingCapabilitiesContainer();
<a name="l405"><span class="linenum"> 405</span></a>                  setTypeStatusActive(typeData).always(function() {
<a name="l406"><span class="linenum"> 406</span></a>                      stopLoadingCapabilitiesContainer();
<a name="l407"><span class="linenum"> 407</span></a>                      container.empty();
<a name="l408"><span class="linenum"> 408</span></a>                      promise.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>();
<a name="l409"><span class="linenum"> 409</span></a>                  });
<a name="l410"><span class="linenum"> 410</span></a>              });
<a name="l411"><span class="linenum"> 411</span></a>  
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">            // The user declines to let the tool use the data. In this case we leave</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">            // the tool as pending and they can delete it using the main screen if they</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">            // wish.</span>
<a name="l415"><span class="linenum"> 415</span></a>              choiceContainer.<a class="function" onClick="logFunction('on')" href="../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(ltiEvents.CAPABILITIES_DECLINE, function() {
<a name="l416"><span class="linenum"> 416</span></a>                  container.empty();
<a name="l417"><span class="linenum"> 417</span></a>                  promise.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>();
<a name="l418"><span class="linenum"> 418</span></a>              });
<a name="l419"><span class="linenum"> 419</span></a>          }).<a class="function" onClick="logFunction('fail')" href="../../../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>(promise.reject);
<a name="l420"><span class="linenum"> 420</span></a>  
<a name="l421"><span class="linenum"> 421</span></a>          promise.<a class="function" onClick="logFunction('done')" href="../../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function() {
<a name="l422"><span class="linenum"> 422</span></a>              hideToolTypeCapabilitiesContainer();
<a name="l423"><span class="linenum"> 423</span></a>          }).<a class="function" onClick="logFunction('fail')" href="../../../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>(notification.exception);
<a name="l424"><span class="linenum"> 424</span></a>  
<a name="l425"><span class="linenum"> 425</span></a>          return promise;
<a name="l426"><span class="linenum"> 426</span></a>      };
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>      <span class="comment">/**</span>
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">     * Send a request to the Moodle server to create a tool proxy using the registration URL the user</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">     * has provided. The proxy is required for the external registration page to work correctly.</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">     *</span>
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">     * After the proxy is created the external registration page is rendered within an iframe for the user</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">     * to complete the registration in the external page.</span>
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">     *</span>
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">     * If the tool proxy creation fails then we redirect the page section back to the home section and</span>
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">     * display the error, rather than rendering the external registration page.</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">     *</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">     * @method createAndRegisterToolProxy</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">     * @private</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">     * @param {String} url Tool registration URL to register</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">     * @return {Promise} jQuery Deferred object</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment">     */</span>
<a name="l443"><span class="linenum"> 443</span></a>      var createAndRegisterToolProxy = function(url) {
<a name="l444"><span class="linenum"> 444</span></a>          var promise = $.Deferred();
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>          if (!url || url === &quot;&quot;) {
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">            // No URL has been input so do nothing.</span>
<a name="l448"><span class="linenum"> 448</span></a>              promise.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>();
<a name="l449"><span class="linenum"> 449</span></a>          } else {
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">            // A tool proxy needs to exist before the external page is rendered because</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">            // the external page sends requests back to Moodle for information that is stored</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">            // in the proxy.</span>
<a name="l453"><span class="linenum"> 453</span></a>              toolProxy.<a class="function" onClick="logFunction('create')" href="../../../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>({regurl: url})
<a name="l454"><span class="linenum"> 454</span></a>                  .<a class="function" onClick="logFunction('done')" href="../../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function(result) {
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment">                        // Note that it's a new proxy so we will always clean it up.</span>
<a name="l456"><span class="linenum"> 456</span></a>                          setProxyAsNew();
<a name="l457"><span class="linenum"> 457</span></a>                          promise = registerProxy(result.id);
<a name="l458"><span class="linenum"> 458</span></a>                      })
<a name="l459"><span class="linenum"> 459</span></a>                  .<a class="function" onClick="logFunction('fail')" href="../../../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>(function(exception) {
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">                        // Clean up.</span>
<a name="l461"><span class="linenum"> 461</span></a>                          cancelRegistration();
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">                        // Let the user know what the error is.</span>
<a name="l463"><span class="linenum"> 463</span></a>                          var feedback = {
<a name="l464"><span class="linenum"> 464</span></a>                              message: exception.message,
<a name="l465"><span class="linenum"> 465</span></a>                              error: true
<a name="l466"><span class="linenum"> 466</span></a>                          };
<a name="l467"><span class="linenum"> 467</span></a>                          $(document).<a class="function" onClick="logFunction('trigger')" href="../../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>(ltiEvents.REGISTRATION_FEEDBACK, feedback);
<a name="l468"><span class="linenum"> 468</span></a>                          promise.<a class="function" onClick="logFunction('reject')" href="../../../../_functions/reject.html" onMouseOver="funcPopup(event,'reject')">reject</a>(exception);
<a name="l469"><span class="linenum"> 469</span></a>                      });
<a name="l470"><span class="linenum"> 470</span></a>          }
<a name="l471"><span class="linenum"> 471</span></a>  
<a name="l472"><span class="linenum"> 472</span></a>          return promise;
<a name="l473"><span class="linenum"> 473</span></a>      };
<a name="l474"><span class="linenum"> 474</span></a>  
<a name="l475"><span class="linenum"> 475</span></a>      <span class="comment">/**</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     * Loads the window to register a proxy, given an ID.</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     *</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     * @method registerProxy</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     * @private</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">     * @param {Integer} id Proxy id to register</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">     * @return {Promise} jQuery Deferred object to fail or resolve</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment">     */</span>
<a name="l483"><span class="linenum"> 483</span></a>      var registerProxy = function(id) {
<a name="l484"><span class="linenum"> 484</span></a>          var promise = $.Deferred();
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment">        // Save the id on the DOM to cleanup later.</span>
<a name="l486"><span class="linenum"> 486</span></a>          setToolProxyId(id);
<a name="l487"><span class="linenum"> 487</span></a>  
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment">        // There is a specific set of data needed to send to the external registration page</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">        // in a form, so let's get it from our server.</span>
<a name="l490"><span class="linenum"> 490</span></a>          getRegistrationRequest(id)
<a name="l491"><span class="linenum"> 491</span></a>              .<a class="function" onClick="logFunction('done')" href="../../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function(registrationRequest) {
<a name="l492"><span class="linenum"> 492</span></a>                      renderExternalRegistrationWindow(registrationRequest)
<a name="l493"><span class="linenum"> 493</span></a>                          .<a class="function" onClick="logFunction('done')" href="../../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function() {
<a name="l494"><span class="linenum"> 494</span></a>                                  promise.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>();
<a name="l495"><span class="linenum"> 495</span></a>                              })
<a name="l496"><span class="linenum"> 496</span></a>                          .<a class="function" onClick="logFunction('fail')" href="../../../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>(promise.fail);
<a name="l497"><span class="linenum"> 497</span></a>                  })
<a name="l498"><span class="linenum"> 498</span></a>              .<a class="function" onClick="logFunction('fail')" href="../../../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>(promise.fail);
<a name="l499"><span class="linenum"> 499</span></a>  
<a name="l500"><span class="linenum"> 500</span></a>          return promise;
<a name="l501"><span class="linenum"> 501</span></a>      };
<a name="l502"><span class="linenum"> 502</span></a>  
<a name="l503"><span class="linenum"> 503</span></a>      <span class="comment">/**</span>
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment">     * Complete the registration process, clean up any left over data and</span>
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment">     * trigger the appropriate events.</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">     *</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">     * @method finishExternalRegistration</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">     * @private</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">     */</span>
<a name="l510"><span class="linenum"> 510</span></a>      var finishExternalRegistration = function() {
<a name="l511"><span class="linenum"> 511</span></a>          if (hasToolProxyId()) {
<a name="l512"><span class="linenum"> 512</span></a>              clearToolProxyId();
<a name="l513"><span class="linenum"> 513</span></a>          }
<a name="l514"><span class="linenum"> 514</span></a>          setProxyAsOld(false);
<a name="l515"><span class="linenum"> 515</span></a>  
<a name="l516"><span class="linenum"> 516</span></a>          hideExternalRegistrationContent();
<a name="l517"><span class="linenum"> 517</span></a>          var container = getExternalRegistrationTemplateContainer();
<a name="l518"><span class="linenum"> 518</span></a>          container.empty();
<a name="l519"><span class="linenum"> 519</span></a>  
<a name="l520"><span class="linenum"> 520</span></a>          $(document).<a class="function" onClick="logFunction('trigger')" href="../../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>(ltiEvents.STOP_EXTERNAL_REGISTRATION);
<a name="l521"><span class="linenum"> 521</span></a>      };
<a name="l522"><span class="linenum"> 522</span></a>  
<a name="l523"><span class="linenum"> 523</span></a>      <span class="comment">/**</span>
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">     * Sets up the listeners for user interaction on the page.</span>
<a name="l525"><span class="linenum"> 525</span></a>  <span class="comment">     *</span>
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment">     * @method registerEventListeners</span>
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment">     * @private</span>
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment">     */</span>
<a name="l529"><span class="linenum"> 529</span></a>      var registerEventListeners = function() {
<a name="l530"><span class="linenum"> 530</span></a>  
<a name="l531"><span class="linenum"> 531</span></a>          $(document).<a class="function" onClick="logFunction('on')" href="../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>(ltiEvents.START_EXTERNAL_REGISTRATION, function(event, data) {
<a name="l532"><span class="linenum"> 532</span></a>                  if (!data) {
<a name="l533"><span class="linenum"> 533</span></a>                      return;
<a name="l534"><span class="linenum"> 534</span></a>                  }
<a name="l535"><span class="linenum"> 535</span></a>                  if (data.url) {
<a name="l536"><span class="linenum"> 536</span></a>                      createAndRegisterToolProxy(data.url);
<a name="l537"><span class="linenum"> 537</span></a>                  }
<a name="l538"><span class="linenum"> 538</span></a>                  if (data.proxyid) {
<a name="l539"><span class="linenum"> 539</span></a>                      registerProxy(data.proxyid);
<a name="l540"><span class="linenum"> 540</span></a>                  }
<a name="l541"><span class="linenum"> 541</span></a>              });
<a name="l542"><span class="linenum"> 542</span></a>  
<a name="l543"><span class="linenum"> 543</span></a>          var cancelExternalRegistrationButton = getExternalRegistrationCancelButton();
<a name="l544"><span class="linenum"> 544</span></a>          cancelExternalRegistrationButton.click(function(e) {
<a name="l545"><span class="linenum"> 545</span></a>              e.preventDefault();
<a name="l546"><span class="linenum"> 546</span></a>              cancelRegistration();
<a name="l547"><span class="linenum"> 547</span></a>          });
<a name="l548"><span class="linenum"> 548</span></a>          cancelExternalRegistrationButton.keypress(function(e) {
<a name="l549"><span class="linenum"> 549</span></a>              if (!e.metaKey &amp;&amp; !e.shiftKey &amp;&amp; !e.altKey &amp;&amp; !e.ctrlKey) {
<a name="l550"><span class="linenum"> 550</span></a>                  if (e.keyCode == KEYS.ENTER || e.keyCode == KEYS.SPACE) {
<a name="l551"><span class="linenum"> 551</span></a>                      e.preventDefault();
<a name="l552"><span class="linenum"> 552</span></a>                      cancelRegistration();
<a name="l553"><span class="linenum"> 553</span></a>                  }
<a name="l554"><span class="linenum"> 554</span></a>              }
<a name="l555"><span class="linenum"> 555</span></a>          });
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">        // This is gross but necessary due to isolated jQuery scopes between</span>
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment">        // child iframe and parent windows. There is no other way to communicate.</span>
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment">        //</span>
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">        // This function gets called by the moodle page that received the redirect</span>
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">        // from the external registration page and handles the external page's returned</span>
<a name="l562"><span class="linenum"> 562</span></a>  <span class="comment">        // parameters.</span>
<a name="l563"><span class="linenum"> 563</span></a>  <span class="comment">        //</span>
<a name="l564"><span class="linenum"> 564</span></a>  <span class="comment">        // See AMD module mod_lti/external_registration_return.</span>
<a name="l565"><span class="linenum"> 565</span></a>          window.triggerExternalRegistrationComplete = function(data) {
<a name="l566"><span class="linenum"> 566</span></a>              var promise = $.Deferred();
<a name="l567"><span class="linenum"> 567</span></a>              var feedback = {
<a name="l568"><span class="linenum"> 568</span></a>                  message: &quot;&quot;,
<a name="l569"><span class="linenum"> 569</span></a>                  error: false
<a name="l570"><span class="linenum"> 570</span></a>              };
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>              if (data.status == &quot;success&quot;) {
<a name="l573"><span class="linenum"> 573</span></a>                  str.<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('successfullycreatedtooltype', 'mod_lti').<a class="function" onClick="logFunction('done')" href="../../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function(s) {
<a name="l574"><span class="linenum"> 574</span></a>                      feedback.message = s;
<a name="l575"><span class="linenum"> 575</span></a>                  }).<a class="function" onClick="logFunction('fail')" href="../../../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>(notification.exception);
<a name="l576"><span class="linenum"> 576</span></a>  
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">                // Trigger appropriate events when we've completed the necessary requests.</span>
<a name="l578"><span class="linenum"> 578</span></a>                  promise.<a class="function" onClick="logFunction('done')" href="../../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function() {
<a name="l579"><span class="linenum"> 579</span></a>                      finishExternalRegistration();
<a name="l580"><span class="linenum"> 580</span></a>                      $(document).<a class="function" onClick="logFunction('trigger')" href="../../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>(ltiEvents.REGISTRATION_FEEDBACK, feedback);
<a name="l581"><span class="linenum"> 581</span></a>                      $(document).<a class="function" onClick="logFunction('trigger')" href="../../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>(ltiEvents.NEW_TOOL_TYPE);
<a name="l582"><span class="linenum"> 582</span></a>                  }).<a class="function" onClick="logFunction('fail')" href="../../../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>(notification.exception);
<a name="l583"><span class="linenum"> 583</span></a>  
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">                // We should have created a tool proxy by this point.</span>
<a name="l585"><span class="linenum"> 585</span></a>                  if (hasCreatedToolProxy()) {
<a name="l586"><span class="linenum"> 586</span></a>                      var proxyId = getToolProxyId();
<a name="l587"><span class="linenum"> 587</span></a>  
<a name="l588"><span class="linenum"> 588</span></a>  <span class="comment">                    // We need the list of types that are linked to this proxy. We're assuming it'll</span>
<a name="l589"><span class="linenum"> 589</span></a>  <span class="comment">                    // only be one because this process creates a one-to-one type-&gt;proxy.</span>
<a name="l590"><span class="linenum"> 590</span></a>                      toolType.getFromToolProxyId(proxyId).<a class="function" onClick="logFunction('done')" href="../../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function(types) {
<a name="l591"><span class="linenum"> 591</span></a>                          if (types &amp;&amp; types.length) {
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment">                            // There should only be one result.</span>
<a name="l593"><span class="linenum"> 593</span></a>                              var typeData = types[0];
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment">                            // Check if the external tool required access to any Moodle data (users, courses etc).</span>
<a name="l596"><span class="linenum"> 596</span></a>                              if (typeData.hascapabilitygroups) {
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment">                                // If it did then we ask the user to agree to those groups before the type is</span>
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment">                                // activated (i.e. can be used in Moodle).</span>
<a name="l599"><span class="linenum"> 599</span></a>                                  promptForToolTypeCapabilitiesAgreement(typeData).always(function() {
<a name="l600"><span class="linenum"> 600</span></a>                                      promise.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>();
<a name="l601"><span class="linenum"> 601</span></a>                                  });
<a name="l602"><span class="linenum"> 602</span></a>                              } else {
<a name="l603"><span class="linenum"> 603</span></a>                                  promise.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>();
<a name="l604"><span class="linenum"> 604</span></a>                              }
<a name="l605"><span class="linenum"> 605</span></a>                          } else {
<a name="l606"><span class="linenum"> 606</span></a>                              promise.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>();
<a name="l607"><span class="linenum"> 607</span></a>                          }
<a name="l608"><span class="linenum"> 608</span></a>                      }).<a class="function" onClick="logFunction('fail')" href="../../../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>(function() {
<a name="l609"><span class="linenum"> 609</span></a>                          promise.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>();
<a name="l610"><span class="linenum"> 610</span></a>                      });
<a name="l611"><span class="linenum"> 611</span></a>                  }
<a name="l612"><span class="linenum"> 612</span></a>              } else {
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">                // Anything other than success is failure.</span>
<a name="l614"><span class="linenum"> 614</span></a>                  feedback.message = data.error;
<a name="l615"><span class="linenum"> 615</span></a>                  feedback.error = true;
<a name="l616"><span class="linenum"> 616</span></a>  
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment">                // Cancel registration to clean up any proxies and tools that were</span>
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment">                // created.</span>
<a name="l619"><span class="linenum"> 619</span></a>                  promise.<a class="function" onClick="logFunction('done')" href="../../../../_functions/done.html" onMouseOver="funcPopup(event,'done')">done</a>(function() {
<a name="l620"><span class="linenum"> 620</span></a>                      cancelRegistration().always(function() {
<a name="l621"><span class="linenum"> 621</span></a>                          $(document).<a class="function" onClick="logFunction('trigger')" href="../../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>(ltiEvents.REGISTRATION_FEEDBACK, feedback);
<a name="l622"><span class="linenum"> 622</span></a>                      });
<a name="l623"><span class="linenum"> 623</span></a>                  }).<a class="function" onClick="logFunction('fail')" href="../../../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>(notification.exception);
<a name="l624"><span class="linenum"> 624</span></a>  
<a name="l625"><span class="linenum"> 625</span></a>                  promise.<a class="function" onClick="logFunction('resolve')" href="../../../../_functions/resolve.html" onMouseOver="funcPopup(event,'resolve')">resolve</a>();
<a name="l626"><span class="linenum"> 626</span></a>              }
<a name="l627"><span class="linenum"> 627</span></a>  
<a name="l628"><span class="linenum"> 628</span></a>              return promise;
<a name="l629"><span class="linenum"> 629</span></a>          };
<a name="l630"><span class="linenum"> 630</span></a>      };
<a name="l631"><span class="linenum"> 631</span></a>  
<a name="l632"><span class="linenum"> 632</span></a>      return <span class="comment">/** @alias module:mod_lti/external_registration */</span> {
<a name="l633"><span class="linenum"> 633</span></a>  
<a name="l634"><span class="linenum"> 634</span></a>          <span class="comment">/**</span>
<a name="l635"><span class="linenum"> 635</span></a>  <span class="comment">         * Initialise this module.</span>
<a name="l636"><span class="linenum"> 636</span></a>  <span class="comment">         */</span>
<a name="l637"><span class="linenum"> 637</span></a>          init: function() {
<a name="l638"><span class="linenum"> 638</span></a>              registerEventListeners();
<a name="l639"><span class="linenum"> 639</span></a>          }
<a name="l640"><span class="linenum"> 640</span></a>      };
<a name="l641"><span class="linenum"> 641</span></a>  });
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'update': ['update', 'In addition to update() as defined in grade_object, handle the grade_outcome and grade_scale objects. Force regrading if necessary, rounds the float numbers using php function, the reason is we need to compare the db value with computed number to skip regrading if possible. ', [['lib/grade','grade_item.php',274],['lib/google/src/Google/Service','Tasks.php',386],['lib/google/src/Google/Service','Tasks.php',556],['lib/google/src/Google/Service','AndroidPublisher.php',1413],['lib/google/src/Google/Service','AndroidPublisher.php',1545],['lib/google/src/Google/Service','AndroidPublisher.php',1615],['lib/google/src/Google/Service','AndroidPublisher.php',1853],['lib/google/src/Google/Service','AndroidPublisher.php',1919],['lib/google/src/Google/Service','AndroidPublisher.php',2003],['lib/google/src/Google/Service','AndroidPublisher.php',2177],['lib/google/src/Google/Service','Reseller.php',344],['lib/grade','grade_category.php',226],['lib/grade','grade_scale.php',125],['lib/adodb','adodb-active-record.inc.php',1004],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','YouTubeAnalytics.php',534],['completion','data_object.php',252],['mod/lesson/pagetypes','matching.php',308],['tag/classes','collection.php',215],['lib/google/src/Google/Service','AdExchangeBuyer.php',802],['lib/google/src/Google/Service','AdExchangeBuyer.php',906],['lib/google/src/Google/Service','AdExchangeBuyer.php',1013],['lib/google/src/Google/Service','AdExchangeBuyer.php',1181],['lib/google/src/Google/Service','AdExchangeBuyer.php',1357],['lib/google/src/Google/Service','AdExchangeBuyer.php',1640],['lib/google/src/Google/Service','Books.php',2025],['lib/grade','grade_grade.php',1009],['lib/grade','grade_outcome.php',144],['lib/google/src/Google/Service','Analytics.php',2215],['lib/google/src/Google/Service','Analytics.php',2388],['lib/google/src/Google/Service','Analytics.php',2501],['lib/google/src/Google/Service','Analytics.php',2626],['lib/google/src/Google/Service','Analytics.php',2736],['lib/google/src/Google/Service','Analytics.php',2843],['lib/google/src/Google/Service','Analytics.php',2971],['lib/google/src/Google/Service','Analytics.php',3062],['lib/google/src/Google/Service','Analytics.php',3185],['lib/google/src/Google/Service','Analytics.php',3502],['lib/google/src/Google/Service','Analytics.php',3604],['lib/google/src/Google/Service','Analytics.php',3686],['lib/google/src/Google/Service','Coordinate.php',611],['lib/google/src/Google/Service','Coordinate.php',727],['lib/google/src/Google/Service','DeploymentManager.php',589],['tag/classes/output','tagareacollection.php',68],['lib','weblib.php',3312],['lib/google/src/Google/Service','Blogger.php',1349],['lib/google/src/Google/Service','Blogger.php',1647],['lib/google/src/Google/Service','Dataflow.php',350],['tag/classes/output','tagcollname.php',58],['competency/classes','persistent.php',452],['lib/google/src/Google/Service','Cloudresourcemanager.php',344],['lib/google/src/Google/Service','Cloudresourcemanager.php',555],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1066],['lib/google/src/Google/Service','TagManager.php',1159],['lib/google/src/Google/Service','TagManager.php',1219],['lib/google/src/Google/Service','TagManager.php',1311],['lib/google/src/Google/Service','TagManager.php',1405],['lib/google/src/Google/Service','TagManager.php',1499],['lib/google/src/Google/Service','TagManager.php',1650],['lib/google/src/Google/Service','TagManager.php',1743],['mod/lesson','locallib.php',2691],['lib/google/src/Google/Service','Bigquery.php',621],['lib/google/src/Google/Service','Bigquery.php',953],['lib/google/src/Google/Service','ShoppingContent.php',1136],['lib/google/src/Google/Service','ShoppingContent.php',1238],['lib/google/src/Google/Service','ShoppingContent.php',1401],['lib/google/src/Google/Service','ShoppingContent.php',1534],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Clouddebugger.php',307],['lib/filestorage','stored_file.php',103],['lib/google/src/Google/Service','Container.php',366],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Storage.php',1127],['lib/google/src/Google/Service','Storage.php',1268],['lib/google/src/Google/Service','Storage.php',1423],['lib/google/src/Google/Service','Storage.php',1564],['lib/google/src/Google/Service','Storage.php',1904],['tag/classes/output','tagname.php',56],['tag/classes/output','tagcollsearchable.php',72],['lib/google/src/Google/Service','Games.php',1508],['lib/google/src/Google/Service','Licensing.php',335],['lib/google/src/Google/Service','Fitness.php',478],['lib/google/src/Google/Service','Fitness.php',691],['lib/google/src/Google/Service','Gmail.php',833],['lib/google/src/Google/Service','Gmail.php',986],['lib/google/src/Google/Service','Taskqueue.php',398],['lib/adodb','adodb-active-recordx.inc.php',1136],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Doubleclicksearch.php',326],['lib/google/src/Google/Service','Autoscaler.php',400],['tag/classes/output','tagisstandard.php',70],['lib/google/src/Google/Service','Prediction.php',339],['lib/google/src/Google/Service','SiteVerification.php',227],['lib/google/src/Google/Service','Drive.php',1691],['lib/google/src/Google/Service','Drive.php',1961],['lib/google/src/Google/Service','Drive.php',2208],['lib/google/src/Google/Service','Drive.php',2320],['lib/google/src/Google/Service','Drive.php',2370],['lib/google/src/Google/Service','Drive.php',2494],['lib/google/src/Google/Service','Drive.php',2582],['tag/classes/output','tagflag.php',71],['lib/google/src/Google/Service','Proximitybeacon.php',440],['lib/google/src/Google/Service','Groupssettings.php',138],['lib/google/src/Google/Service','Directory.php',1829],['lib/google/src/Google/Service','Directory.php',1889],['lib/google/src/Google/Service','Directory.php',2141],['lib/google/src/Google/Service','Directory.php',2306],['lib/google/src/Google/Service','Directory.php',2489],['lib/google/src/Google/Service','Directory.php',2597],['lib/google/src/Google/Service','Directory.php',2808],['lib/google/src/Google/Service','Directory.php',2910],['lib/google/src/Google/Service','Directory.php',3131],['lib/google/src/Google/Service','Directory.php',3317],['lib/google/src/Google/Service','Fusiontables.php',727],['lib/google/src/Google/Service','Fusiontables.php',892],['lib/google/src/Google/Service','Fusiontables.php',1094],['lib/google/src/Google/Service','Fusiontables.php',1269],['lib/google/src/Google/Service','AdSenseHost.php',846],['lib/google/src/Google/Service','AdSenseHost.php',1097],['course/classes/output','course_module_name.php',81],['lib/google/src/Google/Service','Mirror.php',496],['lib/google/src/Google/Service','Mirror.php',634],['lib/google/src/Google/Service','Mirror.php',745],['tag/classes','area.php',226],['lib/google/src/Google/Service','AndroidEnterprise.php',1064],['lib/google/src/Google/Service','AndroidEnterprise.php',1165],['lib/google/src/Google/Service','AndroidEnterprise.php',1489],['lib/google/src/Google/Service','AndroidEnterprise.php',1672],['grade/grading/form/rubric','lib.php',828],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['mod/lesson/pagetypes','essay.php',158],['lib','coursecatlib.php',438],['tag/classes','tag.php',893],['lib/google/src/Google/Service','Calendar.php',1006],['lib/google/src/Google/Service','Calendar.php',1181],['lib/google/src/Google/Service','Calendar.php',1333],['lib/google/src/Google/Service','Calendar.php',1714],['lib/google/src/Google/Service','PlusDomains.php',692],['lib/google/src/Google/Service','GamesConfiguration.php',334],['lib/google/src/Google/Service','GamesConfiguration.php',473],['mod/lesson/pagetypes','branchtable.php',262],['tag/classes/output','tagareashowstandard.php',64],['lib/google/src/Google/Service','AppState.php',202],['calendar','lib.php',2206],['tag/classes/output','tagareaenabled.php',69],['cohort/classes/output','cohortidnumber.php',53],['lib/google/src/Google/Service','Classroom.php',564],['cohort/classes/output','cohortname.php',53],['lib/google/src/Google/Service','SQLAdmin.php',947],['lib/google/src/Google/Service','SQLAdmin.php',1267],['lib/google/src/Google/Service','SQLAdmin.php',1534],['grade/grading/form/guide','lib.php',836],['lib/google/src/Google/Service','Compute.php',4253],['lib/google/src/Google/Service','Compute.php',4398],['lib/google/src/Google/Service','Compute.php',4767],['lib/google/src/Google/Service','Compute.php',5348],['lib/google/src/Google/Service','Compute.php',5478],['lib/google/src/Google/Service','Compute.php',8131],['lib/google/src/Google/Service','YouTube.php',1959],['lib/google/src/Google/Service','YouTube.php',2194],['lib/google/src/Google/Service','YouTube.php',2303],['lib/google/src/Google/Service','YouTube.php',2429],['lib/google/src/Google/Service','YouTube.php',2570],['lib/google/src/Google/Service','YouTube.php',3111],['lib/google/src/Google/Service','YouTube.php',3348],['lib/google/src/Google/Service','YouTube.php',3518],['lib/google/src/Google/Service','YouTube.php',3708],['lib/google/src/Google/Service','YouTube.php',4400],['lib/google/src/Google/Service','Dfareporting.php',4752],['lib/google/src/Google/Service','Dfareporting.php',4840],['lib/google/src/Google/Service','Dfareporting.php',4973],['lib/google/src/Google/Service','Dfareporting.php',5090],['lib/google/src/Google/Service','Dfareporting.php',5204],['lib/google/src/Google/Service','Dfareporting.php',5400],['lib/google/src/Google/Service','Dfareporting.php',5656],['lib/google/src/Google/Service','Dfareporting.php',5848],['lib/google/src/Google/Service','Dfareporting.php',5970],['lib/google/src/Google/Service','Dfareporting.php',6078],['lib/google/src/Google/Service','Dfareporting.php',6196],['lib/google/src/Google/Service','Dfareporting.php',6502],['lib/google/src/Google/Service','Dfareporting.php',6704],['lib/google/src/Google/Service','Dfareporting.php',6834],['lib/google/src/Google/Service','Dfareporting.php',6912],['lib/google/src/Google/Service','Dfareporting.php',7077],['lib/google/src/Google/Service','Dfareporting.php',7476],['lib/google/src/Google/Service','Dfareporting.php',7594],['lib/google/src/Google/Service','Dfareporting.php',7744],['lib/google/src/Google/Service','Dfareporting.php',7968],['lib/google/src/Google/Service','Dfareporting.php',8075],['lib/google/src/Google/Service','Dfareporting.php',8202],['lib/google/src/Google/Service','Dfareporting.php',8394],['lib/google/src/Google/Service','Dfareporting.php',8557],['lib/google/src/Google/Service','Dfareporting.php',8861],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72]], 498],
'render': ['render', 'Renders this element ', [['lib/classes/output','inplace_editable.php',238],['lib/adodb','adodb-pager.inc.php',241],['lib/phpexcel/PHPExcel','Chart.php',656],['lib','formslib.php',948],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/fullscreen','fullscreen.htm',82],['lib','outputrenderers.php',170],['lib','outputrenderers.php',302],['question/behaviour','behaviourbase.php',97],['lib/htmlpurifier/HTMLPurifier/Printer','HTMLDefinition.php',15],['lib/htmlpurifier/HTMLPurifier/Printer','CSSDefinition.php',14],['filter/tex','latex.php',88],['lib','portfoliolib.php',241],['mod/quiz/classes/question/bank','custom_view.php',133],['lib/mustache/src/Mustache','Engine.php',204],['question/engine/tests','helpers.php',797],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',85],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',235],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',298],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',391],['lib/mustache/src/Mustache','Template.php',57],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',790],['question/engine','questionattempt.php',814],['lib/mustache/src/Mustache','LambdaHelper.php',39]], 942],
'append': ['append', 'Append data to PPS ', [['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',55],['lib/horde/framework/Horde/Imap/Client','Base.php',1741]], 1081],
'fail': ['fail', '', [['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',133],['lib/lessphp/Exception','Chunk.php',181],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',133],['lib/editor/atto/yui/src/rangy/js','rangy-core.js',133]], 1158],
'resolve': ['resolve', '', [['lib/jquery','jquery-3.1.0.js',3494]], 175],
'call': ['call', 'TODO: This function needs simplifying. ', [['lib/google/src/Google/Service','Resource.php',74],['webservice/xmlrpc','lib.php',63],['webservice/xmlrpc/tests','lib_test.php',117],['lib/simplepie/library/SimplePie','Registry.php',194],['lib','flickrlib.php',254],['webservice/soap','lib.php',67],['lib/markdown','Readme.md',68],['webservice/rest','lib.php',69]], 5324],
'on': ['on', '', [['lib/requirejs','require.js',508],['lib/jquery','jquery-3.1.0.js',4809]], 3823],
'reject': ['reject', 'Reject a course request ', [['course','lib.php',3248]], 49],
'delete': ['delete', 'Deletes an item from the cache store. ', [['cache/stores/static','lib.php',374],['cache','disabledlib.php',102],['lib/google/src/Google/Service','AdSense.php',1258],['lib/google/src/Google/Service','AdSense.php',1730],['lib/grade','grade_item.php',396],['lib/google/src/Google/Service','Replicapool.php',378],['lib/google/src/Google/Service','Tasks.php',310],['lib/google/src/Google/Service','Tasks.php',428],['lib/google/src/Google/Service','AndroidPublisher.php',1230],['lib/google/src/Google/Service','AndroidPublisher.php',1310],['lib/google/src/Google/Service','AndroidPublisher.php',1668],['lib/google/src/Google/Service','AndroidPublisher.php',1763],['lib/google/src/Google/Service','AndroidPublisher.php',2083],['lib/google/src/Google/Service','YouTubeReporting.php',255],['lib/google/src/Google/Service','Reseller.php',441],['lib/google/src/Google/Cache','Memcache.php',144],['lib','filelib.php',3481],['lib/google/src/Google/Service','Computeaccounts.php',418],['lib/google/src/Google/Service','Computeaccounts.php',497],['lib/google/src/Google/Service','Computeaccounts.php',668],['lib/grade','grade_category.php',281],['lib/grade','grade_scale.php',136],['lib/adodb','adodb-active-record.inc.php',901],['lib/grade','grade_object.php',270],['lib/google/src/Google/Service','YouTubeAnalytics.php',352],['lib/google/src/Google/Service','YouTubeAnalytics.php',447],['lib/google/src/Google/Service','MapsEngine.php',1693],['lib/google/src/Google/Service','MapsEngine.php',1991],['lib/google/src/Google/Service','MapsEngine.php',2344],['lib/google/src/Google/Service','MapsEngine.php',2651],['lib/google/src/Google/Service','MapsEngine.php',2912],['completion','data_object.php',273],['lib/google/src/Google/Cache','File.php',115],['cache/classes','dummystore.php',198],['lib/google/src/Google/Service','Dns.php',378],['cache/classes','loaders.php',792],['cache/classes','loaders.php',1471],['cache/classes','loaders.php',1841],['lib/google/src/Google/Service','Appengine.php',352],['lib/google/src/Google/Service','Appengine.php',455],['tag/classes','collection.php',260],['lib/filebrowser','file_info.php',418],['lib/google/src/Google/Service','AdExchangeBuyer.php',938],['lib/google/src/Google/Service','AdExchangeBuyer.php',1137],['lib/google/src/Google/Service','AdExchangeBuyer.php',1561],['lib/filebrowser','virtual_root_file.php',69],['lib/google/src/Google/Service','Books.php',1946],['lib/grade','grade_grade.php',1024],['lib/grade','grade_outcome.php',97],['lib/google/src/Google/Service','Analytics.php',2165],['lib/google/src/Google/Service','Analytics.php',2534],['lib/google/src/Google/Service','Analytics.php',2655],['lib/google/src/Google/Service','Analytics.php',2872],['lib/google/src/Google/Service','Analytics.php',3001],['lib/google/src/Google/Service','Analytics.php',3092],['lib/google/src/Google/Service','Analytics.php',3406],['lib/google/src/Google/Service','Analytics.php',3631],['lib/google/src/Google/Service','DeploymentManager.php',452],['lib/google/src/Google/Service','Blogger.php',1065],['lib/google/src/Google/Service','Blogger.php',1227],['lib/google/src/Google/Service','Blogger.php',1451],['lib/filebrowser','file_info_stored.php',631],['competency/classes','persistent.php',510],['lib/google/src/Google/Service','CloudUserAccounts.php',528],['lib/google/src/Google/Service','CloudUserAccounts.php',628],['lib/google/src/Google/Service','CloudUserAccounts.php',893],['lib/google/src/Google/Service','Cloudresourcemanager.php',390],['lib/htmlpurifier/HTMLPurifier','Zipper.php',89],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',960],['lib/google/src/Google/Service','TagManager.php',1022],['lib/google/src/Google/Service','TagManager.php',1113],['lib/google/src/Google/Service','TagManager.php',1265],['lib/google/src/Google/Service','TagManager.php',1358],['lib/google/src/Google/Service','TagManager.php',1452],['lib/google/src/Google/Service','TagManager.php',1546],['lib/google/src/Google/Service','TagManager.php',1696],['mod/lesson','locallib.php',1037],['mod/lesson','locallib.php',2271],['repository','lib.php',427],['repository','lib.php',1962],['admin/tool/uploadcourse/classes','course.php',226],['lib','badgeslib.php',640],['lib/google/src/Google/Service','Bigquery.php',531],['lib/google/src/Google/Service','Bigquery.php',863],['lib/google/src/Google/Service','ShoppingContent.php',1050],['lib/google/src/Google/Service','ShoppingContent.php',1448],['lib/google/src/Google/Service','ShoppingContent.php',1970],['lib/google/src/Google/Service','Webmasters.php',355],['lib/google/src/Google/Service','Webmasters.php',449],['lib/google/src/Google/Service','Clouddebugger.php',384],['lib/filestorage','stored_file.php',323],['lib/google/src/Google/Service','Container.php',309],['lib/google/src/Google/Service','Storage.php',1042],['lib/google/src/Google/Service','Storage.php',1157],['lib/google/src/Google/Service','Storage.php',1332],['lib/google/src/Google/Service','Storage.php',1454],['lib/google/src/Google/Service','Storage.php',1681],['cache/stores/memcache','lib.php',401],['lib/google/src/Google/Service','Genomics.php',646],['lib/google/src/Google/Service','Genomics.php',735],['lib/google/src/Google/Service','Genomics.php',903],['lib/google/src/Google/Service','Genomics.php',971],['lib/google/src/Google/Service','Genomics.php',1326],['lib/google/src/Google/Service','Genomics.php',1443],['lib/google/src/Google/Service','Licensing.php',224],['lib/google/src/Google/Service','Fitness.php',400],['lib/google/src/Google/Service','Fitness.php',512],['lib/google/src/Google/Service','Fitness.php',647],['comment','lib.php',790],['lib/google/src/Google/Service','Gmail.php',763],['lib/google/src/Google/Service','Gmail.php',921],['lib/google/src/Google/Service','Gmail.php',1014],['lib/google/src/Google/Service','Gmail.php',1234],['lib/google/src/Google/Service','Taskqueue.php',293],['lib/adodb','adodb-active-recordx.inc.php',1016],['lib','accesslib.php',5580],['cache/classes','interfaces.php',161],['lib/google/src/Google/Service','Autoscaler.php',315],['lib/google/src/Google/Service','Autoscaler.php',429],['lib/google/src/Google/Service','Prediction.php',262],['lib/google/src/Google/Service','SiteVerification.php',139],['lib/google/src/Google/Service','Drive.php',1522],['lib/google/src/Google/Service','Drive.php',1603],['lib/google/src/Google/Service','Drive.php',1748],['lib/google/src/Google/Service','Drive.php',2040],['lib/google/src/Google/Service','Drive.php',2110],['lib/google/src/Google/Service','Drive.php',2240],['lib/google/src/Google/Service','Drive.php',2403],['lib/google/src/Google/Service','Drive.php',2523],['lib/google/src/Google/Service','Proximitybeacon.php',522],['lib/google/src/Google/Service','Directory.php',1683],['lib/google/src/Google/Service','Directory.php',1916],['lib/google/src/Google/Service','Directory.php',1989],['lib/google/src/Google/Service','Directory.php',2059],['lib/google/src/Google/Service','Directory.php',2169],['lib/google/src/Google/Service','Directory.php',2224],['lib/google/src/Google/Service','Directory.php',2351],['lib/google/src/Google/Service','Directory.php',2420],['lib/google/src/Google/Service','Directory.php',2517],['lib/google/src/Google/Service','Directory.php',2652],['lib/google/src/Google/Service','Directory.php',2731],['lib/google/src/Google/Service','Directory.php',2836],['lib/google/src/Google/Service','Directory.php',2938],['lib/google/src/Google/Service','Directory.php',2999],['lib/google/src/Google/Service','Directory.php',3199],['lib/google/src/Google/Service','Directory.php',3274],['lib/google/src/Google/Service','Fusiontables.php',645],['lib/google/src/Google/Service','Fusiontables.php',812],['lib/google/src/Google/Service','Fusiontables.php',937],['lib/google/src/Google/Service','Fusiontables.php',1126],['lib/google/src/Google/Service','Fusiontables.php',1188],['lib/google/src/Google/Service','AdSenseHost.php',734],['lib/google/src/Google/Service','AdSenseHost.php',1010],['lib/google/src/Google/Service','AdSenseHost.php',1168],['lib/google/src/Google/Service','Mirror.php',425],['lib/google/src/Google/Service','Mirror.php',593],['lib/google/src/Google/Service','Mirror.php',661],['lib/google/src/Google/Service','Mirror.php',772],['tag/classes','area.php',187],['lib/google/src/Google/Service','AndroidEnterprise.php',988],['lib/google/src/Google/Service','AndroidEnterprise.php',1092],['lib/google/src/Google/Service','AndroidEnterprise.php',1280],['lib/google/src/Google/Service','AndroidEnterprise.php',1415],['lib/google/src/Google/Service','AndroidEnterprise.php',1597],['course','lib.php',3263],['mnet','peer.php',118],['search/tests/fixtures','mock_search_engine.php',48],['lib/google/src/Google/Service','Calendar.php',903],['lib/google/src/Google/Service','Calendar.php',1071],['lib/google/src/Google/Service','Calendar.php',1269],['lib/google/src/Google/Service','Calendar.php',1412],['cache/stores/session','lib.php',417],['blog','locallib.php',322],['lib/google/src/Google/Service','Storagetransfer.php',381],['cache/stores/mongodb','lib.php',361],['lib/google/src/Google/Cache','Null.php',53],['lib/google/src/Google/Service','GamesConfiguration.php',251],['lib/google/src/Google/Service','GamesConfiguration.php',390],['cache/stores/file','lib.php',393],['badges/criteria','award_criteria.php',330],['cache/stores/memcached','lib.php',402],['lib/google/src/Google/Service','AppState.php',154],['lib/google/src/Google/Service','Resourceviews.php',423],['lib/portfolio','plugin.php',692],['calendar','lib.php',2423],['lib/google/src/Google/Service','Classroom.php',466],['lib/google/src/Google/Service','Classroom.php',615],['lib/google/src/Google/Service','Classroom.php',701],['lib/google/src/Google/Service','Classroom.php',806],['lib/google/src/Google/Service','Classroom.php',934],['lib/google/src/Google/Service','SQLAdmin.php',786],['lib/google/src/Google/Service','SQLAdmin.php',856],['lib/google/src/Google/Service','SQLAdmin.php',1023],['lib/google/src/Google/Service','SQLAdmin.php',1368],['lib/google/src/Google/Service','SQLAdmin.php',1483],['badges/criteria','award_criteria_manual.php',220],['search/engine/solr/classes','engine.php',1045],['lib/google/src/Google/Service','Compute.php',4021],['lib/google/src/Google/Service','Compute.php',4149],['lib/google/src/Google/Service','Compute.php',4284],['lib/google/src/Google/Service','Compute.php',4571],['lib/google/src/Google/Service','Compute.php',4671],['lib/google/src/Google/Service','Compute.php',4829],['lib/google/src/Google/Service','Compute.php',4942],['lib/google/src/Google/Service','Compute.php',5033],['lib/google/src/Google/Service','Compute.php',5174],['lib/google/src/Google/Service','Compute.php',5248],['lib/google/src/Google/Service','Compute.php',5378],['lib/google/src/Google/Service','Compute.php',5508],['lib/google/src/Google/Service','Compute.php',5683],['lib/google/src/Google/Service','Compute.php',5984],['lib/google/src/Google/Service','Compute.php',6156],['lib/google/src/Google/Service','Compute.php',6316],['lib/google/src/Google/Service','Compute.php',6717],['lib/google/src/Google/Service','Compute.php',6898],['lib/google/src/Google/Service','Compute.php',7037],['lib/google/src/Google/Service','Compute.php',7128],['lib/google/src/Google/Service','Compute.php',7208],['lib/google/src/Google/Service','Compute.php',7299],['lib/google/src/Google/Service','Compute.php',7409],['lib/google/src/Google/Service','Compute.php',7570],['lib/google/src/Google/Service','Compute.php',7734],['lib/google/src/Google/Service','Compute.php',7938],['lib/google/src/Google/Service','Compute.php',8035],['lib/google/src/Google/Service','Compute.php',8210],['lib/google/src/Google/Service','Compute.php',8305],['lib/google/src/Google/Service','Pubsub.php',240],['lib/google/src/Google/Service','Pubsub.php',379],['lib/google/src/Google/Service','YouTube.php',1810],['lib/google/src/Google/Service','YouTube.php',2061],['lib/google/src/Google/Service','YouTube.php',2459],['lib/google/src/Google/Service','YouTube.php',2889],['lib/google/src/Google/Service','YouTube.php',3187],['lib/google/src/Google/Service','YouTube.php',3419],['lib/google/src/Google/Service','YouTube.php',3559],['lib/google/src/Google/Service','YouTube.php',3928],['lib/google/src/Google/Service','YouTube.php',4158],['lib/google/src/Google/Cache','Apc.php',105],['lib/google/src/Google/Service','Dfareporting.php',5000],['lib/google/src/Google/Service','Dfareporting.php',5566],['lib/google/src/Google/Service','Dfareporting.php',5753],['lib/google/src/Google/Service','Dfareporting.php',5877],['lib/google/src/Google/Service','Dfareporting.php',6397],['lib/google/src/Google/Service','Dfareporting.php',6578],['lib/google/src/Google/Service','Dfareporting.php',6731],['lib/google/src/Google/Service','Dfareporting.php',6996],['lib/google/src/Google/Service','Dfareporting.php',7503],['lib/google/src/Google/Service','Dfareporting.php',8102],['lib/google/src/Google/Service','Dfareporting.php',8768],['lib/google/src/Google/Service','Manager.php',244],['lib/google/src/Google/Service','Manager.php',324],['lib/google/src/Google/Service','CloudMonitoring.php',274],['lib','webdavlib.php',691]], 317],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'done': ['done', '', [['lib/jquery/ui-1.11.4/external/jquery','jquery.js',8149],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',10806],['lib/htmlpurifier/HTMLPurifier','Zipper.php',98],['lib/jquery','jquery-3.1.0.js',9013],['lib/jquery/ui-1.11.4','jquery-ui.js',15355]], 278],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'submit': ['submit', 'Submits a sitemap for a site. (sitemaps.submit) ', [['lib/google/src/Google/Service','Webmasters.php',408],['lib/google/src/Google/Service','Games.php',1893]], 77],
'addclass': ['addclass', '', [['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',4450],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',4450],['lib/editor/atto/yui/src/rangy/js','rangy-classapplier.js',60]], 2581],
'find': ['find', '', [['lib/adodb','adodb-active-record.inc.php',917],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',17964],['lib','outputcomponents.php',3070],['lib','navigationlib.php',369],['lib','navigationlib.php',860],['lib','navigationlib.php',2726],['lib/behat','behat_base.php',92],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/tabfocus','editor_plugin_src.js',24],['lib/mustache/src/Mustache','Context.php',82],['lib/adodb','adodb-active-recordx.inc.php',1032],['lib/lessphp/Tree','Ruleset.php',317],['lib/lessphp/Tree','Directive.php',85],['lib/lessphp/Tree','Media.php',79],['lib/simplepie/library/SimplePie','Locator.php',94]], 715],
'define': ['define', '', [], 2373]};
CLASS_DATA={
};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
