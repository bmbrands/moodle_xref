<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/survey/classes/external.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='mod/survey/classes';
filename='external.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/survey/classes/</a> -> <a href="external.php.html">external.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="external.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="external.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Survey external API</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    mod_survey</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @category   external</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  2015 Juan Leyva &lt;juan@moodle.com&gt;</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @since      Moodle 3.0</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die;
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../_variables/libdir.html">libdir</a> . '/externallib.php');
<a name="l30"><span class="linenum">  30</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../../mod/survey/lib.php.html">/mod/survey/lib.php</a>');
<a name="l31"><span class="linenum">  31</span></a>  
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment">/**</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * Survey external functions</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> *</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @package    mod_survey</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @category   external</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * @copyright  2015 Juan Leyva &lt;juan@moodle.com&gt;</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * @since      Moodle 3.0</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> */</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('mod_survey_external')" href="../../../_classes/mod_survey_external.html" onMouseOver="classPopup(event,'mod_survey_external')">mod_survey_external</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('external_api')" href="../../../_classes/external_api.html" onMouseOver="classPopup(event,'external_api')">external_api</a> {
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>      <span class="comment">/**</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     * Describes the parameters for get_surveys_by_courses.</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">     *</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     * @return external_external_function_parameters</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     */</span>
<a name="l49"><span class="linenum">  49</span></a>      public static function <a class="function" onClick="logFunction('get_surveys_by_courses_parameters')" href="../../../_functions/get_surveys_by_courses_parameters.html" onMouseOver="funcPopup(event,'get_surveys_by_courses_parameters')">get_surveys_by_courses_parameters</a>() {
<a name="l50"><span class="linenum">  50</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a> (
<a name="l51"><span class="linenum">  51</span></a>              array(
<a name="l52"><span class="linenum">  52</span></a>                  'courseids' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l53"><span class="linenum">  53</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'course id'), 'Array of course ids', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, array()
<a name="l54"><span class="linenum">  54</span></a>                  ),
<a name="l55"><span class="linenum">  55</span></a>              )
<a name="l56"><span class="linenum">  56</span></a>          );
<a name="l57"><span class="linenum">  57</span></a>      }
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>      <span class="comment">/**</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     * Returns a list of surveys in a provided list of courses,</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">     * if no list is provided all surveys that the user can view will be returned.</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">     *</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     * @param array $courseids the course ids</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     * @return array of surveys details</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     */</span>
<a name="l67"><span class="linenum">  67</span></a>      public static function <a class="function" onClick="logFunction('get_surveys_by_courses')" href="../../../_functions/get_surveys_by_courses.html" onMouseOver="funcPopup(event,'get_surveys_by_courses')">get_surveys_by_courses</a>(<a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../../_variables/courseids.html">$courseids</a> = array()) {
<a name="l68"><span class="linenum">  68</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>          <a class="var it29770" onMouseOver="hilite(29770)" onMouseOut="lolite()" onClick="logVariable('returnedsurveys')" href="../../../_variables/returnedsurveys.html">$returnedsurveys</a> = array();
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a> = array();
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_surveys_by_courses_parameters')" href="../../../_functions/get_surveys_by_courses_parameters.html" onMouseOver="funcPopup(event,'get_surveys_by_courses_parameters')">get_surveys_by_courses_parameters</a>(), array('courseids' =&gt; <a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../../_variables/courseids.html">$courseids</a>));
<a name="l74"><span class="linenum">  74</span></a>  
<a name="l75"><span class="linenum">  75</span></a>          <a class="var it3759" onMouseOver="hilite(3759)" onMouseOut="lolite()" onClick="logVariable('mycourses')" href="../../../_variables/mycourses.html">$mycourses</a> = array();
<a name="l76"><span class="linenum">  76</span></a>          if (empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['courseids'])) {
<a name="l77"><span class="linenum">  77</span></a>              <a class="var it3759" onMouseOver="hilite(3759)" onMouseOut="lolite()" onClick="logVariable('mycourses')" href="../../../_variables/mycourses.html">$mycourses</a> = <a class="function" onClick="logFunction('enrol_get_my_courses')" href="../../../_functions/enrol_get_my_courses.html" onMouseOver="funcPopup(event,'enrol_get_my_courses')">enrol_get_my_courses</a>();
<a name="l78"><span class="linenum">  78</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['courseids'] = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it3759" onMouseOver="hilite(3759)" onMouseOut="lolite()" onClick="logVariable('mycourses')" href="../../../_variables/mycourses.html">$mycourses</a>);
<a name="l79"><span class="linenum">  79</span></a>          }
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">        // Ensure there are courseids to loop through.</span>
<a name="l82"><span class="linenum">  82</span></a>          if (!empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['courseids'])) {
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>              <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../../_variables/courses.html">$courses</a>, <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a>) = <a class="class" onClick="logClass('external_util')" href="../../../_classes/external_util.html" onMouseOver="classPopup(event,'external_util')">external_util</a>::<a class="function" onClick="logFunction('validate_courses')" href="../../../_functions/validate_courses.html" onMouseOver="funcPopup(event,'validate_courses')">validate_courses</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['courseids'], <a class="var it3759" onMouseOver="hilite(3759)" onMouseOut="lolite()" onClick="logVariable('mycourses')" href="../../../_variables/mycourses.html">$mycourses</a>);
<a name="l85"><span class="linenum">  85</span></a>  
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">            // Get the surveys in this course, this function checks users visibility permissions.</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">            // We can avoid then additional validate_context calls.</span>
<a name="l88"><span class="linenum">  88</span></a>              <a class="var it20339" onMouseOver="hilite(20339)" onMouseOut="lolite()" onClick="logVariable('surveys')" href="../../../_variables/surveys.html">$surveys</a> = <a class="function" onClick="logFunction('get_all_instances_in_courses')" href="../../../_functions/get_all_instances_in_courses.html" onMouseOver="funcPopup(event,'get_all_instances_in_courses')">get_all_instances_in_courses</a>(&quot;survey&quot;, <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../../_variables/courses.html">$courses</a>);
<a name="l89"><span class="linenum">  89</span></a>              foreach (<a class="var it20339" onMouseOver="hilite(20339)" onMouseOut="lolite()" onClick="logVariable('surveys')" href="../../../_variables/surveys.html">$surveys</a> as <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>) {
<a name="l90"><span class="linenum">  90</span></a>                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/coursemodule.html">coursemodule</a>);
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">                // Entry to return.</span>
<a name="l92"><span class="linenum">  92</span></a>                  <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a> = array();
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">                // First, we return information that any user can see in the web interface.</span>
<a name="l94"><span class="linenum">  94</span></a>                  <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['id'] = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l95"><span class="linenum">  95</span></a>                  <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['coursemodule']      = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/coursemodule.html">coursemodule</a>;
<a name="l96"><span class="linenum">  96</span></a>                  <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['course']            = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('course')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/course.html">course</a>;
<a name="l97"><span class="linenum">  97</span></a>                  <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['name']              = <a class="function" onClick="logFunction('external_format_string')" href="../../../_functions/external_format_string.html" onMouseOver="funcPopup(event,'external_format_string')">external_format_string</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('name')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/name.html">name</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>                  if (<a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/survey:participate', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>)) {
<a name="l100"><span class="linenum"> 100</span></a>                      <a class="var it15837" onMouseOver="hilite(15837)" onMouseOut="lolite()" onClick="logVariable('trimmedintro')" href="../../../_variables/trimmedintro.html">$trimmedintro</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('intro')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/intro.html">intro</a>);
<a name="l101"><span class="linenum"> 101</span></a>                      if (empty(<a class="var it15837" onMouseOver="hilite(15837)" onMouseOut="lolite()" onClick="logVariable('trimmedintro')" href="../../../_variables/trimmedintro.html">$trimmedintro</a>)) {
<a name="l102"><span class="linenum"> 102</span></a>                          <a class="var it15838" onMouseOver="hilite(15838)" onMouseOut="lolite()" onClick="logVariable('tempo')" href="../../../_variables/tempo.html">$tempo</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(&quot;survey&quot;, &quot;intro&quot;, array(&quot;id&quot; =&gt; <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('template')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/template.html">template</a>));
<a name="l103"><span class="linenum"> 103</span></a>                          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('intro')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/intro.html">intro</a> = <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it15838" onMouseOver="hilite(15838)" onMouseOut="lolite()" onClick="logVariable('tempo')" href="../../../_variables/tempo.html">$tempo</a>, &quot;survey&quot;);
<a name="l104"><span class="linenum"> 104</span></a>                      }
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">                    // Format intro.</span>
<a name="l107"><span class="linenum"> 107</span></a>                      <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['intro'], <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['introformat']) =
<a name="l108"><span class="linenum"> 108</span></a>                          <a class="function" onClick="logFunction('external_format_text')" href="../../../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('intro')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/intro.html">intro</a>, <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('introformat')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/introformat.html">introformat</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, 'mod_survey', 'intro', null);
<a name="l109"><span class="linenum"> 109</span></a>                      <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['introfiles'] = <a class="class" onClick="logClass('external_util')" href="../../../_classes/external_util.html" onMouseOver="classPopup(event,'external_util')">external_util</a>::<a class="function" onClick="logFunction('get_area_files')" href="../../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, 'mod_survey', 'intro', false,
<a name="l110"><span class="linenum"> 110</span></a>                                                                                      false);
<a name="l111"><span class="linenum"> 111</span></a>  
<a name="l112"><span class="linenum"> 112</span></a>                      <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['template']  = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('template')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/template.html">template</a>;
<a name="l113"><span class="linenum"> 113</span></a>                      <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['days']      = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('days')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/days.html">days</a>;
<a name="l114"><span class="linenum"> 114</span></a>                      <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['questions'] = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('questions')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/questions.html">questions</a>;
<a name="l115"><span class="linenum"> 115</span></a>                      <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['surveydone'] = <a class="function" onClick="logFunction('survey_already_done')" href="../../../_functions/survey_already_done.html" onMouseOver="funcPopup(event,'survey_already_done')">survey_already_done</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>) ? 1 : 0;
<a name="l116"><span class="linenum"> 116</span></a>  
<a name="l117"><span class="linenum"> 117</span></a>                  }
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>                  if (<a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:manageactivities', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>)) {
<a name="l120"><span class="linenum"> 120</span></a>                      <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['timecreated']   = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('timecreated')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/timecreated.html">timecreated</a>;
<a name="l121"><span class="linenum"> 121</span></a>                      <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['timemodified']  = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('timemodified')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/timemodified.html">timemodified</a>;
<a name="l122"><span class="linenum"> 122</span></a>                      <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['section']       = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('section')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/section.html">section</a>;
<a name="l123"><span class="linenum"> 123</span></a>                      <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['visible']       = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('visible')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/visible.html">visible</a>;
<a name="l124"><span class="linenum"> 124</span></a>                      <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['groupmode']     = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('groupmode')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/groupmode.html">groupmode</a>;
<a name="l125"><span class="linenum"> 125</span></a>                      <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>['groupingid']    = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('groupingid')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/groupingid.html">groupingid</a>;
<a name="l126"><span class="linenum"> 126</span></a>                  }
<a name="l127"><span class="linenum"> 127</span></a>                  <a class="var it29770" onMouseOver="hilite(29770)" onMouseOut="lolite()" onClick="logVariable('returnedsurveys')" href="../../../_variables/returnedsurveys.html">$returnedsurveys</a>[] = <a class="var it29771" onMouseOver="hilite(29771)" onMouseOut="lolite()" onClick="logVariable('surveydetails')" href="../../../_variables/surveydetails.html">$surveydetails</a>;
<a name="l128"><span class="linenum"> 128</span></a>              }
<a name="l129"><span class="linenum"> 129</span></a>          }
<a name="l130"><span class="linenum"> 130</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array();
<a name="l131"><span class="linenum"> 131</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['surveys'] = <a class="var it29770" onMouseOver="hilite(29770)" onMouseOut="lolite()" onClick="logVariable('returnedsurveys')" href="../../../_variables/returnedsurveys.html">$returnedsurveys</a>;
<a name="l132"><span class="linenum"> 132</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a>;
<a name="l133"><span class="linenum"> 133</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l134"><span class="linenum"> 134</span></a>      }
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>      <span class="comment">/**</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">     * Describes the get_surveys_by_courses return value.</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     *</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     * @return external_single_structure</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">     */</span>
<a name="l142"><span class="linenum"> 142</span></a>      public static function <a class="function" onClick="logFunction('get_surveys_by_courses_returns')" href="../../../_functions/get_surveys_by_courses_returns.html" onMouseOver="funcPopup(event,'get_surveys_by_courses_returns')">get_surveys_by_courses_returns</a>() {
<a name="l143"><span class="linenum"> 143</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l144"><span class="linenum"> 144</span></a>              array(
<a name="l145"><span class="linenum"> 145</span></a>                  'surveys' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l146"><span class="linenum"> 146</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l147"><span class="linenum"> 147</span></a>                          array(
<a name="l148"><span class="linenum"> 148</span></a>                              'id' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Survey id'),
<a name="l149"><span class="linenum"> 149</span></a>                              'coursemodule' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Course module id'),
<a name="l150"><span class="linenum"> 150</span></a>                              'course' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Course id'),
<a name="l151"><span class="linenum"> 151</span></a>                              'name' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Survey name'),
<a name="l152"><span class="linenum"> 152</span></a>                              'intro' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'The Survey intro', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l153"><span class="linenum"> 153</span></a>                              'introformat' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_format_value')" href="../../../_classes/external_format_value.html" onMouseOver="classPopup(event,'external_format_value')">external_format_value</a>('intro', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l154"><span class="linenum"> 154</span></a>                              'introfiles' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_files')" href="../../../_classes/external_files.html" onMouseOver="classPopup(event,'external_files')">external_files</a>('Files in the introduction text', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l155"><span class="linenum"> 155</span></a>                              'template' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Survey type', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l156"><span class="linenum"> 156</span></a>                              'days' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Days', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l157"><span class="linenum"> 157</span></a>                              'questions' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Question ids', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l158"><span class="linenum"> 158</span></a>                              'surveydone' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Did I finish the survey?', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l159"><span class="linenum"> 159</span></a>                              'timecreated' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time of creation', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l160"><span class="linenum"> 160</span></a>                              'timemodified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time of last modification', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l161"><span class="linenum"> 161</span></a>                              'section' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Course section id', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l162"><span class="linenum"> 162</span></a>                              'visible' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Visible', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l163"><span class="linenum"> 163</span></a>                              'groupmode' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Group mode', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l164"><span class="linenum"> 164</span></a>                              'groupingid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Group id', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l165"><span class="linenum"> 165</span></a>                          ), 'Surveys'
<a name="l166"><span class="linenum"> 166</span></a>                      )
<a name="l167"><span class="linenum"> 167</span></a>                  ),
<a name="l168"><span class="linenum"> 168</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>(),
<a name="l169"><span class="linenum"> 169</span></a>              )
<a name="l170"><span class="linenum"> 170</span></a>          );
<a name="l171"><span class="linenum"> 171</span></a>      }
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>      <span class="comment">/**</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">     *</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">     */</span>
<a name="l179"><span class="linenum"> 179</span></a>      public static function <a class="function" onClick="logFunction('view_survey_parameters')" href="../../../_functions/view_survey_parameters.html" onMouseOver="funcPopup(event,'view_survey_parameters')">view_survey_parameters</a>() {
<a name="l180"><span class="linenum"> 180</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l181"><span class="linenum"> 181</span></a>              array(
<a name="l182"><span class="linenum"> 182</span></a>                  'surveyid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'survey instance id')
<a name="l183"><span class="linenum"> 183</span></a>              )
<a name="l184"><span class="linenum"> 184</span></a>          );
<a name="l185"><span class="linenum"> 185</span></a>      }
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>      <span class="comment">/**</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">     * Trigger the course module viewed event and update the module completion status.</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">     *</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">     * @param int $surveyid the survey instance id</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">     * @return array of warnings and status result</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">     */</span>
<a name="l195"><span class="linenum"> 195</span></a>      public static function <a class="function" onClick="logFunction('view_survey')" href="../../../_functions/view_survey.html" onMouseOver="funcPopup(event,'view_survey')">view_survey</a>(<a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../../_variables/surveyid.html">$surveyid</a>) {
<a name="l196"><span class="linenum"> 196</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../_variables/USER.html">$USER</a>;
<a name="l197"><span class="linenum"> 197</span></a>  
<a name="l198"><span class="linenum"> 198</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('view_survey_parameters')" href="../../../_functions/view_survey_parameters.html" onMouseOver="funcPopup(event,'view_survey_parameters')">view_survey_parameters</a>(),
<a name="l199"><span class="linenum"> 199</span></a>                                              array(
<a name="l200"><span class="linenum"> 200</span></a>                                                  'surveyid' =&gt; <a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../../_variables/surveyid.html">$surveyid</a>
<a name="l201"><span class="linenum"> 201</span></a>                                              ));
<a name="l202"><span class="linenum"> 202</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a> = array();
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">        // Request and permission validation.</span>
<a name="l205"><span class="linenum"> 205</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('survey', array('id' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['surveyid']), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l206"><span class="linenum"> 206</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>, 'survey');
<a name="l207"><span class="linenum"> 207</span></a>  
<a name="l208"><span class="linenum"> 208</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l209"><span class="linenum"> 209</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l210"><span class="linenum"> 210</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/survey:participate', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>          <a class="var it8651" onMouseOver="hilite(8651)" onMouseOut="lolite()" onClick="logVariable('viewed')" href="../../../_variables/viewed.html">$viewed</a> = <a class="function" onClick="logFunction('survey_already_done')" href="../../../_functions/survey_already_done.html" onMouseOver="funcPopup(event,'survey_already_done')">survey_already_done</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>) ? 'graph' : 'form';
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">        // Trigger course_module_viewed event and completion.</span>
<a name="l215"><span class="linenum"> 215</span></a>          <a class="function" onClick="logFunction('survey_view')" href="../../../_functions/survey_view.html" onMouseOver="funcPopup(event,'survey_view')">survey_view</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>, <a class="var it8651" onMouseOver="hilite(8651)" onMouseOut="lolite()" onClick="logVariable('viewed')" href="../../../_variables/viewed.html">$viewed</a>);
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array();
<a name="l218"><span class="linenum"> 218</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['status'] = true;
<a name="l219"><span class="linenum"> 219</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a>;
<a name="l220"><span class="linenum"> 220</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l221"><span class="linenum"> 221</span></a>      }
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>      <span class="comment">/**</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment">     *</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">     * @return external_description</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment">     */</span>
<a name="l229"><span class="linenum"> 229</span></a>      public static function <a class="function" onClick="logFunction('view_survey_returns')" href="../../../_functions/view_survey_returns.html" onMouseOver="funcPopup(event,'view_survey_returns')">view_survey_returns</a>() {
<a name="l230"><span class="linenum"> 230</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l231"><span class="linenum"> 231</span></a>              array(
<a name="l232"><span class="linenum"> 232</span></a>                  'status' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'status: true if success'),
<a name="l233"><span class="linenum"> 233</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l234"><span class="linenum"> 234</span></a>              )
<a name="l235"><span class="linenum"> 235</span></a>          );
<a name="l236"><span class="linenum"> 236</span></a>      }
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>      <span class="comment">/**</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">     *</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">     */</span>
<a name="l244"><span class="linenum"> 244</span></a>      public static function <a class="function" onClick="logFunction('get_questions_parameters')" href="../../../_functions/get_questions_parameters.html" onMouseOver="funcPopup(event,'get_questions_parameters')">get_questions_parameters</a>() {
<a name="l245"><span class="linenum"> 245</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l246"><span class="linenum"> 246</span></a>              array(
<a name="l247"><span class="linenum"> 247</span></a>                  'surveyid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'survey instance id')
<a name="l248"><span class="linenum"> 248</span></a>              )
<a name="l249"><span class="linenum"> 249</span></a>          );
<a name="l250"><span class="linenum"> 250</span></a>      }
<a name="l251"><span class="linenum"> 251</span></a>  
<a name="l252"><span class="linenum"> 252</span></a>      <span class="comment">/**</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">     * Get the complete list of questions for the survey, including subquestions.</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">     *</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     * @param int $surveyid the survey instance id</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">     * @return array of warnings and the question list</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">     */</span>
<a name="l260"><span class="linenum"> 260</span></a>      public static function <a class="function" onClick="logFunction('get_questions')" href="../../../_functions/get_questions.html" onMouseOver="funcPopup(event,'get_questions')">get_questions</a>(<a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../../_variables/surveyid.html">$surveyid</a>) {
<a name="l261"><span class="linenum"> 261</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../_variables/USER.html">$USER</a>;
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_questions_parameters')" href="../../../_functions/get_questions_parameters.html" onMouseOver="funcPopup(event,'get_questions_parameters')">get_questions_parameters</a>(),
<a name="l264"><span class="linenum"> 264</span></a>                                              array(
<a name="l265"><span class="linenum"> 265</span></a>                                                  'surveyid' =&gt; <a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../../_variables/surveyid.html">$surveyid</a>
<a name="l266"><span class="linenum"> 266</span></a>                                              ));
<a name="l267"><span class="linenum"> 267</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a> = array();
<a name="l268"><span class="linenum"> 268</span></a>  
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">        // Request and permission validation.</span>
<a name="l270"><span class="linenum"> 270</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('survey', array('id' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['surveyid']), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l271"><span class="linenum"> 271</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>, 'survey');
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l274"><span class="linenum"> 274</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l275"><span class="linenum"> 275</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/survey:participate', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>          <a class="var it29773" onMouseOver="hilite(29773)" onMouseOut="lolite()" onClick="logVariable('mainquestions')" href="../../../_variables/mainquestions.html">$mainquestions</a> = <a class="function" onClick="logFunction('survey_get_questions')" href="../../../_functions/survey_get_questions.html" onMouseOver="funcPopup(event,'survey_get_questions')">survey_get_questions</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>);
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>          foreach (<a class="var it29773" onMouseOver="hilite(29773)" onMouseOut="lolite()" onClick="logVariable('mainquestions')" href="../../../_variables/mainquestions.html">$mainquestions</a> as <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>) {
<a name="l280"><span class="linenum"> 280</span></a>              if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('type')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../../_variables/type.html">type</a> &gt;= 0) {
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">                // Parent is used in subquestions.</span>
<a name="l282"><span class="linenum"> 282</span></a>                  <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('parent')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../../_variables/parent.html">parent</a> = 0;
<a name="l283"><span class="linenum"> 283</span></a>                  <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../../_variables/questions.html">$questions</a>[] = <a class="function" onClick="logFunction('survey_translate_question')" href="../../../_functions/survey_translate_question.html" onMouseOver="funcPopup(event,'survey_translate_question')">survey_translate_question</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>);
<a name="l284"><span class="linenum"> 284</span></a>  
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">                // Check if the question has subquestions.</span>
<a name="l286"><span class="linenum"> 286</span></a>                  if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('multi')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../../_variables/multi.html">multi</a>) {
<a name="l287"><span class="linenum"> 287</span></a>                      <a class="var it460" onMouseOver="hilite(460)" onMouseOut="lolite()" onClick="logVariable('subquestions')" href="../../../_variables/subquestions.html">$subquestions</a> = <a class="function" onClick="logFunction('survey_get_subquestions')" href="../../../_functions/survey_get_subquestions.html" onMouseOver="funcPopup(event,'survey_get_subquestions')">survey_get_subquestions</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>);
<a name="l288"><span class="linenum"> 288</span></a>                      foreach (<a class="var it460" onMouseOver="hilite(460)" onMouseOut="lolite()" onClick="logVariable('subquestions')" href="../../../_variables/subquestions.html">$subquestions</a> as <a class="var it18617" onMouseOver="hilite(18617)" onMouseOut="lolite()" onClick="logVariable('sq')" href="../../../_variables/sq.html">$sq</a>) {
<a name="l289"><span class="linenum"> 289</span></a>                          <a class="var it18617" onMouseOver="hilite(18617)" onMouseOut="lolite()" onClick="logVariable('sq')" href="../../../_variables/sq.html">$sq</a>-&gt;<a onClick="logVariable('parent')" class="var it44677" onMouseOver="hilite(44677)" onMouseOut="lolite()" href="../../../_variables/parent.html">parent</a> = <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l290"><span class="linenum"> 290</span></a>                          <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../../_variables/questions.html">$questions</a>[] = <a class="function" onClick="logFunction('survey_translate_question')" href="../../../_functions/survey_translate_question.html" onMouseOver="funcPopup(event,'survey_translate_question')">survey_translate_question</a>(<a class="var it18617" onMouseOver="hilite(18617)" onMouseOut="lolite()" onClick="logVariable('sq')" href="../../../_variables/sq.html">$sq</a>);
<a name="l291"><span class="linenum"> 291</span></a>                      }
<a name="l292"><span class="linenum"> 292</span></a>                  }
<a name="l293"><span class="linenum"> 293</span></a>              }
<a name="l294"><span class="linenum"> 294</span></a>          }
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array();
<a name="l297"><span class="linenum"> 297</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['questions'] = <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../../_variables/questions.html">$questions</a>;
<a name="l298"><span class="linenum"> 298</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a>;
<a name="l299"><span class="linenum"> 299</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l300"><span class="linenum"> 300</span></a>      }
<a name="l301"><span class="linenum"> 301</span></a>  
<a name="l302"><span class="linenum"> 302</span></a>      <span class="comment">/**</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">     *</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">     * @return external_description</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">     */</span>
<a name="l308"><span class="linenum"> 308</span></a>      public static function <a class="function" onClick="logFunction('get_questions_returns')" href="../../../_functions/get_questions_returns.html" onMouseOver="funcPopup(event,'get_questions_returns')">get_questions_returns</a>() {
<a name="l309"><span class="linenum"> 309</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l310"><span class="linenum"> 310</span></a>              array(
<a name="l311"><span class="linenum"> 311</span></a>                  'questions' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l312"><span class="linenum"> 312</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l313"><span class="linenum"> 313</span></a>                          array(
<a name="l314"><span class="linenum"> 314</span></a>                              'id' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Question id'),
<a name="l315"><span class="linenum"> 315</span></a>                              'text' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Question text'),
<a name="l316"><span class="linenum"> 316</span></a>                              'shorttext' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Question short text'),
<a name="l317"><span class="linenum"> 317</span></a>                              'multi' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Subquestions ids'),
<a name="l318"><span class="linenum"> 318</span></a>                              'intro' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'The question intro'),
<a name="l319"><span class="linenum"> 319</span></a>                              'type' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Question type'),
<a name="l320"><span class="linenum"> 320</span></a>                              'options' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Question options'),
<a name="l321"><span class="linenum"> 321</span></a>                              'parent' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Parent <a class="function" onClick="logFunction('question')" href="../../../_functions/question.html" onMouseOver="funcPopup(event,'question')">question</a> (for subquestions)'),
<a name="l322"><span class="linenum"> 322</span></a>                          ), 'Questions'
<a name="l323"><span class="linenum"> 323</span></a>                      )
<a name="l324"><span class="linenum"> 324</span></a>                  ),
<a name="l325"><span class="linenum"> 325</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l326"><span class="linenum"> 326</span></a>              )
<a name="l327"><span class="linenum"> 327</span></a>          );
<a name="l328"><span class="linenum"> 328</span></a>      }
<a name="l329"><span class="linenum"> 329</span></a>  
<a name="l330"><span class="linenum"> 330</span></a>      <span class="comment">/**</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">     * Describes the parameters for submit_answers.</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment">     *</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">     */</span>
<a name="l336"><span class="linenum"> 336</span></a>      public static function <a class="function" onClick="logFunction('submit_answers_parameters')" href="../../../_functions/submit_answers_parameters.html" onMouseOver="funcPopup(event,'submit_answers_parameters')">submit_answers_parameters</a>() {
<a name="l337"><span class="linenum"> 337</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l338"><span class="linenum"> 338</span></a>              array(
<a name="l339"><span class="linenum"> 339</span></a>                  'surveyid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Survey id'),
<a name="l340"><span class="linenum"> 340</span></a>                  'answers' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l341"><span class="linenum"> 341</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l342"><span class="linenum"> 342</span></a>                          array(
<a name="l343"><span class="linenum"> 343</span></a>                              'key' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Answer key'),
<a name="l344"><span class="linenum"> 344</span></a>                              'value' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Answer value')
<a name="l345"><span class="linenum"> 345</span></a>                          )
<a name="l346"><span class="linenum"> 346</span></a>                      )
<a name="l347"><span class="linenum"> 347</span></a>                  ),
<a name="l348"><span class="linenum"> 348</span></a>              )
<a name="l349"><span class="linenum"> 349</span></a>          );
<a name="l350"><span class="linenum"> 350</span></a>      }
<a name="l351"><span class="linenum"> 351</span></a>  
<a name="l352"><span class="linenum"> 352</span></a>      <span class="comment">/**</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">     * Submit the answers for a given survey.</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">     *</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">     * @param int $surveyid the survey instance id</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment">     * @param array $answers the survey answers</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">     * @return array of warnings and status result</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">     */</span>
<a name="l361"><span class="linenum"> 361</span></a>      public static function <a class="function" onClick="logFunction('submit_answers')" href="../../../_functions/submit_answers.html" onMouseOver="funcPopup(event,'submit_answers')">submit_answers</a>(<a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../../_variables/surveyid.html">$surveyid</a>, <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../../_variables/answers.html">$answers</a>) {
<a name="l362"><span class="linenum"> 362</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../_variables/USER.html">$USER</a>;
<a name="l363"><span class="linenum"> 363</span></a>  
<a name="l364"><span class="linenum"> 364</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('submit_answers_parameters')" href="../../../_functions/submit_answers_parameters.html" onMouseOver="funcPopup(event,'submit_answers_parameters')">submit_answers_parameters</a>(),
<a name="l365"><span class="linenum"> 365</span></a>                                              array(
<a name="l366"><span class="linenum"> 366</span></a>                                                  'surveyid' =&gt; <a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../../_variables/surveyid.html">$surveyid</a>,
<a name="l367"><span class="linenum"> 367</span></a>                                                  'answers' =&gt; <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../../_variables/answers.html">$answers</a>
<a name="l368"><span class="linenum"> 368</span></a>                                              ));
<a name="l369"><span class="linenum"> 369</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a> = array();
<a name="l370"><span class="linenum"> 370</span></a>  
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">        // Request and permission validation.</span>
<a name="l372"><span class="linenum"> 372</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('survey', array('id' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['surveyid']), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l373"><span class="linenum"> 373</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>, 'survey');
<a name="l374"><span class="linenum"> 374</span></a>  
<a name="l375"><span class="linenum"> 375</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l376"><span class="linenum"> 376</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l377"><span class="linenum"> 377</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/survey:participate', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l378"><span class="linenum"> 378</span></a>  
<a name="l379"><span class="linenum"> 379</span></a>          if (<a class="function" onClick="logFunction('survey_already_done')" href="../../../_functions/survey_already_done.html" onMouseOver="funcPopup(event,'survey_already_done')">survey_already_done</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>)) {
<a name="l380"><span class="linenum"> 380</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>(&quot;alreadysubmitted&quot;, &quot;survey&quot;);
<a name="l381"><span class="linenum"> 381</span></a>          }
<a name="l382"><span class="linenum"> 382</span></a>  
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">        // Build the answers array. Data is cleaned inside the survey_save_answers function.</span>
<a name="l384"><span class="linenum"> 384</span></a>          <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../../_variables/answers.html">$answers</a> = array();
<a name="l385"><span class="linenum"> 385</span></a>          foreach (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['answers'] as <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../_variables/answer.html">$answer</a>) {
<a name="l386"><span class="linenum"> 386</span></a>              <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> = <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../_variables/answer.html">$answer</a>['key'];
<a name="l387"><span class="linenum"> 387</span></a>              <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../../_variables/answers.html">$answers</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>] = <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../_variables/answer.html">$answer</a>['value'];
<a name="l388"><span class="linenum"> 388</span></a>          }
<a name="l389"><span class="linenum"> 389</span></a>  
<a name="l390"><span class="linenum"> 390</span></a>          <a class="function" onClick="logFunction('survey_save_answers')" href="../../../_functions/survey_save_answers.html" onMouseOver="funcPopup(event,'survey_save_answers')">survey_save_answers</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../../_variables/survey.html">$survey</a>, <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../../_variables/answers.html">$answers</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l391"><span class="linenum"> 391</span></a>  
<a name="l392"><span class="linenum"> 392</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array();
<a name="l393"><span class="linenum"> 393</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['status'] = true;
<a name="l394"><span class="linenum"> 394</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a>;
<a name="l395"><span class="linenum"> 395</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l396"><span class="linenum"> 396</span></a>      }
<a name="l397"><span class="linenum"> 397</span></a>  
<a name="l398"><span class="linenum"> 398</span></a>      <span class="comment">/**</span>
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">     *</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">     * @return external_description</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment">     */</span>
<a name="l404"><span class="linenum"> 404</span></a>      public static function <a class="function" onClick="logFunction('submit_answers_returns')" href="../../../_functions/submit_answers_returns.html" onMouseOver="funcPopup(event,'submit_answers_returns')">submit_answers_returns</a>() {
<a name="l405"><span class="linenum"> 405</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l406"><span class="linenum"> 406</span></a>              array(
<a name="l407"><span class="linenum"> 407</span></a>                  'status' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'status: true if success'),
<a name="l408"><span class="linenum"> 408</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l409"><span class="linenum"> 409</span></a>              )
<a name="l410"><span class="linenum"> 410</span></a>          );
<a name="l411"><span class="linenum"> 411</span></a>      }
<a name="l412"><span class="linenum"> 412</span></a>  
<a name="l413"><span class="linenum"> 413</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'view_survey': ['view_survey', 'Trigger the course module viewed event and update the module completion status. ', [['mod/survey/classes','external.php',187]], 4],
'survey_save_answers': ['survey_save_answers', 'Save the answer for the given survey ', [['mod/survey','lib.php',953]], 3],
'view_survey_parameters': ['view_survey_parameters', 'Returns description of method parameters ', [['mod/survey/classes','external.php',173]], 1],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',782],['lib','externallib.php',1134]], 216],
'view_survey_returns': ['view_survey_returns', 'Returns description of method result value ', [['mod/survey/classes','external.php',223]], 1],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'survey_already_done': ['survey_already_done', '', [['mod/survey','lib.php',417]], 7],
'get_course_and_cm_from_instance': ['get_course_and_cm_from_instance', 'Efficiently retrieves the $course (stdclass) and $cm (cm_info) objects, given an instance id or record and module name. ', [['lib','modinfolib.php',2099]], 45],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'get_all_instances_in_courses': ['get_all_instances_in_courses', 'Returns an array of all the active instances of a particular module in given courses, sorted in the order they are defined ', [['lib','datalib.php',1382]], 23],
'survey_translate_question': ['survey_translate_question', 'Translate the question texts and options. ', [['mod/survey','lib.php',891]], 3],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'survey_get_questions': ['survey_get_questions', 'Returns the questions for a survey (ordered). ', [['mod/survey','lib.php',918]], 6],
'question': ['question', 'Display a question. ', [['mod/quiz/classes/output','edit_renderer.php',619],['question/engine','renderer.php',71]], 30],
'get_surveys_by_courses': ['get_surveys_by_courses', 'Returns a list of surveys in a provided list of courses, if no list is provided all surveys that the user can view will be returned. ', [['mod/survey/classes','external.php',59]], 7],
'submit_answers_returns': ['submit_answers_returns', 'Returns description of method result value ', [['mod/survey/classes','external.php',398]], 1],
'get_surveys_by_courses_parameters': ['get_surveys_by_courses_parameters', 'Describes the parameters for get_surveys_by_courses. ', [['mod/survey/classes','external.php',43]], 1],
'external_format_text': ['external_format_text', 'Format the text to be returned properly as requested by the either the web service server, either by an internally call. The caller can change the format (raw, filter, file, fileurl) with the external_settings singleton All web service servers must set this singleton when parsing the $_GET and $_POST. ', [['lib','externallib.php',887]], 61],
'survey_get_subquestions': ['survey_get_subquestions', 'Returns subquestions for a given question (ordered). ', [['mod/survey','lib.php',937]], 6],
'validate_parameters': ['validate_parameters', 'Validates submitted function parameters, if anything is incorrect invalid_parameter_exception is thrown. This is a simple recursive method which is intended to be called from each implementation method of external API. ', [['lib','externallib.php',279]], 340],
'validate_context': ['validate_context', 'Makes sure user may execute functions in this context. ', [['lib','externallib.php',448]], 256],
'enrol_get_my_courses': ['enrol_get_my_courses', 'Returns list of courses current $USER is enrolled in and can access ', [['lib','enrollib.php',512]], 30],
'get_questions_returns': ['get_questions_returns', 'Returns description of method result value ', [['mod/survey/classes','external.php',302]], 1],
'external_format_string': ['external_format_string', 'Format the string to be returned properly as requested by the either the web service server, either by an internally call. The caller can change the format (raw) with the external_settings singleton All web service servers must set this singleton when parsing the $_GET and $_POST. ', [['lib','externallib.php',850]], 48],
'get_surveys_by_courses_returns': ['get_surveys_by_courses_returns', 'Describes the get_surveys_by_courses return value. ', [['mod/survey/classes','external.php',136]], 2],
'get_questions_parameters': ['get_questions_parameters', 'Returns description of method parameters ', [['mod/survey/classes','external.php',238]], 1],
'require_capability': ['require_capability', 'Wrapper round the require_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',929],['lib','accesslib.php',762],['backup/util/ui','restore_ui_components.php',157]], 690],
'survey_view': ['survey_view', 'Mark the activity completed (if required) and trigger the course_module_viewed event. ', [['mod/survey','lib.php',843]], 4],
'validate_courses': ['validate_courses', 'Validate a list of courses, returning the complete course objects for valid courses. ', [['lib','externallib.php',1096]], 16],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'get_questions': ['get_questions', '', [['backup/cc','entity.quiz.class.php',341],['mod/quiz','attemptlib.php',256],['backup/cc','entity11.quiz.class.php',329],['mod/survey/classes','external.php',252]], 8],
'submit_answers_parameters': ['submit_answers_parameters', 'Describes the parameters for submit_answers. ', [['mod/survey/classes','external.php',330]], 1],
'submit_answers': ['submit_answers', 'Submit the answers for a given survey. ', [['mod/survey/classes','external.php',352]], 4],
'defined': ['defined', '', [], 4731],
'array_keys': ['array_keys', '', [], 1256],
'trim': ['trim', '', [], 1948]};
CLASS_DATA={
'external_format_value': ['external_format_value', 'A pre-filled external_value class for text format. ', [['lib','externallib.php',799]], 70],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'external_multiple_structure': ['external_multiple_structure', 'Bulk array description class. ', [['lib','externallib.php',609]], 350],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'external_value': ['external_value', 'Scalar value description class ', [['lib','externallib.php',546]], 2505],
'external_single_structure': ['external_single_structure', 'Associative array description class ', [['lib','externallib.php',580]], 460],
'external_api': ['external_api', 'Base class for external api methods. ', [['lib','externallib.php',47]], 808],
'external_files': ['external_files', 'External structure representing a set of files. ', [['lib','externallib.php',1167]], 21],
'external_util': ['external_util', 'Utility functions for the external API. ', [['lib','externallib.php',1086]], 38],
'mod_survey_external': ['mod_survey_external', 'Survey external functions ', [['mod/survey/classes','external.php',32]], 22],
'external_warnings': ['external_warnings', 'Standard Moodle web service warnings ', [['lib','externallib.php',768]], 150],
'external_function_parameters': ['external_function_parameters', 'Description of top level - PHP function parameters. ', [['lib','externallib.php',638]], 344]};
CONST_DATA={
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 802],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 921],
'VALUE_OPTIONAL': ['VALUE_OPTIONAL', '', [['lib','moodlelib.php',337]], 761],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'VALUE_DEFAULT': ['VALUE_DEFAULT', '', [['lib','moodlelib.php',342]], 304],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
