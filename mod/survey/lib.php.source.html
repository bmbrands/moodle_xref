<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/survey/lib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/survey';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/survey/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * @package   mod_survey</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> */</span>
<a name="l23"><span class="linenum">  23</span></a>  
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment">/**</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * Graph size</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * @global int $SURVEY_GHEIGHT</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> */</span>
<a name="l28"><span class="linenum">  28</span></a>  global <a class="var it37547" onMouseOver="hilite(37547)" onMouseOut="lolite()" onClick="logVariable('SURVEY_GHEIGHT')" href="../../_variables/SURVEY_GHEIGHT.html">$SURVEY_GHEIGHT</a>;
<a name="l29"><span class="linenum">  29</span></a>  <a class="var it37547" onMouseOver="hilite(37547)" onMouseOut="lolite()" onClick="logVariable('SURVEY_GHEIGHT')" href="../../_variables/SURVEY_GHEIGHT.html">$SURVEY_GHEIGHT</a> = 500;
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">/**</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * Graph size</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @global int $SURVEY_GWIDTH</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> */</span>
<a name="l34"><span class="linenum">  34</span></a>  global <a class="var it37548" onMouseOver="hilite(37548)" onMouseOut="lolite()" onClick="logVariable('SURVEY_GWIDTH')" href="../../_variables/SURVEY_GWIDTH.html">$SURVEY_GWIDTH</a>;
<a name="l35"><span class="linenum">  35</span></a>  <a class="var it37548" onMouseOver="hilite(37548)" onMouseOut="lolite()" onClick="logVariable('SURVEY_GWIDTH')" href="../../_variables/SURVEY_GWIDTH.html">$SURVEY_GWIDTH</a>  = 900;
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">/**</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * Question Type</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * @global array $SURVEY_QTYPE</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> */</span>
<a name="l40"><span class="linenum">  40</span></a>  global <a class="var it37549" onMouseOver="hilite(37549)" onMouseOut="lolite()" onClick="logVariable('SURVEY_QTYPE')" href="../../_variables/SURVEY_QTYPE.html">$SURVEY_QTYPE</a>;
<a name="l41"><span class="linenum">  41</span></a>  <a class="var it37549" onMouseOver="hilite(37549)" onMouseOut="lolite()" onClick="logVariable('SURVEY_QTYPE')" href="../../_variables/SURVEY_QTYPE.html">$SURVEY_QTYPE</a> = array (
<a name="l42"><span class="linenum">  42</span></a>          &quot;-3&quot; =&gt; &quot;Virtual Actual and Preferred&quot;,
<a name="l43"><span class="linenum">  43</span></a>          &quot;-2&quot; =&gt; &quot;Virtual Preferred&quot;,
<a name="l44"><span class="linenum">  44</span></a>          &quot;-1&quot; =&gt; &quot;Virtual Actual&quot;,
<a name="l45"><span class="linenum">  45</span></a>           &quot;0&quot; =&gt; &quot;Text&quot;,
<a name="l46"><span class="linenum">  46</span></a>           &quot;1&quot; =&gt; &quot;Actual&quot;,
<a name="l47"><span class="linenum">  47</span></a>           &quot;2&quot; =&gt; &quot;Preferred&quot;,
<a name="l48"><span class="linenum">  48</span></a>           &quot;3&quot; =&gt; &quot;Actual and Preferred&quot;,
<a name="l49"><span class="linenum">  49</span></a>          );
<a name="l50"><span class="linenum">  50</span></a>  
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('SURVEY_COLLES_ACTUAL')" href="../../_constants/SURVEY_COLLES_ACTUAL.html" onMouseOver="constPopup(event,'SURVEY_COLLES_ACTUAL')">SURVEY_COLLES_ACTUAL</a>&quot;,           &quot;1&quot;);
<a name="l53"><span class="linenum">  53</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('SURVEY_COLLES_PREFERRED')" href="../../_constants/SURVEY_COLLES_PREFERRED.html" onMouseOver="constPopup(event,'SURVEY_COLLES_PREFERRED')">SURVEY_COLLES_PREFERRED</a>&quot;,        &quot;2&quot;);
<a name="l54"><span class="linenum">  54</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('SURVEY_COLLES_PREFERRED_ACTUAL')" href="../../_constants/SURVEY_COLLES_PREFERRED_ACTUAL.html" onMouseOver="constPopup(event,'SURVEY_COLLES_PREFERRED_ACTUAL')">SURVEY_COLLES_PREFERRED_ACTUAL</a>&quot;, &quot;3&quot;);
<a name="l55"><span class="linenum">  55</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('SURVEY_ATTLS')" href="../../_constants/SURVEY_ATTLS.html" onMouseOver="constPopup(event,'SURVEY_ATTLS')">SURVEY_ATTLS</a>&quot;,                   &quot;4&quot;);
<a name="l56"><span class="linenum">  56</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('SURVEY_CIQ')" href="../../_constants/SURVEY_CIQ.html" onMouseOver="constPopup(event,'SURVEY_CIQ')">SURVEY_CIQ</a>&quot;,                     &quot;5&quot;);
<a name="l57"><span class="linenum">  57</span></a>  
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">// STANDARD FUNCTIONS ////////////////////////////////////////////////////////</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">/**</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment"> * Given an object containing all the necessary data,</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment"> * (defined by the form in mod_form.php) this function</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment"> * will create a new instance and return the id number</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment"> * of the new instance.</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment"> *</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment"> * @global object</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment"> * @param object $survey</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> * @return int|bool</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> */</span>
<a name="l70"><span class="linenum">  70</span></a>  function <a class="function" onClick="logFunction('survey_add_instance')" href="../../_functions/survey_add_instance.html" onMouseOver="funcPopup(event,'survey_add_instance')">survey_add_instance</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>) {
<a name="l71"><span class="linenum">  71</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>      if (!<a class="var it2289" onMouseOver="hilite(2289)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;survey&quot;, array(&quot;id&quot;=&gt;<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('template')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/template.html">template</a>))) {
<a name="l74"><span class="linenum">  74</span></a>          return 0;
<a name="l75"><span class="linenum">  75</span></a>      }
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>      <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('questions')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/questions.html">questions</a>    = <a class="var it2289" onMouseOver="hilite(2289)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>-&gt;<a onClick="logVariable('questions')" class="var it43155" onMouseOver="hilite(43155)" onMouseOut="lolite()" href="../../_variables/questions.html">questions</a>;
<a name="l78"><span class="linenum">  78</span></a>      <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('timecreated')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>  = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l79"><span class="linenum">  79</span></a>      <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('timemodified')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('timecreated')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>;
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;survey&quot;, <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>);
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>  }
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">/**</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment"> * Given an object containing all the necessary data,</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment"> * (defined by the form in mod_form.php) this function</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment"> * will update an existing instance with new data.</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment"> *</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment"> * @global object</span>
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment"> * @param object $survey</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment"> * @return bool</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment"> */</span>
<a name="l94"><span class="linenum">  94</span></a>  function <a class="function" onClick="logFunction('survey_update_instance')" href="../../_functions/survey_update_instance.html" onMouseOver="funcPopup(event,'survey_update_instance')">survey_update_instance</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>) {
<a name="l95"><span class="linenum">  95</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>      if (!<a class="var it2289" onMouseOver="hilite(2289)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;survey&quot;, array(&quot;id&quot;=&gt;<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('template')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/template.html">template</a>))) {
<a name="l98"><span class="linenum">  98</span></a>          return 0;
<a name="l99"><span class="linenum">  99</span></a>      }
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>      <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>           = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('instance')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l102"><span class="linenum"> 102</span></a>      <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('questions')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/questions.html">questions</a>    = <a class="var it2289" onMouseOver="hilite(2289)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>-&gt;<a onClick="logVariable('questions')" class="var it43155" onMouseOver="hilite(43155)" onMouseOut="lolite()" href="../../_variables/questions.html">questions</a>;
<a name="l103"><span class="linenum"> 103</span></a>      <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('timemodified')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(&quot;survey&quot;, <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>);
<a name="l106"><span class="linenum"> 106</span></a>  }
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">/**</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment"> * Given an ID of an instance of this module,</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment"> * this function will permanently delete the instance</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment"> * and any data that depends on it.</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment"> *</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment"> * @global object</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment"> * @param int $id</span>
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment"> * @return bool</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment"> */</span>
<a name="l117"><span class="linenum"> 117</span></a>  function <a class="function" onClick="logFunction('survey_delete_instance')" href="../../_functions/survey_delete_instance.html" onMouseOver="funcPopup(event,'survey_delete_instance')">survey_delete_instance</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l118"><span class="linenum"> 118</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>      if (! <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;survey&quot;, array(&quot;id&quot;=&gt;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>))) {
<a name="l121"><span class="linenum"> 121</span></a>          return false;
<a name="l122"><span class="linenum"> 122</span></a>      }
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = true;
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>      if (! <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;survey_analysis&quot;, array(&quot;survey&quot;=&gt;<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l127"><span class="linenum"> 127</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l128"><span class="linenum"> 128</span></a>      }
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>      if (! <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;survey_answers&quot;, array(&quot;survey&quot;=&gt;<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l131"><span class="linenum"> 131</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l132"><span class="linenum"> 132</span></a>      }
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>      if (! <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;survey&quot;, array(&quot;id&quot;=&gt;<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l136"><span class="linenum"> 136</span></a>      }
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>      return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l139"><span class="linenum"> 139</span></a>  }
<a name="l140"><span class="linenum"> 140</span></a>  
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">/**</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment"> * @global object</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment"> * @param object $course</span>
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment"> * @param object $user</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment"> * @param object $mod</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment"> * @param object $survey</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment"> * @return $result</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment"> */</span>
<a name="l149"><span class="linenum"> 149</span></a>  function <a class="function" onClick="logFunction('survey_user_outline')" href="../../_functions/survey_user_outline.html" onMouseOver="funcPopup(event,'survey_user_outline')">survey_user_outline</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>) {
<a name="l150"><span class="linenum"> 150</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>      if (<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(&quot;survey_answers&quot;, array('survey'=&gt;<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid'=&gt;<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it37550" onMouseOver="hilite(37550)" onMouseOut="lolite()" onClick="logVariable('lastanswer')" href="../../_variables/lastanswer.html">$lastanswer</a> = <a class="phpfunction" onClick="logFunction('array_pop')" href="../../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>);
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = new stdClass();
<a name="l156"><span class="linenum"> 156</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('info')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/info.html">info</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;done&quot;, &quot;survey&quot;);
<a name="l157"><span class="linenum"> 157</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('time')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/time.html">time</a> = <a class="var it37550" onMouseOver="hilite(37550)" onMouseOut="lolite()" onClick="logVariable('lastanswer')" href="../../_variables/lastanswer.html">$lastanswer</a>-&gt;<a onClick="logVariable('time')" class="var it45408" onMouseOver="hilite(45408)" onMouseOut="lolite()" href="../../_variables/time.html">time</a>;
<a name="l158"><span class="linenum"> 158</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l159"><span class="linenum"> 159</span></a>      }
<a name="l160"><span class="linenum"> 160</span></a>      return NULL;
<a name="l161"><span class="linenum"> 161</span></a>  }
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">/**</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment"> * @global stdObject</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment"> * @global object</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment"> * @uses SURVEY_CIQ</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment"> * @param object $course</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment"> * @param object $user</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment"> * @param object $mod</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment"> * @param object $survey</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment"> */</span>
<a name="l172"><span class="linenum"> 172</span></a>  function <a class="function" onClick="logFunction('survey_user_complete')" href="../../_functions/survey_user_complete.html" onMouseOver="funcPopup(event,'survey_user_complete')">survey_user_complete</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>) {
<a name="l173"><span class="linenum"> 173</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>      if (<a class="function" onClick="logFunction('survey_already_done')" href="../../_functions/survey_already_done.html" onMouseOver="funcPopup(event,'survey_already_done')">survey_already_done</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l176"><span class="linenum"> 176</span></a>          if (<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('template')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/template.html">template</a> == <a class="constant" onClick="logConstant('SURVEY_CIQ')" href="../../_constants/SURVEY_CIQ.html" onMouseOver="constPopup(event,'SURVEY_CIQ')">SURVEY_CIQ</a>) { // print out answers for critical incidents
<a name="l177"><span class="linenum"> 177</span></a>              <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_table')" href="../../_classes/html_table.html" onMouseOver="classPopup(event,'html_table')">html_table</a>();
<a name="l178"><span class="linenum"> 178</span></a>              <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('align')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../../_variables/align.html">align</a> = array(&quot;left&quot;, &quot;left&quot;);
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>              <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_list')" href="../../_functions/get_records_list.html" onMouseOver="funcPopup(event,'get_records_list')">get_records_list</a>(&quot;survey_questions&quot;, &quot;id&quot;, <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('questions')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/questions.html">questions</a>));
<a name="l181"><span class="linenum"> 181</span></a>              <a class="var it19220" onMouseOver="hilite(19220)" onMouseOut="lolite()" onClick="logVariable('questionorder')" href="../../_variables/questionorder.html">$questionorder</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;,&quot;, <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('questions')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/questions.html">questions</a>);
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>              foreach (<a class="var it19220" onMouseOver="hilite(19220)" onMouseOut="lolite()" onClick="logVariable('questionorder')" href="../../_variables/questionorder.html">$questionorder</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>=&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>) {
<a name="l184"><span class="linenum"> 184</span></a>                  <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a> = <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a>[<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>];
<a name="l185"><span class="linenum"> 185</span></a>                  <a class="var it446" onMouseOver="hilite(446)" onMouseOut="lolite()" onClick="logVariable('questiontext')" href="../../_variables/questiontext.html">$questiontext</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('shorttext')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/shorttext.html">shorttext</a>, &quot;survey&quot;);
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>                  if (<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a> = <a class="function" onClick="logFunction('survey_get_user_answer')" href="../../_functions/survey_get_user_answer.html" onMouseOver="funcPopup(event,'survey_get_user_answer')">survey_get_user_answer</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l188"><span class="linenum"> 188</span></a>                      <a class="var it10186" onMouseOver="hilite(10186)" onMouseOut="lolite()" onClick="logVariable('answertext')" href="../../_variables/answertext.html">$answertext</a> = &quot;<a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../_variables/answer.html">$answer</a>-&gt;<a onClick="logVariable('answer1')" class="var it43027" onMouseOver="hilite(43027)" onMouseOut="lolite()" href="../../_variables/answer1.html">answer1</a>&quot;;
<a name="l189"><span class="linenum"> 189</span></a>                  } else {
<a name="l190"><span class="linenum"> 190</span></a>                      <a class="var it10186" onMouseOver="hilite(10186)" onMouseOut="lolite()" onClick="logVariable('answertext')" href="../../_variables/answertext.html">$answertext</a> = &quot;No answer&quot;;
<a name="l191"><span class="linenum"> 191</span></a>                  }
<a name="l192"><span class="linenum"> 192</span></a>                  <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>[] = array(&quot;&lt;b&gt;<a class="var it446" onMouseOver="hilite(446)" onMouseOut="lolite()" onClick="logVariable('questiontext')" href="../../_variables/questiontext.html">$questiontext</a>&lt;/b&gt;&quot;, <a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it10186" onMouseOver="hilite(10186)" onMouseOut="lolite()" onClick="logVariable('answertext')" href="../../_variables/answertext.html">$answertext</a>));
<a name="l193"><span class="linenum"> 193</span></a>              }
<a name="l194"><span class="linenum"> 194</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('table')" href="../../_functions/table.html" onMouseOver="funcPopup(event,'table')">table</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>);
<a name="l195"><span class="linenum"> 195</span></a>  
<a name="l196"><span class="linenum"> 196</span></a>          } else {
<a name="l197"><span class="linenum"> 197</span></a>  
<a name="l198"><span class="linenum"> 198</span></a>              <a class="function" onClick="logFunction('survey_print_graph')" href="../../_functions/survey_print_graph.html" onMouseOver="funcPopup(event,'survey_print_graph')">survey_print_graph</a>(&quot;id=<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;sid=<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;type=student.png&quot;);
<a name="l199"><span class="linenum"> 199</span></a>          }
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>      } else {
<a name="l202"><span class="linenum"> 202</span></a>          <a class="function" onClick="logFunction('print_string')" href="../../_functions/print_string.html" onMouseOver="funcPopup(event,'print_string')">print_string</a>(&quot;notdone&quot;, &quot;survey&quot;);
<a name="l203"><span class="linenum"> 203</span></a>      }
<a name="l204"><span class="linenum"> 204</span></a>  }
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">/**</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment"> * @global stdClass</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment"> * @global object</span>
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment"> * @param object $course</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment"> * @param mixed $viewfullnames</span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment"> * @param int $timestamp</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment"> * @return bool</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment"> */</span>
<a name="l214"><span class="linenum"> 214</span></a>  function <a class="function" onClick="logFunction('survey_print_recent_activity')" href="../../_functions/survey_print_recent_activity.html" onMouseOver="funcPopup(event,'survey_print_recent_activity')">survey_print_recent_activity</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>, <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>) {
<a name="l215"><span class="linenum"> 215</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>      <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l218"><span class="linenum"> 218</span></a>      <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a> = array();
<a name="l219"><span class="linenum"> 219</span></a>      foreach (<a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('cms')" class="var it43006" onMouseOver="hilite(43006)" onMouseOut="lolite()" href="../../_variables/cms.html">cms</a> as <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) {
<a name="l220"><span class="linenum"> 220</span></a>          if (<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/modname.html">modname</a> != 'survey') {
<a name="l221"><span class="linenum"> 221</span></a>              continue;
<a name="l222"><span class="linenum"> 222</span></a>          }
<a name="l223"><span class="linenum"> 223</span></a>          if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('uservisible')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/uservisible.html">uservisible</a>) {
<a name="l224"><span class="linenum"> 224</span></a>              continue;
<a name="l225"><span class="linenum"> 225</span></a>          }
<a name="l226"><span class="linenum"> 226</span></a>          <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a>[<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>] = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l227"><span class="linenum"> 227</span></a>      }
<a name="l228"><span class="linenum"> 228</span></a>  
<a name="l229"><span class="linenum"> 229</span></a>      if (!<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a>) {
<a name="l230"><span class="linenum"> 230</span></a>          return false;
<a name="l231"><span class="linenum"> 231</span></a>      }
<a name="l232"><span class="linenum"> 232</span></a>  
<a name="l233"><span class="linenum"> 233</span></a>      <a class="var it37551" onMouseOver="hilite(37551)" onMouseOut="lolite()" onClick="logVariable('slist')" href="../../_variables/slist.html">$slist</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a>); <span class="comment">// there should not be hundreds of glossaries in one course, right?</span>
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>      <a class="var it10666" onMouseOver="hilite(10666)" onMouseOut="lolite()" onClick="logVariable('allusernames')" href="../../_variables/allusernames.html">$allusernames</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>('u');
<a name="l236"><span class="linenum"> 236</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(&quot;SELECT sa.userid, sa.survey, <a class="phpfunction" onClick="logFunction('MAX')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(sa.time) AS time,
<a name="l237"><span class="linenum"> 237</span></a>                                           <a class="var it10666" onMouseOver="hilite(10666)" onMouseOut="lolite()" onClick="logVariable('allusernames')" href="../../_variables/allusernames.html">$allusernames</a>
<a name="l238"><span class="linenum"> 238</span></a>                                      FROM {survey_answers} sa
<a name="l239"><span class="linenum"> 239</span></a>                                      JOIN {user} u ON u.id = sa.userid
<a name="l240"><span class="linenum"> 240</span></a>                                     WHERE sa.survey IN (<a class="var it37551" onMouseOver="hilite(37551)" onMouseOut="lolite()" onClick="logVariable('slist')" href="../../_variables/slist.html">$slist</a>) AND sa.time &gt; ?
<a name="l241"><span class="linenum"> 241</span></a>                                  GROUP BY sa.userid, sa.survey, <a class="var it10666" onMouseOver="hilite(10666)" onMouseOut="lolite()" onClick="logVariable('allusernames')" href="../../_variables/allusernames.html">$allusernames</a>
<a name="l242"><span class="linenum"> 242</span></a>                                  ORDER BY time ASC&quot;, array(<a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>));
<a name="l243"><span class="linenum"> 243</span></a>      if (!<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('valid')" href="../../_functions/valid.html" onMouseOver="funcPopup(event,'valid')">valid</a>()) {
<a name="l244"><span class="linenum"> 244</span></a>          <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>(); <span class="comment">// Not going to iterate (but exit), close rs</span>
<a name="l245"><span class="linenum"> 245</span></a>          return false;
<a name="l246"><span class="linenum"> 246</span></a>      }
<a name="l247"><span class="linenum"> 247</span></a>  
<a name="l248"><span class="linenum"> 248</span></a>      <a class="var it20339" onMouseOver="hilite(20339)" onMouseOut="lolite()" onClick="logVariable('surveys')" href="../../_variables/surveys.html">$surveys</a> = array();
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>      foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> as <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>) {
<a name="l251"><span class="linenum"> 251</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('instances')" class="var it43006" onMouseOver="hilite(43006)" onMouseOut="lolite()" href="../../_variables/instances.html">instances</a>['survey'][<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('survey')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/survey.html">survey</a>];
<a name="l252"><span class="linenum"> 252</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('name')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l253"><span class="linenum"> 253</span></a>          <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('cmid')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a> = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l254"><span class="linenum"> 254</span></a>          <a class="var it20339" onMouseOver="hilite(20339)" onMouseOut="lolite()" onClick="logVariable('surveys')" href="../../_variables/surveys.html">$surveys</a>[] = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>;
<a name="l255"><span class="linenum"> 255</span></a>      }
<a name="l256"><span class="linenum"> 256</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l257"><span class="linenum"> 257</span></a>  
<a name="l258"><span class="linenum"> 258</span></a>      if (!<a class="var it20339" onMouseOver="hilite(20339)" onMouseOut="lolite()" onClick="logVariable('surveys')" href="../../_variables/surveys.html">$surveys</a>) {
<a name="l259"><span class="linenum"> 259</span></a>          return false;
<a name="l260"><span class="linenum"> 260</span></a>      }
<a name="l261"><span class="linenum"> 261</span></a>  
<a name="l262"><span class="linenum"> 262</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('newsurveyresponses', 'survey').':', 3);
<a name="l263"><span class="linenum"> 263</span></a>      foreach (<a class="var it20339" onMouseOver="hilite(20339)" onMouseOut="lolite()" onClick="logVariable('surveys')" href="../../_variables/surveys.html">$surveys</a> as <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>) {
<a name="l264"><span class="linenum"> 264</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/mod/survey/view.php?id='.<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('cmid')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>;
<a name="l265"><span class="linenum"> 265</span></a>          <a class="function" onClick="logFunction('print_recent_activity_note')" href="../../_functions/print_recent_activity_note.html" onMouseOver="funcPopup(event,'print_recent_activity_note')">print_recent_activity_note</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('time')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/time.html">time</a>, <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>, <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('name')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, false, <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>);
<a name="l266"><span class="linenum"> 266</span></a>      }
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>      return true;
<a name="l269"><span class="linenum"> 269</span></a>  }
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">// SQL FUNCTIONS ////////////////////////////////////////////////////////</span>
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">/**</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment"> * @global object</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment"> * @param sting $log</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment"> * @return array</span>
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment"> */</span>
<a name="l278"><span class="linenum"> 278</span></a>  function <a class="function" onClick="logFunction('survey_log_info')" href="../../_functions/survey_log_info.html" onMouseOver="funcPopup(event,'survey_log_info')">survey_log_info</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../_variables/log.html">$log</a>) {
<a name="l279"><span class="linenum"> 279</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l280"><span class="linenum"> 280</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(&quot;SELECT s.name, u.firstname, u.lastname, u.picture
<a name="l281"><span class="linenum"> 281</span></a>                                    FROM {survey} s, {user} u
<a name="l282"><span class="linenum"> 282</span></a>                                   WHERE s.id = ?  AND u.id = ?&quot;, array(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../../_variables/info.html">info</a>, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('userid')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>));
<a name="l283"><span class="linenum"> 283</span></a>  }
<a name="l284"><span class="linenum"> 284</span></a>  
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">/**</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment"> * @global object</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment"> * @param int $surveyid</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment"> * @param int $groupid</span>
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment"> * @param int $groupingid</span>
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment"> * @return array</span>
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment"> */</span>
<a name="l292"><span class="linenum"> 292</span></a>  function <a class="function" onClick="logFunction('survey_get_responses')" href="../../_functions/survey_get_responses.html" onMouseOver="funcPopup(event,'survey_get_responses')">survey_get_responses</a>(<a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../_variables/surveyid.html">$surveyid</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../../_variables/groupingid.html">$groupingid</a>) {
<a name="l293"><span class="linenum"> 293</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l294"><span class="linenum"> 294</span></a>  
<a name="l295"><span class="linenum"> 295</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('surveyid'=&gt;<a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../_variables/surveyid.html">$surveyid</a>, 'groupid'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, 'groupingid'=&gt;<a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../../_variables/groupingid.html">$groupingid</a>);
<a name="l296"><span class="linenum"> 296</span></a>  
<a name="l297"><span class="linenum"> 297</span></a>      if (<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) {
<a name="l298"><span class="linenum"> 298</span></a>          <a class="var it37552" onMouseOver="hilite(37552)" onMouseOut="lolite()" onClick="logVariable('groupsjoin')" href="../../_variables/groupsjoin.html">$groupsjoin</a> = &quot;JOIN {groups_members} gm ON u.id = gm.userid AND gm.groupid = :groupid &quot;;
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>      } else if (<a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../../_variables/groupingid.html">$groupingid</a>) {
<a name="l301"><span class="linenum"> 301</span></a>          <a class="var it37552" onMouseOver="hilite(37552)" onMouseOut="lolite()" onClick="logVariable('groupsjoin')" href="../../_variables/groupsjoin.html">$groupsjoin</a> = &quot;JOIN {groups_members} gm ON u.id = gm.userid
<a name="l302"><span class="linenum"> 302</span></a>                         JOIN {groupings_groups} gg ON gm.groupid = gg.groupid AND gg.groupingid = :groupingid &quot;;
<a name="l303"><span class="linenum"> 303</span></a>      } else {
<a name="l304"><span class="linenum"> 304</span></a>          <a class="var it37552" onMouseOver="hilite(37552)" onMouseOut="lolite()" onClick="logVariable('groupsjoin')" href="../../_variables/groupsjoin.html">$groupsjoin</a> = &quot;&quot;;
<a name="l305"><span class="linenum"> 305</span></a>      }
<a name="l306"><span class="linenum"> 306</span></a>  
<a name="l307"><span class="linenum"> 307</span></a>      <a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>('u');
<a name="l308"><span class="linenum"> 308</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;SELECT <a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a>, <a class="phpfunction" onClick="logFunction('MAX')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(a.time) as time
<a name="l309"><span class="linenum"> 309</span></a>                                     FROM {survey_answers} a
<a name="l310"><span class="linenum"> 310</span></a>                                     JOIN {user} u ON a.userid = u.id
<a name="l311"><span class="linenum"> 311</span></a>                              <a class="var it37552" onMouseOver="hilite(37552)" onMouseOut="lolite()" onClick="logVariable('groupsjoin')" href="../../_variables/groupsjoin.html">$groupsjoin</a>
<a name="l312"><span class="linenum"> 312</span></a>                                    WHERE a.survey = :surveyid
<a name="l313"><span class="linenum"> 313</span></a>                                 GROUP BY <a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a>
<a name="l314"><span class="linenum"> 314</span></a>                                 ORDER BY time ASC&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l315"><span class="linenum"> 315</span></a>  }
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">/**</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment"> * @global object</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment"> * @param int $survey</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment"> * @param int $user</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment"> * @return array</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment"> */</span>
<a name="l323"><span class="linenum"> 323</span></a>  function <a class="function" onClick="logFunction('survey_get_analysis')" href="../../_functions/survey_get_analysis.html" onMouseOver="funcPopup(event,'survey_get_analysis')">survey_get_analysis</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l324"><span class="linenum"> 324</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l325"><span class="linenum"> 325</span></a>  
<a name="l326"><span class="linenum"> 326</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(&quot;SELECT notes
<a name="l327"><span class="linenum"> 327</span></a>                                    FROM {survey_analysis}
<a name="l328"><span class="linenum"> 328</span></a>                                   WHERE survey=? AND userid=?&quot;, array(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>));
<a name="l329"><span class="linenum"> 329</span></a>  }
<a name="l330"><span class="linenum"> 330</span></a>  
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">/**</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment"> * @global object</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment"> * @param int $survey</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment"> * @param int $user</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment"> * @param string $notes</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment"> */</span>
<a name="l337"><span class="linenum"> 337</span></a>  function <a class="function" onClick="logFunction('survey_update_analysis')" href="../../_functions/survey_update_analysis.html" onMouseOver="funcPopup(event,'survey_update_analysis')">survey_update_analysis</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../../_variables/notes.html">$notes</a>) {
<a name="l338"><span class="linenum"> 338</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l339"><span class="linenum"> 339</span></a>  
<a name="l340"><span class="linenum"> 340</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(&quot;UPDATE {survey_analysis}
<a name="l341"><span class="linenum"> 341</span></a>                              SET notes=?
<a name="l342"><span class="linenum"> 342</span></a>                            WHERE survey=?
<a name="l343"><span class="linenum"> 343</span></a>                              AND userid=?&quot;, array(<a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../../_variables/notes.html">$notes</a>, <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>));
<a name="l344"><span class="linenum"> 344</span></a>  }
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">/**</span>
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment"> * @global object</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment"> * @param int $surveyid</span>
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment"> * @param int $groupid</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment"> * @param string $sort</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment"> * @return array</span>
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment"> */</span>
<a name="l353"><span class="linenum"> 353</span></a>  function <a class="function" onClick="logFunction('survey_get_user_answers')" href="../../_functions/survey_get_user_answers.html" onMouseOver="funcPopup(event,'survey_get_user_answers')">survey_get_user_answers</a>(<a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../_variables/surveyid.html">$surveyid</a>, <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../../_variables/questionid.html">$questionid</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>=&quot;sa.answer1,sa.answer2 ASC&quot;) {
<a name="l354"><span class="linenum"> 354</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l355"><span class="linenum"> 355</span></a>  
<a name="l356"><span class="linenum"> 356</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('surveyid'=&gt;<a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../_variables/surveyid.html">$surveyid</a>, 'questionid'=&gt;<a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../../_variables/questionid.html">$questionid</a>);
<a name="l357"><span class="linenum"> 357</span></a>  
<a name="l358"><span class="linenum"> 358</span></a>      if (<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) {
<a name="l359"><span class="linenum"> 359</span></a>          <a class="var it37553" onMouseOver="hilite(37553)" onMouseOut="lolite()" onClick="logVariable('groupfrom')" href="../../_variables/groupfrom.html">$groupfrom</a> = ', {groups_members} gm';
<a name="l360"><span class="linenum"> 360</span></a>          <a class="var it4116" onMouseOver="hilite(4116)" onMouseOut="lolite()" onClick="logVariable('groupsql')" href="../../_variables/groupsql.html">$groupsql</a>  = 'AND gm.groupid = :groupid AND u.id = gm.userid';
<a name="l361"><span class="linenum"> 361</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['groupid'] = <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>;
<a name="l362"><span class="linenum"> 362</span></a>      } else {
<a name="l363"><span class="linenum"> 363</span></a>          <a class="var it37553" onMouseOver="hilite(37553)" onMouseOut="lolite()" onClick="logVariable('groupfrom')" href="../../_variables/groupfrom.html">$groupfrom</a> = '';
<a name="l364"><span class="linenum"> 364</span></a>          <a class="var it4116" onMouseOver="hilite(4116)" onMouseOut="lolite()" onClick="logVariable('groupsql')" href="../../_variables/groupsql.html">$groupsql</a>  = '';
<a name="l365"><span class="linenum"> 365</span></a>      }
<a name="l366"><span class="linenum"> 366</span></a>  
<a name="l367"><span class="linenum"> 367</span></a>      <a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>('u');
<a name="l368"><span class="linenum"> 368</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;SELECT sa.*, <a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a>
<a name="l369"><span class="linenum"> 369</span></a>                                     FROM {survey_answers} sa,  {user} u <a class="var it37553" onMouseOver="hilite(37553)" onMouseOut="lolite()" onClick="logVariable('groupfrom')" href="../../_variables/groupfrom.html">$groupfrom</a>
<a name="l370"><span class="linenum"> 370</span></a>                                    WHERE sa.survey = :surveyid
<a name="l371"><span class="linenum"> 371</span></a>                                          AND sa.question = :questionid
<a name="l372"><span class="linenum"> 372</span></a>                                          AND u.id = sa.userid <a class="var it4116" onMouseOver="hilite(4116)" onMouseOut="lolite()" onClick="logVariable('groupsql')" href="../../_variables/groupsql.html">$groupsql</a>
<a name="l373"><span class="linenum"> 373</span></a>                                 ORDER BY <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l374"><span class="linenum"> 374</span></a>  }
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">/**</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment"> * @global object</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment"> * @param int $surveyid</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment"> * @param int $questionid</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment"> * @param int $userid</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment"> * @return array</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment"> */</span>
<a name="l383"><span class="linenum"> 383</span></a>  function <a class="function" onClick="logFunction('survey_get_user_answer')" href="../../_functions/survey_get_user_answer.html" onMouseOver="funcPopup(event,'survey_get_user_answer')">survey_get_user_answer</a>(<a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../_variables/surveyid.html">$surveyid</a>, <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../../_variables/questionid.html">$questionid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l384"><span class="linenum"> 384</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l385"><span class="linenum"> 385</span></a>  
<a name="l386"><span class="linenum"> 386</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(&quot;SELECT sa.*
<a name="l387"><span class="linenum"> 387</span></a>                                    FROM {survey_answers} sa
<a name="l388"><span class="linenum"> 388</span></a>                                   WHERE sa.survey = ?
<a name="l389"><span class="linenum"> 389</span></a>                                         AND sa.question = ?
<a name="l390"><span class="linenum"> 390</span></a>                                         AND sa.userid = ?&quot;, array(<a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../_variables/surveyid.html">$surveyid</a>, <a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../../_variables/questionid.html">$questionid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l391"><span class="linenum"> 391</span></a>  }
<a name="l392"><span class="linenum"> 392</span></a>  
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">// MODULE FUNCTIONS ////////////////////////////////////////////////////////</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">/**</span>
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment"> * @global object</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment"> * @param int $survey</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment"> * @param int $user</span>
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment"> * @param string $notes</span>
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment"> * @return bool|int</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment"> */</span>
<a name="l401"><span class="linenum"> 401</span></a>  function <a class="function" onClick="logFunction('survey_add_analysis')" href="../../_functions/survey_add_analysis.html" onMouseOver="funcPopup(event,'survey_add_analysis')">survey_add_analysis</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../../_variables/notes.html">$notes</a>) {
<a name="l402"><span class="linenum"> 402</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l403"><span class="linenum"> 403</span></a>  
<a name="l404"><span class="linenum"> 404</span></a>      <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = new stdClass();
<a name="l405"><span class="linenum"> 405</span></a>      <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('survey')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/survey.html">survey</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>;
<a name="l406"><span class="linenum"> 406</span></a>      <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>;
<a name="l407"><span class="linenum"> 407</span></a>      <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('notes')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/notes.html">notes</a> = <a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../../_variables/notes.html">$notes</a>;
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;survey_analysis&quot;, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>, false);
<a name="l410"><span class="linenum"> 410</span></a>  }
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">/**</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment"> * @global object</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment"> * @param int $survey</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment"> * @param int $user</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment"> * @return bool</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment"> */</span>
<a name="l417"><span class="linenum"> 417</span></a>  function <a class="function" onClick="logFunction('survey_already_done')" href="../../_functions/survey_already_done.html" onMouseOver="funcPopup(event,'survey_already_done')">survey_already_done</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l418"><span class="linenum"> 418</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l419"><span class="linenum"> 419</span></a>  
<a name="l420"><span class="linenum"> 420</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>(&quot;survey_answers&quot;, array(&quot;survey&quot;=&gt;<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>, &quot;userid&quot;=&gt;<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>));
<a name="l421"><span class="linenum"> 421</span></a>  }
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">/**</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment"> * @param int $surveyid</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment"> * @param int $groupid</span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment"> * @param int $groupingid</span>
<a name="l426"><span class="linenum"> 426</span></a>  <span class="comment"> * @return int</span>
<a name="l427"><span class="linenum"> 427</span></a>  <span class="comment"> */</span>
<a name="l428"><span class="linenum"> 428</span></a>  function <a class="function" onClick="logFunction('survey_count_responses')" href="../../_functions/survey_count_responses.html" onMouseOver="funcPopup(event,'survey_count_responses')">survey_count_responses</a>(<a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../_variables/surveyid.html">$surveyid</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../../_variables/groupingid.html">$groupingid</a>) {
<a name="l429"><span class="linenum"> 429</span></a>      if (<a class="var it4437" onMouseOver="hilite(4437)" onMouseOut="lolite()" onClick="logVariable('responses')" href="../../_variables/responses.html">$responses</a> = <a class="function" onClick="logFunction('survey_get_responses')" href="../../_functions/survey_get_responses.html" onMouseOver="funcPopup(event,'survey_get_responses')">survey_get_responses</a>(<a class="var it29772" onMouseOver="hilite(29772)" onMouseOut="lolite()" onClick="logVariable('surveyid')" href="../../_variables/surveyid.html">$surveyid</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../../_variables/groupingid.html">$groupingid</a>)) {
<a name="l430"><span class="linenum"> 430</span></a>          return <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4437" onMouseOver="hilite(4437)" onMouseOut="lolite()" onClick="logVariable('responses')" href="../../_variables/responses.html">$responses</a>);
<a name="l431"><span class="linenum"> 431</span></a>      } else {
<a name="l432"><span class="linenum"> 432</span></a>          return 0;
<a name="l433"><span class="linenum"> 433</span></a>      }
<a name="l434"><span class="linenum"> 434</span></a>  }
<a name="l435"><span class="linenum"> 435</span></a>  
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">/**</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment"> * @param int $cmid</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment"> * @param array $results</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment"> */</span>
<a name="l441"><span class="linenum"> 441</span></a>  function <a class="function" onClick="logFunction('survey_print_all_responses')" href="../../_functions/survey_print_all_responses.html" onMouseOver="funcPopup(event,'survey_print_all_responses')">survey_print_all_responses</a>(<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../_variables/results.html">$results</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l442"><span class="linenum"> 442</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l443"><span class="linenum"> 443</span></a>      <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_table')" href="../../_classes/html_table.html" onMouseOver="classPopup(event,'html_table')">html_table</a>();
<a name="l444"><span class="linenum"> 444</span></a>      <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('head')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../../_variables/head.html">head</a>  = array (&quot;&quot;, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;name&quot;),  <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;time&quot;));
<a name="l445"><span class="linenum"> 445</span></a>      <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('align')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../../_variables/align.html">align</a> = array (&quot;&quot;, &quot;left&quot;, &quot;left&quot;);
<a name="l446"><span class="linenum"> 446</span></a>      <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('size')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../../_variables/size.html">size</a> = array (35, &quot;&quot;, &quot;&quot; );
<a name="l447"><span class="linenum"> 447</span></a>  
<a name="l448"><span class="linenum"> 448</span></a>      foreach (<a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../_variables/results.html">$results</a> as <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>) {
<a name="l449"><span class="linenum"> 449</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>[] = array(<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('user_picture')" href="../../_functions/user_picture.html" onMouseOver="funcPopup(event,'user_picture')">user_picture</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>, array('courseid'=&gt;<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>)),
<a name="l450"><span class="linenum"> 450</span></a>                 <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(&quot;report.php?action=student&amp;student=<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('id')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;id=<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>&quot;, <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>)),
<a name="l451"><span class="linenum"> 451</span></a>                 <a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('time')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../../_variables/time.html">time</a>));
<a name="l452"><span class="linenum"> 452</span></a>      }
<a name="l453"><span class="linenum"> 453</span></a>  
<a name="l454"><span class="linenum"> 454</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('table')" href="../../_functions/table.html" onMouseOver="funcPopup(event,'table')">table</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>);
<a name="l455"><span class="linenum"> 455</span></a>  }
<a name="l456"><span class="linenum"> 456</span></a>  
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">/**</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment"> * @global object</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment"> * @param int $templateid</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment"> * @return string</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment"> */</span>
<a name="l462"><span class="linenum"> 462</span></a>  function <a class="function" onClick="logFunction('survey_get_template_name')" href="../../_functions/survey_get_template_name.html" onMouseOver="funcPopup(event,'survey_get_template_name')">survey_get_template_name</a>(<a class="var it7511" onMouseOver="hilite(7511)" onMouseOut="lolite()" onClick="logVariable('templateid')" href="../../_variables/templateid.html">$templateid</a>) {
<a name="l463"><span class="linenum"> 463</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l464"><span class="linenum"> 464</span></a>  
<a name="l465"><span class="linenum"> 465</span></a>      if (<a class="var it7511" onMouseOver="hilite(7511)" onMouseOut="lolite()" onClick="logVariable('templateid')" href="../../_variables/templateid.html">$templateid</a>) {
<a name="l466"><span class="linenum"> 466</span></a>          if (<a class="var it4964" onMouseOver="hilite(4964)" onMouseOut="lolite()" onClick="logVariable('ss')" href="../../_variables/ss.html">$ss</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;surveys&quot;, array(&quot;id&quot;=&gt;<a class="var it7511" onMouseOver="hilite(7511)" onMouseOut="lolite()" onClick="logVariable('templateid')" href="../../_variables/templateid.html">$templateid</a>))) {
<a name="l467"><span class="linenum"> 467</span></a>              return <a class="var it4964" onMouseOver="hilite(4964)" onMouseOut="lolite()" onClick="logVariable('ss')" href="../../_variables/ss.html">$ss</a>-&gt;<a onClick="logVariable('name')" class="var it45409" onMouseOver="hilite(45409)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l468"><span class="linenum"> 468</span></a>          }
<a name="l469"><span class="linenum"> 469</span></a>      } else {
<a name="l470"><span class="linenum"> 470</span></a>          return &quot;&quot;;
<a name="l471"><span class="linenum"> 471</span></a>      }
<a name="l472"><span class="linenum"> 472</span></a>  }
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>  
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">/**</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment"> * @param string $name</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment"> * @param array $numwords</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment"> * @return string</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment"> */</span>
<a name="l480"><span class="linenum"> 480</span></a>  function <a class="function" onClick="logFunction('survey_shorten_name')" href="../../_functions/survey_shorten_name.html" onMouseOver="funcPopup(event,'survey_shorten_name')">survey_shorten_name</a> (<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('numwords')" href="../../_variables/numwords.html">$numwords</a>) {
<a name="l481"><span class="linenum"> 481</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../../_variables/words.html">$words</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot; &quot;, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l482"><span class="linenum"> 482</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = '';
<a name="l483"><span class="linenum"> 483</span></a>      for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>=0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('numwords')" href="../../_variables/numwords.html">$numwords</a>; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l484"><span class="linenum"> 484</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../../_variables/words.html">$words</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>].&quot; &quot;;
<a name="l485"><span class="linenum"> 485</span></a>      }
<a name="l486"><span class="linenum"> 486</span></a>      return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>;
<a name="l487"><span class="linenum"> 487</span></a>  }
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">/**</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment"> * @todo Check this function</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment"> *</span>
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment"> * @global object</span>
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment"> * @global object</span>
<a name="l494"><span class="linenum"> 494</span></a>  <span class="comment"> * @global int</span>
<a name="l495"><span class="linenum"> 495</span></a>  <span class="comment"> * @global void This is never defined</span>
<a name="l496"><span class="linenum"> 496</span></a>  <span class="comment"> * @global object This is defined twice?</span>
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment"> * @param object $question</span>
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment"> */</span>
<a name="l499"><span class="linenum"> 499</span></a>  function <a class="function" onClick="logFunction('survey_print_multi')" href="../../_functions/survey_print_multi.html" onMouseOver="funcPopup(event,'survey_print_multi')">survey_print_multi</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>) {
<a name="l500"><span class="linenum"> 500</span></a>      global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a>, <a class="var it15843" onMouseOver="hilite(15843)" onMouseOut="lolite()" onClick="logVariable('checklist')" href="../../_variables/checklist.html">$checklist</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>; <span class="comment">//TODO: this is sloppy globals abuse</span>
<a name="l501"><span class="linenum"> 501</span></a>  
<a name="l502"><span class="linenum"> 502</span></a>      <a class="var it37555" onMouseOver="hilite(37555)" onMouseOut="lolite()" onClick="logVariable('stripreferthat')" href="../../_variables/stripreferthat.html">$stripreferthat</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;ipreferthat&quot;, &quot;survey&quot;);
<a name="l503"><span class="linenum"> 503</span></a>      <a class="var it37556" onMouseOver="hilite(37556)" onMouseOut="lolite()" onClick="logVariable('strifoundthat')" href="../../_variables/strifoundthat.html">$strifoundthat</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;ifoundthat&quot;, &quot;survey&quot;);
<a name="l504"><span class="linenum"> 504</span></a>      <a class="var it37557" onMouseOver="hilite(37557)" onMouseOut="lolite()" onClick="logVariable('strdefault')" href="../../_variables/strdefault.html">$strdefault</a>    = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('notyetanswered', 'survey');
<a name="l505"><span class="linenum"> 505</span></a>      <a class="var it1975" onMouseOver="hilite(1975)" onMouseOut="lolite()" onClick="logVariable('strresponses')" href="../../_variables/strresponses.html">$strresponses</a>  = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('responses', 'survey');
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('text')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/text.html">text</a>, 3);
<a name="l508"><span class="linenum"> 508</span></a>      echo &quot;\n&lt;table width=\&quot;90%\&quot; cellpadding=\&quot;4\&quot; cellspacing=\&quot;1\&quot; border=\&quot;0\&quot; class=\&quot;surveytable\&quot;&gt;&quot;;
<a name="l509"><span class="linenum"> 509</span></a>  
<a name="l510"><span class="linenum"> 510</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( &quot;,&quot;, <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('options')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/options.html">options</a>);
<a name="l511"><span class="linenum"> 511</span></a>      <a class="var it37558" onMouseOver="hilite(37558)" onMouseOut="lolite()" onClick="logVariable('numoptions')" href="../../_variables/numoptions.html">$numoptions</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">    // COLLES Actual (which is having questions of type 1) and COLLES Preferred (type 2)</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">    // expect just one answer per question. COLLES Actual and Preferred (type 3) expects</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">    // two answers per question. ATTLS (having a single question of type 1) expects one</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">    // answer per question. CIQ is not using multiquestions (i.e. a question with subquestions).</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">    // Note that the type of subquestions does not really matter, it's the type of the</span>
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment">    // question itself that determines everything.</span>
<a name="l519"><span class="linenum"> 519</span></a>      <a class="var it37559" onMouseOver="hilite(37559)" onMouseOut="lolite()" onClick="logVariable('oneanswer')" href="../../_variables/oneanswer.html">$oneanswer</a> = (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('type')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/type.html">type</a> == 1 || <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('type')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/type.html">type</a> == 2) ? true : false;
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">    // COLLES Preferred (having questions of type 2) will use the radio elements with the name</span>
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">    // like qP1, qP2 etc. COLLES Actual and ATTLS have radios like q1, q2 etc.</span>
<a name="l523"><span class="linenum"> 523</span></a>      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('type')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/type.html">type</a> == 2) {
<a name="l524"><span class="linenum"> 524</span></a>          <a class="var it6538" onMouseOver="hilite(6538)" onMouseOut="lolite()" onClick="logVariable('P')" href="../../_variables/P.html">$P</a> = &quot;P&quot;;
<a name="l525"><span class="linenum"> 525</span></a>      } else {
<a name="l526"><span class="linenum"> 526</span></a>          <a class="var it6538" onMouseOver="hilite(6538)" onMouseOut="lolite()" onClick="logVariable('P')" href="../../_variables/P.html">$P</a> = &quot;&quot;;
<a name="l527"><span class="linenum"> 527</span></a>      }
<a name="l528"><span class="linenum"> 528</span></a>  
<a name="l529"><span class="linenum"> 529</span></a>      echo &quot;&lt;tr class=\&quot;smalltext\&quot;&gt;&lt;th scope=\&quot;row\&quot;&gt;<a class="var it1975" onMouseOver="hilite(1975)" onMouseOut="lolite()" onClick="logVariable('strresponses')" href="../../_variables/strresponses.html">$strresponses</a>&lt;/th&gt;&quot;;
<a name="l530"><span class="linenum"> 530</span></a>      echo &quot;&lt;th scope=\&quot;col\&quot; class=\&quot;hresponse\&quot;&gt;&quot;. <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('notyetanswered', 'survey'). &quot;&lt;/th&gt;&quot;;
<a name="l531"><span class="linenum"> 531</span></a>      while (<a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a> (<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>) = <a class="phpfunction" onClick="logFunction('each')" href="../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a> (<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>)) {
<a name="l532"><span class="linenum"> 532</span></a>          echo &quot;&lt;th scope=\&quot;col\&quot; class=\&quot;hresponse\&quot;&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>&lt;/th&gt;\n&quot;;
<a name="l533"><span class="linenum"> 533</span></a>      }
<a name="l534"><span class="linenum"> 534</span></a>      echo &quot;&lt;/tr&gt;\n&quot;;
<a name="l535"><span class="linenum"> 535</span></a>  
<a name="l536"><span class="linenum"> 536</span></a>      echo &quot;&lt;tr&gt;&lt;th scope=\&quot;col\&quot; colspan=\&quot;7\&quot;&gt;<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('intro')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a>&lt;/th&gt;&lt;/tr&gt;\n&quot;;
<a name="l537"><span class="linenum"> 537</span></a>  
<a name="l538"><span class="linenum"> 538</span></a>      <a class="var it460" onMouseOver="hilite(460)" onMouseOut="lolite()" onClick="logVariable('subquestions')" href="../../_variables/subquestions.html">$subquestions</a> = <a class="function" onClick="logFunction('survey_get_subquestions')" href="../../_functions/survey_get_subquestions.html" onMouseOver="funcPopup(event,'survey_get_subquestions')">survey_get_subquestions</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>);
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>      foreach (<a class="var it460" onMouseOver="hilite(460)" onMouseOut="lolite()" onClick="logVariable('subquestions')" href="../../_variables/subquestions.html">$subquestions</a> as <a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>) {
<a name="l541"><span class="linenum"> 541</span></a>          <a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a>++;
<a name="l542"><span class="linenum"> 542</span></a>          if (<a class="var it37559" onMouseOver="hilite(37559)" onMouseOut="lolite()" onClick="logVariable('oneanswer')" href="../../_variables/oneanswer.html">$oneanswer</a>) {
<a name="l543"><span class="linenum"> 543</span></a>              <a class="var it11448" onMouseOver="hilite(11448)" onMouseOut="lolite()" onClick="logVariable('rowclass')" href="../../_variables/rowclass.html">$rowclass</a> = <a class="function" onClick="logFunction('survey_question_rowclass')" href="../../_functions/survey_question_rowclass.html" onMouseOver="funcPopup(event,'survey_question_rowclass')">survey_question_rowclass</a>(<a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a>);
<a name="l544"><span class="linenum"> 544</span></a>          } else {
<a name="l545"><span class="linenum"> 545</span></a>              <a class="var it11448" onMouseOver="hilite(11448)" onMouseOut="lolite()" onClick="logVariable('rowclass')" href="../../_variables/rowclass.html">$rowclass</a> = <a class="function" onClick="logFunction('survey_question_rowclass')" href="../../_functions/survey_question_rowclass.html" onMouseOver="funcPopup(event,'survey_question_rowclass')">survey_question_rowclass</a>(<a class="phpfunction" onClick="logFunction('round')" href="../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(<a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a> / 2));
<a name="l546"><span class="linenum"> 546</span></a>          }
<a name="l547"><span class="linenum"> 547</span></a>          if (<a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('text')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/text.html">text</a>) {
<a name="l548"><span class="linenum"> 548</span></a>              <a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('text')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/text.html">text</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('text')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/text.html">text</a>, &quot;survey&quot;);
<a name="l549"><span class="linenum"> 549</span></a>          }
<a name="l550"><span class="linenum"> 550</span></a>  
<a name="l551"><span class="linenum"> 551</span></a>          echo &quot;&lt;tr class=\&quot;<a class="var it11448" onMouseOver="hilite(11448)" onMouseOut="lolite()" onClick="logVariable('rowclass')" href="../../_variables/rowclass.html">$rowclass</a> rblock\&quot;&gt;&quot;;
<a name="l552"><span class="linenum"> 552</span></a>          if (<a class="var it37559" onMouseOver="hilite(37559)" onMouseOut="lolite()" onClick="logVariable('oneanswer')" href="../../_variables/oneanswer.html">$oneanswer</a>) {
<a name="l553"><span class="linenum"> 553</span></a>              echo &quot;&lt;th scope=\&quot;row\&quot; class=\&quot;optioncell\&quot;&gt;&quot;;
<a name="l554"><span class="linenum"> 554</span></a>              echo &quot;&lt;b class=\&quot;qnumtopcell\&quot;&gt;<a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a>&lt;/b&gt; &amp;nbsp; &quot;;
<a name="l555"><span class="linenum"> 555</span></a>              echo <a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('text')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/text.html">text</a> .&quot;&lt;/th&gt;\n&quot;;
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>              <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a> = <a class="function" onClick="logFunction('get_accesshide')" href="../../_functions/get_accesshide.html" onMouseOver="funcPopup(event,'get_accesshide')">get_accesshide</a>(<a class="var it37557" onMouseOver="hilite(37557)" onMouseOut="lolite()" onClick="logVariable('strdefault')" href="../../_variables/strdefault.html">$strdefault</a>);
<a name="l558"><span class="linenum"> 558</span></a>              echo &quot;&lt;td class=\&quot;whitecell\&quot;&gt;&lt;label for=\&quot;q<a class="var it6538" onMouseOver="hilite(6538)" onMouseOut="lolite()" onClick="logVariable('P')" href="../../_variables/P.html">$P</a><a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>\&quot;&gt;&lt;input type=\&quot;radio\&quot; name=\&quot;q<a class="var it6538" onMouseOver="hilite(6538)" onMouseOut="lolite()" onClick="logVariable('P')" href="../../_variables/P.html">$P</a><a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>\&quot; id=\&quot;q<a class="var it6538" onMouseOver="hilite(6538)" onMouseOut="lolite()" onClick="logVariable('P')" href="../../_variables/P.html">$P</a>&quot; . <a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot;_D\&quot; value=\&quot;0\&quot; checked=\&quot;checked\&quot; /&gt;<a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a>&lt;/label&gt;&lt;/td&gt;&quot;;
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>              for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>=1;<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&lt;=<a class="var it37558" onMouseOver="hilite(37558)" onMouseOut="lolite()" onClick="logVariable('numoptions')" href="../../_variables/numoptions.html">$numoptions</a>;<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l561"><span class="linenum"> 561</span></a>                  <a class="var it37560" onMouseOver="hilite(37560)" onMouseOut="lolite()" onClick="logVariable('hiddentext')" href="../../_variables/hiddentext.html">$hiddentext</a> = <a class="function" onClick="logFunction('get_accesshide')" href="../../_functions/get_accesshide.html" onMouseOver="funcPopup(event,'get_accesshide')">get_accesshide</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>-1]);
<a name="l562"><span class="linenum"> 562</span></a>                  <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> = &quot;q<a class="var it6538" onMouseOver="hilite(6538)" onMouseOut="lolite()" onClick="logVariable('P')" href="../../_variables/P.html">$P</a>&quot; . <a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot;_<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&quot;;
<a name="l563"><span class="linenum"> 563</span></a>                  echo &quot;&lt;td&gt;&lt;label for=\&quot;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>\&quot;&gt;&lt;input type=\&quot;radio\&quot; name=\&quot;q<a class="var it6538" onMouseOver="hilite(6538)" onMouseOut="lolite()" onClick="logVariable('P')" href="../../_variables/P.html">$P</a><a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>\&quot; id=\&quot;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>\&quot; value=\&quot;<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>\&quot; /&gt;<a class="var it37560" onMouseOver="hilite(37560)" onMouseOut="lolite()" onClick="logVariable('hiddentext')" href="../../_variables/hiddentext.html">$hiddentext</a>&lt;/label&gt;&lt;/td&gt;&quot;;
<a name="l564"><span class="linenum"> 564</span></a>              }
<a name="l565"><span class="linenum"> 565</span></a>              <a class="var it15843" onMouseOver="hilite(15843)" onMouseOut="lolite()" onClick="logVariable('checklist')" href="../../_variables/checklist.html">$checklist</a>[&quot;q<a class="var it6538" onMouseOver="hilite(6538)" onMouseOut="lolite()" onClick="logVariable('P')" href="../../_variables/P.html">$P</a><a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&quot;] = 0;
<a name="l566"><span class="linenum"> 566</span></a>  
<a name="l567"><span class="linenum"> 567</span></a>          } else {
<a name="l568"><span class="linenum"> 568</span></a>              echo &quot;&lt;th scope=\&quot;row\&quot; class=\&quot;optioncell\&quot;&gt;&quot;;
<a name="l569"><span class="linenum"> 569</span></a>              echo &quot;&lt;b class=\&quot;qnumtopcell\&quot;&gt;<a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a>&lt;/b&gt; &amp;nbsp; &quot;;
<a name="l570"><span class="linenum"> 570</span></a>              <a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a>++;
<a name="l571"><span class="linenum"> 571</span></a>              echo &quot;&lt;span class=\&quot;preferthat\&quot;&gt;<a class="var it37555" onMouseOver="hilite(37555)" onMouseOut="lolite()" onClick="logVariable('stripreferthat')" href="../../_variables/stripreferthat.html">$stripreferthat</a>&lt;/span&gt; &amp;nbsp; &quot;;
<a name="l572"><span class="linenum"> 572</span></a>              echo &quot;&lt;span class=\&quot;option\&quot;&gt;<a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('text')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/text.html">text</a>&lt;/span&gt;&lt;/th&gt;\n&quot;;
<a name="l573"><span class="linenum"> 573</span></a>  
<a name="l574"><span class="linenum"> 574</span></a>              <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a> = <a class="function" onClick="logFunction('get_accesshide')" href="../../_functions/get_accesshide.html" onMouseOver="funcPopup(event,'get_accesshide')">get_accesshide</a>(<a class="var it37557" onMouseOver="hilite(37557)" onMouseOut="lolite()" onClick="logVariable('strdefault')" href="../../_variables/strdefault.html">$strdefault</a>);
<a name="l575"><span class="linenum"> 575</span></a>              echo '&lt;td class=&quot;whitecell&quot;&gt;&lt;label for=&quot;qP'.<a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;qP'.<a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'&quot; id=&quot;qP'.<a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'&quot; value=&quot;0&quot; checked=&quot;checked&quot; /&gt;'.<a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a>.'&lt;/label&gt;&lt;/td&gt;';
<a name="l576"><span class="linenum"> 576</span></a>  
<a name="l577"><span class="linenum"> 577</span></a>  
<a name="l578"><span class="linenum"> 578</span></a>              for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>=1;<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&lt;=<a class="var it37558" onMouseOver="hilite(37558)" onMouseOut="lolite()" onClick="logVariable('numoptions')" href="../../_variables/numoptions.html">$numoptions</a>;<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l579"><span class="linenum"> 579</span></a>                  <a class="var it37560" onMouseOver="hilite(37560)" onMouseOut="lolite()" onClick="logVariable('hiddentext')" href="../../_variables/hiddentext.html">$hiddentext</a> = <a class="function" onClick="logFunction('get_accesshide')" href="../../_functions/get_accesshide.html" onMouseOver="funcPopup(event,'get_accesshide')">get_accesshide</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>-1]);
<a name="l580"><span class="linenum"> 580</span></a>                  <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> = &quot;qP&quot; . <a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot;_<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&quot;;
<a name="l581"><span class="linenum"> 581</span></a>                  echo &quot;&lt;td&gt;&lt;label for=\&quot;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>\&quot;&gt;&lt;input type=\&quot;radio\&quot; name=\&quot;qP<a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>\&quot; id=\&quot;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>\&quot; value=\&quot;<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>\&quot; /&gt;<a class="var it37560" onMouseOver="hilite(37560)" onMouseOut="lolite()" onClick="logVariable('hiddentext')" href="../../_variables/hiddentext.html">$hiddentext</a>&lt;/label&gt;&lt;/td&gt;&quot;;
<a name="l582"><span class="linenum"> 582</span></a>              }
<a name="l583"><span class="linenum"> 583</span></a>              echo &quot;&lt;/tr&gt;&quot;;
<a name="l584"><span class="linenum"> 584</span></a>  
<a name="l585"><span class="linenum"> 585</span></a>              echo &quot;&lt;tr class=\&quot;<a class="var it11448" onMouseOver="hilite(11448)" onMouseOut="lolite()" onClick="logVariable('rowclass')" href="../../_variables/rowclass.html">$rowclass</a> rblock\&quot;&gt;&quot;;
<a name="l586"><span class="linenum"> 586</span></a>              echo &quot;&lt;th scope=\&quot;row\&quot; class=\&quot;optioncell\&quot;&gt;&quot;;
<a name="l587"><span class="linenum"> 587</span></a>              echo &quot;&lt;b class=\&quot;qnumtopcell\&quot;&gt;<a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a>&lt;/b&gt; &amp;nbsp; &quot;;
<a name="l588"><span class="linenum"> 588</span></a>              echo &quot;&lt;span class=\&quot;foundthat\&quot;&gt;<a class="var it37556" onMouseOver="hilite(37556)" onMouseOut="lolite()" onClick="logVariable('strifoundthat')" href="../../_variables/strifoundthat.html">$strifoundthat</a>&lt;/span&gt; &amp;nbsp; &quot;;
<a name="l589"><span class="linenum"> 589</span></a>              echo &quot;&lt;span class=\&quot;option\&quot;&gt;<a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('text')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/text.html">text</a>&lt;/span&gt;&lt;/th&gt;\n&quot;;
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>              <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a> = <a class="function" onClick="logFunction('get_accesshide')" href="../../_functions/get_accesshide.html" onMouseOver="funcPopup(event,'get_accesshide')">get_accesshide</a>(<a class="var it37557" onMouseOver="hilite(37557)" onMouseOut="lolite()" onClick="logVariable('strdefault')" href="../../_variables/strdefault.html">$strdefault</a>);
<a name="l592"><span class="linenum"> 592</span></a>              echo '&lt;td class=&quot;whitecell&quot;&gt;&lt;label for=&quot;q'. <a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> .'&quot;&gt;&lt;input type=&quot;radio&quot; name=&quot;q'.<a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>. '&quot; id=&quot;q'. <a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> .'&quot; value=&quot;0&quot; checked=&quot;checked&quot; /&gt;'.<a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a>.'&lt;/label&gt;&lt;/td&gt;';
<a name="l593"><span class="linenum"> 593</span></a>  
<a name="l594"><span class="linenum"> 594</span></a>              for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>=1;<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&lt;=<a class="var it37558" onMouseOver="hilite(37558)" onMouseOut="lolite()" onClick="logVariable('numoptions')" href="../../_variables/numoptions.html">$numoptions</a>;<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l595"><span class="linenum"> 595</span></a>                  <a class="var it37560" onMouseOver="hilite(37560)" onMouseOut="lolite()" onClick="logVariable('hiddentext')" href="../../_variables/hiddentext.html">$hiddentext</a> = <a class="function" onClick="logFunction('get_accesshide')" href="../../_functions/get_accesshide.html" onMouseOver="funcPopup(event,'get_accesshide')">get_accesshide</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>-1]);
<a name="l596"><span class="linenum"> 596</span></a>                  <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> = &quot;q&quot; . <a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . &quot;_<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&quot;;
<a name="l597"><span class="linenum"> 597</span></a>                  echo &quot;&lt;td&gt;&lt;label for=\&quot;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>\&quot;&gt;&lt;input type=\&quot;radio\&quot; name=\&quot;q<a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>\&quot; id=\&quot;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>\&quot; value=\&quot;<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>\&quot; /&gt;<a class="var it37560" onMouseOver="hilite(37560)" onMouseOut="lolite()" onClick="logVariable('hiddentext')" href="../../_variables/hiddentext.html">$hiddentext</a>&lt;/label&gt;&lt;/td&gt;&quot;;
<a name="l598"><span class="linenum"> 598</span></a>              }
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>              <a class="var it15843" onMouseOver="hilite(15843)" onMouseOut="lolite()" onClick="logVariable('checklist')" href="../../_variables/checklist.html">$checklist</a>[&quot;qP<a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&quot;] = 0;
<a name="l601"><span class="linenum"> 601</span></a>              <a class="var it15843" onMouseOver="hilite(15843)" onMouseOut="lolite()" onClick="logVariable('checklist')" href="../../_variables/checklist.html">$checklist</a>[&quot;q<a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>-&gt;<a onClick="logVariable('id')" class="var it43090" onMouseOver="hilite(43090)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&quot;] = 0;
<a name="l602"><span class="linenum"> 602</span></a>          }
<a name="l603"><span class="linenum"> 603</span></a>          echo &quot;&lt;/tr&gt;\n&quot;;
<a name="l604"><span class="linenum"> 604</span></a>      }
<a name="l605"><span class="linenum"> 605</span></a>      echo &quot;&lt;/table&gt;&quot;;
<a name="l606"><span class="linenum"> 606</span></a>  }
<a name="l607"><span class="linenum"> 607</span></a>  
<a name="l608"><span class="linenum"> 608</span></a>  
<a name="l609"><span class="linenum"> 609</span></a>  <span class="comment">/**</span>
<a name="l610"><span class="linenum"> 610</span></a>  <span class="comment"> * @global object</span>
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment"> * @global int</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment"> * @param object $question</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment"> */</span>
<a name="l614"><span class="linenum"> 614</span></a>  function <a class="function" onClick="logFunction('survey_print_single')" href="../../_functions/survey_print_single.html" onMouseOver="funcPopup(event,'survey_print_single')">survey_print_single</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>) {
<a name="l615"><span class="linenum"> 615</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l616"><span class="linenum"> 616</span></a>  
<a name="l617"><span class="linenum"> 617</span></a>      <a class="var it11448" onMouseOver="hilite(11448)" onMouseOut="lolite()" onClick="logVariable('rowclass')" href="../../_variables/rowclass.html">$rowclass</a> = <a class="function" onClick="logFunction('survey_question_rowclass')" href="../../_functions/survey_question_rowclass.html" onMouseOver="funcPopup(event,'survey_question_rowclass')">survey_question_rowclass</a>(0);
<a name="l618"><span class="linenum"> 618</span></a>  
<a name="l619"><span class="linenum"> 619</span></a>      <a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a>++;
<a name="l620"><span class="linenum"> 620</span></a>  
<a name="l621"><span class="linenum"> 621</span></a>      echo &quot;&lt;br /&gt;\n&quot;;
<a name="l622"><span class="linenum"> 622</span></a>      echo &quot;&lt;table width=\&quot;90%\&quot; cellpadding=\&quot;4\&quot; cellspacing=\&quot;0\&quot;&gt;\n&quot;;
<a name="l623"><span class="linenum"> 623</span></a>      echo &quot;&lt;tr class=\&quot;<a class="var it11448" onMouseOver="hilite(11448)" onMouseOut="lolite()" onClick="logVariable('rowclass')" href="../../_variables/rowclass.html">$rowclass</a>\&quot;&gt;&quot;;
<a name="l624"><span class="linenum"> 624</span></a>      echo &quot;&lt;th scope=\&quot;row\&quot; class=\&quot;optioncell\&quot;&gt;&lt;label for=\&quot;q<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>\&quot;&gt;&lt;b class=\&quot;qnumtopcell\&quot;&gt;<a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a>&lt;/b&gt; &amp;nbsp; &quot;;
<a name="l625"><span class="linenum"> 625</span></a>      echo &quot;&lt;span class=\&quot;questioncell\&quot;&gt;<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('text')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/text.html">text</a>&lt;/span&gt;&lt;/label&gt;&lt;/th&gt;\n&quot;;
<a name="l626"><span class="linenum"> 626</span></a>      echo &quot;&lt;td class=\&quot;questioncell smalltext\&quot;&gt;\n&quot;;
<a name="l627"><span class="linenum"> 627</span></a>  
<a name="l628"><span class="linenum"> 628</span></a>  
<a name="l629"><span class="linenum"> 629</span></a>      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('type')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/type.html">type</a> == 0) {           // Plain text field
<a name="l630"><span class="linenum"> 630</span></a>          echo &quot;&lt;textarea rows=\&quot;3\&quot; cols=\&quot;30\&quot; name=\&quot;q<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>\&quot; id=\&quot;q<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>\&quot;&gt;<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('options')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/options.html">options</a>&lt;/textarea&gt;&quot;;
<a name="l631"><span class="linenum"> 631</span></a>  
<a name="l632"><span class="linenum"> 632</span></a>      } else if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('type')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/type.html">type</a> &gt; 0) {     // Choose one of a number
<a name="l633"><span class="linenum"> 633</span></a>          <a class="var it37561" onMouseOver="hilite(37561)" onMouseOut="lolite()" onClick="logVariable('strchoose')" href="../../_variables/strchoose.html">$strchoose</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;choose&quot;);
<a name="l634"><span class="linenum"> 634</span></a>          echo &quot;&lt;select name=\&quot;q<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>\&quot; id=\&quot;q<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>\&quot;&gt;&quot;;
<a name="l635"><span class="linenum"> 635</span></a>          echo &quot;&lt;option value=\&quot;0\&quot; selected=\&quot;selected\&quot;&gt;<a class="var it37561" onMouseOver="hilite(37561)" onMouseOut="lolite()" onClick="logVariable('strchoose')" href="../../_variables/strchoose.html">$strchoose</a>...&lt;/option&gt;&quot;;
<a name="l636"><span class="linenum"> 636</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( &quot;,&quot;, <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('options')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/options.html">options</a>);
<a name="l637"><span class="linenum"> 637</span></a>          foreach (<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>) {
<a name="l638"><span class="linenum"> 638</span></a>              <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>++;
<a name="l639"><span class="linenum"> 639</span></a>              echo &quot;&lt;option value=\&quot;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>\&quot;&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>&lt;/option&gt;&quot;;
<a name="l640"><span class="linenum"> 640</span></a>          }
<a name="l641"><span class="linenum"> 641</span></a>          echo &quot;&lt;/select&gt;&quot;;
<a name="l642"><span class="linenum"> 642</span></a>  
<a name="l643"><span class="linenum"> 643</span></a>      } else if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('type')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/type.html">type</a> &lt; 0) {     // Choose several of a number
<a name="l644"><span class="linenum"> 644</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>( &quot;,&quot;, <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('options')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/options.html">options</a>);
<a name="l645"><span class="linenum"> 645</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(&quot;This question type not supported yet&quot;);
<a name="l646"><span class="linenum"> 646</span></a>      }
<a name="l647"><span class="linenum"> 647</span></a>  
<a name="l648"><span class="linenum"> 648</span></a>      echo &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;
<a name="l649"><span class="linenum"> 649</span></a>  
<a name="l650"><span class="linenum"> 650</span></a>  }
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment">/**</span>
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment"> *</span>
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment"> * @param int $qnum</span>
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment"> * @return string</span>
<a name="l656"><span class="linenum"> 656</span></a>  <span class="comment"> */</span>
<a name="l657"><span class="linenum"> 657</span></a>  function <a class="function" onClick="logFunction('survey_question_rowclass')" href="../../_functions/survey_question_rowclass.html" onMouseOver="funcPopup(event,'survey_question_rowclass')">survey_question_rowclass</a>(<a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a>) {
<a name="l658"><span class="linenum"> 658</span></a>  
<a name="l659"><span class="linenum"> 659</span></a>      if (<a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a>) {
<a name="l660"><span class="linenum"> 660</span></a>          return <a class="var it9356" onMouseOver="hilite(9356)" onMouseOut="lolite()" onClick="logVariable('qnum')" href="../../_variables/qnum.html">$qnum</a> % 2 ? 'r0' : 'r1';
<a name="l661"><span class="linenum"> 661</span></a>      } else {
<a name="l662"><span class="linenum"> 662</span></a>          return 'r0';
<a name="l663"><span class="linenum"> 663</span></a>      }
<a name="l664"><span class="linenum"> 664</span></a>  }
<a name="l665"><span class="linenum"> 665</span></a>  
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment">/**</span>
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment"> * @global object</span>
<a name="l668"><span class="linenum"> 668</span></a>  <span class="comment"> * @global int</span>
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment"> * @global int</span>
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment"> * @param string $url</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment"> */</span>
<a name="l672"><span class="linenum"> 672</span></a>  function <a class="function" onClick="logFunction('survey_print_graph')" href="../../_functions/survey_print_graph.html" onMouseOver="funcPopup(event,'survey_print_graph')">survey_print_graph</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>) {
<a name="l673"><span class="linenum"> 673</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it37547" onMouseOver="hilite(37547)" onMouseOut="lolite()" onClick="logVariable('SURVEY_GHEIGHT')" href="../../_variables/SURVEY_GHEIGHT.html">$SURVEY_GHEIGHT</a>, <a class="var it37548" onMouseOver="hilite(37548)" onMouseOut="lolite()" onClick="logVariable('SURVEY_GWIDTH')" href="../../_variables/SURVEY_GWIDTH.html">$SURVEY_GWIDTH</a>;
<a name="l674"><span class="linenum"> 674</span></a>  
<a name="l675"><span class="linenum"> 675</span></a>      echo &quot;&lt;img class='resultgraph' height=\&quot;<a class="var it37547" onMouseOver="hilite(37547)" onMouseOut="lolite()" onClick="logVariable('SURVEY_GHEIGHT')" href="../../_variables/SURVEY_GHEIGHT.html">$SURVEY_GHEIGHT</a>\&quot; width=\&quot;<a class="var it37548" onMouseOver="hilite(37548)" onMouseOut="lolite()" onClick="logVariable('SURVEY_GWIDTH')" href="../../_variables/SURVEY_GWIDTH.html">$SURVEY_GWIDTH</a>\&quot;&quot;.
<a name="l676"><span class="linenum"> 676</span></a>           &quot; src=\&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/survey/graph.php?<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>\&quot; alt=\&quot;&quot;.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;surveygraph&quot;, &quot;survey&quot;).&quot;\&quot; /&gt;&quot;;
<a name="l677"><span class="linenum"> 677</span></a>  }
<a name="l678"><span class="linenum"> 678</span></a>  
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment">/**</span>
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment"> * List the actions that correspond to a view of this module.</span>
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment"> *</span>
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment"> *       crud = 'r' and edulevel = LEVEL_PARTICIPATING will</span>
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment"> *       be considered as view action.</span>
<a name="l686"><span class="linenum"> 686</span></a>  <span class="comment"> *</span>
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment"> * @return array</span>
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment"> */</span>
<a name="l689"><span class="linenum"> 689</span></a>  function <a class="function" onClick="logFunction('survey_get_view_actions')" href="../../_functions/survey_get_view_actions.html" onMouseOver="funcPopup(event,'survey_get_view_actions')">survey_get_view_actions</a>() {
<a name="l690"><span class="linenum"> 690</span></a>      return array('download','view all','view form','view graph','view report');
<a name="l691"><span class="linenum"> 691</span></a>  }
<a name="l692"><span class="linenum"> 692</span></a>  
<a name="l693"><span class="linenum"> 693</span></a>  <span class="comment">/**</span>
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment"> * List the actions that correspond to a post of this module.</span>
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment"> *</span>
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment"> *       crud = ('c' || 'u' || 'd') and edulevel = LEVEL_PARTICIPATING</span>
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment"> *       will be considered as post action.</span>
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment"> *</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment"> * @return array</span>
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment"> */</span>
<a name="l703"><span class="linenum"> 703</span></a>  function <a class="function" onClick="logFunction('survey_get_post_actions')" href="../../_functions/survey_get_post_actions.html" onMouseOver="funcPopup(event,'survey_get_post_actions')">survey_get_post_actions</a>() {
<a name="l704"><span class="linenum"> 704</span></a>      return array('submit');
<a name="l705"><span class="linenum"> 705</span></a>  }
<a name="l706"><span class="linenum"> 706</span></a>  
<a name="l707"><span class="linenum"> 707</span></a>  
<a name="l708"><span class="linenum"> 708</span></a>  <span class="comment">/**</span>
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment"> * Implementation of the function for printing the form elements that control</span>
<a name="l710"><span class="linenum"> 710</span></a>  <span class="comment"> * whether the course reset functionality affects the survey.</span>
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment"> *</span>
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment"> * @param object $mform form passed by reference</span>
<a name="l713"><span class="linenum"> 713</span></a>  <span class="comment"> */</span>
<a name="l714"><span class="linenum"> 714</span></a>  function <a class="function" onClick="logFunction('survey_reset_course_form_definition')" href="../../_functions/survey_reset_course_form_definition.html" onMouseOver="funcPopup(event,'survey_reset_course_form_definition')">survey_reset_course_form_definition</a>(&amp;<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l715"><span class="linenum"> 715</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'surveyheader', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'survey'));
<a name="l716"><span class="linenum"> 716</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', 'reset_survey_answers', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallanswers','survey'));
<a name="l717"><span class="linenum"> 717</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', 'reset_survey_analysis', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteanalysis','survey'));
<a name="l718"><span class="linenum"> 718</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('reset_survey_analysis', 'reset_survey_answers', 'checked');
<a name="l719"><span class="linenum"> 719</span></a>  }
<a name="l720"><span class="linenum"> 720</span></a>  
<a name="l721"><span class="linenum"> 721</span></a>  <span class="comment">/**</span>
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment"> * Course reset form defaults.</span>
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment"> * @return array</span>
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment"> */</span>
<a name="l725"><span class="linenum"> 725</span></a>  function <a class="function" onClick="logFunction('survey_reset_course_form_defaults')" href="../../_functions/survey_reset_course_form_defaults.html" onMouseOver="funcPopup(event,'survey_reset_course_form_defaults')">survey_reset_course_form_defaults</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l726"><span class="linenum"> 726</span></a>      return array('reset_survey_answers'=&gt;1, 'reset_survey_analysis'=&gt;1);
<a name="l727"><span class="linenum"> 727</span></a>  }
<a name="l728"><span class="linenum"> 728</span></a>  
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">/**</span>
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment"> * Actual implementation of the reset course functionality, delete all the</span>
<a name="l731"><span class="linenum"> 731</span></a>  <span class="comment"> * survey responses for course $data-&gt;courseid.</span>
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment"> *</span>
<a name="l733"><span class="linenum"> 733</span></a>  <span class="comment"> * @global object</span>
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment"> * @param $data the data submitted from the reset course.</span>
<a name="l735"><span class="linenum"> 735</span></a>  <span class="comment"> * @return array status array</span>
<a name="l736"><span class="linenum"> 736</span></a>  <span class="comment"> */</span>
<a name="l737"><span class="linenum"> 737</span></a>  function <a class="function" onClick="logFunction('survey_reset_userdata')" href="../../_functions/survey_reset_userdata.html" onMouseOver="funcPopup(event,'survey_reset_userdata')">survey_reset_userdata</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l738"><span class="linenum"> 738</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l739"><span class="linenum"> 739</span></a>  
<a name="l740"><span class="linenum"> 740</span></a>      <a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'survey');
<a name="l741"><span class="linenum"> 741</span></a>      <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = array();
<a name="l742"><span class="linenum"> 742</span></a>  
<a name="l743"><span class="linenum"> 743</span></a>      <a class="var it37562" onMouseOver="hilite(37562)" onMouseOut="lolite()" onClick="logVariable('surveyssql')" href="../../_variables/surveyssql.html">$surveyssql</a> = &quot;SELECT ch.id
<a name="l744"><span class="linenum"> 744</span></a>                       FROM {survey} ch
<a name="l745"><span class="linenum"> 745</span></a>                      WHERE ch.course=?&quot;;
<a name="l746"><span class="linenum"> 746</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>);
<a name="l747"><span class="linenum"> 747</span></a>  
<a name="l748"><span class="linenum"> 748</span></a>      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_survey_answers')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_survey_answers.html">reset_survey_answers</a>)) {
<a name="l749"><span class="linenum"> 749</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('survey_answers', &quot;survey IN (<a class="var it37562" onMouseOver="hilite(37562)" onMouseOut="lolite()" onClick="logVariable('surveyssql')" href="../../_variables/surveyssql.html">$surveyssql</a>)&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l750"><span class="linenum"> 750</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('survey_analysis', &quot;survey IN (<a class="var it37562" onMouseOver="hilite(37562)" onMouseOut="lolite()" onClick="logVariable('surveyssql')" href="../../_variables/surveyssql.html">$surveyssql</a>)&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l751"><span class="linenum"> 751</span></a>          <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallanswers', 'survey'), 'error'=&gt;false);
<a name="l752"><span class="linenum"> 752</span></a>      }
<a name="l753"><span class="linenum"> 753</span></a>  
<a name="l754"><span class="linenum"> 754</span></a>      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_survey_analysis')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_survey_analysis.html">reset_survey_analysis</a>)) {
<a name="l755"><span class="linenum"> 755</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('survey_analysis', &quot;survey IN (<a class="var it37562" onMouseOver="hilite(37562)" onMouseOut="lolite()" onClick="logVariable('surveyssql')" href="../../_variables/surveyssql.html">$surveyssql</a>)&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l756"><span class="linenum"> 756</span></a>          <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallanswers', 'survey'), 'error'=&gt;false);
<a name="l757"><span class="linenum"> 757</span></a>      }
<a name="l758"><span class="linenum"> 758</span></a>  
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">    // no date shifting</span>
<a name="l760"><span class="linenum"> 760</span></a>      return <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>;
<a name="l761"><span class="linenum"> 761</span></a>  }
<a name="l762"><span class="linenum"> 762</span></a>  
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment">/**</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment"> * Returns all other caps used in module</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment"> *</span>
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment"> * @return array</span>
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment"> */</span>
<a name="l768"><span class="linenum"> 768</span></a>  function <a class="function" onClick="logFunction('survey_get_extra_capabilities')" href="../../_functions/survey_get_extra_capabilities.html" onMouseOver="funcPopup(event,'survey_get_extra_capabilities')">survey_get_extra_capabilities</a>() {
<a name="l769"><span class="linenum"> 769</span></a>      return array('moodle/site:accessallgroups');
<a name="l770"><span class="linenum"> 770</span></a>  }
<a name="l771"><span class="linenum"> 771</span></a>  
<a name="l772"><span class="linenum"> 772</span></a>  <span class="comment">/**</span>
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment"> * @uses FEATURE_GROUPS</span>
<a name="l774"><span class="linenum"> 774</span></a>  <span class="comment"> * @uses FEATURE_GROUPINGS</span>
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment"> * @uses FEATURE_MOD_INTRO</span>
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment"> * @uses FEATURE_COMPLETION_TRACKS_VIEWS</span>
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment"> * @uses FEATURE_GRADE_HAS_GRADE</span>
<a name="l778"><span class="linenum"> 778</span></a>  <span class="comment"> * @uses FEATURE_GRADE_OUTCOMES</span>
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment"> * @param string $feature FEATURE_xx constant for requested feature</span>
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment"> * @return mixed True if module supports feature, false if not, null if doesn't know</span>
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment"> */</span>
<a name="l782"><span class="linenum"> 782</span></a>  function <a class="function" onClick="logFunction('survey_supports')" href="../../_functions/survey_supports.html" onMouseOver="funcPopup(event,'survey_supports')">survey_supports</a>(<a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l783"><span class="linenum"> 783</span></a>      switch(<a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l784"><span class="linenum"> 784</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPS')" href="../../_constants/FEATURE_GROUPS.html" onMouseOver="constPopup(event,'FEATURE_GROUPS')">FEATURE_GROUPS</a>:                  return true;
<a name="l785"><span class="linenum"> 785</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPINGS')" href="../../_constants/FEATURE_GROUPINGS.html" onMouseOver="constPopup(event,'FEATURE_GROUPINGS')">FEATURE_GROUPINGS</a>:               return true;
<a name="l786"><span class="linenum"> 786</span></a>          case <a class="constant" onClick="logConstant('FEATURE_MOD_INTRO')" href="../../_constants/FEATURE_MOD_INTRO.html" onMouseOver="constPopup(event,'FEATURE_MOD_INTRO')">FEATURE_MOD_INTRO</a>:               return true;
<a name="l787"><span class="linenum"> 787</span></a>          case <a class="constant" onClick="logConstant('FEATURE_COMPLETION_TRACKS_VIEWS')" href="../../_constants/FEATURE_COMPLETION_TRACKS_VIEWS.html" onMouseOver="constPopup(event,'FEATURE_COMPLETION_TRACKS_VIEWS')">FEATURE_COMPLETION_TRACKS_VIEWS</a>: return true;
<a name="l788"><span class="linenum"> 788</span></a>          case <a class="constant" onClick="logConstant('FEATURE_COMPLETION_HAS_RULES')" href="../../_constants/FEATURE_COMPLETION_HAS_RULES.html" onMouseOver="constPopup(event,'FEATURE_COMPLETION_HAS_RULES')">FEATURE_COMPLETION_HAS_RULES</a>:    return true;
<a name="l789"><span class="linenum"> 789</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_HAS_GRADE')" href="../../_constants/FEATURE_GRADE_HAS_GRADE.html" onMouseOver="constPopup(event,'FEATURE_GRADE_HAS_GRADE')">FEATURE_GRADE_HAS_GRADE</a>:         return false;
<a name="l790"><span class="linenum"> 790</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_OUTCOMES')" href="../../_constants/FEATURE_GRADE_OUTCOMES.html" onMouseOver="constPopup(event,'FEATURE_GRADE_OUTCOMES')">FEATURE_GRADE_OUTCOMES</a>:          return false;
<a name="l791"><span class="linenum"> 791</span></a>          case <a class="constant" onClick="logConstant('FEATURE_BACKUP_MOODLE2')" href="../../_constants/FEATURE_BACKUP_MOODLE2.html" onMouseOver="constPopup(event,'FEATURE_BACKUP_MOODLE2')">FEATURE_BACKUP_MOODLE2</a>:          return true;
<a name="l792"><span class="linenum"> 792</span></a>          case <a class="constant" onClick="logConstant('FEATURE_SHOW_DESCRIPTION')" href="../../_constants/FEATURE_SHOW_DESCRIPTION.html" onMouseOver="constPopup(event,'FEATURE_SHOW_DESCRIPTION')">FEATURE_SHOW_DESCRIPTION</a>:        return true;
<a name="l793"><span class="linenum"> 793</span></a>  
<a name="l794"><span class="linenum"> 794</span></a>          default: return null;
<a name="l795"><span class="linenum"> 795</span></a>      }
<a name="l796"><span class="linenum"> 796</span></a>  }
<a name="l797"><span class="linenum"> 797</span></a>  
<a name="l798"><span class="linenum"> 798</span></a>  <span class="comment">/**</span>
<a name="l799"><span class="linenum"> 799</span></a>  <span class="comment"> * This function extends the settings navigation block for the site.</span>
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment"> *</span>
<a name="l801"><span class="linenum"> 801</span></a>  <span class="comment"> * It is safe to rely on PAGE here as we will only ever be within the module</span>
<a name="l802"><span class="linenum"> 802</span></a>  <span class="comment"> * context when this is called</span>
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment"> *</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment"> * @param navigation_node $settings</span>
<a name="l805"><span class="linenum"> 805</span></a>  <span class="comment"> * @param navigation_node $surveynode</span>
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment"> */</span>
<a name="l807"><span class="linenum"> 807</span></a>  function <a class="function" onClick="logFunction('survey_extend_settings_navigation')" href="../../_functions/survey_extend_settings_navigation.html" onMouseOver="funcPopup(event,'survey_extend_settings_navigation')">survey_extend_settings_navigation</a>(<a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>, <a class="var it37565" onMouseOver="hilite(37565)" onMouseOut="lolite()" onClick="logVariable('surveynode')" href="../../_variables/surveynode.html">$surveynode</a>) {
<a name="l808"><span class="linenum"> 808</span></a>      global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l809"><span class="linenum"> 809</span></a>  
<a name="l810"><span class="linenum"> 810</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/survey:readresponses', <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l811"><span class="linenum"> 811</span></a>          <a class="var it37566" onMouseOver="hilite(37566)" onMouseOut="lolite()" onClick="logVariable('responsesnode')" href="../../_variables/responsesnode.html">$responsesnode</a> = <a class="var it37565" onMouseOver="hilite(37565)" onMouseOut="lolite()" onClick="logVariable('surveynode')" href="../../_variables/surveynode.html">$surveynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;responsereports&quot;, &quot;survey&quot;));
<a name="l812"><span class="linenum"> 812</span></a>  
<a name="l813"><span class="linenum"> 813</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/survey/report.php.html">/mod/survey/report.php</a>', array('id' =&gt; <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id, 'action'=&gt;'summary'));
<a name="l814"><span class="linenum"> 814</span></a>          <a class="var it37566" onMouseOver="hilite(37566)" onMouseOut="lolite()" onClick="logVariable('responsesnode')" href="../../_variables/responsesnode.html">$responsesnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;summary&quot;, &quot;survey&quot;), <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>);
<a name="l815"><span class="linenum"> 815</span></a>  
<a name="l816"><span class="linenum"> 816</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/survey/report.php.html">/mod/survey/report.php</a>', array('id' =&gt; <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id, 'action'=&gt;'scales'));
<a name="l817"><span class="linenum"> 817</span></a>          <a class="var it37566" onMouseOver="hilite(37566)" onMouseOut="lolite()" onClick="logVariable('responsesnode')" href="../../_variables/responsesnode.html">$responsesnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;scales&quot;, &quot;survey&quot;), <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>);
<a name="l818"><span class="linenum"> 818</span></a>  
<a name="l819"><span class="linenum"> 819</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/survey/report.php.html">/mod/survey/report.php</a>', array('id' =&gt; <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id, 'action'=&gt;'questions'));
<a name="l820"><span class="linenum"> 820</span></a>          <a class="var it37566" onMouseOver="hilite(37566)" onMouseOut="lolite()" onClick="logVariable('responsesnode')" href="../../_variables/responsesnode.html">$responsesnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;question&quot;, &quot;survey&quot;), <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>);
<a name="l821"><span class="linenum"> 821</span></a>  
<a name="l822"><span class="linenum"> 822</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/survey/report.php.html">/mod/survey/report.php</a>', array('id' =&gt; <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id, 'action'=&gt;'students'));
<a name="l823"><span class="linenum"> 823</span></a>          <a class="var it37566" onMouseOver="hilite(37566)" onMouseOut="lolite()" onClick="logVariable('responsesnode')" href="../../_variables/responsesnode.html">$responsesnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('participants'), <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>);
<a name="l824"><span class="linenum"> 824</span></a>  
<a name="l825"><span class="linenum"> 825</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/survey:download', <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l826"><span class="linenum"> 826</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/survey/report.php.html">/mod/survey/report.php</a>', array('id' =&gt; <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id, 'action'=&gt;'download'));
<a name="l827"><span class="linenum"> 827</span></a>              <a class="var it37565" onMouseOver="hilite(37565)" onMouseOut="lolite()" onClick="logVariable('surveynode')" href="../../_variables/surveynode.html">$surveynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('downloadresults', 'survey'), <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>);
<a name="l828"><span class="linenum"> 828</span></a>          }
<a name="l829"><span class="linenum"> 829</span></a>      }
<a name="l830"><span class="linenum"> 830</span></a>  }
<a name="l831"><span class="linenum"> 831</span></a>  
<a name="l832"><span class="linenum"> 832</span></a>  <span class="comment">/**</span>
<a name="l833"><span class="linenum"> 833</span></a>  <span class="comment"> * Return a list of page types</span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment"> * @param string $pagetype current page type</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment"> * @param stdClass $parentcontext Block's parent context</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment"> * @param stdClass $currentcontext Current context of block</span>
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment"> */</span>
<a name="l838"><span class="linenum"> 838</span></a>  function <a class="function" onClick="logFunction('survey_page_type_list')" href="../../_functions/survey_page_type_list.html" onMouseOver="funcPopup(event,'survey_page_type_list')">survey_page_type_list</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../../_variables/parentcontext.html">$parentcontext</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../../_variables/currentcontext.html">$currentcontext</a>) {
<a name="l839"><span class="linenum"> 839</span></a>      <a class="var it9844" onMouseOver="hilite(9844)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a> = array('mod-survey-*'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-survey-x', 'survey'));
<a name="l840"><span class="linenum"> 840</span></a>      return <a class="var it9844" onMouseOver="hilite(9844)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a>;
<a name="l841"><span class="linenum"> 841</span></a>  }
<a name="l842"><span class="linenum"> 842</span></a>  
<a name="l843"><span class="linenum"> 843</span></a>  <span class="comment">/**</span>
<a name="l844"><span class="linenum"> 844</span></a>  <span class="comment"> * Mark the activity completed (if required) and trigger the course_module_viewed event.</span>
<a name="l845"><span class="linenum"> 845</span></a>  <span class="comment"> *</span>
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment"> * @param  stdClass $survey     survey object</span>
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment"> * @param  stdClass $course     course object</span>
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment"> * @param  stdClass $cm         course module object</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment"> * @param  stdClass $context    context object</span>
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment"> * @param  string $viewed       which page viewed</span>
<a name="l851"><span class="linenum"> 851</span></a>  <span class="comment"> * @since Moodle 3.0</span>
<a name="l852"><span class="linenum"> 852</span></a>  <span class="comment"> */</span>
<a name="l853"><span class="linenum"> 853</span></a>  function <a class="function" onClick="logFunction('survey_view')" href="../../_functions/survey_view.html" onMouseOver="funcPopup(event,'survey_view')">survey_view</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it8651" onMouseOver="hilite(8651)" onMouseOut="lolite()" onClick="logVariable('viewed')" href="../../_variables/viewed.html">$viewed</a>) {
<a name="l854"><span class="linenum"> 854</span></a>  
<a name="l855"><span class="linenum"> 855</span></a>  <span class="comment">    // Trigger course_module_viewed event.</span>
<a name="l856"><span class="linenum"> 856</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(
<a name="l857"><span class="linenum"> 857</span></a>          'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l858"><span class="linenum"> 858</span></a>          'objectid' =&gt; <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l859"><span class="linenum"> 859</span></a>          'courseid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l860"><span class="linenum"> 860</span></a>          'other' =&gt; array('viewed' =&gt; <a class="var it8651" onMouseOver="hilite(8651)" onMouseOut="lolite()" onClick="logVariable('viewed')" href="../../_variables/viewed.html">$viewed</a>)
<a name="l861"><span class="linenum"> 861</span></a>      );
<a name="l862"><span class="linenum"> 862</span></a>  
<a name="l863"><span class="linenum"> 863</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_survey\event\<a class="class" onClick="logClass('course_module_viewed')" href="../../_classes/course_module_viewed.html" onMouseOver="classPopup(event,'course_module_viewed')">course_module_viewed</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l864"><span class="linenum"> 864</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('course_modules', <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l865"><span class="linenum"> 865</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('course', <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l866"><span class="linenum"> 866</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('survey', <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>);
<a name="l867"><span class="linenum"> 867</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l868"><span class="linenum"> 868</span></a>  
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment">    // Completion.</span>
<a name="l870"><span class="linenum"> 870</span></a>      <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l871"><span class="linenum"> 871</span></a>      <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('set_module_viewed')" href="../../_functions/set_module_viewed.html" onMouseOver="funcPopup(event,'set_module_viewed')">set_module_viewed</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l872"><span class="linenum"> 872</span></a>  }
<a name="l873"><span class="linenum"> 873</span></a>  
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment">/**</span>
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment"> * Helper function for ordering a set of questions by the given ids.</span>
<a name="l876"><span class="linenum"> 876</span></a>  <span class="comment"> *</span>
<a name="l877"><span class="linenum"> 877</span></a>  <span class="comment"> * @param  array $questions     array of questions objects</span>
<a name="l878"><span class="linenum"> 878</span></a>  <span class="comment"> * @param  array $questionorder array of questions ids indicating the correct order</span>
<a name="l879"><span class="linenum"> 879</span></a>  <span class="comment"> * @return array                list of questions ordered</span>
<a name="l880"><span class="linenum"> 880</span></a>  <span class="comment"> * @since Moodle 3.0</span>
<a name="l881"><span class="linenum"> 881</span></a>  <span class="comment"> */</span>
<a name="l882"><span class="linenum"> 882</span></a>  function <a class="function" onClick="logFunction('survey_order_questions')" href="../../_functions/survey_order_questions.html" onMouseOver="funcPopup(event,'survey_order_questions')">survey_order_questions</a>(<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a>, <a class="var it19220" onMouseOver="hilite(19220)" onMouseOut="lolite()" onClick="logVariable('questionorder')" href="../../_variables/questionorder.html">$questionorder</a>) {
<a name="l883"><span class="linenum"> 883</span></a>  
<a name="l884"><span class="linenum"> 884</span></a>      <a class="var it37567" onMouseOver="hilite(37567)" onMouseOut="lolite()" onClick="logVariable('finalquestions')" href="../../_variables/finalquestions.html">$finalquestions</a> = array();
<a name="l885"><span class="linenum"> 885</span></a>      foreach (<a class="var it19220" onMouseOver="hilite(19220)" onMouseOut="lolite()" onClick="logVariable('questionorder')" href="../../_variables/questionorder.html">$questionorder</a> as <a class="var it3832" onMouseOver="hilite(3832)" onMouseOut="lolite()" onClick="logVariable('qid')" href="../../_variables/qid.html">$qid</a>) {
<a name="l886"><span class="linenum"> 886</span></a>          <a class="var it37567" onMouseOver="hilite(37567)" onMouseOut="lolite()" onClick="logVariable('finalquestions')" href="../../_variables/finalquestions.html">$finalquestions</a>[] = <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a>[<a class="var it3832" onMouseOver="hilite(3832)" onMouseOut="lolite()" onClick="logVariable('qid')" href="../../_variables/qid.html">$qid</a>];
<a name="l887"><span class="linenum"> 887</span></a>      }
<a name="l888"><span class="linenum"> 888</span></a>      return <a class="var it37567" onMouseOver="hilite(37567)" onMouseOut="lolite()" onClick="logVariable('finalquestions')" href="../../_variables/finalquestions.html">$finalquestions</a>;
<a name="l889"><span class="linenum"> 889</span></a>  }
<a name="l890"><span class="linenum"> 890</span></a>  
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment">/**</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment"> * Translate the question texts and options.</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment"> *</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment"> * @param  stdClass $question question object</span>
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment"> * @return stdClass question object with all the text fields translated</span>
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment"> * @since Moodle 3.0</span>
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment"> */</span>
<a name="l898"><span class="linenum"> 898</span></a>  function <a class="function" onClick="logFunction('survey_translate_question')" href="../../_functions/survey_translate_question.html" onMouseOver="funcPopup(event,'survey_translate_question')">survey_translate_question</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>) {
<a name="l899"><span class="linenum"> 899</span></a>  
<a name="l900"><span class="linenum"> 900</span></a>      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('text')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/text.html">text</a>) {
<a name="l901"><span class="linenum"> 901</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('text')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/text.html">text</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('text')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/text.html">text</a>, &quot;survey&quot;);
<a name="l902"><span class="linenum"> 902</span></a>      }
<a name="l903"><span class="linenum"> 903</span></a>  
<a name="l904"><span class="linenum"> 904</span></a>      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('shorttext')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/shorttext.html">shorttext</a>) {
<a name="l905"><span class="linenum"> 905</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('shorttext')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/shorttext.html">shorttext</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('shorttext')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/shorttext.html">shorttext</a>, &quot;survey&quot;);
<a name="l906"><span class="linenum"> 906</span></a>      }
<a name="l907"><span class="linenum"> 907</span></a>  
<a name="l908"><span class="linenum"> 908</span></a>      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('intro')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a>) {
<a name="l909"><span class="linenum"> 909</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('intro')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('intro')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a>, &quot;survey&quot;);
<a name="l910"><span class="linenum"> 910</span></a>      }
<a name="l911"><span class="linenum"> 911</span></a>  
<a name="l912"><span class="linenum"> 912</span></a>      if (<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('options')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/options.html">options</a>) {
<a name="l913"><span class="linenum"> 913</span></a>          <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('options')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/options.html">options</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('options')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/options.html">options</a>, &quot;survey&quot;);
<a name="l914"><span class="linenum"> 914</span></a>      }
<a name="l915"><span class="linenum"> 915</span></a>      return <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>;
<a name="l916"><span class="linenum"> 916</span></a>  }
<a name="l917"><span class="linenum"> 917</span></a>  
<a name="l918"><span class="linenum"> 918</span></a>  <span class="comment">/**</span>
<a name="l919"><span class="linenum"> 919</span></a>  <span class="comment"> * Returns the questions for a survey (ordered).</span>
<a name="l920"><span class="linenum"> 920</span></a>  <span class="comment"> *</span>
<a name="l921"><span class="linenum"> 921</span></a>  <span class="comment"> * @param  stdClass $survey survey object</span>
<a name="l922"><span class="linenum"> 922</span></a>  <span class="comment"> * @return array list of questions ordered</span>
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment"> * @since Moodle 3.0</span>
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment"> * @throws  moodle_exception</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment"> */</span>
<a name="l926"><span class="linenum"> 926</span></a>  function <a class="function" onClick="logFunction('survey_get_questions')" href="../../_functions/survey_get_questions.html" onMouseOver="funcPopup(event,'survey_get_questions')">survey_get_questions</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>) {
<a name="l927"><span class="linenum"> 927</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l928"><span class="linenum"> 928</span></a>  
<a name="l929"><span class="linenum"> 929</span></a>      <a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../../_variables/questionids.html">$questionids</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('questions')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/questions.html">questions</a>);
<a name="l930"><span class="linenum"> 930</span></a>      if (! <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_list')" href="../../_functions/get_records_list.html" onMouseOver="funcPopup(event,'get_records_list')">get_records_list</a>(&quot;survey_questions&quot;, &quot;id&quot;, <a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../../_variables/questionids.html">$questionids</a>)) {
<a name="l931"><span class="linenum"> 931</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('cannotfindquestion', 'survey');
<a name="l932"><span class="linenum"> 932</span></a>      }
<a name="l933"><span class="linenum"> 933</span></a>  
<a name="l934"><span class="linenum"> 934</span></a>      return <a class="function" onClick="logFunction('survey_order_questions')" href="../../_functions/survey_order_questions.html" onMouseOver="funcPopup(event,'survey_order_questions')">survey_order_questions</a>(<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a>, <a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../../_variables/questionids.html">$questionids</a>);
<a name="l935"><span class="linenum"> 935</span></a>  }
<a name="l936"><span class="linenum"> 936</span></a>  
<a name="l937"><span class="linenum"> 937</span></a>  <span class="comment">/**</span>
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment"> * Returns subquestions for a given question (ordered).</span>
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment"> *</span>
<a name="l940"><span class="linenum"> 940</span></a>  <span class="comment"> * @param  stdClass $question questin object</span>
<a name="l941"><span class="linenum"> 941</span></a>  <span class="comment"> * @return array list of subquestions ordered</span>
<a name="l942"><span class="linenum"> 942</span></a>  <span class="comment"> * @since Moodle 3.0</span>
<a name="l943"><span class="linenum"> 943</span></a>  <span class="comment"> */</span>
<a name="l944"><span class="linenum"> 944</span></a>  function <a class="function" onClick="logFunction('survey_get_subquestions')" href="../../_functions/survey_get_subquestions.html" onMouseOver="funcPopup(event,'survey_get_subquestions')">survey_get_subquestions</a>(<a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>) {
<a name="l945"><span class="linenum"> 945</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l946"><span class="linenum"> 946</span></a>  
<a name="l947"><span class="linenum"> 947</span></a>      <a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../../_variables/questionids.html">$questionids</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it259" onMouseOver="hilite(259)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('multi')" class="var it43018" onMouseOver="hilite(43018)" onMouseOut="lolite()" href="../../_variables/multi.html">multi</a>);
<a name="l948"><span class="linenum"> 948</span></a>      <a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_list')" href="../../_functions/get_records_list.html" onMouseOver="funcPopup(event,'get_records_list')">get_records_list</a>(&quot;survey_questions&quot;, &quot;id&quot;, <a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../../_variables/questionids.html">$questionids</a>);
<a name="l949"><span class="linenum"> 949</span></a>  
<a name="l950"><span class="linenum"> 950</span></a>      return <a class="function" onClick="logFunction('survey_order_questions')" href="../../_functions/survey_order_questions.html" onMouseOver="funcPopup(event,'survey_order_questions')">survey_order_questions</a>(<a class="var it256" onMouseOver="hilite(256)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../../_variables/questions.html">$questions</a>, <a class="var it5865" onMouseOver="hilite(5865)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../../_variables/questionids.html">$questionids</a>);
<a name="l951"><span class="linenum"> 951</span></a>  }
<a name="l952"><span class="linenum"> 952</span></a>  
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment">/**</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment"> * Save the answer for the given survey</span>
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment"> *</span>
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment"> * @param  stdClass $survey   a survey object</span>
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment"> * @param  array $answersrawdata the answers to be saved</span>
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment"> * @param  stdClass $course   a course object (required for trigger the submitted event)</span>
<a name="l959"><span class="linenum"> 959</span></a>  <span class="comment"> * @param  stdClass $context  a context object (required for trigger the submitted event)</span>
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment"> * @since Moodle 3.0</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment"> */</span>
<a name="l962"><span class="linenum"> 962</span></a>  function <a class="function" onClick="logFunction('survey_save_answers')" href="../../_functions/survey_save_answers.html" onMouseOver="funcPopup(event,'survey_save_answers')">survey_save_answers</a>(<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>, <a class="var it37568" onMouseOver="hilite(37568)" onMouseOut="lolite()" onClick="logVariable('answersrawdata')" href="../../_variables/answersrawdata.html">$answersrawdata</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l963"><span class="linenum"> 963</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l964"><span class="linenum"> 964</span></a>  
<a name="l965"><span class="linenum"> 965</span></a>      <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> = array();
<a name="l966"><span class="linenum"> 966</span></a>  
<a name="l967"><span class="linenum"> 967</span></a>  <span class="comment">    // Sort through the data and arrange it.</span>
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment">    // This is necessary because some of the questions may have two answers, eg Question 1 -&gt; 1 and P1.</span>
<a name="l969"><span class="linenum"> 969</span></a>      foreach (<a class="var it37568" onMouseOver="hilite(37568)" onMouseOut="lolite()" onClick="logVariable('answersrawdata')" href="../../_variables/answersrawdata.html">$answersrawdata</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>) {
<a name="l970"><span class="linenum"> 970</span></a>          if (<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> != &quot;userid&quot; &amp;&amp; <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> != &quot;id&quot;) {
<a name="l971"><span class="linenum"> 971</span></a>              if (<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, 0, 1) == &quot;q&quot;) {
<a name="l972"><span class="linenum"> 972</span></a>                  <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, 1), <a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>);   <span class="comment">// Keep everything but the 'q', number or P number.</span>
<a name="l973"><span class="linenum"> 973</span></a>              }
<a name="l974"><span class="linenum"> 974</span></a>              if (<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, 0, 1) == &quot;P&quot;) {
<a name="l975"><span class="linenum"> 975</span></a>                  <a class="var it37569" onMouseOver="hilite(37569)" onMouseOut="lolite()" onClick="logVariable('realkey')" href="../../_variables/realkey.html">$realkey</a> = (int) <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, 1);
<a name="l976"><span class="linenum"> 976</span></a>                  <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>[<a class="var it37569" onMouseOver="hilite(37569)" onMouseOut="lolite()" onClick="logVariable('realkey')" href="../../_variables/realkey.html">$realkey</a>][1] = <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>;
<a name="l977"><span class="linenum"> 977</span></a>              } else {
<a name="l978"><span class="linenum"> 978</span></a>                  <a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>][0] = <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>;
<a name="l979"><span class="linenum"> 979</span></a>              }
<a name="l980"><span class="linenum"> 980</span></a>          }
<a name="l981"><span class="linenum"> 981</span></a>      }
<a name="l982"><span class="linenum"> 982</span></a>  
<a name="l983"><span class="linenum"> 983</span></a>  <span class="comment">    // Now store the data.</span>
<a name="l984"><span class="linenum"> 984</span></a>      <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l985"><span class="linenum"> 985</span></a>      <a class="var it37570" onMouseOver="hilite(37570)" onMouseOut="lolite()" onClick="logVariable('answerstoinsert')" href="../../_variables/answerstoinsert.html">$answerstoinsert</a> = array();
<a name="l986"><span class="linenum"> 986</span></a>      foreach (<a class="var it454" onMouseOver="hilite(454)" onMouseOut="lolite()" onClick="logVariable('answers')" href="../../_variables/answers.html">$answers</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>) {
<a name="l987"><span class="linenum"> 987</span></a>          if (<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> != 'sesskey') {
<a name="l988"><span class="linenum"> 988</span></a>              <a class="var it21831" onMouseOver="hilite(21831)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a> = new stdClass();
<a name="l989"><span class="linenum"> 989</span></a>              <a class="var it21831" onMouseOver="hilite(21831)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('time')" class="var it45347" onMouseOver="hilite(45347)" onMouseOut="lolite()" href="../../_variables/time.html">time</a> = <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a>;
<a name="l990"><span class="linenum"> 990</span></a>              <a class="var it21831" onMouseOver="hilite(21831)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('userid')" class="var it45347" onMouseOver="hilite(45347)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l991"><span class="linenum"> 991</span></a>              <a class="var it21831" onMouseOver="hilite(21831)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('survey')" class="var it45347" onMouseOver="hilite(45347)" onMouseOut="lolite()" href="../../_variables/survey.html">survey</a> = <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l992"><span class="linenum"> 992</span></a>              <a class="var it21831" onMouseOver="hilite(21831)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('question')" class="var it45347" onMouseOver="hilite(45347)" onMouseOut="lolite()" href="../../_variables/question.html">question</a> = <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>;
<a name="l993"><span class="linenum"> 993</span></a>              if (!empty(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>[0])) {
<a name="l994"><span class="linenum"> 994</span></a>                  <a class="var it21831" onMouseOver="hilite(21831)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('answer1')" class="var it45347" onMouseOver="hilite(45347)" onMouseOut="lolite()" href="../../_variables/answer1.html">answer1</a> = <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>[0];
<a name="l995"><span class="linenum"> 995</span></a>              } else {
<a name="l996"><span class="linenum"> 996</span></a>                  <a class="var it21831" onMouseOver="hilite(21831)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('answer1')" class="var it45347" onMouseOver="hilite(45347)" onMouseOut="lolite()" href="../../_variables/answer1.html">answer1</a> = &quot;&quot;;
<a name="l997"><span class="linenum"> 997</span></a>              }
<a name="l998"><span class="linenum"> 998</span></a>              if (!empty(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>[1])) {
<a name="l999"><span class="linenum"> 999</span></a>                  <a class="var it21831" onMouseOver="hilite(21831)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('answer2')" class="var it45347" onMouseOver="hilite(45347)" onMouseOut="lolite()" href="../../_variables/answer2.html">answer2</a> = <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>[1];
<a name="l1000"><span class="linenum">1000</span></a>              } else {
<a name="l1001"><span class="linenum">1001</span></a>                  <a class="var it21831" onMouseOver="hilite(21831)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('answer2')" class="var it45347" onMouseOver="hilite(45347)" onMouseOut="lolite()" href="../../_variables/answer2.html">answer2</a> = &quot;&quot;;
<a name="l1002"><span class="linenum">1002</span></a>              }
<a name="l1003"><span class="linenum">1003</span></a>  
<a name="l1004"><span class="linenum">1004</span></a>              <a class="var it37570" onMouseOver="hilite(37570)" onMouseOut="lolite()" onClick="logVariable('answerstoinsert')" href="../../_variables/answerstoinsert.html">$answerstoinsert</a>[] = <a class="var it21831" onMouseOver="hilite(21831)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>;
<a name="l1005"><span class="linenum">1005</span></a>          }
<a name="l1006"><span class="linenum">1006</span></a>      }
<a name="l1007"><span class="linenum">1007</span></a>  
<a name="l1008"><span class="linenum">1008</span></a>      if (!empty(<a class="var it37570" onMouseOver="hilite(37570)" onMouseOut="lolite()" onClick="logVariable('answerstoinsert')" href="../../_variables/answerstoinsert.html">$answerstoinsert</a>)) {
<a name="l1009"><span class="linenum">1009</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_records')" href="../../_functions/insert_records.html" onMouseOver="funcPopup(event,'insert_records')">insert_records</a>(&quot;survey_answers&quot;, <a class="var it37570" onMouseOver="hilite(37570)" onMouseOut="lolite()" onClick="logVariable('answerstoinsert')" href="../../_variables/answerstoinsert.html">$answerstoinsert</a>);
<a name="l1010"><span class="linenum">1010</span></a>      }
<a name="l1011"><span class="linenum">1011</span></a>  
<a name="l1012"><span class="linenum">1012</span></a>  <span class="comment">    // Update completion state.</span>
<a name="l1013"><span class="linenum">1013</span></a>      <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('survey', <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1014"><span class="linenum">1014</span></a>      <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l1015"><span class="linenum">1015</span></a>      if (<a class="function" onClick="logFunction('isloggedin')" href="../../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() &amp;&amp; !<a class="function" onClick="logFunction('isguestuser')" href="../../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>() &amp;&amp; <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) &amp;&amp; <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('completionsubmit')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/completionsubmit.html">completionsubmit</a>) {
<a name="l1016"><span class="linenum">1016</span></a>          <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('update_state')" href="../../_functions/update_state.html" onMouseOver="funcPopup(event,'update_state')">update_state</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="constant" onClick="logConstant('COMPLETION_COMPLETE')" href="../../_constants/COMPLETION_COMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_COMPLETE')">COMPLETION_COMPLETE</a>);
<a name="l1017"><span class="linenum">1017</span></a>      }
<a name="l1018"><span class="linenum">1018</span></a>  
<a name="l1019"><span class="linenum">1019</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(
<a name="l1020"><span class="linenum">1020</span></a>          'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l1021"><span class="linenum">1021</span></a>          'courseid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1022"><span class="linenum">1022</span></a>          'other' =&gt; array('surveyid' =&gt; <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)
<a name="l1023"><span class="linenum">1023</span></a>      );
<a name="l1024"><span class="linenum">1024</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_survey\event\<a class="class" onClick="logClass('response_submitted')" href="../../_classes/response_submitted.html" onMouseOver="classPopup(event,'response_submitted')">response_submitted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1025"><span class="linenum">1025</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1026"><span class="linenum">1026</span></a>  }
<a name="l1027"><span class="linenum">1027</span></a>  
<a name="l1028"><span class="linenum">1028</span></a>  <span class="comment">/**</span>
<a name="l1029"><span class="linenum">1029</span></a>  <span class="comment"> * Obtains the automatic completion state for this survey based on the condition</span>
<a name="l1030"><span class="linenum">1030</span></a>  <span class="comment"> * in feedback settings.</span>
<a name="l1031"><span class="linenum">1031</span></a>  <span class="comment"> *</span>
<a name="l1032"><span class="linenum">1032</span></a>  <span class="comment"> * @param object $course Course</span>
<a name="l1033"><span class="linenum">1033</span></a>  <span class="comment"> * @param object $cm Course-module</span>
<a name="l1034"><span class="linenum">1034</span></a>  <span class="comment"> * @param int $userid User ID</span>
<a name="l1035"><span class="linenum">1035</span></a>  <span class="comment"> * @param bool $type Type of comparison (or/and; can be used as return value if no conditions)</span>
<a name="l1036"><span class="linenum">1036</span></a>  <span class="comment"> * @return bool True if completed, false if not, $type if conditions not set.</span>
<a name="l1037"><span class="linenum">1037</span></a>  <span class="comment"> */</span>
<a name="l1038"><span class="linenum">1038</span></a>  function <a class="function" onClick="logFunction('survey_get_completion_state')" href="../../_functions/survey_get_completion_state.html" onMouseOver="funcPopup(event,'survey_get_completion_state')">survey_get_completion_state</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l1039"><span class="linenum">1039</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1040"><span class="linenum">1040</span></a>  
<a name="l1041"><span class="linenum">1041</span></a>  <span class="comment">    // Get survey details.</span>
<a name="l1042"><span class="linenum">1042</span></a>      <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('survey', array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1043"><span class="linenum">1043</span></a>  
<a name="l1044"><span class="linenum">1044</span></a>  <span class="comment">    // If completion option is enabled, evaluate it and return true/false.</span>
<a name="l1045"><span class="linenum">1045</span></a>      if (<a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('completionsubmit')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/completionsubmit.html">completionsubmit</a>) {
<a name="l1046"><span class="linenum">1046</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 'survey' =&gt; <a class="var it12" onMouseOver="hilite(12)" onMouseOut="lolite()" onClick="logVariable('survey')" href="../../_variables/survey.html">$survey</a>-&gt;<a onClick="logVariable('id')" class="var it44673" onMouseOver="hilite(44673)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1047"><span class="linenum">1047</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('survey_answers', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1048"><span class="linenum">1048</span></a>      } else {
<a name="l1049"><span class="linenum">1049</span></a>  <span class="comment">        // Completion option is not enabled so just return $type.</span>
<a name="l1050"><span class="linenum">1050</span></a>          return <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>;
<a name="l1051"><span class="linenum">1051</span></a>      }
<a name="l1052"><span class="linenum">1052</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_accesshide': ['get_accesshide', 'Return a HTML element with the class "accesshide", for accessibility. ', [['lib','weblib.php',2251]], 18],
'survey_add_instance': ['survey_add_instance', 'Given an object containing all the necessary data, (defined by the form in mod_form.php) this function will create a new instance and return the id number of the new instance. ', [['mod/survey','lib.php',60]], 0],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'survey_update_instance': ['survey_update_instance', 'Given an object containing all the necessary data, (defined by the form in mod_form.php) this function will update an existing instance with new data. ', [['mod/survey','lib.php',85]], 0],
'survey_get_user_answer': ['survey_get_user_answer', '', [['mod/survey','lib.php',383]], 3],
'survey_get_questions': ['survey_get_questions', 'Returns the questions for a survey (ordered). ', [['mod/survey','lib.php',918]], 6],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',1977]], 289],
'is_enabled': ['is_enabled', 'Tools cannot be disabled. ', [['lib/classes/plugininfo','tool.php',39],['admin/tool/recyclebin/classes','category_bin.php',54],['admin/tool/log/classes/plugininfo','logstore.php',35],['admin/tool/recyclebin/classes','course_bin.php',54],['mod/assign/feedback/offline','locallib.php',380],['admin/tool/recyclebin/classes','base_bin.php',38],['lib','adminlib.php',1955],['search/classes','base.php',190],['lib','medialib.php',318],['lib','medialib.php',635],['lib','medialib.php',1268],['admin/tool/health','index.php',393],['lib/classes/plugininfo','mnetservice.php',33],['lib/classes/message/inbound','manager.php',37],['mod/assignment/classes/plugininfo','assignment.php',32],['competency/classes','api.php',49],['mod/assign','assignmentplugin.php',223],['lib/classes/plugininfo','orphaned.php',37],['search/tests/fixtures','mock_search_area.php',38],['tag/classes','area.php',106],['lib/classes/plugininfo','base.php',383],['mod/assign/feedback/editpdf','locallib.php',340],['tag/classes','tag.php',1269],['mod/assign/submission/comments','locallib.php',172],['lib','completionlib.php',269]], 276],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'isguestuser': ['isguestuser', 'Determines if a user is logged in as real guest user with username \'guest\'. ', [['lib','accesslib.php',1923]], 260],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'print_recent_activity_note': ['print_recent_activity_note', 'Display a recent activity note ', [['lib','weblib.php',2431]], 5],
'survey_page_type_list': ['survey_page_type_list', 'Return a list of page types ', [['mod/survey','lib.php',832]], 0],
'survey_order_questions': ['survey_order_questions', 'Helper function for ordering a set of questions by the given ids. ', [['mod/survey','lib.php',874]], 3],
'survey_delete_instance': ['survey_delete_instance', 'Given an ID of an instance of this module, this function will permanently delete the instance and any data that depends on it. ', [['mod/survey','lib.php',108]], 0],
'survey_print_graph': ['survey_print_graph', '', [['mod/survey','lib.php',672]], 8],
'survey_get_subquestions': ['survey_get_subquestions', 'Returns subquestions for a given question (ordered). ', [['mod/survey','lib.php',937]], 6],
'table': ['table', 'Log a table in the firebug console ', [['lib/minify/lib','FirePHP.php',454],['lib/adodb','adodb-perf.inc.php',234],['lib','outputcomponents.php',1497]], 257],
'survey_shorten_name': ['survey_shorten_name', '', [['mod/survey','lib.php',480]], 0],
'execute': ['execute', 'Run langpack update ', [['admin/tool/langimport/classes/task','update_langpacks_task.php',44],['backup/converter/imscc1','lib.php',84],['lib/classes/task','blog_cron_task.php',40],['mod/workshop/allocation/scheduled','lib.php',128],['lib/classes/task','send_new_user_passwords_task.php',40],['admin/tool/log/store/standard/classes/task','cleanup_task.php',40],['lib/dml','pdo_moodle_database.php',227],['lib/classes/task','tag_cron_task.php',42],['enrol/imsenterprise/classes/task','cron_task.php',43],['lib/classes/task','completion_daily_task.php',42],['lib/google/src/Google/Http','Batch.php',61],['lib/dml','oci_native_moodle_database.php',1048],['lib/classes/task','context_cleanup_task.php',41],['backup/util/plan','backup_structure_step.class.php',50],['backup/util/ui','restore_ui.class.php',206],['webservice','lib.php',1319],['lib/classes/task','stats_cron_task.php',40],['lib/htmlpurifier/HTMLPurifier/Strategy','ValidateAttributes.php',16],['lib/htmlpurifier/HTMLPurifier/Strategy','RemoveForeignElements.php',20],['lib/classes/task','legacy_plugin_cron_task.php',42],['backup/moodle2','restore_activity_task.class.php',189],['lib/classes/task','portfolio_cron_task.php',40],['lib/google/src/Google/Http','REST.php',27],['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',66],['backup/converter/imscc11','backuplib.php',42],['lib/classes/task','question_cron_task.php',40],['lib/classes/task','cache_cron_task.php',40],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',40],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',62],['admin/tool/messageinbound/classes/task','cleanup_task.php',47],['lib/adodb/drivers','adodb-pdo.inc.php',559],['lib/editor/atto/classes/task','autosave_cleanup_task.php',42],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',43],['lib/classes/task','completion_regular_task.php',42],['lib/adodb/drivers','adodb-oci8po.inc.php',54],['lib/classes/task','events_cron_task.php',40],['mod/workshop/allocation/random','lib.php',83],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',47],['auth/cas/classes/task','sync_task.php',43],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',43],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',62],['backup/util/helper','restore_decode_processor.class.php',73],['lib/behat','behat_base.php',840],['enrol/flatfile/classes/task','flatfile_sync_task.php',46],['lib/classes/task','registration_cron_task.php',40],['backup/moodle2','backup_section_task.class.php',97],['lib/classes/task','check_for_updates_task.php',40],['backup/util/plan/tests/fixtures','plan_fixtures.php',48],['backup/util/plan/tests/fixtures','plan_fixtures.php',56],['mod/forum/classes/task','cron_task.php',39],['lib/classes/task','send_failed_login_notifications_task.php',43],['enrol/lti/classes/task','sync_grades.php',45],['lib/dml','pgsql_native_moodle_database.php',665],['lib/htmlpurifier/HTMLPurifier/Strategy','Composite.php',21],['lib/classes/update','validator.php',117],['lib/google/src/Google','Client.php',574],['lib/dml','mssql_native_moodle_database.php',711],['mod/lti/service/profile/classes/local/resource','profile.php',76],['backup/util/plan','backup_plan.class.php',112],['lib/dml','mysqli_native_moodle_database.php',963],['backup/util/ui','backup_ui.class.php',122],['admin/tool/monitor/classes/task','clean_events.php',41],['backup/converter/moodle1','backuplib.php',10],['backup/converter/imscc11','lib.php',85],['lib/classes/task','grade_cron_task.php',40],['lib/classes/task','file_temp_cleanup_task.php',40],['backup/moodle2','restore_section_task.class.php',87],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',63],['filter/tex','latex.php',70],['lib/adodb','adodb.inc.php',1088],['lib/classes/task','plagiarism_cron_task.php',40],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',62],['backup/converter/moodle1','lib.php',142],['backup/util/plan','restore_structure_step.class.php',62],['lib/classes/task','search_index_task.php',44],['enrol/lti/classes/task','sync_members.php',55],['lib/classes/task','session_cleanup_task.php',40],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',61],['lib/classes/task','backup_cleanup_task.php',40],['lib/classes/task','delete_unconfirmed_users_task.php',40],['backup/converter/imscc1','backuplib.php',10],['lib/classes/task','badges_cron_task.php',40],['admin/tool/uploadcourse/classes','processor.php',174],['lib/classes/task','calendar_cron_task.php',40],['backup/util/plan','base_plan.class.php',158],['auth/ldap/classes/task','sync_task.php',43],['lib/adodb/drivers','adodb-oci8.inc.php',920],['backup/util/plan','restore_plan.class.php',159],['lib/tests/fixtures','task_fixtures.php',30],['lib/tests/fixtures','task_fixtures.php',39],['lib/tests/fixtures','task_fixtures.php',48],['lib/tests/fixtures','task_fixtures.php',57],['lib/dml','sqlsrv_native_moodle_database.php',795],['lib/classes/task','create_contexts_task.php',40],['lib/classes/task','file_trash_cleanup_task.php',40],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',46],['lib/classes/task','complete_plans_task.php',52],['lib/classes/task','messaging_cleanup_task.php',40],['backup/util/plan','backup_execution_step.class.php',25],['lib/classes/task','cache_cleanup_task.php',40],['backup/moodle2','backup_activity_task.class.php',211],['filter/tex','texdebug.php',287],['lib/classes/task','password_reset_cleanup_task.php',40],['lib/classes/task','search_optimize_task.php',47],['mod/assign','adminlib.php',342],['lib/classes/task','delete_incomplete_users_task.php',40],['lib/classes/task','automated_backup_task.php',40],['admin/tool/messageinbound/classes/task','pickup_task.php',47],['backup/util/plan','restore_execution_step.class.php',25],['lib/classes/task','sync_plans_from_template_cohorts_task.php',50],['admin/tool/monitor/classes','notification_task.php',39],['lib/dml/tests','dml_test.php',5543],['lib/htmlpurifier/HTMLPurifier/Strategy','FixNesting.php',41],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',60],['admin/tool/monitor/classes/task','check_subscriptions.php',60],['backup/util/interfaces','executable.class.php',32],['backup/util/plan','base_task.class.php',162]], 1058],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as an moodle_recordset.  $sql must be a complete SQL query. Since this method is a little less readable, use of it should be restricted to code where it\'s possible there might be large datasets being returned.  For known small datasets use get_records_sql - it leads to simpler code. ', [['lib/dml','pdo_moodle_database.php',252],['lib/dml','oci_native_moodle_database.php',1106],['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','mssql_native_moodle_database.php',736],['lib/dml','mysqli_native_moodle_database.php',993],['lib/dml','sqlsrv_native_moodle_database.php',811],['lib/dml/tests','dml_test.php',5544]], 283],
'update_state': ['update_state', 'Updates (if necessary) the completion state of activity $cm for the given user. ', [['lib','completionlib.php',507]], 40],
'survey_print_recent_activity': ['survey_print_recent_activity', '', [['mod/survey','lib.php',214]], 0],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'survey_view': ['survey_view', 'Mark the activity completed (if required) and trigger the course_module_viewed event. ', [['mod/survey','lib.php',843]], 4],
'survey_supports': ['survey_supports', '', [['mod/survey','lib.php',782]], 0],
'disabledif': ['disabledif', 'Adds a dependency for $elementName which will be disabled if $condition is met. If $condition = \'notchecked\' (default) then the condition is that the $dependentOn element is not checked. If $condition = \'checked\' then the condition is that the $dependentOn element is checked. If $condition is something else (like "eq" for equals) then it is checked to see if the value of the $dependentOn element is $condition (such as equal) to $value. ', [['lib','formslib.php',2429]], 343],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'survey_add_analysis': ['survey_add_analysis', '', [['mod/survey','lib.php',401]], 1],
'survey_get_post_actions': ['survey_get_post_actions', 'List the actions that correspond to a post of this module. This is used by the participation report. ', [['mod/survey','lib.php',693]], 0],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3249],['mod/assign','locallib.php',3915]], 546],
'survey_print_multi': ['survey_print_multi', '', [['mod/survey','lib.php',499]], 1],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'isloggedin': ['isloggedin', 'Determines if a user is currently logged in ', [['lib','accesslib.php',1910]], 184],
'survey_count_responses': ['survey_count_responses', '', [['mod/survey','lib.php',428]], 4],
'survey_get_analysis': ['survey_get_analysis', '', [['mod/survey','lib.php',323]], 2],
'survey_log_info': ['survey_log_info', '', [['mod/survey','lib.php',278]], 0],
'survey_get_user_answers': ['survey_get_user_answers', '', [['mod/survey','lib.php',353]], 2],
'survey_get_extra_capabilities': ['survey_get_extra_capabilities', 'Returns all other caps used in module ', [['mod/survey','lib.php',763]], 0],
'survey_save_answers': ['survey_save_answers', 'Save the answer for the given survey ', [['mod/survey','lib.php',953]], 3],
'survey_question_rowclass': ['survey_question_rowclass', '', [['mod/survey','lib.php',657]], 3],
'set_module_viewed': ['set_module_viewed', 'Update the module completion status (set it viewed). ', [['mod/assign','locallib.php',8075],['lib','completionlib.php',657]], 29],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'heading': ['heading', 'Outputs a heading ', [['lib','outputrenderers.php',3072],['lib','outputrenderers.php',4364],['lib','outputrenderers.php',4552],['grade/report/singleview/classes/local/screen','screen.php',197],['grade/report/singleview/classes/local/screen','user.php',264],['grade/report/singleview/classes/local/screen','grade.php',283]], 796],
'survey_get_responses': ['survey_get_responses', '', [['mod/survey','lib.php',292]], 4],
'delete_records_select': ['delete_records_select', '', [['lib/dml','pdo_moodle_database.php',208],['lib/dml','oci_native_moodle_database.php',1495],['lib/dml','pgsql_native_moodle_database.php',1162],['lib/dml','mssql_native_moodle_database.php',1146],['lib/dml','mysqli_native_moodle_database.php',1477],['lib/dml','sqlsrv_native_moodle_database.php',1220],['lib/dml/tests','dml_test.php',5553]], 163],
'fields': ['fields', '', [['lib/adodb/drivers','adodb-odbtp.inc.php',720],['lib/adodb/drivers','adodb-sqlite3.inc.php',403],['mod/quiz/classes','admin_review_setting.php',65],['lib/adodb/drivers','adodb-ibase.inc.php',865],['lib/adodb/drivers','adodb-postgres64.inc.php',968],['lib/adodb/drivers','adodb-odbc.inc.php',644],['lib/adodb/drivers','adodb-sqlite.inc.php',420],['lib/adodb/drivers','adodb-pdo.inc.php',742],['lib','outputcomponents.php',235],['lib/adodb/drivers','adodb-oci8po.inc.php',104],['lib/adodb/drivers','adodb-mssql.inc.php',906],['lib/adodb/drivers','adodb-mysql.inc.php',774],['lib/adodb/drivers','adodb-mssqlnative.inc.php',895],['lib/adodb/drivers','adodb-oracle.inc.php',267],['lib/adodb','adodb.inc.php',3781],['lib/adodb','adodb.inc.php',4459],['lib/adodb/drivers','adodb-ado5.inc.php',412],['lib/adodb/drivers','adodb-db2.inc.php',756],['lib/adodb/drivers','adodb-oci8.inc.php',1701],['lib/adodb/drivers','adodb-mysqli.inc.php',973],['lib/adodb/drivers','adodb-ado.inc.php',375],['lib/adodb/drivers','adodb-ads.inc.php',690]], 156],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'survey_extend_settings_navigation': ['survey_extend_settings_navigation', 'This function extends the settings navigation block for the site. ', [['mod/survey','lib.php',798]], 0],
'get_records_list': ['get_records_list', 'Get a number of records as an array of objects where one field match one list of values. ', [['lib/dml','moodle_database.php',1310]], 34],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
's': ['s', 'Count of attempts selected by $this->whichattempts ', [['mod/quiz/report/statistics/classes','calculated.php',91],['lib','weblib.php',84]], 1072],
'survey_reset_userdata': ['survey_reset_userdata', 'Actual implementation of the reset course functionality, delete all the survey responses for course $data->courseid. ', [['mod/survey','lib.php',729]], 0],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'insert_records': ['insert_records', 'Insert multiple records into database as fast as possible. ', [['lib/dml','pgsql_native_moodle_database.php',926],['lib/dml','mysqli_native_moodle_database.php',1221],['lib/dml','moodle_database.php',1662]], 26],
'survey_update_analysis': ['survey_update_analysis', '', [['mod/survey','lib.php',337]], 1],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2849],['lib','outputrenderers.php',4412],['lib','outputrenderers.php',4496]], 540],
'survey_already_done': ['survey_already_done', '', [['mod/survey','lib.php',417]], 7],
'userdate': ['userdate', 'Returns a formatted string that represents a date in user time. ', [['lib','moodlelib.php',2155],['lib/adodb','adodb.inc.php',2842],['lib/adodb','adodb.inc.php',3569]], 525],
'valid': ['valid', 'Did we reach the end? ', [['lib/filestorage','zip_archive.php',514],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',51],['lib/dml','mssql_native_moodle_recordset.php',83],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',191],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',184],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',329],['lib/dml','mysqli_native_moodle_recordset.php',82],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',175],['lib/horde/framework/Horde/Mail/Rfc822','List.php',439],['lib/dml','pdo_moodle_recordset.php',75],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',104],['lib/phpexcel/PHPExcel','WorksheetIterator.php',99],['backup/util/helper','backup_null_iterator.class.php',49],['lib/horde/framework/Horde','Domhtml.php',331],['lib/dml','sqlsrv_native_moodle_recordset.php',129],['lib/classes/dml','recordset_walk.php',127],['lib/horde/framework/Horde/Imap/Client','Ids.php',419],['backup/util/helper','backup_array_iterator.class.php',59],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',44],['lib/dml','oci_native_moodle_recordset.php',76],['lib/adodb','adodb.inc.php',3041],['lib/adodb','adodb.inc.php',3168],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',182],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',110],['question/engine','questionusage.php',999],['question/engine/tests','helpers.php',1237],['backup/cc/cc_lib','cc_version11.php',47],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',75],['backup/cc/cc_lib','cc_version1.php',47],['backup/cc/cc_lib','cc_asssesment.php',58],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',80],['lib/google/src/Google','Collection.php',45],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',182],['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',378],['question/engine','questionattempt.php',1643],['question/engine','questionattempt.php',1762],['lib/tests','completionlib_test.php',903],['lib/dml','pgsql_native_moodle_recordset.php',103]], 81],
'print_string': ['print_string', 'Prints out a translated string. ', [['lib','moodlelib.php',6877]], 458],
'survey_print_all_responses': ['survey_print_all_responses', '', [['mod/survey','lib.php',441]], 1],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1300]], 441],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',840]], 332],
'get_record_sql': ['get_record_sql', 'Get a single database record as an object using a SQL statement. ', [['lib/dml','oci_native_moodle_database.php',1076],['lib/dml','moodle_database.php',1506]], 157],
'user_picture': ['user_picture', '', [['mod/quiz','attemptlib.php',2467],['lib','outputrenderers.php',2454],['lib','outputrenderers.php',5000]], 138],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'survey_user_complete': ['survey_user_complete', '', [['mod/survey','lib.php',172]], 0],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',592]], 3302],
'survey_print_single': ['survey_print_single', '', [['mod/survey','lib.php',614]], 1],
'survey_get_view_actions': ['survey_get_view_actions', 'List the actions that correspond to a view of this module. This is used by the participation report. ', [['mod/survey','lib.php',679]], 0],
'survey_reset_course_form_defaults': ['survey_reset_course_form_defaults', 'Course reset form defaults. ', [['mod/survey','lib.php',721]], 0],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'survey_get_template_name': ['survey_get_template_name', '', [['mod/survey','lib.php',462]], 0],
'survey_reset_course_form_definition': ['survey_reset_course_form_definition', 'Implementation of the function for printing the form elements that control whether the course reset functionality affects the survey. ', [['mod/survey','lib.php',708]], 0],
'survey_translate_question': ['survey_translate_question', 'Translate the question texts and options. ', [['mod/survey','lib.php',891]], 3],
'survey_get_completion_state': ['survey_get_completion_state', 'Obtains the automatic completion state for this survey based on the condition in feedback settings. ', [['mod/survey','lib.php',1028]], 0],
'survey_user_outline': ['survey_user_outline', '', [['mod/survey','lib.php',149]], 0],
'array_pop': ['array_pop', '', [], 483],
'implode': ['implode', '', [], 1281],
'count': ['count', '', [], 4095],
'define': ['define', '', [], 2373],
'time': ['time', '', [], 1959],
'max': ['max', '', [], 1266],
'explode': ['explode', '', [], 1572],
'link': ['link', '', [], 695],
'substr': ['substr', '', [], 2823],
'round': ['round', '', [], 1002],
'each': ['each', '', [], 2670]};
CLASS_DATA={
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'completion_info': ['completion_info', 'Class represents completion information for a course. ', [['lib','completionlib.php',210]], 141],
'html_table': ['html_table', 'Holds all the information required to render a <table> by {@link core_renderer::table()} ', [['lib','outputcomponents.php',2011]], 225],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'course_module_viewed': ['course_module_viewed', 'The mod_page course module viewed event class. ', [['mod/page/classes/event','course_module_viewed.php',28],['mod/chat/classes/event','course_module_viewed.php',29],['mod/quiz/classes/event','course_module_viewed.php',29],['mod/data/classes/event','course_module_viewed.php',30],['mod/choice/classes/event','course_module_viewed.php',28],['mod/forum/classes/event','course_module_viewed.php',29],['mod/resource/classes/event','course_module_viewed.php',29],['mod/book/classes/event','course_module_viewed.php',28],['mod/imscp/classes/event','course_module_viewed.php',30],['mod/lti/classes/event','course_module_viewed.php',29],['mod/feedback/classes/event','course_module_viewed.php',28],['mod/survey/classes/event','course_module_viewed.php',29],['mod/folder/classes/event','course_module_viewed.php',29],['mod/glossary/classes/event','course_module_viewed.php',28],['mod/scorm/classes/event','course_module_viewed.php',28],['mod/url/classes/event','course_module_viewed.php',29],['mod/wiki/classes/event','course_module_viewed.php',28],['lib/tests/fixtures','event_fixtures.php',232],['mod/lesson/classes/event','course_module_viewed.php',30],['mod/workshop/classes/event','course_module_viewed.php',32]], 37],
'user_picture': ['user_picture', 'Data structure representing a user picture. ', [['lib','outputcomponents.php',142]], 165],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'response_submitted': ['response_submitted', 'The mod_survey response submitted event class. ', [['mod/survey/classes/event','response_submitted.php',29],['mod/feedback/classes/event','response_submitted.php',28]], 7]};
CONST_DATA={
'SURVEY_COLLES_PREFERRED': ['SURVEY_COLLES_PREFERRED', '', [['mod/survey','lib.php',53]], 1],
'SURVEY_ATTLS': ['SURVEY_ATTLS', '', [['mod/survey','lib.php',55]], 1],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'FEATURE_COMPLETION_HAS_RULES': ['FEATURE_COMPLETION_HAS_RULES', '', [['lib','moodlelib.php',407]], 12],
'COMPLETION_COMPLETE': ['COMPLETION_COMPLETE', '', [['lib','completionlib.php',76]], 90],
'FEATURE_GROUPINGS': ['FEATURE_GROUPINGS', '', [['lib','moodlelib.php',416]], 23],
'SURVEY_CIQ': ['SURVEY_CIQ', '', [['mod/survey','lib.php',56]], 2],
'FEATURE_GROUPS': ['FEATURE_GROUPS', '', [['lib','moodlelib.php',414]], 25],
'FEATURE_SHOW_DESCRIPTION': ['FEATURE_SHOW_DESCRIPTION', '', [['lib','moodlelib.php',437]], 22],
'FEATURE_MOD_INTRO': ['FEATURE_MOD_INTRO', '', [['lib','moodlelib.php',426]], 31],
'SURVEY_COLLES_PREFERRED_ACTUAL': ['SURVEY_COLLES_PREFERRED_ACTUAL', '', [['mod/survey','lib.php',54]], 1],
'SURVEY_COLLES_ACTUAL': ['SURVEY_COLLES_ACTUAL', '', [['mod/survey','lib.php',52]], 1],
'PARAM_ALPHANUM': ['PARAM_ALPHANUM', '', [['lib','moodlelib.php',88]], 112],
'FEATURE_COMPLETION_TRACKS_VIEWS': ['FEATURE_COMPLETION_TRACKS_VIEWS', '', [['lib','moodlelib.php',405]], 23],
'FEATURE_GRADE_OUTCOMES': ['FEATURE_GRADE_OUTCOMES', '', [['lib','moodlelib.php',396]], 23],
'FEATURE_GRADE_HAS_GRADE': ['FEATURE_GRADE_HAS_GRADE', '', [['lib','moodlelib.php',394]], 29],
'FEATURE_BACKUP_MOODLE2': ['FEATURE_BACKUP_MOODLE2', '', [['lib','moodlelib.php',434]], 35]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
