<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/chat/classes/external.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='mod/chat/classes';
filename='external.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/chat/classes/</a> -> <a href="external.php.html">external.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="external.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="external.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Chat external API</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    mod_chat</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @category   external</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  2015 Juan Leyva &lt;juan@moodle.com&gt;</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @since      Moodle 3.0</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die;
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../_variables/libdir.html">libdir</a> . '/externallib.php');
<a name="l30"><span class="linenum">  30</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../../mod/chat/lib.php.html">/mod/chat/lib.php</a>');
<a name="l31"><span class="linenum">  31</span></a>  
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment">/**</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * Chat external functions</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> *</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @package    mod_chat</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @category   external</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * @copyright  2015 Juan Leyva &lt;juan@moodle.com&gt;</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * @since      Moodle 3.0</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> */</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('mod_chat_external')" href="../../../_classes/mod_chat_external.html" onMouseOver="classPopup(event,'mod_chat_external')">mod_chat_external</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('external_api')" href="../../../_classes/external_api.html" onMouseOver="classPopup(event,'external_api')">external_api</a> {
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>      <span class="comment">/**</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">     *</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     */</span>
<a name="l49"><span class="linenum">  49</span></a>      public static function <a class="function" onClick="logFunction('login_user_parameters')" href="../../../_functions/login_user_parameters.html" onMouseOver="funcPopup(event,'login_user_parameters')">login_user_parameters</a>() {
<a name="l50"><span class="linenum">  50</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l51"><span class="linenum">  51</span></a>              array(
<a name="l52"><span class="linenum">  52</span></a>                  'chatid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'chat instance id'),
<a name="l53"><span class="linenum">  53</span></a>                  'groupid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'group id, 0 means that the function will determine the user group',
<a name="l54"><span class="linenum">  54</span></a>                                                  <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 0),
<a name="l55"><span class="linenum">  55</span></a>              )
<a name="l56"><span class="linenum">  56</span></a>          );
<a name="l57"><span class="linenum">  57</span></a>      }
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>      <span class="comment">/**</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     * Log the current user into a chat room in the given chat.</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">     *</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">     * @param int $chatid the chat instance id</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     * @param int $groupid the user group id</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     * @return array of warnings and the chat unique session id</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     */</span>
<a name="l68"><span class="linenum">  68</span></a>      public static function <a class="function" onClick="logFunction('login_user')" href="../../../_functions/login_user.html" onMouseOver="funcPopup(event,'login_user')">login_user</a>(<a class="var it11332" onMouseOver="hilite(11332)" onMouseOut="lolite()" onClick="logVariable('chatid')" href="../../../_variables/chatid.html">$chatid</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../../_variables/groupid.html">$groupid</a> = 0) {
<a name="l69"><span class="linenum">  69</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('login_user_parameters')" href="../../../_functions/login_user_parameters.html" onMouseOver="funcPopup(event,'login_user_parameters')">login_user_parameters</a>(),
<a name="l72"><span class="linenum">  72</span></a>                                              array(
<a name="l73"><span class="linenum">  73</span></a>                                                  'chatid' =&gt; <a class="var it11332" onMouseOver="hilite(11332)" onMouseOut="lolite()" onClick="logVariable('chatid')" href="../../../_variables/chatid.html">$chatid</a>,
<a name="l74"><span class="linenum">  74</span></a>                                                  'groupid' =&gt; <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../../_variables/groupid.html">$groupid</a>
<a name="l75"><span class="linenum">  75</span></a>                                              ));
<a name="l76"><span class="linenum">  76</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a> = array();
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">        // Request and permission validation.</span>
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('chat', array('id' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['chatid']), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l80"><span class="linenum">  80</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>, 'chat');
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l83"><span class="linenum">  83</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/chat:chat', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l86"><span class="linenum">  86</span></a>  
<a name="l87"><span class="linenum">  87</span></a>          if (!empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['groupid'])) {
<a name="l88"><span class="linenum">  88</span></a>              <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../../_variables/groupid.html">$groupid</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['groupid'];
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">            // Determine is the group is visible to user.</span>
<a name="l90"><span class="linenum">  90</span></a>              if (!<a class="function" onClick="logFunction('groups_group_visible')" href="../../../_functions/groups_group_visible.html" onMouseOver="funcPopup(event,'groups_group_visible')">groups_group_visible</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../../_variables/groupid.html">$groupid</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>)) {
<a name="l91"><span class="linenum">  91</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notingroup');
<a name="l92"><span class="linenum">  92</span></a>              }
<a name="l93"><span class="linenum">  93</span></a>          } else {
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">            // Check to see if groups are being used here.</span>
<a name="l95"><span class="linenum">  95</span></a>              if (<a class="var it688" onMouseOver="hilite(688)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../../_variables/groupmode.html">$groupmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>)) {
<a name="l96"><span class="linenum">  96</span></a>                  <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../../_variables/groupid.html">$groupid</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>);
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">                // Determine is the group is visible to user (this is particullary for the group 0).</span>
<a name="l98"><span class="linenum">  98</span></a>                  if (!<a class="function" onClick="logFunction('groups_group_visible')" href="../../../_functions/groups_group_visible.html" onMouseOver="funcPopup(event,'groups_group_visible')">groups_group_visible</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../../_variables/groupid.html">$groupid</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>)) {
<a name="l99"><span class="linenum">  99</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notingroup');
<a name="l100"><span class="linenum"> 100</span></a>                  }
<a name="l101"><span class="linenum"> 101</span></a>              } else {
<a name="l102"><span class="linenum"> 102</span></a>                  <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../../_variables/groupid.html">$groupid</a> = 0;
<a name="l103"><span class="linenum"> 103</span></a>              }
<a name="l104"><span class="linenum"> 104</span></a>          }
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">        // Get the unique chat session id.</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">        // Since we are going to use the chat via Web Service requests we set the ajax version (since it's the most similar).</span>
<a name="l108"><span class="linenum"> 108</span></a>          if (!<a class="var it5674" onMouseOver="hilite(5674)" onMouseOut="lolite()" onClick="logVariable('chatsid')" href="../../../_variables/chatsid.html">$chatsid</a> = <a class="function" onClick="logFunction('chat_login_user')" href="../../../_functions/chat_login_user.html" onMouseOver="funcPopup(event,'chat_login_user')">chat_login_user</a>(<a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('id')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, 'ajax', <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../../_variables/groupid.html">$groupid</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>)) {
<a name="l109"><span class="linenum"> 109</span></a>              throw moodle_exception('cantlogin', 'chat');
<a name="l110"><span class="linenum"> 110</span></a>          }
<a name="l111"><span class="linenum"> 111</span></a>  
<a name="l112"><span class="linenum"> 112</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array();
<a name="l113"><span class="linenum"> 113</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['chatsid'] = <a class="var it5674" onMouseOver="hilite(5674)" onMouseOut="lolite()" onClick="logVariable('chatsid')" href="../../../_variables/chatsid.html">$chatsid</a>;
<a name="l114"><span class="linenum"> 114</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a>;
<a name="l115"><span class="linenum"> 115</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l116"><span class="linenum"> 116</span></a>      }
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>      <span class="comment">/**</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">     *</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     * @return external_description</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     */</span>
<a name="l124"><span class="linenum"> 124</span></a>      public static function <a class="function" onClick="logFunction('login_user_returns')" href="../../../_functions/login_user_returns.html" onMouseOver="funcPopup(event,'login_user_returns')">login_user_returns</a>() {
<a name="l125"><span class="linenum"> 125</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l126"><span class="linenum"> 126</span></a>              array(
<a name="l127"><span class="linenum"> 127</span></a>                  'chatsid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>, 'unique chat session id'),
<a name="l128"><span class="linenum"> 128</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l129"><span class="linenum"> 129</span></a>              )
<a name="l130"><span class="linenum"> 130</span></a>          );
<a name="l131"><span class="linenum"> 131</span></a>      }
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>      <span class="comment">/**</span>
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">     *</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     */</span>
<a name="l139"><span class="linenum"> 139</span></a>      public static function <a class="function" onClick="logFunction('get_chat_users_parameters')" href="../../../_functions/get_chat_users_parameters.html" onMouseOver="funcPopup(event,'get_chat_users_parameters')">get_chat_users_parameters</a>() {
<a name="l140"><span class="linenum"> 140</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l141"><span class="linenum"> 141</span></a>              array(
<a name="l142"><span class="linenum"> 142</span></a>                  'chatsid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>, 'chat session <a class="function" onClick="logFunction('id')" href="../../../_functions/id.html" onMouseOver="funcPopup(event,'id')">id</a> (obtained via mod_chat_login_user)')
<a name="l143"><span class="linenum"> 143</span></a>              )
<a name="l144"><span class="linenum"> 144</span></a>          );
<a name="l145"><span class="linenum"> 145</span></a>      }
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>      <span class="comment">/**</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     * Get the list of users in the given chat session.</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     *</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     * @param int $chatsid the chat session id</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">     * @return array of warnings and the user lists</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     */</span>
<a name="l155"><span class="linenum"> 155</span></a>      public static function <a class="function" onClick="logFunction('get_chat_users')" href="../../../_functions/get_chat_users.html" onMouseOver="funcPopup(event,'get_chat_users')">get_chat_users</a>(<a class="var it5674" onMouseOver="hilite(5674)" onMouseOut="lolite()" onClick="logVariable('chatsid')" href="../../../_variables/chatsid.html">$chatsid</a>) {
<a name="l156"><span class="linenum"> 156</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../../_variables/PAGE.html">$PAGE</a>;
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_chat_users_parameters')" href="../../../_functions/get_chat_users_parameters.html" onMouseOver="funcPopup(event,'get_chat_users_parameters')">get_chat_users_parameters</a>(),
<a name="l159"><span class="linenum"> 159</span></a>                                              array(
<a name="l160"><span class="linenum"> 160</span></a>                                                  'chatsid' =&gt; <a class="var it5674" onMouseOver="hilite(5674)" onMouseOut="lolite()" onClick="logVariable('chatsid')" href="../../../_variables/chatsid.html">$chatsid</a>
<a name="l161"><span class="linenum"> 161</span></a>                                              ));
<a name="l162"><span class="linenum"> 162</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a> = array();
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">        // Request and permission validation.</span>
<a name="l165"><span class="linenum"> 165</span></a>          if (!<a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('chat_users', array('sid' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['chatsid']))) {
<a name="l166"><span class="linenum"> 166</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notlogged', 'chat');
<a name="l167"><span class="linenum"> 167</span></a>          }
<a name="l168"><span class="linenum"> 168</span></a>          <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('chat', array('id' =&gt; <a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a>-&gt;<a onClick="logVariable('chatid')" class="var it44596" onMouseOver="hilite(44596)" onMouseOut="lolite()" href="../../../_variables/chatid.html">chatid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l169"><span class="linenum"> 169</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>, 'chat');
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l172"><span class="linenum"> 172</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l173"><span class="linenum"> 173</span></a>  
<a name="l174"><span class="linenum"> 174</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/chat:chat', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">        // First, delete old users from the chats.</span>
<a name="l177"><span class="linenum"> 177</span></a>          <a class="function" onClick="logFunction('chat_delete_old_users')" href="../../../_functions/chat_delete_old_users.html" onMouseOver="funcPopup(event,'chat_delete_old_users')">chat_delete_old_users</a>();
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>          <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../../_variables/users.html">$users</a> = <a class="function" onClick="logFunction('chat_get_users')" href="../../../_functions/chat_get_users.html" onMouseOver="funcPopup(event,'chat_get_users')">chat_get_users</a>(<a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a>-&gt;<a onClick="logVariable('chatid')" class="var it44596" onMouseOver="hilite(44596)" onMouseOut="lolite()" href="../../../_variables/chatid.html">chatid</a>, <a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a>-&gt;<a onClick="logVariable('groupid')" class="var it44596" onMouseOver="hilite(44596)" onMouseOut="lolite()" href="../../../_variables/groupid.html">groupid</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../../_variables/groupingid.html">groupingid</a>);
<a name="l180"><span class="linenum"> 180</span></a>          <a class="var it17925" onMouseOver="hilite(17925)" onMouseOut="lolite()" onClick="logVariable('returnedusers')" href="../../../_variables/returnedusers.html">$returnedusers</a> = array();
<a name="l181"><span class="linenum"> 181</span></a>  
<a name="l182"><span class="linenum"> 182</span></a>          foreach (<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../../_variables/users.html">$users</a> as <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>) {
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>              <a class="var it7923" onMouseOver="hilite(7923)" onMouseOut="lolite()" onClick="logVariable('userpicture')" href="../../../_variables/userpicture.html">$userpicture</a> = <span class="keyword">new </span><a class="class" onClick="logClass('user_picture')" href="../../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>);
<a name="l185"><span class="linenum"> 185</span></a>              <a class="var it7923" onMouseOver="hilite(7923)" onMouseOut="lolite()" onClick="logVariable('userpicture')" href="../../../_variables/userpicture.html">$userpicture</a>-&gt;<a onClick="logVariable('size')" class="var it42996" onMouseOver="hilite(42996)" onMouseOut="lolite()" href="../../../_variables/size.html">size</a> = 1; <span class="comment">// Size f1.</span>
<a name="l186"><span class="linenum"> 186</span></a>              <a class="var it28466" onMouseOver="hilite(28466)" onMouseOut="lolite()" onClick="logVariable('profileimageurl')" href="../../../_variables/profileimageurl.html">$profileimageurl</a> = <a class="var it7923" onMouseOver="hilite(7923)" onMouseOut="lolite()" onClick="logVariable('userpicture')" href="../../../_variables/userpicture.html">$userpicture</a>-&gt;<a class="function" onClick="logFunction('get_url')" href="../../../_functions/get_url.html" onMouseOver="funcPopup(event,'get_url')">get_url</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../../_variables/PAGE.html">$PAGE</a>)-&gt;<a class="function" onClick="logFunction('out')" href="../../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>              <a class="var it17925" onMouseOver="hilite(17925)" onMouseOut="lolite()" onClick="logVariable('returnedusers')" href="../../../_variables/returnedusers.html">$returnedusers</a>[] = array(
<a name="l189"><span class="linenum"> 189</span></a>                  'id' =&gt; <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>,
<a name="l190"><span class="linenum"> 190</span></a>                  'fullname' =&gt; <a class="function" onClick="logFunction('fullname')" href="../../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>),
<a name="l191"><span class="linenum"> 191</span></a>                  'profileimageurl' =&gt; <a class="var it28466" onMouseOver="hilite(28466)" onMouseOut="lolite()" onClick="logVariable('profileimageurl')" href="../../../_variables/profileimageurl.html">$profileimageurl</a>
<a name="l192"><span class="linenum"> 192</span></a>              );
<a name="l193"><span class="linenum"> 193</span></a>          }
<a name="l194"><span class="linenum"> 194</span></a>  
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array();
<a name="l196"><span class="linenum"> 196</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['users'] = <a class="var it17925" onMouseOver="hilite(17925)" onMouseOut="lolite()" onClick="logVariable('returnedusers')" href="../../../_variables/returnedusers.html">$returnedusers</a>;
<a name="l197"><span class="linenum"> 197</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a>;
<a name="l198"><span class="linenum"> 198</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l199"><span class="linenum"> 199</span></a>      }
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>      <span class="comment">/**</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">     *</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">     * @return external_description</span>
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">     */</span>
<a name="l207"><span class="linenum"> 207</span></a>      public static function <a class="function" onClick="logFunction('get_chat_users_returns')" href="../../../_functions/get_chat_users_returns.html" onMouseOver="funcPopup(event,'get_chat_users_returns')">get_chat_users_returns</a>() {
<a name="l208"><span class="linenum"> 208</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l209"><span class="linenum"> 209</span></a>              array(
<a name="l210"><span class="linenum"> 210</span></a>                  'users' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l211"><span class="linenum"> 211</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l212"><span class="linenum"> 212</span></a>                          array(
<a name="l213"><span class="linenum"> 213</span></a>                              'id' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'user id'),
<a name="l214"><span class="linenum"> 214</span></a>                              'fullname' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'user full name'),
<a name="l215"><span class="linenum"> 215</span></a>                              'profileimageurl' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_URL')" href="../../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>, 'user picture URL'),
<a name="l216"><span class="linenum"> 216</span></a>                          )
<a name="l217"><span class="linenum"> 217</span></a>                      ),
<a name="l218"><span class="linenum"> 218</span></a>                      'list of users'
<a name="l219"><span class="linenum"> 219</span></a>                  ),
<a name="l220"><span class="linenum"> 220</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l221"><span class="linenum"> 221</span></a>              )
<a name="l222"><span class="linenum"> 222</span></a>          );
<a name="l223"><span class="linenum"> 223</span></a>      }
<a name="l224"><span class="linenum"> 224</span></a>  
<a name="l225"><span class="linenum"> 225</span></a>      <span class="comment">/**</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">     *</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">     */</span>
<a name="l231"><span class="linenum"> 231</span></a>      public static function <a class="function" onClick="logFunction('send_chat_message_parameters')" href="../../../_functions/send_chat_message_parameters.html" onMouseOver="funcPopup(event,'send_chat_message_parameters')">send_chat_message_parameters</a>() {
<a name="l232"><span class="linenum"> 232</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l233"><span class="linenum"> 233</span></a>              array(
<a name="l234"><span class="linenum"> 234</span></a>                  'chatsid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>, 'chat session <a class="function" onClick="logFunction('id')" href="../../../_functions/id.html" onMouseOver="funcPopup(event,'id')">id</a> (obtained via mod_chat_login_user)'),
<a name="l235"><span class="linenum"> 235</span></a>                  'messagetext' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'the message text'),
<a name="l236"><span class="linenum"> 236</span></a>                  'beepid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'the beep id', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, ''),
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>              )
<a name="l239"><span class="linenum"> 239</span></a>          );
<a name="l240"><span class="linenum"> 240</span></a>      }
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>      <span class="comment">/**</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">     * Send a message on the given chat session.</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">     *</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">     * @param int $chatsid the chat session id</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">     * @param string $messagetext the message text</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">     * @param string $beepid the beep message id</span>
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">     * @return array of warnings and the new message id (0 if the message was empty)</span>
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">     */</span>
<a name="l252"><span class="linenum"> 252</span></a>      public static function <a class="function" onClick="logFunction('send_chat_message')" href="../../../_functions/send_chat_message.html" onMouseOver="funcPopup(event,'send_chat_message')">send_chat_message</a>(<a class="var it5674" onMouseOver="hilite(5674)" onMouseOut="lolite()" onClick="logVariable('chatsid')" href="../../../_variables/chatsid.html">$chatsid</a>, <a class="var it12911" onMouseOver="hilite(12911)" onMouseOut="lolite()" onClick="logVariable('messagetext')" href="../../../_variables/messagetext.html">$messagetext</a>, <a class="var it11328" onMouseOver="hilite(11328)" onMouseOut="lolite()" onClick="logVariable('beepid')" href="../../../_variables/beepid.html">$beepid</a> = '') {
<a name="l253"><span class="linenum"> 253</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l254"><span class="linenum"> 254</span></a>  
<a name="l255"><span class="linenum"> 255</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('send_chat_message_parameters')" href="../../../_functions/send_chat_message_parameters.html" onMouseOver="funcPopup(event,'send_chat_message_parameters')">send_chat_message_parameters</a>(),
<a name="l256"><span class="linenum"> 256</span></a>                                              array(
<a name="l257"><span class="linenum"> 257</span></a>                                                  'chatsid' =&gt; <a class="var it5674" onMouseOver="hilite(5674)" onMouseOut="lolite()" onClick="logVariable('chatsid')" href="../../../_variables/chatsid.html">$chatsid</a>,
<a name="l258"><span class="linenum"> 258</span></a>                                                  'messagetext' =&gt; <a class="var it12911" onMouseOver="hilite(12911)" onMouseOut="lolite()" onClick="logVariable('messagetext')" href="../../../_variables/messagetext.html">$messagetext</a>,
<a name="l259"><span class="linenum"> 259</span></a>                                                  'beepid' =&gt; <a class="var it11328" onMouseOver="hilite(11328)" onMouseOut="lolite()" onClick="logVariable('beepid')" href="../../../_variables/beepid.html">$beepid</a>
<a name="l260"><span class="linenum"> 260</span></a>                                              ));
<a name="l261"><span class="linenum"> 261</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a> = array();
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment">        // Request and permission validation.</span>
<a name="l264"><span class="linenum"> 264</span></a>          if (!<a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('chat_users', array('sid' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['chatsid']))) {
<a name="l265"><span class="linenum"> 265</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notlogged', 'chat');
<a name="l266"><span class="linenum"> 266</span></a>          }
<a name="l267"><span class="linenum"> 267</span></a>          <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('chat', array('id' =&gt; <a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a>-&gt;<a onClick="logVariable('chatid')" class="var it44596" onMouseOver="hilite(44596)" onMouseOut="lolite()" href="../../../_variables/chatid.html">chatid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l268"><span class="linenum"> 268</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>, 'chat');
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l271"><span class="linenum"> 271</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/chat:chat', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l274"><span class="linenum"> 274</span></a>  
<a name="l275"><span class="linenum"> 275</span></a>          <a class="var it11329" onMouseOver="hilite(11329)" onMouseOut="lolite()" onClick="logVariable('chatmessage')" href="../../../_variables/chatmessage.html">$chatmessage</a> = <a class="function" onClick="logFunction('clean_text')" href="../../../_functions/clean_text.html" onMouseOver="funcPopup(event,'clean_text')">clean_text</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['messagetext'], <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>);
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>          if (!empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['beepid'])) {
<a name="l278"><span class="linenum"> 278</span></a>              <a class="var it11329" onMouseOver="hilite(11329)" onMouseOut="lolite()" onClick="logVariable('chatmessage')" href="../../../_variables/chatmessage.html">$chatmessage</a> = 'beep ' . <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['beepid'];
<a name="l279"><span class="linenum"> 279</span></a>          }
<a name="l280"><span class="linenum"> 280</span></a>  
<a name="l281"><span class="linenum"> 281</span></a>          if (!empty(<a class="var it11329" onMouseOver="hilite(11329)" onMouseOut="lolite()" onClick="logVariable('chatmessage')" href="../../../_variables/chatmessage.html">$chatmessage</a>)) {
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">            // Send the message.</span>
<a name="l283"><span class="linenum"> 283</span></a>              <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../_variables/messageid.html">$messageid</a> = <a class="function" onClick="logFunction('chat_send_chatmessage')" href="../../../_functions/chat_send_chatmessage.html" onMouseOver="funcPopup(event,'chat_send_chatmessage')">chat_send_chatmessage</a>(<a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a>, <a class="var it11329" onMouseOver="hilite(11329)" onMouseOut="lolite()" onClick="logVariable('chatmessage')" href="../../../_variables/chatmessage.html">$chatmessage</a>, 0, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>);
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">            // Update ping time.</span>
<a name="l285"><span class="linenum"> 285</span></a>              <a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a>-&gt;<a onClick="logVariable('lastmessageping')" class="var it44596" onMouseOver="hilite(44596)" onMouseOut="lolite()" href="../../../_variables/lastmessageping.html">lastmessageping</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - 2;
<a name="l286"><span class="linenum"> 286</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('chat_users', <a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a>);
<a name="l287"><span class="linenum"> 287</span></a>          } else {
<a name="l288"><span class="linenum"> 288</span></a>              <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../_variables/messageid.html">$messageid</a> = 0;
<a name="l289"><span class="linenum"> 289</span></a>          }
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array();
<a name="l292"><span class="linenum"> 292</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['messageid'] = <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../_variables/messageid.html">$messageid</a>;
<a name="l293"><span class="linenum"> 293</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a>;
<a name="l294"><span class="linenum"> 294</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l295"><span class="linenum"> 295</span></a>      }
<a name="l296"><span class="linenum"> 296</span></a>  
<a name="l297"><span class="linenum"> 297</span></a>      <span class="comment">/**</span>
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment">     *</span>
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">     * @return external_description</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">     */</span>
<a name="l303"><span class="linenum"> 303</span></a>      public static function <a class="function" onClick="logFunction('send_chat_message_returns')" href="../../../_functions/send_chat_message_returns.html" onMouseOver="funcPopup(event,'send_chat_message_returns')">send_chat_message_returns</a>() {
<a name="l304"><span class="linenum"> 304</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l305"><span class="linenum"> 305</span></a>              array(
<a name="l306"><span class="linenum"> 306</span></a>                  'messageid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'message sent id'),
<a name="l307"><span class="linenum"> 307</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l308"><span class="linenum"> 308</span></a>              )
<a name="l309"><span class="linenum"> 309</span></a>          );
<a name="l310"><span class="linenum"> 310</span></a>      }
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>      <span class="comment">/**</span>
<a name="l313"><span class="linenum"> 313</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">     *</span>
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l316"><span class="linenum"> 316</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">     */</span>
<a name="l318"><span class="linenum"> 318</span></a>      public static function <a class="function" onClick="logFunction('get_chat_latest_messages_parameters')" href="../../../_functions/get_chat_latest_messages_parameters.html" onMouseOver="funcPopup(event,'get_chat_latest_messages_parameters')">get_chat_latest_messages_parameters</a>() {
<a name="l319"><span class="linenum"> 319</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l320"><span class="linenum"> 320</span></a>              array(
<a name="l321"><span class="linenum"> 321</span></a>                  'chatsid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>, 'chat session <a class="function" onClick="logFunction('id')" href="../../../_functions/id.html" onMouseOver="funcPopup(event,'id')">id</a> (obtained via mod_chat_login_user)'),
<a name="l322"><span class="linenum"> 322</span></a>                  'chatlasttime' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'last time messages were retrieved (epoch time)', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 0)
<a name="l323"><span class="linenum"> 323</span></a>              )
<a name="l324"><span class="linenum"> 324</span></a>          );
<a name="l325"><span class="linenum"> 325</span></a>      }
<a name="l326"><span class="linenum"> 326</span></a>  
<a name="l327"><span class="linenum"> 327</span></a>      <span class="comment">/**</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment">     * Get the latest messages from the given chat session.</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">     *</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment">     * @param int $chatsid the chat session id</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">     * @param int $chatlasttime last time messages were retrieved (epoch time)</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment">     * @return array of warnings and the new message id (0 if the message was empty)</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">     */</span>
<a name="l336"><span class="linenum"> 336</span></a>      public static function <a class="function" onClick="logFunction('get_chat_latest_messages')" href="../../../_functions/get_chat_latest_messages.html" onMouseOver="funcPopup(event,'get_chat_latest_messages')">get_chat_latest_messages</a>(<a class="var it5674" onMouseOver="hilite(5674)" onMouseOut="lolite()" onClick="logVariable('chatsid')" href="../../../_variables/chatsid.html">$chatsid</a>, <a class="var it11330" onMouseOver="hilite(11330)" onMouseOut="lolite()" onClick="logVariable('chatlasttime')" href="../../../_variables/chatlasttime.html">$chatlasttime</a> = 0) {
<a name="l337"><span class="linenum"> 337</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l338"><span class="linenum"> 338</span></a>  
<a name="l339"><span class="linenum"> 339</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_chat_latest_messages_parameters')" href="../../../_functions/get_chat_latest_messages_parameters.html" onMouseOver="funcPopup(event,'get_chat_latest_messages_parameters')">get_chat_latest_messages_parameters</a>(),
<a name="l340"><span class="linenum"> 340</span></a>                                              array(
<a name="l341"><span class="linenum"> 341</span></a>                                                  'chatsid' =&gt; <a class="var it5674" onMouseOver="hilite(5674)" onMouseOut="lolite()" onClick="logVariable('chatsid')" href="../../../_variables/chatsid.html">$chatsid</a>,
<a name="l342"><span class="linenum"> 342</span></a>                                                  'chatlasttime' =&gt; <a class="var it11330" onMouseOver="hilite(11330)" onMouseOut="lolite()" onClick="logVariable('chatlasttime')" href="../../../_variables/chatlasttime.html">$chatlasttime</a>
<a name="l343"><span class="linenum"> 343</span></a>                                              ));
<a name="l344"><span class="linenum"> 344</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a> = array();
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">        // Request and permission validation.</span>
<a name="l347"><span class="linenum"> 347</span></a>          if (!<a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('chat_users', array('sid' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['chatsid']))) {
<a name="l348"><span class="linenum"> 348</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notlogged', 'chat');
<a name="l349"><span class="linenum"> 349</span></a>          }
<a name="l350"><span class="linenum"> 350</span></a>          <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('chat', array('id' =&gt; <a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a>-&gt;<a onClick="logVariable('chatid')" class="var it44596" onMouseOver="hilite(44596)" onMouseOut="lolite()" href="../../../_variables/chatid.html">chatid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l351"><span class="linenum"> 351</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>, 'chat');
<a name="l352"><span class="linenum"> 352</span></a>  
<a name="l353"><span class="linenum"> 353</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l354"><span class="linenum"> 354</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l355"><span class="linenum"> 355</span></a>  
<a name="l356"><span class="linenum"> 356</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/chat:chat', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l357"><span class="linenum"> 357</span></a>  
<a name="l358"><span class="linenum"> 358</span></a>          <a class="var it11330" onMouseOver="hilite(11330)" onMouseOut="lolite()" onClick="logVariable('chatlasttime')" href="../../../_variables/chatlasttime.html">$chatlasttime</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['chatlasttime'];
<a name="l359"><span class="linenum"> 359</span></a>          if ((<a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - <a class="var it11330" onMouseOver="hilite(11330)" onMouseOut="lolite()" onClick="logVariable('chatlasttime')" href="../../../_variables/chatlasttime.html">$chatlasttime</a>) &gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('chat_old_ping')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../_variables/chat_old_ping.html">chat_old_ping</a>) {
<a name="l360"><span class="linenum"> 360</span></a>              <a class="function" onClick="logFunction('chat_delete_old_users')" href="../../../_functions/chat_delete_old_users.html" onMouseOver="funcPopup(event,'chat_delete_old_users')">chat_delete_old_users</a>();
<a name="l361"><span class="linenum"> 361</span></a>          }
<a name="l362"><span class="linenum"> 362</span></a>  
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">        // Set default chat last time (to not retrieve all the conversations).</span>
<a name="l364"><span class="linenum"> 364</span></a>          if (<a class="var it11330" onMouseOver="hilite(11330)" onMouseOut="lolite()" onClick="logVariable('chatlasttime')" href="../../../_variables/chatlasttime.html">$chatlasttime</a> == 0) {
<a name="l365"><span class="linenum"> 365</span></a>              <a class="var it11330" onMouseOver="hilite(11330)" onMouseOut="lolite()" onClick="logVariable('chatlasttime')" href="../../../_variables/chatlasttime.html">$chatlasttime</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('chat_old_ping')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../_variables/chat_old_ping.html">chat_old_ping</a>;
<a name="l366"><span class="linenum"> 366</span></a>          }
<a name="l367"><span class="linenum"> 367</span></a>  
<a name="l368"><span class="linenum"> 368</span></a>          if (<a class="var it11334" onMouseOver="hilite(11334)" onMouseOut="lolite()" onClick="logVariable('latestmessage')" href="../../../_variables/latestmessage.html">$latestmessage</a> = <a class="function" onClick="logFunction('chat_get_latest_message')" href="../../../_functions/chat_get_latest_message.html" onMouseOver="funcPopup(event,'chat_get_latest_message')">chat_get_latest_message</a>(<a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a>-&gt;<a onClick="logVariable('chatid')" class="var it44596" onMouseOver="hilite(44596)" onMouseOut="lolite()" href="../../../_variables/chatid.html">chatid</a>, <a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a>-&gt;<a onClick="logVariable('groupid')" class="var it44596" onMouseOver="hilite(44596)" onMouseOut="lolite()" href="../../../_variables/groupid.html">groupid</a>)) {
<a name="l369"><span class="linenum"> 369</span></a>              <a class="var it11335" onMouseOver="hilite(11335)" onMouseOut="lolite()" onClick="logVariable('chatnewlasttime')" href="../../../_variables/chatnewlasttime.html">$chatnewlasttime</a> = <a class="var it11334" onMouseOver="hilite(11334)" onMouseOut="lolite()" onClick="logVariable('latestmessage')" href="../../../_variables/latestmessage.html">$latestmessage</a>-&gt;<a onClick="logVariable('timestamp')" class="var it44597" onMouseOver="hilite(44597)" onMouseOut="lolite()" href="../../../_variables/timestamp.html">timestamp</a>;
<a name="l370"><span class="linenum"> 370</span></a>          } else {
<a name="l371"><span class="linenum"> 371</span></a>              <a class="var it11335" onMouseOver="hilite(11335)" onMouseOut="lolite()" onClick="logVariable('chatnewlasttime')" href="../../../_variables/chatnewlasttime.html">$chatnewlasttime</a> = 0;
<a name="l372"><span class="linenum"> 372</span></a>          }
<a name="l373"><span class="linenum"> 373</span></a>  
<a name="l374"><span class="linenum"> 374</span></a>          <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../_variables/messages.html">$messages</a> = <a class="function" onClick="logFunction('chat_get_latest_messages')" href="../../../_functions/chat_get_latest_messages.html" onMouseOver="funcPopup(event,'chat_get_latest_messages')">chat_get_latest_messages</a>(<a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a>, <a class="var it11330" onMouseOver="hilite(11330)" onMouseOut="lolite()" onClick="logVariable('chatlasttime')" href="../../../_variables/chatlasttime.html">$chatlasttime</a>);
<a name="l375"><span class="linenum"> 375</span></a>          <a class="var it38153" onMouseOver="hilite(38153)" onMouseOut="lolite()" onClick="logVariable('returnedmessages')" href="../../../_variables/returnedmessages.html">$returnedmessages</a> = array();
<a name="l376"><span class="linenum"> 376</span></a>  
<a name="l377"><span class="linenum"> 377</span></a>          foreach (<a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../_variables/messages.html">$messages</a> as <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>) {
<a name="l378"><span class="linenum"> 378</span></a>  
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">            // FORMAT_MOODLE is mandatory in the chat plugin.</span>
<a name="l380"><span class="linenum"> 380</span></a>              <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it38154" onMouseOver="hilite(38154)" onMouseOut="lolite()" onClick="logVariable('messageformatted')" href="../../../_variables/messageformatted.html">$messageformatted</a>, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>) = <a class="function" onClick="logFunction('external_format_text')" href="../../../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>-&gt;<a onClick="logVariable('message')" class="var it42910" onMouseOver="hilite(42910)" onMouseOut="lolite()" href="../../../_variables/message.html">message</a>, <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, 'mod_chat',
<a name="l381"><span class="linenum"> 381</span></a>                                                                      '', 0);
<a name="l382"><span class="linenum"> 382</span></a>  
<a name="l383"><span class="linenum"> 383</span></a>              <a class="var it38153" onMouseOver="hilite(38153)" onMouseOut="lolite()" onClick="logVariable('returnedmessages')" href="../../../_variables/returnedmessages.html">$returnedmessages</a>[] = array(
<a name="l384"><span class="linenum"> 384</span></a>                  'id' =&gt; <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>-&gt;<a onClick="logVariable('id')" class="var it42910" onMouseOver="hilite(42910)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>,
<a name="l385"><span class="linenum"> 385</span></a>                  'userid' =&gt; <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>-&gt;<a onClick="logVariable('userid')" class="var it42910" onMouseOver="hilite(42910)" onMouseOut="lolite()" href="../../../_variables/userid.html">userid</a>,
<a name="l386"><span class="linenum"> 386</span></a>                  'system' =&gt; (bool) <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>-&gt;<a onClick="logVariable('system')" class="var it42910" onMouseOver="hilite(42910)" onMouseOut="lolite()" href="../../../_variables/system.html">system</a>,
<a name="l387"><span class="linenum"> 387</span></a>                  'message' =&gt; <a class="var it38154" onMouseOver="hilite(38154)" onMouseOut="lolite()" onClick="logVariable('messageformatted')" href="../../../_variables/messageformatted.html">$messageformatted</a>,
<a name="l388"><span class="linenum"> 388</span></a>                  'timestamp' =&gt; <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../_variables/message.html">$message</a>-&gt;<a onClick="logVariable('timestamp')" class="var it42910" onMouseOver="hilite(42910)" onMouseOut="lolite()" href="../../../_variables/timestamp.html">timestamp</a>,
<a name="l389"><span class="linenum"> 389</span></a>              );
<a name="l390"><span class="linenum"> 390</span></a>          }
<a name="l391"><span class="linenum"> 391</span></a>  
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">        // Update our status since we are active in the chat.</span>
<a name="l393"><span class="linenum"> 393</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('chat_users', 'lastping', <a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), array('id' =&gt; <a class="var it5679" onMouseOver="hilite(5679)" onMouseOut="lolite()" onClick="logVariable('chatuser')" href="../../../_variables/chatuser.html">$chatuser</a>-&gt;<a onClick="logVariable('id')" class="var it44596" onMouseOver="hilite(44596)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>));
<a name="l394"><span class="linenum"> 394</span></a>  
<a name="l395"><span class="linenum"> 395</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array();
<a name="l396"><span class="linenum"> 396</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['messages'] = <a class="var it38153" onMouseOver="hilite(38153)" onMouseOut="lolite()" onClick="logVariable('returnedmessages')" href="../../../_variables/returnedmessages.html">$returnedmessages</a>;
<a name="l397"><span class="linenum"> 397</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['chatnewlasttime'] = <a class="var it11335" onMouseOver="hilite(11335)" onMouseOut="lolite()" onClick="logVariable('chatnewlasttime')" href="../../../_variables/chatnewlasttime.html">$chatnewlasttime</a>;
<a name="l398"><span class="linenum"> 398</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a>;
<a name="l399"><span class="linenum"> 399</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l400"><span class="linenum"> 400</span></a>      }
<a name="l401"><span class="linenum"> 401</span></a>  
<a name="l402"><span class="linenum"> 402</span></a>      <span class="comment">/**</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">     *</span>
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">     * @return external_description</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment">     */</span>
<a name="l408"><span class="linenum"> 408</span></a>      public static function <a class="function" onClick="logFunction('get_chat_latest_messages_returns')" href="../../../_functions/get_chat_latest_messages_returns.html" onMouseOver="funcPopup(event,'get_chat_latest_messages_returns')">get_chat_latest_messages_returns</a>() {
<a name="l409"><span class="linenum"> 409</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l410"><span class="linenum"> 410</span></a>              array(
<a name="l411"><span class="linenum"> 411</span></a>                  'messages' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l412"><span class="linenum"> 412</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l413"><span class="linenum"> 413</span></a>                          array(
<a name="l414"><span class="linenum"> 414</span></a>                              'id' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'message id'),
<a name="l415"><span class="linenum"> 415</span></a>                              'userid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'user id'),
<a name="l416"><span class="linenum"> 416</span></a>                              'system' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'true if is a system <a class="function" onClick="logFunction('message')" href="../../../_functions/message.html" onMouseOver="funcPopup(event,'message')">message</a> (like user joined)'),
<a name="l417"><span class="linenum"> 417</span></a>                              'message' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'message text'),
<a name="l418"><span class="linenum"> 418</span></a>                              'timestamp' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'timestamp for the message'),
<a name="l419"><span class="linenum"> 419</span></a>                          )
<a name="l420"><span class="linenum"> 420</span></a>                      ),
<a name="l421"><span class="linenum"> 421</span></a>                      'list of users'
<a name="l422"><span class="linenum"> 422</span></a>                  ),
<a name="l423"><span class="linenum"> 423</span></a>                  'chatnewlasttime' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'new last time'),
<a name="l424"><span class="linenum"> 424</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l425"><span class="linenum"> 425</span></a>              )
<a name="l426"><span class="linenum"> 426</span></a>          );
<a name="l427"><span class="linenum"> 427</span></a>      }
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>      <span class="comment">/**</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">     *</span>
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">     */</span>
<a name="l435"><span class="linenum"> 435</span></a>      public static function <a class="function" onClick="logFunction('view_chat_parameters')" href="../../../_functions/view_chat_parameters.html" onMouseOver="funcPopup(event,'view_chat_parameters')">view_chat_parameters</a>() {
<a name="l436"><span class="linenum"> 436</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l437"><span class="linenum"> 437</span></a>              array(
<a name="l438"><span class="linenum"> 438</span></a>                  'chatid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'chat instance id')
<a name="l439"><span class="linenum"> 439</span></a>              )
<a name="l440"><span class="linenum"> 440</span></a>          );
<a name="l441"><span class="linenum"> 441</span></a>      }
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>      <span class="comment">/**</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">     * Trigger the course module viewed event and update the module completion status.</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">     *</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">     * @param int $chatid the chat instance id</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">     * @return array of warnings and status result</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">     */</span>
<a name="l451"><span class="linenum"> 451</span></a>      public static function <a class="function" onClick="logFunction('view_chat')" href="../../../_functions/view_chat.html" onMouseOver="funcPopup(event,'view_chat')">view_chat</a>(<a class="var it11332" onMouseOver="hilite(11332)" onMouseOut="lolite()" onClick="logVariable('chatid')" href="../../../_variables/chatid.html">$chatid</a>) {
<a name="l452"><span class="linenum"> 452</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l453"><span class="linenum"> 453</span></a>  
<a name="l454"><span class="linenum"> 454</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('view_chat_parameters')" href="../../../_functions/view_chat_parameters.html" onMouseOver="funcPopup(event,'view_chat_parameters')">view_chat_parameters</a>(),
<a name="l455"><span class="linenum"> 455</span></a>                                              array(
<a name="l456"><span class="linenum"> 456</span></a>                                                  'chatid' =&gt; <a class="var it11332" onMouseOver="hilite(11332)" onMouseOut="lolite()" onClick="logVariable('chatid')" href="../../../_variables/chatid.html">$chatid</a>
<a name="l457"><span class="linenum"> 457</span></a>                                              ));
<a name="l458"><span class="linenum"> 458</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a> = array();
<a name="l459"><span class="linenum"> 459</span></a>  
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">        // Request and permission validation.</span>
<a name="l461"><span class="linenum"> 461</span></a>          <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('chat', array('id' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['chatid']), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l462"><span class="linenum"> 462</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>, 'chat');
<a name="l463"><span class="linenum"> 463</span></a>  
<a name="l464"><span class="linenum"> 464</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l465"><span class="linenum"> 465</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l466"><span class="linenum"> 466</span></a>  
<a name="l467"><span class="linenum"> 467</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/chat:chat', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l468"><span class="linenum"> 468</span></a>  
<a name="l469"><span class="linenum"> 469</span></a>  <span class="comment">        // Call the url/lib API.</span>
<a name="l470"><span class="linenum"> 470</span></a>          <a class="function" onClick="logFunction('chat_view')" href="../../../_functions/chat_view.html" onMouseOver="funcPopup(event,'chat_view')">chat_view</a>(<a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l471"><span class="linenum"> 471</span></a>  
<a name="l472"><span class="linenum"> 472</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array();
<a name="l473"><span class="linenum"> 473</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['status'] = true;
<a name="l474"><span class="linenum"> 474</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a>;
<a name="l475"><span class="linenum"> 475</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l476"><span class="linenum"> 476</span></a>      }
<a name="l477"><span class="linenum"> 477</span></a>  
<a name="l478"><span class="linenum"> 478</span></a>      <span class="comment">/**</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">     *</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">     * @return external_description</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment">     */</span>
<a name="l484"><span class="linenum"> 484</span></a>      public static function <a class="function" onClick="logFunction('view_chat_returns')" href="../../../_functions/view_chat_returns.html" onMouseOver="funcPopup(event,'view_chat_returns')">view_chat_returns</a>() {
<a name="l485"><span class="linenum"> 485</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l486"><span class="linenum"> 486</span></a>              array(
<a name="l487"><span class="linenum"> 487</span></a>                  'status' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'status: true if success'),
<a name="l488"><span class="linenum"> 488</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l489"><span class="linenum"> 489</span></a>              )
<a name="l490"><span class="linenum"> 490</span></a>          );
<a name="l491"><span class="linenum"> 491</span></a>      }
<a name="l492"><span class="linenum"> 492</span></a>  
<a name="l493"><span class="linenum"> 493</span></a>  
<a name="l494"><span class="linenum"> 494</span></a>      <span class="comment">/**</span>
<a name="l495"><span class="linenum"> 495</span></a>  <span class="comment">     * Describes the parameters for get_chats_by_courses.</span>
<a name="l496"><span class="linenum"> 496</span></a>  <span class="comment">     *</span>
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">     * @return external_external_function_parameters</span>
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">     */</span>
<a name="l500"><span class="linenum"> 500</span></a>      public static function <a class="function" onClick="logFunction('get_chats_by_courses_parameters')" href="../../../_functions/get_chats_by_courses_parameters.html" onMouseOver="funcPopup(event,'get_chats_by_courses_parameters')">get_chats_by_courses_parameters</a>() {
<a name="l501"><span class="linenum"> 501</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a> (
<a name="l502"><span class="linenum"> 502</span></a>              array(
<a name="l503"><span class="linenum"> 503</span></a>                  'courseids' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l504"><span class="linenum"> 504</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'course id'), 'Array of course ids', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, array()
<a name="l505"><span class="linenum"> 505</span></a>                  ),
<a name="l506"><span class="linenum"> 506</span></a>              )
<a name="l507"><span class="linenum"> 507</span></a>          );
<a name="l508"><span class="linenum"> 508</span></a>      }
<a name="l509"><span class="linenum"> 509</span></a>  
<a name="l510"><span class="linenum"> 510</span></a>      <span class="comment">/**</span>
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">     * Returns a list of chats in a provided list of courses,</span>
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">     * if no list is provided all chats that the user can view will be returned.</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">     *</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">     * @param array $courseids the course ids</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">     * @return array of chats details</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">     */</span>
<a name="l518"><span class="linenum"> 518</span></a>      public static function <a class="function" onClick="logFunction('get_chats_by_courses')" href="../../../_functions/get_chats_by_courses.html" onMouseOver="funcPopup(event,'get_chats_by_courses')">get_chats_by_courses</a>(<a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../../_variables/courseids.html">$courseids</a> = array()) {
<a name="l519"><span class="linenum"> 519</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>          <a class="var it38155" onMouseOver="hilite(38155)" onMouseOut="lolite()" onClick="logVariable('returnedchats')" href="../../../_variables/returnedchats.html">$returnedchats</a> = array();
<a name="l522"><span class="linenum"> 522</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a> = array();
<a name="l523"><span class="linenum"> 523</span></a>  
<a name="l524"><span class="linenum"> 524</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_chats_by_courses_parameters')" href="../../../_functions/get_chats_by_courses_parameters.html" onMouseOver="funcPopup(event,'get_chats_by_courses_parameters')">get_chats_by_courses_parameters</a>(), array('courseids' =&gt; <a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../../_variables/courseids.html">$courseids</a>));
<a name="l525"><span class="linenum"> 525</span></a>  
<a name="l526"><span class="linenum"> 526</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../../_variables/courses.html">$courses</a> = array();
<a name="l527"><span class="linenum"> 527</span></a>          if (empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['courseids'])) {
<a name="l528"><span class="linenum"> 528</span></a>              <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../../_variables/courses.html">$courses</a> = <a class="function" onClick="logFunction('enrol_get_my_courses')" href="../../../_functions/enrol_get_my_courses.html" onMouseOver="funcPopup(event,'enrol_get_my_courses')">enrol_get_my_courses</a>();
<a name="l529"><span class="linenum"> 529</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['courseids'] = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../../_variables/courses.html">$courses</a>);
<a name="l530"><span class="linenum"> 530</span></a>          }
<a name="l531"><span class="linenum"> 531</span></a>  
<a name="l532"><span class="linenum"> 532</span></a>  <span class="comment">        // Ensure there are courseids to loop through.</span>
<a name="l533"><span class="linenum"> 533</span></a>          if (!empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['courseids'])) {
<a name="l534"><span class="linenum"> 534</span></a>  
<a name="l535"><span class="linenum"> 535</span></a>              <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../../_variables/courses.html">$courses</a>, <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a>) = <a class="class" onClick="logClass('external_util')" href="../../../_classes/external_util.html" onMouseOver="classPopup(event,'external_util')">external_util</a>::<a class="function" onClick="logFunction('validate_courses')" href="../../../_functions/validate_courses.html" onMouseOver="funcPopup(event,'validate_courses')">validate_courses</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>['courseids'], <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../../_variables/courses.html">$courses</a>);
<a name="l536"><span class="linenum"> 536</span></a>  
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">            // Get the chats in this course, this function checks users visibility permissions.</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">            // We can avoid then additional validate_context calls.</span>
<a name="l539"><span class="linenum"> 539</span></a>              <a class="var it8761" onMouseOver="hilite(8761)" onMouseOut="lolite()" onClick="logVariable('chats')" href="../../../_variables/chats.html">$chats</a> = <a class="function" onClick="logFunction('get_all_instances_in_courses')" href="../../../_functions/get_all_instances_in_courses.html" onMouseOver="funcPopup(event,'get_all_instances_in_courses')">get_all_instances_in_courses</a>(&quot;chat&quot;, <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../../_variables/courses.html">$courses</a>);
<a name="l540"><span class="linenum"> 540</span></a>              foreach (<a class="var it8761" onMouseOver="hilite(8761)" onMouseOut="lolite()" onClick="logVariable('chats')" href="../../../_variables/chats.html">$chats</a> as <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>) {
<a name="l541"><span class="linenum"> 541</span></a>                  <a class="var it38156" onMouseOver="hilite(38156)" onMouseOut="lolite()" onClick="logVariable('chatcontext')" href="../../../_variables/chatcontext.html">$chatcontext</a> = <a class="class" onClick="logClass('context_module')" href="../../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/coursemodule.html">coursemodule</a>);
<a name="l542"><span class="linenum"> 542</span></a>  <span class="comment">                // Entry to return.</span>
<a name="l543"><span class="linenum"> 543</span></a>                  <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a> = array();
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">                // First, we return information that any user can see in the web interface.</span>
<a name="l545"><span class="linenum"> 545</span></a>                  <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['id'] = <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('id')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l546"><span class="linenum"> 546</span></a>                  <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['coursemodule']      = <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/coursemodule.html">coursemodule</a>;
<a name="l547"><span class="linenum"> 547</span></a>                  <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['course']            = <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('course')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/course.html">course</a>;
<a name="l548"><span class="linenum"> 548</span></a>                  <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['name']              = <a class="function" onClick="logFunction('external_format_string')" href="../../../_functions/external_format_string.html" onMouseOver="funcPopup(event,'external_format_string')">external_format_string</a>(<a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('name')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/name.html">name</a>, <a class="var it38156" onMouseOver="hilite(38156)" onMouseOut="lolite()" onClick="logVariable('chatcontext')" href="../../../_variables/chatcontext.html">$chatcontext</a>-&gt;<a onClick="logVariable('id')" class="var it44598" onMouseOver="hilite(44598)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment">                // Format intro.</span>
<a name="l550"><span class="linenum"> 550</span></a>                  <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['intro'], <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['introformat']) =
<a name="l551"><span class="linenum"> 551</span></a>                      <a class="function" onClick="logFunction('external_format_text')" href="../../../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('intro')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/intro.html">intro</a>, <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('introformat')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/introformat.html">introformat</a>, <a class="var it38156" onMouseOver="hilite(38156)" onMouseOut="lolite()" onClick="logVariable('chatcontext')" href="../../../_variables/chatcontext.html">$chatcontext</a>-&gt;<a onClick="logVariable('id')" class="var it44598" onMouseOver="hilite(44598)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, 'mod_chat', 'intro', null);
<a name="l552"><span class="linenum"> 552</span></a>                  <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['introfiles'] = <a class="class" onClick="logClass('external_util')" href="../../../_classes/external_util.html" onMouseOver="classPopup(event,'external_util')">external_util</a>::<a class="function" onClick="logFunction('get_area_files')" href="../../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it38156" onMouseOver="hilite(38156)" onMouseOut="lolite()" onClick="logVariable('chatcontext')" href="../../../_variables/chatcontext.html">$chatcontext</a>-&gt;<a onClick="logVariable('id')" class="var it44598" onMouseOver="hilite(44598)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, 'mod_chat', 'intro', false, false);
<a name="l553"><span class="linenum"> 553</span></a>  
<a name="l554"><span class="linenum"> 554</span></a>                  if (<a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/chat:chat', <a class="var it38156" onMouseOver="hilite(38156)" onMouseOut="lolite()" onClick="logVariable('chatcontext')" href="../../../_variables/chatcontext.html">$chatcontext</a>)) {
<a name="l555"><span class="linenum"> 555</span></a>                      <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['chatmethod']    = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('chat_method')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../_variables/chat_method.html">chat_method</a>;
<a name="l556"><span class="linenum"> 556</span></a>                      <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['keepdays']      = <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('keepdays')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/keepdays.html">keepdays</a>;
<a name="l557"><span class="linenum"> 557</span></a>                      <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['studentlogs']   = <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('studentlogs')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/studentlogs.html">studentlogs</a>;
<a name="l558"><span class="linenum"> 558</span></a>                      <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['chattime']      = <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('chattime')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/chattime.html">chattime</a>;
<a name="l559"><span class="linenum"> 559</span></a>                      <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['schedule']      = <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('schedule')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/schedule.html">schedule</a>;
<a name="l560"><span class="linenum"> 560</span></a>                  }
<a name="l561"><span class="linenum"> 561</span></a>  
<a name="l562"><span class="linenum"> 562</span></a>                  if (<a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:manageactivities', <a class="var it38156" onMouseOver="hilite(38156)" onMouseOut="lolite()" onClick="logVariable('chatcontext')" href="../../../_variables/chatcontext.html">$chatcontext</a>)) {
<a name="l563"><span class="linenum"> 563</span></a>                      <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['timemodified']  = <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/timemodified.html">timemodified</a>;
<a name="l564"><span class="linenum"> 564</span></a>                      <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['section']       = <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('section')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/section.html">section</a>;
<a name="l565"><span class="linenum"> 565</span></a>                      <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['visible']       = <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('visible')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/visible.html">visible</a>;
<a name="l566"><span class="linenum"> 566</span></a>                      <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['groupmode']     = <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('groupmode')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/groupmode.html">groupmode</a>;
<a name="l567"><span class="linenum"> 567</span></a>                      <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>['groupingid']    = <a class="var it3367" onMouseOver="hilite(3367)" onMouseOut="lolite()" onClick="logVariable('chat')" href="../../../_variables/chat.html">$chat</a>-&gt;<a onClick="logVariable('groupingid')" class="var it42903" onMouseOver="hilite(42903)" onMouseOut="lolite()" href="../../../_variables/groupingid.html">groupingid</a>;
<a name="l568"><span class="linenum"> 568</span></a>                  }
<a name="l569"><span class="linenum"> 569</span></a>                  <a class="var it38155" onMouseOver="hilite(38155)" onMouseOut="lolite()" onClick="logVariable('returnedchats')" href="../../../_variables/returnedchats.html">$returnedchats</a>[] = <a class="var it38157" onMouseOver="hilite(38157)" onMouseOut="lolite()" onClick="logVariable('chatdetails')" href="../../../_variables/chatdetails.html">$chatdetails</a>;
<a name="l570"><span class="linenum"> 570</span></a>              }
<a name="l571"><span class="linenum"> 571</span></a>          }
<a name="l572"><span class="linenum"> 572</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = array();
<a name="l573"><span class="linenum"> 573</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['chats'] = <a class="var it38155" onMouseOver="hilite(38155)" onMouseOut="lolite()" onClick="logVariable('returnedchats')" href="../../../_variables/returnedchats.html">$returnedchats</a>;
<a name="l574"><span class="linenum"> 574</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../../_variables/warnings.html">$warnings</a>;
<a name="l575"><span class="linenum"> 575</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l576"><span class="linenum"> 576</span></a>      }
<a name="l577"><span class="linenum"> 577</span></a>  
<a name="l578"><span class="linenum"> 578</span></a>      <span class="comment">/**</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">     * Describes the get_chats_by_courses return value.</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">     *</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">     * @return external_single_structure</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     */</span>
<a name="l584"><span class="linenum"> 584</span></a>      public static function <a class="function" onClick="logFunction('get_chats_by_courses_returns')" href="../../../_functions/get_chats_by_courses_returns.html" onMouseOver="funcPopup(event,'get_chats_by_courses_returns')">get_chats_by_courses_returns</a>() {
<a name="l585"><span class="linenum"> 585</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l586"><span class="linenum"> 586</span></a>              array(
<a name="l587"><span class="linenum"> 587</span></a>                  'chats' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l588"><span class="linenum"> 588</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l589"><span class="linenum"> 589</span></a>                          array(
<a name="l590"><span class="linenum"> 590</span></a>                              'id' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Chat id'),
<a name="l591"><span class="linenum"> 591</span></a>                              'coursemodule' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Course module id'),
<a name="l592"><span class="linenum"> 592</span></a>                              'course' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Course id'),
<a name="l593"><span class="linenum"> 593</span></a>                              'name' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Chat name'),
<a name="l594"><span class="linenum"> 594</span></a>                              'intro' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'The Chat intro'),
<a name="l595"><span class="linenum"> 595</span></a>                              'introformat' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_format_value')" href="../../../_classes/external_format_value.html" onMouseOver="classPopup(event,'external_format_value')">external_format_value</a>('intro'),
<a name="l596"><span class="linenum"> 596</span></a>                              'introfiles' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_files')" href="../../../_classes/external_files.html" onMouseOver="classPopup(event,'external_files')">external_files</a>('Files in the introduction text', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l597"><span class="linenum"> 597</span></a>                              'chatmethod' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>, 'chat <a class="function" onClick="logFunction('method')" href="../../../_functions/method.html" onMouseOver="funcPopup(event,'method')">method</a> (sockets, daemon)', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l598"><span class="linenum"> 598</span></a>                              'keepdays' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'keep days', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l599"><span class="linenum"> 599</span></a>                              'studentlogs' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'student logs visible to everyone', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l600"><span class="linenum"> 600</span></a>                              'chattime' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'chat time', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l601"><span class="linenum"> 601</span></a>                              'schedule' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'schedule type', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l602"><span class="linenum"> 602</span></a>                              'timemodified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'time of last modification', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l603"><span class="linenum"> 603</span></a>                              'section' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'course section id', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l604"><span class="linenum"> 604</span></a>                              'visible' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'visible', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l605"><span class="linenum"> 605</span></a>                              'groupmode' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'group mode', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l606"><span class="linenum"> 606</span></a>                              'groupingid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'group id', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l607"><span class="linenum"> 607</span></a>                          ), 'Chats'
<a name="l608"><span class="linenum"> 608</span></a>                      )
<a name="l609"><span class="linenum"> 609</span></a>                  ),
<a name="l610"><span class="linenum"> 610</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>(),
<a name="l611"><span class="linenum"> 611</span></a>              )
<a name="l612"><span class="linenum"> 612</span></a>          );
<a name="l613"><span class="linenum"> 613</span></a>      }
<a name="l614"><span class="linenum"> 614</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'send_chat_message_parameters': ['send_chat_message_parameters', 'Returns description of method parameters ', [['mod/chat/classes','external.php',225]], 1],
'view_chat_parameters': ['view_chat_parameters', 'Returns description of method parameters ', [['mod/chat/classes','external.php',429]], 1],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',782],['lib','externallib.php',1134]], 216],
'get_chat_users_parameters': ['get_chat_users_parameters', 'Returns description of method parameters ', [['mod/chat/classes','external.php',133]], 1],
'send_chat_message_returns': ['send_chat_message_returns', 'Returns description of method result value ', [['mod/chat/classes','external.php',297]], 1],
'enrol_get_my_courses': ['enrol_get_my_courses', 'Returns list of courses current $USER is enrolled in and can access ', [['lib','enrollib.php',512]], 30],
'chat_get_latest_messages': ['chat_get_latest_messages', 'Return a list of the latest messages in the given chat session. ', [['mod/chat','lib.php',1312]], 2],
'get_chat_users_returns': ['get_chat_users_returns', 'Returns description of method result value ', [['mod/chat/classes','external.php',201]], 1],
'get_chat_latest_messages': ['get_chat_latest_messages', 'Get the latest messages from the given chat session. ', [['mod/chat/classes','external.php',327]], 1],
'chat_login_user': ['chat_login_user', 'login if not already logged in ', [['mod/chat','lib.php',504]], 7],
'out': ['out', 'Returns the selector for use in a CSS rule ', [['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['mod/feedback/classes','responses_table.php',332],['lib','moodlelib.php',9729],['lib','weblib.php',545],['lib','tablelib.php',1594],['report/loglive/classes','table_log_ajax.php',37]], 626],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'login_user': ['login_user', 'Log the current user into a chat room in the given chat. ', [['mod/chat/classes','external.php',59],['lib/classes/session','manager.php',464]], 6],
'get_chat_latest_messages_returns': ['get_chat_latest_messages_returns', 'Returns description of method result value ', [['mod/chat/classes','external.php',402]], 1],
'get_chat_latest_messages_parameters': ['get_chat_latest_messages_parameters', 'Returns description of method parameters ', [['mod/chat/classes','external.php',312]], 1],
'require_capability': ['require_capability', 'Wrapper round the require_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',929],['lib','accesslib.php',762],['backup/util/ui','restore_ui_components.php',157]], 690],
'external_format_text': ['external_format_text', 'Format the text to be returned properly as requested by the either the web service server, either by an internally call. The caller can change the format (raw, filter, file, fileurl) with the external_settings singleton All web service servers must set this singleton when parsing the $_GET and $_POST. ', [['lib','externallib.php',887]], 61],
'send_chat_message': ['send_chat_message', 'Send a message on the given chat session. ', [['mod/chat/classes','external.php',242]], 1],
'view_chat_returns': ['view_chat_returns', 'Returns description of method result value ', [['mod/chat/classes','external.php',478]], 1],
'get_url': ['get_url', 'Get URL related to the action ', [['lib/classes/event','competency_plan_unlinked.php',81],['lib/classes/event','grouping_group_assigned.php',57],['lib/classes/event','enrol_instance_deleted.php',79],['report/log/classes/event','user_report_viewed.php',82],['mod/quiz/classes/event','attempt_reviewed.php',72],['lib/classes/event','role_unassigned.php',72],['mod/workshop/classes/event','submission_deleted.php',72],['mod/forum/classes/event','discussion_updated.php',74],['lib/classes/event','course_module_instance_list_viewed.php',84],['lib/classes/event','course_created.php',73],['mod/forum/classes/event','readtracking_enabled.php',73],['mod/wiki/classes/event','page_created.php',77],['lib/classes/event','competency_viewed.php',79],['mod/choice/classes/event','answer_updated.php',81],['lib/simplepie/library/SimplePie','Copyright.php',96],['lib/classes/event','search_indexed.php',69],['lib/classes/event','badge_criteria_updated.php',71],['mod/wiki/classes/event','page_version_deleted.php',83],['lib/classes/event','competency_user_competency_rated_in_plan.php',97],['mod/glossary/classes/event','entry_deleted.php',73],['lib/classes/event','competency_template_viewed.php',81],['admin/tool/langimport/classes/event','langpack_removed.php',80],['mod/glossary/classes/event','category_deleted.php',65],['lib/classes/event','badge_deleted.php',67],['mod/quiz/classes/event','user_override_updated.php',73],['lib/classes/event','message_contact_added.php',57],['lib/classes/event','cohort_member_added.php',68],['lib/classes/event','blog_entry_updated.php',92],['mod/forum/classes/event','assessable_uploaded.php',95],['lib/classes/event','group_deleted.php',74],['lib/classes/event','role_allow_assign_updated.php',65],['mod/lesson/classes/event','highscore_added.php',68],['mod/forum/classes/event','discussion_pinned.php',64],['lib/classes/event','competency_plan_reopened.php',84],['mod/lesson/classes/event','essay_attempt_viewed.php',57],['mod/wiki/classes/event','page_locks_deleted.php',83],['mod/glossary/classes/event','comment_created.php',37],['lib/classes/event','webservice_service_deleted.php',68],['mod/forum/classes/event','discussion_subscription_created.php',75],['admin/tool/log/store/database/tests/fixtures','event.php',44],['mod/workshop/classes/event','assessable_uploaded.php',102],['lib/classes/event','user_loggedout.php',72],['lib/classes/event','webservice_token_created.php',74],['mod/data/classes/event','field_deleted.php',76],['mod/book/classes/event','chapter_created.php',88],['mod/survey/classes/event','report_downloaded.php',73],['mod/workshop/classes/event','phase_switched.php',84],['lib/classes/event','course_reset_started.php',62],['mod/workshop/classes/event','assessment_evaluated.php',75],['lib/classes/event','blog_association_created.php',75],['report/outline/classes/event','activity_report_viewed.php',75],['lib/classes/event','competency_plan_updated.php',84],['mod/choice/classes/event','answer_submitted.php',81],['mod/lesson/classes/event','lesson_ended.php',58],['lib/classes/event','role_allow_switch_updated.php',65],['lib/classes/event','competency_user_competency_rated_in_course.php',97],['mod/quiz/report','attemptsreport_options.php',133],['report/participation/classes/event','report_viewed.php',86],['lib/classes/event','role_capabilities_updated.php',69],['mod/survey/classes/event','response_submitted.php',71],['lib/classes/event','badge_archived.php',65],['mod/workshop/classes/event','assessment_reevaluated.php',85],['report/outline/classes/event','report_viewed.php',83],['lib/classes/event','mnet_access_control_updated.php',66],['mod/assign/classes/event','base.php',90],['mod/lesson/classes/event','essay_assessed.php',87],['lib/filebrowser','file_info.php',226],['mod/book/tool/print/classes/event','book_printed.php',85],['lib/classes/event','grouping_deleted.php',81],['lib/classes/event','course_viewed.php',84],['mod/forum/classes/event','user_report_viewed.php',74],['mod/quiz/classes/event','attempt_summary_viewed.php',75],['lib/classes/event','webservice_service_user_added.php',68],['mod/forum/classes/event','discussion_unpinned.php',64],['lib/classes/event','grouping_group_unassigned.php',57],['mod/chat/classes/event','message_sent.php',68],['lib/classes/event','role_assigned.php',75],['mod/glossary/classes/event','entry_viewed.php',67],['mod/data/classes/event','record_created.php',75],['lib/classes/event','role_deleted.php',73],['mod/wiki/classes/event','page_version_viewed.php',84],['admin/tool/log/store/standard/tests/fixtures','event.php',44],['admin/tool/monitor/classes/event','rule_created.php',68],['lib/classes/event','competency_user_competency_plan_viewed.php',90],['mod/data/classes/event','comment_deleted.php',37],['mod/forum/classes/event','course_module_viewed.php',50],['mod/workshop/classes/event','submission_updated.php',72],['mod/choice/classes/event','report_viewed.php',72],['mod/lesson/classes/event','group_override_deleted.php',73],['mod/wiki/classes/event','page_map_viewed.php',83],['admin/tool/log/store/legacy/tests/fixtures','event.php',44],['mod/lesson/classes/event','question_answered.php',63],['mod/choice/classes/event','report_downloaded.php',73],['lib/classes/event','competency_user_evidence_created.php',82],['lib/classes/event','course_module_completion_updated.php',73],['lib/classes/event','note_updated.php',75],['lib/classes/event','note_created.php',75],['lib/classes/event','competency_framework_created.php',81],['lib/classes/event','course_resources_list_viewed.php',69],['lib/filebrowser','file_info_stored.php',156],['mod/forum/classes/event','subscribers_viewed.php',74],['mod/book/tool/exportimscp/classes/event','book_exported.php',85],['lib','outputcomponents.php',326],['lib','outputcomponents.php',2756],['lib/classes/event','user_enrolment_deleted.php',73],['lib/classes/event','webservice_service_updated.php',68],['mod/lesson/classes/event','group_override_created.php',74],['mod/scorm/classes/event','attempt_deleted.php',71],['lib/classes/event','competency_user_competency_review_request_cancelled.php',81],['lib/classes/event','webservice_service_created.php',74],['mod/wiki/classes/event','page_version_restored.php',83],['mod/forum/classes/event','discussion_deleted.php',75],['lib/classes/event','competency_framework_updated.php',82],['lib/classes/event','blog_comment_created.php',38],['mod/lesson/classes/event','lesson_restarted.php',57],['mod/wiki/classes/event','page_updated.php',83],['mod/assign/submission/comments/classes/event','comment_created.php',37],['lib','modinfolib.php',1230],['lib/classes/event','course_module_updated.php',76],['report/questioninstances/classes/event','report_viewed.php',83],['lib/classes/event','message_contact_blocked.php',57],['lib/classes/event','competency_template_updated.php',84],['lib/classes/event','badge_disabled.php',65],['lib/classes/event','badge_enabled.php',65],['mod/quiz/classes/event','edit_page_viewed.php',72],['mod/scorm/classes/event','tracks_viewed.php',73],['mod/wiki/classes/event','page_diff_viewed.php',85],['lib/classes/event','grouping_created.php',74],['lib/classes/event','group_updated.php',74],['mod/book/classes/event','chapter_updated.php',88],['lib/classes/event','user_loggedin.php',73],['mod/forum/classes/event','subscription_created.php',74],['mod/quiz/classes/event','group_override_updated.php',73],['lib/classes/event','competency_plan_created.php',81],['mod/glossary/classes/event','entry_disapproved.php',65],['lib/classes/event','message_viewed.php',63],['lib/classes/event','comment_created.php',77],['lib/classes/event','competency_evidence_created.php',116],['lib/classes/event','comment_deleted.php',77],['lib/classes/event','competency_user_competency_review_requested.php',81],['mod/quiz/classes/event','attempt_abandoned.php',81],['mod/scorm/classes/event','user_report_viewed.php',71],['mod/quiz/classes/event','attempt_becameoverdue.php',84],['mod/quiz/classes/event','group_override_created.php',74],['mod/book/tool/print/classes/event','chapter_printed.php',88],['mod/data/classes/event','record_deleted.php',75],['lib/classes/event','competency_user_competency_viewed.php',90],['mod/lesson/classes/event','question_viewed.php',63],['lib/classes/event','user_profile_viewed.php',76],['mod/lesson/classes/event','user_override_deleted.php',72],['lib/classes/event','cohort_member_removed.php',69],['mod/lesson/classes/event','lesson_started.php',57],['mod/lesson/classes/event','page_updated.php',82],['mod/workshop/classes/event','submission_viewed.php',72],['mod/glossary/classes/event','entry_created.php',71],['mod/wiki/classes/event','page_history_viewed.php',77],['lib/classes/event','competency_plan_review_request_cancelled.php',84],['mod/quiz/classes/event','attempt_viewed.php',73],['mod/data/classes/event','field_updated.php',76],['lib/classes/event','grouping_updated.php',74],['lib/classes/event','question_category_created.php',66],['lib/classes/event','user_login_failed.php',76],['mod/scorm/classes/event','report_viewed.php',72],['mod/chat/classes/event','sessions_viewed.php',74],['mod/quiz/classes/event','user_override_deleted.php',72],['mod/quiz/classes/event','attempt_submitted.php',81],['mod/lesson/classes/event','group_override_updated.php',73],['mod/workshop/classes/event','submission_created.php',72],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',92],['lib/classes/event','competency_updated.php',79],['mod/lesson/classes/event','page_moved.php',65],['blocks/rss_client/classes/output','channel_image.php',101],['badges/lib','backpacklib.php',116],['lib/classes/event','course_completed.php',91],['lib/classes/event','competency_created.php',79],['mod/lesson/classes/event','highscores_viewed.php',60],['lib/classes/event','message_contact_unblocked.php',57],['lib','accesslib.php',6143],['lib','accesslib.php',6200],['lib','accesslib.php',6451],['lib','accesslib.php',6638],['lib','accesslib.php',6878],['lib','accesslib.php',7098],['lib','accesslib.php',7341],['mod/wiki/classes/event','comment_deleted.php',38],['lib/classes/event','user_enrolment_created.php',72],['lib/classes/event','course_module_created.php',105],['lib/classes/event','webservice_service_user_removed.php',68],['report/log/classes/event','report_viewed.php',85],['mod/assign/submission/file/classes/event','assessable_uploaded.php',94],['lib/classes/event','group_member_added.php',87],['mod/forum/classes/event','discussion_viewed.php',69],['mod/workshop/classes/event','submission_reassessed.php',86],['mod/workshop/classes/event','assessment_evaluations_reset.php',84],['mod/forum/classes/event','discussion_moved.php',75],['mod/lesson/classes/event','lesson_resumed.php',57],['lib/classes/event','comments_viewed.php',69],['mod/data/classes/event','template_viewed.php',74],['mod/wiki/classes/event','page_deleted.php',83],['mod/quiz/classes/event','report_viewed.php',75],['mod/scorm/classes/event','sco_launched.php',73],['mod/glossary/classes/event','entry_updated.php',71],['mod/lesson/classes/event','user_override_created.php',72],['mod/glossary/classes/event','category_updated.php',65],['lib/classes/event','course_updated.php',76],['mod/feedback/classes/event','response_submitted.php',102],['mod/book/classes/event','chapter_deleted.php',88],['mod/wiki/classes/event','comment_created.php',38],['report/completion/classes/event','report_viewed.php',67],['lib/classes/event','recent_activity_viewed.php',76],['mod/quiz/classes/event','question_manually_graded.php',74],['lib/classes/event','user_enrolment_updated.php',72],['lib/classes/event','competency_comment_created.php',49],['report/completion/classes/event','user_report_viewed.php',77],['report/stats/classes/event','report_viewed.php',83],['lib/classes/event','calendar_event_created.php',77],['lib/classes/event','course_section_updated.php',75],['lib/classes/event','message_sent.php',91],['lib/classes/event','calendar_subscription_deleted.php',75],['lib/classes/event','course_category_updated.php',60],['lib/classes/event','user_password_updated.php',95],['mod/forum/classes/event','subscription_deleted.php',74],['lib/classes/event','user_loggedinas.php',85],['lib/classes/event','competency_template_created.php',81],['lib/classes/event','user_created.php',66],['report/loglive/classes/event','report_viewed.php',75],['mod/book/classes/event','chapter_viewed.php',88],['lib/classes/event','badge_awarded.php',72],['lib/classes/event','calendar_subscription_created.php',76],['lib/classes/event','enrol_instance_created.php',78],['lib/classes/event','user_list_viewed.php',74],['mod/forum/classes/event','post_deleted.php',76],['mod/quiz/classes/event','group_override_deleted.php',73],['mod/assign/submission/comments/classes/event','comment_deleted.php',37],['lib/classes/event','badge_created.php',65],['lib/classes/event','base.php',639],['lib/classes/event','competency_framework_viewed.php',78],['mod/glossary/classes/event','course_module_viewed.php',53],['lib/classes/event','group_member_removed.php',78],['lib/classes/event','grade_report_viewed.php',72],['lib/classes/event','calendar_event_updated.php',77],['lib/classes/event','user_updated.php',66],['mod/lesson/classes/event','page_created.php',63],['enrol','locallib.php',1412],['lib/classes/event','blog_comment_deleted.php',38],['backup/util/ui','restore_ui_components.php',98],['lib/classes/event','course_completion_updated.php',65],['lib/classes/event','competency_plan_review_started.php',84],['lib/classes/event','course_user_report_viewed.php',75],['mod/folder/classes/event','all_files_downloaded.php',69],['mod/workshop/classes/event','assessments_reset.php',83],['mod/glossary/classes/event','comment_deleted.php',37],['mod/data/classes/event','template_updated.php',85],['admin/tool/log/store/legacy/classes/event','legacy_logged.php',43],['lib/filebrowser','file_info_context_course.php',505],['lib/classes/event','notes_viewed.php',71],['lib/classes/event','competency_plan_viewed.php',81],['mod/data/classes/event','record_updated.php',75],['lib/classes/event','competency_plan_unapproved.php',84],['mod/lesson/classes/event','content_page_viewed.php',57],['mod/quiz/classes/event','attempt_started.php',80],['lib/classes/event','competency_user_competency_rated.php',91],['mod/forum/classes/event','post_updated.php',76],['lib/classes/event','competency_plan_review_requested.php',84],['lib/classes/event','user_graded.php',115],['mod/forum/classes/event','post_created.php',76],['mod/scorm/classes/event','cmielement_submitted.php',67],['lib/classes/event','enrol_instance_updated.php',79],['admin/tool/capability/classes/event','report_viewed.php',74],['mod/data/classes/event','field_created.php',77],['mod/folder/classes/event','folder_updated.php',66],['lib/classes/event','badge_updated.php',65],['lib/tests/fixtures','event_fixtures.php',47],['lib/tests/fixtures','event_fixtures.php',273],['mod/survey/classes/event','report_viewed.php',73],['mod/quiz/classes/event','attempt_deleted.php',72],['mod/glossary/classes/event','entry_approved.php',65],['mod/wiki/classes/event','comments_viewed.php',68],['mod/wiki/classes/event','page_viewed.php',95],['mod/forum/classes/event','readtracking_disabled.php',73],['admin/tool/langimport/classes/event','langpack_imported.php',89],['lib/classes/event','competency_plan_review_stopped.php',84],['admin/tool/langimport/classes/event','langpack_updated.php',89],['lib/tests','customcontext_test.php',33],['lib/tests','customcontext_test.php',57],['lib/tests','customcontext_test.php',81],['lib/classes/event','competency_user_competency_viewed_in_plan.php',94],['lib/classes/event','competency_user_competency_viewed_in_course.php',93],['mod/glossary/classes/event','category_created.php',65],['report/stats/classes/event','user_report_viewed.php',76],['lib/classes/event','dashboards_reset.php',68],['lib/classes/event','calendar_subscription_updated.php',76],['lib/classes/event','cohort_updated.php',67],['admin/tool/monitor/classes/event','rule_updated.php',68],['mod/lesson/classes/event','page_deleted.php',63],['lib/classes/event','mnet_access_control_created.php',66],['mod/forum/classes/event','discussion_created.php',74],['lib/classes/event','blog_entries_viewed.php',80],['mod/quiz/classes/event','attempt_preview_started.php',73],['lib/classes/event','competency_user_evidence_updated.php',82],['lib/classes/event','course_restored.php',76],['mod/data/classes/event','comment_created.php',37],['lib/classes/event','group_created.php',74],['lib/classes/event','badge_criteria_deleted.php',70],['lib/classes/event','competency_plan_completed.php',84],['mod/lesson/classes/event','user_override_updated.php',73],['lib/classes/event','role_allow_override_updated.php',65],['mod/forum/classes/event','discussion_subscription_deleted.php',75],['lib/classes/event','cohort_deleted.php',67],['lib/classes/event','badge_criteria_created.php',70],['lib/classes/event','blog_entry_created.php',94],['mod/scorm/classes/event','interactions_viewed.php',72],['mod/workshop/classes/event','submission_assessed.php',85],['lib/classes/event','badge_duplicated.php',65],['lib/classes/event','course_category_created.php',57],['lib/classes/event','cohort_created.php',67],['lib/classes/event','competency_plan_approved.php',84],['mod/choice/classes/event','answer_deleted.php',65],['lib/classes/event','competency_user_competency_review_started.php',81],['lib/classes/event','course_reset_ended.php',62],['mod/quiz/classes/event','user_override_created.php',72],['mod/forum/classes/event','course_searched.php',75],['lib/classes/event','message_contact_removed.php',57],['admin/tool/monitor/classes/event','rule_deleted.php',68],['lib/classes/event','competency_user_competency_review_stopped.php',81],['lib/classes/event','course_module_viewed.php',71]], 259],
'login_user_parameters': ['login_user_parameters', 'Returns description of method parameters ', [['mod/chat/classes','external.php',43]], 1],
'get_chats_by_courses': ['get_chats_by_courses', 'Returns a list of chats in a provided list of courses, if no list is provided all chats that the user can view will be returned. ', [['mod/chat/classes','external.php',510]], 4],
'chat_view': ['chat_view', 'Mark the activity completed (if required) and trigger the course_module_viewed event. ', [['mod/chat','lib.php',1331]], 2],
'external_format_string': ['external_format_string', 'Format the string to be returned properly as requested by the either the web service server, either by an internally call. The caller can change the format (raw) with the external_settings singleton All web service servers must set this singleton when parsing the $_GET and $_POST. ', [['lib','externallib.php',850]], 48],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'get_chat_users': ['get_chat_users', 'Get the list of users in the given chat session. ', [['mod/chat/classes','external.php',147]], 1],
'validate_courses': ['validate_courses', 'Validate a list of courses, returning the complete course objects for valid courses. ', [['lib','externallib.php',1096]], 16],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3249],['mod/assign','locallib.php',3915]], 546],
'message': ['message', 'Send XMPP Message ', [['lib/jabber/XMPP','XMPP.php',156],['mod/lesson','renderer.php',145]], 31],
'chat_delete_old_users': ['chat_delete_old_users', 'Delete the old and in the way ', [['mod/chat','lib.php',568]], 11],
'chat_get_users': ['chat_get_users', '', [['mod/chat','lib.php',452]], 8],
'chat_send_chatmessage': ['chat_send_chatmessage', 'Send a message on the chat. ', [['mod/chat','lib.php',649]], 14],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'login_user_returns': ['login_user_returns', 'Returns description of method result value ', [['mod/chat/classes','external.php',118]], 4],
'groups_get_activity_group': ['groups_get_activity_group', 'Returns group active in activity, changes the group by default if \'group\' page param present ', [['lib','grouplib.php',814]], 97],
'chat_get_latest_message': ['chat_get_latest_message', '', [['mod/chat','lib.php',485]], 4],
'id': ['id', 'Convenience function that creates an HTMLPurifier_ConfigSchema_Interchange_Id object based on a string Id. ', [['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',199]], 58],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'clean_text': ['clean_text', 'Cleans raw text removing nasties. ', [['lib','weblib.php',1637]], 44],
'get_chats_by_courses_returns': ['get_chats_by_courses_returns', 'Describes the get_chats_by_courses return value. ', [['mod/chat/classes','external.php',578]], 4],
'groups_group_visible': ['groups_group_visible', 'Determine if a given group is visible to user or not in a given context. ', [['lib','grouplib.php',896]], 51],
'validate_parameters': ['validate_parameters', 'Validates submitted function parameters, if anything is incorrect invalid_parameter_exception is thrown. This is a simple recursive method which is intended to be called from each implementation method of external API. ', [['lib','externallib.php',279]], 340],
'validate_context': ['validate_context', 'Makes sure user may execute functions in this context. ', [['lib','externallib.php',448]], 256],
'get_all_instances_in_courses': ['get_all_instances_in_courses', 'Returns an array of all the active instances of a particular module in given courses, sorted in the order they are defined ', [['lib','datalib.php',1382]], 23],
'groups_get_activity_groupmode': ['groups_get_activity_groupmode', 'Returns effective groupmode used in activity, course setting overrides activity setting if groupmodeforce enabled. ', [['lib','grouplib.php',468]], 136],
'method': ['method', 'Calls the callback function. ', [['lib','moodlelib.php',9430]], 139],
'view_chat': ['view_chat', 'Trigger the course module viewed event and update the module completion status. ', [['mod/chat/classes','external.php',443]], 4],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'get_chats_by_courses_parameters': ['get_chats_by_courses_parameters', 'Describes the parameters for get_chats_by_courses. ', [['mod/chat/classes','external.php',494]], 1],
'get_course_and_cm_from_instance': ['get_course_and_cm_from_instance', 'Efficiently retrieves the $course (stdclass) and $cm (cm_info) objects, given an instance id or record and module name. ', [['lib','modinfolib.php',2099]], 45],
'time': ['time', '', [], 1959],
'defined': ['defined', '', [], 4731],
'array_keys': ['array_keys', '', [], 1256]};
CLASS_DATA={
'external_multiple_structure': ['external_multiple_structure', 'Bulk array description class. ', [['lib','externallib.php',609]], 350],
'external_files': ['external_files', 'External structure representing a set of files. ', [['lib','externallib.php',1167]], 21],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'external_format_value': ['external_format_value', 'A pre-filled external_value class for text format. ', [['lib','externallib.php',799]], 70],
'external_single_structure': ['external_single_structure', 'Associative array description class ', [['lib','externallib.php',580]], 460],
'external_api': ['external_api', 'Base class for external api methods. ', [['lib','externallib.php',47]], 808],
'external_value': ['external_value', 'Scalar value description class ', [['lib','externallib.php',546]], 2505],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'external_util': ['external_util', 'Utility functions for the external API. ', [['lib','externallib.php',1086]], 38],
'external_function_parameters': ['external_function_parameters', 'Description of top level - PHP function parameters. ', [['lib','externallib.php',638]], 344],
'user_picture': ['user_picture', 'Data structure representing a user picture. ', [['lib','outputcomponents.php',142]], 165],
'external_warnings': ['external_warnings', 'Standard Moodle web service warnings ', [['lib','externallib.php',768]], 150],
'mod_chat_external': ['mod_chat_external', 'Chat external functions ', [['mod/chat/classes','external.php',32]], 27]};
CONST_DATA={
'PARAM_URL': ['PARAM_URL', '', [['lib','moodlelib.php',239]], 165],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'PARAM_NOTAGS': ['PARAM_NOTAGS', '', [['lib','moodlelib.php',172]], 217],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 921],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 802],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812],
'PARAM_ALPHA': ['PARAM_ALPHA', '', [['lib','moodlelib.php',77]], 398],
'VALUE_DEFAULT': ['VALUE_DEFAULT', '', [['lib','moodlelib.php',342]], 304],
'FORMAT_MOODLE': ['FORMAT_MOODLE', '', [['lib','weblib.php',42]], 506],
'VALUE_OPTIONAL': ['VALUE_OPTIONAL', '', [['lib','moodlelib.php',337]], 761],
'PARAM_ALPHANUM': ['PARAM_ALPHANUM', '', [['lib','moodlelib.php',88]], 112],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
