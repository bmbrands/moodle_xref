<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/wiki/lib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/wiki';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/wiki/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Library of functions and constants for module wiki</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * It contains the great majority of functions defined by Moodle</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * that are mandatory to develop a module.</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> *</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @package mod_wiki</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * @copyright 2009 Marc Alier, Jordi Piguillem marc.alier@upc.edu</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * @copyright 2009 Universitat Politecnica de Catalunya http://www.upc.edu</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> *</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * @author Jordi Piguillem</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * @author Marc Alier</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @author David Jimenez</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @author Josep Arus</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @author Kenneth Riba</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> *</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> */</span>
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">/**</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * Given an object containing all the necessary data,</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * (defined by the form in mod.html) this function</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> * will create a new instance and return the id number</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> * of the new instance.</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> *</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> * @param object $instance An object from the form in mod.html</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> * @return int The id of the newly inserted wiki record</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> **/</span>
<a name="l46"><span class="linenum">  46</span></a>  function <a class="function" onClick="logFunction('wiki_add_instance')" href="../../_functions/wiki_add_instance.html" onMouseOver="funcPopup(event,'wiki_add_instance')">wiki_add_instance</a>(<a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>) {
<a name="l47"><span class="linenum">  47</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>      <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">    # May have to add extra stuff in here #</span>
<a name="l51"><span class="linenum">  51</span></a>      if (empty(<a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('forceformat')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/forceformat.html">forceformat</a>)) {
<a name="l52"><span class="linenum">  52</span></a>          <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('forceformat')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/forceformat.html">forceformat</a> = 0;
<a name="l53"><span class="linenum">  53</span></a>      }
<a name="l54"><span class="linenum">  54</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('wiki', <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>);
<a name="l55"><span class="linenum">  55</span></a>  }
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">/**</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * Given an object containing all the necessary data,</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> * (defined by the form in mod.html) this function</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment"> * will update an existing instance with new data.</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment"> *</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment"> * @param object $instance An object from the form in mod.html</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment"> * @return boolean Success/Fail</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment"> **/</span>
<a name="l65"><span class="linenum">  65</span></a>  function <a class="function" onClick="logFunction('wiki_update_instance')" href="../../_functions/wiki_update_instance.html" onMouseOver="funcPopup(event,'wiki_update_instance')">wiki_update_instance</a>(<a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>) {
<a name="l66"><span class="linenum">  66</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l67"><span class="linenum">  67</span></a>  
<a name="l68"><span class="linenum">  68</span></a>      <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l69"><span class="linenum">  69</span></a>      <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('id')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('instance')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l70"><span class="linenum">  70</span></a>      if (empty(<a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('forceformat')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/forceformat.html">forceformat</a>)) {
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('forceformat')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/forceformat.html">forceformat</a> = 0;
<a name="l72"><span class="linenum">  72</span></a>      }
<a name="l73"><span class="linenum">  73</span></a>  
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">    # May have to add extra stuff in here #</span>
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('wiki', <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>);
<a name="l77"><span class="linenum">  77</span></a>  }
<a name="l78"><span class="linenum">  78</span></a>  
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">/**</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment"> * Given an ID of an instance of this module,</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment"> * this function will permanently delete the instance</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment"> * and any data that depends on it.</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment"> *</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment"> * @param int $id Id of the module instance</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment"> * @return boolean Success/Failure</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment"> **/</span>
<a name="l87"><span class="linenum">  87</span></a>  function <a class="function" onClick="logFunction('wiki_delete_instance')" href="../../_functions/wiki_delete_instance.html" onMouseOver="funcPopup(event,'wiki_delete_instance')">wiki_delete_instance</a>(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l88"><span class="linenum">  88</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l89"><span class="linenum">  89</span></a>  
<a name="l90"><span class="linenum">  90</span></a>      if (!<a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('wiki', array('id' =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>))) {
<a name="l91"><span class="linenum">  91</span></a>          return false;
<a name="l92"><span class="linenum">  92</span></a>      }
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = true;
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">    # Get subwiki information #</span>
<a name="l97"><span class="linenum">  97</span></a>      <a class="var it32132" onMouseOver="hilite(32132)" onMouseOut="lolite()" onClick="logVariable('subwikis')" href="../../_variables/subwikis.html">$subwikis</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('wiki_subwikis', array('wikiid' =&gt; <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('id')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>      foreach (<a class="var it32132" onMouseOver="hilite(32132)" onMouseOut="lolite()" onClick="logVariable('subwikis')" href="../../_variables/subwikis.html">$subwikis</a> as <a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>) {
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">        # Get existing links, and delete them #</span>
<a name="l101"><span class="linenum"> 101</span></a>          if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('wiki_links', array('subwikiid' =&gt; <a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>-&gt;<a onClick="logVariable('id')" class="var it39900" onMouseOver="hilite(39900)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>)) {
<a name="l102"><span class="linenum"> 102</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l103"><span class="linenum"> 103</span></a>          }
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">        # Get existing pages #</span>
<a name="l106"><span class="linenum"> 106</span></a>          if (<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('wiki_pages', array('subwikiid' =&gt; <a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>-&gt;<a onClick="logVariable('id')" class="var it39900" onMouseOver="hilite(39900)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l107"><span class="linenum"> 107</span></a>              foreach (<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">                # Get locks, and delete them #</span>
<a name="l109"><span class="linenum"> 109</span></a>                  if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('wiki_locks', array('pageid' =&gt; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>)) {
<a name="l110"><span class="linenum"> 110</span></a>                      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l111"><span class="linenum"> 111</span></a>                  }
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">                # Get versions, and delete them #</span>
<a name="l114"><span class="linenum"> 114</span></a>                  if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('wiki_versions', array('pageid' =&gt; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>)) {
<a name="l115"><span class="linenum"> 115</span></a>                      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l116"><span class="linenum"> 116</span></a>                  }
<a name="l117"><span class="linenum"> 117</span></a>              }
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">            # Delete pages #</span>
<a name="l120"><span class="linenum"> 120</span></a>              if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('wiki_pages', array('subwikiid' =&gt; <a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>-&gt;<a onClick="logVariable('id')" class="var it39900" onMouseOver="hilite(39900)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>)) {
<a name="l121"><span class="linenum"> 121</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l122"><span class="linenum"> 122</span></a>              }
<a name="l123"><span class="linenum"> 123</span></a>          }
<a name="l124"><span class="linenum"> 124</span></a>  
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">        # Get existing synonyms, and delete them #</span>
<a name="l126"><span class="linenum"> 126</span></a>          if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('wiki_synonyms', array('subwikiid' =&gt; <a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>-&gt;<a onClick="logVariable('id')" class="var it39900" onMouseOver="hilite(39900)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>)) {
<a name="l127"><span class="linenum"> 127</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l128"><span class="linenum"> 128</span></a>          }
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">        # Delete any subwikis #</span>
<a name="l131"><span class="linenum"> 131</span></a>          if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('wiki_subwikis', array('id' =&gt; <a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>-&gt;<a onClick="logVariable('id')" class="var it39900" onMouseOver="hilite(39900)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>)) {
<a name="l132"><span class="linenum"> 132</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l133"><span class="linenum"> 133</span></a>          }
<a name="l134"><span class="linenum"> 134</span></a>      }
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">    # Delete any dependent records here #</span>
<a name="l137"><span class="linenum"> 137</span></a>      if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('wiki', array('id' =&gt; <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('id')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l138"><span class="linenum"> 138</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l139"><span class="linenum"> 139</span></a>      }
<a name="l140"><span class="linenum"> 140</span></a>  
<a name="l141"><span class="linenum"> 141</span></a>      return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l142"><span class="linenum"> 142</span></a>  }
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>  function <a class="function" onClick="logFunction('wiki_reset_userdata')" href="../../_functions/wiki_reset_userdata.html" onMouseOver="funcPopup(event,'wiki_reset_userdata')">wiki_reset_userdata</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l145"><span class="linenum"> 145</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>,<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l146"><span class="linenum"> 146</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/wiki/pagelib.php.html">/mod/wiki/pagelib.php</a>');
<a name="l147"><span class="linenum"> 147</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../tag/lib.php.html">/tag/lib.php</a>');
<a name="l148"><span class="linenum"> 148</span></a>  
<a name="l149"><span class="linenum"> 149</span></a>      <a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'wiki');
<a name="l150"><span class="linenum"> 150</span></a>      <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = array();
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">    //get the wiki(s) in this course.</span>
<a name="l153"><span class="linenum"> 153</span></a>      if (!<a class="var it32133" onMouseOver="hilite(32133)" onMouseOut="lolite()" onClick="logVariable('wikis')" href="../../_variables/wikis.html">$wikis</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('wiki', array('course' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>))) {
<a name="l154"><span class="linenum"> 154</span></a>          return false;
<a name="l155"><span class="linenum"> 155</span></a>      }
<a name="l156"><span class="linenum"> 156</span></a>      <a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../../_variables/errors.html">$errors</a> = false;
<a name="l157"><span class="linenum"> 157</span></a>      foreach (<a class="var it32133" onMouseOver="hilite(32133)" onMouseOut="lolite()" onClick="logVariable('wikis')" href="../../_variables/wikis.html">$wikis</a> as <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>) {
<a name="l158"><span class="linenum"> 158</span></a>  
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">        // remove all comments</span>
<a name="l160"><span class="linenum"> 160</span></a>          if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_wiki_comments')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_wiki_comments.html">reset_wiki_comments</a>)) {
<a name="l161"><span class="linenum"> 161</span></a>              if (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('wiki', <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('id')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l162"><span class="linenum"> 162</span></a>                  continue;
<a name="l163"><span class="linenum"> 163</span></a>              }
<a name="l164"><span class="linenum"> 164</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l165"><span class="linenum"> 165</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('comments', &quot;contextid = ? AND commentarea='wiki_page'&quot;, array(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l166"><span class="linenum"> 166</span></a>              <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallcomments'), 'error'=&gt;false);
<a name="l167"><span class="linenum"> 167</span></a>          }
<a name="l168"><span class="linenum"> 168</span></a>  
<a name="l169"><span class="linenum"> 169</span></a>          if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_wiki_tags')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_wiki_tags.html">reset_wiki_tags</a>)) {
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">            # Get subwiki information #</span>
<a name="l171"><span class="linenum"> 171</span></a>              <a class="var it32132" onMouseOver="hilite(32132)" onMouseOut="lolite()" onClick="logVariable('subwikis')" href="../../_variables/subwikis.html">$subwikis</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('wiki_subwikis', array('wikiid' =&gt; <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('id')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>              foreach (<a class="var it32132" onMouseOver="hilite(32132)" onMouseOut="lolite()" onClick="logVariable('subwikis')" href="../../_variables/subwikis.html">$subwikis</a> as <a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>) {
<a name="l174"><span class="linenum"> 174</span></a>                  if (<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('wiki_pages', array('subwikiid' =&gt; <a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>-&gt;<a onClick="logVariable('id')" class="var it39900" onMouseOver="hilite(39900)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l175"><span class="linenum"> 175</span></a>                      foreach (<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l176"><span class="linenum"> 176</span></a>                          <a class="var it2944" onMouseOver="hilite(2944)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> = <a class="function" onClick="logFunction('tag_get_tags_array')" href="../../_functions/tag_get_tags_array.html" onMouseOver="funcPopup(event,'tag_get_tags_array')">tag_get_tags_array</a>('wiki_pages', <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l177"><span class="linenum"> 177</span></a>                          foreach (<a class="var it2944" onMouseOver="hilite(2944)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> as <a class="var it4261" onMouseOver="hilite(4261)" onMouseOut="lolite()" onClick="logVariable('tagid')" href="../../_variables/tagid.html">$tagid</a> =&gt; <a class="var it4262" onMouseOver="hilite(4262)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>) {
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">                            // Delete the related tag_instances related to the wiki page.</span>
<a name="l179"><span class="linenum"> 179</span></a>                              <a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../../_variables/errors.html">$errors</a> = <a class="function" onClick="logFunction('tag_delete_instance')" href="../../_functions/tag_delete_instance.html" onMouseOver="funcPopup(event,'tag_delete_instance')">tag_delete_instance</a>('wiki_pages', <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it4261" onMouseOver="hilite(4261)" onMouseOut="lolite()" onClick="logVariable('tagid')" href="../../_variables/tagid.html">$tagid</a>);
<a name="l180"><span class="linenum"> 180</span></a>                              <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component' =&gt; <a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('tagsdeleted', 'wiki'), 'error' =&gt; <a class="var it1210" onMouseOver="hilite(1210)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../../_variables/errors.html">$errors</a>);
<a name="l181"><span class="linenum"> 181</span></a>                          }
<a name="l182"><span class="linenum"> 182</span></a>                      }
<a name="l183"><span class="linenum"> 183</span></a>                  }
<a name="l184"><span class="linenum"> 184</span></a>              }
<a name="l185"><span class="linenum"> 185</span></a>          }
<a name="l186"><span class="linenum"> 186</span></a>      }
<a name="l187"><span class="linenum"> 187</span></a>      return <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>;
<a name="l188"><span class="linenum"> 188</span></a>  }
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>  
<a name="l191"><span class="linenum"> 191</span></a>  function <a class="function" onClick="logFunction('wiki_reset_course_form_definition')" href="../../_functions/wiki_reset_course_form_definition.html" onMouseOver="funcPopup(event,'wiki_reset_course_form_definition')">wiki_reset_course_form_definition</a>(&amp;<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l192"><span class="linenum"> 192</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'wikiheader', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'wiki'));
<a name="l193"><span class="linenum"> 193</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('advcheckbox', 'reset_wiki_tags', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('removeallwikitags', 'wiki'));
<a name="l194"><span class="linenum"> 194</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('advcheckbox', 'reset_wiki_comments', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallcomments'));
<a name="l195"><span class="linenum"> 195</span></a>  }
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">/**</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment"> * Indicates API features that the wiki supports.</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment"> *</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment"> * @uses FEATURE_GROUPS</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment"> * @uses FEATURE_GROUPINGS</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment"> * @uses FEATURE_MOD_INTRO</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment"> * @uses FEATURE_COMPLETION_TRACKS_VIEWS</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment"> * @uses FEATURE_COMPLETION_HAS_RULES</span>
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment"> * @uses FEATURE_GRADE_HAS_GRADE</span>
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment"> * @uses FEATURE_GRADE_OUTCOMES</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment"> * @param string $feature</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment"> * @return mixed True if yes (some features may use other values)</span>
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment"> */</span>
<a name="l210"><span class="linenum"> 210</span></a>  function <a class="function" onClick="logFunction('wiki_supports')" href="../../_functions/wiki_supports.html" onMouseOver="funcPopup(event,'wiki_supports')">wiki_supports</a>(<a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l211"><span class="linenum"> 211</span></a>      switch (<a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l212"><span class="linenum"> 212</span></a>      case <a class="constant" onClick="logConstant('FEATURE_GROUPS')" href="../../_constants/FEATURE_GROUPS.html" onMouseOver="constPopup(event,'FEATURE_GROUPS')">FEATURE_GROUPS</a>:
<a name="l213"><span class="linenum"> 213</span></a>          return true;
<a name="l214"><span class="linenum"> 214</span></a>      case <a class="constant" onClick="logConstant('FEATURE_GROUPINGS')" href="../../_constants/FEATURE_GROUPINGS.html" onMouseOver="constPopup(event,'FEATURE_GROUPINGS')">FEATURE_GROUPINGS</a>:
<a name="l215"><span class="linenum"> 215</span></a>          return true;
<a name="l216"><span class="linenum"> 216</span></a>      case <a class="constant" onClick="logConstant('FEATURE_MOD_INTRO')" href="../../_constants/FEATURE_MOD_INTRO.html" onMouseOver="constPopup(event,'FEATURE_MOD_INTRO')">FEATURE_MOD_INTRO</a>:
<a name="l217"><span class="linenum"> 217</span></a>          return true;
<a name="l218"><span class="linenum"> 218</span></a>      case <a class="constant" onClick="logConstant('FEATURE_COMPLETION_TRACKS_VIEWS')" href="../../_constants/FEATURE_COMPLETION_TRACKS_VIEWS.html" onMouseOver="constPopup(event,'FEATURE_COMPLETION_TRACKS_VIEWS')">FEATURE_COMPLETION_TRACKS_VIEWS</a>:
<a name="l219"><span class="linenum"> 219</span></a>          return true;
<a name="l220"><span class="linenum"> 220</span></a>      case <a class="constant" onClick="logConstant('FEATURE_GRADE_HAS_GRADE')" href="../../_constants/FEATURE_GRADE_HAS_GRADE.html" onMouseOver="constPopup(event,'FEATURE_GRADE_HAS_GRADE')">FEATURE_GRADE_HAS_GRADE</a>:
<a name="l221"><span class="linenum"> 221</span></a>          return false;
<a name="l222"><span class="linenum"> 222</span></a>      case <a class="constant" onClick="logConstant('FEATURE_GRADE_OUTCOMES')" href="../../_constants/FEATURE_GRADE_OUTCOMES.html" onMouseOver="constPopup(event,'FEATURE_GRADE_OUTCOMES')">FEATURE_GRADE_OUTCOMES</a>:
<a name="l223"><span class="linenum"> 223</span></a>          return false;
<a name="l224"><span class="linenum"> 224</span></a>      case <a class="constant" onClick="logConstant('FEATURE_RATE')" href="../../_constants/FEATURE_RATE.html" onMouseOver="constPopup(event,'FEATURE_RATE')">FEATURE_RATE</a>:
<a name="l225"><span class="linenum"> 225</span></a>          return false;
<a name="l226"><span class="linenum"> 226</span></a>      case <a class="constant" onClick="logConstant('FEATURE_BACKUP_MOODLE2')" href="../../_constants/FEATURE_BACKUP_MOODLE2.html" onMouseOver="constPopup(event,'FEATURE_BACKUP_MOODLE2')">FEATURE_BACKUP_MOODLE2</a>:
<a name="l227"><span class="linenum"> 227</span></a>          return true;
<a name="l228"><span class="linenum"> 228</span></a>      case <a class="constant" onClick="logConstant('FEATURE_SHOW_DESCRIPTION')" href="../../_constants/FEATURE_SHOW_DESCRIPTION.html" onMouseOver="constPopup(event,'FEATURE_SHOW_DESCRIPTION')">FEATURE_SHOW_DESCRIPTION</a>:
<a name="l229"><span class="linenum"> 229</span></a>          return true;
<a name="l230"><span class="linenum"> 230</span></a>  
<a name="l231"><span class="linenum"> 231</span></a>      default:
<a name="l232"><span class="linenum"> 232</span></a>          return null;
<a name="l233"><span class="linenum"> 233</span></a>      }
<a name="l234"><span class="linenum"> 234</span></a>  }
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">/**</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment"> * Given a course and a time, this module should find recent activity</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment"> * that has occurred in wiki activities and print it out.</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment"> * Return true if there was output, or false is there was none.</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment"> *</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment"> * @global $CFG</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment"> * @global $DB</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment"> * @uses CONTEXT_MODULE</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment"> * @uses VISIBLEGROUPS</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment"> * @param object $course</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment"> * @param bool $viewfullnames capability</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment"> * @param int $timestart</span>
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment"> * @return boolean</span>
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment"> **/</span>
<a name="l250"><span class="linenum"> 250</span></a>  function <a class="function" onClick="logFunction('wiki_print_recent_activity')" href="../../_functions/wiki_print_recent_activity.html" onMouseOver="funcPopup(event,'wiki_print_recent_activity')">wiki_print_recent_activity</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>) {
<a name="l251"><span class="linenum"> 251</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT p.id, p.timemodified, p.subwikiid, sw.wikiid, w.wikimode, sw.userid, sw.groupid
<a name="l254"><span class="linenum"> 254</span></a>              FROM {wiki_pages} p
<a name="l255"><span class="linenum"> 255</span></a>                  JOIN {wiki_subwikis} sw ON sw.id = p.subwikiid
<a name="l256"><span class="linenum"> 256</span></a>                  JOIN {wiki} w ON w.id = sw.wikiid
<a name="l257"><span class="linenum"> 257</span></a>              WHERE p.timemodified &gt; ? AND w.course = ?
<a name="l258"><span class="linenum"> 258</span></a>              ORDER BY p.timemodified ASC&quot;;
<a name="l259"><span class="linenum"> 259</span></a>      if (!<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array(<a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l260"><span class="linenum"> 260</span></a>          return false;
<a name="l261"><span class="linenum"> 261</span></a>      }
<a name="l262"><span class="linenum"> 262</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/wiki/locallib.php.html">/mod/wiki/locallib.php</a>");
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>      <a class="var it32133" onMouseOver="hilite(32133)" onMouseOut="lolite()" onClick="logVariable('wikis')" href="../../_variables/wikis.html">$wikis</a> = array();
<a name="l265"><span class="linenum"> 265</span></a>  
<a name="l266"><span class="linenum"> 266</span></a>      <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>      <a class="var it32136" onMouseOver="hilite(32136)" onMouseOut="lolite()" onClick="logVariable('subwikivisible')" href="../../_variables/subwikivisible.html">$subwikivisible</a> = array();
<a name="l269"><span class="linenum"> 269</span></a>      foreach (<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a> as <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>) {
<a name="l270"><span class="linenum"> 270</span></a>          if (!isset(<a class="var it32136" onMouseOver="hilite(32136)" onMouseOut="lolite()" onClick="logVariable('subwikivisible')" href="../../_variables/subwikivisible.html">$subwikivisible</a>[<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('subwikiid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/subwikiid.html">subwikiid</a>])) {
<a name="l271"><span class="linenum"> 271</span></a>              <a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a> = (object)array('id' =&gt; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('subwikiid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/subwikiid.html">subwikiid</a>, 'wikiid' =&gt; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('wikiid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/wikiid.html">wikiid</a>,
<a name="l272"><span class="linenum"> 272</span></a>                  'groupid' =&gt; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('groupid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>, 'userid' =&gt; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('userid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>);
<a name="l273"><span class="linenum"> 273</span></a>              <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a> = (object)array('id' =&gt; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('wikiid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/wikiid.html">wikiid</a>, 'course' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'wikimode' =&gt; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('wikimode')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/wikimode.html">wikimode</a>);
<a name="l274"><span class="linenum"> 274</span></a>              <a class="var it32136" onMouseOver="hilite(32136)" onMouseOut="lolite()" onClick="logVariable('subwikivisible')" href="../../_variables/subwikivisible.html">$subwikivisible</a>[<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('subwikiid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/subwikiid.html">subwikiid</a>] = <a class="function" onClick="logFunction('wiki_user_can_view')" href="../../_functions/wiki_user_can_view.html" onMouseOver="funcPopup(event,'wiki_user_can_view')">wiki_user_can_view</a>(<a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>, <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>);
<a name="l275"><span class="linenum"> 275</span></a>          }
<a name="l276"><span class="linenum"> 276</span></a>          if (<a class="var it32136" onMouseOver="hilite(32136)" onMouseOut="lolite()" onClick="logVariable('subwikivisible')" href="../../_variables/subwikivisible.html">$subwikivisible</a>[<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('subwikiid')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/subwikiid.html">subwikiid</a>]) {
<a name="l277"><span class="linenum"> 277</span></a>              <a class="var it32133" onMouseOver="hilite(32133)" onMouseOut="lolite()" onClick="logVariable('wikis')" href="../../_variables/wikis.html">$wikis</a>[] = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>;
<a name="l278"><span class="linenum"> 278</span></a>          }
<a name="l279"><span class="linenum"> 279</span></a>      }
<a name="l280"><span class="linenum"> 280</span></a>      unset(<a class="var it32136" onMouseOver="hilite(32136)" onMouseOut="lolite()" onClick="logVariable('subwikivisible')" href="../../_variables/subwikivisible.html">$subwikivisible</a>);
<a name="l281"><span class="linenum"> 281</span></a>      unset(<a class="var it152" onMouseOver="hilite(152)" onMouseOut="lolite()" onClick="logVariable('pages')" href="../../_variables/pages.html">$pages</a>);
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>      if (!<a class="var it32133" onMouseOver="hilite(32133)" onMouseOut="lolite()" onClick="logVariable('wikis')" href="../../_variables/wikis.html">$wikis</a>) {
<a name="l284"><span class="linenum"> 284</span></a>          return false;
<a name="l285"><span class="linenum"> 285</span></a>      }
<a name="l286"><span class="linenum"> 286</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;updatedwikipages&quot;, 'wiki') . ':', 3);
<a name="l287"><span class="linenum"> 287</span></a>      foreach (<a class="var it32133" onMouseOver="hilite(32133)" onMouseOut="lolite()" onClick="logVariable('wikis')" href="../../_variables/wikis.html">$wikis</a> as <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>) {
<a name="l288"><span class="linenum"> 288</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('instances')" class="var it39598" onMouseOver="hilite(39598)" onMouseOut="lolite()" href="../../_variables/instances.html">instances</a>['wiki'][<a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('wikiid')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/wikiid.html">wikiid</a>];
<a name="l289"><span class="linenum"> 289</span></a>          <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> . '/mod/wiki/view.php?pageid=' . <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('id')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l290"><span class="linenum"> 290</span></a>          <a class="function" onClick="logFunction('print_recent_activity_note')" href="../../_functions/print_recent_activity_note.html" onMouseOver="funcPopup(event,'print_recent_activity_note')">print_recent_activity_note</a>(<a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>, <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>, false, <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>);
<a name="l291"><span class="linenum"> 291</span></a>      }
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>      return true; <span class="comment">//  True if anything was printed, otherwise false</span>
<a name="l294"><span class="linenum"> 294</span></a>  }
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment">/**</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment"> * Function to be run periodically according to the moodle cron</span>
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment"> * This function searches for things that need to be done, such</span>
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment"> * as sending out mail, toggling flags etc ...</span>
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment"> *</span>
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment"> * @uses $CFG</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment"> * @return boolean</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment"> * @todo Finish documenting this function</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment"> **/</span>
<a name="l304"><span class="linenum"> 304</span></a>  function <a class="function" onClick="logFunction('wiki_cron')" href="../../_functions/wiki_cron.html" onMouseOver="funcPopup(event,'wiki_cron')">wiki_cron</a>() {
<a name="l305"><span class="linenum"> 305</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l306"><span class="linenum"> 306</span></a>  
<a name="l307"><span class="linenum"> 307</span></a>      return true;
<a name="l308"><span class="linenum"> 308</span></a>  }
<a name="l309"><span class="linenum"> 309</span></a>  
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">/**</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment"> * Must return an array of grades for a given instance of this module,</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment"> * indexed by user.  It also returns a maximum allowed grade.</span>
<a name="l313"><span class="linenum"> 313</span></a>  <span class="comment"> *</span>
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment"> * Example:</span>
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment"> *    $return-&gt;grades = array of grades;</span>
<a name="l316"><span class="linenum"> 316</span></a>  <span class="comment"> *    $return-&gt;maxgrade = maximum allowed grade;</span>
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment"> *</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment"> *    return $return;</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment"> *</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment"> * @param int $wikiid ID of an instance of this module</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment"> * @return mixed Null or object with an array of grades and with the maximum grade</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment"> **/</span>
<a name="l323"><span class="linenum"> 323</span></a>  function <a class="function" onClick="logFunction('wiki_grades')" href="../../_functions/wiki_grades.html" onMouseOver="funcPopup(event,'wiki_grades')">wiki_grades</a>(<a class="var it2613" onMouseOver="hilite(2613)" onMouseOut="lolite()" onClick="logVariable('wikiid')" href="../../_variables/wikiid.html">$wikiid</a>) {
<a name="l324"><span class="linenum"> 324</span></a>      return null;
<a name="l325"><span class="linenum"> 325</span></a>  }
<a name="l326"><span class="linenum"> 326</span></a>  
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">/**</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment"> * This function returns if a scale is being used by one wiki</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment"> * it it has support for grading and scales. Commented code should be</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment"> * modified if necessary. See forum, glossary or journal modules</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment"> * as reference.</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment"> *</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment"> * @param int $wikiid ID of an instance of this module</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment"> * @return mixed</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment"> * @todo Finish documenting this function</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment"> **/</span>
<a name="l337"><span class="linenum"> 337</span></a>  function <a class="function" onClick="logFunction('wiki_scale_used')" href="../../_functions/wiki_scale_used.html" onMouseOver="funcPopup(event,'wiki_scale_used')">wiki_scale_used</a>(<a class="var it2613" onMouseOver="hilite(2613)" onMouseOut="lolite()" onClick="logVariable('wikiid')" href="../../_variables/wikiid.html">$wikiid</a>, <a class="var it3927" onMouseOver="hilite(3927)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>) {
<a name="l338"><span class="linenum"> 338</span></a>      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = false;
<a name="l339"><span class="linenum"> 339</span></a>  
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">    //$rec = get_record(&quot;wiki&quot;,&quot;id&quot;,&quot;$wikiid&quot;,&quot;scale&quot;,&quot;-$scaleid&quot;);</span>
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">    //</span>
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment">    //if (!empty($rec)  &amp;&amp; !empty($scaleid)) {</span>
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">    //    $return = true;</span>
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment">    //}</span>
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>      return <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l347"><span class="linenum"> 347</span></a>  }
<a name="l348"><span class="linenum"> 348</span></a>  
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">/**</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment"> * Checks if scale is being used by any instance of wiki.</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment"> * This function was added in 1.9</span>
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment"> *</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment"> * This is used to find out if scale used anywhere</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment"> * @param $scaleid int</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment"> * @return boolean True if the scale is used by any wiki</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment"> */</span>
<a name="l357"><span class="linenum"> 357</span></a>  function <a class="function" onClick="logFunction('wiki_scale_used_anywhere')" href="../../_functions/wiki_scale_used_anywhere.html" onMouseOver="funcPopup(event,'wiki_scale_used_anywhere')">wiki_scale_used_anywhere</a>(<a class="var it3927" onMouseOver="hilite(3927)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>) {
<a name="l358"><span class="linenum"> 358</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l359"><span class="linenum"> 359</span></a>  
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">    //if ($scaleid and $DB-&gt;record_exists('wiki', array('grade' =&gt; -$scaleid))) {</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">    //    return true;</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">    //} else {</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">    //    return false;</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">    //}</span>
<a name="l365"><span class="linenum"> 365</span></a>  
<a name="l366"><span class="linenum"> 366</span></a>      return false;
<a name="l367"><span class="linenum"> 367</span></a>  }
<a name="l368"><span class="linenum"> 368</span></a>  
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">/**</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment"> * file serving callback</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment"> *</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment"> * @copyright Josep Arus</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment"> * @package  mod_wiki</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment"> * @category files</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment"> * @param stdClass $course course object</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment"> * @param stdClass $cm course module object</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment"> * @param stdClass $context context object</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment"> * @param string $filearea file area</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment"> * @param array $args extra arguments</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment"> * @param bool $forcedownload whether or not force download</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment"> * @param array $options additional options affecting the file serving</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment"> * @return bool false if the file was not found, just send the file otherwise and do not return anything</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment"> */</span>
<a name="l384"><span class="linenum"> 384</span></a>  function <a class="function" onClick="logFunction('wiki_pluginfile')" href="../../_functions/wiki_pluginfile.html" onMouseOver="funcPopup(event,'wiki_pluginfile')">wiki_pluginfile</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>=array()) {
<a name="l385"><span class="linenum"> 385</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l386"><span class="linenum"> 386</span></a>  
<a name="l387"><span class="linenum"> 387</span></a>      if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/contextlevel.html">contextlevel</a> != <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>) {
<a name="l388"><span class="linenum"> 388</span></a>          return false;
<a name="l389"><span class="linenum"> 389</span></a>      }
<a name="l390"><span class="linenum"> 390</span></a>  
<a name="l391"><span class="linenum"> 391</span></a>      <a class="function" onClick="logFunction('require_login')" href="../../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, true, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l392"><span class="linenum"> 392</span></a>  
<a name="l393"><span class="linenum"> 393</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/wiki/locallib.php.html">/mod/wiki/locallib.php</a>");
<a name="l394"><span class="linenum"> 394</span></a>  
<a name="l395"><span class="linenum"> 395</span></a>      if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> == 'attachments') {
<a name="l396"><span class="linenum"> 396</span></a>          <a class="var it21589" onMouseOver="hilite(21589)" onMouseOut="lolite()" onClick="logVariable('swid')" href="../../_variables/swid.html">$swid</a> = (int) <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l397"><span class="linenum"> 397</span></a>  
<a name="l398"><span class="linenum"> 398</span></a>          if (!<a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a> = <a class="function" onClick="logFunction('wiki_get_subwiki')" href="../../_functions/wiki_get_subwiki.html" onMouseOver="funcPopup(event,'wiki_get_subwiki')">wiki_get_subwiki</a>(<a class="var it21589" onMouseOver="hilite(21589)" onMouseOut="lolite()" onClick="logVariable('swid')" href="../../_variables/swid.html">$swid</a>)) {
<a name="l399"><span class="linenum"> 399</span></a>              return false;
<a name="l400"><span class="linenum"> 400</span></a>          }
<a name="l401"><span class="linenum"> 401</span></a>  
<a name="l402"><span class="linenum"> 402</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/wiki:viewpage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l403"><span class="linenum"> 403</span></a>  
<a name="l404"><span class="linenum"> 404</span></a>          <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l405"><span class="linenum"> 405</span></a>  
<a name="l406"><span class="linenum"> 406</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a> = &quot;/<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>/mod_wiki/attachments/<a class="var it21589" onMouseOver="hilite(21589)" onMouseOut="lolite()" onClick="logVariable('swid')" href="../../_variables/swid.html">$swid</a>/<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>&quot;;
<a name="l407"><span class="linenum"> 407</span></a>  
<a name="l408"><span class="linenum"> 408</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l409"><span class="linenum"> 409</span></a>          if (!<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file_by_hash')" href="../../_functions/get_file_by_hash.html" onMouseOver="funcPopup(event,'get_file_by_hash')">get_file_by_hash</a>(<a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a>)) or <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l410"><span class="linenum"> 410</span></a>              return false;
<a name="l411"><span class="linenum"> 411</span></a>          }
<a name="l412"><span class="linenum"> 412</span></a>  
<a name="l413"><span class="linenum"> 413</span></a>          <a class="function" onClick="logFunction('send_stored_file')" href="../../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>, null, 0, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l414"><span class="linenum"> 414</span></a>      }
<a name="l415"><span class="linenum"> 415</span></a>  }
<a name="l416"><span class="linenum"> 416</span></a>  
<a name="l417"><span class="linenum"> 417</span></a>  function <a class="function" onClick="logFunction('wiki_search_form')" href="../../_functions/wiki_search_form.html" onMouseOver="funcPopup(event,'wiki_search_form')">wiki_search_form</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../_variables/search.html">$search</a> = '', <a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a> = null) {
<a name="l418"><span class="linenum"> 418</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l419"><span class="linenum"> 419</span></a>  
<a name="l420"><span class="linenum"> 420</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = '&lt;div class=&quot;wikisearch&quot;&gt;';
<a name="l421"><span class="linenum"> 421</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;form method=&quot;post&quot; action=&quot;' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> . '/mod/wiki/search.php&quot; style=&quot;display:inline&quot;&gt;';
<a name="l422"><span class="linenum"> 422</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;fieldset class=&quot;invisiblefieldset&quot;&gt;';
<a name="l423"><span class="linenum"> 423</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;legend class=&quot;accesshide&quot;&gt;'. <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('searchwikis', 'wiki') .'&lt;/legend&gt;';
<a name="l424"><span class="linenum"> 424</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;label class=&quot;accesshide&quot; for=&quot;searchwiki&quot;&gt;' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;searchterms&quot;, &quot;wiki&quot;) . '&lt;/label&gt;';
<a name="l425"><span class="linenum"> 425</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;input id=&quot;searchwiki&quot; name=&quot;searchstring&quot; type=&quot;text&quot; size=&quot;18&quot; value=&quot;' . <a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../_variables/search.html">$search</a>, true) . '&quot; alt=&quot;search&quot; /&gt;';
<a name="l426"><span class="linenum"> 426</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;input name=&quot;courseid&quot; type=&quot;hidden&quot; value=&quot;' . <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/course.html">course</a> . '&quot; /&gt;';
<a name="l427"><span class="linenum"> 427</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;input name=&quot;cmid&quot; type=&quot;hidden&quot; value=&quot;' . <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . '&quot; /&gt;';
<a name="l428"><span class="linenum"> 428</span></a>      if (!empty(<a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>-&gt;<a onClick="logVariable('id')" class="var it39900" onMouseOver="hilite(39900)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l429"><span class="linenum"> 429</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;input name=&quot;subwikiid&quot; type=&quot;hidden&quot; value=&quot;' . <a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>-&gt;<a onClick="logVariable('id')" class="var it39900" onMouseOver="hilite(39900)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . '&quot; /&gt;';
<a name="l430"><span class="linenum"> 430</span></a>      }
<a name="l431"><span class="linenum"> 431</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;input name=&quot;searchwikicontent&quot; type=&quot;hidden&quot; value=&quot;1&quot; /&gt;';
<a name="l432"><span class="linenum"> 432</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;input value=&quot;' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('searchwikis', 'wiki') . '&quot; type=&quot;submit&quot; /&gt;';
<a name="l433"><span class="linenum"> 433</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;/fieldset&gt;';
<a name="l434"><span class="linenum"> 434</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;/form&gt;';
<a name="l435"><span class="linenum"> 435</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;/div&gt;';
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>      return <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>;
<a name="l438"><span class="linenum"> 438</span></a>  }
<a name="l439"><span class="linenum"> 439</span></a>  function <a class="function" onClick="logFunction('wiki_extend_navigation')" href="../../_functions/wiki_extend_navigation.html" onMouseOver="funcPopup(event,'wiki_extend_navigation')">wiki_extend_navigation</a>(navigation_node <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('navref')" href="../../_variables/navref.html">$navref</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) {
<a name="l440"><span class="linenum"> 440</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l441"><span class="linenum"> 441</span></a>  
<a name="l442"><span class="linenum"> 442</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/wiki/locallib.php.html">/mod/wiki/locallib.php</a>');
<a name="l443"><span class="linenum"> 443</span></a>  
<a name="l444"><span class="linenum"> 444</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l445"><span class="linenum"> 445</span></a>      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/url.html">url</a>;
<a name="l446"><span class="linenum"> 446</span></a>      <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = 0;
<a name="l447"><span class="linenum"> 447</span></a>      if (<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('wikimode')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../../_variables/wikimode.html">wikimode</a> == 'individual') {
<a name="l448"><span class="linenum"> 448</span></a>          <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l449"><span class="linenum"> 449</span></a>      }
<a name="l450"><span class="linenum"> 450</span></a>  
<a name="l451"><span class="linenum"> 451</span></a>      if (!<a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a> = <a class="function" onClick="logFunction('wiki_get_wiki')" href="../../_functions/wiki_get_wiki.html" onMouseOver="funcPopup(event,'wiki_get_wiki')">wiki_get_wiki</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>)) {
<a name="l452"><span class="linenum"> 452</span></a>          return false;
<a name="l453"><span class="linenum"> 453</span></a>      }
<a name="l454"><span class="linenum"> 454</span></a>  
<a name="l455"><span class="linenum"> 455</span></a>      if (!<a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../../_variables/gid.html">$gid</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>)) {
<a name="l456"><span class="linenum"> 456</span></a>          <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../../_variables/gid.html">$gid</a> = 0;
<a name="l457"><span class="linenum"> 457</span></a>      }
<a name="l458"><span class="linenum"> 458</span></a>      if (!<a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a> = <a class="function" onClick="logFunction('wiki_get_subwiki_by_group')" href="../../_functions/wiki_get_subwiki_by_group.html" onMouseOver="funcPopup(event,'wiki_get_subwiki_by_group')">wiki_get_subwiki_by_group</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>, <a class="var it1617" onMouseOver="hilite(1617)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../../_variables/gid.html">$gid</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l459"><span class="linenum"> 459</span></a>          return null;
<a name="l460"><span class="linenum"> 460</span></a>      } else {
<a name="l461"><span class="linenum"> 461</span></a>          <a class="var it21589" onMouseOver="hilite(21589)" onMouseOut="lolite()" onClick="logVariable('swid')" href="../../_variables/swid.html">$swid</a> = <a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>-&gt;<a onClick="logVariable('id')" class="var it39900" onMouseOver="hilite(39900)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l462"><span class="linenum"> 462</span></a>      }
<a name="l463"><span class="linenum"> 463</span></a>  
<a name="l464"><span class="linenum"> 464</span></a>      <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('pageid');
<a name="l465"><span class="linenum"> 465</span></a>      <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a> = <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('id');
<a name="l466"><span class="linenum"> 466</span></a>      if (empty(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>) &amp;&amp; !empty(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>)) {
<a name="l467"><span class="linenum"> 467</span></a>  <span class="comment">        // wiki main page</span>
<a name="l468"><span class="linenum"> 468</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="function" onClick="logFunction('wiki_get_page_by_title')" href="../../_functions/wiki_get_page_by_title.html" onMouseOver="funcPopup(event,'wiki_get_page_by_title')">wiki_get_page_by_title</a>(<a class="var it21589" onMouseOver="hilite(21589)" onMouseOut="lolite()" onClick="logVariable('swid')" href="../../_variables/swid.html">$swid</a>, <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('firstpagetitle')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/firstpagetitle.html">firstpagetitle</a>);
<a name="l469"><span class="linenum"> 469</span></a>          <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l470"><span class="linenum"> 470</span></a>      }
<a name="l471"><span class="linenum"> 471</span></a>  
<a name="l472"><span class="linenum"> 472</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/wiki:createpage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l473"><span class="linenum"> 473</span></a>          <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/wiki/create.php.html">/mod/wiki/create.php</a>', array('action' =&gt; 'new', 'swid' =&gt; <a class="var it21589" onMouseOver="hilite(21589)" onMouseOut="lolite()" onClick="logVariable('swid')" href="../../_variables/swid.html">$swid</a>));
<a name="l474"><span class="linenum"> 474</span></a>          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('navref')" href="../../_variables/navref.html">$navref</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('newpage', 'wiki'), <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>, <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l475"><span class="linenum"> 475</span></a>      }
<a name="l476"><span class="linenum"> 476</span></a>  
<a name="l477"><span class="linenum"> 477</span></a>      if (<a class="phpfunction" onClick="logFunction('is_numeric')" href="../../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>)) {
<a name="l478"><span class="linenum"> 478</span></a>  
<a name="l479"><span class="linenum"> 479</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/wiki:viewpage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l480"><span class="linenum"> 480</span></a>              <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/wiki/view.php.html">/mod/wiki/view.php</a>', array('pageid' =&gt; <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>));
<a name="l481"><span class="linenum"> 481</span></a>              <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('navref')" href="../../_variables/navref.html">$navref</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('view', 'wiki'), <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>, <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l482"><span class="linenum"> 482</span></a>          }
<a name="l483"><span class="linenum"> 483</span></a>  
<a name="l484"><span class="linenum"> 484</span></a>          if (<a class="function" onClick="logFunction('wiki_user_can_edit')" href="../../_functions/wiki_user_can_edit.html" onMouseOver="funcPopup(event,'wiki_user_can_edit')">wiki_user_can_edit</a>(<a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>)) {
<a name="l485"><span class="linenum"> 485</span></a>              <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/wiki/edit.php.html">/mod/wiki/edit.php</a>', array('pageid' =&gt; <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>));
<a name="l486"><span class="linenum"> 486</span></a>              <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('navref')" href="../../_variables/navref.html">$navref</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('edit', 'wiki'), <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>, <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l487"><span class="linenum"> 487</span></a>          }
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/wiki:viewcomment', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l490"><span class="linenum"> 490</span></a>              <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/wiki/comments.php.html">/mod/wiki/comments.php</a>', array('pageid' =&gt; <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>));
<a name="l491"><span class="linenum"> 491</span></a>              <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('navref')" href="../../_variables/navref.html">$navref</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('comments', 'wiki'), <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>, <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l492"><span class="linenum"> 492</span></a>          }
<a name="l493"><span class="linenum"> 493</span></a>  
<a name="l494"><span class="linenum"> 494</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/wiki:viewpage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l495"><span class="linenum"> 495</span></a>              <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/wiki/history.php.html">/mod/wiki/history.php</a>', array('pageid' =&gt; <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>));
<a name="l496"><span class="linenum"> 496</span></a>              <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('navref')" href="../../_variables/navref.html">$navref</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('history', 'wiki'), <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>, <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l497"><span class="linenum"> 497</span></a>          }
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/wiki:viewpage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l500"><span class="linenum"> 500</span></a>              <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/wiki/map.php.html">/mod/wiki/map.php</a>', array('pageid' =&gt; <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>));
<a name="l501"><span class="linenum"> 501</span></a>              <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('navref')" href="../../_variables/navref.html">$navref</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('map', 'wiki'), <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>, <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l502"><span class="linenum"> 502</span></a>          }
<a name="l503"><span class="linenum"> 503</span></a>  
<a name="l504"><span class="linenum"> 504</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/wiki:viewpage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l505"><span class="linenum"> 505</span></a>              <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/wiki/files.php.html">/mod/wiki/files.php</a>', array('pageid' =&gt; <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>));
<a name="l506"><span class="linenum"> 506</span></a>              <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('navref')" href="../../_variables/navref.html">$navref</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('files', 'wiki'), <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>, <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l507"><span class="linenum"> 507</span></a>          }
<a name="l508"><span class="linenum"> 508</span></a>  
<a name="l509"><span class="linenum"> 509</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/wiki:managewiki', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l510"><span class="linenum"> 510</span></a>              <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/wiki/admin.php.html">/mod/wiki/admin.php</a>', array('pageid' =&gt; <a class="var it1764" onMouseOver="hilite(1764)" onMouseOut="lolite()" onClick="logVariable('pageid')" href="../../_variables/pageid.html">$pageid</a>));
<a name="l511"><span class="linenum"> 511</span></a>              <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('navref')" href="../../_variables/navref.html">$navref</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('admin', 'wiki'), <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>, <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l512"><span class="linenum"> 512</span></a>          }
<a name="l513"><span class="linenum"> 513</span></a>      }
<a name="l514"><span class="linenum"> 514</span></a>  }
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">/**</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment"> * Returns all other caps used in wiki module</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment"> *</span>
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment"> * @return array</span>
<a name="l519"><span class="linenum"> 519</span></a>  <span class="comment"> */</span>
<a name="l520"><span class="linenum"> 520</span></a>  function <a class="function" onClick="logFunction('wiki_get_extra_capabilities')" href="../../_functions/wiki_get_extra_capabilities.html" onMouseOver="funcPopup(event,'wiki_get_extra_capabilities')">wiki_get_extra_capabilities</a>() {
<a name="l521"><span class="linenum"> 521</span></a>      return array('moodle/comment:view', 'moodle/comment:post', 'moodle/comment:delete');
<a name="l522"><span class="linenum"> 522</span></a>  }
<a name="l523"><span class="linenum"> 523</span></a>  
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">/**</span>
<a name="l525"><span class="linenum"> 525</span></a>  <span class="comment"> * Running addtional permission check on plugin, for example, plugins</span>
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment"> * may have switch to turn on/off comments option, this callback will</span>
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment"> * affect UI display, not like pluginname_comment_validate only throw</span>
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment"> * exceptions.</span>
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment"> * Capability check has been done in comment-&gt;check_permissions(), we</span>
<a name="l530"><span class="linenum"> 530</span></a>  <span class="comment"> * don't need to do it again here.</span>
<a name="l531"><span class="linenum"> 531</span></a>  <span class="comment"> *</span>
<a name="l532"><span class="linenum"> 532</span></a>  <span class="comment"> * @package  mod_wiki</span>
<a name="l533"><span class="linenum"> 533</span></a>  <span class="comment"> * @category comment</span>
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment"> *</span>
<a name="l535"><span class="linenum"> 535</span></a>  <span class="comment"> * @param stdClass $comment_param {</span>
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment"> *              context  =&gt; context the context object</span>
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment"> *              courseid =&gt; int course id</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment"> *              cm       =&gt; stdClass course module object</span>
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment"> *              commentarea =&gt; string comment area</span>
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment"> *              itemid      =&gt; int itemid</span>
<a name="l541"><span class="linenum"> 541</span></a>  <span class="comment"> * }</span>
<a name="l542"><span class="linenum"> 542</span></a>  <span class="comment"> * @return array</span>
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment"> */</span>
<a name="l544"><span class="linenum"> 544</span></a>  function <a class="function" onClick="logFunction('wiki_comment_permissions')" href="../../_functions/wiki_comment_permissions.html" onMouseOver="funcPopup(event,'wiki_comment_permissions')">wiki_comment_permissions</a>(<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>) {
<a name="l545"><span class="linenum"> 545</span></a>      return array('post'=&gt;true, 'view'=&gt;true);
<a name="l546"><span class="linenum"> 546</span></a>  }
<a name="l547"><span class="linenum"> 547</span></a>  
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">/**</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment"> * Validate comment parameter before perform other comments actions</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment"> *</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment"> * @param stdClass $comment_param {</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment"> *              context  =&gt; context the context object</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment"> *              courseid =&gt; int course id</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment"> *              cm       =&gt; stdClass course module object</span>
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment"> *              commentarea =&gt; string comment area</span>
<a name="l556"><span class="linenum"> 556</span></a>  <span class="comment"> *              itemid      =&gt; int itemid</span>
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment"> * }</span>
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment"> *</span>
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment"> * @package  mod_wiki</span>
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment"> * @category comment</span>
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment"> *</span>
<a name="l562"><span class="linenum"> 562</span></a>  <span class="comment"> * @return boolean</span>
<a name="l563"><span class="linenum"> 563</span></a>  <span class="comment"> */</span>
<a name="l564"><span class="linenum"> 564</span></a>  function <a class="function" onClick="logFunction('wiki_comment_validate')" href="../../_functions/wiki_comment_validate.html" onMouseOver="funcPopup(event,'wiki_comment_validate')">wiki_comment_validate</a>(<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>) {
<a name="l565"><span class="linenum"> 565</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l566"><span class="linenum"> 566</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/wiki/locallib.php.html">/mod/wiki/locallib.php</a>');
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment">    // validate comment area</span>
<a name="l568"><span class="linenum"> 568</span></a>      if (<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('commentarea')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/commentarea.html">commentarea</a> != 'wiki_page') {
<a name="l569"><span class="linenum"> 569</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentarea');
<a name="l570"><span class="linenum"> 570</span></a>      }
<a name="l571"><span class="linenum"> 571</span></a>  <span class="comment">    // validate itemid</span>
<a name="l572"><span class="linenum"> 572</span></a>      if (!<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('wiki_pages', array('id'=&gt;<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('itemid')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a>))) {
<a name="l573"><span class="linenum"> 573</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentitemid');
<a name="l574"><span class="linenum"> 574</span></a>      }
<a name="l575"><span class="linenum"> 575</span></a>      if (!<a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a> = <a class="function" onClick="logFunction('wiki_get_subwiki')" href="../../_functions/wiki_get_subwiki.html" onMouseOver="funcPopup(event,'wiki_get_subwiki')">wiki_get_subwiki</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('subwikiid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/subwikiid.html">subwikiid</a>)) {
<a name="l576"><span class="linenum"> 576</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidsubwikiid');
<a name="l577"><span class="linenum"> 577</span></a>      }
<a name="l578"><span class="linenum"> 578</span></a>      if (!<a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a> = <a class="function" onClick="logFunction('wiki_get_wiki_from_pageid')" href="../../_functions/wiki_get_wiki_from_pageid.html" onMouseOver="funcPopup(event,'wiki_get_wiki_from_pageid')">wiki_get_wiki_from_pageid</a>(<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('itemid')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a>)) {
<a name="l579"><span class="linenum"> 579</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidid', 'data');
<a name="l580"><span class="linenum"> 580</span></a>      }
<a name="l581"><span class="linenum"> 581</span></a>      if (!<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('course')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>))) {
<a name="l582"><span class="linenum"> 582</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('coursemisconf');
<a name="l583"><span class="linenum"> 583</span></a>      }
<a name="l584"><span class="linenum"> 584</span></a>      if (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('wiki', <a class="var it2614" onMouseOver="hilite(2614)" onMouseOut="lolite()" onClick="logVariable('wiki')" href="../../_variables/wiki.html">$wiki</a>-&gt;<a onClick="logVariable('id')" class="var it39899" onMouseOver="hilite(39899)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l585"><span class="linenum"> 585</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcoursemodule');
<a name="l586"><span class="linenum"> 586</span></a>      }
<a name="l587"><span class="linenum"> 587</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l588"><span class="linenum"> 588</span></a>  <span class="comment">    // group access</span>
<a name="l589"><span class="linenum"> 589</span></a>      if (<a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>-&gt;<a onClick="logVariable('groupid')" class="var it39900" onMouseOver="hilite(39900)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>) {
<a name="l590"><span class="linenum"> 590</span></a>          <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l591"><span class="linenum"> 591</span></a>          if (<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l592"><span class="linenum"> 592</span></a>              if (!<a class="function" onClick="logFunction('groups_is_member')" href="../../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it2611" onMouseOver="hilite(2611)" onMouseOut="lolite()" onClick="logVariable('subwiki')" href="../../_variables/subwiki.html">$subwiki</a>-&gt;<a onClick="logVariable('groupid')" class="var it39900" onMouseOver="hilite(39900)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>)) {
<a name="l593"><span class="linenum"> 593</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('notmemberofgroup');
<a name="l594"><span class="linenum"> 594</span></a>              }
<a name="l595"><span class="linenum"> 595</span></a>          }
<a name="l596"><span class="linenum"> 596</span></a>      }
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment">    // validate context id</span>
<a name="l598"><span class="linenum"> 598</span></a>      if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> != <a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('context')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id) {
<a name="l599"><span class="linenum"> 599</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcontext');
<a name="l600"><span class="linenum"> 600</span></a>      }
<a name="l601"><span class="linenum"> 601</span></a>  <span class="comment">    // validation for comment deletion</span>
<a name="l602"><span class="linenum"> 602</span></a>      if (!empty(<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('commentid')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/commentid.html">commentid</a>)) {
<a name="l603"><span class="linenum"> 603</span></a>          if (<a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('comments', array('id'=&gt;<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('commentid')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/commentid.html">commentid</a>))) {
<a name="l604"><span class="linenum"> 604</span></a>              if (<a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>-&gt;<a onClick="logVariable('commentarea')" class="var it39776" onMouseOver="hilite(39776)" onMouseOut="lolite()" href="../../_variables/commentarea.html">commentarea</a> != 'wiki_page') {
<a name="l605"><span class="linenum"> 605</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentarea');
<a name="l606"><span class="linenum"> 606</span></a>              }
<a name="l607"><span class="linenum"> 607</span></a>              if (<a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>-&gt;<a onClick="logVariable('contextid')" class="var it39776" onMouseOver="hilite(39776)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> != <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l608"><span class="linenum"> 608</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcontext');
<a name="l609"><span class="linenum"> 609</span></a>              }
<a name="l610"><span class="linenum"> 610</span></a>              if (<a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>-&gt;<a onClick="logVariable('itemid')" class="var it39776" onMouseOver="hilite(39776)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a> != <a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('itemid')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a>) {
<a name="l611"><span class="linenum"> 611</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentitemid');
<a name="l612"><span class="linenum"> 612</span></a>              }
<a name="l613"><span class="linenum"> 613</span></a>          } else {
<a name="l614"><span class="linenum"> 614</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentid');
<a name="l615"><span class="linenum"> 615</span></a>          }
<a name="l616"><span class="linenum"> 616</span></a>      }
<a name="l617"><span class="linenum"> 617</span></a>      return true;
<a name="l618"><span class="linenum"> 618</span></a>  }
<a name="l619"><span class="linenum"> 619</span></a>  
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment">/**</span>
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment"> * Return a list of page types</span>
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment"> * @param string $pagetype current page type</span>
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment"> * @param stdClass $parentcontext Block's parent context</span>
<a name="l624"><span class="linenum"> 624</span></a>  <span class="comment"> * @param stdClass $currentcontext Current context of block</span>
<a name="l625"><span class="linenum"> 625</span></a>  <span class="comment"> */</span>
<a name="l626"><span class="linenum"> 626</span></a>  function <a class="function" onClick="logFunction('wiki_page_type_list')" href="../../_functions/wiki_page_type_list.html" onMouseOver="funcPopup(event,'wiki_page_type_list')">wiki_page_type_list</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../../_variables/parentcontext.html">$parentcontext</a>, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../../_variables/currentcontext.html">$currentcontext</a>) {
<a name="l627"><span class="linenum"> 627</span></a>      <a class="var it8026" onMouseOver="hilite(8026)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a> = array(
<a name="l628"><span class="linenum"> 628</span></a>          'mod-wiki-*'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-wiki-x', 'wiki'),
<a name="l629"><span class="linenum"> 629</span></a>          'mod-wiki-view'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-wiki-view', 'wiki'),
<a name="l630"><span class="linenum"> 630</span></a>          'mod-wiki-comments'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-wiki-comments', 'wiki'),
<a name="l631"><span class="linenum"> 631</span></a>          'mod-wiki-history'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-wiki-history', 'wiki'),
<a name="l632"><span class="linenum"> 632</span></a>          'mod-wiki-map'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-wiki-map', 'wiki')
<a name="l633"><span class="linenum"> 633</span></a>      );
<a name="l634"><span class="linenum"> 634</span></a>      return <a class="var it8026" onMouseOver="hilite(8026)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a>;
<a name="l635"><span class="linenum"> 635</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'wiki_comment_validate': ['wiki_comment_validate', 'Validate comment parameter before perform other comments actions ', [['mod/wiki','lib.php',548]], 0],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/zend/Zend/Soap','Wsdl.php',641],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',582]], 3296],
'send_stored_file': ['send_stored_file', 'Handles the sending of file data to the user\'s browser, including support for byteranges etc. ', [['lib','filelib.php',2170]], 73],
'wiki_update_instance': ['wiki_update_instance', 'Given an object containing all the necessary data, (defined by the form in mod.html) this function will update an existing instance with new data. ', [['mod/wiki','lib.php',57]], 0],
'wiki_user_can_edit': ['wiki_user_can_edit', 'Checks if current user can edit a subwiki ', [['mod/wiki','locallib.php',861]], 6],
'groups_is_member': ['groups_is_member', 'Determines if the user is a member of the given group. ', [['lib','grouplib.php',353]], 97],
'param': ['param', 'Returns a placeholder for query parameters e.g. $DB->Param(\'a\') will return - \'?\' for most databases - \':a\' for Oracle - \'$1\', \'$2\', etc. for PostgreSQL ', [['lib/adodb','adodb.inc.php',815],['lib/adodb/drivers','adodb-postgres64.inc.php',591],['lib','weblib.php',455],['lib/adodb/drivers','adodb-oci8po.inc.php',37],['lib/adodb/drivers','adodb-db2oci.inc.php',166],['lib/adodb/drivers','adodb-oci8.inc.php',1014]], 641],
'wiki_get_page_by_title': ['wiki_get_page_by_title', 'Get a wiki page by page title ', [['mod/wiki','locallib.php',174]], 6],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2444]], 635],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'wiki_get_wiki_from_pageid': ['wiki_get_wiki_from_pageid', 'Get a wiki instance by pageid ', [['mod/wiki','locallib.php',108]], 5],
'groups_get_activity_group': ['groups_get_activity_group', 'Returns group active in activity, changes the group by default if \'group\' page param present ', [['lib','grouplib.php',814]], 88],
'wiki_reset_course_form_definition': ['wiki_reset_course_form_definition', '', [['mod/wiki','lib.php',191]], 0],
'wiki_user_can_view': ['wiki_user_can_view', 'Checks if current user can view a subwiki ', [['mod/wiki','locallib.php',755]], 16],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'tag_get_tags_array': ['tag_get_tags_array', 'Get the array of tags display names, indexed by id. ', [['tag','lib.php',383]], 13],
'wiki_grades': ['wiki_grades', 'Must return an array of grades for a given instance of this module, indexed by user.  It also returns a maximum allowed grade. ', [['mod/wiki','lib.php',310]], 0],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'require_capability': ['require_capability', 'Adds a required capability which all results will be checked against ', [['backup/util/ui','restore_ui_components.php',157],['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',891],['lib','accesslib.php',764]], 628],
'wiki_get_extra_capabilities': ['wiki_get_extra_capabilities', 'Returns all other caps used in wiki module ', [['mod/wiki','lib.php',515]], 0],
'wiki_get_subwiki': ['wiki_get_subwiki', 'Get a sub wiki instace by instance id ', [['mod/wiki','locallib.php',79]], 24],
'tag_delete_instance': ['tag_delete_instance', 'Delete one instance of a tag.  If the last instance was deleted, it will also delete the tag, unless its type is \'official\'. ', [['tag','lib.php',795]], 6],
'wiki_add_instance': ['wiki_add_instance', 'Given an object containing all the necessary data, (defined by the form in mod.html) this function will create a new instance and return the id number of the new instance. ', [['mod/wiki','lib.php',37]], 0],
'wiki_get_subwiki_by_group': ['wiki_get_subwiki_by_group', 'Get a sub wiki instance by wiki id and group id ', [['mod/wiki','locallib.php',68]], 9],
'wiki_extend_navigation': ['wiki_extend_navigation', '', [['mod/wiki','lib.php',439]], 0],
'print_recent_activity_note': ['print_recent_activity_note', 'Display a recent activity note ', [['lib','weblib.php',2286]], 5],
'add': ['add', '', [['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',454],['blog','locallib.php',242],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['backup/cc','validator.php',51],['lib/google/src/Google/Http','Batch.php',47],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['lib/zend/Zend/Service/Simpy','WatchlistFilterSet.php',47],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/lessphp/Output','Mapped.php',50],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/google/src/Google/Service','Webmasters.php',375],['lib/horde/framework/Horde','Variables.php',297],['lib','outputcomponents.php',2700],['lib','outputcomponents.php',3375],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/zend/Zend','Date.php',1081],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['comment','lib.php',675],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',86],['lib/horde/framework/Horde','Stream.php',116],['backup/cc/cc_lib/gral_lib','cssparser.php',111],['lib/lessphp','Output.php',18],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib','adminlib.php',736],['lib','adminlib.php',895],['lib','adminlib.php',1447],['lib','csslib.php',1508],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib','navigationlib.php',302],['lib','navigationlib.php',758],['lib','navigationlib.php',3288],['lib','navigationlib.php',3542],['lib/phpexcel/PHPExcel','HashTable.php',85],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454]], 5988],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',2001]], 277],
'wiki_scale_used_anywhere': ['wiki_scale_used_anywhere', 'Checks if scale is being used by any instance of wiki. This function was added in 1.9 ', [['mod/wiki','lib.php',349]], 0],
'wiki_search_form': ['wiki_search_form', '', [['mod/wiki','lib.php',417]], 1],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1331]], 365],
'wiki_print_recent_activity': ['wiki_print_recent_activity', 'Given a course and a time, this module should find recent activity that has occurred in wiki activities and print it out. Return true if there was output, or false is there was none. ', [['mod/wiki','lib.php',236]], 0],
'wiki_get_wiki': ['wiki_get_wiki', 'Get a wiki instance ', [['mod/wiki','locallib.php',49]], 26],
'wiki_pluginfile': ['wiki_pluginfile', 'file serving callback ', [['mod/wiki','lib.php',369]], 0],
'wiki_delete_instance': ['wiki_delete_instance', 'Given an ID of an instance of this module, this function will permanently delete the instance and any data that depends on it. ', [['mod/wiki','lib.php',79]], 0],
'wiki_page_type_list': ['wiki_page_type_list', 'Return a list of page types ', [['mod/wiki','lib.php',620]], 0],
'delete_records_select': ['delete_records_select', 'Delete one or more records from a table which match a particular WHERE clause. ', [['lib/dml','pgsql_native_moodle_database.php',1247],['lib/dml','oci_native_moodle_database.php',1445],['lib/dml','sqlsrv_native_moodle_database.php',1153],['lib/dml','mssql_native_moodle_database.php',1082],['lib/dml','mysqli_native_moodle_database.php',1469],['lib/dml/tests','dml_test.php',5432],['lib/dml','pdo_moodle_database.php',207]], 166],
'wiki_scale_used': ['wiki_scale_used', 'This function returns if a scale is being used by one wiki it it has support for grading and scales. Commented code should be modified if necessary. See forum, glossary or journal modules as reference. ', [['mod/wiki','lib.php',327]], 0],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'heading': ['heading', 'Get the heading for this page. ', [['grade/report/singleview/classes/local/screen','grade.php',283],['grade/report/singleview/classes/local/screen','user.php',281],['lib','outputrenderers.php',2957],['lib','outputrenderers.php',4080],['lib','outputrenderers.php',4254],['grade/report/singleview/classes/local/screen','screen.php',197]], 763],
'wiki_cron': ['wiki_cron', 'Function to be run periodically according to the moodle cron This function searches for things that need to be done, such as sending out mail, toggling flags etc ... ', [['mod/wiki','lib.php',295]], 0],
's': ['s', 'Count of attempts selected by $this->whichattempts ', [['mod/quiz/report/statistics/classes','calculated.php',91],['lib','weblib.php',84]], 988],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pgsql_native_moodle_database.php',1137],['lib/dml','oci_native_moodle_database.php',1355],['lib/dml','sqlsrv_native_moodle_database.php',1081],['lib/dml','mssql_native_moodle_database.php',1003],['lib/dml','mysqli_native_moodle_database.php',1397],['lib/dml/tests','dml_test.php',5430],['lib/dml','pdo_moodle_database.php',460]], 565],
'wiki_reset_userdata': ['wiki_reset_userdata', '', [['mod/wiki','lib.php',144]], 0],
'is_directory': ['is_directory', 'Whether or not this is a directory ', [['lib/filebrowser','file_info_context_course.php',372],['lib/filebrowser','file_info_context_course.php',657],['lib/filebrowser','file_info_context_course.php',803],['lib/filebrowser','file_info_context_system.php',83],['mod/book','locallib.php',454],['lib/filebrowser','file_info_context_coursecat.php',143],['mod/forum','locallib.php',463],['lib/filebrowser','file_info_context_module.php',249],['lib/filebrowser','file_info_context_user.php',265],['mod/data','locallib.php',475],['mod/workshop','fileinfolib.php',82],['mod/workshop','fileinfolib.php',241],['mod/imscp','locallib.php',328],['mod/lesson/classes','file_info.php',94],['mod/glossary','locallib.php',525],['lib/filestorage','stored_file.php',310],['lib/filebrowser','virtual_root_file.php',60],['lib/filebrowser','file_info_stored.php',267]], 131],
'wiki_supports': ['wiki_supports', 'Indicates API features that the wiki supports. ', [['mod/wiki','lib.php',197]], 0],
'groups_get_activity_groupmode': ['groups_get_activity_groupmode', 'Returns effective groupmode used in activity, course setting overrides activity setting if groupmodeforce enabled. ', [['lib','grouplib.php',468]], 133],
'wiki_comment_permissions': ['wiki_comment_permissions', 'Running addtional permission check on plugin, for example, plugins may have switch to turn on/off comments option, this callback will affect UI display, not like pluginname_comment_validate only throw exceptions. Capability check has been done in comment->check_permissions(), we don\'t need to do it again here. ', [['mod/wiki','lib.php',524]], 0],
'get_file_by_hash': ['get_file_by_hash', 'Fetch file using local file full pathname hash ', [['lib/filestorage','file_storage.php',427]], 75],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','moodle_database.php',1815],['lib/dml','sqlite3_pdo_moodle_database.php',337]], 778],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',5950]], 486],
'time': ['time', '', [], 1768],
'array_shift': ['array_shift', '', [], 607],
'implode': ['implode', '', [], 1259],
'sha1': ['sha1', '', [], 188],
'is_numeric': ['is_numeric', '', [], 723]};
CLASS_DATA={
'comment_exception': ['comment_exception', 'Comment exception class ', [['comment','lib.php',1044]], 66],
'navigation_node': ['navigation_node', 'This class is used to represent a node in a navigation tree ', [['lib','navigationlib.php',34]], 338],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',6988]], 942]};
CONST_DATA={
'FEATURE_MOD_INTRO': ['FEATURE_MOD_INTRO', '', [['lib','moodlelib.php',426]], 31],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 462],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 204],
'FEATURE_GRADE_HAS_GRADE': ['FEATURE_GRADE_HAS_GRADE', '', [['lib','moodlelib.php',394]], 29],
'FEATURE_SHOW_DESCRIPTION': ['FEATURE_SHOW_DESCRIPTION', '', [['lib','moodlelib.php',437]], 22],
'FEATURE_GRADE_OUTCOMES': ['FEATURE_GRADE_OUTCOMES', '', [['lib','moodlelib.php',396]], 23],
'FEATURE_RATE': ['FEATURE_RATE', '', [['lib','moodlelib.php',432]], 10],
'FEATURE_BACKUP_MOODLE2': ['FEATURE_BACKUP_MOODLE2', '', [['lib','moodlelib.php',434]], 34],
'FEATURE_COMPLETION_TRACKS_VIEWS': ['FEATURE_COMPLETION_TRACKS_VIEWS', '', [['lib','moodlelib.php',405]], 23],
'FEATURE_GROUPS': ['FEATURE_GROUPS', '', [['lib','moodlelib.php',414]], 25],
'SEPARATEGROUPS': ['SEPARATEGROUPS', '', [['lib','grouplib.php',34]], 158],
'FEATURE_GROUPINGS': ['FEATURE_GROUPINGS', '', [['lib','moodlelib.php',416]], 23]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
