<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/quiz/lib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/quiz';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/quiz/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Library of functions for the quiz module.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * This contains functions that are called also from outside the quiz module</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * Functions that are only called by the quiz module itself are in {@link locallib.php}</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> *</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @package    mod_quiz</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas {@link http://moodle.com}</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> */</span>
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/eventslib.php');
<a name="l32"><span class="linenum">  32</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../calendar/lib.php.html">/calendar/lib.php</a>');
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">/**#@+</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * Option controlling what options are offered on the quiz settings form.</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> */</span>
<a name="l38"><span class="linenum">  38</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('QUIZ_MAX_ATTEMPT_OPTION')" href="../../_constants/QUIZ_MAX_ATTEMPT_OPTION.html" onMouseOver="constPopup(event,'QUIZ_MAX_ATTEMPT_OPTION')">QUIZ_MAX_ATTEMPT_OPTION</a>', 10);
<a name="l39"><span class="linenum">  39</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('QUIZ_MAX_QPP_OPTION')" href="../../_constants/QUIZ_MAX_QPP_OPTION.html" onMouseOver="constPopup(event,'QUIZ_MAX_QPP_OPTION')">QUIZ_MAX_QPP_OPTION</a>', 50);
<a name="l40"><span class="linenum">  40</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('QUIZ_MAX_DECIMAL_OPTION')" href="../../_constants/QUIZ_MAX_DECIMAL_OPTION.html" onMouseOver="constPopup(event,'QUIZ_MAX_DECIMAL_OPTION')">QUIZ_MAX_DECIMAL_OPTION</a>', 5);
<a name="l41"><span class="linenum">  41</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('QUIZ_MAX_Q_DECIMAL_OPTION')" href="../../_constants/QUIZ_MAX_Q_DECIMAL_OPTION.html" onMouseOver="constPopup(event,'QUIZ_MAX_Q_DECIMAL_OPTION')">QUIZ_MAX_Q_DECIMAL_OPTION</a>', 7);
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">/**#@-*/</span>
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">/**#@+</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * Options determining how the grades from individual attempts are combined to give</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * the overall grade for a user</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> */</span>
<a name="l48"><span class="linenum">  48</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('QUIZ_GRADEHIGHEST')" href="../../_constants/QUIZ_GRADEHIGHEST.html" onMouseOver="constPopup(event,'QUIZ_GRADEHIGHEST')">QUIZ_GRADEHIGHEST</a>', '1');
<a name="l49"><span class="linenum">  49</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('QUIZ_GRADEAVERAGE')" href="../../_constants/QUIZ_GRADEAVERAGE.html" onMouseOver="constPopup(event,'QUIZ_GRADEAVERAGE')">QUIZ_GRADEAVERAGE</a>', '2');
<a name="l50"><span class="linenum">  50</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('QUIZ_ATTEMPTFIRST')" href="../../_constants/QUIZ_ATTEMPTFIRST.html" onMouseOver="constPopup(event,'QUIZ_ATTEMPTFIRST')">QUIZ_ATTEMPTFIRST</a>', '3');
<a name="l51"><span class="linenum">  51</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('QUIZ_ATTEMPTLAST')" href="../../_constants/QUIZ_ATTEMPTLAST.html" onMouseOver="constPopup(event,'QUIZ_ATTEMPTLAST')">QUIZ_ATTEMPTLAST</a>',  '4');
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">/**#@-*/</span>
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">/**</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> * @var int If start and end date for the quiz are more than this many seconds apart</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment"> * they will be represented by two separate events in the calendar</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment"> */</span>
<a name="l58"><span class="linenum">  58</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('QUIZ_MAX_EVENT_LENGTH')" href="../../_constants/QUIZ_MAX_EVENT_LENGTH.html" onMouseOver="constPopup(event,'QUIZ_MAX_EVENT_LENGTH')">QUIZ_MAX_EVENT_LENGTH</a>', 5*24*60*60); <span class="comment">// 5 days.</span>
<a name="l59"><span class="linenum">  59</span></a>  
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">/**#@+</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment"> * Options for navigation method within quizzes.</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment"> */</span>
<a name="l63"><span class="linenum">  63</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('QUIZ_NAVMETHOD_FREE')" href="../../_constants/QUIZ_NAVMETHOD_FREE.html" onMouseOver="constPopup(event,'QUIZ_NAVMETHOD_FREE')">QUIZ_NAVMETHOD_FREE</a>', 'free');
<a name="l64"><span class="linenum">  64</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('QUIZ_NAVMETHOD_SEQ')" href="../../_constants/QUIZ_NAVMETHOD_SEQ.html" onMouseOver="constPopup(event,'QUIZ_NAVMETHOD_SEQ')">QUIZ_NAVMETHOD_SEQ</a>',  'sequential');
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">/**#@-*/</span>
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">/**</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> * Given an object containing all the necessary data,</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> * (defined by the form in mod_form.php) this function</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> * will create a new instance and return the id number</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment"> * of the new instance.</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment"> *</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> * @param object $quiz the data that came from the form.</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment"> * @return mixed the id of the new instance on success,</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment"> *          false or a string error message on failure.</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment"> */</span>
<a name="l77"><span class="linenum">  77</span></a>  function <a class="function" onClick="logFunction('quiz_add_instance')" href="../../_functions/quiz_add_instance.html" onMouseOver="funcPopup(event,'quiz_add_instance')">quiz_add_instance</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l78"><span class="linenum">  78</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l79"><span class="linenum">  79</span></a>      <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a> = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>;
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">    // Process the options from the form.</span>
<a name="l82"><span class="linenum">  82</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('created')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/created.html">created</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l83"><span class="linenum">  83</span></a>      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="function" onClick="logFunction('quiz_process_options')" href="../../_functions/quiz_process_options.html" onMouseOver="funcPopup(event,'quiz_process_options')">quiz_process_options</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l84"><span class="linenum">  84</span></a>      if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('is_string')" href="../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>)) {
<a name="l85"><span class="linenum">  85</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l86"><span class="linenum">  86</span></a>      }
<a name="l87"><span class="linenum">  87</span></a>  
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">    // Try to store it in the database.</span>
<a name="l89"><span class="linenum">  89</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">    // Create the first section for this quiz.</span>
<a name="l92"><span class="linenum">  92</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('quiz_sections', array('quizid' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l93"><span class="linenum">  93</span></a>              'firstslot' =&gt; 1, 'heading' =&gt; '', 'shufflequestions' =&gt; 0));
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">    // Do the processing required after an add or an update.</span>
<a name="l96"><span class="linenum">  96</span></a>      <a class="function" onClick="logFunction('quiz_after_add_or_update')" href="../../_functions/quiz_after_add_or_update.html" onMouseOver="funcPopup(event,'quiz_after_add_or_update')">quiz_after_add_or_update</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l97"><span class="linenum">  97</span></a>  
<a name="l98"><span class="linenum">  98</span></a>      return <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l99"><span class="linenum">  99</span></a>  }
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">/**</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment"> * Given an object containing all the necessary data,</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment"> * (defined by the form in mod_form.php) this function</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment"> * will update an existing instance with new data.</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment"> *</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment"> * @param object $quiz the data that came from the form.</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment"> * @return mixed true on success, false or a string error message on failure.</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment"> */</span>
<a name="l109"><span class="linenum"> 109</span></a>  function <a class="function" onClick="logFunction('quiz_update_instance')" href="../../_functions/quiz_update_instance.html" onMouseOver="funcPopup(event,'quiz_update_instance')">quiz_update_instance</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l110"><span class="linenum"> 110</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l111"><span class="linenum"> 111</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/quiz/locallib.php.html">/mod/quiz/locallib.php</a>');
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">    // Process the options from the form.</span>
<a name="l114"><span class="linenum"> 114</span></a>      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="function" onClick="logFunction('quiz_process_options')" href="../../_functions/quiz_process_options.html" onMouseOver="funcPopup(event,'quiz_process_options')">quiz_process_options</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l115"><span class="linenum"> 115</span></a>      if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('is_string')" href="../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>)) {
<a name="l116"><span class="linenum"> 116</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l117"><span class="linenum"> 117</span></a>      }
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">    // Get the current value, so we can see what changed.</span>
<a name="l120"><span class="linenum"> 120</span></a>      <a class="var it38823" onMouseOver="hilite(38823)" onMouseOut="lolite()" onClick="logVariable('oldquiz')" href="../../_variables/oldquiz.html">$oldquiz</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('quiz', array('id' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('instance')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>));
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">    // We need two values from the existing DB record that are not in the form,</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">    // in some of the function calls below.</span>
<a name="l124"><span class="linenum"> 124</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('sumgrades')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/sumgrades.html">sumgrades</a> = <a class="var it38823" onMouseOver="hilite(38823)" onMouseOut="lolite()" onClick="logVariable('oldquiz')" href="../../_variables/oldquiz.html">$oldquiz</a>-&gt;<a onClick="logVariable('sumgrades')" class="var it40849" onMouseOver="hilite(40849)" onMouseOut="lolite()" href="../../_variables/sumgrades.html">sumgrades</a>;
<a name="l125"><span class="linenum"> 125</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('grade')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>     = <a class="var it38823" onMouseOver="hilite(38823)" onMouseOut="lolite()" onClick="logVariable('oldquiz')" href="../../_variables/oldquiz.html">$oldquiz</a>-&gt;<a onClick="logVariable('grade')" class="var it40849" onMouseOver="hilite(40849)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>;
<a name="l126"><span class="linenum"> 126</span></a>  
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">    // Update the database.</span>
<a name="l128"><span class="linenum"> 128</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('instance')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l129"><span class="linenum"> 129</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">    // Do the processing required after an add or an update.</span>
<a name="l132"><span class="linenum"> 132</span></a>      <a class="function" onClick="logFunction('quiz_after_add_or_update')" href="../../_functions/quiz_after_add_or_update.html" onMouseOver="funcPopup(event,'quiz_after_add_or_update')">quiz_after_add_or_update</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>      if (<a class="var it38823" onMouseOver="hilite(38823)" onMouseOut="lolite()" onClick="logVariable('oldquiz')" href="../../_variables/oldquiz.html">$oldquiz</a>-&gt;<a onClick="logVariable('grademethod')" class="var it40849" onMouseOver="hilite(40849)" onMouseOut="lolite()" href="../../_variables/grademethod.html">grademethod</a> != <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('grademethod')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/grademethod.html">grademethod</a>) {
<a name="l135"><span class="linenum"> 135</span></a>          <a class="function" onClick="logFunction('quiz_update_all_final_grades')" href="../../_functions/quiz_update_all_final_grades.html" onMouseOver="funcPopup(event,'quiz_update_all_final_grades')">quiz_update_all_final_grades</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l136"><span class="linenum"> 136</span></a>          <a class="function" onClick="logFunction('quiz_update_grades')" href="../../_functions/quiz_update_grades.html" onMouseOver="funcPopup(event,'quiz_update_grades')">quiz_update_grades</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l137"><span class="linenum"> 137</span></a>      }
<a name="l138"><span class="linenum"> 138</span></a>  
<a name="l139"><span class="linenum"> 139</span></a>      <a class="var it38824" onMouseOver="hilite(38824)" onMouseOut="lolite()" onClick="logVariable('quizdateschanged')" href="../../_variables/quizdateschanged.html">$quizdateschanged</a> = <a class="var it38823" onMouseOver="hilite(38823)" onMouseOut="lolite()" onClick="logVariable('oldquiz')" href="../../_variables/oldquiz.html">$oldquiz</a>-&gt;<a onClick="logVariable('timelimit')" class="var it40849" onMouseOver="hilite(40849)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a>   != <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;timelimit
<a name="l140"><span class="linenum"> 140</span></a>                       || <a class="var it38823" onMouseOver="hilite(38823)" onMouseOut="lolite()" onClick="logVariable('oldquiz')" href="../../_variables/oldquiz.html">$oldquiz</a>-&gt;<a onClick="logVariable('timeclose')" class="var it40849" onMouseOver="hilite(40849)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a>   != <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;timeclose
<a name="l141"><span class="linenum"> 141</span></a>                       || <a class="var it38823" onMouseOver="hilite(38823)" onMouseOut="lolite()" onClick="logVariable('oldquiz')" href="../../_variables/oldquiz.html">$oldquiz</a>-&gt;<a onClick="logVariable('graceperiod')" class="var it40849" onMouseOver="hilite(40849)" onMouseOut="lolite()" href="../../_variables/graceperiod.html">graceperiod</a> != <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('graceperiod')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/graceperiod.html">graceperiod</a>;
<a name="l142"><span class="linenum"> 142</span></a>      if (<a class="var it38824" onMouseOver="hilite(38824)" onMouseOut="lolite()" onClick="logVariable('quizdateschanged')" href="../../_variables/quizdateschanged.html">$quizdateschanged</a>) {
<a name="l143"><span class="linenum"> 143</span></a>          <a class="function" onClick="logFunction('quiz_update_open_attempts')" href="../../_functions/quiz_update_open_attempts.html" onMouseOver="funcPopup(event,'quiz_update_open_attempts')">quiz_update_open_attempts</a>(array('quizid' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l144"><span class="linenum"> 144</span></a>      }
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">    // Delete any previous preview attempts.</span>
<a name="l147"><span class="linenum"> 147</span></a>      <a class="function" onClick="logFunction('quiz_delete_previews')" href="../../_functions/quiz_delete_previews.html" onMouseOver="funcPopup(event,'quiz_delete_previews')">quiz_delete_previews</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l148"><span class="linenum"> 148</span></a>  
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">    // Repaginate, if asked to.</span>
<a name="l150"><span class="linenum"> 150</span></a>      if (!empty(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('repaginatenow')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/repaginatenow.html">repaginatenow</a>)) {
<a name="l151"><span class="linenum"> 151</span></a>          <a class="function" onClick="logFunction('quiz_repaginate_questions')" href="../../_functions/quiz_repaginate_questions.html" onMouseOver="funcPopup(event,'quiz_repaginate_questions')">quiz_repaginate_questions</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('questionsperpage')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/questionsperpage.html">questionsperpage</a>);
<a name="l152"><span class="linenum"> 152</span></a>      }
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>      return true;
<a name="l155"><span class="linenum"> 155</span></a>  }
<a name="l156"><span class="linenum"> 156</span></a>  
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">/**</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment"> * Given an ID of an instance of this module,</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment"> * this function will permanently delete the instance</span>
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment"> * and any data that depends on it.</span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment"> *</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment"> * @param int $id the id of the quiz to delete.</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment"> * @return bool success or failure.</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment"> */</span>
<a name="l165"><span class="linenum"> 165</span></a>  function <a class="function" onClick="logFunction('quiz_delete_instance')" href="../../_functions/quiz_delete_instance.html" onMouseOver="funcPopup(event,'quiz_delete_instance')">quiz_delete_instance</a>(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l166"><span class="linenum"> 166</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('quiz', array('id' =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l169"><span class="linenum"> 169</span></a>  
<a name="l170"><span class="linenum"> 170</span></a>      <a class="function" onClick="logFunction('quiz_delete_all_attempts')" href="../../_functions/quiz_delete_all_attempts.html" onMouseOver="funcPopup(event,'quiz_delete_all_attempts')">quiz_delete_all_attempts</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l171"><span class="linenum"> 171</span></a>      <a class="function" onClick="logFunction('quiz_delete_all_overrides')" href="../../_functions/quiz_delete_all_overrides.html" onMouseOver="funcPopup(event,'quiz_delete_all_overrides')">quiz_delete_all_overrides</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">    // Look for random questions that may no longer be used when this quiz is gone.</span>
<a name="l174"><span class="linenum"> 174</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT q.id
<a name="l175"><span class="linenum"> 175</span></a>                FROM {quiz_slots} slot
<a name="l176"><span class="linenum"> 176</span></a>                JOIN {question} q ON q.id = slot.questionid
<a name="l177"><span class="linenum"> 177</span></a>               WHERE slot.quizid = ? AND q.qtype = ?&quot;;
<a name="l178"><span class="linenum"> 178</span></a>      <a class="var it3258" onMouseOver="hilite(3258)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../../_variables/questionids.html">$questionids</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_fieldset_sql')" href="../../_functions/get_fieldset_sql.html" onMouseOver="funcPopup(event,'get_fieldset_sql')">get_fieldset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'random'));
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">    // We need to do this before we try and delete randoms, otherwise they would still be 'in use'.</span>
<a name="l181"><span class="linenum"> 181</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('quiz_slots', array('quizid' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l182"><span class="linenum"> 182</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('quiz_sections', array('quizid' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>      foreach (<a class="var it3258" onMouseOver="hilite(3258)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../../_variables/questionids.html">$questionids</a> as <a class="var it1004" onMouseOver="hilite(1004)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../../_variables/questionid.html">$questionid</a>) {
<a name="l185"><span class="linenum"> 185</span></a>          <a class="function" onClick="logFunction('question_delete_question')" href="../../_functions/question_delete_question.html" onMouseOver="funcPopup(event,'question_delete_question')">question_delete_question</a>(<a class="var it1004" onMouseOver="hilite(1004)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../../_variables/questionid.html">$questionid</a>);
<a name="l186"><span class="linenum"> 186</span></a>      }
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('quiz_feedback', array('quizid' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>      <a class="class" onClick="logClass('quiz_access_manager')" href="../../_classes/quiz_access_manager.html" onMouseOver="classPopup(event,'quiz_access_manager')">quiz_access_manager</a>::<a class="function" onClick="logFunction('delete_settings')" href="../../_functions/delete_settings.html" onMouseOver="funcPopup(event,'delete_settings')">delete_settings</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>      <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', array('modulename' =&gt; 'quiz', 'instance' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l193"><span class="linenum"> 193</span></a>      foreach (<a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> as <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>) {
<a name="l194"><span class="linenum"> 194</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l196"><span class="linenum"> 196</span></a>      }
<a name="l197"><span class="linenum"> 197</span></a>  
<a name="l198"><span class="linenum"> 198</span></a>      <a class="function" onClick="logFunction('quiz_grade_item_delete')" href="../../_functions/quiz_grade_item_delete.html" onMouseOver="funcPopup(event,'quiz_grade_item_delete')">quiz_grade_item_delete</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l199"><span class="linenum"> 199</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('quiz', array('id' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>      return true;
<a name="l202"><span class="linenum"> 202</span></a>  }
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">/**</span>
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment"> * Deletes a quiz override from the database and clears any corresponding calendar events</span>
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment"> *</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment"> * @param object $quiz The quiz object.</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment"> * @param int $overrideid The id of the override being deleted</span>
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment"> * @return bool true on success</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment"> */</span>
<a name="l211"><span class="linenum"> 211</span></a>  function <a class="function" onClick="logFunction('quiz_delete_override')" href="../../_functions/quiz_delete_override.html" onMouseOver="funcPopup(event,'quiz_delete_override')">quiz_delete_override</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it23930" onMouseOver="hilite(23930)" onMouseOut="lolite()" onClick="logVariable('overrideid')" href="../../_variables/overrideid.html">$overrideid</a>) {
<a name="l212"><span class="linenum"> 212</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>      if (!isset(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('cmid')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>)) {
<a name="l215"><span class="linenum"> 215</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('course')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>);
<a name="l216"><span class="linenum"> 216</span></a>          <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('cmid')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l217"><span class="linenum"> 217</span></a>      }
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>      <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('quiz_overrides', array('id' =&gt; <a class="var it23930" onMouseOver="hilite(23930)" onMouseOut="lolite()" onClick="logVariable('overrideid')" href="../../_variables/overrideid.html">$overrideid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">    // Delete the events.</span>
<a name="l222"><span class="linenum"> 222</span></a>      <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', array('modulename' =&gt; 'quiz',
<a name="l223"><span class="linenum"> 223</span></a>              'instance' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'groupid' =&gt; (int)<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('groupid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>,
<a name="l224"><span class="linenum"> 224</span></a>              'userid' =&gt; (int)<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('userid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>));
<a name="l225"><span class="linenum"> 225</span></a>      foreach (<a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> as <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>) {
<a name="l226"><span class="linenum"> 226</span></a>          <a class="var it23932" onMouseOver="hilite(23932)" onMouseOut="lolite()" onClick="logVariable('eventold')" href="../../_variables/eventold.html">$eventold</a> = <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l227"><span class="linenum"> 227</span></a>          <a class="var it23932" onMouseOver="hilite(23932)" onMouseOut="lolite()" onClick="logVariable('eventold')" href="../../_variables/eventold.html">$eventold</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l228"><span class="linenum"> 228</span></a>      }
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('quiz_overrides', array('id' =&gt; <a class="var it23930" onMouseOver="hilite(23930)" onMouseOut="lolite()" onClick="logVariable('overrideid')" href="../../_variables/overrideid.html">$overrideid</a>));
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment">    // Set the common parameters for one of the events we will be triggering.</span>
<a name="l233"><span class="linenum"> 233</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(
<a name="l234"><span class="linenum"> 234</span></a>          'objectid' =&gt; <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('id')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l235"><span class="linenum"> 235</span></a>          'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('cmid')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>),
<a name="l236"><span class="linenum"> 236</span></a>          'other' =&gt; array(
<a name="l237"><span class="linenum"> 237</span></a>              'quizid' =&gt; <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;quiz
<a name="l238"><span class="linenum"> 238</span></a>          )
<a name="l239"><span class="linenum"> 239</span></a>      );
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">    // Determine which override deleted event to fire.</span>
<a name="l241"><span class="linenum"> 241</span></a>      if (!empty(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('userid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>)) {
<a name="l242"><span class="linenum"> 242</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['relateduserid'] = <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('userid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l243"><span class="linenum"> 243</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_quiz\event\<a class="class" onClick="logClass('user_override_deleted')" href="../../_classes/user_override_deleted.html" onMouseOver="classPopup(event,'user_override_deleted')">user_override_deleted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l244"><span class="linenum"> 244</span></a>      } else {
<a name="l245"><span class="linenum"> 245</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['other']['groupid'] = <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('groupid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>;
<a name="l246"><span class="linenum"> 246</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_quiz\event\<a class="class" onClick="logClass('group_override_deleted')" href="../../_classes/group_override_deleted.html" onMouseOver="classPopup(event,'group_override_deleted')">group_override_deleted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l247"><span class="linenum"> 247</span></a>      }
<a name="l248"><span class="linenum"> 248</span></a>  
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">    // Trigger the override deleted event.</span>
<a name="l250"><span class="linenum"> 250</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('quiz_overrides', <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>);
<a name="l251"><span class="linenum"> 251</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>      return true;
<a name="l254"><span class="linenum"> 254</span></a>  }
<a name="l255"><span class="linenum"> 255</span></a>  
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">/**</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment"> * Deletes all quiz overrides from the database and clears any corresponding calendar events</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment"> *</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment"> * @param object $quiz The quiz object.</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment"> */</span>
<a name="l261"><span class="linenum"> 261</span></a>  function <a class="function" onClick="logFunction('quiz_delete_all_overrides')" href="../../_functions/quiz_delete_all_overrides.html" onMouseOver="funcPopup(event,'quiz_delete_all_overrides')">quiz_delete_all_overrides</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l262"><span class="linenum"> 262</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>      <a class="var it668" onMouseOver="hilite(668)" onMouseOut="lolite()" onClick="logVariable('overrides')" href="../../_variables/overrides.html">$overrides</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('quiz_overrides', array('quiz' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'id');
<a name="l265"><span class="linenum"> 265</span></a>      foreach (<a class="var it668" onMouseOver="hilite(668)" onMouseOut="lolite()" onClick="logVariable('overrides')" href="../../_variables/overrides.html">$overrides</a> as <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>) {
<a name="l266"><span class="linenum"> 266</span></a>          <a class="function" onClick="logFunction('quiz_delete_override')" href="../../_functions/quiz_delete_override.html" onMouseOver="funcPopup(event,'quiz_delete_override')">quiz_delete_override</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('id')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l267"><span class="linenum"> 267</span></a>      }
<a name="l268"><span class="linenum"> 268</span></a>  }
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">/**</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment"> * Updates a quiz object with override information for a user.</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment"> *</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment"> * Algorithm:  For each quiz setting, if there is a matching user-specific override,</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment"> *   then use that otherwise, if there are group-specific overrides, return the most</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment"> *   lenient combination of them.  If neither applies, leave the quiz setting unchanged.</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment"> *</span>
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment"> *   Special case: if there is more than one password that applies to the user, then</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment"> *   quiz-&gt;extrapasswords will contain an array of strings giving the remaining</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment"> *   passwords.</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment"> *</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment"> * @param object $quiz The quiz object.</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment"> * @param int $userid The userid.</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment"> * @return object $quiz The updated quiz object.</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment"> */</span>
<a name="l285"><span class="linenum"> 285</span></a>  function <a class="function" onClick="logFunction('quiz_update_effective_access')" href="../../_functions/quiz_update_effective_access.html" onMouseOver="funcPopup(event,'quiz_update_effective_access')">quiz_update_effective_access</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l286"><span class="linenum"> 286</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">    // Check for user override.</span>
<a name="l289"><span class="linenum"> 289</span></a>      <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('quiz_overrides', array('quiz' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>      if (!<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>) {
<a name="l292"><span class="linenum"> 292</span></a>          <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a> = new stdClass();
<a name="l293"><span class="linenum"> 293</span></a>          <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timeopen')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timeopen.html">timeopen</a> = null;
<a name="l294"><span class="linenum"> 294</span></a>          <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timeclose')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a> = null;
<a name="l295"><span class="linenum"> 295</span></a>          <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timelimit')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a> = null;
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('attempts')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/attempts.html">attempts</a> = null;
<a name="l297"><span class="linenum"> 297</span></a>          <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/password.html">password</a> = null;
<a name="l298"><span class="linenum"> 298</span></a>      }
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">    // Check for group overrides.</span>
<a name="l301"><span class="linenum"> 301</span></a>      <a class="var it2827" onMouseOver="hilite(2827)" onMouseOut="lolite()" onClick="logVariable('groupings')" href="../../_variables/groupings.html">$groupings</a> = <a class="function" onClick="logFunction('groups_get_user_groups')" href="../../_functions/groups_get_user_groups.html" onMouseOver="funcPopup(event,'groups_get_user_groups')">groups_get_user_groups</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('course')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>      if (!empty(<a class="var it2827" onMouseOver="hilite(2827)" onMouseOut="lolite()" onClick="logVariable('groupings')" href="../../_variables/groupings.html">$groupings</a>[0])) {
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">        // Select all overrides that apply to the User's groups.</span>
<a name="l305"><span class="linenum"> 305</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2018" onMouseOver="hilite(2018)" onMouseOut="lolite()" onClick="logVariable('extra')" href="../../_variables/extra.html">$extra</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it2827" onMouseOver="hilite(2827)" onMouseOut="lolite()" onClick="logVariable('groupings')" href="../../_variables/groupings.html">$groupings</a>[0]));
<a name="l306"><span class="linenum"> 306</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT * FROM {quiz_overrides}
<a name="l307"><span class="linenum"> 307</span></a>                  WHERE groupid <a class="var it2018" onMouseOver="hilite(2018)" onMouseOut="lolite()" onClick="logVariable('extra')" href="../../_variables/extra.html">$extra</a> AND quiz = ?&quot;;
<a name="l308"><span class="linenum"> 308</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l309"><span class="linenum"> 309</span></a>          <a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l310"><span class="linenum"> 310</span></a>  
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">        // Combine the overrides.</span>
<a name="l312"><span class="linenum"> 312</span></a>          <a class="var it38826" onMouseOver="hilite(38826)" onMouseOut="lolite()" onClick="logVariable('opens')" href="../../_variables/opens.html">$opens</a> = array();
<a name="l313"><span class="linenum"> 313</span></a>          <a class="var it38827" onMouseOver="hilite(38827)" onMouseOut="lolite()" onClick="logVariable('closes')" href="../../_variables/closes.html">$closes</a> = array();
<a name="l314"><span class="linenum"> 314</span></a>          <a class="var it17920" onMouseOver="hilite(17920)" onMouseOut="lolite()" onClick="logVariable('limits')" href="../../_variables/limits.html">$limits</a> = array();
<a name="l315"><span class="linenum"> 315</span></a>          <a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> = array();
<a name="l316"><span class="linenum"> 316</span></a>          <a class="var it23937" onMouseOver="hilite(23937)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a> = array();
<a name="l317"><span class="linenum"> 317</span></a>  
<a name="l318"><span class="linenum"> 318</span></a>          foreach (<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> as <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>) {
<a name="l319"><span class="linenum"> 319</span></a>              if (isset(<a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('timeopen')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/timeopen.html">timeopen</a>)) {
<a name="l320"><span class="linenum"> 320</span></a>                  <a class="var it38826" onMouseOver="hilite(38826)" onMouseOut="lolite()" onClick="logVariable('opens')" href="../../_variables/opens.html">$opens</a>[] = <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('timeopen')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/timeopen.html">timeopen</a>;
<a name="l321"><span class="linenum"> 321</span></a>              }
<a name="l322"><span class="linenum"> 322</span></a>              if (isset(<a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('timeclose')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a>)) {
<a name="l323"><span class="linenum"> 323</span></a>                  <a class="var it38827" onMouseOver="hilite(38827)" onMouseOut="lolite()" onClick="logVariable('closes')" href="../../_variables/closes.html">$closes</a>[] = <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('timeclose')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a>;
<a name="l324"><span class="linenum"> 324</span></a>              }
<a name="l325"><span class="linenum"> 325</span></a>              if (isset(<a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('timelimit')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a>)) {
<a name="l326"><span class="linenum"> 326</span></a>                  <a class="var it17920" onMouseOver="hilite(17920)" onMouseOut="lolite()" onClick="logVariable('limits')" href="../../_variables/limits.html">$limits</a>[] = <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('timelimit')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a>;
<a name="l327"><span class="linenum"> 327</span></a>              }
<a name="l328"><span class="linenum"> 328</span></a>              if (isset(<a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('attempts')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/attempts.html">attempts</a>)) {
<a name="l329"><span class="linenum"> 329</span></a>                  <a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>[] = <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('attempts')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/attempts.html">attempts</a>;
<a name="l330"><span class="linenum"> 330</span></a>              }
<a name="l331"><span class="linenum"> 331</span></a>              if (isset(<a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('password')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/password.html">password</a>)) {
<a name="l332"><span class="linenum"> 332</span></a>                  <a class="var it23937" onMouseOver="hilite(23937)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>[] = <a class="var it23938" onMouseOver="hilite(23938)" onMouseOut="lolite()" onClick="logVariable('gpoverride')" href="../../_variables/gpoverride.html">$gpoverride</a>-&gt;<a onClick="logVariable('password')" class="var it40851" onMouseOver="hilite(40851)" onMouseOut="lolite()" href="../../_variables/password.html">password</a>;
<a name="l333"><span class="linenum"> 333</span></a>              }
<a name="l334"><span class="linenum"> 334</span></a>          }
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">        // If there is a user override for a setting, ignore the group override.</span>
<a name="l336"><span class="linenum"> 336</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timeopen')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timeopen.html">timeopen</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it38826" onMouseOver="hilite(38826)" onMouseOut="lolite()" onClick="logVariable('opens')" href="../../_variables/opens.html">$opens</a>)) {
<a name="l337"><span class="linenum"> 337</span></a>              <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timeopen')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timeopen.html">timeopen</a> = <a class="phpfunction" onClick="logFunction('min')" href="../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(<a class="var it38826" onMouseOver="hilite(38826)" onMouseOut="lolite()" onClick="logVariable('opens')" href="../../_variables/opens.html">$opens</a>);
<a name="l338"><span class="linenum"> 338</span></a>          }
<a name="l339"><span class="linenum"> 339</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timeclose')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it38827" onMouseOver="hilite(38827)" onMouseOut="lolite()" onClick="logVariable('closes')" href="../../_variables/closes.html">$closes</a>)) {
<a name="l340"><span class="linenum"> 340</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(0, <a class="var it38827" onMouseOver="hilite(38827)" onMouseOut="lolite()" onClick="logVariable('closes')" href="../../_variables/closes.html">$closes</a>)) {
<a name="l341"><span class="linenum"> 341</span></a>                  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timeclose')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a> = 0;
<a name="l342"><span class="linenum"> 342</span></a>              } else {
<a name="l343"><span class="linenum"> 343</span></a>                  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timeclose')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it38827" onMouseOver="hilite(38827)" onMouseOut="lolite()" onClick="logVariable('closes')" href="../../_variables/closes.html">$closes</a>);
<a name="l344"><span class="linenum"> 344</span></a>              }
<a name="l345"><span class="linenum"> 345</span></a>          }
<a name="l346"><span class="linenum"> 346</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timelimit')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it17920" onMouseOver="hilite(17920)" onMouseOut="lolite()" onClick="logVariable('limits')" href="../../_variables/limits.html">$limits</a>)) {
<a name="l347"><span class="linenum"> 347</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(0, <a class="var it17920" onMouseOver="hilite(17920)" onMouseOut="lolite()" onClick="logVariable('limits')" href="../../_variables/limits.html">$limits</a>)) {
<a name="l348"><span class="linenum"> 348</span></a>                  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timelimit')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a> = 0;
<a name="l349"><span class="linenum"> 349</span></a>              } else {
<a name="l350"><span class="linenum"> 350</span></a>                  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('timelimit')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/timelimit.html">timelimit</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it17920" onMouseOver="hilite(17920)" onMouseOut="lolite()" onClick="logVariable('limits')" href="../../_variables/limits.html">$limits</a>);
<a name="l351"><span class="linenum"> 351</span></a>              }
<a name="l352"><span class="linenum"> 352</span></a>          }
<a name="l353"><span class="linenum"> 353</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('attempts')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/attempts.html">attempts</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>)) {
<a name="l354"><span class="linenum"> 354</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(0, <a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>)) {
<a name="l355"><span class="linenum"> 355</span></a>                  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('attempts')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/attempts.html">attempts</a> = 0;
<a name="l356"><span class="linenum"> 356</span></a>              } else {
<a name="l357"><span class="linenum"> 357</span></a>                  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('attempts')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/attempts.html">attempts</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>);
<a name="l358"><span class="linenum"> 358</span></a>              }
<a name="l359"><span class="linenum"> 359</span></a>          }
<a name="l360"><span class="linenum"> 360</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/password.html">password</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23937" onMouseOver="hilite(23937)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>)) {
<a name="l361"><span class="linenum"> 361</span></a>              <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('password')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/password.html">password</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it23937" onMouseOver="hilite(23937)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>);
<a name="l362"><span class="linenum"> 362</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23937" onMouseOver="hilite(23937)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>)) {
<a name="l363"><span class="linenum"> 363</span></a>                  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('extrapasswords')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/extrapasswords.html">extrapasswords</a> = <a class="var it23937" onMouseOver="hilite(23937)" onMouseOut="lolite()" onClick="logVariable('passwords')" href="../../_variables/passwords.html">$passwords</a>;
<a name="l364"><span class="linenum"> 364</span></a>              }
<a name="l365"><span class="linenum"> 365</span></a>          }
<a name="l366"><span class="linenum"> 366</span></a>  
<a name="l367"><span class="linenum"> 367</span></a>      }
<a name="l368"><span class="linenum"> 368</span></a>  
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">    // Merge with quiz defaults.</span>
<a name="l370"><span class="linenum"> 370</span></a>      <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a> = array('timeopen', 'timeclose', 'timelimit', 'attempts', 'password', 'extrapasswords');
<a name="l371"><span class="linenum"> 371</span></a>      foreach (<a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>) {
<a name="l372"><span class="linenum"> 372</span></a>          if (isset(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;{<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>})) {
<a name="l373"><span class="linenum"> 373</span></a>              <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;{<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>} = <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;{<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>};
<a name="l374"><span class="linenum"> 374</span></a>          }
<a name="l375"><span class="linenum"> 375</span></a>      }
<a name="l376"><span class="linenum"> 376</span></a>  
<a name="l377"><span class="linenum"> 377</span></a>      return <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>;
<a name="l378"><span class="linenum"> 378</span></a>  }
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">/**</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment"> * Delete all the attempts belonging to a quiz.</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment"> *</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment"> * @param object $quiz The quiz object.</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment"> */</span>
<a name="l385"><span class="linenum"> 385</span></a>  function <a class="function" onClick="logFunction('quiz_delete_all_attempts')" href="../../_functions/quiz_delete_all_attempts.html" onMouseOver="funcPopup(event,'quiz_delete_all_attempts')">quiz_delete_all_attempts</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l386"><span class="linenum"> 386</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l387"><span class="linenum"> 387</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/quiz/locallib.php.html">/mod/quiz/locallib.php</a>');
<a name="l388"><span class="linenum"> 388</span></a>      question_engine::<a class="function" onClick="logFunction('delete_questions_usage_by_activities')" href="../../_functions/delete_questions_usage_by_activities.html" onMouseOver="funcPopup(event,'delete_questions_usage_by_activities')">delete_questions_usage_by_activities</a>(<span class="keyword">new </span><a class="class" onClick="logClass('qubaids_for_quiz')" href="../../_classes/qubaids_for_quiz.html" onMouseOver="classPopup(event,'qubaids_for_quiz')">qubaids_for_quiz</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l389"><span class="linenum"> 389</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('quiz_attempts', array('quiz' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l390"><span class="linenum"> 390</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('quiz_grades', array('quiz' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l391"><span class="linenum"> 391</span></a>  }
<a name="l392"><span class="linenum"> 392</span></a>  
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">/**</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment"> * Get the best current grade for a particular user in a quiz.</span>
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment"> *</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment"> * @param object $quiz the quiz settings.</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment"> * @param int $userid the id of the user.</span>
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment"> * @return float the user's current grade for this quiz, or null if this user does</span>
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment"> * not have a grade on this quiz.</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment"> */</span>
<a name="l401"><span class="linenum"> 401</span></a>  function <a class="function" onClick="logFunction('quiz_get_best_grade')" href="../../_functions/quiz_get_best_grade.html" onMouseOver="funcPopup(event,'quiz_get_best_grade')">quiz_get_best_grade</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l402"><span class="linenum"> 402</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l403"><span class="linenum"> 403</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('quiz_grades', 'grade',
<a name="l404"><span class="linenum"> 404</span></a>              array('quiz' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l405"><span class="linenum"> 405</span></a>  
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">    // Need to detect errors/no result, without catching 0 grades.</span>
<a name="l407"><span class="linenum"> 407</span></a>      if (<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> === false) {
<a name="l408"><span class="linenum"> 408</span></a>          return null;
<a name="l409"><span class="linenum"> 409</span></a>      }
<a name="l410"><span class="linenum"> 410</span></a>  
<a name="l411"><span class="linenum"> 411</span></a>      return <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> + 0; <span class="comment">// Convert to number.</span>
<a name="l412"><span class="linenum"> 412</span></a>  }
<a name="l413"><span class="linenum"> 413</span></a>  
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">/**</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment"> * Is this a graded quiz? If this method returns true, you can assume that</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment"> * $quiz-&gt;grade and $quiz-&gt;sumgrades are non-zero (for example, if you want to</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment"> * divide by them).</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment"> *</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment"> * @param object $quiz a row from the quiz table.</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment"> * @return bool whether this is a graded quiz.</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment"> */</span>
<a name="l422"><span class="linenum"> 422</span></a>  function <a class="function" onClick="logFunction('quiz_has_grades')" href="../../_functions/quiz_has_grades.html" onMouseOver="funcPopup(event,'quiz_has_grades')">quiz_has_grades</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l423"><span class="linenum"> 423</span></a>      return <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('grade')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> &gt;= 0.000005 &amp;&amp; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('sumgrades')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/sumgrades.html">sumgrades</a> &gt;= 0.000005;
<a name="l424"><span class="linenum"> 424</span></a>  }
<a name="l425"><span class="linenum"> 425</span></a>  
<a name="l426"><span class="linenum"> 426</span></a>  <span class="comment">/**</span>
<a name="l427"><span class="linenum"> 427</span></a>  <span class="comment"> * Does this quiz allow multiple tries?</span>
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment"> *</span>
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment"> * @return bool</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment"> */</span>
<a name="l431"><span class="linenum"> 431</span></a>  function <a class="function" onClick="logFunction('quiz_allows_multiple_tries')" href="../../_functions/quiz_allows_multiple_tries.html" onMouseOver="funcPopup(event,'quiz_allows_multiple_tries')">quiz_allows_multiple_tries</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l432"><span class="linenum"> 432</span></a>      <a class="var it15840" onMouseOver="hilite(15840)" onMouseOut="lolite()" onClick="logVariable('bt')" href="../../_variables/bt.html">$bt</a> = question_engine::<a class="function" onClick="logFunction('get_behaviour_type')" href="../../_functions/get_behaviour_type.html" onMouseOver="funcPopup(event,'get_behaviour_type')">get_behaviour_type</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('preferredbehaviour')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/preferredbehaviour.html">preferredbehaviour</a>);
<a name="l433"><span class="linenum"> 433</span></a>      return <a class="var it15840" onMouseOver="hilite(15840)" onMouseOut="lolite()" onClick="logVariable('bt')" href="../../_variables/bt.html">$bt</a>-&gt;<a class="function" onClick="logFunction('allows_multiple_submitted_responses')" href="../../_functions/allows_multiple_submitted_responses.html" onMouseOver="funcPopup(event,'allows_multiple_submitted_responses')">allows_multiple_submitted_responses</a>();
<a name="l434"><span class="linenum"> 434</span></a>  }
<a name="l435"><span class="linenum"> 435</span></a>  
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">/**</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment"> * Return a small object with summary information about what a</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment"> * user has done with a given particular instance of this module</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment"> * Used for user activity reports.</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment"> * $return-&gt;time = the time they did it</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment"> * $return-&gt;info = a short text description</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment"> *</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment"> * @param object $course</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment"> * @param object $user</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment"> * @param object $mod</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment"> * @param object $quiz</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment"> * @return object|null</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment"> */</span>
<a name="l449"><span class="linenum"> 449</span></a>  function <a class="function" onClick="logFunction('quiz_user_outline')" href="../../_functions/quiz_user_outline.html" onMouseOver="funcPopup(event,'quiz_user_outline')">quiz_user_outline</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l450"><span class="linenum"> 450</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l451"><span class="linenum"> 451</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l452"><span class="linenum"> 452</span></a>      <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod', 'quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l453"><span class="linenum"> 453</span></a>  
<a name="l454"><span class="linenum"> 454</span></a>      if (empty(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades)) {
<a name="l455"><span class="linenum"> 455</span></a>          return null;
<a name="l456"><span class="linenum"> 456</span></a>      } else {
<a name="l457"><span class="linenum"> 457</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades);
<a name="l458"><span class="linenum"> 458</span></a>      }
<a name="l459"><span class="linenum"> 459</span></a>  
<a name="l460"><span class="linenum"> 460</span></a>      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = new stdClass();
<a name="l461"><span class="linenum"> 461</span></a>      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('info')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/info.html">info</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade') . ': ' . <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/str_long_grade.html">str_long_grade</a>;
<a name="l462"><span class="linenum"> 462</span></a>  
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">    // Datesubmitted == time created. dategraded == time modified or time overridden</span>
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment">    // if grade was last modified by the user themselves use date graded. Otherwise use</span>
<a name="l465"><span class="linenum"> 465</span></a>  <span class="comment">    // date submitted.</span>
<a name="l466"><span class="linenum"> 466</span></a>  <span class="comment">    // TODO: move this copied &amp; pasted code somewhere in the grades API. See MDL-26704.</span>
<a name="l467"><span class="linenum"> 467</span></a>      if (<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('usermodified')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/usermodified.html">usermodified</a> == <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> || empty(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('datesubmitted')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/datesubmitted.html">datesubmitted</a>)) {
<a name="l468"><span class="linenum"> 468</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('time')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/time.html">time</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('dategraded')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/dategraded.html">dategraded</a>;
<a name="l469"><span class="linenum"> 469</span></a>      } else {
<a name="l470"><span class="linenum"> 470</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('time')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/time.html">time</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('datesubmitted')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/datesubmitted.html">datesubmitted</a>;
<a name="l471"><span class="linenum"> 471</span></a>      }
<a name="l472"><span class="linenum"> 472</span></a>  
<a name="l473"><span class="linenum"> 473</span></a>      return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l474"><span class="linenum"> 474</span></a>  }
<a name="l475"><span class="linenum"> 475</span></a>  
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">/**</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment"> * Print a detailed representation of what a  user has done with</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment"> * a given particular instance of this module, for user activity reports.</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment"> *</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment"> * @param object $course</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment"> * @param object $user</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment"> * @param object $mod</span>
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment"> * @param object $quiz</span>
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment"> * @return bool</span>
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment"> */</span>
<a name="l486"><span class="linenum"> 486</span></a>  function <a class="function" onClick="logFunction('quiz_user_complete')" href="../../_functions/quiz_user_complete.html" onMouseOver="funcPopup(event,'quiz_user_complete')">quiz_user_complete</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l487"><span class="linenum"> 487</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l488"><span class="linenum"> 488</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l489"><span class="linenum"> 489</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/quiz/locallib.php.html">/mod/quiz/locallib.php</a>');
<a name="l490"><span class="linenum"> 490</span></a>  
<a name="l491"><span class="linenum"> 491</span></a>      <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod', 'quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l492"><span class="linenum"> 492</span></a>      if (!empty(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades)) {
<a name="l493"><span class="linenum"> 493</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades);
<a name="l494"><span class="linenum"> 494</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('container')" href="../../_functions/container.html" onMouseOver="funcPopup(event,'container')">container</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade').': '.<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/str_long_grade.html">str_long_grade</a>);
<a name="l495"><span class="linenum"> 495</span></a>          if (<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/str_feedback.html">str_feedback</a>) {
<a name="l496"><span class="linenum"> 496</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('container')" href="../../_functions/container.html" onMouseOver="funcPopup(event,'container')">container</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('feedback').': '.<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/str_feedback.html">str_feedback</a>);
<a name="l497"><span class="linenum"> 497</span></a>          }
<a name="l498"><span class="linenum"> 498</span></a>      }
<a name="l499"><span class="linenum"> 499</span></a>  
<a name="l500"><span class="linenum"> 500</span></a>      if (<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('quiz_attempts',
<a name="l501"><span class="linenum"> 501</span></a>              array('userid' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'quiz' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'attempt')) {
<a name="l502"><span class="linenum"> 502</span></a>          foreach (<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> as <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>) {
<a name="l503"><span class="linenum"> 503</span></a>              echo <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('attempt', 'quiz', <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('attempt')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/attempt.html">attempt</a>) . ': ';
<a name="l504"><span class="linenum"> 504</span></a>              if (<a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('state')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/state.html">state</a> != <a class="class" onClick="logClass('quiz_attempt')" href="../../_classes/quiz_attempt.html" onMouseOver="classPopup(event,'quiz_attempt')">quiz_attempt</a>::FINISHED) {
<a name="l505"><span class="linenum"> 505</span></a>                  echo <a class="function" onClick="logFunction('quiz_attempt_state_name')" href="../../_functions/quiz_attempt_state_name.html" onMouseOver="funcPopup(event,'quiz_attempt_state_name')">quiz_attempt_state_name</a>(<a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('state')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/state.html">state</a>);
<a name="l506"><span class="linenum"> 506</span></a>              } else {
<a name="l507"><span class="linenum"> 507</span></a>                  echo <a class="function" onClick="logFunction('quiz_format_grade')" href="../../_functions/quiz_format_grade.html" onMouseOver="funcPopup(event,'quiz_format_grade')">quiz_format_grade</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('sumgrades')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/sumgrades.html">sumgrades</a>) . '/' .
<a name="l508"><span class="linenum"> 508</span></a>                          <a class="function" onClick="logFunction('quiz_format_grade')" href="../../_functions/quiz_format_grade.html" onMouseOver="funcPopup(event,'quiz_format_grade')">quiz_format_grade</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('sumgrades')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/sumgrades.html">sumgrades</a>);
<a name="l509"><span class="linenum"> 509</span></a>              }
<a name="l510"><span class="linenum"> 510</span></a>              echo ' - '.<a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>).'&lt;br /&gt;';
<a name="l511"><span class="linenum"> 511</span></a>          }
<a name="l512"><span class="linenum"> 512</span></a>      } else {
<a name="l513"><span class="linenum"> 513</span></a>          <a class="function" onClick="logFunction('print_string')" href="../../_functions/print_string.html" onMouseOver="funcPopup(event,'print_string')">print_string</a>('noattempts', 'quiz');
<a name="l514"><span class="linenum"> 514</span></a>      }
<a name="l515"><span class="linenum"> 515</span></a>  
<a name="l516"><span class="linenum"> 516</span></a>      return true;
<a name="l517"><span class="linenum"> 517</span></a>  }
<a name="l518"><span class="linenum"> 518</span></a>  
<a name="l519"><span class="linenum"> 519</span></a>  <span class="comment">/**</span>
<a name="l520"><span class="linenum"> 520</span></a>  <span class="comment"> * Quiz periodic clean-up tasks.</span>
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment"> */</span>
<a name="l522"><span class="linenum"> 522</span></a>  function <a class="function" onClick="logFunction('quiz_cron')" href="../../_functions/quiz_cron.html" onMouseOver="funcPopup(event,'quiz_cron')">quiz_cron</a>() {
<a name="l523"><span class="linenum"> 523</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l524"><span class="linenum"> 524</span></a>  
<a name="l525"><span class="linenum"> 525</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/quiz/cronlib.php.html">/mod/quiz/cronlib.php</a>');
<a name="l526"><span class="linenum"> 526</span></a>      <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('');
<a name="l527"><span class="linenum"> 527</span></a>  
<a name="l528"><span class="linenum"> 528</span></a>      <a class="var it2489" onMouseOver="hilite(2489)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l529"><span class="linenum"> 529</span></a>      <a class="var it11844" onMouseOver="hilite(11844)" onMouseOut="lolite()" onClick="logVariable('overduehander')" href="../../_variables/overduehander.html">$overduehander</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_quiz_overdue_attempt_updater')" href="../../_classes/mod_quiz_overdue_attempt_updater.html" onMouseOver="classPopup(event,'mod_quiz_overdue_attempt_updater')">mod_quiz_overdue_attempt_updater</a>();
<a name="l530"><span class="linenum"> 530</span></a>  
<a name="l531"><span class="linenum"> 531</span></a>      <a class="var it33743" onMouseOver="hilite(33743)" onMouseOut="lolite()" onClick="logVariable('processto')" href="../../_variables/processto.html">$processto</a> = <a class="var it2489" onMouseOver="hilite(2489)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a> - <a class="function" onClick="logFunction('get_config')" href="../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('quiz', 'graceperiodmin');
<a name="l532"><span class="linenum"> 532</span></a>  
<a name="l533"><span class="linenum"> 533</span></a>      <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('  Looking for quiz overdue quiz attempts...');
<a name="l534"><span class="linenum"> 534</span></a>  
<a name="l535"><span class="linenum"> 535</span></a>      <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>, <a class="var it33745" onMouseOver="hilite(33745)" onMouseOut="lolite()" onClick="logVariable('quizcount')" href="../../_variables/quizcount.html">$quizcount</a>) = <a class="var it11844" onMouseOver="hilite(11844)" onMouseOut="lolite()" onClick="logVariable('overduehander')" href="../../_variables/overduehander.html">$overduehander</a>-&gt;<a class="function" onClick="logFunction('update_overdue_attempts')" href="../../_functions/update_overdue_attempts.html" onMouseOver="funcPopup(event,'update_overdue_attempts')">update_overdue_attempts</a>(<a class="var it2489" onMouseOver="hilite(2489)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a>, <a class="var it33743" onMouseOver="hilite(33743)" onMouseOut="lolite()" onClick="logVariable('processto')" href="../../_variables/processto.html">$processto</a>);
<a name="l536"><span class="linenum"> 536</span></a>  
<a name="l537"><span class="linenum"> 537</span></a>      <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('  Considered ' . <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> . ' attempts in ' . <a class="var it33745" onMouseOver="hilite(33745)" onMouseOut="lolite()" onClick="logVariable('quizcount')" href="../../_variables/quizcount.html">$quizcount</a> . ' quizzes.');
<a name="l538"><span class="linenum"> 538</span></a>  
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">    // Run cron for our sub-plugin types.</span>
<a name="l540"><span class="linenum"> 540</span></a>      <a class="function" onClick="logFunction('cron_execute_plugin_type')" href="../../_functions/cron_execute_plugin_type.html" onMouseOver="funcPopup(event,'cron_execute_plugin_type')">cron_execute_plugin_type</a>('quiz', 'quiz reports');
<a name="l541"><span class="linenum"> 541</span></a>      <a class="function" onClick="logFunction('cron_execute_plugin_type')" href="../../_functions/cron_execute_plugin_type.html" onMouseOver="funcPopup(event,'cron_execute_plugin_type')">cron_execute_plugin_type</a>('quizaccess', 'quiz access rules');
<a name="l542"><span class="linenum"> 542</span></a>  
<a name="l543"><span class="linenum"> 543</span></a>      return true;
<a name="l544"><span class="linenum"> 544</span></a>  }
<a name="l545"><span class="linenum"> 545</span></a>  
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">/**</span>
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment"> * @param int $quizid the quiz id.</span>
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment"> * @param int $userid the userid.</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment"> * @param string $status 'all', 'finished' or 'unfinished' to control</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment"> * @param bool $includepreviews</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment"> * @return an array of all the user's attempts at this quiz. Returns an empty</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment"> *      array if there are none.</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment"> */</span>
<a name="l554"><span class="linenum"> 554</span></a>  function <a class="function" onClick="logFunction('quiz_get_user_attempts')" href="../../_functions/quiz_get_user_attempts.html" onMouseOver="funcPopup(event,'quiz_get_user_attempts')">quiz_get_user_attempts</a>(<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('quizid')" href="../../_variables/quizid.html">$quizid</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = 'finished', <a class="var it24921" onMouseOver="hilite(24921)" onMouseOut="lolite()" onClick="logVariable('includepreviews')" href="../../_variables/includepreviews.html">$includepreviews</a> = false) {
<a name="l555"><span class="linenum"> 555</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l556"><span class="linenum"> 556</span></a>  <span class="comment">    // TODO MDL-33071 it is very annoying to have to included all of locallib.php</span>
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">    // just to get the quiz_attempt::FINISHED constants, but I will try to sort</span>
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment">    // that out properly for Moodle 2.4. For now, I will just do a quick fix for</span>
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment">    // MDL-33048.</span>
<a name="l560"><span class="linenum"> 560</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/quiz/locallib.php.html">/mod/quiz/locallib.php</a>');
<a name="l561"><span class="linenum"> 561</span></a>  
<a name="l562"><span class="linenum"> 562</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l563"><span class="linenum"> 563</span></a>      switch (<a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>) {
<a name="l564"><span class="linenum"> 564</span></a>          case 'all':
<a name="l565"><span class="linenum"> 565</span></a>              <a class="var it38828" onMouseOver="hilite(38828)" onMouseOut="lolite()" onClick="logVariable('statuscondition')" href="../../_variables/statuscondition.html">$statuscondition</a> = '';
<a name="l566"><span class="linenum"> 566</span></a>              break;
<a name="l567"><span class="linenum"> 567</span></a>  
<a name="l568"><span class="linenum"> 568</span></a>          case 'finished':
<a name="l569"><span class="linenum"> 569</span></a>              <a class="var it38828" onMouseOver="hilite(38828)" onMouseOut="lolite()" onClick="logVariable('statuscondition')" href="../../_variables/statuscondition.html">$statuscondition</a> = ' AND state IN (:state1, :state2)';
<a name="l570"><span class="linenum"> 570</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['state1'] = <a class="class" onClick="logClass('quiz_attempt')" href="../../_classes/quiz_attempt.html" onMouseOver="classPopup(event,'quiz_attempt')">quiz_attempt</a>::FINISHED;
<a name="l571"><span class="linenum"> 571</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['state2'] = <a class="class" onClick="logClass('quiz_attempt')" href="../../_classes/quiz_attempt.html" onMouseOver="classPopup(event,'quiz_attempt')">quiz_attempt</a>::ABANDONED;
<a name="l572"><span class="linenum"> 572</span></a>              break;
<a name="l573"><span class="linenum"> 573</span></a>  
<a name="l574"><span class="linenum"> 574</span></a>          case 'unfinished':
<a name="l575"><span class="linenum"> 575</span></a>              <a class="var it38828" onMouseOver="hilite(38828)" onMouseOut="lolite()" onClick="logVariable('statuscondition')" href="../../_variables/statuscondition.html">$statuscondition</a> = ' AND state IN (:state1, :state2)';
<a name="l576"><span class="linenum"> 576</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['state1'] = <a class="class" onClick="logClass('quiz_attempt')" href="../../_classes/quiz_attempt.html" onMouseOver="classPopup(event,'quiz_attempt')">quiz_attempt</a>::IN_PROGRESS;
<a name="l577"><span class="linenum"> 577</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['state2'] = <a class="class" onClick="logClass('quiz_attempt')" href="../../_classes/quiz_attempt.html" onMouseOver="classPopup(event,'quiz_attempt')">quiz_attempt</a>::OVERDUE;
<a name="l578"><span class="linenum"> 578</span></a>              break;
<a name="l579"><span class="linenum"> 579</span></a>      }
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>      <a class="var it38829" onMouseOver="hilite(38829)" onMouseOut="lolite()" onClick="logVariable('previewclause')" href="../../_variables/previewclause.html">$previewclause</a> = '';
<a name="l582"><span class="linenum"> 582</span></a>      if (!<a class="var it24921" onMouseOver="hilite(24921)" onMouseOut="lolite()" onClick="logVariable('includepreviews')" href="../../_variables/includepreviews.html">$includepreviews</a>) {
<a name="l583"><span class="linenum"> 583</span></a>          <a class="var it38829" onMouseOver="hilite(38829)" onMouseOut="lolite()" onClick="logVariable('previewclause')" href="../../_variables/previewclause.html">$previewclause</a> = ' AND preview = 0';
<a name="l584"><span class="linenum"> 584</span></a>      }
<a name="l585"><span class="linenum"> 585</span></a>  
<a name="l586"><span class="linenum"> 586</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['quizid'] = <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('quizid')" href="../../_variables/quizid.html">$quizid</a>;
<a name="l587"><span class="linenum"> 587</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['userid'] = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l588"><span class="linenum"> 588</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('quiz_attempts',
<a name="l589"><span class="linenum"> 589</span></a>              'quiz = :quizid AND userid = :userid' . <a class="var it38829" onMouseOver="hilite(38829)" onMouseOut="lolite()" onClick="logVariable('previewclause')" href="../../_variables/previewclause.html">$previewclause</a> . <a class="var it38828" onMouseOver="hilite(38828)" onMouseOut="lolite()" onClick="logVariable('statuscondition')" href="../../_variables/statuscondition.html">$statuscondition</a>,
<a name="l590"><span class="linenum"> 590</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'attempt ASC');
<a name="l591"><span class="linenum"> 591</span></a>  }
<a name="l592"><span class="linenum"> 592</span></a>  
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment">/**</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment"> * Return grade for given user or all users.</span>
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment"> *</span>
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment"> * @param int $quizid id of quiz</span>
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment"> * @param int $userid optional user id, 0 means all users</span>
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment"> * @return array array of grades, false if none. These are raw grades. They should</span>
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment"> * be processed with quiz_format_grade for display.</span>
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment"> */</span>
<a name="l601"><span class="linenum"> 601</span></a>  function <a class="function" onClick="logFunction('quiz_get_user_grades')" href="../../_functions/quiz_get_user_grades.html" onMouseOver="funcPopup(event,'quiz_get_user_grades')">quiz_get_user_grades</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = 0) {
<a name="l602"><span class="linenum"> 602</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l605"><span class="linenum"> 605</span></a>      <a class="var it7809" onMouseOver="hilite(7809)" onMouseOut="lolite()" onClick="logVariable('usertest')" href="../../_variables/usertest.html">$usertest</a> = '';
<a name="l606"><span class="linenum"> 606</span></a>      if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l607"><span class="linenum"> 607</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l608"><span class="linenum"> 608</span></a>          <a class="var it7809" onMouseOver="hilite(7809)" onMouseOut="lolite()" onClick="logVariable('usertest')" href="../../_variables/usertest.html">$usertest</a> = 'AND u.id = ?';
<a name="l609"><span class="linenum"> 609</span></a>      }
<a name="l610"><span class="linenum"> 610</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;
<a name="l611"><span class="linenum"> 611</span></a>              SELECT
<a name="l612"><span class="linenum"> 612</span></a>                  u.id,
<a name="l613"><span class="linenum"> 613</span></a>                  u.id AS userid,
<a name="l614"><span class="linenum"> 614</span></a>                  qg.grade AS rawgrade,
<a name="l615"><span class="linenum"> 615</span></a>                  qg.timemodified AS dategraded,
<a name="l616"><span class="linenum"> 616</span></a>                  <a class="phpfunction" onClick="logFunction('MAX')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(qa.timefinish) AS datesubmitted
<a name="l617"><span class="linenum"> 617</span></a>  
<a name="l618"><span class="linenum"> 618</span></a>              FROM {user} u
<a name="l619"><span class="linenum"> 619</span></a>              JOIN {quiz_grades} qg ON u.id = qg.userid
<a name="l620"><span class="linenum"> 620</span></a>              JOIN {quiz_attempts} qa ON qa.quiz = qg.quiz AND qa.userid = u.id
<a name="l621"><span class="linenum"> 621</span></a>  
<a name="l622"><span class="linenum"> 622</span></a>              WHERE qg.quiz = ?
<a name="l623"><span class="linenum"> 623</span></a>              <a class="var it7809" onMouseOver="hilite(7809)" onMouseOut="lolite()" onClick="logVariable('usertest')" href="../../_variables/usertest.html">$usertest</a>
<a name="l624"><span class="linenum"> 624</span></a>              GROUP BY u.id, qg.grade, qg.timemodified&quot;, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l625"><span class="linenum"> 625</span></a>  }
<a name="l626"><span class="linenum"> 626</span></a>  
<a name="l627"><span class="linenum"> 627</span></a>  <span class="comment">/**</span>
<a name="l628"><span class="linenum"> 628</span></a>  <span class="comment"> * Round a grade to to the correct number of decimal places, and format it for display.</span>
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment"> *</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment"> * @param object $quiz The quiz table row, only $quiz-&gt;decimalpoints is used.</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment"> * @param float $grade The grade to round.</span>
<a name="l632"><span class="linenum"> 632</span></a>  <span class="comment"> * @return float</span>
<a name="l633"><span class="linenum"> 633</span></a>  <span class="comment"> */</span>
<a name="l634"><span class="linenum"> 634</span></a>  function <a class="function" onClick="logFunction('quiz_format_grade')" href="../../_functions/quiz_format_grade.html" onMouseOver="funcPopup(event,'quiz_format_grade')">quiz_format_grade</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l635"><span class="linenum"> 635</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>)) {
<a name="l636"><span class="linenum"> 636</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('notyetgraded', 'quiz');
<a name="l637"><span class="linenum"> 637</span></a>      }
<a name="l638"><span class="linenum"> 638</span></a>      return <a class="function" onClick="logFunction('format_float')" href="../../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('decimalpoints')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/decimalpoints.html">decimalpoints</a>);
<a name="l639"><span class="linenum"> 639</span></a>  }
<a name="l640"><span class="linenum"> 640</span></a>  
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">/**</span>
<a name="l642"><span class="linenum"> 642</span></a>  <span class="comment"> * Determine the correct number of decimal places required to format a grade.</span>
<a name="l643"><span class="linenum"> 643</span></a>  <span class="comment"> *</span>
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment"> * @param object $quiz The quiz table row, only $quiz-&gt;decimalpoints is used.</span>
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment"> * @return integer</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment"> */</span>
<a name="l647"><span class="linenum"> 647</span></a>  function <a class="function" onClick="logFunction('quiz_get_grade_format')" href="../../_functions/quiz_get_grade_format.html" onMouseOver="funcPopup(event,'quiz_get_grade_format')">quiz_get_grade_format</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l648"><span class="linenum"> 648</span></a>      if (empty(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('questiondecimalpoints')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/questiondecimalpoints.html">questiondecimalpoints</a>)) {
<a name="l649"><span class="linenum"> 649</span></a>          <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('questiondecimalpoints')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/questiondecimalpoints.html">questiondecimalpoints</a> = -1;
<a name="l650"><span class="linenum"> 650</span></a>      }
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>      if (<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('questiondecimalpoints')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/questiondecimalpoints.html">questiondecimalpoints</a> == -1) {
<a name="l653"><span class="linenum"> 653</span></a>          return <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('decimalpoints')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/decimalpoints.html">decimalpoints</a>;
<a name="l654"><span class="linenum"> 654</span></a>      }
<a name="l655"><span class="linenum"> 655</span></a>  
<a name="l656"><span class="linenum"> 656</span></a>      return <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('questiondecimalpoints')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/questiondecimalpoints.html">questiondecimalpoints</a>;
<a name="l657"><span class="linenum"> 657</span></a>  }
<a name="l658"><span class="linenum"> 658</span></a>  
<a name="l659"><span class="linenum"> 659</span></a>  <span class="comment">/**</span>
<a name="l660"><span class="linenum"> 660</span></a>  <span class="comment"> * Round a grade to the correct number of decimal places, and format it for display.</span>
<a name="l661"><span class="linenum"> 661</span></a>  <span class="comment"> *</span>
<a name="l662"><span class="linenum"> 662</span></a>  <span class="comment"> * @param object $quiz The quiz table row, only $quiz-&gt;decimalpoints is used.</span>
<a name="l663"><span class="linenum"> 663</span></a>  <span class="comment"> * @param float $grade The grade to round.</span>
<a name="l664"><span class="linenum"> 664</span></a>  <span class="comment"> * @return float</span>
<a name="l665"><span class="linenum"> 665</span></a>  <span class="comment"> */</span>
<a name="l666"><span class="linenum"> 666</span></a>  function <a class="function" onClick="logFunction('quiz_format_question_grade')" href="../../_functions/quiz_format_question_grade.html" onMouseOver="funcPopup(event,'quiz_format_question_grade')">quiz_format_question_grade</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l667"><span class="linenum"> 667</span></a>      return <a class="function" onClick="logFunction('format_float')" href="../../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="function" onClick="logFunction('quiz_get_grade_format')" href="../../_functions/quiz_get_grade_format.html" onMouseOver="funcPopup(event,'quiz_get_grade_format')">quiz_get_grade_format</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>));
<a name="l668"><span class="linenum"> 668</span></a>  }
<a name="l669"><span class="linenum"> 669</span></a>  
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment">/**</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment"> * Update grades in central gradebook</span>
<a name="l672"><span class="linenum"> 672</span></a>  <span class="comment"> *</span>
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment"> * @category grade</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment"> * @param object $quiz the quiz settings.</span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment"> * @param int $userid specific user only, 0 means all users.</span>
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment"> * @param bool $nullifnone If a single user is specified and $nullifnone is true a grade item with a null rawgrade will be inserted</span>
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment"> */</span>
<a name="l678"><span class="linenum"> 678</span></a>  function <a class="function" onClick="logFunction('quiz_update_grades')" href="../../_functions/quiz_update_grades.html" onMouseOver="funcPopup(event,'quiz_update_grades')">quiz_update_grades</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = 0, <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('nullifnone')" href="../../_variables/nullifnone.html">$nullifnone</a> = true) {
<a name="l679"><span class="linenum"> 679</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l680"><span class="linenum"> 680</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l681"><span class="linenum"> 681</span></a>  
<a name="l682"><span class="linenum"> 682</span></a>      if (<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('grade')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> == 0) {
<a name="l683"><span class="linenum"> 683</span></a>          <a class="function" onClick="logFunction('quiz_grade_item_update')" href="../../_functions/quiz_grade_item_update.html" onMouseOver="funcPopup(event,'quiz_grade_item_update')">quiz_grade_item_update</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l684"><span class="linenum"> 684</span></a>  
<a name="l685"><span class="linenum"> 685</span></a>      } else if (<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="function" onClick="logFunction('quiz_get_user_grades')" href="../../_functions/quiz_get_user_grades.html" onMouseOver="funcPopup(event,'quiz_get_user_grades')">quiz_get_user_grades</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l686"><span class="linenum"> 686</span></a>          <a class="function" onClick="logFunction('quiz_grade_item_update')" href="../../_functions/quiz_grade_item_update.html" onMouseOver="funcPopup(event,'quiz_grade_item_update')">quiz_grade_item_update</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>);
<a name="l687"><span class="linenum"> 687</span></a>  
<a name="l688"><span class="linenum"> 688</span></a>      } else if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> &amp;&amp; <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('nullifnone')" href="../../_variables/nullifnone.html">$nullifnone</a>) {
<a name="l689"><span class="linenum"> 689</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = new stdClass();
<a name="l690"><span class="linenum"> 690</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l691"><span class="linenum"> 691</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/rawgrade.html">rawgrade</a> = null;
<a name="l692"><span class="linenum"> 692</span></a>          <a class="function" onClick="logFunction('quiz_grade_item_update')" href="../../_functions/quiz_grade_item_update.html" onMouseOver="funcPopup(event,'quiz_grade_item_update')">quiz_grade_item_update</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l693"><span class="linenum"> 693</span></a>  
<a name="l694"><span class="linenum"> 694</span></a>      } else {
<a name="l695"><span class="linenum"> 695</span></a>          <a class="function" onClick="logFunction('quiz_grade_item_update')" href="../../_functions/quiz_grade_item_update.html" onMouseOver="funcPopup(event,'quiz_grade_item_update')">quiz_grade_item_update</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l696"><span class="linenum"> 696</span></a>      }
<a name="l697"><span class="linenum"> 697</span></a>  }
<a name="l698"><span class="linenum"> 698</span></a>  
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">/**</span>
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment"> * Create or update the grade item for given quiz</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment"> *</span>
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment"> * @category grade</span>
<a name="l703"><span class="linenum"> 703</span></a>  <span class="comment"> * @param object $quiz object with extra cmidnumber</span>
<a name="l704"><span class="linenum"> 704</span></a>  <span class="comment"> * @param mixed $grades optional array/object of grade(s); 'reset' means reset grades in gradebook</span>
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment"> * @return int 0 if ok, error code otherwise</span>
<a name="l706"><span class="linenum"> 706</span></a>  <span class="comment"> */</span>
<a name="l707"><span class="linenum"> 707</span></a>  function <a class="function" onClick="logFunction('quiz_grade_item_update')" href="../../_functions/quiz_grade_item_update.html" onMouseOver="funcPopup(event,'quiz_grade_item_update')">quiz_grade_item_update</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = null) {
<a name="l708"><span class="linenum"> 708</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l709"><span class="linenum"> 709</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/quiz/locallib.php.html">/mod/quiz/locallib.php</a>');
<a name="l710"><span class="linenum"> 710</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l711"><span class="linenum"> 711</span></a>  
<a name="l712"><span class="linenum"> 712</span></a>      if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('cmidnumber', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>)) { // May not be always present.
<a name="l713"><span class="linenum"> 713</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('itemname' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('name')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, 'idnumber' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('cmidnumber')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/cmidnumber.html">cmidnumber</a>);
<a name="l714"><span class="linenum"> 714</span></a>      } else {
<a name="l715"><span class="linenum"> 715</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('itemname' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('name')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l716"><span class="linenum"> 716</span></a>      }
<a name="l717"><span class="linenum"> 717</span></a>  
<a name="l718"><span class="linenum"> 718</span></a>      if (<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('grade')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> &gt; 0) {
<a name="l719"><span class="linenum"> 719</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['gradetype'] = <a class="constant" onClick="logConstant('GRADE_TYPE_VALUE')" href="../../_constants/GRADE_TYPE_VALUE.html" onMouseOver="constPopup(event,'GRADE_TYPE_VALUE')">GRADE_TYPE_VALUE</a>;
<a name="l720"><span class="linenum"> 720</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['grademax']  = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('grade')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>;
<a name="l721"><span class="linenum"> 721</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['grademin']  = 0;
<a name="l722"><span class="linenum"> 722</span></a>  
<a name="l723"><span class="linenum"> 723</span></a>      } else {
<a name="l724"><span class="linenum"> 724</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['gradetype'] = <a class="constant" onClick="logConstant('GRADE_TYPE_NONE')" href="../../_constants/GRADE_TYPE_NONE.html" onMouseOver="constPopup(event,'GRADE_TYPE_NONE')">GRADE_TYPE_NONE</a>;
<a name="l725"><span class="linenum"> 725</span></a>      }
<a name="l726"><span class="linenum"> 726</span></a>  
<a name="l727"><span class="linenum"> 727</span></a>  <span class="comment">    // What this is trying to do:</span>
<a name="l728"><span class="linenum"> 728</span></a>  <span class="comment">    // 1. If the quiz is set to not show grades while the quiz is still open,</span>
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">    //    and is set to show grades after the quiz is closed, then create the</span>
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">    //    grade_item with a show-after date that is the quiz close date.</span>
<a name="l731"><span class="linenum"> 731</span></a>  <span class="comment">    // 2. If the quiz is set to not show grades at either of those times,</span>
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment">    //    create the grade_item as hidden.</span>
<a name="l733"><span class="linenum"> 733</span></a>  <span class="comment">    // 3. If the quiz is set to show grades, create the grade_item visible.</span>
<a name="l734"><span class="linenum"> 734</span></a>      <a class="var it38830" onMouseOver="hilite(38830)" onMouseOut="lolite()" onClick="logVariable('openreviewoptions')" href="../../_variables/openreviewoptions.html">$openreviewoptions</a> = <a class="class" onClick="logClass('mod_quiz_display_options')" href="../../_classes/mod_quiz_display_options.html" onMouseOver="classPopup(event,'mod_quiz_display_options')">mod_quiz_display_options</a>::<a class="function" onClick="logFunction('make_from_quiz')" href="../../_functions/make_from_quiz.html" onMouseOver="funcPopup(event,'make_from_quiz')">make_from_quiz</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>,
<a name="l735"><span class="linenum"> 735</span></a>              <a class="class" onClick="logClass('mod_quiz_display_options')" href="../../_classes/mod_quiz_display_options.html" onMouseOver="classPopup(event,'mod_quiz_display_options')">mod_quiz_display_options</a>::LATER_WHILE_OPEN);
<a name="l736"><span class="linenum"> 736</span></a>      <a class="var it38831" onMouseOver="hilite(38831)" onMouseOut="lolite()" onClick="logVariable('closedreviewoptions')" href="../../_variables/closedreviewoptions.html">$closedreviewoptions</a> = <a class="class" onClick="logClass('mod_quiz_display_options')" href="../../_classes/mod_quiz_display_options.html" onMouseOver="classPopup(event,'mod_quiz_display_options')">mod_quiz_display_options</a>::<a class="function" onClick="logFunction('make_from_quiz')" href="../../_functions/make_from_quiz.html" onMouseOver="funcPopup(event,'make_from_quiz')">make_from_quiz</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>,
<a name="l737"><span class="linenum"> 737</span></a>              <a class="class" onClick="logClass('mod_quiz_display_options')" href="../../_classes/mod_quiz_display_options.html" onMouseOver="classPopup(event,'mod_quiz_display_options')">mod_quiz_display_options</a>::AFTER_CLOSE);
<a name="l738"><span class="linenum"> 738</span></a>      if (<a class="var it38830" onMouseOver="hilite(38830)" onMouseOut="lolite()" onClick="logVariable('openreviewoptions')" href="../../_variables/openreviewoptions.html">$openreviewoptions</a>-&gt;<a onClick="logVariable('marks')" class="var it40852" onMouseOver="hilite(40852)" onMouseOut="lolite()" href="../../_variables/marks.html">marks</a> &lt; <a class="class" onClick="logClass('question_display_options')" href="../../_classes/question_display_options.html" onMouseOver="classPopup(event,'question_display_options')">question_display_options</a>::MARK_AND_MAX &amp;&amp;
<a name="l739"><span class="linenum"> 739</span></a>              <a class="var it38831" onMouseOver="hilite(38831)" onMouseOut="lolite()" onClick="logVariable('closedreviewoptions')" href="../../_variables/closedreviewoptions.html">$closedreviewoptions</a>-&gt;<a onClick="logVariable('marks')" class="var it40853" onMouseOver="hilite(40853)" onMouseOut="lolite()" href="../../_variables/marks.html">marks</a> &lt; <a class="class" onClick="logClass('question_display_options')" href="../../_classes/question_display_options.html" onMouseOver="classPopup(event,'question_display_options')">question_display_options</a>::MARK_AND_MAX) {
<a name="l740"><span class="linenum"> 740</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['hidden'] = 1;
<a name="l741"><span class="linenum"> 741</span></a>  
<a name="l742"><span class="linenum"> 742</span></a>      } else if (<a class="var it38830" onMouseOver="hilite(38830)" onMouseOut="lolite()" onClick="logVariable('openreviewoptions')" href="../../_variables/openreviewoptions.html">$openreviewoptions</a>-&gt;<a onClick="logVariable('marks')" class="var it40852" onMouseOver="hilite(40852)" onMouseOut="lolite()" href="../../_variables/marks.html">marks</a> &lt; <a class="class" onClick="logClass('question_display_options')" href="../../_classes/question_display_options.html" onMouseOver="classPopup(event,'question_display_options')">question_display_options</a>::MARK_AND_MAX &amp;&amp;
<a name="l743"><span class="linenum"> 743</span></a>              <a class="var it38831" onMouseOver="hilite(38831)" onMouseOut="lolite()" onClick="logVariable('closedreviewoptions')" href="../../_variables/closedreviewoptions.html">$closedreviewoptions</a>-&gt;<a onClick="logVariable('marks')" class="var it40853" onMouseOver="hilite(40853)" onMouseOut="lolite()" href="../../_variables/marks.html">marks</a> &gt;= <a class="class" onClick="logClass('question_display_options')" href="../../_classes/question_display_options.html" onMouseOver="classPopup(event,'question_display_options')">question_display_options</a>::MARK_AND_MAX) {
<a name="l744"><span class="linenum"> 744</span></a>          if (<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('timeclose')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a>) {
<a name="l745"><span class="linenum"> 745</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['hidden'] = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('timeclose')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a>;
<a name="l746"><span class="linenum"> 746</span></a>          } else {
<a name="l747"><span class="linenum"> 747</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['hidden'] = 1;
<a name="l748"><span class="linenum"> 748</span></a>          }
<a name="l749"><span class="linenum"> 749</span></a>  
<a name="l750"><span class="linenum"> 750</span></a>      } else {
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment">        // Either</span>
<a name="l752"><span class="linenum"> 752</span></a>  <span class="comment">        // a) both open and closed enabled</span>
<a name="l753"><span class="linenum"> 753</span></a>  <span class="comment">        // b) open enabled, closed disabled - we can not &quot;hide after&quot;,</span>
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment">        //    grades are kept visible even after closing.</span>
<a name="l755"><span class="linenum"> 755</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['hidden'] = 0;
<a name="l756"><span class="linenum"> 756</span></a>      }
<a name="l757"><span class="linenum"> 757</span></a>  
<a name="l758"><span class="linenum"> 758</span></a>      if (!<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['hidden']) {
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">        // If the grade item is not hidden by the quiz logic, then we need to</span>
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment">        // hide it if the quiz is hidden from students.</span>
<a name="l761"><span class="linenum"> 761</span></a>          if (property_exists(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, 'visible')) {
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment">            // Saving the quiz form, and cm not yet updated in the database.</span>
<a name="l763"><span class="linenum"> 763</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['hidden'] = !<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('visible')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/visible.html">visible</a>;
<a name="l764"><span class="linenum"> 764</span></a>          } else {
<a name="l765"><span class="linenum"> 765</span></a>              <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l766"><span class="linenum"> 766</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['hidden'] = !<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('visible')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/visible.html">visible</a>;
<a name="l767"><span class="linenum"> 767</span></a>          }
<a name="l768"><span class="linenum"> 768</span></a>      }
<a name="l769"><span class="linenum"> 769</span></a>  
<a name="l770"><span class="linenum"> 770</span></a>      if (<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>  === 'reset') {
<a name="l771"><span class="linenum"> 771</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['reset'] = true;
<a name="l772"><span class="linenum"> 772</span></a>          <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = null;
<a name="l773"><span class="linenum"> 773</span></a>      }
<a name="l774"><span class="linenum"> 774</span></a>  
<a name="l775"><span class="linenum"> 775</span></a>      <a class="var it38832" onMouseOver="hilite(38832)" onMouseOut="lolite()" onClick="logVariable('gradebook_grades')" href="../../_variables/gradebook_grades.html">$gradebook_grades</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('course')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, 'mod', 'quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l776"><span class="linenum"> 776</span></a>      if (!empty(<a class="var it38832" onMouseOver="hilite(38832)" onMouseOut="lolite()" onClick="logVariable('gradebook_grades')" href="../../_variables/gradebook_grades.html">$gradebook_grades</a>-&gt;<a onClick="logVariable('items')" class="var it40854" onMouseOver="hilite(40854)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>)) {
<a name="l777"><span class="linenum"> 777</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../_variables/grade_item.html">$grade_item</a> = <a class="var it38832" onMouseOver="hilite(38832)" onMouseOut="lolite()" onClick="logVariable('gradebook_grades')" href="../../_variables/gradebook_grades.html">$gradebook_grades</a>-&gt;<a onClick="logVariable('items')" class="var it40854" onMouseOver="hilite(40854)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0];
<a name="l778"><span class="linenum"> 778</span></a>          if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('locked')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../../_variables/locked.html">locked</a>) {
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment">            // NOTE: this is an extremely nasty hack! It is not a bug if this confirmation fails badly. --skodak.</span>
<a name="l780"><span class="linenum"> 780</span></a>              <a class="var it38833" onMouseOver="hilite(38833)" onMouseOut="lolite()" onClick="logVariable('confirm_regrade')" href="../../_variables/confirm_regrade.html">$confirm_regrade</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('confirm_regrade', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l781"><span class="linenum"> 781</span></a>              if (!<a class="var it38833" onMouseOver="hilite(38833)" onMouseOut="lolite()" onClick="logVariable('confirm_regrade')" href="../../_variables/confirm_regrade.html">$confirm_regrade</a>) {
<a name="l782"><span class="linenum"> 782</span></a>                  if (!<a class="constant" onClick="logConstant('AJAX_SCRIPT')" href="../../_constants/AJAX_SCRIPT.html" onMouseOver="constPopup(event,'AJAX_SCRIPT')">AJAX_SCRIPT</a>) {
<a name="l783"><span class="linenum"> 783</span></a>                      <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradeitemislocked', 'grades');
<a name="l784"><span class="linenum"> 784</span></a>                      <a class="var it38834" onMouseOver="hilite(38834)" onMouseOut="lolite()" onClick="logVariable('back_link')" href="../../_variables/back_link.html">$back_link</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> . '/mod/quiz/report.php?q=' . <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> .
<a name="l785"><span class="linenum"> 785</span></a>                              '&amp;amp;mode=overview';
<a name="l786"><span class="linenum"> 786</span></a>                      <a class="var it38835" onMouseOver="hilite(38835)" onMouseOut="lolite()" onClick="logVariable('regrade_link')" href="../../_variables/regrade_link.html">$regrade_link</a> = <a class="function" onClick="logFunction('qualified_me')" href="../../_functions/qualified_me.html" onMouseOver="funcPopup(event,'qualified_me')">qualified_me</a>() . '&amp;amp;confirm_regrade=1';
<a name="l787"><span class="linenum"> 787</span></a>                      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_start')" href="../../_functions/box_start.html" onMouseOver="funcPopup(event,'box_start')">box_start</a>('generalbox', 'notice');
<a name="l788"><span class="linenum"> 788</span></a>                      echo '&lt;p&gt;'. <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a> .'&lt;/p&gt;';
<a name="l789"><span class="linenum"> 789</span></a>                      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('container_start')" href="../../_functions/container_start.html" onMouseOver="funcPopup(event,'container_start')">container_start</a>('buttons');
<a name="l790"><span class="linenum"> 790</span></a>                      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<a class="var it38835" onMouseOver="hilite(38835)" onMouseOut="lolite()" onClick="logVariable('regrade_link')" href="../../_variables/regrade_link.html">$regrade_link</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('regradeanyway', 'grades'));
<a name="l791"><span class="linenum"> 791</span></a>                      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<a class="var it38834" onMouseOver="hilite(38834)" onMouseOut="lolite()" onClick="logVariable('back_link')" href="../../_variables/back_link.html">$back_link</a>,  <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cancel'));
<a name="l792"><span class="linenum"> 792</span></a>                      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('container_end')" href="../../_functions/container_end.html" onMouseOver="funcPopup(event,'container_end')">container_end</a>();
<a name="l793"><span class="linenum"> 793</span></a>                      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_end')" href="../../_functions/box_end.html" onMouseOver="funcPopup(event,'box_end')">box_end</a>();
<a name="l794"><span class="linenum"> 794</span></a>                  }
<a name="l795"><span class="linenum"> 795</span></a>                  return <a class="constant" onClick="logConstant('GRADE_UPDATE_ITEM_LOCKED')" href="../../_constants/GRADE_UPDATE_ITEM_LOCKED.html" onMouseOver="constPopup(event,'GRADE_UPDATE_ITEM_LOCKED')">GRADE_UPDATE_ITEM_LOCKED</a>;
<a name="l796"><span class="linenum"> 796</span></a>              }
<a name="l797"><span class="linenum"> 797</span></a>          }
<a name="l798"><span class="linenum"> 798</span></a>      }
<a name="l799"><span class="linenum"> 799</span></a>  
<a name="l800"><span class="linenum"> 800</span></a>      return <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>('mod/quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('course')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, 'mod', 'quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l801"><span class="linenum"> 801</span></a>  }
<a name="l802"><span class="linenum"> 802</span></a>  
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment">/**</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment"> * Delete grade item for given quiz</span>
<a name="l805"><span class="linenum"> 805</span></a>  <span class="comment"> *</span>
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment"> * @category grade</span>
<a name="l807"><span class="linenum"> 807</span></a>  <span class="comment"> * @param object $quiz object</span>
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment"> * @return object quiz</span>
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment"> */</span>
<a name="l810"><span class="linenum"> 810</span></a>  function <a class="function" onClick="logFunction('quiz_grade_item_delete')" href="../../_functions/quiz_grade_item_delete.html" onMouseOver="funcPopup(event,'quiz_grade_item_delete')">quiz_grade_item_delete</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l811"><span class="linenum"> 811</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l812"><span class="linenum"> 812</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l813"><span class="linenum"> 813</span></a>  
<a name="l814"><span class="linenum"> 814</span></a>      return <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>('mod/quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('course')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, 'mod', 'quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0,
<a name="l815"><span class="linenum"> 815</span></a>              null, array('deleted' =&gt; 1));
<a name="l816"><span class="linenum"> 816</span></a>  }
<a name="l817"><span class="linenum"> 817</span></a>  
<a name="l818"><span class="linenum"> 818</span></a>  <span class="comment">/**</span>
<a name="l819"><span class="linenum"> 819</span></a>  <span class="comment"> * This standard function will check all instances of this module</span>
<a name="l820"><span class="linenum"> 820</span></a>  <span class="comment"> * and make sure there are up-to-date events created for each of them.</span>
<a name="l821"><span class="linenum"> 821</span></a>  <span class="comment"> * If courseid = 0, then every quiz event in the site is checked, else</span>
<a name="l822"><span class="linenum"> 822</span></a>  <span class="comment"> * only quiz events belonging to the course specified are checked.</span>
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment"> * This function is used, in its new format, by restore_refresh_events()</span>
<a name="l824"><span class="linenum"> 824</span></a>  <span class="comment"> *</span>
<a name="l825"><span class="linenum"> 825</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l826"><span class="linenum"> 826</span></a>  <span class="comment"> * @return bool</span>
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment"> */</span>
<a name="l828"><span class="linenum"> 828</span></a>  function <a class="function" onClick="logFunction('quiz_refresh_events')" href="../../_functions/quiz_refresh_events.html" onMouseOver="funcPopup(event,'quiz_refresh_events')">quiz_refresh_events</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a> = 0) {
<a name="l829"><span class="linenum"> 829</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l830"><span class="linenum"> 830</span></a>  
<a name="l831"><span class="linenum"> 831</span></a>      if (<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a> == 0) {
<a name="l832"><span class="linenum"> 832</span></a>          if (!<a class="var it6468" onMouseOver="hilite(6468)" onMouseOut="lolite()" onClick="logVariable('quizzes')" href="../../_variables/quizzes.html">$quizzes</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('quiz')) {
<a name="l833"><span class="linenum"> 833</span></a>              return true;
<a name="l834"><span class="linenum"> 834</span></a>          }
<a name="l835"><span class="linenum"> 835</span></a>      } else {
<a name="l836"><span class="linenum"> 836</span></a>          if (!<a class="var it6468" onMouseOver="hilite(6468)" onMouseOut="lolite()" onClick="logVariable('quizzes')" href="../../_variables/quizzes.html">$quizzes</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('quiz', array('course' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>))) {
<a name="l837"><span class="linenum"> 837</span></a>              return true;
<a name="l838"><span class="linenum"> 838</span></a>          }
<a name="l839"><span class="linenum"> 839</span></a>      }
<a name="l840"><span class="linenum"> 840</span></a>  
<a name="l841"><span class="linenum"> 841</span></a>      foreach (<a class="var it6468" onMouseOver="hilite(6468)" onMouseOut="lolite()" onClick="logVariable('quizzes')" href="../../_variables/quizzes.html">$quizzes</a> as <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l842"><span class="linenum"> 842</span></a>          <a class="function" onClick="logFunction('quiz_update_events')" href="../../_functions/quiz_update_events.html" onMouseOver="funcPopup(event,'quiz_update_events')">quiz_update_events</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l843"><span class="linenum"> 843</span></a>      }
<a name="l844"><span class="linenum"> 844</span></a>  
<a name="l845"><span class="linenum"> 845</span></a>      return true;
<a name="l846"><span class="linenum"> 846</span></a>  }
<a name="l847"><span class="linenum"> 847</span></a>  
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment">/**</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment"> * Returns all quiz graded users since a given time for specified quiz</span>
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment"> */</span>
<a name="l851"><span class="linenum"> 851</span></a>  function <a class="function" onClick="logFunction('quiz_get_recent_mod_activity')" href="../../_functions/quiz_get_recent_mod_activity.html" onMouseOver="funcPopup(event,'quiz_get_recent_mod_activity')">quiz_get_recent_mod_activity</a>(&amp;<a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../../_variables/activities.html">$activities</a>, &amp;<a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>,
<a name="l852"><span class="linenum"> 852</span></a>          <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = 0, <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = 0) {
<a name="l853"><span class="linenum"> 853</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l854"><span class="linenum"> 854</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/quiz/locallib.php.html">/mod/quiz/locallib.php</a>');
<a name="l855"><span class="linenum"> 855</span></a>  
<a name="l856"><span class="linenum"> 856</span></a>      <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>);
<a name="l857"><span class="linenum"> 857</span></a>      <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l858"><span class="linenum"> 858</span></a>  
<a name="l859"><span class="linenum"> 859</span></a>      <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('cms')" class="var it39598" onMouseOver="hilite(39598)" onMouseOut="lolite()" href="../../_variables/cms.html">cms</a>[<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>];
<a name="l860"><span class="linenum"> 860</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('quiz', array('id' =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>));
<a name="l861"><span class="linenum"> 861</span></a>  
<a name="l862"><span class="linenum"> 862</span></a>      if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l863"><span class="linenum"> 863</span></a>          <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a> = &quot;AND u.id = :userid&quot;;
<a name="l864"><span class="linenum"> 864</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['userid'] = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l865"><span class="linenum"> 865</span></a>      } else {
<a name="l866"><span class="linenum"> 866</span></a>          <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a> = '';
<a name="l867"><span class="linenum"> 867</span></a>      }
<a name="l868"><span class="linenum"> 868</span></a>  
<a name="l869"><span class="linenum"> 869</span></a>      if (<a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) {
<a name="l870"><span class="linenum"> 870</span></a>          <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('groupselect')" href="../../_variables/groupselect.html">$groupselect</a> = 'AND gm.groupid = :groupid';
<a name="l871"><span class="linenum"> 871</span></a>          <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('groupjoin')" href="../../_variables/groupjoin.html">$groupjoin</a>   = 'JOIN {groups_members} gm ON  gm.userid=u.id';
<a name="l872"><span class="linenum"> 872</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['groupid'] = <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>;
<a name="l873"><span class="linenum"> 873</span></a>      } else {
<a name="l874"><span class="linenum"> 874</span></a>          <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('groupselect')" href="../../_variables/groupselect.html">$groupselect</a> = '';
<a name="l875"><span class="linenum"> 875</span></a>          <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('groupjoin')" href="../../_variables/groupjoin.html">$groupjoin</a>   = '';
<a name="l876"><span class="linenum"> 876</span></a>      }
<a name="l877"><span class="linenum"> 877</span></a>  
<a name="l878"><span class="linenum"> 878</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['timestart'] = <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>;
<a name="l879"><span class="linenum"> 879</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['quizid'] = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l880"><span class="linenum"> 880</span></a>  
<a name="l881"><span class="linenum"> 881</span></a>      <a class="var it21259" onMouseOver="hilite(21259)" onMouseOut="lolite()" onClick="logVariable('ufields')" href="../../_variables/ufields.html">$ufields</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>('u', null, 'useridagain');
<a name="l882"><span class="linenum"> 882</span></a>      if (!<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;
<a name="l883"><span class="linenum"> 883</span></a>                SELECT qa.*,
<a name="l884"><span class="linenum"> 884</span></a>                       {<a class="var it21259" onMouseOver="hilite(21259)" onMouseOut="lolite()" onClick="logVariable('ufields')" href="../../_variables/ufields.html">$ufields</a>}
<a name="l885"><span class="linenum"> 885</span></a>                  FROM {quiz_attempts} qa
<a name="l886"><span class="linenum"> 886</span></a>                       JOIN {user} u ON u.id = qa.userid
<a name="l887"><span class="linenum"> 887</span></a>                       <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('groupjoin')" href="../../_variables/groupjoin.html">$groupjoin</a>
<a name="l888"><span class="linenum"> 888</span></a>                 WHERE qa.timefinish &gt; :timestart
<a name="l889"><span class="linenum"> 889</span></a>                   AND qa.quiz = :quizid
<a name="l890"><span class="linenum"> 890</span></a>                   AND qa.preview = 0
<a name="l891"><span class="linenum"> 891</span></a>                       <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a>
<a name="l892"><span class="linenum"> 892</span></a>                       <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('groupselect')" href="../../_variables/groupselect.html">$groupselect</a>
<a name="l893"><span class="linenum"> 893</span></a>              ORDER BY qa.timefinish ASC&quot;, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l894"><span class="linenum"> 894</span></a>          return;
<a name="l895"><span class="linenum"> 895</span></a>      }
<a name="l896"><span class="linenum"> 896</span></a>  
<a name="l897"><span class="linenum"> 897</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>         = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l898"><span class="linenum"> 898</span></a>      <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('accessallgroups')" href="../../_variables/accessallgroups.html">$accessallgroups</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l899"><span class="linenum"> 899</span></a>      <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>   = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l900"><span class="linenum"> 900</span></a>      <a class="var it1615" onMouseOver="hilite(1615)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>          = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/quiz:viewreports', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l901"><span class="linenum"> 901</span></a>      <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a>       = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l902"><span class="linenum"> 902</span></a>  
<a name="l903"><span class="linenum"> 903</span></a>      <a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('usersgroups')" href="../../_variables/usersgroups.html">$usersgroups</a> = null;
<a name="l904"><span class="linenum"> 904</span></a>      <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('aname')" href="../../_variables/aname.html">$aname</a> = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, true);
<a name="l905"><span class="linenum"> 905</span></a>      foreach (<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> as <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>) {
<a name="l906"><span class="linenum"> 906</span></a>          if (<a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('userid')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> != <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l907"><span class="linenum"> 907</span></a>              if (!<a class="var it1615" onMouseOver="hilite(1615)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>) {
<a name="l908"><span class="linenum"> 908</span></a>  <span class="comment">                // Grade permission required.</span>
<a name="l909"><span class="linenum"> 909</span></a>                  continue;
<a name="l910"><span class="linenum"> 910</span></a>              }
<a name="l911"><span class="linenum"> 911</span></a>  
<a name="l912"><span class="linenum"> 912</span></a>              if (<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('accessallgroups')" href="../../_variables/accessallgroups.html">$accessallgroups</a>) {
<a name="l913"><span class="linenum"> 913</span></a>                  <a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('usersgroups')" href="../../_variables/usersgroups.html">$usersgroups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l914"><span class="linenum"> 914</span></a>                          <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('userid')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>);
<a name="l915"><span class="linenum"> 915</span></a>                  <a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('usersgroups')" href="../../_variables/usersgroups.html">$usersgroups</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('usersgroups')" href="../../_variables/usersgroups.html">$usersgroups</a>);
<a name="l916"><span class="linenum"> 916</span></a>                  if (!<a class="phpfunction" onClick="logFunction('array_intersect')" href="../../_functions/array_intersect.html" onMouseOver="phpfuncPopup(event,'array_intersect')">array_intersect</a>(<a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('usersgroups')" href="../../_variables/usersgroups.html">$usersgroups</a>, <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_groups')" href="../../_functions/get_groups.html" onMouseOver="funcPopup(event,'get_groups')">get_groups</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>))) {
<a name="l917"><span class="linenum"> 917</span></a>                      continue;
<a name="l918"><span class="linenum"> 918</span></a>                  }
<a name="l919"><span class="linenum"> 919</span></a>              }
<a name="l920"><span class="linenum"> 920</span></a>          }
<a name="l921"><span class="linenum"> 921</span></a>  
<a name="l922"><span class="linenum"> 922</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = <a class="function" onClick="logFunction('quiz_get_review_options')" href="../../_functions/quiz_get_review_options.html" onMouseOver="funcPopup(event,'quiz_get_review_options')">quiz_get_review_options</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l923"><span class="linenum"> 923</span></a>  
<a name="l924"><span class="linenum"> 924</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a> = new stdClass();
<a name="l925"><span class="linenum"> 925</span></a>  
<a name="l926"><span class="linenum"> 926</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('type')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>       = 'quiz';
<a name="l927"><span class="linenum"> 927</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('cmid')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>       = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l928"><span class="linenum"> 928</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('name')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>       = <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('aname')" href="../../_variables/aname.html">$aname</a>;
<a name="l929"><span class="linenum"> 929</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/sectionnum.html">sectionnum</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/sectionnum.html">sectionnum</a>;
<a name="l930"><span class="linenum"> 930</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('timestamp')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/timestamp.html">timestamp</a>  = <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('timefinish')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/timefinish.html">timefinish</a>;
<a name="l931"><span class="linenum"> 931</span></a>  
<a name="l932"><span class="linenum"> 932</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = new stdClass();
<a name="l933"><span class="linenum"> 933</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;attemptid = <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('id')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l934"><span class="linenum"> 934</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;attempt   = <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('attempt')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/attempt.html">attempt</a>;
<a name="l935"><span class="linenum"> 935</span></a>          if (<a class="function" onClick="logFunction('quiz_has_grades')" href="../../_functions/quiz_has_grades.html" onMouseOver="funcPopup(event,'quiz_has_grades')">quiz_has_grades</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) &amp;&amp; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('marks')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../_variables/marks.html">marks</a> &gt;= <a class="class" onClick="logClass('question_display_options')" href="../../_classes/question_display_options.html" onMouseOver="classPopup(event,'question_display_options')">question_display_options</a>::MARK_AND_MAX) {
<a name="l936"><span class="linenum"> 936</span></a>              <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;sumgrades = <a class="function" onClick="logFunction('quiz_format_grade')" href="../../_functions/quiz_format_grade.html" onMouseOver="funcPopup(event,'quiz_format_grade')">quiz_format_grade</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>-&gt;<a onClick="logVariable('sumgrades')" class="var it39607" onMouseOver="hilite(39607)" onMouseOut="lolite()" href="../../_variables/sumgrades.html">sumgrades</a>);
<a name="l937"><span class="linenum"> 937</span></a>              <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;maxgrade  = <a class="function" onClick="logFunction('quiz_format_grade')" href="../../_functions/quiz_format_grade.html" onMouseOver="funcPopup(event,'quiz_format_grade')">quiz_format_grade</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('sumgrades')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/sumgrades.html">sumgrades</a>);
<a name="l938"><span class="linenum"> 938</span></a>          } else {
<a name="l939"><span class="linenum"> 939</span></a>              <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;sumgrades = null;
<a name="l940"><span class="linenum"> 940</span></a>              <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;maxgrade  = null;
<a name="l941"><span class="linenum"> 941</span></a>          }
<a name="l942"><span class="linenum"> 942</span></a>  
<a name="l943"><span class="linenum"> 943</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('user')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/user.html">user</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('unalias')" href="../../_functions/unalias.html" onMouseOver="funcPopup(event,'unalias')">unalias</a>(<a class="var it660" onMouseOver="hilite(660)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>, null, 'useridagain');
<a name="l944"><span class="linenum"> 944</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('user')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>-&gt;fullname  = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('user')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>, <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>);
<a name="l945"><span class="linenum"> 945</span></a>  
<a name="l946"><span class="linenum"> 946</span></a>          <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../../_variables/activities.html">$activities</a>[<a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>++] = <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>;
<a name="l947"><span class="linenum"> 947</span></a>      }
<a name="l948"><span class="linenum"> 948</span></a>  }
<a name="l949"><span class="linenum"> 949</span></a>  
<a name="l950"><span class="linenum"> 950</span></a>  function <a class="function" onClick="logFunction('quiz_print_recent_mod_activity')" href="../../_functions/quiz_print_recent_mod_activity.html" onMouseOver="funcPopup(event,'quiz_print_recent_mod_activity')">quiz_print_recent_mod_activity</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it6083" onMouseOver="hilite(6083)" onMouseOut="lolite()" onClick="logVariable('detail')" href="../../_variables/detail.html">$detail</a>, <a class="var it7072" onMouseOver="hilite(7072)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../../_variables/modnames.html">$modnames</a>) {
<a name="l951"><span class="linenum"> 951</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l952"><span class="linenum"> 952</span></a>  
<a name="l953"><span class="linenum"> 953</span></a>      echo '&lt;table border=&quot;0&quot; cellpadding=&quot;3&quot; cellspacing=&quot;0&quot; class=&quot;forum-recent&quot;&gt;';
<a name="l954"><span class="linenum"> 954</span></a>  
<a name="l955"><span class="linenum"> 955</span></a>      echo '&lt;tr&gt;&lt;td class=&quot;userpicture&quot; valign=&quot;top&quot;&gt;';
<a name="l956"><span class="linenum"> 956</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('user_picture')" href="../../_functions/user_picture.html" onMouseOver="funcPopup(event,'user_picture')">user_picture</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>, array('courseid' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>));
<a name="l957"><span class="linenum"> 957</span></a>      echo '&lt;/td&gt;&lt;td&gt;';
<a name="l958"><span class="linenum"> 958</span></a>  
<a name="l959"><span class="linenum"> 959</span></a>      if (<a class="var it6083" onMouseOver="hilite(6083)" onMouseOut="lolite()" onClick="logVariable('detail')" href="../../_variables/detail.html">$detail</a>) {
<a name="l960"><span class="linenum"> 960</span></a>          <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../../_variables/modname.html">$modname</a> = <a class="var it7072" onMouseOver="hilite(7072)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../../_variables/modnames.html">$modnames</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('type')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>];
<a name="l961"><span class="linenum"> 961</span></a>          echo '&lt;div class=&quot;title&quot;&gt;';
<a name="l962"><span class="linenum"> 962</span></a>          echo '&lt;img src=&quot;' . <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('icon', <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('type')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>) . '&quot; ' .
<a name="l963"><span class="linenum"> 963</span></a>                  'class=&quot;icon&quot; alt=&quot;' . <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../../_variables/modname.html">$modname</a> . '&quot; /&gt;';
<a name="l964"><span class="linenum"> 964</span></a>          echo '&lt;a href=&quot;' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> . '/mod/quiz/view.php?id=' .
<a name="l965"><span class="linenum"> 965</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('cmid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a> . '&quot;&gt;' . <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('name')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> . '&lt;/a&gt;';
<a name="l966"><span class="linenum"> 966</span></a>          echo '&lt;/div&gt;';
<a name="l967"><span class="linenum"> 967</span></a>      }
<a name="l968"><span class="linenum"> 968</span></a>  
<a name="l969"><span class="linenum"> 969</span></a>      echo '&lt;div class=&quot;grade&quot;&gt;';
<a name="l970"><span class="linenum"> 970</span></a>      echo  <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('attempt', 'quiz', <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;attempt);
<a name="l971"><span class="linenum"> 971</span></a>      if (isset(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;maxgrade)) {
<a name="l972"><span class="linenum"> 972</span></a>          <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;sumgrades . ' / ' . <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;maxgrade;
<a name="l973"><span class="linenum"> 973</span></a>          echo ': (&lt;a href=&quot;' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> . '/mod/quiz/review.php?attempt=' .
<a name="l974"><span class="linenum"> 974</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;attemptid . '&quot;&gt;' . <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> . '&lt;/a&gt;)';
<a name="l975"><span class="linenum"> 975</span></a>      }
<a name="l976"><span class="linenum"> 976</span></a>      echo '&lt;/div&gt;';
<a name="l977"><span class="linenum"> 977</span></a>  
<a name="l978"><span class="linenum"> 978</span></a>      echo '&lt;div class=&quot;user&quot;&gt;';
<a name="l979"><span class="linenum"> 979</span></a>      echo '&lt;a href=&quot;' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> . '/user/view.php?id=' . <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>-&gt;id .
<a name="l980"><span class="linenum"> 980</span></a>              '&amp;amp;course=' . <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a> . '&quot;&gt;' . <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>-&gt;fullname .
<a name="l981"><span class="linenum"> 981</span></a>              '&lt;/a&gt; - ' . <a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('timestamp')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/timestamp.html">timestamp</a>);
<a name="l982"><span class="linenum"> 982</span></a>      echo '&lt;/div&gt;';
<a name="l983"><span class="linenum"> 983</span></a>  
<a name="l984"><span class="linenum"> 984</span></a>      echo '&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';
<a name="l985"><span class="linenum"> 985</span></a>  
<a name="l986"><span class="linenum"> 986</span></a>      return;
<a name="l987"><span class="linenum"> 987</span></a>  }
<a name="l988"><span class="linenum"> 988</span></a>  
<a name="l989"><span class="linenum"> 989</span></a>  <span class="comment">/**</span>
<a name="l990"><span class="linenum"> 990</span></a>  <span class="comment"> * Pre-process the quiz options form data, making any necessary adjustments.</span>
<a name="l991"><span class="linenum"> 991</span></a>  <span class="comment"> * Called by add/update instance in this file.</span>
<a name="l992"><span class="linenum"> 992</span></a>  <span class="comment"> *</span>
<a name="l993"><span class="linenum"> 993</span></a>  <span class="comment"> * @param object $quiz The variables set on the form.</span>
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment"> */</span>
<a name="l995"><span class="linenum"> 995</span></a>  function <a class="function" onClick="logFunction('quiz_process_options')" href="../../_functions/quiz_process_options.html" onMouseOver="funcPopup(event,'quiz_process_options')">quiz_process_options</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l996"><span class="linenum"> 996</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l997"><span class="linenum"> 997</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/quiz/locallib.php.html">/mod/quiz/locallib.php</a>');
<a name="l998"><span class="linenum"> 998</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/questionlib.php');
<a name="l999"><span class="linenum"> 999</span></a>  
<a name="l1000"><span class="linenum">1000</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1001"><span class="linenum">1001</span></a>  
<a name="l1002"><span class="linenum">1002</span></a>  <span class="comment">    // Quiz name.</span>
<a name="l1003"><span class="linenum">1003</span></a>      if (!empty(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('name')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>)) {
<a name="l1004"><span class="linenum">1004</span></a>          <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('name')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('name')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l1005"><span class="linenum">1005</span></a>      }
<a name="l1006"><span class="linenum">1006</span></a>  
<a name="l1007"><span class="linenum">1007</span></a>  <span class="comment">    // Password field - different in form to stop browsers that remember passwords</span>
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment">    // getting confused.</span>
<a name="l1009"><span class="linenum">1009</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('password')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/password.html">password</a> = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('quizpassword')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/quizpassword.html">quizpassword</a>;
<a name="l1010"><span class="linenum">1010</span></a>      unset(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('quizpassword')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/quizpassword.html">quizpassword</a>);
<a name="l1011"><span class="linenum">1011</span></a>  
<a name="l1012"><span class="linenum">1012</span></a>  <span class="comment">    // Quiz feedback.</span>
<a name="l1013"><span class="linenum">1013</span></a>      if (isset(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>)) {
<a name="l1014"><span class="linenum">1014</span></a>  <span class="comment">        // Clean up the boundary text.</span>
<a name="l1015"><span class="linenum">1015</span></a>          for (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>); <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> += 1) {
<a name="l1016"><span class="linenum">1016</span></a>              if (empty(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text'])) {
<a name="l1017"><span class="linenum">1017</span></a>                  <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text'] = '';
<a name="l1018"><span class="linenum">1018</span></a>              } else {
<a name="l1019"><span class="linenum">1019</span></a>                  <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text'] = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text']);
<a name="l1020"><span class="linenum">1020</span></a>              }
<a name="l1021"><span class="linenum">1021</span></a>          }
<a name="l1022"><span class="linenum">1022</span></a>  
<a name="l1023"><span class="linenum">1023</span></a>  <span class="comment">        // Check the boundary value is a number or a percentage, and in range.</span>
<a name="l1024"><span class="linenum">1024</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0;
<a name="l1025"><span class="linenum">1025</span></a>          while (!empty(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundaries')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundaries.html">feedbackboundaries</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>])) {
<a name="l1026"><span class="linenum">1026</span></a>              <a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundaries')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundaries.html">feedbackboundaries</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]);
<a name="l1027"><span class="linenum">1027</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_numeric')" href="../../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a>)) {
<a name="l1028"><span class="linenum">1028</span></a>                  if (<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a>) &gt; 0 &amp;&amp; <a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a>[<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a>) - 1] == '%') {
<a name="l1029"><span class="linenum">1029</span></a>                      <a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a>, 0, -1));
<a name="l1030"><span class="linenum">1030</span></a>                      if (<a class="phpfunction" onClick="logFunction('is_numeric')" href="../../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a>)) {
<a name="l1031"><span class="linenum">1031</span></a>                          <a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a> = <a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a> * <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('grade')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> / 100.0;
<a name="l1032"><span class="linenum">1032</span></a>                      } else {
<a name="l1033"><span class="linenum">1033</span></a>                          return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('feedbackerrorboundaryformat', 'quiz', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> + 1);
<a name="l1034"><span class="linenum">1034</span></a>                      }
<a name="l1035"><span class="linenum">1035</span></a>                  }
<a name="l1036"><span class="linenum">1036</span></a>              }
<a name="l1037"><span class="linenum">1037</span></a>              if (<a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a> &lt;= 0 || <a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a> &gt;= <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('grade')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>) {
<a name="l1038"><span class="linenum">1038</span></a>                  return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('feedbackerrorboundaryoutofrange', 'quiz', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> + 1);
<a name="l1039"><span class="linenum">1039</span></a>              }
<a name="l1040"><span class="linenum">1040</span></a>              if (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &gt; 0 &amp;&amp; <a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a> &gt;= <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundaries')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundaries.html">feedbackboundaries</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> - 1]) {
<a name="l1041"><span class="linenum">1041</span></a>                  return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('feedbackerrororder', 'quiz', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> + 1);
<a name="l1042"><span class="linenum">1042</span></a>              }
<a name="l1043"><span class="linenum">1043</span></a>              <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundaries')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundaries.html">feedbackboundaries</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = <a class="var it9152" onMouseOver="hilite(9152)" onMouseOut="lolite()" onClick="logVariable('boundary')" href="../../_variables/boundary.html">$boundary</a>;
<a name="l1044"><span class="linenum">1044</span></a>              <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> += 1;
<a name="l1045"><span class="linenum">1045</span></a>          }
<a name="l1046"><span class="linenum">1046</span></a>          <a class="var it36220" onMouseOver="hilite(36220)" onMouseOut="lolite()" onClick="logVariable('numboundaries')" href="../../_variables/numboundaries.html">$numboundaries</a> = <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>;
<a name="l1047"><span class="linenum">1047</span></a>  
<a name="l1048"><span class="linenum">1048</span></a>  <span class="comment">        // Check there is nothing in the remaining unused fields.</span>
<a name="l1049"><span class="linenum">1049</span></a>          if (!empty(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundaries')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundaries.html">feedbackboundaries</a>)) {
<a name="l1050"><span class="linenum">1050</span></a>              for (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = <a class="var it36220" onMouseOver="hilite(36220)" onMouseOut="lolite()" onClick="logVariable('numboundaries')" href="../../_variables/numboundaries.html">$numboundaries</a>; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundaries')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundaries.html">feedbackboundaries</a>); <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> += 1) {
<a name="l1051"><span class="linenum">1051</span></a>                  if (!empty(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundaries')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundaries.html">feedbackboundaries</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]) &amp;&amp;
<a name="l1052"><span class="linenum">1052</span></a>                          <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundaries')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundaries.html">feedbackboundaries</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]) != '') {
<a name="l1053"><span class="linenum">1053</span></a>                      return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('feedbackerrorjunkinboundary', 'quiz', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> + 1);
<a name="l1054"><span class="linenum">1054</span></a>                  }
<a name="l1055"><span class="linenum">1055</span></a>              }
<a name="l1056"><span class="linenum">1056</span></a>          }
<a name="l1057"><span class="linenum">1057</span></a>          for (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = <a class="var it36220" onMouseOver="hilite(36220)" onMouseOut="lolite()" onClick="logVariable('numboundaries')" href="../../_variables/numboundaries.html">$numboundaries</a> + 1; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>); <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> += 1) {
<a name="l1058"><span class="linenum">1058</span></a>              if (!empty(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text']) &amp;&amp;
<a name="l1059"><span class="linenum">1059</span></a>                      <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text']) != '') {
<a name="l1060"><span class="linenum">1060</span></a>                  return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('feedbackerrorjunkinfeedback', 'quiz', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> + 1);
<a name="l1061"><span class="linenum">1061</span></a>              }
<a name="l1062"><span class="linenum">1062</span></a>          }
<a name="l1063"><span class="linenum">1063</span></a>  <span class="comment">        // Needs to be bigger than $quiz-&gt;grade because of '&lt;' test in quiz_feedback_for_grade().</span>
<a name="l1064"><span class="linenum">1064</span></a>          <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundaries')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundaries.html">feedbackboundaries</a>[-1] = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('grade')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> + 1;
<a name="l1065"><span class="linenum">1065</span></a>          <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundaries')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundaries.html">feedbackboundaries</a>[<a class="var it36220" onMouseOver="hilite(36220)" onMouseOut="lolite()" onClick="logVariable('numboundaries')" href="../../_variables/numboundaries.html">$numboundaries</a>] = 0;
<a name="l1066"><span class="linenum">1066</span></a>          <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundarycount')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundarycount.html">feedbackboundarycount</a> = <a class="var it36220" onMouseOver="hilite(36220)" onMouseOut="lolite()" onClick="logVariable('numboundaries')" href="../../_variables/numboundaries.html">$numboundaries</a>;
<a name="l1067"><span class="linenum">1067</span></a>      } else {
<a name="l1068"><span class="linenum">1068</span></a>          <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundarycount')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundarycount.html">feedbackboundarycount</a> = -1;
<a name="l1069"><span class="linenum">1069</span></a>      }
<a name="l1070"><span class="linenum">1070</span></a>  
<a name="l1071"><span class="linenum">1071</span></a>  <span class="comment">    // Combing the individual settings into the review columns.</span>
<a name="l1072"><span class="linenum">1072</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('reviewattempt')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/reviewattempt.html">reviewattempt</a> = <a class="function" onClick="logFunction('quiz_review_option_form_to_db')" href="../../_functions/quiz_review_option_form_to_db.html" onMouseOver="funcPopup(event,'quiz_review_option_form_to_db')">quiz_review_option_form_to_db</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, 'attempt');
<a name="l1073"><span class="linenum">1073</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('reviewcorrectness')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/reviewcorrectness.html">reviewcorrectness</a> = <a class="function" onClick="logFunction('quiz_review_option_form_to_db')" href="../../_functions/quiz_review_option_form_to_db.html" onMouseOver="funcPopup(event,'quiz_review_option_form_to_db')">quiz_review_option_form_to_db</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, 'correctness');
<a name="l1074"><span class="linenum">1074</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('reviewmarks')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/reviewmarks.html">reviewmarks</a> = <a class="function" onClick="logFunction('quiz_review_option_form_to_db')" href="../../_functions/quiz_review_option_form_to_db.html" onMouseOver="funcPopup(event,'quiz_review_option_form_to_db')">quiz_review_option_form_to_db</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, 'marks');
<a name="l1075"><span class="linenum">1075</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('reviewspecificfeedback')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/reviewspecificfeedback.html">reviewspecificfeedback</a> = <a class="function" onClick="logFunction('quiz_review_option_form_to_db')" href="../../_functions/quiz_review_option_form_to_db.html" onMouseOver="funcPopup(event,'quiz_review_option_form_to_db')">quiz_review_option_form_to_db</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, 'specificfeedback');
<a name="l1076"><span class="linenum">1076</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('reviewgeneralfeedback')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/reviewgeneralfeedback.html">reviewgeneralfeedback</a> = <a class="function" onClick="logFunction('quiz_review_option_form_to_db')" href="../../_functions/quiz_review_option_form_to_db.html" onMouseOver="funcPopup(event,'quiz_review_option_form_to_db')">quiz_review_option_form_to_db</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, 'generalfeedback');
<a name="l1077"><span class="linenum">1077</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('reviewrightanswer')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/reviewrightanswer.html">reviewrightanswer</a> = <a class="function" onClick="logFunction('quiz_review_option_form_to_db')" href="../../_functions/quiz_review_option_form_to_db.html" onMouseOver="funcPopup(event,'quiz_review_option_form_to_db')">quiz_review_option_form_to_db</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, 'rightanswer');
<a name="l1078"><span class="linenum">1078</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('reviewoverallfeedback')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/reviewoverallfeedback.html">reviewoverallfeedback</a> = <a class="function" onClick="logFunction('quiz_review_option_form_to_db')" href="../../_functions/quiz_review_option_form_to_db.html" onMouseOver="funcPopup(event,'quiz_review_option_form_to_db')">quiz_review_option_form_to_db</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, 'overallfeedback');
<a name="l1079"><span class="linenum">1079</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('reviewattempt')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/reviewattempt.html">reviewattempt</a> |= <a class="class" onClick="logClass('mod_quiz_display_options')" href="../../_classes/mod_quiz_display_options.html" onMouseOver="classPopup(event,'mod_quiz_display_options')">mod_quiz_display_options</a>::DURING;
<a name="l1080"><span class="linenum">1080</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('reviewoverallfeedback')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/reviewoverallfeedback.html">reviewoverallfeedback</a> &amp;= ~<a class="class" onClick="logClass('mod_quiz_display_options')" href="../../_classes/mod_quiz_display_options.html" onMouseOver="classPopup(event,'mod_quiz_display_options')">mod_quiz_display_options</a>::DURING;
<a name="l1081"><span class="linenum">1081</span></a>  }
<a name="l1082"><span class="linenum">1082</span></a>  
<a name="l1083"><span class="linenum">1083</span></a>  <span class="comment">/**</span>
<a name="l1084"><span class="linenum">1084</span></a>  <span class="comment"> * Helper function for {@link quiz_process_options()}.</span>
<a name="l1085"><span class="linenum">1085</span></a>  <span class="comment"> * @param object $fromform the sumbitted form date.</span>
<a name="l1086"><span class="linenum">1086</span></a>  <span class="comment"> * @param string $field one of the review option field names.</span>
<a name="l1087"><span class="linenum">1087</span></a>  <span class="comment"> */</span>
<a name="l1088"><span class="linenum">1088</span></a>  function <a class="function" onClick="logFunction('quiz_review_option_form_to_db')" href="../../_functions/quiz_review_option_form_to_db.html" onMouseOver="funcPopup(event,'quiz_review_option_form_to_db')">quiz_review_option_form_to_db</a>(<a class="var it2058" onMouseOver="hilite(2058)" onMouseOut="lolite()" onClick="logVariable('fromform')" href="../../_variables/fromform.html">$fromform</a>, <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l1089"><span class="linenum">1089</span></a>      static <a class="var it436" onMouseOver="hilite(436)" onMouseOut="lolite()" onClick="logVariable('times')" href="../../_variables/times.html">$times</a> = array(
<a name="l1090"><span class="linenum">1090</span></a>          'during' =&gt; <a class="class" onClick="logClass('mod_quiz_display_options')" href="../../_classes/mod_quiz_display_options.html" onMouseOver="classPopup(event,'mod_quiz_display_options')">mod_quiz_display_options</a>::DURING,
<a name="l1091"><span class="linenum">1091</span></a>          'immediately' =&gt; <a class="class" onClick="logClass('mod_quiz_display_options')" href="../../_classes/mod_quiz_display_options.html" onMouseOver="classPopup(event,'mod_quiz_display_options')">mod_quiz_display_options</a>::IMMEDIATELY_AFTER,
<a name="l1092"><span class="linenum">1092</span></a>          'open' =&gt; <a class="class" onClick="logClass('mod_quiz_display_options')" href="../../_classes/mod_quiz_display_options.html" onMouseOver="classPopup(event,'mod_quiz_display_options')">mod_quiz_display_options</a>::LATER_WHILE_OPEN,
<a name="l1093"><span class="linenum">1093</span></a>          'closed' =&gt; <a class="class" onClick="logClass('mod_quiz_display_options')" href="../../_classes/mod_quiz_display_options.html" onMouseOver="classPopup(event,'mod_quiz_display_options')">mod_quiz_display_options</a>::AFTER_CLOSE,
<a name="l1094"><span class="linenum">1094</span></a>      );
<a name="l1095"><span class="linenum">1095</span></a>  
<a name="l1096"><span class="linenum">1096</span></a>      <a class="var it5444" onMouseOver="hilite(5444)" onMouseOut="lolite()" onClick="logVariable('review')" href="../../_variables/review.html">$review</a> = 0;
<a name="l1097"><span class="linenum">1097</span></a>      foreach (<a class="var it436" onMouseOver="hilite(436)" onMouseOut="lolite()" onClick="logVariable('times')" href="../../_variables/times.html">$times</a> as <a class="var it36216" onMouseOver="hilite(36216)" onMouseOut="lolite()" onClick="logVariable('whenname')" href="../../_variables/whenname.html">$whenname</a> =&gt; <a class="var it5143" onMouseOver="hilite(5143)" onMouseOut="lolite()" onClick="logVariable('when')" href="../../_variables/when.html">$when</a>) {
<a name="l1098"><span class="linenum">1098</span></a>          <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> . <a class="var it36216" onMouseOver="hilite(36216)" onMouseOut="lolite()" onClick="logVariable('whenname')" href="../../_variables/whenname.html">$whenname</a>;
<a name="l1099"><span class="linenum">1099</span></a>          if (isset(<a class="var it2058" onMouseOver="hilite(2058)" onMouseOut="lolite()" onClick="logVariable('fromform')" href="../../_variables/fromform.html">$fromform</a>-&gt;<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>)) {
<a name="l1100"><span class="linenum">1100</span></a>              <a class="var it5444" onMouseOver="hilite(5444)" onMouseOut="lolite()" onClick="logVariable('review')" href="../../_variables/review.html">$review</a> |= <a class="var it5143" onMouseOver="hilite(5143)" onMouseOut="lolite()" onClick="logVariable('when')" href="../../_variables/when.html">$when</a>;
<a name="l1101"><span class="linenum">1101</span></a>              unset(<a class="var it2058" onMouseOver="hilite(2058)" onMouseOut="lolite()" onClick="logVariable('fromform')" href="../../_variables/fromform.html">$fromform</a>-&gt;<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>);
<a name="l1102"><span class="linenum">1102</span></a>          }
<a name="l1103"><span class="linenum">1103</span></a>      }
<a name="l1104"><span class="linenum">1104</span></a>  
<a name="l1105"><span class="linenum">1105</span></a>      return <a class="var it5444" onMouseOver="hilite(5444)" onMouseOut="lolite()" onClick="logVariable('review')" href="../../_variables/review.html">$review</a>;
<a name="l1106"><span class="linenum">1106</span></a>  }
<a name="l1107"><span class="linenum">1107</span></a>  
<a name="l1108"><span class="linenum">1108</span></a>  <span class="comment">/**</span>
<a name="l1109"><span class="linenum">1109</span></a>  <span class="comment"> * This function is called at the end of quiz_add_instance</span>
<a name="l1110"><span class="linenum">1110</span></a>  <span class="comment"> * and quiz_update_instance, to do the common processing.</span>
<a name="l1111"><span class="linenum">1111</span></a>  <span class="comment"> *</span>
<a name="l1112"><span class="linenum">1112</span></a>  <span class="comment"> * @param object $quiz the quiz object.</span>
<a name="l1113"><span class="linenum">1113</span></a>  <span class="comment"> */</span>
<a name="l1114"><span class="linenum">1114</span></a>  function <a class="function" onClick="logFunction('quiz_after_add_or_update')" href="../../_functions/quiz_after_add_or_update.html" onMouseOver="funcPopup(event,'quiz_after_add_or_update')">quiz_after_add_or_update</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l1115"><span class="linenum">1115</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1116"><span class="linenum">1116</span></a>      <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a> = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>;
<a name="l1117"><span class="linenum">1117</span></a>  
<a name="l1118"><span class="linenum">1118</span></a>  <span class="comment">    // We need to use context now, so we need to make sure all needed info is already in db.</span>
<a name="l1119"><span class="linenum">1119</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_modules', 'instance', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array('id'=&gt;<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>));
<a name="l1120"><span class="linenum">1120</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>);
<a name="l1121"><span class="linenum">1121</span></a>  
<a name="l1122"><span class="linenum">1122</span></a>  <span class="comment">    // Save the feedback.</span>
<a name="l1123"><span class="linenum">1123</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('quiz_feedback', array('quizid' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1124"><span class="linenum">1124</span></a>  
<a name="l1125"><span class="linenum">1125</span></a>      for (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt;= <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundarycount')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundarycount.html">feedbackboundarycount</a>; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l1126"><span class="linenum">1126</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a> = new stdClass();
<a name="l1127"><span class="linenum">1127</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('quizid')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/quizid.html">quizid</a> = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1128"><span class="linenum">1128</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a> = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text'];
<a name="l1129"><span class="linenum">1129</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('feedbacktextformat')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/feedbacktextformat.html">feedbacktextformat</a> = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['format'];
<a name="l1130"><span class="linenum">1130</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('mingrade')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/mingrade.html">mingrade</a> = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundaries')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundaries.html">feedbackboundaries</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>];
<a name="l1131"><span class="linenum">1131</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('maxgrade')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/maxgrade.html">maxgrade</a> = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbackboundaries')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbackboundaries.html">feedbackboundaries</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> - 1];
<a name="l1132"><span class="linenum">1132</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('quiz_feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>);
<a name="l1133"><span class="linenum">1133</span></a>          <a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('feedbacktext')" href="../../_variables/feedbacktext.html">$feedbacktext</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>((int)<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['itemid'],
<a name="l1134"><span class="linenum">1134</span></a>                  <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_quiz', 'feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1135"><span class="linenum">1135</span></a>                  array('subdirs' =&gt; false, 'maxfiles' =&gt; -1, 'maxbytes' =&gt; 0),
<a name="l1136"><span class="linenum">1136</span></a>                  <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]['text']);
<a name="l1137"><span class="linenum">1137</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('quiz_feedback', 'feedbacktext', <a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('feedbacktext')" href="../../_variables/feedbacktext.html">$feedbacktext</a>,
<a name="l1138"><span class="linenum">1138</span></a>                  array('id' =&gt; <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1139"><span class="linenum">1139</span></a>      }
<a name="l1140"><span class="linenum">1140</span></a>  
<a name="l1141"><span class="linenum">1141</span></a>  <span class="comment">    // Store any settings belonging to the access rules.</span>
<a name="l1142"><span class="linenum">1142</span></a>      <a class="class" onClick="logClass('quiz_access_manager')" href="../../_classes/quiz_access_manager.html" onMouseOver="classPopup(event,'quiz_access_manager')">quiz_access_manager</a>::<a class="function" onClick="logFunction('save_settings')" href="../../_functions/save_settings.html" onMouseOver="funcPopup(event,'save_settings')">save_settings</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l1143"><span class="linenum">1143</span></a>  
<a name="l1144"><span class="linenum">1144</span></a>  <span class="comment">    // Update the events relating to this quiz.</span>
<a name="l1145"><span class="linenum">1145</span></a>      <a class="function" onClick="logFunction('quiz_update_events')" href="../../_functions/quiz_update_events.html" onMouseOver="funcPopup(event,'quiz_update_events')">quiz_update_events</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l1146"><span class="linenum">1146</span></a>  
<a name="l1147"><span class="linenum">1147</span></a>  <span class="comment">    // Update related grade item.</span>
<a name="l1148"><span class="linenum">1148</span></a>      <a class="function" onClick="logFunction('quiz_grade_item_update')" href="../../_functions/quiz_grade_item_update.html" onMouseOver="funcPopup(event,'quiz_grade_item_update')">quiz_grade_item_update</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l1149"><span class="linenum">1149</span></a>  }
<a name="l1150"><span class="linenum">1150</span></a>  
<a name="l1151"><span class="linenum">1151</span></a>  <span class="comment">/**</span>
<a name="l1152"><span class="linenum">1152</span></a>  <span class="comment"> * This function updates the events associated to the quiz.</span>
<a name="l1153"><span class="linenum">1153</span></a>  <span class="comment"> * If $override is non-zero, then it updates only the events</span>
<a name="l1154"><span class="linenum">1154</span></a>  <span class="comment"> * associated with the specified override.</span>
<a name="l1155"><span class="linenum">1155</span></a>  <span class="comment"> *</span>
<a name="l1156"><span class="linenum">1156</span></a>  <span class="comment"> * @uses QUIZ_MAX_EVENT_LENGTH</span>
<a name="l1157"><span class="linenum">1157</span></a>  <span class="comment"> * @param object $quiz the quiz object.</span>
<a name="l1158"><span class="linenum">1158</span></a>  <span class="comment"> * @param object optional $override limit to a specific override</span>
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment"> */</span>
<a name="l1160"><span class="linenum">1160</span></a>  function <a class="function" onClick="logFunction('quiz_update_events')" href="../../_functions/quiz_update_events.html" onMouseOver="funcPopup(event,'quiz_update_events')">quiz_update_events</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a> = null) {
<a name="l1161"><span class="linenum">1161</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1162"><span class="linenum">1162</span></a>  
<a name="l1163"><span class="linenum">1163</span></a>  <span class="comment">    // Load the old events relating to this quiz.</span>
<a name="l1164"><span class="linenum">1164</span></a>      <a class="var it23931" onMouseOver="hilite(23931)" onMouseOut="lolite()" onClick="logVariable('conds')" href="../../_variables/conds.html">$conds</a> = array('modulename'=&gt;'quiz',
<a name="l1165"><span class="linenum">1165</span></a>                     'instance'=&gt;<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1166"><span class="linenum">1166</span></a>      if (!empty(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>)) {
<a name="l1167"><span class="linenum">1167</span></a>  <span class="comment">        // Only load events for this override.</span>
<a name="l1168"><span class="linenum">1168</span></a>          <a class="var it23931" onMouseOver="hilite(23931)" onMouseOut="lolite()" onClick="logVariable('conds')" href="../../_variables/conds.html">$conds</a>['groupid'] = isset(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('groupid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>)?  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('groupid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a> : 0;
<a name="l1169"><span class="linenum">1169</span></a>          <a class="var it23931" onMouseOver="hilite(23931)" onMouseOut="lolite()" onClick="logVariable('conds')" href="../../_variables/conds.html">$conds</a>['userid'] = isset(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('userid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>)?  <a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>-&gt;<a onClick="logVariable('userid')" class="var it40850" onMouseOver="hilite(40850)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> : 0;
<a name="l1170"><span class="linenum">1170</span></a>      }
<a name="l1171"><span class="linenum">1171</span></a>      <a class="var it24075" onMouseOver="hilite(24075)" onMouseOut="lolite()" onClick="logVariable('oldevents')" href="../../_variables/oldevents.html">$oldevents</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', <a class="var it23931" onMouseOver="hilite(23931)" onMouseOut="lolite()" onClick="logVariable('conds')" href="../../_variables/conds.html">$conds</a>);
<a name="l1172"><span class="linenum">1172</span></a>  
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment">    // Now make a todo list of all that needs to be updated.</span>
<a name="l1174"><span class="linenum">1174</span></a>      if (empty(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>)) {
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment">        // We are updating the primary settings for the quiz, so we</span>
<a name="l1176"><span class="linenum">1176</span></a>  <span class="comment">        // need to add all the overrides.</span>
<a name="l1177"><span class="linenum">1177</span></a>          <a class="var it668" onMouseOver="hilite(668)" onMouseOut="lolite()" onClick="logVariable('overrides')" href="../../_variables/overrides.html">$overrides</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('quiz_overrides', array('quiz' =&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1178"><span class="linenum">1178</span></a>  <span class="comment">        // As well as the original quiz (empty override).</span>
<a name="l1179"><span class="linenum">1179</span></a>          <a class="var it668" onMouseOver="hilite(668)" onMouseOut="lolite()" onClick="logVariable('overrides')" href="../../_variables/overrides.html">$overrides</a>[] = new stdClass();
<a name="l1180"><span class="linenum">1180</span></a>      } else {
<a name="l1181"><span class="linenum">1181</span></a>  <span class="comment">        // Just do the one override.</span>
<a name="l1182"><span class="linenum">1182</span></a>          <a class="var it668" onMouseOver="hilite(668)" onMouseOut="lolite()" onClick="logVariable('overrides')" href="../../_variables/overrides.html">$overrides</a> = array(<a class="var it669" onMouseOver="hilite(669)" onMouseOut="lolite()" onClick="logVariable('override')" href="../../_variables/override.html">$override</a>);
<a name="l1183"><span class="linenum">1183</span></a>      }
<a name="l1184"><span class="linenum">1184</span></a>  
<a name="l1185"><span class="linenum">1185</span></a>      foreach (<a class="var it668" onMouseOver="hilite(668)" onMouseOut="lolite()" onClick="logVariable('overrides')" href="../../_variables/overrides.html">$overrides</a> as <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>) {
<a name="l1186"><span class="linenum">1186</span></a>          <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>   = isset(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('groupid')" class="var it39467" onMouseOver="hilite(39467)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>)?  <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('groupid')" class="var it39467" onMouseOver="hilite(39467)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a> : 0;
<a name="l1187"><span class="linenum">1187</span></a>          <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>    = isset(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('userid')" class="var it39467" onMouseOver="hilite(39467)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>)? <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('userid')" class="var it39467" onMouseOver="hilite(39467)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> : 0;
<a name="l1188"><span class="linenum">1188</span></a>          <a class="var it5259" onMouseOver="hilite(5259)" onMouseOut="lolite()" onClick="logVariable('timeopen')" href="../../_variables/timeopen.html">$timeopen</a>  = isset(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('timeopen')" class="var it39467" onMouseOver="hilite(39467)" onMouseOut="lolite()" href="../../_variables/timeopen.html">timeopen</a>)?  <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('timeopen')" class="var it39467" onMouseOver="hilite(39467)" onMouseOut="lolite()" href="../../_variables/timeopen.html">timeopen</a> : <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('timeopen')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/timeopen.html">timeopen</a>;
<a name="l1189"><span class="linenum">1189</span></a>          <a class="var it5260" onMouseOver="hilite(5260)" onMouseOut="lolite()" onClick="logVariable('timeclose')" href="../../_variables/timeclose.html">$timeclose</a> = isset(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('timeclose')" class="var it39467" onMouseOver="hilite(39467)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a>)? <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('timeclose')" class="var it39467" onMouseOver="hilite(39467)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a> : <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('timeclose')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a>;
<a name="l1190"><span class="linenum">1190</span></a>  
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment">        // Only add open/close events for an override if they differ from the quiz default.</span>
<a name="l1192"><span class="linenum">1192</span></a>          <a class="var it24076" onMouseOver="hilite(24076)" onMouseOut="lolite()" onClick="logVariable('addopen')" href="../../_variables/addopen.html">$addopen</a>  = empty(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('id')" class="var it39467" onMouseOver="hilite(39467)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) || !empty(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('timeopen')" class="var it39467" onMouseOver="hilite(39467)" onMouseOut="lolite()" href="../../_variables/timeopen.html">timeopen</a>);
<a name="l1193"><span class="linenum">1193</span></a>          <a class="var it24077" onMouseOver="hilite(24077)" onMouseOut="lolite()" onClick="logVariable('addclose')" href="../../_variables/addclose.html">$addclose</a> = empty(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('id')" class="var it39467" onMouseOver="hilite(39467)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) || !empty(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('timeclose')" class="var it39467" onMouseOver="hilite(39467)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a>);
<a name="l1194"><span class="linenum">1194</span></a>  
<a name="l1195"><span class="linenum">1195</span></a>          if (!empty(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>)) {
<a name="l1196"><span class="linenum">1196</span></a>              <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a> = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>;
<a name="l1197"><span class="linenum">1197</span></a>          } else {
<a name="l1198"><span class="linenum">1198</span></a>              <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('course')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>)-&gt;id;
<a name="l1199"><span class="linenum">1199</span></a>          }
<a name="l1200"><span class="linenum">1200</span></a>  
<a name="l1201"><span class="linenum">1201</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = new stdClass();
<a name="l1202"><span class="linenum">1202</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('description')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/description.html">description</a> = <a class="function" onClick="logFunction('format_module_intro')" href="../../_functions/format_module_intro.html" onMouseOver="funcPopup(event,'format_module_intro')">format_module_intro</a>('quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>);
<a name="l1203"><span class="linenum">1203</span></a>  <span class="comment">        // Events module won't show user events when the courseid is nonzero.</span>
<a name="l1204"><span class="linenum">1204</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>    = (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) ? 0 : <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('course')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>;
<a name="l1205"><span class="linenum">1205</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>     = <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>;
<a name="l1206"><span class="linenum">1206</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('userid')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>      = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l1207"><span class="linenum">1207</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/modulename.html">modulename</a>  = 'quiz';
<a name="l1208"><span class="linenum">1208</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('instance')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>    = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1209"><span class="linenum">1209</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timestart.html">timestart</a>   = <a class="var it5259" onMouseOver="hilite(5259)" onMouseOut="lolite()" onClick="logVariable('timeopen')" href="../../_variables/timeopen.html">$timeopen</a>;
<a name="l1210"><span class="linenum">1210</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timeduration.html">timeduration</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it5260" onMouseOver="hilite(5260)" onMouseOut="lolite()" onClick="logVariable('timeclose')" href="../../_variables/timeclose.html">$timeclose</a> - <a class="var it5259" onMouseOver="hilite(5259)" onMouseOut="lolite()" onClick="logVariable('timeopen')" href="../../_variables/timeopen.html">$timeopen</a>, 0);
<a name="l1211"><span class="linenum">1211</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('visible')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/visible.html">visible</a>     = <a class="function" onClick="logFunction('instance_is_visible')" href="../../_functions/instance_is_visible.html" onMouseOver="funcPopup(event,'instance_is_visible')">instance_is_visible</a>('quiz', <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l1212"><span class="linenum">1212</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('eventtype')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/eventtype.html">eventtype</a>   = 'open';
<a name="l1213"><span class="linenum">1213</span></a>  
<a name="l1214"><span class="linenum">1214</span></a>  <span class="comment">        // Determine the event name.</span>
<a name="l1215"><span class="linenum">1215</span></a>          if (<a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) {
<a name="l1216"><span class="linenum">1216</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = new stdClass();
<a name="l1217"><span class="linenum">1217</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>-&gt;<a onClick="logVariable('quiz')" class="var it39554" onMouseOver="hilite(39554)" onMouseOut="lolite()" href="../../_variables/quiz.html">quiz</a> = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('name')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l1218"><span class="linenum">1218</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>-&gt;<a onClick="logVariable('group')" class="var it39554" onMouseOver="hilite(39554)" onMouseOut="lolite()" href="../../_variables/group.html">group</a> = <a class="function" onClick="logFunction('groups_get_group_name')" href="../../_functions/groups_get_group_name.html" onMouseOver="funcPopup(event,'groups_get_group_name')">groups_get_group_name</a>(<a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>);
<a name="l1219"><span class="linenum">1219</span></a>              if (<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>-&gt;<a onClick="logVariable('group')" class="var it39554" onMouseOver="hilite(39554)" onMouseOut="lolite()" href="../../_variables/group.html">group</a> === false) {
<a name="l1220"><span class="linenum">1220</span></a>  <span class="comment">                // Group doesn't exist, just skip it.</span>
<a name="l1221"><span class="linenum">1221</span></a>                  continue;
<a name="l1222"><span class="linenum">1222</span></a>              }
<a name="l1223"><span class="linenum">1223</span></a>              <a class="var it7983" onMouseOver="hilite(7983)" onMouseOut="lolite()" onClick="logVariable('eventname')" href="../../_variables/eventname.html">$eventname</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('overridegroupeventname', 'quiz', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1224"><span class="linenum">1224</span></a>          } else if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l1225"><span class="linenum">1225</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = new stdClass();
<a name="l1226"><span class="linenum">1226</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>-&gt;<a onClick="logVariable('quiz')" class="var it39554" onMouseOver="hilite(39554)" onMouseOut="lolite()" href="../../_variables/quiz.html">quiz</a> = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('name')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l1227"><span class="linenum">1227</span></a>              <a class="var it7983" onMouseOver="hilite(7983)" onMouseOut="lolite()" onClick="logVariable('eventname')" href="../../_variables/eventname.html">$eventname</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('overrideusereventname', 'quiz', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1228"><span class="linenum">1228</span></a>          } else {
<a name="l1229"><span class="linenum">1229</span></a>              <a class="var it7983" onMouseOver="hilite(7983)" onMouseOut="lolite()" onClick="logVariable('eventname')" href="../../_variables/eventname.html">$eventname</a> = <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('name')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l1230"><span class="linenum">1230</span></a>          }
<a name="l1231"><span class="linenum">1231</span></a>          if (<a class="var it24076" onMouseOver="hilite(24076)" onMouseOut="lolite()" onClick="logVariable('addopen')" href="../../_variables/addopen.html">$addopen</a> or <a class="var it24077" onMouseOver="hilite(24077)" onMouseOut="lolite()" onClick="logVariable('addclose')" href="../../_variables/addclose.html">$addclose</a>) {
<a name="l1232"><span class="linenum">1232</span></a>              if (<a class="var it5260" onMouseOver="hilite(5260)" onMouseOut="lolite()" onClick="logVariable('timeclose')" href="../../_variables/timeclose.html">$timeclose</a> and <a class="var it5259" onMouseOver="hilite(5259)" onMouseOut="lolite()" onClick="logVariable('timeopen')" href="../../_variables/timeopen.html">$timeopen</a> and <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timeduration.html">timeduration</a> &lt;= <a class="constant" onClick="logConstant('QUIZ_MAX_EVENT_LENGTH')" href="../../_constants/QUIZ_MAX_EVENT_LENGTH.html" onMouseOver="constPopup(event,'QUIZ_MAX_EVENT_LENGTH')">QUIZ_MAX_EVENT_LENGTH</a>) {
<a name="l1233"><span class="linenum">1233</span></a>  <span class="comment">                // Single event for the whole quiz.</span>
<a name="l1234"><span class="linenum">1234</span></a>                  if (<a class="var it11516" onMouseOver="hilite(11516)" onMouseOut="lolite()" onClick="logVariable('oldevent')" href="../../_variables/oldevent.html">$oldevent</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it24075" onMouseOver="hilite(24075)" onMouseOut="lolite()" onClick="logVariable('oldevents')" href="../../_variables/oldevents.html">$oldevents</a>)) {
<a name="l1235"><span class="linenum">1235</span></a>                      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it11516" onMouseOver="hilite(11516)" onMouseOut="lolite()" onClick="logVariable('oldevent')" href="../../_variables/oldevent.html">$oldevent</a>-&gt;<a onClick="logVariable('id')" class="var it40855" onMouseOver="hilite(40855)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1236"><span class="linenum">1236</span></a>                  } else {
<a name="l1237"><span class="linenum">1237</span></a>                      unset(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1238"><span class="linenum">1238</span></a>                  }
<a name="l1239"><span class="linenum">1239</span></a>                  <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it7983" onMouseOver="hilite(7983)" onMouseOut="lolite()" onClick="logVariable('eventname')" href="../../_variables/eventname.html">$eventname</a>;
<a name="l1240"><span class="linenum">1240</span></a>  <span class="comment">                // The method calendar_event::create will reuse a db record if the id field is set.</span>
<a name="l1241"><span class="linenum">1241</span></a>                  <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l1242"><span class="linenum">1242</span></a>              } else {
<a name="l1243"><span class="linenum">1243</span></a>  <span class="comment">                // Separate start and end events.</span>
<a name="l1244"><span class="linenum">1244</span></a>                  <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timeduration.html">timeduration</a>  = 0;
<a name="l1245"><span class="linenum">1245</span></a>                  if (<a class="var it5259" onMouseOver="hilite(5259)" onMouseOut="lolite()" onClick="logVariable('timeopen')" href="../../_variables/timeopen.html">$timeopen</a> &amp;&amp; <a class="var it24076" onMouseOver="hilite(24076)" onMouseOut="lolite()" onClick="logVariable('addopen')" href="../../_variables/addopen.html">$addopen</a>) {
<a name="l1246"><span class="linenum">1246</span></a>                      if (<a class="var it11516" onMouseOver="hilite(11516)" onMouseOut="lolite()" onClick="logVariable('oldevent')" href="../../_variables/oldevent.html">$oldevent</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it24075" onMouseOver="hilite(24075)" onMouseOut="lolite()" onClick="logVariable('oldevents')" href="../../_variables/oldevents.html">$oldevents</a>)) {
<a name="l1247"><span class="linenum">1247</span></a>                          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it11516" onMouseOver="hilite(11516)" onMouseOut="lolite()" onClick="logVariable('oldevent')" href="../../_variables/oldevent.html">$oldevent</a>-&gt;<a onClick="logVariable('id')" class="var it40855" onMouseOver="hilite(40855)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1248"><span class="linenum">1248</span></a>                      } else {
<a name="l1249"><span class="linenum">1249</span></a>                          unset(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1250"><span class="linenum">1250</span></a>                      }
<a name="l1251"><span class="linenum">1251</span></a>                      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it7983" onMouseOver="hilite(7983)" onMouseOut="lolite()" onClick="logVariable('eventname')" href="../../_variables/eventname.html">$eventname</a>.' ('.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('quizopens', 'quiz').')';
<a name="l1252"><span class="linenum">1252</span></a>  <span class="comment">                    // The method calendar_event::create will reuse a db record if the id field is set.</span>
<a name="l1253"><span class="linenum">1253</span></a>                      <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l1254"><span class="linenum">1254</span></a>                  }
<a name="l1255"><span class="linenum">1255</span></a>                  if (<a class="var it5260" onMouseOver="hilite(5260)" onMouseOut="lolite()" onClick="logVariable('timeclose')" href="../../_variables/timeclose.html">$timeclose</a> &amp;&amp; <a class="var it24077" onMouseOver="hilite(24077)" onMouseOut="lolite()" onClick="logVariable('addclose')" href="../../_variables/addclose.html">$addclose</a>) {
<a name="l1256"><span class="linenum">1256</span></a>                      if (<a class="var it11516" onMouseOver="hilite(11516)" onMouseOut="lolite()" onClick="logVariable('oldevent')" href="../../_variables/oldevent.html">$oldevent</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it24075" onMouseOver="hilite(24075)" onMouseOut="lolite()" onClick="logVariable('oldevents')" href="../../_variables/oldevents.html">$oldevents</a>)) {
<a name="l1257"><span class="linenum">1257</span></a>                          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it11516" onMouseOver="hilite(11516)" onMouseOut="lolite()" onClick="logVariable('oldevent')" href="../../_variables/oldevent.html">$oldevent</a>-&gt;<a onClick="logVariable('id')" class="var it40855" onMouseOver="hilite(40855)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1258"><span class="linenum">1258</span></a>                      } else {
<a name="l1259"><span class="linenum">1259</span></a>                          unset(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1260"><span class="linenum">1260</span></a>                      }
<a name="l1261"><span class="linenum">1261</span></a>                      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>      = <a class="var it7983" onMouseOver="hilite(7983)" onMouseOut="lolite()" onClick="logVariable('eventname')" href="../../_variables/eventname.html">$eventname</a>.' ('.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('quizcloses', 'quiz').')';
<a name="l1262"><span class="linenum">1262</span></a>                      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timestart.html">timestart</a> = <a class="var it5260" onMouseOver="hilite(5260)" onMouseOut="lolite()" onClick="logVariable('timeclose')" href="../../_variables/timeclose.html">$timeclose</a>;
<a name="l1263"><span class="linenum">1263</span></a>                      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('eventtype')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/eventtype.html">eventtype</a> = 'close';
<a name="l1264"><span class="linenum">1264</span></a>                      <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l1265"><span class="linenum">1265</span></a>                  }
<a name="l1266"><span class="linenum">1266</span></a>              }
<a name="l1267"><span class="linenum">1267</span></a>          }
<a name="l1268"><span class="linenum">1268</span></a>      }
<a name="l1269"><span class="linenum">1269</span></a>  
<a name="l1270"><span class="linenum">1270</span></a>  <span class="comment">    // Delete any leftover events.</span>
<a name="l1271"><span class="linenum">1271</span></a>      foreach (<a class="var it24075" onMouseOver="hilite(24075)" onMouseOut="lolite()" onClick="logVariable('oldevents')" href="../../_variables/oldevents.html">$oldevents</a> as <a class="var it24078" onMouseOver="hilite(24078)" onMouseOut="lolite()" onClick="logVariable('badevent')" href="../../_variables/badevent.html">$badevent</a>) {
<a name="l1272"><span class="linenum">1272</span></a>          <a class="var it24078" onMouseOver="hilite(24078)" onMouseOut="lolite()" onClick="logVariable('badevent')" href="../../_variables/badevent.html">$badevent</a> = <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it24078" onMouseOver="hilite(24078)" onMouseOut="lolite()" onClick="logVariable('badevent')" href="../../_variables/badevent.html">$badevent</a>);
<a name="l1273"><span class="linenum">1273</span></a>          <a class="var it24078" onMouseOver="hilite(24078)" onMouseOut="lolite()" onClick="logVariable('badevent')" href="../../_variables/badevent.html">$badevent</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l1274"><span class="linenum">1274</span></a>      }
<a name="l1275"><span class="linenum">1275</span></a>  }
<a name="l1276"><span class="linenum">1276</span></a>  
<a name="l1277"><span class="linenum">1277</span></a>  <span class="comment">/**</span>
<a name="l1278"><span class="linenum">1278</span></a>  <span class="comment"> * List the actions that correspond to a view of this module.</span>
<a name="l1279"><span class="linenum">1279</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l1280"><span class="linenum">1280</span></a>  <span class="comment"> *</span>
<a name="l1281"><span class="linenum">1281</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l1282"><span class="linenum">1282</span></a>  <span class="comment"> *       crud = 'r' and edulevel = LEVEL_PARTICIPATING will</span>
<a name="l1283"><span class="linenum">1283</span></a>  <span class="comment"> *       be considered as view action.</span>
<a name="l1284"><span class="linenum">1284</span></a>  <span class="comment"> *</span>
<a name="l1285"><span class="linenum">1285</span></a>  <span class="comment"> * @return array</span>
<a name="l1286"><span class="linenum">1286</span></a>  <span class="comment"> */</span>
<a name="l1287"><span class="linenum">1287</span></a>  function <a class="function" onClick="logFunction('quiz_get_view_actions')" href="../../_functions/quiz_get_view_actions.html" onMouseOver="funcPopup(event,'quiz_get_view_actions')">quiz_get_view_actions</a>() {
<a name="l1288"><span class="linenum">1288</span></a>      return array('view', 'view all', 'report', 'review');
<a name="l1289"><span class="linenum">1289</span></a>  }
<a name="l1290"><span class="linenum">1290</span></a>  
<a name="l1291"><span class="linenum">1291</span></a>  <span class="comment">/**</span>
<a name="l1292"><span class="linenum">1292</span></a>  <span class="comment"> * List the actions that correspond to a post of this module.</span>
<a name="l1293"><span class="linenum">1293</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l1294"><span class="linenum">1294</span></a>  <span class="comment"> *</span>
<a name="l1295"><span class="linenum">1295</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l1296"><span class="linenum">1296</span></a>  <span class="comment"> *       crud = ('c' || 'u' || 'd') and edulevel = LEVEL_PARTICIPATING</span>
<a name="l1297"><span class="linenum">1297</span></a>  <span class="comment"> *       will be considered as post action.</span>
<a name="l1298"><span class="linenum">1298</span></a>  <span class="comment"> *</span>
<a name="l1299"><span class="linenum">1299</span></a>  <span class="comment"> * @return array</span>
<a name="l1300"><span class="linenum">1300</span></a>  <span class="comment"> */</span>
<a name="l1301"><span class="linenum">1301</span></a>  function <a class="function" onClick="logFunction('quiz_get_post_actions')" href="../../_functions/quiz_get_post_actions.html" onMouseOver="funcPopup(event,'quiz_get_post_actions')">quiz_get_post_actions</a>() {
<a name="l1302"><span class="linenum">1302</span></a>      return array('attempt', 'close attempt', 'preview', 'editquestions',
<a name="l1303"><span class="linenum">1303</span></a>              'delete attempt', 'manualgrade');
<a name="l1304"><span class="linenum">1304</span></a>  }
<a name="l1305"><span class="linenum">1305</span></a>  
<a name="l1306"><span class="linenum">1306</span></a>  <span class="comment">/**</span>
<a name="l1307"><span class="linenum">1307</span></a>  <span class="comment"> * @param array $questionids of question ids.</span>
<a name="l1308"><span class="linenum">1308</span></a>  <span class="comment"> * @return bool whether any of these questions are used by any instance of this module.</span>
<a name="l1309"><span class="linenum">1309</span></a>  <span class="comment"> */</span>
<a name="l1310"><span class="linenum">1310</span></a>  function <a class="function" onClick="logFunction('quiz_questions_in_use')" href="../../_functions/quiz_questions_in_use.html" onMouseOver="funcPopup(event,'quiz_questions_in_use')">quiz_questions_in_use</a>(<a class="var it3258" onMouseOver="hilite(3258)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../../_variables/questionids.html">$questionids</a>) {
<a name="l1311"><span class="linenum">1311</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1312"><span class="linenum">1312</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/questionlib.php');
<a name="l1313"><span class="linenum">1313</span></a>      <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it3289" onMouseOver="hilite(3289)" onMouseOut="lolite()" onClick="logVariable('test')" href="../../_variables/test.html">$test</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it3258" onMouseOver="hilite(3258)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../../_variables/questionids.html">$questionids</a>);
<a name="l1314"><span class="linenum">1314</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_select')" href="../../_functions/record_exists_select.html" onMouseOver="funcPopup(event,'record_exists_select')">record_exists_select</a>('quiz_slots',
<a name="l1315"><span class="linenum">1315</span></a>              'questionid ' . <a class="var it3289" onMouseOver="hilite(3289)" onMouseOut="lolite()" onClick="logVariable('test')" href="../../_variables/test.html">$test</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) || question_engine::<a class="function" onClick="logFunction('questions_in_use')" href="../../_functions/questions_in_use.html" onMouseOver="funcPopup(event,'questions_in_use')">questions_in_use</a>(
<a name="l1316"><span class="linenum">1316</span></a>              <a class="var it3258" onMouseOver="hilite(3258)" onMouseOut="lolite()" onClick="logVariable('questionids')" href="../../_variables/questionids.html">$questionids</a>, <span class="keyword">new </span><a class="class" onClick="logClass('qubaid_join')" href="../../_classes/qubaid_join.html" onMouseOver="classPopup(event,'qubaid_join')">qubaid_join</a>('{quiz_attempts} quiza',
<a name="l1317"><span class="linenum">1317</span></a>              'quiza.uniqueid', 'quiza.preview = 0'));
<a name="l1318"><span class="linenum">1318</span></a>  }
<a name="l1319"><span class="linenum">1319</span></a>  
<a name="l1320"><span class="linenum">1320</span></a>  <span class="comment">/**</span>
<a name="l1321"><span class="linenum">1321</span></a>  <span class="comment"> * Implementation of the function for printing the form elements that control</span>
<a name="l1322"><span class="linenum">1322</span></a>  <span class="comment"> * whether the course reset functionality affects the quiz.</span>
<a name="l1323"><span class="linenum">1323</span></a>  <span class="comment"> *</span>
<a name="l1324"><span class="linenum">1324</span></a>  <span class="comment"> * @param $mform the course reset form that is being built.</span>
<a name="l1325"><span class="linenum">1325</span></a>  <span class="comment"> */</span>
<a name="l1326"><span class="linenum">1326</span></a>  function <a class="function" onClick="logFunction('quiz_reset_course_form_definition')" href="../../_functions/quiz_reset_course_form_definition.html" onMouseOver="funcPopup(event,'quiz_reset_course_form_definition')">quiz_reset_course_form_definition</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l1327"><span class="linenum">1327</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'quizheader', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'quiz'));
<a name="l1328"><span class="linenum">1328</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('advcheckbox', 'reset_quiz_attempts',
<a name="l1329"><span class="linenum">1329</span></a>              <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('removeallquizattempts', 'quiz'));
<a name="l1330"><span class="linenum">1330</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('advcheckbox', 'reset_quiz_user_overrides',
<a name="l1331"><span class="linenum">1331</span></a>              <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('removealluseroverrides', 'quiz'));
<a name="l1332"><span class="linenum">1332</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('advcheckbox', 'reset_quiz_group_overrides',
<a name="l1333"><span class="linenum">1333</span></a>              <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('removeallgroupoverrides', 'quiz'));
<a name="l1334"><span class="linenum">1334</span></a>  }
<a name="l1335"><span class="linenum">1335</span></a>  
<a name="l1336"><span class="linenum">1336</span></a>  <span class="comment">/**</span>
<a name="l1337"><span class="linenum">1337</span></a>  <span class="comment"> * Course reset form defaults.</span>
<a name="l1338"><span class="linenum">1338</span></a>  <span class="comment"> * @return array the defaults.</span>
<a name="l1339"><span class="linenum">1339</span></a>  <span class="comment"> */</span>
<a name="l1340"><span class="linenum">1340</span></a>  function <a class="function" onClick="logFunction('quiz_reset_course_form_defaults')" href="../../_functions/quiz_reset_course_form_defaults.html" onMouseOver="funcPopup(event,'quiz_reset_course_form_defaults')">quiz_reset_course_form_defaults</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l1341"><span class="linenum">1341</span></a>      return array('reset_quiz_attempts' =&gt; 1,
<a name="l1342"><span class="linenum">1342</span></a>                   'reset_quiz_group_overrides' =&gt; 1,
<a name="l1343"><span class="linenum">1343</span></a>                   'reset_quiz_user_overrides' =&gt; 1);
<a name="l1344"><span class="linenum">1344</span></a>  }
<a name="l1345"><span class="linenum">1345</span></a>  
<a name="l1346"><span class="linenum">1346</span></a>  <span class="comment">/**</span>
<a name="l1347"><span class="linenum">1347</span></a>  <span class="comment"> * Removes all grades from gradebook</span>
<a name="l1348"><span class="linenum">1348</span></a>  <span class="comment"> *</span>
<a name="l1349"><span class="linenum">1349</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l1350"><span class="linenum">1350</span></a>  <span class="comment"> * @param string optional type</span>
<a name="l1351"><span class="linenum">1351</span></a>  <span class="comment"> */</span>
<a name="l1352"><span class="linenum">1352</span></a>  function <a class="function" onClick="logFunction('quiz_reset_gradebook')" href="../../_functions/quiz_reset_gradebook.html" onMouseOver="funcPopup(event,'quiz_reset_gradebook')">quiz_reset_gradebook</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>='') {
<a name="l1353"><span class="linenum">1353</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1354"><span class="linenum">1354</span></a>  
<a name="l1355"><span class="linenum">1355</span></a>      <a class="var it6468" onMouseOver="hilite(6468)" onMouseOut="lolite()" onClick="logVariable('quizzes')" href="../../_variables/quizzes.html">$quizzes</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;
<a name="l1356"><span class="linenum">1356</span></a>              SELECT q.*, cm.idnumber as cmidnumber, q.course as courseid
<a name="l1357"><span class="linenum">1357</span></a>              FROM {modules} m
<a name="l1358"><span class="linenum">1358</span></a>              JOIN {course_modules} cm ON m.id = cm.module
<a name="l1359"><span class="linenum">1359</span></a>              JOIN {quiz} q ON cm.instance = q.id
<a name="l1360"><span class="linenum">1360</span></a>              WHERE m.name = 'quiz' AND cm.course = ?&quot;, array(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>));
<a name="l1361"><span class="linenum">1361</span></a>  
<a name="l1362"><span class="linenum">1362</span></a>      foreach (<a class="var it6468" onMouseOver="hilite(6468)" onMouseOut="lolite()" onClick="logVariable('quizzes')" href="../../_variables/quizzes.html">$quizzes</a> as <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l1363"><span class="linenum">1363</span></a>          <a class="function" onClick="logFunction('quiz_grade_item_update')" href="../../_functions/quiz_grade_item_update.html" onMouseOver="funcPopup(event,'quiz_grade_item_update')">quiz_grade_item_update</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, 'reset');
<a name="l1364"><span class="linenum">1364</span></a>      }
<a name="l1365"><span class="linenum">1365</span></a>  }
<a name="l1366"><span class="linenum">1366</span></a>  
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment">/**</span>
<a name="l1368"><span class="linenum">1368</span></a>  <span class="comment"> * Actual implementation of the reset course functionality, delete all the</span>
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment"> * quiz attempts for course $data-&gt;courseid, if $data-&gt;reset_quiz_attempts is</span>
<a name="l1370"><span class="linenum">1370</span></a>  <span class="comment"> * set and true.</span>
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment"> *</span>
<a name="l1372"><span class="linenum">1372</span></a>  <span class="comment"> * Also, move the quiz open and close dates, if the course start date is changing.</span>
<a name="l1373"><span class="linenum">1373</span></a>  <span class="comment"> *</span>
<a name="l1374"><span class="linenum">1374</span></a>  <span class="comment"> * @param object $data the data submitted from the reset course.</span>
<a name="l1375"><span class="linenum">1375</span></a>  <span class="comment"> * @return array status array</span>
<a name="l1376"><span class="linenum">1376</span></a>  <span class="comment"> */</span>
<a name="l1377"><span class="linenum">1377</span></a>  function <a class="function" onClick="logFunction('quiz_reset_userdata')" href="../../_functions/quiz_reset_userdata.html" onMouseOver="funcPopup(event,'quiz_reset_userdata')">quiz_reset_userdata</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l1378"><span class="linenum">1378</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1379"><span class="linenum">1379</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/questionlib.php');
<a name="l1380"><span class="linenum">1380</span></a>  
<a name="l1381"><span class="linenum">1381</span></a>      <a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'quiz');
<a name="l1382"><span class="linenum">1382</span></a>      <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = array();
<a name="l1383"><span class="linenum">1383</span></a>  
<a name="l1384"><span class="linenum">1384</span></a>  <span class="comment">    // Delete attempts.</span>
<a name="l1385"><span class="linenum">1385</span></a>      if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_quiz_attempts')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_quiz_attempts.html">reset_quiz_attempts</a>)) {
<a name="l1386"><span class="linenum">1386</span></a>          question_engine::<a class="function" onClick="logFunction('delete_questions_usage_by_activities')" href="../../_functions/delete_questions_usage_by_activities.html" onMouseOver="funcPopup(event,'delete_questions_usage_by_activities')">delete_questions_usage_by_activities</a>(<span class="keyword">new </span><a class="class" onClick="logClass('qubaid_join')" href="../../_classes/qubaid_join.html" onMouseOver="classPopup(event,'qubaid_join')">qubaid_join</a>(
<a name="l1387"><span class="linenum">1387</span></a>                  '{quiz_attempts} quiza JOIN {quiz} quiz ON quiza.quiz = quiz.id',
<a name="l1388"><span class="linenum">1388</span></a>                  'quiza.uniqueid', 'quiz.course = :quizcourseid',
<a name="l1389"><span class="linenum">1389</span></a>                  array('quizcourseid' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>)));
<a name="l1390"><span class="linenum">1390</span></a>  
<a name="l1391"><span class="linenum">1391</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('quiz_attempts',
<a name="l1392"><span class="linenum">1392</span></a>                  'quiz IN (SELECT id FROM {quiz} WHERE course = ?)', array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>));
<a name="l1393"><span class="linenum">1393</span></a>          <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array(
<a name="l1394"><span class="linenum">1394</span></a>              'component' =&gt; <a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>,
<a name="l1395"><span class="linenum">1395</span></a>              'item' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('attemptsdeleted', 'quiz'),
<a name="l1396"><span class="linenum">1396</span></a>              'error' =&gt; false);
<a name="l1397"><span class="linenum">1397</span></a>  
<a name="l1398"><span class="linenum">1398</span></a>  <span class="comment">        // Remove all grades from gradebook.</span>
<a name="l1399"><span class="linenum">1399</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('quiz_grades',
<a name="l1400"><span class="linenum">1400</span></a>                  'quiz IN (SELECT id FROM {quiz} WHERE course = ?)', array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>));
<a name="l1401"><span class="linenum">1401</span></a>          if (empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_gradebook_grades')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_gradebook_grades.html">reset_gradebook_grades</a>)) {
<a name="l1402"><span class="linenum">1402</span></a>              <a class="function" onClick="logFunction('quiz_reset_gradebook')" href="../../_functions/quiz_reset_gradebook.html" onMouseOver="funcPopup(event,'quiz_reset_gradebook')">quiz_reset_gradebook</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>);
<a name="l1403"><span class="linenum">1403</span></a>          }
<a name="l1404"><span class="linenum">1404</span></a>          <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array(
<a name="l1405"><span class="linenum">1405</span></a>              'component' =&gt; <a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>,
<a name="l1406"><span class="linenum">1406</span></a>              'item' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradesdeleted', 'quiz'),
<a name="l1407"><span class="linenum">1407</span></a>              'error' =&gt; false);
<a name="l1408"><span class="linenum">1408</span></a>      }
<a name="l1409"><span class="linenum">1409</span></a>  
<a name="l1410"><span class="linenum">1410</span></a>  <span class="comment">    // Remove user overrides.</span>
<a name="l1411"><span class="linenum">1411</span></a>      if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_quiz_user_overrides')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_quiz_user_overrides.html">reset_quiz_user_overrides</a>)) {
<a name="l1412"><span class="linenum">1412</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('quiz_overrides',
<a name="l1413"><span class="linenum">1413</span></a>                  'quiz IN (SELECT id FROM {quiz} WHERE course = ?) AND userid IS NOT NULL', array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>));
<a name="l1414"><span class="linenum">1414</span></a>          <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array(
<a name="l1415"><span class="linenum">1415</span></a>              'component' =&gt; <a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>,
<a name="l1416"><span class="linenum">1416</span></a>              'item' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('useroverridesdeleted', 'quiz'),
<a name="l1417"><span class="linenum">1417</span></a>              'error' =&gt; false);
<a name="l1418"><span class="linenum">1418</span></a>      }
<a name="l1419"><span class="linenum">1419</span></a>  <span class="comment">    // Remove group overrides.</span>
<a name="l1420"><span class="linenum">1420</span></a>      if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_quiz_group_overrides')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_quiz_group_overrides.html">reset_quiz_group_overrides</a>)) {
<a name="l1421"><span class="linenum">1421</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('quiz_overrides',
<a name="l1422"><span class="linenum">1422</span></a>                  'quiz IN (SELECT id FROM {quiz} WHERE course = ?) AND groupid IS NOT NULL', array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>));
<a name="l1423"><span class="linenum">1423</span></a>          <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array(
<a name="l1424"><span class="linenum">1424</span></a>              'component' =&gt; <a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>,
<a name="l1425"><span class="linenum">1425</span></a>              'item' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('groupoverridesdeleted', 'quiz'),
<a name="l1426"><span class="linenum">1426</span></a>              'error' =&gt; false);
<a name="l1427"><span class="linenum">1427</span></a>      }
<a name="l1428"><span class="linenum">1428</span></a>  
<a name="l1429"><span class="linenum">1429</span></a>  <span class="comment">    // Updating dates - shift may be negative too.</span>
<a name="l1430"><span class="linenum">1430</span></a>      if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeshift')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timeshift.html">timeshift</a>) {
<a name="l1431"><span class="linenum">1431</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(&quot;UPDATE {quiz_overrides}
<a name="l1432"><span class="linenum">1432</span></a>                           SET timeopen = timeopen + ?
<a name="l1433"><span class="linenum">1433</span></a>                         WHERE quiz IN (SELECT id FROM {quiz} WHERE course = ?)
<a name="l1434"><span class="linenum">1434</span></a>                           AND timeopen &lt;&gt; 0&quot;, array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeshift')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timeshift.html">timeshift</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>));
<a name="l1435"><span class="linenum">1435</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(&quot;UPDATE {quiz_overrides}
<a name="l1436"><span class="linenum">1436</span></a>                           SET timeclose = timeclose + ?
<a name="l1437"><span class="linenum">1437</span></a>                         WHERE quiz IN (SELECT id FROM {quiz} WHERE course = ?)
<a name="l1438"><span class="linenum">1438</span></a>                           AND timeclose &lt;&gt; 0&quot;, array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeshift')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timeshift.html">timeshift</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>));
<a name="l1439"><span class="linenum">1439</span></a>  
<a name="l1440"><span class="linenum">1440</span></a>          <a class="function" onClick="logFunction('shift_course_mod_dates')" href="../../_functions/shift_course_mod_dates.html" onMouseOver="funcPopup(event,'shift_course_mod_dates')">shift_course_mod_dates</a>('quiz', array('timeopen', 'timeclose'),
<a name="l1441"><span class="linenum">1441</span></a>                  <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeshift')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timeshift.html">timeshift</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>);
<a name="l1442"><span class="linenum">1442</span></a>  
<a name="l1443"><span class="linenum">1443</span></a>          <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array(
<a name="l1444"><span class="linenum">1444</span></a>              'component' =&gt; <a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>,
<a name="l1445"><span class="linenum">1445</span></a>              'item' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('openclosedatesupdated', 'quiz'),
<a name="l1446"><span class="linenum">1446</span></a>              'error' =&gt; false);
<a name="l1447"><span class="linenum">1447</span></a>      }
<a name="l1448"><span class="linenum">1448</span></a>  
<a name="l1449"><span class="linenum">1449</span></a>      return <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>;
<a name="l1450"><span class="linenum">1450</span></a>  }
<a name="l1451"><span class="linenum">1451</span></a>  
<a name="l1452"><span class="linenum">1452</span></a>  <span class="comment">/**</span>
<a name="l1453"><span class="linenum">1453</span></a>  <span class="comment"> * Prints quiz summaries on MyMoodle Page</span>
<a name="l1454"><span class="linenum">1454</span></a>  <span class="comment"> * @param arry $courses</span>
<a name="l1455"><span class="linenum">1455</span></a>  <span class="comment"> * @param array $htmlarray</span>
<a name="l1456"><span class="linenum">1456</span></a>  <span class="comment"> */</span>
<a name="l1457"><span class="linenum">1457</span></a>  function <a class="function" onClick="logFunction('quiz_print_overview')" href="../../_functions/quiz_print_overview.html" onMouseOver="funcPopup(event,'quiz_print_overview')">quiz_print_overview</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>, &amp;<a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('htmlarray')" href="../../_variables/htmlarray.html">$htmlarray</a>) {
<a name="l1458"><span class="linenum">1458</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1459"><span class="linenum">1459</span></a>  <span class="comment">    // These next 6 Lines are constant in all modules (just change module name).</span>
<a name="l1460"><span class="linenum">1460</span></a>      if (empty(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>) || !<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>) || <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>) == 0) {
<a name="l1461"><span class="linenum">1461</span></a>          return array();
<a name="l1462"><span class="linenum">1462</span></a>      }
<a name="l1463"><span class="linenum">1463</span></a>  
<a name="l1464"><span class="linenum">1464</span></a>      if (!<a class="var it6468" onMouseOver="hilite(6468)" onMouseOut="lolite()" onClick="logVariable('quizzes')" href="../../_variables/quizzes.html">$quizzes</a> = <a class="function" onClick="logFunction('get_all_instances_in_courses')" href="../../_functions/get_all_instances_in_courses.html" onMouseOver="funcPopup(event,'get_all_instances_in_courses')">get_all_instances_in_courses</a>('quiz', <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>)) {
<a name="l1465"><span class="linenum">1465</span></a>          return;
<a name="l1466"><span class="linenum">1466</span></a>      }
<a name="l1467"><span class="linenum">1467</span></a>  
<a name="l1468"><span class="linenum">1468</span></a>  <span class="comment">    // Fetch some language strings outside the main loop.</span>
<a name="l1469"><span class="linenum">1469</span></a>      <a class="var it38842" onMouseOver="hilite(38842)" onMouseOut="lolite()" onClick="logVariable('strquiz')" href="../../_variables/strquiz.html">$strquiz</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', 'quiz');
<a name="l1470"><span class="linenum">1470</span></a>      <a class="var it38843" onMouseOver="hilite(38843)" onMouseOut="lolite()" onClick="logVariable('strnoattempts')" href="../../_variables/strnoattempts.html">$strnoattempts</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('noattempts', 'quiz');
<a name="l1471"><span class="linenum">1471</span></a>  
<a name="l1472"><span class="linenum">1472</span></a>  <span class="comment">    // We want to list quizzes that are currently available, and which have a close date.</span>
<a name="l1473"><span class="linenum">1473</span></a>  <span class="comment">    // This is the same as what the lesson does, and the dabate is in MDL-10568.</span>
<a name="l1474"><span class="linenum">1474</span></a>      <a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1475"><span class="linenum">1475</span></a>      foreach (<a class="var it6468" onMouseOver="hilite(6468)" onMouseOut="lolite()" onClick="logVariable('quizzes')" href="../../_variables/quizzes.html">$quizzes</a> as <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) {
<a name="l1476"><span class="linenum">1476</span></a>          if (<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('timeclose')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a> &gt;= <a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a> &amp;&amp; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('timeopen')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/timeopen.html">timeopen</a> &lt; <a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a>) {
<a name="l1477"><span class="linenum">1477</span></a>  <span class="comment">            // Give a link to the quiz, and the deadline.</span>
<a name="l1478"><span class="linenum">1478</span></a>              <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> = '&lt;div class=&quot;quiz overview&quot;&gt;' .
<a name="l1479"><span class="linenum">1479</span></a>                      '&lt;div class=&quot;name&quot;&gt;' . <a class="var it38842" onMouseOver="hilite(38842)" onMouseOut="lolite()" onClick="logVariable('strquiz')" href="../../_variables/strquiz.html">$strquiz</a> . ': &lt;a ' .
<a name="l1480"><span class="linenum">1480</span></a>                      (<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('visible')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/visible.html">visible</a> ? '' : ' class=&quot;dimmed&quot;') .
<a name="l1481"><span class="linenum">1481</span></a>                      ' href=&quot;' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> . '/mod/quiz/view.php?id=' .
<a name="l1482"><span class="linenum">1482</span></a>                      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a> . '&quot;&gt;' .
<a name="l1483"><span class="linenum">1483</span></a>                      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('name')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> . '&lt;/a&gt;&lt;/div&gt;';
<a name="l1484"><span class="linenum">1484</span></a>              <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= '&lt;div class=&quot;info&quot;&gt;' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('quizcloseson', 'quiz',
<a name="l1485"><span class="linenum">1485</span></a>                      <a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('timeclose')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a>)) . '&lt;/div&gt;';
<a name="l1486"><span class="linenum">1486</span></a>  
<a name="l1487"><span class="linenum">1487</span></a>  <span class="comment">            // Now provide more information depending on the uers's role.</span>
<a name="l1488"><span class="linenum">1488</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>);
<a name="l1489"><span class="linenum">1489</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/quiz:viewreports', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1490"><span class="linenum">1490</span></a>  <span class="comment">                // For teacher-like people, show a summary of the number of student attempts.</span>
<a name="l1491"><span class="linenum">1491</span></a>  <span class="comment">                // The $quiz objects returned by get_all_instances_in_course have the necessary $cm</span>
<a name="l1492"><span class="linenum">1492</span></a>  <span class="comment">                // fields set to make the following call work.</span>
<a name="l1493"><span class="linenum">1493</span></a>                  <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= '&lt;div class=&quot;info&quot;&gt;' .
<a name="l1494"><span class="linenum">1494</span></a>                          <a class="function" onClick="logFunction('quiz_num_attempt_summary')" href="../../_functions/quiz_num_attempt_summary.html" onMouseOver="funcPopup(event,'quiz_num_attempt_summary')">quiz_num_attempt_summary</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, true) . '&lt;/div&gt;';
<a name="l1495"><span class="linenum">1495</span></a>              } else if (<a class="function" onClick="logFunction('has_any_capability')" href="../../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('mod/quiz:reviewmyattempts', 'mod/quiz:attempt'),
<a name="l1496"><span class="linenum">1496</span></a>                      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) { // Student
<a name="l1497"><span class="linenum">1497</span></a>  <span class="comment">                // For student-like people, tell them how many attempts they have made.</span>
<a name="l1498"><span class="linenum">1498</span></a>                  if (isset(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) &amp;&amp;
<a name="l1499"><span class="linenum">1499</span></a>                          (<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> = <a class="function" onClick="logFunction('quiz_get_user_attempts')" href="../../_functions/quiz_get_user_attempts.html" onMouseOver="funcPopup(event,'quiz_get_user_attempts')">quiz_get_user_attempts</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l1500"><span class="linenum">1500</span></a>                      <a class="var it16051" onMouseOver="hilite(16051)" onMouseOut="lolite()" onClick="logVariable('numattempts')" href="../../_variables/numattempts.html">$numattempts</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>);
<a name="l1501"><span class="linenum">1501</span></a>                      <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= '&lt;div class=&quot;info&quot;&gt;' .
<a name="l1502"><span class="linenum">1502</span></a>                              <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('numattemptsmade', 'quiz', <a class="var it16051" onMouseOver="hilite(16051)" onMouseOut="lolite()" onClick="logVariable('numattempts')" href="../../_variables/numattempts.html">$numattempts</a>) . '&lt;/div&gt;';
<a name="l1503"><span class="linenum">1503</span></a>                  } else {
<a name="l1504"><span class="linenum">1504</span></a>                      <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= '&lt;div class=&quot;info&quot;&gt;' . <a class="var it38843" onMouseOver="hilite(38843)" onMouseOut="lolite()" onClick="logVariable('strnoattempts')" href="../../_variables/strnoattempts.html">$strnoattempts</a> . '&lt;/div&gt;';
<a name="l1505"><span class="linenum">1505</span></a>                  }
<a name="l1506"><span class="linenum">1506</span></a>              } else {
<a name="l1507"><span class="linenum">1507</span></a>  <span class="comment">                // For ayone else, there is no point listing this quiz, so stop processing.</span>
<a name="l1508"><span class="linenum">1508</span></a>                  continue;
<a name="l1509"><span class="linenum">1509</span></a>              }
<a name="l1510"><span class="linenum">1510</span></a>  
<a name="l1511"><span class="linenum">1511</span></a>  <span class="comment">            // Add the output for this quiz to the rest.</span>
<a name="l1512"><span class="linenum">1512</span></a>              <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= '&lt;/div&gt;';
<a name="l1513"><span class="linenum">1513</span></a>              if (empty(<a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('htmlarray')" href="../../_variables/htmlarray.html">$htmlarray</a>[<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('course')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>]['quiz'])) {
<a name="l1514"><span class="linenum">1514</span></a>                  <a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('htmlarray')" href="../../_variables/htmlarray.html">$htmlarray</a>[<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('course')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>]['quiz'] = <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>;
<a name="l1515"><span class="linenum">1515</span></a>              } else {
<a name="l1516"><span class="linenum">1516</span></a>                  <a class="var it7035" onMouseOver="hilite(7035)" onMouseOut="lolite()" onClick="logVariable('htmlarray')" href="../../_variables/htmlarray.html">$htmlarray</a>[<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('course')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>]['quiz'] .= <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>;
<a name="l1517"><span class="linenum">1517</span></a>              }
<a name="l1518"><span class="linenum">1518</span></a>          }
<a name="l1519"><span class="linenum">1519</span></a>      }
<a name="l1520"><span class="linenum">1520</span></a>  }
<a name="l1521"><span class="linenum">1521</span></a>  
<a name="l1522"><span class="linenum">1522</span></a>  <span class="comment">/**</span>
<a name="l1523"><span class="linenum">1523</span></a>  <span class="comment"> * Return a textual summary of the number of attempts that have been made at a particular quiz,</span>
<a name="l1524"><span class="linenum">1524</span></a>  <span class="comment"> * returns '' if no attempts have been made yet, unless $returnzero is passed as true.</span>
<a name="l1525"><span class="linenum">1525</span></a>  <span class="comment"> *</span>
<a name="l1526"><span class="linenum">1526</span></a>  <span class="comment"> * @param object $quiz the quiz object. Only $quiz-&gt;id is used at the moment.</span>
<a name="l1527"><span class="linenum">1527</span></a>  <span class="comment"> * @param object $cm the cm object. Only $cm-&gt;course, $cm-&gt;groupmode and</span>
<a name="l1528"><span class="linenum">1528</span></a>  <span class="comment"> *      $cm-&gt;groupingid fields are used at the moment.</span>
<a name="l1529"><span class="linenum">1529</span></a>  <span class="comment"> * @param bool $returnzero if false (default), when no attempts have been</span>
<a name="l1530"><span class="linenum">1530</span></a>  <span class="comment"> *      made '' is returned instead of 'Attempts: 0'.</span>
<a name="l1531"><span class="linenum">1531</span></a>  <span class="comment"> * @param int $currentgroup if there is a concept of current group where this method is being called</span>
<a name="l1532"><span class="linenum">1532</span></a>  <span class="comment"> *         (e.g. a report) pass it in here. Default 0 which means no current group.</span>
<a name="l1533"><span class="linenum">1533</span></a>  <span class="comment"> * @return string a string like &quot;Attempts: 123&quot;, &quot;Attemtps 123 (45 from your groups)&quot; or</span>
<a name="l1534"><span class="linenum">1534</span></a>  <span class="comment"> *          &quot;Attemtps 123 (45 from this group)&quot;.</span>
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment"> */</span>
<a name="l1536"><span class="linenum">1536</span></a>  function <a class="function" onClick="logFunction('quiz_num_attempt_summary')" href="../../_functions/quiz_num_attempt_summary.html" onMouseOver="funcPopup(event,'quiz_num_attempt_summary')">quiz_num_attempt_summary</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it16060" onMouseOver="hilite(16060)" onMouseOut="lolite()" onClick="logVariable('returnzero')" href="../../_variables/returnzero.html">$returnzero</a> = false, <a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = 0) {
<a name="l1537"><span class="linenum">1537</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l1538"><span class="linenum">1538</span></a>      <a class="var it16051" onMouseOver="hilite(16051)" onMouseOut="lolite()" onClick="logVariable('numattempts')" href="../../_variables/numattempts.html">$numattempts</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('quiz_attempts', array('quiz'=&gt; <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'preview'=&gt;0));
<a name="l1539"><span class="linenum">1539</span></a>      if (<a class="var it16051" onMouseOver="hilite(16051)" onMouseOut="lolite()" onClick="logVariable('numattempts')" href="../../_variables/numattempts.html">$numattempts</a> || <a class="var it16060" onMouseOver="hilite(16060)" onMouseOut="lolite()" onClick="logVariable('returnzero')" href="../../_variables/returnzero.html">$returnzero</a>) {
<a name="l1540"><span class="linenum">1540</span></a>          if (<a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>)) {
<a name="l1541"><span class="linenum">1541</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a> = new stdClass();
<a name="l1542"><span class="linenum">1542</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('total')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/total.html">total</a> = <a class="var it16051" onMouseOver="hilite(16051)" onMouseOut="lolite()" onClick="logVariable('numattempts')" href="../../_variables/numattempts.html">$numattempts</a>;
<a name="l1543"><span class="linenum">1543</span></a>              if (<a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>) {
<a name="l1544"><span class="linenum">1544</span></a>                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('group')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/group.html">group</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>('SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT qa.id) FROM ' .
<a name="l1545"><span class="linenum">1545</span></a>                          '{quiz_attempts} qa JOIN ' .
<a name="l1546"><span class="linenum">1546</span></a>                          '{groups_members} gm ON qa.userid = gm.userid ' .
<a name="l1547"><span class="linenum">1547</span></a>                          'WHERE quiz = ? AND preview = 0 AND groupid = ?',
<a name="l1548"><span class="linenum">1548</span></a>                          array(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>));
<a name="l1549"><span class="linenum">1549</span></a>                  return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('attemptsnumthisgroup', 'quiz', <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>);
<a name="l1550"><span class="linenum">1550</span></a>              } else if (<a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>)) {
<a name="l1551"><span class="linenum">1551</span></a>                  <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2909" onMouseOver="hilite(2909)" onMouseOut="lolite()" onClick="logVariable('usql')" href="../../_variables/usql.html">$usql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>));
<a name="l1552"><span class="linenum">1552</span></a>                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('group')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/group.html">group</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>('SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT qa.id) FROM ' .
<a name="l1553"><span class="linenum">1553</span></a>                          '{quiz_attempts} qa JOIN ' .
<a name="l1554"><span class="linenum">1554</span></a>                          '{groups_members} gm ON qa.userid = gm.userid ' .
<a name="l1555"><span class="linenum">1555</span></a>                          'WHERE quiz = ? AND preview = 0 AND ' .
<a name="l1556"><span class="linenum">1556</span></a>                          &quot;groupid <a class="var it2909" onMouseOver="hilite(2909)" onMouseOut="lolite()" onClick="logVariable('usql')" href="../../_variables/usql.html">$usql</a>&quot;, <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(array(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>));
<a name="l1557"><span class="linenum">1557</span></a>                  return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('attemptsnumyourgroups', 'quiz', <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>);
<a name="l1558"><span class="linenum">1558</span></a>              }
<a name="l1559"><span class="linenum">1559</span></a>          }
<a name="l1560"><span class="linenum">1560</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('attemptsnum', 'quiz', <a class="var it16051" onMouseOver="hilite(16051)" onMouseOut="lolite()" onClick="logVariable('numattempts')" href="../../_variables/numattempts.html">$numattempts</a>);
<a name="l1561"><span class="linenum">1561</span></a>      }
<a name="l1562"><span class="linenum">1562</span></a>      return '';
<a name="l1563"><span class="linenum">1563</span></a>  }
<a name="l1564"><span class="linenum">1564</span></a>  
<a name="l1565"><span class="linenum">1565</span></a>  <span class="comment">/**</span>
<a name="l1566"><span class="linenum">1566</span></a>  <span class="comment"> * Returns the same as {@link quiz_num_attempt_summary()} but wrapped in a link</span>
<a name="l1567"><span class="linenum">1567</span></a>  <span class="comment"> * to the quiz reports.</span>
<a name="l1568"><span class="linenum">1568</span></a>  <span class="comment"> *</span>
<a name="l1569"><span class="linenum">1569</span></a>  <span class="comment"> * @param object $quiz the quiz object. Only $quiz-&gt;id is used at the moment.</span>
<a name="l1570"><span class="linenum">1570</span></a>  <span class="comment"> * @param object $cm the cm object. Only $cm-&gt;course, $cm-&gt;groupmode and</span>
<a name="l1571"><span class="linenum">1571</span></a>  <span class="comment"> *      $cm-&gt;groupingid fields are used at the moment.</span>
<a name="l1572"><span class="linenum">1572</span></a>  <span class="comment"> * @param object $context the quiz context.</span>
<a name="l1573"><span class="linenum">1573</span></a>  <span class="comment"> * @param bool $returnzero if false (default), when no attempts have been made</span>
<a name="l1574"><span class="linenum">1574</span></a>  <span class="comment"> *      '' is returned instead of 'Attempts: 0'.</span>
<a name="l1575"><span class="linenum">1575</span></a>  <span class="comment"> * @param int $currentgroup if there is a concept of current group where this method is being called</span>
<a name="l1576"><span class="linenum">1576</span></a>  <span class="comment"> *         (e.g. a report) pass it in here. Default 0 which means no current group.</span>
<a name="l1577"><span class="linenum">1577</span></a>  <span class="comment"> * @return string HTML fragment for the link.</span>
<a name="l1578"><span class="linenum">1578</span></a>  <span class="comment"> */</span>
<a name="l1579"><span class="linenum">1579</span></a>  function <a class="function" onClick="logFunction('quiz_attempt_summary_link_to_reports')" href="../../_functions/quiz_attempt_summary_link_to_reports.html" onMouseOver="funcPopup(event,'quiz_attempt_summary_link_to_reports')">quiz_attempt_summary_link_to_reports</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it16060" onMouseOver="hilite(16060)" onMouseOut="lolite()" onClick="logVariable('returnzero')" href="../../_variables/returnzero.html">$returnzero</a> = false,
<a name="l1580"><span class="linenum">1580</span></a>          <a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = 0) {
<a name="l1581"><span class="linenum">1581</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1582"><span class="linenum">1582</span></a>      <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../_variables/summary.html">$summary</a> = <a class="function" onClick="logFunction('quiz_num_attempt_summary')" href="../../_functions/quiz_num_attempt_summary.html" onMouseOver="funcPopup(event,'quiz_num_attempt_summary')">quiz_num_attempt_summary</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it16060" onMouseOver="hilite(16060)" onMouseOut="lolite()" onClick="logVariable('returnzero')" href="../../_variables/returnzero.html">$returnzero</a>, <a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>);
<a name="l1583"><span class="linenum">1583</span></a>      if (!<a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../_variables/summary.html">$summary</a>) {
<a name="l1584"><span class="linenum">1584</span></a>          return '';
<a name="l1585"><span class="linenum">1585</span></a>      }
<a name="l1586"><span class="linenum">1586</span></a>  
<a name="l1587"><span class="linenum">1587</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/quiz/report/reportlib.php.html">/mod/quiz/report/reportlib.php</a>');
<a name="l1588"><span class="linenum">1588</span></a>      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/quiz/report.php.html">/mod/quiz/report.php</a>', array(
<a name="l1589"><span class="linenum">1589</span></a>              'id' =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mode' =&gt; <a class="function" onClick="logFunction('quiz_report_default_report')" href="../../_functions/quiz_report_default_report.html" onMouseOver="funcPopup(event,'quiz_report_default_report')">quiz_report_default_report</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)));
<a name="l1590"><span class="linenum">1590</span></a>      return <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it105" onMouseOver="hilite(105)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../_variables/summary.html">$summary</a>);
<a name="l1591"><span class="linenum">1591</span></a>  }
<a name="l1592"><span class="linenum">1592</span></a>  
<a name="l1593"><span class="linenum">1593</span></a>  <span class="comment">/**</span>
<a name="l1594"><span class="linenum">1594</span></a>  <span class="comment"> * @param string $feature FEATURE_xx constant for requested feature</span>
<a name="l1595"><span class="linenum">1595</span></a>  <span class="comment"> * @return bool True if quiz supports feature</span>
<a name="l1596"><span class="linenum">1596</span></a>  <span class="comment"> */</span>
<a name="l1597"><span class="linenum">1597</span></a>  function <a class="function" onClick="logFunction('quiz_supports')" href="../../_functions/quiz_supports.html" onMouseOver="funcPopup(event,'quiz_supports')">quiz_supports</a>(<a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l1598"><span class="linenum">1598</span></a>      switch(<a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l1599"><span class="linenum">1599</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPS')" href="../../_constants/FEATURE_GROUPS.html" onMouseOver="constPopup(event,'FEATURE_GROUPS')">FEATURE_GROUPS</a>:                    return true;
<a name="l1600"><span class="linenum">1600</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPINGS')" href="../../_constants/FEATURE_GROUPINGS.html" onMouseOver="constPopup(event,'FEATURE_GROUPINGS')">FEATURE_GROUPINGS</a>:                 return true;
<a name="l1601"><span class="linenum">1601</span></a>          case <a class="constant" onClick="logConstant('FEATURE_MOD_INTRO')" href="../../_constants/FEATURE_MOD_INTRO.html" onMouseOver="constPopup(event,'FEATURE_MOD_INTRO')">FEATURE_MOD_INTRO</a>:                 return true;
<a name="l1602"><span class="linenum">1602</span></a>          case <a class="constant" onClick="logConstant('FEATURE_COMPLETION_TRACKS_VIEWS')" href="../../_constants/FEATURE_COMPLETION_TRACKS_VIEWS.html" onMouseOver="constPopup(event,'FEATURE_COMPLETION_TRACKS_VIEWS')">FEATURE_COMPLETION_TRACKS_VIEWS</a>:   return true;
<a name="l1603"><span class="linenum">1603</span></a>          case <a class="constant" onClick="logConstant('FEATURE_COMPLETION_HAS_RULES')" href="../../_constants/FEATURE_COMPLETION_HAS_RULES.html" onMouseOver="constPopup(event,'FEATURE_COMPLETION_HAS_RULES')">FEATURE_COMPLETION_HAS_RULES</a>:      return true;
<a name="l1604"><span class="linenum">1604</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_HAS_GRADE')" href="../../_constants/FEATURE_GRADE_HAS_GRADE.html" onMouseOver="constPopup(event,'FEATURE_GRADE_HAS_GRADE')">FEATURE_GRADE_HAS_GRADE</a>:           return true;
<a name="l1605"><span class="linenum">1605</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_OUTCOMES')" href="../../_constants/FEATURE_GRADE_OUTCOMES.html" onMouseOver="constPopup(event,'FEATURE_GRADE_OUTCOMES')">FEATURE_GRADE_OUTCOMES</a>:            return true;
<a name="l1606"><span class="linenum">1606</span></a>          case <a class="constant" onClick="logConstant('FEATURE_BACKUP_MOODLE2')" href="../../_constants/FEATURE_BACKUP_MOODLE2.html" onMouseOver="constPopup(event,'FEATURE_BACKUP_MOODLE2')">FEATURE_BACKUP_MOODLE2</a>:            return true;
<a name="l1607"><span class="linenum">1607</span></a>          case <a class="constant" onClick="logConstant('FEATURE_SHOW_DESCRIPTION')" href="../../_constants/FEATURE_SHOW_DESCRIPTION.html" onMouseOver="constPopup(event,'FEATURE_SHOW_DESCRIPTION')">FEATURE_SHOW_DESCRIPTION</a>:          return true;
<a name="l1608"><span class="linenum">1608</span></a>          case <a class="constant" onClick="logConstant('FEATURE_CONTROLS_GRADE_VISIBILITY')" href="../../_constants/FEATURE_CONTROLS_GRADE_VISIBILITY.html" onMouseOver="constPopup(event,'FEATURE_CONTROLS_GRADE_VISIBILITY')">FEATURE_CONTROLS_GRADE_VISIBILITY</a>: return true;
<a name="l1609"><span class="linenum">1609</span></a>          case <a class="constant" onClick="logConstant('FEATURE_USES_QUESTIONS')" href="../../_constants/FEATURE_USES_QUESTIONS.html" onMouseOver="constPopup(event,'FEATURE_USES_QUESTIONS')">FEATURE_USES_QUESTIONS</a>:            return true;
<a name="l1610"><span class="linenum">1610</span></a>  
<a name="l1611"><span class="linenum">1611</span></a>          default: return null;
<a name="l1612"><span class="linenum">1612</span></a>      }
<a name="l1613"><span class="linenum">1613</span></a>  }
<a name="l1614"><span class="linenum">1614</span></a>  
<a name="l1615"><span class="linenum">1615</span></a>  <span class="comment">/**</span>
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment"> * @return array all other caps used in module</span>
<a name="l1617"><span class="linenum">1617</span></a>  <span class="comment"> */</span>
<a name="l1618"><span class="linenum">1618</span></a>  function <a class="function" onClick="logFunction('quiz_get_extra_capabilities')" href="../../_functions/quiz_get_extra_capabilities.html" onMouseOver="funcPopup(event,'quiz_get_extra_capabilities')">quiz_get_extra_capabilities</a>() {
<a name="l1619"><span class="linenum">1619</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1620"><span class="linenum">1620</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/questionlib.php');
<a name="l1621"><span class="linenum">1621</span></a>      <a class="var it4955" onMouseOver="hilite(4955)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../../_variables/caps.html">$caps</a> = <a class="function" onClick="logFunction('question_get_all_capabilities')" href="../../_functions/question_get_all_capabilities.html" onMouseOver="funcPopup(event,'question_get_all_capabilities')">question_get_all_capabilities</a>();
<a name="l1622"><span class="linenum">1622</span></a>      <a class="var it4955" onMouseOver="hilite(4955)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../../_variables/caps.html">$caps</a>[] = 'moodle/site:accessallgroups';
<a name="l1623"><span class="linenum">1623</span></a>      return <a class="var it4955" onMouseOver="hilite(4955)" onMouseOut="lolite()" onClick="logVariable('caps')" href="../../_variables/caps.html">$caps</a>;
<a name="l1624"><span class="linenum">1624</span></a>  }
<a name="l1625"><span class="linenum">1625</span></a>  
<a name="l1626"><span class="linenum">1626</span></a>  <span class="comment">/**</span>
<a name="l1627"><span class="linenum">1627</span></a>  <span class="comment"> * This function extends the settings navigation block for the site.</span>
<a name="l1628"><span class="linenum">1628</span></a>  <span class="comment"> *</span>
<a name="l1629"><span class="linenum">1629</span></a>  <span class="comment"> * It is safe to rely on PAGE here as we will only ever be within the module</span>
<a name="l1630"><span class="linenum">1630</span></a>  <span class="comment"> * context when this is called</span>
<a name="l1631"><span class="linenum">1631</span></a>  <span class="comment"> *</span>
<a name="l1632"><span class="linenum">1632</span></a>  <span class="comment"> * @param settings_navigation $settings</span>
<a name="l1633"><span class="linenum">1633</span></a>  <span class="comment"> * @param navigation_node $quiznode</span>
<a name="l1634"><span class="linenum">1634</span></a>  <span class="comment"> * @return void</span>
<a name="l1635"><span class="linenum">1635</span></a>  <span class="comment"> */</span>
<a name="l1636"><span class="linenum">1636</span></a>  function <a class="function" onClick="logFunction('quiz_extend_settings_navigation')" href="../../_functions/quiz_extend_settings_navigation.html" onMouseOver="funcPopup(event,'quiz_extend_settings_navigation')">quiz_extend_settings_navigation</a>(<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>, <a class="var it38844" onMouseOver="hilite(38844)" onMouseOut="lolite()" onClick="logVariable('quiznode')" href="../../_variables/quiznode.html">$quiznode</a>) {
<a name="l1637"><span class="linenum">1637</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1638"><span class="linenum">1638</span></a>  
<a name="l1639"><span class="linenum">1639</span></a>  <span class="comment">    // Require {@link questionlib.php}</span>
<a name="l1640"><span class="linenum">1640</span></a>  <span class="comment">    // Included here as we only ever want to include this file if we really need to.</span>
<a name="l1641"><span class="linenum">1641</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/questionlib.php');
<a name="l1642"><span class="linenum">1642</span></a>  
<a name="l1643"><span class="linenum">1643</span></a>  <span class="comment">    // We want to add these new nodes after the Edit settings node, and before the</span>
<a name="l1644"><span class="linenum">1644</span></a>  <span class="comment">    // Locally assigned roles node. Of course, both of those are controlled by capabilities.</span>
<a name="l1645"><span class="linenum">1645</span></a>      <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a> = <a class="var it38844" onMouseOver="hilite(38844)" onMouseOut="lolite()" onClick="logVariable('quiznode')" href="../../_variables/quiznode.html">$quiznode</a>-&gt;<a class="function" onClick="logFunction('get_children_key_list')" href="../../_functions/get_children_key_list.html" onMouseOver="funcPopup(event,'get_children_key_list')">get_children_key_list</a>();
<a name="l1646"><span class="linenum">1646</span></a>      <a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../../_variables/beforekey.html">$beforekey</a> = null;
<a name="l1647"><span class="linenum">1647</span></a>      <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>('modedit', <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a>);
<a name="l1648"><span class="linenum">1648</span></a>      if (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> === false and <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(0, <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a>)) {
<a name="l1649"><span class="linenum">1649</span></a>          <a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../../_variables/beforekey.html">$beforekey</a> = <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a>[0];
<a name="l1650"><span class="linenum">1650</span></a>      } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> + 1, <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a>)) {
<a name="l1651"><span class="linenum">1651</span></a>          <a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../../_variables/beforekey.html">$beforekey</a> = <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> + 1];
<a name="l1652"><span class="linenum">1652</span></a>      }
<a name="l1653"><span class="linenum">1653</span></a>  
<a name="l1654"><span class="linenum">1654</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/quiz:manageoverrides', <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l1655"><span class="linenum">1655</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/quiz/overrides.php.html">/mod/quiz/overrides.php</a>', array('cmid'=&gt;<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id));
<a name="l1656"><span class="linenum">1656</span></a>          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('groupoverrides', 'quiz'),
<a name="l1657"><span class="linenum">1657</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, array('mode'=&gt;'group')),
<a name="l1658"><span class="linenum">1658</span></a>                  <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING, null, 'mod_quiz_groupoverrides');
<a name="l1659"><span class="linenum">1659</span></a>          <a class="var it38844" onMouseOver="hilite(38844)" onMouseOut="lolite()" onClick="logVariable('quiznode')" href="../../_variables/quiznode.html">$quiznode</a>-&gt;<a class="function" onClick="logFunction('add_node')" href="../../_functions/add_node.html" onMouseOver="funcPopup(event,'add_node')">add_node</a>(<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a>, <a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../../_variables/beforekey.html">$beforekey</a>);
<a name="l1660"><span class="linenum">1660</span></a>  
<a name="l1661"><span class="linenum">1661</span></a>          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('useroverrides', 'quiz'),
<a name="l1662"><span class="linenum">1662</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, array('mode'=&gt;'user')),
<a name="l1663"><span class="linenum">1663</span></a>                  <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING, null, 'mod_quiz_useroverrides');
<a name="l1664"><span class="linenum">1664</span></a>          <a class="var it38844" onMouseOver="hilite(38844)" onMouseOut="lolite()" onClick="logVariable('quiznode')" href="../../_variables/quiznode.html">$quiznode</a>-&gt;<a class="function" onClick="logFunction('add_node')" href="../../_functions/add_node.html" onMouseOver="funcPopup(event,'add_node')">add_node</a>(<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a>, <a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../../_variables/beforekey.html">$beforekey</a>);
<a name="l1665"><span class="linenum">1665</span></a>      }
<a name="l1666"><span class="linenum">1666</span></a>  
<a name="l1667"><span class="linenum">1667</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/quiz:manage', <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l1668"><span class="linenum">1668</span></a>          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editquiz', 'quiz'),
<a name="l1669"><span class="linenum">1669</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/quiz/edit.php.html">/mod/quiz/edit.php</a>', array('cmid'=&gt;<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id)),
<a name="l1670"><span class="linenum">1670</span></a>                  <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING, null, 'mod_quiz_edit',
<a name="l1671"><span class="linenum">1671</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/edit', ''));
<a name="l1672"><span class="linenum">1672</span></a>          <a class="var it38844" onMouseOver="hilite(38844)" onMouseOut="lolite()" onClick="logVariable('quiznode')" href="../../_variables/quiznode.html">$quiznode</a>-&gt;<a class="function" onClick="logFunction('add_node')" href="../../_functions/add_node.html" onMouseOver="funcPopup(event,'add_node')">add_node</a>(<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a>, <a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../../_variables/beforekey.html">$beforekey</a>);
<a name="l1673"><span class="linenum">1673</span></a>      }
<a name="l1674"><span class="linenum">1674</span></a>  
<a name="l1675"><span class="linenum">1675</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/quiz:preview', <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l1676"><span class="linenum">1676</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/quiz/startattempt.php.html">/mod/quiz/startattempt.php</a>',
<a name="l1677"><span class="linenum">1677</span></a>                  array('cmid'=&gt;<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id, 'sesskey'=&gt;<a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l1678"><span class="linenum">1678</span></a>          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('preview', 'quiz'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>,
<a name="l1679"><span class="linenum">1679</span></a>                  <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING, null, 'mod_quiz_preview',
<a name="l1680"><span class="linenum">1680</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/preview', ''));
<a name="l1681"><span class="linenum">1681</span></a>          <a class="var it38844" onMouseOver="hilite(38844)" onMouseOut="lolite()" onClick="logVariable('quiznode')" href="../../_variables/quiznode.html">$quiznode</a>-&gt;<a class="function" onClick="logFunction('add_node')" href="../../_functions/add_node.html" onMouseOver="funcPopup(event,'add_node')">add_node</a>(<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a>, <a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../../_variables/beforekey.html">$beforekey</a>);
<a name="l1682"><span class="linenum">1682</span></a>      }
<a name="l1683"><span class="linenum">1683</span></a>  
<a name="l1684"><span class="linenum">1684</span></a>      if (<a class="function" onClick="logFunction('has_any_capability')" href="../../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('mod/quiz:viewreports', 'mod/quiz:grade'), <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l1685"><span class="linenum">1685</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/quiz/report/reportlib.php.html">/mod/quiz/report/reportlib.php</a>');
<a name="l1686"><span class="linenum">1686</span></a>          <a class="var it17601" onMouseOver="hilite(17601)" onMouseOut="lolite()" onClick="logVariable('reportlist')" href="../../_variables/reportlist.html">$reportlist</a> = <a class="function" onClick="logFunction('quiz_report_list')" href="../../_functions/quiz_report_list.html" onMouseOver="funcPopup(event,'quiz_report_list')">quiz_report_list</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context);
<a name="l1687"><span class="linenum">1687</span></a>  
<a name="l1688"><span class="linenum">1688</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/quiz/report.php.html">/mod/quiz/report.php</a>',
<a name="l1689"><span class="linenum">1689</span></a>                  array('id' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id, 'mode' =&gt; <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it17601" onMouseOver="hilite(17601)" onMouseOut="lolite()" onClick="logVariable('reportlist')" href="../../_variables/reportlist.html">$reportlist</a>)));
<a name="l1690"><span class="linenum">1690</span></a>          <a class="var it30393" onMouseOver="hilite(30393)" onMouseOut="lolite()" onClick="logVariable('reportnode')" href="../../_variables/reportnode.html">$reportnode</a> = <a class="var it38844" onMouseOver="hilite(38844)" onMouseOut="lolite()" onClick="logVariable('quiznode')" href="../../_variables/quiznode.html">$quiznode</a>-&gt;<a class="function" onClick="logFunction('add_node')" href="../../_functions/add_node.html" onMouseOver="funcPopup(event,'add_node')">add_node</a>(<a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('results', 'quiz'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>,
<a name="l1691"><span class="linenum">1691</span></a>                  <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING,
<a name="l1692"><span class="linenum">1692</span></a>                  null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/report', '')), <a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../../_variables/beforekey.html">$beforekey</a>);
<a name="l1693"><span class="linenum">1693</span></a>  
<a name="l1694"><span class="linenum">1694</span></a>          foreach (<a class="var it17601" onMouseOver="hilite(17601)" onMouseOut="lolite()" onClick="logVariable('reportlist')" href="../../_variables/reportlist.html">$reportlist</a> as <a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('report')" href="../../_variables/report.html">$report</a>) {
<a name="l1695"><span class="linenum">1695</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/quiz/report.php.html">/mod/quiz/report.php</a>',
<a name="l1696"><span class="linenum">1696</span></a>                      array('id' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id, 'mode' =&gt; <a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('report')" href="../../_variables/report.html">$report</a>));
<a name="l1697"><span class="linenum">1697</span></a>              <a class="var it30393" onMouseOver="hilite(30393)" onMouseOut="lolite()" onClick="logVariable('reportnode')" href="../../_variables/reportnode.html">$reportnode</a>-&gt;<a class="function" onClick="logFunction('add_node')" href="../../_functions/add_node.html" onMouseOver="funcPopup(event,'add_node')">add_node</a>(<a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('report')" href="../../_variables/report.html">$report</a>, 'quiz_'.<a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('report')" href="../../_variables/report.html">$report</a>), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>,
<a name="l1698"><span class="linenum">1698</span></a>                      <a class="class" onClick="logClass('navigation_node')" href="../../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING,
<a name="l1699"><span class="linenum">1699</span></a>                      null, 'quiz_report_' . <a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('report')" href="../../_variables/report.html">$report</a>, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/item', '')));
<a name="l1700"><span class="linenum">1700</span></a>          }
<a name="l1701"><span class="linenum">1701</span></a>      }
<a name="l1702"><span class="linenum">1702</span></a>  
<a name="l1703"><span class="linenum">1703</span></a>      <a class="function" onClick="logFunction('question_extend_settings_navigation')" href="../../_functions/question_extend_settings_navigation.html" onMouseOver="funcPopup(event,'question_extend_settings_navigation')">question_extend_settings_navigation</a>(<a class="var it38844" onMouseOver="hilite(38844)" onMouseOut="lolite()" onClick="logVariable('quiznode')" href="../../_variables/quiznode.html">$quiznode</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)-&gt;<a class="function" onClick="logFunction('trim_if_empty')" href="../../_functions/trim_if_empty.html" onMouseOver="funcPopup(event,'trim_if_empty')">trim_if_empty</a>();
<a name="l1704"><span class="linenum">1704</span></a>  }
<a name="l1705"><span class="linenum">1705</span></a>  
<a name="l1706"><span class="linenum">1706</span></a>  <span class="comment">/**</span>
<a name="l1707"><span class="linenum">1707</span></a>  <span class="comment"> * Serves the quiz files.</span>
<a name="l1708"><span class="linenum">1708</span></a>  <span class="comment"> *</span>
<a name="l1709"><span class="linenum">1709</span></a>  <span class="comment"> * @package  mod_quiz</span>
<a name="l1710"><span class="linenum">1710</span></a>  <span class="comment"> * @category files</span>
<a name="l1711"><span class="linenum">1711</span></a>  <span class="comment"> * @param stdClass $course course object</span>
<a name="l1712"><span class="linenum">1712</span></a>  <span class="comment"> * @param stdClass $cm course module object</span>
<a name="l1713"><span class="linenum">1713</span></a>  <span class="comment"> * @param stdClass $context context object</span>
<a name="l1714"><span class="linenum">1714</span></a>  <span class="comment"> * @param string $filearea file area</span>
<a name="l1715"><span class="linenum">1715</span></a>  <span class="comment"> * @param array $args extra arguments</span>
<a name="l1716"><span class="linenum">1716</span></a>  <span class="comment"> * @param bool $forcedownload whether or not force download</span>
<a name="l1717"><span class="linenum">1717</span></a>  <span class="comment"> * @param array $options additional options affecting the file serving</span>
<a name="l1718"><span class="linenum">1718</span></a>  <span class="comment"> * @return bool false if file not found, does not return if found - justsend the file</span>
<a name="l1719"><span class="linenum">1719</span></a>  <span class="comment"> */</span>
<a name="l1720"><span class="linenum">1720</span></a>  function <a class="function" onClick="logFunction('quiz_pluginfile')" href="../../_functions/quiz_pluginfile.html" onMouseOver="funcPopup(event,'quiz_pluginfile')">quiz_pluginfile</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>=array()) {
<a name="l1721"><span class="linenum">1721</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1722"><span class="linenum">1722</span></a>  
<a name="l1723"><span class="linenum">1723</span></a>      if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/contextlevel.html">contextlevel</a> != <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>) {
<a name="l1724"><span class="linenum">1724</span></a>          return false;
<a name="l1725"><span class="linenum">1725</span></a>      }
<a name="l1726"><span class="linenum">1726</span></a>  
<a name="l1727"><span class="linenum">1727</span></a>      <a class="function" onClick="logFunction('require_login')" href="../../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, false, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l1728"><span class="linenum">1728</span></a>  
<a name="l1729"><span class="linenum">1729</span></a>      if (!<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('quiz', array('id'=&gt;<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>))) {
<a name="l1730"><span class="linenum">1730</span></a>          return false;
<a name="l1731"><span class="linenum">1731</span></a>      }
<a name="l1732"><span class="linenum">1732</span></a>  
<a name="l1733"><span class="linenum">1733</span></a>  <span class="comment">    // The 'intro' area is served by pluginfile.php.</span>
<a name="l1734"><span class="linenum">1734</span></a>      <a class="var it6022" onMouseOver="hilite(6022)" onMouseOut="lolite()" onClick="logVariable('fileareas')" href="../../_variables/fileareas.html">$fileareas</a> = array('feedback');
<a name="l1735"><span class="linenum">1735</span></a>      if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it6022" onMouseOver="hilite(6022)" onMouseOut="lolite()" onClick="logVariable('fileareas')" href="../../_variables/fileareas.html">$fileareas</a>)) {
<a name="l1736"><span class="linenum">1736</span></a>          return false;
<a name="l1737"><span class="linenum">1737</span></a>      }
<a name="l1738"><span class="linenum">1738</span></a>  
<a name="l1739"><span class="linenum">1739</span></a>      <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a> = (int)<a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l1740"><span class="linenum">1740</span></a>      if (!<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('quiz_feedback', array('id'=&gt;<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>))) {
<a name="l1741"><span class="linenum">1741</span></a>          return false;
<a name="l1742"><span class="linenum">1742</span></a>      }
<a name="l1743"><span class="linenum">1743</span></a>  
<a name="l1744"><span class="linenum">1744</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1745"><span class="linenum">1745</span></a>      <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l1746"><span class="linenum">1746</span></a>      <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a> = &quot;/<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>/mod_quiz/<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>/<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>/<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>&quot;;
<a name="l1747"><span class="linenum">1747</span></a>      if (!<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file_by_hash')" href="../../_functions/get_file_by_hash.html" onMouseOver="funcPopup(event,'get_file_by_hash')">get_file_by_hash</a>(<a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a>)) or <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l1748"><span class="linenum">1748</span></a>          return false;
<a name="l1749"><span class="linenum">1749</span></a>      }
<a name="l1750"><span class="linenum">1750</span></a>      <a class="function" onClick="logFunction('send_stored_file')" href="../../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>, 0, 0, true, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l1751"><span class="linenum">1751</span></a>  }
<a name="l1752"><span class="linenum">1752</span></a>  
<a name="l1753"><span class="linenum">1753</span></a>  <span class="comment">/**</span>
<a name="l1754"><span class="linenum">1754</span></a>  <span class="comment"> * Called via pluginfile.php -&gt; question_pluginfile to serve files belonging to</span>
<a name="l1755"><span class="linenum">1755</span></a>  <span class="comment"> * a question in a question_attempt when that attempt is a quiz attempt.</span>
<a name="l1756"><span class="linenum">1756</span></a>  <span class="comment"> *</span>
<a name="l1757"><span class="linenum">1757</span></a>  <span class="comment"> * @package  mod_quiz</span>
<a name="l1758"><span class="linenum">1758</span></a>  <span class="comment"> * @category files</span>
<a name="l1759"><span class="linenum">1759</span></a>  <span class="comment"> * @param stdClass $course course settings object</span>
<a name="l1760"><span class="linenum">1760</span></a>  <span class="comment"> * @param stdClass $context context object</span>
<a name="l1761"><span class="linenum">1761</span></a>  <span class="comment"> * @param string $component the name of the component we are serving files for.</span>
<a name="l1762"><span class="linenum">1762</span></a>  <span class="comment"> * @param string $filearea the name of the file area.</span>
<a name="l1763"><span class="linenum">1763</span></a>  <span class="comment"> * @param int $qubaid the attempt usage id.</span>
<a name="l1764"><span class="linenum">1764</span></a>  <span class="comment"> * @param int $slot the id of a question in this quiz attempt.</span>
<a name="l1765"><span class="linenum">1765</span></a>  <span class="comment"> * @param array $args the remaining bits of the file path.</span>
<a name="l1766"><span class="linenum">1766</span></a>  <span class="comment"> * @param bool $forcedownload whether the user must be forced to download the file.</span>
<a name="l1767"><span class="linenum">1767</span></a>  <span class="comment"> * @param array $options additional options affecting the file serving</span>
<a name="l1768"><span class="linenum">1768</span></a>  <span class="comment"> * @return bool false if file not found, does not return if found - justsend the file</span>
<a name="l1769"><span class="linenum">1769</span></a>  <span class="comment"> */</span>
<a name="l1770"><span class="linenum">1770</span></a>  function <a class="function" onClick="logFunction('quiz_question_pluginfile')" href="../../_functions/quiz_question_pluginfile.html" onMouseOver="funcPopup(event,'quiz_question_pluginfile')">quiz_question_pluginfile</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>,
<a name="l1771"><span class="linenum">1771</span></a>          <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it2923" onMouseOver="hilite(2923)" onMouseOut="lolite()" onClick="logVariable('qubaid')" href="../../_variables/qubaid.html">$qubaid</a>, <a class="var it730" onMouseOver="hilite(730)" onMouseOut="lolite()" onClick="logVariable('slot')" href="../../_variables/slot.html">$slot</a>, <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>=array()) {
<a name="l1772"><span class="linenum">1772</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1773"><span class="linenum">1773</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/quiz/locallib.php.html">/mod/quiz/locallib.php</a>');
<a name="l1774"><span class="linenum">1774</span></a>  
<a name="l1775"><span class="linenum">1775</span></a>      <a class="var it999" onMouseOver="hilite(999)" onMouseOut="lolite()" onClick="logVariable('attemptobj')" href="../../_variables/attemptobj.html">$attemptobj</a> = <a class="class" onClick="logClass('quiz_attempt')" href="../../_classes/quiz_attempt.html" onMouseOver="classPopup(event,'quiz_attempt')">quiz_attempt</a>::<a class="function" onClick="logFunction('create_from_usage_id')" href="../../_functions/create_from_usage_id.html" onMouseOver="funcPopup(event,'create_from_usage_id')">create_from_usage_id</a>(<a class="var it2923" onMouseOver="hilite(2923)" onMouseOut="lolite()" onClick="logVariable('qubaid')" href="../../_variables/qubaid.html">$qubaid</a>);
<a name="l1776"><span class="linenum">1776</span></a>      <a class="function" onClick="logFunction('require_login')" href="../../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it999" onMouseOver="hilite(999)" onMouseOut="lolite()" onClick="logVariable('attemptobj')" href="../../_variables/attemptobj.html">$attemptobj</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(), false, <a class="var it999" onMouseOver="hilite(999)" onMouseOut="lolite()" onClick="logVariable('attemptobj')" href="../../_variables/attemptobj.html">$attemptobj</a>-&gt;<a class="function" onClick="logFunction('get_cm')" href="../../_functions/get_cm.html" onMouseOver="funcPopup(event,'get_cm')">get_cm</a>());
<a name="l1777"><span class="linenum">1777</span></a>  
<a name="l1778"><span class="linenum">1778</span></a>      if (<a class="var it999" onMouseOver="hilite(999)" onMouseOut="lolite()" onClick="logVariable('attemptobj')" href="../../_variables/attemptobj.html">$attemptobj</a>-&gt;<a class="function" onClick="logFunction('is_own_attempt')" href="../../_functions/is_own_attempt.html" onMouseOver="funcPopup(event,'is_own_attempt')">is_own_attempt</a>() &amp;&amp; !<a class="var it999" onMouseOver="hilite(999)" onMouseOut="lolite()" onClick="logVariable('attemptobj')" href="../../_variables/attemptobj.html">$attemptobj</a>-&gt;<a class="function" onClick="logFunction('is_finished')" href="../../_functions/is_finished.html" onMouseOver="funcPopup(event,'is_finished')">is_finished</a>()) {
<a name="l1779"><span class="linenum">1779</span></a>  <span class="comment">        // In the middle of an attempt.</span>
<a name="l1780"><span class="linenum">1780</span></a>          if (!<a class="var it999" onMouseOver="hilite(999)" onMouseOut="lolite()" onClick="logVariable('attemptobj')" href="../../_variables/attemptobj.html">$attemptobj</a>-&gt;<a class="function" onClick="logFunction('is_preview_user')" href="../../_functions/is_preview_user.html" onMouseOver="funcPopup(event,'is_preview_user')">is_preview_user</a>()) {
<a name="l1781"><span class="linenum">1781</span></a>              <a class="var it999" onMouseOver="hilite(999)" onMouseOut="lolite()" onClick="logVariable('attemptobj')" href="../../_variables/attemptobj.html">$attemptobj</a>-&gt;<a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/quiz:attempt');
<a name="l1782"><span class="linenum">1782</span></a>          }
<a name="l1783"><span class="linenum">1783</span></a>          <a class="var it38845" onMouseOver="hilite(38845)" onMouseOut="lolite()" onClick="logVariable('isreviewing')" href="../../_variables/isreviewing.html">$isreviewing</a> = false;
<a name="l1784"><span class="linenum">1784</span></a>  
<a name="l1785"><span class="linenum">1785</span></a>      } else {
<a name="l1786"><span class="linenum">1786</span></a>  <span class="comment">        // Reviewing an attempt.</span>
<a name="l1787"><span class="linenum">1787</span></a>          <a class="var it999" onMouseOver="hilite(999)" onMouseOut="lolite()" onClick="logVariable('attemptobj')" href="../../_variables/attemptobj.html">$attemptobj</a>-&gt;<a class="function" onClick="logFunction('check_review_capability')" href="../../_functions/check_review_capability.html" onMouseOver="funcPopup(event,'check_review_capability')">check_review_capability</a>();
<a name="l1788"><span class="linenum">1788</span></a>          <a class="var it38845" onMouseOver="hilite(38845)" onMouseOut="lolite()" onClick="logVariable('isreviewing')" href="../../_variables/isreviewing.html">$isreviewing</a> = true;
<a name="l1789"><span class="linenum">1789</span></a>      }
<a name="l1790"><span class="linenum">1790</span></a>  
<a name="l1791"><span class="linenum">1791</span></a>      if (!<a class="var it999" onMouseOver="hilite(999)" onMouseOut="lolite()" onClick="logVariable('attemptobj')" href="../../_variables/attemptobj.html">$attemptobj</a>-&gt;<a class="function" onClick="logFunction('check_file_access')" href="../../_functions/check_file_access.html" onMouseOver="funcPopup(event,'check_file_access')">check_file_access</a>(<a class="var it730" onMouseOver="hilite(730)" onMouseOut="lolite()" onClick="logVariable('slot')" href="../../_variables/slot.html">$slot</a>, <a class="var it38845" onMouseOver="hilite(38845)" onMouseOut="lolite()" onClick="logVariable('isreviewing')" href="../../_variables/isreviewing.html">$isreviewing</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1792"><span class="linenum">1792</span></a>              <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>)) {
<a name="l1793"><span class="linenum">1793</span></a>          <a class="function" onClick="logFunction('send_file_not_found')" href="../../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1794"><span class="linenum">1794</span></a>      }
<a name="l1795"><span class="linenum">1795</span></a>  
<a name="l1796"><span class="linenum">1796</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1797"><span class="linenum">1797</span></a>      <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l1798"><span class="linenum">1798</span></a>      <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a> = &quot;/<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>/<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>/<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>/<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>&quot;;
<a name="l1799"><span class="linenum">1799</span></a>      if (!<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file_by_hash')" href="../../_functions/get_file_by_hash.html" onMouseOver="funcPopup(event,'get_file_by_hash')">get_file_by_hash</a>(<a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a>)) or <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l1800"><span class="linenum">1800</span></a>          <a class="function" onClick="logFunction('send_file_not_found')" href="../../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1801"><span class="linenum">1801</span></a>      }
<a name="l1802"><span class="linenum">1802</span></a>  
<a name="l1803"><span class="linenum">1803</span></a>      <a class="function" onClick="logFunction('send_stored_file')" href="../../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>, 0, 0, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l1804"><span class="linenum">1804</span></a>  }
<a name="l1805"><span class="linenum">1805</span></a>  
<a name="l1806"><span class="linenum">1806</span></a>  <span class="comment">/**</span>
<a name="l1807"><span class="linenum">1807</span></a>  <span class="comment"> * Return a list of page types</span>
<a name="l1808"><span class="linenum">1808</span></a>  <span class="comment"> * @param string $pagetype current page type</span>
<a name="l1809"><span class="linenum">1809</span></a>  <span class="comment"> * @param stdClass $parentcontext Block's parent context</span>
<a name="l1810"><span class="linenum">1810</span></a>  <span class="comment"> * @param stdClass $currentcontext Current context of block</span>
<a name="l1811"><span class="linenum">1811</span></a>  <span class="comment"> */</span>
<a name="l1812"><span class="linenum">1812</span></a>  function <a class="function" onClick="logFunction('quiz_page_type_list')" href="../../_functions/quiz_page_type_list.html" onMouseOver="funcPopup(event,'quiz_page_type_list')">quiz_page_type_list</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../../_variables/parentcontext.html">$parentcontext</a>, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../../_variables/currentcontext.html">$currentcontext</a>) {
<a name="l1813"><span class="linenum">1813</span></a>      <a class="var it8026" onMouseOver="hilite(8026)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a> = array(
<a name="l1814"><span class="linenum">1814</span></a>          'mod-quiz-*'       =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-quiz-x', 'quiz'),
<a name="l1815"><span class="linenum">1815</span></a>          'mod-quiz-view'    =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-quiz-view', 'quiz'),
<a name="l1816"><span class="linenum">1816</span></a>          'mod-quiz-attempt' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-quiz-attempt', 'quiz'),
<a name="l1817"><span class="linenum">1817</span></a>          'mod-quiz-summary' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-quiz-summary', 'quiz'),
<a name="l1818"><span class="linenum">1818</span></a>          'mod-quiz-review'  =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-quiz-review', 'quiz'),
<a name="l1819"><span class="linenum">1819</span></a>          'mod-quiz-edit'    =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-quiz-edit', 'quiz'),
<a name="l1820"><span class="linenum">1820</span></a>          'mod-quiz-report'  =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-quiz-report', 'quiz'),
<a name="l1821"><span class="linenum">1821</span></a>      );
<a name="l1822"><span class="linenum">1822</span></a>      return <a class="var it8026" onMouseOver="hilite(8026)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a>;
<a name="l1823"><span class="linenum">1823</span></a>  }
<a name="l1824"><span class="linenum">1824</span></a>  
<a name="l1825"><span class="linenum">1825</span></a>  <span class="comment">/**</span>
<a name="l1826"><span class="linenum">1826</span></a>  <span class="comment"> * @return the options for quiz navigation.</span>
<a name="l1827"><span class="linenum">1827</span></a>  <span class="comment"> */</span>
<a name="l1828"><span class="linenum">1828</span></a>  function <a class="function" onClick="logFunction('quiz_get_navigation_options')" href="../../_functions/quiz_get_navigation_options.html" onMouseOver="funcPopup(event,'quiz_get_navigation_options')">quiz_get_navigation_options</a>() {
<a name="l1829"><span class="linenum">1829</span></a>      return array(
<a name="l1830"><span class="linenum">1830</span></a>          <a class="constant" onClick="logConstant('QUIZ_NAVMETHOD_FREE')" href="../../_constants/QUIZ_NAVMETHOD_FREE.html" onMouseOver="constPopup(event,'QUIZ_NAVMETHOD_FREE')">QUIZ_NAVMETHOD_FREE</a> =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('navmethod_free', 'quiz'),
<a name="l1831"><span class="linenum">1831</span></a>          <a class="constant" onClick="logConstant('QUIZ_NAVMETHOD_SEQ')" href="../../_constants/QUIZ_NAVMETHOD_SEQ.html" onMouseOver="constPopup(event,'QUIZ_NAVMETHOD_SEQ')">QUIZ_NAVMETHOD_SEQ</a>  =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('navmethod_seq', 'quiz')
<a name="l1832"><span class="linenum">1832</span></a>      );
<a name="l1833"><span class="linenum">1833</span></a>  }
<a name="l1834"><span class="linenum">1834</span></a>  
<a name="l1835"><span class="linenum">1835</span></a>  <span class="comment">/**</span>
<a name="l1836"><span class="linenum">1836</span></a>  <span class="comment"> * Obtains the automatic completion state for this quiz on any conditions</span>
<a name="l1837"><span class="linenum">1837</span></a>  <span class="comment"> * in quiz settings, such as if all attempts are used or a certain grade is achieved.</span>
<a name="l1838"><span class="linenum">1838</span></a>  <span class="comment"> *</span>
<a name="l1839"><span class="linenum">1839</span></a>  <span class="comment"> * @param object $course Course</span>
<a name="l1840"><span class="linenum">1840</span></a>  <span class="comment"> * @param object $cm Course-module</span>
<a name="l1841"><span class="linenum">1841</span></a>  <span class="comment"> * @param int $userid User ID</span>
<a name="l1842"><span class="linenum">1842</span></a>  <span class="comment"> * @param bool $type Type of comparison (or/and; can be used as return value if no conditions)</span>
<a name="l1843"><span class="linenum">1843</span></a>  <span class="comment"> * @return bool True if completed, false if not. (If no conditions, then return</span>
<a name="l1844"><span class="linenum">1844</span></a>  <span class="comment"> *   value depends on comparison type)</span>
<a name="l1845"><span class="linenum">1845</span></a>  <span class="comment"> */</span>
<a name="l1846"><span class="linenum">1846</span></a>  function <a class="function" onClick="logFunction('quiz_get_completion_state')" href="../../_functions/quiz_get_completion_state.html" onMouseOver="funcPopup(event,'quiz_get_completion_state')">quiz_get_completion_state</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l1847"><span class="linenum">1847</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1848"><span class="linenum">1848</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1849"><span class="linenum">1849</span></a>  
<a name="l1850"><span class="linenum">1850</span></a>      <a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('quiz', array('id' =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1851"><span class="linenum">1851</span></a>      if (!<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('completionattemptsexhausted')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/completionattemptsexhausted.html">completionattemptsexhausted</a> &amp;&amp; !<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('completionpass')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/completionpass.html">completionpass</a>) {
<a name="l1852"><span class="linenum">1852</span></a>          return <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>;
<a name="l1853"><span class="linenum">1853</span></a>      }
<a name="l1854"><span class="linenum">1854</span></a>  
<a name="l1855"><span class="linenum">1855</span></a>  <span class="comment">    // Check if the user has used up all attempts.</span>
<a name="l1856"><span class="linenum">1856</span></a>      if (<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('completionattemptsexhausted')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/completionattemptsexhausted.html">completionattemptsexhausted</a>) {
<a name="l1857"><span class="linenum">1857</span></a>          <a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> = <a class="function" onClick="logFunction('quiz_get_user_attempts')" href="../../_functions/quiz_get_user_attempts.html" onMouseOver="funcPopup(event,'quiz_get_user_attempts')">quiz_get_user_attempts</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 'finished', true);
<a name="l1858"><span class="linenum">1858</span></a>          if (<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>) {
<a name="l1859"><span class="linenum">1859</span></a>              <a class="var it16062" onMouseOver="hilite(16062)" onMouseOut="lolite()" onClick="logVariable('lastfinishedattempt')" href="../../_variables/lastfinishedattempt.html">$lastfinishedattempt</a> = <a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>);
<a name="l1860"><span class="linenum">1860</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1861"><span class="linenum">1861</span></a>              <a class="var it4277" onMouseOver="hilite(4277)" onMouseOut="lolite()" onClick="logVariable('quizobj')" href="../../_variables/quizobj.html">$quizobj</a> = <a class="class" onClick="logClass('quiz')" href="../../_classes/quiz.html" onMouseOver="classPopup(event,'quiz')">quiz</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l1862"><span class="linenum">1862</span></a>              <a class="var it1261" onMouseOver="hilite(1261)" onMouseOut="lolite()" onClick="logVariable('accessmanager')" href="../../_variables/accessmanager.html">$accessmanager</a> = <span class="keyword">new </span><a class="class" onClick="logClass('quiz_access_manager')" href="../../_classes/quiz_access_manager.html" onMouseOver="classPopup(event,'quiz_access_manager')">quiz_access_manager</a>(<a class="var it4277" onMouseOver="hilite(4277)" onMouseOut="lolite()" onClick="logVariable('quizobj')" href="../../_variables/quizobj.html">$quizobj</a>, <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(),
<a name="l1863"><span class="linenum">1863</span></a>                      <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/quiz:ignoretimelimits', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false));
<a name="l1864"><span class="linenum">1864</span></a>              if (<a class="var it1261" onMouseOver="hilite(1261)" onMouseOut="lolite()" onClick="logVariable('accessmanager')" href="../../_variables/accessmanager.html">$accessmanager</a>-&gt;<a class="function" onClick="logFunction('is_finished')" href="../../_functions/is_finished.html" onMouseOver="funcPopup(event,'is_finished')">is_finished</a>(<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it659" onMouseOver="hilite(659)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>), <a class="var it16062" onMouseOver="hilite(16062)" onMouseOut="lolite()" onClick="logVariable('lastfinishedattempt')" href="../../_variables/lastfinishedattempt.html">$lastfinishedattempt</a>)) {
<a name="l1865"><span class="linenum">1865</span></a>                  return true;
<a name="l1866"><span class="linenum">1866</span></a>              }
<a name="l1867"><span class="linenum">1867</span></a>          }
<a name="l1868"><span class="linenum">1868</span></a>      }
<a name="l1869"><span class="linenum">1869</span></a>  
<a name="l1870"><span class="linenum">1870</span></a>  <span class="comment">    // Check for passing grade.</span>
<a name="l1871"><span class="linenum">1871</span></a>      if (<a class="var it998" onMouseOver="hilite(998)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('completionpass')" class="var it39928" onMouseOver="hilite(39928)" onMouseOut="lolite()" href="../../_variables/completionpass.html">completionpass</a>) {
<a name="l1872"><span class="linenum">1872</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l1873"><span class="linenum">1873</span></a>          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = <a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch')" href="../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(array('courseid' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'itemtype' =&gt; 'mod',
<a name="l1874"><span class="linenum">1874</span></a>                  'itemmodule' =&gt; 'quiz', 'iteminstance' =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>, 'outcomeid' =&gt; null));
<a name="l1875"><span class="linenum">1875</span></a>          if (<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l1876"><span class="linenum">1876</span></a>              <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="class" onClick="logClass('grade_grade')" href="../../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>::<a class="function" onClick="logFunction('fetch_users_grades')" href="../../_functions/fetch_users_grades.html" onMouseOver="funcPopup(event,'fetch_users_grades')">fetch_users_grades</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>, array(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), false);
<a name="l1877"><span class="linenum">1877</span></a>              if (!empty(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>])) {
<a name="l1878"><span class="linenum">1878</span></a>                  return <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>[<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;<a class="function" onClick="logFunction('is_passed')" href="../../_functions/is_passed.html" onMouseOver="funcPopup(event,'is_passed')">is_passed</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>);
<a name="l1879"><span class="linenum">1879</span></a>              }
<a name="l1880"><span class="linenum">1880</span></a>          }
<a name="l1881"><span class="linenum">1881</span></a>      }
<a name="l1882"><span class="linenum">1882</span></a>      return false;
<a name="l1883"><span class="linenum">1883</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'quiz_update_events': ['quiz_update_events', 'This function updates the events associated to the quiz. If $override is non-zero, then it updates only the events associated with the specified override. ', [['mod/quiz','lib.php',1151]], 3],
'groups_get_user_groups': ['groups_get_user_groups', 'Returns info about user\'s groups in course. ', [['lib','grouplib.php',290]], 20],
'load': ['load', 'Load the config.php file for a particular theme, and return an instance of this class. (That is, this is a factory method.) ', [['lib','outputlib.php',399],['lib/adodb','adodb-active-recordx.inc.php',747],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',94],['lib/htmlpurifier/HTMLPurifier','Language.php',69],['cache/classes','definition.php',323],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',44],['lib/mustache/src/Mustache','Loader.php',17],['lib/phpexcel/PHPExcel','IOFactory.php',181],['lib/simplepie/library/SimplePie/Cache','MySQL.php',286],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',293],['lib/mustache/src/Mustache/Cache','NoopCache.php',20],['lib/phpexcel/PHPExcel/Reader','SYLK.php',197],['lib/phpexcel/PHPExcel/Reader','Excel5.php',602],['lib/simplepie/library/SimplePie/Cache','Base.php',87],['lib/pear/HTML/QuickForm','select.php',421],['lib/simplepie/library/SimplePie/Cache','File.php',118],['calendar','lib.php',2631],['backup/cc/cc_lib','xmlbase.php',92],['mod/lesson','locallib.php',1024],['mod/lesson','locallib.php',2243],['mod/lesson','locallib.php',3191],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',337],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',39],['lib/zend/Zend/Loader','PluginLoader.php',350],['lib/mustache/src/Mustache/Loader','StringLoader.php',28],['cache/classes','config.php',128],['lib/phpexcel/PHPExcel/Reader','IReader.php',46],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',69],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',224],['lib/phpexcel/PHPExcel/Reader','CSV.php',218],['lib/phpexcel/PHPExcel','Autoloader.php',62],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',205],['lib/zend/Zend/Loader/PluginLoader','Interface.php',68],['lib/mustache/src/Mustache','Cache.php',20],['lib/simplepie/library/SimplePie/Cache','Memcache.php',123],['lib/phpunit/classes','autoloader.php',46],['grade/grading','lib.php',227],['lib/zend/Zend/Loader/Autoloader','Resource.php',428],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',41],['lib/phpexcel/PHPExcel/Reader','HTML.php',128],['lib/mustache/src/Mustache/Loader','InlineLoader.php',87],['lib/adodb','adodb-active-record.inc.php',682],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',48]], 182],
'quiz_question_pluginfile': ['quiz_question_pluginfile', 'Called via pluginfile.php -> question_pluginfile to serve files belonging to a question in a question_attempt when that attempt is a quiz attempt. ', [['mod/quiz','lib.php',1753]], 0],
'quiz_get_navigation_options': ['quiz_get_navigation_options', '', [['mod/quiz','lib.php',1828]], 2],
'get_config': ['get_config', 'Get a configuration value for this plugin ', [['mod/assign','assignmentplugin.php',345],['lib/portfolio','plugin.php',546],['question/engine','bank.php',109],['lib','moodlelib.php',1404],['lib','enrollib.php',1141],['lib/editor/tinymce/classes','plugin.php',73],['admin/tool/log/classes/helper','store.php',63]], 847],
'quiz_format_grade': ['quiz_format_grade', 'Round a grade to to the correct number of decimal places, and format it for display. ', [['mod/quiz','lib.php',627]], 35],
'quiz_delete_all_overrides': ['quiz_delete_all_overrides', 'Deletes all quiz overrides from the database and clears any corresponding calendar events ', [['mod/quiz','lib.php',256]], 1],
'question_get_all_capabilities': ['question_get_all_capabilities', '', [['lib','questionlib.php',1473]], 1],
'quiz_get_grade_format': ['quiz_get_grade_format', 'Determine the correct number of decimal places required to format a grade. ', [['mod/quiz','lib.php',641]], 6],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1318]], 854],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/zend/Zend/Soap','Wsdl.php',641],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',582]], 3296],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',438],['lib/classes/event','base.php',682]], 778],
'quiz_print_overview': ['quiz_print_overview', 'Prints quiz summaries on MyMoodle Page ', [['mod/quiz','lib.php',1452]], 0],
'grade_get_grades': ['grade_get_grades', 'Returns grading information for given activity, optionally with user grades Manual, course or category items can not be queried. ', [['lib','gradelib.php',328]], 53],
'quiz_grade_item_delete': ['quiz_grade_item_delete', 'Delete grade item for given quiz ', [['mod/quiz','lib.php',803]], 1],
'box_start': ['box_start', 'Outputs the opening section of a box. ', [['lib','outputrenderers.php',2987]], 351],
'send_stored_file': ['send_stored_file', 'Handles the sending of file data to the user\'s browser, including support for byteranges etc. ', [['lib','filelib.php',2170]], 73],
'cron_execute_plugin_type': ['cron_execute_plugin_type', 'Executes cron functions for a specific type of plugin. ', [['lib','cronlib.php',148]], 22],
'quiz_report_default_report': ['quiz_report_default_report', 'Get the default report for the current user. ', [['mod/quiz/report','reportlib.php',380]], 2],
'box_end': ['box_end', 'Outputs the closing section of a box. ', [['lib','outputrenderers.php',3002]], 351],
'strlen': ['strlen', 'Multibyte safe strlen() function, uses mbstring or iconv for UTF-8, falls back to typo3. ', [['lib/classes','text.php',281],['lib/typo3','class.t3lib_cs.php',1520]], 1698],
'is_preview_user': ['is_preview_user', '', [['mod/quiz','attemptlib.php',228],['mod/quiz','attemptlib.php',714]], 21],
'count_records': ['count_records', 'Count the records in a table where all the given conditions met. ', [['lib/dml','moodle_database.php',1717]], 1399],
'quiz_delete_override': ['quiz_delete_override', 'Deletes a quiz override from the database and clears any corresponding calendar events ', [['mod/quiz','lib.php',204]], 5],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3234],['mod/assign','locallib.php',3440]], 532],
'get_fieldset_sql': ['get_fieldset_sql', 'Selects records and return values (first field) as an array using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',800],['lib/dml','oci_native_moodle_database.php',1151],['lib/dml','sqlsrv_native_moodle_database.php',858],['lib/dml','mssql_native_moodle_database.php',775],['lib/dml','mysqli_native_moodle_database.php',1098],['lib/dml/tests','dml_test.php',5425],['lib/dml','pdo_moodle_database.php',287]], 51],
'questions_in_use': ['questions_in_use', '', [['lib','questionlib.php',121],['question/engine','lib.php',155],['question/engine','datalib.php',1227]], 7],
'container_start': ['container_start', 'Outputs the opening section of a container. ', [['lib','outputrenderers.php',3023]], 113],
'print_string': ['print_string', 'Prints out a translated string. ', [['lib','moodlelib.php',6680]], 458],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2444]], 635],
'check_review_capability': ['check_review_capability', 'Check the appropriate capability to see whether this user may review their own attempt. If not, prints an error. ', [['mod/quiz','attemptlib.php',898]], 3],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'container_end': ['container_end', 'Outputs the closing section of a container. ', [['lib','outputrenderers.php',3036]], 113],
'quiz_pluginfile': ['quiz_pluginfile', 'Serves the quiz files. ', [['mod/quiz','lib.php',1706]], 0],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'quiz_reset_userdata': ['quiz_reset_userdata', 'Actual implementation of the reset course functionality, delete all the quiz attempts for course $data->courseid, if $data->reset_quiz_attempts is set and true. ', [['mod/quiz','lib.php',1367]], 0],
'unalias': ['unalias', 'Extract the aliased user fields from a given record ', [['lib','outputcomponents.php',282]], 11],
'get_cm': ['get_cm', 'Obtains a single course-module object (for a course-module that is on this course). ', [['lib','modinfolib.php',222],['mod/quiz','attemptlib.php',215],['mod/quiz','attemptlib.php',701],['comment','lib.php',1006]], 96],
'file_save_draft_area_files': ['file_save_draft_area_files', 'Saves files from a draft file area to a real one (merging the list of files). Can rewrite URLs in some content at the same time if desired. ', [['lib','filelib.php',772]], 53],
'quiz_add_instance': ['quiz_add_instance', 'Given an object containing all the necessary data, (defined by the form in mod_form.php) this function will create a new instance and return the id number of the new instance. ', [['mod/quiz','lib.php',67]], 0],
'mtrace': ['mtrace', 'For outputting debugging info ', [['lib','moodlelib.php',8221]], 323],
'delete': ['delete', 'Deletes a key pair ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',110],['lib/google/src/Google/Service','Reseller.php',440],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',1006],['lib/adodb','adodb-active-recordx.inc.php',949],['lib/zend/Zend/Service/Delicious','Post.php',236],['lib/grade','grade_object.php',270],['lib/zend/Zend/Gdata','Gapps.php',258],['lib/google/src/Google/Service','Fusiontables.php',644],['lib/google/src/Google/Service','Fusiontables.php',809],['lib/google/src/Google/Service','Fusiontables.php',934],['lib/google/src/Google/Service','Fusiontables.php',1127],['lib/google/src/Google/Service','Fusiontables.php',1188],['blog','locallib.php',325],['lib/google/src/Google/Service','Blogger.php',1051],['lib/google/src/Google/Service','Blogger.php',1212],['lib/google/src/Google/Service','Blogger.php',1434],['lib/portfolio','plugin.php',692],['lib/google/src/Google/Service','AdExchangeBuyer.php',605],['lib/google/src/Google/Service','Manager.php',240],['lib/google/src/Google/Service','Manager.php',320],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',137],['lib','webdavlib.php',691],['lib/grade','grade_item.php',354],['lib/google/src/Google/Service','Gmail.php',686],['lib/google/src/Google/Service','Gmail.php',843],['lib/google/src/Google/Service','Gmail.php',936],['lib/google/src/Google/Service','Gmail.php',1146],['course','lib.php',3133],['lib/google/src/Google/Service','Mirror.php',424],['lib/google/src/Google/Service','Mirror.php',592],['lib/google/src/Google/Service','Mirror.php',660],['lib/google/src/Google/Service','Mirror.php',771],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',731],['lib/google/src/Google/Service','Genomics.php',963],['lib/google/src/Google/Service','Genomics.php',1327],['lib/google/src/Google/Service','Genomics.php',1399],['cache/classes','interfaces.php',161],['lib/google/src/Google/Service','Dfareporting.php',470],['lib/zend/Zend/Gdata/Gbase','ItemEntry.php',133],['lib/google/src/Google/Service','Licensing.php',221],['lib/google/src/Google/Service','Drive.php',1462],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1681],['lib/google/src/Google/Service','Drive.php',1932],['lib/google/src/Google/Service','Drive.php',2002],['lib/google/src/Google/Service','Drive.php',2131],['lib/google/src/Google/Service','Drive.php',2294],['lib/google/src/Google/Service','Drive.php',2414],['completion','data_object.php',272],['lib/google/src/Google/Service','Books.php',1804],['lib/zend/Zend/Gdata','App.php',914],['lib/google/src/Google/Cache','Memcache.php',142],['lib/google/src/Google/Service','Bigquery.php',512],['lib/google/src/Google/Service','Bigquery.php',822],['cache','disabledlib.php',102],['lib/zend/Zend/Server','Cache.php',132],['lib/zend/Zend/Gdata/App','Entry.php',212],['cache/stores/memcached','lib.php',368],['lib/google/src/Google/Service','YouTube.php',1470],['lib/google/src/Google/Service','YouTube.php',1979],['lib/google/src/Google/Service','YouTube.php',2277],['lib/google/src/Google/Service','YouTube.php',2510],['lib/google/src/Google/Service','YouTube.php',2657],['lib/google/src/Google/Service','YouTube.php',2998],['lib/google/src/Google/Service','YouTube.php',3196],['lib/google/src/Google/Service','Webmasters.php',298],['lib/google/src/Google/Service','Webmasters.php',388],['lib/google/src/Google/Service','Autoscaler.php',314],['lib/google/src/Google/Service','Autoscaler.php',428],['calendar','lib.php',2388],['lib/zend/Zend/Service/Amazon','Sqs.php',129],['lib/google/src/Google/Service','ShoppingContent.php',553],['lib/google/src/Google/Service','ShoppingContent.php',735],['lib/google/src/Google/Service','ShoppingContent.php',969],['mod/lesson','locallib.php',1039],['mod/lesson','locallib.php',2274],['lib/google/src/Google/Service','SQLAdmin.php',628],['lib/google/src/Google/Service','SQLAdmin.php',923],['lib/google/src/Google/Service','Fitness.php',458],['lib/google/src/Google/Service','Fitness.php',563],['lib/google/src/Google/Service','TagManager.php',1049],['lib/google/src/Google/Service','TagManager.php',1140],['lib/google/src/Google/Service','TagManager.php',1233],['lib/google/src/Google/Service','TagManager.php',1326],['lib/google/src/Google/Service','TagManager.php',1419],['lib/google/src/Google/Service','TagManager.php',1513],['lib/google/src/Google/Service','TagManager.php',1607],['lib/google/src/Google/Service','TagManager.php',1757],['lib/google/src/Google/Service','Directory.php',1300],['lib/google/src/Google/Service','Directory.php',1477],['lib/google/src/Google/Service','Directory.php',1587],['lib/google/src/Google/Service','Directory.php',1642],['lib/google/src/Google/Service','Directory.php',1769],['lib/google/src/Google/Service','Directory.php',1838],['lib/google/src/Google/Service','Directory.php',1935],['lib/google/src/Google/Service','Directory.php',2042],['lib/google/src/Google/Service','Directory.php',2144],['lib/google/src/Google/Service','Directory.php',2205],['lib/google/src/Google/Service','Directory.php',2405],['lib/google/src/Google/Service','Directory.php',2480],['cache/stores/static','lib.php',374],['lib/google/src/Google/Service','AppState.php',153],['lib/google/src/Google/Service','Taskqueue.php',292],['lib/google/src/Google/Service','Container.php',343],['lib/google/src/Google/Service','AndroidPublisher.php',1177],['lib/google/src/Google/Service','AndroidPublisher.php',1257],['lib/google/src/Google/Service','AndroidPublisher.php',1595],['lib/google/src/Google/Service','AndroidPublisher.php',1690],['lib/google/src/Google/Service','AndroidPublisher.php',1972],['repository','lib.php',427],['repository','lib.php',2012],['lib','accesslib.php',5529],['lib/google/src/Google/Service','AdSenseHost.php',733],['lib/google/src/Google/Service','AdSenseHost.php',1009],['lib/google/src/Google/Service','AdSenseHost.php',1167],['cache/stores/memcache','lib.php',401],['lib','filelib.php',3440],['lib/google/src/Google/Service','MapsEngine.php',1692],['lib/google/src/Google/Service','MapsEngine.php',1990],['lib/google/src/Google/Service','MapsEngine.php',2343],['lib/google/src/Google/Service','MapsEngine.php',2650],['lib/google/src/Google/Service','MapsEngine.php',2911],['lib/grade','grade_grade.php',955],['comment','lib.php',786],['lib/google/src/Google/Service','SiteVerification.php',138],['lib/google/src/Google/Service','Prediction.php',261],['cache/stores/session','lib.php',417],['cache/classes','dummystore.php',198],['lib/google/src/Google/Service','Compute.php',2812],['lib/google/src/Google/Service','Compute.php',2896],['lib/google/src/Google/Service','Compute.php',3139],['lib/google/src/Google/Service','Compute.php',3225],['lib/google/src/Google/Service','Compute.php',3361],['lib/google/src/Google/Service','Compute.php',3463],['lib/google/src/Google/Service','Compute.php',3543],['lib/google/src/Google/Service','Compute.php',3662],['lib/google/src/Google/Service','Compute.php',3725],['lib/google/src/Google/Service','Compute.php',3844],['lib/google/src/Google/Service','Compute.php',3941],['lib/google/src/Google/Service','Compute.php',4080],['lib/google/src/Google/Service','Compute.php',4406],['lib/google/src/Google/Service','Compute.php',4543],['lib/google/src/Google/Service','Compute.php',4660],['lib/google/src/Google/Service','Compute.php',4740],['lib/google/src/Google/Service','Compute.php',4806],['lib/google/src/Google/Service','Compute.php',4927],['lib/google/src/Google/Service','Compute.php',5069],['lib/google/src/Google/Service','Compute.php',5229],['lib/google/src/Google/Service','Compute.php',5360],['badges/criteria','award_criteria.php',330],['badges/criteria','award_criteria_manual.php',220],['lib/google/src/Google/Service','Calendar.php',886],['lib/google/src/Google/Service','Calendar.php',1040],['lib/google/src/Google/Service','Calendar.php',1228],['lib/google/src/Google/Service','Calendar.php',1362],['lib/google/src/Google/Service','Analytics.php',2068],['lib/google/src/Google/Service','Analytics.php',2211],['lib/google/src/Google/Service','Analytics.php',2293],['lib/google/src/Google/Service','Analytics.php',2414],['lib/google/src/Google/Service','Analytics.php',2631],['lib/google/src/Google/Service','Analytics.php',2760],['lib/google/src/Google/Service','Analytics.php',2851],['lib/google/src/Google/Service','Analytics.php',3181],['lib/google/src/Google/Service','Analytics.php',3406],['lib/google/src/Google/Service','Tasks.php',309],['lib/google/src/Google/Service','Tasks.php',427],['cache/classes','loaders.php',777],['cache/classes','loaders.php',1491],['cache/classes','loaders.php',1859],['cache/stores/mongodb','lib.php',361],['lib/grade','grade_category.php',259],['cache/stores/file','lib.php',392],['lib/google/src/Google/Service','Storage.php',945],['lib/google/src/Google/Service','Storage.php',1060],['lib/google/src/Google/Service','Storage.php',1227],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1565],['admin/tool/uploadcourse/classes','course.php',226],['lib/google/src/Google/Cache','Null.php',51],['lib/filestorage','stored_file.php',323],['lib/filebrowser','virtual_root_file.php',69],['lib/google/src/Google/Service','AdSense.php',1257],['lib/google/src/Google/Service','AdSense.php',1729],['lib/google/src/Google/Service','Pubsub.php',239],['lib/google/src/Google/Service','Pubsub.php',378],['lib/grade','grade_scale.php',136],['lib/filebrowser','file_info.php',418],['lib/google/src/Google/Cache','File.php',106],['lib/htmlpurifier/HTMLPurifier','Zipper.php',89],['lib/google/src/Google/Service','Dns.php',370],['lib/filebrowser','file_info_stored.php',631],['lib/google/src/Google/Service','Replicapool.php',374],['lib/google/src/Google/Service','Resourceviews.php',419],['lib','badgeslib.php',620],['lib/google/src/Google/Cache','Apc.php',103],['lib/adodb','adodb-active-record.inc.php',792],['mnet','peer.php',122],['lib/grade','grade_outcome.php',97]], 260],
'question_extend_settings_navigation': ['question_extend_settings_navigation', 'Adds question bank setting links to the given navigation node if caps are met. ', [['lib','questionlib.php',1407]], 3],
'get_records_select': ['get_records_select', 'Get a number of records as an array of objects which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1283]], 163],
'quiz_update_all_final_grades': ['quiz_update_all_final_grades', 'Update the final grade at this quiz for all students. ', [['mod/quiz','locallib.php',803]], 5],
'userdate': ['userdate', 'Also in ADORecordSet. ', [['lib/adodb','adodb.inc.php',2607],['lib/adodb','adodb.inc.php',3271],['lib','moodlelib.php',2150]], 496],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'has_any_capability': ['has_any_capability', 'Check if the user has any one of several capabilities from a list. ', [['lib','accesslib.php',498]], 56],
'trim_if_empty': ['trim_if_empty', 'Removes this node if it is empty ', [['lib','navigationlib.php',636]], 7],
'quiz_delete_previews': ['quiz_delete_previews', 'Delete all the preview attempts at a quiz, or possibly all the attempts belonging to one user. ', [['mod/quiz','locallib.php',449]], 11],
'fetch': ['fetch', 'Fetches the available update status from the remote site ', [['lib/classes/update','checker.php',113],['lib/minify/lib/Minify/Cache','XCache.php',86],['lib/grade','grade_object.php',126],['completion/criteria','completion_criteria_unenrol.php',43],['completion/criteria','completion_criteria_grade.php',45],['lib/grade','grade_item.php',332],['lib/minify/lib/Minify/Cache','Memcache.php',97],['lib/minify/lib/Minify/Cache','APC.php',91],['completion/criteria','completion_criteria_activity.php',45],['lib/horde/framework/Horde/Imap/Client','Base.php',2373],['completion','data_object.php',152],['completion/criteria','completion_criteria_course.php',46],['completion','completion_completion.php',70],['completion/criteria','completion_criteria_role.php',43],['completion','completion_criteria_completion.php',74],['lib/grade','grade_grade.php',576],['lib/minify/lib/Minify/Cache','ZendPlatform.php',97],['completion/criteria','completion_criteria_date.php',43],['lib/grade','grade_category.php',184],['completion/criteria','completion_criteria_self.php',43],['lib/grade','grade_scale.php',89],['lib/minify/lib/Minify/Cache','File.php',90],['completion','completion_aggregation.php',68],['completion/criteria','completion_criteria_duration.php',43],['lib/grade','grade_outcome.php',182]], 192],
'quiz_page_type_list': ['quiz_page_type_list', 'Return a list of page types ', [['mod/quiz','lib.php',1806]], 0],
'quiz_user_complete': ['quiz_user_complete', 'Print a detailed representation of what a  user has done with a given particular instance of this module, for user activity reports. ', [['mod/quiz','lib.php',476]], 0],
'quiz_after_add_or_update': ['quiz_after_add_or_update', 'This function is called at the end of quiz_add_instance and quiz_update_instance, to do the common processing. ', [['mod/quiz','lib.php',1108]], 2],
'set_field': ['set_field', 'Sets the custom profile field used for testing. ', [['availability/condition/profile/tests','condition_test.php',349],['lib/dml','moodle_database.php',1688]], 462],
'quiz_attempt_summary_link_to_reports': ['quiz_attempt_summary_link_to_reports', 'Returns the same as {@link quiz_num_attempt_summary()} but wrapped in a link to the quiz reports. ', [['mod/quiz','renderer.php',1168],['mod/quiz','lib.php',1565]], 5],
'fetch_users_grades': ['fetch_users_grades', 'Returns array of grades for given grade_item+users ', [['lib/grade','grade_grade.php',175]], 7],
'is_passed': ['is_passed', 'Returns true if the grade\'s value is superior or equal to the grade item\'s gradepass value, false otherwise. ', [['lib/grade','grade_grade.php',895]], 4],
'is_finished': ['is_finished', '', [['mod/quiz/accessrule/delaybetweenattempts','rule.php',95],['mod/quiz/accessrule/numattempts','rule.php',60],['question/engine','states.php',129],['question/engine','states.php',293],['question/engine','states.php',301],['question/engine','states.php',312],['question/engine','states.php',323],['question/engine','states.php',334],['mod/quiz','accessmanager.php',398],['mod/quiz','attemptlib.php',781],['mod/quiz/accessrule','accessrulebase.php',167],['mod/quiz/accessrule/openclosedate','rule.php',95]], 84],
'create_from_usage_id': ['create_from_usage_id', 'Static function to create a new quiz_attempt object given a usage id. ', [['mod/quiz','attemptlib.php',565]], 1],
'user_picture': ['user_picture', '', [['mod/quiz','attemptlib.php',2188],['lib','outputrenderers.php',2367],['lib','outputrenderers.php',4702]], 114],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'require_capability': ['require_capability', 'Adds a required capability which all results will be checked against ', [['backup/util/ui','restore_ui_components.php',157],['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',891],['lib','accesslib.php',764]], 628],
'quiz_refresh_events': ['quiz_refresh_events', 'This standard function will check all instances of this module and make sure there are up-to-date events created for each of them. If courseid = 0, then every quiz event in the site is checked, else only quiz events belonging to the course specified are checked. This function is used, in its new format, by restore_refresh_events() ', [['mod/quiz','lib.php',818]], 0],
'groups_get_group_name': ['groups_get_group_name', 'Gets the name of a group with a specified id ', [['lib','grouplib.php',55]], 14],
'get_behaviour_type': ['get_behaviour_type', 'Create a behaviour for a particular type. If that type cannot be found, return an instance of qbehaviour_missing. ', [['question/engine','lib.php',263]], 15],
'quiz_user_outline': ['quiz_user_outline', 'Return a small object with summary information about what a user has done with a given particular instance of this module Used for user activity reports. $return->time = the time they did it $return->info = a short text description ', [['mod/quiz','lib.php',436]], 0],
'quiz_review_option_form_to_db': ['quiz_review_option_form_to_db', 'Helper function for {@link quiz_process_options()}. ', [['mod/quiz','lib.php',1083]], 7],
'quiz_update_open_attempts': ['quiz_update_open_attempts', 'Efficiently update check state time on all open attempts ', [['mod/quiz','locallib.php',951]], 14],
'is_own_attempt': ['is_own_attempt', 'Is this a student dealing with their own attempt/teacher previewing, or someone with \'mod/quiz:viewreports\' reviewing someone elses attempt. ', [['mod/quiz','attemptlib.php',790]], 4],
'container': ['container', 'Outputs a container. ', [['lib','outputrenderers.php',3011]], 186],
'quiz_reset_gradebook': ['quiz_reset_gradebook', 'Removes all grades from gradebook ', [['mod/quiz','lib.php',1346]], 1],
'quiz_get_view_actions': ['quiz_get_view_actions', 'List the actions that correspond to a view of this module. This is used by the participation report. ', [['mod/quiz','lib.php',1277]], 0],
'allows_multiple_submitted_responses': ['allows_multiple_submitted_responses', 'Does this question behaviour accept multiple submissions of responses within one attempt eg. multiple tries for the interactive or adaptive question behaviours. ', [['question/behaviour','behaviourtypebase.php',105],['question/behaviour/adaptive','behaviourtype.php',40],['question/behaviour/interactive','behaviourtype.php',40]], 1],
'quiz_reset_course_form_defaults': ['quiz_reset_course_form_defaults', 'Course reset form defaults. ', [['mod/quiz','lib.php',1336]], 0],
'save_settings': ['save_settings', 'The assignment subtype is responsible for saving it\'s own settings as the database table for the standard type cannot be modified. ', [['mod/assign','assignmentplugin.php',110],['mod/assign/submission/file','locallib.php',110],['mod/assign/submission/onlinetext','locallib.php',103],['mod/quiz','accessmanager.php',144],['mod/quiz/accessrule','accessrulebase.php',281],['mod/assign/feedback/comments','locallib.php',196]], 3],
'add_node': ['add_node', 'Add a node to the tree. ', [['user/classes/output/myprofile','tree.php',52],['user/classes/output/myprofile','category.php',83],['lib','navigationlib.php',321]], 95],
'quiz_attempt_state_name': ['quiz_attempt_state_name', 'Get the human-readable name for a quiz attempt state. ', [['mod/quiz','locallib.php',1203]], 2],
'shift_course_mod_dates': ['shift_course_mod_dates', 'Change dates in module - used from course reset. ', [['lib','moodlelib.php',4968]], 9],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 631],
'count_records_sql': ['count_records_sql', 'Get the result of a SQL SELECT COUNT(...) query. ', [['lib/dml','moodle_database.php',1747]], 132],
'quiz_supports': ['quiz_supports', '', [['mod/quiz','lib.php',1597]], 0],
'grade_update': ['grade_update', 'Submit new or update grade; update/create grade_item definition. Grade must have userid specified, rawgrade and feedback with format are optional. rawgrade NULL means \'Not graded\'. Missing property or key means does not change the existing value. ', [['lib','gradelib.php',40]], 27],
'quiz_allows_multiple_tries': ['quiz_allows_multiple_tries', 'Does this quiz allow multiple tries? ', [['mod/quiz','lib.php',426]], 8],
'record_exists_select': ['record_exists_select', 'Test whether any records exists in a table which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1781]], 35],
'quiz_print_recent_mod_activity': ['quiz_print_recent_mod_activity', '', [['mod/quiz','lib.php',950]], 0],
'delete_questions_usage_by_activities': ['delete_questions_usage_by_activities', 'Delete {@link question_usage_by_activity}s from the database. ', [['question/engine','lib.php',112],['question/engine','datalib.php',926]], 6],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',757]], 262],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',2001]], 277],
'pix_url': ['pix_url', 'Return the URL for an image ', [['lib','outputlib.php',1356],['lib','outputrenderers.php',234]], 406],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'quiz_update_effective_access': ['quiz_update_effective_access', 'Updates a quiz object with override information for a user. ', [['mod/quiz','lib.php',270]], 2],
'quiz_get_recent_mod_activity': ['quiz_get_recent_mod_activity', 'Returns all quiz graded users since a given time for specified quiz ', [['mod/quiz','lib.php',848]], 0],
'get_all_instances_in_courses': ['get_all_instances_in_courses', 'Returns an array of all the active instances of a particular module in given courses, sorted in the order they are defined ', [['lib','datalib.php',1413]], 13],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1331]], 365],
'instance_is_visible': ['instance_is_visible', 'Determine whether a module instance is visible within a course ', [['lib','datalib.php',1510]], 6],
'quiz_report_list': ['quiz_report_list', 'Returns an array of reports to which the current user has access to. ', [['mod/quiz/report','reportlib.php',327]], 4],
'quiz_has_grades': ['quiz_has_grades', 'Is this a graded quiz? If this method returns true, you can assume that $quiz->grade and $quiz->sumgrades are non-zero (for example, if you want to divide by them). ', [['mod/quiz','lib.php',414]], 11],
'create': ['create', 'Creates a new 2048 bit RSA key pair and returns a unique ID that can be used to reference this key pair when launching new instances. ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',39],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',271],['repository/filesystem','lib.php',283],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',39],['lib/google/src/Google/Service','Gmail.php',670],['lib/google/src/Google/Service','Gmail.php',827],['course','lib.php',2874],['lib/classes/event','base.php',139],['lib/google/src/Google/Service','Genomics.php',618],['lib/google/src/Google/Service','Genomics.php',717],['lib/google/src/Google/Service','Genomics.php',850],['lib/google/src/Google/Service','Genomics.php',1313],['lib','modinfolib.php',1747],['calendar','lib.php',2651],['lib/zend/Zend/Service/Amazon','Sqs.php',82],['lib','weblib.php',3048],['mod/lesson','locallib.php',1013],['mod/lesson','locallib.php',2166],['mod/lesson','locallib.php',3203],['lib/google/src/Google/Service','Fitness.php',340],['lib/google/src/Google/Service','TagManager.php',1034],['lib/google/src/Google/Service','TagManager.php',1124],['lib/google/src/Google/Service','TagManager.php',1217],['lib/google/src/Google/Service','TagManager.php',1310],['lib/google/src/Google/Service','TagManager.php',1403],['lib/google/src/Google/Service','TagManager.php',1497],['lib/google/src/Google/Service','TagManager.php',1591],['lib/google/src/Google/Service','TagManager.php',1742],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Container.php',314],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['repository','lib.php',206],['repository','lib.php',1960],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',555],['lib/google/src/Google/Service','Games.php',1648],['lib/google/src/Google/Service','Games.php',2012],['lib/google/src/Google/Service','MapsEngine.php',1676],['lib/google/src/Google/Service','MapsEngine.php',1976],['lib/google/src/Google/Service','MapsEngine.php',2252],['lib/google/src/Google/Service','MapsEngine.php',2329],['lib/google/src/Google/Service','MapsEngine.php',2897],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Pubsub.php',219],['lib/google/src/Google/Service','Pubsub.php',364],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/simplepie/library/SimplePie','Registry.php',153],['lib','navigationlib.php',266],['lib/google/src/Google/Service','Dns.php',282],['lib/google/src/Google/Service','Dns.php',355],['lib','coursecatlib.php',328],['mod/quiz/classes','structure.php',65]], 3074],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',605]], 2167],
'delete_settings': ['delete_settings', 'Delete any rule-specific settings when the quiz is deleted. ', [['mod/quiz','accessmanager.php',160],['mod/quiz/accessrule','accessrulebase.php',291]], 2],
'quiz_extend_settings_navigation': ['quiz_extend_settings_navigation', 'This function extends the settings navigation block for the site. ', [['mod/quiz','lib.php',1626]], 0],
'get_children_key_list': ['get_children_key_list', 'Return a list of all the keys of all the child nodes. ', [['lib','navigationlib.php',359]], 4],
'check_file_access': ['check_file_access', '', [['question/type/multianswer','question.php',338],['question/engine','questionusage.php',480],['question/type/shortanswer','question.php',162],['question/type/truefalse','question.php',102],['question/type/essay','question.php',132],['question/type/match','question.php',309],['mod/quiz','attemptlib.php',1562],['question/type/numerical','question.php',282],['question/type/multichoice','question.php',94],['question/type','questionbase.php',404],['question/behaviour','behaviourbase.php',116],['question/engine','questionattempt.php',863]], 13],
'quiz_get_extra_capabilities': ['quiz_get_extra_capabilities', '', [['mod/quiz','lib.php',1618]], 0],
'quiz_questions_in_use': ['quiz_questions_in_use', '', [['mod/quiz','lib.php',1310]], 0],
'quiz_get_best_grade': ['quiz_get_best_grade', 'Get the best current grade for a particular user in a quiz. ', [['mod/quiz','lib.php',393]], 1],
'quiz_get_completion_state': ['quiz_get_completion_state', 'Obtains the automatic completion state for this quiz on any conditions in quiz settings, such as if all attempts are used or a certain grade is achieved. ', [['mod/quiz','lib.php',1835]], 2],
'quiz_update_grades': ['quiz_update_grades', 'Update grades in central gradebook ', [['mod/quiz','lib.php',670]], 7],
'quiz_cron': ['quiz_cron', 'Quiz periodic clean-up tasks. ', [['mod/quiz','lib.php',519]], 0],
'quiz_update_instance': ['quiz_update_instance', 'Given an object containing all the necessary data, (defined by the form in mod_form.php) this function will update an existing instance with new data. ', [['mod/quiz','lib.php',101]], 0],
'delete_records_select': ['delete_records_select', 'Delete one or more records from a table which match a particular WHERE clause. ', [['lib/dml','pgsql_native_moodle_database.php',1247],['lib/dml','oci_native_moodle_database.php',1445],['lib/dml','sqlsrv_native_moodle_database.php',1153],['lib/dml','mssql_native_moodle_database.php',1082],['lib/dml','mysqli_native_moodle_database.php',1469],['lib/dml/tests','dml_test.php',5432],['lib/dml','pdo_moodle_database.php',207]], 166],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'quiz_num_attempt_summary': ['quiz_num_attempt_summary', 'Return a textual summary of the number of attempts that have been made at a particular quiz, returns \'\' if no attempts have been made yet, unless $returnzero is passed as true. ', [['mod/quiz','lib.php',1522]], 5],
'quiz_grade_item_update': ['quiz_grade_item_update', 'Create or update the grade item for given quiz ', [['mod/quiz','lib.php',699]], 7],
'format_module_intro': ['format_module_intro', 'Formats activity intro text ', [['lib','weblib.php',1473]], 57],
'execute': ['execute', 'Exceptionally override the execute method, so, based in the activity_included setting, we are able to skip the execution of one task completely ', [['backup/moodle2','backup_activity_task.class.php',205],['backup/converter/moodle1','backuplib.php',10],['filter/tex','latex.php',60],['backup/util/plan','base_plan.class.php',158],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',61],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',63],['mod/lti/service/profile/classes/local/resource','profile.php',76],['webservice','lib.php',1772],['lib/classes/task','context_cleanup_task.php',41],['lib/adodb','adodb.inc.php',967],['enrol/imsenterprise/classes/task','cron_task.php',43],['admin/tool/messageinbound/classes/task','cleanup_task.php',47],['lib/classes/task','calendar_cron_task.php',40],['mod/workshop/allocation/random','lib.php',83],['lib/classes/task','registration_cron_task.php',40],['lib/classes/task','portfolio_cron_task.php',40],['lib/htmlpurifier/HTMLPurifier/Strategy','Composite.php',21],['lib/google/src/Google/Http','Batch.php',56],['backup/converter/imscc11','lib.php',85],['lib/classes/task','file_temp_cleanup_task.php',40],['filter/tex','texdebug.php',287],['admin/tool/monitor/classes','notification_task.php',39],['lib/classes/task','stats_cron_task.php',40],['lib/classes/task','backup_cleanup_task.php',40],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',40],['backup/util/ui','backup_ui.class.php',122],['lib/dml','pgsql_native_moodle_database.php',665],['lib/classes/task','messaging_cleanup_task.php',40],['lib/zend/Zend/Service/WindowsAzure/RetryPolicy','RetryN.php',68],['lib/classes/task','session_cleanup_task.php',40],['lib/classes/task','completion_cron_task.php',40],['lib/dml','oci_native_moodle_database.php',1009],['backup/util/plan','base_task.class.php',162],['lib/adodb/drivers','adodb-pdo.inc.php',464],['backup/util/plan','backup_plan.class.php',112],['backup/util/ui','restore_ui.class.php',206],['backup/converter/imscc11','backuplib.php',42],['backup/moodle2','restore_activity_task.class.php',183],['','mdeploy.php',743],['lib/dml','sqlsrv_native_moodle_database.php',745],['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',66],['lib/google/src/Google/Http','REST.php',28],['admin/tool/langimport/classes/task','update_langpacks_task.php',44],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',62],['lib/classes/task','plagiarism_cron_task.php',40],['admin/tool/messageinbound/classes/task','pickup_task.php',47],['backup/util/plan','backup_structure_step.class.php',50],['mod/forum/classes/task','cron_task.php',39],['mod/workshop/allocation/scheduled','lib.php',128],['lib/classes/task','file_trash_cleanup_task.php',40],['backup/util/plan','restore_execution_step.class.php',25],['lib/tests/fixtures','task_fixtures.php',30],['lib/tests/fixtures','task_fixtures.php',39],['lib/tests/fixtures','task_fixtures.php',48],['lib/tests/fixtures','task_fixtures.php',57],['admin/tool/installaddon/classes','validator.php',114],['backup/util/plan','backup_execution_step.class.php',25],['lib/classes/task','password_reset_cleanup_task.php',40],['lib/classes/task','automated_backup_task.php',40],['backup/converter/moodle1','lib.php',142],['lib/htmlpurifier/HTMLPurifier/Strategy','ValidateAttributes.php',16],['lib/classes/task','create_contexts_task.php',40],['backup/util/plan','restore_plan.class.php',159],['backup/converter/imscc1','lib.php',84],['lib/dml','mssql_native_moodle_database.php',662],['admin/tool/log/store/standard/classes/task','cleanup_task.php',40],['lib/classes/task','cache_cleanup_task.php',40],['lib/classes/task','badges_cron_task.php',40],['lib/classes/task','cache_cron_task.php',40],['backup/util/interfaces','executable.class.php',32],['lib/htmlpurifier/HTMLPurifier/Strategy','FixNesting.php',41],['lib/adodb/drivers','adodb-oci8po.inc.php',52],['lib/classes/task','question_cron_task.php',40],['lib/zend/Zend/Service/WindowsAzure/RetryPolicy','NoRetry.php',37],['lib/dml','mysqli_native_moodle_database.php',955],['lib/htmlpurifier/HTMLPurifier/Strategy','RemoveForeignElements.php',20],['backup/util/plan/tests/fixtures','plan_fixtures.php',47],['backup/util/plan/tests/fixtures','plan_fixtures.php',55],['lib/classes/task','events_cron_task.php',40],['lib/classes/task','delete_unconfirmed_users_task.php',40],['lib/adodb/drivers','adodb-oci8.inc.php',786],['backup/converter/imscc1','backuplib.php',10],['lib/classes/task','tag_cron_task.php',40],['lib/classes/task','blog_cron_task.php',40],['lib/classes/task','send_failed_login_notifications_task.php',43],['lib/classes/task','grade_cron_task.php',40],['lib/dml/tests','dml_test.php',5422],['admin/tool/uploadcourse/classes','processor.php',174],['backup/moodle2','restore_section_task.class.php',87],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',62],['lib/google/src/Google','Client.php',545],['backup/util/plan','restore_structure_step.class.php',62],['lib/classes/task','legacy_plugin_cron_task.php',42],['lib/dml','pdo_moodle_database.php',226],['lib/classes/task','check_for_updates_task.php',40],['backup/util/helper','restore_decode_processor.class.php',73],['backup/moodle2','backup_section_task.class.php',97],['webservice/amf/testclient','AMFTester.mxml',282],['lib/classes/task','delete_incomplete_users_task.php',40],['mod/assign','adminlib.php',342],['lib/classes/task','send_new_user_passwords_task.php',40],['admin/tool/monitor/classes/task','clean_events.php',41]], 733],
'fields': ['fields', 'Get the value of a field in the current row by column name. Will not work if ADODB_FETCH_MODE is set to ADODB_FETCH_NUM. ', [['lib/adodb','adodb.inc.php',3469],['lib/adodb','adodb.inc.php',4073],['lib/adodb/drivers','adodb-odbtp.inc.php',718],['lib/adodb/drivers','adodb-sqlite.inc.php',369],['lib/adodb/drivers','adodb-pdo.inc.php',611],['lib/adodb/drivers','adodb-mysqli.inc.php',963],['lib/adodb/drivers','adodb-mssql.inc.php',904],['mod/quiz/classes','admin_review_setting.php',65],['lib/adodb/drivers','adodb-postgres64.inc.php',951],['lib/adodb/drivers','adodb-oracle.inc.php',265],['lib/adodb/drivers','adodb-ado.inc.php',373],['lib','outputcomponents.php',235],['lib/adodb/drivers','adodb-ado5.inc.php',410],['lib/adodb/drivers','adodb-db2.inc.php',754],['lib/adodb/drivers','adodb-sqlite3.inc.php',399],['lib/adodb/drivers','adodb-mssqlnative.inc.php',888],['lib/adodb/drivers','adodb-ibase.inc.php',833],['lib/adodb/drivers','adodb-oci8po.inc.php',91],['lib/adodb/drivers','adodb-ads.inc.php',690],['lib/adodb/drivers','adodb-odbc.inc.php',642],['lib/adodb/drivers','adodb-mysql.inc.php',764],['lib/adodb/drivers','adodb-oci8.inc.php',1549]], 145],
'quiz_get_user_attempts': ['quiz_get_user_attempts', '', [['mod/quiz','lib.php',554]], 10],
'quiz_get_user_grades': ['quiz_get_user_grades', 'Return grade for given user or all users. ', [['mod/quiz','lib.php',593]], 5],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pgsql_native_moodle_database.php',1137],['lib/dml','oci_native_moodle_database.php',1355],['lib/dml','sqlsrv_native_moodle_database.php',1081],['lib/dml','mssql_native_moodle_database.php',1003],['lib/dml','mysqli_native_moodle_database.php',1397],['lib/dml/tests','dml_test.php',5430],['lib/dml','pdo_moodle_database.php',460]], 565],
'groups_get_all_groups': ['groups_get_all_groups', 'Gets array of all groups in a specified course. ', [['lib','grouplib.php',189]], 104],
'quiz_delete_instance': ['quiz_delete_instance', 'Given an ID of an instance of this module, this function will permanently delete the instance and any data that depends on it. ', [['mod/quiz','lib.php',157]], 1],
'is_directory': ['is_directory', 'Whether or not this is a directory ', [['lib/filebrowser','file_info_context_course.php',372],['lib/filebrowser','file_info_context_course.php',657],['lib/filebrowser','file_info_context_course.php',803],['lib/filebrowser','file_info_context_system.php',83],['mod/book','locallib.php',454],['lib/filebrowser','file_info_context_coursecat.php',143],['mod/forum','locallib.php',463],['lib/filebrowser','file_info_context_module.php',249],['lib/filebrowser','file_info_context_user.php',265],['mod/data','locallib.php',475],['mod/workshop','fileinfolib.php',82],['mod/workshop','fileinfolib.php',241],['mod/imscp','locallib.php',328],['mod/lesson/classes','file_info.php',94],['mod/glossary','locallib.php',525],['lib/filestorage','stored_file.php',310],['lib/filebrowser','virtual_root_file.php',60],['lib/filebrowser','file_info_stored.php',267]], 131],
'groups_get_activity_groupmode': ['groups_get_activity_groupmode', 'Returns effective groupmode used in activity, course setting overrides activity setting if groupmodeforce enabled. ', [['lib','grouplib.php',468]], 133],
'quiz_get_review_options': ['quiz_get_review_options', 'The the appropraite mod_quiz_display_options object for this attempt at this quiz right now. ', [['mod/quiz','locallib.php',1359]], 3],
'quiz_process_options': ['quiz_process_options', 'Pre-process the quiz options form data, making any necessary adjustments. Called by add/update instance in this file. ', [['mod/quiz','lib.php',989]], 2],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1583],['lib/dml','moodle_database.php',678]], 375],
'get_course': ['get_course', 'Gets a course object from database. If the course id corresponds to an already-loaded $COURSE or $SITE object, then the loaded object will be used, saving a database query. ', [['lib','datalib.php',568],['lib','modinfolib.php',180],['lib','modinfolib.php',1439],['lib','modinfolib.php',2730],['availability/classes','info.php',70],['mod/assign','locallib.php',1256],['enrol','locallib.php',897],['course/format','lib.php',231],['mod/quiz','attemptlib.php',180],['mod/quiz','attemptlib.php',681],['admin/tool/uploadcourse/classes','processor.php',232]], 268],
'update_overdue_attempts': ['update_overdue_attempts', 'Do the processing required. ', [['mod/quiz','cronlib.php',40]], 1],
'single_button': ['single_button', 'Returns a form with a single button. ', [['lib','outputrenderers.php',1735]], 298],
'quiz_get_post_actions': ['quiz_get_post_actions', 'List the actions that correspond to a post of this module. This is used by the participation report. ', [['mod/quiz','lib.php',1291]], 0],
'quiz_reset_course_form_definition': ['quiz_reset_course_form_definition', 'Implementation of the function for printing the form elements that control whether the course reset functionality affects the quiz. ', [['mod/quiz','lib.php',1320]], 0],
'get_file_by_hash': ['get_file_by_hash', 'Fetch file using local file full pathname hash ', [['lib/filestorage','file_storage.php',427]], 75],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','moodle_database.php',1815],['lib/dml','sqlite3_pdo_moodle_database.php',337]], 778],
'get_groups': ['get_groups', 'Returns groups that the current user belongs to on the course. Note: If not already available, this may make a database query. ', [['lib','modinfolib.php',289],['group','externallib.php',155],['group','externallib.php',1338]], 30],
'question_delete_question': ['question_delete_question', 'Deletes question and all associated data from the database ', [['lib','questionlib.php',257]], 9],
'get_field': ['get_field', 'Get the right field name to fetch a stat for these attempts that is calculated for more than one $whichattempts (count or avg). ', [['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1497],['user/filters','lib.php',124],['lib/behat','behat_field_manager.php',243]], 485],
'quiz_delete_all_attempts': ['quiz_delete_all_attempts', 'Delete all the attempts belonging to a quiz. ', [['mod/quiz','lib.php',380]], 1],
'qualified_me': ['qualified_me', 'Guesses the full URL of the current script. ', [['lib','weblib.php',197]], 26],
'quiz_format_question_grade': ['quiz_format_question_grade', 'Round a grade to the correct number of decimal places, and format it for display. ', [['mod/quiz','lib.php',659]], 15],
'format_float': ['format_float', 'This function should be identical to {@link qtype_calculated_variable_substituter::format_float()}. Except that we do not try to do locale-aware replacement of the decimal point. ', [['question/type/calculated/db','upgradelib.php',205],['lib','moodlelib.php',7707],['question/type/calculatedmulti/db','upgradelib.php',229],['question/type/calculated','question.php',328]], 154],
'quiz_repaginate_questions': ['quiz_repaginate_questions', 'Repaginate the questions in a quiz ', [['mod/quiz','locallib.php',478]], 2],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',5950]], 486],
'make_from_quiz': ['make_from_quiz', 'Set up the various options from the quiz settings, and a time constant. ', [['mod/quiz','locallib.php',1848]], 12],
'send_file_not_found': ['send_file_not_found', 'Requested file is not found or not accessible, does not return, terminates script ', [['lib','filelib.php',1758]], 126],
'is_array': ['is_array', '', [], 1820],
'count': ['count', '', [], 3984],
'trim': ['trim', '', [], 1889],
'in_array': ['in_array', '', [], 1173],
'time': ['time', '', [], 1768],
'array_shift': ['array_shift', '', [], 607],
'implode': ['implode', '', [], 1259],
'array_key_exists': ['array_key_exists', '', [], 1539],
'array_search': ['array_search', '', [], 188],
'substr': ['substr', '', [], 2883],
'is_null': ['is_null', '', [], 1992],
'sha1': ['sha1', '', [], 188],
'array_keys': ['array_keys', '', [], 1152],
'is_numeric': ['is_numeric', '', [], 723],
'array_merge': ['array_merge', '', [], 2320],
'is_string': ['is_string', '', [], 680],
'array_values': ['array_values', '', [], 283],
'define': ['define', '', [], 2170],
'max': ['max', '', [], 1096],
'array_intersect': ['array_intersect', '', [], 51],
'defined': ['defined', '', [], 4098],
'end': ['end', '', [], 432],
'reset': ['reset', '', [], 1070],
'link': ['link', '', [], 635],
'min': ['min', '', [], 754]};
CLASS_DATA={
'qubaids_for_quiz': ['qubaids_for_quiz', 'A {@link qubaid_condition} for finding all the question usages belonging to a particular quiz. ', [['mod/quiz','locallib.php',1890]], 1],
'group_override_deleted': ['group_override_deleted', 'The mod_lesson group override deleted event class. ', [['mod/lesson/classes/event','group_override_deleted.php',28],['mod/quiz/classes/event','group_override_deleted.php',28]], 2],
'grade_item': ['grade_item', 'Class representing a grade item. ', [['lib/grade','grade_item.php',29]], 206],
'qubaid_join': ['qubaid_join', 'This class represents a restriction on the set of question_usage ids to include in a larger database query based on JOINing to some other tables. ', [['question/engine','datalib.php',1918]], 15],
'navigation_node': ['navigation_node', 'This class is used to represent a node in a navigation tree ', [['lib','navigationlib.php',34]], 338],
'quiz': ['quiz', '', [['mod/quiz/classes/plugininfo','quiz.php',31],['mod/quiz','attemptlib.php',50]], 39],
'quiz_access_manager': ['quiz_access_manager', 'This class keeps track of the various access rules that apply to a particular quiz, with convinient methods for seeing whether access is allowed. ', [['mod/quiz','accessmanager.php',29]], 12],
'mod_quiz_display_options': ['mod_quiz_display_options', 'An extension of question_display_options that includes the extra options used by the quiz. ', [['mod/quiz','locallib.php',1818]], 99],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'mod_quiz_overdue_attempt_updater': ['mod_quiz_overdue_attempt_updater', 'This class holds all the code for automatically updating all attempts that have gone over their time limit. ', [['mod/quiz','cronlib.php',31]], 2],
'question_display_options': ['question_display_options', 'This class contains all the options that controls how a question is displayed. ', [['question/engine','lib.php',461]], 78],
'user_picture': ['user_picture', 'Data structure representing a user picture. ', [['lib','outputcomponents.php',142]], 135],
'grade_grade': ['grade_grade', 'grade_grades is an object mapped to DB table {prefix}grade_grades ', [['lib/grade','grade_grade.php',30]], 129],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',6988]], 942],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1052]], 4832],
'user_override_deleted': ['user_override_deleted', 'The mod_quiz user override deleted event class. ', [['mod/quiz/classes/event','user_override_deleted.php',28],['mod/lesson/classes/event','user_override_deleted.php',28]], 2],
'quiz_attempt': ['quiz_attempt', 'This class extends the quiz class to hold data about the state of a particular attempt, in addition to the data about the quiz. ', [['mod/quiz','attemptlib.php',449]], 123],
'pix_icon': ['pix_icon', 'Data structure representing an icon. ', [['lib','outputcomponents.php',497]], 247],
'calendar_event': ['calendar_event', 'Manage calendar events ', [['calendar','lib.php',1916]], 59]};
CONST_DATA={
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 2948],
'AJAX_SCRIPT': ['AJAX_SCRIPT', '', [['message','ajax.php',25],['login','token.php',24],['mod/glossary','showentry_ajax.php',2],['lib/editor/atto','autosave-ajax.php',25],['mod/forum','subscribe_ajax.php',25],['lib/editor/atto/plugins/equation','ajax.php',26],['availability/condition/date','ajax.php',25],['message/output/airnotifier','rest.php',26],['enrol/manual','ajax.php',28],['rating','rate_ajax.php',28],['enrol','ajax.php',28],['badges','backpackconnect.php',27],['grade/report/history','users_ajax.php',26],['mod/assign/feedback/editpdf','ajax.php',29],['lib/ajax','service.php',30],['','install.php',47],['mod/feedback','ajax.php',26],['badges','ajax.php',27],['mod/quiz','questionbank.ajax.php',26],['','help_ajax.php',27],['mod/quiz','autosave.ajax.php',25],['mod/chat','chat_ajax.php',17],['course','rest.php',27],['mod/lti','ajax.php',29],['badges','assertion.php',27],['repository','repository_ajax.php',27],['course','category.ajax.php',28],['lib/ajax','getnavbranch.php',28],['lib','sessionkeepalive_ajax.php',25],['mod/quiz','edit_rest.php',26],['tag','tag_autocomplete.php',25],['mod/assign/feedback/editpdf','ajax_progress.php',26],['course','dndupload.php',26],['webservice','pluginfile.php',29],['lib','setup.php',351],['question','toggleflag.php',27],['repository','draftfiles_ajax.php',27],['user/selector','search.php',25],['lib/ajax','getsiteadminbranch.php',28],['admin/tool/installaddon','permcheck.php',27],['webservice','upload.php',40],['comment','comment_ajax.php',24],['report/loglive','loglive_ajax.php',25],['lib/ajax','blocks.php',25],['course/ajax','management.php',27],['blocks/course_overview','save.php',24]], 71],
'QUIZ_GRADEHIGHEST': ['QUIZ_GRADEHIGHEST', '', [['mod/quiz','lib.php',48]], 15],
'FEATURE_MOD_INTRO': ['FEATURE_MOD_INTRO', '', [['lib','moodlelib.php',426]], 31],
'QUIZ_MAX_Q_DECIMAL_OPTION': ['QUIZ_MAX_Q_DECIMAL_OPTION', '', [['mod/quiz','lib.php',41]], 3],
'QUIZ_MAX_ATTEMPT_OPTION': ['QUIZ_MAX_ATTEMPT_OPTION', '', [['mod/quiz','lib.php',38]], 4],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 462],
'QUIZ_ATTEMPTLAST': ['QUIZ_ATTEMPTLAST', '', [['mod/quiz','lib.php',51]], 11],
'FEATURE_COMPLETION_HAS_RULES': ['FEATURE_COMPLETION_HAS_RULES', '', [['lib','moodlelib.php',407]], 11],
'FEATURE_CONTROLS_GRADE_VISIBILITY': ['FEATURE_CONTROLS_GRADE_VISIBILITY', '', [['lib','moodlelib.php',400]], 4],
'QUIZ_NAVMETHOD_SEQ': ['QUIZ_NAVMETHOD_SEQ', '', [['mod/quiz','lib.php',64]], 6],
'FEATURE_GRADE_HAS_GRADE': ['FEATURE_GRADE_HAS_GRADE', '', [['lib','moodlelib.php',394]], 29],
'QUIZ_NAVMETHOD_FREE': ['QUIZ_NAVMETHOD_FREE', '', [['mod/quiz','lib.php',63]], 5],
'FEATURE_USES_QUESTIONS': ['FEATURE_USES_QUESTIONS', '', [['lib','moodlelib.php',440]], 6],
'FEATURE_SHOW_DESCRIPTION': ['FEATURE_SHOW_DESCRIPTION', '', [['lib','moodlelib.php',437]], 22],
'FEATURE_GRADE_OUTCOMES': ['FEATURE_GRADE_OUTCOMES', '', [['lib','moodlelib.php',396]], 23],
'QUIZ_MAX_QPP_OPTION': ['QUIZ_MAX_QPP_OPTION', '', [['mod/quiz','lib.php',39]], 3],
'QUIZ_MAX_DECIMAL_OPTION': ['QUIZ_MAX_DECIMAL_OPTION', '', [['mod/quiz','lib.php',40]], 3],
'GRADE_TYPE_NONE': ['GRADE_TYPE_NONE', '', [['lib/grade','constants.php',80]], 41],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1252],
'FEATURE_BACKUP_MOODLE2': ['FEATURE_BACKUP_MOODLE2', '', [['lib','moodlelib.php',434]], 34],
'FEATURE_COMPLETION_TRACKS_VIEWS': ['FEATURE_COMPLETION_TRACKS_VIEWS', '', [['lib','moodlelib.php',405]], 23],
'QUIZ_GRADEAVERAGE': ['QUIZ_GRADEAVERAGE', '', [['mod/quiz','lib.php',49]], 15],
'FEATURE_GROUPS': ['FEATURE_GROUPS', '', [['lib','moodlelib.php',414]], 25],
'GRADE_TYPE_VALUE': ['GRADE_TYPE_VALUE', '', [['lib/grade','constants.php',85]], 71],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532],
'QUIZ_MAX_EVENT_LENGTH': ['QUIZ_MAX_EVENT_LENGTH', '', [['mod/quiz','lib.php',58]], 2],
'SEPARATEGROUPS': ['SEPARATEGROUPS', '', [['lib','grouplib.php',34]], 158],
'QUIZ_ATTEMPTFIRST': ['QUIZ_ATTEMPTFIRST', '', [['mod/quiz','lib.php',50]], 11],
'GRADE_UPDATE_ITEM_LOCKED': ['GRADE_UPDATE_ITEM_LOCKED', '', [['lib/grade','constants.php',118]], 3],
'FEATURE_GROUPINGS': ['FEATURE_GROUPINGS', '', [['lib','moodlelib.php',416]], 23]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
