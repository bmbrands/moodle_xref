<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/quiz/view.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/quiz';
filename='view.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/quiz/</a> -> <a href="view.php.html">view.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="view.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="view.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * This page is the entry page into the quiz UI. Displays information about the</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * quiz to students and teachers, and lets students see their previous attempts.</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @package   mod_quiz</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  require_once(__DIR__ . '/../../config.php');
<a name="l28"><span class="linenum">  28</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l29"><span class="linenum">  29</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../mod/quiz/locallib.php.html">/mod/quiz/locallib.php</a>');
<a name="l30"><span class="linenum">  30</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/completionlib.php');
<a name="l31"><span class="linenum">  31</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../course/format/lib.php.html">/course/format/lib.php</a>');
<a name="l32"><span class="linenum">  32</span></a>  
<a name="l33"><span class="linenum">  33</span></a>  <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('id', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>); <span class="comment">// Course Module ID, or ...</span>
<a name="l34"><span class="linenum">  34</span></a>  <a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('q',  0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);  <span class="comment">// Quiz ID.</span>
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>  if (<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l37"><span class="linenum">  37</span></a>      if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_id')" href="../../_functions/get_coursemodule_from_id.html" onMouseOver="funcPopup(event,'get_coursemodule_from_id')">get_coursemodule_from_id</a>('quiz', <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>)) {
<a name="l38"><span class="linenum">  38</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidcoursemodule');
<a name="l39"><span class="linenum">  39</span></a>      }
<a name="l40"><span class="linenum">  40</span></a>      if (!<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>))) {
<a name="l41"><span class="linenum">  41</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('coursemisconf');
<a name="l42"><span class="linenum">  42</span></a>      }
<a name="l43"><span class="linenum">  43</span></a>  } else {
<a name="l44"><span class="linenum">  44</span></a>      if (!<a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('quiz', array('id' =&gt; <a class="var it445" onMouseOver="hilite(445)" onMouseOut="lolite()" onClick="logVariable('q')" href="../../_variables/q.html">$q</a>))) {
<a name="l45"><span class="linenum">  45</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidquizid', 'quiz');
<a name="l46"><span class="linenum">  46</span></a>      }
<a name="l47"><span class="linenum">  47</span></a>      if (!<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('course')" class="var it43017" onMouseOver="hilite(43017)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>))) {
<a name="l48"><span class="linenum">  48</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidcourseid');
<a name="l49"><span class="linenum">  49</span></a>      }
<a name="l50"><span class="linenum">  50</span></a>      if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>(&quot;quiz&quot;, <a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it43017" onMouseOver="hilite(43017)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l51"><span class="linenum">  51</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidcoursemodule');
<a name="l52"><span class="linenum">  52</span></a>      }
<a name="l53"><span class="linenum">  53</span></a>  }
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">// Check login and get context.</span>
<a name="l56"><span class="linenum">  56</span></a>  <a class="function" onClick="logFunction('require_login')" href="../../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, false, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l57"><span class="linenum">  57</span></a>  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l58"><span class="linenum">  58</span></a>  <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/quiz:view', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l59"><span class="linenum">  59</span></a>  
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">// Cache some other capabilities we use several times.</span>
<a name="l61"><span class="linenum">  61</span></a>  <a class="var it8536" onMouseOver="hilite(8536)" onMouseOut="lolite()" onClick="logVariable('canattempt')" href="../../_variables/canattempt.html">$canattempt</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/quiz:attempt', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l62"><span class="linenum">  62</span></a>  <a class="var it8537" onMouseOver="hilite(8537)" onMouseOut="lolite()" onClick="logVariable('canreviewmine')" href="../../_variables/canreviewmine.html">$canreviewmine</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/quiz:reviewmyattempts', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l63"><span class="linenum">  63</span></a>  <a class="var it8538" onMouseOver="hilite(8538)" onMouseOut="lolite()" onClick="logVariable('canpreview')" href="../../_variables/canpreview.html">$canpreview</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/quiz:preview', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">// Create an object to manage all the other (non-roles) access rules.</span>
<a name="l66"><span class="linenum">  66</span></a>  <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l67"><span class="linenum">  67</span></a>  <a class="var it745" onMouseOver="hilite(745)" onMouseOut="lolite()" onClick="logVariable('quizobj')" href="../../_variables/quizobj.html">$quizobj</a> = <a class="class" onClick="logClass('quiz')" href="../../_classes/quiz.html" onMouseOver="classPopup(event,'quiz')">quiz</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l68"><span class="linenum">  68</span></a>  <a class="var it6226" onMouseOver="hilite(6226)" onMouseOut="lolite()" onClick="logVariable('accessmanager')" href="../../_variables/accessmanager.html">$accessmanager</a> = <span class="keyword">new </span><a class="class" onClick="logClass('quiz_access_manager')" href="../../_classes/quiz_access_manager.html" onMouseOver="classPopup(event,'quiz_access_manager')">quiz_access_manager</a>(<a class="var it745" onMouseOver="hilite(745)" onMouseOut="lolite()" onClick="logVariable('quizobj')" href="../../_variables/quizobj.html">$quizobj</a>, <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a>,
<a name="l69"><span class="linenum">  69</span></a>          <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/quiz:ignoretimelimits', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, null, false));
<a name="l70"><span class="linenum">  70</span></a>  <a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a> = <a class="var it745" onMouseOver="hilite(745)" onMouseOut="lolite()" onClick="logVariable('quizobj')" href="../../_variables/quizobj.html">$quizobj</a>-&gt;<a class="function" onClick="logFunction('get_quiz')" href="../../_functions/get_quiz.html" onMouseOver="funcPopup(event,'get_quiz')">get_quiz</a>();
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">// Trigger course_module_viewed event and completion.</span>
<a name="l73"><span class="linenum">  73</span></a>  <a class="function" onClick="logFunction('quiz_view')" href="../../_functions/quiz_view.html" onMouseOver="funcPopup(event,'quiz_view')">quiz_view</a>(<a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l74"><span class="linenum">  74</span></a>  
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">// Initialize $PAGE, compute blocks.</span>
<a name="l76"><span class="linenum">  76</span></a>  <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>('<a class="filename" href="../../mod/quiz/view.php.html">/mod/quiz/view.php</a>', array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">// Create view object which collects all the information the renderer will need.</span>
<a name="l79"><span class="linenum">  79</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_quiz_view_object')" href="../../_classes/mod_quiz_view_object.html" onMouseOver="classPopup(event,'mod_quiz_view_object')">mod_quiz_view_object</a>();
<a name="l80"><span class="linenum">  80</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('accessmanager')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/accessmanager.html">accessmanager</a> = <a class="var it6226" onMouseOver="hilite(6226)" onMouseOut="lolite()" onClick="logVariable('accessmanager')" href="../../_variables/accessmanager.html">$accessmanager</a>;
<a name="l81"><span class="linenum">  81</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('canreviewmine')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/canreviewmine.html">canreviewmine</a> = <a class="var it8537" onMouseOver="hilite(8537)" onMouseOut="lolite()" onClick="logVariable('canreviewmine')" href="../../_variables/canreviewmine.html">$canreviewmine</a>;
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">// Get this user's attempts.</span>
<a name="l84"><span class="linenum">  84</span></a>  <a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> = <a class="function" onClick="logFunction('quiz_get_user_attempts')" href="../../_functions/quiz_get_user_attempts.html" onMouseOver="funcPopup(event,'quiz_get_user_attempts')">quiz_get_user_attempts</a>(<a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it43017" onMouseOver="hilite(43017)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'finished', true);
<a name="l85"><span class="linenum">  85</span></a>  <a class="var it6249" onMouseOver="hilite(6249)" onMouseOut="lolite()" onClick="logVariable('lastfinishedattempt')" href="../../_variables/lastfinishedattempt.html">$lastfinishedattempt</a> = <a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>);
<a name="l86"><span class="linenum">  86</span></a>  <a class="var it8540" onMouseOver="hilite(8540)" onMouseOut="lolite()" onClick="logVariable('unfinished')" href="../../_variables/unfinished.html">$unfinished</a> = false;
<a name="l87"><span class="linenum">  87</span></a>  <a class="var it8541" onMouseOver="hilite(8541)" onMouseOut="lolite()" onClick="logVariable('unfinishedattemptid')" href="../../_variables/unfinishedattemptid.html">$unfinishedattemptid</a> = null;
<a name="l88"><span class="linenum">  88</span></a>  if (<a class="var it6250" onMouseOver="hilite(6250)" onMouseOut="lolite()" onClick="logVariable('unfinishedattempt')" href="../../_variables/unfinishedattempt.html">$unfinishedattempt</a> = <a class="function" onClick="logFunction('quiz_get_user_attempt_unfinished')" href="../../_functions/quiz_get_user_attempt_unfinished.html" onMouseOver="funcPopup(event,'quiz_get_user_attempt_unfinished')">quiz_get_user_attempt_unfinished</a>(<a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it43017" onMouseOver="hilite(43017)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l89"><span class="linenum">  89</span></a>      <a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>[] = <a class="var it6250" onMouseOver="hilite(6250)" onMouseOut="lolite()" onClick="logVariable('unfinishedattempt')" href="../../_variables/unfinishedattempt.html">$unfinishedattempt</a>;
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">    // If the attempt is now overdue, deal with that - and pass isonline = false.</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">    // We want the student notified in this case.</span>
<a name="l93"><span class="linenum">  93</span></a>      <a class="var it745" onMouseOver="hilite(745)" onMouseOut="lolite()" onClick="logVariable('quizobj')" href="../../_variables/quizobj.html">$quizobj</a>-&gt;<a class="function" onClick="logFunction('create_attempt_object')" href="../../_functions/create_attempt_object.html" onMouseOver="funcPopup(event,'create_attempt_object')">create_attempt_object</a>(<a class="var it6250" onMouseOver="hilite(6250)" onMouseOut="lolite()" onClick="logVariable('unfinishedattempt')" href="../../_variables/unfinishedattempt.html">$unfinishedattempt</a>)-&gt;<a class="function" onClick="logFunction('handle_if_time_expired')" href="../../_functions/handle_if_time_expired.html" onMouseOver="funcPopup(event,'handle_if_time_expired')">handle_if_time_expired</a>(<a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), false);
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>      <a class="var it8540" onMouseOver="hilite(8540)" onMouseOut="lolite()" onClick="logVariable('unfinished')" href="../../_variables/unfinished.html">$unfinished</a> = <a class="var it6250" onMouseOver="hilite(6250)" onMouseOut="lolite()" onClick="logVariable('unfinishedattempt')" href="../../_variables/unfinishedattempt.html">$unfinishedattempt</a>-&gt;<a onClick="logVariable('state')" class="var it43543" onMouseOver="hilite(43543)" onMouseOut="lolite()" href="../../_variables/state.html">state</a> == <a class="class" onClick="logClass('quiz_attempt')" href="../../_classes/quiz_attempt.html" onMouseOver="classPopup(event,'quiz_attempt')">quiz_attempt</a>::IN_PROGRESS ||
<a name="l96"><span class="linenum">  96</span></a>              <a class="var it6250" onMouseOver="hilite(6250)" onMouseOut="lolite()" onClick="logVariable('unfinishedattempt')" href="../../_variables/unfinishedattempt.html">$unfinishedattempt</a>-&gt;<a onClick="logVariable('state')" class="var it43543" onMouseOver="hilite(43543)" onMouseOut="lolite()" href="../../_variables/state.html">state</a> == <a class="class" onClick="logClass('quiz_attempt')" href="../../_classes/quiz_attempt.html" onMouseOver="classPopup(event,'quiz_attempt')">quiz_attempt</a>::OVERDUE;
<a name="l97"><span class="linenum">  97</span></a>      if (!<a class="var it8540" onMouseOver="hilite(8540)" onMouseOut="lolite()" onClick="logVariable('unfinished')" href="../../_variables/unfinished.html">$unfinished</a>) {
<a name="l98"><span class="linenum">  98</span></a>          <a class="var it6249" onMouseOver="hilite(6249)" onMouseOut="lolite()" onClick="logVariable('lastfinishedattempt')" href="../../_variables/lastfinishedattempt.html">$lastfinishedattempt</a> = <a class="var it6250" onMouseOver="hilite(6250)" onMouseOut="lolite()" onClick="logVariable('unfinishedattempt')" href="../../_variables/unfinishedattempt.html">$unfinishedattempt</a>;
<a name="l99"><span class="linenum">  99</span></a>      }
<a name="l100"><span class="linenum"> 100</span></a>      <a class="var it8541" onMouseOver="hilite(8541)" onMouseOut="lolite()" onClick="logVariable('unfinishedattemptid')" href="../../_variables/unfinishedattemptid.html">$unfinishedattemptid</a> = <a class="var it6250" onMouseOver="hilite(6250)" onMouseOut="lolite()" onClick="logVariable('unfinishedattempt')" href="../../_variables/unfinishedattempt.html">$unfinishedattempt</a>-&gt;<a onClick="logVariable('id')" class="var it43543" onMouseOver="hilite(43543)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l101"><span class="linenum"> 101</span></a>      <a class="var it6250" onMouseOver="hilite(6250)" onMouseOut="lolite()" onClick="logVariable('unfinishedattempt')" href="../../_variables/unfinishedattempt.html">$unfinishedattempt</a> = null; <span class="comment">// To make it clear we do not use this again.</span>
<a name="l102"><span class="linenum"> 102</span></a>  }
<a name="l103"><span class="linenum"> 103</span></a>  <a class="var it6251" onMouseOver="hilite(6251)" onMouseOut="lolite()" onClick="logVariable('numattempts')" href="../../_variables/numattempts.html">$numattempts</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>);
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('attempts')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/attempts.html">attempts</a> = <a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>;
<a name="l106"><span class="linenum"> 106</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('attemptobjs')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/attemptobjs.html">attemptobjs</a> = array();
<a name="l107"><span class="linenum"> 107</span></a>  foreach (<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a> as <a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>) {
<a name="l108"><span class="linenum"> 108</span></a>      <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('attemptobjs')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/attemptobjs.html">attemptobjs</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('quiz_attempt')" href="../../_classes/quiz_attempt.html" onMouseOver="classPopup(event,'quiz_attempt')">quiz_attempt</a>(<a class="var it550" onMouseOver="hilite(550)" onMouseOut="lolite()" onClick="logVariable('attempt')" href="../../_variables/attempt.html">$attempt</a>, <a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, false);
<a name="l109"><span class="linenum"> 109</span></a>  }
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">// Work out the final grade, checking whether it was overridden in the gradebook.</span>
<a name="l112"><span class="linenum"> 112</span></a>  if (!<a class="var it8538" onMouseOver="hilite(8538)" onMouseOut="lolite()" onClick="logVariable('canpreview')" href="../../_variables/canpreview.html">$canpreview</a>) {
<a name="l113"><span class="linenum"> 113</span></a>      <a class="var it533" onMouseOver="hilite(533)" onMouseOut="lolite()" onClick="logVariable('mygrade')" href="../../_variables/mygrade.html">$mygrade</a> = <a class="function" onClick="logFunction('quiz_get_best_grade')" href="../../_functions/quiz_get_best_grade.html" onMouseOver="funcPopup(event,'quiz_get_best_grade')">quiz_get_best_grade</a>(<a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l114"><span class="linenum"> 114</span></a>  } else if (<a class="var it6249" onMouseOver="hilite(6249)" onMouseOut="lolite()" onClick="logVariable('lastfinishedattempt')" href="../../_variables/lastfinishedattempt.html">$lastfinishedattempt</a>) {
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">    // Users who can preview the quiz don't get a proper grade, so work out a</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">    // plausible value to display instead, so the page looks right.</span>
<a name="l117"><span class="linenum"> 117</span></a>      <a class="var it533" onMouseOver="hilite(533)" onMouseOut="lolite()" onClick="logVariable('mygrade')" href="../../_variables/mygrade.html">$mygrade</a> = <a class="function" onClick="logFunction('quiz_rescale_grade')" href="../../_functions/quiz_rescale_grade.html" onMouseOver="funcPopup(event,'quiz_rescale_grade')">quiz_rescale_grade</a>(<a class="var it6249" onMouseOver="hilite(6249)" onMouseOut="lolite()" onClick="logVariable('lastfinishedattempt')" href="../../_variables/lastfinishedattempt.html">$lastfinishedattempt</a>-&gt;<a onClick="logVariable('sumgrades')" class="var it45200" onMouseOver="hilite(45200)" onMouseOut="lolite()" href="../../_variables/sumgrades.html">sumgrades</a>, <a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, false);
<a name="l118"><span class="linenum"> 118</span></a>  } else {
<a name="l119"><span class="linenum"> 119</span></a>      <a class="var it533" onMouseOver="hilite(533)" onMouseOut="lolite()" onClick="logVariable('mygrade')" href="../../_variables/mygrade.html">$mygrade</a> = null;
<a name="l120"><span class="linenum"> 120</span></a>  }
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>  <a class="var it8543" onMouseOver="hilite(8543)" onMouseOut="lolite()" onClick="logVariable('mygradeoverridden')" href="../../_variables/mygradeoverridden.html">$mygradeoverridden</a> = false;
<a name="l123"><span class="linenum"> 123</span></a>  <a class="var it8544" onMouseOver="hilite(8544)" onMouseOut="lolite()" onClick="logVariable('gradebookfeedback')" href="../../_variables/gradebookfeedback.html">$gradebookfeedback</a> = '';
<a name="l124"><span class="linenum"> 124</span></a>  
<a name="l125"><span class="linenum"> 125</span></a>  <a class="var it8545" onMouseOver="hilite(8545)" onMouseOut="lolite()" onClick="logVariable('grading_info')" href="../../_variables/grading_info.html">$grading_info</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod', 'quiz', <a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('id')" class="var it43017" onMouseOver="hilite(43017)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l126"><span class="linenum"> 126</span></a>  if (!empty(<a class="var it8545" onMouseOver="hilite(8545)" onMouseOut="lolite()" onClick="logVariable('grading_info')" href="../../_variables/grading_info.html">$grading_info</a>-&gt;<a onClick="logVariable('items')" class="var it45201" onMouseOver="hilite(45201)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>)) {
<a name="l127"><span class="linenum"> 127</span></a>      <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = <a class="var it8545" onMouseOver="hilite(8545)" onMouseOut="lolite()" onClick="logVariable('grading_info')" href="../../_variables/grading_info.html">$grading_info</a>-&gt;<a onClick="logVariable('items')" class="var it45201" onMouseOver="hilite(45201)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0];
<a name="l128"><span class="linenum"> 128</span></a>      if (isset(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('grades')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/grades.html">grades</a>[<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>])) {
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('grades')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/grades.html">grades</a>[<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>];
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('overridden')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/overridden.html">overridden</a>) {
<a name="l132"><span class="linenum"> 132</span></a>              <a class="var it533" onMouseOver="hilite(533)" onMouseOut="lolite()" onClick="logVariable('mygrade')" href="../../_variables/mygrade.html">$mygrade</a> = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> + 0; <span class="comment">// Convert to number.</span>
<a name="l133"><span class="linenum"> 133</span></a>              <a class="var it8543" onMouseOver="hilite(8543)" onMouseOut="lolite()" onClick="logVariable('mygradeoverridden')" href="../../_variables/mygradeoverridden.html">$mygradeoverridden</a> = true;
<a name="l134"><span class="linenum"> 134</span></a>          }
<a name="l135"><span class="linenum"> 135</span></a>          if (!empty(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_feedback')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/str_feedback.html">str_feedback</a>)) {
<a name="l136"><span class="linenum"> 136</span></a>              <a class="var it8544" onMouseOver="hilite(8544)" onMouseOut="lolite()" onClick="logVariable('gradebookfeedback')" href="../../_variables/gradebookfeedback.html">$gradebookfeedback</a> = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_feedback')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/str_feedback.html">str_feedback</a>;
<a name="l137"><span class="linenum"> 137</span></a>          }
<a name="l138"><span class="linenum"> 138</span></a>      }
<a name="l139"><span class="linenum"> 139</span></a>  }
<a name="l140"><span class="linenum"> 140</span></a>  
<a name="l141"><span class="linenum"> 141</span></a>  <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/shortname.html">shortname</a> . ': ' . <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('name')" class="var it43017" onMouseOver="hilite(43017)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l142"><span class="linenum"> 142</span></a>  <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>);
<a name="l143"><span class="linenum"> 143</span></a>  <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('fullname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/fullname.html">fullname</a>);
<a name="l144"><span class="linenum"> 144</span></a>  <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('mod_quiz');
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">// Print table with existing attempts.</span>
<a name="l147"><span class="linenum"> 147</span></a>  if (<a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>) {
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">    // Work out which columns we need, taking account what data is available in each attempt.</span>
<a name="l149"><span class="linenum"> 149</span></a>      <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it6229" onMouseOver="hilite(6229)" onMouseOut="lolite()" onClick="logVariable('someoptions')" href="../../_variables/someoptions.html">$someoptions</a>, <a class="var it6230" onMouseOver="hilite(6230)" onMouseOut="lolite()" onClick="logVariable('alloptions')" href="../../_variables/alloptions.html">$alloptions</a>) = <a class="function" onClick="logFunction('quiz_get_combined_reviewoptions')" href="../../_functions/quiz_get_combined_reviewoptions.html" onMouseOver="funcPopup(event,'quiz_get_combined_reviewoptions')">quiz_get_combined_reviewoptions</a>(<a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it744" onMouseOver="hilite(744)" onMouseOut="lolite()" onClick="logVariable('attempts')" href="../../_variables/attempts.html">$attempts</a>);
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>      <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('attemptcolumn')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/attemptcolumn.html">attemptcolumn</a>  = <a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('attempts')" class="var it43017" onMouseOver="hilite(43017)" onMouseOut="lolite()" href="../../_variables/attempts.html">attempts</a> != 1;
<a name="l152"><span class="linenum"> 152</span></a>  
<a name="l153"><span class="linenum"> 153</span></a>      <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('gradecolumn')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/gradecolumn.html">gradecolumn</a>    = <a class="var it6229" onMouseOver="hilite(6229)" onMouseOut="lolite()" onClick="logVariable('someoptions')" href="../../_variables/someoptions.html">$someoptions</a>-&gt;<a onClick="logVariable('marks')" class="var it45192" onMouseOver="hilite(45192)" onMouseOut="lolite()" href="../../_variables/marks.html">marks</a> &gt;= <a class="class" onClick="logClass('question_display_options')" href="../../_classes/question_display_options.html" onMouseOver="classPopup(event,'question_display_options')">question_display_options</a>::MARK_AND_MAX &amp;&amp;
<a name="l154"><span class="linenum"> 154</span></a>              <a class="function" onClick="logFunction('quiz_has_grades')" href="../../_functions/quiz_has_grades.html" onMouseOver="funcPopup(event,'quiz_has_grades')">quiz_has_grades</a>(<a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>);
<a name="l155"><span class="linenum"> 155</span></a>      <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('markcolumn')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/markcolumn.html">markcolumn</a>     = <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('gradecolumn')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/gradecolumn.html">gradecolumn</a> &amp;&amp; (<a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('grade')" class="var it43017" onMouseOver="hilite(43017)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> != <a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('sumgrades')" class="var it43017" onMouseOver="hilite(43017)" onMouseOut="lolite()" href="../../_variables/sumgrades.html">sumgrades</a>);
<a name="l156"><span class="linenum"> 156</span></a>      <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('overallstats')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/overallstats.html">overallstats</a>   = <a class="var it6249" onMouseOver="hilite(6249)" onMouseOut="lolite()" onClick="logVariable('lastfinishedattempt')" href="../../_variables/lastfinishedattempt.html">$lastfinishedattempt</a> &amp;&amp; <a class="var it6230" onMouseOver="hilite(6230)" onMouseOut="lolite()" onClick="logVariable('alloptions')" href="../../_variables/alloptions.html">$alloptions</a>-&gt;<a onClick="logVariable('marks')" class="var it45186" onMouseOver="hilite(45186)" onMouseOut="lolite()" href="../../_variables/marks.html">marks</a> &gt;= <a class="class" onClick="logClass('question_display_options')" href="../../_classes/question_display_options.html" onMouseOver="classPopup(event,'question_display_options')">question_display_options</a>::MARK_AND_MAX;
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>      <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('feedbackcolumn')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/feedbackcolumn.html">feedbackcolumn</a> = <a class="function" onClick="logFunction('quiz_has_feedback')" href="../../_functions/quiz_has_feedback.html" onMouseOver="funcPopup(event,'quiz_has_feedback')">quiz_has_feedback</a>(<a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>) &amp;&amp; <a class="var it6230" onMouseOver="hilite(6230)" onMouseOut="lolite()" onClick="logVariable('alloptions')" href="../../_variables/alloptions.html">$alloptions</a>-&gt;<a onClick="logVariable('overallfeedback')" class="var it45186" onMouseOver="hilite(45186)" onMouseOut="lolite()" href="../../_variables/overallfeedback.html">overallfeedback</a>;
<a name="l159"><span class="linenum"> 159</span></a>  }
<a name="l160"><span class="linenum"> 160</span></a>  
<a name="l161"><span class="linenum"> 161</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('timenow')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/timenow.html">timenow</a> = <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a>;
<a name="l162"><span class="linenum"> 162</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('numattempts')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/numattempts.html">numattempts</a> = <a class="var it6251" onMouseOver="hilite(6251)" onMouseOut="lolite()" onClick="logVariable('numattempts')" href="../../_variables/numattempts.html">$numattempts</a>;
<a name="l163"><span class="linenum"> 163</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('mygrade')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/mygrade.html">mygrade</a> = <a class="var it533" onMouseOver="hilite(533)" onMouseOut="lolite()" onClick="logVariable('mygrade')" href="../../_variables/mygrade.html">$mygrade</a>;
<a name="l164"><span class="linenum"> 164</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('moreattempts')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/moreattempts.html">moreattempts</a> = <a class="var it8540" onMouseOver="hilite(8540)" onMouseOut="lolite()" onClick="logVariable('unfinished')" href="../../_variables/unfinished.html">$unfinished</a> ||
<a name="l165"><span class="linenum"> 165</span></a>          !<a class="var it6226" onMouseOver="hilite(6226)" onMouseOut="lolite()" onClick="logVariable('accessmanager')" href="../../_variables/accessmanager.html">$accessmanager</a>-&gt;<a class="function" onClick="logFunction('is_finished')" href="../../_functions/is_finished.html" onMouseOver="funcPopup(event,'is_finished')">is_finished</a>(<a class="var it6251" onMouseOver="hilite(6251)" onMouseOut="lolite()" onClick="logVariable('numattempts')" href="../../_variables/numattempts.html">$numattempts</a>, <a class="var it6249" onMouseOver="hilite(6249)" onMouseOut="lolite()" onClick="logVariable('lastfinishedattempt')" href="../../_variables/lastfinishedattempt.html">$lastfinishedattempt</a>);
<a name="l166"><span class="linenum"> 166</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('mygradeoverridden')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/mygradeoverridden.html">mygradeoverridden</a> = <a class="var it8543" onMouseOver="hilite(8543)" onMouseOut="lolite()" onClick="logVariable('mygradeoverridden')" href="../../_variables/mygradeoverridden.html">$mygradeoverridden</a>;
<a name="l167"><span class="linenum"> 167</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('gradebookfeedback')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/gradebookfeedback.html">gradebookfeedback</a> = <a class="var it8544" onMouseOver="hilite(8544)" onMouseOut="lolite()" onClick="logVariable('gradebookfeedback')" href="../../_variables/gradebookfeedback.html">$gradebookfeedback</a>;
<a name="l168"><span class="linenum"> 168</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('lastfinishedattempt')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/lastfinishedattempt.html">lastfinishedattempt</a> = <a class="var it6249" onMouseOver="hilite(6249)" onMouseOut="lolite()" onClick="logVariable('lastfinishedattempt')" href="../../_variables/lastfinishedattempt.html">$lastfinishedattempt</a>;
<a name="l169"><span class="linenum"> 169</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('canedit')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/canedit.html">canedit</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/quiz:manage', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l170"><span class="linenum"> 170</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('editurl')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/editurl.html">editurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/quiz/edit.php.html">/mod/quiz/edit.php</a>', array('cmid' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l171"><span class="linenum"> 171</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('backtocourseurl')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/backtocourseurl.html">backtocourseurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../course/view.php.html">/course/view.php</a>', array('id' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l172"><span class="linenum"> 172</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('startattempturl')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/startattempturl.html">startattempturl</a> = <a class="var it745" onMouseOver="hilite(745)" onMouseOut="lolite()" onClick="logVariable('quizobj')" href="../../_variables/quizobj.html">$quizobj</a>-&gt;<a class="function" onClick="logFunction('start_attempt_url')" href="../../_functions/start_attempt_url.html" onMouseOver="funcPopup(event,'start_attempt_url')">start_attempt_url</a>();
<a name="l173"><span class="linenum"> 173</span></a>  
<a name="l174"><span class="linenum"> 174</span></a>  if (<a class="var it6226" onMouseOver="hilite(6226)" onMouseOut="lolite()" onClick="logVariable('accessmanager')" href="../../_variables/accessmanager.html">$accessmanager</a>-&gt;<a class="function" onClick="logFunction('is_preflight_check_required')" href="../../_functions/is_preflight_check_required.html" onMouseOver="funcPopup(event,'is_preflight_check_required')">is_preflight_check_required</a>(<a class="var it8541" onMouseOver="hilite(8541)" onMouseOut="lolite()" onClick="logVariable('unfinishedattemptid')" href="../../_variables/unfinishedattemptid.html">$unfinishedattemptid</a>)) {
<a name="l175"><span class="linenum"> 175</span></a>      <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('preflightcheckform')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/preflightcheckform.html">preflightcheckform</a> = <a class="var it6226" onMouseOver="hilite(6226)" onMouseOut="lolite()" onClick="logVariable('accessmanager')" href="../../_variables/accessmanager.html">$accessmanager</a>-&gt;<a class="function" onClick="logFunction('get_preflight_check_form')" href="../../_functions/get_preflight_check_form.html" onMouseOver="funcPopup(event,'get_preflight_check_form')">get_preflight_check_form</a>(
<a name="l176"><span class="linenum"> 176</span></a>              <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('startattempturl')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/startattempturl.html">startattempturl</a>, <a class="var it8541" onMouseOver="hilite(8541)" onMouseOut="lolite()" onClick="logVariable('unfinishedattemptid')" href="../../_variables/unfinishedattemptid.html">$unfinishedattemptid</a>);
<a name="l177"><span class="linenum"> 177</span></a>  }
<a name="l178"><span class="linenum"> 178</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('popuprequired')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/popuprequired.html">popuprequired</a> = <a class="var it6226" onMouseOver="hilite(6226)" onMouseOut="lolite()" onClick="logVariable('accessmanager')" href="../../_variables/accessmanager.html">$accessmanager</a>-&gt;<a class="function" onClick="logFunction('attempt_must_be_in_popup')" href="../../_functions/attempt_must_be_in_popup.html" onMouseOver="funcPopup(event,'attempt_must_be_in_popup')">attempt_must_be_in_popup</a>();
<a name="l179"><span class="linenum"> 179</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('popupoptions')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/popupoptions.html">popupoptions</a> = <a class="var it6226" onMouseOver="hilite(6226)" onMouseOut="lolite()" onClick="logVariable('accessmanager')" href="../../_variables/accessmanager.html">$accessmanager</a>-&gt;<a class="function" onClick="logFunction('get_popup_options')" href="../../_functions/get_popup_options.html" onMouseOver="funcPopup(event,'get_popup_options')">get_popup_options</a>();
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">// Display information about this quiz.</span>
<a name="l182"><span class="linenum"> 182</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('infomessages')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/infomessages.html">infomessages</a> = <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('accessmanager')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/accessmanager.html">accessmanager</a>-&gt;<a class="function" onClick="logFunction('describe_rules')" href="../../_functions/describe_rules.html" onMouseOver="funcPopup(event,'describe_rules')">describe_rules</a>();
<a name="l183"><span class="linenum"> 183</span></a>  if (<a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('attempts')" class="var it43017" onMouseOver="hilite(43017)" onMouseOut="lolite()" href="../../_variables/attempts.html">attempts</a> != 1) {
<a name="l184"><span class="linenum"> 184</span></a>      <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('infomessages')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/infomessages.html">infomessages</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradingmethod', 'quiz',
<a name="l185"><span class="linenum"> 185</span></a>              <a class="function" onClick="logFunction('quiz_get_grading_option_name')" href="../../_functions/quiz_get_grading_option_name.html" onMouseOver="funcPopup(event,'quiz_get_grading_option_name')">quiz_get_grading_option_name</a>(<a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>-&gt;<a onClick="logVariable('grademethod')" class="var it43017" onMouseOver="hilite(43017)" onMouseOut="lolite()" href="../../_variables/grademethod.html">grademethod</a>));
<a name="l186"><span class="linenum"> 186</span></a>  }
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">// Determine wheter a start attempt button should be displayed.</span>
<a name="l189"><span class="linenum"> 189</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('quizhasquestions')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/quizhasquestions.html">quizhasquestions</a> = <a class="var it745" onMouseOver="hilite(745)" onMouseOut="lolite()" onClick="logVariable('quizobj')" href="../../_variables/quizobj.html">$quizobj</a>-&gt;<a class="function" onClick="logFunction('has_questions')" href="../../_functions/has_questions.html" onMouseOver="funcPopup(event,'has_questions')">has_questions</a>();
<a name="l190"><span class="linenum"> 190</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('preventmessages')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/preventmessages.html">preventmessages</a> = array();
<a name="l191"><span class="linenum"> 191</span></a>  if (!<a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('quizhasquestions')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/quizhasquestions.html">quizhasquestions</a>) {
<a name="l192"><span class="linenum"> 192</span></a>      <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('buttontext')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/buttontext.html">buttontext</a> = '';
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>  } else {
<a name="l195"><span class="linenum"> 195</span></a>      if (<a class="var it8540" onMouseOver="hilite(8540)" onMouseOut="lolite()" onClick="logVariable('unfinished')" href="../../_variables/unfinished.html">$unfinished</a>) {
<a name="l196"><span class="linenum"> 196</span></a>          if (<a class="var it8536" onMouseOver="hilite(8536)" onMouseOut="lolite()" onClick="logVariable('canattempt')" href="../../_variables/canattempt.html">$canattempt</a>) {
<a name="l197"><span class="linenum"> 197</span></a>              <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('buttontext')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/buttontext.html">buttontext</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('continueattemptquiz', 'quiz');
<a name="l198"><span class="linenum"> 198</span></a>          } else if (<a class="var it8538" onMouseOver="hilite(8538)" onMouseOut="lolite()" onClick="logVariable('canpreview')" href="../../_variables/canpreview.html">$canpreview</a>) {
<a name="l199"><span class="linenum"> 199</span></a>              <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('buttontext')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/buttontext.html">buttontext</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('continuepreview', 'quiz');
<a name="l200"><span class="linenum"> 200</span></a>          }
<a name="l201"><span class="linenum"> 201</span></a>  
<a name="l202"><span class="linenum"> 202</span></a>      } else {
<a name="l203"><span class="linenum"> 203</span></a>          if (<a class="var it8536" onMouseOver="hilite(8536)" onMouseOut="lolite()" onClick="logVariable('canattempt')" href="../../_variables/canattempt.html">$canattempt</a>) {
<a name="l204"><span class="linenum"> 204</span></a>              <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('preventmessages')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/preventmessages.html">preventmessages</a> = <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('accessmanager')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/accessmanager.html">accessmanager</a>-&gt;<a class="function" onClick="logFunction('prevent_new_attempt')" href="../../_functions/prevent_new_attempt.html" onMouseOver="funcPopup(event,'prevent_new_attempt')">prevent_new_attempt</a>(
<a name="l205"><span class="linenum"> 205</span></a>                      <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('numattempts')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/numattempts.html">numattempts</a>, <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('lastfinishedattempt')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/lastfinishedattempt.html">lastfinishedattempt</a>);
<a name="l206"><span class="linenum"> 206</span></a>              if (<a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('preventmessages')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/preventmessages.html">preventmessages</a>) {
<a name="l207"><span class="linenum"> 207</span></a>                  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('buttontext')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/buttontext.html">buttontext</a> = '';
<a name="l208"><span class="linenum"> 208</span></a>              } else if (<a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('numattempts')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/numattempts.html">numattempts</a> == 0) {
<a name="l209"><span class="linenum"> 209</span></a>                  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('buttontext')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/buttontext.html">buttontext</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('attemptquiznow', 'quiz');
<a name="l210"><span class="linenum"> 210</span></a>              } else {
<a name="l211"><span class="linenum"> 211</span></a>                  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('buttontext')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/buttontext.html">buttontext</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('reattemptquiz', 'quiz');
<a name="l212"><span class="linenum"> 212</span></a>              }
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>          } else if (<a class="var it8538" onMouseOver="hilite(8538)" onMouseOut="lolite()" onClick="logVariable('canpreview')" href="../../_variables/canpreview.html">$canpreview</a>) {
<a name="l215"><span class="linenum"> 215</span></a>              <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('buttontext')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/buttontext.html">buttontext</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('previewquiznow', 'quiz');
<a name="l216"><span class="linenum"> 216</span></a>          }
<a name="l217"><span class="linenum"> 217</span></a>      }
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">    // If, so far, we think a button should be printed, so check if they will be</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">    // allowed to access it.</span>
<a name="l221"><span class="linenum"> 221</span></a>      if (<a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('buttontext')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/buttontext.html">buttontext</a>) {
<a name="l222"><span class="linenum"> 222</span></a>          if (!<a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('moreattempts')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/moreattempts.html">moreattempts</a>) {
<a name="l223"><span class="linenum"> 223</span></a>              <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('buttontext')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/buttontext.html">buttontext</a> = '';
<a name="l224"><span class="linenum"> 224</span></a>          } else if (<a class="var it8536" onMouseOver="hilite(8536)" onMouseOut="lolite()" onClick="logVariable('canattempt')" href="../../_variables/canattempt.html">$canattempt</a>
<a name="l225"><span class="linenum"> 225</span></a>                  &amp;&amp; <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('preventmessages')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/preventmessages.html">preventmessages</a> = <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('accessmanager')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/accessmanager.html">accessmanager</a>-&gt;<a class="function" onClick="logFunction('prevent_access')" href="../../_functions/prevent_access.html" onMouseOver="funcPopup(event,'prevent_access')">prevent_access</a>()) {
<a name="l226"><span class="linenum"> 226</span></a>              <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('buttontext')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/buttontext.html">buttontext</a> = '';
<a name="l227"><span class="linenum"> 227</span></a>          }
<a name="l228"><span class="linenum"> 228</span></a>      }
<a name="l229"><span class="linenum"> 229</span></a>  }
<a name="l230"><span class="linenum"> 230</span></a>  
<a name="l231"><span class="linenum"> 231</span></a>  <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('showbacktocourse')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/showbacktocourse.html">showbacktocourse</a> = (<a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('buttontext')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/buttontext.html">buttontext</a> === '' &amp;&amp;
<a name="l232"><span class="linenum"> 232</span></a>          <a class="function" onClick="logFunction('course_get_format')" href="../../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>)-&gt;<a class="function" onClick="logFunction('has_view_page')" href="../../_functions/has_view_page.html" onMouseOver="funcPopup(event,'has_view_page')">has_view_page</a>());
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>  if (<a class="function" onClick="logFunction('isguestuser')" href="../../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">    // Guests can't do a quiz, so offer them a choice of logging in or going back.</span>
<a name="l238"><span class="linenum"> 238</span></a>      echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('view_page_guest')" href="../../_functions/view_page_guest.html" onMouseOver="funcPopup(event,'view_page_guest')">view_page_guest</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('infomessages')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/infomessages.html">infomessages</a>);
<a name="l239"><span class="linenum"> 239</span></a>  } else if (!<a class="function" onClick="logFunction('isguestuser')" href="../../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>() &amp;&amp; !(<a class="var it8536" onMouseOver="hilite(8536)" onMouseOut="lolite()" onClick="logVariable('canattempt')" href="../../_variables/canattempt.html">$canattempt</a> || <a class="var it8538" onMouseOver="hilite(8538)" onMouseOut="lolite()" onClick="logVariable('canpreview')" href="../../_variables/canpreview.html">$canpreview</a>
<a name="l240"><span class="linenum"> 240</span></a>            || <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('canreviewmine')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/canreviewmine.html">canreviewmine</a>)) {
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">    // If they are not enrolled in this course in a good enough role, tell them to enrol.</span>
<a name="l242"><span class="linenum"> 242</span></a>      echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('view_page_notenrolled')" href="../../_functions/view_page_notenrolled.html" onMouseOver="funcPopup(event,'view_page_notenrolled')">view_page_notenrolled</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>-&gt;<a onClick="logVariable('infomessages')" class="var it45199" onMouseOver="hilite(45199)" onMouseOut="lolite()" href="../../_variables/infomessages.html">infomessages</a>);
<a name="l243"><span class="linenum"> 243</span></a>  } else {
<a name="l244"><span class="linenum"> 244</span></a>      echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('view_page')" href="../../_functions/view_page.html" onMouseOver="funcPopup(event,'view_page')">view_page</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it538" onMouseOver="hilite(538)" onMouseOut="lolite()" onClick="logVariable('quiz')" href="../../_variables/quiz.html">$quiz</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it8539" onMouseOver="hilite(8539)" onMouseOut="lolite()" onClick="logVariable('viewobj')" href="../../_variables/viewobj.html">$viewobj</a>);
<a name="l245"><span class="linenum"> 245</span></a>  }
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'create_attempt_object': ['create_attempt_object', 'Create a {@link quiz_attempt} for an attempt at this quiz. ', [['mod/quiz','attemptlib.php',122]], 3],
'prevent_access': ['prevent_access', 'Whether the user should be blocked from starting a new attempt or continuing an attempt now. ', [['mod/quiz/accessrule','accessrulebase.php',87],['mod/quiz/accessrule/openclosedate','rule.php',69],['mod/quiz','accessmanager.php',332],['mod/quiz/accessrule/ipaddress','rule.php',48],['mod/quiz/accessrule/safebrowser','rule.php',49]], 35],
'require_capability': ['require_capability', 'Wrapper round the require_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',929],['lib','accesslib.php',762],['backup/util/ui','restore_ui_components.php',157]], 690],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',481]], 1488],
'quiz_get_grading_option_name': ['quiz_get_grading_option_name', '', [['mod/quiz','locallib.php',1178]], 4],
'get_renderer': ['get_renderer', 'Returns instance of page renderer used by this plugin ', [['course/format','lib.php',905],['question/type/multichoice','question.php',156],['question/type/multichoice','question.php',278],['question/behaviour','behaviourbase.php',135],['question/type','questionbase.php',275],['lib','pagelib.php',802],['lib','outputlib.php',1828],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['mod/assign','locallib.php',2987],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49],['grade/grading/form/guide','lib.php',492]], 452],
'set_heading': ['set_heading', 'Sets the heading to use for the page. This is normally used as the main heading at the top of the content. ', [['lib','pagelib.php',1170]], 426],
'quiz_get_best_grade': ['quiz_get_best_grade', 'Get the best current grade for a particular user in a quiz. ', [['mod/quiz','lib.php',393]], 2],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'quiz_view': ['quiz_view', 'Mark the activity completed (if required) and trigger the course_module_viewed event. ', [['mod/quiz','locallib.php',2146]], 3],
'is_preflight_check_required': ['is_preflight_check_required', '', [['mod/quiz/accessrule','accessrulebase.php',103],['mod/quiz/accessrule/timelimit','rule.php',68],['mod/quiz','accessmanager.php',354],['mod/quiz/accessrule/password','rule.php',52]], 10],
'start_attempt_url': ['start_attempt_url', '', [['mod/quiz','attemptlib.php',347],['mod/quiz','attemptlib.php',1362]], 12],
'quiz_get_user_attempt_unfinished': ['quiz_get_user_attempt_unfinished', 'Returns an unfinished attempt (if there is one) for the given user on the given quiz. This function does not return preview attempts. ', [['mod/quiz','locallib.php',378]], 2],
'describe_rules': ['describe_rules', 'Provide a description of the rules that apply to this quiz, such as is shown at the top of the quiz view page. Note that not all rules consider themselves important enough to output a description. ', [['mod/quiz','accessmanager.php',296]], 2],
'view_page_guest': ['view_page_guest', 'Outputs an error message for any guests accessing the quiz ', [['mod/quiz','renderer.php',878]], 1],
'view_page_notenrolled': ['view_page_notenrolled', 'Outputs and error message for anyone who is not enrolle don the course ', [['mod/quiz','renderer.php',897]], 1],
'get_quiz': ['get_quiz', '', [['mod/quiz','attemptlib.php',190],['mod/quiz','attemptlib.php',708],['mod/quiz/classes','structure.php',252]], 104],
'quiz_has_grades': ['quiz_has_grades', 'Is this a graded quiz? If this method returns true, you can assume that $quiz->grade and $quiz->sumgrades are non-zero (for example, if you want to divide by them). ', [['mod/quiz','lib.php',414]], 11],
'quiz_get_combined_reviewoptions': ['quiz_get_combined_reviewoptions', 'Combines the review options from a number of different quiz attempts. Returns an array of two ojects, so the suggested way of calling this funciton is: list($someoptions, $alloptions) = quiz_get_combined_reviewoptions(...) ', [['mod/quiz','locallib.php',1429]], 3],
'has_view_page': ['has_view_page', 'Returns true if the course has a front page. ', [['course/format','lib.php',265],['course/format/singleactivity','lib.php',472]], 6],
'footer': ['footer', 'This method is used to render the page footer. It is automatically called by AddPage() and could be overwritten in your own inherited class. ', [['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1034],['lib','outputrenderers.php',4427],['lib','outputrenderers.php',4546],['mod/lesson','renderer.php',78]], 810],
'get_coursemodule_from_id': ['get_coursemodule_from_id', 'Given an id of a course module, finds the coursemodule description ', [['lib','datalib.php',1238]], 212],
'isguestuser': ['isguestuser', 'Determines if a user is logged in as real guest user with username \'guest\'. ', [['lib','accesslib.php',1923]], 260],
'is_finished': ['is_finished', '', [['mod/quiz/accessrule/numattempts','rule.php',60],['mod/quiz/accessrule','accessrulebase.php',167],['mod/quiz','attemptlib.php',822],['question/engine','states.php',129],['question/engine','states.php',293],['question/engine','states.php',301],['question/engine','states.php',312],['question/engine','states.php',323],['question/engine','states.php',334],['mod/quiz/accessrule/openclosedate','rule.php',95],['mod/quiz','accessmanager.php',405],['mod/quiz/accessrule/delaybetweenattempts','rule.php',95]], 89],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2449]], 636],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1300]], 441],
'quiz_get_user_attempts': ['quiz_get_user_attempts', '', [['mod/quiz','lib.php',554]], 29],
'grade_get_grades': ['grade_get_grades', 'Returns grading information for given activity, optionally with user grades Manual, course or category items can not be queried. ', [['lib','gradelib.php',408]], 53],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'set_title': ['set_title', 'Sets the title for the node ', [['lib','outputcomponents.php',2820],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_basiclti.php',57],['lib','pagelib.php',1157],['blocks/rss_client/classes/output','channel_image.php',110],['blocks/rss_client/classes/output','item.php',182],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['backup/cc/cc_lib','cc_page.php',38],['lib/classes','chart_base.php',222],['blocks/rss_client/classes/output','feed.php',113],['backup/cc/cc_lib','cc_metadata.php',225],['mod/wiki','pagelib.php',215],['backup/cc/cc_lib','cc_forum.php',39]], 460],
'get_popup_options': ['get_popup_options', '', [['mod/quiz/accessrule','accessrulebase.php',219],['mod/quiz','accessmanager.php',489],['mod/quiz/accessrule/securewindow','rule.php',68]], 3],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',609]], 2210],
'attempt_must_be_in_popup': ['attempt_must_be_in_popup', '', [['mod/quiz/accessrule','accessrulebase.php',211],['mod/quiz','accessmanager.php',476],['mod/quiz/accessrule/securewindow','rule.php',64]], 5],
'set_url': ['set_url', 'Convenience method handling moodle_urls. ', [['competency/classes','evidence.php',151],['lib','outputcomponents.php',2828],['backup/cc/cc_lib','cc_weblink.php',50],['lib','pagelib.php',1227],['blocks/rss_client/classes/output','channel_image.php',89],['backup/util/ui','restore_ui_components.php',141],['mod/wiki','pagelib.php',245],['mod/wiki','pagelib.php',333],['mod/wiki','pagelib.php',425],['mod/wiki','pagelib.php',696],['mod/wiki','pagelib.php',721],['mod/wiki','pagelib.php',835],['mod/wiki','pagelib.php',879],['mod/wiki','pagelib.php',1008],['mod/wiki','pagelib.php',1112],['mod/wiki','pagelib.php',1219],['mod/wiki','pagelib.php',1462],['mod/wiki','pagelib.php',1864],['mod/wiki','pagelib.php',1932],['mod/wiki','pagelib.php',2104],['mod/wiki','pagelib.php',2165],['mod/wiki','pagelib.php',2221],['mod/wiki','pagelib.php',2286],['mod/wiki','pagelib.php',2334],['mod/wiki','pagelib.php',2382],['mod/wiki','pagelib.php',2486]], 596],
'view_page': ['view_page', 'Print a sub page in this plugin ', [['mod/assign/feedback/offline','locallib.php',353],['mod/page/classes','external.php',56],['mod/wiki/classes','external.php',262],['mod/assign','assignmentplugin.php',613],['mod/assign/feedback/file','locallib.php',647],['mod/quiz','renderer.php',762]], 10],
'quiz_rescale_grade': ['quiz_rescale_grade', 'Convert the raw grade stored in $attempt into a grade out of the maximum grade for this quiz. ', [['mod/quiz','locallib.php',520]], 22],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'quiz_has_feedback': ['quiz_has_feedback', '', [['mod/quiz','locallib.php',603]], 4],
'has_questions': ['has_questions', '', [['mod/quiz','attemptlib.php',238],['mod/quiz/classes','structure.php',85]], 6],
'handle_if_time_expired': ['handle_if_time_expired', 'Check this attempt, to see if there are any state transitions that should happen automatically.  This function will update the attempt checkstatetime. ', [['mod/quiz','attemptlib.php',1737]], 6],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'prevent_new_attempt': ['prevent_new_attempt', '', [['mod/quiz/accessrule/numattempts','rule.php',53],['mod/quiz/accessrule','accessrulebase.php',76],['mod/quiz','accessmanager.php',312],['mod/quiz/accessrule/delaybetweenattempts','rule.php',48]], 95],
'course_get_format': ['course_get_format', 'Returns an instance of format class (extending format_base) for given course ', [['course/format','lib.php',27]], 99],
'get_preflight_check_form': ['get_preflight_check_form', 'Build the form required to do the pre-flight checks. ', [['mod/quiz','accessmanager.php',363]], 2],
'end': ['end', '', [], 433],
'time': ['time', '', [], 1959],
'count': ['count', '', [], 4095],
'header': ['header', '', [], 1355]};
CLASS_DATA={
'quiz_attempt': ['quiz_attempt', 'This class extends the quiz class to hold data about the state of a particular attempt, in addition to the data about the quiz. ', [['mod/quiz','attemptlib.php',490]], 167],
'quiz_access_manager': ['quiz_access_manager', 'This class keeps track of the various access rules that apply to a particular quiz, with convinient methods for seeing whether access is allowed. ', [['mod/quiz','accessmanager.php',29]], 16],
'mod_quiz_view_object': ['mod_quiz_view_object', '', [['mod/quiz','renderer.php',1285]], 1],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'question_display_options': ['question_display_options', 'This class contains all the options that controls how a question is displayed. ', [['question/engine','lib.php',463]], 84],
'quiz': ['quiz', '', [['mod/quiz/classes/plugininfo','quiz.php',31],['mod/quiz','attemptlib.php',50]], 54]};
CONST_DATA={
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
