<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of locallib.php</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/quiz';
filename='locallib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/mod/quiz/</a> -> <a href="locallib.php.source.html">locallib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="locallib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../../_stats.html">Project Stats</a>]</p>
<p><b>Library of functions used by the quiz module. This contains functions that are called from within the quiz module only Functions that are also called by core Moodle are in {@link lib.php} This script also loads the code in {@link questionlib.php} which holds the module-indpendent code for handling questions and which in turn initialises all the questiontype classes.</b></p>
<table>
<tr><td align="right">Copyright: </td><td>1999 onwards Martin Dougiamas and others {@link http://moodle.com}</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>2291 lines (86 kb)</td></tr>
<tr><td align="right">Included or required: </td><td><a href="locallib.php.xref.html">3 times</a></td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>33 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 2 classes</h3>
<div class="inset">
<p><b>mod_quiz_display_options::</b> (2 methods):<br>
&nbsp;&nbsp;<a href="#make_from_quiz">make_from_quiz</a>()<br>
&nbsp;&nbsp;<a href="#extract">extract</a>()<br>
</p>
<p><b>qubaids_for_quiz::</b> (9 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#quiz_question_tostring">quiz_question_tostring</a>()<br>
&nbsp;&nbsp;<a href="#quiz_require_question_use">quiz_require_question_use</a>()<br>
&nbsp;&nbsp;<a href="#quiz_has_question_use">quiz_has_question_use</a>()<br>
&nbsp;&nbsp;<a href="#quiz_add_quiz_question">quiz_add_quiz_question</a>()<br>
&nbsp;&nbsp;<a href="#quiz_add_random_questions">quiz_add_random_questions</a>()<br>
&nbsp;&nbsp;<a href="#quiz_view">quiz_view</a>()<br>
&nbsp;&nbsp;<a href="#quiz_validate_new_attempt">quiz_validate_new_attempt</a>()<br>
&nbsp;&nbsp;<a href="#quiz_prepare_and_start_new_attempt">quiz_prepare_and_start_new_attempt</a>()<br>
</p>
</div>
<h3>Defines 9 functions</h3>
<div class="inset">
&nbsp;&nbsp;<a href="#quiz_create_attempt">quiz_create_attempt</a>()<br>
&nbsp;&nbsp;<a href="#quiz_start_new_attempt">quiz_start_new_attempt</a>()<br>
&nbsp;&nbsp;<a href="#quiz_start_attempt_built_on_last">quiz_start_attempt_built_on_last</a>()<br>
&nbsp;&nbsp;<a href="#quiz_attempt_save_started">quiz_attempt_save_started</a>()<br>
&nbsp;&nbsp;<a href="#quiz_get_user_attempt_unfinished">quiz_get_user_attempt_unfinished</a>()<br>
&nbsp;&nbsp;<a href="#quiz_delete_attempt">quiz_delete_attempt</a>()<br>
&nbsp;&nbsp;<a href="#quiz_delete_previews">quiz_delete_previews</a>()<br>
&nbsp;&nbsp;<a href="#quiz_has_attempts">quiz_has_attempts</a>()<br>
&nbsp;&nbsp;<a href="#quiz_repaginate_questions">quiz_repaginate_questions</a>()<br>
&nbsp;&nbsp;<a href="#quiz_rescale_grade">quiz_rescale_grade</a>()<br>
&nbsp;&nbsp;<a href="#quiz_feedback_record_for_grade">quiz_feedback_record_for_grade</a>()<br>
&nbsp;&nbsp;<a href="#quiz_feedback_for_grade">quiz_feedback_for_grade</a>()<br>
&nbsp;&nbsp;<a href="#quiz_has_feedback">quiz_has_feedback</a>()<br>
&nbsp;&nbsp;<a href="#quiz_update_sumgrades">quiz_update_sumgrades</a>()<br>
&nbsp;&nbsp;<a href="#quiz_update_all_attempt_sumgrades">quiz_update_all_attempt_sumgrades</a>()<br>
&nbsp;&nbsp;<a href="#quiz_set_grade">quiz_set_grade</a>()<br>
&nbsp;&nbsp;<a href="#quiz_save_best_grade">quiz_save_best_grade</a>()<br>
&nbsp;&nbsp;<a href="#quiz_calculate_best_grade">quiz_calculate_best_grade</a>()<br>
&nbsp;&nbsp;<a href="#quiz_update_all_final_grades">quiz_update_all_final_grades</a>()<br>
&nbsp;&nbsp;<a href="#quiz_update_open_attempts">quiz_update_open_attempts</a>()<br>
&nbsp;&nbsp;<a href="#quiz_get_attempt_usertime_sql">quiz_get_attempt_usertime_sql</a>()<br>
&nbsp;&nbsp;<a href="#quiz_calculate_best_attempt">quiz_calculate_best_attempt</a>()<br>
&nbsp;&nbsp;<a href="#quiz_get_grading_options">quiz_get_grading_options</a>()<br>
&nbsp;&nbsp;<a href="#quiz_get_grading_option_name">quiz_get_grading_option_name</a>()<br>
&nbsp;&nbsp;<a href="#quiz_get_overdue_handling_options">quiz_get_overdue_handling_options</a>()<br>
&nbsp;&nbsp;<a href="#quiz_get_user_image_options">quiz_get_user_image_options</a>()<br>
&nbsp;&nbsp;<a href="#quiz_questions_per_page_options">quiz_questions_per_page_options</a>()<br>
&nbsp;&nbsp;<a href="#quiz_attempt_state_name">quiz_attempt_state_name</a>()<br>
&nbsp;&nbsp;<a href="#quiz_question_action_icons">quiz_question_action_icons</a>()<br>
&nbsp;&nbsp;<a href="#quiz_question_edit_button">quiz_question_edit_button</a>()<br>
&nbsp;&nbsp;<a href="#quiz_question_preview_url">quiz_question_preview_url</a>()<br>
&nbsp;&nbsp;<a href="#quiz_question_preview_button">quiz_question_preview_button</a>()<br>
&nbsp;&nbsp;<a href="#quiz_get_flag_option">quiz_get_flag_option</a>()<br>
&nbsp;&nbsp;<a href="#quiz_attempt_state">quiz_attempt_state</a>()<br>
&nbsp;&nbsp;<a href="#quiz_get_review_options">quiz_get_review_options</a>()<br>
&nbsp;&nbsp;<a href="#quiz_get_combined_reviewoptions">quiz_get_combined_reviewoptions</a>()<br>
&nbsp;&nbsp;<a href="#quiz_send_confirmation">quiz_send_confirmation</a>()<br>
&nbsp;&nbsp;<a href="#quiz_send_notification">quiz_send_notification</a>()<br>
&nbsp;&nbsp;<a href="#quiz_send_notification_messages">quiz_send_notification_messages</a>()<br>
&nbsp;&nbsp;<a href="#quiz_send_overdue_message">quiz_send_overdue_message</a>()<br>
&nbsp;&nbsp;<a href="#quiz_attempt_submitted_handler">quiz_attempt_submitted_handler</a>()<br>
&nbsp;&nbsp;<a href="#quiz_groups_member_added_handler">quiz_groups_member_added_handler</a>()<br>
&nbsp;&nbsp;<a href="#quiz_groups_member_removed_handler">quiz_groups_member_removed_handler</a>()<br>
&nbsp;&nbsp;<a href="#quiz_groups_group_deleted_handler">quiz_groups_group_deleted_handler</a>()<br>
&nbsp;&nbsp;<a href="#quiz_process_group_deleted_in_course">quiz_process_group_deleted_in_course</a>()<br>
&nbsp;&nbsp;<a href="#quiz_groups_members_removed_handler">quiz_groups_members_removed_handler</a>()<br>
&nbsp;&nbsp;<a href="#quiz_get_js_module">quiz_get_js_module</a>()<br>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="mod_quiz_display_options"><b>mod_quiz_display_options</b></a>&nbsp;&nbsp;- <a href="../../_classes/mod_quiz_display_options.html"><small>X-Ref</small></a>
</p>
<b>An extension of question_display_options that includes the extra options used<BR>
by the quiz.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="make_from_quiz" onClick="logFunction('make_from_quiz', 'locallib.php.source.html#l1873')" href="locallib.php.source.html#l1873">make_from_quiz</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/when.html">$when</a>)&nbsp;&nbsp;
<a href="../../_functions/make_from_quiz.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set up the various options from the quiz settings, and a time constant.<BR>
</b><BR><b>param:</b> object $quiz the quiz settings.<br>
<b>param:</b> int $one of the {@link DURING}, {@link IMMEDIATELY_AFTER},<br>
<b>return:</b> mod_quiz_display_options set up appropriately.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="extract" onClick="logFunction('extract', 'locallib.php.source.html#l1904')" href="locallib.php.source.html#l1904">extract</a>(<a href="../../_variables/bitmask.html">$bitmask</a>, <a href="../../_variables/bit.html">$bit</a>,<a href="../../_variables/whenset.html">$whenset</a> = self::VISIBLE, <a href="../../_variables/whennotset.html">$whennotset</a> = self::HIDDEN)&nbsp;&nbsp;
<a href="../../_functions/extract.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><i>No description</i></td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="qubaids_for_quiz"><b>qubaids_for_quiz</b></a>&nbsp;&nbsp;- <a href="../../_classes/qubaids_for_quiz.html"><small>X-Ref</small></a>
</p>
<b>A {@link qubaid_condition} for finding all the question usages belonging to<BR>
a particular quiz.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'locallib.php.source.html#l1923')" href="locallib.php.source.html#l1923">__construct</a>(<a href="../../_variables/quizid.html">$quizid</a>, <a href="../../_variables/includepreviews.html">$includepreviews</a> = true, <a href="../../_variables/onlyfinished.html">$onlyfinished</a> = false)&nbsp;&nbsp;
<a href="../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><i>No description</i></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_question_tostring" onClick="logFunction('quiz_question_tostring', 'locallib.php.source.html#l1940')" href="locallib.php.source.html#l1940">quiz_question_tostring</a>(<a href="../../_variables/question.html">$question</a>, <a href="../../_variables/showicon.html">$showicon</a> = false, <a href="../../_variables/showquestiontext.html">$showquestiontext</a> = true)&nbsp;&nbsp;
<a href="../../_functions/quiz_question_tostring.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates a textual representation of a question for display.<BR>
</b><BR><b>param:</b> object $question A question object from the database questions table<br>
<b>param:</b> bool $showicon If true, show the question's icon with the question. False by default.<br>
<b>param:</b> bool $showquestiontext If true (default), show question text after question name.<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_require_question_use" onClick="logFunction('quiz_require_question_use', 'locallib.php.source.html#l1970')" href="locallib.php.source.html#l1970">quiz_require_question_use</a>(<a href="../../_variables/questionid.html">$questionid</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_require_question_use.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Verify that the question exists, and the user has permission to use it.<BR>
Does not return. Throws an exception if the question cannot be used.<BR>
</b><BR><b>param:</b> int $questionid The id of the question.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_has_question_use" onClick="logFunction('quiz_has_question_use', 'locallib.php.source.html#l1981')" href="locallib.php.source.html#l1981">quiz_has_question_use</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/slot.html">$slot</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_has_question_use.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Verify that the question exists, and the user has permission to use it.<BR>
</b><BR><b>param:</b> object $quiz the quiz settings.<br>
<b>param:</b> int $slot which question in the quiz to test.<br>
<b>return:</b> bool whether the user can use this question.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_add_quiz_question" onClick="logFunction('quiz_add_quiz_question', 'locallib.php.source.html#l2000')" href="locallib.php.source.html#l2000">quiz_add_quiz_question</a>(<a href="../../_variables/questionid.html">$questionid</a>, <a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/page.html">$page</a> = 0, <a href="../../_variables/maxmark.html">$maxmark</a> = null)&nbsp;&nbsp;
<a href="../../_functions/quiz_add_quiz_question.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Add a question to a quiz<BR>
</b><BR>Adds a question to a quiz by updating $quiz as well as the<BR>
quiz and quiz_slots tables. It also adds a page break if required.<BR>
<b>param:</b> int $questionid The id of the question to be added<br>
<b>param:</b> object $quiz The extended quiz object as used by edit.php<br>
<b>param:</b> int $page Which page in quiz to add the question on. If 0 (default),<br>
<b>param:</b> float $maxmark The maximum mark to set for this question. (Optional,<br>
<b>return:</b> bool false if the question was already in the quiz<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_add_random_questions" onClick="logFunction('quiz_add_random_questions', 'locallib.php.source.html#l2085')" href="locallib.php.source.html#l2085">quiz_add_random_questions</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/addonpage.html">$addonpage</a>, <a href="../../_variables/categoryid.html">$categoryid</a>, <a href="../../_variables/number.html">$number</a>,<a href="../../_variables/includesubcategories.html">$includesubcategories</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_add_random_questions.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Add a random question to the quiz at a given point.<BR>
</b><BR><b>param:</b> object $quiz the quiz settings.<br>
<b>param:</b> int $addonpage the page on which to add the question.<br>
<b>param:</b> int $categoryid the question category to add the question from.<br>
<b>param:</b> int $number the number of random questions to add.<br>
<b>param:</b> bool $includesubcategories whether to include questoins from subcategories.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_view" onClick="logFunction('quiz_view', 'locallib.php.source.html#l2146')" href="locallib.php.source.html#l2146">quiz_view</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/course.html">$course</a>, <a href="../../_variables/cm.html">$cm</a>, <a href="../../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_view.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Mark the activity completed (if required) and trigger the course_module_viewed event.<BR>
</b><BR><b>param:</b> stdClass $quiz&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quiz object<br>
<b>param:</b> stdClass $course&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;course object<br>
<b>param:</b> stdClass $cm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;course module object<br>
<b>param:</b> stdClass $context&nbsp;&nbsp;&nbsp;&nbsp;context object<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_validate_new_attempt" onClick="logFunction('quiz_validate_new_attempt', 'locallib.php.source.html#l2171')" href="locallib.php.source.html#l2171">quiz_validate_new_attempt</a>(quiz <a href="../../_variables/quizobj.html">$quizobj</a>, quiz_access_manager <a href="../../_variables/accessmanager.html">$accessmanager</a>, <a href="../../_variables/forcenew.html">$forcenew</a>, <a href="../../_variables/page.html">$page</a>, <a href="../../_variables/redirect.html">$redirect</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_validate_new_attempt.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Validate permissions for creating a new attempt and start a new preview attempt if required.<BR>
</b><BR><b>param:</b> quiz $quizobj quiz object<br>
<b>param:</b> quiz_access_manager $accessmanager quiz access manager<br>
<b>param:</b> bool $forcenew whether was required to start a new preview attempt<br>
<b>param:</b> int $page page to jump to in the attempt<br>
<b>param:</b> bool $redirect whether to redirect or throw exceptions (for web or ws usage)<br>
<b>return:</b> array an array containing the attempt information, access error messages and the page to jump to in the attempt<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_prepare_and_start_new_attempt" onClick="logFunction('quiz_prepare_and_start_new_attempt', 'locallib.php.source.html#l2256')" href="locallib.php.source.html#l2256">quiz_prepare_and_start_new_attempt</a>(quiz <a href="../../_variables/quizobj.html">$quizobj</a>, <a href="../../_variables/attemptnumber.html">$attemptnumber</a>, <a href="../../_variables/lastattempt.html">$lastattempt</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_prepare_and_start_new_attempt.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Prepare and start a new attempt deleting the previous preview attempts.<BR>
</b><BR><b>param:</b> quiz $quizobj quiz object<br>
<b>param:</b> int $attemptnumber the attempt number<br>
<b>param:</b> object $lastattempt last attempt object<br>
<b>return:</b> object the new attempt<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classtitle"><a name="functions"><b>Functions</b></a></div>
<div class="details-classinfo">
Functions that are not part of a class:<br><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_create_attempt" onClick="logFunction('quiz_create_attempt', 'locallib.php.source.html#l76')" href="locallib.php.source.html#l76">quiz_create_attempt</a>(quiz <a href="../../_variables/quizobj.html">$quizobj</a>, <a href="../../_variables/attemptnumber.html">$attemptnumber</a>, <a href="../../_variables/lastattempt.html">$lastattempt</a>, <a href="../../_variables/timenow.html">$timenow</a>, <a href="../../_variables/ispreview.html">$ispreview</a> = false, <a href="../../_variables/userid.html">$userid</a> = null)&nbsp;&nbsp;
<a href="../../_functions/quiz_create_attempt.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates an object to represent a new attempt at a quiz<BR>
</b><BR>Creates an attempt object to represent an attempt at the quiz by the current<BR>
user starting at the current time. The -&gt;id field is not set. The object is<BR>
NOT written to the database.<BR>
<BR>
<b>param:</b> object $quizobj the quiz object to create an attempt for.<br>
<b>param:</b> int $attemptnumber the sequence number for the attempt.<br>
<b>param:</b> object $lastattempt the previous attempt by this user, if any. Only needed<br>
<b>param:</b> int $timenow the time the attempt was started at.<br>
<b>param:</b> bool $ispreview whether this new attempt is a preview.<br>
<b>param:</b> int $userid&nbsp;&nbsp;the id of the user attempting this quiz.<br>
<b>return:</b> object the newly created attempt object.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_start_new_attempt" onClick="logFunction('quiz_start_new_attempt', 'locallib.php.source.html#l144')" href="locallib.php.source.html#l144">quiz_start_new_attempt</a>(<a href="../../_variables/quizobj.html">$quizobj</a>, <a href="../../_variables/quba.html">$quba</a>, <a href="../../_variables/attempt.html">$attempt</a>, <a href="../../_variables/attemptnumber.html">$attemptnumber</a>, <a href="../../_variables/timenow.html">$timenow</a>,<a href="../../_variables/questionids.html">$questionids</a> = array()&nbsp;&nbsp;
<a href="../../_functions/quiz_start_new_attempt.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Start a normal, new, quiz attempt.<BR>
</b><BR><b>param:</b> quiz&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$quizobj&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the quiz object to start an attempt for.<br>
<b>param:</b> question_usage_by_activity $quba<br>
<b>param:</b> object&nbsp;&nbsp;&nbsp;&nbsp;$attempt<br>
<b>param:</b> integer&nbsp;&nbsp;&nbsp;$attemptnumber&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;starting from 1<br>
<b>param:</b> integer&nbsp;&nbsp;&nbsp;$timenow&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the attempt start time<br>
<b>param:</b> array&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$questionids&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slot number =&gt; question id. Used for random questions, to force the choice<br>
<b>param:</b> array&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$forcedvariantsbyslot slot number =&gt; variant. Used for questions with variants,<br>
<b>return:</b> object&nbsp;&nbsp;&nbsp;modified attempt object<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_start_attempt_built_on_last" onClick="logFunction('quiz_start_attempt_built_on_last', 'locallib.php.source.html#l303')" href="locallib.php.source.html#l303">quiz_start_attempt_built_on_last</a>(<a href="../../_variables/quba.html">$quba</a>, <a href="../../_variables/attempt.html">$attempt</a>, <a href="../../_variables/lastattempt.html">$lastattempt</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_start_attempt_built_on_last.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Start a subsequent new attempt, in each attempt builds on last mode.<BR>
</b><BR><b>param:</b> question_usage_by_activity&nbsp;&nbsp;&nbsp;&nbsp;$quba&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this question usage<br>
<b>param:</b> object&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$attempt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this attempt<br>
<b>param:</b> object&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$lastattempt&nbsp;&nbsp;last attempt<br>
<b>return:</b> object&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modified attempt object<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_attempt_save_started" onClick="logFunction('quiz_attempt_save_started', 'locallib.php.source.html#l337')" href="locallib.php.source.html#l337">quiz_attempt_save_started</a>(<a href="../../_variables/quizobj.html">$quizobj</a>, <a href="../../_variables/quba.html">$quba</a>, <a href="../../_variables/attempt.html">$attempt</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_attempt_save_started.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>The save started question usage and quiz attempt in db and log the started attempt.<BR>
</b><BR><b>param:</b> quiz&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$quizobj<br>
<b>param:</b> question_usage_by_activity $quba<br>
<b>param:</b> object&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$attempt<br>
<b>return:</b> object&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attempt object with uniqueid and id set.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_get_user_attempt_unfinished" onClick="logFunction('quiz_get_user_attempt_unfinished', 'locallib.php.source.html#l378')" href="locallib.php.source.html#l378">quiz_get_user_attempt_unfinished</a>(<a href="../../_variables/quizid.html">$quizid</a>, <a href="../../_variables/userid.html">$userid</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_get_user_attempt_unfinished.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an unfinished attempt (if there is one) for the given<BR>
user on the given quiz. This function does not return preview attempts.<BR>
</b><BR><b>param:</b> int $quizid the id of the quiz.<br>
<b>param:</b> int $userid the id of the user.<br>
<b>return:</b> mixed the unfinished attempt if there is one, false if not.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_delete_attempt" onClick="logFunction('quiz_delete_attempt', 'locallib.php.source.html#l396')" href="locallib.php.source.html#l396">quiz_delete_attempt</a>(<a href="../../_variables/attempt.html">$attempt</a>, <a href="../../_variables/quiz.html">$quiz</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_delete_attempt.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Delete a quiz attempt.<BR>
</b><BR><b>param:</b> mixed $attempt an integer attempt id or an attempt object<br>
<b>param:</b> object $quiz the quiz object.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_delete_previews" onClick="logFunction('quiz_delete_previews', 'locallib.php.source.html#l452')" href="locallib.php.source.html#l452">quiz_delete_previews</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/userid.html">$userid</a> = null)&nbsp;&nbsp;
<a href="../../_functions/quiz_delete_previews.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Delete all the preview attempts at a quiz, or possibly all the attempts belonging<BR>
to one user.<BR>
</b><BR><b>param:</b> object $quiz the quiz object.<br>
<b>param:</b> int $userid (optional) if given, only delete the previews belonging to this user.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_has_attempts" onClick="logFunction('quiz_has_attempts', 'locallib.php.source.html#l474')" href="locallib.php.source.html#l474">quiz_has_attempts</a>(<a href="../../_variables/quizid.html">$quizid</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_has_attempts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> int $quizid The quiz id.<br>
<b>return:</b> bool whether this quiz has any (non-preview) attempts.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_repaginate_questions" onClick="logFunction('quiz_repaginate_questions', 'locallib.php.source.html#l481')" href="locallib.php.source.html#l481">quiz_repaginate_questions</a>(<a href="../../_variables/quizid.html">$quizid</a>, <a href="../../_variables/slotsperpage.html">$slotsperpage</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_repaginate_questions.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Repaginate the questions in a quiz<BR>
</b><BR><b>param:</b> int $quizid the id of the quiz to repaginate.<br>
<b>param:</b> int $slotsperpage number of items to put on each page. 0 means unlimited.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_rescale_grade" onClick="logFunction('quiz_rescale_grade', 'locallib.php.source.html#l520')" href="locallib.php.source.html#l520">quiz_rescale_grade</a>(<a href="../../_variables/rawgrade.html">$rawgrade</a>, <a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/format.html">$format</a> = true)&nbsp;&nbsp;
<a href="../../_functions/quiz_rescale_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Convert the raw grade stored in $attempt into a grade out of the maximum<BR>
grade for this quiz.<BR>
</b><BR><b>param:</b> float $rawgrade the unadjusted grade, fof example $attempt-&gt;sumgrades<br>
<b>param:</b> object $quiz the quiz object. Only the fields grade, sumgrades and decimalpoints are used.<br>
<b>param:</b> bool|string $format whether to format the results for display<br>
<b>return:</b> float|string the rescaled grade, or null/the lang string 'notyetgraded'<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_feedback_record_for_grade" onClick="logFunction('quiz_feedback_record_for_grade', 'locallib.php.source.html#l547')" href="locallib.php.source.html#l547">quiz_feedback_record_for_grade</a>(<a href="../../_variables/grade.html">$grade</a>, <a href="../../_variables/quiz.html">$quiz</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_feedback_record_for_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the feedback object for this grade on this quiz.<BR>
</b><BR><b>param:</b> float $grade a grade on this quiz.<br>
<b>param:</b> object $quiz the quiz settings.<br>
<b>return:</b> false|stdClass the record object or false if there is not feedback for the given grade<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_feedback_for_grade" onClick="logFunction('quiz_feedback_for_grade', 'locallib.php.source.html#l568')" href="locallib.php.source.html#l568">quiz_feedback_for_grade</a>(<a href="../../_variables/grade.html">$grade</a>, <a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_feedback_for_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the feedback text that should be show to a student who<BR>
got this grade on this quiz. The feedback is processed ready for diplay.<BR>
</b><BR><b>param:</b> float $grade a grade on this quiz.<br>
<b>param:</b> object $quiz the quiz settings.<br>
<b>param:</b> object $context the quiz context.<br>
<b>return:</b> string the comment that corresponds to this grade (empty string if there is not one.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_has_feedback" onClick="logFunction('quiz_has_feedback', 'locallib.php.source.html#l603')" href="locallib.php.source.html#l603">quiz_has_feedback</a>(<a href="../../_variables/quiz.html">$quiz</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_has_feedback.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> object $quiz the quiz database row.<br>
<b>return:</b> bool Whether this quiz has any non-blank feedback text.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_update_sumgrades" onClick="logFunction('quiz_update_sumgrades', 'locallib.php.source.html#l615')" href="locallib.php.source.html#l615">quiz_update_sumgrades</a>(<a href="../../_variables/quiz.html">$quiz</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_update_sumgrades.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Update the sumgrades field of the quiz. This needs to be called whenever<BR>
the grading structure of the quiz is changed. For example if a question is<BR>
added or removed, or a question weight is changed.<BR>
</b><BR>You should call {@link quiz_delete_previews()} before you call this function.<BR>
<BR>
<b>param:</b> object $quiz a quiz.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_update_all_attempt_sumgrades" onClick="logFunction('quiz_update_all_attempt_sumgrades', 'locallib.php.source.html#l645')" href="locallib.php.source.html#l645">quiz_update_all_attempt_sumgrades</a>(<a href="../../_variables/quiz.html">$quiz</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_update_all_attempt_sumgrades.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Update the sumgrades field of the attempts at a quiz.<BR>
</b><BR><b>param:</b> object $quiz a quiz.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_set_grade" onClick="logFunction('quiz_set_grade', 'locallib.php.source.html#l666')" href="locallib.php.source.html#l666">quiz_set_grade</a>(<a href="../../_variables/newgrade.html">$newgrade</a>, <a href="../../_variables/quiz.html">$quiz</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_set_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>The quiz grade is the maximum that student's results are marked out of. When it<BR>
changes, the corresponding data in quiz_grades and quiz_feedback needs to be<BR>
rescaled. After calling this function, you probably need to call<BR>
quiz_update_all_attempt_sumgrades, quiz_update_all_final_grades and<BR>
quiz_update_grades.<BR>
</b><BR><b>param:</b> float $newgrade the new maximum grade for the quiz.<br>
<b>param:</b> object $quiz the quiz we are updating. Passed by reference so its<br>
<b>return:</b> bool indicating success or failure.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_save_best_grade" onClick="logFunction('quiz_save_best_grade', 'locallib.php.source.html#l728')" href="locallib.php.source.html#l728">quiz_save_best_grade</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/userid.html">$userid</a> = null, <a href="../../_variables/attempts.html">$attempts</a> = array()&nbsp;&nbsp;
<a href="../../_functions/quiz_save_best_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Save the overall grade for a user at a quiz in the quiz_grades table<BR>
</b><BR><b>param:</b> object $quiz The quiz for which the best grade is to be calculated and then saved.<br>
<b>param:</b> int $userid The userid to calculate the grade for. Defaults to the current user.<br>
<b>param:</b> array $attempts The attempts of this user. Useful if you are<br>
<b>return:</b> bool Indicates success or failure.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_calculate_best_grade" onClick="logFunction('quiz_calculate_best_grade', 'locallib.php.source.html#l776')" href="locallib.php.source.html#l776">quiz_calculate_best_grade</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/attempts.html">$attempts</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_calculate_best_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Calculate the overall grade for a quiz given a number of attempts by a particular user.<BR>
</b><BR><b>param:</b> object $quiz&nbsp;&nbsp;&nbsp;&nbsp;the quiz settings object.<br>
<b>param:</b> array $attempts an array of all the user's attempts at this quiz in order.<br>
<b>return:</b> float&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the overall grade<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_update_all_final_grades" onClick="logFunction('quiz_update_all_final_grades', 'locallib.php.source.html#l821')" href="locallib.php.source.html#l821">quiz_update_all_final_grades</a>(<a href="../../_variables/quiz.html">$quiz</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_update_all_final_grades.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Update the final grade at this quiz for all students.<BR>
</b><BR>This function is equivalent to calling quiz_save_best_grade for all<BR>
users, but much more efficient.<BR>
<BR>
<b>param:</b> object $quiz the quiz settings.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_update_open_attempts" onClick="logFunction('quiz_update_open_attempts', 'locallib.php.source.html#l969')" href="locallib.php.source.html#l969">quiz_update_open_attempts</a>(array <a href="../../_variables/conditions.html">$conditions</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_update_open_attempts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Efficiently update check state time on all open attempts<BR>
</b><BR><b>param:</b> array $conditions optional restrictions on which attempts to update<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_get_attempt_usertime_sql" onClick="logFunction('quiz_get_attempt_usertime_sql', 'locallib.php.source.html#l1090')" href="locallib.php.source.html#l1090">quiz_get_attempt_usertime_sql</a>(<a href="../../_variables/redundantwhereclauses.html">$redundantwhereclauses</a> = '')&nbsp;&nbsp;
<a href="../../_functions/quiz_get_attempt_usertime_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns SQL to compute timeclose and timelimit for every attempt, taking into account user and group overrides.<BR>
</b><BR><b>param:</b> string $redundantwhereclauses extra where clauses to add to the subquery<br>
<b>return:</b> string SQL select with columns attempt.id, usertimeclose, usertimelimit.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_calculate_best_attempt" onClick="logFunction('quiz_calculate_best_attempt', 'locallib.php.source.html#l1121')" href="locallib.php.source.html#l1121">quiz_calculate_best_attempt</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/attempts.html">$attempts</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_calculate_best_attempt.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return the attempt with the best grade for a quiz<BR>
</b><BR>Which attempt is the best depends on $quiz-&gt;grademethod. If the grade<BR>
method is GRADEAVERAGE then this function simply returns the last attempt.<BR>
<b>param:</b> object $quiz&nbsp;&nbsp;&nbsp;&nbsp;The quiz for which the best grade is to be calculated<br>
<b>param:</b> array $attempts An array of all the attempts of the user at the quiz<br>
<b>return:</b> object&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The attempt with the best grade<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_get_grading_options" onClick="logFunction('quiz_get_grading_options', 'locallib.php.source.html#l1164')" href="locallib.php.source.html#l1164">quiz_get_grading_options</a>()&nbsp;&nbsp;
<a href="../../_functions/quiz_get_grading_options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> array int =&gt; lang string the options for calculating the quiz grade<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_get_grading_option_name" onClick="logFunction('quiz_get_grading_option_name', 'locallib.php.source.html#l1178')" href="locallib.php.source.html#l1178">quiz_get_grading_option_name</a>(<a href="../../_variables/option.html">$option</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_get_grading_option_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> int $option one of the values QUIZ_GRADEHIGHEST, QUIZ_GRADEAVERAGE,<br>
<b>return:</b> the lang string for that option.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_get_overdue_handling_options" onClick="logFunction('quiz_get_overdue_handling_options', 'locallib.php.source.html#l1187')" href="locallib.php.source.html#l1187">quiz_get_overdue_handling_options</a>()&nbsp;&nbsp;
<a href="../../_functions/quiz_get_overdue_handling_options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> array string =&gt; lang string the options for handling overdue quiz<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_get_user_image_options" onClick="logFunction('quiz_get_user_image_options', 'locallib.php.source.html#l1195')" href="locallib.php.source.html#l1195">quiz_get_user_image_options</a>()&nbsp;&nbsp;
<a href="../../_functions/quiz_get_user_image_options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the choices for what size user picture to show.<BR>
</b><BR><b>return:</b> array string =&gt; lang string the options for whether to display the user's picture.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_questions_per_page_options" onClick="logFunction('quiz_questions_per_page_options', 'locallib.php.source.html#l1207')" href="locallib.php.source.html#l1207">quiz_questions_per_page_options</a>()&nbsp;&nbsp;
<a href="../../_functions/quiz_questions_per_page_options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the choices to offer for the 'Questions per page' option.<BR>
</b><BR><b>return:</b> array int =&gt; string.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_attempt_state_name" onClick="logFunction('quiz_attempt_state_name', 'locallib.php.source.html#l1221')" href="locallib.php.source.html#l1221">quiz_attempt_state_name</a>(<a href="../../_variables/state.html">$state</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_attempt_state_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the human-readable name for a quiz attempt state.<BR>
</b><BR><b>param:</b> string $state one of the state constants like {@link quiz_attempt::IN_PROGRESS}.<br>
<b>return:</b> string The lang string to describe that state.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_question_action_icons" onClick="logFunction('quiz_question_action_icons', 'locallib.php.source.html#l1252')" href="locallib.php.source.html#l1252">quiz_question_action_icons</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/cmid.html">$cmid</a>, <a href="../../_variables/question.html">$question</a>, <a href="../../_variables/returnurl.html">$returnurl</a>, <a href="../../_variables/variant.html">$variant</a> = null)&nbsp;&nbsp;
<a href="../../_functions/quiz_question_action_icons.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> object $quiz the quiz.<br>
<b>param:</b> int $cmid the course_module object for this quiz.<br>
<b>param:</b> object $question the question.<br>
<b>param:</b> string $returnurl url to return to after action is done.<br>
<b>param:</b> int $variant which question variant to preview (optional).<br>
<b>return:</b> string html for a number of icons linked to action pages for a<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_question_edit_button" onClick="logFunction('quiz_question_edit_button', 'locallib.php.source.html#l1266')" href="locallib.php.source.html#l1266">quiz_question_edit_button</a>(<a href="../../_variables/cmid.html">$cmid</a>, <a href="../../_variables/question.html">$question</a>, <a href="../../_variables/returnurl.html">$returnurl</a>, <a href="../../_variables/contentaftericon.html">$contentaftericon</a> = '')&nbsp;&nbsp;
<a href="../../_functions/quiz_question_edit_button.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> int $cmid the course_module.id for this quiz.<br>
<b>param:</b> object $question the question.<br>
<b>param:</b> string $returnurl url to return to after action is done.<br>
<b>param:</b> string $contentbeforeicon some HTML content to be added inside the link, before the icon.<br>
<b>return:</b> the HTML for an edit icon, view icon, or nothing for a question<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_question_preview_url" onClick="logFunction('quiz_question_preview_url', 'locallib.php.source.html#l1313')" href="locallib.php.source.html#l1313">quiz_question_preview_url</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/question.html">$question</a>, <a href="../../_variables/variant.html">$variant</a> = null)&nbsp;&nbsp;
<a href="../../_functions/quiz_question_preview_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> object $quiz the quiz settings<br>
<b>param:</b> object $question the question<br>
<b>param:</b> int $variant which question variant to preview (optional).<br>
<b>return:</b> moodle_url to preview this question with the options from this quiz.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_question_preview_button" onClick="logFunction('quiz_question_preview_button', 'locallib.php.source.html#l1335')" href="locallib.php.source.html#l1335">quiz_question_preview_button</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/question.html">$question</a>, <a href="../../_variables/label.html">$label</a> = false, <a href="../../_variables/variant.html">$variant</a> = null)&nbsp;&nbsp;
<a href="../../_functions/quiz_question_preview_button.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> object $quiz the quiz settings<br>
<b>param:</b> object $question the question<br>
<b>param:</b> bool $label if true, show the preview question label after the icon<br>
<b>param:</b> int $variant which question variant to preview (optional).<br>
<b>return:</b> the HTML for a preview question icon.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_get_flag_option" onClick="logFunction('quiz_get_flag_option', 'locallib.php.source.html#l1349')" href="locallib.php.source.html#l1349">quiz_get_flag_option</a>(<a href="../../_variables/attempt.html">$attempt</a>, <a href="../../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_get_flag_option.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> object $attempt the attempt.<br>
<b>param:</b> object $context the quiz context.<br>
<b>return:</b> int whether flags should be shown/editable to the current user for this attempt.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_attempt_state" onClick="logFunction('quiz_attempt_state', 'locallib.php.source.html#l1360')" href="locallib.php.source.html#l1360">quiz_attempt_state</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/attempt.html">$attempt</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_attempt_state.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Work out what state this quiz attempt is in - in the sense used by<BR>
quiz_get_review_options, not in the sense of $attempt-&gt;state.<BR>
</b><BR><b>param:</b> object $quiz the quiz settings<br>
<b>param:</b> object $attempt the quiz_attempt database row.<br>
<b>return:</b> int one of the mod_quiz_display_options::DURING,<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_get_review_options" onClick="logFunction('quiz_get_review_options', 'locallib.php.source.html#l1380')" href="locallib.php.source.html#l1380">quiz_get_review_options</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/attempt.html">$attempt</a>, <a href="../../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_get_review_options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>The the appropraite mod_quiz_display_options object for this attempt at this<BR>
quiz right now.<BR>
</b><BR><b>param:</b> object $quiz the quiz instance.<br>
<b>param:</b> object $attempt the attempt in question.<br>
<b>param:</b> $context the quiz context.<br>
<b>return:</b> mod_quiz_display_options<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_get_combined_reviewoptions" onClick="logFunction('quiz_get_combined_reviewoptions', 'locallib.php.source.html#l1429')" href="locallib.php.source.html#l1429">quiz_get_combined_reviewoptions</a>(<a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/attempts.html">$attempts</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_get_combined_reviewoptions.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Combines the review options from a number of different quiz attempts.<BR>
Returns an array of two ojects, so the suggested way of calling this<BR>
funciton is:<BR>
list($someoptions, $alloptions) = quiz_get_combined_reviewoptions(...)<BR>
</b><BR><b>param:</b> object $quiz the quiz instance.<br>
<b>param:</b> array $attempts an array of attempt objects.<br>
<b>return:</b> array of two options objects, one showing which options are true for<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_send_confirmation" onClick="logFunction('quiz_send_confirmation', 'locallib.php.source.html#l1473')" href="locallib.php.source.html#l1473">quiz_send_confirmation</a>(<a href="../../_variables/recipient.html">$recipient</a>, <a href="../../_variables/a.html">$a</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_send_confirmation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sends a confirmation message to the student confirming that the attempt was processed.<BR>
</b><BR><b>param:</b> object $a lots of useful information that can be used in the message<br>
<b>return:</b> int|false as for {@link message_send()}.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_send_notification" onClick="logFunction('quiz_send_notification', 'locallib.php.source.html#l1509')" href="locallib.php.source.html#l1509">quiz_send_notification</a>(<a href="../../_variables/recipient.html">$recipient</a>, <a href="../../_variables/submitter.html">$submitter</a>, <a href="../../_variables/a.html">$a</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_send_notification.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sends notification messages to the interested parties that assign the role capability<BR>
</b><BR><b>param:</b> object $recipient user object of the intended recipient<br>
<b>param:</b> object $a associative array of replaceable fields for the templates<br>
<b>return:</b> int|false as for {@link message_send()}.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_send_notification_messages" onClick="logFunction('quiz_send_notification_messages', 'locallib.php.source.html#l1545')" href="locallib.php.source.html#l1545">quiz_send_notification_messages</a>(<a href="../../_variables/course.html">$course</a>, <a href="../../_variables/quiz.html">$quiz</a>, <a href="../../_variables/attempt.html">$attempt</a>, <a href="../../_variables/context.html">$context</a>, <a href="../../_variables/cm.html">$cm</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_send_notification_messages.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Send all the requried messages when a quiz attempt is submitted.<BR>
</b><BR><b>param:</b> object $course the course<br>
<b>param:</b> object $quiz the quiz<br>
<b>param:</b> object $attempt this attempt just finished<br>
<b>param:</b> object $context the quiz context<br>
<b>param:</b> object $cm the coursemodule for this quiz<br>
<b>return:</b> bool true if all necessary messages were sent successfully, else false.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_send_overdue_message" onClick="logFunction('quiz_send_overdue_message', 'locallib.php.source.html#l1638')" href="locallib.php.source.html#l1638">quiz_send_overdue_message</a>(<a href="../../_variables/attemptobj.html">$attemptobj</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_send_overdue_message.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Send the notification message when a quiz attempt becomes overdue.<BR>
</b><BR><b>param:</b> quiz_attempt $attemptobj all the data about the quiz attempt.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_attempt_submitted_handler" onClick="logFunction('quiz_attempt_submitted_handler', 'locallib.php.source.html#l1709')" href="locallib.php.source.html#l1709">quiz_attempt_submitted_handler</a>(<a href="../../_variables/event.html">$event</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_attempt_submitted_handler.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Handle the quiz_attempt_submitted event.<BR>
</b><BR>This sends the confirmation and notification messages, if required.<BR>
<BR>
<b>param:</b> object $event the event object.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_groups_member_added_handler" onClick="logFunction('quiz_groups_member_added_handler', 'locallib.php.source.html#l1739')" href="locallib.php.source.html#l1739">quiz_groups_member_added_handler</a>(<a href="../../_variables/event.html">$event</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_groups_member_added_handler.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Handle groups_member_added event<BR>
</b><BR><b>param:</b> object $event the event object.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_groups_member_removed_handler" onClick="logFunction('quiz_groups_member_removed_handler', 'locallib.php.source.html#l1751')" href="locallib.php.source.html#l1751">quiz_groups_member_removed_handler</a>(<a href="../../_variables/event.html">$event</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_groups_member_removed_handler.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Handle groups_member_removed event<BR>
</b><BR><b>param:</b> object $event the event object.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_groups_group_deleted_handler" onClick="logFunction('quiz_groups_group_deleted_handler', 'locallib.php.source.html#l1763')" href="locallib.php.source.html#l1763">quiz_groups_group_deleted_handler</a>(<a href="../../_variables/event.html">$event</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_groups_group_deleted_handler.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Handle groups_group_deleted event<BR>
</b><BR><b>param:</b> object $event the event object.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_process_group_deleted_in_course" onClick="logFunction('quiz_process_group_deleted_in_course', 'locallib.php.source.html#l1776')" href="locallib.php.source.html#l1776">quiz_process_group_deleted_in_course</a>(<a href="../../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_process_group_deleted_in_course.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Logic to happen when a/some group(s) has/have been deleted in a course.<BR>
</b><BR><b>param:</b> int $courseid The course ID.<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_groups_members_removed_handler" onClick="logFunction('quiz_groups_members_removed_handler', 'locallib.php.source.html#l1803')" href="locallib.php.source.html#l1803">quiz_groups_members_removed_handler</a>(<a href="../../_variables/event.html">$event</a>)&nbsp;&nbsp;
<a href="../../_functions/quiz_groups_members_removed_handler.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Handle groups_members_removed event<BR>
</b><BR><b>param:</b> object $event the event object.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="quiz_get_js_module" onClick="logFunction('quiz_get_js_module', 'locallib.php.source.html#l1819')" href="locallib.php.source.html#l1819">quiz_get_js_module</a>()&nbsp;&nbsp;
<a href="../../_functions/quiz_get_js_module.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the information about the standard quiz JavaScript module.<BR>
</b><BR><b>return:</b> array a standard jsmodule structure.<br>
</td></tr></table>

<br>
</div></div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
