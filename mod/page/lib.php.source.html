<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/page/lib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/page';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/page/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * @package mod_page</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @copyright  2009 Petr Skoda (http://skodak.org)</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> */</span>
<a name="l23"><span class="linenum">  23</span></a>  
<a name="l24"><span class="linenum">  24</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die;
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment">/**</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * List of features supported in Page module</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * @param string $feature FEATURE_xx constant for requested feature</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * @return mixed True if module supports feature, false if not, null if doesn't know</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> */</span>
<a name="l31"><span class="linenum">  31</span></a>  function <a class="function" onClick="logFunction('page_supports')" href="../../_functions/page_supports.html" onMouseOver="funcPopup(event,'page_supports')">page_supports</a>(<a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l32"><span class="linenum">  32</span></a>      switch(<a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l33"><span class="linenum">  33</span></a>          case <a class="constant" onClick="logConstant('FEATURE_MOD_ARCHETYPE')" href="../../_constants/FEATURE_MOD_ARCHETYPE.html" onMouseOver="constPopup(event,'FEATURE_MOD_ARCHETYPE')">FEATURE_MOD_ARCHETYPE</a>:           return <a class="constant" onClick="logConstant('MOD_ARCHETYPE_RESOURCE')" href="../../_constants/MOD_ARCHETYPE_RESOURCE.html" onMouseOver="constPopup(event,'MOD_ARCHETYPE_RESOURCE')">MOD_ARCHETYPE_RESOURCE</a>;
<a name="l34"><span class="linenum">  34</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPS')" href="../../_constants/FEATURE_GROUPS.html" onMouseOver="constPopup(event,'FEATURE_GROUPS')">FEATURE_GROUPS</a>:                  return false;
<a name="l35"><span class="linenum">  35</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPINGS')" href="../../_constants/FEATURE_GROUPINGS.html" onMouseOver="constPopup(event,'FEATURE_GROUPINGS')">FEATURE_GROUPINGS</a>:               return false;
<a name="l36"><span class="linenum">  36</span></a>          case <a class="constant" onClick="logConstant('FEATURE_MOD_INTRO')" href="../../_constants/FEATURE_MOD_INTRO.html" onMouseOver="constPopup(event,'FEATURE_MOD_INTRO')">FEATURE_MOD_INTRO</a>:               return true;
<a name="l37"><span class="linenum">  37</span></a>          case <a class="constant" onClick="logConstant('FEATURE_COMPLETION_TRACKS_VIEWS')" href="../../_constants/FEATURE_COMPLETION_TRACKS_VIEWS.html" onMouseOver="constPopup(event,'FEATURE_COMPLETION_TRACKS_VIEWS')">FEATURE_COMPLETION_TRACKS_VIEWS</a>: return true;
<a name="l38"><span class="linenum">  38</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_HAS_GRADE')" href="../../_constants/FEATURE_GRADE_HAS_GRADE.html" onMouseOver="constPopup(event,'FEATURE_GRADE_HAS_GRADE')">FEATURE_GRADE_HAS_GRADE</a>:         return false;
<a name="l39"><span class="linenum">  39</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_OUTCOMES')" href="../../_constants/FEATURE_GRADE_OUTCOMES.html" onMouseOver="constPopup(event,'FEATURE_GRADE_OUTCOMES')">FEATURE_GRADE_OUTCOMES</a>:          return false;
<a name="l40"><span class="linenum">  40</span></a>          case <a class="constant" onClick="logConstant('FEATURE_BACKUP_MOODLE2')" href="../../_constants/FEATURE_BACKUP_MOODLE2.html" onMouseOver="constPopup(event,'FEATURE_BACKUP_MOODLE2')">FEATURE_BACKUP_MOODLE2</a>:          return true;
<a name="l41"><span class="linenum">  41</span></a>          case <a class="constant" onClick="logConstant('FEATURE_SHOW_DESCRIPTION')" href="../../_constants/FEATURE_SHOW_DESCRIPTION.html" onMouseOver="constPopup(event,'FEATURE_SHOW_DESCRIPTION')">FEATURE_SHOW_DESCRIPTION</a>:        return true;
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>          default: return null;
<a name="l44"><span class="linenum">  44</span></a>      }
<a name="l45"><span class="linenum">  45</span></a>  }
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">/**</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment"> * Returns all other caps used in module</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment"> * @return array</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> */</span>
<a name="l51"><span class="linenum">  51</span></a>  function <a class="function" onClick="logFunction('page_get_extra_capabilities')" href="../../_functions/page_get_extra_capabilities.html" onMouseOver="funcPopup(event,'page_get_extra_capabilities')">page_get_extra_capabilities</a>() {
<a name="l52"><span class="linenum">  52</span></a>      return array('moodle/site:accessallgroups');
<a name="l53"><span class="linenum">  53</span></a>  }
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">/**</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment"> * This function is used by the reset_course_userdata function in moodlelib.</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment"> * @param $data the data submitted from the reset course.</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * @return array status array</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> */</span>
<a name="l60"><span class="linenum">  60</span></a>  function <a class="function" onClick="logFunction('page_reset_userdata')" href="../../_functions/page_reset_userdata.html" onMouseOver="funcPopup(event,'page_reset_userdata')">page_reset_userdata</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l61"><span class="linenum">  61</span></a>      return array();
<a name="l62"><span class="linenum">  62</span></a>  }
<a name="l63"><span class="linenum">  63</span></a>  
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">/**</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment"> * List the actions that correspond to a view of this module.</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment"> *</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> *       crud = 'r' and edulevel = LEVEL_PARTICIPATING will</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> *       be considered as view action.</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment"> *</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment"> * @return array</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> */</span>
<a name="l74"><span class="linenum">  74</span></a>  function <a class="function" onClick="logFunction('page_get_view_actions')" href="../../_functions/page_get_view_actions.html" onMouseOver="funcPopup(event,'page_get_view_actions')">page_get_view_actions</a>() {
<a name="l75"><span class="linenum">  75</span></a>      return array('view','view all');
<a name="l76"><span class="linenum">  76</span></a>  }
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">/**</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment"> * List the actions that correspond to a post of this module.</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment"> *</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment"> *       crud = ('c' || 'u' || 'd') and edulevel = LEVEL_PARTICIPATING</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment"> *       will be considered as post action.</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment"> *</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment"> * @return array</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment"> */</span>
<a name="l88"><span class="linenum">  88</span></a>  function <a class="function" onClick="logFunction('page_get_post_actions')" href="../../_functions/page_get_post_actions.html" onMouseOver="funcPopup(event,'page_get_post_actions')">page_get_post_actions</a>() {
<a name="l89"><span class="linenum">  89</span></a>      return array('update', 'add');
<a name="l90"><span class="linenum">  90</span></a>  }
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">/**</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment"> * Add page instance.</span>
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment"> * @param stdClass $data</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment"> * @param mod_page_mod_form $mform</span>
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment"> * @return int new page instance id</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment"> */</span>
<a name="l98"><span class="linenum">  98</span></a>  function <a class="function" onClick="logFunction('page_add_instance')" href="../../_functions/page_add_instance.html" onMouseOver="funcPopup(event,'page_add_instance')">page_add_instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = null) {
<a name="l99"><span class="linenum">  99</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l100"><span class="linenum"> 100</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/resourcelib.php&quot;);
<a name="l101"><span class="linenum"> 101</span></a>  
<a name="l102"><span class="linenum"> 102</span></a>      <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>;
<a name="l103"><span class="linenum"> 103</span></a>  
<a name="l104"><span class="linenum"> 104</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l105"><span class="linenum"> 105</span></a>      <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a> = array();
<a name="l106"><span class="linenum"> 106</span></a>      if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('display')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/display.html">display</a> == <a class="constant" onClick="logConstant('RESOURCELIB_DISPLAY_POPUP')" href="../../_constants/RESOURCELIB_DISPLAY_POPUP.html" onMouseOver="constPopup(event,'RESOURCELIB_DISPLAY_POPUP')">RESOURCELIB_DISPLAY_POPUP</a>) {
<a name="l107"><span class="linenum"> 107</span></a>          <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['popupwidth']  = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('popupwidth')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/popupwidth.html">popupwidth</a>;
<a name="l108"><span class="linenum"> 108</span></a>          <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['popupheight'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('popupheight')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/popupheight.html">popupheight</a>;
<a name="l109"><span class="linenum"> 109</span></a>      }
<a name="l110"><span class="linenum"> 110</span></a>      <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['printheading'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('printheading')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/printheading.html">printheading</a>;
<a name="l111"><span class="linenum"> 111</span></a>      <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['printintro']   = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('printintro')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/printintro.html">printintro</a>;
<a name="l112"><span class="linenum"> 112</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('displayoptions')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/displayoptions.html">displayoptions</a> = <a class="phpfunction" onClick="logFunction('serialize')" href="../../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>);
<a name="l113"><span class="linenum"> 113</span></a>  
<a name="l114"><span class="linenum"> 114</span></a>      if (<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l115"><span class="linenum"> 115</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('content')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>       = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('page')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/page.html">page</a>['text'];
<a name="l116"><span class="linenum"> 116</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('contentformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/contentformat.html">contentformat</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('page')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/page.html">page</a>['format'];
<a name="l117"><span class="linenum"> 117</span></a>      }
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('page', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">    // we need to use context now, so we need to make sure all needed info is already in db</span>
<a name="l122"><span class="linenum"> 122</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_modules', 'instance', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array('id'=&gt;<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>));
<a name="l123"><span class="linenum"> 123</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>);
<a name="l124"><span class="linenum"> 124</span></a>  
<a name="l125"><span class="linenum"> 125</span></a>      if (<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> and !empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('page')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/page.html">page</a>['itemid'])) {
<a name="l126"><span class="linenum"> 126</span></a>          <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('page')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/page.html">page</a>['itemid'];
<a name="l127"><span class="linenum"> 127</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('content')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_page', 'content', 0, <a class="function" onClick="logFunction('page_get_editor_options')" href="../../_functions/page_get_editor_options.html" onMouseOver="funcPopup(event,'page_get_editor_options')">page_get_editor_options</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>), <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('content')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>);
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('page', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l129"><span class="linenum"> 129</span></a>      }
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>      return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l132"><span class="linenum"> 132</span></a>  }
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">/**</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment"> * Update page instance.</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment"> * @param object $data</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment"> * @param object $mform</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment"> * @return bool true</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment"> */</span>
<a name="l140"><span class="linenum"> 140</span></a>  function <a class="function" onClick="logFunction('page_update_instance')" href="../../_functions/page_update_instance.html" onMouseOver="funcPopup(event,'page_update_instance')">page_update_instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l141"><span class="linenum"> 141</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l142"><span class="linenum"> 142</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/resourcelib.php&quot;);
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>      <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>        = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>;
<a name="l145"><span class="linenum"> 145</span></a>      <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('page')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/page.html">page</a>['itemid'];
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l148"><span class="linenum"> 148</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>           = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('instance')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l149"><span class="linenum"> 149</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('revision')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/revision.html">revision</a>++;
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>      <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a> = array();
<a name="l152"><span class="linenum"> 152</span></a>      if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('display')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/display.html">display</a> == <a class="constant" onClick="logConstant('RESOURCELIB_DISPLAY_POPUP')" href="../../_constants/RESOURCELIB_DISPLAY_POPUP.html" onMouseOver="constPopup(event,'RESOURCELIB_DISPLAY_POPUP')">RESOURCELIB_DISPLAY_POPUP</a>) {
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['popupwidth']  = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('popupwidth')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/popupwidth.html">popupwidth</a>;
<a name="l154"><span class="linenum"> 154</span></a>          <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['popupheight'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('popupheight')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/popupheight.html">popupheight</a>;
<a name="l155"><span class="linenum"> 155</span></a>      }
<a name="l156"><span class="linenum"> 156</span></a>      <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['printheading'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('printheading')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/printheading.html">printheading</a>;
<a name="l157"><span class="linenum"> 157</span></a>      <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['printintro']   = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('printintro')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/printintro.html">printintro</a>;
<a name="l158"><span class="linenum"> 158</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('displayoptions')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/displayoptions.html">displayoptions</a> = <a class="phpfunction" onClick="logFunction('serialize')" href="../../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>);
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('content')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>       = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('page')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/page.html">page</a>['text'];
<a name="l161"><span class="linenum"> 161</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('contentformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/contentformat.html">contentformat</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('page')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/page.html">page</a>['format'];
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('page', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l164"><span class="linenum"> 164</span></a>  
<a name="l165"><span class="linenum"> 165</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>);
<a name="l166"><span class="linenum"> 166</span></a>      if (<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a>) {
<a name="l167"><span class="linenum"> 167</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('content')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_page', 'content', 0, <a class="function" onClick="logFunction('page_get_editor_options')" href="../../_functions/page_get_editor_options.html" onMouseOver="funcPopup(event,'page_get_editor_options')">page_get_editor_options</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>), <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('content')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>);
<a name="l168"><span class="linenum"> 168</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('page', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l169"><span class="linenum"> 169</span></a>      }
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>      return true;
<a name="l172"><span class="linenum"> 172</span></a>  }
<a name="l173"><span class="linenum"> 173</span></a>  
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">/**</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment"> * Delete page instance.</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment"> * @param int $id</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment"> * @return bool true</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment"> */</span>
<a name="l179"><span class="linenum"> 179</span></a>  function <a class="function" onClick="logFunction('page_delete_instance')" href="../../_functions/page_delete_instance.html" onMouseOver="funcPopup(event,'page_delete_instance')">page_delete_instance</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l180"><span class="linenum"> 180</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l181"><span class="linenum"> 181</span></a>  
<a name="l182"><span class="linenum"> 182</span></a>      if (!<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('page', array('id'=&gt;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>))) {
<a name="l183"><span class="linenum"> 183</span></a>          return false;
<a name="l184"><span class="linenum"> 184</span></a>      }
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">    // note: all context files are deleted automatically</span>
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('page', array('id'=&gt;<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('id')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>      return true;
<a name="l191"><span class="linenum"> 191</span></a>  }
<a name="l192"><span class="linenum"> 192</span></a>  
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">/**</span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment"> * Given a course_module object, this function returns any</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment"> * &quot;extra&quot; information that may be needed when printing</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment"> * this activity in a course listing.</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment"> *</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment"> * See {@link get_array_of_activities()} in course/lib.php</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment"> *</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment"> * @param stdClass $coursemodule</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment"> * @return cached_cm_info Info to customise main page display</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment"> */</span>
<a name="l203"><span class="linenum"> 203</span></a>  function <a class="function" onClick="logFunction('page_get_coursemodule_info')" href="../../_functions/page_get_coursemodule_info.html" onMouseOver="funcPopup(event,'page_get_coursemodule_info')">page_get_coursemodule_info</a>(<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>) {
<a name="l204"><span class="linenum"> 204</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l205"><span class="linenum"> 205</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/resourcelib.php&quot;);
<a name="l206"><span class="linenum"> 206</span></a>  
<a name="l207"><span class="linenum"> 207</span></a>      if (!<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('page', array('id'=&gt;<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>-&gt;<a onClick="logVariable('instance')" class="var it43092" onMouseOver="hilite(43092)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>),
<a name="l208"><span class="linenum"> 208</span></a>              'id, name, display, displayoptions, intro, introformat')) {
<a name="l209"><span class="linenum"> 209</span></a>          return NULL;
<a name="l210"><span class="linenum"> 210</span></a>      }
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>      <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = <span class="keyword">new </span><a class="class" onClick="logClass('cached_cm_info')" href="../../_classes/cached_cm_info.html" onMouseOver="classPopup(event,'cached_cm_info')">cached_cm_info</a>();
<a name="l213"><span class="linenum"> 213</span></a>      <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('name')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('name')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>      if (<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>-&gt;<a onClick="logVariable('showdescription')" class="var it43092" onMouseOver="hilite(43092)" onMouseOut="lolite()" href="../../_variables/showdescription.html">showdescription</a>) {
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">        // Convert intro to html. Do not filter cached version, filters run at display time.</span>
<a name="l217"><span class="linenum"> 217</span></a>          <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('content')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = <a class="function" onClick="logFunction('format_module_intro')" href="../../_functions/format_module_intro.html" onMouseOver="funcPopup(event,'format_module_intro')">format_module_intro</a>('page', <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>-&gt;<a onClick="logVariable('id')" class="var it43092" onMouseOver="hilite(43092)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l218"><span class="linenum"> 218</span></a>      }
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>      if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('display')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/display.html">display</a> != <a class="constant" onClick="logConstant('RESOURCELIB_DISPLAY_POPUP')" href="../../_constants/RESOURCELIB_DISPLAY_POPUP.html" onMouseOver="constPopup(event,'RESOURCELIB_DISPLAY_POPUP')">RESOURCELIB_DISPLAY_POPUP</a>) {
<a name="l221"><span class="linenum"> 221</span></a>          return <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>;
<a name="l222"><span class="linenum"> 222</span></a>      }
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>      <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../../_variables/fullurl.html">$fullurl</a> = &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/page/view.php?id=<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>-&gt;<a onClick="logVariable('id')" class="var it43092" onMouseOver="hilite(43092)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;inpopup=1&quot;;
<a name="l225"><span class="linenum"> 225</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = empty(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('displayoptions')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/displayoptions.html">displayoptions</a>) ? array() : <a class="phpfunction" onClick="logFunction('unserialize')" href="../../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('displayoptions')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/displayoptions.html">displayoptions</a>);
<a name="l226"><span class="linenum"> 226</span></a>      <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../../_variables/width.html">$width</a>  = empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['popupwidth'])  ? 620 : <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['popupwidth'];
<a name="l227"><span class="linenum"> 227</span></a>      <a class="var it293" onMouseOver="hilite(293)" onMouseOut="lolite()" onClick="logVariable('height')" href="../../_variables/height.html">$height</a> = empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['popupheight']) ? 450 : <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['popupheight'];
<a name="l228"><span class="linenum"> 228</span></a>      <a class="var it4391" onMouseOver="hilite(4391)" onMouseOut="lolite()" onClick="logVariable('wh')" href="../../_variables/wh.html">$wh</a> = &quot;width=<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../../_variables/width.html">$width</a>,height=<a class="var it293" onMouseOver="hilite(293)" onMouseOut="lolite()" onClick="logVariable('height')" href="../../_variables/height.html">$height</a>,toolbar=no,location=no,menubar=no,copyhistory=no,status=no,directories=no,scrollbars=yes,resizable=yes&quot;;
<a name="l229"><span class="linenum"> 229</span></a>      <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('onclick')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/onclick.html">onclick</a> = &quot;window.<a class="function" onClick="logFunction('open')" href="../../_functions/open.html" onMouseOver="funcPopup(event,'open')">open</a>('<a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../../_variables/fullurl.html">$fullurl</a>', '', '<a class="var it4391" onMouseOver="hilite(4391)" onMouseOut="lolite()" onClick="logVariable('wh')" href="../../_variables/wh.html">$wh</a>'); return false;&quot;;
<a name="l230"><span class="linenum"> 230</span></a>  
<a name="l231"><span class="linenum"> 231</span></a>      return <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>;
<a name="l232"><span class="linenum"> 232</span></a>  }
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">/**</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment"> * Lists all browsable file areas</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment"> *</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment"> * @package  mod_page</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment"> * @category files</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment"> * @param stdClass $course course object</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment"> * @param stdClass $cm course module object</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment"> * @param stdClass $context context object</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment"> * @return array</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment"> */</span>
<a name="l245"><span class="linenum"> 245</span></a>  function <a class="function" onClick="logFunction('page_get_file_areas')" href="../../_functions/page_get_file_areas.html" onMouseOver="funcPopup(event,'page_get_file_areas')">page_get_file_areas</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l246"><span class="linenum"> 246</span></a>      <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a> = array();
<a name="l247"><span class="linenum"> 247</span></a>      <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>['content'] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('content', 'page');
<a name="l248"><span class="linenum"> 248</span></a>      return <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>;
<a name="l249"><span class="linenum"> 249</span></a>  }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">/**</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment"> * File browsing support for page module content area.</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment"> *</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment"> * @package  mod_page</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment"> * @category files</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment"> * @param stdClass $browser file browser instance</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment"> * @param stdClass $areas file areas</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment"> * @param stdClass $course course object</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment"> * @param stdClass $cm course module object</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment"> * @param stdClass $context context object</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment"> * @param string $filearea file area</span>
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment"> * @param int $itemid item ID</span>
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment"> * @param string $filepath file path</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment"> * @param string $filename file name</span>
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment"> * @return file_info instance or null if not found</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment"> */</span>
<a name="l267"><span class="linenum"> 267</span></a>  function <a class="function" onClick="logFunction('page_get_file_info')" href="../../_functions/page_get_file_info.html" onMouseOver="funcPopup(event,'page_get_file_info')">page_get_file_info</a>(<a class="var it1462" onMouseOver="hilite(1462)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>) {
<a name="l268"><span class="linenum"> 268</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>      if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:managefiles', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">        // students can not peak here!</span>
<a name="l272"><span class="linenum"> 272</span></a>          return null;
<a name="l273"><span class="linenum"> 273</span></a>      }
<a name="l274"><span class="linenum"> 274</span></a>  
<a name="l275"><span class="linenum"> 275</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>      if (<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'content') {
<a name="l278"><span class="linenum"> 278</span></a>          <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>) ? '/' : <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>;
<a name="l279"><span class="linenum"> 279</span></a>          <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>) ? '.' : <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>;
<a name="l280"><span class="linenum"> 280</span></a>  
<a name="l281"><span class="linenum"> 281</span></a>          <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../_variables/urlbase.html">$urlbase</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'<a class="filename" href="../../pluginfile.php.html">/pluginfile.php</a>';
<a name="l282"><span class="linenum"> 282</span></a>          if (!<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_page', 'content', 0, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>)) {
<a name="l283"><span class="linenum"> 283</span></a>              if (<a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a> === '/' and <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> === '.') {
<a name="l284"><span class="linenum"> 284</span></a>                  <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a> = <span class="keyword">new </span><a class="class" onClick="logClass('virtual_root_file')" href="../../_classes/virtual_root_file.html" onMouseOver="classPopup(event,'virtual_root_file')">virtual_root_file</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_page', 'content', 0);
<a name="l285"><span class="linenum"> 285</span></a>              } else {
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">                // not found</span>
<a name="l287"><span class="linenum"> 287</span></a>                  return null;
<a name="l288"><span class="linenum"> 288</span></a>              }
<a name="l289"><span class="linenum"> 289</span></a>          }
<a name="l290"><span class="linenum"> 290</span></a>          require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>/mod/page/locallib.php&quot;);
<a name="l291"><span class="linenum"> 291</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('page_content_file_info')" href="../../_classes/page_content_file_info.html" onMouseOver="classPopup(event,'page_content_file_info')">page_content_file_info</a>(<a class="var it1462" onMouseOver="hilite(1462)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a>, <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../_variables/urlbase.html">$urlbase</a>, <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>[<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>], true, true, true, false);
<a name="l292"><span class="linenum"> 292</span></a>      }
<a name="l293"><span class="linenum"> 293</span></a>  
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment">    // note: page_intro handled in file_browser automatically</span>
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>      return null;
<a name="l297"><span class="linenum"> 297</span></a>  }
<a name="l298"><span class="linenum"> 298</span></a>  
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment">/**</span>
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment"> * Serves the page files.</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment"> *</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment"> * @package  mod_page</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment"> * @category files</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment"> * @param stdClass $course course object</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment"> * @param stdClass $cm course module object</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment"> * @param stdClass $context context object</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment"> * @param string $filearea file area</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment"> * @param array $args extra arguments</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment"> * @param bool $forcedownload whether or not force download</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment"> * @param array $options additional options affecting the file serving</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment"> * @return bool false if file not found, does not return if found - just send the file</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment"> */</span>
<a name="l313"><span class="linenum"> 313</span></a>  function <a class="function" onClick="logFunction('page_pluginfile')" href="../../_functions/page_pluginfile.html" onMouseOver="funcPopup(event,'page_pluginfile')">page_pluginfile</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>, array <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>=array()) {
<a name="l314"><span class="linenum"> 314</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l315"><span class="linenum"> 315</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/resourcelib.php&quot;);
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>      if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/contextlevel.html">contextlevel</a> != <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>) {
<a name="l318"><span class="linenum"> 318</span></a>          return false;
<a name="l319"><span class="linenum"> 319</span></a>      }
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>      <a class="function" onClick="logFunction('require_course_login')" href="../../_functions/require_course_login.html" onMouseOver="funcPopup(event,'require_course_login')">require_course_login</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, true, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l322"><span class="linenum"> 322</span></a>      if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/page:view', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l323"><span class="linenum"> 323</span></a>          return false;
<a name="l324"><span class="linenum"> 324</span></a>      }
<a name="l325"><span class="linenum"> 325</span></a>  
<a name="l326"><span class="linenum"> 326</span></a>      if (<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> !== 'content') {
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">        // intro is handled automatically in pluginfile.php</span>
<a name="l328"><span class="linenum"> 328</span></a>          return false;
<a name="l329"><span class="linenum"> 329</span></a>      }
<a name="l330"><span class="linenum"> 330</span></a>  
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">    // $arg could be revision number or index.html</span>
<a name="l332"><span class="linenum"> 332</span></a>      <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l333"><span class="linenum"> 333</span></a>      if (<a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a> == 'index.html' || <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a> == 'index.htm') {
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">        // serve page content</span>
<a name="l335"><span class="linenum"> 335</span></a>          <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('arg')" href="../../_variables/arg.html">$arg</a>;
<a name="l336"><span class="linenum"> 336</span></a>  
<a name="l337"><span class="linenum"> 337</span></a>          if (!<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('page', array('id'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>)) {
<a name="l338"><span class="linenum"> 338</span></a>              return false;
<a name="l339"><span class="linenum"> 339</span></a>          }
<a name="l340"><span class="linenum"> 340</span></a>  
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">        // We need to rewrite the pluginfile URLs so the media filters can work.</span>
<a name="l342"><span class="linenum"> 342</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('content')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>, '<a class="filename" href="../../webservice/pluginfile.php.html">webservice/pluginfile.php</a>', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_page', 'content',
<a name="l343"><span class="linenum"> 343</span></a>                                                  <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('revision')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/revision.html">revision</a>);
<a name="l344"><span class="linenum"> 344</span></a>          <a class="var it8419" onMouseOver="hilite(8419)" onMouseOut="lolite()" onClick="logVariable('formatoptions')" href="../../_variables/formatoptions.html">$formatoptions</a> = new stdClass;
<a name="l345"><span class="linenum"> 345</span></a>          <a class="var it8419" onMouseOver="hilite(8419)" onMouseOut="lolite()" onClick="logVariable('formatoptions')" href="../../_variables/formatoptions.html">$formatoptions</a>-&gt;<a onClick="logVariable('noclean')" class="var it43693" onMouseOver="hilite(43693)" onMouseOut="lolite()" href="../../_variables/noclean.html">noclean</a> = true;
<a name="l346"><span class="linenum"> 346</span></a>          <a class="var it8419" onMouseOver="hilite(8419)" onMouseOut="lolite()" onClick="logVariable('formatoptions')" href="../../_variables/formatoptions.html">$formatoptions</a>-&gt;<a onClick="logVariable('overflowdiv')" class="var it43693" onMouseOver="hilite(43693)" onMouseOut="lolite()" href="../../_variables/overflowdiv.html">overflowdiv</a> = true;
<a name="l347"><span class="linenum"> 347</span></a>          <a class="var it8419" onMouseOver="hilite(8419)" onMouseOut="lolite()" onClick="logVariable('formatoptions')" href="../../_variables/formatoptions.html">$formatoptions</a>-&gt;<a onClick="logVariable('context')" class="var it43693" onMouseOver="hilite(43693)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l348"><span class="linenum"> 348</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('contentformat')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/contentformat.html">contentformat</a>, <a class="var it8419" onMouseOver="hilite(8419)" onMouseOut="lolite()" onClick="logVariable('formatoptions')" href="../../_variables/formatoptions.html">$formatoptions</a>);
<a name="l349"><span class="linenum"> 349</span></a>  
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">        // Remove @@PLUGINFILE@@/.</span>
<a name="l351"><span class="linenum"> 351</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array('reverse' =&gt; true);
<a name="l352"><span class="linenum"> 352</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>, '<a class="filename" href="../../webservice/pluginfile.php.html">webservice/pluginfile.php</a>', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_page', 'content',
<a name="l353"><span class="linenum"> 353</span></a>                                                  <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('revision')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/revision.html">revision</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l354"><span class="linenum"> 354</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('@@PLUGINFILE@@/', '', <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>);
<a name="l355"><span class="linenum"> 355</span></a>  
<a name="l356"><span class="linenum"> 356</span></a>          <a class="function" onClick="logFunction('send_file')" href="../../_functions/send_file.html" onMouseOver="funcPopup(event,'send_file')">send_file</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>, 0, 0, true, true);
<a name="l357"><span class="linenum"> 357</span></a>      } else {
<a name="l358"><span class="linenum"> 358</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l359"><span class="linenum"> 359</span></a>          <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l360"><span class="linenum"> 360</span></a>          <a class="var it241" onMouseOver="hilite(241)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a> = &quot;/<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>/mod_page/<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>/0/<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>&quot;;
<a name="l361"><span class="linenum"> 361</span></a>          if (!<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file_by_hash')" href="../../_functions/get_file_by_hash.html" onMouseOver="funcPopup(event,'get_file_by_hash')">get_file_by_hash</a>(<a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it241" onMouseOver="hilite(241)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a>)) or <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l362"><span class="linenum"> 362</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('page', array('id'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>), 'id, legacyfiles', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l363"><span class="linenum"> 363</span></a>              if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('legacyfiles')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/legacyfiles.html">legacyfiles</a> != <a class="constant" onClick="logConstant('RESOURCELIB_LEGACYFILES_ACTIVE')" href="../../_constants/RESOURCELIB_LEGACYFILES_ACTIVE.html" onMouseOver="constPopup(event,'RESOURCELIB_LEGACYFILES_ACTIVE')">RESOURCELIB_LEGACYFILES_ACTIVE</a>) {
<a name="l364"><span class="linenum"> 364</span></a>                  return false;
<a name="l365"><span class="linenum"> 365</span></a>              }
<a name="l366"><span class="linenum"> 366</span></a>              if (!<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="function" onClick="logFunction('resourcelib_try_file_migration')" href="../../_functions/resourcelib_try_file_migration.html" onMouseOver="funcPopup(event,'resourcelib_try_file_migration')">resourcelib_try_file_migration</a>('/'.<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, 'mod_page', 'content', 0)) {
<a name="l367"><span class="linenum"> 367</span></a>                  return false;
<a name="l368"><span class="linenum"> 368</span></a>              }
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">            //file migrate - update flag</span>
<a name="l370"><span class="linenum"> 370</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('legacyfileslast')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/legacyfileslast.html">legacyfileslast</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l371"><span class="linenum"> 371</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('page', <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>);
<a name="l372"><span class="linenum"> 372</span></a>          }
<a name="l373"><span class="linenum"> 373</span></a>  
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">        // finally send the file</span>
<a name="l375"><span class="linenum"> 375</span></a>          <a class="function" onClick="logFunction('send_stored_file')" href="../../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>, null, 0, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l376"><span class="linenum"> 376</span></a>      }
<a name="l377"><span class="linenum"> 377</span></a>  }
<a name="l378"><span class="linenum"> 378</span></a>  
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">/**</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment"> * Return a list of page types</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment"> * @param string $pagetype current page type</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment"> * @param stdClass $parentcontext Block's parent context</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment"> * @param stdClass $currentcontext Current context of block</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment"> */</span>
<a name="l385"><span class="linenum"> 385</span></a>  function <a class="function" onClick="logFunction('page_page_type_list')" href="../../_functions/page_page_type_list.html" onMouseOver="funcPopup(event,'page_page_type_list')">page_page_type_list</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../../_variables/parentcontext.html">$parentcontext</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../../_variables/currentcontext.html">$currentcontext</a>) {
<a name="l386"><span class="linenum"> 386</span></a>      <a class="var it9844" onMouseOver="hilite(9844)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a> = array('mod-page-*'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-page-x', 'page'));
<a name="l387"><span class="linenum"> 387</span></a>      return <a class="var it9844" onMouseOver="hilite(9844)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a>;
<a name="l388"><span class="linenum"> 388</span></a>  }
<a name="l389"><span class="linenum"> 389</span></a>  
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment">/**</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment"> * Export page resource contents</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment"> *</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment"> * @return array of file content</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment"> */</span>
<a name="l395"><span class="linenum"> 395</span></a>  function <a class="function" onClick="logFunction('page_export_contents')" href="../../_functions/page_export_contents.html" onMouseOver="funcPopup(event,'page_export_contents')">page_export_contents</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>) {
<a name="l396"><span class="linenum"> 396</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l397"><span class="linenum"> 397</span></a>      <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a> = array();
<a name="l398"><span class="linenum"> 398</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l399"><span class="linenum"> 399</span></a>  
<a name="l400"><span class="linenum"> 400</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('page', array('id'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l401"><span class="linenum"> 401</span></a>  
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">    // page contents</span>
<a name="l403"><span class="linenum"> 403</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l404"><span class="linenum"> 404</span></a>      <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_page', 'content', 0, 'sortorder DESC, id ASC', false);
<a name="l405"><span class="linenum"> 405</span></a>      foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> as <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../../_variables/fileinfo.html">$fileinfo</a>) {
<a name="l406"><span class="linenum"> 406</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = array();
<a name="l407"><span class="linenum"> 407</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['type']         = 'file';
<a name="l408"><span class="linenum"> 408</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['filename']     = <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../../_variables/fileinfo.html">$fileinfo</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>();
<a name="l409"><span class="linenum"> 409</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['filepath']     = <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../../_variables/fileinfo.html">$fileinfo</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>();
<a name="l410"><span class="linenum"> 410</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['filesize']     = <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../../_variables/fileinfo.html">$fileinfo</a>-&gt;<a class="function" onClick="logFunction('get_filesize')" href="../../_functions/get_filesize.html" onMouseOver="funcPopup(event,'get_filesize')">get_filesize</a>();
<a name="l411"><span class="linenum"> 411</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['fileurl']      = <a class="function" onClick="logFunction('file_encode_url')" href="../../_functions/file_encode_url.html" onMouseOver="funcPopup(event,'file_encode_url')">file_encode_url</a>(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/&quot; . <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>, '/'.<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'/mod_page/content/'.<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('revision')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/revision.html">revision</a>.<a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../../_variables/fileinfo.html">$fileinfo</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>().<a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../../_variables/fileinfo.html">$fileinfo</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>(), true);
<a name="l412"><span class="linenum"> 412</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['timecreated']  = <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../../_variables/fileinfo.html">$fileinfo</a>-&gt;<a class="function" onClick="logFunction('get_timecreated')" href="../../_functions/get_timecreated.html" onMouseOver="funcPopup(event,'get_timecreated')">get_timecreated</a>();
<a name="l413"><span class="linenum"> 413</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['timemodified'] = <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../../_variables/fileinfo.html">$fileinfo</a>-&gt;<a class="function" onClick="logFunction('get_timemodified')" href="../../_functions/get_timemodified.html" onMouseOver="funcPopup(event,'get_timemodified')">get_timemodified</a>();
<a name="l414"><span class="linenum"> 414</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['sortorder']    = <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../../_variables/fileinfo.html">$fileinfo</a>-&gt;<a class="function" onClick="logFunction('get_sortorder')" href="../../_functions/get_sortorder.html" onMouseOver="funcPopup(event,'get_sortorder')">get_sortorder</a>();
<a name="l415"><span class="linenum"> 415</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['userid']       = <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../../_variables/fileinfo.html">$fileinfo</a>-&gt;<a class="function" onClick="logFunction('get_userid')" href="../../_functions/get_userid.html" onMouseOver="funcPopup(event,'get_userid')">get_userid</a>();
<a name="l416"><span class="linenum"> 416</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['author']       = <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../../_variables/fileinfo.html">$fileinfo</a>-&gt;<a class="function" onClick="logFunction('get_author')" href="../../_functions/get_author.html" onMouseOver="funcPopup(event,'get_author')">get_author</a>();
<a name="l417"><span class="linenum"> 417</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['license']      = <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../../_variables/fileinfo.html">$fileinfo</a>-&gt;<a class="function" onClick="logFunction('get_license')" href="../../_functions/get_license.html" onMouseOver="funcPopup(event,'get_license')">get_license</a>();
<a name="l418"><span class="linenum"> 418</span></a>          <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a>[] = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>;
<a name="l419"><span class="linenum"> 419</span></a>      }
<a name="l420"><span class="linenum"> 420</span></a>  
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">    // page html conent</span>
<a name="l422"><span class="linenum"> 422</span></a>      <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = 'index.html';
<a name="l423"><span class="linenum"> 423</span></a>      <a class="var it289" onMouseOver="hilite(289)" onMouseOut="lolite()" onClick="logVariable('pagefile')" href="../../_variables/pagefile.html">$pagefile</a> = array();
<a name="l424"><span class="linenum"> 424</span></a>      <a class="var it289" onMouseOver="hilite(289)" onMouseOut="lolite()" onClick="logVariable('pagefile')" href="../../_variables/pagefile.html">$pagefile</a>['type']         = 'file';
<a name="l425"><span class="linenum"> 425</span></a>      <a class="var it289" onMouseOver="hilite(289)" onMouseOut="lolite()" onClick="logVariable('pagefile')" href="../../_variables/pagefile.html">$pagefile</a>['filename']     = <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>;
<a name="l426"><span class="linenum"> 426</span></a>      <a class="var it289" onMouseOver="hilite(289)" onMouseOut="lolite()" onClick="logVariable('pagefile')" href="../../_variables/pagefile.html">$pagefile</a>['filepath']     = '/';
<a name="l427"><span class="linenum"> 427</span></a>      <a class="var it289" onMouseOver="hilite(289)" onMouseOut="lolite()" onClick="logVariable('pagefile')" href="../../_variables/pagefile.html">$pagefile</a>['filesize']     = 0;
<a name="l428"><span class="linenum"> 428</span></a>      <a class="var it289" onMouseOver="hilite(289)" onMouseOut="lolite()" onClick="logVariable('pagefile')" href="../../_variables/pagefile.html">$pagefile</a>['fileurl']      = <a class="function" onClick="logFunction('file_encode_url')" href="../../_functions/file_encode_url.html" onMouseOver="funcPopup(event,'file_encode_url')">file_encode_url</a>(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/&quot; . <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>, '/'.<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'/mod_page/content/' . <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>, true);
<a name="l429"><span class="linenum"> 429</span></a>      <a class="var it289" onMouseOver="hilite(289)" onMouseOut="lolite()" onClick="logVariable('pagefile')" href="../../_variables/pagefile.html">$pagefile</a>['timecreated']  = null;
<a name="l430"><span class="linenum"> 430</span></a>      <a class="var it289" onMouseOver="hilite(289)" onMouseOut="lolite()" onClick="logVariable('pagefile')" href="../../_variables/pagefile.html">$pagefile</a>['timemodified'] = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>;
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">    // make this file as main file</span>
<a name="l432"><span class="linenum"> 432</span></a>      <a class="var it289" onMouseOver="hilite(289)" onMouseOut="lolite()" onClick="logVariable('pagefile')" href="../../_variables/pagefile.html">$pagefile</a>['sortorder']    = 1;
<a name="l433"><span class="linenum"> 433</span></a>      <a class="var it289" onMouseOver="hilite(289)" onMouseOut="lolite()" onClick="logVariable('pagefile')" href="../../_variables/pagefile.html">$pagefile</a>['userid']       = null;
<a name="l434"><span class="linenum"> 434</span></a>      <a class="var it289" onMouseOver="hilite(289)" onMouseOut="lolite()" onClick="logVariable('pagefile')" href="../../_variables/pagefile.html">$pagefile</a>['author']       = null;
<a name="l435"><span class="linenum"> 435</span></a>      <a class="var it289" onMouseOver="hilite(289)" onMouseOut="lolite()" onClick="logVariable('pagefile')" href="../../_variables/pagefile.html">$pagefile</a>['license']      = null;
<a name="l436"><span class="linenum"> 436</span></a>      <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a>[] = <a class="var it289" onMouseOver="hilite(289)" onMouseOut="lolite()" onClick="logVariable('pagefile')" href="../../_variables/pagefile.html">$pagefile</a>;
<a name="l437"><span class="linenum"> 437</span></a>  
<a name="l438"><span class="linenum"> 438</span></a>      return <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a>;
<a name="l439"><span class="linenum"> 439</span></a>  }
<a name="l440"><span class="linenum"> 440</span></a>  
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">/**</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment"> * Register the ability to handle drag and drop file uploads</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment"> * @return array containing details of the files / types the mod can handle</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment"> */</span>
<a name="l445"><span class="linenum"> 445</span></a>  function <a class="function" onClick="logFunction('page_dndupload_register')" href="../../_functions/page_dndupload_register.html" onMouseOver="funcPopup(event,'page_dndupload_register')">page_dndupload_register</a>() {
<a name="l446"><span class="linenum"> 446</span></a>      return array('types' =&gt; array(
<a name="l447"><span class="linenum"> 447</span></a>                       array('identifier' =&gt; 'text/html', 'message' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('createpage', 'page')),
<a name="l448"><span class="linenum"> 448</span></a>                       array('identifier' =&gt; 'text', 'message' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('createpage', 'page'))
<a name="l449"><span class="linenum"> 449</span></a>                   ));
<a name="l450"><span class="linenum"> 450</span></a>  }
<a name="l451"><span class="linenum"> 451</span></a>  
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">/**</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment"> * Handle a file that has been uploaded</span>
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment"> * @param object $uploadinfo details of the file / content that has been uploaded</span>
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment"> * @return int instance id of the newly created mod</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment"> */</span>
<a name="l457"><span class="linenum"> 457</span></a>  function <a class="function" onClick="logFunction('page_dndupload_handle')" href="../../_functions/page_dndupload_handle.html" onMouseOver="funcPopup(event,'page_dndupload_handle')">page_dndupload_handle</a>(<a class="var it11945" onMouseOver="hilite(11945)" onMouseOut="lolite()" onClick="logVariable('uploadinfo')" href="../../_variables/uploadinfo.html">$uploadinfo</a>) {
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">    // Gather the required info.</span>
<a name="l459"><span class="linenum"> 459</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l460"><span class="linenum"> 460</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('course')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/course.html">course</a> = <a class="var it11945" onMouseOver="hilite(11945)" onMouseOut="lolite()" onClick="logVariable('uploadinfo')" href="../../_variables/uploadinfo.html">$uploadinfo</a>-&gt;<a onClick="logVariable('course')" class="var it43094" onMouseOver="hilite(43094)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>-&gt;id;
<a name="l461"><span class="linenum"> 461</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it11945" onMouseOver="hilite(11945)" onMouseOut="lolite()" onClick="logVariable('uploadinfo')" href="../../_variables/uploadinfo.html">$uploadinfo</a>-&gt;<a onClick="logVariable('displayname')" class="var it43094" onMouseOver="hilite(43094)" onMouseOut="lolite()" href="../../_variables/displayname.html">displayname</a>;
<a name="l462"><span class="linenum"> 462</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('intro')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a> = '&lt;p&gt;'.<a class="var it11945" onMouseOver="hilite(11945)" onMouseOut="lolite()" onClick="logVariable('uploadinfo')" href="../../_variables/uploadinfo.html">$uploadinfo</a>-&gt;<a onClick="logVariable('displayname')" class="var it43094" onMouseOver="hilite(43094)" onMouseOut="lolite()" href="../../_variables/displayname.html">displayname</a>.'&lt;/p&gt;';
<a name="l463"><span class="linenum"> 463</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('introformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/introformat.html">introformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l464"><span class="linenum"> 464</span></a>      if (<a class="var it11945" onMouseOver="hilite(11945)" onMouseOut="lolite()" onClick="logVariable('uploadinfo')" href="../../_variables/uploadinfo.html">$uploadinfo</a>-&gt;<a onClick="logVariable('type')" class="var it43094" onMouseOver="hilite(43094)" onMouseOut="lolite()" href="../../_variables/type.html">type</a> == 'text/html') {
<a name="l465"><span class="linenum"> 465</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('contentformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/contentformat.html">contentformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l466"><span class="linenum"> 466</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('content')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it11945" onMouseOver="hilite(11945)" onMouseOut="lolite()" onClick="logVariable('uploadinfo')" href="../../_variables/uploadinfo.html">$uploadinfo</a>-&gt;<a onClick="logVariable('content')" class="var it43094" onMouseOver="hilite(43094)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>, <a class="constant" onClick="logConstant('PARAM_CLEANHTML')" href="../../_constants/PARAM_CLEANHTML.html" onMouseOver="constPopup(event,'PARAM_CLEANHTML')">PARAM_CLEANHTML</a>);
<a name="l467"><span class="linenum"> 467</span></a>      } else {
<a name="l468"><span class="linenum"> 468</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('contentformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/contentformat.html">contentformat</a> = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l469"><span class="linenum"> 469</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('content')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it11945" onMouseOver="hilite(11945)" onMouseOut="lolite()" onClick="logVariable('uploadinfo')" href="../../_variables/uploadinfo.html">$uploadinfo</a>-&gt;<a onClick="logVariable('content')" class="var it43094" onMouseOver="hilite(43094)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>, <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l470"><span class="linenum"> 470</span></a>      }
<a name="l471"><span class="linenum"> 471</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a> = <a class="var it11945" onMouseOver="hilite(11945)" onMouseOut="lolite()" onClick="logVariable('uploadinfo')" href="../../_variables/uploadinfo.html">$uploadinfo</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it43094" onMouseOver="hilite(43094)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>;
<a name="l472"><span class="linenum"> 472</span></a>  
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">    // Set the display options to the site defaults.</span>
<a name="l474"><span class="linenum"> 474</span></a>      <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a> = <a class="function" onClick="logFunction('get_config')" href="../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('page');
<a name="l475"><span class="linenum"> 475</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('display')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/display.html">display</a> = <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('display')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../../_variables/display.html">display</a>;
<a name="l476"><span class="linenum"> 476</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('popupheight')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/popupheight.html">popupheight</a> = <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('popupheight')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../../_variables/popupheight.html">popupheight</a>;
<a name="l477"><span class="linenum"> 477</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('popupwidth')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/popupwidth.html">popupwidth</a> = <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('popupwidth')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../../_variables/popupwidth.html">popupwidth</a>;
<a name="l478"><span class="linenum"> 478</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('printheading')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/printheading.html">printheading</a> = <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('printheading')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../../_variables/printheading.html">printheading</a>;
<a name="l479"><span class="linenum"> 479</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('printintro')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/printintro.html">printintro</a> = <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('printintro')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../../_variables/printintro.html">printintro</a>;
<a name="l480"><span class="linenum"> 480</span></a>  
<a name="l481"><span class="linenum"> 481</span></a>      return <a class="function" onClick="logFunction('page_add_instance')" href="../../_functions/page_add_instance.html" onMouseOver="funcPopup(event,'page_add_instance')">page_add_instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, null);
<a name="l482"><span class="linenum"> 482</span></a>  }
<a name="l483"><span class="linenum"> 483</span></a>  
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment">/**</span>
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment"> * Mark the activity completed (if required) and trigger the course_module_viewed event.</span>
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment"> *</span>
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment"> * @param  stdClass $page       page object</span>
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment"> * @param  stdClass $course     course object</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment"> * @param  stdClass $cm         course module object</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment"> * @param  stdClass $context    context object</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment"> * @since Moodle 3.0</span>
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment"> */</span>
<a name="l493"><span class="linenum"> 493</span></a>  function <a class="function" onClick="logFunction('page_view')" href="../../_functions/page_view.html" onMouseOver="funcPopup(event,'page_view')">page_view</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l494"><span class="linenum"> 494</span></a>  
<a name="l495"><span class="linenum"> 495</span></a>  <span class="comment">    // Trigger course_module_viewed event.</span>
<a name="l496"><span class="linenum"> 496</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(
<a name="l497"><span class="linenum"> 497</span></a>          'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l498"><span class="linenum"> 498</span></a>          'objectid' =&gt; <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>-&gt;id
<a name="l499"><span class="linenum"> 499</span></a>      );
<a name="l500"><span class="linenum"> 500</span></a>  
<a name="l501"><span class="linenum"> 501</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_page\event\<a class="class" onClick="logClass('course_module_viewed')" href="../../_classes/course_module_viewed.html" onMouseOver="classPopup(event,'course_module_viewed')">course_module_viewed</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l502"><span class="linenum"> 502</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('course_modules', <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l503"><span class="linenum"> 503</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('course', <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l504"><span class="linenum"> 504</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('page', <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>);
<a name="l505"><span class="linenum"> 505</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">    // Completion.</span>
<a name="l508"><span class="linenum"> 508</span></a>      <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l509"><span class="linenum"> 509</span></a>      <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('set_module_viewed')" href="../../_functions/set_module_viewed.html" onMouseOver="funcPopup(event,'set_module_viewed')">set_module_viewed</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l510"><span class="linenum"> 510</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'format_text': ['format_text', 'Formats a text string coming from the search engine. ', [['search/classes','document.php',606],['lib/classes','grading_external.php',182],['search/engine/solr/classes','document.php',129],['lib','weblib.php',1158],['lib','tablelib.php',860],['lib','tablelib.php',1667],['question/type','questionbase.php',345]], 322],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'get_filename': ['get_filename', 'Returns file name ', [['lib/filebrowser','virtual_root_file.php',227],['lib/filestorage','stored_file.php',699],['lib','medialib.php',169]], 248],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'page_export_contents': ['page_export_contents', 'Export page resource contents ', [['mod/page','lib.php',390]], 0],
'file_encode_url': ['file_encode_url', 'Encodes file serving url ', [['lib','filelib.php',42]], 28],
'get_timecreated': ['get_timecreated', 'Returns time created unix timestamp if known ', [['lib/filebrowser','file_info.php',286],['lib/filebrowser','virtual_root_file.php',263],['lib/filebrowser','file_info_stored.php',249],['lib/filestorage','stored_file.php',747],['question/engine','questionattemptstep.php',176],['question/engine','questionattemptstep.php',686]], 54],
'page_page_type_list': ['page_page_type_list', 'Return a list of page types ', [['mod/page','lib.php',379]], 0],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'page_dndupload_register': ['page_dndupload_register', 'Register the ability to handle drag and drop file uploads ', [['mod/page','lib.php',441]], 0],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',840]], 332],
'open': ['open', 'Open or create archive (depending on $mode). ', [['lib/filestorage','zip_archive.php',73],['auth/fc','fcFPP.php',48],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/searchreplace','editor_plugin_src.js',14],['lib/spout/src/Spout/Reader','ReaderInterface.php',12],['auth/cas/CAS/CAS/ProxiedService','Imap.php',179],['lib/tcpdf','tcpdf.php',2931],['lib/google/src/Google/Logger','File.php',96],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',56],['lib/spout/src/Spout/Reader/Wrapper','XMLReader.php',17],['lib/spout/src/Spout/Reader','AbstractReader.php',61],['lib/pear/Net','GeoIP.php',400],['lib/pear/Auth','RADIUS.php',271],['lib/pear/Auth','RADIUS.php',593],['lib/pear/Auth','RADIUS.php',898],['lib','webdavlib.php',156]], 261],
'format_module_intro': ['format_module_intro', 'Formats activity intro text ', [['lib','weblib.php',1542]], 65],
'set_module_viewed': ['set_module_viewed', 'Update the module completion status (set it viewed). ', [['mod/assign','locallib.php',8075],['lib','completionlib.php',657]], 29],
'page_view': ['page_view', 'Mark the activity completed (if required) and trigger the course_module_viewed event. ', [['mod/page','lib.php',484]], 3],
'resourcelib_try_file_migration': ['resourcelib_try_file_migration', 'Try on demand migration of file from old course files ', [['lib','resourcelib.php',52]], 2],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'get_author': ['get_author', 'Get an author for the feed ', [['lib/simplepie/library','SimplePie.php',2098],['lib/simplepie/library/SimplePie','Source.php',210],['lib/filebrowser','file_info.php',312],['lib/filebrowser','virtual_root_file.php',326],['lib/filebrowser','file_info_stored.php',285],['lib/simplepie/library/SimplePie','Item.php',495],['lib/filestorage','stored_file.php',834]], 20],
'send_stored_file': ['send_stored_file', 'Handles the sending of file data to the user\'s browser, including support for byteranges etc. ', [['lib','filelib.php',2192]], 75],
'file_rewrite_pluginfile_urls': ['file_rewrite_pluginfile_urls', 'Convert encoded URLs in $text from the @@PLUGINFILE@@/... form to an actual URL. Passing a new option reverse = true in the $options var will make the function to convert actual URLs in $text to encoded URLs in the @@PLUGINFILE@@ form. ', [['lib','filelib.php',446]], 96],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',782],['lib','externallib.php',1134]], 216],
'page_supports': ['page_supports', 'List of features supported in Page module ', [['mod/page','lib.php',26]], 0],
'send_file': ['send_file', 'Repository method to serve the referenced file ', [['repository/boxnet','lib.php',482],['lib','filelib.php',2073],['repository/dropbox','lib.php',670],['repository','lib.php',1200],['repository/equella','lib.php',243],['lib/filestorage','stored_file.php',999],['lib','googleapi.php',142],['lib','googleapi.php',253],['repository/filesystem','lib.php',601],['lib/portfolio','plugin.php',811]], 26],
'get_file': ['get_file', 'Downloads a repository file and saves to a path. ', [['repository/boxnet','lib.php',179],['repository/flickr_public','lib.php',453],['repository/dropbox','lib.php',410],['repository/skydrive','lib.php',130],['repository','lib.php',1647],['repository/s3','lib.php',227],['repository/equella','lib.php',166],['mod/data/field/picture','field.class.php',126],['mod/data/field/file','field.class.php',123],['repository/googledocs','lib.php',408],['lib/filestorage','file_storage.php',700],['repository/webdav','lib.php',73],['repository/filesystem','lib.php',398],['repository/flickr','lib.php',277],['lib','externallib.php',1076],['repository/dropbox','locallib.php',114],['lib','webdavlib.php',391]], 169],
'page_get_editor_options': ['page_get_editor_options', '', [['mod/page','locallib.php',51]], 4],
'require_course_login': ['require_course_login', 'Weaker version of require_login() ', [['lib','moodlelib.php',2902]], 68],
'page_get_file_info': ['page_get_file_info', 'File browsing support for page module content area. ', [['mod/page','lib.php',251]], 0],
'get_timemodified': ['get_timemodified', 'Returns time modified unix timestamp if known ', [['lib/filebrowser','file_info.php',295],['lib/filebrowser','virtual_root_file.php',272],['lib/filebrowser','file_info_stored.php',258],['lib/filestorage','stored_file.php',756]], 63],
'page_add_instance': ['page_add_instance', 'Add page instance. ', [['mod/page','lib.php',92]], 1],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'get_filesize': ['get_filesize', 'Returns file size in bytes, null for directories ', [['lib/filebrowser','file_info.php',268],['lib/filebrowser','virtual_root_file.php',245],['lib/filebrowser','file_info_stored.php',221],['lib/filestorage','stored_file.php',717]], 83],
'get_config': ['get_config', 'Config get method. ', [['lib/classes/antivirus','scanner.php',54],['competency/classes','competency_rule.php',59],['question/engine','bank.php',109],['admin/tool/log/classes/helper','store.php',63],['lib','moodlelib.php',1409],['lib','enrollib.php',1142],['lib/editor/tinymce/classes','plugin.php',73],['competency/classes','competency_rule_points.php',43],['search/classes','base.php',169],['mod/assign','assignmentplugin.php',345],['lib/portfolio','plugin.php',546]], 934],
'page_update_instance': ['page_update_instance', 'Update page instance. ', [['mod/page','lib.php',134]], 0],
'get_userid': ['get_userid', 'Returns user ID ', [['lib/filebrowser','virtual_root_file.php',236],['mod/quiz','attemptlib.php',804],['lib/filestorage','stored_file.php',708],['mod/data','lib.php',2585],['backup/util/plan','restore_task.class.php',54],['backup/util/plan','restore_plan.class.php',115],['backup/controller','backup_controller.class.php',283],['backup/controller','restore_controller.class.php',285]], 220],
'page_get_view_actions': ['page_get_view_actions', 'List the actions that correspond to a view of this module. This is used by the participation report. ', [['mod/page','lib.php',64]], 0],
'page_get_file_areas': ['page_get_file_areas', 'Lists all browsable file areas ', [['mod/page','lib.php',235]], 0],
'page_reset_userdata': ['page_reset_userdata', 'This function is used by the reset_course_userdata function in moodlelib. ', [['mod/page','lib.php',55]], 0],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'page_get_post_actions': ['page_get_post_actions', 'List the actions that correspond to a post of this module. This is used by the participation report. ', [['mod/page','lib.php',78]], 0],
'page_dndupload_handle': ['page_dndupload_handle', 'Handle a file that has been uploaded ', [['mod/page','lib.php',452]], 0],
'get_license': ['get_license', 'Returns the license type of the file ', [['lib/filebrowser','file_info.php',304],['lib/filebrowser','virtual_root_file.php',317],['lib/filebrowser','file_info_stored.php',276],['lib/filestorage','stored_file.php',814]], 19],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'get_sortorder': ['get_sortorder', 'Returns the sortorder of this grade_item. This method is also available in grade_category, for cases where the object type is not know. ', [['lib/grade','grade_item.php',1286],['lib/grade','grade_category.php',2392],['lib/filebrowser','file_info.php',330],['lib/filebrowser','virtual_root_file.php',344],['lib/filebrowser','file_info_stored.php',303],['repository','lib.php',197],['lib/filestorage','stored_file.php',875]], 127],
'get_filepath': ['get_filepath', 'Returns file path ', [['lib/filebrowser','virtual_root_file.php',218],['lib/filestorage','stored_file.php',690],['backup/util/ui','restore_ui_stage.class.php',547]], 147],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'file_save_draft_area_files': ['file_save_draft_area_files', 'Saves files from a draft file area to a real one (merging the list of files). Can rewrite URLs in some content at the same time if desired. ', [['lib','filelib.php',778]], 61],
'is_directory': ['is_directory', 'Whether or not this is a directory ', [['lib/filebrowser','file_info_context_system.php',133],['mod/lesson/classes','file_info.php',94],['mod/imscp','locallib.php',328],['lib/filebrowser','file_info_context_coursecat.php',146],['mod/book','locallib.php',463],['lib/filebrowser','file_info_context_user.php',265],['lib/filebrowser','virtual_root_file.php',60],['mod/data','locallib.php',477],['lib/filebrowser','file_info_stored.php',267],['lib/filestorage','stored_file.php',310],['mod/workshop','fileinfolib.php',82],['mod/workshop','fileinfolib.php',241],['lib/filebrowser','file_info_context_module.php',249],['mod/glossary','locallib.php',525],['lib/filebrowser','file_info_context_course.php',372],['lib/filebrowser','file_info_context_course.php',657],['lib/filebrowser','file_info_context_course.php',803],['mod/forum','locallib.php',463]], 140],
'page_get_coursemodule_info': ['page_get_coursemodule_info', 'Given a course_module object, this function returns any "extra" information that may be needed when printing this activity in a course listing. ', [['mod/page','lib.php',193]], 0],
'page_pluginfile': ['page_pluginfile', 'Serves the page files. ', [['mod/page','lib.php',299]], 0],
'page_get_extra_capabilities': ['page_get_extra_capabilities', 'Returns all other caps used in module ', [['mod/page','lib.php',47]], 0],
'page_delete_instance': ['page_delete_instance', 'Delete page instance. ', [['mod/page','lib.php',174]], 0],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'get_file_by_hash': ['get_file_by_hash', 'Fetch file using local file full pathname hash ', [['lib/filestorage','file_storage.php',679]], 73],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'is_null': ['is_null', '', [], 2003],
'implode': ['implode', '', [], 1281],
'time': ['time', '', [], 1959],
'array_shift': ['array_shift', '', [], 700],
'defined': ['defined', '', [], 4731],
'sha1': ['sha1', '', [], 186],
'str_replace': ['str_replace', '', [], 1648],
'unserialize': ['unserialize', '', [], 192],
'serialize': ['serialize', '', [], 282]};
CLASS_DATA={
'completion_info': ['completion_info', 'Class represents completion information for a course. ', [['lib','completionlib.php',210]], 141],
'page_content_file_info': ['page_content_file_info', 'File browsing support class ', [['mod/page','locallib.php',33]], 1],
'course_module_viewed': ['course_module_viewed', 'The mod_page course module viewed event class. ', [['mod/page/classes/event','course_module_viewed.php',28],['mod/chat/classes/event','course_module_viewed.php',29],['mod/quiz/classes/event','course_module_viewed.php',29],['mod/data/classes/event','course_module_viewed.php',30],['mod/choice/classes/event','course_module_viewed.php',28],['mod/forum/classes/event','course_module_viewed.php',29],['mod/resource/classes/event','course_module_viewed.php',29],['mod/book/classes/event','course_module_viewed.php',28],['mod/imscp/classes/event','course_module_viewed.php',30],['mod/lti/classes/event','course_module_viewed.php',29],['mod/feedback/classes/event','course_module_viewed.php',28],['mod/survey/classes/event','course_module_viewed.php',29],['mod/folder/classes/event','course_module_viewed.php',29],['mod/glossary/classes/event','course_module_viewed.php',28],['mod/scorm/classes/event','course_module_viewed.php',28],['mod/url/classes/event','course_module_viewed.php',29],['mod/wiki/classes/event','course_module_viewed.php',28],['lib/tests/fixtures','event_fixtures.php',232],['mod/lesson/classes/event','course_module_viewed.php',30],['mod/workshop/classes/event','course_module_viewed.php',32]], 37],
'virtual_root_file': ['virtual_root_file', 'Represents the root directory of an empty file area in the tree navigated by {@link file_browser}. ', [['lib/filebrowser','virtual_root_file.php',28]], 23],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'cached_cm_info': ['cached_cm_info', 'Class that is the return value for the _get_coursemodule_info module API function. ', [['lib','modinfolib.php',2265]], 7]};
CONST_DATA={
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'FEATURE_GRADE_HAS_GRADE': ['FEATURE_GRADE_HAS_GRADE', '', [['lib','moodlelib.php',394]], 29],
'FEATURE_COMPLETION_TRACKS_VIEWS': ['FEATURE_COMPLETION_TRACKS_VIEWS', '', [['lib','moodlelib.php',405]], 23],
'FEATURE_GRADE_OUTCOMES': ['FEATURE_GRADE_OUTCOMES', '', [['lib','moodlelib.php',396]], 23],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 1121],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 466],
'FEATURE_BACKUP_MOODLE2': ['FEATURE_BACKUP_MOODLE2', '', [['lib','moodlelib.php',434]], 35],
'PARAM_CLEANHTML': ['PARAM_CLEANHTML', '', [['lib','moodlelib.php',123]], 44],
'FEATURE_SHOW_DESCRIPTION': ['FEATURE_SHOW_DESCRIPTION', '', [['lib','moodlelib.php',437]], 22],
'PARAM_TEXT': ['PARAM_TEXT', '', [['lib','moodlelib.php',228]], 542],
'FORMAT_PLAIN': ['FORMAT_PLAIN', '', [['lib','weblib.php',52]], 152],
'FEATURE_MOD_INTRO': ['FEATURE_MOD_INTRO', '', [['lib','moodlelib.php',426]], 31],
'RESOURCELIB_DISPLAY_POPUP': ['RESOURCELIB_DISPLAY_POPUP', '', [['lib','resourcelib.php',42]], 32],
'FEATURE_MOD_ARCHETYPE': ['FEATURE_MOD_ARCHETYPE', '', [['lib','moodlelib.php',424]], 13],
'FEATURE_GROUPINGS': ['FEATURE_GROUPINGS', '', [['lib','moodlelib.php',416]], 23],
'FEATURE_GROUPS': ['FEATURE_GROUPS', '', [['lib','moodlelib.php',414]], 25],
'MOD_ARCHETYPE_RESOURCE': ['MOD_ARCHETYPE_RESOURCE', '', [['lib','moodlelib.php',445]], 13],
'RESOURCELIB_LEGACYFILES_ACTIVE': ['RESOURCELIB_LEGACYFILES_ACTIVE', '', [['lib','resourcelib.php',49]], 7],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
