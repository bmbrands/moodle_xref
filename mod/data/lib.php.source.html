<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/data/lib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/data';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/data/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * @package   mod_data</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> */</span>
<a name="l23"><span class="linenum">  23</span></a>  
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment">// Some constants</span>
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a> ('<a class="constant" onClick="logConstant('DATA_MAX_ENTRIES')" href="../../_constants/DATA_MAX_ENTRIES.html" onMouseOver="constPopup(event,'DATA_MAX_ENTRIES')">DATA_MAX_ENTRIES</a>', 50);
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a> ('<a class="constant" onClick="logConstant('DATA_PERPAGE_SINGLE')" href="../../_constants/DATA_PERPAGE_SINGLE.html" onMouseOver="constPopup(event,'DATA_PERPAGE_SINGLE')">DATA_PERPAGE_SINGLE</a>', 1);
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a> ('<a class="constant" onClick="logConstant('DATA_FIRSTNAME')" href="../../_constants/DATA_FIRSTNAME.html" onMouseOver="constPopup(event,'DATA_FIRSTNAME')">DATA_FIRSTNAME</a>', -1);
<a name="l29"><span class="linenum">  29</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a> ('<a class="constant" onClick="logConstant('DATA_LASTNAME')" href="../../_constants/DATA_LASTNAME.html" onMouseOver="constPopup(event,'DATA_LASTNAME')">DATA_LASTNAME</a>', -2);
<a name="l30"><span class="linenum">  30</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a> ('<a class="constant" onClick="logConstant('DATA_APPROVED')" href="../../_constants/DATA_APPROVED.html" onMouseOver="constPopup(event,'DATA_APPROVED')">DATA_APPROVED</a>', -3);
<a name="l31"><span class="linenum">  31</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a> ('<a class="constant" onClick="logConstant('DATA_TIMEADDED')" href="../../_constants/DATA_TIMEADDED.html" onMouseOver="constPopup(event,'DATA_TIMEADDED')">DATA_TIMEADDED</a>', 0);
<a name="l32"><span class="linenum">  32</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a> ('<a class="constant" onClick="logConstant('DATA_TIMEMODIFIED')" href="../../_constants/DATA_TIMEMODIFIED.html" onMouseOver="constPopup(event,'DATA_TIMEMODIFIED')">DATA_TIMEMODIFIED</a>', -4);
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a> ('<a class="constant" onClick="logConstant('DATA_CAP_EXPORT')" href="../../_constants/DATA_CAP_EXPORT.html" onMouseOver="constPopup(event,'DATA_CAP_EXPORT')">DATA_CAP_EXPORT</a>', 'mod/data:viewalluserpresets');
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('DATA_PRESET_COMPONENT')" href="../../_constants/DATA_PRESET_COMPONENT.html" onMouseOver="constPopup(event,'DATA_PRESET_COMPONENT')">DATA_PRESET_COMPONENT</a>', 'mod_data');
<a name="l37"><span class="linenum">  37</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('DATA_PRESET_FILEAREA')" href="../../_constants/DATA_PRESET_FILEAREA.html" onMouseOver="constPopup(event,'DATA_PRESET_FILEAREA')">DATA_PRESET_FILEAREA</a>', 'site_presets');
<a name="l38"><span class="linenum">  38</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('DATA_PRESET_CONTEXT')" href="../../_constants/DATA_PRESET_CONTEXT.html" onMouseOver="constPopup(event,'DATA_PRESET_CONTEXT')">DATA_PRESET_CONTEXT</a>', <a class="constant" onClick="logConstant('SYSCONTEXTID')" href="../../_constants/SYSCONTEXTID.html" onMouseOver="constPopup(event,'SYSCONTEXTID')">SYSCONTEXTID</a>);
<a name="l39"><span class="linenum">  39</span></a>  
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">// Users having assigned the default role &quot;Non-editing teacher&quot; can export database records</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">// Using the mod/data capability &quot;viewalluserpresets&quot; existing in Moodle 1.9.x.</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">// In Moodle &gt;= 2, new roles may be introduced and used instead.</span>
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">/**</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * @package   mod_data</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment"> */</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('data_field_base')" href="../../_classes/data_field_base.html" onMouseOver="classPopup(event,'data_field_base')">data_field_base</a> {     // Base class for Database Field Types (see field<span class="comment">/*/field.class.php)</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"></span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">    /** @var string Subclasses must override the type with their name */</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">    var $type = 'unknown';</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">    /** @var object The database object that this field belongs to */</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">    var $data = NULL;</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">    /** @var object The field object itself, if we know it */</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">    var $field = NULL;</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">    /** @var int Width of the icon for this fieldtype */</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">    var $iconwidth = 16;</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">    /** @var int Width of the icon for this fieldtype */</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">    var $iconheight = 16;</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">    /** @var object course module or cmifno */</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">    var $cm;</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">    /** @var object activity context */</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">    var $context;</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment"></span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">    /**</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     * Constructor function</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     *</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">     * @global object</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">     * @uses CONTEXT_MODULE</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment">     * @param int $field</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">     * @param int $data</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     * @param int $cm</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     */</span>
<a name="l75"><span class="linenum">  75</span></a>      function <a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>=0, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>=0, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>=0) {   // Field or data or both, each can be id or object
<a name="l76"><span class="linenum">  76</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>          if (empty(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) &amp;&amp; empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l79"><span class="linenum">  79</span></a>              <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('missingfield', 'data');
<a name="l80"><span class="linenum">  80</span></a>          }
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>          if (!empty(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>)) {
<a name="l83"><span class="linenum">  83</span></a>              if (<a class="phpfunction" onClick="logFunction('is_object')" href="../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>)) {
<a name="l84"><span class="linenum">  84</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>;  <span class="comment">// Programmer knows what they are doing, we hope</span>
<a name="l85"><span class="linenum">  85</span></a>              } else if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_fields', array('id'=&gt;<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>))) {
<a name="l86"><span class="linenum">  86</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidfieldid', 'data');
<a name="l87"><span class="linenum">  87</span></a>              }
<a name="l88"><span class="linenum">  88</span></a>              if (empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l89"><span class="linenum">  89</span></a>                  if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data', array('id'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;dataid))) {
<a name="l90"><span class="linenum">  90</span></a>                      <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidid', 'data');
<a name="l91"><span class="linenum">  91</span></a>                  }
<a name="l92"><span class="linenum">  92</span></a>              }
<a name="l93"><span class="linenum">  93</span></a>          }
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>)) {         // We need to define this properly
<a name="l96"><span class="linenum">  96</span></a>              if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l97"><span class="linenum">  97</span></a>                  if (<a class="phpfunction" onClick="logFunction('is_object')" href="../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l98"><span class="linenum">  98</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>;  <span class="comment">// Programmer knows what they are doing, we hope</span>
<a name="l99"><span class="linenum">  99</span></a>                  } else if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data', array('id'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>))) {
<a name="l100"><span class="linenum"> 100</span></a>                      <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidid', 'data');
<a name="l101"><span class="linenum"> 101</span></a>                  }
<a name="l102"><span class="linenum"> 102</span></a>              } else {                      // No way to define it!
<a name="l103"><span class="linenum"> 103</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('missingdata', 'data');
<a name="l104"><span class="linenum"> 104</span></a>              }
<a name="l105"><span class="linenum"> 105</span></a>          }
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>          if (<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) {
<a name="l108"><span class="linenum"> 108</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cm')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>;
<a name="l109"><span class="linenum"> 109</span></a>          } else {
<a name="l110"><span class="linenum"> 110</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cm')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('data', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;id);
<a name="l111"><span class="linenum"> 111</span></a>          }
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>)) {         // We need to define some default values
<a name="l114"><span class="linenum"> 114</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('define_default_field')" href="../../_functions/define_default_field.html" onMouseOver="funcPopup(event,'define_default_field')">define_default_field</a>();
<a name="l115"><span class="linenum"> 115</span></a>          }
<a name="l116"><span class="linenum"> 116</span></a>  
<a name="l117"><span class="linenum"> 117</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cm')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id);
<a name="l118"><span class="linenum"> 118</span></a>      }
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>      <span class="comment">/**</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     * This field just sets up a default field object</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     *</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     * @return bool</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     */</span>
<a name="l126"><span class="linenum"> 126</span></a>      function <a class="function" onClick="logFunction('define_default_field')" href="../../_functions/define_default_field.html" onMouseOver="funcPopup(event,'define_default_field')">define_default_field</a>() {
<a name="l127"><span class="linenum"> 127</span></a>          global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l128"><span class="linenum"> 128</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;id)) {
<a name="l129"><span class="linenum"> 129</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>('Programmer error: dataid not defined in field class');
<a name="l130"><span class="linenum"> 130</span></a>          }
<a name="l131"><span class="linenum"> 131</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a> = new stdClass();
<a name="l132"><span class="linenum"> 132</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id = 0;
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;dataid = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;id;
<a name="l134"><span class="linenum"> 134</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;type   = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>;
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;param1 = '';
<a name="l136"><span class="linenum"> 136</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;param2 = '';
<a name="l137"><span class="linenum"> 137</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;param3 = '';
<a name="l138"><span class="linenum"> 138</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name = '';
<a name="l139"><span class="linenum"> 139</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;description = '';
<a name="l140"><span class="linenum"> 140</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;required = false;
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>          return true;
<a name="l143"><span class="linenum"> 143</span></a>      }
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>      <span class="comment">/**</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">     * Set up the field object according to data in an object.  Now is the time to clean it!</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">     *</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     * @return bool</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     */</span>
<a name="l150"><span class="linenum"> 150</span></a>      function <a class="function" onClick="logFunction('define_field')" href="../../_functions/define_field.html" onMouseOver="funcPopup(event,'define_field')">define_field</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l151"><span class="linenum"> 151</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;type        = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>;
<a name="l152"><span class="linenum"> 152</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;dataid      = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;id;
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name        = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l155"><span class="linenum"> 155</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;description = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/description.html">description</a>);
<a name="l156"><span class="linenum"> 156</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;required    = !empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('required')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/required.html">required</a>) ? 1 : 0;
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>          if (isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('param1')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/param1.html">param1</a>)) {
<a name="l159"><span class="linenum"> 159</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;param1 = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('param1')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/param1.html">param1</a>);
<a name="l160"><span class="linenum"> 160</span></a>          }
<a name="l161"><span class="linenum"> 161</span></a>          if (isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('param2')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/param2.html">param2</a>)) {
<a name="l162"><span class="linenum"> 162</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;param2 = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('param2')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/param2.html">param2</a>);
<a name="l163"><span class="linenum"> 163</span></a>          }
<a name="l164"><span class="linenum"> 164</span></a>          if (isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('param3')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/param3.html">param3</a>)) {
<a name="l165"><span class="linenum"> 165</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;param3 = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('param3')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/param3.html">param3</a>);
<a name="l166"><span class="linenum"> 166</span></a>          }
<a name="l167"><span class="linenum"> 167</span></a>          if (isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('param4')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/param4.html">param4</a>)) {
<a name="l168"><span class="linenum"> 168</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;param4 = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('param4')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/param4.html">param4</a>);
<a name="l169"><span class="linenum"> 169</span></a>          }
<a name="l170"><span class="linenum"> 170</span></a>          if (isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('param5')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/param5.html">param5</a>)) {
<a name="l171"><span class="linenum"> 171</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;param5 = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('param5')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/param5.html">param5</a>);
<a name="l172"><span class="linenum"> 172</span></a>          }
<a name="l173"><span class="linenum"> 173</span></a>  
<a name="l174"><span class="linenum"> 174</span></a>          return true;
<a name="l175"><span class="linenum"> 175</span></a>      }
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>      <span class="comment">/**</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">     * Insert a new field in the database</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">     * We assume the field object is already defined as $this-&gt;field</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     *</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     * @global object</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     * @return bool</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     */</span>
<a name="l184"><span class="linenum"> 184</span></a>      function <a class="function" onClick="logFunction('insert_field')" href="../../_functions/insert_field.html" onMouseOver="funcPopup(event,'insert_field')">insert_field</a>() {
<a name="l185"><span class="linenum"> 185</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>)) {
<a name="l188"><span class="linenum"> 188</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>('Programmer error: Field has not been defined yet!  See <a class="function" onClick="logFunction('define_field')" href="../../_functions/define_field.html" onMouseOver="funcPopup(event,'define_field')">define_field</a>()');
<a name="l189"><span class="linenum"> 189</span></a>              return false;
<a name="l190"><span class="linenum"> 190</span></a>          }
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('data_fields',<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>);
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">        // Trigger an event for creating this field.</span>
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_data\event\<a class="class" onClick="logClass('field_created')" href="../../_classes/field_created.html" onMouseOver="classPopup(event,'field_created')">field_created</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l196"><span class="linenum"> 196</span></a>              'objectid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id,
<a name="l197"><span class="linenum"> 197</span></a>              'context' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>,
<a name="l198"><span class="linenum"> 198</span></a>              'other' =&gt; array(
<a name="l199"><span class="linenum"> 199</span></a>                  'fieldname' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name,
<a name="l200"><span class="linenum"> 200</span></a>                  'dataid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;id
<a name="l201"><span class="linenum"> 201</span></a>              )
<a name="l202"><span class="linenum"> 202</span></a>          ));
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l204"><span class="linenum"> 204</span></a>  
<a name="l205"><span class="linenum"> 205</span></a>          return true;
<a name="l206"><span class="linenum"> 206</span></a>      }
<a name="l207"><span class="linenum"> 207</span></a>  
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>      <span class="comment">/**</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">     * Update a field in the database</span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">     *</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">     * @global object</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     * @return bool</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     */</span>
<a name="l215"><span class="linenum"> 215</span></a>      function <a class="function" onClick="logFunction('update_field')" href="../../_functions/update_field.html" onMouseOver="funcPopup(event,'update_field')">update_field</a>() {
<a name="l216"><span class="linenum"> 216</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l217"><span class="linenum"> 217</span></a>  
<a name="l218"><span class="linenum"> 218</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('data_fields', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>);
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">        // Trigger an event for updating this field.</span>
<a name="l221"><span class="linenum"> 221</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_data\event\<a class="class" onClick="logClass('field_updated')" href="../../_classes/field_updated.html" onMouseOver="classPopup(event,'field_updated')">field_updated</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l222"><span class="linenum"> 222</span></a>              'objectid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id,
<a name="l223"><span class="linenum"> 223</span></a>              'context' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>,
<a name="l224"><span class="linenum"> 224</span></a>              'other' =&gt; array(
<a name="l225"><span class="linenum"> 225</span></a>                  'fieldname' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name,
<a name="l226"><span class="linenum"> 226</span></a>                  'dataid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;id
<a name="l227"><span class="linenum"> 227</span></a>              )
<a name="l228"><span class="linenum"> 228</span></a>          ));
<a name="l229"><span class="linenum"> 229</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l230"><span class="linenum"> 230</span></a>  
<a name="l231"><span class="linenum"> 231</span></a>          return true;
<a name="l232"><span class="linenum"> 232</span></a>      }
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>      <span class="comment">/**</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">     * Delete a field completely</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">     *</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">     * @global object</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">     * @return bool</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">     */</span>
<a name="l240"><span class="linenum"> 240</span></a>      function <a class="function" onClick="logFunction('delete_field')" href="../../_functions/delete_field.html" onMouseOver="funcPopup(event,'delete_field')">delete_field</a>() {
<a name="l241"><span class="linenum"> 241</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id)) {
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">            // Get the field before we delete it.</span>
<a name="l245"><span class="linenum"> 245</span></a>              <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_fields', array('id' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id));
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('delete_content')" href="../../_functions/delete_content.html" onMouseOver="funcPopup(event,'delete_content')">delete_content</a>();
<a name="l248"><span class="linenum"> 248</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('data_fields', array('id'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id));
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">            // Trigger an event for deleting this field.</span>
<a name="l251"><span class="linenum"> 251</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_data\event\<a class="class" onClick="logClass('field_deleted')" href="../../_classes/field_deleted.html" onMouseOver="classPopup(event,'field_deleted')">field_deleted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l252"><span class="linenum"> 252</span></a>                  'objectid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id,
<a name="l253"><span class="linenum"> 253</span></a>                  'context' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>,
<a name="l254"><span class="linenum"> 254</span></a>                  'other' =&gt; array(
<a name="l255"><span class="linenum"> 255</span></a>                      'fieldname' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name,
<a name="l256"><span class="linenum"> 256</span></a>                      'dataid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;id
<a name="l257"><span class="linenum"> 257</span></a>                   )
<a name="l258"><span class="linenum"> 258</span></a>              ));
<a name="l259"><span class="linenum"> 259</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('data_fields', <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>);
<a name="l260"><span class="linenum"> 260</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l261"><span class="linenum"> 261</span></a>          }
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>          return true;
<a name="l264"><span class="linenum"> 264</span></a>      }
<a name="l265"><span class="linenum"> 265</span></a>  
<a name="l266"><span class="linenum"> 266</span></a>      <span class="comment">/**</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     * Print the relevant form element in the ADD template for this field</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">     *</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">     * @global object</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">     * @param int $recordid</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">     * @return string</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">     */</span>
<a name="l273"><span class="linenum"> 273</span></a>      function <a class="function" onClick="logFunction('display_add_field')" href="../../_functions/display_add_field.html" onMouseOver="funcPopup(event,'display_add_field')">display_add_field</a>(<a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>=0, <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>=null) {
<a name="l274"><span class="linenum"> 274</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l275"><span class="linenum"> 275</span></a>  
<a name="l276"><span class="linenum"> 276</span></a>          if (<a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>) {
<a name="l277"><span class="linenum"> 277</span></a>              <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> = 'field_' . <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id;
<a name="l278"><span class="linenum"> 278</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="var it1039" onMouseOver="hilite(1039)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>;
<a name="l279"><span class="linenum"> 279</span></a>          } else if (<a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>) {
<a name="l280"><span class="linenum"> 280</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('data_content', 'content', array('fieldid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id, 'recordid'=&gt;<a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>));
<a name="l281"><span class="linenum"> 281</span></a>          } else {
<a name="l282"><span class="linenum"> 282</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = '';
<a name="l283"><span class="linenum"> 283</span></a>          }
<a name="l284"><span class="linenum"> 284</span></a>  
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">        // beware get_field returns false for new, empty records MDL-18567</span>
<a name="l286"><span class="linenum"> 286</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>===false) {
<a name="l287"><span class="linenum"> 287</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>='';
<a name="l288"><span class="linenum"> 288</span></a>          }
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>          <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> = '&lt;div title=&quot;' . <a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;description) . '&quot;&gt;';
<a name="l291"><span class="linenum"> 291</span></a>          <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= '&lt;label for=&quot;field_'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id.'&quot;&gt;&lt;span class=&quot;accesshide&quot;&gt;'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name.'&lt;/span&gt;';
<a name="l292"><span class="linenum"> 292</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;required) {
<a name="l293"><span class="linenum"> 293</span></a>              <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('img')" href="../../_functions/img.html" onMouseOver="funcPopup(event,'img')">img</a>(<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('req'), <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('requiredelement', 'form'),
<a name="l294"><span class="linenum"> 294</span></a>                                       array('class' =&gt; 'req', 'title' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('requiredelement', 'form')));
<a name="l295"><span class="linenum"> 295</span></a>          }
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= '&lt;/label&gt;&lt;input class=&quot;basefieldinput&quot; type=&quot;text&quot; name=&quot;field_'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id.'&quot; id=&quot;field_'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id;
<a name="l297"><span class="linenum"> 297</span></a>          <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= '&quot; value=&quot;'.<a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>).'&quot; /&gt;';
<a name="l298"><span class="linenum"> 298</span></a>          <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= '&lt;/div&gt;';
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>          return <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>;
<a name="l301"><span class="linenum"> 301</span></a>      }
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>      <span class="comment">/**</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">     * Print the relevant form element to define the attributes for this field</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">     * viewable by teachers only.</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">     *</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">     * @global object</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">     * @global object</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment">     * @return void Output is echo'd</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">     */</span>
<a name="l311"><span class="linenum"> 311</span></a>      function <a class="function" onClick="logFunction('display_edit_field')" href="../../_functions/display_edit_field.html" onMouseOver="funcPopup(event,'display_edit_field')">display_edit_field</a>() {
<a name="l312"><span class="linenum"> 312</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l313"><span class="linenum"> 313</span></a>  
<a name="l314"><span class="linenum"> 314</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>)) {   // No field has been defined yet, try and make one
<a name="l315"><span class="linenum"> 315</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('define_default_field')" href="../../_functions/define_default_field.html" onMouseOver="funcPopup(event,'define_default_field')">define_default_field</a>();
<a name="l316"><span class="linenum"> 316</span></a>          }
<a name="l317"><span class="linenum"> 317</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_start')" href="../../_functions/box_start.html" onMouseOver="funcPopup(event,'box_start')">box_start</a>('generalbox boxaligncenter boxwidthwide');
<a name="l318"><span class="linenum"> 318</span></a>  
<a name="l319"><span class="linenum"> 319</span></a>          echo '&lt;form id=&quot;editfield&quot; action=&quot;'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/mod/data/field.php&quot; method=&quot;post&quot;&gt;'.&quot;\n&quot;;
<a name="l320"><span class="linenum"> 320</span></a>          echo '&lt;input type=&quot;hidden&quot; name=&quot;d&quot; value=&quot;'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;id.'&quot; /&gt;'.&quot;\n&quot;;
<a name="l321"><span class="linenum"> 321</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id)) {
<a name="l322"><span class="linenum"> 322</span></a>              echo '&lt;input type=&quot;hidden&quot; name=&quot;mode&quot; value=&quot;add&quot; /&gt;'.&quot;\n&quot;;
<a name="l323"><span class="linenum"> 323</span></a>              <a class="var it19447" onMouseOver="hilite(19447)" onMouseOut="lolite()" onClick="logVariable('savebutton')" href="../../_variables/savebutton.html">$savebutton</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('add');
<a name="l324"><span class="linenum"> 324</span></a>          } else {
<a name="l325"><span class="linenum"> 325</span></a>              echo '&lt;input type=&quot;hidden&quot; name=&quot;fid&quot; value=&quot;'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id.'&quot; /&gt;'.&quot;\n&quot;;
<a name="l326"><span class="linenum"> 326</span></a>              echo '&lt;input type=&quot;hidden&quot; name=&quot;mode&quot; value=&quot;update&quot; /&gt;'.&quot;\n&quot;;
<a name="l327"><span class="linenum"> 327</span></a>              <a class="var it19447" onMouseOver="hilite(19447)" onMouseOut="lolite()" onClick="logVariable('savebutton')" href="../../_variables/savebutton.html">$savebutton</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savechanges');
<a name="l328"><span class="linenum"> 328</span></a>          }
<a name="l329"><span class="linenum"> 329</span></a>          echo '&lt;input type=&quot;hidden&quot; name=&quot;type&quot; value=&quot;'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>.'&quot; /&gt;'.&quot;\n&quot;;
<a name="l330"><span class="linenum"> 330</span></a>          echo '&lt;input name=&quot;sesskey&quot; value=&quot;'.<a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>().'&quot; type=&quot;hidden&quot; /&gt;'.&quot;\n&quot;;
<a name="l331"><span class="linenum"> 331</span></a>  
<a name="l332"><span class="linenum"> 332</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="phpfunction" onClick="logFunction('name')" href="../../_functions/name.html" onMouseOver="phpfuncPopup(event,'name')">name</a>(), 3);
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/mod/data/field/'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>.'/mod.html');
<a name="l335"><span class="linenum"> 335</span></a>  
<a name="l336"><span class="linenum"> 336</span></a>          echo '&lt;div class=&quot;mdl-align&quot;&gt;';
<a name="l337"><span class="linenum"> 337</span></a>          echo '&lt;input type=&quot;submit&quot; value=&quot;'.<a class="var it19447" onMouseOver="hilite(19447)" onMouseOut="lolite()" onClick="logVariable('savebutton')" href="../../_variables/savebutton.html">$savebutton</a>.'&quot; /&gt;'.&quot;\n&quot;;
<a name="l338"><span class="linenum"> 338</span></a>          echo '&lt;input type=&quot;submit&quot; name=&quot;cancel&quot; value=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cancel').'&quot; /&gt;'.&quot;\n&quot;;
<a name="l339"><span class="linenum"> 339</span></a>          echo '&lt;/div&gt;';
<a name="l340"><span class="linenum"> 340</span></a>  
<a name="l341"><span class="linenum"> 341</span></a>          echo '&lt;/form&gt;';
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_end')" href="../../_functions/box_end.html" onMouseOver="funcPopup(event,'box_end')">box_end</a>();
<a name="l344"><span class="linenum"> 344</span></a>      }
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>      <span class="comment">/**</span>
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">     * Display the content of the field in browse mode</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">     *</span>
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">     * @global object</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">     * @param int $recordid</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment">     * @param object $template</span>
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">     * @return bool|string</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">     */</span>
<a name="l354"><span class="linenum"> 354</span></a>      function <a class="function" onClick="logFunction('display_browse_field')" href="../../_functions/display_browse_field.html" onMouseOver="funcPopup(event,'display_browse_field')">display_browse_field</a>(<a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>) {
<a name="l355"><span class="linenum"> 355</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l356"><span class="linenum"> 356</span></a>  
<a name="l357"><span class="linenum"> 357</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_content', array('fieldid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id, 'recordid'=&gt;<a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>))) {
<a name="l358"><span class="linenum"> 358</span></a>              if (isset(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('content')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>)) {
<a name="l359"><span class="linenum"> 359</span></a>                  <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = new stdClass();
<a name="l360"><span class="linenum"> 360</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;param1 == '1') {  // We are autolinking this field, so disable linking within us
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">                    //$content-&gt;content = '&lt;span class=&quot;nolink&quot;&gt;'.$content-&gt;content.'&lt;/span&gt;';</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">                    //$content-&gt;content1 = FORMAT_HTML;</span>
<a name="l363"><span class="linenum"> 363</span></a>                      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('filter')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../_variables/filter.html">filter</a>=false;
<a name="l364"><span class="linenum"> 364</span></a>                  }
<a name="l365"><span class="linenum"> 365</span></a>                  <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('para')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../_variables/para.html">para</a> = false;
<a name="l366"><span class="linenum"> 366</span></a>                  <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> = <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('content')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('content1')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/content1.html">content1</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l367"><span class="linenum"> 367</span></a>              } else {
<a name="l368"><span class="linenum"> 368</span></a>                  <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> = '';
<a name="l369"><span class="linenum"> 369</span></a>              }
<a name="l370"><span class="linenum"> 370</span></a>              return <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>;
<a name="l371"><span class="linenum"> 371</span></a>          }
<a name="l372"><span class="linenum"> 372</span></a>          return false;
<a name="l373"><span class="linenum"> 373</span></a>      }
<a name="l374"><span class="linenum"> 374</span></a>  
<a name="l375"><span class="linenum"> 375</span></a>      <span class="comment">/**</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">     * Update the content of one data field in the data_content table</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">     * @global object</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">     * @param int $recordid</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">     * @param mixed $value</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     * @param string $name</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">     * @return bool</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">     */</span>
<a name="l383"><span class="linenum"> 383</span></a>      function <a class="function" onClick="logFunction('update_content')" href="../../_functions/update_content.html" onMouseOver="funcPopup(event,'update_content')">update_content</a>(<a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>=''){
<a name="l384"><span class="linenum"> 384</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l385"><span class="linenum"> 385</span></a>  
<a name="l386"><span class="linenum"> 386</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = new stdClass();
<a name="l387"><span class="linenum"> 387</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('fieldid')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/fieldid.html">fieldid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id;
<a name="l388"><span class="linenum"> 388</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('recordid')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/recordid.html">recordid</a> = <a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>;
<a name="l389"><span class="linenum"> 389</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('content')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>, <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>);
<a name="l390"><span class="linenum"> 390</span></a>  
<a name="l391"><span class="linenum"> 391</span></a>          if (<a class="var it10218" onMouseOver="hilite(10218)" onMouseOut="lolite()" onClick="logVariable('oldcontent')" href="../../_variables/oldcontent.html">$oldcontent</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_content', array('fieldid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id, 'recordid'=&gt;<a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>))) {
<a name="l392"><span class="linenum"> 392</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('id')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it10218" onMouseOver="hilite(10218)" onMouseOut="lolite()" onClick="logVariable('oldcontent')" href="../../_variables/oldcontent.html">$oldcontent</a>-&gt;<a onClick="logVariable('id')" class="var it40097" onMouseOver="hilite(40097)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l393"><span class="linenum"> 393</span></a>              return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('data_content', <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>);
<a name="l394"><span class="linenum"> 394</span></a>          } else {
<a name="l395"><span class="linenum"> 395</span></a>              return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('data_content', <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>);
<a name="l396"><span class="linenum"> 396</span></a>          }
<a name="l397"><span class="linenum"> 397</span></a>      }
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>      <span class="comment">/**</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">     * Delete all content associated with the field</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">     *</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">     * @global object</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment">     * @param int $recordid</span>
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">     * @return bool</span>
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">     */</span>
<a name="l406"><span class="linenum"> 406</span></a>      function <a class="function" onClick="logFunction('delete_content')" href="../../_functions/delete_content.html" onMouseOver="funcPopup(event,'delete_content')">delete_content</a>(<a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>=0) {
<a name="l407"><span class="linenum"> 407</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>          if (<a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>) {
<a name="l410"><span class="linenum"> 410</span></a>              <a class="var it3183" onMouseOver="hilite(3183)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../../_variables/conditions.html">$conditions</a> = array('fieldid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id, 'recordid'=&gt;<a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>);
<a name="l411"><span class="linenum"> 411</span></a>          } else {
<a name="l412"><span class="linenum"> 412</span></a>              <a class="var it3183" onMouseOver="hilite(3183)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../../_variables/conditions.html">$conditions</a> = array('fieldid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id);
<a name="l413"><span class="linenum"> 413</span></a>          }
<a name="l414"><span class="linenum"> 414</span></a>  
<a name="l415"><span class="linenum"> 415</span></a>          <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset')" href="../../_functions/get_recordset.html" onMouseOver="funcPopup(event,'get_recordset')">get_recordset</a>('data_content', <a class="var it3183" onMouseOver="hilite(3183)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../../_variables/conditions.html">$conditions</a>);
<a name="l416"><span class="linenum"> 416</span></a>          if (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('valid')" href="../../_functions/valid.html" onMouseOver="funcPopup(event,'valid')">valid</a>()) {
<a name="l417"><span class="linenum"> 417</span></a>              <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l418"><span class="linenum"> 418</span></a>              foreach (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> as <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>) {
<a name="l419"><span class="linenum"> 419</span></a>                  <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id, 'mod_data', 'content', <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('id')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l420"><span class="linenum"> 420</span></a>              }
<a name="l421"><span class="linenum"> 421</span></a>          }
<a name="l422"><span class="linenum"> 422</span></a>          <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l423"><span class="linenum"> 423</span></a>  
<a name="l424"><span class="linenum"> 424</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('data_content', <a class="var it3183" onMouseOver="hilite(3183)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../../_variables/conditions.html">$conditions</a>);
<a name="l425"><span class="linenum"> 425</span></a>      }
<a name="l426"><span class="linenum"> 426</span></a>  
<a name="l427"><span class="linenum"> 427</span></a>      <span class="comment">/**</span>
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">     * Check if a field from an add form is empty</span>
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">     *</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">     * @param mixed $value</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">     * @param mixed $name</span>
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">     * @return bool</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">     */</span>
<a name="l434"><span class="linenum"> 434</span></a>      function <a class="function" onClick="logFunction('notemptyfield')" href="../../_functions/notemptyfield.html" onMouseOver="funcPopup(event,'notemptyfield')">notemptyfield</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) {
<a name="l435"><span class="linenum"> 435</span></a>          return !empty(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l436"><span class="linenum"> 436</span></a>      }
<a name="l437"><span class="linenum"> 437</span></a>  
<a name="l438"><span class="linenum"> 438</span></a>      <span class="comment">/**</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">     * Just in case a field needs to print something before the whole form</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">     */</span>
<a name="l441"><span class="linenum"> 441</span></a>      function <a class="function" onClick="logFunction('print_before_form')" href="../../_functions/print_before_form.html" onMouseOver="funcPopup(event,'print_before_form')">print_before_form</a>() {
<a name="l442"><span class="linenum"> 442</span></a>      }
<a name="l443"><span class="linenum"> 443</span></a>  
<a name="l444"><span class="linenum"> 444</span></a>      <span class="comment">/**</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">     * Just in case a field needs to print something after the whole form</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">     */</span>
<a name="l447"><span class="linenum"> 447</span></a>      function <a class="function" onClick="logFunction('print_after_form')" href="../../_functions/print_after_form.html" onMouseOver="funcPopup(event,'print_after_form')">print_after_form</a>() {
<a name="l448"><span class="linenum"> 448</span></a>      }
<a name="l449"><span class="linenum"> 449</span></a>  
<a name="l450"><span class="linenum"> 450</span></a>  
<a name="l451"><span class="linenum"> 451</span></a>      <span class="comment">/**</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">     * Returns the sortable field for the content. By default, it's just content</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">     * but for some plugins, it could be content 1 - content4</span>
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">     *</span>
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment">     * @return string</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">     */</span>
<a name="l457"><span class="linenum"> 457</span></a>      function <a class="function" onClick="logFunction('get_sort_field')" href="../../_functions/get_sort_field.html" onMouseOver="funcPopup(event,'get_sort_field')">get_sort_field</a>() {
<a name="l458"><span class="linenum"> 458</span></a>          return 'content';
<a name="l459"><span class="linenum"> 459</span></a>      }
<a name="l460"><span class="linenum"> 460</span></a>  
<a name="l461"><span class="linenum"> 461</span></a>      <span class="comment">/**</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">     * Returns the SQL needed to refer to the column.  Some fields may need to CAST() etc.</span>
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">     *</span>
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment">     * @param string $fieldname</span>
<a name="l465"><span class="linenum"> 465</span></a>  <span class="comment">     * @return string $fieldname</span>
<a name="l466"><span class="linenum"> 466</span></a>  <span class="comment">     */</span>
<a name="l467"><span class="linenum"> 467</span></a>      function <a class="function" onClick="logFunction('get_sort_sql')" href="../../_functions/get_sort_sql.html" onMouseOver="funcPopup(event,'get_sort_sql')">get_sort_sql</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>) {
<a name="l468"><span class="linenum"> 468</span></a>          return <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>;
<a name="l469"><span class="linenum"> 469</span></a>      }
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>      <span class="comment">/**</span>
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">     * Returns the name/type of the field</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">     *</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">     * @return string</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">     */</span>
<a name="l476"><span class="linenum"> 476</span></a>      function <a class="function" onClick="logFunction('name')" href="../../_functions/name.html" onMouseOver="funcPopup(event,'name')">name</a>() {
<a name="l477"><span class="linenum"> 477</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('name'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>, 'data');
<a name="l478"><span class="linenum"> 478</span></a>      }
<a name="l479"><span class="linenum"> 479</span></a>  
<a name="l480"><span class="linenum"> 480</span></a>      <span class="comment">/**</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">     * Prints the respective type icon</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment">     *</span>
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment">     * @global object</span>
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment">     * @return string</span>
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment">     */</span>
<a name="l486"><span class="linenum"> 486</span></a>      function <a class="function" onClick="logFunction('image')" href="../../_functions/image.html" onMouseOver="funcPopup(event,'image')">image</a>() {
<a name="l487"><span class="linenum"> 487</span></a>          global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('d'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('data')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>-&gt;id, 'fid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('field')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id, 'mode'=&gt;'display', 'sesskey'=&gt;<a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>());
<a name="l490"><span class="linenum"> 490</span></a>          <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/data/field.php.html">/mod/data/field.php</a>', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l491"><span class="linenum"> 491</span></a>          <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> = '&lt;a href=&quot;'.<a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>().'&quot;&gt;';
<a name="l492"><span class="linenum"> 492</span></a>          <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= '&lt;img src=&quot;'.<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('field/'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>, 'data') . '&quot; ';
<a name="l493"><span class="linenum"> 493</span></a>          <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= 'height=&quot;'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('iconheight')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/iconheight.html">iconheight</a>.'&quot; width=&quot;'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('iconwidth')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/iconwidth.html">iconwidth</a>.'&quot; alt=&quot;'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>.'&quot; title=&quot;'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>.'&quot; /&gt;&lt;/a&gt;';
<a name="l494"><span class="linenum"> 494</span></a>          return <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>;
<a name="l495"><span class="linenum"> 495</span></a>      }
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>      <span class="comment">/**</span>
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment">     * Per default, it is assumed that fields support text exporting.</span>
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">     * Override this (return false) on fields not supporting text exporting.</span>
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment">     *</span>
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment">     * @return bool true</span>
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment">     */</span>
<a name="l503"><span class="linenum"> 503</span></a>      function <a class="function" onClick="logFunction('text_export_supported')" href="../../_functions/text_export_supported.html" onMouseOver="funcPopup(event,'text_export_supported')">text_export_supported</a>() {
<a name="l504"><span class="linenum"> 504</span></a>          return true;
<a name="l505"><span class="linenum"> 505</span></a>      }
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>      <span class="comment">/**</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">     * Per default, return the record's text value only from the &quot;content&quot; field.</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">     * Override this in fields class if necesarry.</span>
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">     *</span>
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">     * @param string $record</span>
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">     * @return string</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">     */</span>
<a name="l514"><span class="linenum"> 514</span></a>      function <a class="function" onClick="logFunction('export_text_value')" href="../../_functions/export_text_value.html" onMouseOver="funcPopup(event,'export_text_value')">export_text_value</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l515"><span class="linenum"> 515</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('text_export_supported')" href="../../_functions/text_export_supported.html" onMouseOver="funcPopup(event,'text_export_supported')">text_export_supported</a>()) {
<a name="l516"><span class="linenum"> 516</span></a>              return <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('content')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>;
<a name="l517"><span class="linenum"> 517</span></a>          }
<a name="l518"><span class="linenum"> 518</span></a>      }
<a name="l519"><span class="linenum"> 519</span></a>  
<a name="l520"><span class="linenum"> 520</span></a>      <span class="comment">/**</span>
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">     * @param string $relativepath</span>
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">     * @return bool false</span>
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment">     */</span>
<a name="l524"><span class="linenum"> 524</span></a>      function <a class="function" onClick="logFunction('file_ok')" href="../../_functions/file_ok.html" onMouseOver="funcPopup(event,'file_ok')">file_ok</a>(<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>) {
<a name="l525"><span class="linenum"> 525</span></a>          return false;
<a name="l526"><span class="linenum"> 526</span></a>      }
<a name="l527"><span class="linenum"> 527</span></a>  }
<a name="l528"><span class="linenum"> 528</span></a>  
<a name="l529"><span class="linenum"> 529</span></a>  
<a name="l530"><span class="linenum"> 530</span></a>  <span class="comment">/**</span>
<a name="l531"><span class="linenum"> 531</span></a>  <span class="comment"> * Given a template and a dataid, generate a default case template</span>
<a name="l532"><span class="linenum"> 532</span></a>  <span class="comment"> *</span>
<a name="l533"><span class="linenum"> 533</span></a>  <span class="comment"> * @global object</span>
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment"> * @param object $data</span>
<a name="l535"><span class="linenum"> 535</span></a>  <span class="comment"> * @param string template [addtemplate, singletemplate, listtempalte, rsstemplate]</span>
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment"> * @param int $recordid</span>
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment"> * @param bool $form</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment"> * @param bool $update</span>
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment"> * @return bool|string</span>
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment"> */</span>
<a name="l541"><span class="linenum"> 541</span></a>  function <a class="function" onClick="logFunction('data_generate_default_template')" href="../../_functions/data_generate_default_template.html" onMouseOver="funcPopup(event,'data_generate_default_template')">data_generate_default_template</a>(&amp;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>, <a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>=0, <a class="var it596" onMouseOver="hilite(596)" onMouseOut="lolite()" onClick="logVariable('form')" href="../../_variables/form.html">$form</a>=false, <a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>=true) {
<a name="l542"><span class="linenum"> 542</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l543"><span class="linenum"> 543</span></a>  
<a name="l544"><span class="linenum"> 544</span></a>      if (!<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> &amp;&amp; !<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>) {
<a name="l545"><span class="linenum"> 545</span></a>          return false;
<a name="l546"><span class="linenum"> 546</span></a>      }
<a name="l547"><span class="linenum"> 547</span></a>      if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> == 'csstemplate' or <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> == 'jstemplate' ) {
<a name="l548"><span class="linenum"> 548</span></a>          return '';
<a name="l549"><span class="linenum"> 549</span></a>      }
<a name="l550"><span class="linenum"> 550</span></a>  
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">    // get all the fields for that database</span>
<a name="l552"><span class="linenum"> 552</span></a>      if (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('data_fields', array('dataid'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'id')) {
<a name="l553"><span class="linenum"> 553</span></a>  
<a name="l554"><span class="linenum"> 554</span></a>          <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_table')" href="../../_classes/html_table.html" onMouseOver="classPopup(event,'html_table')">html_table</a>();
<a name="l555"><span class="linenum"> 555</span></a>          <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('attributes')" class="var it39441" onMouseOver="hilite(39441)" onMouseOut="lolite()" href="../../_variables/attributes.html">attributes</a>['class'] = 'mod-data-default-template';
<a name="l556"><span class="linenum"> 556</span></a>          <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('colclasses')" class="var it39441" onMouseOver="hilite(39441)" onMouseOut="lolite()" href="../../_variables/colclasses.html">colclasses</a> = array('template-field', 'template-token');
<a name="l557"><span class="linenum"> 557</span></a>          <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it39441" onMouseOver="hilite(39441)" onMouseOut="lolite()" href="../../_variables/data.html">data</a> = array();
<a name="l558"><span class="linenum"> 558</span></a>          foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l559"><span class="linenum"> 559</span></a>              if (<a class="var it596" onMouseOver="hilite(596)" onMouseOut="lolite()" onClick="logVariable('form')" href="../../_variables/form.html">$form</a>) {   // Print forms instead of data
<a name="l560"><span class="linenum"> 560</span></a>                  <a class="var it4069" onMouseOver="hilite(4069)" onMouseOut="lolite()" onClick="logVariable('fieldobj')" href="../../_variables/fieldobj.html">$fieldobj</a> = <a class="function" onClick="logFunction('data_get_field')" href="../../_functions/data_get_field.html" onMouseOver="funcPopup(event,'data_get_field')">data_get_field</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l561"><span class="linenum"> 561</span></a>                  <a class="var it464" onMouseOver="hilite(464)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../_variables/token.html">$token</a> = <a class="var it4069" onMouseOver="hilite(4069)" onMouseOut="lolite()" onClick="logVariable('fieldobj')" href="../../_variables/fieldobj.html">$fieldobj</a>-&gt;<a class="function" onClick="logFunction('display_add_field')" href="../../_functions/display_add_field.html" onMouseOver="funcPopup(event,'display_add_field')">display_add_field</a>(<a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>, null);
<a name="l562"><span class="linenum"> 562</span></a>              } else {           // Just print the tag
<a name="l563"><span class="linenum"> 563</span></a>                  <a class="var it464" onMouseOver="hilite(464)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../_variables/token.html">$token</a> = '[['.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('name')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>.']]';
<a name="l564"><span class="linenum"> 564</span></a>              }
<a name="l565"><span class="linenum"> 565</span></a>              <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it39441" onMouseOver="hilite(39441)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>[] = array(
<a name="l566"><span class="linenum"> 566</span></a>                  <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('name')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>.': ',
<a name="l567"><span class="linenum"> 567</span></a>                  <a class="var it464" onMouseOver="hilite(464)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../_variables/token.html">$token</a>
<a name="l568"><span class="linenum"> 568</span></a>              );
<a name="l569"><span class="linenum"> 569</span></a>          }
<a name="l570"><span class="linenum"> 570</span></a>          if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> == 'listtemplate') {
<a name="l571"><span class="linenum"> 571</span></a>              <a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../../_variables/cell.html">$cell</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_table_cell')" href="../../_classes/html_table_cell.html" onMouseOver="classPopup(event,'html_table_cell')">html_table_cell</a>('##edit##  ##more##  ##delete##  ##approve##  ##disapprove##  ##export##');
<a name="l572"><span class="linenum"> 572</span></a>              <a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../../_variables/cell.html">$cell</a>-&gt;<a onClick="logVariable('colspan')" class="var it39532" onMouseOver="hilite(39532)" onMouseOut="lolite()" href="../../_variables/colspan.html">colspan</a> = 2;
<a name="l573"><span class="linenum"> 573</span></a>              <a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../../_variables/cell.html">$cell</a>-&gt;<a onClick="logVariable('attributes')" class="var it39532" onMouseOver="hilite(39532)" onMouseOut="lolite()" href="../../_variables/attributes.html">attributes</a>['class'] = 'controls';
<a name="l574"><span class="linenum"> 574</span></a>              <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it39441" onMouseOver="hilite(39441)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('html_table_row')" href="../../_classes/html_table_row.html" onMouseOver="classPopup(event,'html_table_row')">html_table_row</a>(array(<a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../../_variables/cell.html">$cell</a>));
<a name="l575"><span class="linenum"> 575</span></a>          } else if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> == 'singletemplate') {
<a name="l576"><span class="linenum"> 576</span></a>              <a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../../_variables/cell.html">$cell</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_table_cell')" href="../../_classes/html_table_cell.html" onMouseOver="classPopup(event,'html_table_cell')">html_table_cell</a>('##edit##  ##delete##  ##approve##  ##disapprove##  ##export##');
<a name="l577"><span class="linenum"> 577</span></a>              <a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../../_variables/cell.html">$cell</a>-&gt;<a onClick="logVariable('colspan')" class="var it39532" onMouseOver="hilite(39532)" onMouseOut="lolite()" href="../../_variables/colspan.html">colspan</a> = 2;
<a name="l578"><span class="linenum"> 578</span></a>              <a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../../_variables/cell.html">$cell</a>-&gt;<a onClick="logVariable('attributes')" class="var it39532" onMouseOver="hilite(39532)" onMouseOut="lolite()" href="../../_variables/attributes.html">attributes</a>['class'] = 'controls';
<a name="l579"><span class="linenum"> 579</span></a>              <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it39441" onMouseOver="hilite(39441)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('html_table_row')" href="../../_classes/html_table_row.html" onMouseOver="classPopup(event,'html_table_row')">html_table_row</a>(array(<a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../../_variables/cell.html">$cell</a>));
<a name="l580"><span class="linenum"> 580</span></a>          } else if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> == 'asearchtemplate') {
<a name="l581"><span class="linenum"> 581</span></a>              <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_table_row')" href="../../_classes/html_table_row.html" onMouseOver="classPopup(event,'html_table_row')">html_table_row</a>(array(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('authorfirstname', 'data').': ', '##firstname##'));
<a name="l582"><span class="linenum"> 582</span></a>              <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('attributes')" class="var it39516" onMouseOver="hilite(39516)" onMouseOut="lolite()" href="../../_variables/attributes.html">attributes</a>['class'] = 'searchcontrols';
<a name="l583"><span class="linenum"> 583</span></a>              <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it39441" onMouseOver="hilite(39441)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>[] = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>;
<a name="l584"><span class="linenum"> 584</span></a>              <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_table_row')" href="../../_classes/html_table_row.html" onMouseOver="classPopup(event,'html_table_row')">html_table_row</a>(array(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('authorlastname', 'data').': ', '##lastname##'));
<a name="l585"><span class="linenum"> 585</span></a>              <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('attributes')" class="var it39516" onMouseOver="hilite(39516)" onMouseOut="lolite()" href="../../_variables/attributes.html">attributes</a>['class'] = 'searchcontrols';
<a name="l586"><span class="linenum"> 586</span></a>              <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it39441" onMouseOver="hilite(39441)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>[] = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>;
<a name="l587"><span class="linenum"> 587</span></a>          }
<a name="l588"><span class="linenum"> 588</span></a>  
<a name="l589"><span class="linenum"> 589</span></a>          <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> = '';
<a name="l590"><span class="linenum"> 590</span></a>          if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> == 'listtemplate'){
<a name="l591"><span class="linenum"> 591</span></a>              <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= '##delcheck##';
<a name="l592"><span class="linenum"> 592</span></a>              <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('empty_tag')" href="../../_functions/empty_tag.html" onMouseOver="funcPopup(event,'empty_tag')">empty_tag</a>('br');
<a name="l593"><span class="linenum"> 593</span></a>          }
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>          <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class' =&gt; 'defaulttemplate'));
<a name="l596"><span class="linenum"> 596</span></a>          <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('table')" href="../../_functions/table.html" onMouseOver="funcPopup(event,'table')">table</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>);
<a name="l597"><span class="linenum"> 597</span></a>          <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l598"><span class="linenum"> 598</span></a>          if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> == 'listtemplate'){
<a name="l599"><span class="linenum"> 599</span></a>              <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('empty_tag')" href="../../_functions/empty_tag.html" onMouseOver="funcPopup(event,'empty_tag')">empty_tag</a>('hr');
<a name="l600"><span class="linenum"> 600</span></a>          }
<a name="l601"><span class="linenum"> 601</span></a>  
<a name="l602"><span class="linenum"> 602</span></a>          if (<a class="var it1815" onMouseOver="hilite(1815)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>) {
<a name="l603"><span class="linenum"> 603</span></a>              <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a> = new stdClass();
<a name="l604"><span class="linenum"> 604</span></a>              <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('id')" class="var it41196" onMouseOver="hilite(41196)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l605"><span class="linenum"> 605</span></a>              <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;{<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>} = <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>;
<a name="l606"><span class="linenum"> 606</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('data', <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>);
<a name="l607"><span class="linenum"> 607</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;{<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>} = <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>;
<a name="l608"><span class="linenum"> 608</span></a>          }
<a name="l609"><span class="linenum"> 609</span></a>  
<a name="l610"><span class="linenum"> 610</span></a>          return <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>;
<a name="l611"><span class="linenum"> 611</span></a>      }
<a name="l612"><span class="linenum"> 612</span></a>  }
<a name="l613"><span class="linenum"> 613</span></a>  
<a name="l614"><span class="linenum"> 614</span></a>  
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">/**</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment"> * Search for a field name and replaces it with another one in all the</span>
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment"> * form templates. Set $newfieldname as '' if you want to delete the</span>
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment"> * field from the form.</span>
<a name="l619"><span class="linenum"> 619</span></a>  <span class="comment"> *</span>
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment"> * @global object</span>
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment"> * @param object $data</span>
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment"> * @param string $searchfieldname</span>
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment"> * @param string $newfieldname</span>
<a name="l624"><span class="linenum"> 624</span></a>  <span class="comment"> * @return bool</span>
<a name="l625"><span class="linenum"> 625</span></a>  <span class="comment"> */</span>
<a name="l626"><span class="linenum"> 626</span></a>  function <a class="function" onClick="logFunction('data_replace_field_in_templates')" href="../../_functions/data_replace_field_in_templates.html" onMouseOver="funcPopup(event,'data_replace_field_in_templates')">data_replace_field_in_templates</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it35065" onMouseOver="hilite(35065)" onMouseOut="lolite()" onClick="logVariable('searchfieldname')" href="../../_variables/searchfieldname.html">$searchfieldname</a>, <a class="var it35066" onMouseOver="hilite(35066)" onMouseOut="lolite()" onClick="logVariable('newfieldname')" href="../../_variables/newfieldname.html">$newfieldname</a>) {
<a name="l627"><span class="linenum"> 627</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l628"><span class="linenum"> 628</span></a>  
<a name="l629"><span class="linenum"> 629</span></a>      if (!empty(<a class="var it35066" onMouseOver="hilite(35066)" onMouseOut="lolite()" onClick="logVariable('newfieldname')" href="../../_variables/newfieldname.html">$newfieldname</a>)) {
<a name="l630"><span class="linenum"> 630</span></a>          <a class="var it35067" onMouseOver="hilite(35067)" onMouseOut="lolite()" onClick="logVariable('prestring')" href="../../_variables/prestring.html">$prestring</a> = '[[';
<a name="l631"><span class="linenum"> 631</span></a>          <a class="var it35068" onMouseOver="hilite(35068)" onMouseOut="lolite()" onClick="logVariable('poststring')" href="../../_variables/poststring.html">$poststring</a> = ']]';
<a name="l632"><span class="linenum"> 632</span></a>          <a class="var it35069" onMouseOver="hilite(35069)" onMouseOut="lolite()" onClick="logVariable('idpart')" href="../../_variables/idpart.html">$idpart</a> = '#id';
<a name="l633"><span class="linenum"> 633</span></a>  
<a name="l634"><span class="linenum"> 634</span></a>      } else {
<a name="l635"><span class="linenum"> 635</span></a>          <a class="var it35067" onMouseOver="hilite(35067)" onMouseOut="lolite()" onClick="logVariable('prestring')" href="../../_variables/prestring.html">$prestring</a> = '';
<a name="l636"><span class="linenum"> 636</span></a>          <a class="var it35068" onMouseOver="hilite(35068)" onMouseOut="lolite()" onClick="logVariable('poststring')" href="../../_variables/poststring.html">$poststring</a> = '';
<a name="l637"><span class="linenum"> 637</span></a>          <a class="var it35069" onMouseOver="hilite(35069)" onMouseOut="lolite()" onClick="logVariable('idpart')" href="../../_variables/idpart.html">$idpart</a> = '';
<a name="l638"><span class="linenum"> 638</span></a>      }
<a name="l639"><span class="linenum"> 639</span></a>  
<a name="l640"><span class="linenum"> 640</span></a>      <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a> = new stdClass();
<a name="l641"><span class="linenum"> 641</span></a>      <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('id')" class="var it41196" onMouseOver="hilite(41196)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l642"><span class="linenum"> 642</span></a>      <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('singletemplate')" class="var it41196" onMouseOver="hilite(41196)" onMouseOut="lolite()" href="../../_variables/singletemplate.html">singletemplate</a> = <a class="phpfunction" onClick="logFunction('str_ireplace')" href="../../_functions/str_ireplace.html" onMouseOver="phpfuncPopup(event,'str_ireplace')">str_ireplace</a>('[['.<a class="var it35065" onMouseOver="hilite(35065)" onMouseOut="lolite()" onClick="logVariable('searchfieldname')" href="../../_variables/searchfieldname.html">$searchfieldname</a>.']]',
<a name="l643"><span class="linenum"> 643</span></a>              <a class="var it35067" onMouseOver="hilite(35067)" onMouseOut="lolite()" onClick="logVariable('prestring')" href="../../_variables/prestring.html">$prestring</a>.<a class="var it35066" onMouseOver="hilite(35066)" onMouseOut="lolite()" onClick="logVariable('newfieldname')" href="../../_variables/newfieldname.html">$newfieldname</a>.<a class="var it35068" onMouseOver="hilite(35068)" onMouseOut="lolite()" onClick="logVariable('poststring')" href="../../_variables/poststring.html">$poststring</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('singletemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/singletemplate.html">singletemplate</a>);
<a name="l644"><span class="linenum"> 644</span></a>  
<a name="l645"><span class="linenum"> 645</span></a>      <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('listtemplate')" class="var it41196" onMouseOver="hilite(41196)" onMouseOut="lolite()" href="../../_variables/listtemplate.html">listtemplate</a> = <a class="phpfunction" onClick="logFunction('str_ireplace')" href="../../_functions/str_ireplace.html" onMouseOver="phpfuncPopup(event,'str_ireplace')">str_ireplace</a>('[['.<a class="var it35065" onMouseOver="hilite(35065)" onMouseOut="lolite()" onClick="logVariable('searchfieldname')" href="../../_variables/searchfieldname.html">$searchfieldname</a>.']]',
<a name="l646"><span class="linenum"> 646</span></a>              <a class="var it35067" onMouseOver="hilite(35067)" onMouseOut="lolite()" onClick="logVariable('prestring')" href="../../_variables/prestring.html">$prestring</a>.<a class="var it35066" onMouseOver="hilite(35066)" onMouseOut="lolite()" onClick="logVariable('newfieldname')" href="../../_variables/newfieldname.html">$newfieldname</a>.<a class="var it35068" onMouseOver="hilite(35068)" onMouseOut="lolite()" onClick="logVariable('poststring')" href="../../_variables/poststring.html">$poststring</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('listtemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/listtemplate.html">listtemplate</a>);
<a name="l647"><span class="linenum"> 647</span></a>  
<a name="l648"><span class="linenum"> 648</span></a>      <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('addtemplate')" class="var it41196" onMouseOver="hilite(41196)" onMouseOut="lolite()" href="../../_variables/addtemplate.html">addtemplate</a> = <a class="phpfunction" onClick="logFunction('str_ireplace')" href="../../_functions/str_ireplace.html" onMouseOver="phpfuncPopup(event,'str_ireplace')">str_ireplace</a>('[['.<a class="var it35065" onMouseOver="hilite(35065)" onMouseOut="lolite()" onClick="logVariable('searchfieldname')" href="../../_variables/searchfieldname.html">$searchfieldname</a>.']]',
<a name="l649"><span class="linenum"> 649</span></a>              <a class="var it35067" onMouseOver="hilite(35067)" onMouseOut="lolite()" onClick="logVariable('prestring')" href="../../_variables/prestring.html">$prestring</a>.<a class="var it35066" onMouseOver="hilite(35066)" onMouseOut="lolite()" onClick="logVariable('newfieldname')" href="../../_variables/newfieldname.html">$newfieldname</a>.<a class="var it35068" onMouseOver="hilite(35068)" onMouseOut="lolite()" onClick="logVariable('poststring')" href="../../_variables/poststring.html">$poststring</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('addtemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/addtemplate.html">addtemplate</a>);
<a name="l650"><span class="linenum"> 650</span></a>  
<a name="l651"><span class="linenum"> 651</span></a>      <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('addtemplate')" class="var it41196" onMouseOver="hilite(41196)" onMouseOut="lolite()" href="../../_variables/addtemplate.html">addtemplate</a> = <a class="phpfunction" onClick="logFunction('str_ireplace')" href="../../_functions/str_ireplace.html" onMouseOver="phpfuncPopup(event,'str_ireplace')">str_ireplace</a>('[['.<a class="var it35065" onMouseOver="hilite(35065)" onMouseOut="lolite()" onClick="logVariable('searchfieldname')" href="../../_variables/searchfieldname.html">$searchfieldname</a>.'#id]]',
<a name="l652"><span class="linenum"> 652</span></a>              <a class="var it35067" onMouseOver="hilite(35067)" onMouseOut="lolite()" onClick="logVariable('prestring')" href="../../_variables/prestring.html">$prestring</a>.<a class="var it35066" onMouseOver="hilite(35066)" onMouseOut="lolite()" onClick="logVariable('newfieldname')" href="../../_variables/newfieldname.html">$newfieldname</a>.<a class="var it35069" onMouseOver="hilite(35069)" onMouseOut="lolite()" onClick="logVariable('idpart')" href="../../_variables/idpart.html">$idpart</a>.<a class="var it35068" onMouseOver="hilite(35068)" onMouseOut="lolite()" onClick="logVariable('poststring')" href="../../_variables/poststring.html">$poststring</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('addtemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/addtemplate.html">addtemplate</a>);
<a name="l653"><span class="linenum"> 653</span></a>  
<a name="l654"><span class="linenum"> 654</span></a>      <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('rsstemplate')" class="var it41196" onMouseOver="hilite(41196)" onMouseOut="lolite()" href="../../_variables/rsstemplate.html">rsstemplate</a> = <a class="phpfunction" onClick="logFunction('str_ireplace')" href="../../_functions/str_ireplace.html" onMouseOver="phpfuncPopup(event,'str_ireplace')">str_ireplace</a>('[['.<a class="var it35065" onMouseOver="hilite(35065)" onMouseOut="lolite()" onClick="logVariable('searchfieldname')" href="../../_variables/searchfieldname.html">$searchfieldname</a>.']]',
<a name="l655"><span class="linenum"> 655</span></a>              <a class="var it35067" onMouseOver="hilite(35067)" onMouseOut="lolite()" onClick="logVariable('prestring')" href="../../_variables/prestring.html">$prestring</a>.<a class="var it35066" onMouseOver="hilite(35066)" onMouseOut="lolite()" onClick="logVariable('newfieldname')" href="../../_variables/newfieldname.html">$newfieldname</a>.<a class="var it35068" onMouseOver="hilite(35068)" onMouseOut="lolite()" onClick="logVariable('poststring')" href="../../_variables/poststring.html">$poststring</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('rsstemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/rsstemplate.html">rsstemplate</a>);
<a name="l656"><span class="linenum"> 656</span></a>  
<a name="l657"><span class="linenum"> 657</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('data', <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>);
<a name="l658"><span class="linenum"> 658</span></a>  }
<a name="l659"><span class="linenum"> 659</span></a>  
<a name="l660"><span class="linenum"> 660</span></a>  
<a name="l661"><span class="linenum"> 661</span></a>  <span class="comment">/**</span>
<a name="l662"><span class="linenum"> 662</span></a>  <span class="comment"> * Appends a new field at the end of the form template.</span>
<a name="l663"><span class="linenum"> 663</span></a>  <span class="comment"> *</span>
<a name="l664"><span class="linenum"> 664</span></a>  <span class="comment"> * @global object</span>
<a name="l665"><span class="linenum"> 665</span></a>  <span class="comment"> * @param object $data</span>
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment"> * @param string $newfieldname</span>
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment"> */</span>
<a name="l668"><span class="linenum"> 668</span></a>  function <a class="function" onClick="logFunction('data_append_new_field_to_templates')" href="../../_functions/data_append_new_field_to_templates.html" onMouseOver="funcPopup(event,'data_append_new_field_to_templates')">data_append_new_field_to_templates</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it35066" onMouseOver="hilite(35066)" onMouseOut="lolite()" onClick="logVariable('newfieldname')" href="../../_variables/newfieldname.html">$newfieldname</a>) {
<a name="l669"><span class="linenum"> 669</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l670"><span class="linenum"> 670</span></a>  
<a name="l671"><span class="linenum"> 671</span></a>      <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a> = new stdClass();
<a name="l672"><span class="linenum"> 672</span></a>      <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('id')" class="var it41196" onMouseOver="hilite(41196)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l673"><span class="linenum"> 673</span></a>      <a class="var it6336" onMouseOver="hilite(6336)" onMouseOut="lolite()" onClick="logVariable('change')" href="../../_variables/change.html">$change</a> = false;
<a name="l674"><span class="linenum"> 674</span></a>  
<a name="l675"><span class="linenum"> 675</span></a>      if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('singletemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/singletemplate.html">singletemplate</a>)) {
<a name="l676"><span class="linenum"> 676</span></a>          <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('singletemplate')" class="var it41196" onMouseOver="hilite(41196)" onMouseOut="lolite()" href="../../_variables/singletemplate.html">singletemplate</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('singletemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/singletemplate.html">singletemplate</a>.' [[' . <a class="var it35066" onMouseOver="hilite(35066)" onMouseOut="lolite()" onClick="logVariable('newfieldname')" href="../../_variables/newfieldname.html">$newfieldname</a> .']]';
<a name="l677"><span class="linenum"> 677</span></a>          <a class="var it6336" onMouseOver="hilite(6336)" onMouseOut="lolite()" onClick="logVariable('change')" href="../../_variables/change.html">$change</a> = true;
<a name="l678"><span class="linenum"> 678</span></a>      }
<a name="l679"><span class="linenum"> 679</span></a>      if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('addtemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/addtemplate.html">addtemplate</a>)) {
<a name="l680"><span class="linenum"> 680</span></a>          <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('addtemplate')" class="var it41196" onMouseOver="hilite(41196)" onMouseOut="lolite()" href="../../_variables/addtemplate.html">addtemplate</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('addtemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/addtemplate.html">addtemplate</a>.' [[' . <a class="var it35066" onMouseOver="hilite(35066)" onMouseOut="lolite()" onClick="logVariable('newfieldname')" href="../../_variables/newfieldname.html">$newfieldname</a> . ']]';
<a name="l681"><span class="linenum"> 681</span></a>          <a class="var it6336" onMouseOver="hilite(6336)" onMouseOut="lolite()" onClick="logVariable('change')" href="../../_variables/change.html">$change</a> = true;
<a name="l682"><span class="linenum"> 682</span></a>      }
<a name="l683"><span class="linenum"> 683</span></a>      if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('rsstemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/rsstemplate.html">rsstemplate</a>)) {
<a name="l684"><span class="linenum"> 684</span></a>          <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>-&gt;<a onClick="logVariable('rsstemplate')" class="var it41196" onMouseOver="hilite(41196)" onMouseOut="lolite()" href="../../_variables/rsstemplate.html">rsstemplate</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('singletemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/singletemplate.html">singletemplate</a>.' [[' . <a class="var it35066" onMouseOver="hilite(35066)" onMouseOut="lolite()" onClick="logVariable('newfieldname')" href="../../_variables/newfieldname.html">$newfieldname</a> . ']]';
<a name="l685"><span class="linenum"> 685</span></a>          <a class="var it6336" onMouseOver="hilite(6336)" onMouseOut="lolite()" onClick="logVariable('change')" href="../../_variables/change.html">$change</a> = true;
<a name="l686"><span class="linenum"> 686</span></a>      }
<a name="l687"><span class="linenum"> 687</span></a>      if (<a class="var it6336" onMouseOver="hilite(6336)" onMouseOut="lolite()" onClick="logVariable('change')" href="../../_variables/change.html">$change</a>) {
<a name="l688"><span class="linenum"> 688</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('data', <a class="var it5812" onMouseOver="hilite(5812)" onMouseOut="lolite()" onClick="logVariable('newdata')" href="../../_variables/newdata.html">$newdata</a>);
<a name="l689"><span class="linenum"> 689</span></a>      }
<a name="l690"><span class="linenum"> 690</span></a>  }
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>  
<a name="l693"><span class="linenum"> 693</span></a>  <span class="comment">/**</span>
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment"> * given a field name</span>
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment"> * this function creates an instance of the particular subfield class</span>
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment"> *</span>
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment"> * @global object</span>
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment"> * @param string $name</span>
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment"> * @param object $data</span>
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment"> * @return object|bool</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment"> */</span>
<a name="l702"><span class="linenum"> 702</span></a>  function <a class="function" onClick="logFunction('data_get_field_from_name')" href="../../_functions/data_get_field_from_name.html" onMouseOver="funcPopup(event,'data_get_field_from_name')">data_get_field_from_name</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>){
<a name="l703"><span class="linenum"> 703</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l704"><span class="linenum"> 704</span></a>  
<a name="l705"><span class="linenum"> 705</span></a>      <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_fields', array('name'=&gt;<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, 'dataid'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l706"><span class="linenum"> 706</span></a>  
<a name="l707"><span class="linenum"> 707</span></a>      if (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l708"><span class="linenum"> 708</span></a>          return <a class="function" onClick="logFunction('data_get_field')" href="../../_functions/data_get_field.html" onMouseOver="funcPopup(event,'data_get_field')">data_get_field</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l709"><span class="linenum"> 709</span></a>      } else {
<a name="l710"><span class="linenum"> 710</span></a>          return false;
<a name="l711"><span class="linenum"> 711</span></a>      }
<a name="l712"><span class="linenum"> 712</span></a>  }
<a name="l713"><span class="linenum"> 713</span></a>  
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment">/**</span>
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment"> * given a field id</span>
<a name="l716"><span class="linenum"> 716</span></a>  <span class="comment"> * this function creates an instance of the particular subfield class</span>
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment"> *</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment"> * @global object</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment"> * @param int $fieldid</span>
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment"> * @param object $data</span>
<a name="l721"><span class="linenum"> 721</span></a>  <span class="comment"> * @return bool|object</span>
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment"> */</span>
<a name="l723"><span class="linenum"> 723</span></a>  function <a class="function" onClick="logFunction('data_get_field_from_id')" href="../../_functions/data_get_field_from_id.html" onMouseOver="funcPopup(event,'data_get_field_from_id')">data_get_field_from_id</a>(<a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>){
<a name="l724"><span class="linenum"> 724</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l725"><span class="linenum"> 725</span></a>  
<a name="l726"><span class="linenum"> 726</span></a>      <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_fields', array('id'=&gt;<a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a>, 'dataid'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l727"><span class="linenum"> 727</span></a>  
<a name="l728"><span class="linenum"> 728</span></a>      if (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l729"><span class="linenum"> 729</span></a>          return <a class="function" onClick="logFunction('data_get_field')" href="../../_functions/data_get_field.html" onMouseOver="funcPopup(event,'data_get_field')">data_get_field</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l730"><span class="linenum"> 730</span></a>      } else {
<a name="l731"><span class="linenum"> 731</span></a>          return false;
<a name="l732"><span class="linenum"> 732</span></a>      }
<a name="l733"><span class="linenum"> 733</span></a>  }
<a name="l734"><span class="linenum"> 734</span></a>  
<a name="l735"><span class="linenum"> 735</span></a>  <span class="comment">/**</span>
<a name="l736"><span class="linenum"> 736</span></a>  <span class="comment"> * given a field id</span>
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment"> * this function creates an instance of the particular subfield class</span>
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment"> *</span>
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment"> * @global object</span>
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment"> * @param string $type</span>
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment"> * @param object $data</span>
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment"> * @return object</span>
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment"> */</span>
<a name="l744"><span class="linenum"> 744</span></a>  function <a class="function" onClick="logFunction('data_get_field_new')" href="../../_functions/data_get_field_new.html" onMouseOver="funcPopup(event,'data_get_field_new')">data_get_field_new</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l745"><span class="linenum"> 745</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l746"><span class="linenum"> 746</span></a>  
<a name="l747"><span class="linenum"> 747</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/mod/data/field/'.<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>.'/field.class.php');
<a name="l748"><span class="linenum"> 748</span></a>      <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = 'data_field_'.<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>;
<a name="l749"><span class="linenum"> 749</span></a>      <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = new <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>(0, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l750"><span class="linenum"> 750</span></a>      return <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>;
<a name="l751"><span class="linenum"> 751</span></a>  }
<a name="l752"><span class="linenum"> 752</span></a>  
<a name="l753"><span class="linenum"> 753</span></a>  <span class="comment">/**</span>
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment"> * returns a subclass field object given a record of the field, used to</span>
<a name="l755"><span class="linenum"> 755</span></a>  <span class="comment"> * invoke plugin methods</span>
<a name="l756"><span class="linenum"> 756</span></a>  <span class="comment"> * input: $param $field - record from db</span>
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment"> *</span>
<a name="l758"><span class="linenum"> 758</span></a>  <span class="comment"> * @global object</span>
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment"> * @param object $field</span>
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment"> * @param object $data</span>
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment"> * @return object</span>
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment"> */</span>
<a name="l764"><span class="linenum"> 764</span></a>  function <a class="function" onClick="logFunction('data_get_field')" href="../../_functions/data_get_field.html" onMouseOver="funcPopup(event,'data_get_field')">data_get_field</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>=null) {
<a name="l765"><span class="linenum"> 765</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l766"><span class="linenum"> 766</span></a>  
<a name="l767"><span class="linenum"> 767</span></a>      if (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l768"><span class="linenum"> 768</span></a>          require_once('field/'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('type')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>.'/field.class.php');
<a name="l769"><span class="linenum"> 769</span></a>          <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = 'data_field_'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('type')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>;
<a name="l770"><span class="linenum"> 770</span></a>          <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> = new <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l771"><span class="linenum"> 771</span></a>          return <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>;
<a name="l772"><span class="linenum"> 772</span></a>      }
<a name="l773"><span class="linenum"> 773</span></a>  }
<a name="l774"><span class="linenum"> 774</span></a>  
<a name="l775"><span class="linenum"> 775</span></a>  
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment">/**</span>
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment"> * Given record object (or id), returns true if the record belongs to the current user</span>
<a name="l778"><span class="linenum"> 778</span></a>  <span class="comment"> *</span>
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment"> * @global object</span>
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment"> * @global object</span>
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment"> * @param mixed $record record object or id</span>
<a name="l782"><span class="linenum"> 782</span></a>  <span class="comment"> * @return bool</span>
<a name="l783"><span class="linenum"> 783</span></a>  <span class="comment"> */</span>
<a name="l784"><span class="linenum"> 784</span></a>  function <a class="function" onClick="logFunction('data_isowner')" href="../../_functions/data_isowner.html" onMouseOver="funcPopup(event,'data_isowner')">data_isowner</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l785"><span class="linenum"> 785</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l786"><span class="linenum"> 786</span></a>  
<a name="l787"><span class="linenum"> 787</span></a>      if (!<a class="function" onClick="logFunction('isloggedin')" href="../../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>()) { // perf shortcut
<a name="l788"><span class="linenum"> 788</span></a>          return false;
<a name="l789"><span class="linenum"> 789</span></a>      }
<a name="l790"><span class="linenum"> 790</span></a>  
<a name="l791"><span class="linenum"> 791</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>)) {
<a name="l792"><span class="linenum"> 792</span></a>          if (!<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_records', array('id'=&gt;<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>))) {
<a name="l793"><span class="linenum"> 793</span></a>              return false;
<a name="l794"><span class="linenum"> 794</span></a>          }
<a name="l795"><span class="linenum"> 795</span></a>      }
<a name="l796"><span class="linenum"> 796</span></a>  
<a name="l797"><span class="linenum"> 797</span></a>      return (<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l798"><span class="linenum"> 798</span></a>  }
<a name="l799"><span class="linenum"> 799</span></a>  
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment">/**</span>
<a name="l801"><span class="linenum"> 801</span></a>  <span class="comment"> * has a user reached the max number of entries?</span>
<a name="l802"><span class="linenum"> 802</span></a>  <span class="comment"> *</span>
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment"> * @param object $data</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment"> * @return bool</span>
<a name="l805"><span class="linenum"> 805</span></a>  <span class="comment"> */</span>
<a name="l806"><span class="linenum"> 806</span></a>  function <a class="function" onClick="logFunction('data_atmaxentries')" href="../../_functions/data_atmaxentries.html" onMouseOver="funcPopup(event,'data_atmaxentries')">data_atmaxentries</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>){
<a name="l807"><span class="linenum"> 807</span></a>      if (!<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('maxentries')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/maxentries.html">maxentries</a>){
<a name="l808"><span class="linenum"> 808</span></a>          return false;
<a name="l809"><span class="linenum"> 809</span></a>  
<a name="l810"><span class="linenum"> 810</span></a>      } else {
<a name="l811"><span class="linenum"> 811</span></a>          return (<a class="function" onClick="logFunction('data_numentries')" href="../../_functions/data_numentries.html" onMouseOver="funcPopup(event,'data_numentries')">data_numentries</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) &gt;= <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('maxentries')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/maxentries.html">maxentries</a>);
<a name="l812"><span class="linenum"> 812</span></a>      }
<a name="l813"><span class="linenum"> 813</span></a>  }
<a name="l814"><span class="linenum"> 814</span></a>  
<a name="l815"><span class="linenum"> 815</span></a>  <span class="comment">/**</span>
<a name="l816"><span class="linenum"> 816</span></a>  <span class="comment"> * returns the number of entries already made by this user</span>
<a name="l817"><span class="linenum"> 817</span></a>  <span class="comment"> *</span>
<a name="l818"><span class="linenum"> 818</span></a>  <span class="comment"> * @global object</span>
<a name="l819"><span class="linenum"> 819</span></a>  <span class="comment"> * @global object</span>
<a name="l820"><span class="linenum"> 820</span></a>  <span class="comment"> * @param object $data</span>
<a name="l821"><span class="linenum"> 821</span></a>  <span class="comment"> * @return int</span>
<a name="l822"><span class="linenum"> 822</span></a>  <span class="comment"> */</span>
<a name="l823"><span class="linenum"> 823</span></a>  function <a class="function" onClick="logFunction('data_numentries')" href="../../_functions/data_numentries.html" onMouseOver="funcPopup(event,'data_numentries')">data_numentries</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>){
<a name="l824"><span class="linenum"> 824</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l825"><span class="linenum"> 825</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(*) FROM {data_records} WHERE dataid=? AND userid=?';
<a name="l826"><span class="linenum"> 826</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l827"><span class="linenum"> 827</span></a>  }
<a name="l828"><span class="linenum"> 828</span></a>  
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment">/**</span>
<a name="l830"><span class="linenum"> 830</span></a>  <span class="comment"> * function that takes in a dataid and adds a record</span>
<a name="l831"><span class="linenum"> 831</span></a>  <span class="comment"> * this is used everytime an add template is submitted</span>
<a name="l832"><span class="linenum"> 832</span></a>  <span class="comment"> *</span>
<a name="l833"><span class="linenum"> 833</span></a>  <span class="comment"> * @global object</span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment"> * @global object</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment"> * @param object $data</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment"> * @param int $groupid</span>
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment"> * @return bool</span>
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment"> */</span>
<a name="l839"><span class="linenum"> 839</span></a>  function <a class="function" onClick="logFunction('data_add_record')" href="../../_functions/data_add_record.html" onMouseOver="funcPopup(event,'data_add_record')">data_add_record</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>=0){
<a name="l840"><span class="linenum"> 840</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l841"><span class="linenum"> 841</span></a>  
<a name="l842"><span class="linenum"> 842</span></a>      <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l843"><span class="linenum"> 843</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l844"><span class="linenum"> 844</span></a>  
<a name="l845"><span class="linenum"> 845</span></a>      <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = new stdClass();
<a name="l846"><span class="linenum"> 846</span></a>      <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l847"><span class="linenum"> 847</span></a>      <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('dataid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/dataid.html">dataid</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l848"><span class="linenum"> 848</span></a>      <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('groupid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a> = <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>;
<a name="l849"><span class="linenum"> 849</span></a>      <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timecreated')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l850"><span class="linenum"> 850</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:approve', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l851"><span class="linenum"> 851</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('approved')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a> = 1;
<a name="l852"><span class="linenum"> 852</span></a>      } else {
<a name="l853"><span class="linenum"> 853</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('approved')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a> = 0;
<a name="l854"><span class="linenum"> 854</span></a>      }
<a name="l855"><span class="linenum"> 855</span></a>      <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('data_records', <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l856"><span class="linenum"> 856</span></a>  
<a name="l857"><span class="linenum"> 857</span></a>  <span class="comment">    // Trigger an event for creating this record.</span>
<a name="l858"><span class="linenum"> 858</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_data\event\<a class="class" onClick="logClass('record_created')" href="../../_classes/record_created.html" onMouseOver="classPopup(event,'record_created')">record_created</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l859"><span class="linenum"> 859</span></a>          'objectid' =&gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l860"><span class="linenum"> 860</span></a>          'context' =&gt; <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l861"><span class="linenum"> 861</span></a>          'other' =&gt; array(
<a name="l862"><span class="linenum"> 862</span></a>              'dataid' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;id
<a name="l863"><span class="linenum"> 863</span></a>          )
<a name="l864"><span class="linenum"> 864</span></a>      ));
<a name="l865"><span class="linenum"> 865</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l866"><span class="linenum"> 866</span></a>  
<a name="l867"><span class="linenum"> 867</span></a>      return <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l868"><span class="linenum"> 868</span></a>  }
<a name="l869"><span class="linenum"> 869</span></a>  
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment">/**</span>
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment"> * check the multple existence any tag in a template</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment"> *</span>
<a name="l873"><span class="linenum"> 873</span></a>  <span class="comment"> * check to see if there are 2 or more of the same tag being used.</span>
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment"> *</span>
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment"> * @global object</span>
<a name="l876"><span class="linenum"> 876</span></a>  <span class="comment"> * @param int $dataid,</span>
<a name="l877"><span class="linenum"> 877</span></a>  <span class="comment"> * @param string $template</span>
<a name="l878"><span class="linenum"> 878</span></a>  <span class="comment"> * @return bool</span>
<a name="l879"><span class="linenum"> 879</span></a>  <span class="comment"> */</span>
<a name="l880"><span class="linenum"> 880</span></a>  function <a class="function" onClick="logFunction('data_tags_check')" href="../../_functions/data_tags_check.html" onMouseOver="funcPopup(event,'data_tags_check')">data_tags_check</a>(<a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>) {
<a name="l881"><span class="linenum"> 881</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l882"><span class="linenum"> 882</span></a>  
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">    // first get all the possible tags</span>
<a name="l884"><span class="linenum"> 884</span></a>      <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('data_fields', array('dataid'=&gt;<a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>));
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">    // then we generate strings to replace</span>
<a name="l886"><span class="linenum"> 886</span></a>      <a class="var it35070" onMouseOver="hilite(35070)" onMouseOut="lolite()" onClick="logVariable('tagsok')" href="../../_variables/tagsok.html">$tagsok</a> = true; <span class="comment">// let's be optimistic</span>
<a name="l887"><span class="linenum"> 887</span></a>      foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>){
<a name="l888"><span class="linenum"> 888</span></a>          <a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../../_variables/pattern.html">$pattern</a>=&quot;/\[\[&quot; . <a class="phpfunction" onClick="logFunction('preg_quote')" href="../../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('name')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, '/') . &quot;\]\]/i&quot;;
<a name="l889"><span class="linenum"> 889</span></a>          if (<a class="phpfunction" onClick="logFunction('preg_match_all')" href="../../_functions/preg_match_all.html" onMouseOver="phpfuncPopup(event,'preg_match_all')">preg_match_all</a>(<a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../../_variables/pattern.html">$pattern</a>, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>, <a class="var it237" onMouseOver="hilite(237)" onMouseOut="lolite()" onClick="logVariable('dummy')" href="../../_variables/dummy.html">$dummy</a>)&gt;1){
<a name="l890"><span class="linenum"> 890</span></a>              <a class="var it35070" onMouseOver="hilite(35070)" onMouseOut="lolite()" onClick="logVariable('tagsok')" href="../../_variables/tagsok.html">$tagsok</a> = false;
<a name="l891"><span class="linenum"> 891</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>('[['.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('name')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>.']] - '.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('multipletags','data'));
<a name="l892"><span class="linenum"> 892</span></a>          }
<a name="l893"><span class="linenum"> 893</span></a>      }
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment">    // else return true</span>
<a name="l895"><span class="linenum"> 895</span></a>      return <a class="var it35070" onMouseOver="hilite(35070)" onMouseOut="lolite()" onClick="logVariable('tagsok')" href="../../_variables/tagsok.html">$tagsok</a>;
<a name="l896"><span class="linenum"> 896</span></a>  }
<a name="l897"><span class="linenum"> 897</span></a>  
<a name="l898"><span class="linenum"> 898</span></a>  <span class="comment">/**</span>
<a name="l899"><span class="linenum"> 899</span></a>  <span class="comment"> * Adds an instance of a data</span>
<a name="l900"><span class="linenum"> 900</span></a>  <span class="comment"> *</span>
<a name="l901"><span class="linenum"> 901</span></a>  <span class="comment"> * @param stdClass $data</span>
<a name="l902"><span class="linenum"> 902</span></a>  <span class="comment"> * @param mod_data_mod_form $mform</span>
<a name="l903"><span class="linenum"> 903</span></a>  <span class="comment"> * @return int intance id</span>
<a name="l904"><span class="linenum"> 904</span></a>  <span class="comment"> */</span>
<a name="l905"><span class="linenum"> 905</span></a>  function <a class="function" onClick="logFunction('data_add_instance')" href="../../_functions/data_add_instance.html" onMouseOver="funcPopup(event,'data_add_instance')">data_add_instance</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = null) {
<a name="l906"><span class="linenum"> 906</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l907"><span class="linenum"> 907</span></a>  
<a name="l908"><span class="linenum"> 908</span></a>      if (empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assessed')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a>)) {
<a name="l909"><span class="linenum"> 909</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assessed')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a> = 0;
<a name="l910"><span class="linenum"> 910</span></a>      }
<a name="l911"><span class="linenum"> 911</span></a>  
<a name="l912"><span class="linenum"> 912</span></a>      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l913"><span class="linenum"> 913</span></a>  
<a name="l914"><span class="linenum"> 914</span></a>      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l915"><span class="linenum"> 915</span></a>  
<a name="l916"><span class="linenum"> 916</span></a>      <a class="function" onClick="logFunction('data_grade_item_update')" href="../../_functions/data_grade_item_update.html" onMouseOver="funcPopup(event,'data_grade_item_update')">data_grade_item_update</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l917"><span class="linenum"> 917</span></a>  
<a name="l918"><span class="linenum"> 918</span></a>      return <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l919"><span class="linenum"> 919</span></a>  }
<a name="l920"><span class="linenum"> 920</span></a>  
<a name="l921"><span class="linenum"> 921</span></a>  <span class="comment">/**</span>
<a name="l922"><span class="linenum"> 922</span></a>  <span class="comment"> * updates an instance of a data</span>
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment"> *</span>
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment"> * @global object</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment"> * @param object $data</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment"> * @return bool</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment"> */</span>
<a name="l928"><span class="linenum"> 928</span></a>  function <a class="function" onClick="logFunction('data_update_instance')" href="../../_functions/data_update_instance.html" onMouseOver="funcPopup(event,'data_update_instance')">data_update_instance</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l929"><span class="linenum"> 929</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l930"><span class="linenum"> 930</span></a>  
<a name="l931"><span class="linenum"> 931</span></a>      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l932"><span class="linenum"> 932</span></a>      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>           = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('instance')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l933"><span class="linenum"> 933</span></a>  
<a name="l934"><span class="linenum"> 934</span></a>      if (empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assessed')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a>)) {
<a name="l935"><span class="linenum"> 935</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assessed')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a> = 0;
<a name="l936"><span class="linenum"> 936</span></a>      }
<a name="l937"><span class="linenum"> 937</span></a>  
<a name="l938"><span class="linenum"> 938</span></a>      if (empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('ratingtime')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/ratingtime.html">ratingtime</a>) or empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assessed')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a>)) {
<a name="l939"><span class="linenum"> 939</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assesstimestart')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/assesstimestart.html">assesstimestart</a>  = 0;
<a name="l940"><span class="linenum"> 940</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assesstimefinish')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/assesstimefinish.html">assesstimefinish</a> = 0;
<a name="l941"><span class="linenum"> 941</span></a>      }
<a name="l942"><span class="linenum"> 942</span></a>  
<a name="l943"><span class="linenum"> 943</span></a>      if (empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('notification')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/notification.html">notification</a>)) {
<a name="l944"><span class="linenum"> 944</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('notification')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/notification.html">notification</a> = 0;
<a name="l945"><span class="linenum"> 945</span></a>      }
<a name="l946"><span class="linenum"> 946</span></a>  
<a name="l947"><span class="linenum"> 947</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l948"><span class="linenum"> 948</span></a>  
<a name="l949"><span class="linenum"> 949</span></a>      <a class="function" onClick="logFunction('data_grade_item_update')" href="../../_functions/data_grade_item_update.html" onMouseOver="funcPopup(event,'data_grade_item_update')">data_grade_item_update</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l950"><span class="linenum"> 950</span></a>  
<a name="l951"><span class="linenum"> 951</span></a>      return true;
<a name="l952"><span class="linenum"> 952</span></a>  
<a name="l953"><span class="linenum"> 953</span></a>  }
<a name="l954"><span class="linenum"> 954</span></a>  
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment">/**</span>
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment"> * deletes an instance of a data</span>
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment"> *</span>
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment"> * @global object</span>
<a name="l959"><span class="linenum"> 959</span></a>  <span class="comment"> * @param int $id</span>
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment"> * @return bool</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment"> */</span>
<a name="l962"><span class="linenum"> 962</span></a>  function <a class="function" onClick="logFunction('data_delete_instance')" href="../../_functions/data_delete_instance.html" onMouseOver="funcPopup(event,'data_delete_instance')">data_delete_instance</a>(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {    // takes the dataid
<a name="l963"><span class="linenum"> 963</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l964"><span class="linenum"> 964</span></a>  
<a name="l965"><span class="linenum"> 965</span></a>      if (!<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data', array('id'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>))) {
<a name="l966"><span class="linenum"> 966</span></a>          return false;
<a name="l967"><span class="linenum"> 967</span></a>      }
<a name="l968"><span class="linenum"> 968</span></a>  
<a name="l969"><span class="linenum"> 969</span></a>      <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l970"><span class="linenum"> 970</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l971"><span class="linenum"> 971</span></a>  
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment">/// Delete all the associated information</span>
<a name="l973"><span class="linenum"> 973</span></a>  
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment">    // files</span>
<a name="l975"><span class="linenum"> 975</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l976"><span class="linenum"> 976</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_data');
<a name="l977"><span class="linenum"> 977</span></a>  
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment">    // get all the records in this data</span>
<a name="l979"><span class="linenum"> 979</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT r.id
<a name="l980"><span class="linenum"> 980</span></a>                FROM {data_records} r
<a name="l981"><span class="linenum"> 981</span></a>               WHERE r.dataid = ?&quot;;
<a name="l982"><span class="linenum"> 982</span></a>  
<a name="l983"><span class="linenum"> 983</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('data_content', &quot;recordid IN (<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>)&quot;, array(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l984"><span class="linenum"> 984</span></a>  
<a name="l985"><span class="linenum"> 985</span></a>  <span class="comment">    // delete all the records and fields</span>
<a name="l986"><span class="linenum"> 986</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('data_records', array('dataid'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l987"><span class="linenum"> 987</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('data_fields', array('dataid'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l988"><span class="linenum"> 988</span></a>  
<a name="l989"><span class="linenum"> 989</span></a>  <span class="comment">    // Delete the instance itself</span>
<a name="l990"><span class="linenum"> 990</span></a>      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('data', array('id'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l991"><span class="linenum"> 991</span></a>  
<a name="l992"><span class="linenum"> 992</span></a>  <span class="comment">    // cleanup gradebook</span>
<a name="l993"><span class="linenum"> 993</span></a>      <a class="function" onClick="logFunction('data_grade_item_delete')" href="../../_functions/data_grade_item_delete.html" onMouseOver="funcPopup(event,'data_grade_item_delete')">data_grade_item_delete</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l994"><span class="linenum"> 994</span></a>  
<a name="l995"><span class="linenum"> 995</span></a>      return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l996"><span class="linenum"> 996</span></a>  }
<a name="l997"><span class="linenum"> 997</span></a>  
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">/**</span>
<a name="l999"><span class="linenum"> 999</span></a>  <span class="comment"> * returns a summary of data activity of this user</span>
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment"> *</span>
<a name="l1001"><span class="linenum">1001</span></a>  <span class="comment"> * @global object</span>
<a name="l1002"><span class="linenum">1002</span></a>  <span class="comment"> * @param object $course</span>
<a name="l1003"><span class="linenum">1003</span></a>  <span class="comment"> * @param object $user</span>
<a name="l1004"><span class="linenum">1004</span></a>  <span class="comment"> * @param object $mod</span>
<a name="l1005"><span class="linenum">1005</span></a>  <span class="comment"> * @param object $data</span>
<a name="l1006"><span class="linenum">1006</span></a>  <span class="comment"> * @return object|null</span>
<a name="l1007"><span class="linenum">1007</span></a>  <span class="comment"> */</span>
<a name="l1008"><span class="linenum">1008</span></a>  function <a class="function" onClick="logFunction('data_user_outline')" href="../../_functions/data_user_outline.html" onMouseOver="funcPopup(event,'data_user_outline')">data_user_outline</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l1009"><span class="linenum">1009</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1010"><span class="linenum">1010</span></a>      require_once(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/gradelib.php&quot;);
<a name="l1011"><span class="linenum">1011</span></a>  
<a name="l1012"><span class="linenum">1012</span></a>      <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod', 'data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1013"><span class="linenum">1013</span></a>      if (empty(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades)) {
<a name="l1014"><span class="linenum">1014</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = false;
<a name="l1015"><span class="linenum">1015</span></a>      } else {
<a name="l1016"><span class="linenum">1016</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades);
<a name="l1017"><span class="linenum">1017</span></a>      }
<a name="l1018"><span class="linenum">1018</span></a>  
<a name="l1019"><span class="linenum">1019</span></a>  
<a name="l1020"><span class="linenum">1020</span></a>      if (<a class="var it35071" onMouseOver="hilite(35071)" onMouseOut="lolite()" onClick="logVariable('countrecords')" href="../../_variables/countrecords.html">$countrecords</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('data_records', array('dataid'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid'=&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l1021"><span class="linenum">1021</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = new stdClass();
<a name="l1022"><span class="linenum">1022</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('info')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/info.html">info</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('numrecords', 'data', <a class="var it35071" onMouseOver="hilite(35071)" onMouseOut="lolite()" onClick="logVariable('countrecords')" href="../../_variables/countrecords.html">$countrecords</a>);
<a name="l1023"><span class="linenum">1023</span></a>          <a class="var it35072" onMouseOver="hilite(35072)" onMouseOut="lolite()" onClick="logVariable('lastrecord')" href="../../_variables/lastrecord.html">$lastrecord</a>   = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>('SELECT id,timemodified FROM {data_records}
<a name="l1024"><span class="linenum">1024</span></a>                                                WHERE dataid = ? AND userid = ?
<a name="l1025"><span class="linenum">1025</span></a>                                             ORDER BY timemodified DESC', array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), true);
<a name="l1026"><span class="linenum">1026</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('time')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/time.html">time</a> = <a class="var it35072" onMouseOver="hilite(35072)" onMouseOut="lolite()" onClick="logVariable('lastrecord')" href="../../_variables/lastrecord.html">$lastrecord</a>-&gt;<a onClick="logVariable('timemodified')" class="var it41735" onMouseOver="hilite(41735)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>;
<a name="l1027"><span class="linenum">1027</span></a>          if (<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l1028"><span class="linenum">1028</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('info')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/info.html">info</a> .= ', ' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade') . ': ' . <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/str_long_grade.html">str_long_grade</a>;
<a name="l1029"><span class="linenum">1029</span></a>          }
<a name="l1030"><span class="linenum">1030</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l1031"><span class="linenum">1031</span></a>      } else if (<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l1032"><span class="linenum">1032</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = new stdClass();
<a name="l1033"><span class="linenum">1033</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('info')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/info.html">info</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade') . ': ' . <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/str_long_grade.html">str_long_grade</a>;
<a name="l1034"><span class="linenum">1034</span></a>  
<a name="l1035"><span class="linenum">1035</span></a>  <span class="comment">        //datesubmitted == time created. dategraded == time modified or time overridden</span>
<a name="l1036"><span class="linenum">1036</span></a>  <span class="comment">        //if grade was last modified by the user themselves use date graded. Otherwise use date submitted</span>
<a name="l1037"><span class="linenum">1037</span></a>  <span class="comment">        //TODO: move this copied &amp; pasted code somewhere in the grades API. See MDL-26704</span>
<a name="l1038"><span class="linenum">1038</span></a>          if (<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('usermodified')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/usermodified.html">usermodified</a> == <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> || empty(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('datesubmitted')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/datesubmitted.html">datesubmitted</a>)) {
<a name="l1039"><span class="linenum">1039</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('time')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/time.html">time</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('dategraded')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/dategraded.html">dategraded</a>;
<a name="l1040"><span class="linenum">1040</span></a>          } else {
<a name="l1041"><span class="linenum">1041</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('time')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/time.html">time</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('datesubmitted')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/datesubmitted.html">datesubmitted</a>;
<a name="l1042"><span class="linenum">1042</span></a>          }
<a name="l1043"><span class="linenum">1043</span></a>  
<a name="l1044"><span class="linenum">1044</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l1045"><span class="linenum">1045</span></a>      }
<a name="l1046"><span class="linenum">1046</span></a>      return NULL;
<a name="l1047"><span class="linenum">1047</span></a>  }
<a name="l1048"><span class="linenum">1048</span></a>  
<a name="l1049"><span class="linenum">1049</span></a>  <span class="comment">/**</span>
<a name="l1050"><span class="linenum">1050</span></a>  <span class="comment"> * Prints all the records uploaded by this user</span>
<a name="l1051"><span class="linenum">1051</span></a>  <span class="comment"> *</span>
<a name="l1052"><span class="linenum">1052</span></a>  <span class="comment"> * @global object</span>
<a name="l1053"><span class="linenum">1053</span></a>  <span class="comment"> * @param object $course</span>
<a name="l1054"><span class="linenum">1054</span></a>  <span class="comment"> * @param object $user</span>
<a name="l1055"><span class="linenum">1055</span></a>  <span class="comment"> * @param object $mod</span>
<a name="l1056"><span class="linenum">1056</span></a>  <span class="comment"> * @param object $data</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment"> */</span>
<a name="l1058"><span class="linenum">1058</span></a>  function <a class="function" onClick="logFunction('data_user_complete')" href="../../_functions/data_user_complete.html" onMouseOver="funcPopup(event,'data_user_complete')">data_user_complete</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l1059"><span class="linenum">1059</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1060"><span class="linenum">1060</span></a>      require_once(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/gradelib.php&quot;);
<a name="l1061"><span class="linenum">1061</span></a>  
<a name="l1062"><span class="linenum">1062</span></a>      <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod', 'data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1063"><span class="linenum">1063</span></a>      if (!empty(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades)) {
<a name="l1064"><span class="linenum">1064</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades);
<a name="l1065"><span class="linenum">1065</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('container')" href="../../_functions/container.html" onMouseOver="funcPopup(event,'container')">container</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade').': '.<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/str_long_grade.html">str_long_grade</a>);
<a name="l1066"><span class="linenum">1066</span></a>          if (<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/str_feedback.html">str_feedback</a>) {
<a name="l1067"><span class="linenum">1067</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('container')" href="../../_functions/container.html" onMouseOver="funcPopup(event,'container')">container</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('feedback').': '.<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/str_feedback.html">str_feedback</a>);
<a name="l1068"><span class="linenum">1068</span></a>          }
<a name="l1069"><span class="linenum">1069</span></a>      }
<a name="l1070"><span class="linenum">1070</span></a>  
<a name="l1071"><span class="linenum">1071</span></a>      if (<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('data_records', array('dataid'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,'userid'=&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'timemodified DESC')) {
<a name="l1072"><span class="linenum">1072</span></a>          <a class="function" onClick="logFunction('data_print_template')" href="../../_functions/data_print_template.html" onMouseOver="funcPopup(event,'data_print_template')">data_print_template</a>('singletemplate', <a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l1073"><span class="linenum">1073</span></a>      }
<a name="l1074"><span class="linenum">1074</span></a>  }
<a name="l1075"><span class="linenum">1075</span></a>  
<a name="l1076"><span class="linenum">1076</span></a>  <span class="comment">/**</span>
<a name="l1077"><span class="linenum">1077</span></a>  <span class="comment"> * Return grade for given user or all users.</span>
<a name="l1078"><span class="linenum">1078</span></a>  <span class="comment"> *</span>
<a name="l1079"><span class="linenum">1079</span></a>  <span class="comment"> * @global object</span>
<a name="l1080"><span class="linenum">1080</span></a>  <span class="comment"> * @param object $data</span>
<a name="l1081"><span class="linenum">1081</span></a>  <span class="comment"> * @param int $userid optional user id, 0 means all users</span>
<a name="l1082"><span class="linenum">1082</span></a>  <span class="comment"> * @return array array of grades, false if none</span>
<a name="l1083"><span class="linenum">1083</span></a>  <span class="comment"> */</span>
<a name="l1084"><span class="linenum">1084</span></a>  function <a class="function" onClick="logFunction('data_get_user_grades')" href="../../_functions/data_get_user_grades.html" onMouseOver="funcPopup(event,'data_get_user_grades')">data_get_user_grades</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>=0) {
<a name="l1085"><span class="linenum">1085</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1086"><span class="linenum">1086</span></a>  
<a name="l1087"><span class="linenum">1087</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../rating/lib.php.html">/rating/lib.php</a>');
<a name="l1088"><span class="linenum">1088</span></a>  
<a name="l1089"><span class="linenum">1089</span></a>      <a class="var it6649" onMouseOver="hilite(6649)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a> = new stdClass;
<a name="l1090"><span class="linenum">1090</span></a>      <a class="var it6649" onMouseOver="hilite(6649)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('component')" class="var it40701" onMouseOver="hilite(40701)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = 'mod_data';
<a name="l1091"><span class="linenum">1091</span></a>      <a class="var it6649" onMouseOver="hilite(6649)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('ratingarea')" class="var it40701" onMouseOver="hilite(40701)" onMouseOut="lolite()" href="../../_variables/ratingarea.html">ratingarea</a> = 'entry';
<a name="l1092"><span class="linenum">1092</span></a>      <a class="var it6649" onMouseOver="hilite(6649)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('modulename')" class="var it40701" onMouseOver="hilite(40701)" onMouseOut="lolite()" href="../../_variables/modulename.html">modulename</a> = 'data';
<a name="l1093"><span class="linenum">1093</span></a>      <a class="var it6649" onMouseOver="hilite(6649)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('moduleid')" class="var it40701" onMouseOver="hilite(40701)" onMouseOut="lolite()" href="../../_variables/moduleid.html">moduleid</a>   = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1094"><span class="linenum">1094</span></a>  
<a name="l1095"><span class="linenum">1095</span></a>      <a class="var it6649" onMouseOver="hilite(6649)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('userid')" class="var it40701" onMouseOver="hilite(40701)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l1096"><span class="linenum">1096</span></a>      <a class="var it6649" onMouseOver="hilite(6649)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('aggregationmethod')" class="var it40701" onMouseOver="hilite(40701)" onMouseOut="lolite()" href="../../_variables/aggregationmethod.html">aggregationmethod</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assessed')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a>;
<a name="l1097"><span class="linenum">1097</span></a>      <a class="var it6649" onMouseOver="hilite(6649)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('scaleid')" class="var it40701" onMouseOver="hilite(40701)" onMouseOut="lolite()" href="../../_variables/scaleid.html">scaleid</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('scale')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>;
<a name="l1098"><span class="linenum">1098</span></a>      <a class="var it6649" onMouseOver="hilite(6649)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('itemtable')" class="var it40701" onMouseOver="hilite(40701)" onMouseOut="lolite()" href="../../_variables/itemtable.html">itemtable</a> = 'data_records';
<a name="l1099"><span class="linenum">1099</span></a>      <a class="var it6649" onMouseOver="hilite(6649)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('itemtableusercolumn')" class="var it40701" onMouseOver="hilite(40701)" onMouseOut="lolite()" href="../../_variables/itemtableusercolumn.html">itemtableusercolumn</a> = 'userid';
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>      <a class="var it6647" onMouseOver="hilite(6647)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a> = <span class="keyword">new </span><a class="class" onClick="logClass('rating_manager')" href="../../_classes/rating_manager.html" onMouseOver="classPopup(event,'rating_manager')">rating_manager</a>();
<a name="l1102"><span class="linenum">1102</span></a>      return <a class="var it6647" onMouseOver="hilite(6647)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a>-&gt;<a class="function" onClick="logFunction('get_user_grades')" href="../../_functions/get_user_grades.html" onMouseOver="funcPopup(event,'get_user_grades')">get_user_grades</a>(<a class="var it6649" onMouseOver="hilite(6649)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>);
<a name="l1103"><span class="linenum">1103</span></a>  }
<a name="l1104"><span class="linenum">1104</span></a>  
<a name="l1105"><span class="linenum">1105</span></a>  <span class="comment">/**</span>
<a name="l1106"><span class="linenum">1106</span></a>  <span class="comment"> * Update activity grades</span>
<a name="l1107"><span class="linenum">1107</span></a>  <span class="comment"> *</span>
<a name="l1108"><span class="linenum">1108</span></a>  <span class="comment"> * @category grade</span>
<a name="l1109"><span class="linenum">1109</span></a>  <span class="comment"> * @param object $data</span>
<a name="l1110"><span class="linenum">1110</span></a>  <span class="comment"> * @param int $userid specific user only, 0 means all</span>
<a name="l1111"><span class="linenum">1111</span></a>  <span class="comment"> * @param bool $nullifnone</span>
<a name="l1112"><span class="linenum">1112</span></a>  <span class="comment"> */</span>
<a name="l1113"><span class="linenum">1113</span></a>  function <a class="function" onClick="logFunction('data_update_grades')" href="../../_functions/data_update_grades.html" onMouseOver="funcPopup(event,'data_update_grades')">data_update_grades</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>=0, <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('nullifnone')" href="../../_variables/nullifnone.html">$nullifnone</a>=true) {
<a name="l1114"><span class="linenum">1114</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1115"><span class="linenum">1115</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l1116"><span class="linenum">1116</span></a>  
<a name="l1117"><span class="linenum">1117</span></a>      if (!<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assessed')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a>) {
<a name="l1118"><span class="linenum">1118</span></a>          <a class="function" onClick="logFunction('data_grade_item_update')" href="../../_functions/data_grade_item_update.html" onMouseOver="funcPopup(event,'data_grade_item_update')">data_grade_item_update</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l1119"><span class="linenum">1119</span></a>  
<a name="l1120"><span class="linenum">1120</span></a>      } else if (<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="function" onClick="logFunction('data_get_user_grades')" href="../../_functions/data_get_user_grades.html" onMouseOver="funcPopup(event,'data_get_user_grades')">data_get_user_grades</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l1121"><span class="linenum">1121</span></a>          <a class="function" onClick="logFunction('data_grade_item_update')" href="../../_functions/data_grade_item_update.html" onMouseOver="funcPopup(event,'data_grade_item_update')">data_grade_item_update</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>);
<a name="l1122"><span class="linenum">1122</span></a>  
<a name="l1123"><span class="linenum">1123</span></a>      } else if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> and <a class="var it7075" onMouseOver="hilite(7075)" onMouseOut="lolite()" onClick="logVariable('nullifnone')" href="../../_variables/nullifnone.html">$nullifnone</a>) {
<a name="l1124"><span class="linenum">1124</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = new stdClass();
<a name="l1125"><span class="linenum">1125</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>   = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l1126"><span class="linenum">1126</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/rawgrade.html">rawgrade</a> = NULL;
<a name="l1127"><span class="linenum">1127</span></a>          <a class="function" onClick="logFunction('data_grade_item_update')" href="../../_functions/data_grade_item_update.html" onMouseOver="funcPopup(event,'data_grade_item_update')">data_grade_item_update</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l1128"><span class="linenum">1128</span></a>  
<a name="l1129"><span class="linenum">1129</span></a>      } else {
<a name="l1130"><span class="linenum">1130</span></a>          <a class="function" onClick="logFunction('data_grade_item_update')" href="../../_functions/data_grade_item_update.html" onMouseOver="funcPopup(event,'data_grade_item_update')">data_grade_item_update</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l1131"><span class="linenum">1131</span></a>      }
<a name="l1132"><span class="linenum">1132</span></a>  }
<a name="l1133"><span class="linenum">1133</span></a>  
<a name="l1134"><span class="linenum">1134</span></a>  <span class="comment">/**</span>
<a name="l1135"><span class="linenum">1135</span></a>  <span class="comment"> * Update/create grade item for given data</span>
<a name="l1136"><span class="linenum">1136</span></a>  <span class="comment"> *</span>
<a name="l1137"><span class="linenum">1137</span></a>  <span class="comment"> * @category grade</span>
<a name="l1138"><span class="linenum">1138</span></a>  <span class="comment"> * @param stdClass $data A database instance with extra cmidnumber property</span>
<a name="l1139"><span class="linenum">1139</span></a>  <span class="comment"> * @param mixed $grades Optional array/object of grade(s); 'reset' means reset grades in gradebook</span>
<a name="l1140"><span class="linenum">1140</span></a>  <span class="comment"> * @return object grade_item</span>
<a name="l1141"><span class="linenum">1141</span></a>  <span class="comment"> */</span>
<a name="l1142"><span class="linenum">1142</span></a>  function <a class="function" onClick="logFunction('data_grade_item_update')" href="../../_functions/data_grade_item_update.html" onMouseOver="funcPopup(event,'data_grade_item_update')">data_grade_item_update</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>=NULL) {
<a name="l1143"><span class="linenum">1143</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1144"><span class="linenum">1144</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l1145"><span class="linenum">1145</span></a>  
<a name="l1146"><span class="linenum">1146</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('itemname'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, 'idnumber'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('cmidnumber')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/cmidnumber.html">cmidnumber</a>);
<a name="l1147"><span class="linenum">1147</span></a>  
<a name="l1148"><span class="linenum">1148</span></a>      if (!<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assessed')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a> or <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('scale')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a> == 0) {
<a name="l1149"><span class="linenum">1149</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['gradetype'] = <a class="constant" onClick="logConstant('GRADE_TYPE_NONE')" href="../../_constants/GRADE_TYPE_NONE.html" onMouseOver="constPopup(event,'GRADE_TYPE_NONE')">GRADE_TYPE_NONE</a>;
<a name="l1150"><span class="linenum">1150</span></a>  
<a name="l1151"><span class="linenum">1151</span></a>      } else if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('scale')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a> &gt; 0) {
<a name="l1152"><span class="linenum">1152</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['gradetype'] = <a class="constant" onClick="logConstant('GRADE_TYPE_VALUE')" href="../../_constants/GRADE_TYPE_VALUE.html" onMouseOver="constPopup(event,'GRADE_TYPE_VALUE')">GRADE_TYPE_VALUE</a>;
<a name="l1153"><span class="linenum">1153</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['grademax']  = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('scale')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>;
<a name="l1154"><span class="linenum">1154</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['grademin']  = 0;
<a name="l1155"><span class="linenum">1155</span></a>  
<a name="l1156"><span class="linenum">1156</span></a>      } else if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('scale')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a> &lt; 0) {
<a name="l1157"><span class="linenum">1157</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['gradetype'] = <a class="constant" onClick="logConstant('GRADE_TYPE_SCALE')" href="../../_constants/GRADE_TYPE_SCALE.html" onMouseOver="constPopup(event,'GRADE_TYPE_SCALE')">GRADE_TYPE_SCALE</a>;
<a name="l1158"><span class="linenum">1158</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['scaleid']   = -<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('scale')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>;
<a name="l1159"><span class="linenum">1159</span></a>      }
<a name="l1160"><span class="linenum">1160</span></a>  
<a name="l1161"><span class="linenum">1161</span></a>      if (<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>  === 'reset') {
<a name="l1162"><span class="linenum">1162</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['reset'] = true;
<a name="l1163"><span class="linenum">1163</span></a>          <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = NULL;
<a name="l1164"><span class="linenum">1164</span></a>      }
<a name="l1165"><span class="linenum">1165</span></a>  
<a name="l1166"><span class="linenum">1166</span></a>      return <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>('mod/data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('course')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, 'mod', 'data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1167"><span class="linenum">1167</span></a>  }
<a name="l1168"><span class="linenum">1168</span></a>  
<a name="l1169"><span class="linenum">1169</span></a>  <span class="comment">/**</span>
<a name="l1170"><span class="linenum">1170</span></a>  <span class="comment"> * Delete grade item for given data</span>
<a name="l1171"><span class="linenum">1171</span></a>  <span class="comment"> *</span>
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment"> * @category grade</span>
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment"> * @param object $data object</span>
<a name="l1174"><span class="linenum">1174</span></a>  <span class="comment"> * @return object grade_item</span>
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment"> */</span>
<a name="l1176"><span class="linenum">1176</span></a>  function <a class="function" onClick="logFunction('data_grade_item_delete')" href="../../_functions/data_grade_item_delete.html" onMouseOver="funcPopup(event,'data_grade_item_delete')">data_grade_item_delete</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l1177"><span class="linenum">1177</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1178"><span class="linenum">1178</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l1179"><span class="linenum">1179</span></a>  
<a name="l1180"><span class="linenum">1180</span></a>      return <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>('mod/data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('course')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, 'mod', 'data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, NULL, array('deleted'=&gt;1));
<a name="l1181"><span class="linenum">1181</span></a>  }
<a name="l1182"><span class="linenum">1182</span></a>  
<a name="l1183"><span class="linenum">1183</span></a>  <span class="comment">// junk functions</span>
<a name="l1184"><span class="linenum">1184</span></a>  <span class="comment">/**</span>
<a name="l1185"><span class="linenum">1185</span></a>  <span class="comment"> * takes a list of records, the current data, a search string,</span>
<a name="l1186"><span class="linenum">1186</span></a>  <span class="comment"> * and mode to display prints the translated template</span>
<a name="l1187"><span class="linenum">1187</span></a>  <span class="comment"> *</span>
<a name="l1188"><span class="linenum">1188</span></a>  <span class="comment"> * @global object</span>
<a name="l1189"><span class="linenum">1189</span></a>  <span class="comment"> * @global object</span>
<a name="l1190"><span class="linenum">1190</span></a>  <span class="comment"> * @param string $template</span>
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment"> * @param array $records</span>
<a name="l1192"><span class="linenum">1192</span></a>  <span class="comment"> * @param object $data</span>
<a name="l1193"><span class="linenum">1193</span></a>  <span class="comment"> * @param string $search</span>
<a name="l1194"><span class="linenum">1194</span></a>  <span class="comment"> * @param int $page</span>
<a name="l1195"><span class="linenum">1195</span></a>  <span class="comment"> * @param bool $return</span>
<a name="l1196"><span class="linenum">1196</span></a>  <span class="comment"> * @param object $jumpurl a moodle_url by which to jump back to the record list (can be null)</span>
<a name="l1197"><span class="linenum">1197</span></a>  <span class="comment"> * @return mixed</span>
<a name="l1198"><span class="linenum">1198</span></a>  <span class="comment"> */</span>
<a name="l1199"><span class="linenum">1199</span></a>  function <a class="function" onClick="logFunction('data_print_template')" href="../../_functions/data_print_template.html" onMouseOver="funcPopup(event,'data_print_template')">data_print_template</a>(<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>, <a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../_variables/search.html">$search</a>='', <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>=0, <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>=false, moodle_url <a class="var it13082" onMouseOver="hilite(13082)" onMouseOut="lolite()" onClick="logVariable('jumpurl')" href="../../_variables/jumpurl.html">$jumpurl</a>=null) {
<a name="l1200"><span class="linenum">1200</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1201"><span class="linenum">1201</span></a>  
<a name="l1202"><span class="linenum">1202</span></a>      <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1203"><span class="linenum">1203</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1204"><span class="linenum">1204</span></a>  
<a name="l1205"><span class="linenum">1205</span></a>      static <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = NULL;
<a name="l1206"><span class="linenum">1206</span></a>      static <a class="var it32543" onMouseOver="hilite(32543)" onMouseOut="lolite()" onClick="logVariable('isteacher')" href="../../_variables/isteacher.html">$isteacher</a>;
<a name="l1207"><span class="linenum">1207</span></a>      static <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a> = NULL;
<a name="l1208"><span class="linenum">1208</span></a>  
<a name="l1209"><span class="linenum">1209</span></a>      if (empty(<a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>)) {
<a name="l1210"><span class="linenum">1210</span></a>          <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1211"><span class="linenum">1211</span></a>      } else if (<a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a> != <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l1212"><span class="linenum">1212</span></a>          <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = NULL;
<a name="l1213"><span class="linenum">1213</span></a>      }
<a name="l1214"><span class="linenum">1214</span></a>  
<a name="l1215"><span class="linenum">1215</span></a>      if (empty(<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>)) {
<a name="l1216"><span class="linenum">1216</span></a>          <a class="var it28105" onMouseOver="hilite(28105)" onMouseOut="lolite()" onClick="logVariable('fieldrecords')" href="../../_variables/fieldrecords.html">$fieldrecords</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('data_fields', array('dataid'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1217"><span class="linenum">1217</span></a>          foreach (<a class="var it28105" onMouseOver="hilite(28105)" onMouseOut="lolite()" onClick="logVariable('fieldrecords')" href="../../_variables/fieldrecords.html">$fieldrecords</a> as <a class="var it28106" onMouseOver="hilite(28106)" onMouseOut="lolite()" onClick="logVariable('fieldrecord')" href="../../_variables/fieldrecord.html">$fieldrecord</a>) {
<a name="l1218"><span class="linenum">1218</span></a>              <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>[]= <a class="function" onClick="logFunction('data_get_field')" href="../../_functions/data_get_field.html" onMouseOver="funcPopup(event,'data_get_field')">data_get_field</a>(<a class="var it28106" onMouseOver="hilite(28106)" onMouseOut="lolite()" onClick="logVariable('fieldrecord')" href="../../_variables/fieldrecord.html">$fieldrecord</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l1219"><span class="linenum">1219</span></a>          }
<a name="l1220"><span class="linenum">1220</span></a>          <a class="var it32543" onMouseOver="hilite(32543)" onMouseOut="lolite()" onClick="logVariable('isteacher')" href="../../_variables/isteacher.html">$isteacher</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:managetemplates', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l1221"><span class="linenum">1221</span></a>      }
<a name="l1222"><span class="linenum">1222</span></a>  
<a name="l1223"><span class="linenum">1223</span></a>      if (empty(<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>)) {
<a name="l1224"><span class="linenum">1224</span></a>          return;
<a name="l1225"><span class="linenum">1225</span></a>      }
<a name="l1226"><span class="linenum">1226</span></a>  
<a name="l1227"><span class="linenum">1227</span></a>      if (!<a class="var it13082" onMouseOver="hilite(13082)" onMouseOut="lolite()" onClick="logVariable('jumpurl')" href="../../_variables/jumpurl.html">$jumpurl</a>) {
<a name="l1228"><span class="linenum">1228</span></a>          <a class="var it13082" onMouseOver="hilite(13082)" onMouseOut="lolite()" onClick="logVariable('jumpurl')" href="../../_variables/jumpurl.html">$jumpurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/data/view.php.html">/mod/data/view.php</a>', array('d' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1229"><span class="linenum">1229</span></a>      }
<a name="l1230"><span class="linenum">1230</span></a>      <a class="var it13082" onMouseOver="hilite(13082)" onMouseOut="lolite()" onClick="logVariable('jumpurl')" href="../../_variables/jumpurl.html">$jumpurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it13082" onMouseOver="hilite(13082)" onMouseOut="lolite()" onClick="logVariable('jumpurl')" href="../../_variables/jumpurl.html">$jumpurl</a>, array('page' =&gt; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, 'sesskey' =&gt; <a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l1231"><span class="linenum">1231</span></a>  
<a name="l1232"><span class="linenum">1232</span></a>  <span class="comment">    // Check whether this activity is read-only at present</span>
<a name="l1233"><span class="linenum">1233</span></a>      <a class="var it1209" onMouseOver="hilite(1209)" onMouseOut="lolite()" onClick="logVariable('readonly')" href="../../_variables/readonly.html">$readonly</a> = <a class="function" onClick="logFunction('data_in_readonly_period')" href="../../_functions/data_in_readonly_period.html" onMouseOver="funcPopup(event,'data_in_readonly_period')">data_in_readonly_period</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l1234"><span class="linenum">1234</span></a>  
<a name="l1235"><span class="linenum">1235</span></a>      foreach (<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> as <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {   // Might be just one for the single template
<a name="l1236"><span class="linenum">1236</span></a>  
<a name="l1237"><span class="linenum">1237</span></a>  <span class="comment">    // Replacing tags</span>
<a name="l1238"><span class="linenum">1238</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a> = array();
<a name="l1239"><span class="linenum">1239</span></a>          <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a> = array();
<a name="l1240"><span class="linenum">1240</span></a>  
<a name="l1241"><span class="linenum">1241</span></a>  <span class="comment">    // Then we generate strings to replace for normal tags</span>
<a name="l1242"><span class="linenum">1242</span></a>          foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l1243"><span class="linenum">1243</span></a>              <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[]='[['.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name.']]';
<a name="l1244"><span class="linenum">1244</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = <a class="function" onClick="logFunction('highlight')" href="../../_functions/highlight.html" onMouseOver="funcPopup(event,'highlight')">highlight</a>(<a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../_variables/search.html">$search</a>, <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a class="function" onClick="logFunction('display_browse_field')" href="../../_functions/display_browse_field.html" onMouseOver="funcPopup(event,'display_browse_field')">display_browse_field</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>));
<a name="l1245"><span class="linenum">1245</span></a>          }
<a name="l1246"><span class="linenum">1246</span></a>  
<a name="l1247"><span class="linenum">1247</span></a>          <a class="var it28690" onMouseOver="hilite(28690)" onMouseOut="lolite()" onClick="logVariable('canmanageentries')" href="../../_variables/canmanageentries.html">$canmanageentries</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:manageentries', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l1248"><span class="linenum">1248</span></a>  
<a name="l1249"><span class="linenum">1249</span></a>  <span class="comment">    // Replacing special tags (##Edit##, ##Delete##, ##More##)</span>
<a name="l1250"><span class="linenum">1250</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[]='##edit##';
<a name="l1251"><span class="linenum">1251</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[]='##delete##';
<a name="l1252"><span class="linenum">1252</span></a>          if (<a class="var it28690" onMouseOver="hilite(28690)" onMouseOut="lolite()" onClick="logVariable('canmanageentries')" href="../../_variables/canmanageentries.html">$canmanageentries</a> || (!<a class="var it1209" onMouseOver="hilite(1209)" onMouseOut="lolite()" onClick="logVariable('readonly')" href="../../_variables/readonly.html">$readonly</a> &amp;&amp; <a class="function" onClick="logFunction('data_isowner')" href="../../_functions/data_isowner.html" onMouseOver="funcPopup(event,'data_isowner')">data_isowner</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l1253"><span class="linenum">1253</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = '&lt;a href=&quot;'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/mod/data/edit.php?d='
<a name="l1254"><span class="linenum">1254</span></a>                               .<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'&amp;amp;rid='.<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'&amp;amp;sesskey='.<a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>().'&quot;&gt;&lt;img src=&quot;'.<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('t/edit') . '&quot; class=&quot;iconsmall&quot; alt=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('edit').'&quot; title=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('edit').'&quot; /&gt;&lt;/a&gt;';
<a name="l1255"><span class="linenum">1255</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = '&lt;a href=&quot;'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/mod/data/view.php?d='
<a name="l1256"><span class="linenum">1256</span></a>                               .<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'&amp;amp;delete='.<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'&amp;amp;sesskey='.<a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>().'&quot;&gt;&lt;img src=&quot;'.<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('t/delete') . '&quot; class=&quot;iconsmall&quot; alt=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('delete').'&quot; title=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('delete').'&quot; /&gt;&lt;/a&gt;';
<a name="l1257"><span class="linenum">1257</span></a>          } else {
<a name="l1258"><span class="linenum">1258</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = '';
<a name="l1259"><span class="linenum">1259</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = '';
<a name="l1260"><span class="linenum">1260</span></a>          }
<a name="l1261"><span class="linenum">1261</span></a>  
<a name="l1262"><span class="linenum">1262</span></a>          <a class="var it35073" onMouseOver="hilite(35073)" onMouseOut="lolite()" onClick="logVariable('moreurl')" href="../../_variables/moreurl.html">$moreurl</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> . '/mod/data/view.php?d=' . <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . '&amp;amp;rid=' . <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1263"><span class="linenum">1263</span></a>          if (<a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../_variables/search.html">$search</a>) {
<a name="l1264"><span class="linenum">1264</span></a>              <a class="var it35073" onMouseOver="hilite(35073)" onMouseOut="lolite()" onClick="logVariable('moreurl')" href="../../_variables/moreurl.html">$moreurl</a> .= '&amp;amp;filter=1';
<a name="l1265"><span class="linenum">1265</span></a>          }
<a name="l1266"><span class="linenum">1266</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[]='##more##';
<a name="l1267"><span class="linenum">1267</span></a>          <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = '&lt;a href=&quot;'.<a class="var it35073" onMouseOver="hilite(35073)" onMouseOut="lolite()" onClick="logVariable('moreurl')" href="../../_variables/moreurl.html">$moreurl</a>.'&quot;&gt;&lt;img src=&quot;'.<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('t/preview').
<a name="l1268"><span class="linenum">1268</span></a>                          '&quot; class=&quot;iconsmall&quot; alt=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('more', 'data').'&quot; title=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('more', 'data').
<a name="l1269"><span class="linenum">1269</span></a>                          '&quot; /&gt;&lt;/a&gt;';
<a name="l1270"><span class="linenum">1270</span></a>  
<a name="l1271"><span class="linenum">1271</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[]='##moreurl##';
<a name="l1272"><span class="linenum">1272</span></a>          <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = <a class="var it35073" onMouseOver="hilite(35073)" onMouseOut="lolite()" onClick="logVariable('moreurl')" href="../../_variables/moreurl.html">$moreurl</a>;
<a name="l1273"><span class="linenum">1273</span></a>  
<a name="l1274"><span class="linenum">1274</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[]='##delcheck##';
<a name="l1275"><span class="linenum">1275</span></a>          if (<a class="var it28690" onMouseOver="hilite(28690)" onMouseOut="lolite()" onClick="logVariable('canmanageentries')" href="../../_variables/canmanageentries.html">$canmanageentries</a>) {
<a name="l1276"><span class="linenum">1276</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('checkbox')" href="../../_functions/checkbox.html" onMouseOver="funcPopup(event,'checkbox')">checkbox</a>('delcheck[]', <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false, '', array('class' =&gt; 'recordcheckbox'));
<a name="l1277"><span class="linenum">1277</span></a>          } else {
<a name="l1278"><span class="linenum">1278</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = '';
<a name="l1279"><span class="linenum">1279</span></a>          }
<a name="l1280"><span class="linenum">1280</span></a>  
<a name="l1281"><span class="linenum">1281</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[]='##user##';
<a name="l1282"><span class="linenum">1282</span></a>          <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = '&lt;a href=&quot;'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/user/view.php?id='.<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>.
<a name="l1283"><span class="linenum">1283</span></a>                                 '&amp;amp;course='.<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('course')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>.'&quot;&gt;'.<a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>).'&lt;/a&gt;';
<a name="l1284"><span class="linenum">1284</span></a>  
<a name="l1285"><span class="linenum">1285</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[] = '##userpicture##';
<a name="l1286"><span class="linenum">1286</span></a>          <a class="var it35074" onMouseOver="hilite(35074)" onMouseOut="lolite()" onClick="logVariable('ruser')" href="../../_variables/ruser.html">$ruser</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('unalias')" href="../../_functions/unalias.html" onMouseOver="funcPopup(event,'unalias')">unalias</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>, null, 'userid');
<a name="l1287"><span class="linenum">1287</span></a>          <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('user_picture')" href="../../_functions/user_picture.html" onMouseOver="funcPopup(event,'user_picture')">user_picture</a>(<a class="var it35074" onMouseOver="hilite(35074)" onMouseOut="lolite()" onClick="logVariable('ruser')" href="../../_variables/ruser.html">$ruser</a>, array('courseid' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('course')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>));
<a name="l1288"><span class="linenum">1288</span></a>  
<a name="l1289"><span class="linenum">1289</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[]='##export##';
<a name="l1290"><span class="linenum">1290</span></a>  
<a name="l1291"><span class="linenum">1291</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableportfolios')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/enableportfolios.html">enableportfolios</a>) &amp;&amp; (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> == 'singletemplate' || <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> == 'listtemplate')
<a name="l1292"><span class="linenum">1292</span></a>              &amp;&amp; ((<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:exportentry', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)
<a name="l1293"><span class="linenum">1293</span></a>                  || (<a class="function" onClick="logFunction('data_isowner')" href="../../_functions/data_isowner.html" onMouseOver="funcPopup(event,'data_isowner')">data_isowner</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:exportownentry', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>))))) {
<a name="l1294"><span class="linenum">1294</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/portfoliolib.php');
<a name="l1295"><span class="linenum">1295</span></a>              <a class="var it742" onMouseOver="hilite(742)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a> = <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_add_button')" href="../../_classes/portfolio_add_button.html" onMouseOver="classPopup(event,'portfolio_add_button')">portfolio_add_button</a>();
<a name="l1296"><span class="linenum">1296</span></a>              <a class="var it742" onMouseOver="hilite(742)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a>-&gt;<a class="function" onClick="logFunction('set_callback_options')" href="../../_functions/set_callback_options.html" onMouseOver="funcPopup(event,'set_callback_options')">set_callback_options</a>('data_portfolio_caller', array('id' =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'recordid' =&gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'mod_data');
<a name="l1297"><span class="linenum">1297</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../../_variables/formats.html">$formats</a>, <a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a>) = <a class="class" onClick="logClass('data_portfolio_caller')" href="../../_classes/data_portfolio_caller.html" onMouseOver="classPopup(event,'data_portfolio_caller')">data_portfolio_caller</a>::<a class="function" onClick="logFunction('formats')" href="../../_functions/formats.html" onMouseOver="funcPopup(event,'formats')">formats</a>(<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>, <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l1298"><span class="linenum">1298</span></a>              <a class="var it742" onMouseOver="hilite(742)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a>-&gt;<a class="function" onClick="logFunction('set_formats')" href="../../_functions/set_formats.html" onMouseOver="funcPopup(event,'set_formats')">set_formats</a>(<a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../../_variables/formats.html">$formats</a>);
<a name="l1299"><span class="linenum">1299</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = <a class="var it742" onMouseOver="hilite(742)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a>-&gt;<a class="function" onClick="logFunction('to_html')" href="../../_functions/to_html.html" onMouseOver="funcPopup(event,'to_html')">to_html</a>(<a class="constant" onClick="logConstant('PORTFOLIO_ADD_ICON_LINK')" href="../../_constants/PORTFOLIO_ADD_ICON_LINK.html" onMouseOver="constPopup(event,'PORTFOLIO_ADD_ICON_LINK')">PORTFOLIO_ADD_ICON_LINK</a>);
<a name="l1300"><span class="linenum">1300</span></a>          } else {
<a name="l1301"><span class="linenum">1301</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = '';
<a name="l1302"><span class="linenum">1302</span></a>          }
<a name="l1303"><span class="linenum">1303</span></a>  
<a name="l1304"><span class="linenum">1304</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[] = '##timeadded##';
<a name="l1305"><span class="linenum">1305</span></a>          <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = <a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timecreated')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>);
<a name="l1306"><span class="linenum">1306</span></a>  
<a name="l1307"><span class="linenum">1307</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[] = '##timemodified##';
<a name="l1308"><span class="linenum">1308</span></a>          <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a> [] = <a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>);
<a name="l1309"><span class="linenum">1309</span></a>  
<a name="l1310"><span class="linenum">1310</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[]='##approve##';
<a name="l1311"><span class="linenum">1311</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:approve', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) &amp;&amp; (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('approval')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/approval.html">approval</a>) &amp;&amp; (!<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('approved')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a>)) {
<a name="l1312"><span class="linenum">1312</span></a>              <a class="var it35075" onMouseOver="hilite(35075)" onMouseOut="lolite()" onClick="logVariable('approveurl')" href="../../_variables/approveurl.html">$approveurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it13082" onMouseOver="hilite(13082)" onMouseOut="lolite()" onClick="logVariable('jumpurl')" href="../../_variables/jumpurl.html">$jumpurl</a>, array('approve' =&gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1313"><span class="linenum">1313</span></a>              <a class="var it35076" onMouseOver="hilite(35076)" onMouseOut="lolite()" onClick="logVariable('approveicon')" href="../../_variables/approveicon.html">$approveicon</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/approve', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('approve', 'data'), '', array('class' =&gt; 'iconsmall'));
<a name="l1314"><span class="linenum">1314</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('span', <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('action_icon')" href="../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>(<a class="var it35075" onMouseOver="hilite(35075)" onMouseOut="lolite()" onClick="logVariable('approveurl')" href="../../_variables/approveurl.html">$approveurl</a>, <a class="var it35076" onMouseOver="hilite(35076)" onMouseOut="lolite()" onClick="logVariable('approveicon')" href="../../_variables/approveicon.html">$approveicon</a>),
<a name="l1315"><span class="linenum">1315</span></a>                      array('class' =&gt; 'approve'));
<a name="l1316"><span class="linenum">1316</span></a>          } else {
<a name="l1317"><span class="linenum">1317</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = '';
<a name="l1318"><span class="linenum">1318</span></a>          }
<a name="l1319"><span class="linenum">1319</span></a>  
<a name="l1320"><span class="linenum">1320</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[]='##disapprove##';
<a name="l1321"><span class="linenum">1321</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:approve', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) &amp;&amp; (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('approval')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/approval.html">approval</a>) &amp;&amp; (<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('approved')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a>)) {
<a name="l1322"><span class="linenum">1322</span></a>              <a class="var it35077" onMouseOver="hilite(35077)" onMouseOut="lolite()" onClick="logVariable('disapproveurl')" href="../../_variables/disapproveurl.html">$disapproveurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it13082" onMouseOver="hilite(13082)" onMouseOut="lolite()" onClick="logVariable('jumpurl')" href="../../_variables/jumpurl.html">$jumpurl</a>, array('disapprove' =&gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1323"><span class="linenum">1323</span></a>              <a class="var it35078" onMouseOver="hilite(35078)" onMouseOut="lolite()" onClick="logVariable('disapproveicon')" href="../../_variables/disapproveicon.html">$disapproveicon</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/block', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('disapprove', 'data'), '', array('class' =&gt; 'iconsmall'));
<a name="l1324"><span class="linenum">1324</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('span', <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('action_icon')" href="../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>(<a class="var it35077" onMouseOver="hilite(35077)" onMouseOut="lolite()" onClick="logVariable('disapproveurl')" href="../../_variables/disapproveurl.html">$disapproveurl</a>, <a class="var it35078" onMouseOver="hilite(35078)" onMouseOut="lolite()" onClick="logVariable('disapproveicon')" href="../../_variables/disapproveicon.html">$disapproveicon</a>),
<a name="l1325"><span class="linenum">1325</span></a>                      array('class' =&gt; 'disapprove'));
<a name="l1326"><span class="linenum">1326</span></a>          } else {
<a name="l1327"><span class="linenum">1327</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = '';
<a name="l1328"><span class="linenum">1328</span></a>          }
<a name="l1329"><span class="linenum">1329</span></a>  
<a name="l1330"><span class="linenum">1330</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[]='##comments##';
<a name="l1331"><span class="linenum">1331</span></a>          if ((<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> == 'listtemplate') &amp;&amp; (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('comments')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/comments.html">comments</a>)) {
<a name="l1332"><span class="linenum">1332</span></a>  
<a name="l1333"><span class="linenum">1333</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('usecomments')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/usecomments.html">usecomments</a>)) {
<a name="l1334"><span class="linenum">1334</span></a>                  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>  . '<a class="filename" href="../../comment/lib.php.html">/comment/lib.php</a>');
<a name="l1335"><span class="linenum">1335</span></a>                  <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_context_info_array')" href="../../_functions/get_context_info_array.html" onMouseOver="funcPopup(event,'get_context_info_array')">get_context_info_array</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1336"><span class="linenum">1336</span></a>                  <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a> = new stdClass();
<a name="l1337"><span class="linenum">1337</span></a>                  <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('context')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l1338"><span class="linenum">1338</span></a>                  <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('course')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>  = <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>;
<a name="l1339"><span class="linenum">1339</span></a>                  <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('cm')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>      = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>;
<a name="l1340"><span class="linenum">1340</span></a>                  <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('area')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>    = 'database_entry';
<a name="l1341"><span class="linenum">1341</span></a>                  <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('itemid')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a>  = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1342"><span class="linenum">1342</span></a>                  <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('showcount')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/showcount.html">showcount</a> = true;
<a name="l1343"><span class="linenum">1343</span></a>                  <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('component')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = 'mod_data';
<a name="l1344"><span class="linenum">1344</span></a>                  <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a> = <span class="keyword">new </span><a class="class" onClick="logClass('comment')" href="../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">comment</a>(<a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>);
<a name="l1345"><span class="linenum">1345</span></a>                  <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>-&gt;<a class="function" onClick="logFunction('output')" href="../../_functions/output.html" onMouseOver="funcPopup(event,'output')">output</a>(true);
<a name="l1346"><span class="linenum">1346</span></a>              }
<a name="l1347"><span class="linenum">1347</span></a>          } else {
<a name="l1348"><span class="linenum">1348</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = '';
<a name="l1349"><span class="linenum">1349</span></a>          }
<a name="l1350"><span class="linenum">1350</span></a>  
<a name="l1351"><span class="linenum">1351</span></a>  <span class="comment">        // actual replacement of the tags</span>
<a name="l1352"><span class="linenum">1352</span></a>          <a class="var it2298" onMouseOver="hilite(2298)" onMouseOut="lolite()" onClick="logVariable('newtext')" href="../../_variables/newtext.html">$newtext</a> = <a class="phpfunction" onClick="logFunction('str_ireplace')" href="../../_functions/str_ireplace.html" onMouseOver="phpfuncPopup(event,'str_ireplace')">str_ireplace</a>(<a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>, <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;{<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>});
<a name="l1353"><span class="linenum">1353</span></a>  
<a name="l1354"><span class="linenum">1354</span></a>  <span class="comment">        // no more html formatting and filtering - see MDL-6635</span>
<a name="l1355"><span class="linenum">1355</span></a>          if (<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>) {
<a name="l1356"><span class="linenum">1356</span></a>              return <a class="var it2298" onMouseOver="hilite(2298)" onMouseOut="lolite()" onClick="logVariable('newtext')" href="../../_variables/newtext.html">$newtext</a>;
<a name="l1357"><span class="linenum">1357</span></a>          } else {
<a name="l1358"><span class="linenum">1358</span></a>              echo <a class="var it2298" onMouseOver="hilite(2298)" onMouseOut="lolite()" onClick="logVariable('newtext')" href="../../_variables/newtext.html">$newtext</a>;
<a name="l1359"><span class="linenum">1359</span></a>  
<a name="l1360"><span class="linenum">1360</span></a>  <span class="comment">            // hack alert - return is always false in singletemplate anyway ;-)</span>
<a name="l1361"><span class="linenum">1361</span></a>              <span class="comment">/**********************************</span>
<a name="l1362"><span class="linenum">1362</span></a>  <span class="comment">             *    Printing Ratings Form       *</span>
<a name="l1363"><span class="linenum">1363</span></a>  <span class="comment">             *********************************/</span>
<a name="l1364"><span class="linenum">1364</span></a>              if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> == 'singletemplate') {    //prints ratings options
<a name="l1365"><span class="linenum">1365</span></a>                  <a class="function" onClick="logFunction('data_print_ratings')" href="../../_functions/data_print_ratings.html" onMouseOver="funcPopup(event,'data_print_ratings')">data_print_ratings</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l1366"><span class="linenum">1366</span></a>              }
<a name="l1367"><span class="linenum">1367</span></a>  
<a name="l1368"><span class="linenum">1368</span></a>              <span class="comment">/**********************************</span>
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment">             *    Printing Comments Form       *</span>
<a name="l1370"><span class="linenum">1370</span></a>  <span class="comment">             *********************************/</span>
<a name="l1371"><span class="linenum">1371</span></a>              if ((<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> == 'singletemplate') &amp;&amp; (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('comments')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/comments.html">comments</a>)) {
<a name="l1372"><span class="linenum">1372</span></a>                  if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('usecomments')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/usecomments.html">usecomments</a>)) {
<a name="l1373"><span class="linenum">1373</span></a>                      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../comment/lib.php.html">/comment/lib.php</a>');
<a name="l1374"><span class="linenum">1374</span></a>                      <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_context_info_array')" href="../../_functions/get_context_info_array.html" onMouseOver="funcPopup(event,'get_context_info_array')">get_context_info_array</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1375"><span class="linenum">1375</span></a>                      <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a> = new stdClass();
<a name="l1376"><span class="linenum">1376</span></a>                      <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('context')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l1377"><span class="linenum">1377</span></a>                      <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('course')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>  = <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>;
<a name="l1378"><span class="linenum">1378</span></a>                      <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('cm')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>      = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>;
<a name="l1379"><span class="linenum">1379</span></a>                      <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('area')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>    = 'database_entry';
<a name="l1380"><span class="linenum">1380</span></a>                      <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('itemid')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a>  = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1381"><span class="linenum">1381</span></a>                      <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('showcount')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/showcount.html">showcount</a> = true;
<a name="l1382"><span class="linenum">1382</span></a>                      <a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('component')" class="var it40643" onMouseOver="hilite(40643)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = 'mod_data';
<a name="l1383"><span class="linenum">1383</span></a>                      <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a> = <span class="keyword">new </span><a class="class" onClick="logClass('comment')" href="../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">comment</a>(<a class="var it4064" onMouseOver="hilite(4064)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>);
<a name="l1384"><span class="linenum">1384</span></a>                      <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>-&gt;<a class="function" onClick="logFunction('output')" href="../../_functions/output.html" onMouseOver="funcPopup(event,'output')">output</a>(false);
<a name="l1385"><span class="linenum">1385</span></a>                  }
<a name="l1386"><span class="linenum">1386</span></a>              }
<a name="l1387"><span class="linenum">1387</span></a>          }
<a name="l1388"><span class="linenum">1388</span></a>      }
<a name="l1389"><span class="linenum">1389</span></a>  }
<a name="l1390"><span class="linenum">1390</span></a>  
<a name="l1391"><span class="linenum">1391</span></a>  <span class="comment">/**</span>
<a name="l1392"><span class="linenum">1392</span></a>  <span class="comment"> * Return rating related permissions</span>
<a name="l1393"><span class="linenum">1393</span></a>  <span class="comment"> *</span>
<a name="l1394"><span class="linenum">1394</span></a>  <span class="comment"> * @param string $contextid the context id</span>
<a name="l1395"><span class="linenum">1395</span></a>  <span class="comment"> * @param string $component the component to get rating permissions for</span>
<a name="l1396"><span class="linenum">1396</span></a>  <span class="comment"> * @param string $ratingarea the rating area to get permissions for</span>
<a name="l1397"><span class="linenum">1397</span></a>  <span class="comment"> * @return array an associative array of the user's rating permissions</span>
<a name="l1398"><span class="linenum">1398</span></a>  <span class="comment"> */</span>
<a name="l1399"><span class="linenum">1399</span></a>  function <a class="function" onClick="logFunction('data_rating_permissions')" href="../../_functions/data_rating_permissions.html" onMouseOver="funcPopup(event,'data_rating_permissions')">data_rating_permissions</a>(<a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it6644" onMouseOver="hilite(6644)" onMouseOut="lolite()" onClick="logVariable('ratingarea')" href="../../_variables/ratingarea.html">$ratingarea</a>) {
<a name="l1400"><span class="linenum">1400</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1401"><span class="linenum">1401</span></a>      if (<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a> != 'mod_data' || <a class="var it6644" onMouseOver="hilite(6644)" onMouseOut="lolite()" onClick="logVariable('ratingarea')" href="../../_variables/ratingarea.html">$ratingarea</a> != 'entry') {
<a name="l1402"><span class="linenum">1402</span></a>          return null;
<a name="l1403"><span class="linenum">1403</span></a>      }
<a name="l1404"><span class="linenum">1404</span></a>      return array(
<a name="l1405"><span class="linenum">1405</span></a>          'view'    =&gt; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:viewrating',<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>),
<a name="l1406"><span class="linenum">1406</span></a>          'viewany' =&gt; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:viewanyrating',<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>),
<a name="l1407"><span class="linenum">1407</span></a>          'viewall' =&gt; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:viewallratings',<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>),
<a name="l1408"><span class="linenum">1408</span></a>          'rate'    =&gt; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:rate',<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)
<a name="l1409"><span class="linenum">1409</span></a>      );
<a name="l1410"><span class="linenum">1410</span></a>  }
<a name="l1411"><span class="linenum">1411</span></a>  
<a name="l1412"><span class="linenum">1412</span></a>  <span class="comment">/**</span>
<a name="l1413"><span class="linenum">1413</span></a>  <span class="comment"> * Validates a submitted rating</span>
<a name="l1414"><span class="linenum">1414</span></a>  <span class="comment"> * @param array $params submitted data</span>
<a name="l1415"><span class="linenum">1415</span></a>  <span class="comment"> *            context =&gt; object the context in which the rated items exists [required]</span>
<a name="l1416"><span class="linenum">1416</span></a>  <span class="comment"> *            itemid =&gt; int the ID of the object being rated</span>
<a name="l1417"><span class="linenum">1417</span></a>  <span class="comment"> *            scaleid =&gt; int the scale from which the user can select a rating. Used for bounds checking. [required]</span>
<a name="l1418"><span class="linenum">1418</span></a>  <span class="comment"> *            rating =&gt; int the submitted rating</span>
<a name="l1419"><span class="linenum">1419</span></a>  <span class="comment"> *            rateduserid =&gt; int the id of the user whose items have been rated. NOT the user who submitted the ratings. 0 to update all. [required]</span>
<a name="l1420"><span class="linenum">1420</span></a>  <span class="comment"> *            aggregation =&gt; int the aggregation method to apply when calculating grades ie RATING_AGGREGATE_AVERAGE [required]</span>
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment"> * @return boolean true if the rating is valid. Will throw rating_exception if not</span>
<a name="l1422"><span class="linenum">1422</span></a>  <span class="comment"> */</span>
<a name="l1423"><span class="linenum">1423</span></a>  function <a class="function" onClick="logFunction('data_rating_validate')" href="../../_functions/data_rating_validate.html" onMouseOver="funcPopup(event,'data_rating_validate')">data_rating_validate</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) {
<a name="l1424"><span class="linenum">1424</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l1425"><span class="linenum">1425</span></a>  
<a name="l1426"><span class="linenum">1426</span></a>  <span class="comment">    // Check the component is mod_data</span>
<a name="l1427"><span class="linenum">1427</span></a>      if (<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['component'] != 'mod_data') {
<a name="l1428"><span class="linenum">1428</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidcomponent');
<a name="l1429"><span class="linenum">1429</span></a>      }
<a name="l1430"><span class="linenum">1430</span></a>  
<a name="l1431"><span class="linenum">1431</span></a>  <span class="comment">    // Check the ratingarea is entry (the only rating area in data module)</span>
<a name="l1432"><span class="linenum">1432</span></a>      if (<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['ratingarea'] != 'entry') {
<a name="l1433"><span class="linenum">1433</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidratingarea');
<a name="l1434"><span class="linenum">1434</span></a>      }
<a name="l1435"><span class="linenum">1435</span></a>  
<a name="l1436"><span class="linenum">1436</span></a>  <span class="comment">    // Check the rateduserid is not the current user .. you can't rate your own entries</span>
<a name="l1437"><span class="linenum">1437</span></a>      if (<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['rateduserid'] == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l1438"><span class="linenum">1438</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('nopermissiontorate');
<a name="l1439"><span class="linenum">1439</span></a>      }
<a name="l1440"><span class="linenum">1440</span></a>  
<a name="l1441"><span class="linenum">1441</span></a>      <a class="var it35079" onMouseOver="hilite(35079)" onMouseOut="lolite()" onClick="logVariable('datasql')" href="../../_variables/datasql.html">$datasql</a> = &quot;SELECT d.id as dataid, d.scale, d.course, r.userid as userid, d.approval, r.approved, r.timecreated, d.assesstimestart, d.assesstimefinish, r.groupid
<a name="l1442"><span class="linenum">1442</span></a>                    FROM {data_records} r
<a name="l1443"><span class="linenum">1443</span></a>                    JOIN {data} d ON r.dataid = d.id
<a name="l1444"><span class="linenum">1444</span></a>                   WHERE r.id = :itemid&quot;;
<a name="l1445"><span class="linenum">1445</span></a>      <a class="var it35080" onMouseOver="hilite(35080)" onMouseOut="lolite()" onClick="logVariable('dataparams')" href="../../_variables/dataparams.html">$dataparams</a> = array('itemid'=&gt;<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['itemid']);
<a name="l1446"><span class="linenum">1446</span></a>      if (!<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(<a class="var it35079" onMouseOver="hilite(35079)" onMouseOut="lolite()" onClick="logVariable('datasql')" href="../../_variables/datasql.html">$datasql</a>, <a class="var it35080" onMouseOver="hilite(35080)" onMouseOut="lolite()" onClick="logVariable('dataparams')" href="../../_variables/dataparams.html">$dataparams</a>)) {
<a name="l1447"><span class="linenum">1447</span></a>  <span class="comment">        //item doesn't exist</span>
<a name="l1448"><span class="linenum">1448</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invaliditemid');
<a name="l1449"><span class="linenum">1449</span></a>      }
<a name="l1450"><span class="linenum">1450</span></a>  
<a name="l1451"><span class="linenum">1451</span></a>      if (<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('scale')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a> != <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['scaleid']) {
<a name="l1452"><span class="linenum">1452</span></a>  <span class="comment">        //the scale being submitted doesnt match the one in the database</span>
<a name="l1453"><span class="linenum">1453</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidscaleid');
<a name="l1454"><span class="linenum">1454</span></a>      }
<a name="l1455"><span class="linenum">1455</span></a>  
<a name="l1456"><span class="linenum">1456</span></a>  <span class="comment">    //check that the submitted rating is valid for the scale</span>
<a name="l1457"><span class="linenum">1457</span></a>  
<a name="l1458"><span class="linenum">1458</span></a>  <span class="comment">    // lower limit</span>
<a name="l1459"><span class="linenum">1459</span></a>      if (<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['rating'] &lt; 0  &amp;&amp; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['rating'] != <a class="constant" onClick="logConstant('RATING_UNSET_RATING')" href="../../_constants/RATING_UNSET_RATING.html" onMouseOver="constPopup(event,'RATING_UNSET_RATING')">RATING_UNSET_RATING</a>) {
<a name="l1460"><span class="linenum">1460</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidnum');
<a name="l1461"><span class="linenum">1461</span></a>      }
<a name="l1462"><span class="linenum">1462</span></a>  
<a name="l1463"><span class="linenum">1463</span></a>  <span class="comment">    // upper limit</span>
<a name="l1464"><span class="linenum">1464</span></a>      if (<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('scale')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a> &lt; 0) {
<a name="l1465"><span class="linenum">1465</span></a>  <span class="comment">        //its a custom scale</span>
<a name="l1466"><span class="linenum">1466</span></a>          <a class="var it11061" onMouseOver="hilite(11061)" onMouseOut="lolite()" onClick="logVariable('scalerecord')" href="../../_variables/scalerecord.html">$scalerecord</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('scale', array('id' =&gt; -<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('scale')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>));
<a name="l1467"><span class="linenum">1467</span></a>          if (<a class="var it11061" onMouseOver="hilite(11061)" onMouseOut="lolite()" onClick="logVariable('scalerecord')" href="../../_variables/scalerecord.html">$scalerecord</a>) {
<a name="l1468"><span class="linenum">1468</span></a>              <a class="var it10751" onMouseOver="hilite(10751)" onMouseOut="lolite()" onClick="logVariable('scalearray')" href="../../_variables/scalearray.html">$scalearray</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it11061" onMouseOver="hilite(11061)" onMouseOut="lolite()" onClick="logVariable('scalerecord')" href="../../_variables/scalerecord.html">$scalerecord</a>-&gt;<a onClick="logVariable('scale')" class="var it40704" onMouseOver="hilite(40704)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>);
<a name="l1469"><span class="linenum">1469</span></a>              if (<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['rating'] &gt; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it10751" onMouseOver="hilite(10751)" onMouseOut="lolite()" onClick="logVariable('scalearray')" href="../../_variables/scalearray.html">$scalearray</a>)) {
<a name="l1470"><span class="linenum">1470</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidnum');
<a name="l1471"><span class="linenum">1471</span></a>              }
<a name="l1472"><span class="linenum">1472</span></a>          } else {
<a name="l1473"><span class="linenum">1473</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidscaleid');
<a name="l1474"><span class="linenum">1474</span></a>          }
<a name="l1475"><span class="linenum">1475</span></a>      } else if (<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['rating'] &gt; <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('scale')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>) {
<a name="l1476"><span class="linenum">1476</span></a>  <span class="comment">        //if its numeric and submitted rating is above maximum</span>
<a name="l1477"><span class="linenum">1477</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidnum');
<a name="l1478"><span class="linenum">1478</span></a>      }
<a name="l1479"><span class="linenum">1479</span></a>  
<a name="l1480"><span class="linenum">1480</span></a>      if (<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('approval')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/approval.html">approval</a> &amp;&amp; !<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('approved')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a>) {
<a name="l1481"><span class="linenum">1481</span></a>  <span class="comment">        //database requires approval but this item isnt approved</span>
<a name="l1482"><span class="linenum">1482</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('nopermissiontorate');
<a name="l1483"><span class="linenum">1483</span></a>      }
<a name="l1484"><span class="linenum">1484</span></a>  
<a name="l1485"><span class="linenum">1485</span></a>  <span class="comment">    // check the item we're rating was created in the assessable time window</span>
<a name="l1486"><span class="linenum">1486</span></a>      if (!empty(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('assesstimestart')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/assesstimestart.html">assesstimestart</a>) &amp;&amp; !empty(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('assesstimefinish')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/assesstimefinish.html">assesstimefinish</a>)) {
<a name="l1487"><span class="linenum">1487</span></a>          if (<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('timecreated')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> &lt; <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('assesstimestart')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/assesstimestart.html">assesstimestart</a> || <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('timecreated')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> &gt; <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('assesstimefinish')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/assesstimefinish.html">assesstimefinish</a>) {
<a name="l1488"><span class="linenum">1488</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('notavailable');
<a name="l1489"><span class="linenum">1489</span></a>          }
<a name="l1490"><span class="linenum">1490</span></a>      }
<a name="l1491"><span class="linenum">1491</span></a>  
<a name="l1492"><span class="linenum">1492</span></a>      <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('course')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1493"><span class="linenum">1493</span></a>      <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('data', <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('dataid')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/dataid.html">dataid</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1494"><span class="linenum">1494</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1495"><span class="linenum">1495</span></a>  
<a name="l1496"><span class="linenum">1496</span></a>  <span class="comment">    // if the supplied context doesnt match the item's context</span>
<a name="l1497"><span class="linenum">1497</span></a>      if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> != <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['context']-&gt;id) {
<a name="l1498"><span class="linenum">1498</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidcontext');
<a name="l1499"><span class="linenum">1499</span></a>      }
<a name="l1500"><span class="linenum">1500</span></a>  
<a name="l1501"><span class="linenum">1501</span></a>  <span class="comment">    // Make sure groups allow this user to see the item they're rating</span>
<a name="l1502"><span class="linenum">1502</span></a>      <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('groupid')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>;
<a name="l1503"><span class="linenum">1503</span></a>      if (<a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> &gt; 0 and <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>)) {   // Groups are being used
<a name="l1504"><span class="linenum">1504</span></a>          if (!<a class="function" onClick="logFunction('groups_group_exists')" href="../../_functions/groups_group_exists.html" onMouseOver="funcPopup(event,'groups_group_exists')">groups_group_exists</a>(<a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>)) { // Can't find group
<a name="l1505"><span class="linenum">1505</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('cannotfindgroup');<span class="comment">//something is wrong</span>
<a name="l1506"><span class="linenum">1506</span></a>          }
<a name="l1507"><span class="linenum">1507</span></a>  
<a name="l1508"><span class="linenum">1508</span></a>          if (!<a class="function" onClick="logFunction('groups_is_member')" href="../../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1509"><span class="linenum">1509</span></a>  <span class="comment">            // do not allow rating of posts from other groups when in SEPARATEGROUPS or VISIBLEGROUPS</span>
<a name="l1510"><span class="linenum">1510</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('notmemberofgroup');
<a name="l1511"><span class="linenum">1511</span></a>          }
<a name="l1512"><span class="linenum">1512</span></a>      }
<a name="l1513"><span class="linenum">1513</span></a>  
<a name="l1514"><span class="linenum">1514</span></a>      return true;
<a name="l1515"><span class="linenum">1515</span></a>  }
<a name="l1516"><span class="linenum">1516</span></a>  
<a name="l1517"><span class="linenum">1517</span></a>  
<a name="l1518"><span class="linenum">1518</span></a>  <span class="comment">/**</span>
<a name="l1519"><span class="linenum">1519</span></a>  <span class="comment"> * function that takes in the current data, number of items per page,</span>
<a name="l1520"><span class="linenum">1520</span></a>  <span class="comment"> * a search string and prints a preference box in view.php</span>
<a name="l1521"><span class="linenum">1521</span></a>  <span class="comment"> *</span>
<a name="l1522"><span class="linenum">1522</span></a>  <span class="comment"> * This preference box prints a searchable advanced search template if</span>
<a name="l1523"><span class="linenum">1523</span></a>  <span class="comment"> *     a) A template is defined</span>
<a name="l1524"><span class="linenum">1524</span></a>  <span class="comment"> *  b) The advanced search checkbox is checked.</span>
<a name="l1525"><span class="linenum">1525</span></a>  <span class="comment"> *</span>
<a name="l1526"><span class="linenum">1526</span></a>  <span class="comment"> * @global object</span>
<a name="l1527"><span class="linenum">1527</span></a>  <span class="comment"> * @global object</span>
<a name="l1528"><span class="linenum">1528</span></a>  <span class="comment"> * @param object $data</span>
<a name="l1529"><span class="linenum">1529</span></a>  <span class="comment"> * @param int $perpage</span>
<a name="l1530"><span class="linenum">1530</span></a>  <span class="comment"> * @param string $search</span>
<a name="l1531"><span class="linenum">1531</span></a>  <span class="comment"> * @param string $sort</span>
<a name="l1532"><span class="linenum">1532</span></a>  <span class="comment"> * @param string $order</span>
<a name="l1533"><span class="linenum">1533</span></a>  <span class="comment"> * @param array $search_array</span>
<a name="l1534"><span class="linenum">1534</span></a>  <span class="comment"> * @param int $advanced</span>
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment"> * @param string $mode</span>
<a name="l1536"><span class="linenum">1536</span></a>  <span class="comment"> * @return void</span>
<a name="l1537"><span class="linenum">1537</span></a>  <span class="comment"> */</span>
<a name="l1538"><span class="linenum">1538</span></a>  function <a class="function" onClick="logFunction('data_print_preference_form')" href="../../_functions/data_print_preference_form.html" onMouseOver="funcPopup(event,'data_print_preference_form')">data_print_preference_form</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it3060" onMouseOver="hilite(3060)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>, <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../_variables/search.html">$search</a>, <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>='', <a class="var it2283" onMouseOver="hilite(2283)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a>='ASC', <a class="var it28685" onMouseOver="hilite(28685)" onMouseOut="lolite()" onClick="logVariable('search_array')" href="../../_variables/search_array.html">$search_array</a> = '', <a class="var it10197" onMouseOver="hilite(10197)" onMouseOut="lolite()" onClick="logVariable('advanced')" href="../../_variables/advanced.html">$advanced</a> = 0, <a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>= ''){
<a name="l1539"><span class="linenum">1539</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1540"><span class="linenum">1540</span></a>  
<a name="l1541"><span class="linenum">1541</span></a>      <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1542"><span class="linenum">1542</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1543"><span class="linenum">1543</span></a>      echo '&lt;br /&gt;&lt;div class=&quot;datapreferences&quot;&gt;';
<a name="l1544"><span class="linenum">1544</span></a>      echo '&lt;form id=&quot;options&quot; action=&quot;view.php&quot; method=&quot;get&quot;&gt;';
<a name="l1545"><span class="linenum">1545</span></a>      echo '&lt;div&gt;';
<a name="l1546"><span class="linenum">1546</span></a>      echo '&lt;input type=&quot;hidden&quot; name=&quot;d&quot; value=&quot;'.<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'&quot; /&gt;';
<a name="l1547"><span class="linenum">1547</span></a>      if (<a class="var it267" onMouseOver="hilite(267)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a> =='asearch') {
<a name="l1548"><span class="linenum">1548</span></a>          <a class="var it10197" onMouseOver="hilite(10197)" onMouseOut="lolite()" onClick="logVariable('advanced')" href="../../_variables/advanced.html">$advanced</a> = 1;
<a name="l1549"><span class="linenum">1549</span></a>          echo '&lt;input type=&quot;hidden&quot; name=&quot;mode&quot; value=&quot;list&quot; /&gt;';
<a name="l1550"><span class="linenum">1550</span></a>      }
<a name="l1551"><span class="linenum">1551</span></a>      echo '&lt;label for=&quot;pref_perpage&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pagesize','data').'&lt;/label&gt; ';
<a name="l1552"><span class="linenum">1552</span></a>      <a class="var it35081" onMouseOver="hilite(35081)" onMouseOut="lolite()" onClick="logVariable('pagesizes')" href="../../_variables/pagesizes.html">$pagesizes</a> = array(2=&gt;2,3=&gt;3,4=&gt;4,5=&gt;5,6=&gt;6,7=&gt;7,8=&gt;8,9=&gt;9,10=&gt;10,15=&gt;15,
<a name="l1553"><span class="linenum">1553</span></a>                         20=&gt;20,30=&gt;30,40=&gt;40,50=&gt;50,100=&gt;100,200=&gt;200,300=&gt;300,400=&gt;400,500=&gt;500,1000=&gt;1000);
<a name="l1554"><span class="linenum">1554</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('select')" href="../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>(<a class="var it35081" onMouseOver="hilite(35081)" onMouseOut="lolite()" onClick="logVariable('pagesizes')" href="../../_variables/pagesizes.html">$pagesizes</a>, 'perpage', <a class="var it3060" onMouseOver="hilite(3060)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>, false, array('id'=&gt;'pref_perpage'));
<a name="l1555"><span class="linenum">1555</span></a>  
<a name="l1556"><span class="linenum">1556</span></a>      if (<a class="var it10197" onMouseOver="hilite(10197)" onMouseOut="lolite()" onClick="logVariable('advanced')" href="../../_variables/advanced.html">$advanced</a>) {
<a name="l1557"><span class="linenum">1557</span></a>          <a class="var it35082" onMouseOver="hilite(35082)" onMouseOut="lolite()" onClick="logVariable('regsearchclass')" href="../../_variables/regsearchclass.html">$regsearchclass</a> = 'search_none';
<a name="l1558"><span class="linenum">1558</span></a>          <a class="var it35083" onMouseOver="hilite(35083)" onMouseOut="lolite()" onClick="logVariable('advancedsearchclass')" href="../../_variables/advancedsearchclass.html">$advancedsearchclass</a> = 'search_inline';
<a name="l1559"><span class="linenum">1559</span></a>      } else {
<a name="l1560"><span class="linenum">1560</span></a>          <a class="var it35082" onMouseOver="hilite(35082)" onMouseOut="lolite()" onClick="logVariable('regsearchclass')" href="../../_variables/regsearchclass.html">$regsearchclass</a> = 'search_inline';
<a name="l1561"><span class="linenum">1561</span></a>          <a class="var it35083" onMouseOver="hilite(35083)" onMouseOut="lolite()" onClick="logVariable('advancedsearchclass')" href="../../_variables/advancedsearchclass.html">$advancedsearchclass</a> = 'search_none';
<a name="l1562"><span class="linenum">1562</span></a>      }
<a name="l1563"><span class="linenum">1563</span></a>      echo '&lt;div id=&quot;reg_search&quot; class=&quot;' . <a class="var it35082" onMouseOver="hilite(35082)" onMouseOut="lolite()" onClick="logVariable('regsearchclass')" href="../../_variables/regsearchclass.html">$regsearchclass</a> . '&quot; &gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;';
<a name="l1564"><span class="linenum">1564</span></a>      echo '&lt;label for=&quot;pref_search&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('search').'&lt;/label&gt; &lt;input type=&quot;text&quot; size=&quot;16&quot; name=&quot;search&quot; id= &quot;pref_search&quot; value=&quot;'.<a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../_variables/search.html">$search</a>).'&quot; /&gt;&lt;/div&gt;';
<a name="l1565"><span class="linenum">1565</span></a>      echo '&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;label for=&quot;pref_sortby&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('sortby').'&lt;/label&gt; ';
<a name="l1566"><span class="linenum">1566</span></a>  <span class="comment">    // foreach field, print the option</span>
<a name="l1567"><span class="linenum">1567</span></a>      echo '&lt;select name=&quot;sort&quot; id=&quot;pref_sortby&quot;&gt;';
<a name="l1568"><span class="linenum">1568</span></a>      if (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('data_fields', array('dataid'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'name')) {
<a name="l1569"><span class="linenum">1569</span></a>          echo '&lt;optgroup label=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('fields', 'data').'&quot;&gt;';
<a name="l1570"><span class="linenum">1570</span></a>          foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l1571"><span class="linenum">1571</span></a>              if (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('id')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>) {
<a name="l1572"><span class="linenum">1572</span></a>                  echo '&lt;option value=&quot;'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('id')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'&quot; selected=&quot;selected&quot;&gt;'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('name')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>.'&lt;/option&gt;';
<a name="l1573"><span class="linenum">1573</span></a>              } else {
<a name="l1574"><span class="linenum">1574</span></a>                  echo '&lt;option value=&quot;'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('id')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'&quot;&gt;'.<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('name')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>.'&lt;/option&gt;';
<a name="l1575"><span class="linenum">1575</span></a>              }
<a name="l1576"><span class="linenum">1576</span></a>          }
<a name="l1577"><span class="linenum">1577</span></a>          echo '&lt;/optgroup&gt;';
<a name="l1578"><span class="linenum">1578</span></a>      }
<a name="l1579"><span class="linenum">1579</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array();
<a name="l1580"><span class="linenum">1580</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>[<a class="constant" onClick="logConstant('DATA_TIMEADDED')" href="../../_constants/DATA_TIMEADDED.html" onMouseOver="constPopup(event,'DATA_TIMEADDED')">DATA_TIMEADDED</a>]    = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('timeadded', 'data');
<a name="l1581"><span class="linenum">1581</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>[<a class="constant" onClick="logConstant('DATA_TIMEMODIFIED')" href="../../_constants/DATA_TIMEMODIFIED.html" onMouseOver="constPopup(event,'DATA_TIMEMODIFIED')">DATA_TIMEMODIFIED</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('timemodified', 'data');
<a name="l1582"><span class="linenum">1582</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>[<a class="constant" onClick="logConstant('DATA_FIRSTNAME')" href="../../_constants/DATA_FIRSTNAME.html" onMouseOver="constPopup(event,'DATA_FIRSTNAME')">DATA_FIRSTNAME</a>]    = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('authorfirstname', 'data');
<a name="l1583"><span class="linenum">1583</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>[<a class="constant" onClick="logConstant('DATA_LASTNAME')" href="../../_constants/DATA_LASTNAME.html" onMouseOver="constPopup(event,'DATA_LASTNAME')">DATA_LASTNAME</a>]     = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('authorlastname', 'data');
<a name="l1584"><span class="linenum">1584</span></a>      if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('approval')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/approval.html">approval</a> and <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:approve', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1585"><span class="linenum">1585</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>[<a class="constant" onClick="logConstant('DATA_APPROVED')" href="../../_constants/DATA_APPROVED.html" onMouseOver="constPopup(event,'DATA_APPROVED')">DATA_APPROVED</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('approved', 'data');
<a name="l1586"><span class="linenum">1586</span></a>      }
<a name="l1587"><span class="linenum">1587</span></a>      echo '&lt;optgroup label=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('other', 'data').'&quot;&gt;';
<a name="l1588"><span class="linenum">1588</span></a>      foreach (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) {
<a name="l1589"><span class="linenum">1589</span></a>          if (<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> == <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>) {
<a name="l1590"><span class="linenum">1590</span></a>              echo '&lt;option value=&quot;'.<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>.'&quot; selected=&quot;selected&quot;&gt;'.<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>.'&lt;/option&gt;';
<a name="l1591"><span class="linenum">1591</span></a>          } else {
<a name="l1592"><span class="linenum">1592</span></a>              echo '&lt;option value=&quot;'.<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>.'&quot;&gt;'.<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>.'&lt;/option&gt;';
<a name="l1593"><span class="linenum">1593</span></a>          }
<a name="l1594"><span class="linenum">1594</span></a>      }
<a name="l1595"><span class="linenum">1595</span></a>      echo '&lt;/optgroup&gt;';
<a name="l1596"><span class="linenum">1596</span></a>      echo '&lt;/select&gt;';
<a name="l1597"><span class="linenum">1597</span></a>      echo '&lt;label for=&quot;pref_order&quot; class=&quot;accesshide&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('order').'&lt;/label&gt;';
<a name="l1598"><span class="linenum">1598</span></a>      echo '&lt;select id=&quot;pref_order&quot; name=&quot;order&quot;&gt;';
<a name="l1599"><span class="linenum">1599</span></a>      if (<a class="var it2283" onMouseOver="hilite(2283)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a> == 'ASC') {
<a name="l1600"><span class="linenum">1600</span></a>          echo '&lt;option value=&quot;ASC&quot; selected=&quot;selected&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('ascending','data').'&lt;/option&gt;';
<a name="l1601"><span class="linenum">1601</span></a>      } else {
<a name="l1602"><span class="linenum">1602</span></a>          echo '&lt;option value=&quot;ASC&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('ascending','data').'&lt;/option&gt;';
<a name="l1603"><span class="linenum">1603</span></a>      }
<a name="l1604"><span class="linenum">1604</span></a>      if (<a class="var it2283" onMouseOver="hilite(2283)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a> == 'DESC') {
<a name="l1605"><span class="linenum">1605</span></a>          echo '&lt;option value=&quot;DESC&quot; selected=&quot;selected&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('descending','data').'&lt;/option&gt;';
<a name="l1606"><span class="linenum">1606</span></a>      } else {
<a name="l1607"><span class="linenum">1607</span></a>          echo '&lt;option value=&quot;DESC&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('descending','data').'&lt;/option&gt;';
<a name="l1608"><span class="linenum">1608</span></a>      }
<a name="l1609"><span class="linenum">1609</span></a>      echo '&lt;/select&gt;';
<a name="l1610"><span class="linenum">1610</span></a>  
<a name="l1611"><span class="linenum">1611</span></a>      if (<a class="var it10197" onMouseOver="hilite(10197)" onMouseOut="lolite()" onClick="logVariable('advanced')" href="../../_variables/advanced.html">$advanced</a>) {
<a name="l1612"><span class="linenum">1612</span></a>          <a class="var it4292" onMouseOver="hilite(4292)" onMouseOut="lolite()" onClick="logVariable('checked')" href="../../_variables/checked.html">$checked</a> = ' checked=&quot;checked&quot; ';
<a name="l1613"><span class="linenum">1613</span></a>      }
<a name="l1614"><span class="linenum">1614</span></a>      else {
<a name="l1615"><span class="linenum">1615</span></a>          <a class="var it4292" onMouseOver="hilite(4292)" onMouseOut="lolite()" onClick="logVariable('checked')" href="../../_variables/checked.html">$checked</a> = '';
<a name="l1616"><span class="linenum">1616</span></a>      }
<a name="l1617"><span class="linenum">1617</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js')" href="../../_functions/js.html" onMouseOver="funcPopup(event,'js')">js</a>('<a class="filename" href="../../mod/data/data.js.html">/mod/data/data.js</a>');
<a name="l1618"><span class="linenum">1618</span></a>      echo '&amp;nbsp;&lt;input type=&quot;hidden&quot; name=&quot;advanced&quot; value=&quot;0&quot; /&gt;';
<a name="l1619"><span class="linenum">1619</span></a>      echo '&amp;nbsp;&lt;input type=&quot;hidden&quot; name=&quot;filter&quot; value=&quot;1&quot; /&gt;';
<a name="l1620"><span class="linenum">1620</span></a>      echo '&amp;nbsp;&lt;input type=&quot;checkbox&quot; id=&quot;advancedcheckbox&quot; name=&quot;advanced&quot; value=&quot;1&quot; '.<a class="var it4292" onMouseOver="hilite(4292)" onMouseOut="lolite()" onClick="logVariable('checked')" href="../../_variables/checked.html">$checked</a>.' onchange=&quot;<a class="function" onClick="logFunction('showHideAdvSearch')" href="../../_functions/showhideadvsearch.html" onMouseOver="funcPopup(event,'showhideadvsearch')">showHideAdvSearch</a>(this.checked);&quot; /&gt;&lt;label for=&quot;advancedcheckbox&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('advancedsearch', 'data').'&lt;/label&gt;';
<a name="l1621"><span class="linenum">1621</span></a>      echo '&amp;nbsp;&lt;input type=&quot;submit&quot; value=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savesettings','data').'&quot; /&gt;';
<a name="l1622"><span class="linenum">1622</span></a>  
<a name="l1623"><span class="linenum">1623</span></a>      echo '&lt;br /&gt;';
<a name="l1624"><span class="linenum">1624</span></a>      echo '&lt;div class=&quot;' . <a class="var it35083" onMouseOver="hilite(35083)" onMouseOut="lolite()" onClick="logVariable('advancedsearchclass')" href="../../_variables/advancedsearchclass.html">$advancedsearchclass</a> . '&quot; id=&quot;data_adv_form&quot;&gt;';
<a name="l1625"><span class="linenum">1625</span></a>      echo '&lt;table class=&quot;boxaligncenter&quot;&gt;';
<a name="l1626"><span class="linenum">1626</span></a>  
<a name="l1627"><span class="linenum">1627</span></a>  <span class="comment">    // print ASC or DESC</span>
<a name="l1628"><span class="linenum">1628</span></a>      echo '&lt;tr&gt;&lt;td colspan=&quot;2&quot;&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;';
<a name="l1629"><span class="linenum">1629</span></a>      <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0;
<a name="l1630"><span class="linenum">1630</span></a>  
<a name="l1631"><span class="linenum">1631</span></a>  <span class="comment">    // Determine if we are printing all fields for advanced search, or the template for advanced search</span>
<a name="l1632"><span class="linenum">1632</span></a>  <span class="comment">    // If a template is not defined, use the deafault template and display all fields.</span>
<a name="l1633"><span class="linenum">1633</span></a>      if(empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('asearchtemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/asearchtemplate.html">asearchtemplate</a>)) {
<a name="l1634"><span class="linenum">1634</span></a>          <a class="function" onClick="logFunction('data_generate_default_template')" href="../../_functions/data_generate_default_template.html" onMouseOver="funcPopup(event,'data_generate_default_template')">data_generate_default_template</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, 'asearchtemplate');
<a name="l1635"><span class="linenum">1635</span></a>      }
<a name="l1636"><span class="linenum">1636</span></a>  
<a name="l1637"><span class="linenum">1637</span></a>      static <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = NULL;
<a name="l1638"><span class="linenum">1638</span></a>      static <a class="var it32543" onMouseOver="hilite(32543)" onMouseOut="lolite()" onClick="logVariable('isteacher')" href="../../_variables/isteacher.html">$isteacher</a>;
<a name="l1639"><span class="linenum">1639</span></a>      static <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a> = NULL;
<a name="l1640"><span class="linenum">1640</span></a>  
<a name="l1641"><span class="linenum">1641</span></a>      if (empty(<a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>)) {
<a name="l1642"><span class="linenum">1642</span></a>          <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1643"><span class="linenum">1643</span></a>      } else if (<a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a> != <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l1644"><span class="linenum">1644</span></a>          <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = NULL;
<a name="l1645"><span class="linenum">1645</span></a>      }
<a name="l1646"><span class="linenum">1646</span></a>  
<a name="l1647"><span class="linenum">1647</span></a>      if (empty(<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>)) {
<a name="l1648"><span class="linenum">1648</span></a>          <a class="var it28105" onMouseOver="hilite(28105)" onMouseOut="lolite()" onClick="logVariable('fieldrecords')" href="../../_variables/fieldrecords.html">$fieldrecords</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('data_fields', array('dataid'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1649"><span class="linenum">1649</span></a>          foreach (<a class="var it28105" onMouseOver="hilite(28105)" onMouseOut="lolite()" onClick="logVariable('fieldrecords')" href="../../_variables/fieldrecords.html">$fieldrecords</a> as <a class="var it28106" onMouseOver="hilite(28106)" onMouseOut="lolite()" onClick="logVariable('fieldrecord')" href="../../_variables/fieldrecord.html">$fieldrecord</a>) {
<a name="l1650"><span class="linenum">1650</span></a>              <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>[]= <a class="function" onClick="logFunction('data_get_field')" href="../../_functions/data_get_field.html" onMouseOver="funcPopup(event,'data_get_field')">data_get_field</a>(<a class="var it28106" onMouseOver="hilite(28106)" onMouseOut="lolite()" onClick="logVariable('fieldrecord')" href="../../_variables/fieldrecord.html">$fieldrecord</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l1651"><span class="linenum">1651</span></a>          }
<a name="l1652"><span class="linenum">1652</span></a>  
<a name="l1653"><span class="linenum">1653</span></a>          <a class="var it32543" onMouseOver="hilite(32543)" onMouseOut="lolite()" onClick="logVariable('isteacher')" href="../../_variables/isteacher.html">$isteacher</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:managetemplates', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l1654"><span class="linenum">1654</span></a>      }
<a name="l1655"><span class="linenum">1655</span></a>  
<a name="l1656"><span class="linenum">1656</span></a>  <span class="comment">    // Replacing tags</span>
<a name="l1657"><span class="linenum">1657</span></a>      <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a> = array();
<a name="l1658"><span class="linenum">1658</span></a>      <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a> = array();
<a name="l1659"><span class="linenum">1659</span></a>  
<a name="l1660"><span class="linenum">1660</span></a>  <span class="comment">    // Then we generate strings to replace for normal tags</span>
<a name="l1661"><span class="linenum">1661</span></a>      foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l1662"><span class="linenum">1662</span></a>          <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name;
<a name="l1663"><span class="linenum">1663</span></a>          <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> = <a class="phpfunction" onClick="logFunction('preg_quote')" href="../../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>, '/');
<a name="l1664"><span class="linenum">1664</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[] = &quot;/\[\[<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>\]\]/i&quot;;
<a name="l1665"><span class="linenum">1665</span></a>          <a class="var it28686" onMouseOver="hilite(28686)" onMouseOut="lolite()" onClick="logVariable('searchfield')" href="../../_variables/searchfield.html">$searchfield</a> = <a class="function" onClick="logFunction('data_get_field_from_id')" href="../../_functions/data_get_field_from_id.html" onMouseOver="funcPopup(event,'data_get_field_from_id')">data_get_field_from_id</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l1666"><span class="linenum">1666</span></a>          if (!empty(<a class="var it28685" onMouseOver="hilite(28685)" onMouseOut="lolite()" onClick="logVariable('search_array')" href="../../_variables/search_array.html">$search_array</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id]-&gt;data)) {
<a name="l1667"><span class="linenum">1667</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = <a class="var it28686" onMouseOver="hilite(28686)" onMouseOut="lolite()" onClick="logVariable('searchfield')" href="../../_variables/searchfield.html">$searchfield</a>-&gt;<a class="function" onClick="logFunction('display_search_field')" href="../../_functions/display_search_field.html" onMouseOver="funcPopup(event,'display_search_field')">display_search_field</a>(<a class="var it28685" onMouseOver="hilite(28685)" onMouseOut="lolite()" onClick="logVariable('search_array')" href="../../_variables/search_array.html">$search_array</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id]-&gt;data);
<a name="l1668"><span class="linenum">1668</span></a>          } else {
<a name="l1669"><span class="linenum">1669</span></a>              <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = <a class="var it28686" onMouseOver="hilite(28686)" onMouseOut="lolite()" onClick="logVariable('searchfield')" href="../../_variables/searchfield.html">$searchfield</a>-&gt;<a class="function" onClick="logFunction('display_search_field')" href="../../_functions/display_search_field.html" onMouseOver="funcPopup(event,'display_search_field')">display_search_field</a>();
<a name="l1670"><span class="linenum">1670</span></a>          }
<a name="l1671"><span class="linenum">1671</span></a>      }
<a name="l1672"><span class="linenum">1672</span></a>      <a class="var it2000" onMouseOver="hilite(2000)" onMouseOut="lolite()" onClick="logVariable('fn')" href="../../_variables/fn.html">$fn</a> = !empty(<a class="var it28685" onMouseOver="hilite(28685)" onMouseOut="lolite()" onClick="logVariable('search_array')" href="../../_variables/search_array.html">$search_array</a>[<a class="constant" onClick="logConstant('DATA_FIRSTNAME')" href="../../_constants/DATA_FIRSTNAME.html" onMouseOver="constPopup(event,'DATA_FIRSTNAME')">DATA_FIRSTNAME</a>]-&gt;data) ? <a class="var it28685" onMouseOver="hilite(28685)" onMouseOut="lolite()" onClick="logVariable('search_array')" href="../../_variables/search_array.html">$search_array</a>[<a class="constant" onClick="logConstant('DATA_FIRSTNAME')" href="../../_constants/DATA_FIRSTNAME.html" onMouseOver="constPopup(event,'DATA_FIRSTNAME')">DATA_FIRSTNAME</a>]-&gt;data : '';
<a name="l1673"><span class="linenum">1673</span></a>      <a class="var it13736" onMouseOver="hilite(13736)" onMouseOut="lolite()" onClick="logVariable('ln')" href="../../_variables/ln.html">$ln</a> = !empty(<a class="var it28685" onMouseOver="hilite(28685)" onMouseOut="lolite()" onClick="logVariable('search_array')" href="../../_variables/search_array.html">$search_array</a>[<a class="constant" onClick="logConstant('DATA_LASTNAME')" href="../../_constants/DATA_LASTNAME.html" onMouseOver="constPopup(event,'DATA_LASTNAME')">DATA_LASTNAME</a>]-&gt;data) ? <a class="var it28685" onMouseOver="hilite(28685)" onMouseOut="lolite()" onClick="logVariable('search_array')" href="../../_variables/search_array.html">$search_array</a>[<a class="constant" onClick="logConstant('DATA_LASTNAME')" href="../../_constants/DATA_LASTNAME.html" onMouseOver="constPopup(event,'DATA_LASTNAME')">DATA_LASTNAME</a>]-&gt;data : '';
<a name="l1674"><span class="linenum">1674</span></a>      <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[]    = '/##firstname##/';
<a name="l1675"><span class="linenum">1675</span></a>      <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = '&lt;label class=&quot;accesshide&quot; for=&quot;u_fn&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('authorfirstname', 'data').'&lt;/label&gt;&lt;input type=&quot;text&quot; size=&quot;16&quot; id=&quot;u_fn&quot; name=&quot;u_fn&quot; value=&quot;'.<a class="var it2000" onMouseOver="hilite(2000)" onMouseOut="lolite()" onClick="logVariable('fn')" href="../../_variables/fn.html">$fn</a>.'&quot; /&gt;';
<a name="l1676"><span class="linenum">1676</span></a>      <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>[]    = '/##lastname##/';
<a name="l1677"><span class="linenum">1677</span></a>      <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>[] = '&lt;label class=&quot;accesshide&quot; for=&quot;u_ln&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('authorlastname', 'data').'&lt;/label&gt;&lt;input type=&quot;text&quot; size=&quot;16&quot; id=&quot;u_ln&quot; name=&quot;u_ln&quot; value=&quot;'.<a class="var it13736" onMouseOver="hilite(13736)" onMouseOut="lolite()" onClick="logVariable('ln')" href="../../_variables/ln.html">$ln</a>.'&quot; /&gt;';
<a name="l1678"><span class="linenum">1678</span></a>  
<a name="l1679"><span class="linenum">1679</span></a>  <span class="comment">    // actual replacement of the tags</span>
<a name="l1680"><span class="linenum">1680</span></a>      <a class="var it2298" onMouseOver="hilite(2298)" onMouseOut="lolite()" onClick="logVariable('newtext')" href="../../_variables/newtext.html">$newtext</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(<a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../../_variables/patterns.html">$patterns</a>, <a class="var it81" onMouseOver="hilite(81)" onMouseOut="lolite()" onClick="logVariable('replacement')" href="../../_variables/replacement.html">$replacement</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('asearchtemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/asearchtemplate.html">asearchtemplate</a>);
<a name="l1681"><span class="linenum">1681</span></a>  
<a name="l1682"><span class="linenum">1682</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = new stdClass();
<a name="l1683"><span class="linenum">1683</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('para')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../_variables/para.html">para</a>=false;
<a name="l1684"><span class="linenum">1684</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('noclean')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../_variables/noclean.html">noclean</a>=true;
<a name="l1685"><span class="linenum">1685</span></a>      echo '&lt;tr&gt;&lt;td&gt;';
<a name="l1686"><span class="linenum">1686</span></a>      echo <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it2298" onMouseOver="hilite(2298)" onMouseOut="lolite()" onClick="logVariable('newtext')" href="../../_variables/newtext.html">$newtext</a>, <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l1687"><span class="linenum">1687</span></a>      echo '&lt;/td&gt;&lt;/tr&gt;';
<a name="l1688"><span class="linenum">1688</span></a>  
<a name="l1689"><span class="linenum">1689</span></a>      echo '&lt;tr&gt;&lt;td colspan=&quot;4&quot;&gt;&lt;br/&gt;&lt;input type=&quot;submit&quot; value=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savesettings','data').'&quot; /&gt;&lt;input type=&quot;submit&quot; name=&quot;resetadv&quot; value=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetsettings','data').'&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;';
<a name="l1690"><span class="linenum">1690</span></a>      echo '&lt;/table&gt;';
<a name="l1691"><span class="linenum">1691</span></a>      echo '&lt;/div&gt;';
<a name="l1692"><span class="linenum">1692</span></a>      echo '&lt;/div&gt;';
<a name="l1693"><span class="linenum">1693</span></a>      echo '&lt;/form&gt;';
<a name="l1694"><span class="linenum">1694</span></a>      echo '&lt;/div&gt;';
<a name="l1695"><span class="linenum">1695</span></a>  }
<a name="l1696"><span class="linenum">1696</span></a>  
<a name="l1697"><span class="linenum">1697</span></a>  <span class="comment">/**</span>
<a name="l1698"><span class="linenum">1698</span></a>  <span class="comment"> * @global object</span>
<a name="l1699"><span class="linenum">1699</span></a>  <span class="comment"> * @global object</span>
<a name="l1700"><span class="linenum">1700</span></a>  <span class="comment"> * @param object $data</span>
<a name="l1701"><span class="linenum">1701</span></a>  <span class="comment"> * @param object $record</span>
<a name="l1702"><span class="linenum">1702</span></a>  <span class="comment"> * @return void Output echo'd</span>
<a name="l1703"><span class="linenum">1703</span></a>  <span class="comment"> */</span>
<a name="l1704"><span class="linenum">1704</span></a>  function <a class="function" onClick="logFunction('data_print_ratings')" href="../../_functions/data_print_ratings.html" onMouseOver="funcPopup(event,'data_print_ratings')">data_print_ratings</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l1705"><span class="linenum">1705</span></a>      global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1706"><span class="linenum">1706</span></a>      if (!empty(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('rating')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/rating.html">rating</a>)){
<a name="l1707"><span class="linenum">1707</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('rating')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/rating.html">rating</a>);
<a name="l1708"><span class="linenum">1708</span></a>      }
<a name="l1709"><span class="linenum">1709</span></a>  }
<a name="l1710"><span class="linenum">1710</span></a>  
<a name="l1711"><span class="linenum">1711</span></a>  <span class="comment">/**</span>
<a name="l1712"><span class="linenum">1712</span></a>  <span class="comment"> * List the actions that correspond to a view of this module.</span>
<a name="l1713"><span class="linenum">1713</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l1714"><span class="linenum">1714</span></a>  <span class="comment"> *</span>
<a name="l1715"><span class="linenum">1715</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l1716"><span class="linenum">1716</span></a>  <span class="comment"> *       crud = 'r' and edulevel = LEVEL_PARTICIPATING will</span>
<a name="l1717"><span class="linenum">1717</span></a>  <span class="comment"> *       be considered as view action.</span>
<a name="l1718"><span class="linenum">1718</span></a>  <span class="comment"> *</span>
<a name="l1719"><span class="linenum">1719</span></a>  <span class="comment"> * @return array</span>
<a name="l1720"><span class="linenum">1720</span></a>  <span class="comment"> */</span>
<a name="l1721"><span class="linenum">1721</span></a>  function <a class="function" onClick="logFunction('data_get_view_actions')" href="../../_functions/data_get_view_actions.html" onMouseOver="funcPopup(event,'data_get_view_actions')">data_get_view_actions</a>() {
<a name="l1722"><span class="linenum">1722</span></a>      return array('view');
<a name="l1723"><span class="linenum">1723</span></a>  }
<a name="l1724"><span class="linenum">1724</span></a>  
<a name="l1725"><span class="linenum">1725</span></a>  <span class="comment">/**</span>
<a name="l1726"><span class="linenum">1726</span></a>  <span class="comment"> * List the actions that correspond to a post of this module.</span>
<a name="l1727"><span class="linenum">1727</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l1728"><span class="linenum">1728</span></a>  <span class="comment"> *</span>
<a name="l1729"><span class="linenum">1729</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l1730"><span class="linenum">1730</span></a>  <span class="comment"> *       crud = ('c' || 'u' || 'd') and edulevel = LEVEL_PARTICIPATING</span>
<a name="l1731"><span class="linenum">1731</span></a>  <span class="comment"> *       will be considered as post action.</span>
<a name="l1732"><span class="linenum">1732</span></a>  <span class="comment"> *</span>
<a name="l1733"><span class="linenum">1733</span></a>  <span class="comment"> * @return array</span>
<a name="l1734"><span class="linenum">1734</span></a>  <span class="comment"> */</span>
<a name="l1735"><span class="linenum">1735</span></a>  function <a class="function" onClick="logFunction('data_get_post_actions')" href="../../_functions/data_get_post_actions.html" onMouseOver="funcPopup(event,'data_get_post_actions')">data_get_post_actions</a>() {
<a name="l1736"><span class="linenum">1736</span></a>      return array('add','update','record delete');
<a name="l1737"><span class="linenum">1737</span></a>  }
<a name="l1738"><span class="linenum">1738</span></a>  
<a name="l1739"><span class="linenum">1739</span></a>  <span class="comment">/**</span>
<a name="l1740"><span class="linenum">1740</span></a>  <span class="comment"> * @param string $name</span>
<a name="l1741"><span class="linenum">1741</span></a>  <span class="comment"> * @param int $dataid</span>
<a name="l1742"><span class="linenum">1742</span></a>  <span class="comment"> * @param int $fieldid</span>
<a name="l1743"><span class="linenum">1743</span></a>  <span class="comment"> * @return bool</span>
<a name="l1744"><span class="linenum">1744</span></a>  <span class="comment"> */</span>
<a name="l1745"><span class="linenum">1745</span></a>  function <a class="function" onClick="logFunction('data_fieldname_exists')" href="../../_functions/data_fieldname_exists.html" onMouseOver="funcPopup(event,'data_fieldname_exists')">data_fieldname_exists</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>, <a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a> = 0) {
<a name="l1746"><span class="linenum">1746</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1747"><span class="linenum">1747</span></a>  
<a name="l1748"><span class="linenum">1748</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_numeric')" href="../../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>)) {
<a name="l1749"><span class="linenum">1749</span></a>          <a class="var it4340" onMouseOver="hilite(4340)" onMouseOut="lolite()" onClick="logVariable('like')" href="../../_variables/like.html">$like</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_like')" href="../../_functions/sql_like.html" onMouseOver="funcPopup(event,'sql_like')">sql_like</a>('df.name', ':name', false);
<a name="l1750"><span class="linenum">1750</span></a>      } else {
<a name="l1751"><span class="linenum">1751</span></a>          <a class="var it4340" onMouseOver="hilite(4340)" onMouseOut="lolite()" onClick="logVariable('like')" href="../../_variables/like.html">$like</a> = &quot;df.name = :name&quot;;
<a name="l1752"><span class="linenum">1752</span></a>      }
<a name="l1753"><span class="linenum">1753</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('name'=&gt;<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l1754"><span class="linenum">1754</span></a>      if (<a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a>) {
<a name="l1755"><span class="linenum">1755</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['dataid']   = <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>;
<a name="l1756"><span class="linenum">1756</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['fieldid1'] = <a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a>;
<a name="l1757"><span class="linenum">1757</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['fieldid2'] = <a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a>;
<a name="l1758"><span class="linenum">1758</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(&quot;SELECT * FROM {data_fields} df
<a name="l1759"><span class="linenum">1759</span></a>                                          WHERE <a class="var it4340" onMouseOver="hilite(4340)" onMouseOut="lolite()" onClick="logVariable('like')" href="../../_variables/like.html">$like</a> AND df.dataid = :dataid
<a name="l1760"><span class="linenum">1760</span></a>                                                AND ((df.id &lt; :fieldid1) <a class="function" onClick="logFunction('OR')" href="../../_functions/or.html" onMouseOver="funcPopup(event,'or')">OR</a> (df.id &gt; :fieldid2))&quot;, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1761"><span class="linenum">1761</span></a>      } else {
<a name="l1762"><span class="linenum">1762</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['dataid']   = <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>;
<a name="l1763"><span class="linenum">1763</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(&quot;SELECT * FROM {data_fields} df
<a name="l1764"><span class="linenum">1764</span></a>                                          WHERE <a class="var it4340" onMouseOver="hilite(4340)" onMouseOut="lolite()" onClick="logVariable('like')" href="../../_variables/like.html">$like</a> AND df.dataid = :dataid&quot;, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1765"><span class="linenum">1765</span></a>      }
<a name="l1766"><span class="linenum">1766</span></a>  }
<a name="l1767"><span class="linenum">1767</span></a>  
<a name="l1768"><span class="linenum">1768</span></a>  <span class="comment">/**</span>
<a name="l1769"><span class="linenum">1769</span></a>  <span class="comment"> * @param array $fieldinput</span>
<a name="l1770"><span class="linenum">1770</span></a>  <span class="comment"> */</span>
<a name="l1771"><span class="linenum">1771</span></a>  function <a class="function" onClick="logFunction('data_convert_arrays_to_strings')" href="../../_functions/data_convert_arrays_to_strings.html" onMouseOver="funcPopup(event,'data_convert_arrays_to_strings')">data_convert_arrays_to_strings</a>(&amp;<a class="var it35085" onMouseOver="hilite(35085)" onMouseOut="lolite()" onClick="logVariable('fieldinput')" href="../../_variables/fieldinput.html">$fieldinput</a>) {
<a name="l1772"><span class="linenum">1772</span></a>      foreach (<a class="var it35085" onMouseOver="hilite(35085)" onMouseOut="lolite()" onClick="logVariable('fieldinput')" href="../../_variables/fieldinput.html">$fieldinput</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>) {
<a name="l1773"><span class="linenum">1773</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>)) {
<a name="l1774"><span class="linenum">1774</span></a>              <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> = '';
<a name="l1775"><span class="linenum">1775</span></a>              foreach (<a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a> as <a class="var it12868" onMouseOver="hilite(12868)" onMouseOut="lolite()" onClick="logVariable('inner')" href="../../_variables/inner.html">$inner</a>) {
<a name="l1776"><span class="linenum">1776</span></a>                  <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> .= <a class="var it12868" onMouseOver="hilite(12868)" onMouseOut="lolite()" onClick="logVariable('inner')" href="../../_variables/inner.html">$inner</a> . ',';
<a name="l1777"><span class="linenum">1777</span></a>              }
<a name="l1778"><span class="linenum">1778</span></a>              <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>, 0, -1);
<a name="l1779"><span class="linenum">1779</span></a>  
<a name="l1780"><span class="linenum">1780</span></a>              <a class="var it35085" onMouseOver="hilite(35085)" onMouseOut="lolite()" onClick="logVariable('fieldinput')" href="../../_variables/fieldinput.html">$fieldinput</a>-&gt;<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> = <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>;
<a name="l1781"><span class="linenum">1781</span></a>          }
<a name="l1782"><span class="linenum">1782</span></a>      }
<a name="l1783"><span class="linenum">1783</span></a>  }
<a name="l1784"><span class="linenum">1784</span></a>  
<a name="l1785"><span class="linenum">1785</span></a>  
<a name="l1786"><span class="linenum">1786</span></a>  <span class="comment">/**</span>
<a name="l1787"><span class="linenum">1787</span></a>  <span class="comment"> * Converts a database (module instance) to use the Roles System</span>
<a name="l1788"><span class="linenum">1788</span></a>  <span class="comment"> *</span>
<a name="l1789"><span class="linenum">1789</span></a>  <span class="comment"> * @global object</span>
<a name="l1790"><span class="linenum">1790</span></a>  <span class="comment"> * @global object</span>
<a name="l1791"><span class="linenum">1791</span></a>  <span class="comment"> * @uses CONTEXT_MODULE</span>
<a name="l1792"><span class="linenum">1792</span></a>  <span class="comment"> * @uses CAP_PREVENT</span>
<a name="l1793"><span class="linenum">1793</span></a>  <span class="comment"> * @uses CAP_ALLOW</span>
<a name="l1794"><span class="linenum">1794</span></a>  <span class="comment"> * @param object $data a data object with the same attributes as a record</span>
<a name="l1795"><span class="linenum">1795</span></a>  <span class="comment"> *                     from the data database table</span>
<a name="l1796"><span class="linenum">1796</span></a>  <span class="comment"> * @param int $datamodid the id of the data module, from the modules table</span>
<a name="l1797"><span class="linenum">1797</span></a>  <span class="comment"> * @param array $teacherroles array of roles that have archetype teacher</span>
<a name="l1798"><span class="linenum">1798</span></a>  <span class="comment"> * @param array $studentroles array of roles that have archetype student</span>
<a name="l1799"><span class="linenum">1799</span></a>  <span class="comment"> * @param array $guestroles array of roles that have archetype guest</span>
<a name="l1800"><span class="linenum">1800</span></a>  <span class="comment"> * @param int $cmid the course_module id for this data instance</span>
<a name="l1801"><span class="linenum">1801</span></a>  <span class="comment"> * @return boolean data module was converted or not</span>
<a name="l1802"><span class="linenum">1802</span></a>  <span class="comment"> */</span>
<a name="l1803"><span class="linenum">1803</span></a>  function <a class="function" onClick="logFunction('data_convert_to_roles')" href="../../_functions/data_convert_to_roles.html" onMouseOver="funcPopup(event,'data_convert_to_roles')">data_convert_to_roles</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it30625" onMouseOver="hilite(30625)" onMouseOut="lolite()" onClick="logVariable('teacherroles')" href="../../_variables/teacherroles.html">$teacherroles</a>=array(), <a class="var it20779" onMouseOver="hilite(20779)" onMouseOut="lolite()" onClick="logVariable('studentroles')" href="../../_variables/studentroles.html">$studentroles</a>=array(), <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>=NULL) {
<a name="l1804"><span class="linenum">1804</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1805"><span class="linenum">1805</span></a>  
<a name="l1806"><span class="linenum">1806</span></a>      if (!isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('participants')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/participants.html">participants</a>) &amp;&amp; !isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assesspublic')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/assesspublic.html">assesspublic</a>)
<a name="l1807"><span class="linenum">1807</span></a>              &amp;&amp; !isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('groupmode')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/groupmode.html">groupmode</a>)) {
<a name="l1808"><span class="linenum">1808</span></a>  <span class="comment">        // We assume that this database has already been converted to use the</span>
<a name="l1809"><span class="linenum">1809</span></a>  <span class="comment">        // Roles System. above fields get dropped the data module has been</span>
<a name="l1810"><span class="linenum">1810</span></a>  <span class="comment">        // upgraded to use Roles.</span>
<a name="l1811"><span class="linenum">1811</span></a>          return false;
<a name="l1812"><span class="linenum">1812</span></a>      }
<a name="l1813"><span class="linenum">1813</span></a>  
<a name="l1814"><span class="linenum">1814</span></a>      if (empty(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>)) {
<a name="l1815"><span class="linenum">1815</span></a>  <span class="comment">        // We were not given the course_module id. Try to find it.</span>
<a name="l1816"><span class="linenum">1816</span></a>          if (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l1817"><span class="linenum">1817</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>('Could not get the course module for the data');
<a name="l1818"><span class="linenum">1818</span></a>              return false;
<a name="l1819"><span class="linenum">1819</span></a>          } else {
<a name="l1820"><span class="linenum">1820</span></a>              <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1821"><span class="linenum">1821</span></a>          }
<a name="l1822"><span class="linenum">1822</span></a>      }
<a name="l1823"><span class="linenum">1823</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>);
<a name="l1824"><span class="linenum">1824</span></a>  
<a name="l1825"><span class="linenum">1825</span></a>  
<a name="l1826"><span class="linenum">1826</span></a>  <span class="comment">    // $data-&gt;participants:</span>
<a name="l1827"><span class="linenum">1827</span></a>  <span class="comment">    // 1 - Only teachers can add entries</span>
<a name="l1828"><span class="linenum">1828</span></a>  <span class="comment">    // 3 - Teachers and students can add entries</span>
<a name="l1829"><span class="linenum">1829</span></a>      switch (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('participants')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/participants.html">participants</a>) {
<a name="l1830"><span class="linenum">1830</span></a>          case 1:
<a name="l1831"><span class="linenum">1831</span></a>              foreach (<a class="var it20779" onMouseOver="hilite(20779)" onMouseOut="lolite()" onClick="logVariable('studentroles')" href="../../_variables/studentroles.html">$studentroles</a> as <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>) {
<a name="l1832"><span class="linenum">1832</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:writeentry', <a class="constant" onClick="logConstant('CAP_PREVENT')" href="../../_constants/CAP_PREVENT.html" onMouseOver="constPopup(event,'CAP_PREVENT')">CAP_PREVENT</a>, <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it39646" onMouseOver="hilite(39646)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1833"><span class="linenum">1833</span></a>              }
<a name="l1834"><span class="linenum">1834</span></a>              foreach (<a class="var it30625" onMouseOver="hilite(30625)" onMouseOut="lolite()" onClick="logVariable('teacherroles')" href="../../_variables/teacherroles.html">$teacherroles</a> as <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>) {
<a name="l1835"><span class="linenum">1835</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:writeentry', <a class="constant" onClick="logConstant('CAP_ALLOW')" href="../../_constants/CAP_ALLOW.html" onMouseOver="constPopup(event,'CAP_ALLOW')">CAP_ALLOW</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>-&gt;<a onClick="logVariable('id')" class="var it39648" onMouseOver="hilite(39648)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1836"><span class="linenum">1836</span></a>              }
<a name="l1837"><span class="linenum">1837</span></a>              break;
<a name="l1838"><span class="linenum">1838</span></a>          case 3:
<a name="l1839"><span class="linenum">1839</span></a>              foreach (<a class="var it20779" onMouseOver="hilite(20779)" onMouseOut="lolite()" onClick="logVariable('studentroles')" href="../../_variables/studentroles.html">$studentroles</a> as <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>) {
<a name="l1840"><span class="linenum">1840</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:writeentry', <a class="constant" onClick="logConstant('CAP_ALLOW')" href="../../_constants/CAP_ALLOW.html" onMouseOver="constPopup(event,'CAP_ALLOW')">CAP_ALLOW</a>, <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it39646" onMouseOver="hilite(39646)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1841"><span class="linenum">1841</span></a>              }
<a name="l1842"><span class="linenum">1842</span></a>              foreach (<a class="var it30625" onMouseOver="hilite(30625)" onMouseOut="lolite()" onClick="logVariable('teacherroles')" href="../../_variables/teacherroles.html">$teacherroles</a> as <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>) {
<a name="l1843"><span class="linenum">1843</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:writeentry', <a class="constant" onClick="logConstant('CAP_ALLOW')" href="../../_constants/CAP_ALLOW.html" onMouseOver="constPopup(event,'CAP_ALLOW')">CAP_ALLOW</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>-&gt;<a onClick="logVariable('id')" class="var it39648" onMouseOver="hilite(39648)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1844"><span class="linenum">1844</span></a>              }
<a name="l1845"><span class="linenum">1845</span></a>              break;
<a name="l1846"><span class="linenum">1846</span></a>      }
<a name="l1847"><span class="linenum">1847</span></a>  
<a name="l1848"><span class="linenum">1848</span></a>  <span class="comment">    // $data-&gt;assessed:</span>
<a name="l1849"><span class="linenum">1849</span></a>  <span class="comment">    // 2 - Only teachers can rate posts</span>
<a name="l1850"><span class="linenum">1850</span></a>  <span class="comment">    // 1 - Everyone can rate posts</span>
<a name="l1851"><span class="linenum">1851</span></a>  <span class="comment">    // 0 - No one can rate posts</span>
<a name="l1852"><span class="linenum">1852</span></a>      switch (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assessed')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a>) {
<a name="l1853"><span class="linenum">1853</span></a>          case 0:
<a name="l1854"><span class="linenum">1854</span></a>              foreach (<a class="var it20779" onMouseOver="hilite(20779)" onMouseOut="lolite()" onClick="logVariable('studentroles')" href="../../_variables/studentroles.html">$studentroles</a> as <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>) {
<a name="l1855"><span class="linenum">1855</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:rate', <a class="constant" onClick="logConstant('CAP_PREVENT')" href="../../_constants/CAP_PREVENT.html" onMouseOver="constPopup(event,'CAP_PREVENT')">CAP_PREVENT</a>, <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it39646" onMouseOver="hilite(39646)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1856"><span class="linenum">1856</span></a>              }
<a name="l1857"><span class="linenum">1857</span></a>              foreach (<a class="var it30625" onMouseOver="hilite(30625)" onMouseOut="lolite()" onClick="logVariable('teacherroles')" href="../../_variables/teacherroles.html">$teacherroles</a> as <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>) {
<a name="l1858"><span class="linenum">1858</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:rate', <a class="constant" onClick="logConstant('CAP_PREVENT')" href="../../_constants/CAP_PREVENT.html" onMouseOver="constPopup(event,'CAP_PREVENT')">CAP_PREVENT</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>-&gt;<a onClick="logVariable('id')" class="var it39648" onMouseOver="hilite(39648)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1859"><span class="linenum">1859</span></a>              }
<a name="l1860"><span class="linenum">1860</span></a>              break;
<a name="l1861"><span class="linenum">1861</span></a>          case 1:
<a name="l1862"><span class="linenum">1862</span></a>              foreach (<a class="var it20779" onMouseOver="hilite(20779)" onMouseOut="lolite()" onClick="logVariable('studentroles')" href="../../_variables/studentroles.html">$studentroles</a> as <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>) {
<a name="l1863"><span class="linenum">1863</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:rate', <a class="constant" onClick="logConstant('CAP_ALLOW')" href="../../_constants/CAP_ALLOW.html" onMouseOver="constPopup(event,'CAP_ALLOW')">CAP_ALLOW</a>, <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it39646" onMouseOver="hilite(39646)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1864"><span class="linenum">1864</span></a>              }
<a name="l1865"><span class="linenum">1865</span></a>              foreach (<a class="var it30625" onMouseOver="hilite(30625)" onMouseOut="lolite()" onClick="logVariable('teacherroles')" href="../../_variables/teacherroles.html">$teacherroles</a> as <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>) {
<a name="l1866"><span class="linenum">1866</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:rate', <a class="constant" onClick="logConstant('CAP_ALLOW')" href="../../_constants/CAP_ALLOW.html" onMouseOver="constPopup(event,'CAP_ALLOW')">CAP_ALLOW</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>-&gt;<a onClick="logVariable('id')" class="var it39648" onMouseOver="hilite(39648)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1867"><span class="linenum">1867</span></a>              }
<a name="l1868"><span class="linenum">1868</span></a>              break;
<a name="l1869"><span class="linenum">1869</span></a>          case 2:
<a name="l1870"><span class="linenum">1870</span></a>              foreach (<a class="var it20779" onMouseOver="hilite(20779)" onMouseOut="lolite()" onClick="logVariable('studentroles')" href="../../_variables/studentroles.html">$studentroles</a> as <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>) {
<a name="l1871"><span class="linenum">1871</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:rate', <a class="constant" onClick="logConstant('CAP_PREVENT')" href="../../_constants/CAP_PREVENT.html" onMouseOver="constPopup(event,'CAP_PREVENT')">CAP_PREVENT</a>, <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it39646" onMouseOver="hilite(39646)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1872"><span class="linenum">1872</span></a>              }
<a name="l1873"><span class="linenum">1873</span></a>              foreach (<a class="var it30625" onMouseOver="hilite(30625)" onMouseOut="lolite()" onClick="logVariable('teacherroles')" href="../../_variables/teacherroles.html">$teacherroles</a> as <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>) {
<a name="l1874"><span class="linenum">1874</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:rate', <a class="constant" onClick="logConstant('CAP_ALLOW')" href="../../_constants/CAP_ALLOW.html" onMouseOver="constPopup(event,'CAP_ALLOW')">CAP_ALLOW</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>-&gt;<a onClick="logVariable('id')" class="var it39648" onMouseOver="hilite(39648)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1875"><span class="linenum">1875</span></a>              }
<a name="l1876"><span class="linenum">1876</span></a>              break;
<a name="l1877"><span class="linenum">1877</span></a>      }
<a name="l1878"><span class="linenum">1878</span></a>  
<a name="l1879"><span class="linenum">1879</span></a>  <span class="comment">    // $data-&gt;assesspublic:</span>
<a name="l1880"><span class="linenum">1880</span></a>  <span class="comment">    // 0 - Students can only see their own ratings</span>
<a name="l1881"><span class="linenum">1881</span></a>  <span class="comment">    // 1 - Students can see everyone's ratings</span>
<a name="l1882"><span class="linenum">1882</span></a>      switch (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assesspublic')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/assesspublic.html">assesspublic</a>) {
<a name="l1883"><span class="linenum">1883</span></a>          case 0:
<a name="l1884"><span class="linenum">1884</span></a>              foreach (<a class="var it20779" onMouseOver="hilite(20779)" onMouseOut="lolite()" onClick="logVariable('studentroles')" href="../../_variables/studentroles.html">$studentroles</a> as <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>) {
<a name="l1885"><span class="linenum">1885</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:viewrating', <a class="constant" onClick="logConstant('CAP_PREVENT')" href="../../_constants/CAP_PREVENT.html" onMouseOver="constPopup(event,'CAP_PREVENT')">CAP_PREVENT</a>, <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it39646" onMouseOver="hilite(39646)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1886"><span class="linenum">1886</span></a>              }
<a name="l1887"><span class="linenum">1887</span></a>              foreach (<a class="var it30625" onMouseOver="hilite(30625)" onMouseOut="lolite()" onClick="logVariable('teacherroles')" href="../../_variables/teacherroles.html">$teacherroles</a> as <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>) {
<a name="l1888"><span class="linenum">1888</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:viewrating', <a class="constant" onClick="logConstant('CAP_ALLOW')" href="../../_constants/CAP_ALLOW.html" onMouseOver="constPopup(event,'CAP_ALLOW')">CAP_ALLOW</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>-&gt;<a onClick="logVariable('id')" class="var it39648" onMouseOver="hilite(39648)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1889"><span class="linenum">1889</span></a>              }
<a name="l1890"><span class="linenum">1890</span></a>              break;
<a name="l1891"><span class="linenum">1891</span></a>          case 1:
<a name="l1892"><span class="linenum">1892</span></a>              foreach (<a class="var it20779" onMouseOver="hilite(20779)" onMouseOut="lolite()" onClick="logVariable('studentroles')" href="../../_variables/studentroles.html">$studentroles</a> as <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>) {
<a name="l1893"><span class="linenum">1893</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:viewrating', <a class="constant" onClick="logConstant('CAP_ALLOW')" href="../../_constants/CAP_ALLOW.html" onMouseOver="constPopup(event,'CAP_ALLOW')">CAP_ALLOW</a>, <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it39646" onMouseOver="hilite(39646)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1894"><span class="linenum">1894</span></a>              }
<a name="l1895"><span class="linenum">1895</span></a>              foreach (<a class="var it30625" onMouseOver="hilite(30625)" onMouseOut="lolite()" onClick="logVariable('teacherroles')" href="../../_variables/teacherroles.html">$teacherroles</a> as <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>) {
<a name="l1896"><span class="linenum">1896</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('mod/data:viewrating', <a class="constant" onClick="logConstant('CAP_ALLOW')" href="../../_constants/CAP_ALLOW.html" onMouseOver="constPopup(event,'CAP_ALLOW')">CAP_ALLOW</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>-&gt;<a onClick="logVariable('id')" class="var it39648" onMouseOver="hilite(39648)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1897"><span class="linenum">1897</span></a>              }
<a name="l1898"><span class="linenum">1898</span></a>              break;
<a name="l1899"><span class="linenum">1899</span></a>      }
<a name="l1900"><span class="linenum">1900</span></a>  
<a name="l1901"><span class="linenum">1901</span></a>      if (empty(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>)) {
<a name="l1902"><span class="linenum">1902</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_modules', array('id'=&gt;<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>));
<a name="l1903"><span class="linenum">1903</span></a>      }
<a name="l1904"><span class="linenum">1904</span></a>  
<a name="l1905"><span class="linenum">1905</span></a>      switch (<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupmode')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupmode.html">groupmode</a>) {
<a name="l1906"><span class="linenum">1906</span></a>          case <a class="constant" onClick="logConstant('NOGROUPS')" href="../../_constants/NOGROUPS.html" onMouseOver="constPopup(event,'NOGROUPS')">NOGROUPS</a>:
<a name="l1907"><span class="linenum">1907</span></a>              break;
<a name="l1908"><span class="linenum">1908</span></a>          case <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a>:
<a name="l1909"><span class="linenum">1909</span></a>              foreach (<a class="var it20779" onMouseOver="hilite(20779)" onMouseOut="lolite()" onClick="logVariable('studentroles')" href="../../_variables/studentroles.html">$studentroles</a> as <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>) {
<a name="l1910"><span class="linenum">1910</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('moodle/site:accessallgroups', <a class="constant" onClick="logConstant('CAP_PREVENT')" href="../../_constants/CAP_PREVENT.html" onMouseOver="constPopup(event,'CAP_PREVENT')">CAP_PREVENT</a>, <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it39646" onMouseOver="hilite(39646)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1911"><span class="linenum">1911</span></a>              }
<a name="l1912"><span class="linenum">1912</span></a>              foreach (<a class="var it30625" onMouseOver="hilite(30625)" onMouseOut="lolite()" onClick="logVariable('teacherroles')" href="../../_variables/teacherroles.html">$teacherroles</a> as <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>) {
<a name="l1913"><span class="linenum">1913</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('moodle/site:accessallgroups', <a class="constant" onClick="logConstant('CAP_ALLOW')" href="../../_constants/CAP_ALLOW.html" onMouseOver="constPopup(event,'CAP_ALLOW')">CAP_ALLOW</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>-&gt;<a onClick="logVariable('id')" class="var it39648" onMouseOver="hilite(39648)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1914"><span class="linenum">1914</span></a>              }
<a name="l1915"><span class="linenum">1915</span></a>              break;
<a name="l1916"><span class="linenum">1916</span></a>          case <a class="constant" onClick="logConstant('VISIBLEGROUPS')" href="../../_constants/VISIBLEGROUPS.html" onMouseOver="constPopup(event,'VISIBLEGROUPS')">VISIBLEGROUPS</a>:
<a name="l1917"><span class="linenum">1917</span></a>              foreach (<a class="var it20779" onMouseOver="hilite(20779)" onMouseOut="lolite()" onClick="logVariable('studentroles')" href="../../_variables/studentroles.html">$studentroles</a> as <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>) {
<a name="l1918"><span class="linenum">1918</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('moodle/site:accessallgroups', <a class="constant" onClick="logConstant('CAP_ALLOW')" href="../../_constants/CAP_ALLOW.html" onMouseOver="constPopup(event,'CAP_ALLOW')">CAP_ALLOW</a>, <a class="var it3812" onMouseOver="hilite(3812)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it39646" onMouseOver="hilite(39646)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1919"><span class="linenum">1919</span></a>              }
<a name="l1920"><span class="linenum">1920</span></a>              foreach (<a class="var it30625" onMouseOver="hilite(30625)" onMouseOut="lolite()" onClick="logVariable('teacherroles')" href="../../_variables/teacherroles.html">$teacherroles</a> as <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>) {
<a name="l1921"><span class="linenum">1921</span></a>                  <a class="function" onClick="logFunction('assign_capability')" href="../../_functions/assign_capability.html" onMouseOver="funcPopup(event,'assign_capability')">assign_capability</a>('moodle/site:accessallgroups', <a class="constant" onClick="logConstant('CAP_ALLOW')" href="../../_constants/CAP_ALLOW.html" onMouseOver="constPopup(event,'CAP_ALLOW')">CAP_ALLOW</a>, <a class="var it1626" onMouseOver="hilite(1626)" onMouseOut="lolite()" onClick="logVariable('teacherrole')" href="../../_variables/teacherrole.html">$teacherrole</a>-&gt;<a onClick="logVariable('id')" class="var it39648" onMouseOver="hilite(39648)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1922"><span class="linenum">1922</span></a>              }
<a name="l1923"><span class="linenum">1923</span></a>              break;
<a name="l1924"><span class="linenum">1924</span></a>      }
<a name="l1925"><span class="linenum">1925</span></a>      return true;
<a name="l1926"><span class="linenum">1926</span></a>  }
<a name="l1927"><span class="linenum">1927</span></a>  
<a name="l1928"><span class="linenum">1928</span></a>  <span class="comment">/**</span>
<a name="l1929"><span class="linenum">1929</span></a>  <span class="comment"> * Returns the best name to show for a preset</span>
<a name="l1930"><span class="linenum">1930</span></a>  <span class="comment"> *</span>
<a name="l1931"><span class="linenum">1931</span></a>  <span class="comment"> * @param string $shortname</span>
<a name="l1932"><span class="linenum">1932</span></a>  <span class="comment"> * @param  string $path</span>
<a name="l1933"><span class="linenum">1933</span></a>  <span class="comment"> * @return string</span>
<a name="l1934"><span class="linenum">1934</span></a>  <span class="comment"> */</span>
<a name="l1935"><span class="linenum">1935</span></a>  function <a class="function" onClick="logFunction('data_preset_name')" href="../../_functions/data_preset_name.html" onMouseOver="funcPopup(event,'data_preset_name')">data_preset_name</a>(<a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../_variables/shortname.html">$shortname</a>, <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>) {
<a name="l1936"><span class="linenum">1936</span></a>  
<a name="l1937"><span class="linenum">1937</span></a>  <span class="comment">    // We are looking inside the preset itself as a first choice, but also in normal data directory</span>
<a name="l1938"><span class="linenum">1938</span></a>      <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', 'datapreset_'.<a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../_variables/shortname.html">$shortname</a>);
<a name="l1939"><span class="linenum">1939</span></a>  
<a name="l1940"><span class="linenum">1940</span></a>      if (<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a>, 0, 1) == '[') {
<a name="l1941"><span class="linenum">1941</span></a>          return <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../_variables/shortname.html">$shortname</a>;
<a name="l1942"><span class="linenum">1942</span></a>      } else {
<a name="l1943"><span class="linenum">1943</span></a>          return <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a>;
<a name="l1944"><span class="linenum">1944</span></a>      }
<a name="l1945"><span class="linenum">1945</span></a>  }
<a name="l1946"><span class="linenum">1946</span></a>  
<a name="l1947"><span class="linenum">1947</span></a>  <span class="comment">/**</span>
<a name="l1948"><span class="linenum">1948</span></a>  <span class="comment"> * Returns an array of all the available presets.</span>
<a name="l1949"><span class="linenum">1949</span></a>  <span class="comment"> *</span>
<a name="l1950"><span class="linenum">1950</span></a>  <span class="comment"> * @return array</span>
<a name="l1951"><span class="linenum">1951</span></a>  <span class="comment"> */</span>
<a name="l1952"><span class="linenum">1952</span></a>  function <a class="function" onClick="logFunction('data_get_available_presets')" href="../../_functions/data_get_available_presets.html" onMouseOver="funcPopup(event,'data_get_available_presets')">data_get_available_presets</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l1953"><span class="linenum">1953</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l1954"><span class="linenum">1954</span></a>  
<a name="l1955"><span class="linenum">1955</span></a>      <a class="var it34628" onMouseOver="hilite(34628)" onMouseOut="lolite()" onClick="logVariable('presets')" href="../../_variables/presets.html">$presets</a> = array();
<a name="l1956"><span class="linenum">1956</span></a>  
<a name="l1957"><span class="linenum">1957</span></a>  <span class="comment">    // First load the ratings sub plugins that exist within the modules preset dir</span>
<a name="l1958"><span class="linenum">1958</span></a>      if (<a class="var it3472" onMouseOver="hilite(3472)" onMouseOut="lolite()" onClick="logVariable('dirs')" href="../../_variables/dirs.html">$dirs</a> = <a class="class" onClick="logClass('core_component')" href="../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('datapreset')) {
<a name="l1959"><span class="linenum">1959</span></a>          foreach (<a class="var it3472" onMouseOver="hilite(3472)" onMouseOut="lolite()" onClick="logVariable('dirs')" href="../../_variables/dirs.html">$dirs</a> as <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>=&gt;<a class="var it1128" onMouseOver="hilite(1128)" onMouseOut="lolite()" onClick="logVariable('fulldir')" href="../../_variables/fulldir.html">$fulldir</a>) {
<a name="l1960"><span class="linenum">1960</span></a>              if (<a class="function" onClick="logFunction('is_directory_a_preset')" href="../../_functions/is_directory_a_preset.html" onMouseOver="funcPopup(event,'is_directory_a_preset')">is_directory_a_preset</a>(<a class="var it1128" onMouseOver="hilite(1128)" onMouseOut="lolite()" onClick="logVariable('fulldir')" href="../../_variables/fulldir.html">$fulldir</a>)) {
<a name="l1961"><span class="linenum">1961</span></a>                  <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a> = new stdClass();
<a name="l1962"><span class="linenum">1962</span></a>                  <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('path')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/path.html">path</a> = <a class="var it1128" onMouseOver="hilite(1128)" onMouseOut="lolite()" onClick="logVariable('fulldir')" href="../../_variables/fulldir.html">$fulldir</a>;
<a name="l1963"><span class="linenum">1963</span></a>                  <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('userid')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = 0;
<a name="l1964"><span class="linenum">1964</span></a>                  <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('shortname')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/shortname.html">shortname</a> = <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>;
<a name="l1965"><span class="linenum">1965</span></a>                  <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('name')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="function" onClick="logFunction('data_preset_name')" href="../../_functions/data_preset_name.html" onMouseOver="funcPopup(event,'data_preset_name')">data_preset_name</a>(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>, <a class="var it1128" onMouseOver="hilite(1128)" onMouseOut="lolite()" onClick="logVariable('fulldir')" href="../../_variables/fulldir.html">$fulldir</a>);
<a name="l1966"><span class="linenum">1966</span></a>                  if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1128" onMouseOver="hilite(1128)" onMouseOut="lolite()" onClick="logVariable('fulldir')" href="../../_variables/fulldir.html">$fulldir</a>.'/screenshot.jpg')) {
<a name="l1967"><span class="linenum">1967</span></a>                      <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('screenshot')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/screenshot.html">screenshot</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/mod/data/preset/'.<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>.'/screenshot.jpg';
<a name="l1968"><span class="linenum">1968</span></a>                  } else if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1128" onMouseOver="hilite(1128)" onMouseOut="lolite()" onClick="logVariable('fulldir')" href="../../_variables/fulldir.html">$fulldir</a>.'/screenshot.png')) {
<a name="l1969"><span class="linenum">1969</span></a>                      <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('screenshot')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/screenshot.html">screenshot</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/mod/data/preset/'.<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>.'/screenshot.png';
<a name="l1970"><span class="linenum">1970</span></a>                  } else if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1128" onMouseOver="hilite(1128)" onMouseOut="lolite()" onClick="logVariable('fulldir')" href="../../_variables/fulldir.html">$fulldir</a>.'/screenshot.gif')) {
<a name="l1971"><span class="linenum">1971</span></a>                      <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('screenshot')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/screenshot.html">screenshot</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/mod/data/preset/'.<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>.'/screenshot.gif';
<a name="l1972"><span class="linenum">1972</span></a>                  }
<a name="l1973"><span class="linenum">1973</span></a>                  <a class="var it34628" onMouseOver="hilite(34628)" onMouseOut="lolite()" onClick="logVariable('presets')" href="../../_variables/presets.html">$presets</a>[] = <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>;
<a name="l1974"><span class="linenum">1974</span></a>              }
<a name="l1975"><span class="linenum">1975</span></a>          }
<a name="l1976"><span class="linenum">1976</span></a>      }
<a name="l1977"><span class="linenum">1977</span></a>  <span class="comment">    // Now add to that the site presets that people have saved</span>
<a name="l1978"><span class="linenum">1978</span></a>      <a class="var it34628" onMouseOver="hilite(34628)" onMouseOut="lolite()" onClick="logVariable('presets')" href="../../_variables/presets.html">$presets</a> = <a class="function" onClick="logFunction('data_get_available_site_presets')" href="../../_functions/data_get_available_site_presets.html" onMouseOver="funcPopup(event,'data_get_available_site_presets')">data_get_available_site_presets</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it34628" onMouseOver="hilite(34628)" onMouseOut="lolite()" onClick="logVariable('presets')" href="../../_variables/presets.html">$presets</a>);
<a name="l1979"><span class="linenum">1979</span></a>      return <a class="var it34628" onMouseOver="hilite(34628)" onMouseOut="lolite()" onClick="logVariable('presets')" href="../../_variables/presets.html">$presets</a>;
<a name="l1980"><span class="linenum">1980</span></a>  }
<a name="l1981"><span class="linenum">1981</span></a>  
<a name="l1982"><span class="linenum">1982</span></a>  <span class="comment">/**</span>
<a name="l1983"><span class="linenum">1983</span></a>  <span class="comment"> * Gets an array of all of the presets that users have saved to the site.</span>
<a name="l1984"><span class="linenum">1984</span></a>  <span class="comment"> *</span>
<a name="l1985"><span class="linenum">1985</span></a>  <span class="comment"> * @param stdClass $context The context that we are looking from.</span>
<a name="l1986"><span class="linenum">1986</span></a>  <span class="comment"> * @param array $presets</span>
<a name="l1987"><span class="linenum">1987</span></a>  <span class="comment"> * @return array An array of presets</span>
<a name="l1988"><span class="linenum">1988</span></a>  <span class="comment"> */</span>
<a name="l1989"><span class="linenum">1989</span></a>  function <a class="function" onClick="logFunction('data_get_available_site_presets')" href="../../_functions/data_get_available_site_presets.html" onMouseOver="funcPopup(event,'data_get_available_site_presets')">data_get_available_site_presets</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, array <a class="var it34628" onMouseOver="hilite(34628)" onMouseOut="lolite()" onClick="logVariable('presets')" href="../../_variables/presets.html">$presets</a>=array()) {
<a name="l1990"><span class="linenum">1990</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l1991"><span class="linenum">1991</span></a>  
<a name="l1992"><span class="linenum">1992</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1993"><span class="linenum">1993</span></a>      <a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="constant" onClick="logConstant('DATA_PRESET_CONTEXT')" href="../../_constants/DATA_PRESET_CONTEXT.html" onMouseOver="constPopup(event,'DATA_PRESET_CONTEXT')">DATA_PRESET_CONTEXT</a>, <a class="constant" onClick="logConstant('DATA_PRESET_COMPONENT')" href="../../_constants/DATA_PRESET_COMPONENT.html" onMouseOver="constPopup(event,'DATA_PRESET_COMPONENT')">DATA_PRESET_COMPONENT</a>, <a class="constant" onClick="logConstant('DATA_PRESET_FILEAREA')" href="../../_constants/DATA_PRESET_FILEAREA.html" onMouseOver="constPopup(event,'DATA_PRESET_FILEAREA')">DATA_PRESET_FILEAREA</a>);
<a name="l1994"><span class="linenum">1994</span></a>      <a class="var it26508" onMouseOver="hilite(26508)" onMouseOut="lolite()" onClick="logVariable('canviewall')" href="../../_variables/canviewall.html">$canviewall</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:viewalluserpresets', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l1995"><span class="linenum">1995</span></a>      if (empty(<a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a>)) {
<a name="l1996"><span class="linenum">1996</span></a>          return <a class="var it34628" onMouseOver="hilite(34628)" onMouseOut="lolite()" onClick="logVariable('presets')" href="../../_variables/presets.html">$presets</a>;
<a name="l1997"><span class="linenum">1997</span></a>      }
<a name="l1998"><span class="linenum">1998</span></a>      foreach (<a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> as <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l1999"><span class="linenum">1999</span></a>          if ((<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>() &amp;&amp; <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>()=='/') || !<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>() || (!<a class="var it26508" onMouseOver="hilite(26508)" onMouseOut="lolite()" onClick="logVariable('canviewall')" href="../../_variables/canviewall.html">$canviewall</a> &amp;&amp; <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_userid')" href="../../_functions/get_userid.html" onMouseOver="funcPopup(event,'get_userid')">get_userid</a>() != <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l2000"><span class="linenum">2000</span></a>              continue;
<a name="l2001"><span class="linenum">2001</span></a>          }
<a name="l2002"><span class="linenum">2002</span></a>          <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a> = new stdClass;
<a name="l2003"><span class="linenum">2003</span></a>          <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('path')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/path.html">path</a> = <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>();
<a name="l2004"><span class="linenum">2004</span></a>          <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('name')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('path')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/path.html">path</a>, '/');
<a name="l2005"><span class="linenum">2005</span></a>          <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('shortname')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/shortname.html">shortname</a> = <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('name')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l2006"><span class="linenum">2006</span></a>          <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('userid')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_userid')" href="../../_functions/get_userid.html" onMouseOver="funcPopup(event,'get_userid')">get_userid</a>();
<a name="l2007"><span class="linenum">2007</span></a>          <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('id')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_id')" href="../../_functions/get_id.html" onMouseOver="funcPopup(event,'get_id')">get_id</a>();
<a name="l2008"><span class="linenum">2008</span></a>          <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('storedfile')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/storedfile.html">storedfile</a> = <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>;
<a name="l2009"><span class="linenum">2009</span></a>          <a class="var it34628" onMouseOver="hilite(34628)" onMouseOut="lolite()" onClick="logVariable('presets')" href="../../_variables/presets.html">$presets</a>[] = <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>;
<a name="l2010"><span class="linenum">2010</span></a>      }
<a name="l2011"><span class="linenum">2011</span></a>      return <a class="var it34628" onMouseOver="hilite(34628)" onMouseOut="lolite()" onClick="logVariable('presets')" href="../../_variables/presets.html">$presets</a>;
<a name="l2012"><span class="linenum">2012</span></a>  }
<a name="l2013"><span class="linenum">2013</span></a>  
<a name="l2014"><span class="linenum">2014</span></a>  <span class="comment">/**</span>
<a name="l2015"><span class="linenum">2015</span></a>  <span class="comment"> * Deletes a saved preset.</span>
<a name="l2016"><span class="linenum">2016</span></a>  <span class="comment"> *</span>
<a name="l2017"><span class="linenum">2017</span></a>  <span class="comment"> * @param string $name</span>
<a name="l2018"><span class="linenum">2018</span></a>  <span class="comment"> * @return bool</span>
<a name="l2019"><span class="linenum">2019</span></a>  <span class="comment"> */</span>
<a name="l2020"><span class="linenum">2020</span></a>  function <a class="function" onClick="logFunction('data_delete_site_preset')" href="../../_functions/data_delete_site_preset.html" onMouseOver="funcPopup(event,'data_delete_site_preset')">data_delete_site_preset</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) {
<a name="l2021"><span class="linenum">2021</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2022"><span class="linenum">2022</span></a>  
<a name="l2023"><span class="linenum">2023</span></a>      <a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_directory_files')" href="../../_functions/get_directory_files.html" onMouseOver="funcPopup(event,'get_directory_files')">get_directory_files</a>(<a class="constant" onClick="logConstant('DATA_PRESET_CONTEXT')" href="../../_constants/DATA_PRESET_CONTEXT.html" onMouseOver="constPopup(event,'DATA_PRESET_CONTEXT')">DATA_PRESET_CONTEXT</a>, <a class="constant" onClick="logConstant('DATA_PRESET_COMPONENT')" href="../../_constants/DATA_PRESET_COMPONENT.html" onMouseOver="constPopup(event,'DATA_PRESET_COMPONENT')">DATA_PRESET_COMPONENT</a>, <a class="constant" onClick="logConstant('DATA_PRESET_FILEAREA')" href="../../_constants/DATA_PRESET_FILEAREA.html" onMouseOver="constPopup(event,'DATA_PRESET_FILEAREA')">DATA_PRESET_FILEAREA</a>, 0, '/'.<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>.'/');
<a name="l2024"><span class="linenum">2024</span></a>      if (!empty(<a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a>)) {
<a name="l2025"><span class="linenum">2025</span></a>          foreach (<a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> as <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l2026"><span class="linenum">2026</span></a>              <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l2027"><span class="linenum">2027</span></a>          }
<a name="l2028"><span class="linenum">2028</span></a>      }
<a name="l2029"><span class="linenum">2029</span></a>  
<a name="l2030"><span class="linenum">2030</span></a>      <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="constant" onClick="logConstant('DATA_PRESET_CONTEXT')" href="../../_constants/DATA_PRESET_CONTEXT.html" onMouseOver="constPopup(event,'DATA_PRESET_CONTEXT')">DATA_PRESET_CONTEXT</a>, <a class="constant" onClick="logConstant('DATA_PRESET_COMPONENT')" href="../../_constants/DATA_PRESET_COMPONENT.html" onMouseOver="constPopup(event,'DATA_PRESET_COMPONENT')">DATA_PRESET_COMPONENT</a>, <a class="constant" onClick="logConstant('DATA_PRESET_FILEAREA')" href="../../_constants/DATA_PRESET_FILEAREA.html" onMouseOver="constPopup(event,'DATA_PRESET_FILEAREA')">DATA_PRESET_FILEAREA</a>, 0, '/'.<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>.'/', '.');
<a name="l2031"><span class="linenum">2031</span></a>      if (!empty(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>)) {
<a name="l2032"><span class="linenum">2032</span></a>          <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l2033"><span class="linenum">2033</span></a>      }
<a name="l2034"><span class="linenum">2034</span></a>      return true;
<a name="l2035"><span class="linenum">2035</span></a>  }
<a name="l2036"><span class="linenum">2036</span></a>  
<a name="l2037"><span class="linenum">2037</span></a>  <span class="comment">/**</span>
<a name="l2038"><span class="linenum">2038</span></a>  <span class="comment"> * Prints the heads for a page</span>
<a name="l2039"><span class="linenum">2039</span></a>  <span class="comment"> *</span>
<a name="l2040"><span class="linenum">2040</span></a>  <span class="comment"> * @param stdClass $course</span>
<a name="l2041"><span class="linenum">2041</span></a>  <span class="comment"> * @param stdClass $cm</span>
<a name="l2042"><span class="linenum">2042</span></a>  <span class="comment"> * @param stdClass $data</span>
<a name="l2043"><span class="linenum">2043</span></a>  <span class="comment"> * @param string $currenttab</span>
<a name="l2044"><span class="linenum">2044</span></a>  <span class="comment"> */</span>
<a name="l2045"><span class="linenum">2045</span></a>  function <a class="function" onClick="logFunction('data_print_header')" href="../../_functions/data_print_header.html" onMouseOver="funcPopup(event,'data_print_header')">data_print_header</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it622" onMouseOver="hilite(622)" onMouseOut="lolite()" onClick="logVariable('currenttab')" href="../../_variables/currenttab.html">$currenttab</a>='') {
<a name="l2046"><span class="linenum">2046</span></a>  
<a name="l2047"><span class="linenum">2047</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it35087" onMouseOver="hilite(35087)" onMouseOut="lolite()" onClick="logVariable('displaynoticegood')" href="../../_variables/displaynoticegood.html">$displaynoticegood</a>, <a class="var it35088" onMouseOver="hilite(35088)" onMouseOut="lolite()" onClick="logVariable('displaynoticebad')" href="../../_variables/displaynoticebad.html">$displaynoticebad</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l2048"><span class="linenum">2048</span></a>  
<a name="l2049"><span class="linenum">2049</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l2050"><span class="linenum">2050</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l2051"><span class="linenum">2051</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>), 2);
<a name="l2052"><span class="linenum">2052</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="function" onClick="logFunction('format_module_intro')" href="../../_functions/format_module_intro.html" onMouseOver="funcPopup(event,'format_module_intro')">format_module_intro</a>('data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'generalbox', 'intro');
<a name="l2053"><span class="linenum">2053</span></a>  
<a name="l2054"><span class="linenum">2054</span></a>  <span class="comment">    // Groups needed for Add entry tab</span>
<a name="l2055"><span class="linenum">2055</span></a>      <a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l2056"><span class="linenum">2056</span></a>      <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l2057"><span class="linenum">2057</span></a>  
<a name="l2058"><span class="linenum">2058</span></a>  <span class="comment">    // Print the tabs</span>
<a name="l2059"><span class="linenum">2059</span></a>  
<a name="l2060"><span class="linenum">2060</span></a>      if (<a class="var it622" onMouseOver="hilite(622)" onMouseOut="lolite()" onClick="logVariable('currenttab')" href="../../_variables/currenttab.html">$currenttab</a>) {
<a name="l2061"><span class="linenum">2061</span></a>          <span class="keyword">include</span> <a class="filename" href="../../mod/feedback/tabs.php.html" onMouseOver="reqPopup(event, 'tabs.php', '../../mod/feedback/tabs.php')">('tabs.php')</a>;
<a name="l2062"><span class="linenum">2062</span></a>      }
<a name="l2063"><span class="linenum">2063</span></a>  
<a name="l2064"><span class="linenum">2064</span></a>  <span class="comment">    // Print any notices</span>
<a name="l2065"><span class="linenum">2065</span></a>  
<a name="l2066"><span class="linenum">2066</span></a>      if (!empty(<a class="var it35087" onMouseOver="hilite(35087)" onMouseOut="lolite()" onClick="logVariable('displaynoticegood')" href="../../_variables/displaynoticegood.html">$displaynoticegood</a>)) {
<a name="l2067"><span class="linenum">2067</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it35087" onMouseOver="hilite(35087)" onMouseOut="lolite()" onClick="logVariable('displaynoticegood')" href="../../_variables/displaynoticegood.html">$displaynoticegood</a>, 'notifysuccess');    <span class="comment">// good (usually green)</span>
<a name="l2068"><span class="linenum">2068</span></a>      } else if (!empty(<a class="var it35088" onMouseOver="hilite(35088)" onMouseOut="lolite()" onClick="logVariable('displaynoticebad')" href="../../_variables/displaynoticebad.html">$displaynoticebad</a>)) {
<a name="l2069"><span class="linenum">2069</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it35088" onMouseOver="hilite(35088)" onMouseOut="lolite()" onClick="logVariable('displaynoticebad')" href="../../_variables/displaynoticebad.html">$displaynoticebad</a>);                     <span class="comment">// bad (usuually red)</span>
<a name="l2070"><span class="linenum">2070</span></a>      }
<a name="l2071"><span class="linenum">2071</span></a>  }
<a name="l2072"><span class="linenum">2072</span></a>  
<a name="l2073"><span class="linenum">2073</span></a>  <span class="comment">/**</span>
<a name="l2074"><span class="linenum">2074</span></a>  <span class="comment"> * Can user add more entries?</span>
<a name="l2075"><span class="linenum">2075</span></a>  <span class="comment"> *</span>
<a name="l2076"><span class="linenum">2076</span></a>  <span class="comment"> * @param object $data</span>
<a name="l2077"><span class="linenum">2077</span></a>  <span class="comment"> * @param mixed $currentgroup</span>
<a name="l2078"><span class="linenum">2078</span></a>  <span class="comment"> * @param int $groupmode</span>
<a name="l2079"><span class="linenum">2079</span></a>  <span class="comment"> * @param stdClass $context</span>
<a name="l2080"><span class="linenum">2080</span></a>  <span class="comment"> * @return bool</span>
<a name="l2081"><span class="linenum">2081</span></a>  <span class="comment"> */</span>
<a name="l2082"><span class="linenum">2082</span></a>  function <a class="function" onClick="logFunction('data_user_can_add_entry')" href="../../_functions/data_user_can_add_entry.html" onMouseOver="funcPopup(event,'data_user_can_add_entry')">data_user_can_add_entry</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = null) {
<a name="l2083"><span class="linenum">2083</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l2084"><span class="linenum">2084</span></a>  
<a name="l2085"><span class="linenum">2085</span></a>      if (empty(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2086"><span class="linenum">2086</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2087"><span class="linenum">2087</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2088"><span class="linenum">2088</span></a>      }
<a name="l2089"><span class="linenum">2089</span></a>  
<a name="l2090"><span class="linenum">2090</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:manageentries', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2091"><span class="linenum">2091</span></a>  <span class="comment">        // no entry limits apply if user can manage</span>
<a name="l2092"><span class="linenum">2092</span></a>  
<a name="l2093"><span class="linenum">2093</span></a>      } else if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:writeentry', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2094"><span class="linenum">2094</span></a>          return false;
<a name="l2095"><span class="linenum">2095</span></a>  
<a name="l2096"><span class="linenum">2096</span></a>      } else if (<a class="function" onClick="logFunction('data_atmaxentries')" href="../../_functions/data_atmaxentries.html" onMouseOver="funcPopup(event,'data_atmaxentries')">data_atmaxentries</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l2097"><span class="linenum">2097</span></a>          return false;
<a name="l2098"><span class="linenum">2098</span></a>      } else if (<a class="function" onClick="logFunction('data_in_readonly_period')" href="../../_functions/data_in_readonly_period.html" onMouseOver="funcPopup(event,'data_in_readonly_period')">data_in_readonly_period</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l2099"><span class="linenum">2099</span></a>  <span class="comment">        // Check whether we're in a read-only period</span>
<a name="l2100"><span class="linenum">2100</span></a>          return false;
<a name="l2101"><span class="linenum">2101</span></a>      }
<a name="l2102"><span class="linenum">2102</span></a>  
<a name="l2103"><span class="linenum">2103</span></a>      if (!<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> or <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2104"><span class="linenum">2104</span></a>          return true;
<a name="l2105"><span class="linenum">2105</span></a>      }
<a name="l2106"><span class="linenum">2106</span></a>  
<a name="l2107"><span class="linenum">2107</span></a>      if (<a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>) {
<a name="l2108"><span class="linenum">2108</span></a>          return <a class="function" onClick="logFunction('groups_is_member')" href="../../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>);
<a name="l2109"><span class="linenum">2109</span></a>      } else {
<a name="l2110"><span class="linenum">2110</span></a>  <span class="comment">        //else it might be group 0 in visible mode</span>
<a name="l2111"><span class="linenum">2111</span></a>          if (<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> == <a class="constant" onClick="logConstant('VISIBLEGROUPS')" href="../../_constants/VISIBLEGROUPS.html" onMouseOver="constPopup(event,'VISIBLEGROUPS')">VISIBLEGROUPS</a>){
<a name="l2112"><span class="linenum">2112</span></a>              return true;
<a name="l2113"><span class="linenum">2113</span></a>          } else {
<a name="l2114"><span class="linenum">2114</span></a>              return false;
<a name="l2115"><span class="linenum">2115</span></a>          }
<a name="l2116"><span class="linenum">2116</span></a>      }
<a name="l2117"><span class="linenum">2117</span></a>  }
<a name="l2118"><span class="linenum">2118</span></a>  
<a name="l2119"><span class="linenum">2119</span></a>  <span class="comment">/**</span>
<a name="l2120"><span class="linenum">2120</span></a>  <span class="comment"> * Check whether the specified database activity is currently in a read-only period</span>
<a name="l2121"><span class="linenum">2121</span></a>  <span class="comment"> *</span>
<a name="l2122"><span class="linenum">2122</span></a>  <span class="comment"> * @param object $data</span>
<a name="l2123"><span class="linenum">2123</span></a>  <span class="comment"> * @return bool returns true if the time fields in $data indicate a read-only period; false otherwise</span>
<a name="l2124"><span class="linenum">2124</span></a>  <span class="comment"> */</span>
<a name="l2125"><span class="linenum">2125</span></a>  function <a class="function" onClick="logFunction('data_in_readonly_period')" href="../../_functions/data_in_readonly_period.html" onMouseOver="funcPopup(event,'data_in_readonly_period')">data_in_readonly_period</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l2126"><span class="linenum">2126</span></a>      <a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2127"><span class="linenum">2127</span></a>      if (!<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeviewfrom')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timeviewfrom.html">timeviewfrom</a> &amp;&amp; !<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeviewto')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timeviewto.html">timeviewto</a>) {
<a name="l2128"><span class="linenum">2128</span></a>          return false;
<a name="l2129"><span class="linenum">2129</span></a>      } else if ((<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeviewfrom')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timeviewfrom.html">timeviewfrom</a> &amp;&amp; <a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a> &lt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeviewfrom')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timeviewfrom.html">timeviewfrom</a>) || (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeviewto')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timeviewto.html">timeviewto</a> &amp;&amp; <a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a> &gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeviewto')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timeviewto.html">timeviewto</a>)) {
<a name="l2130"><span class="linenum">2130</span></a>          return false;
<a name="l2131"><span class="linenum">2131</span></a>      }
<a name="l2132"><span class="linenum">2132</span></a>      return true;
<a name="l2133"><span class="linenum">2133</span></a>  }
<a name="l2134"><span class="linenum">2134</span></a>  
<a name="l2135"><span class="linenum">2135</span></a>  <span class="comment">/**</span>
<a name="l2136"><span class="linenum">2136</span></a>  <span class="comment"> * @return bool</span>
<a name="l2137"><span class="linenum">2137</span></a>  <span class="comment"> */</span>
<a name="l2138"><span class="linenum">2138</span></a>  function <a class="function" onClick="logFunction('is_directory_a_preset')" href="../../_functions/is_directory_a_preset.html" onMouseOver="funcPopup(event,'is_directory_a_preset')">is_directory_a_preset</a>(<a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>) {
<a name="l2139"><span class="linenum">2139</span></a>      <a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a> = <a class="phpfunction" onClick="logFunction('rtrim')" href="../../_functions/rtrim.html" onMouseOver="phpfuncPopup(event,'rtrim')">rtrim</a>(<a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>, '/\\') . '/';
<a name="l2140"><span class="linenum">2140</span></a>      <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>.'singletemplate.html') &amp;&amp;
<a name="l2141"><span class="linenum">2141</span></a>                <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>.'listtemplate.html') &amp;&amp;
<a name="l2142"><span class="linenum">2142</span></a>                <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>.'listtemplateheader.html') &amp;&amp;
<a name="l2143"><span class="linenum">2143</span></a>                <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>.'listtemplatefooter.html') &amp;&amp;
<a name="l2144"><span class="linenum">2144</span></a>                <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>.'addtemplate.html') &amp;&amp;
<a name="l2145"><span class="linenum">2145</span></a>                <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>.'rsstemplate.html') &amp;&amp;
<a name="l2146"><span class="linenum">2146</span></a>                <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>.'rsstitletemplate.html') &amp;&amp;
<a name="l2147"><span class="linenum">2147</span></a>                <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>.'csstemplate.css') &amp;&amp;
<a name="l2148"><span class="linenum">2148</span></a>                <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>.'jstemplate.js') &amp;&amp;
<a name="l2149"><span class="linenum">2149</span></a>                <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>.'preset.xml');
<a name="l2150"><span class="linenum">2150</span></a>  
<a name="l2151"><span class="linenum">2151</span></a>      return <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>;
<a name="l2152"><span class="linenum">2152</span></a>  }
<a name="l2153"><span class="linenum">2153</span></a>  
<a name="l2154"><span class="linenum">2154</span></a>  <span class="comment">/**</span>
<a name="l2155"><span class="linenum">2155</span></a>  <span class="comment"> * Abstract class used for data preset importers</span>
<a name="l2156"><span class="linenum">2156</span></a>  <span class="comment"> */</span>
<a name="l2157"><span class="linenum">2157</span></a>  abstract class data_preset_importer {
<a name="l2158"><span class="linenum">2158</span></a>  
<a name="l2159"><span class="linenum">2159</span></a>      protected <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>;
<a name="l2160"><span class="linenum">2160</span></a>      protected <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>;
<a name="l2161"><span class="linenum">2161</span></a>      protected <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>;
<a name="l2162"><span class="linenum">2162</span></a>      protected <a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>;
<a name="l2163"><span class="linenum">2163</span></a>  
<a name="l2164"><span class="linenum">2164</span></a>      <span class="comment">/**</span>
<a name="l2165"><span class="linenum">2165</span></a>  <span class="comment">     * Constructor</span>
<a name="l2166"><span class="linenum">2166</span></a>  <span class="comment">     *</span>
<a name="l2167"><span class="linenum">2167</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l2168"><span class="linenum">2168</span></a>  <span class="comment">     * @param stdClass $cm</span>
<a name="l2169"><span class="linenum">2169</span></a>  <span class="comment">     * @param stdClass $module</span>
<a name="l2170"><span class="linenum">2170</span></a>  <span class="comment">     * @param string $directory</span>
<a name="l2171"><span class="linenum">2171</span></a>  <span class="comment">     */</span>
<a name="l2172"><span class="linenum">2172</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>, <a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>) {
<a name="l2173"><span class="linenum">2173</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/course.html">course</a> = <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>;
<a name="l2174"><span class="linenum">2174</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cm')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>;
<a name="l2175"><span class="linenum">2175</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('module')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/module.html">module</a> = <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>;
<a name="l2176"><span class="linenum">2176</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a> = <a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../_variables/directory.html">$directory</a>;
<a name="l2177"><span class="linenum">2177</span></a>      }
<a name="l2178"><span class="linenum">2178</span></a>  
<a name="l2179"><span class="linenum">2179</span></a>      <span class="comment">/**</span>
<a name="l2180"><span class="linenum">2180</span></a>  <span class="comment">     * Returns the name of the directory the preset is located in</span>
<a name="l2181"><span class="linenum">2181</span></a>  <span class="comment">     * @return string</span>
<a name="l2182"><span class="linenum">2182</span></a>  <span class="comment">     */</span>
<a name="l2183"><span class="linenum">2183</span></a>      public function <a class="function" onClick="logFunction('get_directory')" href="../../_functions/get_directory.html" onMouseOver="funcPopup(event,'get_directory')">get_directory</a>() {
<a name="l2184"><span class="linenum">2184</span></a>          return <a class="phpfunction" onClick="logFunction('basename')" href="../../_functions/basename.html" onMouseOver="phpfuncPopup(event,'basename')">basename</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>);
<a name="l2185"><span class="linenum">2185</span></a>      }
<a name="l2186"><span class="linenum">2186</span></a>  
<a name="l2187"><span class="linenum">2187</span></a>      <span class="comment">/**</span>
<a name="l2188"><span class="linenum">2188</span></a>  <span class="comment">     * Retreive the contents of a file. That file may either be in a conventional directory of the Moodle file storage</span>
<a name="l2189"><span class="linenum">2189</span></a>  <span class="comment">     * @param file_storage $filestorage. should be null if using a conventional directory</span>
<a name="l2190"><span class="linenum">2190</span></a>  <span class="comment">     * @param stored_file $fileobj the directory to look in. null if using a conventional directory</span>
<a name="l2191"><span class="linenum">2191</span></a>  <span class="comment">     * @param string $dir the directory to look in. null if using the Moodle file storage</span>
<a name="l2192"><span class="linenum">2192</span></a>  <span class="comment">     * @param string $filename the name of the file we want</span>
<a name="l2193"><span class="linenum">2193</span></a>  <span class="comment">     * @return string the contents of the file or null if the file doesn't exist.</span>
<a name="l2194"><span class="linenum">2194</span></a>  <span class="comment">     */</span>
<a name="l2195"><span class="linenum">2195</span></a>      public function <a class="function" onClick="logFunction('data_preset_get_file_contents')" href="../../_functions/data_preset_get_file_contents.html" onMouseOver="funcPopup(event,'data_preset_get_file_contents')">data_preset_get_file_contents</a>(&amp;<a class="var it35089" onMouseOver="hilite(35089)" onMouseOut="lolite()" onClick="logVariable('filestorage')" href="../../_variables/filestorage.html">$filestorage</a>, &amp;<a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>, <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>, <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>) {
<a name="l2196"><span class="linenum">2196</span></a>          if(empty(<a class="var it35089" onMouseOver="hilite(35089)" onMouseOut="lolite()" onClick="logVariable('filestorage')" href="../../_variables/filestorage.html">$filestorage</a>) || empty(<a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>)) {
<a name="l2197"><span class="linenum">2197</span></a>              if (<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>, -1)!='/') {
<a name="l2198"><span class="linenum">2198</span></a>                  <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a> .= '/';
<a name="l2199"><span class="linenum">2199</span></a>              }
<a name="l2200"><span class="linenum">2200</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>.<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>)) {
<a name="l2201"><span class="linenum">2201</span></a>                  return <a class="phpfunction" onClick="logFunction('file_get_contents')" href="../../_functions/file_get_contents.html" onMouseOver="phpfuncPopup(event,'file_get_contents')">file_get_contents</a>(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>.<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>);
<a name="l2202"><span class="linenum">2202</span></a>              } else {
<a name="l2203"><span class="linenum">2203</span></a>                  return null;
<a name="l2204"><span class="linenum">2204</span></a>              }
<a name="l2205"><span class="linenum">2205</span></a>          } else {
<a name="l2206"><span class="linenum">2206</span></a>              if (<a class="var it35089" onMouseOver="hilite(35089)" onMouseOut="lolite()" onClick="logVariable('filestorage')" href="../../_variables/filestorage.html">$filestorage</a>-&gt;<a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="constant" onClick="logConstant('DATA_PRESET_CONTEXT')" href="../../_constants/DATA_PRESET_CONTEXT.html" onMouseOver="constPopup(event,'DATA_PRESET_CONTEXT')">DATA_PRESET_CONTEXT</a>, <a class="constant" onClick="logConstant('DATA_PRESET_COMPONENT')" href="../../_constants/DATA_PRESET_COMPONENT.html" onMouseOver="constPopup(event,'DATA_PRESET_COMPONENT')">DATA_PRESET_COMPONENT</a>, <a class="constant" onClick="logConstant('DATA_PRESET_FILEAREA')" href="../../_constants/DATA_PRESET_FILEAREA.html" onMouseOver="constPopup(event,'DATA_PRESET_FILEAREA')">DATA_PRESET_FILEAREA</a>, 0, <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>(), <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>)) {
<a name="l2207"><span class="linenum">2207</span></a>                  <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it35089" onMouseOver="hilite(35089)" onMouseOut="lolite()" onClick="logVariable('filestorage')" href="../../_variables/filestorage.html">$filestorage</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="constant" onClick="logConstant('DATA_PRESET_CONTEXT')" href="../../_constants/DATA_PRESET_CONTEXT.html" onMouseOver="constPopup(event,'DATA_PRESET_CONTEXT')">DATA_PRESET_CONTEXT</a>, <a class="constant" onClick="logConstant('DATA_PRESET_COMPONENT')" href="../../_constants/DATA_PRESET_COMPONENT.html" onMouseOver="constPopup(event,'DATA_PRESET_COMPONENT')">DATA_PRESET_COMPONENT</a>, <a class="constant" onClick="logConstant('DATA_PRESET_FILEAREA')" href="../../_constants/DATA_PRESET_FILEAREA.html" onMouseOver="constPopup(event,'DATA_PRESET_FILEAREA')">DATA_PRESET_FILEAREA</a>, 0, <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>(), <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>);
<a name="l2208"><span class="linenum">2208</span></a>                  return <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_content')" href="../../_functions/get_content.html" onMouseOver="funcPopup(event,'get_content')">get_content</a>();
<a name="l2209"><span class="linenum">2209</span></a>              } else {
<a name="l2210"><span class="linenum">2210</span></a>                  return null;
<a name="l2211"><span class="linenum">2211</span></a>              }
<a name="l2212"><span class="linenum">2212</span></a>          }
<a name="l2213"><span class="linenum">2213</span></a>  
<a name="l2214"><span class="linenum">2214</span></a>      }
<a name="l2215"><span class="linenum">2215</span></a>      <span class="comment">/**</span>
<a name="l2216"><span class="linenum">2216</span></a>  <span class="comment">     * Gets the preset settings</span>
<a name="l2217"><span class="linenum">2217</span></a>  <span class="comment">     * @global moodle_database $DB</span>
<a name="l2218"><span class="linenum">2218</span></a>  <span class="comment">     * @return stdClass</span>
<a name="l2219"><span class="linenum">2219</span></a>  <span class="comment">     */</span>
<a name="l2220"><span class="linenum">2220</span></a>      public function <a class="function" onClick="logFunction('get_preset_settings')" href="../../_functions/get_preset_settings.html" onMouseOver="funcPopup(event,'get_preset_settings')">get_preset_settings</a>() {
<a name="l2221"><span class="linenum">2221</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2222"><span class="linenum">2222</span></a>  
<a name="l2223"><span class="linenum">2223</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a> = null;
<a name="l2224"><span class="linenum">2224</span></a>          if (!<a class="function" onClick="logFunction('is_directory_a_preset')" href="../../_functions/is_directory_a_preset.html" onMouseOver="funcPopup(event,'is_directory_a_preset')">is_directory_a_preset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>)) {
<a name="l2225"><span class="linenum">2225</span></a>  <span class="comment">            //maybe the user requested a preset stored in the Moodle file storage</span>
<a name="l2226"><span class="linenum">2226</span></a>  
<a name="l2227"><span class="linenum">2227</span></a>              <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2228"><span class="linenum">2228</span></a>              <a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="constant" onClick="logConstant('DATA_PRESET_CONTEXT')" href="../../_constants/DATA_PRESET_CONTEXT.html" onMouseOver="constPopup(event,'DATA_PRESET_CONTEXT')">DATA_PRESET_CONTEXT</a>, <a class="constant" onClick="logConstant('DATA_PRESET_COMPONENT')" href="../../_constants/DATA_PRESET_COMPONENT.html" onMouseOver="constPopup(event,'DATA_PRESET_COMPONENT')">DATA_PRESET_COMPONENT</a>, <a class="constant" onClick="logConstant('DATA_PRESET_FILEAREA')" href="../../_constants/DATA_PRESET_FILEAREA.html" onMouseOver="constPopup(event,'DATA_PRESET_FILEAREA')">DATA_PRESET_FILEAREA</a>);
<a name="l2229"><span class="linenum">2229</span></a>  
<a name="l2230"><span class="linenum">2230</span></a>  <span class="comment">            //preset name to find will be the final element of the directory</span>
<a name="l2231"><span class="linenum">2231</span></a>              <a class="var it35090" onMouseOver="hilite(35090)" onMouseOut="lolite()" onClick="logVariable('explodeddirectory')" href="../../_variables/explodeddirectory.html">$explodeddirectory</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('/', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>);
<a name="l2232"><span class="linenum">2232</span></a>              <a class="var it35091" onMouseOver="hilite(35091)" onMouseOut="lolite()" onClick="logVariable('presettofind')" href="../../_variables/presettofind.html">$presettofind</a> = <a class="phpfunction" onClick="logFunction('end')" href="../../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it35090" onMouseOver="hilite(35090)" onMouseOut="lolite()" onClick="logVariable('explodeddirectory')" href="../../_variables/explodeddirectory.html">$explodeddirectory</a>);
<a name="l2233"><span class="linenum">2233</span></a>  
<a name="l2234"><span class="linenum">2234</span></a>  <span class="comment">            //now go through the available files available and see if we can find it</span>
<a name="l2235"><span class="linenum">2235</span></a>              foreach (<a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> as <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l2236"><span class="linenum">2236</span></a>                  if ((<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>() &amp;&amp; <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>()=='/') || !<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l2237"><span class="linenum">2237</span></a>                      continue;
<a name="l2238"><span class="linenum">2238</span></a>                  }
<a name="l2239"><span class="linenum">2239</span></a>                  <a class="var it21174" onMouseOver="hilite(21174)" onMouseOut="lolite()" onClick="logVariable('presetname')" href="../../_variables/presetname.html">$presetname</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>(), '/');
<a name="l2240"><span class="linenum">2240</span></a>                  if (<a class="var it21174" onMouseOver="hilite(21174)" onMouseOut="lolite()" onClick="logVariable('presetname')" href="../../_variables/presetname.html">$presetname</a>==<a class="var it35091" onMouseOver="hilite(35091)" onMouseOut="lolite()" onClick="logVariable('presettofind')" href="../../_variables/presettofind.html">$presettofind</a>) {
<a name="l2241"><span class="linenum">2241</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a> = <a class="var it21174" onMouseOver="hilite(21174)" onMouseOut="lolite()" onClick="logVariable('presetname')" href="../../_variables/presetname.html">$presetname</a>;
<a name="l2242"><span class="linenum">2242</span></a>                      <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a> = <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>;
<a name="l2243"><span class="linenum">2243</span></a>                  }
<a name="l2244"><span class="linenum">2244</span></a>              }
<a name="l2245"><span class="linenum">2245</span></a>  
<a name="l2246"><span class="linenum">2246</span></a>              if (empty(<a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>)) {
<a name="l2247"><span class="linenum">2247</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidpreset', 'data', '', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>);
<a name="l2248"><span class="linenum">2248</span></a>              }
<a name="l2249"><span class="linenum">2249</span></a>          }
<a name="l2250"><span class="linenum">2250</span></a>  
<a name="l2251"><span class="linenum">2251</span></a>          <a class="var it35092" onMouseOver="hilite(35092)" onMouseOut="lolite()" onClick="logVariable('allowed_settings')" href="../../_variables/allowed_settings.html">$allowed_settings</a> = array(
<a name="l2252"><span class="linenum">2252</span></a>              'intro',
<a name="l2253"><span class="linenum">2253</span></a>              'comments',
<a name="l2254"><span class="linenum">2254</span></a>              'requiredentries',
<a name="l2255"><span class="linenum">2255</span></a>              'requiredentriestoview',
<a name="l2256"><span class="linenum">2256</span></a>              'maxentries',
<a name="l2257"><span class="linenum">2257</span></a>              'rssarticles',
<a name="l2258"><span class="linenum">2258</span></a>              'approval',
<a name="l2259"><span class="linenum">2259</span></a>              'defaultsortdir',
<a name="l2260"><span class="linenum">2260</span></a>              'defaultsort');
<a name="l2261"><span class="linenum">2261</span></a>  
<a name="l2262"><span class="linenum">2262</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = new stdClass;
<a name="l2263"><span class="linenum">2263</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a> = new stdClass;
<a name="l2264"><span class="linenum">2264</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('importfields')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/importfields.html">importfields</a> = array();
<a name="l2265"><span class="linenum">2265</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('currentfields')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/currentfields.html">currentfields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('data_fields', array('dataid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('module')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/module.html">module</a>-&gt;id));
<a name="l2266"><span class="linenum">2266</span></a>          if (!<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('currentfields')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/currentfields.html">currentfields</a>) {
<a name="l2267"><span class="linenum">2267</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('currentfields')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/currentfields.html">currentfields</a> = array();
<a name="l2268"><span class="linenum">2268</span></a>          }
<a name="l2269"><span class="linenum">2269</span></a>  
<a name="l2270"><span class="linenum">2270</span></a>  
<a name="l2271"><span class="linenum">2271</span></a>  <span class="comment">        /* Grab XML */</span>
<a name="l2272"><span class="linenum">2272</span></a>          <a class="var it35093" onMouseOver="hilite(35093)" onMouseOut="lolite()" onClick="logVariable('presetxml')" href="../../_variables/presetxml.html">$presetxml</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('data_preset_get_file_contents')" href="../../_functions/data_preset_get_file_contents.html" onMouseOver="funcPopup(event,'data_preset_get_file_contents')">data_preset_get_file_contents</a>(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>, <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>,'preset.xml');
<a name="l2273"><span class="linenum">2273</span></a>          <a class="var it35094" onMouseOver="hilite(35094)" onMouseOut="lolite()" onClick="logVariable('parsedxml')" href="../../_variables/parsedxml.html">$parsedxml</a> = <a class="function" onClick="logFunction('xmlize')" href="../../_functions/xmlize.html" onMouseOver="funcPopup(event,'xmlize')">xmlize</a>(<a class="var it35093" onMouseOver="hilite(35093)" onMouseOut="lolite()" onClick="logVariable('presetxml')" href="../../_variables/presetxml.html">$presetxml</a>, 0);
<a name="l2274"><span class="linenum">2274</span></a>  
<a name="l2275"><span class="linenum">2275</span></a>  <span class="comment">        /* First, do settings. Put in user friendly array. */</span>
<a name="l2276"><span class="linenum">2276</span></a>          <a class="var it35095" onMouseOver="hilite(35095)" onMouseOut="lolite()" onClick="logVariable('settingsarray')" href="../../_variables/settingsarray.html">$settingsarray</a> = <a class="var it35094" onMouseOver="hilite(35094)" onMouseOut="lolite()" onClick="logVariable('parsedxml')" href="../../_variables/parsedxml.html">$parsedxml</a>['preset']['#']['settings'][0]['#'];
<a name="l2277"><span class="linenum">2277</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a> = new StdClass();
<a name="l2278"><span class="linenum">2278</span></a>          foreach (<a class="var it35095" onMouseOver="hilite(35095)" onMouseOut="lolite()" onClick="logVariable('settingsarray')" href="../../_variables/settingsarray.html">$settingsarray</a> as <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../_variables/setting.html">$setting</a> =&gt; <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l2279"><span class="linenum">2279</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) || !<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../_variables/setting.html">$setting</a>, <a class="var it35092" onMouseOver="hilite(35092)" onMouseOut="lolite()" onClick="logVariable('allowed_settings')" href="../../_variables/allowed_settings.html">$allowed_settings</a>)) {
<a name="l2280"><span class="linenum">2280</span></a>  <span class="comment">                // unsupported setting</span>
<a name="l2281"><span class="linenum">2281</span></a>                  continue;
<a name="l2282"><span class="linenum">2282</span></a>              }
<a name="l2283"><span class="linenum">2283</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a>-&gt;<a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../_variables/setting.html">$setting</a> = <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>[0]['#'];
<a name="l2284"><span class="linenum">2284</span></a>          }
<a name="l2285"><span class="linenum">2285</span></a>  
<a name="l2286"><span class="linenum">2286</span></a>  <span class="comment">        /* Now work out fields to user friendly array */</span>
<a name="l2287"><span class="linenum">2287</span></a>          <a class="var it35096" onMouseOver="hilite(35096)" onMouseOut="lolite()" onClick="logVariable('fieldsarray')" href="../../_variables/fieldsarray.html">$fieldsarray</a> = <a class="var it35094" onMouseOver="hilite(35094)" onMouseOut="lolite()" onClick="logVariable('parsedxml')" href="../../_variables/parsedxml.html">$parsedxml</a>['preset']['#']['field'];
<a name="l2288"><span class="linenum">2288</span></a>          foreach (<a class="var it35096" onMouseOver="hilite(35096)" onMouseOut="lolite()" onClick="logVariable('fieldsarray')" href="../../_variables/fieldsarray.html">$fieldsarray</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l2289"><span class="linenum">2289</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>)) {
<a name="l2290"><span class="linenum">2290</span></a>                  continue;
<a name="l2291"><span class="linenum">2291</span></a>              }
<a name="l2292"><span class="linenum">2292</span></a>              <a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../../_variables/f.html">$f</a> = new StdClass();
<a name="l2293"><span class="linenum">2293</span></a>              foreach (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>['#'] as <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a> =&gt; <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l2294"><span class="linenum">2294</span></a>                  if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>)) {
<a name="l2295"><span class="linenum">2295</span></a>                      continue;
<a name="l2296"><span class="linenum">2296</span></a>                  }
<a name="l2297"><span class="linenum">2297</span></a>                  <a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../../_variables/f.html">$f</a>-&gt;<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a> = <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>[0]['#'];
<a name="l2298"><span class="linenum">2298</span></a>              }
<a name="l2299"><span class="linenum">2299</span></a>              <a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('dataid')" class="var it39911" onMouseOver="hilite(39911)" onMouseOut="lolite()" href="../../_variables/dataid.html">dataid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('module')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/module.html">module</a>-&gt;id;
<a name="l2300"><span class="linenum">2300</span></a>              <a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('type')" class="var it39911" onMouseOver="hilite(39911)" onMouseOut="lolite()" href="../../_variables/type.html">type</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../../_variables/f.html">$f</a>-&gt;<a onClick="logVariable('type')" class="var it39911" onMouseOver="hilite(39911)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>, <a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>);
<a name="l2301"><span class="linenum">2301</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('importfields')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/importfields.html">importfields</a>[] = <a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('f')" href="../../_variables/f.html">$f</a>;
<a name="l2302"><span class="linenum">2302</span></a>          }
<a name="l2303"><span class="linenum">2303</span></a>  <span class="comment">        /* Now add the HTML templates to the settings array so we can update d */</span>
<a name="l2304"><span class="linenum">2304</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a>-&gt;singletemplate     = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('data_preset_get_file_contents')" href="../../_functions/data_preset_get_file_contents.html" onMouseOver="funcPopup(event,'data_preset_get_file_contents')">data_preset_get_file_contents</a>(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>, <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>,<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>,&quot;singletemplate.html&quot;);
<a name="l2305"><span class="linenum">2305</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a>-&gt;listtemplate       = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('data_preset_get_file_contents')" href="../../_functions/data_preset_get_file_contents.html" onMouseOver="funcPopup(event,'data_preset_get_file_contents')">data_preset_get_file_contents</a>(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>, <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>,<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>,&quot;listtemplate.html&quot;);
<a name="l2306"><span class="linenum">2306</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a>-&gt;listtemplateheader = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('data_preset_get_file_contents')" href="../../_functions/data_preset_get_file_contents.html" onMouseOver="funcPopup(event,'data_preset_get_file_contents')">data_preset_get_file_contents</a>(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>, <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>,<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>,&quot;listtemplateheader.html&quot;);
<a name="l2307"><span class="linenum">2307</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a>-&gt;listtemplatefooter = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('data_preset_get_file_contents')" href="../../_functions/data_preset_get_file_contents.html" onMouseOver="funcPopup(event,'data_preset_get_file_contents')">data_preset_get_file_contents</a>(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>, <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>,<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>,&quot;listtemplatefooter.html&quot;);
<a name="l2308"><span class="linenum">2308</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a>-&gt;addtemplate        = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('data_preset_get_file_contents')" href="../../_functions/data_preset_get_file_contents.html" onMouseOver="funcPopup(event,'data_preset_get_file_contents')">data_preset_get_file_contents</a>(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>, <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>,<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>,&quot;addtemplate.html&quot;);
<a name="l2309"><span class="linenum">2309</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a>-&gt;rsstemplate        = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('data_preset_get_file_contents')" href="../../_functions/data_preset_get_file_contents.html" onMouseOver="funcPopup(event,'data_preset_get_file_contents')">data_preset_get_file_contents</a>(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>, <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>,<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>,&quot;rsstemplate.html&quot;);
<a name="l2310"><span class="linenum">2310</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a>-&gt;rsstitletemplate   = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('data_preset_get_file_contents')" href="../../_functions/data_preset_get_file_contents.html" onMouseOver="funcPopup(event,'data_preset_get_file_contents')">data_preset_get_file_contents</a>(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>, <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>,<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>,&quot;rsstitletemplate.html&quot;);
<a name="l2311"><span class="linenum">2311</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a>-&gt;csstemplate        = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('data_preset_get_file_contents')" href="../../_functions/data_preset_get_file_contents.html" onMouseOver="funcPopup(event,'data_preset_get_file_contents')">data_preset_get_file_contents</a>(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>, <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>,<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>,&quot;csstemplate.css&quot;);
<a name="l2312"><span class="linenum">2312</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a>-&gt;jstemplate         = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('data_preset_get_file_contents')" href="../../_functions/data_preset_get_file_contents.html" onMouseOver="funcPopup(event,'data_preset_get_file_contents')">data_preset_get_file_contents</a>(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>, <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>,<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>,&quot;jstemplate.js&quot;);
<a name="l2313"><span class="linenum">2313</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a>-&gt;asearchtemplate    = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('data_preset_get_file_contents')" href="../../_functions/data_preset_get_file_contents.html" onMouseOver="funcPopup(event,'data_preset_get_file_contents')">data_preset_get_file_contents</a>(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>, <a class="var it27280" onMouseOver="hilite(27280)" onMouseOut="lolite()" onClick="logVariable('fileobj')" href="../../_variables/fileobj.html">$fileobj</a>,<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>,&quot;asearchtemplate.html&quot;);
<a name="l2314"><span class="linenum">2314</span></a>  
<a name="l2315"><span class="linenum">2315</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('settings')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a>-&gt;instance = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('module')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/module.html">module</a>-&gt;id;
<a name="l2316"><span class="linenum">2316</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l2317"><span class="linenum">2317</span></a>      }
<a name="l2318"><span class="linenum">2318</span></a>  
<a name="l2319"><span class="linenum">2319</span></a>      <span class="comment">/**</span>
<a name="l2320"><span class="linenum">2320</span></a>  <span class="comment">     * Import the preset into the given database module</span>
<a name="l2321"><span class="linenum">2321</span></a>  <span class="comment">     * @return bool</span>
<a name="l2322"><span class="linenum">2322</span></a>  <span class="comment">     */</span>
<a name="l2323"><span class="linenum">2323</span></a>      function <a class="function" onClick="logFunction('import')" href="../../_functions/import.html" onMouseOver="funcPopup(event,'import')">import</a>(<a class="var it34640" onMouseOver="hilite(34640)" onMouseOut="lolite()" onClick="logVariable('overwritesettings')" href="../../_variables/overwritesettings.html">$overwritesettings</a>) {
<a name="l2324"><span class="linenum">2324</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2325"><span class="linenum">2325</span></a>  
<a name="l2326"><span class="linenum">2326</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_preset_settings')" href="../../_functions/get_preset_settings.html" onMouseOver="funcPopup(event,'get_preset_settings')">get_preset_settings</a>();
<a name="l2327"><span class="linenum">2327</span></a>          <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>-&gt;<a onClick="logVariable('settings')" class="var it39554" onMouseOver="hilite(39554)" onMouseOut="lolite()" href="../../_variables/settings.html">settings</a>;
<a name="l2328"><span class="linenum">2328</span></a>          <a class="var it25789" onMouseOver="hilite(25789)" onMouseOut="lolite()" onClick="logVariable('newfields')" href="../../_variables/newfields.html">$newfields</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>-&gt;<a onClick="logVariable('importfields')" class="var it39554" onMouseOver="hilite(39554)" onMouseOut="lolite()" href="../../_variables/importfields.html">importfields</a>;
<a name="l2329"><span class="linenum">2329</span></a>          <a class="var it28777" onMouseOver="hilite(28777)" onMouseOut="lolite()" onClick="logVariable('currentfields')" href="../../_variables/currentfields.html">$currentfields</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>-&gt;<a onClick="logVariable('currentfields')" class="var it39554" onMouseOver="hilite(39554)" onMouseOut="lolite()" href="../../_variables/currentfields.html">currentfields</a>;
<a name="l2330"><span class="linenum">2330</span></a>          <a class="var it35097" onMouseOver="hilite(35097)" onMouseOut="lolite()" onClick="logVariable('preservedfields')" href="../../_variables/preservedfields.html">$preservedfields</a> = array();
<a name="l2331"><span class="linenum">2331</span></a>  
<a name="l2332"><span class="linenum">2332</span></a>  <span class="comment">        /* Maps fields and makes new ones */</span>
<a name="l2333"><span class="linenum">2333</span></a>          if (!empty(<a class="var it25789" onMouseOver="hilite(25789)" onMouseOut="lolite()" onClick="logVariable('newfields')" href="../../_variables/newfields.html">$newfields</a>)) {
<a name="l2334"><span class="linenum">2334</span></a>  <span class="comment">            /* We require an injective mapping, and need to know what to protect */</span>
<a name="l2335"><span class="linenum">2335</span></a>              foreach (<a class="var it25789" onMouseOver="hilite(25789)" onMouseOut="lolite()" onClick="logVariable('newfields')" href="../../_variables/newfields.html">$newfields</a> as <a class="var it28778" onMouseOver="hilite(28778)" onMouseOut="lolite()" onClick="logVariable('nid')" href="../../_variables/nid.html">$nid</a> =&gt; <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>) {
<a name="l2336"><span class="linenum">2336</span></a>                  <a class="var it1730" onMouseOver="hilite(1730)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../../_variables/cid.html">$cid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>(&quot;field_<a class="var it28778" onMouseOver="hilite(28778)" onMouseOut="lolite()" onClick="logVariable('nid')" href="../../_variables/nid.html">$nid</a>&quot;, -1, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2337"><span class="linenum">2337</span></a>                  if (<a class="var it1730" onMouseOver="hilite(1730)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../../_variables/cid.html">$cid</a> == -1) {
<a name="l2338"><span class="linenum">2338</span></a>                      continue;
<a name="l2339"><span class="linenum">2339</span></a>                  }
<a name="l2340"><span class="linenum">2340</span></a>                  if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1730" onMouseOver="hilite(1730)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../../_variables/cid.html">$cid</a>, <a class="var it35097" onMouseOver="hilite(35097)" onMouseOut="lolite()" onClick="logVariable('preservedfields')" href="../../_variables/preservedfields.html">$preservedfields</a>)){
<a name="l2341"><span class="linenum">2341</span></a>                      <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('notinjectivemap', 'data');
<a name="l2342"><span class="linenum">2342</span></a>                  }
<a name="l2343"><span class="linenum">2343</span></a>                  else <a class="var it35097" onMouseOver="hilite(35097)" onMouseOut="lolite()" onClick="logVariable('preservedfields')" href="../../_variables/preservedfields.html">$preservedfields</a>[<a class="var it1730" onMouseOver="hilite(1730)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../../_variables/cid.html">$cid</a>] = true;
<a name="l2344"><span class="linenum">2344</span></a>              }
<a name="l2345"><span class="linenum">2345</span></a>  
<a name="l2346"><span class="linenum">2346</span></a>              foreach (<a class="var it25789" onMouseOver="hilite(25789)" onMouseOut="lolite()" onClick="logVariable('newfields')" href="../../_variables/newfields.html">$newfields</a> as <a class="var it28778" onMouseOver="hilite(28778)" onMouseOut="lolite()" onClick="logVariable('nid')" href="../../_variables/nid.html">$nid</a> =&gt; <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>) {
<a name="l2347"><span class="linenum">2347</span></a>                  <a class="var it1730" onMouseOver="hilite(1730)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../../_variables/cid.html">$cid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>(&quot;field_<a class="var it28778" onMouseOver="hilite(28778)" onMouseOut="lolite()" onClick="logVariable('nid')" href="../../_variables/nid.html">$nid</a>&quot;, -1, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2348"><span class="linenum">2348</span></a>  
<a name="l2349"><span class="linenum">2349</span></a>  <span class="comment">                /* A mapping. Just need to change field params. Data kept. */</span>
<a name="l2350"><span class="linenum">2350</span></a>                  if (<a class="var it1730" onMouseOver="hilite(1730)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../../_variables/cid.html">$cid</a> != -1 and isset(<a class="var it28777" onMouseOver="hilite(28777)" onMouseOut="lolite()" onClick="logVariable('currentfields')" href="../../_variables/currentfields.html">$currentfields</a>[<a class="var it1730" onMouseOver="hilite(1730)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../../_variables/cid.html">$cid</a>])) {
<a name="l2351"><span class="linenum">2351</span></a>                      <a class="var it35098" onMouseOver="hilite(35098)" onMouseOut="lolite()" onClick="logVariable('fieldobject')" href="../../_variables/fieldobject.html">$fieldobject</a> = <a class="function" onClick="logFunction('data_get_field_from_id')" href="../../_functions/data_get_field_from_id.html" onMouseOver="funcPopup(event,'data_get_field_from_id')">data_get_field_from_id</a>(<a class="var it28777" onMouseOver="hilite(28777)" onMouseOut="lolite()" onClick="logVariable('currentfields')" href="../../_variables/currentfields.html">$currentfields</a>[<a class="var it1730" onMouseOver="hilite(1730)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../../_variables/cid.html">$cid</a>]-&gt;id, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('module')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/module.html">module</a>);
<a name="l2352"><span class="linenum">2352</span></a>                      foreach (<a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a> as <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a> =&gt; <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l2353"><span class="linenum">2353</span></a>                          if (<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a> != &quot;id&quot;) {
<a name="l2354"><span class="linenum">2354</span></a>                              <a class="var it35098" onMouseOver="hilite(35098)" onMouseOut="lolite()" onClick="logVariable('fieldobject')" href="../../_variables/fieldobject.html">$fieldobject</a>-&gt;<a onClick="logVariable('field')" class="var it41940" onMouseOver="hilite(41940)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a> = <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>;
<a name="l2355"><span class="linenum">2355</span></a>                          }
<a name="l2356"><span class="linenum">2356</span></a>                      }
<a name="l2357"><span class="linenum">2357</span></a>                      unset(<a class="var it35098" onMouseOver="hilite(35098)" onMouseOut="lolite()" onClick="logVariable('fieldobject')" href="../../_variables/fieldobject.html">$fieldobject</a>-&gt;<a onClick="logVariable('field')" class="var it41940" onMouseOver="hilite(41940)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;similarfield);
<a name="l2358"><span class="linenum">2358</span></a>                      <a class="var it35098" onMouseOver="hilite(35098)" onMouseOut="lolite()" onClick="logVariable('fieldobject')" href="../../_variables/fieldobject.html">$fieldobject</a>-&gt;<a class="function" onClick="logFunction('update_field')" href="../../_functions/update_field.html" onMouseOver="funcPopup(event,'update_field')">update_field</a>();
<a name="l2359"><span class="linenum">2359</span></a>                      unset(<a class="var it35098" onMouseOver="hilite(35098)" onMouseOut="lolite()" onClick="logVariable('fieldobject')" href="../../_variables/fieldobject.html">$fieldobject</a>);
<a name="l2360"><span class="linenum">2360</span></a>                  } else {
<a name="l2361"><span class="linenum">2361</span></a>  <span class="comment">                    /* Make a new field */</span>
<a name="l2362"><span class="linenum">2362</span></a>                      include_once(&quot;field/<a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>-&gt;<a onClick="logVariable('type')" class="var it41941" onMouseOver="hilite(41941)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>/field.class.php&quot;);
<a name="l2363"><span class="linenum">2363</span></a>  
<a name="l2364"><span class="linenum">2364</span></a>                      if (!isset(<a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>-&gt;<a onClick="logVariable('description')" class="var it41941" onMouseOver="hilite(41941)" onMouseOut="lolite()" href="../../_variables/description.html">description</a>)) {
<a name="l2365"><span class="linenum">2365</span></a>                          <a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>-&gt;<a onClick="logVariable('description')" class="var it41941" onMouseOver="hilite(41941)" onMouseOut="lolite()" href="../../_variables/description.html">description</a> = '';
<a name="l2366"><span class="linenum">2366</span></a>                      }
<a name="l2367"><span class="linenum">2367</span></a>                      <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a> = 'data_field_'.<a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>-&gt;<a onClick="logVariable('type')" class="var it41941" onMouseOver="hilite(41941)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>;
<a name="l2368"><span class="linenum">2368</span></a>                      <a class="var it35099" onMouseOver="hilite(35099)" onMouseOut="lolite()" onClick="logVariable('fieldclass')" href="../../_variables/fieldclass.html">$fieldclass</a> = new <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a>(<a class="var it4764" onMouseOver="hilite(4764)" onMouseOut="lolite()" onClick="logVariable('newfield')" href="../../_variables/newfield.html">$newfield</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('module')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/module.html">module</a>);
<a name="l2369"><span class="linenum">2369</span></a>                      <a class="var it35099" onMouseOver="hilite(35099)" onMouseOut="lolite()" onClick="logVariable('fieldclass')" href="../../_variables/fieldclass.html">$fieldclass</a>-&gt;<a class="function" onClick="logFunction('insert_field')" href="../../_functions/insert_field.html" onMouseOver="funcPopup(event,'insert_field')">insert_field</a>();
<a name="l2370"><span class="linenum">2370</span></a>                      unset(<a class="var it35099" onMouseOver="hilite(35099)" onMouseOut="lolite()" onClick="logVariable('fieldclass')" href="../../_variables/fieldclass.html">$fieldclass</a>);
<a name="l2371"><span class="linenum">2371</span></a>                  }
<a name="l2372"><span class="linenum">2372</span></a>              }
<a name="l2373"><span class="linenum">2373</span></a>          }
<a name="l2374"><span class="linenum">2374</span></a>  
<a name="l2375"><span class="linenum">2375</span></a>  <span class="comment">        /* Get rid of all old unused data */</span>
<a name="l2376"><span class="linenum">2376</span></a>          if (!empty(<a class="var it35097" onMouseOver="hilite(35097)" onMouseOut="lolite()" onClick="logVariable('preservedfields')" href="../../_variables/preservedfields.html">$preservedfields</a>)) {
<a name="l2377"><span class="linenum">2377</span></a>              foreach (<a class="var it28777" onMouseOver="hilite(28777)" onMouseOut="lolite()" onClick="logVariable('currentfields')" href="../../_variables/currentfields.html">$currentfields</a> as <a class="var it1730" onMouseOver="hilite(1730)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../../_variables/cid.html">$cid</a> =&gt; <a class="var it28779" onMouseOver="hilite(28779)" onMouseOut="lolite()" onClick="logVariable('currentfield')" href="../../_variables/currentfield.html">$currentfield</a>) {
<a name="l2378"><span class="linenum">2378</span></a>                  if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1730" onMouseOver="hilite(1730)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../../_variables/cid.html">$cid</a>, <a class="var it35097" onMouseOver="hilite(35097)" onMouseOut="lolite()" onClick="logVariable('preservedfields')" href="../../_variables/preservedfields.html">$preservedfields</a>)) {
<a name="l2379"><span class="linenum">2379</span></a>  <span class="comment">                    /* Data not used anymore so wipe! */</span>
<a name="l2380"><span class="linenum">2380</span></a>                      print &quot;Deleting field <a class="var it28779" onMouseOver="hilite(28779)" onMouseOut="lolite()" onClick="logVariable('currentfield')" href="../../_variables/currentfield.html">$currentfield</a>-&gt;<a onClick="logVariable('name')" class="var it41942" onMouseOver="hilite(41942)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>&lt;br /&gt;&quot;;
<a name="l2381"><span class="linenum">2381</span></a>  
<a name="l2382"><span class="linenum">2382</span></a>                      <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> = <a class="var it28779" onMouseOver="hilite(28779)" onMouseOut="lolite()" onClick="logVariable('currentfield')" href="../../_variables/currentfield.html">$currentfield</a>-&gt;<a onClick="logVariable('id')" class="var it41942" onMouseOver="hilite(41942)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2383"><span class="linenum">2383</span></a>  <span class="comment">                    //Why delete existing data records and related comments/ratings??</span>
<a name="l2384"><span class="linenum">2384</span></a>                      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('data_content', array('fieldid'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l2385"><span class="linenum">2385</span></a>                      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('data_fields', array('id'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l2386"><span class="linenum">2386</span></a>                  }
<a name="l2387"><span class="linenum">2387</span></a>              }
<a name="l2388"><span class="linenum">2388</span></a>          }
<a name="l2389"><span class="linenum">2389</span></a>  
<a name="l2390"><span class="linenum">2390</span></a>  <span class="comment">        // handle special settings here</span>
<a name="l2391"><span class="linenum">2391</span></a>          if (!empty(<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>-&gt;<a onClick="logVariable('defaultsort')" class="var it39683" onMouseOver="hilite(39683)" onMouseOut="lolite()" href="../../_variables/defaultsort.html">defaultsort</a>)) {
<a name="l2392"><span class="linenum">2392</span></a>              if (<a class="phpfunction" onClick="logFunction('is_numeric')" href="../../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>-&gt;<a onClick="logVariable('defaultsort')" class="var it39683" onMouseOver="hilite(39683)" onMouseOut="lolite()" href="../../_variables/defaultsort.html">defaultsort</a>)) {
<a name="l2393"><span class="linenum">2393</span></a>  <span class="comment">                // old broken value</span>
<a name="l2394"><span class="linenum">2394</span></a>                  <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>-&gt;<a onClick="logVariable('defaultsort')" class="var it39683" onMouseOver="hilite(39683)" onMouseOut="lolite()" href="../../_variables/defaultsort.html">defaultsort</a> = 0;
<a name="l2395"><span class="linenum">2395</span></a>              } else {
<a name="l2396"><span class="linenum">2396</span></a>                  <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>-&gt;<a onClick="logVariable('defaultsort')" class="var it39683" onMouseOver="hilite(39683)" onMouseOut="lolite()" href="../../_variables/defaultsort.html">defaultsort</a> = (int)<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('data_fields', 'id', array('dataid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('module')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/module.html">module</a>-&gt;id, 'name'=&gt;<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>-&gt;<a onClick="logVariable('defaultsort')" class="var it39683" onMouseOver="hilite(39683)" onMouseOut="lolite()" href="../../_variables/defaultsort.html">defaultsort</a>));
<a name="l2397"><span class="linenum">2397</span></a>              }
<a name="l2398"><span class="linenum">2398</span></a>          } else {
<a name="l2399"><span class="linenum">2399</span></a>              <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>-&gt;<a onClick="logVariable('defaultsort')" class="var it39683" onMouseOver="hilite(39683)" onMouseOut="lolite()" href="../../_variables/defaultsort.html">defaultsort</a> = 0;
<a name="l2400"><span class="linenum">2400</span></a>          }
<a name="l2401"><span class="linenum">2401</span></a>  
<a name="l2402"><span class="linenum">2402</span></a>  <span class="comment">        // do we want to overwrite all current database settings?</span>
<a name="l2403"><span class="linenum">2403</span></a>          if (<a class="var it34640" onMouseOver="hilite(34640)" onMouseOut="lolite()" onClick="logVariable('overwritesettings')" href="../../_variables/overwritesettings.html">$overwritesettings</a>) {
<a name="l2404"><span class="linenum">2404</span></a>  <span class="comment">            // all supported settings</span>
<a name="l2405"><span class="linenum">2405</span></a>              <a class="var it9604" onMouseOver="hilite(9604)" onMouseOut="lolite()" onClick="logVariable('overwrite')" href="../../_variables/overwrite.html">$overwrite</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>((array)<a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>);
<a name="l2406"><span class="linenum">2406</span></a>          } else {
<a name="l2407"><span class="linenum">2407</span></a>  <span class="comment">            // only templates and sorting</span>
<a name="l2408"><span class="linenum">2408</span></a>              <a class="var it9604" onMouseOver="hilite(9604)" onMouseOut="lolite()" onClick="logVariable('overwrite')" href="../../_variables/overwrite.html">$overwrite</a> = array('singletemplate', 'listtemplate', 'listtemplateheader', 'listtemplatefooter',
<a name="l2409"><span class="linenum">2409</span></a>                                 'addtemplate', 'rsstemplate', 'rsstitletemplate', 'csstemplate', 'jstemplate',
<a name="l2410"><span class="linenum">2410</span></a>                                 'asearchtemplate', 'defaultsortdir', 'defaultsort');
<a name="l2411"><span class="linenum">2411</span></a>          }
<a name="l2412"><span class="linenum">2412</span></a>  
<a name="l2413"><span class="linenum">2413</span></a>  <span class="comment">        // now overwrite current data settings</span>
<a name="l2414"><span class="linenum">2414</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('module')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/module.html">module</a> as <a class="var it3740" onMouseOver="hilite(3740)" onMouseOut="lolite()" onClick="logVariable('prop')" href="../../_variables/prop.html">$prop</a>=&gt;<a class="var it1136" onMouseOver="hilite(1136)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../../_variables/unused.html">$unused</a>) {
<a name="l2415"><span class="linenum">2415</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it3740" onMouseOver="hilite(3740)" onMouseOut="lolite()" onClick="logVariable('prop')" href="../../_variables/prop.html">$prop</a>, <a class="var it9604" onMouseOver="hilite(9604)" onMouseOut="lolite()" onClick="logVariable('overwrite')" href="../../_variables/overwrite.html">$overwrite</a>)) {
<a name="l2416"><span class="linenum">2416</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('module')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/module.html">module</a>-&gt;<a class="var it3740" onMouseOver="hilite(3740)" onMouseOut="lolite()" onClick="logVariable('prop')" href="../../_variables/prop.html">$prop</a> = <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>-&gt;<a class="var it3740" onMouseOver="hilite(3740)" onMouseOut="lolite()" onClick="logVariable('prop')" href="../../_variables/prop.html">$prop</a>;
<a name="l2417"><span class="linenum">2417</span></a>              }
<a name="l2418"><span class="linenum">2418</span></a>          }
<a name="l2419"><span class="linenum">2419</span></a>  
<a name="l2420"><span class="linenum">2420</span></a>          <a class="function" onClick="logFunction('data_update_instance')" href="../../_functions/data_update_instance.html" onMouseOver="funcPopup(event,'data_update_instance')">data_update_instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('module')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/module.html">module</a>);
<a name="l2421"><span class="linenum">2421</span></a>  
<a name="l2422"><span class="linenum">2422</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup')" href="../../_functions/cleanup.html" onMouseOver="funcPopup(event,'cleanup')">cleanup</a>();
<a name="l2423"><span class="linenum">2423</span></a>      }
<a name="l2424"><span class="linenum">2424</span></a>  
<a name="l2425"><span class="linenum">2425</span></a>      <span class="comment">/**</span>
<a name="l2426"><span class="linenum">2426</span></a>  <span class="comment">     * Any clean up routines should go here</span>
<a name="l2427"><span class="linenum">2427</span></a>  <span class="comment">     * @return bool</span>
<a name="l2428"><span class="linenum">2428</span></a>  <span class="comment">     */</span>
<a name="l2429"><span class="linenum">2429</span></a>      public function <a class="function" onClick="logFunction('cleanup')" href="../../_functions/cleanup.html" onMouseOver="funcPopup(event,'cleanup')">cleanup</a>() {
<a name="l2430"><span class="linenum">2430</span></a>          return true;
<a name="l2431"><span class="linenum">2431</span></a>      }
<a name="l2432"><span class="linenum">2432</span></a>  }
<a name="l2433"><span class="linenum">2433</span></a>  
<a name="l2434"><span class="linenum">2434</span></a>  <span class="comment">/**</span>
<a name="l2435"><span class="linenum">2435</span></a>  <span class="comment"> * Data preset importer for uploaded presets</span>
<a name="l2436"><span class="linenum">2436</span></a>  <span class="comment"> */</span>
<a name="l2437"><span class="linenum">2437</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('data_preset_upload_importer')" href="../../_classes/data_preset_upload_importer.html" onMouseOver="classPopup(event,'data_preset_upload_importer')">data_preset_upload_importer</a> extends data_preset_importer {
<a name="l2438"><span class="linenum">2438</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>, <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>) {
<a name="l2439"><span class="linenum">2439</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l2440"><span class="linenum">2440</span></a>          if (<a class="phpfunction" onClick="logFunction('is_file')" href="../../_functions/is_file.html" onMouseOver="phpfuncPopup(event,'is_file')">is_file</a>(<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>)) {
<a name="l2441"><span class="linenum">2441</span></a>              <a class="var it773" onMouseOver="hilite(773)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../_variables/fp.html">$fp</a> = <a class="function" onClick="logFunction('get_file_packer')" href="../../_functions/get_file_packer.html" onMouseOver="funcPopup(event,'get_file_packer')">get_file_packer</a>();
<a name="l2442"><span class="linenum">2442</span></a>              if (<a class="var it773" onMouseOver="hilite(773)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../_variables/fp.html">$fp</a>-&gt;<a class="function" onClick="logFunction('extract_to_pathname')" href="../../_functions/extract_to_pathname.html" onMouseOver="funcPopup(event,'extract_to_pathname')">extract_to_pathname</a>(<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>, <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>.'_extracted')) {
<a name="l2443"><span class="linenum">2443</span></a>                  <a class="function" onClick="logFunction('fulldelete')" href="../../_functions/fulldelete.html" onMouseOver="funcPopup(event,'fulldelete')">fulldelete</a>(<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>);
<a name="l2444"><span class="linenum">2444</span></a>              }
<a name="l2445"><span class="linenum">2445</span></a>              <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a> .= '_extracted';
<a name="l2446"><span class="linenum">2446</span></a>          }
<a name="l2447"><span class="linenum">2447</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>, <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>);
<a name="l2448"><span class="linenum">2448</span></a>      }
<a name="l2449"><span class="linenum">2449</span></a>      public function <a class="function" onClick="logFunction('cleanup')" href="../../_functions/cleanup.html" onMouseOver="funcPopup(event,'cleanup')">cleanup</a>() {
<a name="l2450"><span class="linenum">2450</span></a>          return <a class="function" onClick="logFunction('fulldelete')" href="../../_functions/fulldelete.html" onMouseOver="funcPopup(event,'fulldelete')">fulldelete</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('directory')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/directory.html">directory</a>);
<a name="l2451"><span class="linenum">2451</span></a>      }
<a name="l2452"><span class="linenum">2452</span></a>  }
<a name="l2453"><span class="linenum">2453</span></a>  
<a name="l2454"><span class="linenum">2454</span></a>  <span class="comment">/**</span>
<a name="l2455"><span class="linenum">2455</span></a>  <span class="comment"> * Data preset importer for existing presets</span>
<a name="l2456"><span class="linenum">2456</span></a>  <span class="comment"> */</span>
<a name="l2457"><span class="linenum">2457</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('data_preset_existing_importer')" href="../../_classes/data_preset_existing_importer.html" onMouseOver="classPopup(event,'data_preset_existing_importer')">data_preset_existing_importer</a> extends data_preset_importer {
<a name="l2458"><span class="linenum">2458</span></a>      protected <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l2459"><span class="linenum">2459</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>, <a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../../_variables/fullname.html">$fullname</a>) {
<a name="l2460"><span class="linenum">2460</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l2461"><span class="linenum">2461</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../_variables/shortname.html">$shortname</a>) = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('/', <a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../../_variables/fullname.html">$fullname</a>, 2);
<a name="l2462"><span class="linenum">2462</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2463"><span class="linenum">2463</span></a>          if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> &amp;&amp; (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> != <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) &amp;&amp; !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:manageuserpresets', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) &amp;&amp; !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:viewalluserpresets', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2464"><span class="linenum">2464</span></a>             throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid preset provided');
<a name="l2465"><span class="linenum">2465</span></a>          }
<a name="l2466"><span class="linenum">2466</span></a>  
<a name="l2467"><span class="linenum">2467</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l2468"><span class="linenum">2468</span></a>          <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a> = <a class="function" onClick="logFunction('data_preset_path')" href="../../_functions/data_preset_path.html" onMouseOver="funcPopup(event,'data_preset_path')">data_preset_path</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../_variables/shortname.html">$shortname</a>);
<a name="l2469"><span class="linenum">2469</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>, <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>);
<a name="l2470"><span class="linenum">2470</span></a>      }
<a name="l2471"><span class="linenum">2471</span></a>      public function <a class="function" onClick="logFunction('get_userid')" href="../../_functions/get_userid.html" onMouseOver="funcPopup(event,'get_userid')">get_userid</a>() {
<a name="l2472"><span class="linenum">2472</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l2473"><span class="linenum">2473</span></a>      }
<a name="l2474"><span class="linenum">2474</span></a>  }
<a name="l2475"><span class="linenum">2475</span></a>  
<a name="l2476"><span class="linenum">2476</span></a>  <span class="comment">/**</span>
<a name="l2477"><span class="linenum">2477</span></a>  <span class="comment"> * @global object</span>
<a name="l2478"><span class="linenum">2478</span></a>  <span class="comment"> * @global object</span>
<a name="l2479"><span class="linenum">2479</span></a>  <span class="comment"> * @param object $course</span>
<a name="l2480"><span class="linenum">2480</span></a>  <span class="comment"> * @param int $userid</span>
<a name="l2481"><span class="linenum">2481</span></a>  <span class="comment"> * @param string $shortname</span>
<a name="l2482"><span class="linenum">2482</span></a>  <span class="comment"> * @return string</span>
<a name="l2483"><span class="linenum">2483</span></a>  <span class="comment"> */</span>
<a name="l2484"><span class="linenum">2484</span></a>  function <a class="function" onClick="logFunction('data_preset_path')" href="../../_functions/data_preset_path.html" onMouseOver="funcPopup(event,'data_preset_path')">data_preset_path</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../_variables/shortname.html">$shortname</a>) {
<a name="l2485"><span class="linenum">2485</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2486"><span class="linenum">2486</span></a>  
<a name="l2487"><span class="linenum">2487</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2488"><span class="linenum">2488</span></a>  
<a name="l2489"><span class="linenum">2489</span></a>      <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = (int)<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l2490"><span class="linenum">2490</span></a>  
<a name="l2491"><span class="linenum">2491</span></a>      <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a> = null;
<a name="l2492"><span class="linenum">2492</span></a>      if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> &gt; 0 &amp;&amp; (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> || <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:viewalluserpresets', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>))) {
<a name="l2493"><span class="linenum">2493</span></a>          <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dataroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dataroot.html">dataroot</a>.'/data/preset/'.<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>.'/'.<a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../_variables/shortname.html">$shortname</a>;
<a name="l2494"><span class="linenum">2494</span></a>      } else if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> == 0) {
<a name="l2495"><span class="linenum">2495</span></a>          <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/mod/data/preset/'.<a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../_variables/shortname.html">$shortname</a>;
<a name="l2496"><span class="linenum">2496</span></a>      } else if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> &lt; 0) {
<a name="l2497"><span class="linenum">2497</span></a>          <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tempdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/tempdir.html">tempdir</a>.'/data/'.-<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>.'/'.<a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../_variables/shortname.html">$shortname</a>;
<a name="l2498"><span class="linenum">2498</span></a>      }
<a name="l2499"><span class="linenum">2499</span></a>  
<a name="l2500"><span class="linenum">2500</span></a>      return <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>;
<a name="l2501"><span class="linenum">2501</span></a>  }
<a name="l2502"><span class="linenum">2502</span></a>  
<a name="l2503"><span class="linenum">2503</span></a>  <span class="comment">/**</span>
<a name="l2504"><span class="linenum">2504</span></a>  <span class="comment"> * Implementation of the function for printing the form elements that control</span>
<a name="l2505"><span class="linenum">2505</span></a>  <span class="comment"> * whether the course reset functionality affects the data.</span>
<a name="l2506"><span class="linenum">2506</span></a>  <span class="comment"> *</span>
<a name="l2507"><span class="linenum">2507</span></a>  <span class="comment"> * @param $mform form passed by reference</span>
<a name="l2508"><span class="linenum">2508</span></a>  <span class="comment"> */</span>
<a name="l2509"><span class="linenum">2509</span></a>  function <a class="function" onClick="logFunction('data_reset_course_form_definition')" href="../../_functions/data_reset_course_form_definition.html" onMouseOver="funcPopup(event,'data_reset_course_form_definition')">data_reset_course_form_definition</a>(&amp;<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l2510"><span class="linenum">2510</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'dataheader', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'data'));
<a name="l2511"><span class="linenum">2511</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', 'reset_data', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallentries','data'));
<a name="l2512"><span class="linenum">2512</span></a>  
<a name="l2513"><span class="linenum">2513</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', 'reset_data_notenrolled', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deletenotenrolled', 'data'));
<a name="l2514"><span class="linenum">2514</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('reset_data_notenrolled', 'reset_data', 'checked');
<a name="l2515"><span class="linenum">2515</span></a>  
<a name="l2516"><span class="linenum">2516</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', 'reset_data_ratings', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallratings'));
<a name="l2517"><span class="linenum">2517</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('reset_data_ratings', 'reset_data', 'checked');
<a name="l2518"><span class="linenum">2518</span></a>  
<a name="l2519"><span class="linenum">2519</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', 'reset_data_comments', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallcomments'));
<a name="l2520"><span class="linenum">2520</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('reset_data_comments', 'reset_data', 'checked');
<a name="l2521"><span class="linenum">2521</span></a>  }
<a name="l2522"><span class="linenum">2522</span></a>  
<a name="l2523"><span class="linenum">2523</span></a>  <span class="comment">/**</span>
<a name="l2524"><span class="linenum">2524</span></a>  <span class="comment"> * Course reset form defaults.</span>
<a name="l2525"><span class="linenum">2525</span></a>  <span class="comment"> * @return array</span>
<a name="l2526"><span class="linenum">2526</span></a>  <span class="comment"> */</span>
<a name="l2527"><span class="linenum">2527</span></a>  function <a class="function" onClick="logFunction('data_reset_course_form_defaults')" href="../../_functions/data_reset_course_form_defaults.html" onMouseOver="funcPopup(event,'data_reset_course_form_defaults')">data_reset_course_form_defaults</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l2528"><span class="linenum">2528</span></a>      return array('reset_data'=&gt;0, 'reset_data_ratings'=&gt;1, 'reset_data_comments'=&gt;1, 'reset_data_notenrolled'=&gt;0);
<a name="l2529"><span class="linenum">2529</span></a>  }
<a name="l2530"><span class="linenum">2530</span></a>  
<a name="l2531"><span class="linenum">2531</span></a>  <span class="comment">/**</span>
<a name="l2532"><span class="linenum">2532</span></a>  <span class="comment"> * Removes all grades from gradebook</span>
<a name="l2533"><span class="linenum">2533</span></a>  <span class="comment"> *</span>
<a name="l2534"><span class="linenum">2534</span></a>  <span class="comment"> * @global object</span>
<a name="l2535"><span class="linenum">2535</span></a>  <span class="comment"> * @global object</span>
<a name="l2536"><span class="linenum">2536</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l2537"><span class="linenum">2537</span></a>  <span class="comment"> * @param string $type optional type</span>
<a name="l2538"><span class="linenum">2538</span></a>  <span class="comment"> */</span>
<a name="l2539"><span class="linenum">2539</span></a>  function <a class="function" onClick="logFunction('data_reset_gradebook')" href="../../_functions/data_reset_gradebook.html" onMouseOver="funcPopup(event,'data_reset_gradebook')">data_reset_gradebook</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>='') {
<a name="l2540"><span class="linenum">2540</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2541"><span class="linenum">2541</span></a>  
<a name="l2542"><span class="linenum">2542</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT d.*, cm.idnumber as cmidnumber, d.course as courseid
<a name="l2543"><span class="linenum">2543</span></a>                FROM {data} d, {course_modules} cm, {modules} m
<a name="l2544"><span class="linenum">2544</span></a>               WHERE m.name='data' AND m.id=cm.module AND cm.instance=d.id AND d.course=?&quot;;
<a name="l2545"><span class="linenum">2545</span></a>  
<a name="l2546"><span class="linenum">2546</span></a>      if (<a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('datas')" href="../../_variables/datas.html">$datas</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>))) {
<a name="l2547"><span class="linenum">2547</span></a>          foreach (<a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('datas')" href="../../_variables/datas.html">$datas</a> as <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l2548"><span class="linenum">2548</span></a>              <a class="function" onClick="logFunction('data_grade_item_update')" href="../../_functions/data_grade_item_update.html" onMouseOver="funcPopup(event,'data_grade_item_update')">data_grade_item_update</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, 'reset');
<a name="l2549"><span class="linenum">2549</span></a>          }
<a name="l2550"><span class="linenum">2550</span></a>      }
<a name="l2551"><span class="linenum">2551</span></a>  }
<a name="l2552"><span class="linenum">2552</span></a>  
<a name="l2553"><span class="linenum">2553</span></a>  <span class="comment">/**</span>
<a name="l2554"><span class="linenum">2554</span></a>  <span class="comment"> * Actual implementation of the reset course functionality, delete all the</span>
<a name="l2555"><span class="linenum">2555</span></a>  <span class="comment"> * data responses for course $data-&gt;courseid.</span>
<a name="l2556"><span class="linenum">2556</span></a>  <span class="comment"> *</span>
<a name="l2557"><span class="linenum">2557</span></a>  <span class="comment"> * @global object</span>
<a name="l2558"><span class="linenum">2558</span></a>  <span class="comment"> * @global object</span>
<a name="l2559"><span class="linenum">2559</span></a>  <span class="comment"> * @param object $data the data submitted from the reset course.</span>
<a name="l2560"><span class="linenum">2560</span></a>  <span class="comment"> * @return array status array</span>
<a name="l2561"><span class="linenum">2561</span></a>  <span class="comment"> */</span>
<a name="l2562"><span class="linenum">2562</span></a>  function <a class="function" onClick="logFunction('data_reset_userdata')" href="../../_functions/data_reset_userdata.html" onMouseOver="funcPopup(event,'data_reset_userdata')">data_reset_userdata</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l2563"><span class="linenum">2563</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2564"><span class="linenum">2564</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/filelib.php');
<a name="l2565"><span class="linenum">2565</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../rating/lib.php.html">/rating/lib.php</a>');
<a name="l2566"><span class="linenum">2566</span></a>  
<a name="l2567"><span class="linenum">2567</span></a>      <a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'data');
<a name="l2568"><span class="linenum">2568</span></a>      <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = array();
<a name="l2569"><span class="linenum">2569</span></a>  
<a name="l2570"><span class="linenum">2570</span></a>      <a class="var it35100" onMouseOver="hilite(35100)" onMouseOut="lolite()" onClick="logVariable('allrecordssql')" href="../../_variables/allrecordssql.html">$allrecordssql</a> = &quot;SELECT r.id
<a name="l2571"><span class="linenum">2571</span></a>                          FROM {data_records} r
<a name="l2572"><span class="linenum">2572</span></a>                               INNER JOIN {data} d ON r.dataid = d.id
<a name="l2573"><span class="linenum">2573</span></a>                         WHERE d.course = ?&quot;;
<a name="l2574"><span class="linenum">2574</span></a>  
<a name="l2575"><span class="linenum">2575</span></a>      <a class="var it35101" onMouseOver="hilite(35101)" onMouseOut="lolite()" onClick="logVariable('alldatassql')" href="../../_variables/alldatassql.html">$alldatassql</a> = &quot;SELECT d.id
<a name="l2576"><span class="linenum">2576</span></a>                        FROM {data} d
<a name="l2577"><span class="linenum">2577</span></a>                       WHERE d.course=?&quot;;
<a name="l2578"><span class="linenum">2578</span></a>  
<a name="l2579"><span class="linenum">2579</span></a>      <a class="var it6647" onMouseOver="hilite(6647)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a> = <span class="keyword">new </span><a class="class" onClick="logClass('rating_manager')" href="../../_classes/rating_manager.html" onMouseOver="classPopup(event,'rating_manager')">rating_manager</a>();
<a name="l2580"><span class="linenum">2580</span></a>      <a class="var it23230" onMouseOver="hilite(23230)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a> = new stdClass;
<a name="l2581"><span class="linenum">2581</span></a>      <a class="var it23230" onMouseOver="hilite(23230)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>-&gt;<a onClick="logVariable('component')" class="var it40714" onMouseOver="hilite(40714)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = 'mod_data';
<a name="l2582"><span class="linenum">2582</span></a>      <a class="var it23230" onMouseOver="hilite(23230)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>-&gt;<a onClick="logVariable('ratingarea')" class="var it40714" onMouseOver="hilite(40714)" onMouseOut="lolite()" href="../../_variables/ratingarea.html">ratingarea</a> = 'entry';
<a name="l2583"><span class="linenum">2583</span></a>  
<a name="l2584"><span class="linenum">2584</span></a>  <span class="comment">    // Set the file storage - may need it to remove files later.</span>
<a name="l2585"><span class="linenum">2585</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2586"><span class="linenum">2586</span></a>  
<a name="l2587"><span class="linenum">2587</span></a>  <span class="comment">    // delete entries if requested</span>
<a name="l2588"><span class="linenum">2588</span></a>      if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_data')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_data.html">reset_data</a>)) {
<a name="l2589"><span class="linenum">2589</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('comments', &quot;itemid IN (<a class="var it35100" onMouseOver="hilite(35100)" onMouseOut="lolite()" onClick="logVariable('allrecordssql')" href="../../_variables/allrecordssql.html">$allrecordssql</a>) AND commentarea='database_entry'&quot;, array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>));
<a name="l2590"><span class="linenum">2590</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('data_content', &quot;recordid IN (<a class="var it35100" onMouseOver="hilite(35100)" onMouseOut="lolite()" onClick="logVariable('allrecordssql')" href="../../_variables/allrecordssql.html">$allrecordssql</a>)&quot;, array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>));
<a name="l2591"><span class="linenum">2591</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('data_records', &quot;dataid IN (<a class="var it35101" onMouseOver="hilite(35101)" onMouseOut="lolite()" onClick="logVariable('alldatassql')" href="../../_variables/alldatassql.html">$alldatassql</a>)&quot;, array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>));
<a name="l2592"><span class="linenum">2592</span></a>  
<a name="l2593"><span class="linenum">2593</span></a>          if (<a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('datas')" href="../../_variables/datas.html">$datas</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it35101" onMouseOver="hilite(35101)" onMouseOut="lolite()" onClick="logVariable('alldatassql')" href="../../_variables/alldatassql.html">$alldatassql</a>, array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>))) {
<a name="l2594"><span class="linenum">2594</span></a>              foreach (<a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('datas')" href="../../_variables/datas.html">$datas</a> as <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>=&gt;<a class="var it1136" onMouseOver="hilite(1136)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../../_variables/unused.html">$unused</a>) {
<a name="l2595"><span class="linenum">2595</span></a>                  if (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('data', <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>)) {
<a name="l2596"><span class="linenum">2596</span></a>                      continue;
<a name="l2597"><span class="linenum">2597</span></a>                  }
<a name="l2598"><span class="linenum">2598</span></a>                  <a class="var it32056" onMouseOver="hilite(32056)" onMouseOut="lolite()" onClick="logVariable('datacontext')" href="../../_variables/datacontext.html">$datacontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2599"><span class="linenum">2599</span></a>  
<a name="l2600"><span class="linenum">2600</span></a>  <span class="comment">                // Delete any files that may exist.</span>
<a name="l2601"><span class="linenum">2601</span></a>                  <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it32056" onMouseOver="hilite(32056)" onMouseOut="lolite()" onClick="logVariable('datacontext')" href="../../_variables/datacontext.html">$datacontext</a>-&gt;<a onClick="logVariable('id')" class="var it39690" onMouseOver="hilite(39690)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_data', 'content');
<a name="l2602"><span class="linenum">2602</span></a>  
<a name="l2603"><span class="linenum">2603</span></a>                  <a class="var it23230" onMouseOver="hilite(23230)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>-&gt;<a onClick="logVariable('contextid')" class="var it40714" onMouseOver="hilite(40714)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it32056" onMouseOver="hilite(32056)" onMouseOut="lolite()" onClick="logVariable('datacontext')" href="../../_variables/datacontext.html">$datacontext</a>-&gt;<a onClick="logVariable('id')" class="var it39690" onMouseOver="hilite(39690)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2604"><span class="linenum">2604</span></a>                  <a class="var it6647" onMouseOver="hilite(6647)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a>-&gt;<a class="function" onClick="logFunction('delete_ratings')" href="../../_functions/delete_ratings.html" onMouseOver="funcPopup(event,'delete_ratings')">delete_ratings</a>(<a class="var it23230" onMouseOver="hilite(23230)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>);
<a name="l2605"><span class="linenum">2605</span></a>              }
<a name="l2606"><span class="linenum">2606</span></a>          }
<a name="l2607"><span class="linenum">2607</span></a>  
<a name="l2608"><span class="linenum">2608</span></a>          if (empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_gradebook_grades')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_gradebook_grades.html">reset_gradebook_grades</a>)) {
<a name="l2609"><span class="linenum">2609</span></a>  <span class="comment">            // remove all grades from gradebook</span>
<a name="l2610"><span class="linenum">2610</span></a>              <a class="function" onClick="logFunction('data_reset_gradebook')" href="../../_functions/data_reset_gradebook.html" onMouseOver="funcPopup(event,'data_reset_gradebook')">data_reset_gradebook</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>);
<a name="l2611"><span class="linenum">2611</span></a>          }
<a name="l2612"><span class="linenum">2612</span></a>          <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallentries', 'data'), 'error'=&gt;false);
<a name="l2613"><span class="linenum">2613</span></a>      }
<a name="l2614"><span class="linenum">2614</span></a>  
<a name="l2615"><span class="linenum">2615</span></a>  <span class="comment">    // remove entries by users not enrolled into course</span>
<a name="l2616"><span class="linenum">2616</span></a>      if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_data_notenrolled')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_data_notenrolled.html">reset_data_notenrolled</a>)) {
<a name="l2617"><span class="linenum">2617</span></a>          <a class="var it35104" onMouseOver="hilite(35104)" onMouseOut="lolite()" onClick="logVariable('recordssql')" href="../../_variables/recordssql.html">$recordssql</a> = &quot;SELECT r.id, r.userid, r.dataid, u.id AS userexists, u.deleted AS userdeleted
<a name="l2618"><span class="linenum">2618</span></a>                           FROM {data_records} r
<a name="l2619"><span class="linenum">2619</span></a>                                JOIN {data} d ON r.dataid = d.id
<a name="l2620"><span class="linenum">2620</span></a>                                LEFT JOIN {user} u ON r.userid = u.id
<a name="l2621"><span class="linenum">2621</span></a>                          WHERE d.course = ? AND r.userid &gt; 0&quot;;
<a name="l2622"><span class="linenum">2622</span></a>  
<a name="l2623"><span class="linenum">2623</span></a>          <a class="var it26482" onMouseOver="hilite(26482)" onMouseOut="lolite()" onClick="logVariable('course_context')" href="../../_variables/course_context.html">$course_context</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>);
<a name="l2624"><span class="linenum">2624</span></a>          <a class="var it35105" onMouseOver="hilite(35105)" onMouseOut="lolite()" onClick="logVariable('notenrolled')" href="../../_variables/notenrolled.html">$notenrolled</a> = array();
<a name="l2625"><span class="linenum">2625</span></a>          <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = array();
<a name="l2626"><span class="linenum">2626</span></a>          <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it35104" onMouseOver="hilite(35104)" onMouseOut="lolite()" onClick="logVariable('recordssql')" href="../../_variables/recordssql.html">$recordssql</a>, array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>));
<a name="l2627"><span class="linenum">2627</span></a>          foreach (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> as <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l2628"><span class="linenum">2628</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, <a class="var it35105" onMouseOver="hilite(35105)" onMouseOut="lolite()" onClick="logVariable('notenrolled')" href="../../_variables/notenrolled.html">$notenrolled</a>) or !<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userexists')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/userexists.html">userexists</a> or <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;userdeleted
<a name="l2629"><span class="linenum">2629</span></a>                or !<a class="function" onClick="logFunction('is_enrolled')" href="../../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="var it26482" onMouseOver="hilite(26482)" onMouseOut="lolite()" onClick="logVariable('course_context')" href="../../_variables/course_context.html">$course_context</a>, <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>)) {
<a name="l2630"><span class="linenum">2630</span></a>  <span class="comment">                //delete ratings</span>
<a name="l2631"><span class="linenum">2631</span></a>                  if (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('data', <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('dataid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/dataid.html">dataid</a>)) {
<a name="l2632"><span class="linenum">2632</span></a>                      continue;
<a name="l2633"><span class="linenum">2633</span></a>                  }
<a name="l2634"><span class="linenum">2634</span></a>                  <a class="var it32056" onMouseOver="hilite(32056)" onMouseOut="lolite()" onClick="logVariable('datacontext')" href="../../_variables/datacontext.html">$datacontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2635"><span class="linenum">2635</span></a>                  <a class="var it23230" onMouseOver="hilite(23230)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>-&gt;<a onClick="logVariable('contextid')" class="var it40714" onMouseOver="hilite(40714)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it32056" onMouseOver="hilite(32056)" onMouseOut="lolite()" onClick="logVariable('datacontext')" href="../../_variables/datacontext.html">$datacontext</a>-&gt;<a onClick="logVariable('id')" class="var it39690" onMouseOver="hilite(39690)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2636"><span class="linenum">2636</span></a>                  <a class="var it23230" onMouseOver="hilite(23230)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>-&gt;<a onClick="logVariable('itemid')" class="var it40714" onMouseOver="hilite(40714)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2637"><span class="linenum">2637</span></a>                  <a class="var it6647" onMouseOver="hilite(6647)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a>-&gt;<a class="function" onClick="logFunction('delete_ratings')" href="../../_functions/delete_ratings.html" onMouseOver="funcPopup(event,'delete_ratings')">delete_ratings</a>(<a class="var it23230" onMouseOver="hilite(23230)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>);
<a name="l2638"><span class="linenum">2638</span></a>  
<a name="l2639"><span class="linenum">2639</span></a>  <span class="comment">                // Delete any files that may exist.</span>
<a name="l2640"><span class="linenum">2640</span></a>                  if (<a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('data_content', array('recordid' =&gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), '', 'id')) {
<a name="l2641"><span class="linenum">2641</span></a>                      foreach (<a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a> as <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>) {
<a name="l2642"><span class="linenum">2642</span></a>                          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it32056" onMouseOver="hilite(32056)" onMouseOut="lolite()" onClick="logVariable('datacontext')" href="../../_variables/datacontext.html">$datacontext</a>-&gt;<a onClick="logVariable('id')" class="var it39690" onMouseOver="hilite(39690)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_data', 'content', <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('id')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2643"><span class="linenum">2643</span></a>                      }
<a name="l2644"><span class="linenum">2644</span></a>                  }
<a name="l2645"><span class="linenum">2645</span></a>                  <a class="var it35105" onMouseOver="hilite(35105)" onMouseOut="lolite()" onClick="logVariable('notenrolled')" href="../../_variables/notenrolled.html">$notenrolled</a>[<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>] = true;
<a name="l2646"><span class="linenum">2646</span></a>  
<a name="l2647"><span class="linenum">2647</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('comments', array('itemid' =&gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'commentarea' =&gt; 'database_entry'));
<a name="l2648"><span class="linenum">2648</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('data_content', array('recordid' =&gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2649"><span class="linenum">2649</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('data_records', array('id' =&gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2650"><span class="linenum">2650</span></a>              }
<a name="l2651"><span class="linenum">2651</span></a>          }
<a name="l2652"><span class="linenum">2652</span></a>          <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2653"><span class="linenum">2653</span></a>          <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deletenotenrolled', 'data'), 'error'=&gt;false);
<a name="l2654"><span class="linenum">2654</span></a>      }
<a name="l2655"><span class="linenum">2655</span></a>  
<a name="l2656"><span class="linenum">2656</span></a>  <span class="comment">    // remove all ratings</span>
<a name="l2657"><span class="linenum">2657</span></a>      if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_data_ratings')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_data_ratings.html">reset_data_ratings</a>)) {
<a name="l2658"><span class="linenum">2658</span></a>          if (<a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('datas')" href="../../_variables/datas.html">$datas</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it35101" onMouseOver="hilite(35101)" onMouseOut="lolite()" onClick="logVariable('alldatassql')" href="../../_variables/alldatassql.html">$alldatassql</a>, array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>))) {
<a name="l2659"><span class="linenum">2659</span></a>              foreach (<a class="var it1803" onMouseOver="hilite(1803)" onMouseOut="lolite()" onClick="logVariable('datas')" href="../../_variables/datas.html">$datas</a> as <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>=&gt;<a class="var it1136" onMouseOver="hilite(1136)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../../_variables/unused.html">$unused</a>) {
<a name="l2660"><span class="linenum">2660</span></a>                  if (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('data', <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>)) {
<a name="l2661"><span class="linenum">2661</span></a>                      continue;
<a name="l2662"><span class="linenum">2662</span></a>                  }
<a name="l2663"><span class="linenum">2663</span></a>                  <a class="var it32056" onMouseOver="hilite(32056)" onMouseOut="lolite()" onClick="logVariable('datacontext')" href="../../_variables/datacontext.html">$datacontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2664"><span class="linenum">2664</span></a>  
<a name="l2665"><span class="linenum">2665</span></a>                  <a class="var it23230" onMouseOver="hilite(23230)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>-&gt;<a onClick="logVariable('contextid')" class="var it40714" onMouseOver="hilite(40714)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it32056" onMouseOver="hilite(32056)" onMouseOut="lolite()" onClick="logVariable('datacontext')" href="../../_variables/datacontext.html">$datacontext</a>-&gt;<a onClick="logVariable('id')" class="var it39690" onMouseOver="hilite(39690)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2666"><span class="linenum">2666</span></a>                  <a class="var it6647" onMouseOver="hilite(6647)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a>-&gt;<a class="function" onClick="logFunction('delete_ratings')" href="../../_functions/delete_ratings.html" onMouseOver="funcPopup(event,'delete_ratings')">delete_ratings</a>(<a class="var it23230" onMouseOver="hilite(23230)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>);
<a name="l2667"><span class="linenum">2667</span></a>              }
<a name="l2668"><span class="linenum">2668</span></a>          }
<a name="l2669"><span class="linenum">2669</span></a>  
<a name="l2670"><span class="linenum">2670</span></a>          if (empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_gradebook_grades')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_gradebook_grades.html">reset_gradebook_grades</a>)) {
<a name="l2671"><span class="linenum">2671</span></a>  <span class="comment">            // remove all grades from gradebook</span>
<a name="l2672"><span class="linenum">2672</span></a>              <a class="function" onClick="logFunction('data_reset_gradebook')" href="../../_functions/data_reset_gradebook.html" onMouseOver="funcPopup(event,'data_reset_gradebook')">data_reset_gradebook</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>);
<a name="l2673"><span class="linenum">2673</span></a>          }
<a name="l2674"><span class="linenum">2674</span></a>  
<a name="l2675"><span class="linenum">2675</span></a>          <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallratings'), 'error'=&gt;false);
<a name="l2676"><span class="linenum">2676</span></a>      }
<a name="l2677"><span class="linenum">2677</span></a>  
<a name="l2678"><span class="linenum">2678</span></a>  <span class="comment">    // remove all comments</span>
<a name="l2679"><span class="linenum">2679</span></a>      if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_data_comments')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_data_comments.html">reset_data_comments</a>)) {
<a name="l2680"><span class="linenum">2680</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('comments', &quot;itemid IN (<a class="var it35100" onMouseOver="hilite(35100)" onMouseOut="lolite()" onClick="logVariable('allrecordssql')" href="../../_variables/allrecordssql.html">$allrecordssql</a>) AND commentarea='database_entry'&quot;, array(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>));
<a name="l2681"><span class="linenum">2681</span></a>          <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallcomments'), 'error'=&gt;false);
<a name="l2682"><span class="linenum">2682</span></a>      }
<a name="l2683"><span class="linenum">2683</span></a>  
<a name="l2684"><span class="linenum">2684</span></a>  <span class="comment">    // updating dates - shift may be negative too</span>
<a name="l2685"><span class="linenum">2685</span></a>      if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeshift')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timeshift.html">timeshift</a>) {
<a name="l2686"><span class="linenum">2686</span></a>          <a class="function" onClick="logFunction('shift_course_mod_dates')" href="../../_functions/shift_course_mod_dates.html" onMouseOver="funcPopup(event,'shift_course_mod_dates')">shift_course_mod_dates</a>('data', array('timeavailablefrom', 'timeavailableto', 'timeviewfrom', 'timeviewto'), <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeshift')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/timeshift.html">timeshift</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>);
<a name="l2687"><span class="linenum">2687</span></a>          <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('datechanged'), 'error'=&gt;false);
<a name="l2688"><span class="linenum">2688</span></a>      }
<a name="l2689"><span class="linenum">2689</span></a>  
<a name="l2690"><span class="linenum">2690</span></a>      return <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>;
<a name="l2691"><span class="linenum">2691</span></a>  }
<a name="l2692"><span class="linenum">2692</span></a>  
<a name="l2693"><span class="linenum">2693</span></a>  <span class="comment">/**</span>
<a name="l2694"><span class="linenum">2694</span></a>  <span class="comment"> * Returns all other caps used in module</span>
<a name="l2695"><span class="linenum">2695</span></a>  <span class="comment"> *</span>
<a name="l2696"><span class="linenum">2696</span></a>  <span class="comment"> * @return array</span>
<a name="l2697"><span class="linenum">2697</span></a>  <span class="comment"> */</span>
<a name="l2698"><span class="linenum">2698</span></a>  function <a class="function" onClick="logFunction('data_get_extra_capabilities')" href="../../_functions/data_get_extra_capabilities.html" onMouseOver="funcPopup(event,'data_get_extra_capabilities')">data_get_extra_capabilities</a>() {
<a name="l2699"><span class="linenum">2699</span></a>      return array('moodle/site:accessallgroups', 'moodle/site:viewfullnames', 'moodle/rating:view', 'moodle/rating:viewany', 'moodle/rating:viewall', 'moodle/rating:rate', 'moodle/comment:view', 'moodle/comment:post', 'moodle/comment:delete');
<a name="l2700"><span class="linenum">2700</span></a>  }
<a name="l2701"><span class="linenum">2701</span></a>  
<a name="l2702"><span class="linenum">2702</span></a>  <span class="comment">/**</span>
<a name="l2703"><span class="linenum">2703</span></a>  <span class="comment"> * @param string $feature FEATURE_xx constant for requested feature</span>
<a name="l2704"><span class="linenum">2704</span></a>  <span class="comment"> * @return mixed True if module supports feature, null if doesn't know</span>
<a name="l2705"><span class="linenum">2705</span></a>  <span class="comment"> */</span>
<a name="l2706"><span class="linenum">2706</span></a>  function <a class="function" onClick="logFunction('data_supports')" href="../../_functions/data_supports.html" onMouseOver="funcPopup(event,'data_supports')">data_supports</a>(<a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l2707"><span class="linenum">2707</span></a>      switch(<a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l2708"><span class="linenum">2708</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPS')" href="../../_constants/FEATURE_GROUPS.html" onMouseOver="constPopup(event,'FEATURE_GROUPS')">FEATURE_GROUPS</a>:                  return true;
<a name="l2709"><span class="linenum">2709</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPINGS')" href="../../_constants/FEATURE_GROUPINGS.html" onMouseOver="constPopup(event,'FEATURE_GROUPINGS')">FEATURE_GROUPINGS</a>:               return true;
<a name="l2710"><span class="linenum">2710</span></a>          case <a class="constant" onClick="logConstant('FEATURE_MOD_INTRO')" href="../../_constants/FEATURE_MOD_INTRO.html" onMouseOver="constPopup(event,'FEATURE_MOD_INTRO')">FEATURE_MOD_INTRO</a>:               return true;
<a name="l2711"><span class="linenum">2711</span></a>          case <a class="constant" onClick="logConstant('FEATURE_COMPLETION_TRACKS_VIEWS')" href="../../_constants/FEATURE_COMPLETION_TRACKS_VIEWS.html" onMouseOver="constPopup(event,'FEATURE_COMPLETION_TRACKS_VIEWS')">FEATURE_COMPLETION_TRACKS_VIEWS</a>: return true;
<a name="l2712"><span class="linenum">2712</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_HAS_GRADE')" href="../../_constants/FEATURE_GRADE_HAS_GRADE.html" onMouseOver="constPopup(event,'FEATURE_GRADE_HAS_GRADE')">FEATURE_GRADE_HAS_GRADE</a>:         return true;
<a name="l2713"><span class="linenum">2713</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_OUTCOMES')" href="../../_constants/FEATURE_GRADE_OUTCOMES.html" onMouseOver="constPopup(event,'FEATURE_GRADE_OUTCOMES')">FEATURE_GRADE_OUTCOMES</a>:          return true;
<a name="l2714"><span class="linenum">2714</span></a>          case <a class="constant" onClick="logConstant('FEATURE_RATE')" href="../../_constants/FEATURE_RATE.html" onMouseOver="constPopup(event,'FEATURE_RATE')">FEATURE_RATE</a>:                    return true;
<a name="l2715"><span class="linenum">2715</span></a>          case <a class="constant" onClick="logConstant('FEATURE_BACKUP_MOODLE2')" href="../../_constants/FEATURE_BACKUP_MOODLE2.html" onMouseOver="constPopup(event,'FEATURE_BACKUP_MOODLE2')">FEATURE_BACKUP_MOODLE2</a>:          return true;
<a name="l2716"><span class="linenum">2716</span></a>          case <a class="constant" onClick="logConstant('FEATURE_SHOW_DESCRIPTION')" href="../../_constants/FEATURE_SHOW_DESCRIPTION.html" onMouseOver="constPopup(event,'FEATURE_SHOW_DESCRIPTION')">FEATURE_SHOW_DESCRIPTION</a>:        return true;
<a name="l2717"><span class="linenum">2717</span></a>  
<a name="l2718"><span class="linenum">2718</span></a>          default: return null;
<a name="l2719"><span class="linenum">2719</span></a>      }
<a name="l2720"><span class="linenum">2720</span></a>  }
<a name="l2721"><span class="linenum">2721</span></a>  <span class="comment">/**</span>
<a name="l2722"><span class="linenum">2722</span></a>  <span class="comment"> * @global object</span>
<a name="l2723"><span class="linenum">2723</span></a>  <span class="comment"> * @param array $export</span>
<a name="l2724"><span class="linenum">2724</span></a>  <span class="comment"> * @param string $delimiter_name</span>
<a name="l2725"><span class="linenum">2725</span></a>  <span class="comment"> * @param object $database</span>
<a name="l2726"><span class="linenum">2726</span></a>  <span class="comment"> * @param int $count</span>
<a name="l2727"><span class="linenum">2727</span></a>  <span class="comment"> * @param bool $return</span>
<a name="l2728"><span class="linenum">2728</span></a>  <span class="comment"> * @return string|void</span>
<a name="l2729"><span class="linenum">2729</span></a>  <span class="comment"> */</span>
<a name="l2730"><span class="linenum">2730</span></a>  function <a class="function" onClick="logFunction('data_export_csv')" href="../../_functions/data_export_csv.html" onMouseOver="funcPopup(event,'data_export_csv')">data_export_csv</a>(<a class="var it8818" onMouseOver="hilite(8818)" onMouseOut="lolite()" onClick="logVariable('export')" href="../../_variables/export.html">$export</a>, <a class="var it15466" onMouseOver="hilite(15466)" onMouseOut="lolite()" onClick="logVariable('delimiter_name')" href="../../_variables/delimiter_name.html">$delimiter_name</a>, <a class="var it1959" onMouseOver="hilite(1959)" onMouseOut="lolite()" onClick="logVariable('database')" href="../../_variables/database.html">$database</a>, <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>, <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>=false) {
<a name="l2731"><span class="linenum">2731</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2732"><span class="linenum">2732</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/csvlib.class.php');
<a name="l2733"><span class="linenum">2733</span></a>  
<a name="l2734"><span class="linenum">2734</span></a>      <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="var it1959" onMouseOver="hilite(1959)" onMouseOut="lolite()" onClick="logVariable('database')" href="../../_variables/database.html">$database</a> . '-' . <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> . '-record';
<a name="l2735"><span class="linenum">2735</span></a>      if (<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> &gt; 1) {
<a name="l2736"><span class="linenum">2736</span></a>          <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> .= 's';
<a name="l2737"><span class="linenum">2737</span></a>      }
<a name="l2738"><span class="linenum">2738</span></a>      if (<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>) {
<a name="l2739"><span class="linenum">2739</span></a>          return <a class="class" onClick="logClass('csv_export_writer')" href="../../_classes/csv_export_writer.html" onMouseOver="classPopup(event,'csv_export_writer')">csv_export_writer</a>::<a class="function" onClick="logFunction('print_array')" href="../../_functions/print_array.html" onMouseOver="funcPopup(event,'print_array')">print_array</a>(<a class="var it8818" onMouseOver="hilite(8818)" onMouseOut="lolite()" onClick="logVariable('export')" href="../../_variables/export.html">$export</a>, <a class="var it15466" onMouseOver="hilite(15466)" onMouseOut="lolite()" onClick="logVariable('delimiter_name')" href="../../_variables/delimiter_name.html">$delimiter_name</a>, '&quot;', true);
<a name="l2740"><span class="linenum">2740</span></a>      } else {
<a name="l2741"><span class="linenum">2741</span></a>          <a class="class" onClick="logClass('csv_export_writer')" href="../../_classes/csv_export_writer.html" onMouseOver="classPopup(event,'csv_export_writer')">csv_export_writer</a>::<a class="function" onClick="logFunction('download_array')" href="../../_functions/download_array.html" onMouseOver="funcPopup(event,'download_array')">download_array</a>(<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>, <a class="var it8818" onMouseOver="hilite(8818)" onMouseOut="lolite()" onClick="logVariable('export')" href="../../_variables/export.html">$export</a>, <a class="var it15466" onMouseOver="hilite(15466)" onMouseOut="lolite()" onClick="logVariable('delimiter_name')" href="../../_variables/delimiter_name.html">$delimiter_name</a>);
<a name="l2742"><span class="linenum">2742</span></a>      }
<a name="l2743"><span class="linenum">2743</span></a>  }
<a name="l2744"><span class="linenum">2744</span></a>  
<a name="l2745"><span class="linenum">2745</span></a>  <span class="comment">/**</span>
<a name="l2746"><span class="linenum">2746</span></a>  <span class="comment"> * @global object</span>
<a name="l2747"><span class="linenum">2747</span></a>  <span class="comment"> * @param array $export</span>
<a name="l2748"><span class="linenum">2748</span></a>  <span class="comment"> * @param string $dataname</span>
<a name="l2749"><span class="linenum">2749</span></a>  <span class="comment"> * @param int $count</span>
<a name="l2750"><span class="linenum">2750</span></a>  <span class="comment"> * @return string</span>
<a name="l2751"><span class="linenum">2751</span></a>  <span class="comment"> */</span>
<a name="l2752"><span class="linenum">2752</span></a>  function <a class="function" onClick="logFunction('data_export_xls')" href="../../_functions/data_export_xls.html" onMouseOver="funcPopup(event,'data_export_xls')">data_export_xls</a>(<a class="var it8818" onMouseOver="hilite(8818)" onMouseOut="lolite()" onClick="logVariable('export')" href="../../_variables/export.html">$export</a>, <a class="var it30404" onMouseOver="hilite(30404)" onMouseOut="lolite()" onClick="logVariable('dataname')" href="../../_variables/dataname.html">$dataname</a>, <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>) {
<a name="l2753"><span class="linenum">2753</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2754"><span class="linenum">2754</span></a>      require_once(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/excellib.class.php&quot;);
<a name="l2755"><span class="linenum">2755</span></a>      <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="function" onClick="logFunction('clean_filename')" href="../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(&quot;{<a class="var it30404" onMouseOver="hilite(30404)" onMouseOut="lolite()" onClick="logVariable('dataname')" href="../../_variables/dataname.html">$dataname</a>}-{<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>}_record&quot;);
<a name="l2756"><span class="linenum">2756</span></a>      if (<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> &gt; 1) {
<a name="l2757"><span class="linenum">2757</span></a>          <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> .= 's';
<a name="l2758"><span class="linenum">2758</span></a>      }
<a name="l2759"><span class="linenum">2759</span></a>      <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> .= <a class="function" onClick="logFunction('clean_filename')" href="../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>('-' . <a class="phpfunction" onClick="logFunction('gmdate')" href="../../_functions/gmdate.html" onMouseOver="phpfuncPopup(event,'gmdate')">gmdate</a>(&quot;Ymd_Hi&quot;));
<a name="l2760"><span class="linenum">2760</span></a>      <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> .= '.xls';
<a name="l2761"><span class="linenum">2761</span></a>  
<a name="l2762"><span class="linenum">2762</span></a>      <a class="var it35109" onMouseOver="hilite(35109)" onMouseOut="lolite()" onClick="logVariable('filearg')" href="../../_variables/filearg.html">$filearg</a> = '-';
<a name="l2763"><span class="linenum">2763</span></a>      <a class="var it2087" onMouseOver="hilite(2087)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../../_variables/workbook.html">$workbook</a> = <span class="keyword">new </span><a class="class" onClick="logClass('MoodleExcelWorkbook')" href="../../_classes/moodleexcelworkbook.html" onMouseOver="classPopup(event,'moodleexcelworkbook')">MoodleExcelWorkbook</a>(<a class="var it35109" onMouseOver="hilite(35109)" onMouseOut="lolite()" onClick="logVariable('filearg')" href="../../_variables/filearg.html">$filearg</a>);
<a name="l2764"><span class="linenum">2764</span></a>      <a class="var it2087" onMouseOver="hilite(2087)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('send')" href="../../_functions/send.html" onMouseOver="funcPopup(event,'send')">send</a>(<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>);
<a name="l2765"><span class="linenum">2765</span></a>      <a class="var it2853" onMouseOver="hilite(2853)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../../_variables/worksheet.html">$worksheet</a> = array();
<a name="l2766"><span class="linenum">2766</span></a>      <a class="var it2853" onMouseOver="hilite(2853)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../../_variables/worksheet.html">$worksheet</a>[0] = <a class="var it2087" onMouseOver="hilite(2087)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('add_worksheet')" href="../../_functions/add_worksheet.html" onMouseOver="funcPopup(event,'add_worksheet')">add_worksheet</a>('');
<a name="l2767"><span class="linenum">2767</span></a>      <a class="var it18197" onMouseOver="hilite(18197)" onMouseOut="lolite()" onClick="logVariable('rowno')" href="../../_variables/rowno.html">$rowno</a> = 0;
<a name="l2768"><span class="linenum">2768</span></a>      foreach (<a class="var it8818" onMouseOver="hilite(8818)" onMouseOut="lolite()" onClick="logVariable('export')" href="../../_variables/export.html">$export</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>) {
<a name="l2769"><span class="linenum">2769</span></a>          <a class="var it35110" onMouseOver="hilite(35110)" onMouseOut="lolite()" onClick="logVariable('colno')" href="../../_variables/colno.html">$colno</a> = 0;
<a name="l2770"><span class="linenum">2770</span></a>          foreach(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> as <a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('col')" href="../../_variables/col.html">$col</a>) {
<a name="l2771"><span class="linenum">2771</span></a>              <a class="var it2853" onMouseOver="hilite(2853)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../../_variables/worksheet.html">$worksheet</a>[0]-&gt;<a class="function" onClick="logFunction('write')" href="../../_functions/write.html" onMouseOver="funcPopup(event,'write')">write</a>(<a class="var it18197" onMouseOver="hilite(18197)" onMouseOut="lolite()" onClick="logVariable('rowno')" href="../../_variables/rowno.html">$rowno</a>, <a class="var it35110" onMouseOver="hilite(35110)" onMouseOut="lolite()" onClick="logVariable('colno')" href="../../_variables/colno.html">$colno</a>, <a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('col')" href="../../_variables/col.html">$col</a>);
<a name="l2772"><span class="linenum">2772</span></a>              <a class="var it35110" onMouseOver="hilite(35110)" onMouseOut="lolite()" onClick="logVariable('colno')" href="../../_variables/colno.html">$colno</a>++;
<a name="l2773"><span class="linenum">2773</span></a>          }
<a name="l2774"><span class="linenum">2774</span></a>          <a class="var it18197" onMouseOver="hilite(18197)" onMouseOut="lolite()" onClick="logVariable('rowno')" href="../../_variables/rowno.html">$rowno</a>++;
<a name="l2775"><span class="linenum">2775</span></a>      }
<a name="l2776"><span class="linenum">2776</span></a>      <a class="var it2087" onMouseOver="hilite(2087)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2777"><span class="linenum">2777</span></a>      return <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>;
<a name="l2778"><span class="linenum">2778</span></a>  }
<a name="l2779"><span class="linenum">2779</span></a>  
<a name="l2780"><span class="linenum">2780</span></a>  <span class="comment">/**</span>
<a name="l2781"><span class="linenum">2781</span></a>  <span class="comment"> * @global object</span>
<a name="l2782"><span class="linenum">2782</span></a>  <span class="comment"> * @param array $export</span>
<a name="l2783"><span class="linenum">2783</span></a>  <span class="comment"> * @param string $dataname</span>
<a name="l2784"><span class="linenum">2784</span></a>  <span class="comment"> * @param int $count</span>
<a name="l2785"><span class="linenum">2785</span></a>  <span class="comment"> * @param string</span>
<a name="l2786"><span class="linenum">2786</span></a>  <span class="comment"> */</span>
<a name="l2787"><span class="linenum">2787</span></a>  function <a class="function" onClick="logFunction('data_export_ods')" href="../../_functions/data_export_ods.html" onMouseOver="funcPopup(event,'data_export_ods')">data_export_ods</a>(<a class="var it8818" onMouseOver="hilite(8818)" onMouseOut="lolite()" onClick="logVariable('export')" href="../../_variables/export.html">$export</a>, <a class="var it30404" onMouseOver="hilite(30404)" onMouseOut="lolite()" onClick="logVariable('dataname')" href="../../_variables/dataname.html">$dataname</a>, <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>) {
<a name="l2788"><span class="linenum">2788</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2789"><span class="linenum">2789</span></a>      require_once(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/odslib.class.php&quot;);
<a name="l2790"><span class="linenum">2790</span></a>      <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="function" onClick="logFunction('clean_filename')" href="../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(&quot;{<a class="var it30404" onMouseOver="hilite(30404)" onMouseOut="lolite()" onClick="logVariable('dataname')" href="../../_variables/dataname.html">$dataname</a>}-{<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>}_record&quot;);
<a name="l2791"><span class="linenum">2791</span></a>      if (<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> &gt; 1) {
<a name="l2792"><span class="linenum">2792</span></a>          <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> .= 's';
<a name="l2793"><span class="linenum">2793</span></a>      }
<a name="l2794"><span class="linenum">2794</span></a>      <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> .= <a class="function" onClick="logFunction('clean_filename')" href="../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>('-' . <a class="phpfunction" onClick="logFunction('gmdate')" href="../../_functions/gmdate.html" onMouseOver="phpfuncPopup(event,'gmdate')">gmdate</a>(&quot;Ymd_Hi&quot;));
<a name="l2795"><span class="linenum">2795</span></a>      <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> .= '.ods';
<a name="l2796"><span class="linenum">2796</span></a>      <a class="var it35109" onMouseOver="hilite(35109)" onMouseOut="lolite()" onClick="logVariable('filearg')" href="../../_variables/filearg.html">$filearg</a> = '-';
<a name="l2797"><span class="linenum">2797</span></a>      <a class="var it2087" onMouseOver="hilite(2087)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../../_variables/workbook.html">$workbook</a> = <span class="keyword">new </span><a class="class" onClick="logClass('MoodleODSWorkbook')" href="../../_classes/moodleodsworkbook.html" onMouseOver="classPopup(event,'moodleodsworkbook')">MoodleODSWorkbook</a>(<a class="var it35109" onMouseOver="hilite(35109)" onMouseOut="lolite()" onClick="logVariable('filearg')" href="../../_variables/filearg.html">$filearg</a>);
<a name="l2798"><span class="linenum">2798</span></a>      <a class="var it2087" onMouseOver="hilite(2087)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('send')" href="../../_functions/send.html" onMouseOver="funcPopup(event,'send')">send</a>(<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>);
<a name="l2799"><span class="linenum">2799</span></a>      <a class="var it2853" onMouseOver="hilite(2853)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../../_variables/worksheet.html">$worksheet</a> = array();
<a name="l2800"><span class="linenum">2800</span></a>      <a class="var it2853" onMouseOver="hilite(2853)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../../_variables/worksheet.html">$worksheet</a>[0] = <a class="var it2087" onMouseOver="hilite(2087)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('add_worksheet')" href="../../_functions/add_worksheet.html" onMouseOver="funcPopup(event,'add_worksheet')">add_worksheet</a>('');
<a name="l2801"><span class="linenum">2801</span></a>      <a class="var it18197" onMouseOver="hilite(18197)" onMouseOut="lolite()" onClick="logVariable('rowno')" href="../../_variables/rowno.html">$rowno</a> = 0;
<a name="l2802"><span class="linenum">2802</span></a>      foreach (<a class="var it8818" onMouseOver="hilite(8818)" onMouseOut="lolite()" onClick="logVariable('export')" href="../../_variables/export.html">$export</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>) {
<a name="l2803"><span class="linenum">2803</span></a>          <a class="var it35110" onMouseOver="hilite(35110)" onMouseOut="lolite()" onClick="logVariable('colno')" href="../../_variables/colno.html">$colno</a> = 0;
<a name="l2804"><span class="linenum">2804</span></a>          foreach(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> as <a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('col')" href="../../_variables/col.html">$col</a>) {
<a name="l2805"><span class="linenum">2805</span></a>              <a class="var it2853" onMouseOver="hilite(2853)" onMouseOut="lolite()" onClick="logVariable('worksheet')" href="../../_variables/worksheet.html">$worksheet</a>[0]-&gt;<a class="function" onClick="logFunction('write')" href="../../_functions/write.html" onMouseOver="funcPopup(event,'write')">write</a>(<a class="var it18197" onMouseOver="hilite(18197)" onMouseOut="lolite()" onClick="logVariable('rowno')" href="../../_variables/rowno.html">$rowno</a>, <a class="var it35110" onMouseOver="hilite(35110)" onMouseOut="lolite()" onClick="logVariable('colno')" href="../../_variables/colno.html">$colno</a>, <a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('col')" href="../../_variables/col.html">$col</a>);
<a name="l2806"><span class="linenum">2806</span></a>              <a class="var it35110" onMouseOver="hilite(35110)" onMouseOut="lolite()" onClick="logVariable('colno')" href="../../_variables/colno.html">$colno</a>++;
<a name="l2807"><span class="linenum">2807</span></a>          }
<a name="l2808"><span class="linenum">2808</span></a>          <a class="var it18197" onMouseOver="hilite(18197)" onMouseOut="lolite()" onClick="logVariable('rowno')" href="../../_variables/rowno.html">$rowno</a>++;
<a name="l2809"><span class="linenum">2809</span></a>      }
<a name="l2810"><span class="linenum">2810</span></a>      <a class="var it2087" onMouseOver="hilite(2087)" onMouseOut="lolite()" onClick="logVariable('workbook')" href="../../_variables/workbook.html">$workbook</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2811"><span class="linenum">2811</span></a>      return <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>;
<a name="l2812"><span class="linenum">2812</span></a>  }
<a name="l2813"><span class="linenum">2813</span></a>  
<a name="l2814"><span class="linenum">2814</span></a>  <span class="comment">/**</span>
<a name="l2815"><span class="linenum">2815</span></a>  <span class="comment"> * @global object</span>
<a name="l2816"><span class="linenum">2816</span></a>  <span class="comment"> * @param int $dataid</span>
<a name="l2817"><span class="linenum">2817</span></a>  <span class="comment"> * @param array $fields</span>
<a name="l2818"><span class="linenum">2818</span></a>  <span class="comment"> * @param array $selectedfields</span>
<a name="l2819"><span class="linenum">2819</span></a>  <span class="comment"> * @param int $currentgroup group ID of the current group. This is used for</span>
<a name="l2820"><span class="linenum">2820</span></a>  <span class="comment"> * exporting data while maintaining group divisions.</span>
<a name="l2821"><span class="linenum">2821</span></a>  <span class="comment"> * @param object $context the context in which the operation is performed (for capability checks)</span>
<a name="l2822"><span class="linenum">2822</span></a>  <span class="comment"> * @param bool $userdetails whether to include the details of the record author</span>
<a name="l2823"><span class="linenum">2823</span></a>  <span class="comment"> * @param bool $time whether to include time created/modified</span>
<a name="l2824"><span class="linenum">2824</span></a>  <span class="comment"> * @param bool $approval whether to include approval status</span>
<a name="l2825"><span class="linenum">2825</span></a>  <span class="comment"> * @return array</span>
<a name="l2826"><span class="linenum">2826</span></a>  <span class="comment"> */</span>
<a name="l2827"><span class="linenum">2827</span></a>  function <a class="function" onClick="logFunction('data_get_exportdata')" href="../../_functions/data_get_exportdata.html" onMouseOver="funcPopup(event,'data_get_exportdata')">data_get_exportdata</a>(<a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>, <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>, <a class="var it28104" onMouseOver="hilite(28104)" onMouseOut="lolite()" onClick="logVariable('selectedfields')" href="../../_variables/selectedfields.html">$selectedfields</a>, <a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>=0, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>=null,
<a name="l2828"><span class="linenum">2828</span></a>                               <a class="var it2961" onMouseOver="hilite(2961)" onMouseOut="lolite()" onClick="logVariable('userdetails')" href="../../_variables/userdetails.html">$userdetails</a>=false, <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a>=false, <a class="var it6396" onMouseOver="hilite(6396)" onMouseOut="lolite()" onClick="logVariable('approval')" href="../../_variables/approval.html">$approval</a>=false) {
<a name="l2829"><span class="linenum">2829</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2830"><span class="linenum">2830</span></a>  
<a name="l2831"><span class="linenum">2831</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2832"><span class="linenum">2832</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l2833"><span class="linenum">2833</span></a>      }
<a name="l2834"><span class="linenum">2834</span></a>  <span class="comment">    // exporting user data needs special permission</span>
<a name="l2835"><span class="linenum">2835</span></a>      <a class="var it2961" onMouseOver="hilite(2961)" onMouseOut="lolite()" onClick="logVariable('userdetails')" href="../../_variables/userdetails.html">$userdetails</a> = <a class="var it2961" onMouseOver="hilite(2961)" onMouseOut="lolite()" onClick="logVariable('userdetails')" href="../../_variables/userdetails.html">$userdetails</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:exportuserinfo', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l2836"><span class="linenum">2836</span></a>  
<a name="l2837"><span class="linenum">2837</span></a>      <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a> = array();
<a name="l2838"><span class="linenum">2838</span></a>  
<a name="l2839"><span class="linenum">2839</span></a>  <span class="comment">    // populate the header in first row of export</span>
<a name="l2840"><span class="linenum">2840</span></a>      foreach(<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l2841"><span class="linenum">2841</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id, <a class="var it28104" onMouseOver="hilite(28104)" onMouseOut="lolite()" onClick="logVariable('selectedfields')" href="../../_variables/selectedfields.html">$selectedfields</a>)) {
<a name="l2842"><span class="linenum">2842</span></a>  <span class="comment">            // ignore values we aren't exporting</span>
<a name="l2843"><span class="linenum">2843</span></a>              unset(<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]);
<a name="l2844"><span class="linenum">2844</span></a>          } else {
<a name="l2845"><span class="linenum">2845</span></a>              <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[0][] = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name;
<a name="l2846"><span class="linenum">2846</span></a>          }
<a name="l2847"><span class="linenum">2847</span></a>      }
<a name="l2848"><span class="linenum">2848</span></a>      if (<a class="var it2961" onMouseOver="hilite(2961)" onMouseOut="lolite()" onClick="logVariable('userdetails')" href="../../_variables/userdetails.html">$userdetails</a>) {
<a name="l2849"><span class="linenum">2849</span></a>          <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[0][] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('user');
<a name="l2850"><span class="linenum">2850</span></a>          <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[0][] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('username');
<a name="l2851"><span class="linenum">2851</span></a>          <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[0][] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('email');
<a name="l2852"><span class="linenum">2852</span></a>      }
<a name="l2853"><span class="linenum">2853</span></a>      if (<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a>) {
<a name="l2854"><span class="linenum">2854</span></a>          <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[0][] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('timeadded', 'data');
<a name="l2855"><span class="linenum">2855</span></a>          <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[0][] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('timemodified', 'data');
<a name="l2856"><span class="linenum">2856</span></a>      }
<a name="l2857"><span class="linenum">2857</span></a>      if (<a class="var it6396" onMouseOver="hilite(6396)" onMouseOut="lolite()" onClick="logVariable('approval')" href="../../_variables/approval.html">$approval</a>) {
<a name="l2858"><span class="linenum">2858</span></a>          <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[0][] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('approved', 'data');
<a name="l2859"><span class="linenum">2859</span></a>      }
<a name="l2860"><span class="linenum">2860</span></a>  
<a name="l2861"><span class="linenum">2861</span></a>      <a class="var it35111" onMouseOver="hilite(35111)" onMouseOut="lolite()" onClick="logVariable('datarecords')" href="../../_variables/datarecords.html">$datarecords</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('data_records', array('dataid'=&gt;<a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>));
<a name="l2862"><span class="linenum">2862</span></a>      <a class="phpfunction" onClick="logFunction('ksort')" href="../../_functions/ksort.html" onMouseOver="phpfuncPopup(event,'ksort')">ksort</a>(<a class="var it35111" onMouseOver="hilite(35111)" onMouseOut="lolite()" onClick="logVariable('datarecords')" href="../../_variables/datarecords.html">$datarecords</a>);
<a name="l2863"><span class="linenum">2863</span></a>      <a class="var it3038" onMouseOver="hilite(3038)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a> = 1;
<a name="l2864"><span class="linenum">2864</span></a>      foreach(<a class="var it35111" onMouseOver="hilite(35111)" onMouseOut="lolite()" onClick="logVariable('datarecords')" href="../../_variables/datarecords.html">$datarecords</a> as <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l2865"><span class="linenum">2865</span></a>  <span class="comment">        // get content indexed by fieldid</span>
<a name="l2866"><span class="linenum">2866</span></a>          if (<a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>) {
<a name="l2867"><span class="linenum">2867</span></a>              <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a> = 'SELECT c.fieldid, c.content, c.content1, c.content2, c.content3, c.content4 FROM {data_content} c, {data_records} r WHERE c.recordid = ? AND r.id = c.recordid AND r.groupid = ?';
<a name="l2868"><span class="linenum">2868</span></a>              <a class="var it1076" onMouseOver="hilite(1076)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../_variables/where.html">$where</a> = array(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>);
<a name="l2869"><span class="linenum">2869</span></a>          } else {
<a name="l2870"><span class="linenum">2870</span></a>              <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a> = 'SELECT fieldid, content, content1, content2, content3, content4 FROM {data_content} WHERE recordid = ?';
<a name="l2871"><span class="linenum">2871</span></a>              <a class="var it1076" onMouseOver="hilite(1076)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../_variables/where.html">$where</a> = array(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2872"><span class="linenum">2872</span></a>          }
<a name="l2873"><span class="linenum">2873</span></a>  
<a name="l2874"><span class="linenum">2874</span></a>          if( <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>, <a class="var it1076" onMouseOver="hilite(1076)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../_variables/where.html">$where</a>) ) {
<a name="l2875"><span class="linenum">2875</span></a>              foreach(<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l2876"><span class="linenum">2876</span></a>                  <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a> = '';
<a name="l2877"><span class="linenum">2877</span></a>                  if(isset(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id])) {
<a name="l2878"><span class="linenum">2878</span></a>                      <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a> = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a class="function" onClick="logFunction('export_text_value')" href="../../_functions/export_text_value.html" onMouseOver="funcPopup(event,'export_text_value')">export_text_value</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;id]);
<a name="l2879"><span class="linenum">2879</span></a>                  }
<a name="l2880"><span class="linenum">2880</span></a>                  <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[<a class="var it3038" onMouseOver="hilite(3038)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>][] = <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a>;
<a name="l2881"><span class="linenum">2881</span></a>              }
<a name="l2882"><span class="linenum">2882</span></a>              if (<a class="var it2961" onMouseOver="hilite(2961)" onMouseOut="lolite()" onClick="logVariable('userdetails')" href="../../_variables/userdetails.html">$userdetails</a>) { // Add user details to the export data
<a name="l2883"><span class="linenum">2883</span></a>                  <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../../_variables/userdata.html">$userdata</a> = <a class="function" onClick="logFunction('get_complete_user_data')" href="../../_functions/get_complete_user_data.html" onMouseOver="funcPopup(event,'get_complete_user_data')">get_complete_user_data</a>('id', <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>);
<a name="l2884"><span class="linenum">2884</span></a>                  <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[<a class="var it3038" onMouseOver="hilite(3038)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>][] = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../../_variables/userdata.html">$userdata</a>);
<a name="l2885"><span class="linenum">2885</span></a>                  <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[<a class="var it3038" onMouseOver="hilite(3038)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>][] = <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../../_variables/userdata.html">$userdata</a>-&gt;<a onClick="logVariable('username')" class="var it40090" onMouseOver="hilite(40090)" onMouseOut="lolite()" href="../../_variables/username.html">username</a>;
<a name="l2886"><span class="linenum">2886</span></a>                  <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[<a class="var it3038" onMouseOver="hilite(3038)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>][] = <a class="var it522" onMouseOver="hilite(522)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../../_variables/userdata.html">$userdata</a>-&gt;<a onClick="logVariable('email')" class="var it40090" onMouseOver="hilite(40090)" onMouseOut="lolite()" href="../../_variables/email.html">email</a>;
<a name="l2887"><span class="linenum">2887</span></a>              }
<a name="l2888"><span class="linenum">2888</span></a>              if (<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a>) { // Add time added / modified
<a name="l2889"><span class="linenum">2889</span></a>                  <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[<a class="var it3038" onMouseOver="hilite(3038)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>][] = <a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timecreated')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>);
<a name="l2890"><span class="linenum">2890</span></a>                  <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[<a class="var it3038" onMouseOver="hilite(3038)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>][] = <a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>);
<a name="l2891"><span class="linenum">2891</span></a>              }
<a name="l2892"><span class="linenum">2892</span></a>              if (<a class="var it6396" onMouseOver="hilite(6396)" onMouseOut="lolite()" onClick="logVariable('approval')" href="../../_variables/approval.html">$approval</a>) { // Add approval status
<a name="l2893"><span class="linenum">2893</span></a>                  <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>[<a class="var it3038" onMouseOver="hilite(3038)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>][] = (int) <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('approved')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a>;
<a name="l2894"><span class="linenum">2894</span></a>              }
<a name="l2895"><span class="linenum">2895</span></a>          }
<a name="l2896"><span class="linenum">2896</span></a>          <a class="var it3038" onMouseOver="hilite(3038)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>++;
<a name="l2897"><span class="linenum">2897</span></a>      }
<a name="l2898"><span class="linenum">2898</span></a>      <a class="var it3038" onMouseOver="hilite(3038)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../_variables/line.html">$line</a>--;
<a name="l2899"><span class="linenum">2899</span></a>      return <a class="var it24104" onMouseOver="hilite(24104)" onMouseOut="lolite()" onClick="logVariable('exportdata')" href="../../_variables/exportdata.html">$exportdata</a>;
<a name="l2900"><span class="linenum">2900</span></a>  }
<a name="l2901"><span class="linenum">2901</span></a>  
<a name="l2902"><span class="linenum">2902</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l2903"><span class="linenum">2903</span></a>  <span class="comment">// File API                                                                   //</span>
<a name="l2904"><span class="linenum">2904</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l2905"><span class="linenum">2905</span></a>  
<a name="l2906"><span class="linenum">2906</span></a>  <span class="comment">/**</span>
<a name="l2907"><span class="linenum">2907</span></a>  <span class="comment"> * Lists all browsable file areas</span>
<a name="l2908"><span class="linenum">2908</span></a>  <span class="comment"> *</span>
<a name="l2909"><span class="linenum">2909</span></a>  <span class="comment"> * @package  mod_data</span>
<a name="l2910"><span class="linenum">2910</span></a>  <span class="comment"> * @category files</span>
<a name="l2911"><span class="linenum">2911</span></a>  <span class="comment"> * @param stdClass $course course object</span>
<a name="l2912"><span class="linenum">2912</span></a>  <span class="comment"> * @param stdClass $cm course module object</span>
<a name="l2913"><span class="linenum">2913</span></a>  <span class="comment"> * @param stdClass $context context object</span>
<a name="l2914"><span class="linenum">2914</span></a>  <span class="comment"> * @return array</span>
<a name="l2915"><span class="linenum">2915</span></a>  <span class="comment"> */</span>
<a name="l2916"><span class="linenum">2916</span></a>  function <a class="function" onClick="logFunction('data_get_file_areas')" href="../../_functions/data_get_file_areas.html" onMouseOver="funcPopup(event,'data_get_file_areas')">data_get_file_areas</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l2917"><span class="linenum">2917</span></a>      return array('content' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('areacontent', 'mod_data'));
<a name="l2918"><span class="linenum">2918</span></a>  }
<a name="l2919"><span class="linenum">2919</span></a>  
<a name="l2920"><span class="linenum">2920</span></a>  <span class="comment">/**</span>
<a name="l2921"><span class="linenum">2921</span></a>  <span class="comment"> * File browsing support for data module.</span>
<a name="l2922"><span class="linenum">2922</span></a>  <span class="comment"> *</span>
<a name="l2923"><span class="linenum">2923</span></a>  <span class="comment"> * @param file_browser $browser</span>
<a name="l2924"><span class="linenum">2924</span></a>  <span class="comment"> * @param array $areas</span>
<a name="l2925"><span class="linenum">2925</span></a>  <span class="comment"> * @param stdClass $course</span>
<a name="l2926"><span class="linenum">2926</span></a>  <span class="comment"> * @param cm_info $cm</span>
<a name="l2927"><span class="linenum">2927</span></a>  <span class="comment"> * @param context $context</span>
<a name="l2928"><span class="linenum">2928</span></a>  <span class="comment"> * @param string $filearea</span>
<a name="l2929"><span class="linenum">2929</span></a>  <span class="comment"> * @param int $itemid</span>
<a name="l2930"><span class="linenum">2930</span></a>  <span class="comment"> * @param string $filepath</span>
<a name="l2931"><span class="linenum">2931</span></a>  <span class="comment"> * @param string $filename</span>
<a name="l2932"><span class="linenum">2932</span></a>  <span class="comment"> * @return file_info_stored file_info_stored instance or null if not found</span>
<a name="l2933"><span class="linenum">2933</span></a>  <span class="comment"> */</span>
<a name="l2934"><span class="linenum">2934</span></a>  function <a class="function" onClick="logFunction('data_get_file_info')" href="../../_functions/data_get_file_info.html" onMouseOver="funcPopup(event,'data_get_file_info')">data_get_file_info</a>(<a class="var it577" onMouseOver="hilite(577)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>, <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>) {
<a name="l2935"><span class="linenum">2935</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l2936"><span class="linenum">2936</span></a>  
<a name="l2937"><span class="linenum">2937</span></a>      if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/contextlevel.html">contextlevel</a> != <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>) {
<a name="l2938"><span class="linenum">2938</span></a>          return null;
<a name="l2939"><span class="linenum">2939</span></a>      }
<a name="l2940"><span class="linenum">2940</span></a>  
<a name="l2941"><span class="linenum">2941</span></a>      if (!isset(<a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>[<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>])) {
<a name="l2942"><span class="linenum">2942</span></a>          return null;
<a name="l2943"><span class="linenum">2943</span></a>      }
<a name="l2944"><span class="linenum">2944</span></a>  
<a name="l2945"><span class="linenum">2945</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>)) {
<a name="l2946"><span class="linenum">2946</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../mod/data/locallib.php.html">/mod/data/locallib.php</a>');
<a name="l2947"><span class="linenum">2947</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('data_file_info_container')" href="../../_classes/data_file_info_container.html" onMouseOver="classPopup(event,'data_file_info_container')">data_file_info_container</a>(<a class="var it577" onMouseOver="hilite(577)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>, <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>);
<a name="l2948"><span class="linenum">2948</span></a>      }
<a name="l2949"><span class="linenum">2949</span></a>  
<a name="l2950"><span class="linenum">2950</span></a>      if (!<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_content', array('id'=&gt;<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>))) {
<a name="l2951"><span class="linenum">2951</span></a>          return null;
<a name="l2952"><span class="linenum">2952</span></a>      }
<a name="l2953"><span class="linenum">2953</span></a>  
<a name="l2954"><span class="linenum">2954</span></a>      if (!<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_fields', array('id'=&gt;<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('fieldid')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/fieldid.html">fieldid</a>))) {
<a name="l2955"><span class="linenum">2955</span></a>          return null;
<a name="l2956"><span class="linenum">2956</span></a>      }
<a name="l2957"><span class="linenum">2957</span></a>  
<a name="l2958"><span class="linenum">2958</span></a>      if (!<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_records', array('id'=&gt;<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('recordid')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/recordid.html">recordid</a>))) {
<a name="l2959"><span class="linenum">2959</span></a>          return null;
<a name="l2960"><span class="linenum">2960</span></a>      }
<a name="l2961"><span class="linenum">2961</span></a>  
<a name="l2962"><span class="linenum">2962</span></a>      if (!<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data', array('id'=&gt;<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('dataid')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/dataid.html">dataid</a>))) {
<a name="l2963"><span class="linenum">2963</span></a>          return null;
<a name="l2964"><span class="linenum">2964</span></a>      }
<a name="l2965"><span class="linenum">2965</span></a>  
<a name="l2966"><span class="linenum">2966</span></a>  <span class="comment">    //check if approved</span>
<a name="l2967"><span class="linenum">2967</span></a>      if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('approval')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/approval.html">approval</a> and !<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('approved')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a> and !<a class="function" onClick="logFunction('data_isowner')" href="../../_functions/data_isowner.html" onMouseOver="funcPopup(event,'data_isowner')">data_isowner</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:approve', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2968"><span class="linenum">2968</span></a>          return null;
<a name="l2969"><span class="linenum">2969</span></a>      }
<a name="l2970"><span class="linenum">2970</span></a>  
<a name="l2971"><span class="linenum">2971</span></a>  <span class="comment">    // group access</span>
<a name="l2972"><span class="linenum">2972</span></a>      if (<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('groupid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>) {
<a name="l2973"><span class="linenum">2973</span></a>          <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l2974"><span class="linenum">2974</span></a>          if (<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2975"><span class="linenum">2975</span></a>              if (!<a class="function" onClick="logFunction('groups_is_member')" href="../../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('groupid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>)) {
<a name="l2976"><span class="linenum">2976</span></a>                  return null;
<a name="l2977"><span class="linenum">2977</span></a>              }
<a name="l2978"><span class="linenum">2978</span></a>          }
<a name="l2979"><span class="linenum">2979</span></a>      }
<a name="l2980"><span class="linenum">2980</span></a>  
<a name="l2981"><span class="linenum">2981</span></a>      <a class="var it4069" onMouseOver="hilite(4069)" onMouseOut="lolite()" onClick="logVariable('fieldobj')" href="../../_variables/fieldobj.html">$fieldobj</a> = <a class="function" onClick="logFunction('data_get_field')" href="../../_functions/data_get_field.html" onMouseOver="funcPopup(event,'data_get_field')">data_get_field</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l2982"><span class="linenum">2982</span></a>  
<a name="l2983"><span class="linenum">2983</span></a>      <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>) ? '/' : <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>;
<a name="l2984"><span class="linenum">2984</span></a>      <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>) ? '.' : <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>;
<a name="l2985"><span class="linenum">2985</span></a>      if (!<a class="var it4069" onMouseOver="hilite(4069)" onMouseOut="lolite()" onClick="logVariable('fieldobj')" href="../../_variables/fieldobj.html">$fieldobj</a>-&gt;<a class="function" onClick="logFunction('file_ok')" href="../../_functions/file_ok.html" onMouseOver="funcPopup(event,'file_ok')">file_ok</a>(<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>.<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>)) {
<a name="l2986"><span class="linenum">2986</span></a>          return null;
<a name="l2987"><span class="linenum">2987</span></a>      }
<a name="l2988"><span class="linenum">2988</span></a>  
<a name="l2989"><span class="linenum">2989</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2990"><span class="linenum">2990</span></a>      if (!(<a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_data', <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>, <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>))) {
<a name="l2991"><span class="linenum">2991</span></a>          return null;
<a name="l2992"><span class="linenum">2992</span></a>      }
<a name="l2993"><span class="linenum">2993</span></a>  
<a name="l2994"><span class="linenum">2994</span></a>  <span class="comment">    // Checks to see if the user can manage files or is the owner.</span>
<a name="l2995"><span class="linenum">2995</span></a>  <span class="comment">    // TODO MDL-33805 - Do not use userid here and move the capability check above.</span>
<a name="l2996"><span class="linenum">2996</span></a>      if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:managefiles', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) &amp;&amp; <a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a>-&gt;<a class="function" onClick="logFunction('get_userid')" href="../../_functions/get_userid.html" onMouseOver="funcPopup(event,'get_userid')">get_userid</a>() != <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l2997"><span class="linenum">2997</span></a>          return null;
<a name="l2998"><span class="linenum">2998</span></a>      }
<a name="l2999"><span class="linenum">2999</span></a>  
<a name="l3000"><span class="linenum">3000</span></a>      <a class="var it1695" onMouseOver="hilite(1695)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../_variables/urlbase.html">$urlbase</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'<a class="filename" href="../../pluginfile.php.html">/pluginfile.php</a>';
<a name="l3001"><span class="linenum">3001</span></a>  
<a name="l3002"><span class="linenum">3002</span></a>      return <span class="keyword">new </span><a class="class" onClick="logClass('file_info_stored')" href="../../_classes/file_info_stored.html" onMouseOver="classPopup(event,'file_info_stored')">file_info_stored</a>(<a class="var it577" onMouseOver="hilite(577)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a>, <a class="var it1695" onMouseOver="hilite(1695)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../_variables/urlbase.html">$urlbase</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, true, true, false, false);
<a name="l3003"><span class="linenum">3003</span></a>  }
<a name="l3004"><span class="linenum">3004</span></a>  
<a name="l3005"><span class="linenum">3005</span></a>  <span class="comment">/**</span>
<a name="l3006"><span class="linenum">3006</span></a>  <span class="comment"> * Serves the data attachments. Implements needed access control ;-)</span>
<a name="l3007"><span class="linenum">3007</span></a>  <span class="comment"> *</span>
<a name="l3008"><span class="linenum">3008</span></a>  <span class="comment"> * @package  mod_data</span>
<a name="l3009"><span class="linenum">3009</span></a>  <span class="comment"> * @category files</span>
<a name="l3010"><span class="linenum">3010</span></a>  <span class="comment"> * @param stdClass $course course object</span>
<a name="l3011"><span class="linenum">3011</span></a>  <span class="comment"> * @param stdClass $cm course module object</span>
<a name="l3012"><span class="linenum">3012</span></a>  <span class="comment"> * @param stdClass $context context object</span>
<a name="l3013"><span class="linenum">3013</span></a>  <span class="comment"> * @param string $filearea file area</span>
<a name="l3014"><span class="linenum">3014</span></a>  <span class="comment"> * @param array $args extra arguments</span>
<a name="l3015"><span class="linenum">3015</span></a>  <span class="comment"> * @param bool $forcedownload whether or not force download</span>
<a name="l3016"><span class="linenum">3016</span></a>  <span class="comment"> * @param array $options additional options affecting the file serving</span>
<a name="l3017"><span class="linenum">3017</span></a>  <span class="comment"> * @return bool false if file not found, does not return if found - justsend the file</span>
<a name="l3018"><span class="linenum">3018</span></a>  <span class="comment"> */</span>
<a name="l3019"><span class="linenum">3019</span></a>  function <a class="function" onClick="logFunction('data_pluginfile')" href="../../_functions/data_pluginfile.html" onMouseOver="funcPopup(event,'data_pluginfile')">data_pluginfile</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>=array()) {
<a name="l3020"><span class="linenum">3020</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3021"><span class="linenum">3021</span></a>  
<a name="l3022"><span class="linenum">3022</span></a>      if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/contextlevel.html">contextlevel</a> != <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>) {
<a name="l3023"><span class="linenum">3023</span></a>          return false;
<a name="l3024"><span class="linenum">3024</span></a>      }
<a name="l3025"><span class="linenum">3025</span></a>  
<a name="l3026"><span class="linenum">3026</span></a>      <a class="function" onClick="logFunction('require_course_login')" href="../../_functions/require_course_login.html" onMouseOver="funcPopup(event,'require_course_login')">require_course_login</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, true, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l3027"><span class="linenum">3027</span></a>  
<a name="l3028"><span class="linenum">3028</span></a>      if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'content') {
<a name="l3029"><span class="linenum">3029</span></a>          <a class="var it1439" onMouseOver="hilite(1439)" onMouseOut="lolite()" onClick="logVariable('contentid')" href="../../_variables/contentid.html">$contentid</a> = (int)<a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l3030"><span class="linenum">3030</span></a>  
<a name="l3031"><span class="linenum">3031</span></a>          if (!<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_content', array('id'=&gt;<a class="var it1439" onMouseOver="hilite(1439)" onMouseOut="lolite()" onClick="logVariable('contentid')" href="../../_variables/contentid.html">$contentid</a>))) {
<a name="l3032"><span class="linenum">3032</span></a>              return false;
<a name="l3033"><span class="linenum">3033</span></a>          }
<a name="l3034"><span class="linenum">3034</span></a>  
<a name="l3035"><span class="linenum">3035</span></a>          if (!<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_fields', array('id'=&gt;<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('fieldid')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/fieldid.html">fieldid</a>))) {
<a name="l3036"><span class="linenum">3036</span></a>              return false;
<a name="l3037"><span class="linenum">3037</span></a>          }
<a name="l3038"><span class="linenum">3038</span></a>  
<a name="l3039"><span class="linenum">3039</span></a>          if (!<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_records', array('id'=&gt;<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('recordid')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/recordid.html">recordid</a>))) {
<a name="l3040"><span class="linenum">3040</span></a>              return false;
<a name="l3041"><span class="linenum">3041</span></a>          }
<a name="l3042"><span class="linenum">3042</span></a>  
<a name="l3043"><span class="linenum">3043</span></a>          if (!<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data', array('id'=&gt;<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('dataid')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/dataid.html">dataid</a>))) {
<a name="l3044"><span class="linenum">3044</span></a>              return false;
<a name="l3045"><span class="linenum">3045</span></a>          }
<a name="l3046"><span class="linenum">3046</span></a>  
<a name="l3047"><span class="linenum">3047</span></a>          if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> != <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>) {
<a name="l3048"><span class="linenum">3048</span></a>  <span class="comment">            // hacker attempt - context does not match the contentid</span>
<a name="l3049"><span class="linenum">3049</span></a>              return false;
<a name="l3050"><span class="linenum">3050</span></a>          }
<a name="l3051"><span class="linenum">3051</span></a>  
<a name="l3052"><span class="linenum">3052</span></a>  <span class="comment">        //check if approved</span>
<a name="l3053"><span class="linenum">3053</span></a>          if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('approval')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/approval.html">approval</a> and !<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('approved')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a> and !<a class="function" onClick="logFunction('data_isowner')" href="../../_functions/data_isowner.html" onMouseOver="funcPopup(event,'data_isowner')">data_isowner</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:approve', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3054"><span class="linenum">3054</span></a>              return false;
<a name="l3055"><span class="linenum">3055</span></a>          }
<a name="l3056"><span class="linenum">3056</span></a>  
<a name="l3057"><span class="linenum">3057</span></a>  <span class="comment">        // group access</span>
<a name="l3058"><span class="linenum">3058</span></a>          if (<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('groupid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>) {
<a name="l3059"><span class="linenum">3059</span></a>              <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l3060"><span class="linenum">3060</span></a>              if (<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3061"><span class="linenum">3061</span></a>                  if (!<a class="function" onClick="logFunction('groups_is_member')" href="../../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('groupid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>)) {
<a name="l3062"><span class="linenum">3062</span></a>                      return false;
<a name="l3063"><span class="linenum">3063</span></a>                  }
<a name="l3064"><span class="linenum">3064</span></a>              }
<a name="l3065"><span class="linenum">3065</span></a>          }
<a name="l3066"><span class="linenum">3066</span></a>  
<a name="l3067"><span class="linenum">3067</span></a>          <a class="var it4069" onMouseOver="hilite(4069)" onMouseOut="lolite()" onClick="logVariable('fieldobj')" href="../../_variables/fieldobj.html">$fieldobj</a> = <a class="function" onClick="logFunction('data_get_field')" href="../../_functions/data_get_field.html" onMouseOver="funcPopup(event,'data_get_field')">data_get_field</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l3068"><span class="linenum">3068</span></a>  
<a name="l3069"><span class="linenum">3069</span></a>          <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l3070"><span class="linenum">3070</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a> = &quot;/<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>/mod_data/content/<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('id')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>/<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>&quot;;
<a name="l3071"><span class="linenum">3071</span></a>  
<a name="l3072"><span class="linenum">3072</span></a>          if (!<a class="var it4069" onMouseOver="hilite(4069)" onMouseOut="lolite()" onClick="logVariable('fieldobj')" href="../../_variables/fieldobj.html">$fieldobj</a>-&gt;<a class="function" onClick="logFunction('file_ok')" href="../../_functions/file_ok.html" onMouseOver="funcPopup(event,'file_ok')">file_ok</a>(<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>)) {
<a name="l3073"><span class="linenum">3073</span></a>              return false;
<a name="l3074"><span class="linenum">3074</span></a>          }
<a name="l3075"><span class="linenum">3075</span></a>  
<a name="l3076"><span class="linenum">3076</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l3077"><span class="linenum">3077</span></a>          if (!<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file_by_hash')" href="../../_functions/get_file_by_hash.html" onMouseOver="funcPopup(event,'get_file_by_hash')">get_file_by_hash</a>(<a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a>)) or <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l3078"><span class="linenum">3078</span></a>              return false;
<a name="l3079"><span class="linenum">3079</span></a>          }
<a name="l3080"><span class="linenum">3080</span></a>  
<a name="l3081"><span class="linenum">3081</span></a>  <span class="comment">        // finally send the file</span>
<a name="l3082"><span class="linenum">3082</span></a>          <a class="function" onClick="logFunction('send_stored_file')" href="../../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>, 0, 0, true, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>); <span class="comment">// download MUST be forced - security!</span>
<a name="l3083"><span class="linenum">3083</span></a>      }
<a name="l3084"><span class="linenum">3084</span></a>  
<a name="l3085"><span class="linenum">3085</span></a>      return false;
<a name="l3086"><span class="linenum">3086</span></a>  }
<a name="l3087"><span class="linenum">3087</span></a>  
<a name="l3088"><span class="linenum">3088</span></a>  
<a name="l3089"><span class="linenum">3089</span></a>  function <a class="function" onClick="logFunction('data_extend_navigation')" href="../../_functions/data_extend_navigation.html" onMouseOver="funcPopup(event,'data_extend_navigation')">data_extend_navigation</a>(<a class="var it1513" onMouseOver="hilite(1513)" onMouseOut="lolite()" onClick="logVariable('navigation')" href="../../_variables/navigation.html">$navigation</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) {
<a name="l3090"><span class="linenum">3090</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3091"><span class="linenum">3091</span></a>  
<a name="l3092"><span class="linenum">3092</span></a>      <a class="var it3150" onMouseOver="hilite(3150)" onMouseOut="lolite()" onClick="logVariable('rid')" href="../../_variables/rid.html">$rid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('rid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l3093"><span class="linenum">3093</span></a>  
<a name="l3094"><span class="linenum">3094</span></a>      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data', array('id'=&gt;<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>));
<a name="l3095"><span class="linenum">3095</span></a>      <a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l3096"><span class="linenum">3096</span></a>      <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l3097"><span class="linenum">3097</span></a>  
<a name="l3098"><span class="linenum">3098</span></a>       <a class="var it28702" onMouseOver="hilite(28702)" onMouseOut="lolite()" onClick="logVariable('numentries')" href="../../_variables/numentries.html">$numentries</a> = <a class="function" onClick="logFunction('data_numentries')" href="../../_functions/data_numentries.html" onMouseOver="funcPopup(event,'data_numentries')">data_numentries</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l3099"><span class="linenum">3099</span></a>  <span class="comment">    /// Check the number of entries required against the number of entries already made (doesn't apply to teachers)</span>
<a name="l3100"><span class="linenum">3100</span></a>      if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('requiredentries')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/requiredentries.html">requiredentries</a> &gt; 0 &amp;&amp; <a class="var it28702" onMouseOver="hilite(28702)" onMouseOut="lolite()" onClick="logVariable('numentries')" href="../../_variables/numentries.html">$numentries</a> &lt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('requiredentries')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/requiredentries.html">requiredentries</a> &amp;&amp; !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:manageentries', <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l3101"><span class="linenum">3101</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('entriesleft')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/entriesleft.html">entriesleft</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('requiredentries')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/requiredentries.html">requiredentries</a> - <a class="var it28702" onMouseOver="hilite(28702)" onMouseOut="lolite()" onClick="logVariable('numentries')" href="../../_variables/numentries.html">$numentries</a>;
<a name="l3102"><span class="linenum">3102</span></a>          <a class="var it35112" onMouseOver="hilite(35112)" onMouseOut="lolite()" onClick="logVariable('entriesnode')" href="../../_variables/entriesnode.html">$entriesnode</a> = <a class="var it1513" onMouseOver="hilite(1513)" onMouseOut="lolite()" onClick="logVariable('navigation')" href="../../_variables/navigation.html">$navigation</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('entrieslefttoadd', 'data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>));
<a name="l3103"><span class="linenum">3103</span></a>          <a class="var it35112" onMouseOver="hilite(35112)" onMouseOut="lolite()" onClick="logVariable('entriesnode')" href="../../_variables/entriesnode.html">$entriesnode</a>-&gt;<a class="function" onClick="logFunction('add_class')" href="../../_functions/add_class.html" onMouseOver="funcPopup(event,'add_class')">add_class</a>('note');
<a name="l3104"><span class="linenum">3104</span></a>      }
<a name="l3105"><span class="linenum">3105</span></a>  
<a name="l3106"><span class="linenum">3106</span></a>      <a class="var it1513" onMouseOver="hilite(1513)" onMouseOut="lolite()" onClick="logVariable('navigation')" href="../../_variables/navigation.html">$navigation</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('list', 'data'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/data/view.php.html">/mod/data/view.php</a>', array('d'=&gt;<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>)));
<a name="l3107"><span class="linenum">3107</span></a>      if (!empty(<a class="var it3150" onMouseOver="hilite(3150)" onMouseOut="lolite()" onClick="logVariable('rid')" href="../../_variables/rid.html">$rid</a>)) {
<a name="l3108"><span class="linenum">3108</span></a>          <a class="var it1513" onMouseOver="hilite(1513)" onMouseOut="lolite()" onClick="logVariable('navigation')" href="../../_variables/navigation.html">$navigation</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('single', 'data'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/data/view.php.html">/mod/data/view.php</a>', array('d'=&gt;<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>, 'rid'=&gt;<a class="var it3150" onMouseOver="hilite(3150)" onMouseOut="lolite()" onClick="logVariable('rid')" href="../../_variables/rid.html">$rid</a>)));
<a name="l3109"><span class="linenum">3109</span></a>      } else {
<a name="l3110"><span class="linenum">3110</span></a>          <a class="var it1513" onMouseOver="hilite(1513)" onMouseOut="lolite()" onClick="logVariable('navigation')" href="../../_variables/navigation.html">$navigation</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('single', 'data'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/data/view.php.html">/mod/data/view.php</a>', array('d'=&gt;<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>, 'mode'=&gt;'single')));
<a name="l3111"><span class="linenum">3111</span></a>      }
<a name="l3112"><span class="linenum">3112</span></a>      <a class="var it1513" onMouseOver="hilite(1513)" onMouseOut="lolite()" onClick="logVariable('navigation')" href="../../_variables/navigation.html">$navigation</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('search', 'data'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/data/view.php.html">/mod/data/view.php</a>', array('d'=&gt;<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>, 'mode'=&gt;'asearch')));
<a name="l3113"><span class="linenum">3113</span></a>  }
<a name="l3114"><span class="linenum">3114</span></a>  
<a name="l3115"><span class="linenum">3115</span></a>  <span class="comment">/**</span>
<a name="l3116"><span class="linenum">3116</span></a>  <span class="comment"> * Adds module specific settings to the settings block</span>
<a name="l3117"><span class="linenum">3117</span></a>  <span class="comment"> *</span>
<a name="l3118"><span class="linenum">3118</span></a>  <span class="comment"> * @param settings_navigation $settings The settings navigation object</span>
<a name="l3119"><span class="linenum">3119</span></a>  <span class="comment"> * @param navigation_node $datanode The node to add module settings to</span>
<a name="l3120"><span class="linenum">3120</span></a>  <span class="comment"> */</span>
<a name="l3121"><span class="linenum">3121</span></a>  function <a class="function" onClick="logFunction('data_extend_settings_navigation')" href="../../_functions/data_extend_settings_navigation.html" onMouseOver="funcPopup(event,'data_extend_settings_navigation')">data_extend_settings_navigation</a>(settings_navigation <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>, navigation_node <a class="var it35113" onMouseOver="hilite(35113)" onMouseOut="lolite()" onClick="logVariable('datanode')" href="../../_variables/datanode.html">$datanode</a>) {
<a name="l3122"><span class="linenum">3122</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l3123"><span class="linenum">3123</span></a>  
<a name="l3124"><span class="linenum">3124</span></a>      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data', array(&quot;id&quot; =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;instance));
<a name="l3125"><span class="linenum">3125</span></a>  
<a name="l3126"><span class="linenum">3126</span></a>      <a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>);
<a name="l3127"><span class="linenum">3127</span></a>      <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>);
<a name="l3128"><span class="linenum">3128</span></a>  
<a name="l3129"><span class="linenum">3129</span></a>      if (<a class="function" onClick="logFunction('data_user_can_add_entry')" href="../../_functions/data_user_can_add_entry.html" onMouseOver="funcPopup(event,'data_user_can_add_entry')">data_user_can_add_entry</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) { // took out participation list here!
<a name="l3130"><span class="linenum">3130</span></a>          if (empty(<a class="var it15940" onMouseOver="hilite(15940)" onMouseOut="lolite()" onClick="logVariable('editentry')" href="../../_variables/editentry.html">$editentry</a>)) { //TODO: undefined
<a name="l3131"><span class="linenum">3131</span></a>              <a class="var it23503" onMouseOver="hilite(23503)" onMouseOut="lolite()" onClick="logVariable('addstring')" href="../../_variables/addstring.html">$addstring</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('add', 'data');
<a name="l3132"><span class="linenum">3132</span></a>          } else {
<a name="l3133"><span class="linenum">3133</span></a>              <a class="var it23503" onMouseOver="hilite(23503)" onMouseOut="lolite()" onClick="logVariable('addstring')" href="../../_variables/addstring.html">$addstring</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editentry', 'data');
<a name="l3134"><span class="linenum">3134</span></a>          }
<a name="l3135"><span class="linenum">3135</span></a>          <a class="var it35113" onMouseOver="hilite(35113)" onMouseOut="lolite()" onClick="logVariable('datanode')" href="../../_variables/datanode.html">$datanode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it23503" onMouseOver="hilite(23503)" onMouseOut="lolite()" onClick="logVariable('addstring')" href="../../_variables/addstring.html">$addstring</a>, <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/data/edit.php.html">/mod/data/edit.php</a>', array('d'=&gt;<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;instance)));
<a name="l3136"><span class="linenum">3136</span></a>      }
<a name="l3137"><span class="linenum">3137</span></a>  
<a name="l3138"><span class="linenum">3138</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>(<a class="constant" onClick="logConstant('DATA_CAP_EXPORT')" href="../../_constants/DATA_CAP_EXPORT.html" onMouseOver="constPopup(event,'DATA_CAP_EXPORT')">DATA_CAP_EXPORT</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l3139"><span class="linenum">3139</span></a>  <span class="comment">        // The capability required to Export database records is centrally defined in 'lib.php'</span>
<a name="l3140"><span class="linenum">3140</span></a>  <span class="comment">        // and should be weaker than those required to edit Templates, Fields and Presets.</span>
<a name="l3141"><span class="linenum">3141</span></a>          <a class="var it35113" onMouseOver="hilite(35113)" onMouseOut="lolite()" onClick="logVariable('datanode')" href="../../_variables/datanode.html">$datanode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('exportentries', 'data'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/data/export.php.html">/mod/data/export.php</a>', array('d'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l3142"><span class="linenum">3142</span></a>      }
<a name="l3143"><span class="linenum">3143</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:manageentries', <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l3144"><span class="linenum">3144</span></a>          <a class="var it35113" onMouseOver="hilite(35113)" onMouseOut="lolite()" onClick="logVariable('datanode')" href="../../_variables/datanode.html">$datanode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('importentries', 'data'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/data/import.php.html">/mod/data/import.php</a>', array('d'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l3145"><span class="linenum">3145</span></a>      }
<a name="l3146"><span class="linenum">3146</span></a>  
<a name="l3147"><span class="linenum">3147</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:managetemplates', <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l3148"><span class="linenum">3148</span></a>          <a class="var it622" onMouseOver="hilite(622)" onMouseOut="lolite()" onClick="logVariable('currenttab')" href="../../_variables/currenttab.html">$currenttab</a> = '';
<a name="l3149"><span class="linenum">3149</span></a>          if (<a class="var it622" onMouseOver="hilite(622)" onMouseOut="lolite()" onClick="logVariable('currenttab')" href="../../_variables/currenttab.html">$currenttab</a> == 'list') {
<a name="l3150"><span class="linenum">3150</span></a>              <a class="var it33395" onMouseOver="hilite(33395)" onMouseOut="lolite()" onClick="logVariable('defaultemplate')" href="../../_variables/defaultemplate.html">$defaultemplate</a> = 'listtemplate';
<a name="l3151"><span class="linenum">3151</span></a>          } else if (<a class="var it622" onMouseOver="hilite(622)" onMouseOut="lolite()" onClick="logVariable('currenttab')" href="../../_variables/currenttab.html">$currenttab</a> == 'add') {
<a name="l3152"><span class="linenum">3152</span></a>              <a class="var it33395" onMouseOver="hilite(33395)" onMouseOut="lolite()" onClick="logVariable('defaultemplate')" href="../../_variables/defaultemplate.html">$defaultemplate</a> = 'addtemplate';
<a name="l3153"><span class="linenum">3153</span></a>          } else if (<a class="var it622" onMouseOver="hilite(622)" onMouseOut="lolite()" onClick="logVariable('currenttab')" href="../../_variables/currenttab.html">$currenttab</a> == 'asearch') {
<a name="l3154"><span class="linenum">3154</span></a>              <a class="var it33395" onMouseOver="hilite(33395)" onMouseOut="lolite()" onClick="logVariable('defaultemplate')" href="../../_variables/defaultemplate.html">$defaultemplate</a> = 'asearchtemplate';
<a name="l3155"><span class="linenum">3155</span></a>          } else {
<a name="l3156"><span class="linenum">3156</span></a>              <a class="var it33395" onMouseOver="hilite(33395)" onMouseOut="lolite()" onClick="logVariable('defaultemplate')" href="../../_variables/defaultemplate.html">$defaultemplate</a> = 'singletemplate';
<a name="l3157"><span class="linenum">3157</span></a>          }
<a name="l3158"><span class="linenum">3158</span></a>  
<a name="l3159"><span class="linenum">3159</span></a>          <a class="var it8957" onMouseOver="hilite(8957)" onMouseOut="lolite()" onClick="logVariable('templates')" href="../../_variables/templates.html">$templates</a> = <a class="var it35113" onMouseOver="hilite(35113)" onMouseOut="lolite()" onClick="logVariable('datanode')" href="../../_variables/datanode.html">$datanode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('templates', 'data'));
<a name="l3160"><span class="linenum">3160</span></a>  
<a name="l3161"><span class="linenum">3161</span></a>          <a class="var it33397" onMouseOver="hilite(33397)" onMouseOut="lolite()" onClick="logVariable('templatelist')" href="../../_variables/templatelist.html">$templatelist</a> = array ('listtemplate', 'singletemplate', 'asearchtemplate', 'addtemplate', 'rsstemplate', 'csstemplate', 'jstemplate');
<a name="l3162"><span class="linenum">3162</span></a>          foreach (<a class="var it33397" onMouseOver="hilite(33397)" onMouseOut="lolite()" onClick="logVariable('templatelist')" href="../../_variables/templatelist.html">$templatelist</a> as <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>) {
<a name="l3163"><span class="linenum">3163</span></a>              <a class="var it8957" onMouseOver="hilite(8957)" onMouseOut="lolite()" onClick="logVariable('templates')" href="../../_variables/templates.html">$templates</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>, 'data'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/data/templates.php.html">/mod/data/templates.php</a>', array('d'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,'mode'=&gt;<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>)));
<a name="l3164"><span class="linenum">3164</span></a>          }
<a name="l3165"><span class="linenum">3165</span></a>  
<a name="l3166"><span class="linenum">3166</span></a>          <a class="var it35113" onMouseOver="hilite(35113)" onMouseOut="lolite()" onClick="logVariable('datanode')" href="../../_variables/datanode.html">$datanode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('fields', 'data'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/data/field.php.html">/mod/data/field.php</a>', array('d'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l3167"><span class="linenum">3167</span></a>          <a class="var it35113" onMouseOver="hilite(35113)" onMouseOut="lolite()" onClick="logVariable('datanode')" href="../../_variables/datanode.html">$datanode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('presets', 'data'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/data/preset.php.html">/mod/data/preset.php</a>', array('d'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l3168"><span class="linenum">3168</span></a>      }
<a name="l3169"><span class="linenum">3169</span></a>  
<a name="l3170"><span class="linenum">3170</span></a>      if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablerssfeeds')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/enablerssfeeds.html">enablerssfeeds</a>) &amp;&amp; !empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('data_enablerssfeeds')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/data_enablerssfeeds.html">data_enablerssfeeds</a>) &amp;&amp; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('rssarticles')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/rssarticles.html">rssarticles</a> &gt; 0) {
<a name="l3171"><span class="linenum">3171</span></a>          require_once(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/rsslib.php&quot;);
<a name="l3172"><span class="linenum">3172</span></a>  
<a name="l3173"><span class="linenum">3173</span></a>          <a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('rsstype','forum');
<a name="l3174"><span class="linenum">3174</span></a>  
<a name="l3175"><span class="linenum">3175</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="function" onClick="logFunction('rss_get_url')" href="../../_functions/rss_get_url.html" onMouseOver="funcPopup(event,'rss_get_url')">rss_get_url</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context-&gt;id, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3176"><span class="linenum">3176</span></a>          <a class="var it35113" onMouseOver="hilite(35113)" onMouseOut="lolite()" onClick="logVariable('datanode')" href="../../_variables/datanode.html">$datanode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it160" onMouseOver="hilite(160)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="class" onClick="logClass('settings_navigation')" href="../../_classes/settings_navigation.html" onMouseOver="classPopup(event,'settings_navigation')">settings_navigation</a>::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/rss', ''));
<a name="l3177"><span class="linenum">3177</span></a>      }
<a name="l3178"><span class="linenum">3178</span></a>  }
<a name="l3179"><span class="linenum">3179</span></a>  
<a name="l3180"><span class="linenum">3180</span></a>  <span class="comment">/**</span>
<a name="l3181"><span class="linenum">3181</span></a>  <span class="comment"> * Save the database configuration as a preset.</span>
<a name="l3182"><span class="linenum">3182</span></a>  <span class="comment"> *</span>
<a name="l3183"><span class="linenum">3183</span></a>  <span class="comment"> * @param stdClass $course The course the database module belongs to.</span>
<a name="l3184"><span class="linenum">3184</span></a>  <span class="comment"> * @param stdClass $cm The course module record</span>
<a name="l3185"><span class="linenum">3185</span></a>  <span class="comment"> * @param stdClass $data The database record</span>
<a name="l3186"><span class="linenum">3186</span></a>  <span class="comment"> * @param string $path</span>
<a name="l3187"><span class="linenum">3187</span></a>  <span class="comment"> * @return bool</span>
<a name="l3188"><span class="linenum">3188</span></a>  <span class="comment"> */</span>
<a name="l3189"><span class="linenum">3189</span></a>  function <a class="function" onClick="logFunction('data_presets_save')" href="../../_functions/data_presets_save.html" onMouseOver="funcPopup(event,'data_presets_save')">data_presets_save</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>) {
<a name="l3190"><span class="linenum">3190</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l3191"><span class="linenum">3191</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l3192"><span class="linenum">3192</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a> = new stdClass;
<a name="l3193"><span class="linenum">3193</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('contextid')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="constant" onClick="logConstant('DATA_PRESET_CONTEXT')" href="../../_constants/DATA_PRESET_CONTEXT.html" onMouseOver="constPopup(event,'DATA_PRESET_CONTEXT')">DATA_PRESET_CONTEXT</a>;
<a name="l3194"><span class="linenum">3194</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('component')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = <a class="constant" onClick="logConstant('DATA_PRESET_COMPONENT')" href="../../_constants/DATA_PRESET_COMPONENT.html" onMouseOver="constPopup(event,'DATA_PRESET_COMPONENT')">DATA_PRESET_COMPONENT</a>;
<a name="l3195"><span class="linenum">3195</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filearea')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/filearea.html">filearea</a> = <a class="constant" onClick="logConstant('DATA_PRESET_FILEAREA')" href="../../_constants/DATA_PRESET_FILEAREA.html" onMouseOver="constPopup(event,'DATA_PRESET_FILEAREA')">DATA_PRESET_FILEAREA</a>;
<a name="l3196"><span class="linenum">3196</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('itemid')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a> = 0;
<a name="l3197"><span class="linenum">3197</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filepath')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/filepath.html">filepath</a> = '/'.<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>.'/';
<a name="l3198"><span class="linenum">3198</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('userid')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3199"><span class="linenum">3199</span></a>  
<a name="l3200"><span class="linenum">3200</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filename')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/filename.html">filename</a> = 'preset.xml';
<a name="l3201"><span class="linenum">3201</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_string')" href="../../_functions/create_file_from_string.html" onMouseOver="funcPopup(event,'create_file_from_string')">create_file_from_string</a>(<a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>, <a class="function" onClick="logFunction('data_presets_generate_xml')" href="../../_functions/data_presets_generate_xml.html" onMouseOver="funcPopup(event,'data_presets_generate_xml')">data_presets_generate_xml</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>));
<a name="l3202"><span class="linenum">3202</span></a>  
<a name="l3203"><span class="linenum">3203</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filename')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/filename.html">filename</a> = 'singletemplate.html';
<a name="l3204"><span class="linenum">3204</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_string')" href="../../_functions/create_file_from_string.html" onMouseOver="funcPopup(event,'create_file_from_string')">create_file_from_string</a>(<a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('singletemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/singletemplate.html">singletemplate</a>);
<a name="l3205"><span class="linenum">3205</span></a>  
<a name="l3206"><span class="linenum">3206</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filename')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/filename.html">filename</a> = 'listtemplateheader.html';
<a name="l3207"><span class="linenum">3207</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_string')" href="../../_functions/create_file_from_string.html" onMouseOver="funcPopup(event,'create_file_from_string')">create_file_from_string</a>(<a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('listtemplateheader')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/listtemplateheader.html">listtemplateheader</a>);
<a name="l3208"><span class="linenum">3208</span></a>  
<a name="l3209"><span class="linenum">3209</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filename')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/filename.html">filename</a> = 'listtemplate.html';
<a name="l3210"><span class="linenum">3210</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_string')" href="../../_functions/create_file_from_string.html" onMouseOver="funcPopup(event,'create_file_from_string')">create_file_from_string</a>(<a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('listtemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/listtemplate.html">listtemplate</a>);
<a name="l3211"><span class="linenum">3211</span></a>  
<a name="l3212"><span class="linenum">3212</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filename')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/filename.html">filename</a> = 'listtemplatefooter.html';
<a name="l3213"><span class="linenum">3213</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_string')" href="../../_functions/create_file_from_string.html" onMouseOver="funcPopup(event,'create_file_from_string')">create_file_from_string</a>(<a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('listtemplatefooter')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/listtemplatefooter.html">listtemplatefooter</a>);
<a name="l3214"><span class="linenum">3214</span></a>  
<a name="l3215"><span class="linenum">3215</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filename')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/filename.html">filename</a> = 'addtemplate.html';
<a name="l3216"><span class="linenum">3216</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_string')" href="../../_functions/create_file_from_string.html" onMouseOver="funcPopup(event,'create_file_from_string')">create_file_from_string</a>(<a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('addtemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/addtemplate.html">addtemplate</a>);
<a name="l3217"><span class="linenum">3217</span></a>  
<a name="l3218"><span class="linenum">3218</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filename')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/filename.html">filename</a> = 'rsstemplate.html';
<a name="l3219"><span class="linenum">3219</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_string')" href="../../_functions/create_file_from_string.html" onMouseOver="funcPopup(event,'create_file_from_string')">create_file_from_string</a>(<a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('rsstemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/rsstemplate.html">rsstemplate</a>);
<a name="l3220"><span class="linenum">3220</span></a>  
<a name="l3221"><span class="linenum">3221</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filename')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/filename.html">filename</a> = 'rsstitletemplate.html';
<a name="l3222"><span class="linenum">3222</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_string')" href="../../_functions/create_file_from_string.html" onMouseOver="funcPopup(event,'create_file_from_string')">create_file_from_string</a>(<a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('rsstitletemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/rsstitletemplate.html">rsstitletemplate</a>);
<a name="l3223"><span class="linenum">3223</span></a>  
<a name="l3224"><span class="linenum">3224</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filename')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/filename.html">filename</a> = 'csstemplate.css';
<a name="l3225"><span class="linenum">3225</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_string')" href="../../_functions/create_file_from_string.html" onMouseOver="funcPopup(event,'create_file_from_string')">create_file_from_string</a>(<a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('csstemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/csstemplate.html">csstemplate</a>);
<a name="l3226"><span class="linenum">3226</span></a>  
<a name="l3227"><span class="linenum">3227</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filename')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/filename.html">filename</a> = 'jstemplate.js';
<a name="l3228"><span class="linenum">3228</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_string')" href="../../_functions/create_file_from_string.html" onMouseOver="funcPopup(event,'create_file_from_string')">create_file_from_string</a>(<a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('jstemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/jstemplate.html">jstemplate</a>);
<a name="l3229"><span class="linenum">3229</span></a>  
<a name="l3230"><span class="linenum">3230</span></a>      <a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filename')" class="var it40138" onMouseOver="hilite(40138)" onMouseOut="lolite()" href="../../_variables/filename.html">filename</a> = 'asearchtemplate.html';
<a name="l3231"><span class="linenum">3231</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_string')" href="../../_functions/create_file_from_string.html" onMouseOver="funcPopup(event,'create_file_from_string')">create_file_from_string</a>(<a class="var it1404" onMouseOver="hilite(1404)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('asearchtemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/asearchtemplate.html">asearchtemplate</a>);
<a name="l3232"><span class="linenum">3232</span></a>  
<a name="l3233"><span class="linenum">3233</span></a>      return true;
<a name="l3234"><span class="linenum">3234</span></a>  }
<a name="l3235"><span class="linenum">3235</span></a>  
<a name="l3236"><span class="linenum">3236</span></a>  <span class="comment">/**</span>
<a name="l3237"><span class="linenum">3237</span></a>  <span class="comment"> * Generates the XML for the database module provided</span>
<a name="l3238"><span class="linenum">3238</span></a>  <span class="comment"> *</span>
<a name="l3239"><span class="linenum">3239</span></a>  <span class="comment"> * @global moodle_database $DB</span>
<a name="l3240"><span class="linenum">3240</span></a>  <span class="comment"> * @param stdClass $course The course the database module belongs to.</span>
<a name="l3241"><span class="linenum">3241</span></a>  <span class="comment"> * @param stdClass $cm The course module record</span>
<a name="l3242"><span class="linenum">3242</span></a>  <span class="comment"> * @param stdClass $data The database record</span>
<a name="l3243"><span class="linenum">3243</span></a>  <span class="comment"> * @return string The XML for the preset</span>
<a name="l3244"><span class="linenum">3244</span></a>  <span class="comment"> */</span>
<a name="l3245"><span class="linenum">3245</span></a>  function <a class="function" onClick="logFunction('data_presets_generate_xml')" href="../../_functions/data_presets_generate_xml.html" onMouseOver="funcPopup(event,'data_presets_generate_xml')">data_presets_generate_xml</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l3246"><span class="linenum">3246</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3247"><span class="linenum">3247</span></a>  
<a name="l3248"><span class="linenum">3248</span></a>  <span class="comment">    // Assemble &quot;preset.xml&quot;:</span>
<a name="l3249"><span class="linenum">3249</span></a>      <a class="var it35114" onMouseOver="hilite(35114)" onMouseOut="lolite()" onClick="logVariable('presetxmldata')" href="../../_variables/presetxmldata.html">$presetxmldata</a> = &quot;&lt;preset&gt;\n\n&quot;;
<a name="l3250"><span class="linenum">3250</span></a>  
<a name="l3251"><span class="linenum">3251</span></a>  <span class="comment">    // Raw settings are not preprocessed during saving of presets</span>
<a name="l3252"><span class="linenum">3252</span></a>      <a class="var it35115" onMouseOver="hilite(35115)" onMouseOut="lolite()" onClick="logVariable('raw_settings')" href="../../_variables/raw_settings.html">$raw_settings</a> = array(
<a name="l3253"><span class="linenum">3253</span></a>          'intro',
<a name="l3254"><span class="linenum">3254</span></a>          'comments',
<a name="l3255"><span class="linenum">3255</span></a>          'requiredentries',
<a name="l3256"><span class="linenum">3256</span></a>          'requiredentriestoview',
<a name="l3257"><span class="linenum">3257</span></a>          'maxentries',
<a name="l3258"><span class="linenum">3258</span></a>          'rssarticles',
<a name="l3259"><span class="linenum">3259</span></a>          'approval',
<a name="l3260"><span class="linenum">3260</span></a>          'defaultsortdir'
<a name="l3261"><span class="linenum">3261</span></a>      );
<a name="l3262"><span class="linenum">3262</span></a>  
<a name="l3263"><span class="linenum">3263</span></a>      <a class="var it35114" onMouseOver="hilite(35114)" onMouseOut="lolite()" onClick="logVariable('presetxmldata')" href="../../_variables/presetxmldata.html">$presetxmldata</a> .= &quot;&lt;settings&gt;\n&quot;;
<a name="l3264"><span class="linenum">3264</span></a>  <span class="comment">    // First, settings that do not require any conversion</span>
<a name="l3265"><span class="linenum">3265</span></a>      foreach (<a class="var it35115" onMouseOver="hilite(35115)" onMouseOut="lolite()" onClick="logVariable('raw_settings')" href="../../_variables/raw_settings.html">$raw_settings</a> as <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../_variables/setting.html">$setting</a>) {
<a name="l3266"><span class="linenum">3266</span></a>          <a class="var it35114" onMouseOver="hilite(35114)" onMouseOut="lolite()" onClick="logVariable('presetxmldata')" href="../../_variables/presetxmldata.html">$presetxmldata</a> .= &quot;&lt;<a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../_variables/setting.html">$setting</a>&gt;&quot; . <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../_variables/setting.html">$setting</a>) . &quot;&lt;/<a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../_variables/setting.html">$setting</a>&gt;\n&quot;;
<a name="l3267"><span class="linenum">3267</span></a>      }
<a name="l3268"><span class="linenum">3268</span></a>  
<a name="l3269"><span class="linenum">3269</span></a>  <span class="comment">    // Now specific settings</span>
<a name="l3270"><span class="linenum">3270</span></a>      if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('defaultsort')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/defaultsort.html">defaultsort</a> &gt; 0 &amp;&amp; <a class="var it28715" onMouseOver="hilite(28715)" onMouseOut="lolite()" onClick="logVariable('sortfield')" href="../../_variables/sortfield.html">$sortfield</a> = <a class="function" onClick="logFunction('data_get_field_from_id')" href="../../_functions/data_get_field_from_id.html" onMouseOver="funcPopup(event,'data_get_field_from_id')">data_get_field_from_id</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('defaultsort')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/defaultsort.html">defaultsort</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l3271"><span class="linenum">3271</span></a>          <a class="var it35114" onMouseOver="hilite(35114)" onMouseOut="lolite()" onClick="logVariable('presetxmldata')" href="../../_variables/presetxmldata.html">$presetxmldata</a> .= '&lt;defaultsort&gt;' . <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it28715" onMouseOver="hilite(28715)" onMouseOut="lolite()" onClick="logVariable('sortfield')" href="../../_variables/sortfield.html">$sortfield</a>-&gt;<a onClick="logVariable('field')" class="var it41943" onMouseOver="hilite(41943)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name) . &quot;&lt;/defaultsort&gt;\n&quot;;
<a name="l3272"><span class="linenum">3272</span></a>      } else {
<a name="l3273"><span class="linenum">3273</span></a>          <a class="var it35114" onMouseOver="hilite(35114)" onMouseOut="lolite()" onClick="logVariable('presetxmldata')" href="../../_variables/presetxmldata.html">$presetxmldata</a> .= &quot;&lt;defaultsort&gt;0&lt;/defaultsort&gt;\n&quot;;
<a name="l3274"><span class="linenum">3274</span></a>      }
<a name="l3275"><span class="linenum">3275</span></a>      <a class="var it35114" onMouseOver="hilite(35114)" onMouseOut="lolite()" onClick="logVariable('presetxmldata')" href="../../_variables/presetxmldata.html">$presetxmldata</a> .= &quot;&lt;/settings&gt;\n\n&quot;;
<a name="l3276"><span class="linenum">3276</span></a>  <span class="comment">    // Now for the fields. Grab all that are non-empty</span>
<a name="l3277"><span class="linenum">3277</span></a>      <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('data_fields', array('dataid'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3278"><span class="linenum">3278</span></a>      <a class="phpfunction" onClick="logFunction('ksort')" href="../../_functions/ksort.html" onMouseOver="phpfuncPopup(event,'ksort')">ksort</a>(<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>);
<a name="l3279"><span class="linenum">3279</span></a>      if (!empty(<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>)) {
<a name="l3280"><span class="linenum">3280</span></a>          foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l3281"><span class="linenum">3281</span></a>              <a class="var it35114" onMouseOver="hilite(35114)" onMouseOut="lolite()" onClick="logVariable('presetxmldata')" href="../../_variables/presetxmldata.html">$presetxmldata</a> .= &quot;&lt;field&gt;\n&quot;;
<a name="l3282"><span class="linenum">3282</span></a>              foreach (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l3283"><span class="linenum">3283</span></a>                  if (<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> != '' &amp;&amp; <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> != 'id' &amp;&amp; <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> != 'dataid') {
<a name="l3284"><span class="linenum">3284</span></a>                      <a class="var it35114" onMouseOver="hilite(35114)" onMouseOut="lolite()" onClick="logVariable('presetxmldata')" href="../../_variables/presetxmldata.html">$presetxmldata</a> .= &quot;&lt;<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>&gt;&quot; . <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) . &quot;&lt;/<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>&gt;\n&quot;;
<a name="l3285"><span class="linenum">3285</span></a>                  }
<a name="l3286"><span class="linenum">3286</span></a>              }
<a name="l3287"><span class="linenum">3287</span></a>              <a class="var it35114" onMouseOver="hilite(35114)" onMouseOut="lolite()" onClick="logVariable('presetxmldata')" href="../../_variables/presetxmldata.html">$presetxmldata</a> .= &quot;&lt;/field&gt;\n\n&quot;;
<a name="l3288"><span class="linenum">3288</span></a>          }
<a name="l3289"><span class="linenum">3289</span></a>      }
<a name="l3290"><span class="linenum">3290</span></a>      <a class="var it35114" onMouseOver="hilite(35114)" onMouseOut="lolite()" onClick="logVariable('presetxmldata')" href="../../_variables/presetxmldata.html">$presetxmldata</a> .= '&lt;/preset&gt;';
<a name="l3291"><span class="linenum">3291</span></a>      return <a class="var it35114" onMouseOver="hilite(35114)" onMouseOut="lolite()" onClick="logVariable('presetxmldata')" href="../../_variables/presetxmldata.html">$presetxmldata</a>;
<a name="l3292"><span class="linenum">3292</span></a>  }
<a name="l3293"><span class="linenum">3293</span></a>  
<a name="l3294"><span class="linenum">3294</span></a>  function <a class="function" onClick="logFunction('data_presets_export')" href="../../_functions/data_presets_export.html" onMouseOver="funcPopup(event,'data_presets_export')">data_presets_export</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it35116" onMouseOver="hilite(35116)" onMouseOut="lolite()" onClick="logVariable('tostorage')" href="../../_variables/tostorage.html">$tostorage</a>=false) {
<a name="l3295"><span class="linenum">3295</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3296"><span class="linenum">3296</span></a>  
<a name="l3297"><span class="linenum">3297</span></a>      <a class="var it21174" onMouseOver="hilite(21174)" onMouseOut="lolite()" onClick="logVariable('presetname')" href="../../_variables/presetname.html">$presetname</a> = <a class="function" onClick="logFunction('clean_filename')" href="../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>) . '-preset-' . <a class="phpfunction" onClick="logFunction('gmdate')" href="../../_functions/gmdate.html" onMouseOver="phpfuncPopup(event,'gmdate')">gmdate</a>(&quot;Ymd_Hi&quot;);
<a name="l3298"><span class="linenum">3298</span></a>      <a class="var it35117" onMouseOver="hilite(35117)" onMouseOut="lolite()" onClick="logVariable('exportsubdir')" href="../../_variables/exportsubdir.html">$exportsubdir</a> = &quot;mod_data/presetexport/<a class="var it21174" onMouseOver="hilite(21174)" onMouseOut="lolite()" onClick="logVariable('presetname')" href="../../_variables/presetname.html">$presetname</a>&quot;;
<a name="l3299"><span class="linenum">3299</span></a>      <a class="function" onClick="logFunction('make_temp_directory')" href="../../_functions/make_temp_directory.html" onMouseOver="funcPopup(event,'make_temp_directory')">make_temp_directory</a>(<a class="var it35117" onMouseOver="hilite(35117)" onMouseOut="lolite()" onClick="logVariable('exportsubdir')" href="../../_variables/exportsubdir.html">$exportsubdir</a>);
<a name="l3300"><span class="linenum">3300</span></a>      <a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a> = &quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tempdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/tempdir.html">tempdir</a>/<a class="var it35117" onMouseOver="hilite(35117)" onMouseOut="lolite()" onClick="logVariable('exportsubdir')" href="../../_variables/exportsubdir.html">$exportsubdir</a>&quot;;
<a name="l3301"><span class="linenum">3301</span></a>  
<a name="l3302"><span class="linenum">3302</span></a>  <span class="comment">    // Assemble &quot;preset.xml&quot;:</span>
<a name="l3303"><span class="linenum">3303</span></a>      <a class="var it35114" onMouseOver="hilite(35114)" onMouseOut="lolite()" onClick="logVariable('presetxmldata')" href="../../_variables/presetxmldata.html">$presetxmldata</a> = <a class="function" onClick="logFunction('data_presets_generate_xml')" href="../../_functions/data_presets_generate_xml.html" onMouseOver="funcPopup(event,'data_presets_generate_xml')">data_presets_generate_xml</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l3304"><span class="linenum">3304</span></a>  
<a name="l3305"><span class="linenum">3305</span></a>  <span class="comment">    // After opening a file in write mode, close it asap</span>
<a name="l3306"><span class="linenum">3306</span></a>      <a class="var it35119" onMouseOver="hilite(35119)" onMouseOut="lolite()" onClick="logVariable('presetxmlfile')" href="../../_variables/presetxmlfile.html">$presetxmlfile</a> = <a class="function" onClick="logFunction('fopen')" href="../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>(<a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a> . '/preset.xml', 'w');
<a name="l3307"><span class="linenum">3307</span></a>      <a class="phpfunction" onClick="logFunction('fwrite')" href="../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it35119" onMouseOver="hilite(35119)" onMouseOut="lolite()" onClick="logVariable('presetxmlfile')" href="../../_variables/presetxmlfile.html">$presetxmlfile</a>, <a class="var it35114" onMouseOver="hilite(35114)" onMouseOut="lolite()" onClick="logVariable('presetxmldata')" href="../../_variables/presetxmldata.html">$presetxmldata</a>);
<a name="l3308"><span class="linenum">3308</span></a>      <a class="phpfunction" onClick="logFunction('fclose')" href="../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it35119" onMouseOver="hilite(35119)" onMouseOut="lolite()" onClick="logVariable('presetxmlfile')" href="../../_variables/presetxmlfile.html">$presetxmlfile</a>);
<a name="l3309"><span class="linenum">3309</span></a>  
<a name="l3310"><span class="linenum">3310</span></a>  <span class="comment">    // Now write the template files</span>
<a name="l3311"><span class="linenum">3311</span></a>      <a class="var it19074" onMouseOver="hilite(19074)" onMouseOut="lolite()" onClick="logVariable('singletemplate')" href="../../_variables/singletemplate.html">$singletemplate</a> = <a class="function" onClick="logFunction('fopen')" href="../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>(<a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a> . '/singletemplate.html', 'w');
<a name="l3312"><span class="linenum">3312</span></a>      <a class="phpfunction" onClick="logFunction('fwrite')" href="../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it19074" onMouseOver="hilite(19074)" onMouseOut="lolite()" onClick="logVariable('singletemplate')" href="../../_variables/singletemplate.html">$singletemplate</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('singletemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/singletemplate.html">singletemplate</a>);
<a name="l3313"><span class="linenum">3313</span></a>      <a class="phpfunction" onClick="logFunction('fclose')" href="../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it19074" onMouseOver="hilite(19074)" onMouseOut="lolite()" onClick="logVariable('singletemplate')" href="../../_variables/singletemplate.html">$singletemplate</a>);
<a name="l3314"><span class="linenum">3314</span></a>  
<a name="l3315"><span class="linenum">3315</span></a>      <a class="var it19072" onMouseOver="hilite(19072)" onMouseOut="lolite()" onClick="logVariable('listtemplateheader')" href="../../_variables/listtemplateheader.html">$listtemplateheader</a> = <a class="function" onClick="logFunction('fopen')" href="../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>(<a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a> . '/listtemplateheader.html', 'w');
<a name="l3316"><span class="linenum">3316</span></a>      <a class="phpfunction" onClick="logFunction('fwrite')" href="../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it19072" onMouseOver="hilite(19072)" onMouseOut="lolite()" onClick="logVariable('listtemplateheader')" href="../../_variables/listtemplateheader.html">$listtemplateheader</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('listtemplateheader')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/listtemplateheader.html">listtemplateheader</a>);
<a name="l3317"><span class="linenum">3317</span></a>      <a class="phpfunction" onClick="logFunction('fclose')" href="../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it19072" onMouseOver="hilite(19072)" onMouseOut="lolite()" onClick="logVariable('listtemplateheader')" href="../../_variables/listtemplateheader.html">$listtemplateheader</a>);
<a name="l3318"><span class="linenum">3318</span></a>  
<a name="l3319"><span class="linenum">3319</span></a>      <a class="var it19075" onMouseOver="hilite(19075)" onMouseOut="lolite()" onClick="logVariable('listtemplate')" href="../../_variables/listtemplate.html">$listtemplate</a> = <a class="function" onClick="logFunction('fopen')" href="../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>(<a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a> . '/listtemplate.html', 'w');
<a name="l3320"><span class="linenum">3320</span></a>      <a class="phpfunction" onClick="logFunction('fwrite')" href="../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it19075" onMouseOver="hilite(19075)" onMouseOut="lolite()" onClick="logVariable('listtemplate')" href="../../_variables/listtemplate.html">$listtemplate</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('listtemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/listtemplate.html">listtemplate</a>);
<a name="l3321"><span class="linenum">3321</span></a>      <a class="phpfunction" onClick="logFunction('fclose')" href="../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it19075" onMouseOver="hilite(19075)" onMouseOut="lolite()" onClick="logVariable('listtemplate')" href="../../_variables/listtemplate.html">$listtemplate</a>);
<a name="l3322"><span class="linenum">3322</span></a>  
<a name="l3323"><span class="linenum">3323</span></a>      <a class="var it19073" onMouseOver="hilite(19073)" onMouseOut="lolite()" onClick="logVariable('listtemplatefooter')" href="../../_variables/listtemplatefooter.html">$listtemplatefooter</a> = <a class="function" onClick="logFunction('fopen')" href="../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>(<a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a> . '/listtemplatefooter.html', 'w');
<a name="l3324"><span class="linenum">3324</span></a>      <a class="phpfunction" onClick="logFunction('fwrite')" href="../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it19073" onMouseOver="hilite(19073)" onMouseOut="lolite()" onClick="logVariable('listtemplatefooter')" href="../../_variables/listtemplatefooter.html">$listtemplatefooter</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('listtemplatefooter')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/listtemplatefooter.html">listtemplatefooter</a>);
<a name="l3325"><span class="linenum">3325</span></a>      <a class="phpfunction" onClick="logFunction('fclose')" href="../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it19073" onMouseOver="hilite(19073)" onMouseOut="lolite()" onClick="logVariable('listtemplatefooter')" href="../../_variables/listtemplatefooter.html">$listtemplatefooter</a>);
<a name="l3326"><span class="linenum">3326</span></a>  
<a name="l3327"><span class="linenum">3327</span></a>      <a class="var it15941" onMouseOver="hilite(15941)" onMouseOut="lolite()" onClick="logVariable('addtemplate')" href="../../_variables/addtemplate.html">$addtemplate</a> = <a class="function" onClick="logFunction('fopen')" href="../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>(<a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a> . '/addtemplate.html', 'w');
<a name="l3328"><span class="linenum">3328</span></a>      <a class="phpfunction" onClick="logFunction('fwrite')" href="../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it15941" onMouseOver="hilite(15941)" onMouseOut="lolite()" onClick="logVariable('addtemplate')" href="../../_variables/addtemplate.html">$addtemplate</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('addtemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/addtemplate.html">addtemplate</a>);
<a name="l3329"><span class="linenum">3329</span></a>      <a class="phpfunction" onClick="logFunction('fclose')" href="../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it15941" onMouseOver="hilite(15941)" onMouseOut="lolite()" onClick="logVariable('addtemplate')" href="../../_variables/addtemplate.html">$addtemplate</a>);
<a name="l3330"><span class="linenum">3330</span></a>  
<a name="l3331"><span class="linenum">3331</span></a>      <a class="var it19076" onMouseOver="hilite(19076)" onMouseOut="lolite()" onClick="logVariable('rsstemplate')" href="../../_variables/rsstemplate.html">$rsstemplate</a> = <a class="function" onClick="logFunction('fopen')" href="../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>(<a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a> . '/rsstemplate.html', 'w');
<a name="l3332"><span class="linenum">3332</span></a>      <a class="phpfunction" onClick="logFunction('fwrite')" href="../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it19076" onMouseOver="hilite(19076)" onMouseOut="lolite()" onClick="logVariable('rsstemplate')" href="../../_variables/rsstemplate.html">$rsstemplate</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('rsstemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/rsstemplate.html">rsstemplate</a>);
<a name="l3333"><span class="linenum">3333</span></a>      <a class="phpfunction" onClick="logFunction('fclose')" href="../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it19076" onMouseOver="hilite(19076)" onMouseOut="lolite()" onClick="logVariable('rsstemplate')" href="../../_variables/rsstemplate.html">$rsstemplate</a>);
<a name="l3334"><span class="linenum">3334</span></a>  
<a name="l3335"><span class="linenum">3335</span></a>      <a class="var it6392" onMouseOver="hilite(6392)" onMouseOut="lolite()" onClick="logVariable('rsstitletemplate')" href="../../_variables/rsstitletemplate.html">$rsstitletemplate</a> = <a class="function" onClick="logFunction('fopen')" href="../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>(<a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a> . '/rsstitletemplate.html', 'w');
<a name="l3336"><span class="linenum">3336</span></a>      <a class="phpfunction" onClick="logFunction('fwrite')" href="../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it6392" onMouseOver="hilite(6392)" onMouseOut="lolite()" onClick="logVariable('rsstitletemplate')" href="../../_variables/rsstitletemplate.html">$rsstitletemplate</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('rsstitletemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/rsstitletemplate.html">rsstitletemplate</a>);
<a name="l3337"><span class="linenum">3337</span></a>      <a class="phpfunction" onClick="logFunction('fclose')" href="../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it6392" onMouseOver="hilite(6392)" onMouseOut="lolite()" onClick="logVariable('rsstitletemplate')" href="../../_variables/rsstitletemplate.html">$rsstitletemplate</a>);
<a name="l3338"><span class="linenum">3338</span></a>  
<a name="l3339"><span class="linenum">3339</span></a>      <a class="var it15931" onMouseOver="hilite(15931)" onMouseOut="lolite()" onClick="logVariable('csstemplate')" href="../../_variables/csstemplate.html">$csstemplate</a> = <a class="function" onClick="logFunction('fopen')" href="../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>(<a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a> . '/csstemplate.css', 'w');
<a name="l3340"><span class="linenum">3340</span></a>      <a class="phpfunction" onClick="logFunction('fwrite')" href="../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it15931" onMouseOver="hilite(15931)" onMouseOut="lolite()" onClick="logVariable('csstemplate')" href="../../_variables/csstemplate.html">$csstemplate</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('csstemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/csstemplate.html">csstemplate</a>);
<a name="l3341"><span class="linenum">3341</span></a>      <a class="phpfunction" onClick="logFunction('fclose')" href="../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it15931" onMouseOver="hilite(15931)" onMouseOut="lolite()" onClick="logVariable('csstemplate')" href="../../_variables/csstemplate.html">$csstemplate</a>);
<a name="l3342"><span class="linenum">3342</span></a>  
<a name="l3343"><span class="linenum">3343</span></a>      <a class="var it15932" onMouseOver="hilite(15932)" onMouseOut="lolite()" onClick="logVariable('jstemplate')" href="../../_variables/jstemplate.html">$jstemplate</a> = <a class="function" onClick="logFunction('fopen')" href="../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>(<a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a> . '/jstemplate.js', 'w');
<a name="l3344"><span class="linenum">3344</span></a>      <a class="phpfunction" onClick="logFunction('fwrite')" href="../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it15932" onMouseOver="hilite(15932)" onMouseOut="lolite()" onClick="logVariable('jstemplate')" href="../../_variables/jstemplate.html">$jstemplate</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('jstemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/jstemplate.html">jstemplate</a>);
<a name="l3345"><span class="linenum">3345</span></a>      <a class="phpfunction" onClick="logFunction('fclose')" href="../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it15932" onMouseOver="hilite(15932)" onMouseOut="lolite()" onClick="logVariable('jstemplate')" href="../../_variables/jstemplate.html">$jstemplate</a>);
<a name="l3346"><span class="linenum">3346</span></a>  
<a name="l3347"><span class="linenum">3347</span></a>      <a class="var it35084" onMouseOver="hilite(35084)" onMouseOut="lolite()" onClick="logVariable('asearchtemplate')" href="../../_variables/asearchtemplate.html">$asearchtemplate</a> = <a class="function" onClick="logFunction('fopen')" href="../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>(<a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a> . '/asearchtemplate.html', 'w');
<a name="l3348"><span class="linenum">3348</span></a>      <a class="phpfunction" onClick="logFunction('fwrite')" href="../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it35084" onMouseOver="hilite(35084)" onMouseOut="lolite()" onClick="logVariable('asearchtemplate')" href="../../_variables/asearchtemplate.html">$asearchtemplate</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('asearchtemplate')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/asearchtemplate.html">asearchtemplate</a>);
<a name="l3349"><span class="linenum">3349</span></a>      <a class="phpfunction" onClick="logFunction('fclose')" href="../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it35084" onMouseOver="hilite(35084)" onMouseOut="lolite()" onClick="logVariable('asearchtemplate')" href="../../_variables/asearchtemplate.html">$asearchtemplate</a>);
<a name="l3350"><span class="linenum">3350</span></a>  
<a name="l3351"><span class="linenum">3351</span></a>  <span class="comment">    // Check if all files have been generated</span>
<a name="l3352"><span class="linenum">3352</span></a>      if (! <a class="function" onClick="logFunction('is_directory_a_preset')" href="../../_functions/is_directory_a_preset.html" onMouseOver="funcPopup(event,'is_directory_a_preset')">is_directory_a_preset</a>(<a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a>)) {
<a name="l3353"><span class="linenum">3353</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('generateerror', 'data');
<a name="l3354"><span class="linenum">3354</span></a>      }
<a name="l3355"><span class="linenum">3355</span></a>  
<a name="l3356"><span class="linenum">3356</span></a>      <a class="var it4768" onMouseOver="hilite(4768)" onMouseOut="lolite()" onClick="logVariable('filenames')" href="../../_variables/filenames.html">$filenames</a> = array(
<a name="l3357"><span class="linenum">3357</span></a>          'preset.xml',
<a name="l3358"><span class="linenum">3358</span></a>          'singletemplate.html',
<a name="l3359"><span class="linenum">3359</span></a>          'listtemplateheader.html',
<a name="l3360"><span class="linenum">3360</span></a>          'listtemplate.html',
<a name="l3361"><span class="linenum">3361</span></a>          'listtemplatefooter.html',
<a name="l3362"><span class="linenum">3362</span></a>          'addtemplate.html',
<a name="l3363"><span class="linenum">3363</span></a>          'rsstemplate.html',
<a name="l3364"><span class="linenum">3364</span></a>          'rsstitletemplate.html',
<a name="l3365"><span class="linenum">3365</span></a>          'csstemplate.css',
<a name="l3366"><span class="linenum">3366</span></a>          'jstemplate.js',
<a name="l3367"><span class="linenum">3367</span></a>          'asearchtemplate.html'
<a name="l3368"><span class="linenum">3368</span></a>      );
<a name="l3369"><span class="linenum">3369</span></a>  
<a name="l3370"><span class="linenum">3370</span></a>      <a class="var it9606" onMouseOver="hilite(9606)" onMouseOut="lolite()" onClick="logVariable('filelist')" href="../../_variables/filelist.html">$filelist</a> = array();
<a name="l3371"><span class="linenum">3371</span></a>      foreach (<a class="var it4768" onMouseOver="hilite(4768)" onMouseOut="lolite()" onClick="logVariable('filenames')" href="../../_variables/filenames.html">$filenames</a> as <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>) {
<a name="l3372"><span class="linenum">3372</span></a>          <a class="var it9606" onMouseOver="hilite(9606)" onMouseOut="lolite()" onClick="logVariable('filelist')" href="../../_variables/filelist.html">$filelist</a>[<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>] = <a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a> . '/' . <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>;
<a name="l3373"><span class="linenum">3373</span></a>      }
<a name="l3374"><span class="linenum">3374</span></a>  
<a name="l3375"><span class="linenum">3375</span></a>      <a class="var it34636" onMouseOver="hilite(34636)" onMouseOut="lolite()" onClick="logVariable('exportfile')" href="../../_variables/exportfile.html">$exportfile</a> = <a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a>.'.zip';
<a name="l3376"><span class="linenum">3376</span></a>      <a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it34636" onMouseOver="hilite(34636)" onMouseOut="lolite()" onClick="logVariable('exportfile')" href="../../_variables/exportfile.html">$exportfile</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('unlink')" href="../../_functions/unlink.html" onMouseOver="phpfuncPopup(event,'unlink')">unlink</a>(<a class="var it34636" onMouseOver="hilite(34636)" onMouseOut="lolite()" onClick="logVariable('exportfile')" href="../../_variables/exportfile.html">$exportfile</a>);
<a name="l3377"><span class="linenum">3377</span></a>  
<a name="l3378"><span class="linenum">3378</span></a>      <a class="var it773" onMouseOver="hilite(773)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../_variables/fp.html">$fp</a> = <a class="function" onClick="logFunction('get_file_packer')" href="../../_functions/get_file_packer.html" onMouseOver="funcPopup(event,'get_file_packer')">get_file_packer</a>('application/zip');
<a name="l3379"><span class="linenum">3379</span></a>      <a class="var it773" onMouseOver="hilite(773)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../_variables/fp.html">$fp</a>-&gt;<a class="function" onClick="logFunction('archive_to_pathname')" href="../../_functions/archive_to_pathname.html" onMouseOver="funcPopup(event,'archive_to_pathname')">archive_to_pathname</a>(<a class="var it9606" onMouseOver="hilite(9606)" onMouseOut="lolite()" onClick="logVariable('filelist')" href="../../_variables/filelist.html">$filelist</a>, <a class="var it34636" onMouseOver="hilite(34636)" onMouseOut="lolite()" onClick="logVariable('exportfile')" href="../../_variables/exportfile.html">$exportfile</a>);
<a name="l3380"><span class="linenum">3380</span></a>  
<a name="l3381"><span class="linenum">3381</span></a>      foreach (<a class="var it9606" onMouseOver="hilite(9606)" onMouseOut="lolite()" onClick="logVariable('filelist')" href="../../_variables/filelist.html">$filelist</a> as <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l3382"><span class="linenum">3382</span></a>          <a class="phpfunction" onClick="logFunction('unlink')" href="../../_functions/unlink.html" onMouseOver="phpfuncPopup(event,'unlink')">unlink</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>);
<a name="l3383"><span class="linenum">3383</span></a>      }
<a name="l3384"><span class="linenum">3384</span></a>      <a class="phpfunction" onClick="logFunction('rmdir')" href="../../_functions/rmdir.html" onMouseOver="phpfuncPopup(event,'rmdir')">rmdir</a>(<a class="var it35118" onMouseOver="hilite(35118)" onMouseOut="lolite()" onClick="logVariable('exportdir')" href="../../_variables/exportdir.html">$exportdir</a>);
<a name="l3385"><span class="linenum">3385</span></a>  
<a name="l3386"><span class="linenum">3386</span></a>  <span class="comment">    // Return the full path to the exported preset file:</span>
<a name="l3387"><span class="linenum">3387</span></a>      return <a class="var it34636" onMouseOver="hilite(34636)" onMouseOut="lolite()" onClick="logVariable('exportfile')" href="../../_variables/exportfile.html">$exportfile</a>;
<a name="l3388"><span class="linenum">3388</span></a>  }
<a name="l3389"><span class="linenum">3389</span></a>  
<a name="l3390"><span class="linenum">3390</span></a>  <span class="comment">/**</span>
<a name="l3391"><span class="linenum">3391</span></a>  <span class="comment"> * Running addtional permission check on plugin, for example, plugins</span>
<a name="l3392"><span class="linenum">3392</span></a>  <span class="comment"> * may have switch to turn on/off comments option, this callback will</span>
<a name="l3393"><span class="linenum">3393</span></a>  <span class="comment"> * affect UI display, not like pluginname_comment_validate only throw</span>
<a name="l3394"><span class="linenum">3394</span></a>  <span class="comment"> * exceptions.</span>
<a name="l3395"><span class="linenum">3395</span></a>  <span class="comment"> * Capability check has been done in comment-&gt;check_permissions(), we</span>
<a name="l3396"><span class="linenum">3396</span></a>  <span class="comment"> * don't need to do it again here.</span>
<a name="l3397"><span class="linenum">3397</span></a>  <span class="comment"> *</span>
<a name="l3398"><span class="linenum">3398</span></a>  <span class="comment"> * @package  mod_data</span>
<a name="l3399"><span class="linenum">3399</span></a>  <span class="comment"> * @category comment</span>
<a name="l3400"><span class="linenum">3400</span></a>  <span class="comment"> *</span>
<a name="l3401"><span class="linenum">3401</span></a>  <span class="comment"> * @param stdClass $comment_param {</span>
<a name="l3402"><span class="linenum">3402</span></a>  <span class="comment"> *              context  =&gt; context the context object</span>
<a name="l3403"><span class="linenum">3403</span></a>  <span class="comment"> *              courseid =&gt; int course id</span>
<a name="l3404"><span class="linenum">3404</span></a>  <span class="comment"> *              cm       =&gt; stdClass course module object</span>
<a name="l3405"><span class="linenum">3405</span></a>  <span class="comment"> *              commentarea =&gt; string comment area</span>
<a name="l3406"><span class="linenum">3406</span></a>  <span class="comment"> *              itemid      =&gt; int itemid</span>
<a name="l3407"><span class="linenum">3407</span></a>  <span class="comment"> * }</span>
<a name="l3408"><span class="linenum">3408</span></a>  <span class="comment"> * @return array</span>
<a name="l3409"><span class="linenum">3409</span></a>  <span class="comment"> */</span>
<a name="l3410"><span class="linenum">3410</span></a>  function <a class="function" onClick="logFunction('data_comment_permissions')" href="../../_functions/data_comment_permissions.html" onMouseOver="funcPopup(event,'data_comment_permissions')">data_comment_permissions</a>(<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>) {
<a name="l3411"><span class="linenum">3411</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3412"><span class="linenum">3412</span></a>      if (!<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_records', array('id'=&gt;<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('itemid')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a>))) {
<a name="l3413"><span class="linenum">3413</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentitemid');
<a name="l3414"><span class="linenum">3414</span></a>      }
<a name="l3415"><span class="linenum">3415</span></a>      if (!<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data', array('id'=&gt;<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('dataid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/dataid.html">dataid</a>))) {
<a name="l3416"><span class="linenum">3416</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidid', 'data');
<a name="l3417"><span class="linenum">3417</span></a>      }
<a name="l3418"><span class="linenum">3418</span></a>      if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('comments')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/comments.html">comments</a>) {
<a name="l3419"><span class="linenum">3419</span></a>          return array('post'=&gt;true, 'view'=&gt;true);
<a name="l3420"><span class="linenum">3420</span></a>      } else {
<a name="l3421"><span class="linenum">3421</span></a>          return array('post'=&gt;false, 'view'=&gt;false);
<a name="l3422"><span class="linenum">3422</span></a>      }
<a name="l3423"><span class="linenum">3423</span></a>  }
<a name="l3424"><span class="linenum">3424</span></a>  
<a name="l3425"><span class="linenum">3425</span></a>  <span class="comment">/**</span>
<a name="l3426"><span class="linenum">3426</span></a>  <span class="comment"> * Validate comment parameter before perform other comments actions</span>
<a name="l3427"><span class="linenum">3427</span></a>  <span class="comment"> *</span>
<a name="l3428"><span class="linenum">3428</span></a>  <span class="comment"> * @package  mod_data</span>
<a name="l3429"><span class="linenum">3429</span></a>  <span class="comment"> * @category comment</span>
<a name="l3430"><span class="linenum">3430</span></a>  <span class="comment"> *</span>
<a name="l3431"><span class="linenum">3431</span></a>  <span class="comment"> * @param stdClass $comment_param {</span>
<a name="l3432"><span class="linenum">3432</span></a>  <span class="comment"> *              context  =&gt; context the context object</span>
<a name="l3433"><span class="linenum">3433</span></a>  <span class="comment"> *              courseid =&gt; int course id</span>
<a name="l3434"><span class="linenum">3434</span></a>  <span class="comment"> *              cm       =&gt; stdClass course module object</span>
<a name="l3435"><span class="linenum">3435</span></a>  <span class="comment"> *              commentarea =&gt; string comment area</span>
<a name="l3436"><span class="linenum">3436</span></a>  <span class="comment"> *              itemid      =&gt; int itemid</span>
<a name="l3437"><span class="linenum">3437</span></a>  <span class="comment"> * }</span>
<a name="l3438"><span class="linenum">3438</span></a>  <span class="comment"> * @return boolean</span>
<a name="l3439"><span class="linenum">3439</span></a>  <span class="comment"> */</span>
<a name="l3440"><span class="linenum">3440</span></a>  function <a class="function" onClick="logFunction('data_comment_validate')" href="../../_functions/data_comment_validate.html" onMouseOver="funcPopup(event,'data_comment_validate')">data_comment_validate</a>(<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>) {
<a name="l3441"><span class="linenum">3441</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3442"><span class="linenum">3442</span></a>  <span class="comment">    // validate comment area</span>
<a name="l3443"><span class="linenum">3443</span></a>      if (<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('commentarea')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/commentarea.html">commentarea</a> != 'database_entry') {
<a name="l3444"><span class="linenum">3444</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentarea');
<a name="l3445"><span class="linenum">3445</span></a>      }
<a name="l3446"><span class="linenum">3446</span></a>  <span class="comment">    // validate itemid</span>
<a name="l3447"><span class="linenum">3447</span></a>      if (!<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_records', array('id'=&gt;<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('itemid')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a>))) {
<a name="l3448"><span class="linenum">3448</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentitemid');
<a name="l3449"><span class="linenum">3449</span></a>      }
<a name="l3450"><span class="linenum">3450</span></a>      if (!<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data', array('id'=&gt;<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('dataid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/dataid.html">dataid</a>))) {
<a name="l3451"><span class="linenum">3451</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidid', 'data');
<a name="l3452"><span class="linenum">3452</span></a>      }
<a name="l3453"><span class="linenum">3453</span></a>      if (!<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('course')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>))) {
<a name="l3454"><span class="linenum">3454</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('coursemisconf');
<a name="l3455"><span class="linenum">3455</span></a>      }
<a name="l3456"><span class="linenum">3456</span></a>      if (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('data', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l3457"><span class="linenum">3457</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcoursemodule');
<a name="l3458"><span class="linenum">3458</span></a>      }
<a name="l3459"><span class="linenum">3459</span></a>      if (!<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('comments')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/comments.html">comments</a>) {
<a name="l3460"><span class="linenum">3460</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('commentsoff', 'data');
<a name="l3461"><span class="linenum">3461</span></a>      }
<a name="l3462"><span class="linenum">3462</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l3463"><span class="linenum">3463</span></a>  
<a name="l3464"><span class="linenum">3464</span></a>  <span class="comment">    //check if approved</span>
<a name="l3465"><span class="linenum">3465</span></a>      if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('approval')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/approval.html">approval</a> and !<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('approved')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a> and !<a class="function" onClick="logFunction('data_isowner')" href="../../_functions/data_isowner.html" onMouseOver="funcPopup(event,'data_isowner')">data_isowner</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:approve', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3466"><span class="linenum">3466</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('notapproved', 'data');
<a name="l3467"><span class="linenum">3467</span></a>      }
<a name="l3468"><span class="linenum">3468</span></a>  
<a name="l3469"><span class="linenum">3469</span></a>  <span class="comment">    // group access</span>
<a name="l3470"><span class="linenum">3470</span></a>      if (<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('groupid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>) {
<a name="l3471"><span class="linenum">3471</span></a>          <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l3472"><span class="linenum">3472</span></a>          if (<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3473"><span class="linenum">3473</span></a>              if (!<a class="function" onClick="logFunction('groups_is_member')" href="../../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('groupid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>)) {
<a name="l3474"><span class="linenum">3474</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('notmemberofgroup');
<a name="l3475"><span class="linenum">3475</span></a>              }
<a name="l3476"><span class="linenum">3476</span></a>          }
<a name="l3477"><span class="linenum">3477</span></a>      }
<a name="l3478"><span class="linenum">3478</span></a>  <span class="comment">    // validate context id</span>
<a name="l3479"><span class="linenum">3479</span></a>      if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> != <a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('context')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id) {
<a name="l3480"><span class="linenum">3480</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcontext');
<a name="l3481"><span class="linenum">3481</span></a>      }
<a name="l3482"><span class="linenum">3482</span></a>  <span class="comment">    // validation for comment deletion</span>
<a name="l3483"><span class="linenum">3483</span></a>      if (!empty(<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('commentid')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/commentid.html">commentid</a>)) {
<a name="l3484"><span class="linenum">3484</span></a>          if (<a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('comments', array('id'=&gt;<a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('commentid')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/commentid.html">commentid</a>))) {
<a name="l3485"><span class="linenum">3485</span></a>              if (<a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>-&gt;<a onClick="logVariable('commentarea')" class="var it39776" onMouseOver="hilite(39776)" onMouseOut="lolite()" href="../../_variables/commentarea.html">commentarea</a> != 'database_entry') {
<a name="l3486"><span class="linenum">3486</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentarea');
<a name="l3487"><span class="linenum">3487</span></a>              }
<a name="l3488"><span class="linenum">3488</span></a>              if (<a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>-&gt;<a onClick="logVariable('contextid')" class="var it39776" onMouseOver="hilite(39776)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> != <a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('context')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id) {
<a name="l3489"><span class="linenum">3489</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcontext');
<a name="l3490"><span class="linenum">3490</span></a>              }
<a name="l3491"><span class="linenum">3491</span></a>              if (<a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>-&gt;<a onClick="logVariable('itemid')" class="var it39776" onMouseOver="hilite(39776)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a> != <a class="var it18785" onMouseOver="hilite(18785)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('itemid')" class="var it41509" onMouseOver="hilite(41509)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a>) {
<a name="l3492"><span class="linenum">3492</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentitemid');
<a name="l3493"><span class="linenum">3493</span></a>              }
<a name="l3494"><span class="linenum">3494</span></a>          } else {
<a name="l3495"><span class="linenum">3495</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentid');
<a name="l3496"><span class="linenum">3496</span></a>          }
<a name="l3497"><span class="linenum">3497</span></a>      }
<a name="l3498"><span class="linenum">3498</span></a>      return true;
<a name="l3499"><span class="linenum">3499</span></a>  }
<a name="l3500"><span class="linenum">3500</span></a>  
<a name="l3501"><span class="linenum">3501</span></a>  <span class="comment">/**</span>
<a name="l3502"><span class="linenum">3502</span></a>  <span class="comment"> * Return a list of page types</span>
<a name="l3503"><span class="linenum">3503</span></a>  <span class="comment"> * @param string $pagetype current page type</span>
<a name="l3504"><span class="linenum">3504</span></a>  <span class="comment"> * @param stdClass $parentcontext Block's parent context</span>
<a name="l3505"><span class="linenum">3505</span></a>  <span class="comment"> * @param stdClass $currentcontext Current context of block</span>
<a name="l3506"><span class="linenum">3506</span></a>  <span class="comment"> */</span>
<a name="l3507"><span class="linenum">3507</span></a>  function <a class="function" onClick="logFunction('data_page_type_list')" href="../../_functions/data_page_type_list.html" onMouseOver="funcPopup(event,'data_page_type_list')">data_page_type_list</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../../_variables/parentcontext.html">$parentcontext</a>, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../../_variables/currentcontext.html">$currentcontext</a>) {
<a name="l3508"><span class="linenum">3508</span></a>      <a class="var it8026" onMouseOver="hilite(8026)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a> = array('mod-data-*'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-data-x', 'data'));
<a name="l3509"><span class="linenum">3509</span></a>      return <a class="var it8026" onMouseOver="hilite(8026)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a>;
<a name="l3510"><span class="linenum">3510</span></a>  }
<a name="l3511"><span class="linenum">3511</span></a>  
<a name="l3512"><span class="linenum">3512</span></a>  <span class="comment">/**</span>
<a name="l3513"><span class="linenum">3513</span></a>  <span class="comment"> * Get all of the record ids from a database activity.</span>
<a name="l3514"><span class="linenum">3514</span></a>  <span class="comment"> *</span>
<a name="l3515"><span class="linenum">3515</span></a>  <span class="comment"> * @param int    $dataid      The dataid of the database module.</span>
<a name="l3516"><span class="linenum">3516</span></a>  <span class="comment"> * @param object $selectdata  Contains an additional sql statement for the</span>
<a name="l3517"><span class="linenum">3517</span></a>  <span class="comment"> *                            where clause for group and approval fields.</span>
<a name="l3518"><span class="linenum">3518</span></a>  <span class="comment"> * @param array  $params      Parameters that coincide with the sql statement.</span>
<a name="l3519"><span class="linenum">3519</span></a>  <span class="comment"> * @return array $idarray     An array of record ids</span>
<a name="l3520"><span class="linenum">3520</span></a>  <span class="comment"> */</span>
<a name="l3521"><span class="linenum">3521</span></a>  function <a class="function" onClick="logFunction('data_get_all_recordids')" href="../../_functions/data_get_all_recordids.html" onMouseOver="funcPopup(event,'data_get_all_recordids')">data_get_all_recordids</a>(<a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>, <a class="var it28722" onMouseOver="hilite(28722)" onMouseOut="lolite()" onClick="logVariable('selectdata')" href="../../_variables/selectdata.html">$selectdata</a> = '', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = null) {
<a name="l3522"><span class="linenum">3522</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3523"><span class="linenum">3523</span></a>      <a class="var it35120" onMouseOver="hilite(35120)" onMouseOut="lolite()" onClick="logVariable('initsql')" href="../../_variables/initsql.html">$initsql</a> = 'SELECT r.id
<a name="l3524"><span class="linenum">3524</span></a>                    FROM {data_records} r
<a name="l3525"><span class="linenum">3525</span></a>                   WHERE r.dataid = :dataid';
<a name="l3526"><span class="linenum">3526</span></a>      if (<a class="var it28722" onMouseOver="hilite(28722)" onMouseOut="lolite()" onClick="logVariable('selectdata')" href="../../_variables/selectdata.html">$selectdata</a> != '') {
<a name="l3527"><span class="linenum">3527</span></a>          <a class="var it35120" onMouseOver="hilite(35120)" onMouseOut="lolite()" onClick="logVariable('initsql')" href="../../_variables/initsql.html">$initsql</a> .= <a class="var it28722" onMouseOver="hilite(28722)" onMouseOut="lolite()" onClick="logVariable('selectdata')" href="../../_variables/selectdata.html">$selectdata</a>;
<a name="l3528"><span class="linenum">3528</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(array('dataid' =&gt; <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>), <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l3529"><span class="linenum">3529</span></a>      } else {
<a name="l3530"><span class="linenum">3530</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('dataid' =&gt; <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>);
<a name="l3531"><span class="linenum">3531</span></a>      }
<a name="l3532"><span class="linenum">3532</span></a>      <a class="var it35120" onMouseOver="hilite(35120)" onMouseOut="lolite()" onClick="logVariable('initsql')" href="../../_variables/initsql.html">$initsql</a> .= ' GROUP BY r.id';
<a name="l3533"><span class="linenum">3533</span></a>      <a class="var it35121" onMouseOver="hilite(35121)" onMouseOut="lolite()" onClick="logVariable('initrecord')" href="../../_variables/initrecord.html">$initrecord</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it35120" onMouseOver="hilite(35120)" onMouseOut="lolite()" onClick="logVariable('initsql')" href="../../_variables/initsql.html">$initsql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l3534"><span class="linenum">3534</span></a>      <a class="var it11360" onMouseOver="hilite(11360)" onMouseOut="lolite()" onClick="logVariable('idarray')" href="../../_variables/idarray.html">$idarray</a> = array();
<a name="l3535"><span class="linenum">3535</span></a>      foreach (<a class="var it35121" onMouseOver="hilite(35121)" onMouseOut="lolite()" onClick="logVariable('initrecord')" href="../../_variables/initrecord.html">$initrecord</a> as <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l3536"><span class="linenum">3536</span></a>          <a class="var it11360" onMouseOver="hilite(11360)" onMouseOut="lolite()" onClick="logVariable('idarray')" href="../../_variables/idarray.html">$idarray</a>[] = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3537"><span class="linenum">3537</span></a>      }
<a name="l3538"><span class="linenum">3538</span></a>  <span class="comment">    // Close the record set and free up resources.</span>
<a name="l3539"><span class="linenum">3539</span></a>      <a class="var it35121" onMouseOver="hilite(35121)" onMouseOut="lolite()" onClick="logVariable('initrecord')" href="../../_variables/initrecord.html">$initrecord</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l3540"><span class="linenum">3540</span></a>      return <a class="var it11360" onMouseOver="hilite(11360)" onMouseOut="lolite()" onClick="logVariable('idarray')" href="../../_variables/idarray.html">$idarray</a>;
<a name="l3541"><span class="linenum">3541</span></a>  }
<a name="l3542"><span class="linenum">3542</span></a>  
<a name="l3543"><span class="linenum">3543</span></a>  <span class="comment">/**</span>
<a name="l3544"><span class="linenum">3544</span></a>  <span class="comment"> * Get the ids of all the records that match that advanced search criteria</span>
<a name="l3545"><span class="linenum">3545</span></a>  <span class="comment"> * This goes and loops through each criterion one at a time until it either</span>
<a name="l3546"><span class="linenum">3546</span></a>  <span class="comment"> * runs out of records or returns a subset of records.</span>
<a name="l3547"><span class="linenum">3547</span></a>  <span class="comment"> *</span>
<a name="l3548"><span class="linenum">3548</span></a>  <span class="comment"> * @param array $recordids    An array of record ids.</span>
<a name="l3549"><span class="linenum">3549</span></a>  <span class="comment"> * @param array $searcharray  Contains information for the advanced search criteria</span>
<a name="l3550"><span class="linenum">3550</span></a>  <span class="comment"> * @param int $dataid         The data id of the database.</span>
<a name="l3551"><span class="linenum">3551</span></a>  <span class="comment"> * @return array $recordids   An array of record ids.</span>
<a name="l3552"><span class="linenum">3552</span></a>  <span class="comment"> */</span>
<a name="l3553"><span class="linenum">3553</span></a>  function <a class="function" onClick="logFunction('data_get_advance_search_ids')" href="../../_functions/data_get_advance_search_ids.html" onMouseOver="funcPopup(event,'data_get_advance_search_ids')">data_get_advance_search_ids</a>(<a class="var it28693" onMouseOver="hilite(28693)" onMouseOut="lolite()" onClick="logVariable('recordids')" href="../../_variables/recordids.html">$recordids</a>, <a class="var it35122" onMouseOver="hilite(35122)" onMouseOut="lolite()" onClick="logVariable('searcharray')" href="../../_variables/searcharray.html">$searcharray</a>, <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>) {
<a name="l3554"><span class="linenum">3554</span></a>      <a class="var it7365" onMouseOver="hilite(7365)" onMouseOut="lolite()" onClick="logVariable('searchcriteria')" href="../../_variables/searchcriteria.html">$searchcriteria</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it35122" onMouseOver="hilite(35122)" onMouseOut="lolite()" onClick="logVariable('searcharray')" href="../../_variables/searcharray.html">$searcharray</a>);
<a name="l3555"><span class="linenum">3555</span></a>  <span class="comment">    // Loop through and reduce the IDs one search criteria at a time.</span>
<a name="l3556"><span class="linenum">3556</span></a>      foreach (<a class="var it7365" onMouseOver="hilite(7365)" onMouseOut="lolite()" onClick="logVariable('searchcriteria')" href="../../_variables/searchcriteria.html">$searchcriteria</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>) {
<a name="l3557"><span class="linenum">3557</span></a>          <a class="var it28693" onMouseOver="hilite(28693)" onMouseOut="lolite()" onClick="logVariable('recordids')" href="../../_variables/recordids.html">$recordids</a> = <a class="function" onClick="logFunction('data_get_recordids')" href="../../_functions/data_get_recordids.html" onMouseOver="funcPopup(event,'data_get_recordids')">data_get_recordids</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, <a class="var it35122" onMouseOver="hilite(35122)" onMouseOut="lolite()" onClick="logVariable('searcharray')" href="../../_variables/searcharray.html">$searcharray</a>, <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>, <a class="var it28693" onMouseOver="hilite(28693)" onMouseOut="lolite()" onClick="logVariable('recordids')" href="../../_variables/recordids.html">$recordids</a>);
<a name="l3558"><span class="linenum">3558</span></a>  <span class="comment">        // If we don't have anymore IDs then stop.</span>
<a name="l3559"><span class="linenum">3559</span></a>          if (!<a class="var it28693" onMouseOver="hilite(28693)" onMouseOut="lolite()" onClick="logVariable('recordids')" href="../../_variables/recordids.html">$recordids</a>) {
<a name="l3560"><span class="linenum">3560</span></a>              break;
<a name="l3561"><span class="linenum">3561</span></a>          }
<a name="l3562"><span class="linenum">3562</span></a>      }
<a name="l3563"><span class="linenum">3563</span></a>      return <a class="var it28693" onMouseOver="hilite(28693)" onMouseOut="lolite()" onClick="logVariable('recordids')" href="../../_variables/recordids.html">$recordids</a>;
<a name="l3564"><span class="linenum">3564</span></a>  }
<a name="l3565"><span class="linenum">3565</span></a>  
<a name="l3566"><span class="linenum">3566</span></a>  <span class="comment">/**</span>
<a name="l3567"><span class="linenum">3567</span></a>  <span class="comment"> * Gets the record IDs given the search criteria</span>
<a name="l3568"><span class="linenum">3568</span></a>  <span class="comment"> *</span>
<a name="l3569"><span class="linenum">3569</span></a>  <span class="comment"> * @param string $alias       Record alias.</span>
<a name="l3570"><span class="linenum">3570</span></a>  <span class="comment"> * @param array $searcharray  Criteria for the search.</span>
<a name="l3571"><span class="linenum">3571</span></a>  <span class="comment"> * @param int $dataid         Data ID for the database</span>
<a name="l3572"><span class="linenum">3572</span></a>  <span class="comment"> * @param array $recordids    An array of record IDs.</span>
<a name="l3573"><span class="linenum">3573</span></a>  <span class="comment"> * @return array $nestarray   An arry of record IDs</span>
<a name="l3574"><span class="linenum">3574</span></a>  <span class="comment"> */</span>
<a name="l3575"><span class="linenum">3575</span></a>  function <a class="function" onClick="logFunction('data_get_recordids')" href="../../_functions/data_get_recordids.html" onMouseOver="funcPopup(event,'data_get_recordids')">data_get_recordids</a>(<a class="var it9120" onMouseOver="hilite(9120)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a>, <a class="var it35122" onMouseOver="hilite(35122)" onMouseOut="lolite()" onClick="logVariable('searcharray')" href="../../_variables/searcharray.html">$searcharray</a>, <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>, <a class="var it28693" onMouseOver="hilite(28693)" onMouseOut="lolite()" onClick="logVariable('recordids')" href="../../_variables/recordids.html">$recordids</a>) {
<a name="l3576"><span class="linenum">3576</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3577"><span class="linenum">3577</span></a>  
<a name="l3578"><span class="linenum">3578</span></a>      <a class="var it35123" onMouseOver="hilite(35123)" onMouseOut="lolite()" onClick="logVariable('nestsearch')" href="../../_variables/nestsearch.html">$nestsearch</a> = <a class="var it35122" onMouseOver="hilite(35122)" onMouseOut="lolite()" onClick="logVariable('searcharray')" href="../../_variables/searcharray.html">$searcharray</a>[<a class="var it9120" onMouseOver="hilite(9120)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a>];
<a name="l3579"><span class="linenum">3579</span></a>  <span class="comment">    // searching for content outside of mdl_data_content</span>
<a name="l3580"><span class="linenum">3580</span></a>      if (<a class="var it9120" onMouseOver="hilite(9120)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a> &lt; 0) {
<a name="l3581"><span class="linenum">3581</span></a>          <a class="var it9120" onMouseOver="hilite(9120)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a> = '';
<a name="l3582"><span class="linenum">3582</span></a>      }
<a name="l3583"><span class="linenum">3583</span></a>      <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it10795" onMouseOver="hilite(10795)" onMouseOut="lolite()" onClick="logVariable('insql')" href="../../_variables/insql.html">$insql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it28693" onMouseOver="hilite(28693)" onMouseOut="lolite()" onClick="logVariable('recordids')" href="../../_variables/recordids.html">$recordids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l3584"><span class="linenum">3584</span></a>      <a class="var it35124" onMouseOver="hilite(35124)" onMouseOut="lolite()" onClick="logVariable('nestselect')" href="../../_variables/nestselect.html">$nestselect</a> = 'SELECT c' . <a class="var it9120" onMouseOver="hilite(9120)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a> . '.recordid
<a name="l3585"><span class="linenum">3585</span></a>                       FROM {data_content} c' . <a class="var it9120" onMouseOver="hilite(9120)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a> . ',
<a name="l3586"><span class="linenum">3586</span></a>                            {data_fields} f,
<a name="l3587"><span class="linenum">3587</span></a>                            {data_records} r,
<a name="l3588"><span class="linenum">3588</span></a>                            {user} u ';
<a name="l3589"><span class="linenum">3589</span></a>      <a class="var it35125" onMouseOver="hilite(35125)" onMouseOut="lolite()" onClick="logVariable('nestwhere')" href="../../_variables/nestwhere.html">$nestwhere</a> = 'WHERE u.id = r.userid
<a name="l3590"><span class="linenum">3590</span></a>                      AND f.id = c' . <a class="var it9120" onMouseOver="hilite(9120)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a> . '.fieldid
<a name="l3591"><span class="linenum">3591</span></a>                      AND r.id = c' . <a class="var it9120" onMouseOver="hilite(9120)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a> . '.recordid
<a name="l3592"><span class="linenum">3592</span></a>                      AND r.dataid = :dataid
<a name="l3593"><span class="linenum">3593</span></a>                      AND c' . <a class="var it9120" onMouseOver="hilite(9120)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a> .'.recordid ' . <a class="var it10795" onMouseOver="hilite(10795)" onMouseOut="lolite()" onClick="logVariable('insql')" href="../../_variables/insql.html">$insql</a> . '
<a name="l3594"><span class="linenum">3594</span></a>                      AND ';
<a name="l3595"><span class="linenum">3595</span></a>  
<a name="l3596"><span class="linenum">3596</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['dataid'] = <a class="var it2041" onMouseOver="hilite(2041)" onMouseOut="lolite()" onClick="logVariable('dataid')" href="../../_variables/dataid.html">$dataid</a>;
<a name="l3597"><span class="linenum">3597</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it35123" onMouseOver="hilite(35123)" onMouseOut="lolite()" onClick="logVariable('nestsearch')" href="../../_variables/nestsearch.html">$nestsearch</a>-&gt;<a onClick="logVariable('params')" class="var it41944" onMouseOver="hilite(41944)" onMouseOut="lolite()" href="../../_variables/params.html">params</a>) != 0) {
<a name="l3598"><span class="linenum">3598</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it35123" onMouseOver="hilite(35123)" onMouseOut="lolite()" onClick="logVariable('nestsearch')" href="../../_variables/nestsearch.html">$nestsearch</a>-&gt;<a onClick="logVariable('params')" class="var it41944" onMouseOver="hilite(41944)" onMouseOut="lolite()" href="../../_variables/params.html">params</a>);
<a name="l3599"><span class="linenum">3599</span></a>          <a class="var it35126" onMouseOver="hilite(35126)" onMouseOut="lolite()" onClick="logVariable('nestsql')" href="../../_variables/nestsql.html">$nestsql</a> = <a class="var it35124" onMouseOver="hilite(35124)" onMouseOut="lolite()" onClick="logVariable('nestselect')" href="../../_variables/nestselect.html">$nestselect</a> . <a class="var it35125" onMouseOver="hilite(35125)" onMouseOut="lolite()" onClick="logVariable('nestwhere')" href="../../_variables/nestwhere.html">$nestwhere</a> . <a class="var it35123" onMouseOver="hilite(35123)" onMouseOut="lolite()" onClick="logVariable('nestsearch')" href="../../_variables/nestsearch.html">$nestsearch</a>-&gt;<a onClick="logVariable('sql')" class="var it41944" onMouseOver="hilite(41944)" onMouseOut="lolite()" href="../../_variables/sql.html">sql</a>;
<a name="l3600"><span class="linenum">3600</span></a>      } else {
<a name="l3601"><span class="linenum">3601</span></a>          <a class="var it13226" onMouseOver="hilite(13226)" onMouseOut="lolite()" onClick="logVariable('thing')" href="../../_variables/thing.html">$thing</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_like')" href="../../_functions/sql_like.html" onMouseOver="funcPopup(event,'sql_like')">sql_like</a>(<a class="var it35123" onMouseOver="hilite(35123)" onMouseOut="lolite()" onClick="logVariable('nestsearch')" href="../../_variables/nestsearch.html">$nestsearch</a>-&gt;<a onClick="logVariable('field')" class="var it41944" onMouseOver="hilite(41944)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>, ':search1', false);
<a name="l3602"><span class="linenum">3602</span></a>          <a class="var it35126" onMouseOver="hilite(35126)" onMouseOut="lolite()" onClick="logVariable('nestsql')" href="../../_variables/nestsql.html">$nestsql</a> = <a class="var it35124" onMouseOver="hilite(35124)" onMouseOut="lolite()" onClick="logVariable('nestselect')" href="../../_variables/nestselect.html">$nestselect</a> . <a class="var it35125" onMouseOver="hilite(35125)" onMouseOut="lolite()" onClick="logVariable('nestwhere')" href="../../_variables/nestwhere.html">$nestwhere</a> . <a class="var it13226" onMouseOver="hilite(13226)" onMouseOut="lolite()" onClick="logVariable('thing')" href="../../_variables/thing.html">$thing</a> . ' GROUP BY c' . <a class="var it9120" onMouseOver="hilite(9120)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a> . '.recordid';
<a name="l3603"><span class="linenum">3603</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['search1'] = &quot;%<a class="var it35123" onMouseOver="hilite(35123)" onMouseOut="lolite()" onClick="logVariable('nestsearch')" href="../../_variables/nestsearch.html">$nestsearch</a>-&gt;<a onClick="logVariable('data')" class="var it41944" onMouseOver="hilite(41944)" onMouseOut="lolite()" href="../../_variables/data.html">data</a>%&quot;;
<a name="l3604"><span class="linenum">3604</span></a>      }
<a name="l3605"><span class="linenum">3605</span></a>      <a class="var it35127" onMouseOver="hilite(35127)" onMouseOut="lolite()" onClick="logVariable('nestrecords')" href="../../_variables/nestrecords.html">$nestrecords</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it35126" onMouseOver="hilite(35126)" onMouseOut="lolite()" onClick="logVariable('nestsql')" href="../../_variables/nestsql.html">$nestsql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l3606"><span class="linenum">3606</span></a>      <a class="var it35128" onMouseOver="hilite(35128)" onMouseOut="lolite()" onClick="logVariable('nestarray')" href="../../_variables/nestarray.html">$nestarray</a> = array();
<a name="l3607"><span class="linenum">3607</span></a>      foreach (<a class="var it35127" onMouseOver="hilite(35127)" onMouseOut="lolite()" onClick="logVariable('nestrecords')" href="../../_variables/nestrecords.html">$nestrecords</a> as <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l3608"><span class="linenum">3608</span></a>          <a class="var it35128" onMouseOver="hilite(35128)" onMouseOut="lolite()" onClick="logVariable('nestarray')" href="../../_variables/nestarray.html">$nestarray</a>[] = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('recordid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/recordid.html">recordid</a>;
<a name="l3609"><span class="linenum">3609</span></a>      }
<a name="l3610"><span class="linenum">3610</span></a>  <span class="comment">    // Close the record set and free up resources.</span>
<a name="l3611"><span class="linenum">3611</span></a>      <a class="var it35127" onMouseOver="hilite(35127)" onMouseOut="lolite()" onClick="logVariable('nestrecords')" href="../../_variables/nestrecords.html">$nestrecords</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l3612"><span class="linenum">3612</span></a>      return <a class="var it35128" onMouseOver="hilite(35128)" onMouseOut="lolite()" onClick="logVariable('nestarray')" href="../../_variables/nestarray.html">$nestarray</a>;
<a name="l3613"><span class="linenum">3613</span></a>  }
<a name="l3614"><span class="linenum">3614</span></a>  
<a name="l3615"><span class="linenum">3615</span></a>  <span class="comment">/**</span>
<a name="l3616"><span class="linenum">3616</span></a>  <span class="comment"> * Returns an array with an sql string for advanced searches and the parameters that go with them.</span>
<a name="l3617"><span class="linenum">3617</span></a>  <span class="comment"> *</span>
<a name="l3618"><span class="linenum">3618</span></a>  <span class="comment"> * @param int $sort            DATA_*</span>
<a name="l3619"><span class="linenum">3619</span></a>  <span class="comment"> * @param stdClass $data       Data module object</span>
<a name="l3620"><span class="linenum">3620</span></a>  <span class="comment"> * @param array $recordids     An array of record IDs.</span>
<a name="l3621"><span class="linenum">3621</span></a>  <span class="comment"> * @param string $selectdata   Information for the where and select part of the sql statement.</span>
<a name="l3622"><span class="linenum">3622</span></a>  <span class="comment"> * @param string $sortorder    Additional sort parameters</span>
<a name="l3623"><span class="linenum">3623</span></a>  <span class="comment"> * @return array sqlselect     sqlselect['sql'] has the sql string, sqlselect['params'] contains an array of parameters.</span>
<a name="l3624"><span class="linenum">3624</span></a>  <span class="comment"> */</span>
<a name="l3625"><span class="linenum">3625</span></a>  function <a class="function" onClick="logFunction('data_get_advanced_search_sql')" href="../../_functions/data_get_advanced_search_sql.html" onMouseOver="funcPopup(event,'data_get_advanced_search_sql')">data_get_advanced_search_sql</a>(<a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it28693" onMouseOver="hilite(28693)" onMouseOut="lolite()" onClick="logVariable('recordids')" href="../../_variables/recordids.html">$recordids</a>, <a class="var it28722" onMouseOver="hilite(28722)" onMouseOut="lolite()" onClick="logVariable('selectdata')" href="../../_variables/selectdata.html">$selectdata</a>, <a class="var it4036" onMouseOver="hilite(4036)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a>) {
<a name="l3626"><span class="linenum">3626</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3627"><span class="linenum">3627</span></a>  
<a name="l3628"><span class="linenum">3628</span></a>      <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('namefields')" href="../../_variables/namefields.html">$namefields</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>('u');
<a name="l3629"><span class="linenum">3629</span></a>  <span class="comment">    // Remove the id from the string. This already exists in the sql statement.</span>
<a name="l3630"><span class="linenum">3630</span></a>      <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('namefields')" href="../../_variables/namefields.html">$namefields</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('u.id,', '', <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('namefields')" href="../../_variables/namefields.html">$namefields</a>);
<a name="l3631"><span class="linenum">3631</span></a>  
<a name="l3632"><span class="linenum">3632</span></a>      if (<a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> == 0) {
<a name="l3633"><span class="linenum">3633</span></a>          <a class="var it35129" onMouseOver="hilite(35129)" onMouseOut="lolite()" onClick="logVariable('nestselectsql')" href="../../_variables/nestselectsql.html">$nestselectsql</a> = 'SELECT r.id, r.approved, r.timecreated, r.timemodified, r.userid, ' . <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('namefields')" href="../../_variables/namefields.html">$namefields</a> . '
<a name="l3634"><span class="linenum">3634</span></a>                          FROM {data_content} c,
<a name="l3635"><span class="linenum">3635</span></a>                               {data_records} r,
<a name="l3636"><span class="linenum">3636</span></a>                               {user} u ';
<a name="l3637"><span class="linenum">3637</span></a>          <a class="var it10002" onMouseOver="hilite(10002)" onMouseOut="lolite()" onClick="logVariable('groupsql')" href="../../_variables/groupsql.html">$groupsql</a> = ' GROUP BY r.id, r.approved, r.timecreated, r.timemodified, r.userid, u.firstname, u.lastname, ' . <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('namefields')" href="../../_variables/namefields.html">$namefields</a>;
<a name="l3638"><span class="linenum">3638</span></a>      } else {
<a name="l3639"><span class="linenum">3639</span></a>  <span class="comment">        // Sorting through 'Other' criteria</span>
<a name="l3640"><span class="linenum">3640</span></a>          if (<a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> &lt;= 0) {
<a name="l3641"><span class="linenum">3641</span></a>              switch (<a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>) {
<a name="l3642"><span class="linenum">3642</span></a>                  case <a class="constant" onClick="logConstant('DATA_LASTNAME')" href="../../_constants/DATA_LASTNAME.html" onMouseOver="constPopup(event,'DATA_LASTNAME')">DATA_LASTNAME</a>:
<a name="l3643"><span class="linenum">3643</span></a>                      <a class="var it28719" onMouseOver="hilite(28719)" onMouseOut="lolite()" onClick="logVariable('sortcontentfull')" href="../../_variables/sortcontentfull.html">$sortcontentfull</a> = &quot;u.lastname&quot;;
<a name="l3644"><span class="linenum">3644</span></a>                      break;
<a name="l3645"><span class="linenum">3645</span></a>                  case <a class="constant" onClick="logConstant('DATA_FIRSTNAME')" href="../../_constants/DATA_FIRSTNAME.html" onMouseOver="constPopup(event,'DATA_FIRSTNAME')">DATA_FIRSTNAME</a>:
<a name="l3646"><span class="linenum">3646</span></a>                      <a class="var it28719" onMouseOver="hilite(28719)" onMouseOut="lolite()" onClick="logVariable('sortcontentfull')" href="../../_variables/sortcontentfull.html">$sortcontentfull</a> = &quot;u.firstname&quot;;
<a name="l3647"><span class="linenum">3647</span></a>                      break;
<a name="l3648"><span class="linenum">3648</span></a>                  case <a class="constant" onClick="logConstant('DATA_APPROVED')" href="../../_constants/DATA_APPROVED.html" onMouseOver="constPopup(event,'DATA_APPROVED')">DATA_APPROVED</a>:
<a name="l3649"><span class="linenum">3649</span></a>                      <a class="var it28719" onMouseOver="hilite(28719)" onMouseOut="lolite()" onClick="logVariable('sortcontentfull')" href="../../_variables/sortcontentfull.html">$sortcontentfull</a> = &quot;r.approved&quot;;
<a name="l3650"><span class="linenum">3650</span></a>                      break;
<a name="l3651"><span class="linenum">3651</span></a>                  case <a class="constant" onClick="logConstant('DATA_TIMEMODIFIED')" href="../../_constants/DATA_TIMEMODIFIED.html" onMouseOver="constPopup(event,'DATA_TIMEMODIFIED')">DATA_TIMEMODIFIED</a>:
<a name="l3652"><span class="linenum">3652</span></a>                      <a class="var it28719" onMouseOver="hilite(28719)" onMouseOut="lolite()" onClick="logVariable('sortcontentfull')" href="../../_variables/sortcontentfull.html">$sortcontentfull</a> = &quot;r.timemodified&quot;;
<a name="l3653"><span class="linenum">3653</span></a>                      break;
<a name="l3654"><span class="linenum">3654</span></a>                  case <a class="constant" onClick="logConstant('DATA_TIMEADDED')" href="../../_constants/DATA_TIMEADDED.html" onMouseOver="constPopup(event,'DATA_TIMEADDED')">DATA_TIMEADDED</a>:
<a name="l3655"><span class="linenum">3655</span></a>                  default:
<a name="l3656"><span class="linenum">3656</span></a>                      <a class="var it28719" onMouseOver="hilite(28719)" onMouseOut="lolite()" onClick="logVariable('sortcontentfull')" href="../../_variables/sortcontentfull.html">$sortcontentfull</a> = &quot;r.timecreated&quot;;
<a name="l3657"><span class="linenum">3657</span></a>              }
<a name="l3658"><span class="linenum">3658</span></a>          } else {
<a name="l3659"><span class="linenum">3659</span></a>              <a class="var it28715" onMouseOver="hilite(28715)" onMouseOut="lolite()" onClick="logVariable('sortfield')" href="../../_variables/sortfield.html">$sortfield</a> = <a class="function" onClick="logFunction('data_get_field_from_id')" href="../../_functions/data_get_field_from_id.html" onMouseOver="funcPopup(event,'data_get_field_from_id')">data_get_field_from_id</a>(<a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l3660"><span class="linenum">3660</span></a>              <a class="var it28718" onMouseOver="hilite(28718)" onMouseOut="lolite()" onClick="logVariable('sortcontent')" href="../../_variables/sortcontent.html">$sortcontent</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_compare_text')" href="../../_functions/sql_compare_text.html" onMouseOver="funcPopup(event,'sql_compare_text')">sql_compare_text</a>('c.' . <a class="var it28715" onMouseOver="hilite(28715)" onMouseOut="lolite()" onClick="logVariable('sortfield')" href="../../_variables/sortfield.html">$sortfield</a>-&gt;<a class="function" onClick="logFunction('get_sort_field')" href="../../_functions/get_sort_field.html" onMouseOver="funcPopup(event,'get_sort_field')">get_sort_field</a>());
<a name="l3661"><span class="linenum">3661</span></a>              <a class="var it28719" onMouseOver="hilite(28719)" onMouseOut="lolite()" onClick="logVariable('sortcontentfull')" href="../../_variables/sortcontentfull.html">$sortcontentfull</a> = <a class="var it28715" onMouseOver="hilite(28715)" onMouseOut="lolite()" onClick="logVariable('sortfield')" href="../../_variables/sortfield.html">$sortfield</a>-&gt;<a class="function" onClick="logFunction('get_sort_sql')" href="../../_functions/get_sort_sql.html" onMouseOver="funcPopup(event,'get_sort_sql')">get_sort_sql</a>(<a class="var it28718" onMouseOver="hilite(28718)" onMouseOut="lolite()" onClick="logVariable('sortcontent')" href="../../_variables/sortcontent.html">$sortcontent</a>);
<a name="l3662"><span class="linenum">3662</span></a>          }
<a name="l3663"><span class="linenum">3663</span></a>  
<a name="l3664"><span class="linenum">3664</span></a>          <a class="var it35129" onMouseOver="hilite(35129)" onMouseOut="lolite()" onClick="logVariable('nestselectsql')" href="../../_variables/nestselectsql.html">$nestselectsql</a> = 'SELECT r.id, r.approved, r.timecreated, r.timemodified, r.userid, ' . <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('namefields')" href="../../_variables/namefields.html">$namefields</a> . ',
<a name="l3665"><span class="linenum">3665</span></a>                                   ' . <a class="var it28719" onMouseOver="hilite(28719)" onMouseOut="lolite()" onClick="logVariable('sortcontentfull')" href="../../_variables/sortcontentfull.html">$sortcontentfull</a> . '
<a name="l3666"><span class="linenum">3666</span></a>                                AS sortorder
<a name="l3667"><span class="linenum">3667</span></a>                              FROM {data_content} c,
<a name="l3668"><span class="linenum">3668</span></a>                                   {data_records} r,
<a name="l3669"><span class="linenum">3669</span></a>                                   {user} u ';
<a name="l3670"><span class="linenum">3670</span></a>          <a class="var it10002" onMouseOver="hilite(10002)" onMouseOut="lolite()" onClick="logVariable('groupsql')" href="../../_variables/groupsql.html">$groupsql</a> = ' GROUP BY r.id, r.approved, r.timecreated, r.timemodified, r.userid, ' . <a class="var it7062" onMouseOver="hilite(7062)" onMouseOut="lolite()" onClick="logVariable('namefields')" href="../../_variables/namefields.html">$namefields</a> . ', ' .<a class="var it28719" onMouseOver="hilite(28719)" onMouseOut="lolite()" onClick="logVariable('sortcontentfull')" href="../../_variables/sortcontentfull.html">$sortcontentfull</a>;
<a name="l3671"><span class="linenum">3671</span></a>      }
<a name="l3672"><span class="linenum">3672</span></a>  
<a name="l3673"><span class="linenum">3673</span></a>  <span class="comment">    // Default to a standard Where statement if $selectdata is empty.</span>
<a name="l3674"><span class="linenum">3674</span></a>      if (<a class="var it28722" onMouseOver="hilite(28722)" onMouseOut="lolite()" onClick="logVariable('selectdata')" href="../../_variables/selectdata.html">$selectdata</a> == '') {
<a name="l3675"><span class="linenum">3675</span></a>          <a class="var it28722" onMouseOver="hilite(28722)" onMouseOut="lolite()" onClick="logVariable('selectdata')" href="../../_variables/selectdata.html">$selectdata</a> = 'WHERE c.recordid = r.id
<a name="l3676"><span class="linenum">3676</span></a>                           AND r.dataid = :dataid
<a name="l3677"><span class="linenum">3677</span></a>                           AND r.userid = u.id ';
<a name="l3678"><span class="linenum">3678</span></a>      }
<a name="l3679"><span class="linenum">3679</span></a>  
<a name="l3680"><span class="linenum">3680</span></a>  <span class="comment">    // Find the field we are sorting on</span>
<a name="l3681"><span class="linenum">3681</span></a>      if (<a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> &gt; 0 or <a class="function" onClick="logFunction('data_get_field_from_id')" href="../../_functions/data_get_field_from_id.html" onMouseOver="funcPopup(event,'data_get_field_from_id')">data_get_field_from_id</a>(<a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l3682"><span class="linenum">3682</span></a>          <a class="var it28722" onMouseOver="hilite(28722)" onMouseOut="lolite()" onClick="logVariable('selectdata')" href="../../_variables/selectdata.html">$selectdata</a> .= ' AND c.fieldid = :sort';
<a name="l3683"><span class="linenum">3683</span></a>      }
<a name="l3684"><span class="linenum">3684</span></a>  
<a name="l3685"><span class="linenum">3685</span></a>  <span class="comment">    // If there are no record IDs then return an sql statment that will return no rows.</span>
<a name="l3686"><span class="linenum">3686</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it28693" onMouseOver="hilite(28693)" onMouseOut="lolite()" onClick="logVariable('recordids')" href="../../_variables/recordids.html">$recordids</a>) != 0) {
<a name="l3687"><span class="linenum">3687</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it10795" onMouseOver="hilite(10795)" onMouseOut="lolite()" onClick="logVariable('insql')" href="../../_variables/insql.html">$insql</a>, <a class="var it35130" onMouseOver="hilite(35130)" onMouseOut="lolite()" onClick="logVariable('inparam')" href="../../_variables/inparam.html">$inparam</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it28693" onMouseOver="hilite(28693)" onMouseOut="lolite()" onClick="logVariable('recordids')" href="../../_variables/recordids.html">$recordids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l3688"><span class="linenum">3688</span></a>      } else {
<a name="l3689"><span class="linenum">3689</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it10795" onMouseOver="hilite(10795)" onMouseOut="lolite()" onClick="logVariable('insql')" href="../../_variables/insql.html">$insql</a>, <a class="var it35130" onMouseOver="hilite(35130)" onMouseOut="lolite()" onClick="logVariable('inparam')" href="../../_variables/inparam.html">$inparam</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(array('-1'), <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l3690"><span class="linenum">3690</span></a>      }
<a name="l3691"><span class="linenum">3691</span></a>      <a class="var it35131" onMouseOver="hilite(35131)" onMouseOut="lolite()" onClick="logVariable('nestfromsql')" href="../../_variables/nestfromsql.html">$nestfromsql</a> = <a class="var it28722" onMouseOver="hilite(28722)" onMouseOut="lolite()" onClick="logVariable('selectdata')" href="../../_variables/selectdata.html">$selectdata</a> . ' AND c.recordid ' . <a class="var it10795" onMouseOver="hilite(10795)" onMouseOut="lolite()" onClick="logVariable('insql')" href="../../_variables/insql.html">$insql</a> . <a class="var it10002" onMouseOver="hilite(10002)" onMouseOut="lolite()" onClick="logVariable('groupsql')" href="../../_variables/groupsql.html">$groupsql</a>;
<a name="l3692"><span class="linenum">3692</span></a>      <a class="var it6369" onMouseOver="hilite(6369)" onMouseOut="lolite()" onClick="logVariable('sqlselect')" href="../../_variables/sqlselect.html">$sqlselect</a>['sql'] = &quot;<a class="var it35129" onMouseOver="hilite(35129)" onMouseOut="lolite()" onClick="logVariable('nestselectsql')" href="../../_variables/nestselectsql.html">$nestselectsql</a> <a class="var it35131" onMouseOver="hilite(35131)" onMouseOut="lolite()" onClick="logVariable('nestfromsql')" href="../../_variables/nestfromsql.html">$nestfromsql</a> <a class="var it4036" onMouseOver="hilite(4036)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a>&quot;;
<a name="l3693"><span class="linenum">3693</span></a>      <a class="var it6369" onMouseOver="hilite(6369)" onMouseOut="lolite()" onClick="logVariable('sqlselect')" href="../../_variables/sqlselect.html">$sqlselect</a>['params'] = <a class="var it35130" onMouseOver="hilite(35130)" onMouseOut="lolite()" onClick="logVariable('inparam')" href="../../_variables/inparam.html">$inparam</a>;
<a name="l3694"><span class="linenum">3694</span></a>      return <a class="var it6369" onMouseOver="hilite(6369)" onMouseOut="lolite()" onClick="logVariable('sqlselect')" href="../../_variables/sqlselect.html">$sqlselect</a>;
<a name="l3695"><span class="linenum">3695</span></a>  }
<a name="l3696"><span class="linenum">3696</span></a>  
<a name="l3697"><span class="linenum">3697</span></a>  <span class="comment">/**</span>
<a name="l3698"><span class="linenum">3698</span></a>  <span class="comment"> * Checks to see if the user has permission to delete the preset.</span>
<a name="l3699"><span class="linenum">3699</span></a>  <span class="comment"> * @param stdClass $context  Context object.</span>
<a name="l3700"><span class="linenum">3700</span></a>  <span class="comment"> * @param stdClass $preset  The preset object that we are checking for deletion.</span>
<a name="l3701"><span class="linenum">3701</span></a>  <span class="comment"> * @return bool  Returns true if the user can delete, otherwise false.</span>
<a name="l3702"><span class="linenum">3702</span></a>  <span class="comment"> */</span>
<a name="l3703"><span class="linenum">3703</span></a>  function <a class="function" onClick="logFunction('data_user_can_delete_preset')" href="../../_functions/data_user_can_delete_preset.html" onMouseOver="funcPopup(event,'data_user_can_delete_preset')">data_user_can_delete_preset</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>) {
<a name="l3704"><span class="linenum">3704</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l3705"><span class="linenum">3705</span></a>  
<a name="l3706"><span class="linenum">3706</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/data:manageuserpresets', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3707"><span class="linenum">3707</span></a>          return true;
<a name="l3708"><span class="linenum">3708</span></a>      } else {
<a name="l3709"><span class="linenum">3709</span></a>          <a class="var it8785" onMouseOver="hilite(8785)" onMouseOut="lolite()" onClick="logVariable('candelete')" href="../../_variables/candelete.html">$candelete</a> = false;
<a name="l3710"><span class="linenum">3710</span></a>          if (<a class="var it24611" onMouseOver="hilite(24611)" onMouseOut="lolite()" onClick="logVariable('preset')" href="../../_variables/preset.html">$preset</a>-&gt;<a onClick="logVariable('userid')" class="var it41939" onMouseOver="hilite(41939)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l3711"><span class="linenum">3711</span></a>              <a class="var it8785" onMouseOver="hilite(8785)" onMouseOut="lolite()" onClick="logVariable('candelete')" href="../../_variables/candelete.html">$candelete</a> = true;
<a name="l3712"><span class="linenum">3712</span></a>          }
<a name="l3713"><span class="linenum">3713</span></a>          return <a class="var it8785" onMouseOver="hilite(8785)" onMouseOut="lolite()" onClick="logVariable('candelete')" href="../../_variables/candelete.html">$candelete</a>;
<a name="l3714"><span class="linenum">3714</span></a>      }
<a name="l3715"><span class="linenum">3715</span></a>  }
<a name="l3716"><span class="linenum">3716</span></a>  
<a name="l3717"><span class="linenum">3717</span></a>  <span class="comment">/**</span>
<a name="l3718"><span class="linenum">3718</span></a>  <span class="comment"> * Delete a record entry.</span>
<a name="l3719"><span class="linenum">3719</span></a>  <span class="comment"> *</span>
<a name="l3720"><span class="linenum">3720</span></a>  <span class="comment"> * @param int $recordid The ID for the record to be deleted.</span>
<a name="l3721"><span class="linenum">3721</span></a>  <span class="comment"> * @param object $data The data object for this activity.</span>
<a name="l3722"><span class="linenum">3722</span></a>  <span class="comment"> * @param int $courseid ID for the current course (for logging).</span>
<a name="l3723"><span class="linenum">3723</span></a>  <span class="comment"> * @param int $cmid The course module ID.</span>
<a name="l3724"><span class="linenum">3724</span></a>  <span class="comment"> * @return bool True if the record deleted, false if not.</span>
<a name="l3725"><span class="linenum">3725</span></a>  <span class="comment"> */</span>
<a name="l3726"><span class="linenum">3726</span></a>  function <a class="function" onClick="logFunction('data_delete_record')" href="../../_functions/data_delete_record.html" onMouseOver="funcPopup(event,'data_delete_record')">data_delete_record</a>(<a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>) {
<a name="l3727"><span class="linenum">3727</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l3728"><span class="linenum">3728</span></a>  
<a name="l3729"><span class="linenum">3729</span></a>      if (<a class="var it25266" onMouseOver="hilite(25266)" onMouseOut="lolite()" onClick="logVariable('deleterecord')" href="../../_variables/deleterecord.html">$deleterecord</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('data_records', array('id' =&gt; <a class="var it10209" onMouseOver="hilite(10209)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../_variables/recordid.html">$recordid</a>))) {
<a name="l3730"><span class="linenum">3730</span></a>          if (<a class="var it25266" onMouseOver="hilite(25266)" onMouseOut="lolite()" onClick="logVariable('deleterecord')" href="../../_variables/deleterecord.html">$deleterecord</a>-&gt;<a onClick="logVariable('dataid')" class="var it41945" onMouseOver="hilite(41945)" onMouseOut="lolite()" href="../../_variables/dataid.html">dataid</a> == <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l3731"><span class="linenum">3731</span></a>              if (<a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('data_content', array('recordid' =&gt; <a class="var it25266" onMouseOver="hilite(25266)" onMouseOut="lolite()" onClick="logVariable('deleterecord')" href="../../_variables/deleterecord.html">$deleterecord</a>-&gt;<a onClick="logVariable('id')" class="var it41945" onMouseOver="hilite(41945)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l3732"><span class="linenum">3732</span></a>                  foreach (<a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a> as <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>) {
<a name="l3733"><span class="linenum">3733</span></a>                      if (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> = <a class="function" onClick="logFunction('data_get_field_from_id')" href="../../_functions/data_get_field_from_id.html" onMouseOver="funcPopup(event,'data_get_field_from_id')">data_get_field_from_id</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('fieldid')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/fieldid.html">fieldid</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l3734"><span class="linenum">3734</span></a>                          <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a class="function" onClick="logFunction('delete_content')" href="../../_functions/delete_content.html" onMouseOver="funcPopup(event,'delete_content')">delete_content</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('recordid')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../../_variables/recordid.html">recordid</a>);
<a name="l3735"><span class="linenum">3735</span></a>                      }
<a name="l3736"><span class="linenum">3736</span></a>                  }
<a name="l3737"><span class="linenum">3737</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('data_content', array('recordid'=&gt;<a class="var it25266" onMouseOver="hilite(25266)" onMouseOut="lolite()" onClick="logVariable('deleterecord')" href="../../_variables/deleterecord.html">$deleterecord</a>-&gt;<a onClick="logVariable('id')" class="var it41945" onMouseOver="hilite(41945)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3738"><span class="linenum">3738</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('data_records', array('id'=&gt;<a class="var it25266" onMouseOver="hilite(25266)" onMouseOut="lolite()" onClick="logVariable('deleterecord')" href="../../_variables/deleterecord.html">$deleterecord</a>-&gt;<a onClick="logVariable('id')" class="var it41945" onMouseOver="hilite(41945)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3739"><span class="linenum">3739</span></a>  
<a name="l3740"><span class="linenum">3740</span></a>  <span class="comment">                // Delete cached RSS feeds.</span>
<a name="l3741"><span class="linenum">3741</span></a>                  if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablerssfeeds')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/enablerssfeeds.html">enablerssfeeds</a>)) {
<a name="l3742"><span class="linenum">3742</span></a>                      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../mod/data/rsslib.php.html">/mod/data/rsslib.php</a>');
<a name="l3743"><span class="linenum">3743</span></a>                      <a class="function" onClick="logFunction('data_rss_delete_file')" href="../../_functions/data_rss_delete_file.html" onMouseOver="funcPopup(event,'data_rss_delete_file')">data_rss_delete_file</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l3744"><span class="linenum">3744</span></a>                  }
<a name="l3745"><span class="linenum">3745</span></a>  
<a name="l3746"><span class="linenum">3746</span></a>  <span class="comment">                // Trigger an event for deleting this record.</span>
<a name="l3747"><span class="linenum">3747</span></a>                  <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_data\event\<a class="class" onClick="logClass('record_deleted')" href="../../_classes/record_deleted.html" onMouseOver="classPopup(event,'record_deleted')">record_deleted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l3748"><span class="linenum">3748</span></a>                      'objectid' =&gt; <a class="var it25266" onMouseOver="hilite(25266)" onMouseOut="lolite()" onClick="logVariable('deleterecord')" href="../../_variables/deleterecord.html">$deleterecord</a>-&gt;<a onClick="logVariable('id')" class="var it41945" onMouseOver="hilite(41945)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l3749"><span class="linenum">3749</span></a>                      'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>),
<a name="l3750"><span class="linenum">3750</span></a>                      'courseid' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>,
<a name="l3751"><span class="linenum">3751</span></a>                      'other' =&gt; array(
<a name="l3752"><span class="linenum">3752</span></a>                          'dataid' =&gt; <a class="var it25266" onMouseOver="hilite(25266)" onMouseOut="lolite()" onClick="logVariable('deleterecord')" href="../../_variables/deleterecord.html">$deleterecord</a>-&gt;dataid
<a name="l3753"><span class="linenum">3753</span></a>                      )
<a name="l3754"><span class="linenum">3754</span></a>                  ));
<a name="l3755"><span class="linenum">3755</span></a>                  <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('data_records', <a class="var it25266" onMouseOver="hilite(25266)" onMouseOut="lolite()" onClick="logVariable('deleterecord')" href="../../_variables/deleterecord.html">$deleterecord</a>);
<a name="l3756"><span class="linenum">3756</span></a>                  <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l3757"><span class="linenum">3757</span></a>  
<a name="l3758"><span class="linenum">3758</span></a>                  return true;
<a name="l3759"><span class="linenum">3759</span></a>              }
<a name="l3760"><span class="linenum">3760</span></a>          }
<a name="l3761"><span class="linenum">3761</span></a>      }
<a name="l3762"><span class="linenum">3762</span></a>      return false;
<a name="l3763"><span class="linenum">3763</span></a>  }
<a name="l3764"><span class="linenum">3764</span></a>  
<a name="l3765"><span class="linenum">3765</span></a>  <span class="comment">/**</span>
<a name="l3766"><span class="linenum">3766</span></a>  <span class="comment"> * Check for required fields, and build a list of fields to be updated in a</span>
<a name="l3767"><span class="linenum">3767</span></a>  <span class="comment"> * submission.</span>
<a name="l3768"><span class="linenum">3768</span></a>  <span class="comment"> *</span>
<a name="l3769"><span class="linenum">3769</span></a>  <span class="comment"> * @param $mod stdClass The current recordid - provided as an optimisation.</span>
<a name="l3770"><span class="linenum">3770</span></a>  <span class="comment"> * @param $fields array The field data</span>
<a name="l3771"><span class="linenum">3771</span></a>  <span class="comment"> * @param $datarecord stdClass The submitted data.</span>
<a name="l3772"><span class="linenum">3772</span></a>  <span class="comment"> * @return stdClass containing:</span>
<a name="l3773"><span class="linenum">3773</span></a>  <span class="comment"> * * string[] generalnotifications Notifications for the form as a whole.</span>
<a name="l3774"><span class="linenum">3774</span></a>  <span class="comment"> * * string[] fieldnotifications Notifications for a specific field.</span>
<a name="l3775"><span class="linenum">3775</span></a>  <span class="comment"> * * bool validated Whether the field was validated successfully.</span>
<a name="l3776"><span class="linenum">3776</span></a>  <span class="comment"> * * data_field_base[] fields The field objects to be update.</span>
<a name="l3777"><span class="linenum">3777</span></a>  <span class="comment"> */</span>
<a name="l3778"><span class="linenum">3778</span></a>  function <a class="function" onClick="logFunction('data_process_submission')" href="../../_functions/data_process_submission.html" onMouseOver="funcPopup(event,'data_process_submission')">data_process_submission</a>(stdClass <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>, stdClass <a class="var it15937" onMouseOver="hilite(15937)" onMouseOut="lolite()" onClick="logVariable('datarecord')" href="../../_variables/datarecord.html">$datarecord</a>) {
<a name="l3779"><span class="linenum">3779</span></a>      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = new stdClass();
<a name="l3780"><span class="linenum">3780</span></a>  
<a name="l3781"><span class="linenum">3781</span></a>  <span class="comment">    // Empty form checking - you can't submit an empty form.</span>
<a name="l3782"><span class="linenum">3782</span></a>      <a class="var it35132" onMouseOver="hilite(35132)" onMouseOut="lolite()" onClick="logVariable('emptyform')" href="../../_variables/emptyform.html">$emptyform</a> = true;
<a name="l3783"><span class="linenum">3783</span></a>      <a class="var it35133" onMouseOver="hilite(35133)" onMouseOut="lolite()" onClick="logVariable('requiredfieldsfilled')" href="../../_variables/requiredfieldsfilled.html">$requiredfieldsfilled</a> = true;
<a name="l3784"><span class="linenum">3784</span></a>  
<a name="l3785"><span class="linenum">3785</span></a>  <span class="comment">    // Store the notifications.</span>
<a name="l3786"><span class="linenum">3786</span></a>      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('generalnotifications')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/generalnotifications.html">generalnotifications</a> = array();
<a name="l3787"><span class="linenum">3787</span></a>      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('fieldnotifications')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/fieldnotifications.html">fieldnotifications</a> = array();
<a name="l3788"><span class="linenum">3788</span></a>  
<a name="l3789"><span class="linenum">3789</span></a>  <span class="comment">    // Store the instantiated classes as an optimisation when processing the result.</span>
<a name="l3790"><span class="linenum">3790</span></a>  <span class="comment">    // This prevents the fields being re-initialised when updating.</span>
<a name="l3791"><span class="linenum">3791</span></a>      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('fields')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/fields.html">fields</a> = array();
<a name="l3792"><span class="linenum">3792</span></a>  
<a name="l3793"><span class="linenum">3793</span></a>      <a class="var it11126" onMouseOver="hilite(11126)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a> = array();
<a name="l3794"><span class="linenum">3794</span></a>      foreach (<a class="var it15937" onMouseOver="hilite(15937)" onMouseOut="lolite()" onClick="logVariable('datarecord')" href="../../_variables/datarecord.html">$datarecord</a> as <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> =&gt; <a class="var it9626" onMouseOver="hilite(9626)" onMouseOut="lolite()" onClick="logVariable('fieldvalue')" href="../../_variables/fieldvalue.html">$fieldvalue</a>) {
<a name="l3795"><span class="linenum">3795</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>, '_')) {
<a name="l3796"><span class="linenum">3796</span></a>              <a class="var it35134" onMouseOver="hilite(35134)" onMouseOut="lolite()" onClick="logVariable('namearray')" href="../../_variables/namearray.html">$namearray</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('_', <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>, 3);
<a name="l3797"><span class="linenum">3797</span></a>              <a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a> = <a class="var it35134" onMouseOver="hilite(35134)" onMouseOut="lolite()" onClick="logVariable('namearray')" href="../../_variables/namearray.html">$namearray</a>[1];
<a name="l3798"><span class="linenum">3798</span></a>              if (!isset(<a class="var it11126" onMouseOver="hilite(11126)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a>[<a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a>])) {
<a name="l3799"><span class="linenum">3799</span></a>                  <a class="var it11126" onMouseOver="hilite(11126)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a>[<a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a>] = array();
<a name="l3800"><span class="linenum">3800</span></a>              }
<a name="l3801"><span class="linenum">3801</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it35134" onMouseOver="hilite(35134)" onMouseOut="lolite()" onClick="logVariable('namearray')" href="../../_variables/namearray.html">$namearray</a>) === 2) {
<a name="l3802"><span class="linenum">3802</span></a>                  <a class="var it35135" onMouseOver="hilite(35135)" onMouseOut="lolite()" onClick="logVariable('subfieldid')" href="../../_variables/subfieldid.html">$subfieldid</a> = 0;
<a name="l3803"><span class="linenum">3803</span></a>              } else {
<a name="l3804"><span class="linenum">3804</span></a>                  <a class="var it35135" onMouseOver="hilite(35135)" onMouseOut="lolite()" onClick="logVariable('subfieldid')" href="../../_variables/subfieldid.html">$subfieldid</a> = <a class="var it35134" onMouseOver="hilite(35134)" onMouseOut="lolite()" onClick="logVariable('namearray')" href="../../_variables/namearray.html">$namearray</a>[2];
<a name="l3805"><span class="linenum">3805</span></a>              }
<a name="l3806"><span class="linenum">3806</span></a>  
<a name="l3807"><span class="linenum">3807</span></a>              <a class="var it20993" onMouseOver="hilite(20993)" onMouseOut="lolite()" onClick="logVariable('fielddata')" href="../../_variables/fielddata.html">$fielddata</a> = new stdClass();
<a name="l3808"><span class="linenum">3808</span></a>              <a class="var it20993" onMouseOver="hilite(20993)" onMouseOut="lolite()" onClick="logVariable('fielddata')" href="../../_variables/fielddata.html">$fielddata</a>-&gt;<a onClick="logVariable('fieldname')" class="var it40760" onMouseOver="hilite(40760)" onMouseOut="lolite()" href="../../_variables/fieldname.html">fieldname</a> = <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>;
<a name="l3809"><span class="linenum">3809</span></a>              <a class="var it20993" onMouseOver="hilite(20993)" onMouseOut="lolite()" onClick="logVariable('fielddata')" href="../../_variables/fielddata.html">$fielddata</a>-&gt;<a onClick="logVariable('value')" class="var it40760" onMouseOver="hilite(40760)" onMouseOut="lolite()" href="../../_variables/value.html">value</a> = <a class="var it9626" onMouseOver="hilite(9626)" onMouseOut="lolite()" onClick="logVariable('fieldvalue')" href="../../_variables/fieldvalue.html">$fieldvalue</a>;
<a name="l3810"><span class="linenum">3810</span></a>              <a class="var it11126" onMouseOver="hilite(11126)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a>[<a class="var it10217" onMouseOver="hilite(10217)" onMouseOut="lolite()" onClick="logVariable('fieldid')" href="../../_variables/fieldid.html">$fieldid</a>][<a class="var it35135" onMouseOver="hilite(35135)" onMouseOut="lolite()" onClick="logVariable('subfieldid')" href="../../_variables/subfieldid.html">$subfieldid</a>] = <a class="var it20993" onMouseOver="hilite(20993)" onMouseOut="lolite()" onClick="logVariable('fielddata')" href="../../_variables/fielddata.html">$fielddata</a>;
<a name="l3811"><span class="linenum">3811</span></a>          }
<a name="l3812"><span class="linenum">3812</span></a>      }
<a name="l3813"><span class="linenum">3813</span></a>  
<a name="l3814"><span class="linenum">3814</span></a>  <span class="comment">    // Check all form fields which have the required are filled.</span>
<a name="l3815"><span class="linenum">3815</span></a>      foreach (<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> as <a class="var it28106" onMouseOver="hilite(28106)" onMouseOut="lolite()" onClick="logVariable('fieldrecord')" href="../../_variables/fieldrecord.html">$fieldrecord</a>) {
<a name="l3816"><span class="linenum">3816</span></a>  <span class="comment">        // Check whether the field has any data.</span>
<a name="l3817"><span class="linenum">3817</span></a>          <a class="var it35136" onMouseOver="hilite(35136)" onMouseOut="lolite()" onClick="logVariable('fieldhascontent')" href="../../_variables/fieldhascontent.html">$fieldhascontent</a> = false;
<a name="l3818"><span class="linenum">3818</span></a>  
<a name="l3819"><span class="linenum">3819</span></a>          <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> = <a class="function" onClick="logFunction('data_get_field')" href="../../_functions/data_get_field.html" onMouseOver="funcPopup(event,'data_get_field')">data_get_field</a>(<a class="var it28106" onMouseOver="hilite(28106)" onMouseOut="lolite()" onClick="logVariable('fieldrecord')" href="../../_variables/fieldrecord.html">$fieldrecord</a>, <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>);
<a name="l3820"><span class="linenum">3820</span></a>          if (isset(<a class="var it11126" onMouseOver="hilite(11126)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a>[<a class="var it28106" onMouseOver="hilite(28106)" onMouseOut="lolite()" onClick="logVariable('fieldrecord')" href="../../_variables/fieldrecord.html">$fieldrecord</a>-&gt;<a onClick="logVariable('id')" class="var it41946" onMouseOver="hilite(41946)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>])) {
<a name="l3821"><span class="linenum">3821</span></a>              foreach (<a class="var it11126" onMouseOver="hilite(11126)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a>[<a class="var it28106" onMouseOver="hilite(28106)" onMouseOut="lolite()" onClick="logVariable('fieldrecord')" href="../../_variables/fieldrecord.html">$fieldrecord</a>-&gt;<a onClick="logVariable('id')" class="var it41946" onMouseOver="hilite(41946)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] as <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> =&gt; <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l3822"><span class="linenum">3822</span></a>                  if (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a class="function" onClick="logFunction('notemptyfield')" href="../../_functions/notemptyfield.html" onMouseOver="funcPopup(event,'notemptyfield')">notemptyfield</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('value')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/value.html">value</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('fieldname')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/fieldname.html">fieldname</a>)) {
<a name="l3823"><span class="linenum">3823</span></a>  <span class="comment">                    // The field has content and the form is not empty.</span>
<a name="l3824"><span class="linenum">3824</span></a>                      <a class="var it35136" onMouseOver="hilite(35136)" onMouseOut="lolite()" onClick="logVariable('fieldhascontent')" href="../../_variables/fieldhascontent.html">$fieldhascontent</a> = true;
<a name="l3825"><span class="linenum">3825</span></a>                      <a class="var it35132" onMouseOver="hilite(35132)" onMouseOut="lolite()" onClick="logVariable('emptyform')" href="../../_variables/emptyform.html">$emptyform</a> = false;
<a name="l3826"><span class="linenum">3826</span></a>                  }
<a name="l3827"><span class="linenum">3827</span></a>              }
<a name="l3828"><span class="linenum">3828</span></a>          }
<a name="l3829"><span class="linenum">3829</span></a>  
<a name="l3830"><span class="linenum">3830</span></a>  <span class="comment">        // If the field is required, add a notification to that effect.</span>
<a name="l3831"><span class="linenum">3831</span></a>          if (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;required &amp;&amp; !<a class="var it35136" onMouseOver="hilite(35136)" onMouseOut="lolite()" onClick="logVariable('fieldhascontent')" href="../../_variables/fieldhascontent.html">$fieldhascontent</a>) {
<a name="l3832"><span class="linenum">3832</span></a>              if (!isset(<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('fieldnotifications')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/fieldnotifications.html">fieldnotifications</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name])) {
<a name="l3833"><span class="linenum">3833</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('fieldnotifications')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/fieldnotifications.html">fieldnotifications</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name] = array();
<a name="l3834"><span class="linenum">3834</span></a>              }
<a name="l3835"><span class="linenum">3835</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('fieldnotifications')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/fieldnotifications.html">fieldnotifications</a>[<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it39671" onMouseOver="hilite(39671)" onMouseOut="lolite()" href="../../_variables/field.html">field</a>-&gt;name][] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('errormustsupplyvalue', 'data');
<a name="l3836"><span class="linenum">3836</span></a>              <a class="var it35133" onMouseOver="hilite(35133)" onMouseOut="lolite()" onClick="logVariable('requiredfieldsfilled')" href="../../_variables/requiredfieldsfilled.html">$requiredfieldsfilled</a> = false;
<a name="l3837"><span class="linenum">3837</span></a>          }
<a name="l3838"><span class="linenum">3838</span></a>  
<a name="l3839"><span class="linenum">3839</span></a>  <span class="comment">        // Update the field.</span>
<a name="l3840"><span class="linenum">3840</span></a>          if (isset(<a class="var it11126" onMouseOver="hilite(11126)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a>[<a class="var it28106" onMouseOver="hilite(28106)" onMouseOut="lolite()" onClick="logVariable('fieldrecord')" href="../../_variables/fieldrecord.html">$fieldrecord</a>-&gt;<a onClick="logVariable('id')" class="var it41946" onMouseOver="hilite(41946)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>])) {
<a name="l3841"><span class="linenum">3841</span></a>              foreach (<a class="var it11126" onMouseOver="hilite(11126)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a>[<a class="var it28106" onMouseOver="hilite(28106)" onMouseOut="lolite()" onClick="logVariable('fieldrecord')" href="../../_variables/fieldrecord.html">$fieldrecord</a>-&gt;<a onClick="logVariable('id')" class="var it41946" onMouseOver="hilite(41946)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] as <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l3842"><span class="linenum">3842</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('fields')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/fields.html">fields</a>[<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('fieldname')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/fieldname.html">fieldname</a>] = <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>;
<a name="l3843"><span class="linenum">3843</span></a>              }
<a name="l3844"><span class="linenum">3844</span></a>          }
<a name="l3845"><span class="linenum">3845</span></a>      }
<a name="l3846"><span class="linenum">3846</span></a>  
<a name="l3847"><span class="linenum">3847</span></a>      if (<a class="var it35132" onMouseOver="hilite(35132)" onMouseOut="lolite()" onClick="logVariable('emptyform')" href="../../_variables/emptyform.html">$emptyform</a>) {
<a name="l3848"><span class="linenum">3848</span></a>  <span class="comment">        // The form is empty.</span>
<a name="l3849"><span class="linenum">3849</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('generalnotifications')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/generalnotifications.html">generalnotifications</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('emptyaddform', 'data');
<a name="l3850"><span class="linenum">3850</span></a>      }
<a name="l3851"><span class="linenum">3851</span></a>  
<a name="l3852"><span class="linenum">3852</span></a>      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('validated')" class="var it39442" onMouseOver="hilite(39442)" onMouseOut="lolite()" href="../../_variables/validated.html">validated</a> = <a class="var it35133" onMouseOver="hilite(35133)" onMouseOut="lolite()" onClick="logVariable('requiredfieldsfilled')" href="../../_variables/requiredfieldsfilled.html">$requiredfieldsfilled</a> &amp;&amp; !<a class="var it35132" onMouseOver="hilite(35132)" onMouseOut="lolite()" onClick="logVariable('emptyform')" href="../../_variables/emptyform.html">$emptyform</a>;
<a name="l3853"><span class="linenum">3853</span></a>  
<a name="l3854"><span class="linenum">3854</span></a>      return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l3855"><span class="linenum">3855</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_userid': ['get_userid', '', [['backup/util/plan','restore_task.class.php',54],['backup/util/plan','restore_plan.class.php',115],['mod/quiz','attemptlib.php',763],['backup/controller','restore_controller.class.php',283],['backup/controller','backup_controller.class.php',281],['mod/data','lib.php',2471],['lib/filestorage','stored_file.php',708],['lib/filebrowser','virtual_root_file.php',236]], 84],
'clean_filename': ['clean_filename', 'Cleans a given filename by removing suspicious or troublesome characters ', [['lib','moodlelib.php',6378]], 61],
'fopen': ['fopen', 'Return a stream handle to this string stream. ', [['lib/horde/framework/Horde/Support','StringStream.php',41],['lib/horde/framework/Horde/Support','CombineStream.php',41]], 231],
'delete_content': ['delete_content', 'Delete all data linked to content, do not delete the context record itself ', [['lib','accesslib.php',5492],['mod/data','lib.php',399]], 9],
'render': ['render', 'Render TeX string into gif/png ', [['filter/tex','latex.php',78],['lib/adodb','adodb-pager.inc.php',239],['lib/htmlpurifier/HTMLPurifier/Printer','CSSDefinition.php',14],['lib/mustache/src/Mustache','Engine.php',202],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',768],['lib/htmlpurifier/HTMLPurifier/Printer','HTMLDefinition.php',15],['lib','formslib.php',926],['question/engine/tests','helpers.php',797],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/fullscreen','fullscreen.htm',82],['lib','outputrenderers.php',167],['lib','outputrenderers.php',299],['mod/quiz/classes/question/bank','custom_view.php',133],['question/behaviour','behaviourbase.php',97],['lib/mustache/src/Mustache','Template.php',57],['question/engine','questionattempt.php',815],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',85],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',235],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',298],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',391],['lib','portfoliolib.php',241],['lib/phpexcel/PHPExcel','Chart.php',527],['lib/mustache/src/Mustache','LambdaHelper.php',36]], 757],
'instance_by_id': ['instance_by_id', 'Get a context instance as an object, from a given context id. ', [['lib','accesslib.php',5383]], 174],
'data_update_grades': ['data_update_grades', 'Update activity grades ', [['mod/data','lib.php',1105]], 0],
'data_presets_save': ['data_presets_save', 'Save the database configuration as a preset. ', [['mod/data','lib.php',3180]], 1],
'groups_group_exists': ['groups_group_exists', 'Determines if a group with a given groupid exists. ', [['lib','grouplib.php',42]], 3],
'data_atmaxentries': ['data_atmaxentries', 'has a user reached the max number of entries? ', [['mod/data','lib.php',800]], 1],
'is_directory_a_preset': ['is_directory_a_preset', '', [['mod/data','lib.php',2138]], 3],
'notemptyfield': ['notemptyfield', 'Only look at the first item (second is format) ', [['mod/data/field/textarea','field.class.php',258],['mod/data/field/multimenu','field.class.php',258],['mod/data/field/picture','field.class.php',309],['mod/data/field/latlong','field.class.php',244],['mod/data','lib.php',427],['mod/data/field/file','field.class.php',217],['mod/data/field/checkbox','field.class.php',227],['mod/data/field/url','field.class.php',180]], 1],
'data_get_exportdata': ['data_get_exportdata', '', [['mod/data','lib.php',2827]], 1],
'require_course_login': ['require_course_login', 'Weaker version of require_login() ', [['lib','moodlelib.php',2887]], 68],
'get_content': ['get_content', 'Parent class version of this function simply returns NULL This should be implemented by the derived class to return the content object. ', [['blocks','moodleblock.class.php',143],['blocks/login','block_login.php',34],['blocks/participants','block_participants.php',30],['blocks/feedback','block_feedback.php',40],['blocks/quiz_results','block_quiz_results.php',52],['blocks/community','block_community.php',50],['blocks/mnet_hosts','block_mnet_hosts.php',42],['blocks/course_overview','block_course_overview.php',45],['blocks/mentees','block_mentees.php',43],['blocks/myprofile','block_myprofile.php',47],['blocks/social_activities','block_social_activities.php',34],['blocks/calendar_month','block_calendar_month.php',33],['lib','modinfolib.php',1250],['blocks/navigation','block_navigation.php',131],['blocks/site_main_menu','block_site_main_menu.php',34],['blocks/blog_tags','block_blog_tags.php',62],['blocks/private_files','block_private_files.php',43],['blocks/news_items','block_news_items.php',37],['blocks/messages','block_messages.php',30],['blocks/course_summary','block_course_summary.php',40],['lib/simplepie/library/SimplePie','Item.php',372],['blocks/tag_youtube','block_tag_youtube.php',48],['mod/workshop','locallib.php',3857],['blocks/completionstatus','block_completionstatus.php',44],['blocks/badges','block_badges.php',69],['blocks/activity_modules','block_activity_modules.php',33],['blocks/search_forums','block_search_forums.php',30],['blocks/section_links','block_section_links.php',53],['blocks/blog_menu','block_blog_menu.php',52],['blocks/selfcompletion','block_selfcompletion.php',45],['blocks/online_users','block_online_users.php',39],['blocks/activity_results','block_activity_results.php',129],['blocks/blog_recent','block_blog_recent.php',46],['blocks/admin_bookmarks','block_admin_bookmarks.php',69],['blocks/glossary_random','block_glossary_random.php',168],['blocks/course_list','block_course_list.php',37],['blocks/tags','block_tags.php',56],['lib/filestorage','stored_file.php',451],['lib/filebrowser','virtual_root_file.php',106],['blocks/recent_activity','block_recent_activity.php',50],['blocks/calendar_upcoming','block_calendar_upcoming.php',33],['blocks/html','block_html.php',47],['lib','navigationlib.php',566],['blocks/comments','block_comments.php',48],['blocks/settings','block_settings.php',102],['blocks/tag_flickr','block_tag_flickr.php',46],['blocks/rss_client','block_rss_client.php',46]], 62],
'data_get_advanced_search_sql': ['data_get_advanced_search_sql', 'Returns an array with an sql string for advanced searches and the parameters that go with them. ', [['mod/data','lib.php',3615]], 2],
'img': ['img', 'Generates a simple image tag with attributes. ', [['lib','outputcomponents.php',1159]], 45],
'data_get_field_from_id': ['data_get_field_from_id', 'given a field id this function creates an instance of the particular subfield class ', [['mod/data','lib.php',714]], 13],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1318]], 854],
'data_user_can_add_entry': ['data_user_can_add_entry', 'Can user add more entries? ', [['mod/data','lib.php',2073]], 3],
'data_get_available_presets': ['data_get_available_presets', 'Returns an array of all the available presets. ', [['mod/data','lib.php',1947]], 1],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/zend/Zend/Soap','Wsdl.php',641],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',582]], 3296],
'data_get_advance_search_ids': ['data_get_advance_search_ids', 'Get the ids of all the records that match that advanced search criteria This goes and loops through each criterion one at a time until it either runs out of records or returns a subset of records. ', [['mod/data','lib.php',3543]], 2],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',438],['lib/classes/event','base.php',682]], 778],
'data_reset_userdata': ['data_reset_userdata', 'Actual implementation of the reset course functionality, delete all the data responses for course $data->courseid. ', [['mod/data','lib.php',2553]], 0],
'archive_to_pathname': ['archive_to_pathname', 'Zip files and store the result in os file. ', [['lib/filestorage','zip_packer.php',89],['lib/filestorage','tgz_packer.php',159],['lib/filestorage','mbz_packer.php',75]], 27],
'grade_get_grades': ['grade_get_grades', 'Returns grading information for given activity, optionally with user grades Manual, course or category items can not be queried. ', [['lib','gradelib.php',328]], 53],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2762],['lib','outputrenderers.php',4128],['lib','outputrenderers.php',4201]], 495],
'data_presets_export': ['data_presets_export', '', [['mod/data','lib.php',3294]], 1],
'box_start': ['box_start', 'Outputs the opening section of a box. ', [['lib','outputrenderers.php',2987]], 351],
'get_complete_user_data': ['get_complete_user_data', 'Get a complete user record, which includes all the info in the user record. ', [['lib','moodlelib.php',4487]], 23],
'data_rating_permissions': ['data_rating_permissions', 'Return rating related permissions ', [['mod/data','lib.php',1391]], 0],
'get_sort_field': ['get_sort_field', 'Returns the sortable field for the content. By default, it\'s just content but for some plugins, it could be content 1 - content4 ', [['mod/data','lib.php',451]], 2],
'formats': ['formats', 'Given the fields being exported, and the single record, work out which export format(s) we can use ', [['mod/data','locallib.php',334]], 5],
'data_extend_settings_navigation': ['data_extend_settings_navigation', 'Adds module specific settings to the settings block ', [['mod/data','lib.php',3115]], 0],
'send_stored_file': ['send_stored_file', 'Handles the sending of file data to the user\'s browser, including support for byteranges etc. ', [['lib','filelib.php',2170]], 73],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',530]], 174],
'box_end': ['box_end', 'Outputs the closing section of a box. ', [['lib','outputrenderers.php',3002]], 351],
'make_temp_directory': ['make_temp_directory', 'Create a directory under tempdir and make sure it is writable. ', [['lib','setuplib.php',1578]], 58],
'empty_tag': ['empty_tag', 'Outputs an empty tag with attributes ', [['lib','outputcomponents.php',1096]], 511],
'count_records': ['count_records', 'Count the records in a table where all the given conditions met. ', [['lib/dml','moodle_database.php',1717]], 1399],
'delete_area_files': ['delete_area_files', 'Delete all area files (optionally limited by itemid). ', [['lib/filestorage','file_storage.php',740]], 117],
'data_get_user_grades': ['data_get_user_grades', 'Return grade for given user or all users. ', [['mod/data','lib.php',1076]], 1],
'data_preset_get_file_contents': ['data_preset_get_file_contents', 'Retreive the contents of a file. That file may either be in a conventional directory of the Moodle file storage ', [['mod/data','lib.php',2187]], 11],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3234],['mod/assign','locallib.php',3440]], 532],
'groups_is_member': ['groups_is_member', 'Determines if the user is a member of the given group. ', [['lib','grouplib.php',353]], 97],
'data_extend_navigation': ['data_extend_navigation', '', [['mod/data','lib.php',3089]], 0],
'data_comment_permissions': ['data_comment_permissions', 'Running addtional permission check on plugin, for example, plugins may have switch to turn on/off comments option, this callback will affect UI display, not like pluginname_comment_validate only throw exceptions. Capability check has been done in comment->check_permissions(), we don\'t need to do it again here. ', [['mod/data','lib.php',3390]], 0],
'data_print_template': ['data_print_template', 'takes a list of records, the current data, a search string, and mode to display prints the translated template ', [['mod/data','lib.php',1184]], 7],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'get_sort_sql': ['get_sort_sql', '', [['mod/data/field/number','field.class.php',92],['mod/data/field/latlong','field.class.php',234],['mod/data/field/date','field.class.php',132],['mod/data','lib.php',461]], 2],
'sql_like': ['sql_like', 'Returns \'LIKE\' part of a query. ', [['lib/dml','pgsql_native_moodle_database.php',1273],['lib/dml','oci_native_moodle_database.php',1523],['lib/dml','sqlsrv_native_moodle_database.php',1224],['lib/dml','moodle_database.php',2004],['lib/dml','mssql_native_moodle_database.php',1160],['lib/dml','mysqli_native_moodle_database.php',1502]], 158],
'data_get_field_from_name': ['data_get_field_from_name', 'given a field name this function creates an instance of the particular subfield class ', [['mod/data','lib.php',693]], 0],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'highlight': ['highlight', '', [['lib/yuilib/3.17.2/datatable-highlight','datatable-highlight-debug.js',25],['lib/yuilib/3.17.2/datatable-highlight','datatable-highlight.js',25],['lib','weblib.php',1864]], 65],
'get_recordset': ['get_recordset', 'Get a number of records as a moodle_recordset where all the given conditions met. ', [['lib/dml','moodle_database.php',1113]], 95],
'data_get_file_areas': ['data_get_file_areas', 'Lists all browsable file areas ', [['mod/data','lib.php',2906]], 0],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as a moodle_recordset using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','oci_native_moodle_database.php',1065],['lib/dml','sqlsrv_native_moodle_database.php',761],['lib/dml','mssql_native_moodle_database.php',687],['lib/dml','mysqli_native_moodle_database.php',985],['lib/dml/tests','dml_test.php',5423],['lib/dml','pdo_moodle_database.php',251]], 279],
'data_reset_course_form_defaults': ['data_reset_course_form_defaults', 'Course reset form defaults. ', [['mod/data','lib.php',2523]], 0],
'groups_get_activity_group': ['groups_get_activity_group', 'Returns group active in activity, changes the group by default if \'group\' page param present ', [['lib','grouplib.php',814]], 88],
'rss_get_url': ['rss_get_url', 'This function returns the URL for the RSS XML file. ', [['lib','rsslib.php',72]], 7],
'unalias': ['unalias', 'Extract the aliased user fields from a given record ', [['lib','outputcomponents.php',282]], 11],
'display_search_field': ['display_search_field', '', [['mod/data/field/textarea','field.class.php',163],['mod/data/field/menu','field.class.php',67],['mod/data/field/multimenu','field.class.php',78],['mod/data/field/picture','field.class.php',139],['mod/data/field/number','field.class.php',72],['mod/data/field/latlong','field.class.php',86],['mod/data/field/text','field.class.php',29],['mod/data/field/date','field.class.php',65],['mod/data/field/radiobutton','field.class.php',83],['mod/data/field/file','field.class.php',103],['mod/data/field/checkbox','field.class.php',80],['mod/data/field/url','field.class.php',94]], 2],
'data_add_record': ['data_add_record', 'function that takes in a dataid and adds a record this is used everytime an add template is submitted ', [['mod/data','lib.php',829]], 9],
'data_isowner': ['data_isowner', 'Given record object (or id), returns true if the record belongs to the current user ', [['mod/data','lib.php',776]], 8],
'delete': ['delete', 'Deletes a key pair ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',110],['lib/google/src/Google/Service','Reseller.php',440],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',1006],['lib/adodb','adodb-active-recordx.inc.php',949],['lib/zend/Zend/Service/Delicious','Post.php',236],['lib/grade','grade_object.php',270],['lib/zend/Zend/Gdata','Gapps.php',258],['lib/google/src/Google/Service','Fusiontables.php',644],['lib/google/src/Google/Service','Fusiontables.php',809],['lib/google/src/Google/Service','Fusiontables.php',934],['lib/google/src/Google/Service','Fusiontables.php',1127],['lib/google/src/Google/Service','Fusiontables.php',1188],['blog','locallib.php',325],['lib/google/src/Google/Service','Blogger.php',1051],['lib/google/src/Google/Service','Blogger.php',1212],['lib/google/src/Google/Service','Blogger.php',1434],['lib/portfolio','plugin.php',692],['lib/google/src/Google/Service','AdExchangeBuyer.php',605],['lib/google/src/Google/Service','Manager.php',240],['lib/google/src/Google/Service','Manager.php',320],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',137],['lib','webdavlib.php',691],['lib/grade','grade_item.php',354],['lib/google/src/Google/Service','Gmail.php',686],['lib/google/src/Google/Service','Gmail.php',843],['lib/google/src/Google/Service','Gmail.php',936],['lib/google/src/Google/Service','Gmail.php',1146],['course','lib.php',3133],['lib/google/src/Google/Service','Mirror.php',424],['lib/google/src/Google/Service','Mirror.php',592],['lib/google/src/Google/Service','Mirror.php',660],['lib/google/src/Google/Service','Mirror.php',771],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',731],['lib/google/src/Google/Service','Genomics.php',963],['lib/google/src/Google/Service','Genomics.php',1327],['lib/google/src/Google/Service','Genomics.php',1399],['cache/classes','interfaces.php',161],['lib/google/src/Google/Service','Dfareporting.php',470],['lib/zend/Zend/Gdata/Gbase','ItemEntry.php',133],['lib/google/src/Google/Service','Licensing.php',221],['lib/google/src/Google/Service','Drive.php',1462],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1681],['lib/google/src/Google/Service','Drive.php',1932],['lib/google/src/Google/Service','Drive.php',2002],['lib/google/src/Google/Service','Drive.php',2131],['lib/google/src/Google/Service','Drive.php',2294],['lib/google/src/Google/Service','Drive.php',2414],['completion','data_object.php',272],['lib/google/src/Google/Service','Books.php',1804],['lib/zend/Zend/Gdata','App.php',914],['lib/google/src/Google/Cache','Memcache.php',142],['lib/google/src/Google/Service','Bigquery.php',512],['lib/google/src/Google/Service','Bigquery.php',822],['cache','disabledlib.php',102],['lib/zend/Zend/Server','Cache.php',132],['lib/zend/Zend/Gdata/App','Entry.php',212],['cache/stores/memcached','lib.php',368],['lib/google/src/Google/Service','YouTube.php',1470],['lib/google/src/Google/Service','YouTube.php',1979],['lib/google/src/Google/Service','YouTube.php',2277],['lib/google/src/Google/Service','YouTube.php',2510],['lib/google/src/Google/Service','YouTube.php',2657],['lib/google/src/Google/Service','YouTube.php',2998],['lib/google/src/Google/Service','YouTube.php',3196],['lib/google/src/Google/Service','Webmasters.php',298],['lib/google/src/Google/Service','Webmasters.php',388],['lib/google/src/Google/Service','Autoscaler.php',314],['lib/google/src/Google/Service','Autoscaler.php',428],['calendar','lib.php',2388],['lib/zend/Zend/Service/Amazon','Sqs.php',129],['lib/google/src/Google/Service','ShoppingContent.php',553],['lib/google/src/Google/Service','ShoppingContent.php',735],['lib/google/src/Google/Service','ShoppingContent.php',969],['mod/lesson','locallib.php',1039],['mod/lesson','locallib.php',2274],['lib/google/src/Google/Service','SQLAdmin.php',628],['lib/google/src/Google/Service','SQLAdmin.php',923],['lib/google/src/Google/Service','Fitness.php',458],['lib/google/src/Google/Service','Fitness.php',563],['lib/google/src/Google/Service','TagManager.php',1049],['lib/google/src/Google/Service','TagManager.php',1140],['lib/google/src/Google/Service','TagManager.php',1233],['lib/google/src/Google/Service','TagManager.php',1326],['lib/google/src/Google/Service','TagManager.php',1419],['lib/google/src/Google/Service','TagManager.php',1513],['lib/google/src/Google/Service','TagManager.php',1607],['lib/google/src/Google/Service','TagManager.php',1757],['lib/google/src/Google/Service','Directory.php',1300],['lib/google/src/Google/Service','Directory.php',1477],['lib/google/src/Google/Service','Directory.php',1587],['lib/google/src/Google/Service','Directory.php',1642],['lib/google/src/Google/Service','Directory.php',1769],['lib/google/src/Google/Service','Directory.php',1838],['lib/google/src/Google/Service','Directory.php',1935],['lib/google/src/Google/Service','Directory.php',2042],['lib/google/src/Google/Service','Directory.php',2144],['lib/google/src/Google/Service','Directory.php',2205],['lib/google/src/Google/Service','Directory.php',2405],['lib/google/src/Google/Service','Directory.php',2480],['cache/stores/static','lib.php',374],['lib/google/src/Google/Service','AppState.php',153],['lib/google/src/Google/Service','Taskqueue.php',292],['lib/google/src/Google/Service','Container.php',343],['lib/google/src/Google/Service','AndroidPublisher.php',1177],['lib/google/src/Google/Service','AndroidPublisher.php',1257],['lib/google/src/Google/Service','AndroidPublisher.php',1595],['lib/google/src/Google/Service','AndroidPublisher.php',1690],['lib/google/src/Google/Service','AndroidPublisher.php',1972],['repository','lib.php',427],['repository','lib.php',2012],['lib','accesslib.php',5529],['lib/google/src/Google/Service','AdSenseHost.php',733],['lib/google/src/Google/Service','AdSenseHost.php',1009],['lib/google/src/Google/Service','AdSenseHost.php',1167],['cache/stores/memcache','lib.php',401],['lib','filelib.php',3440],['lib/google/src/Google/Service','MapsEngine.php',1692],['lib/google/src/Google/Service','MapsEngine.php',1990],['lib/google/src/Google/Service','MapsEngine.php',2343],['lib/google/src/Google/Service','MapsEngine.php',2650],['lib/google/src/Google/Service','MapsEngine.php',2911],['lib/grade','grade_grade.php',955],['comment','lib.php',786],['lib/google/src/Google/Service','SiteVerification.php',138],['lib/google/src/Google/Service','Prediction.php',261],['cache/stores/session','lib.php',417],['cache/classes','dummystore.php',198],['lib/google/src/Google/Service','Compute.php',2812],['lib/google/src/Google/Service','Compute.php',2896],['lib/google/src/Google/Service','Compute.php',3139],['lib/google/src/Google/Service','Compute.php',3225],['lib/google/src/Google/Service','Compute.php',3361],['lib/google/src/Google/Service','Compute.php',3463],['lib/google/src/Google/Service','Compute.php',3543],['lib/google/src/Google/Service','Compute.php',3662],['lib/google/src/Google/Service','Compute.php',3725],['lib/google/src/Google/Service','Compute.php',3844],['lib/google/src/Google/Service','Compute.php',3941],['lib/google/src/Google/Service','Compute.php',4080],['lib/google/src/Google/Service','Compute.php',4406],['lib/google/src/Google/Service','Compute.php',4543],['lib/google/src/Google/Service','Compute.php',4660],['lib/google/src/Google/Service','Compute.php',4740],['lib/google/src/Google/Service','Compute.php',4806],['lib/google/src/Google/Service','Compute.php',4927],['lib/google/src/Google/Service','Compute.php',5069],['lib/google/src/Google/Service','Compute.php',5229],['lib/google/src/Google/Service','Compute.php',5360],['badges/criteria','award_criteria.php',330],['badges/criteria','award_criteria_manual.php',220],['lib/google/src/Google/Service','Calendar.php',886],['lib/google/src/Google/Service','Calendar.php',1040],['lib/google/src/Google/Service','Calendar.php',1228],['lib/google/src/Google/Service','Calendar.php',1362],['lib/google/src/Google/Service','Analytics.php',2068],['lib/google/src/Google/Service','Analytics.php',2211],['lib/google/src/Google/Service','Analytics.php',2293],['lib/google/src/Google/Service','Analytics.php',2414],['lib/google/src/Google/Service','Analytics.php',2631],['lib/google/src/Google/Service','Analytics.php',2760],['lib/google/src/Google/Service','Analytics.php',2851],['lib/google/src/Google/Service','Analytics.php',3181],['lib/google/src/Google/Service','Analytics.php',3406],['lib/google/src/Google/Service','Tasks.php',309],['lib/google/src/Google/Service','Tasks.php',427],['cache/classes','loaders.php',777],['cache/classes','loaders.php',1491],['cache/classes','loaders.php',1859],['cache/stores/mongodb','lib.php',361],['lib/grade','grade_category.php',259],['cache/stores/file','lib.php',392],['lib/google/src/Google/Service','Storage.php',945],['lib/google/src/Google/Service','Storage.php',1060],['lib/google/src/Google/Service','Storage.php',1227],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1565],['admin/tool/uploadcourse/classes','course.php',226],['lib/google/src/Google/Cache','Null.php',51],['lib/filestorage','stored_file.php',323],['lib/filebrowser','virtual_root_file.php',69],['lib/google/src/Google/Service','AdSense.php',1257],['lib/google/src/Google/Service','AdSense.php',1729],['lib/google/src/Google/Service','Pubsub.php',239],['lib/google/src/Google/Service','Pubsub.php',378],['lib/grade','grade_scale.php',136],['lib/filebrowser','file_info.php',418],['lib/google/src/Google/Cache','File.php',106],['lib/htmlpurifier/HTMLPurifier','Zipper.php',89],['lib/google/src/Google/Service','Dns.php',370],['lib/filebrowser','file_info_stored.php',631],['lib/google/src/Google/Service','Replicapool.php',374],['lib/google/src/Google/Service','Resourceviews.php',419],['lib','badgeslib.php',620],['lib/google/src/Google/Cache','Apc.php',103],['lib/adodb','adodb-active-record.inc.php',792],['mnet','peer.php',122],['lib/grade','grade_outcome.php',97]], 260],
'data_export_csv': ['data_export_csv', '', [['mod/data','lib.php',2730]], 1],
'userdate': ['userdate', 'Also in ADORecordSet. ', [['lib/adodb','adodb.inc.php',2607],['lib/adodb','adodb.inc.php',3271],['lib','moodlelib.php',2150]], 496],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'data_process_submission': ['data_process_submission', 'Check for required fields, and build a list of fields to be updated in a submission. ', [['mod/data','lib.php',3765]], 2],
'data_presets_generate_xml': ['data_presets_generate_xml', 'Generates the XML for the database module provided ', [['mod/data','lib.php',3236]], 2],
'set_callback_options': ['set_callback_options', 'Function to set the callback options ', [['lib','portfoliolib.php',134]], 18],
'get_id': ['get_id', 'Returns instance id ', [['grade/grading/form','lib.php',854],['cache/classes','definition.php',596],['lib/classes/task','adhoc_task.php',51],['question/engine','questionusage.php',120],['mod/lti/classes/local/ltiservice','service_base.php',76],['lib/simplepie/library/SimplePie','Item.php',199],['question/engine','questionattemptstep.php',136],['mod/lti/classes/local/ltiservice','resource_base.php',81],['backup/converter','convertlib.php',100],['admin/tool/uploadcourse/classes','course.php',335],['backup/controller','backup_controller.class.php',261],['lib','adminlib.php',1716],['lib/filestorage','stored_file.php',786],['lib/filebrowser','virtual_root_file.php',290]], 169],
'text_export_supported': ['text_export_supported', '', [['mod/data/field/picture','field.class.php',301],['mod/data','lib.php',497],['mod/data/field/file','field.class.php',209]], 2],
'disabledif': ['disabledif', 'Adds a dependency for $elementName which will be disabled if $condition is met. If $condition = \'notchecked\' (default) then the condition is that the $dependentOn element is not checked. If $condition = \'checked\' then the condition is that the $dependentOn element is checked. If $condition is something else (like "eq" for equals) then it is checked to see if the value of the $dependentOn element is $condition (such as equal) to $value. ', [['lib','formslib.php',2363]], 324],
'cleanup': ['cleanup', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/table','editor_plugin_src.js',189],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/table','editor_plugin_src.js',786],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',115],['lib/portfolio','plugin.php',709],['backup/util/ui','restore_ui.class.php',230],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',84],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',70],['mod/assign/feedback/editpdf/fpdi','fpdi.php',578],['lib','filelib.php',3632],['lib','csvlib.class.php',277],['cache/classes','dummystore.php',230],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',106],['mod/data','lib.php',2425],['mod/data','lib.php',2449],['cache/classes','store.php',258],['portfolio/mahara','lib.php',363]], 39],
'data_convert_to_roles': ['data_convert_to_roles', 'Converts a database (module instance) to use the Roles System ', [['mod/data','lib.php',1786]], 0],
'update_content': ['update_content', '', [['mod/data/field/textarea','field.class.php',185],['mod/data/field/multimenu','field.class.php',191],['mod/data/field/picture','field.class.php',220],['mod/data/field/number','field.class.php',28],['mod/data/field/latlong','field.class.php',198],['mod/data/field/date','field.class.php',100],['mod/data','lib.php',375],['mod/data/field/file','field.class.php',163],['mod/data/field/checkbox','field.class.php',160],['mod/data/field/url','field.class.php',146]], 2],
'update_field': ['update_field', '', [['mod/data/field/picture','field.class.php',186],['mod/data','lib.php',209]], 3],
'showhideadvsearch': ['showhideadvsearch', 'javascript for hiding/displaying advanced search form when viewing ', [['mod/data','data.js',17]], 1],
'table': ['table', '', [['lib/adodb','adodb-perf.inc.php',232],['lib/minify/lib','FirePHP.php',454],['lib','outputcomponents.php',1492]], 255],
'data_export_ods': ['data_export_ods', '', [['mod/data','lib.php',2787]], 1],
'data_get_field_new': ['data_get_field_new', 'given a field id this function creates an instance of the particular subfield class ', [['mod/data','lib.php',735]], 12],
'data_pluginfile': ['data_pluginfile', 'Serves the data attachments. Implements needed access control ;-) ', [['mod/data','lib.php',3005]], 0],
'user_picture': ['user_picture', '', [['mod/quiz','attemptlib.php',2188],['lib','outputrenderers.php',2367],['lib','outputrenderers.php',4702]], 114],
'start_tag': ['start_tag', '', [['backup/util/xml/parser','progressive_parser.class.php',215],['lib','outputcomponents.php',1075]], 694],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'get_record_sql': ['get_record_sql', 'Get a single database record as an object using a SQL statement. ', [['lib/dml','oci_native_moodle_database.php',1035],['lib/dml','moodle_database.php',1457]], 140],
'set_title': ['set_title', '', [['backup/cc/cc_lib','cc_basiclti.php',57],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_metadata.php',225],['backup/cc/cc_lib','cc_forum.php',39],['mod/wiki','pagelib.php',216],['lib','outputcomponents.php',2815],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['lib','pagelib.php',1128],['backup/cc/cc_lib','cc_page.php',38]], 445],
'data_rss_delete_file': ['data_rss_delete_file', 'Given a database object, deletes all cached RSS files associated with it. ', [['mod/data','rsslib.php',180]], 1],
'or': ['or', '', [['lib/tcpdf','LICENSE.TXT',69]], 552],
'data_update_instance': ['data_update_instance', 'updates an instance of a data ', [['mod/data','lib.php',921]], 1],
'data_supports': ['data_supports', '', [['mod/data','lib.php',2706]], 0],
'data_page_type_list': ['data_page_type_list', 'Return a list of page types ', [['mod/data','lib.php',3501]], 0],
'data_tags_check': ['data_tags_check', 'check the multple existence any tag in a template ', [['mod/data','lib.php',870]], 1],
'isloggedin': ['isloggedin', 'Return true, if session is currently logged into the backend server ', [['lib/zend/Zend/Service','LiveDocx.php',293],['lib','accesslib.php',1909]], 177],
'container': ['container', 'Outputs a container. ', [['lib','outputrenderers.php',3011]], 186],
'data_numentries': ['data_numentries', 'returns the number of entries already made by this user ', [['mod/data','lib.php',815]], 4],
'display_browse_field': ['display_browse_field', 'Display the content of the field in browse mode ', [['mod/data/field/textarea','field.class.php',221],['mod/data/field/multimenu','field.class.php',233],['mod/data/field/picture','field.class.php',157],['mod/data/field/number','field.class.php',48],['mod/data/field/latlong','field.class.php',132],['mod/data/field/date','field.class.php',124],['mod/data','lib.php',346],['mod/data/field/file','field.class.php',136],['mod/data/field/checkbox','field.class.php',176],['mod/data/field/url','field.class.php',112]], 2],
'data_get_all_recordids': ['data_get_all_recordids', 'Get all of the record ids from a database activity. ', [['mod/data','lib.php',3512]], 5],
'data_preset_path': ['data_preset_path', '', [['mod/data','lib.php',2484]], 2],
'shift_course_mod_dates': ['shift_course_mod_dates', 'Change dates in module - used from course reset. ', [['lib','moodlelib.php',4968]], 9],
'xmlize': ['xmlize', 'Create an array structure from an XML string. ', [['lib','xmlize.php',44]], 28],
'set_formats': ['set_formats', 'Sets the available export formats for this content. This function will also poll the static function in the caller class and make sure we\'re not overriding a format that has nothing to do with mimetypes. Eg: if you pass IMAGE here but the caller can export LEAP2A it will keep LEAP2A as well. ', [['lib','portfoliolib.php',164]], 12],
'get_file_packer': ['get_file_packer', 'Returns file packer ', [['lib','moodlelib.php',6004]], 58],
'data_reset_course_form_definition': ['data_reset_course_form_definition', 'Implementation of the function for printing the form elements that control whether the course reset functionality affects the data. ', [['mod/data','lib.php',2503]], 0],
'image': ['image', 'Puts an image in the page. The upper-left corner must be given. The dimensions can be specified in different ways:<ul> <li>explicit width and height (expressed in user unit)</li> <li>one explicit dimension, the other being calculated automatically in order to keep the original proportions</li> <li>no explicit dimension, in which case the image is put at 72 dpi</li></ul> Supported formats are JPEG and PNG images whitout GD library and all images supported by GD: GD, GD2, GD2PART, GIF, JPEG, PNG, BMP, XBM, XPM; The format can be specified explicitly or inferred from the file extension.<br /> It is possible to put a link on the image.<br /> Remark: if an image is used several times, only one copy will be embedded in the file.<br /> ', [['lib/tcpdf','tcpdf.php',6784],['mod/assign/feedback/editpdf/fpdi','fpdf_tpl.php',292],['mod/data','lib.php',480],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',217]], 54],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 631],
'assign_capability': ['assign_capability', '', [['lib/tests','coursecatlib_test.php',66],['lib','accesslib.php',1543]], 118],
'count_records_sql': ['count_records_sql', 'Get the result of a SQL SELECT COUNT(...) query. ', [['lib/dml','moodle_database.php',1747]], 132],
'data_convert_arrays_to_strings': ['data_convert_arrays_to_strings', '', [['mod/data','lib.php',1771]], 2],
'to_html': ['to_html', 'Returns html string. ', [['lib','listlib.php',110],['lib','listlib.php',523],['lib','portfoliolib.php',254]], 16],
'grade_update': ['grade_update', 'Submit new or update grade; update/create grade_item definition. Grade must have userid specified, rawgrade and feedback with format are optional. rawgrade NULL means \'Not graded\'. Missing property or key means does not change the existing value. ', [['lib','gradelib.php',40]], 27],
'tag': ['tag', 'Outputs a tag with attributes and contents ', [['lib','outputcomponents.php',1063],['lib/zend/Zend/Service','Technorati.php',228]], 1254],
'record_exists_sql': ['record_exists_sql', 'Test whether a SQL SELECT statement returns any records. ', [['lib/dml','moodle_database.php',1797]], 47],
'js': ['js', 'Ensure that the specified JavaScript file is linked to from this page. ', [['lib','outputrequirementslib.php',398],['lib/classes','minify.php',31],['grade/report/singleview/classes/local/screen','screen.php',245]], 75],
'action_icon': ['action_icon', 'Renders an action_icon. ', [['course/classes','management_renderer.php',987],['lib','outputrenderers.php',1657]], 105],
'define_field': ['define_field', 'Set up the field object according to data in an object.  Now is the time to clean it! ', [['mod/data','lib.php',145]], 12],
'get_directory': ['get_directory', 'Returns the name of the directory the preset is located in ', [['mod/data','lib.php',2179]], 2],
'add': ['add', '', [['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',454],['blog','locallib.php',242],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['backup/cc','validator.php',51],['lib/google/src/Google/Http','Batch.php',47],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['lib/zend/Zend/Service/Simpy','WatchlistFilterSet.php',47],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/lessphp/Output','Mapped.php',50],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/google/src/Google/Service','Webmasters.php',375],['lib/horde/framework/Horde','Variables.php',297],['lib','outputcomponents.php',2700],['lib','outputcomponents.php',3375],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/zend/Zend','Date.php',1081],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['comment','lib.php',675],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',86],['lib/horde/framework/Horde','Stream.php',116],['backup/cc/cc_lib/gral_lib','cssparser.php',111],['lib/lessphp','Output.php',18],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib','adminlib.php',736],['lib','adminlib.php',895],['lib','adminlib.php',1447],['lib','csslib.php',1508],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib','navigationlib.php',302],['lib','navigationlib.php',758],['lib','navigationlib.php',3288],['lib','navigationlib.php',3542],['lib/phpexcel/PHPExcel','HashTable.php',85],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454]], 5988],
'data_get_view_actions': ['data_get_view_actions', 'List the actions that correspond to a view of this module. This is used by the participation report. ', [['mod/data','lib.php',1711]], 0],
'data_print_ratings': ['data_print_ratings', '', [['mod/data','lib.php',1704]], 1],
'get_preset_settings': ['get_preset_settings', 'Gets the preset settings ', [['mod/data','lib.php',2215]], 2],
'add_worksheet': ['add_worksheet', 'Create one Moodle Worksheet ', [['lib','excellib.class.php',70],['lib','odslib.class.php',46]], 25],
'import': ['import', 'Imports a feed located at $uri. This method overrides the default behavior of Zend_Gdata_App, providing support for Zend_Gdata_Gapps_ServiceException. ', [['lib/zend/Zend/Gdata','Gapps.php',163],['lib/google/src/Google/Service','Gmail.php',972],['lib/google/src/Google/Service','Genomics.php',1011],['lib/zend/Zend/Gdata','App.php',707],['lib/google/src/Google/Service','SQLAdmin.php',680],['lib/zend/Zend','Gdata.php',111],['lib/google/src/Google/Service','Calendar.php',1406],['mod/data','lib.php',2319]], 3],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',757]], 262],
'data_user_outline': ['data_user_outline', 'returns a summary of data activity of this user ', [['mod/data','lib.php',998]], 0],
'end_tag': ['end_tag', '', [['backup/util/xml/parser','progressive_parser.class.php',261],['lib','outputcomponents.php',1086],['backup/util/xml','xml_writer.class.php',177]], 858],
'data_rating_validate': ['data_rating_validate', 'Validates a submitted rating ', [['mod/data','lib.php',1412]], 0],
'get_context_info_array': ['get_context_info_array', 'Returns context instance plus related course and cm instances ', [['lib','accesslib.php',1424]], 54],
'pix_url': ['pix_url', 'Return the URL for an image ', [['lib','outputlib.php',1356],['lib','outputrenderers.php',234]], 406],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'out': ['out', 'Returns the string ', [['lib','moodlelib.php',9451],['lib','weblib.php',547],['lib','tablelib.php',1526],['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['report/loglive/classes','table_log_ajax.php',37]], 549],
'define_default_field': ['define_default_field', 'This field just sets up a default field object ', [['mod/data','lib.php',121]], 2],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1331]], 365],
'create': ['create', 'Creates a new 2048 bit RSA key pair and returns a unique ID that can be used to reference this key pair when launching new instances. ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',39],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',271],['repository/filesystem','lib.php',283],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',39],['lib/google/src/Google/Service','Gmail.php',670],['lib/google/src/Google/Service','Gmail.php',827],['course','lib.php',2874],['lib/classes/event','base.php',139],['lib/google/src/Google/Service','Genomics.php',618],['lib/google/src/Google/Service','Genomics.php',717],['lib/google/src/Google/Service','Genomics.php',850],['lib/google/src/Google/Service','Genomics.php',1313],['lib','modinfolib.php',1747],['calendar','lib.php',2651],['lib/zend/Zend/Service/Amazon','Sqs.php',82],['lib','weblib.php',3048],['mod/lesson','locallib.php',1013],['mod/lesson','locallib.php',2166],['mod/lesson','locallib.php',3203],['lib/google/src/Google/Service','Fitness.php',340],['lib/google/src/Google/Service','TagManager.php',1034],['lib/google/src/Google/Service','TagManager.php',1124],['lib/google/src/Google/Service','TagManager.php',1217],['lib/google/src/Google/Service','TagManager.php',1310],['lib/google/src/Google/Service','TagManager.php',1403],['lib/google/src/Google/Service','TagManager.php',1497],['lib/google/src/Google/Service','TagManager.php',1591],['lib/google/src/Google/Service','TagManager.php',1742],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Container.php',314],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['repository','lib.php',206],['repository','lib.php',1960],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',555],['lib/google/src/Google/Service','Games.php',1648],['lib/google/src/Google/Service','Games.php',2012],['lib/google/src/Google/Service','MapsEngine.php',1676],['lib/google/src/Google/Service','MapsEngine.php',1976],['lib/google/src/Google/Service','MapsEngine.php',2252],['lib/google/src/Google/Service','MapsEngine.php',2329],['lib/google/src/Google/Service','MapsEngine.php',2897],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Pubsub.php',219],['lib/google/src/Google/Service','Pubsub.php',364],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/simplepie/library/SimplePie','Registry.php',153],['lib','navigationlib.php',266],['lib/google/src/Google/Service','Dns.php',282],['lib/google/src/Google/Service','Dns.php',355],['lib','coursecatlib.php',328],['mod/quiz/classes','structure.php',65]], 3074],
'is_enrolled': ['is_enrolled', 'Returns true if user is enrolled (is participating) in course this is intended for students and teachers. ', [['lib','accesslib.php',2037]], 143],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',605]], 2167],
'delete_ratings': ['delete_ratings', 'Delete one or more ratings. Specify either a rating id, an item id or just the context id. ', [['rating','lib.php',381]], 16],
'display_add_field': ['display_add_field', '', [['mod/data/field/textarea','field.class.php',52],['mod/data/field/menu','field.class.php',29],['mod/data/field/multimenu','field.class.php',29],['mod/data/field/picture','field.class.php',30],['mod/data/field/latlong','field.class.php',46],['mod/data/field/date','field.class.php',37],['mod/data/field/radiobutton','field.class.php',29],['mod/data','lib.php',266],['mod/data/field/file','field.class.php',28],['mod/data/field/checkbox','field.class.php',29],['mod/data/field/url','field.class.php',28]], 2],
'checkbox': ['checkbox', 'Creates a CheckBox field ', [['lib/tcpdf','tcpdf.php',13017],['lib','outputcomponents.php',1209]], 31],
'print_before_form': ['print_before_form', 'Just in case a field needs to print something before the whole form ', [['mod/data','lib.php',438]], 0],
'extract_to_pathname': ['extract_to_pathname', 'Unzip file to given file path (real OS filesystem), existing files are overwritten. ', [['lib/filestorage','zip_packer.php',252],['lib/filestorage','tgz_packer.php',631],['lib/filestorage','mbz_packer.php',91],['lib/filestorage','stored_file.php',516],['lib/filebrowser','virtual_root_file.php',135]], 28],
'get_directory_files': ['get_directory_files', 'Returns all files and optionally directories ', [['lib/filestorage','file_storage.php',647]], 25],
'data_generate_default_template': ['data_generate_default_template', 'Given a template and a dataid, generate a default case template ', [['mod/data','lib.php',530]], 10],
'send': ['send', '', [['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',179],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',116],['lib/horde/framework/Horde/Mail/Transport','Null.php',54],['lib/zend/Zend/Service/DeveloperGarden','SendSms.php',126],['lib/google/src/Google/Service','Gmail.php',739],['lib/google/src/Google/Service','Gmail.php',1057],['lib','excellib.class.php',132],['lib/horde/framework/Horde/Mail/Transport','Mail.php',60],['auth/cas/CAS/CAS/Request','AbstractRequest.php',223],['lib/pear/Auth','RADIUS.php',370],['lib/phpmailer','class.phpmailer.php',954],['lib/zend/Zend/Service/Amazon','Sqs.php',185],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',158],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',126],['auth/cas/CAS/CAS/ProxiedService','Http.php',62],['lib/jabber/XMPP','XMLStream.php',677],['lib','odslib.class.php',81],['auth/cas/CAS/CAS/Request','CurlMultiRequest.php',99],['lib/horde/framework/Horde/Mime','Part.php',1679],['backup/util/xml/output','memory_xml_output.class.php',59],['lib/horde/framework/Horde/Mail/Transport','Mock.php',91],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',89],['mnet/xmlrpc','client.php',119],['auth/cas/CAS/CAS/Request','RequestInterface.php',136],['lib/jabber/XMPP','BOSH.php',150],['auth/cas/CAS/CAS/Request','MultiRequestInterface.php',75],['mod/lti/classes/local/ltiservice','response.php',205],['backup/util/xml/output','file_xml_output.class.php',66],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',65],['lib/horde/framework/Horde/Mime','Mail.php',372]], 205],
'data_get_available_site_presets': ['data_get_available_site_presets', 'Gets an array of all of the presets that users have saved to the site. ', [['mod/data','lib.php',1982]], 2],
'data_delete_instance': ['data_delete_instance', 'deletes an instance of a data ', [['mod/data','lib.php',955]], 0],
'data_delete_site_preset': ['data_delete_site_preset', 'Deletes a saved preset. ', [['mod/data','lib.php',2014]], 2],
'delete_field': ['delete_field', 'Delete a field completely ', [['mod/data','lib.php',234]], 2],
'create_file_from_string': ['create_file_from_string', 'Add new local file. ', [['lib/filestorage','file_storage.php',1230],['lib/filebrowser','file_info.php',379],['lib/filebrowser','file_info_stored.php',490]], 95],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',768]], 607],
'valid': ['valid', '', [['lib/tests','completionlib_test.php',884],['lib/adodb','adodb.inc.php',2798],['lib/adodb','adodb.inc.php',2874],['lib/google/src/Google','Collection.php',43],['lib/zend/Zend/Server','Definition.php',258],['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',378],['lib/horde/framework/Horde','Domhtml.php',331],['question/engine','questionusage.php',999],['lib/horde/framework/Horde/Imap/Client','Ids.php',419],['lib/dml','oci_native_moodle_recordset.php',76],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',329],['lib/classes/dml','recordset_walk.php',127],['lib/horde/framework/Horde/Mail/Rfc822','List.php',439],['lib/zend/Zend/Service/Delicious','PostList.php',217],['backup/util/helper','backup_array_iterator.class.php',59],['lib/dml','mssql_native_moodle_recordset.php',83],['lib/dml','pgsql_native_moodle_recordset.php',100],['backup/cc/cc_lib','cc_version11.php',47],['lib/filestorage','zip_archive.php',514],['lib/zend/Zend/Service/Amazon','ResultSet.php',161],['lib/phpexcel/PHPExcel','WorksheetIterator.php',109],['question/engine/tests','helpers.php',1221],['lib/dml','mysqli_native_moodle_recordset.php',82],['lib/zend/Zend/Gdata/App','Feed.php',177],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',140],['lib/zend/Zend/Service/Technorati','ResultSet.php',240],['lib/zend/Zend/Service/Flickr','ResultSet.php',178],['lib/zend/Zend/Uri','Http.php',270],['backup/cc/cc_lib','cc_asssesment.php',58],['backup/cc/cc_lib','cc_version1.php',47],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',182],['lib/dml','sqlsrv_native_moodle_recordset.php',129],['question/engine','questionattempt.php',1624],['question/engine','questionattempt.php',1743],['lib/zend/Zend/Service/Yahoo','ResultSet.php',186],['backup/util/helper','backup_null_iterator.class.php',49],['lib/phpexcel/PHPExcel/Worksheet','CellIterator.php',119],['lib/dml','pdo_moodle_recordset.php',75]], 69],
'__construct': ['__construct', 'Constructor ', [['lib/jabber/XMPP','Log.php',67],['lib/zend/Zend/Gdata/Books','VolumeFeed.php',41],['lib/markdown','MarkdownExtra.php',51],['lib/zend/Zend/Gdata/Books/Extension','BooksCategory.php',42],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/zend/Zend/Validate','Iban.php',106],['repository/wikimedia','wikimedia.php',35],['lib/lessphp/Tree','Operation.php',19],['lib/alfresco/Service','Version.php',38],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['backup/moodle2','backup_activity_task.class.php',45],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/phpunit/classes','advanced_testcase.php',45],['lib/zend/Zend/Service/DeveloperGarden/Request','RequestAbstract.php',40],['lib','outputlib.php',447],['lib','outputlib.php',2000],['repository/filesystem','lib.php',48],['lib/zend/Zend/XmlRpc/Value','Nil.php',40],['lib/lessphp/Tree','NameValue.php',21],['lib/zend/Zend/Gdata/YouTube','UserProfileEntry.php',283],['lib/zend/Zend/Gdata/Gapps','EmailListRecipientEntry.php',69],['lib/simplepie/library/SimplePie','Restriction.php',81],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes/update','checker.php',50],['lib/adodb','adodb-active-recordx.inc.php',131],['lib/phpexcel/PHPExcel','Calculation.php',1721],['lib/zend/Zend/Gdata/Photos/Extension','NumPhotos.php',50],['availability/classes','info_module.php',40],['lib/zend/Zend/Gdata/Geo/Extension','GmlPos.php',49],['lib/zend/Zend/Gdata/App/Extension','Link.php',49],['lib/zend/Zend/Gdata/Photos/Extension','Access.php',51],['lib/zend/Zend/Server/Reflection','Parameter.php',58],['lib/zend/Zend/Service/DeveloperGarden/Client','ClientAbstract.php',129],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['lib/zend/Zend/Validate/Db','Abstract.php',79],['cache/locks/file','lib.php',66],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',180],['question/type/missingtype','edit_missingtype_form.php',38],['auth/cas/CAS/CAS','Client.php',862],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/zend/Zend/Gdata/Books','VolumeQuery.php',46],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/zend/Zend/XmlRpc','Request.php',92],['lib/zend/Zend/Service/Delicious','Post.php',74],['lib/zend/Zend/Gdata/Extension','FeedLink.php',53],['lib/zend/Zend/Http/Client/Adapter','Socket.php',97],['lib/grade','grade_object.php',80],['lib/zend/Zend/Gdata/YouTube','ContactFeed.php',55],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['lib/google/src/Google/Auth','LoginTicket.php',35],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',84],['lib/zend/Zend/Service/DeveloperGarden/SecurityTokenServer','Cache.php',59],['question/type/randomsamatch','question.php',114],['lib/zend/Zend/Service/WindowsAzure/Storage','SignedIdentifier.php',49],['lib/zend/Zend/Amf/Parse','OutputStream.php',40],['blocks','moodleblock.class.php',111],['lib/simplepie','autoloader.php',62],['mod/scorm','renderer.php',129],['lib/zend/Zend/Gdata/Extension','Who.php',64],['lib/zend/Zend/Gdata/Gapps','EmailListQuery.php',54],['lib/zend/Zend/Service/Simpy','LinkSet.php',47],['repository/flickr_public','lib.php',49],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Replicapoolupdater.php',47],['admin/tool/generator/classes','site_backend.php',58],['mod/assign','assignmentplugin.php',50],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['mod/lti/service/profile/classes/local/resource','profile.php',43],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['lib/lessphp/Tree','Anonymous.php',21],['user','renderer.php',186],['lib/zend/Zend/Service/WindowsAzure','Storage.php',170],['lib/google/src/Google','Service.php',26],['lib/lessphp/Tree','Url.php',17],['webservice','lib.php',745],['webservice','lib.php',841],['webservice','lib.php',1120],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',270],['lib/zend/Zend/Gdata/YouTube/Extension','MediaContent.php',55],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib/tests','completionlib_test.php',863],['lib/zend/Zend/Service/Amazon','Accessories.php',44],['lib/zend/Zend/Validate/Barcode','Code39ext.php',47],['mod/assign/feedback/editpdf/classes','comment.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',46],['backup/moodle2','backup_settingslib.php',42],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateListRequest.php',46],['lib/zend/Zend/XmlRpc/Value','Base64.php',40],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['lib/zend/Zend/Service/WindowsAzure/Storage','Blob.php',117],['lib/lessphp','Parser.php',75],['lib/zend/Zend/Service/DeveloperGarden/Response/IpLocation','LocateIPResponse.php',47],['lib/zend/Zend/Gdata','Query.php',72],['lib/zend/Zend/Service/Technorati','TagResultSet.php',57],['lib/zend/Zend/Rest/Client','Result.php',42],['lib/lessphp/Tree','Call.php',19],['lib/zend/Zend/Server/Method','Callback.php',59],['lib/minify/lib/Minify/JS','ClosureCompiler.php',38],['mod/workshop/backup/moodle1','lib.php',308],['lib/zend/Zend/Gdata/YouTube','ActivityFeed.php',54],['admin/tool/log/store/database/classes/log','store.php',47],['lib/zend/Zend/Validate','Alpha.php',65],['lib/zend/Zend/Gdata','Gapps.php',109],['lib/zend/Zend/Service/Flickr','Result.php',174],['question/type/multianswer','edit_multianswer_form.php',58],['mod/assign/feedback/file','renderable.php',44],['lib/horde/framework/Horde','Secret.php',48],['lib/zend/Zend/Gdata/Photos/Extension','AlbumId.php',51],['lib/lessphp/SourceMap','Base64VLQ.php',67],['lib/lessphp/Tree/Mixin','Call.php',14],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/google/src/Google/Service','Fusiontables.php',48],['grade/report/singleview','lib.php',69],['lib/classes/lock','lock.php',55],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['blog','locallib.php',71],['blog','locallib.php',581],['blog','locallib.php',849],['blog','locallib.php',894],['blog','locallib.php',953],['blog','locallib.php',1004],['blog','locallib.php',1028],['blog','locallib.php',1038],['blog','locallib.php',1050],['blog','locallib.php',1071],['lib/zend/Zend/Gdata/Exif/Extension','Flash.php',49],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',61],['admin/webservice','lib.php',38],['lib/zend/Zend/Validate/File','FilesSize.php',60],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',46],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['lib/zend/Zend/Validate','Int.php',53],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['lib/zend/Zend/Soap','Server.php',146],['lib/zend/Zend/Gdata/Photos','PhotoEntry.php',215],['lib/zend/Zend/Service/Yahoo','LocalResult.php',111],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','GetAccountBalance.php',40],['badges/lib','backpacklib.php',40],['lib/zend/Zend/Service/Yahoo','Result.php',77],['lib/form','filemanager.php',306],['lib/lessphp/Tree','Condition.php',18],['lib/pear/PEAR','Exception.php',107],['lib/zend/Zend/Gdata/YouTube/Extension','Racy.php',45],['question/classes/bank','view.php',70],['lib/adodb','adodb.inc.php',2790],['lib/adodb','adodb.inc.php',2865],['lib/zend/Zend/Gdata/App/Extension','Text.php',45],['question/engine/upgrade/tests','helper.php',45],['lib/zend/Zend/Validate/Barcode','Ean5.php',47],['blocks/private_files','renderer.php',83],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/classes','useragent.php',115],['lib/zend/Zend/Gdata/Photos/Extension','CommentCount.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/zend/Zend/Gdata/Spreadsheets/Extension','ColCount.php',49],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/portfolio','exceptions.php',50],['lib/zend/Zend/Gdata/Calendar/Extension','QuickAdd.php',45],['lib/xmldb','xmldb_object.php',55],['lib/zend/Zend/Service','SlideShare.php',283],['webservice/amf','introspector.php',52],['question/behaviour/adaptive','behaviour.php',310],['question/behaviour','behaviourtypebase.php',133],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['course','renderer.php',52],['lib/zend/Zend/Validate','Hostname.php',315],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',249],['lib/zend/Zend/Amf','Server.php',134],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/zend/Zend/Http','Cookie.php',98],['lib/lessphp/Tree','Extend.php',28],['lib/zend/Zend/Validate','Barcode.php',75],['lib/zend/Zend/XmlRpc/Value','BigInteger.php',47],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/google/src/Google/Service','QPXExpress.php',39],['lib/zend/Zend/Server/Reflection/Function','Abstract.php',105],['lib/phpexcel/PHPExcel/Style','Color.php',72],['lib/zend/Zend/Validate/File','Hash.php',60],['backup/util/settings/root','root_backup_setting.class.php',34],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/zend/Zend/Gdata/Photos/Extension','QuotaCurrent.php',50],['lib/zend/Zend/Service/Nirvanix/Namespace','Base.php',76],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['lib/zend/Zend/Service/Technorati','DailyCountsResult.php',60],['lib/zend/Zend/Rest','Server.php',102],['lib/zend/Zend/Gdata/Photos','UserFeed.php',106],['lib/tcpdf/include/barcodes','pdf417.php',523],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/zend/Zend/Gdata/YouTube/Extension','VideoId.php',44],['lib/google/src/Google/Service','Blogger.php',50],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['lib/zend/Zend/Gdata/App/Extension','Published.php',43],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',129],['lib/zend/Zend/Gdata/Photos','AlbumEntry.php',193],['lib/zend/Zend/Gdata/Docs','DocumentListFeed.php',56],['lib/zend/Zend/Gdata/App/Extension','Icon.php',43],['lib/portfolio','plugin.php',445],['lib/zend/Zend/Gdata/Extension','OpenSearchItemsPerPage.php',44],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['lib/zend/Zend/Service/Yahoo','WebResult.php',83],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['lib/google/src/Google/Service','AdExchangeBuyer.php',46],['lib/dtl','file_xml_database_exporter.php',36],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/zend/Zend/Gdata/YouTube/Extension','Token.php',44],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',87],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',47],['lib/xmldb','xmldb_field.php',84],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',126],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceStatusRequest.php',65],['lib/google/src/Google/Service','Manager.php',57],['lib/zend/Zend/Service/Amazon','Offer.php',79],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['lib/zend/Zend/Gdata/App','FeedEntryParent.php',129],['lib/zend/Zend/Service/Technorati','KeyInfoResult.php',61],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['webservice/rest','lib.php',47],['lib/zend/Zend/Service/StrikeIron','Decorator.php',47],['lib/google/src/Google/Http','Batch.php',38],['lib/google/src/Google/Service','Reports.php',47],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['lib/zend/Zend/Gdata/Media/Extension','MediaKeywords.php',43],['repository/url','lib.php',46],['lib','xmlize.php',31],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/filebrowser','file_info_context_system.php',37],['lib/zend/Zend/Service/Amazon','Abstract.php',74],['lib/zend/Zend/Server','Definition.php',43],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/zend/Zend/Amf/Util','BinaryStream.php',53],['lib/portfolio','exporter.php',113],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/zend/Zend/Gdata/YouTube','SubscriptionFeed.php',55],['lib/alfresco/Service','SpacesStore.php',28],['repository/recent','lib.php',39],['lib/zend/Zend/Service/DeveloperGarden/IpLocation','IpAddress.php',59],['lib/zend/Zend/Validate','Regex.php',62],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',135],['lib/phpexcel/PHPExcel','ReferenceHelper.php',65],['lib','webdavlib.php',84],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['auth/cas/CAS/CAS','AuthenticationException.php',53],['lib/zend/Zend/Gdata/Gapps','NicknameQuery.php',54],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',36],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['lib/horde/framework/Horde','Domhtml.php',53],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/google/src/Google/Service','Customsearch.php',38],['lib/zend/Zend/Gdata/App','MediaFileSource.php',54],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/lessphp/Tree','Comment.php',17],['availability/tests/fixtures','mock_info.php',40],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['backup/util/ui','base_ui.class.php',84],['lib/phpexcel/PHPExcel','DocumentSecurity.php',73],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['backup/cc/cc_lib','cc_converter_lti.php',29],['lib/zend/Zend/Gdata/YouTube/Extension','Position.php',44],['lib/zend/Zend/Service/WindowsAzure/Credentials','CredentialsAbstract.php',77],['lib/zend/Zend/Soap','AutoDiscover.php',94],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['lib/phpexcel/PHPExcel','IOFactory.php',77],['lib/zend/Zend/Gdata/App/Extension','Email.php',43],['lib/zend/Zend/Gdata/Media/Extension','MediaHash.php',45],['lib/zend/Zend/Gdata/App/Extension','Element.php',42],['lib/google/src/Google/Service','Gmail.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['repository/dropbox','lib.php',49],['lib/minify/lib/Minify','Source.php',43],['backup/util/dbops','backup_dbops.class.php',37],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/google/src/Google/Service','Spectrum.php',38],['files','renderer.php',1080],['lib/zend/Zend/Validate/Barcode','Ean2.php',47],['course','lib.php',2932],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/zend/Zend/Service/Simpy','Watchlist.php',89],['lib/phpexcel/PHPExcel','Style.php',101],['lib/zend/Zend/Gdata/YouTube/Extension','CountHint.php',44],['lib/minify/lib/Minify/Cache','Memcache.php',22],['auth/db','auth.php',36],['lib/zend/Zend/Gdata/Gapps','UserQuery.php',54],['admin/roles/classes','assign_user_selector_base.php',40],['lib/zend/Zend/Gdata/Exif/Extension','Model.php',49],['lib/zend/Zend/Gdata/YouTube','PlaylistListFeed.php',55],['lib/zend/Zend/Gdata/Docs','DocumentListEntry.php',42],['mod/quiz/tests','repaginate_test.php',39],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['lib/zend/Zend/Service/Twitter','Search.php',70],['lib/zend/Zend/Server/Method','Parameter.php',59],['lib/phpunit/classes','basic_testcase.php',39],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobContainer.php',50],['lib/zend/Zend/Service/DeveloperGarden/Response/LocalSearch','LocalSearchResponse.php',50],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['mod/wiki/parser/markups','html.php',18],['lib/google/src/Google/Service','Mirror.php',49],['lib/classes/event','base.php',114],['lib/alfresco/Service','Repository.php',36],['lib/zend/Zend/Service/Technorati','CosmosResult.php',84],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',42],['lib/zend/Zend/Service/Yahoo','PageDataResult.php',47],['lib/zend/Zend/Service/WindowsAzure/Storage','Table.php',99],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceTemplateRequest.php',60],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',775],['lib/tcpdf','tcpdf_parser.php',92],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/zend/Zend/Gdata','MimeBodyString.php',49],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',55],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',92],['lib/google/src/Google/Http','MediaFileUpload.php',73],['lib/zend/Zend/XmlRpc/Client','ServerProxy.php',54],['lib','listlib.php',82],['lib','listlib.php',485],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/zend/Zend/Gdata/Health','ProfileFeed.php',49],['lib/google/src/Google/Service','Genomics.php',60],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/zend/Zend/Server/Reflection','Method.php',51],['lib/tests','medialib_test.php',631],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['lib/zend/Zend/Soap/Client','DotNet.php',43],['admin/roles/classes','allow_role_page.php',37],['backup/util/dbops','restore_dbops.class.php',1755],['lib/zend/Zend/Service/Yahoo','NewsResult.php',97],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['webservice/rest','locallib.php',40],['lib/simplepie/library/SimplePie','Sanitize.php',75],['lib','uploadlib.php',40],['lib/zend/Zend/Gdata','Health.php',109],['lib','questionlib.php',1269],['lib','questionlib.php',1513],['lib/dml','oci_native_moodle_recordset.php',34],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveParticipantRequest.php',53],['lib/zend/Zend/XmlRpc/Value','String.php',38],['lib/zend/Zend/Gdata/Calendar/Extension','AccessLevel.php',45],['lib/ddl','database_manager.php',48],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CreateConferenceTemplateRequest.php',60],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib/dtl','database_exporter.php',55],['mod/workshop/form/accumulative','lib.php',99],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib/zend/Zend/Validate','Float.php',53],['lib/zend/Zend/Gdata/Gapps/Extension','EmailList.php',59],['cache/classes','interfaces.php',473],['lib/zend/Zend/Gdata/App/Extension','Edited.php',43],['lib/zend/Zend/Gdata/Gapps','UserEntry.php',103],['lib/lessphp/Tree','Element.php',19],['lib','moodlelib.php',9143],['lib','moodlelib.php',9354],['repository/picasa','lib.php',41],['webservice/soap','lib.php',42],['lib/zend/Zend/Gdata/Calendar','EventEntry.php',71],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',98],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/zend/Zend/Service/WindowsAzure/RetryPolicy','RetryN.php',56],['lib/dml','moodle_temptables.php',51],['lib/zend/Zend/Gdata/Media/Extension','MediaContent.php',116],['lib/zend/Zend/Gdata/Gapps','EmailListEntry.php',80],['admin/roles/classes','allow_assign_page.php',31],['lib/zend/Zend/Gdata','Books.php',80],['lib/zend/Zend/Amf/Value','MessageHeader.php',64],['lib/zend/Zend/Validate','GreaterThan.php',59],['lib/zend/Zend/Gdata/YouTube/Extension','PlaylistId.php',44],['calendar/classes','rrule_manager.php',182],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',45],['lib/zend/Zend/Service/ReCaptcha','Response.php',53],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',106],['lib/zend/Zend/Amf/Value/Messaging','RemotingMessage.php',58],['lib/tcpdf','tcpdf.php',1822],['lib/zend/Zend/Gdata/YouTube/Extension','Username.php',44],['lib/zend/Zend/Gdata/Photos/Extension','Version.php',51],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/zend/Zend/Service/WindowsAzure/Storage','Batch.php',77],['lib/mustache/src/Mustache','Engine.php',61],['lib/xmldb','xmldb_structure.php',40],['lib/zend/Zend/Gdata/Photos','TagEntry.php',61],['webservice/amf','locallib.php',41],['webservice/amf','locallib.php',60],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['question/type/numerical/tests','form_test.php',40],['lib/google/src/Google/Service','IdentityToolkit.php',38],['comment','locallib.php',39],['lib/zend/Zend/Gdata/Extension','Comments.php',50],['lib/google/src/Google/Service','Resource.php',60],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/zend/Zend/Gdata/YouTube/Extension','Recorded.php',44],['lib/zend/Zend/Amf/Request','Http.php',46],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['question/engine/upgrade','behaviourconverters.php',78],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantDetail.php',62],['repository/s3','lib.php',39],['lib/minify/lib/MrClay','Cli.php',74],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/zend/Zend/Gdata/App','HttpException.php',51],['lib/zend/Zend/Soap/Client','Common.php',40],['lib/google/src/Google/Service','Dfareporting.php',45],['lib/lessphp/Output','Mapped.php',39],['lib/classes/output','notification.php',66],['lib/google/src/Google/Service','PlusDomains.php',72],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/editor/tinymce','adminlib.php',36],['lib/zend/Zend/Service/Amazon/Ec2','Exception.php',41],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',52],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',846],['lib/xmldb','xmldb_key.php',43],['user/filters','checkbox.php',51],['lib/phpexcel/PHPExcel/Reader','SYLK.php',75],['question/type/numerical','questiontype.php',507],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/zend/Zend/Gdata/App/Extension','Control.php',50],['lib/minify/lib','FirePHP.php',189],['lib/lessphp/Tree/Mixin','Definition.php',18],['lib/zend/Zend/Service/Yahoo','LocalResultSet.php',61],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['admin/tool/langimport/classes','controller.php',48],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['lib/horde/framework/Horde/Stream','String.php',27],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',454],['lib/horde/framework/Horde/Stream','Temp.php',25],['lib/alfresco/Service','VersionHistory.php',34],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceSchedule.php',81],['mod/quiz/classes','repaginate.php',49],['lib/zend/Zend/Validate','Isbn.php',65],['lib/zend/Zend/Service/Amazon','Image.php',55],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['lib/classes/lock','db_record_lock_factory.php',61],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/zend/Zend/Gdata/Spreadsheets/Extension','Cell.php',76],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['lib/horde/framework/Horde/Text','Flowed.php',75],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/zend/Zend/Gdata/Gapps/Extension','Login.php',111],['mod/workshop/form/rubric','lib.php',105],['cohort','locallib.php',37],['cohort','locallib.php',101],['lib/zend/Zend/XmlRpc/Value','DateTime.php',53],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueMessage.php',52],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/zend/Zend/Amf/Parse','Serializer.php',40],['lib/google/src/Google/Service','GroupsMigration.php',38],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['lib/zend/Zend/Gdata/Gapps','ServiceException.php',61],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/zend/Zend/XmlRpc','Fault.php',100],['lib/zend/Zend/Gdata','Photos.php',124],['question/type/calculated','datasetdefinitions_form.php',53],['lib/phpexcel/PHPExcel/Reader','Excel5.php',424],['question/type/shortanswer','question.php',43],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/zend/Zend/Service','LiveDocx.php',67],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/google/src/Google/Auth','AppIdentity.php',38],['lib/zend/Zend/Gdata/Exif/Extension','FocalLength.php',49],['lib/zend/Zend/Gdata/App/Extension','Id.php',43],['lib/zend/Zend/Gdata/Books/Extension','PreviewLink.php',42],['mod/chat','locallib.php',179],['mod/chat','locallib.php',227],['lib/google/src/Google/Service','Licensing.php',38],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['lib/zend/Zend/Server/Method','Definition.php',64],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetParticipantStatusRequest.php',53],['question/classes/bank','column_base.php',44],['lib/zend/Zend/XmlRpc/Server','Fault.php',67],['lib/zend/Zend/Amf/Value/Messaging','AcknowledgeMessage.php',40],['grade/report/singleview/classes/local/ui','range.php',38],['lib/zend/Zend/Gdata/Books/Extension','Viewability.php',45],['mod/book','locallib.php',405],['lib/zend/Zend/XmlRpc/Value','Array.php',39],['lib/zend/Zend/Service/Technorati','Result.php',63],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceTemplateRequest.php',46],['lib/zend/Zend/Gdata/Exif/Extension','Exposure.php',49],['lib/zend/Zend/Gdata/Exif','Feed.php',58],['question/type/randomsamatch/tests','helper.php',121],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/zend/Zend/Gdata/Spreadsheets','CellEntry.php',49],['lib/zend/Zend/Gdata/Photos/Extension','PhotoId.php',49],['lib/zend/Zend/Http/Response','Stream.php',120],['lib','modinfolib.php',429],['lib','modinfolib.php',1680],['lib','modinfolib.php',2516],['lib/dtl','database_importer.php',61],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['lib/zend/Zend/Gdata/Exif/Extension','Iso.php',49],['lib/zend/Zend/Gdata/YouTube','VideoQuery.php',48],['lib/lessphp/Tree','Variable.php',20],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['lib/google/src/Google/Signer','P12.php',33],['lib/lessphp/Tree','DetachedRuleset.php',15],['lib/zend/Zend/Gdata/YouTube','SubscriptionEntry.php',138],['lib/zend/Zend/Http/Client/Adapter','Test.php',81],['','mdeploy.php',120],['lib/ddl','sqlite_sql_generator.php',73],['lib/google/src/Google/Service','Drive.php',70],['mod/quiz/classes','admin_review_setting.php',82],['lib','pdflib.php',161],['lib/zend/Zend/Gdata/YouTube/Extension','Duration.php',45],['mod/quiz/report','attemptsreport_options.php',95],['lib/zend/Zend/Validate/File','Md5.php',60],['backup/util/helper','restore_questions_parser_processor.class.php',42],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/filebrowser','file_info_context_coursecat.php',39],['badges','renderer.php',972],['badges','renderer.php',1013],['badges','renderer.php',1077],['badges','renderer.php',1110],['badges','renderer.php',1136],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['lib/zend/Zend/Gdata/Gapps/Extension','Nickname.php',59],['lib/zend/Zend/Gdata/YouTube/Extension','MediaRating.php',54],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['mnet/xmlrpc','serverlib.php',674],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/simplepie/library/SimplePie','gzdecode.php',186],['lib/jabber/XMPP','Roster.php',48],['lib/classes/dml','recordset_walk.php',64],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',129],['lib/google/src/Google/Service','Books.php',57],['mod/assign/feedback/offline','importgradeslib.php',60],['lib/zend/Zend/Gdata','App.php',165],['lib/pear/Net','GeoIP.php',323],['lib/zend/Zend/Gdata/Photos/Extension','Name.php',50],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['lib/zend/Zend/Gdata/Docs','Query.php',75],['lib/zend/Zend/Gdata/YouTube/Extension','Occupation.php',44],['lib/zend/Zend/Gdata/Exif/Extension','Time.php',49],['cache/tests/fixtures','lib.php',325],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['lib/google/src/Google/Cache','Memcache.php',42],['lib/dml','sqlsrv_native_moodle_database.php',47],['backup/util/structure','backup_optigroup_element.class.php',51],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/simplepie/library/SimplePie','Caption.php',98],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['lib/classes','collator.php',58],['lib/zend/Zend/Service/Delicious','PostList.php',56],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/zend/Zend/Service/Amazon/Ec2','Abstract.php',91],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['mod/workshop/form/numerrors','lib.php',102],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateRequest.php',46],['report/log/classes','table_log.php',52],['lib/zend/Zend/Gdata/YouTube','CommentEntry.php',48],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/zend/Zend/Gdata/YouTube/Extension','Status.php',44],['lib/adodb','adodb-exceptions.inc.php',28],['backup/util/helper','backup_array_iterator.class.php',39],['lib/zend/Zend/Rest','Client.php',54],['lib/zend/Zend/Gdata/YouTube/Extension','Company.php',44],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceTemplateParticipantRequest.php',53],['question/engine','lib.php',770],['question/engine','lib.php',1000],['question/engine','lib.php',1048],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/google/src/Google/Service','Bigquery.php',59],['backup/moodle2','restore_course_task.class.php',41],['lib/zend/Zend/Gdata/Media/Extension','MediaRestriction.php',54],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/phpexcel/PHPExcel/Writer','CSV.php',86],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['cache','disabledlib.php',44],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['webservice/xmlrpc','locallib.php',85],['lib/google/src/Google/Service','Freebase.php',38],['mod/lti/service/profile/classes/local/service','profile.php',41],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['backup/util/settings','backup_setting.class.php',43],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/alfresco/Service','ContentData.php',38],['enrol/ldap','lib.php',36],['lib/zend/Zend/Validate/File','MimeType.php',112],['lib/zend/Zend/Gdata/Gbase/Extension','BaseAttribute.php',47],['lib/zend/Zend/Gdata/Gapps','NicknameEntry.php',79],['lib/minify/lib/Minify','HTML.php',49],['lib/zend/Zend/Gdata/Extension','OriginalEvent.php',56],['lib/zend/Zend/Gdata/YouTube','InboxFeed.php',55],['lib/google/src/Google/Service','Groupssettings.php',40],['availability/classes','info.php',55],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['lib/tests','navigationlib_test.php',472],['lib/tests','navigationlib_test.php',530],['lib/tests','navigationlib_test.php',557],['lib/zend/Zend/Service/DeveloperGarden/Request/IpLocation','LocateIPRequest.php',58],['mod/quiz/report/statistics/classes','calculated.php',43],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['cache/stores/memcached','lib.php',107],['lib/zend/Zend/Validate','Between.php',89],['lib/zend/Zend/Gdata/Media/Extension','MediaGroup.php',183],['user/selector','lib.php',85],['user/selector','lib.php',674],['lib/google/src/Google/Service','YouTube.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/zend/Zend/Gdata','Exif.php',51],['backup/util/helper','backup_helper.class.php',380],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',154],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',71],['lib/zend/Zend/Gdata','YouTube.php',192],['lib/zend/Zend/Gdata/Calendar/Extension','Link.php',48],['blocks','edit_form.php',47],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign','locallib.php',149],['mod/assign','locallib.php',7411],['grade/report/user','lib.php',188],['lib/zend/Zend/Validate/Barcode','Code93ext.php',47],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','ChangeQuotaPool.php',47],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',294],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['lib/zend/Zend/Gdata','Media.php',51],['lib/zend/Zend/Gdata/Gapps/Extension','Quota.php',59],['lib/zend/Zend/Amf/Value','ByteArray.php',38],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/behat/form_field','behat_form_field.php',59],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['backup/moodle2','restore_subplugin.class.php',45],['lib/zend/Zend/Gdata/Spreadsheets','SpreadsheetFeed.php',54],['backup/util/structure','base_processor.class.php',49],['lib/zend/Zend/Gdata/Calendar/Extension','Timezone.php',45],['lib/zend/Zend/Validate','Ip.php',56],['lib/zend/Zend/Gdata/Extension','OpenSearchTotalResults.php',44],['badges/criteria','award_criteria_activity.php',45],['lib/zend/Zend/Service/Technorati','DailyCountsResultSet.php',67],['lib/zend/Zend/XmlRpc/Value','Collection.php',40],['lib/google/src/Google/Service','Coordinate.php',47],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['lib/classes/output','mustache_pix_helper.php',43],['lib/zend/Zend/Amf/Value','MessageBody.php',81],['user/classes/output/myprofile','node.php',82],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['lib/zend/Zend','Registry.php',186],['lib/lessphp/Exception','Chunk.php',19],['lib/dtl','database_mover.php',33],['lib/zend/Zend/Http','CookieJar.php',106],['lib/zend/Zend/Gdata/Extension','Transparency.php',44],['lib/zend/Zend/Gdata/Media/Extension','MediaText.php',64],['lib/phpexcel/PHPExcel/RichText','TextElement.php',43],['lib/simplepie/library/SimplePie','Enclosure.php',219],['lib/google/src/Google/Service','Webmasters.php',46],['lib/lessphp/Tree','Value.php',14],['lib/simplepie/library','SimplePie.php',611],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/zend/Zend/Gdata/App','CaptchaRequiredException.php',64],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['mod/folder','renderer.php',139],['lib/google/src/Google/Service','Webfonts.php',38],['lib/zend/Zend/Gdata/DublinCore/Extension','Description.php',44],['admin/roles/classes','admins_potential_selector.php',30],['lib/zend/Zend/Soap/Client','Local.php',52],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/lessphp/Tree','Negative.php',14],['mod/quiz','override_form.php',58],['lib/classes/session','file.php',40],['lib/google/src/Google/Auth','OAuth2.php',55],['admin/roles/classes','check_users_selector.php',38],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/alfresco/Service','Store.php',31],['lib/google/src/Google/Service','Audit.php',39],['lib/zend/Zend/Gdata','Gbase.php',95],['mod/wiki','pagelib.php',94],['mod/wiki','pagelib.php',381],['mod/wiki','pagelib.php',986],['mod/wiki','pagelib.php',1195],['mod/wiki','pagelib.php',2201],['mod/wiki','pagelib.php',2429],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['calendar','lib.php',1968],['calendar','lib.php',2709],['lib/zend/Zend/Gdata/Photos','AlbumFeed.php',133],['lib/phpmailer','class.phpmailer.php',572],['lib/google/src/Google/Service','Datastore.php',46],['lib/google/src/Google/Service','YouTubeAnalytics.php',45],['lib/lessphp/Tree','Keyword.php',17],['lib/zend/Zend/Service/Amazon','Sqs.php',70],['backup/util/plan','backup_structure_step.class.php',38],['availability/condition/profile/classes','condition.php',73],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/simplepie/library/SimplePie','Author.php',81],['report/loglive/classes','table_log.php',50],['lib','completionlib.php',243],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/zend/Zend/Gdata/Exif/Extension','Make.php',49],['lib/dml','moodle_database.php',139],['lib/lessphp/Tree','Media.php',18],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes/update','info.php',48],['backup/moodle2','backup_subplugin.class.php',44],['backup/util/ui','base_moodleform.class.php',68],['lib/zend/Zend/Gdata/DublinCore/Extension','Creator.php',44],['lib/alfresco/Service','Association.php',28],['lib/zend/Zend/Gdata/Geo/Extension','GeoRssWhere.php',62],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/zend/Zend/Service','Twitter.php',125],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['admin/tool/log/classes/log','store.php',30],['lib/phpexcel/PHPExcel','Comment.php',101],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CommitConferenceRequest.php',46],['filter','local_settings_form.php',33],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['badges/classes','assertion.php',49],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateParticipantRequest.php',67],['lib/phpexcel/PHPExcel','RichText.php',45],['lib/zend/Zend/Gdata/App','Base.php',111],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/filestorage','file_storage.php',57],['lib/adodb/drivers','adodb-postgres64.inc.php',125],['lib/adodb/drivers','adodb-postgres64.inc.php',904],['lib/phpexcel/PHPExcel/Chart','Title.php',53],['lib/zend/Zend/Mime','Part.php',51],['lib/phpexcel/PHPExcel','Worksheet.php',335],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',78],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/zend/Zend/Gdata/DublinCore/Extension','Language.php',44],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',77],['lib/alfresco/Service/WebService','AlfrescoWebService.php',30],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['lib/google/src/Google/Service','ShoppingContent.php',47],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib/zend/Zend/Gdata/Spreadsheets','ListQuery.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['mod/workshop/allocation/scheduled','lib.php',48],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib/zend/Zend/Gdata/Spreadsheets','ListEntry.php',62],['repository/merlot','lib.php',37],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/lessphp/Visitor','extendFinder.php',15],['lib/zend/Zend/Gdata/YouTube/Extension','MediaGroup.php',112],['mod/quiz/report/grading','gradingsettings_form.php',44],['lib/zend/Zend/Service/Simpy','Note.php',104],['lib/zend/Zend/Gdata/Photos/Extension','Rotation.php',51],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',89],['lib/editor/tinymce/classes','plugin.php',49],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/zend/Zend/XmlRpc/Value','Integer.php',40],['lib/zend/Zend/Validate/File','Upload.php',74],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',201],['admin/roles/classes','capability_table_with_risks.php',46],['lib/zend/Zend/Gdata/Extension','EntryLink.php',52],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib','outputrequirementslib.php',166],['lib/google/src/Google/Service','Appsactivity.php',49],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/zend/Zend/Loader','Autoloader.php',446],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/zend/Zend/Gdata','Docs.php',87],['lib/alfresco/Service/Logger','Logger.php',27],['lib/zend/Zend/Gdata/App/Extension','Logo.php',43],['lib/dml','pgsql_native_moodle_recordset.php',44],['backup/cc/cc_lib','cc_version11.php',57],['lib','weblib.php',315],['lib','weblib.php',3025],['lib','weblib.php',3325],['lib','weblib.php',3360],['lib','weblib.php',3435],['backup/cc/cc_lib','xmlbase.php',52],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['mod/lesson','locallib.php',2007],['mod/lesson','locallib.php',2602],['lib/zend/Zend/Service/LiveDocx','MailMerge.php',61],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',101],['lib/zend/Zend/Server/Reflection','ReturnValue.php',47],['lib/minify/lib/Minify','Build.php',77],['lib/horde/framework/Horde','Variables.php',60],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/phpexcel/PHPExcel','NamedRange.php',73],['lib/zend/Zend/Gdata/Extension','OpenSearchStartIndex.php',44],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['lib/zend/Zend/Service/Amazon','OfferSet.php',79],['grade/export/txt','grade_export_txt.php',27],['admin/roles/classes','allow_override_page.php',31],['lib/lessphp/Tree','Assignment.php',15],['lib/zend/Zend/Gdata/Books/Extension','ThumbnailLink.php',42],['lib/zend/Zend/Gdata/YouTube/Extension','Uploaded.php',44],['lib/zend/Zend/Gdata/Extension','AttendeeStatus.php',44],['lib/tcpdf/include/barcodes','qrcode.php',631],['lib/zend/Zend/Gdata/Photos/Extension','Weight.php',51],['enrol','locallib.php',125],['enrol','locallib.php',1240],['enrol','locallib.php',1363],['enrol','locallib.php',1414],['enrol','locallib.php',1447],['lib/lessphp/Visitor','toCSS.php',13],['question/classes/statistics/questions','calculator.php',66],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['backup/util/helper','restore_prechecks_helper.class.php',213],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',605],['grade/edit/tree','lib.php',638],['grade/edit/tree','lib.php',804],['lib/zend/Zend/Gdata','Geo.php',56],['lib/zend/Zend/Gdata/Books','CollectionFeed.php',41],['lib/classes','string_manager_standard.php',53],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',163],['admin/tool/installaddon/classes','validator.php',223],['admin/tool/generator/classes','backend.php',84],['lib/zend/Zend/Service/WindowsAzure/Credentials','SharedAccessSignature.php',53],['lib/zend/Zend/Gdata/Spreadsheets/Extension','Custom.php',49],['availability/condition/completion/classes','condition.php',48],['question/classes/statistics/questions','calculated.php',181],['lib/lessphp/Tree','Javascript.php',20],['mod/quiz','locallib.php',1898],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',89],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',62],['lib/zend/Zend/Gdata/DublinCore/Extension','Date.php',45],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['lib/zend/Zend/Loader','PluginLoader.php',95],['lib/zend/Zend/Gdata/YouTube/Extension','Description.php',44],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/zend/Zend/Gdata/App/Extension','Generator.php',45],['lib/zend/Zend/Gdata/DublinCore/Extension','Rights.php',44],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['repository/skydrive','lib.php',42],['lib/google/src/Google/Service','SQLAdmin.php',48],['lib/zend/Zend/Gdata/YouTube/Extension','NoEmbed.php',44],['lib/zend/Zend/Gdata/Exif/Extension','ImageUniqueId.php',49],['lib/simplepie/library/SimplePie','Item.php',82],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',214],['lib/zend/Zend/Validate/File','IsImage.php',53],['lib/zend/Zend/Date','Exception.php',39],['lib/zend/Zend/Amf/Adobe','Introspector.php',65],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/zend/Zend/Service','ReCaptcha.php',117],['lib/zend/Zend/Gdata/Health','ProfileEntry.php',61],['lib/zend/Zend/Server/Reflection','Prototype.php',45],['admin/roles/classes','allow_switch_page.php',33],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',140],['lib/google/src/Google/Service','Fitness.php',57],['filter/emoticon/tests','filter_test.php',68],['backup/util/helper','convert_helper.class.php',378],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['repository/webdav','lib.php',38],['repository/dropbox','locallib.php',46],['lib/lessphp/Exception','Parser.php',30],['lib/filestorage','tgz_packer.php',726],['lib/filestorage','tgz_packer.php',808],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['lib/classes/output','mustache_javascript_helper.php',40],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/zend/Zend/Gdata/YouTube/Extension','FirstName.php',44],['lib/zend/Zend/Service/WindowsAzure/Storage','Queue.php',83],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/zend/Zend/Gdata/Media/Extension','MediaDescription.php',53],['lib/google/src/Google/Service','TagManager.php',66],['lib/zend/Zend/Server','Abstract.php',89],['cache/classes','config.php',80],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',579],['lib','outputcomponents.php',655],['lib','outputcomponents.php',773],['lib','outputcomponents.php',915],['lib','outputcomponents.php',999],['lib','outputcomponents.php',2178],['lib','outputcomponents.php',2217],['lib','outputcomponents.php',2290],['lib','outputcomponents.php',2371],['lib','outputcomponents.php',2574],['lib','outputcomponents.php',2622],['lib','outputcomponents.php',2682],['lib','outputcomponents.php',2855],['lib','outputcomponents.php',3025],['lib','outputcomponents.php',3129],['lib','outputcomponents.php',3196],['lib','outputcomponents.php',3324],['lib','outputcomponents.php',3608],['lib','outputcomponents.php',3637],['lib','outputcomponents.php',3663],['lib','outputcomponents.php',3685],['lib','outputcomponents.php',3714],['lib','outputcomponents.php',3746],['lib/zend/Zend/Validate/Barcode','Code25.php',53],['lib/zend/Zend/Gdata/YouTube','CommentFeed.php',53],['lib/dtl','string_xml_database_importer.php',34],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/simplepie/library/SimplePie','Cache.php',69],['backup/util/ui','renderer.php',813],['grade/export/xls','grade_export_xls.php',24],['lib/google/src/Google/Service','Directory.php',110],['lib/zend/Zend/Gdata/YouTube/Extension','State.php',47],['lib/phpexcel/PHPExcel/Style','Alignment.php',97],['mod/quiz/report/statistics','statistics_table.php',45],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/zend/Zend/Gdata/DublinCore/Extension','Title.php',44],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib/zend/Zend/Validate/Barcode','Code93.php',67],['lib/lessphp','Functions.php',15],['lib/adodb/drivers','adodb-postgres7.inc.php',78],['lib/adodb/drivers','adodb-postgres7.inc.php',273],['lib/adodb/drivers','adodb-postgres7.inc.php',304],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetRunningConferenceRequest.php',46],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceRequest.php',74],['lib/zend/Zend/Validate','EmailAddress.php',118],['mod/workshop','locallib.php',178],['mod/workshop','locallib.php',2801],['mod/workshop','locallib.php',3236],['mod/workshop','locallib.php',3472],['mod/workshop','locallib.php',3714],['mod/workshop','locallib.php',3800],['mod/workshop','locallib.php',3885],['mod/workshop','locallib.php',3904],['lib/zend/Zend/XmlRpc/Value','Struct.php',39],['lib/zend/Zend/Gdata/Books/Extension','Embeddability.php',45],['lib/horde/framework/Horde/Mime','Mdn.php',35],['cache/stores/static','lib.php',127],['lib','blocklib.php',54],['lib','blocklib.php',152],['lib/zend/Zend/Gdata/Books/Extension','Review.php',46],['lib','componentlib.class.php',597],['lib','componentlib.class.php',821],['lib/zend/Zend/Validate/Barcode','Code39.php',66],['lib/filebrowser','file_info_context_module.php',47],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',42],['question/engine','states.php',61],['lib/jabber/XMPP','XMLStream.php',171],['lib/jabber/XMPP','XMPP.php',101],['lib/classes/lock','lock_factory.php',39],['lib/tests','collator_test.php',310],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['course/format','lib.php',78],['lib/ddl','sql_generator.php',175],['lib/zend/Zend/XmlRpc/Generator','GeneratorAbstract.php',35],['mod/quiz','accessmanager.php',45],['lib/zend/Zend/Amf/Value','TraitsInfo.php',53],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['lib/zend/Zend/Service/Nirvanix','Response.php',43],['lib','boxlib.php',293],['repository/flickr_public','image.php',34],['lib/google/src/Google/Service','AppState.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/filestorage','zip_archive.php',66],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/zend/Zend/Server/Method','Prototype.php',49],['lib/zend/Zend/Service/Technorati','Author.php',90],['mod/workshop/form/comments','lib.php',99],['lib/phpexcel/PHPExcel/RichText','Run.php',43],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',89],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',69],['lib/zend/Zend/Service/Simpy','WatchlistFilter.php',48],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceRequest.php',46],['lib/zend/Zend/Gdata/Photos','UserEntry.php',131],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['lib/zend/Zend/Gdata/Spreadsheets','ListFeed.php',54],['lib/phpexcel/PHPExcel','DocumentProperties.php',131],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',62],['lib/lessphp/Tree','Paren.php',14],['lib/zend/Zend/Gdata/Photos/Extension','Thumbnail.php',50],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['lib/filebrowser','file_info_context_user.php',39],['lib/google/src/Google/Service','CivicInfo.php',40],['lib/zend/Zend/Gdata/YouTube/Extension','Private.php',44],['lib/zend/Zend/Gdata/YouTube/Extension','Music.php',44],['backup/moodle2','restore_block_task.class.php',45],['lib/zend/Zend','Gdata.php',99],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/phpunit/classes','hint_resultprinter.php',37],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['admin/roles/classes','capability_table_base.php',51],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['lib/google/src/Google/Service','Container.php',44],['lib/zend/Zend/Service/Simpy','TagSet.php',47],['lib/phpexcel/PHPExcel/Chart','Legend.php',82],['question/type/calculated/tests','helper.php',205],['lib/phpexcel/PHPExcel/Reader','CSV.php',103],['availability/classes','result.php',46],['lib/zend/Zend/XmlRpc/Value','Double.php',40],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',462],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1700],['lib/horde/framework/Horde/Mime','Related.php',32],['report/log/classes','renderable.php',93],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/phpexcel/PHPExcel/Style','Font.php',108],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['course/tests/fixtures','course_capability_assignment.php',60],['lib/zend/Zend/Service/Amazon','ResultSet.php',68],['lib/zend/Zend/Validate','Callback.php',69],['lib/zend/Zend/Gdata/Books','CollectionEntry.php',41],['lib/zend/Zend/Gdata/DublinCore/Extension','Publisher.php',44],['lib/zend/Zend/Gdata/Spreadsheets','WorksheetEntry.php',56],['badges/lib','bakerlib.php',52],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['lib/portfolio','caller.php',67],['lib/zend/Zend/Validate/File','Sha1.php',60],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/zend/Zend/Gdata/Media','Feed.php',58],['lib/zend/Zend/Gdata/YouTube/Extension','LastName.php',44],['mod/data','locallib.php',64],['mod/data','locallib.php',431],['lib/zend/Zend/Gdata/App/Extension','Content.php',44],['lib/classes/update','checker_exception.php',37],['backup/cc/cc_lib','cc_manifest.php',45],['lib','odslib.class.php',42],['lib','odslib.class.php',121],['lib','odslib.class.php',419],['lib','odslib.class.php',824],['lib/zend/Zend/Gdata/Books/Extension','AnnotationLink.php',42],['lib/zend/Zend/Gdata/Calendar/Extension','Color.php',46],['backup/util/helper','restore_structure_parser_processor.class.php',41],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/alfresco/Service','Session.php',39],['grade/report/singleview/classes/local/ui','empty_element.php',38],['enrol/database','settingslib.php',34],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',125],['lib/google/src/Google/Service','AndroidPublisher.php',51],['lib/zend/Zend/Service','StrikeIron.php',43],['lib/zend/Zend/Gdata/Books/Extension','InfoLink.php',41],['lib/lessphp/SourceMap','Generator.php',82],['filter/urltolink/tests','filter_test.php',209],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/zend/Zend/Service/Amazon','Item.php',112],['repository','lib.php',116],['repository','lib.php',533],['admin/roles/classes','define_role_table_basic.php',31],['lib/phpexcel/PHPExcel','WorksheetIterator.php',54],['lib/zend/Zend/Gdata/Photos/Extension','NumPhotosRemaining.php',50],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',505],['mod/quiz','attemptlib.php',2058],['mod/quiz','attemptlib.php',2113],['lib/zend/Zend/Server/Reflection','Node.php',51],['lib/zend/Zend/Gdata/Media/Extension','MediaTitle.php',49],['lib/zend/Zend','Date.php',123],['lib/zend/Zend','Mime.php',290],['lib','accesslib.php',5301],['lib','accesslib.php',5846],['lib','accesslib.php',6116],['lib','accesslib.php',6357],['lib','accesslib.php',6544],['lib','accesslib.php',6776],['lib','accesslib.php',6998],['lib','accesslib.php',7240],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1180],['lib/zend/Zend/Validate','Ccnum.php',62],['lib/zend/Zend/Gdata/Extension','EventStatus.php',44],['lib/google/src/Google/Verifier','Pem.php',29],['lib/zend/Zend/Service/Technorati','BlogInfoResult.php',74],['admin/tool/log/classes','setting_managestores.php',30],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['backup/util/ui','restore_moodleform.class.php',34],['grade/report/singleview/classes/local/ui','element.php',47],['mod/quiz/report','attemptsreport_table.php',76],['lib/lessphp/Tree','Attribute.php',16],['lib/phpexcel/PHPExcel/Style','Supervisor.php',52],['lib/zend/Zend/Gdata/Media/Extension','MediaCategory.php',50],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/zend/Zend/Gdata/Photos/Extension','Checksum.php',51],['lib/lessphp/Tree','Expression.php',16],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['course/format','renderer.php',44],['lib/zend/Zend/XmlRpc/Value','Boolean.php',40],['blocks/rss_client','editfeed.php',36],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['question/type/numerical','question.php',321],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['lib/typo3','class.t3lib_cs.php',509],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/zend/Zend/Gdata/Health','ProfileListEntry.php',49],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['cache/stores/memcache','lib.php',120],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['lib/zend/Zend/Gdata/Calendar/Extension','WebContent.php',47],['lib/zend/Zend/Gdata/Photos/Extension','Id.php',50],['lib/google/src/Google/Service','Games.php',60],['lib/zend/Zend/Validate/File','Size.php',92],['lib/classes/lock','file_lock_factory.php',57],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',64],['lib','filelib.php',2700],['lib','filelib.php',3560],['lib/classes/session','database.php',52],['lib/zend/Zend/Gdata/YouTube/Extension','Movies.php',44],['grade','lib.php',103],['grade','lib.php',785],['availability/condition/grouping/classes','condition.php',46],['lib/zend/Zend/Service/Technorati','SearchResult.php',84],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/zend/Zend/XmlRpc','Server.php',186],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/htmlpurifier','HTMLPurifier.php',104],['lib/zend/Zend/Gdata/Media/Extension','MediaPlayer.php',59],['lib/phpexcel/PHPExcel','Cell.php',122],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',248],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['backup/util/helper','restore_log_rule.class.php',62],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',108],['lib/zend/Zend/Server/Reflection','Class.php',66],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['repository/flickr','lib.php',51],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/google/src/Google/Service','MapsEngine.php',66],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['lib/filestorage','tgz_extractor.php',119],['lib/zend/Zend/Soap','Client.php',142],['lib/zend/Zend/Gdata/Calendar/Extension','Hidden.php',45],['cache/classes','factory.php',149],['lib/zend/Zend/Gdata/Media/Extension','MediaCredit.php',54],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['mod/lti/classes/local/ltiservice','resource_base.php',62],['lib/zend/Zend/Http','Response.php',132],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceListRequest.php',63],['backup/util/ui','backup_moodleform.class.php',41],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['comment','lib.php',100],['lib/phpexcel','PHPExcel.php',354],['grade/export/ods','grade_export_ods.php',24],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/zend/Zend/Gdata/YouTube/Extension','Location.php',44],['lib/lessphp/Tree','Dimension.php',15],['lib/phpexcel/PHPExcel/Worksheet','Row.php',54],['lib/phpexcel/PHPExcel/Writer','HTML.php',135],['lib/zend/Zend/Service/Technorati','TagsResultSet.php',41],['backup/moodle2','backup_theme_plugin.class.php',61],['lib/zend/Zend/Gdata','Extension.php',43],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['mod/forum/classes','subscriber_selector_base.php',53],['lib/zend/Zend','Auth.php',45],['lib/phpexcel/PHPExcel/Style','Borders.php',121],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CreateConferenceRequest.php',67],['lib/zend/Zend/Gdata/Calendar','ListFeed.php',54],['lib/zend/Zend/Gdata/Extension','Visibility.php',44],['webservice/xmlrpc','lib.php',42],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',76],['lib/zend/Zend/Gdata/App','MediaEntry.php',57],['lib/horde/framework/Horde/Mime','Part.php',261],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['question/classes/engine/variants','least_used_strategy.php',51],['lib/horde/framework/Horde/Support','Array.php',21],['lib/zend/Zend/Gdata/YouTube/Extension','Statistics.php',93],['lib/zend/Zend/Gdata/Photos/Extension','BytesUsed.php',50],['lib','tablelib.php',127],['lib','tablelib.php',1400],['lib','tablelib.php',1723],['lib/zend/Zend/Gdata/App/Extension','Uri.php',43],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/zend/Zend/Gdata/Media/Extension','MediaCopyright.php',53],['lib/zend/Zend/Gdata/DublinCore/Extension','Identifier.php',44],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/zend/Zend/Gdata/Gbase','Feed.php',49],['availability/condition/date/classes','condition.php',52],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['admin/tool/generator/classes','course_backend.php',116],['lib/google/src/Google/Service','Prediction.php',51],['cache/stores/session','lib.php',131],['cache/classes','dummystore.php',62],['lib/zend/Zend/XmlRpc/Server','System.php',39],['lib/zend/Zend/Service/WindowsAzure/Storage','TableInstance.php',50],['backup/util/settings/course','course_backup_setting.class.php',25],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['mod/lesson','override_form.php',58],['lib/zend/Zend/Service/Simpy','WatchlistSet.php',47],['lib/google/src/Google/Service','Compute.php',78],['badges/criteria','award_criteria.php',127],['lib/zend/Zend/Gdata/Calendar/Extension','Selected.php',45],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['lib/zend/Zend/Validate','PostCode.php',65],['lib/dml','oci_native_moodle_temptables.php',40],['lib/zend/Zend/Gdata/Photos/Extension','CommentingEnabled.php',51],['lib/simplepie/library/SimplePie','Category.php',81],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',45],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['user/classes/output/myprofile','category.php',68],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['mod/wiki/parser','parser.php',98],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['repository/googledocs','lib.php',65],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/zend/Zend/Validate/File','Extension.php',71],['mod/imscp','locallib.php',289],['lib/classes/session','memcache.php',50],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/zend/Zend/Service','Simpy.php',53],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/zend/Zend/Gdata/Gapps','EmailListRecipientQuery.php',54],['lib/zend/Zend/Gdata/YouTube','PlaylistVideoEntry.php',55],['lib/zend/Zend/Gdata/Photos','CommentEntry.php',85],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/zend/Zend/Gdata/YouTube','InboxEntry.php',92],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/phpexcel/PHPExcel/Style','Border.php',75],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateParticipantRequest.php',53],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['lib/zend/Zend/Gdata/Exif/Extension','Distance.php',49],['lib/phpexcel/PHPExcel/Writer','PDF.php',46],['lib/zend/Zend/Gdata/Photos/Extension','Size.php',50],['lib/google/src/Google/Service','CloudMonitoring.php',42],['backup/util/xml/output','memory_xml_output.class.php',37],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/zend/Zend/Service','Delicious.php',112],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib','outputrenderers.php',117],['lib','outputrenderers.php',282],['lib','outputrenderers.php',405],['lib','outputrenderers.php',4280],['lib','outputrenderers.php',4533],['lib/zend/Zend/Service/Amazon','ListmaniaList.php',44],['lib/zend/Zend/Service','Flickr.php',54],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['lib/google/src/Google/Logger','File.php',49],['backup','backup.class.php',146],['lib/zend/Zend/Gdata/App/Extension','Updated.php',43],['lib/zend/Zend/Gdata/YouTube','PlaylistVideoFeed.php',55],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',137],['lib/zend/Zend/Gdata/Geo','Feed.php',51],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',107],['backup/util/loggers','file_logger.class.php',35],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',57],['lib/zend/Zend/Gdata/Extension','Reminder.php',48],['course/format/topics','renderer.php',38],['mod/lesson/classes','file_info.php',45],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',62],['lib/minify/lib/HTTP','Encoder.php',75],['lib/zend/Zend/Gdata/App/Extension','Name.php',43],['lib/google/src/Google/Service','Calendar.php',50],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['lib/dml','database_column_info.php',137],['lib/zend/Zend/Gdata/YouTube/Extension','Gender.php',44],['lib/zend/Zend/Service','Yahoo.php',49],['lib/zend/Zend/Service/Amazon','SimilarProduct.php',44],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/horde/framework/Horde','Stream.php',50],['lib/google/src/Google/Service','Analytics.php',76],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['lib/xmldb','xmldb_file.php',43],['lib/zend/Zend/Gdata/YouTube','PlaylistListEntry.php',97],['lib/zend/Zend/Service/Amazon/Ec2','Response.php',78],['lib/zend/Zend/Soap/Wsdl/Strategy','Composite.php',60],['lib/google/src/Google/Service','Tasks.php',44],['lib/zend/Zend/XmlRpc','Response.php',68],['lib/horde/framework/Horde/Exception','NotFound.php',15],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['lib/zend/Zend/Gdata/Books','VolumeEntry.php',131],['question','previewlib.php',122],['mod/wiki','renderer.php',537],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',62],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',393],['mod/assign','renderable.php',517],['mod/assign','renderable.php',576],['mod/assign','renderable.php',613],['mod/assign','renderable.php',653],['mod/assign','renderable.php',706],['mod/assign','renderable.php',760],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/zend/Zend/Service/DeveloperGarden/Request/SmsValidation','Invalidate.php',46],['lib/zend/Zend/Service/Yahoo','ImageResult.php',97],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',183],['mod/quiz/classes/question/bank','custom_view.php',44],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['lib/zend/Zend/Amf/Adobe','Auth.php',56],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/zend/Zend/Amf/Parse','Deserializer.php',45],['lib/zend/Zend/Service/Delicious','SimplePost.php',56],['lib/zend/Zend/Service/Technorati','ResultSet.php',112],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1211],['cache/classes','loaders.php',1606],['lib/zend/Zend/Gdata/Gbase','Entry.php',62],['lib/zend/Zend/Validate','Identical.php',64],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['cache/stores/mongodb','lib.php',116],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/zend/Zend/Gdata/App/Extension','Draft.php',44],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceDetail.php',54],['lib/zend/Zend/Service/Yahoo','InlinkDataResult.php',47],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/lessphp/Tree','Directive.php',20],['lib/zend/Zend/Service/Yahoo','VideoResult.php',118],['question/type/calculated','edit_calculated_form.php',51],['lib/classes','string_manager_install.php',43],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/google/src/Google/Logger','Psr.php',37],['grade/report/history/classes/output','user_button.php',40],['lib','externallib.php',129],['lib','externallib.php',426],['lib','externallib.php',457],['lib','externallib.php',488],['lib','externallib.php',517],['lib','externallib.php',649],['lib','externallib.php',684],['lib','externallib.php',782],['backup/util/ui','base_ui_stage.class.php',67],['lib/zend/Zend/Validate','CreditCard.php',136],['lib/zend/Zend/Gdata/Spreadsheets','CellQuery.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['mod/quiz/accessrule','accessrulebase.php',52],['lib/mustache/src/Mustache','Context.php',20],['lib/zend/Zend/Service/DeveloperGarden/Request/VoiceButler','CallStatus.php',46],['lib/zend/Zend/Gdata/Spreadsheets','CellFeed.php',78],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['lib/lessphp/Tree','Color.php',15],['lib/zend/Zend/Service/StrikeIron','Base.php',56],['lib/zend/Zend/Gdata/Exif/Extension','FStop.php',49],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/zend/Zend/Service/Simpy','Tag.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['cache/classes','helper.php',90],['lib/zend/Zend/Soap','Wsdl.php',73],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['lib/zend/Zend/Validate/Barcode','Code25interleaved.php',53],['webservice/soap','locallib.php',162],['lib/lessphp/Tree','Quoted.php',20],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['lib/zend/Zend/Gdata/YouTube','ActivityEntry.php',88],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',517],['lib/zend/Zend/Service','Audioscrobbler.php',65],['lib/zend/Zend/Service/Flickr','ResultSet.php',82],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['lib/zend/Zend/XmlRpc/Request','Stdin.php',47],['lib/zend/Zend/Service/DeveloperGarden/Request/SmsValidation','Validate.php',63],['mod/glossary','locallib.php',481],['lib/google/src/Google/Logger','Abstract.php',121],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/zend/Zend/Http/Client/Adapter','Curl.php',92],['lib/google/src/Google/Service','Oauth2.php',50],['lib/phpmailer','moodle_phpmailer.php',47],['lib/zend/Zend/Validate/Barcode','Intelligentmail.php',47],['repository/skydrive','microsoftliveapi.php',50],['mod/workshop/allocation/manual','lib.php',51],['lib/zend/Zend/Validate/File','Exists.php',62],['lib/xhprof','xhprof_moodle.php',788],['question/classes/bank/search','category_condition.php',60],['lib/markdown','Markdown.php',96],['grade/report/grader','lib.php',104],['lib/zend/Zend/Gdata/YouTube/Extension','Control.php',48],['lib/zend/Zend/Validate','StringLength.php',79],['question/behaviour','behaviourbase.php',50],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib/zend/Zend/Gdata/Photos/Extension','Nickname.php',50],['lib/zend/Zend/Gdata/Exif/Extension','Tags.php',169],['lib/zend/Zend/Uri','Http.php',108],['lib/zend/Zend/Gdata/YouTube/Extension','Hometown.php',44],['cache/stores/file','lib.php',117],['lib/zend/Zend/Service','Amazon.php',75],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/zend/Zend/Gdata/Media/Extension','MediaThumbnail.php',64],['lib/zend/Zend/Service/Yahoo','Image.php',56],['lib/zend/Zend/Gdata','Feed.php',87],['lib/google/src/Google/Service','Storage.php',54],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['admin/tool/uploadcourse/classes','course.php',111],['lib/zend/Zend/Gdata/Extension','Where.php',52],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/zend/Zend/Service/Amazon','S3.php',102],['lib/horde/framework/Horde/Stream','Existing.php',28],['backup/util/output','output_controller.class.php',44],['backup/cc/cc_lib','cc_version1.php',57],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/zend/Zend/Service/Simpy','Link.php',104],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['lib/zend/Zend/Gdata','Calendar.php',77],['lib/zend/Zend/Validate','Date.php',71],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/xmldb','xmldb_table.php',49],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['backup/cc','cc112moodle.php',59],['lib/zend/Zend/XmlRpc/Client','ServerIntrospection.php',43],['lib/zend/Zend/Gdata/Photos','PhotoFeed.php',147],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',407],['lib','adminlib.php',792],['lib','adminlib.php',1139],['lib','adminlib.php',1213],['lib','adminlib.php',1356],['lib','adminlib.php',1553],['lib','adminlib.php',1925],['lib','adminlib.php',2037],['lib','adminlib.php',2103],['lib','adminlib.php',2204],['lib','adminlib.php',2246],['lib','adminlib.php',2284],['lib','adminlib.php',2372],['lib','adminlib.php',2406],['lib','adminlib.php',2563],['lib','adminlib.php',2648],['lib','adminlib.php',2877],['lib','adminlib.php',3033],['lib','adminlib.php',3175],['lib','adminlib.php',3266],['lib','adminlib.php',3430],['lib','adminlib.php',3510],['lib','adminlib.php',3621],['lib','adminlib.php',3772],['lib','adminlib.php',4001],['lib','adminlib.php',4068],['lib','adminlib.php',4286],['lib','adminlib.php',4315],['lib','adminlib.php',4344],['lib','adminlib.php',4368],['lib','adminlib.php',4398],['lib','adminlib.php',4434],['lib','adminlib.php',4469],['lib','adminlib.php',4501],['lib','adminlib.php',4591],['lib','adminlib.php',4624],['lib','adminlib.php',4680],['lib','adminlib.php',4704],['lib','adminlib.php',4730],['lib','adminlib.php',4753],['lib','adminlib.php',4770],['lib','adminlib.php',4815],['lib','adminlib.php',4878],['lib','adminlib.php',4913],['lib','adminlib.php',4956],['lib','adminlib.php',5039],['lib','adminlib.php',5169],['lib','adminlib.php',5211],['lib','adminlib.php',5256],['lib','adminlib.php',5313],['lib','adminlib.php',5329],['lib','adminlib.php',5385],['lib','adminlib.php',5610],['lib','adminlib.php',5664],['lib','adminlib.php',5718],['lib','adminlib.php',5735],['lib','adminlib.php',5783],['lib','adminlib.php',5825],['lib','adminlib.php',5876],['lib','adminlib.php',5932],['lib','adminlib.php',6161],['lib','adminlib.php',6341],['lib','adminlib.php',6435],['lib','adminlib.php',6582],['lib','adminlib.php',7206],['lib','adminlib.php',7658],['lib','adminlib.php',7841],['lib','adminlib.php',8128],['lib','adminlib.php',8275],['lib','adminlib.php',8435],['lib','adminlib.php',8582],['lib','adminlib.php',8746],['lib','adminlib.php',8939],['lib','adminlib.php',8993],['lib','adminlib.php',9055],['lib','adminlib.php',9100],['mod/workshop/eval/best','lib.php',44],['lib/zend/Zend/Gdata/Calendar','EventQuery.php',91],['lib/zend/Zend/Service/Technorati','TagResult.php',94],['lib/google/src/Google/Cache','Null.php',26],['enrol/flatfile','adminlib.php',35],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',52],['mod/quiz/report/statistics','statistics_question_table.php',49],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','AddConferenceTemplateParticipantRequest.php',53],['mod/data','lib.php',66],['mod/data','lib.php',2164],['mod/data','lib.php',2438],['mod/data','lib.php',2459],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/classes/session','memcached.php',51],['lib/google/src/Google/IO','Abstract.php',37],['availability/classes','info_section.php',40],['lib/zend/Zend/Gdata/YouTube/Extension','Books.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/filestorage','stored_file.php',63],['grade/report/history/classes/output','tablelog.php',72],['lib/classes','plugin_manager.php',71],['lib/google/src/Google','Model.php',32],['lib/zend/Zend/Gdata/YouTube/Extension','Relationship.php',44],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/filebrowser','virtual_root_file.php',45],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['availability/condition/grade/classes','condition.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',188],['admin/roles/classes','check_capability_table.php',40],['lib/zend/Zend/Gdata/Media','Entry.php',60],['lib/zend/Zend/Gdata','MimeFile.php',43],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/cc/cc_lib','cc_resources.php',102],['lib/zend/Zend/Loader/Autoloader','Resource.php',62],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/simplepie/library/SimplePie','IRI.php',252],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/zend/Zend/Gdata/Calendar/Extension','SendEventNotifications.php',44],['lib/zend/Zend/Service/WindowsAzure/Storage','TableEntity.php',66],['lib/zend/Zend/Service/DeveloperGarden/Request/LocalSearch','LocalSearchRequest.php',60],['mod/quiz/report/overview','overview_table.php',41],['lib/zend/Zend/Gdata/Photos/Extension','Client.php',51],['backup/cc/cc_lib','cc_converters.php',75],['lib/google/src/Google/Service','AdSense.php',68],['lib/zend/Zend/Gdata','Entry.php',48],['lib','filterlib.php',74],['lib','filterlib.php',382],['lib/lessphp/Tree','Alpha.php',13],['lib/zend/Zend/Gdata','DublinCore.php',51],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/lessphp/Tree','Selector.php',31],['lib/zend/Zend/Service','Nirvanix.php',47],['lib/dtl','file_xml_database_importer.php',34],['mod/workshop','mod_form.php',44],['lib/zend/Zend/Service/Technorati','CosmosResultSet.php',73],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['lib/zend/Zend/Gdata/YouTube/Extension','Age.php',44],['repository/s3','S3.php',176],['repository/s3','S3.php',1994],['repository/s3','S3.php',2346],['lib/lessphp/Tree','Ruleset.php',45],['lib/zend/Zend/Service/Simpy','NoteSet.php',47],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['lib/google/src/Google/Service','Pubsub.php',44],['lib/alfresco/Service','Node.php',51],['lib/zend/Zend/Service','Technorati.php',79],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['admin/tool/monitor/classes','subscription.php',43],['lib/zend/Zend/Gdata/App/Extension','Person.php',61],['backup/moodle2','backup_course_task.class.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['lib/zend/Zend/Gdata/YouTube','ContactEntry.php',61],['lib/zend/Zend/Gdata/Extension','AttendeeType.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['mod/assignment/backup/moodle1','lib.php',223],['lib/zend/Zend/Gdata/Health/Extension','Ccr.php',43],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['mod/quiz','mod_form.php',48],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/zend/Zend/Gdata/Calendar','EventFeed.php',55],['lib/zend/Zend/Gdata/Spreadsheets','DocumentQuery.php',57],['availability/tests/fixtures','mock_condition.php',52],['lib/lessphp','Visitor.php',14],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/minify/lib/Minify/Cache','File.php',9],['lib/zend/Zend/Gdata/Exif','Entry.php',64],['grade/tests','reportlib_test.php',36],['mod/workshop/allocation','lib.php',103],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobInstance.php',57],['lib/zend/Zend/Gdata/Photos/Extension','User.php',50],['admin/tool/uploadcourse/classes','tracker.php',72],['lib/zend/Zend/Service/Technorati','GetInfoResult.php',52],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',61],['lib/zend/Zend/Gdata/YouTube/Extension','Hobbies.php',44],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/zend/Zend/Gdata/Photos/Extension','Width.php',50],['admin/roles/classes','view_role_definition_table.php',28],['lib/phpunit/classes','arraydataset.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/zend/Zend','Exception.php',34],['backup/util/xml/parser/tests','parser_test.php',797],['lib/zend/Zend/Validate/File','ImageSize.php',113],['lib/zend/Zend/Validate','Alnum.php',65],['lib/zend/Zend/Service/Flickr','Image.php',62],['lib/phpexcel/PHPExcel/Calculation','Function.php',71],['lib/horde/framework/Horde/Support','Inflector.php',115],['lib/horde/framework/Horde/Exception','Pear.php',22],['question/classes/bank','random_question_loader.php',61],['lib/phpexcel/PHPExcel/Reader','HTML.php',104],['lib/mustache/src/Mustache/Loader','InlineLoader.php',57],['lib/zend/Zend/Gdata/Photos/Extension','QuotaLimit.php',51],['admin/tool/uploadcourse/classes','processor.php',122],['lib/zend/Zend/Gdata/Spreadsheets','WorksheetFeed.php',40],['lib/lessphp/Tree','Rule.php',24],['lib/zend/Zend/Service/Amazon','EditorialReview.php',44],['lib/zend/Zend/Service/ReCaptcha','MailHide.php',86],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['lib/classes/progress','display_if_slow.php',60],['availability/condition/group/classes','condition.php',43],['lib/zend/Zend/Gdata/Photos/Extension','Location.php',50],['backup/moodle2','restore_settingslib.php',125],['lib/filebrowser','file_info.php',43],['repository/equella','lib.php',42],['lib/zend/Zend/Http','Client.php',242],['lib/alfresco/Service','ChildAssociation.php',30],['lib/zend/Zend/Gdata/DublinCore/Extension','Subject.php',44],['lib/zend/Zend/Gdata/App/Extension','Category.php',46],['badges/lib','awardlib.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/mustache/src/Mustache','Template.php',29],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueInstance.php',49],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['admin/roles/classes','define_role_table_advanced.php',46],['backup/moodle2','restore_section_task.class.php',42],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib/google/src/Google','Client.php',71],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['backup/moodle2','restore_plugin.class.php',43],['lib/simplepie/library/SimplePie','Registry.php',99],['backup/cc','cc2moodle.php',105],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',56],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['lib/zend/Zend/Validate/File','Count.php',92],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/editor/atto','adminlib.php',109],['lib/google/src/Google/Service','Admin.php',40],['lib/dml','moodle_transaction.php',40],['backup/util/plan','restore_structure_step.class.php',46],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1513],['question/engine','questionattempt.php',1599],['question/engine','questionattempt.php',1684],['lib/zend/Zend/Service/Technorati','Weblog.php',152],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantStatus.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['lib/google/src/Google/Cache','File.php',39],['lib/google/src/Google/Http','Request.php',55],['backup/moodle2','backup_block_task.class.php',43],['lib/simplepie/library/SimplePie','Source.php',61],['lib/google/src/Google/Service','Translate.php',40],['availability/classes','capability_checker.php',49],['lib','navigationlib.php',145],['lib','navigationlib.php',1012],['lib','navigationlib.php',2814],['lib','navigationlib.php',3075],['lib','navigationlib.php',3409],['lib','navigationlib.php',4775],['lib','navigationlib.php',4956],['lib/zend/Zend/Gdata/YouTube/Extension','MediaCredit.php',64],['lib/dml','pdo_moodle_database.php',42],['lib/zend/Zend/Gdata/YouTube/Extension','ReleaseDate.php',44],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','NewParticipantRequest.php',53],['lib/zend/Zend/Gdata/Spreadsheets/Extension','RowCount.php',49],['lib/zend/Zend/Validate/File','IsCompressed.php',53],['lib/zend/Zend/Gdata/Photos/Extension','MaxPhotosPerAlbum.php',51],['lib/zend/Zend/Gdata/Extension','When.php',52],['question/classes/bank/search','hidden_condition.php',42],['report/loglive/classes','renderable.php',73],['mod/lti/classes/local/ltiservice','response.php',58],['lib/zend/Zend/Gdata/Extension','Recurrence.php',43],['lib/zend/Zend/Gdata/Books/Extension','BooksLink.php',41],['backup/util/loggers','database_logger.class.php',40],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',250],['lib/phpexcel/PHPExcel','HashTable.php',52],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/classes/update','deployer.php',42],['lib/zend/Zend/Gdata/YouTube','VideoFeed.php',53],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','GetQuotaInformation.php',40],['lib/minify/lib','CSSmin.php',43],['lib/zend/Zend/Validate/File','Crc32.php',60],['mod/feedback/item','feedback_item_class.php',20],['question/engine/upgrade','upgradelib.php',280],['question/engine/upgrade','upgradelib.php',381],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/zend/Zend/Gdata/Spreadsheets','SpreadsheetEntry.php',43],['lib/google/src/Google/Service','Dns.php',50],['lib/zend/Zend/Gdata/Gapps','Query.php',57],['lib/zend/Zend/Gdata/YouTube/Extension','School.php',44],['lib/mustache/src/Mustache','HelperCollection.php',19],['mod/assign','gradingtable.php',68],['backup/util/xml/output','file_xml_output.class.php',37],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/zend/Zend/Service','Akismet.php',77],['lib','googleapi.php',52],['lib','googleapi.php',243],['lib/zend/Zend/Service/Yahoo','ResultSet.php',84],['lib/classes/message/inbound','processing_failed_exception.php',36],['lib','portfoliolib.php',101],['lib/lessphp/Tree','Import.php',30],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',53],['lib/tests/fixtures','test_renderer_factory.php',41],['mod/lesson','editpage_form.php',41],['grade/report','lib.php',156],['lib/zend/Zend/XmlRpc/Request','Http.php',53],['lib/filebrowser','file_info_stored.php',51],['lib/phpexcel/PHPExcel/Style','Protection.php',57],['lib/google/src/Google','Config.php',30],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/zend/Zend/Validate','LessThan.php',58],['grade/export','lib.php',60],['lib/zend/Zend/Gdata/YouTube/Extension','PlaylistTitle.php',44],['availability/classes','tree.php',118],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['question/classes/statistics/responses','analysis_for_subpart.php',50],['lib/zend/Zend/Validate','InArray.php',65],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['lib/zend/Zend/Gdata/Photos/Extension','Height.php',50],['lib/zend/Zend/Gdata/Gapps','Error.php',76],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['lib/phpexcel/PHPExcel','Chart.php',150],['lib/google/src/Google/Service','Replicapool.php',48],['lib/zend/Zend/Gdata/Media/Extension','MediaRating.php',49],['lib/zend/Zend/Gdata/YouTube','VideoEntry.php',175],['admin/tool/installaddon/classes','pluginfo_client.php',68],['admin/tool/installaddon/classes','pluginfo_client.php',206],['lib/google/src/Google/Service','Resourceviews.php',54],['admin/tool/log/store/legacy/classes/log','store.php',33],['backup/moodle2','backup_section_task.class.php',40],['lib/phpexcel/PHPExcel/Worksheet','CellIterator.php',68],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['repository/youtube','lib.php',40],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/testing/generator','component_generator_base.php',45],['lib/zend/Zend/Gdata/DublinCore/Extension','Format.php',44],['lib','badgeslib.php',133],['admin/tool/installaddon/classes','installer.php',488],['admin/tool/installaddon/classes','installer.php',745],['lib/zend/Zend/XmlRpc','Client.php',122],['lib/mustache/src/Mustache','LambdaHelper.php',24],['admin/roles/classes','permissions_table.php',38],['lib/jabber/XMPP','XMLObj.php',76],['lib','coursecatlib.php',197],['lib','coursecatlib.php',2668],['question/type','edit_question_form.php',96],['lib/zend/Zend/Gdata','MediaMimeStream.php',80],['mod/quiz/report/responses','last_responses_table.php',39],['lib/zend/Zend/Gdata/Photos/Extension','Timestamp.php',51],['lib','setuplib.php',106],['lib','setuplib.php',158],['lib','setuplib.php',174],['lib','setuplib.php',194],['lib','setuplib.php',224],['lib','setuplib.php',246],['lib','setuplib.php',262],['lib','setuplib.php',284],['lib','setuplib.php',303],['lib','setuplib.php',321],['lib/google/src/Google/Cache','Apc.php',35],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/lessphp/Tree','Unit.php',16],['lib/zend/Zend/Service/DeveloperGarden/Request/VoiceButler','TearDownCall.php',46],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',261],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['lib/zend/Zend/Service/Amazon','CustomerReview.php',69],['lib/zend/Zend/Gdata/YouTube/Extension','QueryString.php',44],['lib/zend/Zend/Gdata/Gapps/Extension','Name.php',65],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/lessphp/Tree','RulesetCall.php',14],['lib/zend/Zend/Gdata/Extension','Rating.php',49],['repository/alfresco','lib.php',42],['lib/zend/Zend/Service/Technorati','SearchResultSet.php',49],['lib/zend/Zend/Gdata/Photos','UserQuery.php',71],['enrol','renderer.php',426],['enrol','renderer.php',728],['badges/criteria','award_criteria_course.php',47],['lib/zend/Zend/Gdata/Extension','RecurrenceException.php',56],['lib/phpexcel/PHPExcel/Style','Fill.php',89],['lib/zend/Zend/Service/Technorati','TagsResult.php',60],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/google/src/Google/Service','Exception.php',12],['lib/zend/Zend/Gdata','Spreadsheets.php',115],['lib/xmldb','xmldb_index.php',56],['question/classes/statistics/responses','analyser.php',69],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['lib/zend/Zend/Gdata/Photos/Extension','Position.php',50],['lib/google/src/Google/Auth','Simple.php',32],['lib/zend/Zend/Gdata/Geo/Extension','GmlPoint.php',62],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/zend/Zend/Rest','Route.php',71],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceTemplateParticipantRequest.php',60],['question','category_class.php',58],['lib/classes/progress','display.php',48],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['lib/zend/Zend/Gdata/App/Extension','Rights.php',43],['lib/adodb','adodb-active-record.inc.php',113],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['lib/zend/Zend/Validate','NotEmpty.php',77],['question/type/calculated','datasetitems_form.php',72],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['lib/dml','pdo_moodle_recordset.php',41],['backup/cc/cc_lib','cc_converter_folder.php',28],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib/zend/Zend/Gdata/Calendar','ListEntry.php',85],['admin/tool/monitor/classes','rule.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/zend/Zend/Gdata/Geo','Entry.php',55],['lib/zend/Zend/Gdata/YouTube/Extension','Link.php',48],['lib','flickrlib.php',53],['lib/zend/Zend/Gdata/YouTube/Extension','AboutMe.php',44],['lib/zend/Zend/Service/DeveloperGarden','Credential.php',54],['grade/report/overview','lib.php',76],['lib/simplepie/library/SimplePie','File.php',68],['backup/moodle2','backup_plugin.class.php',44],['lib/zend/Zend/Gdata/Extension','ExtendedProperty.php',46],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['rating','lib.php',114],['rating','lib.php',1070],['lib','dtllib.php',66],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['question/engine','datalib.php',68],['question/engine','datalib.php',1330],['question/engine','datalib.php',1631],['question/engine','datalib.php',1739],['question/engine','datalib.php',1869],['question/engine','datalib.php',1940],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',405]], 1047],
'delete_records_select': ['delete_records_select', 'Delete one or more records from a table which match a particular WHERE clause. ', [['lib/dml','pgsql_native_moodle_database.php',1247],['lib/dml','oci_native_moodle_database.php',1445],['lib/dml','sqlsrv_native_moodle_database.php',1153],['lib/dml','mssql_native_moodle_database.php',1082],['lib/dml','mysqli_native_moodle_database.php',1469],['lib/dml/tests','dml_test.php',5432],['lib/dml','pdo_moodle_database.php',207]], 166],
'name': ['name', 'Returns the block name, as present in the class name, the database, the block directory, etc etc. ', [['blocks','moodleblock.class.php',126],['lib/simplepie/library/SimplePie/HTTP','Parser.php',286],['question/type','questiontypebase.php',61],['lib/phpexcel/PHPExcel/Calculation','Functions.php',238],['mod/data','lib.php',471]], 100],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'data_export_xls': ['data_export_xls', '', [['mod/data','lib.php',2752]], 1],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'data_user_complete': ['data_user_complete', 'Prints all the records uploaded by this user ', [['mod/data','lib.php',1049]], 0],
'box': ['box', 'Outputs a box. ', [['lib','outputrenderers.php',2974]], 295],
'data_replace_field_in_templates': ['data_replace_field_in_templates', 'Search for a field name and replaces it with another one in all the form templates. Set $newfieldname as \'\' if you want to delete the field from the form. ', [['mod/data','lib.php',615]], 2],
'fulldelete': ['fulldelete', 'Recursively delete the file or folder with path $location. That is, if it is a file delete it. If it is a folder, delete all its content then delete it. If $location does not exist to start, that is not considered an error. ', [['lib','filelib.php',2468]], 38],
'format_module_intro': ['format_module_intro', 'Formats activity intro text ', [['lib','weblib.php',1473]], 57],
'data_print_preference_form': ['data_print_preference_form', 'function that takes in the current data, number of items per page, a search string and prints a preference box in view.php ', [['mod/data','lib.php',1518]], 2],
'data_delete_record': ['data_delete_record', 'Delete a record entry. ', [['mod/data','lib.php',3717]], 5],
'data_append_new_field_to_templates': ['data_append_new_field_to_templates', 'Appends a new field at the end of the form template. ', [['mod/data','lib.php',661]], 1],
'fields': ['fields', 'Get the value of a field in the current row by column name. Will not work if ADODB_FETCH_MODE is set to ADODB_FETCH_NUM. ', [['lib/adodb','adodb.inc.php',3469],['lib/adodb','adodb.inc.php',4073],['lib/adodb/drivers','adodb-odbtp.inc.php',718],['lib/adodb/drivers','adodb-sqlite.inc.php',369],['lib/adodb/drivers','adodb-pdo.inc.php',611],['lib/adodb/drivers','adodb-mysqli.inc.php',963],['lib/adodb/drivers','adodb-mssql.inc.php',904],['mod/quiz/classes','admin_review_setting.php',65],['lib/adodb/drivers','adodb-postgres64.inc.php',951],['lib/adodb/drivers','adodb-oracle.inc.php',265],['lib/adodb/drivers','adodb-ado.inc.php',373],['lib','outputcomponents.php',235],['lib/adodb/drivers','adodb-ado5.inc.php',410],['lib/adodb/drivers','adodb-db2.inc.php',754],['lib/adodb/drivers','adodb-sqlite3.inc.php',399],['lib/adodb/drivers','adodb-mssqlnative.inc.php',888],['lib/adodb/drivers','adodb-ibase.inc.php',833],['lib/adodb/drivers','adodb-oci8po.inc.php',91],['lib/adodb/drivers','adodb-ads.inc.php',690],['lib/adodb/drivers','adodb-odbc.inc.php',642],['lib/adodb/drivers','adodb-mysql.inc.php',764],['lib/adodb/drivers','adodb-oci8.inc.php',1549]], 145],
'export_text_value': ['export_text_value', '', [['mod/data/field/latlong','field.class.php',239],['mod/data','lib.php',507],['mod/data/field/url','field.class.php',190]], 1],
'data_user_can_delete_preset': ['data_user_can_delete_preset', 'Checks to see if the user has permission to delete the preset. ', [['mod/data','lib.php',3697]], 4],
'heading': ['heading', 'Get the heading for this page. ', [['grade/report/singleview/classes/local/screen','grade.php',283],['grade/report/singleview/classes/local/screen','user.php',281],['lib','outputrenderers.php',2957],['lib','outputrenderers.php',4080],['lib','outputrenderers.php',4254],['grade/report/singleview/classes/local/screen','screen.php',197]], 763],
'data_comment_validate': ['data_comment_validate', 'Validate comment parameter before perform other comments actions ', [['mod/data','lib.php',3425]], 0],
'write': ['write', 'Send request to the remote server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',250],['lib/horde/framework/Horde','Secret.php',62],['lib/google/src/Google/Logger','Null.php',35],['lib/tcpdf','tcpdf.php',6254],['lib/horde/framework/Horde/Imap/Client/Socket/Connection','Pop3.php',35],['lib','excellib.class.php',268],['lib/zend/Zend/Gdata','HttpAdapterStreamingSocket.php',49],['auth/cas/CAS/CAS/PGTStorage','File.php',188],['lib/zend/Zend/Http/Client/Adapter','Test.php',142],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',80],['lib/zend/Zend/Http/Client/Adapter','Proxy.php',109],['admin/tool/log/classes/helper','buffered_writer.php',53],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',187],['lib/zend/Zend/Http/Client/Adapter','Interface.php',54],['lib/alfresco/Service/Logger','Logger.php',75],['lib/horde/framework/Horde/Imap/Client/Socket/Connection','Socket.php',38],['admin/tool/log/classes/log','writer.php',30],['backup/util/xml','xml_writer.class.php',224],['lib','odslib.class.php',258],['lib/zend/Zend/Gdata','HttpAdapterStreamingProxy.php',48],['lib/google/src/Google/Logger','File.php',72],['auth/cas/CAS/CAS/PGTStorage','Db.php',340],['lib/google/src/Google/Logger','Psr.php',85],['lib/zend/Zend/Http/Client/Adapter','Curl.php',251],['backup/util/xml/output','xml_output.class.php',103],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',142]], 227],
'data_preset_name': ['data_preset_name', 'Returns the best name to show for a preset ', [['mod/data','lib.php',1928]], 1],
'data_grade_item_delete': ['data_grade_item_delete', 'Delete grade item for given data ', [['mod/data','lib.php',1169]], 1],
's': ['s', 'Count of attempts selected by $this->whichattempts ', [['mod/quiz/report/statistics/classes','calculated.php',91],['lib','weblib.php',84]], 988],
'get_filepath': ['get_filepath', 'Returns the backup file path ', [['backup/util/ui','restore_ui_stage.class.php',547],['lib/filestorage','stored_file.php',690],['lib/filebrowser','virtual_root_file.php',218]], 136],
'data_grade_item_update': ['data_grade_item_update', 'Update/create grade item for given data ', [['mod/data','lib.php',1134]], 7],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pgsql_native_moodle_database.php',1137],['lib/dml','oci_native_moodle_database.php',1355],['lib/dml','sqlsrv_native_moodle_database.php',1081],['lib/dml','mssql_native_moodle_database.php',1003],['lib/dml','mysqli_native_moodle_database.php',1397],['lib/dml/tests','dml_test.php',5430],['lib/dml','pdo_moodle_database.php',460]], 565],
'get_plugin_list': ['get_plugin_list', 'Get list of plugins of given type. ', [['lib/classes','component.php',781],['lib','deprecatedlib.php',467],['admin/tool/monitor/classes','eventlist.php',176]], 184],
'add_class': ['add_class', 'Adds a CSS class to this action link object ', [['lib','outputcomponents.php',1030],['lib','outputcomponents.php',1782],['lib','outputcomponents.php',2591],['lib','navigationlib.php',456]], 33],
'print_after_form': ['print_after_form', '', [['mod/data/field/textarea','field.class.php',181],['mod/data','lib.php',444]], 1],
'close': ['close', 'Close the connection to the server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',486],['lib/tests','completionlib_test.php',888],['lib/adodb','adodb.inc.php',2164],['lib/adodb','adodb.inc.php',2844],['lib/adodb','adodb.inc.php',3536],['lib','webdavlib.php',176],['admin/tool/uploaduser','locallib.php',149],['lib/dml','oci_native_moodle_recordset.php',80],['lib/tcpdf','tcpdf.php',2943],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['lib','excellib.class.php',93],['lib/zend/Zend/Http/Client/Adapter','Test.php',187],['lib/classes/dml','recordset_walk.php',153],['mod/assign/feedback/offline','importgradeslib.php',178],['lib/pear/Net','GeoIP.php',556],['backup/util/helper','backup_array_iterator.class.php',63],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',109],['lib/zend/Zend/Http/Client/Adapter','Proxy.php',266],['lib/dml','mssql_native_moodle_recordset.php',87],['lib/pear/Auth','RADIUS.php',542],['lib/pear/Auth','RADIUS.php',703],['lib/pear/Auth','RADIUS.php',824],['lib/phpmailer','class.smtp.php',507],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',80],['lib/phpunit/classes','event_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Interface.php',73],['lib/dml','pgsql_native_moodle_recordset.php',104],['auth/fc','fcFPP.php',72],['lib/filestorage','zip_archive.php',183],['lib','odslib.class.php',71],['lib/horde/framework/Horde/Socket','Client.php',135],['question/engine/tests','helpers.php',1225],['grade','lib.php',323],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib','csvlib.class.php',256],['lib/google/src/Google/Logger','File.php',130],['lib/horde/framework/Horde','Stream.php',585],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpunit/classes','message_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Curl.php',460],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',109],['backup/util/helper','backup_null_iterator.class.php',53],['grade/export','lib.php',662],['lib/dml','pdo_moodle_recordset.php',79]], 1036],
'get_user_grades': ['get_user_grades', 'Returns an array of grades calculated by aggregating item ratings. ', [['rating','lib.php',765]], 4],
'select': ['select', 'Create a new Zend_Service_WindowsAzure_Storage_TableEntityQuery ', [['lib/zend/Zend/Service/WindowsAzure/Storage','Table.php',455],['lib/zend/Zend/Service/WindowsAzure/Storage','TableEntityQuery.php',74],['lib','outputcomponents.php',1255],['lib/jquery/ui-1.11.4/external/jquery','jquery.js',2845]], 593],
'sql_compare_text': ['sql_compare_text', 'Returns the SQL text to be used to compare one TEXT (clob) column with one varchar column, because some RDBMS doesn\'t support such direct comparisons. ', [['lib/dml','moodle_database.php',1991]], 83],
'print_array': ['print_array', 'This will convert an array of values into a deliminated string. Like the above function, this is for convenience. ', [['lib','csvlib.class.php',530]], 3],
'data_get_file_info': ['data_get_file_info', 'File browsing support for data module. ', [['mod/data','lib.php',2920]], 0],
'is_directory': ['is_directory', 'Whether or not this is a directory ', [['lib/filebrowser','file_info_context_course.php',372],['lib/filebrowser','file_info_context_course.php',657],['lib/filebrowser','file_info_context_course.php',803],['lib/filebrowser','file_info_context_system.php',83],['mod/book','locallib.php',454],['lib/filebrowser','file_info_context_coursecat.php',143],['mod/forum','locallib.php',463],['lib/filebrowser','file_info_context_module.php',249],['lib/filebrowser','file_info_context_user.php',265],['mod/data','locallib.php',475],['mod/workshop','fileinfolib.php',82],['mod/workshop','fileinfolib.php',241],['mod/imscp','locallib.php',328],['mod/lesson/classes','file_info.php',94],['mod/glossary','locallib.php',525],['lib/filestorage','stored_file.php',310],['lib/filebrowser','virtual_root_file.php',60],['lib/filebrowser','file_info_stored.php',267]], 131],
'data_reset_gradebook': ['data_reset_gradebook', 'Removes all grades from gradebook ', [['mod/data','lib.php',2531]], 2],
'data_in_readonly_period': ['data_in_readonly_period', 'Check whether the specified database activity is currently in a read-only period ', [['mod/data','lib.php',2119]], 3],
'groups_get_activity_groupmode': ['groups_get_activity_groupmode', 'Returns effective groupmode used in activity, course setting overrides activity setting if groupmodeforce enabled. ', [['lib','grouplib.php',468]], 133],
'output': ['output', 'Build the html for the screen. ', [['grade/report/singleview','lib.php',104],['lib/dtl','file_xml_database_exporter.php',51],['lib/tcpdf','tcpdf.php',7537],['lib','pdflib.php',178],['lib','weblib.php',3210],['lib','weblib.php',3229],['lib','weblib.php',3250],['lib','weblib.php',3274],['lib','weblib.php',3333],['lib','weblib.php',3372],['lib','weblib.php',3444],['comment','lib.php',416],['lib/dtl','string_xml_database_exporter.php',34],['lib/minify/lib/HTTP','Encoder.php',285],['backup/util/output','output_controller.class.php',67],['admin/tool/uploadcourse/classes','tracker.php',135],['lib','graphlib.php',1475]], 219],
'file_ok': ['file_ok', 'Whether this module support files ', [['mod/data/field/textarea','field.class.php',248],['mod/data/field/picture','field.class.php',305],['mod/data','lib.php',524],['mod/data/field/file','field.class.php',213]], 2],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1583],['lib/dml','moodle_database.php',678]], 375],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',449]], 1560],
'insert_field': ['insert_field', 'Insert a new field in the database We assume the field object is already defined as $this->field ', [['mod/data','lib.php',177]], 12],
'data_get_field': ['data_get_field', 'returns a subclass field object given a record of the field, used to invoke plugin methods input: $param $field - record from db ', [['mod/data','lib.php',753]], 14],
'display_edit_field': ['display_edit_field', 'Print the relevant form element to define the attributes for this field viewable by teachers only. ', [['mod/data','lib.php',303]], 2],
'get_file_by_hash': ['get_file_by_hash', 'Fetch file using local file full pathname hash ', [['lib/filestorage','file_storage.php',427]], 75],
'get_file': ['get_file', 'Return file path. ', [['repository/filesystem','lib.php',183],['repository/flickr_public','lib.php',453],['repository/boxnet','lib.php',179],['lib','webdavlib.php',391],['repository/dropbox','lib.php',410],['mod/data/field/picture','field.class.php',124],['repository/s3','lib.php',201],['lib/filestorage','file_storage.php',448],['repository/skydrive','lib.php',130],['repository/webdav','lib.php',73],['repository/dropbox','locallib.php',114],['repository','lib.php',1701],['repository/flickr','lib.php',277],['repository/googledocs','lib.php',408],['lib','externallib.php',870],['mod/data/field/file','field.class.php',121],['repository/equella','lib.php',166],['repository/alfresco','lib.php',195]], 162],
'data_add_instance': ['data_add_instance', 'Adds an instance of a data ', [['mod/data','lib.php',898]], 0],
'data_print_header': ['data_print_header', 'Prints the heads for a page ', [['mod/data','lib.php',2037]], 4],
'download_array': ['download_array', 'Creates a file for downloading an array into a deliminated format. This function is useful if you are happy with the defaults and all of your information is in one array. ', [['lib','csvlib.class.php',511]], 1],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','moodle_database.php',1815],['lib/dml','sqlite3_pdo_moodle_database.php',337]], 778],
'get_field': ['get_field', 'Get the right field name to fetch a stat for these attempts that is calculated for more than one $whichattempts (count or avg). ', [['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1497],['user/filters','lib.php',124],['lib/behat','behat_field_manager.php',243]], 485],
'data_get_extra_capabilities': ['data_get_extra_capabilities', 'Returns all other caps used in module ', [['mod/data','lib.php',2693]], 0],
'data_fieldname_exists': ['data_fieldname_exists', '', [['mod/data','lib.php',1745]], 2],
'data_get_recordids': ['data_get_recordids', 'Gets the record IDs given the search criteria ', [['mod/data','lib.php',3566]], 2],
'data_get_post_actions': ['data_get_post_actions', 'List the actions that correspond to a post of this module. This is used by the participation report. ', [['mod/data','lib.php',1725]], 0],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',5950]], 486],
'format_text': ['format_text', 'Given text in a variety of format codings, this function returns the text as safe HTML. ', [['lib','weblib.php',1115],['lib','tablelib.php',846],['lib','tablelib.php',1583],['lib','tablelib.php',1900],['question/type','questionbase.php',345],['lib/classes','grading_external.php',182]], 325],
'explode': ['explode', '', [], 1599],
'is_array': ['is_array', '', [], 1820],
'count': ['count', '', [], 3984],
'trim': ['trim', '', [], 1889],
'name': ['name', '', [], 100],
'in_array': ['in_array', '', [], 1173],
'time': ['time', '', [], 1768],
'array_shift': ['array_shift', '', [], 607],
'implode': ['implode', '', [], 1259],
'rtrim': ['rtrim', '', [], 169],
'preg_quote': ['preg_quote', '', [], 207],
'array_key_exists': ['array_key_exists', '', [], 1539],
'substr': ['substr', '', [], 2883],
'unlink': ['unlink', '', [], 252],
'str_replace': ['str_replace', '', [], 1667],
'is_null': ['is_null', '', [], 1992],
'sha1': ['sha1', '', [], 188],
'file_exists': ['file_exists', '', [], 873],
'array_keys': ['array_keys', '', [], 1152],
'file_get_contents': ['file_get_contents', '', [], 215],
'is_numeric': ['is_numeric', '', [], 723],
'array_merge': ['array_merge', '', [], 2320],
'fclose': ['fclose', '', [], 280],
'fwrite': ['fwrite', '', [], 209],
'gmdate': ['gmdate', '', [], 145],
'define': ['define', '', [], 2170],
'htmlspecialchars': ['htmlspecialchars', '', [], 207],
'is_file': ['is_file', '', [], 108],
'ksort': ['ksort', '', [], 158],
'rmdir': ['rmdir', '', [], 29],
'strpos': ['strpos', '', [], 1623],
'end': ['end', '', [], 432],
'reset': ['reset', '', [], 1070],
'preg_replace': ['preg_replace', '', [], 903],
'str_ireplace': ['str_ireplace', '', [], 27],
'is_object': ['is_object', '', [], 508],
'preg_match_all': ['preg_match_all', '', [], 159],
'basename': ['basename', '', [], 163],
'header': ['header', '', [], 1294]};
CLASS_DATA={
'record_deleted': ['record_deleted', 'The mod_data record deleted event class. ', [['mod/data/classes/event','record_deleted.php',29]], 1],
'record_created': ['record_created', 'The mod_data record created event class. ', [['mod/data/classes/event','record_created.php',29]], 2],
'data_preset_existing_importer': ['data_preset_existing_importer', 'Data preset importer for existing presets ', [['mod/data','lib.php',2454]], 2],
'html_table_cell': ['html_table_cell', 'Component representing a table cell. ', [['lib','outputcomponents.php',2234]], 270],
'html_table_row': ['html_table_row', 'Component representing a table row. ', [['lib','outputcomponents.php',2186]], 159],
'comment_exception': ['comment_exception', 'Comment exception class ', [['comment','lib.php',1044]], 66],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6106]], 929],
'rating_exception': ['rating_exception', 'The rating_exception class for exceptions specific to the ratings system ', [['rating','lib.php',1056]], 38],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',214]], 867],
'file_info_stored': ['file_info_stored', 'Represents an actual file or folder - a row in the file table in the tree navigated by {@link file_browser}. ', [['lib/filebrowser','file_info_stored.php',28]], 32],
'portfolio_add_button': ['portfolio_add_button', 'Use this to add a portfolio button or icon or form to a page. ', [['lib','portfoliolib.php',54]], 13],
'field_deleted': ['field_deleted', 'The mod_data field deleted event class. ', [['mod/data/classes/event','field_deleted.php',29]], 1],
'data_file_info_container': ['data_file_info_container', 'Class representing the virtual node with all itemids in the file browser ', [['mod/data','locallib.php',408]], 1],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'data_preset_upload_importer': ['data_preset_upload_importer', 'Data preset importer for uploaded presets ', [['mod/data','lib.php',2434]], 2],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6766]], 1197],
'user_picture': ['user_picture', 'Data structure representing a user picture. ', [['lib','outputcomponents.php',142]], 135],
'field_updated': ['field_updated', 'The mod_data field updated event class. ', [['mod/data/classes/event','field_updated.php',29]], 1],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',6988]], 942],
'data_field_base': ['data_field_base', '', [['mod/data','lib.php',49]], 12],
'rating_manager': ['rating_manager', 'The rating_manager class provides the ability to retrieve sets of ratings from the database ', [['rating','lib.php',365]], 25],
'moodleexcelworkbook': ['moodleexcelworkbook', 'Define and operate over one Moodle Workbook. ', [['lib','excellib.class.php',27]], 9],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1052]], 4832],
'html_table': ['html_table', 'Holds all the information required to render a <table> by {@link core_renderer::table()} ', [['lib','outputcomponents.php',2006]], 224],
'moodleodsworkbook': ['moodleodsworkbook', 'ODS workbook abstraction. ', [['lib','odslib.class.php',31]], 8],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 485],
'csv_export_writer': ['csv_export_writer', 'Utitily class for exporting of CSV files. ', [['lib','csvlib.class.php',365]], 12],
'pix_icon': ['pix_icon', 'Data structure representing an icon. ', [['lib','outputcomponents.php',497]], 247],
'settings_navigation': ['settings_navigation', 'Class used to manage the settings option for the current page ', [['lib','navigationlib.php',3384]], 17],
'field_created': ['field_created', 'The mod_data field created event class. ', [['mod/data/classes/event','field_created.php',30]], 1],
'comment': ['comment', 'This class represents a comment box on a page of feedback. ', [['mod/assign/feedback/editpdf/classes','comment.php',27],['comment','lib.php',26]], 54],
'data_portfolio_caller': ['data_portfolio_caller', 'The class to handle entry exports of a database module ', [['mod/data','locallib.php',28]], 2]};
CONST_DATA={
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 2948],
'PARAM_ALPHA': ['PARAM_ALPHA', '', [['lib','moodlelib.php',77]], 377],
'FEATURE_MOD_INTRO': ['FEATURE_MOD_INTRO', '', [['lib','moodlelib.php',426]], 31],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 462],
'DATA_PRESET_COMPONENT': ['DATA_PRESET_COMPONENT', '', [['mod/data','lib.php',36]], 8],
'DATA_PRESET_FILEAREA': ['DATA_PRESET_FILEAREA', '', [['mod/data','lib.php',37]], 8],
'DATA_TIMEADDED': ['DATA_TIMEADDED', '', [['mod/data','lib.php',31]], 5],
'NOGROUPS': ['NOGROUPS', '', [['lib','grouplib.php',29]], 54],
'FEATURE_GRADE_HAS_GRADE': ['FEATURE_GRADE_HAS_GRADE', '', [['lib','moodlelib.php',394]], 29],
'DATA_PRESET_CONTEXT': ['DATA_PRESET_CONTEXT', '', [['mod/data','lib.php',38]], 8],
'FEATURE_SHOW_DESCRIPTION': ['FEATURE_SHOW_DESCRIPTION', '', [['lib','moodlelib.php',437]], 22],
'FEATURE_GRADE_OUTCOMES': ['FEATURE_GRADE_OUTCOMES', '', [['lib','moodlelib.php',396]], 23],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 999],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 271],
'DATA_PERPAGE_SINGLE': ['DATA_PERPAGE_SINGLE', '', [['mod/data','lib.php',26]], 1],
'FEATURE_RATE': ['FEATURE_RATE', '', [['lib','moodlelib.php',432]], 10],
'GRADE_TYPE_NONE': ['GRADE_TYPE_NONE', '', [['lib/grade','constants.php',80]], 41],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1252],
'GRADE_TYPE_SCALE': ['GRADE_TYPE_SCALE', '', [['lib/grade','constants.php',90]], 63],
'FEATURE_BACKUP_MOODLE2': ['FEATURE_BACKUP_MOODLE2', '', [['lib','moodlelib.php',434]], 34],
'VISIBLEGROUPS': ['VISIBLEGROUPS', '', [['lib','grouplib.php',39]], 96],
'FEATURE_COMPLETION_TRACKS_VIEWS': ['FEATURE_COMPLETION_TRACKS_VIEWS', '', [['lib','moodlelib.php',405]], 23],
'FEATURE_GROUPS': ['FEATURE_GROUPS', '', [['lib','moodlelib.php',414]], 25],
'PARAM_NOTAGS': ['PARAM_NOTAGS', '', [['lib','moodlelib.php',172]], 176],
'DATA_CAP_EXPORT': ['DATA_CAP_EXPORT', '', [['mod/data','lib.php',34]], 4],
'DATA_FIRSTNAME': ['DATA_FIRSTNAME', '', [['mod/data','lib.php',28]], 17],
'SYSCONTEXTID': ['SYSCONTEXTID', '', [['lib','accesslib.php',6265]], 74],
'GRADE_TYPE_VALUE': ['GRADE_TYPE_VALUE', '', [['lib/grade','constants.php',85]], 71],
'DATA_LASTNAME': ['DATA_LASTNAME', '', [['mod/data','lib.php',29]], 17],
'PORTFOLIO_ADD_ICON_LINK': ['PORTFOLIO_ADD_ICON_LINK', '', [['lib/portfolio','constants.php',190]], 8],
'CAP_PREVENT': ['CAP_PREVENT', '', [['lib','accesslib.php',137]], 40],
'RATING_UNSET_RATING': ['RATING_UNSET_RATING', '', [['rating','lib.php',26]], 7],
'DATA_MAX_ENTRIES': ['DATA_MAX_ENTRIES', '', [['mod/data','lib.php',25]], 3],
'DATA_TIMEMODIFIED': ['DATA_TIMEMODIFIED', '', [['mod/data','lib.php',32]], 5],
'SEPARATEGROUPS': ['SEPARATEGROUPS', '', [['lib','grouplib.php',34]], 158],
'CAP_ALLOW': ['CAP_ALLOW', '', [['lib','accesslib.php',135]], 1292],
'DATA_APPROVED': ['DATA_APPROVED', '', [['mod/data','lib.php',30]], 5],
'FEATURE_GROUPINGS': ['FEATURE_GROUPINGS', '', [['lib','moodlelib.php',416]], 23]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
