<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/assign/feedback/editpdf/yui/src/editor/js/editor.js source</title>
    <link rel="stylesheet" href="../../../../../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../../../../../';
subdir='mod/assign/feedback/editpdf/yui/src/editor/js';
filename='editor.js.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/assign/feedback/editpdf/yui/src/editor/js/</a> -> <a href="editor.js.html">editor.js</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="editor.js.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="editor.js.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">//</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">//</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">//</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">/* eslint-disable no-unused-vars */</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">/* global SELECTOR, TOOLSELECTOR, AJAXBASE, COMMENTCOLOUR, ANNOTATIONCOLOUR, AJAXBASEPROGRESS, CLICKTIMEOUT */</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Provides an in browser PDF editor.</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @module moodle-assignfeedback_editpdf-editor</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> */</span>
<a name="l23"><span class="linenum">  23</span></a>  
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment">/**</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * EDITOR</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * This is an in browser PDF editor.</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> *</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * @namespace M.assignfeedback_editpdf</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * @class editor</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @constructor</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @extends Y.Base</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> */</span>
<a name="l33"><span class="linenum">  33</span></a>  var EDITOR = function() {
<a name="l34"><span class="linenum">  34</span></a>      EDITOR.superclass.constructor.<a class="function" onClick="logFunction('apply')" href="../../../../../../../../_functions/apply.html" onMouseOver="funcPopup(event,'apply')">apply</a>(this, arguments);
<a name="l35"><span class="linenum">  35</span></a>  };
<a name="l36"><span class="linenum">  36</span></a>  EDITOR.prototype = {
<a name="l37"><span class="linenum">  37</span></a>  
<a name="l38"><span class="linenum">  38</span></a>      <span class="comment">/**</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">     * The dialogue used for all action menu displays.</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">     *</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     * @property type</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     * @type M.core.dialogue</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     * @protected</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     */</span>
<a name="l45"><span class="linenum">  45</span></a>      dialogue: null,
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>      <span class="comment">/**</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     * The panel used for all action menu displays.</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     *</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     * @property type</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     * @type Y.Node</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     * @protected</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     */</span>
<a name="l54"><span class="linenum">  54</span></a>      panel: null,
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>      <span class="comment">/**</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">     * The number of pages in the pdf.</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     *</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">     * @property pagecount</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     * @type Number</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">     * @protected</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">     */</span>
<a name="l63"><span class="linenum">  63</span></a>      pagecount: 0,
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>      <span class="comment">/**</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     * The active page in the editor.</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     *</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     * @property currentpage</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">     * @type Number</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">     * @protected</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment">     */</span>
<a name="l72"><span class="linenum">  72</span></a>      currentpage: 0,
<a name="l73"><span class="linenum">  73</span></a>  
<a name="l74"><span class="linenum">  74</span></a>      <span class="comment">/**</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">     * A list of page objects. Each page has a list of comments and annotations.</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">     *</span>
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">     * @property pages</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">     * @type array</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">     * @protected</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">     */</span>
<a name="l81"><span class="linenum">  81</span></a>      pages: [],
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>      <span class="comment">/**</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">     * The yui node for the loading icon.</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">     *</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">     * @property loadingicon</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">     * @type Node</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">     * @protected</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">     */</span>
<a name="l90"><span class="linenum">  90</span></a>      loadingicon: null,
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>      <span class="comment">/**</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">     * Image object of the current page image.</span>
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">     *</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">     * @property pageimage</span>
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">     * @type Image</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">     * @protected</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">     */</span>
<a name="l99"><span class="linenum">  99</span></a>      pageimage: null,
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>      <span class="comment">/**</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">     * YUI Graphic class for drawing shapes.</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">     *</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">     * @property graphic</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">     * @type Graphic</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">     * @protected</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">     */</span>
<a name="l108"><span class="linenum"> 108</span></a>      graphic: null,
<a name="l109"><span class="linenum"> 109</span></a>  
<a name="l110"><span class="linenum"> 110</span></a>      <span class="comment">/**</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     * Info about the current edit operation.</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">     *</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">     * @property currentedit</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">     * @type M.assignfeedback_editpdf.edit</span>
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">     * @protected</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">     */</span>
<a name="l117"><span class="linenum"> 117</span></a>      currentedit: new M.assignfeedback_editpdf.<a class="function" onClick="logFunction('edit')" href="../../../../../../../../_functions/edit.html" onMouseOver="funcPopup(event,'edit')">edit</a>(),
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>      <span class="comment">/**</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">     * Current drawable.</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     *</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     * @property currentdrawable</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * @type M.assignfeedback_editpdf.drawable|false</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     * @protected</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     */</span>
<a name="l126"><span class="linenum"> 126</span></a>      currentdrawable: false,
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>      <span class="comment">/**</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     * Current drawables.</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     *</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">     * @property drawables</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">     * @type array(M.assignfeedback_editpdf.drawable)</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">     * @protected</span>
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">     */</span>
<a name="l135"><span class="linenum"> 135</span></a>      drawables: [],
<a name="l136"><span class="linenum"> 136</span></a>  
<a name="l137"><span class="linenum"> 137</span></a>      <span class="comment">/**</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     * Current comment when the comment menu is open.</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     * @property currentcomment</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">     * @type M.assignfeedback_editpdf.comment</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">     * @protected</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">     */</span>
<a name="l143"><span class="linenum"> 143</span></a>      currentcomment: null,
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>      <span class="comment">/**</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">     * Current annotation when the select tool is used.</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">     * @property currentannotation</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     * @type M.assignfeedback_editpdf.annotation</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     * @protected</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     */</span>
<a name="l151"><span class="linenum"> 151</span></a>      currentannotation: null,
<a name="l152"><span class="linenum"> 152</span></a>  
<a name="l153"><span class="linenum"> 153</span></a>      <span class="comment">/**</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     * Last selected annotation tool</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     * @property lastannotationtool</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     * @type String</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">     * @protected</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">     */</span>
<a name="l159"><span class="linenum"> 159</span></a>      lastanntationtool: &quot;pen&quot;,
<a name="l160"><span class="linenum"> 160</span></a>  
<a name="l161"><span class="linenum"> 161</span></a>      <span class="comment">/**</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">     * The users comments quick list</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">     * @property quicklist</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">     * @type M.assignfeedback_editpdf.quickcommentlist</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     * @protected</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">     */</span>
<a name="l167"><span class="linenum"> 167</span></a>      quicklist: null,
<a name="l168"><span class="linenum"> 168</span></a>  
<a name="l169"><span class="linenum"> 169</span></a>      <span class="comment">/**</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     * The search comments window.</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">     * @property searchcommentswindow</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">     * @type M.core.dialogue</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">     * @protected</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">     */</span>
<a name="l175"><span class="linenum"> 175</span></a>      searchcommentswindow: null,
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>  
<a name="l178"><span class="linenum"> 178</span></a>      <span class="comment">/**</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">     * The selected stamp picture.</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     * @property currentstamp</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     * @type String</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     * @protected</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     */</span>
<a name="l184"><span class="linenum"> 184</span></a>      currentstamp: null,
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>      <span class="comment">/**</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">     * The stamps.</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">     * @property stamps</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">     * @type Array</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">     * @protected</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">     */</span>
<a name="l192"><span class="linenum"> 192</span></a>      stamps: [],
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>      <span class="comment">/**</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">     * Prevent new comments from appearing</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">     * immediately after clicking off a current</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">     * comment</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment">     * @property editingcomment</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">     * @type Boolean</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">     * @public</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">     */</span>
<a name="l202"><span class="linenum"> 202</span></a>      editingcomment: false,
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>      <span class="comment">/**</span>
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">     * Called during the initialisation process of the object.</span>
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">     * @method initializer</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">     */</span>
<a name="l208"><span class="linenum"> 208</span></a>      initializer: function() {
<a name="l209"><span class="linenum"> 209</span></a>          var link;
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>          link = Y.one('#' + this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('linkid'));
<a name="l212"><span class="linenum"> 212</span></a>  
<a name="l213"><span class="linenum"> 213</span></a>          if (link) {
<a name="l214"><span class="linenum"> 214</span></a>              link.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('click', this.link_handler, this);
<a name="l215"><span class="linenum"> 215</span></a>              link.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('key', this.link_handler, 'down:13', this);
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">            // We call the amd module to see if we can take control of the review panel.</span>
<a name="l218"><span class="linenum"> 218</span></a>              <a class="function" onClick="logFunction('require')" href="../../../../../../../../_functions/require.html" onMouseOver="funcPopup(event,'require')">require</a>(['mod_assign/grading_review_panel'], function(ReviewPanelManager) {
<a name="l219"><span class="linenum"> 219</span></a>                  var panelManager = new ReviewPanelManager();
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>                  var panel = panelManager.getReviewPanel('assignfeedback_editpdf');
<a name="l222"><span class="linenum"> 222</span></a>                  if (panel) {
<a name="l223"><span class="linenum"> 223</span></a>                      panel = Y.one(panel);
<a name="l224"><span class="linenum"> 224</span></a>                      panel.empty();
<a name="l225"><span class="linenum"> 225</span></a>                      link.ancestor('.fitem').<a class="function" onClick="logFunction('hide')" href="../../../../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>();
<a name="l226"><span class="linenum"> 226</span></a>                      this.open_in_panel(panel);
<a name="l227"><span class="linenum"> 227</span></a>                  }
<a name="l228"><span class="linenum"> 228</span></a>                  this.currentedit.start = false;
<a name="l229"><span class="linenum"> 229</span></a>                  this.currentedit.end = false;
<a name="l230"><span class="linenum"> 230</span></a>                  if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('readonly')) {
<a name="l231"><span class="linenum"> 231</span></a>                      this.quicklist = new M.assignfeedback_editpdf.quickcommentlist(this);
<a name="l232"><span class="linenum"> 232</span></a>                  }
<a name="l233"><span class="linenum"> 233</span></a>              }.<a class="function" onClick="logFunction('bind')" href="../../../../../../../../_functions/bind.html" onMouseOver="funcPopup(event,'bind')">bind</a>(this));
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>          }
<a name="l236"><span class="linenum"> 236</span></a>      },
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>      <span class="comment">/**</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">     * Called to show/hide buttons and set the current colours/stamps.</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">     * @method refresh_button_state</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">     */</span>
<a name="l242"><span class="linenum"> 242</span></a>      refresh_button_state: function() {
<a name="l243"><span class="linenum"> 243</span></a>          var button, currenttoolnode, imgurl, drawingregion;
<a name="l244"><span class="linenum"> 244</span></a>  
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">        // Initalise the colour buttons.</span>
<a name="l246"><span class="linenum"> 246</span></a>          button = this.get_dialogue_element(SELECTOR.COMMENTCOLOURBUTTON);
<a name="l247"><span class="linenum"> 247</span></a>  
<a name="l248"><span class="linenum"> 248</span></a>          imgurl = M.util.image_url('background_colour_' + this.currentedit.commentcolour, 'assignfeedback_editpdf');
<a name="l249"><span class="linenum"> 249</span></a>          button.one('img').<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('src', imgurl);
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>          if (this.currentedit.commentcolour === 'clear') {
<a name="l252"><span class="linenum"> 252</span></a>              button.one('img').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('borderStyle', 'dashed');
<a name="l253"><span class="linenum"> 253</span></a>          } else {
<a name="l254"><span class="linenum"> 254</span></a>              button.one('img').<a class="function" onClick="logFunction('setStyle')" href="../../../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('borderStyle', 'solid');
<a name="l255"><span class="linenum"> 255</span></a>          }
<a name="l256"><span class="linenum"> 256</span></a>  
<a name="l257"><span class="linenum"> 257</span></a>          button = this.get_dialogue_element(SELECTOR.ANNOTATIONCOLOURBUTTON);
<a name="l258"><span class="linenum"> 258</span></a>          imgurl = M.util.image_url('colour_' + this.currentedit.annotationcolour, 'assignfeedback_editpdf');
<a name="l259"><span class="linenum"> 259</span></a>          button.one('img').<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('src', imgurl);
<a name="l260"><span class="linenum"> 260</span></a>  
<a name="l261"><span class="linenum"> 261</span></a>          currenttoolnode = this.get_dialogue_element(TOOLSELECTOR[this.currentedit.tool]);
<a name="l262"><span class="linenum"> 262</span></a>          currenttoolnode.<a class="function" onClick="logFunction('addClass')" href="../../../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>('assignfeedback_editpdf_selectedbutton');
<a name="l263"><span class="linenum"> 263</span></a>          currenttoolnode.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('aria-pressed', 'true');
<a name="l264"><span class="linenum"> 264</span></a>          drawingregion = this.get_dialogue_element(SELECTOR.DRAWINGREGION);
<a name="l265"><span class="linenum"> 265</span></a>          drawingregion.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('data-currenttool', this.currentedit.tool);
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>          button = this.get_dialogue_element(SELECTOR.STAMPSBUTTON);
<a name="l268"><span class="linenum"> 268</span></a>          button.one('img').setAttrs({'src': this.get_stamp_image_url(this.currentedit.stamp),
<a name="l269"><span class="linenum"> 269</span></a>                                      'height': '16',
<a name="l270"><span class="linenum"> 270</span></a>                                      'width': '16'});
<a name="l271"><span class="linenum"> 271</span></a>      },
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>      <span class="comment">/**</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">     * Called to get the bounds of the drawing region.</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">     * @method get_canvas_bounds</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">     */</span>
<a name="l277"><span class="linenum"> 277</span></a>      get_canvas_bounds: function() {
<a name="l278"><span class="linenum"> 278</span></a>          var canvas = this.get_dialogue_element(SELECTOR.DRAWINGCANVAS),
<a name="l279"><span class="linenum"> 279</span></a>              offsetcanvas = canvas.getXY(),
<a name="l280"><span class="linenum"> 280</span></a>              offsetleft = offsetcanvas[0],
<a name="l281"><span class="linenum"> 281</span></a>              offsettop = offsetcanvas[1],
<a name="l282"><span class="linenum"> 282</span></a>              width = parseInt(canvas.<a class="function" onClick="logFunction('getStyle')" href="../../../../../../../../_functions/getstyle.html" onMouseOver="funcPopup(event,'getstyle')">getStyle</a>('width'), 10),
<a name="l283"><span class="linenum"> 283</span></a>              height = parseInt(canvas.<a class="function" onClick="logFunction('getStyle')" href="../../../../../../../../_functions/getstyle.html" onMouseOver="funcPopup(event,'getstyle')">getStyle</a>('height'), 10);
<a name="l284"><span class="linenum"> 284</span></a>  
<a name="l285"><span class="linenum"> 285</span></a>          return new M.assignfeedback_editpdf.<a class="function" onClick="logFunction('rect')" href="../../../../../../../../_functions/rect.html" onMouseOver="funcPopup(event,'rect')">rect</a>(offsetleft, offsettop, width, height);
<a name="l286"><span class="linenum"> 286</span></a>      },
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>      <span class="comment">/**</span>
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment">     * Called to translate from window coordinates to canvas coordinates.</span>
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">     * @method get_canvas_coordinates</span>
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">     * @param M.assignfeedback_editpdf.point point in window coordinats.</span>
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">     */</span>
<a name="l293"><span class="linenum"> 293</span></a>      get_canvas_coordinates: function(point) {
<a name="l294"><span class="linenum"> 294</span></a>          var bounds = this.get_canvas_bounds(),
<a name="l295"><span class="linenum"> 295</span></a>              newpoint = new M.assignfeedback_editpdf.point(point.x - bounds.x, point.y - bounds.y);
<a name="l296"><span class="linenum"> 296</span></a>  
<a name="l297"><span class="linenum"> 297</span></a>          bounds.x = bounds.y = 0;
<a name="l298"><span class="linenum"> 298</span></a>  
<a name="l299"><span class="linenum"> 299</span></a>          newpoint.<a class="function" onClick="logFunction('clip')" href="../../../../../../../../_functions/clip.html" onMouseOver="funcPopup(event,'clip')">clip</a>(bounds);
<a name="l300"><span class="linenum"> 300</span></a>          return newpoint;
<a name="l301"><span class="linenum"> 301</span></a>      },
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>      <span class="comment">/**</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">     * Called to translate from canvas coordinates to window coordinates.</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">     * @method get_window_coordinates</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">     * @param M.assignfeedback_editpdf.point point in window coordinats.</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">     */</span>
<a name="l308"><span class="linenum"> 308</span></a>      get_window_coordinates: function(point) {
<a name="l309"><span class="linenum"> 309</span></a>          var bounds = this.get_canvas_bounds(),
<a name="l310"><span class="linenum"> 310</span></a>              newpoint = new M.assignfeedback_editpdf.point(point.x + bounds.x, point.y + bounds.y);
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>          return newpoint;
<a name="l313"><span class="linenum"> 313</span></a>      },
<a name="l314"><span class="linenum"> 314</span></a>  
<a name="l315"><span class="linenum"> 315</span></a>      <span class="comment">/**</span>
<a name="l316"><span class="linenum"> 316</span></a>  <span class="comment">     * Open the edit-pdf editor in the panel in the page instead of a popup.</span>
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">     * @method open_in_panel</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">     */</span>
<a name="l319"><span class="linenum"> 319</span></a>      open_in_panel: function(panel) {
<a name="l320"><span class="linenum"> 320</span></a>          var drawingcanvas, drawingregion;
<a name="l321"><span class="linenum"> 321</span></a>  
<a name="l322"><span class="linenum"> 322</span></a>          this.panel = panel;
<a name="l323"><span class="linenum"> 323</span></a>          panel.<a class="function" onClick="logFunction('append')" href="../../../../../../../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>(this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('body'));
<a name="l324"><span class="linenum"> 324</span></a>          panel.<a class="function" onClick="logFunction('addClass')" href="../../../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(CSS.DIALOGUE);
<a name="l325"><span class="linenum"> 325</span></a>  
<a name="l326"><span class="linenum"> 326</span></a>          this.loadingicon = this.get_dialogue_element(SELECTOR.LOADINGICON);
<a name="l327"><span class="linenum"> 327</span></a>  
<a name="l328"><span class="linenum"> 328</span></a>          drawingcanvas = this.get_dialogue_element(SELECTOR.DRAWINGCANVAS);
<a name="l329"><span class="linenum"> 329</span></a>          this.graphic = new Y.Graphic({render: drawingcanvas});
<a name="l330"><span class="linenum"> 330</span></a>  
<a name="l331"><span class="linenum"> 331</span></a>          drawingregion = this.get_dialogue_element(SELECTOR.DRAWINGREGION);
<a name="l332"><span class="linenum"> 332</span></a>          drawingregion.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('scroll', this.move_canvas, this);
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>          if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('readonly')) {
<a name="l335"><span class="linenum"> 335</span></a>              drawingcanvas.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('gesturemovestart', this.edit_start, null, this);
<a name="l336"><span class="linenum"> 336</span></a>              drawingcanvas.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('gesturemove', this.edit_move, null, this);
<a name="l337"><span class="linenum"> 337</span></a>              drawingcanvas.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('gesturemoveend', this.edit_end, null, this);
<a name="l338"><span class="linenum"> 338</span></a>  
<a name="l339"><span class="linenum"> 339</span></a>              this.refresh_button_state();
<a name="l340"><span class="linenum"> 340</span></a>          }
<a name="l341"><span class="linenum"> 341</span></a>  
<a name="l342"><span class="linenum"> 342</span></a>          this.<a class="function" onClick="logFunction('load_all_pages')" href="../../../../../../../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l343"><span class="linenum"> 343</span></a>      },
<a name="l344"><span class="linenum"> 344</span></a>  
<a name="l345"><span class="linenum"> 345</span></a>      <span class="comment">/**</span>
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">     * Called to open the pdf editing dialogue.</span>
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">     * @method link_handler</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">     */</span>
<a name="l349"><span class="linenum"> 349</span></a>      link_handler: function(e) {
<a name="l350"><span class="linenum"> 350</span></a>          var drawingcanvas, drawingregion;
<a name="l351"><span class="linenum"> 351</span></a>          var resize = true;
<a name="l352"><span class="linenum"> 352</span></a>          e.preventDefault();
<a name="l353"><span class="linenum"> 353</span></a>  
<a name="l354"><span class="linenum"> 354</span></a>          if (!this.dialogue) {
<a name="l355"><span class="linenum"> 355</span></a>              this.dialogue = new M.core.dialogue({
<a name="l356"><span class="linenum"> 356</span></a>                  headerContent: this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('header'),
<a name="l357"><span class="linenum"> 357</span></a>                  bodyContent: this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('body'),
<a name="l358"><span class="linenum"> 358</span></a>                  footerContent: this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('footer'),
<a name="l359"><span class="linenum"> 359</span></a>                  modal: true,
<a name="l360"><span class="linenum"> 360</span></a>                  width: '840px',
<a name="l361"><span class="linenum"> 361</span></a>                  visible: false,
<a name="l362"><span class="linenum"> 362</span></a>                  draggable: true
<a name="l363"><span class="linenum"> 363</span></a>              });
<a name="l364"><span class="linenum"> 364</span></a>  
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">            // Add custom class for styling.</span>
<a name="l366"><span class="linenum"> 366</span></a>              this.dialogue.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('boundingBox').<a class="function" onClick="logFunction('addClass')" href="../../../../../../../../_functions/addclass.html" onMouseOver="funcPopup(event,'addclass')">addClass</a>(CSS.DIALOGUE);
<a name="l367"><span class="linenum"> 367</span></a>  
<a name="l368"><span class="linenum"> 368</span></a>              this.loadingicon = this.get_dialogue_element(SELECTOR.LOADINGICON);
<a name="l369"><span class="linenum"> 369</span></a>  
<a name="l370"><span class="linenum"> 370</span></a>              drawingcanvas = this.get_dialogue_element(SELECTOR.DRAWINGCANVAS);
<a name="l371"><span class="linenum"> 371</span></a>              this.graphic = new Y.Graphic({render: drawingcanvas});
<a name="l372"><span class="linenum"> 372</span></a>  
<a name="l373"><span class="linenum"> 373</span></a>              drawingregion = this.get_dialogue_element(SELECTOR.DRAWINGREGION);
<a name="l374"><span class="linenum"> 374</span></a>              drawingregion.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('scroll', this.move_canvas, this);
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>              if (!this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('readonly')) {
<a name="l377"><span class="linenum"> 377</span></a>                  drawingcanvas.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('gesturemovestart', this.edit_start, null, this);
<a name="l378"><span class="linenum"> 378</span></a>                  drawingcanvas.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('gesturemove', this.edit_move, null, this);
<a name="l379"><span class="linenum"> 379</span></a>                  drawingcanvas.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('gesturemoveend', this.edit_end, null, this);
<a name="l380"><span class="linenum"> 380</span></a>  
<a name="l381"><span class="linenum"> 381</span></a>                  this.refresh_button_state();
<a name="l382"><span class="linenum"> 382</span></a>              }
<a name="l383"><span class="linenum"> 383</span></a>  
<a name="l384"><span class="linenum"> 384</span></a>              this.<a class="function" onClick="logFunction('load_all_pages')" href="../../../../../../../../_functions/load_all_pages.html" onMouseOver="funcPopup(event,'load_all_pages')">load_all_pages</a>();
<a name="l385"><span class="linenum"> 385</span></a>              drawingcanvas.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('windowresize', this.resize, this);
<a name="l386"><span class="linenum"> 386</span></a>  
<a name="l387"><span class="linenum"> 387</span></a>              resize = false;
<a name="l388"><span class="linenum"> 388</span></a>          }
<a name="l389"><span class="linenum"> 389</span></a>          this.dialogue.centerDialogue();
<a name="l390"><span class="linenum"> 390</span></a>          this.dialogue.<a class="function" onClick="logFunction('show')" href="../../../../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l391"><span class="linenum"> 391</span></a>  
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">        // Redraw when the dialogue is moved, to ensure the absolute elements are all positioned correctly.</span>
<a name="l393"><span class="linenum"> 393</span></a>          this.dialogue.dd.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('drag:end', this.redraw, this);
<a name="l394"><span class="linenum"> 394</span></a>          if (resize) {
<a name="l395"><span class="linenum"> 395</span></a>              this.<a class="function" onClick="logFunction('resize')" href="../../../../../../../../_functions/resize.html" onMouseOver="funcPopup(event,'resize')">resize</a>(); <span class="comment">// When re-opening the dialog call redraw, to make sure the size + layout is correct.</span>
<a name="l396"><span class="linenum"> 396</span></a>          }
<a name="l397"><span class="linenum"> 397</span></a>      },
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>      <span class="comment">/**</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">     * Called to load the information and annotations for all pages.</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">     * @method load_all_pages</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">     */</span>
<a name="l403"><span class="linenum"> 403</span></a>      load_all_pages: function() {
<a name="l404"><span class="linenum"> 404</span></a>          var ajaxurl = AJAXBASE,
<a name="l405"><span class="linenum"> 405</span></a>              config,
<a name="l406"><span class="linenum"> 406</span></a>              checkconversionstatus,
<a name="l407"><span class="linenum"> 407</span></a>              ajax_error_total;
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>          config = {
<a name="l410"><span class="linenum"> 410</span></a>              method: 'get',
<a name="l411"><span class="linenum"> 411</span></a>              context: this,
<a name="l412"><span class="linenum"> 412</span></a>              sync: false,
<a name="l413"><span class="linenum"> 413</span></a>              data: {
<a name="l414"><span class="linenum"> 414</span></a>                  sesskey: M.cfg.sesskey,
<a name="l415"><span class="linenum"> 415</span></a>                  action: 'loadallpages',
<a name="l416"><span class="linenum"> 416</span></a>                  userid: this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('userid'),
<a name="l417"><span class="linenum"> 417</span></a>                  attemptnumber: this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('attemptnumber'),
<a name="l418"><span class="linenum"> 418</span></a>                  assignmentid: this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('assignmentid'),
<a name="l419"><span class="linenum"> 419</span></a>                  readonly: this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('readonly') ? 1 : 0
<a name="l420"><span class="linenum"> 420</span></a>              },
<a name="l421"><span class="linenum"> 421</span></a>              on: {
<a name="l422"><span class="linenum"> 422</span></a>                  success: function(tid, response) {
<a name="l423"><span class="linenum"> 423</span></a>                      this.all_pages_loaded(response.responseText);
<a name="l424"><span class="linenum"> 424</span></a>                  },
<a name="l425"><span class="linenum"> 425</span></a>                  failure: function(tid, response) {
<a name="l426"><span class="linenum"> 426</span></a>                      return new M.core.exception(response.responseText);
<a name="l427"><span class="linenum"> 427</span></a>                  }
<a name="l428"><span class="linenum"> 428</span></a>              }
<a name="l429"><span class="linenum"> 429</span></a>          };
<a name="l430"><span class="linenum"> 430</span></a>  
<a name="l431"><span class="linenum"> 431</span></a>          Y.<a class="function" onClick="logFunction('io')" href="../../../../../../../../_functions/io.html" onMouseOver="funcPopup(event,'io')">io</a>(ajaxurl, config);
<a name="l432"><span class="linenum"> 432</span></a>  
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">        // If pages are not loaded, check PDF conversion status for the progress bar.</span>
<a name="l434"><span class="linenum"> 434</span></a>          if (this.pagecount &lt;= 0) {
<a name="l435"><span class="linenum"> 435</span></a>              checkconversionstatus = {
<a name="l436"><span class="linenum"> 436</span></a>                  method: 'get',
<a name="l437"><span class="linenum"> 437</span></a>                  context: this,
<a name="l438"><span class="linenum"> 438</span></a>                  sync: false,
<a name="l439"><span class="linenum"> 439</span></a>                  data: {
<a name="l440"><span class="linenum"> 440</span></a>                      sesskey: M.cfg.sesskey,
<a name="l441"><span class="linenum"> 441</span></a>                      action: 'conversionstatus',
<a name="l442"><span class="linenum"> 442</span></a>                      userid: this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('userid'),
<a name="l443"><span class="linenum"> 443</span></a>                      attemptnumber: this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('attemptnumber'),
<a name="l444"><span class="linenum"> 444</span></a>                      assignmentid: this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('assignmentid')
<a name="l445"><span class="linenum"> 445</span></a>                  },
<a name="l446"><span class="linenum"> 446</span></a>                  on: {
<a name="l447"><span class="linenum"> 447</span></a>                      success: function(tid, response) {
<a name="l448"><span class="linenum"> 448</span></a>                          ajax_error_total = 0;
<a name="l449"><span class="linenum"> 449</span></a>                          if (this.pagecount === 0) {
<a name="l450"><span class="linenum"> 450</span></a>                              var pagetotal = this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('pagetotal');
<a name="l451"><span class="linenum"> 451</span></a>  
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">                            // Update the progress bar.</span>
<a name="l453"><span class="linenum"> 453</span></a>                              var progressbarcontainer = this.get_dialogue_element(SELECTOR.PROGRESSBARCONTAINER);
<a name="l454"><span class="linenum"> 454</span></a>                              var progressbar = progressbarcontainer.one('.bar');
<a name="l455"><span class="linenum"> 455</span></a>                              if (progressbar) {
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">                                // Calculate progress.</span>
<a name="l457"><span class="linenum"> 457</span></a>                                  var progress = (response.response / pagetotal) * 100;
<a name="l458"><span class="linenum"> 458</span></a>                                  progressbar.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('width', progress + '%');
<a name="l459"><span class="linenum"> 459</span></a>                                  progressbarcontainer.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('aria-valuenow', progress);
<a name="l460"><span class="linenum"> 460</span></a>                              }
<a name="l461"><span class="linenum"> 461</span></a>  
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">                            // New ajax request delayed of a second.</span>
<a name="l463"><span class="linenum"> 463</span></a>                              Y.later(1000, this, function() {
<a name="l464"><span class="linenum"> 464</span></a>                                  Y.<a class="function" onClick="logFunction('io')" href="../../../../../../../../_functions/io.html" onMouseOver="funcPopup(event,'io')">io</a>(AJAXBASEPROGRESS, checkconversionstatus);
<a name="l465"><span class="linenum"> 465</span></a>                              });
<a name="l466"><span class="linenum"> 466</span></a>                          }
<a name="l467"><span class="linenum"> 467</span></a>                      },
<a name="l468"><span class="linenum"> 468</span></a>                      failure: function(tid, response) {
<a name="l469"><span class="linenum"> 469</span></a>                          ajax_error_total = ajax_error_total + 1;
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment">                        // We only continue on error if the all pages were not generated,</span>
<a name="l471"><span class="linenum"> 471</span></a>  <span class="comment">                        // and if the ajax call did not produce 5 errors in the row.</span>
<a name="l472"><span class="linenum"> 472</span></a>                          if (this.pagecount === 0 &amp;&amp; ajax_error_total &lt; 5) {
<a name="l473"><span class="linenum"> 473</span></a>                              Y.later(1000, this, function() {
<a name="l474"><span class="linenum"> 474</span></a>                                  Y.<a class="function" onClick="logFunction('io')" href="../../../../../../../../_functions/io.html" onMouseOver="funcPopup(event,'io')">io</a>(AJAXBASEPROGRESS, checkconversionstatus);
<a name="l475"><span class="linenum"> 475</span></a>                              });
<a name="l476"><span class="linenum"> 476</span></a>                          }
<a name="l477"><span class="linenum"> 477</span></a>                          return new M.core.exception(response.responseText);
<a name="l478"><span class="linenum"> 478</span></a>                      }
<a name="l479"><span class="linenum"> 479</span></a>                  }
<a name="l480"><span class="linenum"> 480</span></a>              };
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">            // We start the AJAX &quot;generated page total number&quot; call a second later to give a chance to</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment">            // the AJAX &quot;combined pdf generation&quot; call to clean the previous submission images.</span>
<a name="l483"><span class="linenum"> 483</span></a>              Y.later(1000, this, function() {
<a name="l484"><span class="linenum"> 484</span></a>                  ajax_error_total = 0;
<a name="l485"><span class="linenum"> 485</span></a>                  Y.<a class="function" onClick="logFunction('io')" href="../../../../../../../../_functions/io.html" onMouseOver="funcPopup(event,'io')">io</a>(AJAXBASEPROGRESS, checkconversionstatus);
<a name="l486"><span class="linenum"> 486</span></a>              });
<a name="l487"><span class="linenum"> 487</span></a>          }
<a name="l488"><span class="linenum"> 488</span></a>      },
<a name="l489"><span class="linenum"> 489</span></a>  
<a name="l490"><span class="linenum"> 490</span></a>      <span class="comment">/**</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">     * The info about all pages in the pdf has been returned.</span>
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment">     * @param string The ajax response as text.</span>
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment">     * @protected</span>
<a name="l494"><span class="linenum"> 494</span></a>  <span class="comment">     * @method all_pages_loaded</span>
<a name="l495"><span class="linenum"> 495</span></a>  <span class="comment">     */</span>
<a name="l496"><span class="linenum"> 496</span></a>      all_pages_loaded: function(responsetext) {
<a name="l497"><span class="linenum"> 497</span></a>          var data, i, j, comment, error;
<a name="l498"><span class="linenum"> 498</span></a>          try {
<a name="l499"><span class="linenum"> 499</span></a>              data = Y.JSON.<a class="function" onClick="logFunction('parse')" href="../../../../../../../../_functions/parse.html" onMouseOver="funcPopup(event,'parse')">parse</a>(responsetext);
<a name="l500"><span class="linenum"> 500</span></a>              if (data.error || !data.pagecount) {
<a name="l501"><span class="linenum"> 501</span></a>                  if (this.dialogue) {
<a name="l502"><span class="linenum"> 502</span></a>                      this.dialogue.<a class="function" onClick="logFunction('hide')" href="../../../../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>();
<a name="l503"><span class="linenum"> 503</span></a>                  }
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment">                // Display alert dialogue.</span>
<a name="l505"><span class="linenum"> 505</span></a>                  error = new M.core.<a class="function" onClick="logFunction('alert')" href="../../../../../../../../_functions/alert.html" onMouseOver="funcPopup(event,'alert')">alert</a>({message: M.util.<a class="function" onClick="logFunction('get_string')" href="../../../../../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cannotopenpdf', 'assignfeedback_editpdf')});
<a name="l506"><span class="linenum"> 506</span></a>                  error.<a class="function" onClick="logFunction('show')" href="../../../../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l507"><span class="linenum"> 507</span></a>                  return;
<a name="l508"><span class="linenum"> 508</span></a>              }
<a name="l509"><span class="linenum"> 509</span></a>          } catch (e) {
<a name="l510"><span class="linenum"> 510</span></a>              if (this.dialogue) {
<a name="l511"><span class="linenum"> 511</span></a>                  this.dialogue.<a class="function" onClick="logFunction('hide')" href="../../../../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>();
<a name="l512"><span class="linenum"> 512</span></a>              }
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">            // Display alert dialogue.</span>
<a name="l514"><span class="linenum"> 514</span></a>              error = new M.core.<a class="function" onClick="logFunction('alert')" href="../../../../../../../../_functions/alert.html" onMouseOver="funcPopup(event,'alert')">alert</a>({title: M.util.<a class="function" onClick="logFunction('get_string')" href="../../../../../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cannotopenpdf', 'assignfeedback_editpdf')});
<a name="l515"><span class="linenum"> 515</span></a>              error.<a class="function" onClick="logFunction('show')" href="../../../../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l516"><span class="linenum"> 516</span></a>              return;
<a name="l517"><span class="linenum"> 517</span></a>          }
<a name="l518"><span class="linenum"> 518</span></a>  
<a name="l519"><span class="linenum"> 519</span></a>          this.pagecount = data.pagecount;
<a name="l520"><span class="linenum"> 520</span></a>          this.pages = data.pages;
<a name="l521"><span class="linenum"> 521</span></a>  
<a name="l522"><span class="linenum"> 522</span></a>          for (i = 0; i &lt; this.pages.length; i++) {
<a name="l523"><span class="linenum"> 523</span></a>              for (j = 0; j &lt; this.pages[i].comments.length; j++) {
<a name="l524"><span class="linenum"> 524</span></a>                  comment = this.pages[i].comments[j];
<a name="l525"><span class="linenum"> 525</span></a>                  this.pages[i].comments[j] = new M.assignfeedback_editpdf.comment(this,
<a name="l526"><span class="linenum"> 526</span></a>                                                                                   comment.gradeid,
<a name="l527"><span class="linenum"> 527</span></a>                                                                                   comment.pageno,
<a name="l528"><span class="linenum"> 528</span></a>                                                                                   comment.x,
<a name="l529"><span class="linenum"> 529</span></a>                                                                                   comment.y,
<a name="l530"><span class="linenum"> 530</span></a>                                                                                   comment.width,
<a name="l531"><span class="linenum"> 531</span></a>                                                                                   comment.colour,
<a name="l532"><span class="linenum"> 532</span></a>                                                                                   comment.rawtext);
<a name="l533"><span class="linenum"> 533</span></a>              }
<a name="l534"><span class="linenum"> 534</span></a>              for (j = 0; j &lt; this.pages[i].annotations.length; j++) {
<a name="l535"><span class="linenum"> 535</span></a>                  data = this.pages[i].annotations[j];
<a name="l536"><span class="linenum"> 536</span></a>                  this.pages[i].annotations[j] = this.create_annotation(data.type, data);
<a name="l537"><span class="linenum"> 537</span></a>              }
<a name="l538"><span class="linenum"> 538</span></a>          }
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">        // Update the ui.</span>
<a name="l541"><span class="linenum"> 541</span></a>          if (this.quicklist) {
<a name="l542"><span class="linenum"> 542</span></a>              this.quicklist.<a class="function" onClick="logFunction('load')" href="../../../../../../../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>();
<a name="l543"><span class="linenum"> 543</span></a>          }
<a name="l544"><span class="linenum"> 544</span></a>          this.setup_navigation();
<a name="l545"><span class="linenum"> 545</span></a>          this.setup_toolbar();
<a name="l546"><span class="linenum"> 546</span></a>          this.change_page();
<a name="l547"><span class="linenum"> 547</span></a>      },
<a name="l548"><span class="linenum"> 548</span></a>  
<a name="l549"><span class="linenum"> 549</span></a>      <span class="comment">/**</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">     * Get the full pluginfile url for an image file - just given the filename.</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">     *</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">     * @public</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">     * @method get_stamp_image_url</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">     * @param string filename</span>
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment">     */</span>
<a name="l556"><span class="linenum"> 556</span></a>      get_stamp_image_url: function(filename) {
<a name="l557"><span class="linenum"> 557</span></a>          var urls = this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('stampfiles'),
<a name="l558"><span class="linenum"> 558</span></a>              fullurl = '';
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>          Y.Array.<a class="phpfunction" onClick="logFunction('each')" href="../../../../../../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(urls, function(url) {
<a name="l561"><span class="linenum"> 561</span></a>              if (url.<a class="function" onClick="logFunction('indexOf')" href="../../../../../../../../_functions/indexof.html" onMouseOver="funcPopup(event,'indexof')">indexOf</a>(filename) &gt; 0) {
<a name="l562"><span class="linenum"> 562</span></a>                  fullurl = url;
<a name="l563"><span class="linenum"> 563</span></a>              }
<a name="l564"><span class="linenum"> 564</span></a>          }, this);
<a name="l565"><span class="linenum"> 565</span></a>  
<a name="l566"><span class="linenum"> 566</span></a>          return fullurl;
<a name="l567"><span class="linenum"> 567</span></a>      },
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>      <span class="comment">/**</span>
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment">     * Attach listeners and enable the color picker buttons.</span>
<a name="l571"><span class="linenum"> 571</span></a>  <span class="comment">     * @protected</span>
<a name="l572"><span class="linenum"> 572</span></a>  <span class="comment">     * @method setup_toolbar</span>
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment">     */</span>
<a name="l574"><span class="linenum"> 574</span></a>      setup_toolbar: function() {
<a name="l575"><span class="linenum"> 575</span></a>          var toolnode,
<a name="l576"><span class="linenum"> 576</span></a>              commentcolourbutton,
<a name="l577"><span class="linenum"> 577</span></a>              annotationcolourbutton,
<a name="l578"><span class="linenum"> 578</span></a>              searchcommentsbutton,
<a name="l579"><span class="linenum"> 579</span></a>              currentstampbutton,
<a name="l580"><span class="linenum"> 580</span></a>              stampfiles,
<a name="l581"><span class="linenum"> 581</span></a>              picker,
<a name="l582"><span class="linenum"> 582</span></a>              filename;
<a name="l583"><span class="linenum"> 583</span></a>  
<a name="l584"><span class="linenum"> 584</span></a>          searchcommentsbutton = this.get_dialogue_element(SELECTOR.SEARCHCOMMENTSBUTTON);
<a name="l585"><span class="linenum"> 585</span></a>          searchcommentsbutton.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('click', this.open_search_comments, this);
<a name="l586"><span class="linenum"> 586</span></a>          searchcommentsbutton.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('key', this.open_search_comments, 'down:13', this);
<a name="l587"><span class="linenum"> 587</span></a>  
<a name="l588"><span class="linenum"> 588</span></a>          if (this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('readonly')) {
<a name="l589"><span class="linenum"> 589</span></a>              return;
<a name="l590"><span class="linenum"> 590</span></a>          }
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">        // Setup the tool buttons.</span>
<a name="l592"><span class="linenum"> 592</span></a>          Y.<a class="phpfunction" onClick="logFunction('each')" href="../../../../../../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(TOOLSELECTOR, function(selector, tool) {
<a name="l593"><span class="linenum"> 593</span></a>              toolnode = this.get_dialogue_element(selector);
<a name="l594"><span class="linenum"> 594</span></a>              toolnode.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('click', this.handle_tool_button, this, tool);
<a name="l595"><span class="linenum"> 595</span></a>              toolnode.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('key', this.handle_tool_button, 'down:13', this, tool);
<a name="l596"><span class="linenum"> 596</span></a>              toolnode.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('aria-pressed', 'false');
<a name="l597"><span class="linenum"> 597</span></a>          }, this);
<a name="l598"><span class="linenum"> 598</span></a>  
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment">        // Set the default tool.</span>
<a name="l600"><span class="linenum"> 600</span></a>  
<a name="l601"><span class="linenum"> 601</span></a>          commentcolourbutton = this.get_dialogue_element(SELECTOR.COMMENTCOLOURBUTTON);
<a name="l602"><span class="linenum"> 602</span></a>          picker = new M.assignfeedback_editpdf.colourpicker({
<a name="l603"><span class="linenum"> 603</span></a>              buttonNode: commentcolourbutton,
<a name="l604"><span class="linenum"> 604</span></a>              colours: COMMENTCOLOUR,
<a name="l605"><span class="linenum"> 605</span></a>              iconprefix: 'background_colour_',
<a name="l606"><span class="linenum"> 606</span></a>              callback: function(e) {
<a name="l607"><span class="linenum"> 607</span></a>                  var colour = e.target.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('data-colour');
<a name="l608"><span class="linenum"> 608</span></a>                  if (!colour) {
<a name="l609"><span class="linenum"> 609</span></a>                      colour = e.target.ancestor().<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('data-colour');
<a name="l610"><span class="linenum"> 610</span></a>                  }
<a name="l611"><span class="linenum"> 611</span></a>                  this.currentedit.commentcolour = colour;
<a name="l612"><span class="linenum"> 612</span></a>                  this.handle_tool_button(e, &quot;comment&quot;);
<a name="l613"><span class="linenum"> 613</span></a>              },
<a name="l614"><span class="linenum"> 614</span></a>              context: this
<a name="l615"><span class="linenum"> 615</span></a>          });
<a name="l616"><span class="linenum"> 616</span></a>  
<a name="l617"><span class="linenum"> 617</span></a>          annotationcolourbutton = this.get_dialogue_element(SELECTOR.ANNOTATIONCOLOURBUTTON);
<a name="l618"><span class="linenum"> 618</span></a>          picker = new M.assignfeedback_editpdf.colourpicker({
<a name="l619"><span class="linenum"> 619</span></a>              buttonNode: annotationcolourbutton,
<a name="l620"><span class="linenum"> 620</span></a>              iconprefix: 'colour_',
<a name="l621"><span class="linenum"> 621</span></a>              colours: ANNOTATIONCOLOUR,
<a name="l622"><span class="linenum"> 622</span></a>              callback: function(e) {
<a name="l623"><span class="linenum"> 623</span></a>                  var colour = e.target.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('data-colour');
<a name="l624"><span class="linenum"> 624</span></a>                  if (!colour) {
<a name="l625"><span class="linenum"> 625</span></a>                      colour = e.target.ancestor().<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('data-colour');
<a name="l626"><span class="linenum"> 626</span></a>                  }
<a name="l627"><span class="linenum"> 627</span></a>                  this.currentedit.annotationcolour = colour;
<a name="l628"><span class="linenum"> 628</span></a>                  if (this.lastannotationtool) {
<a name="l629"><span class="linenum"> 629</span></a>                      this.handle_tool_button(e, this.lastannotationtool);
<a name="l630"><span class="linenum"> 630</span></a>                  } else {
<a name="l631"><span class="linenum"> 631</span></a>                      this.handle_tool_button(e, &quot;pen&quot;);
<a name="l632"><span class="linenum"> 632</span></a>                  }
<a name="l633"><span class="linenum"> 633</span></a>              },
<a name="l634"><span class="linenum"> 634</span></a>              context: this
<a name="l635"><span class="linenum"> 635</span></a>          });
<a name="l636"><span class="linenum"> 636</span></a>  
<a name="l637"><span class="linenum"> 637</span></a>          stampfiles = this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('stampfiles');
<a name="l638"><span class="linenum"> 638</span></a>          if (stampfiles.length &lt;= 0) {
<a name="l639"><span class="linenum"> 639</span></a>              this.get_dialogue_element(TOOLSELECTOR.stamp).ancestor().<a class="function" onClick="logFunction('hide')" href="../../../../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>();
<a name="l640"><span class="linenum"> 640</span></a>          } else {
<a name="l641"><span class="linenum"> 641</span></a>              filename = stampfiles[0].<a class="phpfunction" onClick="logFunction('substr')" href="../../../../../../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(stampfiles[0].lastIndexOf('/') + 1);
<a name="l642"><span class="linenum"> 642</span></a>              this.currentedit.stamp = filename;
<a name="l643"><span class="linenum"> 643</span></a>              currentstampbutton = this.get_dialogue_element(SELECTOR.STAMPSBUTTON);
<a name="l644"><span class="linenum"> 644</span></a>  
<a name="l645"><span class="linenum"> 645</span></a>              picker = new M.assignfeedback_editpdf.stamppicker({
<a name="l646"><span class="linenum"> 646</span></a>                  buttonNode: currentstampbutton,
<a name="l647"><span class="linenum"> 647</span></a>                  stamps: stampfiles,
<a name="l648"><span class="linenum"> 648</span></a>                  callback: function(e) {
<a name="l649"><span class="linenum"> 649</span></a>                      var stamp = e.target.<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('data-stamp'),
<a name="l650"><span class="linenum"> 650</span></a>                          filename;
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>                      if (!stamp) {
<a name="l653"><span class="linenum"> 653</span></a>                          stamp = e.target.ancestor().<a class="function" onClick="logFunction('getAttribute')" href="../../../../../../../../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('data-stamp');
<a name="l654"><span class="linenum"> 654</span></a>                      }
<a name="l655"><span class="linenum"> 655</span></a>                      filename = stamp.<a class="phpfunction" onClick="logFunction('substr')" href="../../../../../../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(stamp.lastIndexOf('/'));
<a name="l656"><span class="linenum"> 656</span></a>                      this.currentedit.stamp = filename;
<a name="l657"><span class="linenum"> 657</span></a>                      this.handle_tool_button(e, &quot;stamp&quot;);
<a name="l658"><span class="linenum"> 658</span></a>                  },
<a name="l659"><span class="linenum"> 659</span></a>                  context: this
<a name="l660"><span class="linenum"> 660</span></a>              });
<a name="l661"><span class="linenum"> 661</span></a>              this.refresh_button_state();
<a name="l662"><span class="linenum"> 662</span></a>          }
<a name="l663"><span class="linenum"> 663</span></a>      },
<a name="l664"><span class="linenum"> 664</span></a>  
<a name="l665"><span class="linenum"> 665</span></a>      <span class="comment">/**</span>
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment">     * Change the current tool.</span>
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment">     * @protected</span>
<a name="l668"><span class="linenum"> 668</span></a>  <span class="comment">     * @method handle_tool_button</span>
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment">     */</span>
<a name="l670"><span class="linenum"> 670</span></a>      handle_tool_button: function(e, tool) {
<a name="l671"><span class="linenum"> 671</span></a>          var currenttoolnode;
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>          e.preventDefault();
<a name="l674"><span class="linenum"> 674</span></a>  
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment">        // Change style of the pressed button.</span>
<a name="l676"><span class="linenum"> 676</span></a>          currenttoolnode = this.get_dialogue_element(TOOLSELECTOR[this.currentedit.tool]);
<a name="l677"><span class="linenum"> 677</span></a>          currenttoolnode.removeClass('assignfeedback_editpdf_selectedbutton');
<a name="l678"><span class="linenum"> 678</span></a>          currenttoolnode.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('aria-pressed', 'false');
<a name="l679"><span class="linenum"> 679</span></a>          this.currentedit.tool = tool;
<a name="l680"><span class="linenum"> 680</span></a>  
<a name="l681"><span class="linenum"> 681</span></a>          if (tool !== &quot;comment&quot; &amp;&amp; tool !== &quot;select&quot; &amp;&amp; tool !== &quot;drag&quot; &amp;&amp; tool !== &quot;stamp&quot;) {
<a name="l682"><span class="linenum"> 682</span></a>              this.lastannotationtool = tool;
<a name="l683"><span class="linenum"> 683</span></a>          }
<a name="l684"><span class="linenum"> 684</span></a>          this.refresh_button_state();
<a name="l685"><span class="linenum"> 685</span></a>      },
<a name="l686"><span class="linenum"> 686</span></a>  
<a name="l687"><span class="linenum"> 687</span></a>      <span class="comment">/**</span>
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment">     * JSON encode the current page data - stripping out drawable references which cannot be encoded.</span>
<a name="l689"><span class="linenum"> 689</span></a>  <span class="comment">     * @protected</span>
<a name="l690"><span class="linenum"> 690</span></a>  <span class="comment">     * @method stringify_current_page</span>
<a name="l691"><span class="linenum"> 691</span></a>  <span class="comment">     * @return string</span>
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment">     */</span>
<a name="l693"><span class="linenum"> 693</span></a>      stringify_current_page: function() {
<a name="l694"><span class="linenum"> 694</span></a>          var comments = [],
<a name="l695"><span class="linenum"> 695</span></a>              annotations = [],
<a name="l696"><span class="linenum"> 696</span></a>              page,
<a name="l697"><span class="linenum"> 697</span></a>              i = 0;
<a name="l698"><span class="linenum"> 698</span></a>  
<a name="l699"><span class="linenum"> 699</span></a>          for (i = 0; i &lt; this.pages[this.currentpage].comments.length; i++) {
<a name="l700"><span class="linenum"> 700</span></a>              comments[i] = this.pages[this.currentpage].comments[i].clean();
<a name="l701"><span class="linenum"> 701</span></a>          }
<a name="l702"><span class="linenum"> 702</span></a>          for (i = 0; i &lt; this.pages[this.currentpage].annotations.length; i++) {
<a name="l703"><span class="linenum"> 703</span></a>              annotations[i] = this.pages[this.currentpage].annotations[i].clean();
<a name="l704"><span class="linenum"> 704</span></a>          }
<a name="l705"><span class="linenum"> 705</span></a>  
<a name="l706"><span class="linenum"> 706</span></a>          page = {comments: comments, annotations: annotations};
<a name="l707"><span class="linenum"> 707</span></a>  
<a name="l708"><span class="linenum"> 708</span></a>          return Y.JSON.stringify(page);
<a name="l709"><span class="linenum"> 709</span></a>      },
<a name="l710"><span class="linenum"> 710</span></a>  
<a name="l711"><span class="linenum"> 711</span></a>      <span class="comment">/**</span>
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">     * Generate a drawable from the current in progress edit.</span>
<a name="l713"><span class="linenum"> 713</span></a>  <span class="comment">     * @protected</span>
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment">     * @method get_current_drawable</span>
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment">     */</span>
<a name="l716"><span class="linenum"> 716</span></a>      get_current_drawable: function() {
<a name="l717"><span class="linenum"> 717</span></a>          var comment,
<a name="l718"><span class="linenum"> 718</span></a>              annotation,
<a name="l719"><span class="linenum"> 719</span></a>              drawable = false;
<a name="l720"><span class="linenum"> 720</span></a>  
<a name="l721"><span class="linenum"> 721</span></a>          if (!this.currentedit.start || !this.currentedit.end) {
<a name="l722"><span class="linenum"> 722</span></a>              return false;
<a name="l723"><span class="linenum"> 723</span></a>          }
<a name="l724"><span class="linenum"> 724</span></a>  
<a name="l725"><span class="linenum"> 725</span></a>          if (this.currentedit.tool === 'comment') {
<a name="l726"><span class="linenum"> 726</span></a>              comment = new M.assignfeedback_editpdf.comment(this);
<a name="l727"><span class="linenum"> 727</span></a>              drawable = comment.draw_current_edit(this.currentedit);
<a name="l728"><span class="linenum"> 728</span></a>          } else {
<a name="l729"><span class="linenum"> 729</span></a>              annotation = this.create_annotation(this.currentedit.tool, {});
<a name="l730"><span class="linenum"> 730</span></a>              if (annotation) {
<a name="l731"><span class="linenum"> 731</span></a>                  drawable = annotation.draw_current_edit(this.currentedit);
<a name="l732"><span class="linenum"> 732</span></a>              }
<a name="l733"><span class="linenum"> 733</span></a>          }
<a name="l734"><span class="linenum"> 734</span></a>  
<a name="l735"><span class="linenum"> 735</span></a>          return drawable;
<a name="l736"><span class="linenum"> 736</span></a>      },
<a name="l737"><span class="linenum"> 737</span></a>  
<a name="l738"><span class="linenum"> 738</span></a>      <span class="comment">/**</span>
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">     * Find an element within the dialogue.</span>
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">     * @protected</span>
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment">     * @method get_dialogue_element</span>
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">     */</span>
<a name="l743"><span class="linenum"> 743</span></a>      get_dialogue_element: function(selector) {
<a name="l744"><span class="linenum"> 744</span></a>          if (this.panel) {
<a name="l745"><span class="linenum"> 745</span></a>              return this.panel.one(selector);
<a name="l746"><span class="linenum"> 746</span></a>          } else {
<a name="l747"><span class="linenum"> 747</span></a>              return this.dialogue.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('boundingBox').one(selector);
<a name="l748"><span class="linenum"> 748</span></a>          }
<a name="l749"><span class="linenum"> 749</span></a>      },
<a name="l750"><span class="linenum"> 750</span></a>  
<a name="l751"><span class="linenum"> 751</span></a>      <span class="comment">/**</span>
<a name="l752"><span class="linenum"> 752</span></a>  <span class="comment">     * Redraw the active edit.</span>
<a name="l753"><span class="linenum"> 753</span></a>  <span class="comment">     * @protected</span>
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment">     * @method redraw_active_edit</span>
<a name="l755"><span class="linenum"> 755</span></a>  <span class="comment">     */</span>
<a name="l756"><span class="linenum"> 756</span></a>      redraw_current_edit: function() {
<a name="l757"><span class="linenum"> 757</span></a>          if (this.currentdrawable) {
<a name="l758"><span class="linenum"> 758</span></a>              this.currentdrawable.erase();
<a name="l759"><span class="linenum"> 759</span></a>          }
<a name="l760"><span class="linenum"> 760</span></a>          this.currentdrawable = this.get_current_drawable();
<a name="l761"><span class="linenum"> 761</span></a>      },
<a name="l762"><span class="linenum"> 762</span></a>  
<a name="l763"><span class="linenum"> 763</span></a>      <span class="comment">/**</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment">     * Event handler for mousedown or touchstart.</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment">     * @protected</span>
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment">     * @param Event</span>
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment">     * @method edit_start</span>
<a name="l768"><span class="linenum"> 768</span></a>  <span class="comment">     */</span>
<a name="l769"><span class="linenum"> 769</span></a>      edit_start: function(e) {
<a name="l770"><span class="linenum"> 770</span></a>          e.preventDefault();
<a name="l771"><span class="linenum"> 771</span></a>          var canvas = this.get_dialogue_element(SELECTOR.DRAWINGCANVAS),
<a name="l772"><span class="linenum"> 772</span></a>              offset = canvas.getXY(),
<a name="l773"><span class="linenum"> 773</span></a>              scrolltop = canvas.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('docScrollY'),
<a name="l774"><span class="linenum"> 774</span></a>              scrollleft = canvas.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('docScrollX'),
<a name="l775"><span class="linenum"> 775</span></a>              point = {x: e.clientX - offset[0] + scrollleft,
<a name="l776"><span class="linenum"> 776</span></a>                       y: e.clientY - offset[1] + scrolltop},
<a name="l777"><span class="linenum"> 777</span></a>              selected = false,
<a name="l778"><span class="linenum"> 778</span></a>              lastannotation;
<a name="l779"><span class="linenum"> 779</span></a>  
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment">        // Ignore right mouse click.</span>
<a name="l781"><span class="linenum"> 781</span></a>          if (e.button === 3) {
<a name="l782"><span class="linenum"> 782</span></a>              return;
<a name="l783"><span class="linenum"> 783</span></a>          }
<a name="l784"><span class="linenum"> 784</span></a>  
<a name="l785"><span class="linenum"> 785</span></a>          if (this.currentedit.starttime) {
<a name="l786"><span class="linenum"> 786</span></a>              return;
<a name="l787"><span class="linenum"> 787</span></a>          }
<a name="l788"><span class="linenum"> 788</span></a>  
<a name="l789"><span class="linenum"> 789</span></a>          if (this.editingcomment) {
<a name="l790"><span class="linenum"> 790</span></a>              return;
<a name="l791"><span class="linenum"> 791</span></a>          }
<a name="l792"><span class="linenum"> 792</span></a>  
<a name="l793"><span class="linenum"> 793</span></a>          this.currentedit.starttime = new <a class="phpfunction" onClick="logFunction('Date')" href="../../../../../../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>().<a class="function" onClick="logFunction('getTime')" href="../../../../../../../../_functions/gettime.html" onMouseOver="funcPopup(event,'gettime')">getTime</a>();
<a name="l794"><span class="linenum"> 794</span></a>          this.currentedit.start = point;
<a name="l795"><span class="linenum"> 795</span></a>          this.currentedit.end = {x: point.x, y: point.y};
<a name="l796"><span class="linenum"> 796</span></a>  
<a name="l797"><span class="linenum"> 797</span></a>          if (this.currentedit.tool === 'select') {
<a name="l798"><span class="linenum"> 798</span></a>              var x = this.currentedit.end.x,
<a name="l799"><span class="linenum"> 799</span></a>                  y = this.currentedit.end.y,
<a name="l800"><span class="linenum"> 800</span></a>                  annotations = this.pages[this.currentpage].annotations;
<a name="l801"><span class="linenum"> 801</span></a>  <span class="comment">            // Find the first annotation whose bounds encompass the click.</span>
<a name="l802"><span class="linenum"> 802</span></a>              Y.<a class="phpfunction" onClick="logFunction('each')" href="../../../../../../../../_functions/each.html" onMouseOver="phpfuncPopup(event,'each')">each</a>(annotations, function(annotation) {
<a name="l803"><span class="linenum"> 803</span></a>                  if (((x - annotation.x) * (x - annotation.endx)) &lt;= 0 &amp;&amp;
<a name="l804"><span class="linenum"> 804</span></a>                      ((y - annotation.y) * (y - annotation.endy)) &lt;= 0) {
<a name="l805"><span class="linenum"> 805</span></a>                      selected = annotation;
<a name="l806"><span class="linenum"> 806</span></a>                  }
<a name="l807"><span class="linenum"> 807</span></a>              });
<a name="l808"><span class="linenum"> 808</span></a>  
<a name="l809"><span class="linenum"> 809</span></a>              if (selected) {
<a name="l810"><span class="linenum"> 810</span></a>                  lastannotation = this.currentannotation;
<a name="l811"><span class="linenum"> 811</span></a>                  this.currentannotation = selected;
<a name="l812"><span class="linenum"> 812</span></a>                  if (lastannotation &amp;&amp; lastannotation !== selected) {
<a name="l813"><span class="linenum"> 813</span></a>  <span class="comment">                    // Redraw the last selected annotation to remove the highlight.</span>
<a name="l814"><span class="linenum"> 814</span></a>                      if (lastannotation.drawable) {
<a name="l815"><span class="linenum"> 815</span></a>                          lastannotation.drawable.erase();
<a name="l816"><span class="linenum"> 816</span></a>                          this.drawables.<a class="function" onClick="logFunction('push')" href="../../../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(lastannotation.<a class="function" onClick="logFunction('draw')" href="../../../../../../../../_functions/draw.html" onMouseOver="funcPopup(event,'draw')">draw</a>());
<a name="l817"><span class="linenum"> 817</span></a>                      }
<a name="l818"><span class="linenum"> 818</span></a>                  }
<a name="l819"><span class="linenum"> 819</span></a>  <span class="comment">                // Redraw the newly selected annotation to show the highlight.</span>
<a name="l820"><span class="linenum"> 820</span></a>                  if (this.currentannotation.drawable) {
<a name="l821"><span class="linenum"> 821</span></a>                      this.currentannotation.drawable.erase();
<a name="l822"><span class="linenum"> 822</span></a>                  }
<a name="l823"><span class="linenum"> 823</span></a>                  this.drawables.<a class="function" onClick="logFunction('push')" href="../../../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(this.currentannotation.<a class="function" onClick="logFunction('draw')" href="../../../../../../../../_functions/draw.html" onMouseOver="funcPopup(event,'draw')">draw</a>());
<a name="l824"><span class="linenum"> 824</span></a>              }
<a name="l825"><span class="linenum"> 825</span></a>          }
<a name="l826"><span class="linenum"> 826</span></a>          if (this.currentannotation) {
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment">            // Used to calculate drag offset.</span>
<a name="l828"><span class="linenum"> 828</span></a>              this.currentedit.annotationstart = {x: this.currentannotation.x,
<a name="l829"><span class="linenum"> 829</span></a>                                                   y: this.currentannotation.y};
<a name="l830"><span class="linenum"> 830</span></a>          }
<a name="l831"><span class="linenum"> 831</span></a>      },
<a name="l832"><span class="linenum"> 832</span></a>  
<a name="l833"><span class="linenum"> 833</span></a>      <span class="comment">/**</span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment">     * Event handler for mousemove.</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment">     * @protected</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment">     * @param Event</span>
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment">     * @method edit_move</span>
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment">     */</span>
<a name="l839"><span class="linenum"> 839</span></a>      edit_move: function(e) {
<a name="l840"><span class="linenum"> 840</span></a>          e.preventDefault();
<a name="l841"><span class="linenum"> 841</span></a>          var bounds = this.get_canvas_bounds(),
<a name="l842"><span class="linenum"> 842</span></a>              canvas = this.get_dialogue_element(SELECTOR.DRAWINGCANVAS),
<a name="l843"><span class="linenum"> 843</span></a>              drawingregion = this.get_dialogue_element(SELECTOR.DRAWINGREGION),
<a name="l844"><span class="linenum"> 844</span></a>              clientpoint = new M.assignfeedback_editpdf.point(e.clientX + canvas.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('docScrollX'),
<a name="l845"><span class="linenum"> 845</span></a>                                                               e.clientY + canvas.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('docScrollY')),
<a name="l846"><span class="linenum"> 846</span></a>              point = this.get_canvas_coordinates(clientpoint),
<a name="l847"><span class="linenum"> 847</span></a>              diffX,
<a name="l848"><span class="linenum"> 848</span></a>              diffY;
<a name="l849"><span class="linenum"> 849</span></a>  
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment">        // Ignore events out of the canvas area.</span>
<a name="l851"><span class="linenum"> 851</span></a>          if (point.x &lt; 0 || point.x &gt; bounds.width || point.y &lt; 0 || point.y &gt; bounds.height) {
<a name="l852"><span class="linenum"> 852</span></a>              return;
<a name="l853"><span class="linenum"> 853</span></a>          }
<a name="l854"><span class="linenum"> 854</span></a>  
<a name="l855"><span class="linenum"> 855</span></a>          if (this.currentedit.tool === 'pen') {
<a name="l856"><span class="linenum"> 856</span></a>              this.currentedit.path.<a class="function" onClick="logFunction('push')" href="../../../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(point);
<a name="l857"><span class="linenum"> 857</span></a>          }
<a name="l858"><span class="linenum"> 858</span></a>  
<a name="l859"><span class="linenum"> 859</span></a>          if (this.currentedit.tool === 'select') {
<a name="l860"><span class="linenum"> 860</span></a>              if (this.currentannotation &amp;&amp; this.currentedit) {
<a name="l861"><span class="linenum"> 861</span></a>                  this.currentannotation.<a class="function" onClick="logFunction('move')" href="../../../../../../../../_functions/move.html" onMouseOver="funcPopup(event,'move')">move</a>(this.currentedit.annotationstart.x + point.x - this.currentedit.start.x,
<a name="l862"><span class="linenum"> 862</span></a>                                               this.currentedit.annotationstart.y + point.y - this.currentedit.start.y);
<a name="l863"><span class="linenum"> 863</span></a>              }
<a name="l864"><span class="linenum"> 864</span></a>          } else if (this.currentedit.tool === 'drag') {
<a name="l865"><span class="linenum"> 865</span></a>              diffX = point.x - this.currentedit.start.x;
<a name="l866"><span class="linenum"> 866</span></a>              diffY = point.y - this.currentedit.start.y;
<a name="l867"><span class="linenum"> 867</span></a>  
<a name="l868"><span class="linenum"> 868</span></a>              drawingregion.getDOMNode().scrollLeft -= diffX;
<a name="l869"><span class="linenum"> 869</span></a>              drawingregion.getDOMNode().scrollTop -= diffY;
<a name="l870"><span class="linenum"> 870</span></a>  
<a name="l871"><span class="linenum"> 871</span></a>          } else {
<a name="l872"><span class="linenum"> 872</span></a>              if (this.currentedit.start) {
<a name="l873"><span class="linenum"> 873</span></a>                  this.currentedit.end = point;
<a name="l874"><span class="linenum"> 874</span></a>                  this.redraw_current_edit();
<a name="l875"><span class="linenum"> 875</span></a>              }
<a name="l876"><span class="linenum"> 876</span></a>          }
<a name="l877"><span class="linenum"> 877</span></a>      },
<a name="l878"><span class="linenum"> 878</span></a>  
<a name="l879"><span class="linenum"> 879</span></a>      <span class="comment">/**</span>
<a name="l880"><span class="linenum"> 880</span></a>  <span class="comment">     * Event handler for mouseup or touchend.</span>
<a name="l881"><span class="linenum"> 881</span></a>  <span class="comment">     * @protected</span>
<a name="l882"><span class="linenum"> 882</span></a>  <span class="comment">     * @param Event</span>
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">     * @method edit_end</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment">     */</span>
<a name="l885"><span class="linenum"> 885</span></a>      edit_end: function() {
<a name="l886"><span class="linenum"> 886</span></a>          var duration,
<a name="l887"><span class="linenum"> 887</span></a>              comment,
<a name="l888"><span class="linenum"> 888</span></a>              annotation;
<a name="l889"><span class="linenum"> 889</span></a>  
<a name="l890"><span class="linenum"> 890</span></a>          duration = new <a class="phpfunction" onClick="logFunction('Date')" href="../../../../../../../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">Date</a>().<a class="function" onClick="logFunction('getTime')" href="../../../../../../../../_functions/gettime.html" onMouseOver="funcPopup(event,'gettime')">getTime</a>() - this.currentedit.start;
<a name="l891"><span class="linenum"> 891</span></a>  
<a name="l892"><span class="linenum"> 892</span></a>          if (duration &lt; CLICKTIMEOUT || this.currentedit.start === false) {
<a name="l893"><span class="linenum"> 893</span></a>              return;
<a name="l894"><span class="linenum"> 894</span></a>          }
<a name="l895"><span class="linenum"> 895</span></a>  
<a name="l896"><span class="linenum"> 896</span></a>          if (this.currentedit.tool === 'comment') {
<a name="l897"><span class="linenum"> 897</span></a>              if (this.currentdrawable) {
<a name="l898"><span class="linenum"> 898</span></a>                  this.currentdrawable.erase();
<a name="l899"><span class="linenum"> 899</span></a>              }
<a name="l900"><span class="linenum"> 900</span></a>              this.currentdrawable = false;
<a name="l901"><span class="linenum"> 901</span></a>              comment = new M.assignfeedback_editpdf.comment(this);
<a name="l902"><span class="linenum"> 902</span></a>              if (comment.init_from_edit(this.currentedit)) {
<a name="l903"><span class="linenum"> 903</span></a>                  this.pages[this.currentpage].comments.<a class="function" onClick="logFunction('push')" href="../../../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(comment);
<a name="l904"><span class="linenum"> 904</span></a>                  this.drawables.<a class="function" onClick="logFunction('push')" href="../../../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(comment.<a class="function" onClick="logFunction('draw')" href="../../../../../../../../_functions/draw.html" onMouseOver="funcPopup(event,'draw')">draw</a>(true));
<a name="l905"><span class="linenum"> 905</span></a>                  this.editingcomment = true;
<a name="l906"><span class="linenum"> 906</span></a>              }
<a name="l907"><span class="linenum"> 907</span></a>          } else {
<a name="l908"><span class="linenum"> 908</span></a>              annotation = this.create_annotation(this.currentedit.tool, {});
<a name="l909"><span class="linenum"> 909</span></a>              if (annotation) {
<a name="l910"><span class="linenum"> 910</span></a>                  if (this.currentdrawable) {
<a name="l911"><span class="linenum"> 911</span></a>                      this.currentdrawable.erase();
<a name="l912"><span class="linenum"> 912</span></a>                  }
<a name="l913"><span class="linenum"> 913</span></a>                  this.currentdrawable = false;
<a name="l914"><span class="linenum"> 914</span></a>                  if (annotation.init_from_edit(this.currentedit)) {
<a name="l915"><span class="linenum"> 915</span></a>                      this.pages[this.currentpage].annotations.<a class="function" onClick="logFunction('push')" href="../../../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(annotation);
<a name="l916"><span class="linenum"> 916</span></a>                      this.drawables.<a class="function" onClick="logFunction('push')" href="../../../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(annotation.<a class="function" onClick="logFunction('draw')" href="../../../../../../../../_functions/draw.html" onMouseOver="funcPopup(event,'draw')">draw</a>());
<a name="l917"><span class="linenum"> 917</span></a>                  }
<a name="l918"><span class="linenum"> 918</span></a>              }
<a name="l919"><span class="linenum"> 919</span></a>          }
<a name="l920"><span class="linenum"> 920</span></a>  
<a name="l921"><span class="linenum"> 921</span></a>  <span class="comment">        // Save the changes.</span>
<a name="l922"><span class="linenum"> 922</span></a>          this.save_current_page();
<a name="l923"><span class="linenum"> 923</span></a>  
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment">        // Reset the current edit.</span>
<a name="l925"><span class="linenum"> 925</span></a>          this.currentedit.starttime = 0;
<a name="l926"><span class="linenum"> 926</span></a>          this.currentedit.start = false;
<a name="l927"><span class="linenum"> 927</span></a>          this.currentedit.end = false;
<a name="l928"><span class="linenum"> 928</span></a>          this.currentedit.path = [];
<a name="l929"><span class="linenum"> 929</span></a>      },
<a name="l930"><span class="linenum"> 930</span></a>  
<a name="l931"><span class="linenum"> 931</span></a>      <span class="comment">/**</span>
<a name="l932"><span class="linenum"> 932</span></a>  <span class="comment">     * Resize the dialogue window when the browser is resized.</span>
<a name="l933"><span class="linenum"> 933</span></a>  <span class="comment">     * @public</span>
<a name="l934"><span class="linenum"> 934</span></a>  <span class="comment">     * @method resize</span>
<a name="l935"><span class="linenum"> 935</span></a>  <span class="comment">     */</span>
<a name="l936"><span class="linenum"> 936</span></a>      resize: function() {
<a name="l937"><span class="linenum"> 937</span></a>          var drawingregion, drawregionheight;
<a name="l938"><span class="linenum"> 938</span></a>  
<a name="l939"><span class="linenum"> 939</span></a>          if (this.dialogue) {
<a name="l940"><span class="linenum"> 940</span></a>              if (!this.dialogue.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('visible')) {
<a name="l941"><span class="linenum"> 941</span></a>                  return;
<a name="l942"><span class="linenum"> 942</span></a>              }
<a name="l943"><span class="linenum"> 943</span></a>              this.dialogue.centerDialogue();
<a name="l944"><span class="linenum"> 944</span></a>          }
<a name="l945"><span class="linenum"> 945</span></a>  
<a name="l946"><span class="linenum"> 946</span></a>  <span class="comment">        // Make sure the dialogue box is not bigger than the max height of the viewport.</span>
<a name="l947"><span class="linenum"> 947</span></a>          drawregionheight = Y.one('body').<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('winHeight') - 120; <span class="comment">// Space for toolbar + titlebar.</span>
<a name="l948"><span class="linenum"> 948</span></a>          if (drawregionheight &lt; 100) {
<a name="l949"><span class="linenum"> 949</span></a>              drawregionheight = 100;
<a name="l950"><span class="linenum"> 950</span></a>          }
<a name="l951"><span class="linenum"> 951</span></a>          drawingregion = this.get_dialogue_element(SELECTOR.DRAWINGREGION);
<a name="l952"><span class="linenum"> 952</span></a>          if (this.dialogue) {
<a name="l953"><span class="linenum"> 953</span></a>              drawingregion.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('maxHeight', drawregionheight + 'px');
<a name="l954"><span class="linenum"> 954</span></a>          }
<a name="l955"><span class="linenum"> 955</span></a>          this.redraw();
<a name="l956"><span class="linenum"> 956</span></a>          return true;
<a name="l957"><span class="linenum"> 957</span></a>      },
<a name="l958"><span class="linenum"> 958</span></a>  
<a name="l959"><span class="linenum"> 959</span></a>      <span class="comment">/**</span>
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment">     * Factory method for creating annotations of the correct subclass.</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment">     * @public</span>
<a name="l962"><span class="linenum"> 962</span></a>  <span class="comment">     * @method create_annotation</span>
<a name="l963"><span class="linenum"> 963</span></a>  <span class="comment">     */</span>
<a name="l964"><span class="linenum"> 964</span></a>      create_annotation: function(type, data) {
<a name="l965"><span class="linenum"> 965</span></a>          data.type = type;
<a name="l966"><span class="linenum"> 966</span></a>          data.editor = this;
<a name="l967"><span class="linenum"> 967</span></a>          if (type === &quot;line&quot;) {
<a name="l968"><span class="linenum"> 968</span></a>              return new M.assignfeedback_editpdf.annotationline(data);
<a name="l969"><span class="linenum"> 969</span></a>          } else if (type === &quot;rectangle&quot;) {
<a name="l970"><span class="linenum"> 970</span></a>              return new M.assignfeedback_editpdf.annotationrectangle(data);
<a name="l971"><span class="linenum"> 971</span></a>          } else if (type === &quot;oval&quot;) {
<a name="l972"><span class="linenum"> 972</span></a>              return new M.assignfeedback_editpdf.annotationoval(data);
<a name="l973"><span class="linenum"> 973</span></a>          } else if (type === &quot;pen&quot;) {
<a name="l974"><span class="linenum"> 974</span></a>              return new M.assignfeedback_editpdf.annotationpen(data);
<a name="l975"><span class="linenum"> 975</span></a>          } else if (type === &quot;highlight&quot;) {
<a name="l976"><span class="linenum"> 976</span></a>              return new M.assignfeedback_editpdf.annotationhighlight(data);
<a name="l977"><span class="linenum"> 977</span></a>          } else if (type === &quot;stamp&quot;) {
<a name="l978"><span class="linenum"> 978</span></a>              return new M.assignfeedback_editpdf.annotationstamp(data);
<a name="l979"><span class="linenum"> 979</span></a>          }
<a name="l980"><span class="linenum"> 980</span></a>          return false;
<a name="l981"><span class="linenum"> 981</span></a>      },
<a name="l982"><span class="linenum"> 982</span></a>  
<a name="l983"><span class="linenum"> 983</span></a>      <span class="comment">/**</span>
<a name="l984"><span class="linenum"> 984</span></a>  <span class="comment">     * Save all the annotations and comments for the current page.</span>
<a name="l985"><span class="linenum"> 985</span></a>  <span class="comment">     * @protected</span>
<a name="l986"><span class="linenum"> 986</span></a>  <span class="comment">     * @method save_current_page</span>
<a name="l987"><span class="linenum"> 987</span></a>  <span class="comment">     */</span>
<a name="l988"><span class="linenum"> 988</span></a>      save_current_page: function() {
<a name="l989"><span class="linenum"> 989</span></a>          var ajaxurl = AJAXBASE,
<a name="l990"><span class="linenum"> 990</span></a>              config;
<a name="l991"><span class="linenum"> 991</span></a>  
<a name="l992"><span class="linenum"> 992</span></a>          config = {
<a name="l993"><span class="linenum"> 993</span></a>              method: 'post',
<a name="l994"><span class="linenum"> 994</span></a>              context: this,
<a name="l995"><span class="linenum"> 995</span></a>              sync: false,
<a name="l996"><span class="linenum"> 996</span></a>              data: {
<a name="l997"><span class="linenum"> 997</span></a>                  'sesskey': M.cfg.sesskey,
<a name="l998"><span class="linenum"> 998</span></a>                  'action': 'savepage',
<a name="l999"><span class="linenum"> 999</span></a>                  'index': this.currentpage,
<a name="l1000"><span class="linenum">1000</span></a>                  'userid': this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('userid'),
<a name="l1001"><span class="linenum">1001</span></a>                  'attemptnumber': this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('attemptnumber'),
<a name="l1002"><span class="linenum">1002</span></a>                  'assignmentid': this.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('assignmentid'),
<a name="l1003"><span class="linenum">1003</span></a>                  'page': this.stringify_current_page()
<a name="l1004"><span class="linenum">1004</span></a>              },
<a name="l1005"><span class="linenum">1005</span></a>              on: {
<a name="l1006"><span class="linenum">1006</span></a>                  success: function(tid, response) {
<a name="l1007"><span class="linenum">1007</span></a>                      var jsondata;
<a name="l1008"><span class="linenum">1008</span></a>                      try {
<a name="l1009"><span class="linenum">1009</span></a>                          jsondata = Y.JSON.<a class="function" onClick="logFunction('parse')" href="../../../../../../../../_functions/parse.html" onMouseOver="funcPopup(event,'parse')">parse</a>(response.responseText);
<a name="l1010"><span class="linenum">1010</span></a>                          if (jsondata.error) {
<a name="l1011"><span class="linenum">1011</span></a>                              return new M.core.ajaxException(jsondata);
<a name="l1012"><span class="linenum">1012</span></a>                          }
<a name="l1013"><span class="linenum">1013</span></a>                          Y.one(SELECTOR.UNSAVEDCHANGESINPUT).<a class="function" onClick="logFunction('set')" href="../../../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('value', 'true');
<a name="l1014"><span class="linenum">1014</span></a>                          Y.one(SELECTOR.UNSAVEDCHANGESDIV).<a class="function" onClick="logFunction('setStyle')" href="../../../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('opacity', 1);
<a name="l1015"><span class="linenum">1015</span></a>                          Y.one(SELECTOR.UNSAVEDCHANGESDIV).<a class="function" onClick="logFunction('setStyle')" href="../../../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('display', 'inline-block');
<a name="l1016"><span class="linenum">1016</span></a>                          Y.one(SELECTOR.UNSAVEDCHANGESDIV).<a class="function" onClick="logFunction('transition')" href="../../../../../../../../_functions/transition.html" onMouseOver="funcPopup(event,'transition')">transition</a>({
<a name="l1017"><span class="linenum">1017</span></a>                              duration: 1,
<a name="l1018"><span class="linenum">1018</span></a>                              delay: 2,
<a name="l1019"><span class="linenum">1019</span></a>                              opacity: 0
<a name="l1020"><span class="linenum">1020</span></a>                          }, function() {
<a name="l1021"><span class="linenum">1021</span></a>                              Y.one(SELECTOR.UNSAVEDCHANGESDIV).<a class="function" onClick="logFunction('setStyle')" href="../../../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('display', 'none');
<a name="l1022"><span class="linenum">1022</span></a>                          });
<a name="l1023"><span class="linenum">1023</span></a>                      } catch (e) {
<a name="l1024"><span class="linenum">1024</span></a>                          return new M.core.exception(e);
<a name="l1025"><span class="linenum">1025</span></a>                      }
<a name="l1026"><span class="linenum">1026</span></a>                  },
<a name="l1027"><span class="linenum">1027</span></a>                  failure: function(tid, response) {
<a name="l1028"><span class="linenum">1028</span></a>                      return new M.core.exception(response.responseText);
<a name="l1029"><span class="linenum">1029</span></a>                  }
<a name="l1030"><span class="linenum">1030</span></a>              }
<a name="l1031"><span class="linenum">1031</span></a>          };
<a name="l1032"><span class="linenum">1032</span></a>  
<a name="l1033"><span class="linenum">1033</span></a>          Y.<a class="function" onClick="logFunction('io')" href="../../../../../../../../_functions/io.html" onMouseOver="funcPopup(event,'io')">io</a>(ajaxurl, config);
<a name="l1034"><span class="linenum">1034</span></a>  
<a name="l1035"><span class="linenum">1035</span></a>      },
<a name="l1036"><span class="linenum">1036</span></a>  
<a name="l1037"><span class="linenum">1037</span></a>      <span class="comment">/**</span>
<a name="l1038"><span class="linenum">1038</span></a>  <span class="comment">     * Event handler to open the comment search interface.</span>
<a name="l1039"><span class="linenum">1039</span></a>  <span class="comment">     *</span>
<a name="l1040"><span class="linenum">1040</span></a>  <span class="comment">     * @param Event e</span>
<a name="l1041"><span class="linenum">1041</span></a>  <span class="comment">     * @protected</span>
<a name="l1042"><span class="linenum">1042</span></a>  <span class="comment">     * @method open_search_comments</span>
<a name="l1043"><span class="linenum">1043</span></a>  <span class="comment">     */</span>
<a name="l1044"><span class="linenum">1044</span></a>      open_search_comments: function(e) {
<a name="l1045"><span class="linenum">1045</span></a>          if (!this.searchcommentswindow) {
<a name="l1046"><span class="linenum">1046</span></a>              this.searchcommentswindow = new M.assignfeedback_editpdf.commentsearch({
<a name="l1047"><span class="linenum">1047</span></a>                  editor: this
<a name="l1048"><span class="linenum">1048</span></a>              });
<a name="l1049"><span class="linenum">1049</span></a>          }
<a name="l1050"><span class="linenum">1050</span></a>  
<a name="l1051"><span class="linenum">1051</span></a>          this.searchcommentswindow.<a class="function" onClick="logFunction('show')" href="../../../../../../../../_functions/show.html" onMouseOver="funcPopup(event,'show')">show</a>();
<a name="l1052"><span class="linenum">1052</span></a>          e.preventDefault();
<a name="l1053"><span class="linenum">1053</span></a>      },
<a name="l1054"><span class="linenum">1054</span></a>  
<a name="l1055"><span class="linenum">1055</span></a>      <span class="comment">/**</span>
<a name="l1056"><span class="linenum">1056</span></a>  <span class="comment">     * Redraw all the comments and annotations.</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment">     * @protected</span>
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment">     * @method redraw</span>
<a name="l1059"><span class="linenum">1059</span></a>  <span class="comment">     */</span>
<a name="l1060"><span class="linenum">1060</span></a>      redraw: function() {
<a name="l1061"><span class="linenum">1061</span></a>          var i,
<a name="l1062"><span class="linenum">1062</span></a>              page;
<a name="l1063"><span class="linenum">1063</span></a>  
<a name="l1064"><span class="linenum">1064</span></a>          page = this.pages[this.currentpage];
<a name="l1065"><span class="linenum">1065</span></a>          if (page === undefined) {
<a name="l1066"><span class="linenum">1066</span></a>              return; <span class="comment">// Can happen if a redraw is triggered by an event, before the page has been selected.</span>
<a name="l1067"><span class="linenum">1067</span></a>          }
<a name="l1068"><span class="linenum">1068</span></a>          while (this.drawables.length &gt; 0) {
<a name="l1069"><span class="linenum">1069</span></a>              this.drawables.<a class="function" onClick="logFunction('pop')" href="../../../../../../../../_functions/pop.html" onMouseOver="funcPopup(event,'pop')">pop</a>().erase();
<a name="l1070"><span class="linenum">1070</span></a>          }
<a name="l1071"><span class="linenum">1071</span></a>  
<a name="l1072"><span class="linenum">1072</span></a>          for (i = 0; i &lt; page.annotations.length; i++) {
<a name="l1073"><span class="linenum">1073</span></a>              this.drawables.<a class="function" onClick="logFunction('push')" href="../../../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(page.annotations[i].<a class="function" onClick="logFunction('draw')" href="../../../../../../../../_functions/draw.html" onMouseOver="funcPopup(event,'draw')">draw</a>());
<a name="l1074"><span class="linenum">1074</span></a>          }
<a name="l1075"><span class="linenum">1075</span></a>          for (i = 0; i &lt; page.comments.length; i++) {
<a name="l1076"><span class="linenum">1076</span></a>              this.drawables.<a class="function" onClick="logFunction('push')" href="../../../../../../../../_functions/push.html" onMouseOver="funcPopup(event,'push')">push</a>(page.comments[i].<a class="function" onClick="logFunction('draw')" href="../../../../../../../../_functions/draw.html" onMouseOver="funcPopup(event,'draw')">draw</a>(false));
<a name="l1077"><span class="linenum">1077</span></a>          }
<a name="l1078"><span class="linenum">1078</span></a>      },
<a name="l1079"><span class="linenum">1079</span></a>  
<a name="l1080"><span class="linenum">1080</span></a>      <span class="comment">/**</span>
<a name="l1081"><span class="linenum">1081</span></a>  <span class="comment">     * Load the image for this pdf page and remove the loading icon (if there).</span>
<a name="l1082"><span class="linenum">1082</span></a>  <span class="comment">     * @protected</span>
<a name="l1083"><span class="linenum">1083</span></a>  <span class="comment">     * @method change_page</span>
<a name="l1084"><span class="linenum">1084</span></a>  <span class="comment">     */</span>
<a name="l1085"><span class="linenum">1085</span></a>      change_page: function() {
<a name="l1086"><span class="linenum">1086</span></a>          var drawingcanvas = this.get_dialogue_element(SELECTOR.DRAWINGCANVAS),
<a name="l1087"><span class="linenum">1087</span></a>              page,
<a name="l1088"><span class="linenum">1088</span></a>              previousbutton,
<a name="l1089"><span class="linenum">1089</span></a>              nextbutton;
<a name="l1090"><span class="linenum">1090</span></a>  
<a name="l1091"><span class="linenum">1091</span></a>          previousbutton = this.get_dialogue_element(SELECTOR.PREVIOUSBUTTON);
<a name="l1092"><span class="linenum">1092</span></a>          nextbutton = this.get_dialogue_element(SELECTOR.NEXTBUTTON);
<a name="l1093"><span class="linenum">1093</span></a>  
<a name="l1094"><span class="linenum">1094</span></a>          if (this.currentpage &gt; 0) {
<a name="l1095"><span class="linenum">1095</span></a>              previousbutton.<a class="function" onClick="logFunction('removeAttribute')" href="../../../../../../../../_functions/removeattribute.html" onMouseOver="funcPopup(event,'removeattribute')">removeAttribute</a>('disabled');
<a name="l1096"><span class="linenum">1096</span></a>          } else {
<a name="l1097"><span class="linenum">1097</span></a>              previousbutton.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('disabled', 'true');
<a name="l1098"><span class="linenum">1098</span></a>          }
<a name="l1099"><span class="linenum">1099</span></a>          if (this.currentpage &lt; (this.pagecount - 1)) {
<a name="l1100"><span class="linenum">1100</span></a>              nextbutton.<a class="function" onClick="logFunction('removeAttribute')" href="../../../../../../../../_functions/removeattribute.html" onMouseOver="funcPopup(event,'removeattribute')">removeAttribute</a>('disabled');
<a name="l1101"><span class="linenum">1101</span></a>          } else {
<a name="l1102"><span class="linenum">1102</span></a>              nextbutton.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('disabled', 'true');
<a name="l1103"><span class="linenum">1103</span></a>          }
<a name="l1104"><span class="linenum">1104</span></a>  
<a name="l1105"><span class="linenum">1105</span></a>          page = this.pages[this.currentpage];
<a name="l1106"><span class="linenum">1106</span></a>          this.loadingicon.<a class="function" onClick="logFunction('hide')" href="../../../../../../../../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>();
<a name="l1107"><span class="linenum">1107</span></a>          drawingcanvas.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('backgroundImage', 'url(&quot;' + page.url + '&quot;)');
<a name="l1108"><span class="linenum">1108</span></a>          drawingcanvas.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('width', page.width + 'px');
<a name="l1109"><span class="linenum">1109</span></a>          drawingcanvas.<a class="function" onClick="logFunction('setStyle')" href="../../../../../../../../_functions/setstyle.html" onMouseOver="funcPopup(event,'setstyle')">setStyle</a>('height', page.height + 'px');
<a name="l1110"><span class="linenum">1110</span></a>  
<a name="l1111"><span class="linenum">1111</span></a>  <span class="comment">        // Update page select.</span>
<a name="l1112"><span class="linenum">1112</span></a>          this.get_dialogue_element(SELECTOR.PAGESELECT).<a class="function" onClick="logFunction('set')" href="../../../../../../../../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('selectedIndex', this.currentpage);
<a name="l1113"><span class="linenum">1113</span></a>  
<a name="l1114"><span class="linenum">1114</span></a>          this.<a class="function" onClick="logFunction('resize')" href="../../../../../../../../_functions/resize.html" onMouseOver="funcPopup(event,'resize')">resize</a>(); <span class="comment">// Internally will call 'redraw', after checking the dialogue size.</span>
<a name="l1115"><span class="linenum">1115</span></a>      },
<a name="l1116"><span class="linenum">1116</span></a>  
<a name="l1117"><span class="linenum">1117</span></a>      <span class="comment">/**</span>
<a name="l1118"><span class="linenum">1118</span></a>  <span class="comment">     * Now we know how many pages there are,</span>
<a name="l1119"><span class="linenum">1119</span></a>  <span class="comment">     * we can enable the navigation controls.</span>
<a name="l1120"><span class="linenum">1120</span></a>  <span class="comment">     * @protected</span>
<a name="l1121"><span class="linenum">1121</span></a>  <span class="comment">     * @method setup_navigation</span>
<a name="l1122"><span class="linenum">1122</span></a>  <span class="comment">     */</span>
<a name="l1123"><span class="linenum">1123</span></a>      setup_navigation: function() {
<a name="l1124"><span class="linenum">1124</span></a>          var pageselect,
<a name="l1125"><span class="linenum">1125</span></a>              i,
<a name="l1126"><span class="linenum">1126</span></a>              strinfo,
<a name="l1127"><span class="linenum">1127</span></a>              option,
<a name="l1128"><span class="linenum">1128</span></a>              previousbutton,
<a name="l1129"><span class="linenum">1129</span></a>              nextbutton;
<a name="l1130"><span class="linenum">1130</span></a>  
<a name="l1131"><span class="linenum">1131</span></a>          pageselect = this.get_dialogue_element(SELECTOR.PAGESELECT);
<a name="l1132"><span class="linenum">1132</span></a>  
<a name="l1133"><span class="linenum">1133</span></a>          var options = pageselect.<a class="function" onClick="logFunction('all')" href="../../../../../../../../_functions/all.html" onMouseOver="funcPopup(event,'all')">all</a>('option');
<a name="l1134"><span class="linenum">1134</span></a>          if (options.<a class="function" onClick="logFunction('size')" href="../../../../../../../../_functions/size.html" onMouseOver="funcPopup(event,'size')">size</a>() &lt;= 1) {
<a name="l1135"><span class="linenum">1135</span></a>              for (i = 0; i &lt; this.pages.length; i++) {
<a name="l1136"><span class="linenum">1136</span></a>                  option = Y.Node.<a class="function" onClick="logFunction('create')" href="../../../../../../../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>('&lt;option/&gt;');
<a name="l1137"><span class="linenum">1137</span></a>                  option.<a class="function" onClick="logFunction('setAttribute')" href="../../../../../../../../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('value', i);
<a name="l1138"><span class="linenum">1138</span></a>                  strinfo = {page: i + 1, total: this.pages.length};
<a name="l1139"><span class="linenum">1139</span></a>                  option.<a class="function" onClick="logFunction('setHTML')" href="../../../../../../../../_functions/sethtml.html" onMouseOver="funcPopup(event,'sethtml')">setHTML</a>(M.util.<a class="function" onClick="logFunction('get_string')" href="../../../../../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pagexofy', 'assignfeedback_editpdf', strinfo));
<a name="l1140"><span class="linenum">1140</span></a>                  pageselect.<a class="function" onClick="logFunction('append')" href="../../../../../../../../_functions/append.html" onMouseOver="funcPopup(event,'append')">append</a>(option);
<a name="l1141"><span class="linenum">1141</span></a>              }
<a name="l1142"><span class="linenum">1142</span></a>          }
<a name="l1143"><span class="linenum">1143</span></a>          pageselect.<a class="function" onClick="logFunction('removeAttribute')" href="../../../../../../../../_functions/removeattribute.html" onMouseOver="funcPopup(event,'removeattribute')">removeAttribute</a>('disabled');
<a name="l1144"><span class="linenum">1144</span></a>          pageselect.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('change', function() {
<a name="l1145"><span class="linenum">1145</span></a>              this.currentpage = pageselect.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('value');
<a name="l1146"><span class="linenum">1146</span></a>              this.change_page();
<a name="l1147"><span class="linenum">1147</span></a>          }, this);
<a name="l1148"><span class="linenum">1148</span></a>  
<a name="l1149"><span class="linenum">1149</span></a>          previousbutton = this.get_dialogue_element(SELECTOR.PREVIOUSBUTTON);
<a name="l1150"><span class="linenum">1150</span></a>          nextbutton = this.get_dialogue_element(SELECTOR.NEXTBUTTON);
<a name="l1151"><span class="linenum">1151</span></a>  
<a name="l1152"><span class="linenum">1152</span></a>          previousbutton.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('click', this.previous_page, this);
<a name="l1153"><span class="linenum">1153</span></a>          previousbutton.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('key', this.previous_page, 'down:13', this);
<a name="l1154"><span class="linenum">1154</span></a>          nextbutton.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('click', this.next_page, this);
<a name="l1155"><span class="linenum">1155</span></a>          nextbutton.<a class="function" onClick="logFunction('on')" href="../../../../../../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">on</a>('key', this.next_page, 'down:13', this);
<a name="l1156"><span class="linenum">1156</span></a>      },
<a name="l1157"><span class="linenum">1157</span></a>  
<a name="l1158"><span class="linenum">1158</span></a>      <span class="comment">/**</span>
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment">     * Navigate to the previous page.</span>
<a name="l1160"><span class="linenum">1160</span></a>  <span class="comment">     * @protected</span>
<a name="l1161"><span class="linenum">1161</span></a>  <span class="comment">     * @method previous_page</span>
<a name="l1162"><span class="linenum">1162</span></a>  <span class="comment">     */</span>
<a name="l1163"><span class="linenum">1163</span></a>      previous_page: function(e) {
<a name="l1164"><span class="linenum">1164</span></a>          e.preventDefault();
<a name="l1165"><span class="linenum">1165</span></a>          this.currentpage--;
<a name="l1166"><span class="linenum">1166</span></a>          if (this.currentpage &lt; 0) {
<a name="l1167"><span class="linenum">1167</span></a>              this.currentpage = 0;
<a name="l1168"><span class="linenum">1168</span></a>          }
<a name="l1169"><span class="linenum">1169</span></a>          this.change_page();
<a name="l1170"><span class="linenum">1170</span></a>      },
<a name="l1171"><span class="linenum">1171</span></a>  
<a name="l1172"><span class="linenum">1172</span></a>      <span class="comment">/**</span>
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment">     * Navigate to the next page.</span>
<a name="l1174"><span class="linenum">1174</span></a>  <span class="comment">     * @protected</span>
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment">     * @method next_page</span>
<a name="l1176"><span class="linenum">1176</span></a>  <span class="comment">     */</span>
<a name="l1177"><span class="linenum">1177</span></a>      next_page: function(e) {
<a name="l1178"><span class="linenum">1178</span></a>          e.preventDefault();
<a name="l1179"><span class="linenum">1179</span></a>          this.currentpage++;
<a name="l1180"><span class="linenum">1180</span></a>          if (this.currentpage &gt;= this.pages.length) {
<a name="l1181"><span class="linenum">1181</span></a>              this.currentpage = this.pages.length - 1;
<a name="l1182"><span class="linenum">1182</span></a>          }
<a name="l1183"><span class="linenum">1183</span></a>          this.change_page();
<a name="l1184"><span class="linenum">1184</span></a>      },
<a name="l1185"><span class="linenum">1185</span></a>  
<a name="l1186"><span class="linenum">1186</span></a>      <span class="comment">/**</span>
<a name="l1187"><span class="linenum">1187</span></a>  <span class="comment">     * Update any absolutely positioned nodes, within each drawable, when the drawing canvas is scrolled</span>
<a name="l1188"><span class="linenum">1188</span></a>  <span class="comment">     * @protected</span>
<a name="l1189"><span class="linenum">1189</span></a>  <span class="comment">     * @method move_canvas</span>
<a name="l1190"><span class="linenum">1190</span></a>  <span class="comment">     */</span>
<a name="l1191"><span class="linenum">1191</span></a>      move_canvas: function() {
<a name="l1192"><span class="linenum">1192</span></a>          var drawingregion, x, y, i;
<a name="l1193"><span class="linenum">1193</span></a>  
<a name="l1194"><span class="linenum">1194</span></a>          drawingregion = this.get_dialogue_element(SELECTOR.DRAWINGREGION);
<a name="l1195"><span class="linenum">1195</span></a>          x = parseInt(drawingregion.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('scrollLeft'), 10);
<a name="l1196"><span class="linenum">1196</span></a>          y = parseInt(drawingregion.<a class="function" onClick="logFunction('get')" href="../../../../../../../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('scrollTop'), 10);
<a name="l1197"><span class="linenum">1197</span></a>  
<a name="l1198"><span class="linenum">1198</span></a>          for (i = 0; i &lt; this.drawables.length; i++) {
<a name="l1199"><span class="linenum">1199</span></a>              this.drawables[i].scroll_update(x, y);
<a name="l1200"><span class="linenum">1200</span></a>          }
<a name="l1201"><span class="linenum">1201</span></a>      }
<a name="l1202"><span class="linenum">1202</span></a>  
<a name="l1203"><span class="linenum">1203</span></a>  };
<a name="l1204"><span class="linenum">1204</span></a>  
<a name="l1205"><span class="linenum">1205</span></a>  Y.<a class="function" onClick="logFunction('extend')" href="../../../../../../../../_functions/extend.html" onMouseOver="funcPopup(event,'extend')">extend</a>(EDITOR, Y.Base, EDITOR.prototype, {
<a name="l1206"><span class="linenum">1206</span></a>      NAME: 'moodle-assignfeedback_editpdf-editor',
<a name="l1207"><span class="linenum">1207</span></a>      ATTRS: {
<a name="l1208"><span class="linenum">1208</span></a>          userid: {
<a name="l1209"><span class="linenum">1209</span></a>              validator: Y.Lang.isInteger,
<a name="l1210"><span class="linenum">1210</span></a>              value: 0
<a name="l1211"><span class="linenum">1211</span></a>          },
<a name="l1212"><span class="linenum">1212</span></a>          assignmentid: {
<a name="l1213"><span class="linenum">1213</span></a>              validator: Y.Lang.isInteger,
<a name="l1214"><span class="linenum">1214</span></a>              value: 0
<a name="l1215"><span class="linenum">1215</span></a>          },
<a name="l1216"><span class="linenum">1216</span></a>          attemptnumber: {
<a name="l1217"><span class="linenum">1217</span></a>              validator: Y.Lang.isInteger,
<a name="l1218"><span class="linenum">1218</span></a>              value: 0
<a name="l1219"><span class="linenum">1219</span></a>          },
<a name="l1220"><span class="linenum">1220</span></a>          header: {
<a name="l1221"><span class="linenum">1221</span></a>              validator: Y.Lang.isString,
<a name="l1222"><span class="linenum">1222</span></a>              value: ''
<a name="l1223"><span class="linenum">1223</span></a>          },
<a name="l1224"><span class="linenum">1224</span></a>          body: {
<a name="l1225"><span class="linenum">1225</span></a>              validator: Y.Lang.isString,
<a name="l1226"><span class="linenum">1226</span></a>              value: ''
<a name="l1227"><span class="linenum">1227</span></a>          },
<a name="l1228"><span class="linenum">1228</span></a>          footer: {
<a name="l1229"><span class="linenum">1229</span></a>              validator: Y.Lang.isString,
<a name="l1230"><span class="linenum">1230</span></a>              value: ''
<a name="l1231"><span class="linenum">1231</span></a>          },
<a name="l1232"><span class="linenum">1232</span></a>          linkid: {
<a name="l1233"><span class="linenum">1233</span></a>              validator: Y.Lang.isString,
<a name="l1234"><span class="linenum">1234</span></a>              value: ''
<a name="l1235"><span class="linenum">1235</span></a>          },
<a name="l1236"><span class="linenum">1236</span></a>          deletelinkid: {
<a name="l1237"><span class="linenum">1237</span></a>              validator: Y.Lang.isString,
<a name="l1238"><span class="linenum">1238</span></a>              value: ''
<a name="l1239"><span class="linenum">1239</span></a>          },
<a name="l1240"><span class="linenum">1240</span></a>          readonly: {
<a name="l1241"><span class="linenum">1241</span></a>              validator: Y.Lang.isBoolean,
<a name="l1242"><span class="linenum">1242</span></a>              value: true
<a name="l1243"><span class="linenum">1243</span></a>          },
<a name="l1244"><span class="linenum">1244</span></a>          stampfiles: {
<a name="l1245"><span class="linenum">1245</span></a>              validator: Y.Lang.isArray,
<a name="l1246"><span class="linenum">1246</span></a>              value: ''
<a name="l1247"><span class="linenum">1247</span></a>          },
<a name="l1248"><span class="linenum">1248</span></a>          pagetotal: {
<a name="l1249"><span class="linenum">1249</span></a>              validator: Y.Lang.isInteger,
<a name="l1250"><span class="linenum">1250</span></a>              value: 0
<a name="l1251"><span class="linenum">1251</span></a>          }
<a name="l1252"><span class="linenum">1252</span></a>      }
<a name="l1253"><span class="linenum">1253</span></a>  });
<a name="l1254"><span class="linenum">1254</span></a>  
<a name="l1255"><span class="linenum">1255</span></a>  M.assignfeedback_editpdf = M.assignfeedback_editpdf || {};
<a name="l1256"><span class="linenum">1256</span></a>  M.assignfeedback_editpdf.editor = M.assignfeedback_editpdf.editor || {};
<a name="l1257"><span class="linenum">1257</span></a>  
<a name="l1258"><span class="linenum">1258</span></a>  <span class="comment">/**</span>
<a name="l1259"><span class="linenum">1259</span></a>  <span class="comment"> * Init function - will create a new instance every time.</span>
<a name="l1260"><span class="linenum">1260</span></a>  <span class="comment"> * @method editor.init</span>
<a name="l1261"><span class="linenum">1261</span></a>  <span class="comment"> * @static</span>
<a name="l1262"><span class="linenum">1262</span></a>  <span class="comment"> * @param {Object} params</span>
<a name="l1263"><span class="linenum">1263</span></a>  <span class="comment"> */</span>
<a name="l1264"><span class="linenum">1264</span></a>  M.assignfeedback_editpdf.editor.init = M.assignfeedback_editpdf.editor.init || function(params) {
<a name="l1265"><span class="linenum">1265</span></a>      M.assignfeedback_editpdf.instance = <span class="keyword">new </span><a class="class" onClick="logClass('EDITOR')" href="../../../../../../../../_classes/editor.html" onMouseOver="classPopup(event,'editor')">EDITOR</a>(params);
<a name="l1266"><span class="linenum">1266</span></a>      return M.assignfeedback_editpdf.instance;
<a name="l1267"><span class="linenum">1267</span></a>  };
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'require': ['require', '', [['lib/yuilib/3.17.2/timers','timers.js',27],['lib/yuilib/3.17.2/timers','timers-debug.js',27]], 615],
'transition': ['transition', 'Changes the status of a YouTube live broadcast and initiates any processes associated with the new status. For example, when you transition a broadcast\'s status to testing, YouTube starts to transmit video to that broadcast\'s monitor stream. Before calling this method, you should confirm that the value of the status.streamStatus property for the stream bound to your broadcast is active. (liveBroadcasts.transition) ', [['lib/google/src/Google/Service','YouTube.php',3051]], 82],
'indexof': ['indexof', 'IndexOf - first version of find an element in the Array given returns the index of the *first* occurance ', [['backup/cc/cc_lib/gral_lib','functions.php',97]], 1500],
'set': ['set', 'Sets an item in the cache given its key and data value. ', [['cache/stores/static','lib.php',265],['cache','disabledlib.php',81],['search/classes','document.php',241],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',331],['lib/google/src/Google/Cache','Memcache.php',113],['lib','filelib.php',3656],['lib/adodb','adodb-active-record.inc.php',646],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',85],['lib/google/src/Google/Cache','File.php',93],['cache/classes','dummystore.php',170],['cache/classes','loaders.php',496],['cache/classes','loaders.php',1350],['cache/classes','loaders.php',1797],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',47],['lib/horde/framework/Horde','Variables.php',189],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',39],['competency/classes','persistent.php',111],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',203],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',51],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',41],['lib/google/src/Google/Service','ShoppingContent.php',1643],['lib','navigationlib.php',5131],['lib/google/src/Google/Service','Clouddebugger.php',445],['lib/htmlpurifier/HTMLPurifier','Config.php',289],['lib/portfolio','exporter.php',154],['grade/report/singleview/classes/local/ui','finalgrade.php',129],['cache/stores/memcache','lib.php',358],['lib/adodb','adodb-active-recordx.inc.php',676],['cache/classes','interfaces.php',68],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',167],['lib/horde/framework/Horde/Imap/Client','Cache.php',127],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',60],['grade/report/singleview/classes/local/ui','exclude.php',90],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',24],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',114],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',41],['lib/portfolio','caller.php',187],['cache/stores/session','lib.php',290],['cache/stores/mongodb','lib.php',305],['lib/google/src/Google/Cache','Null.php',44],['grade/report/singleview/classes/local/ui','override.php',95],['cache/stores/file','lib.php',426],['lib/phpmailer','class.phpmailer.php',3554],['grade/report/singleview/classes/local/ui','feedback.php',102],['cache/stores/memcached','lib.php',354],['lib/portfolio','plugin.php',647],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',31],['lib/google/src/Google/Service','YouTube.php',4048],['lib/google/src/Google/Service','YouTube.php',4458],['lib/google/src/Google/Cache','Apc.php',82],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',162],['lib/pear/Net/GeoIP','Location.php',125]], 4904],
'hide': ['hide', 'Hide the given player\'s leaderboard scores from the given application. This method is only available to user accounts for your developer console. (players.hide) ', [['lib/google/src/Google/Service','GamesManagement.php',560],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/contextmenu','editor_plugin_src.js',71],['repository','lib.php',2009],['lib','navigationlib.php',700],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',269],['lib','coursecatlib.php',2068]], 795],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'setstyle': ['setstyle', 'Set Style ', [['lib/phpexcel/PHPExcel/Style','Conditional.php',250],['lib/google/src/Google/Service','MapsEngine.php',4384],['lib/google/src/Google/Service','YouTube.php',6292]], 2174],
'push': ['push', 'Push a new timer start on the stack. ', [['lib/horde/framework/Horde/Support','Timer.php',33],['lib/horde/framework/Horde/Support','Memory.php',44],['lib/evalmath','evalmath.class.php',462],['lib/horde/framework/Horde/Support','Stack.php',23],['lib/phpexcel/PHPExcel/CalcEngine','CyclicReferenceStack.php',47],['lib/mustache/src/Mustache','Context.php',32],['lib','outputlib.php',2046],['lib/htmlpurifier/HTMLPurifier','Queue.php',43],['lib/phpexcel/PHPExcel/Calculation/Token','Stack.php',54]], 4478],
'size': ['size', 'Search for messages smaller/larger than a certain size. ', [['lib/horde/framework/Horde/Imap/Client/Search','Query.php',507],['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',224]], 531],
'show': ['show', '', [['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',187],['lib/jquery/ui-1.11.4','jquery-ui.js',13476],['lib','coursecatlib.php',2127]], 582],
'gettime': ['gettime', '', [['lib/google/src/Google/Service','Cloudlatencytest.php',248],['lib/google/src/Google/Service','Dataflow.php',1170],['lib/google/src/Google/Service','Audit.php',404],['lib/google/src/Google/Service','Reports.php',736],['lib/google/src/Google/Service','Logging.php',98],['lib/google/src/Google/Service','PlusDomains.php',3045],['lib/google/src/Google/Service','Dfareporting.php',15908]], 358],
'setattribute': ['setattribute', '', [['lib/google/src/Google/Service','AdExchangeBuyer.php',2531],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',254]], 1664],
'addclass': ['addclass', '', [['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',4450],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',4450],['lib/editor/atto/yui/src/rangy/js','rangy-classapplier.js',60]], 2581],
'rect': ['rect', 'Draws a rectangle. ', [['lib/tcpdf','tcpdf.php',11483]], 85],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'getattribute': ['getattribute', '', [['lib/google/src/Google/Service','AdExchangeBuyer.php',2535],['auth/cas/CAS','CAS.php',1226],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',279],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',47],['lib/phpexcel/PHPExcel/Reader/Excel2007','Chart.php',37],['auth/cas/CAS/CAS','Client.php',1196],['lib/pear/HTML','Common.php',271]], 1140],
'extend': ['extend', 'Extend the lifetime of this lock. Not supported by all factories. ', [['lib/classes/lock','lock.php',81]], 1504],
'resize': ['resize', 'Resizes the managed instance group up or down. If resized up, new instances are created using the current instance template. If resized down, instances are removed in the order outlined in Resizing a managed instance group. (instanceGroupManagers.resize) ', [['lib/google/src/Google/Service','Replicapool.php',501],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/autoresize','editor_plugin_src.js',34],['lib/yuilib/3.17.2/resize-base','resize-base.js',172],['lib/yuilib/3.17.2/resize-base','resize-base-debug.js',172],['repository/flickr_public','image.php',114],['lib/google/src/Google/Service','Compute.php',5848]], 117],
'load': ['load', 'Load the class from cache using `require_once`. ', [['lib/mustache/src/Mustache/Cache','FilesystemCache.php',39],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',320],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',284],['lib/pear/HTML/QuickForm','select.php',430],['lib/phpexcel/PHPExcel/Reader','Excel5.php',612],['lib/mustache/src/Mustache/Cache','NoopCache.php',20],['lib/adodb','adodb-active-record.inc.php',775],['backup/cc/cc_lib','xmlbase.php',92],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',69],['lib/simplepie/library/SimplePie/Cache','File.php',118],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',48],['lib/phpexcel/PHPExcel','Autoloader.php',58],['lib/phpexcel/PHPExcel/Reader','IReader.php',38],['grade/grading','lib.php',227],['mod/lesson','locallib.php',1022],['mod/lesson','locallib.php',2240],['mod/lesson','locallib.php',3200],['lib/phpexcel/PHPExcel','IOFactory.php',180],['lib/mustache/src/Mustache','Cache.php',20],['lib','outputlib.php',432],['cache/classes','definition.php',335],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',87],['lib/adodb','adodb-active-recordx.inc.php',813],['lib/simplepie/library/SimplePie/Cache','Base.php',87],['lib/phpexcel/PHPExcel/Reader','HTML.php',143],['lib/simplepie/library/SimplePie/Cache','MySQL.php',286],['lib/mustache/src/Mustache/Loader','InlineLoader.php',87],['lib/mustache/src/Mustache','Loader.php',17],['lib/phpexcel/PHPExcel/Reader','CSV.php',203],['lib/simplepie/library/SimplePie/Cache','Memcache.php',123],['lib/mustache/src/Mustache/Loader','StringLoader.php',28],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',44],['lib/phpunit/classes','autoloader.php',46],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',216],['lib/htmlpurifier/HTMLPurifier','Language.php',69],['lib/phpexcel/PHPExcel/Reader','SYLK.php',190],['calendar','lib.php',2666],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',189],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',41],['cache/classes','config.php',128]], 190],
'all': ['all', '', [['lib','questionlib.php',1516]], 1415],
'alert': ['alert', 'Action must be taken immediately. ', [['lib/mustache/src/Mustache/Logger','AbstractLogger.php',34],['lib/google/src/Google/Logger','Abstract.php',173],['lib/mustache/src/Mustache','Logger.php',51]], 147],
'load_all_pages': ['load_all_pages', 'Loads ALL of the pages for this lesson ', [['mod/lesson','locallib.php',1651],['mod/lesson','locallib.php',3378]], 27],
'removeattribute': ['removeattribute', 'Removes an attribute ', [['lib/pear/HTML','Common.php',326]], 338],
'edit': ['edit', 'Updates this entry in the database. Access control checks must be done by calling code. ', [['blog','locallib.php',274]], 7],
'get': ['get', 'Retrieves a variable reference from the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',36],['cache/stores/static','lib.php',220],['cache','disabledlib.php',55],['search/classes','document.php',299],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','DataTransfer.php',162],['lib/google/src/Google/Service','DataTransfer.php',208],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','AdSense.php',1076],['lib/google/src/Google/Service','AdSense.php',1155],['lib/google/src/Google/Service','AdSense.php',1303],['lib/google/src/Google/Service','AdSense.php',1519],['lib/google/src/Google/Service','AdSense.php',1631],['lib/google/src/Google/Service','AdSense.php',1773],['lib/google/src/Google/Service','AdSense.php',2047],['lib/google/src/Google/Service','Replicapool.php',420],['lib/google/src/Google/Service','Replicapool.php',575],['lib/google/src/Google/Service','Tasks.php',323],['lib/google/src/Google/Service','Tasks.php',442],['lib/google/src/Google/Service','Partners.php',362],['lib/google/src/Google/Service','AndroidPublisher.php',1247],['lib/google/src/Google/Service','AndroidPublisher.php',1349],['lib/google/src/Google/Service','AndroidPublisher.php',1510],['lib/google/src/Google/Service','AndroidPublisher.php',1573],['lib/google/src/Google/Service','AndroidPublisher.php',1796],['lib/google/src/Google/Service','AndroidPublisher.php',1884],['lib/google/src/Google/Service','AndroidPublisher.php',1948],['lib/google/src/Google/Service','AndroidPublisher.php',2098],['lib/google/src/Google/Service','AndroidPublisher.php',2223],['lib/google/src/Google/Service','AndroidPublisher.php',2293],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',146],['lib/google/src/Google/Service','YouTubeReporting.php',273],['lib/google/src/Google/Service','YouTubeReporting.php',326],['lib/google/src/Google/Service','Reseller.php',295],['lib/google/src/Google/Service','Reseller.php',458],['lib/google/src/Google/Cache','Memcache.php',74],['lib','filelib.php',3382],['lib','filelib.php',3630],['lib/google/src/Google/Service','Computeaccounts.php',432],['lib/google/src/Google/Service','Computeaccounts.php',512],['lib/google/src/Google/Service','Computeaccounts.php',683],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','MapsEngine.php',1530],['lib/google/src/Google/Service','MapsEngine.php',1709],['lib/google/src/Google/Service','MapsEngine.php',2006],['lib/google/src/Google/Service','MapsEngine.php',2268],['lib/google/src/Google/Service','MapsEngine.php',2360],['lib/google/src/Google/Service','MapsEngine.php',2666],['lib/google/src/Google/Service','MapsEngine.php',2927],['lib/google/src/Google/Service','MapsEngine.php',3118],['lib/google/src/Google/Cache','File.php',47],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Dns.php',307],['lib/google/src/Google/Service','Dns.php',393],['lib/google/src/Google/Service','Dns.php',444],['cache/classes','loaders.php',278],['cache/classes','loaders.php',1422],['cache/classes','loaders.php',1731],['lib/google/src/Google/Service','Appengine.php',320],['lib/google/src/Google/Service','Appengine.php',368],['lib/google/src/Google/Service','Appengine.php',472],['lib/google/src/Google/Service','Appengine.php',525],['lib/google/src/Google/Service','Urlshortener.php',109],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['lib/google/src/Google/Service','AdExchangeBuyer.php',759],['lib/google/src/Google/Service','AdExchangeBuyer.php',829],['lib/google/src/Google/Service','AdExchangeBuyer.php',870],['lib/google/src/Google/Service','AdExchangeBuyer.php',952],['lib/google/src/Google/Service','AdExchangeBuyer.php',1041],['lib/google/src/Google/Service','AdExchangeBuyer.php',1111],['lib/google/src/Google/Service','AdExchangeBuyer.php',1251],['lib/google/src/Google/Service','AdExchangeBuyer.php',1293],['lib/google/src/Google/Service','AdExchangeBuyer.php',1417],['lib/google/src/Google/Service','AdExchangeBuyer.php',1471],['lib/google/src/Google/Service','AdExchangeBuyer.php',1576],['lib/google/src/Google/Service','Books.php',1456],['lib/google/src/Google/Service','Books.php',1625],['lib/google/src/Google/Service','Books.php',1677],['lib/google/src/Google/Service','Books.php',1752],['lib/google/src/Google/Service','Books.php',2086],['lib/google/src/Google/Service','Books.php',2205],['lib/google/src/Google/Service','Books.php',2262],['lib/google/src/Google/Service','Books.php',2345],['lib/google/src/Google/Service','Books.php',2418],['lib/google/src/Google/Service','Books.php',2450],['lib/google/src/Google/Service','Oauth2.php',165],['lib/google/src/Google/Service','Oauth2.php',202],['lib/google/src/Google/Service','Analytics.php',1988],['lib/google/src/Google/Service','Analytics.php',2037],['lib/google/src/Google/Service','Analytics.php',2084],['lib/google/src/Google/Service','Analytics.php',2308],['lib/google/src/Google/Service','Analytics.php',2422],['lib/google/src/Google/Service','Analytics.php',2550],['lib/google/src/Google/Service','Analytics.php',2670],['lib/google/src/Google/Service','Analytics.php',2763],['lib/google/src/Google/Service','Analytics.php',2889],['lib/google/src/Google/Service','Analytics.php',3108],['lib/google/src/Google/Service','Analytics.php',3245],['lib/google/src/Google/Service','Analytics.php',3336],['lib/google/src/Google/Service','Analytics.php',3422],['lib/google/src/Google/Service','Analytics.php',3533],['lib/google/src/Google/Service','Coordinate.php',509],['lib/google/src/Google/Service','Coordinate.php',689],['lib','oauthlib.php',302],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/google/src/Google/Service','DeploymentManager.php',468],['lib/google/src/Google/Service','DeploymentManager.php',632],['lib/google/src/Google/Service','DeploymentManager.php',693],['lib/google/src/Google/Service','DeploymentManager.php',752],['lib/google/src/Google/Service','Blogger.php',945],['lib/google/src/Google/Service','Blogger.php',976],['lib/google/src/Google/Service','Blogger.php',1080],['lib/google/src/Google/Service','Blogger.php',1199],['lib/google/src/Google/Service','Blogger.php',1241],['lib/google/src/Google/Service','Blogger.php',1382],['lib/google/src/Google/Service','Blogger.php',1465],['lib/google/src/Google/Service','Blogger.php',1686],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['question/engine','states.php',116],['lib/google/src/Google/Service','Dataflow.php',292],['lib/horde/framework/Horde','Variables.php',135],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['competency/classes','persistent.php',86],['lib/google/src/Google/Service','CloudUserAccounts.php',542],['lib/google/src/Google/Service','CloudUserAccounts.php',643],['lib/google/src/Google/Service','CloudUserAccounts.php',908],['lib/google/src/Google/Service','Cloudresourcemanager.php',248],['lib/google/src/Google/Service','Cloudresourcemanager.php',427],['lib/editor/tinymce/classes','plugin.php',447],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','TagManager.php',950],['lib/google/src/Google/Service','TagManager.php',1036],['lib/google/src/Google/Service','TagManager.php',1128],['lib/google/src/Google/Service','TagManager.php',1280],['lib/google/src/Google/Service','TagManager.php',1373],['lib/google/src/Google/Service','TagManager.php',1467],['lib/google/src/Google/Service','TagManager.php',1561],['lib/google/src/Google/Service','TagManager.php',1711],['mod/lesson','locallib.php',3248],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapoolupdater.php',338],['lib/google/src/Google/Service','Replicapoolupdater.php',489],['lib/google/src/Google/Service','Bigquery.php',552],['lib/google/src/Google/Service','Bigquery.php',668],['lib/google/src/Google/Service','Bigquery.php',879],['lib/google/src/Google/Service','ShoppingContent.php',1066],['lib/google/src/Google/Service','ShoppingContent.php',1183],['lib/google/src/Google/Service','ShoppingContent.php',1283],['lib/google/src/Google/Service','ShoppingContent.php',1346],['lib/google/src/Google/Service','ShoppingContent.php',1464],['lib/google/src/Google/Service','ShoppingContent.php',1578],['lib/google/src/Google/Service','ShoppingContent.php',1773],['lib/google/src/Google/Service','ShoppingContent.php',1986],['lib/google/src/Google/Service','ShoppingContent.php',2063],['lib/google/src/Google/Service','Webmasters.php',371],['lib/google/src/Google/Service','Webmasters.php',464],['lib/google/src/Google/Service','Webmasters.php',540],['lib','navigationlib.php',384],['lib','navigationlib.php',836],['lib','navigationlib.php',2704],['lib','navigationlib.php',3139],['lib/google/src/Google/Service','Clouddebugger.php',399],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['lib/portfolio','exporter.php',134],['lib/google/src/Google/Service','Container.php',329],['lib/google/src/Google/Service','Container.php',396],['backup/cc/cc_lib/gral_lib','cssparser.php',147],['lib/horde/framework/Horde/Support','Array.php',30],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Storage.php',1059],['lib/google/src/Google/Service','Storage.php',1175],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1476],['lib/google/src/Google/Service','Storage.php',1709],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Genomics.php',660],['lib/google/src/Google/Service','Genomics.php',749],['lib/google/src/Google/Service','Genomics.php',918],['lib/google/src/Google/Service','Genomics.php',1007],['lib/google/src/Google/Service','Genomics.php',1185],['lib/google/src/Google/Service','Genomics.php',1268],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1475],['lib/google/src/Google/Service','Games.php',1220],['lib/google/src/Google/Service','Games.php',1339],['lib/google/src/Google/Service','Games.php',1441],['lib/google/src/Google/Service','Games.php',1699],['lib/google/src/Google/Service','Games.php',1806],['lib/google/src/Google/Service','Games.php',1948],['lib/google/src/Google/Service','Games.php',2082],['lib/google/src/Google/Service','Licensing.php',239],['lib/google/src/Google/Service','Fitness.php',417],['lib/google/src/Google/Service','Fitness.php',543],['lib/google/src/Google/Service','Reports.php',375],['lib/google/src/Google/Service','Reports.php',409],['lib/google/src/Google/Service','Gmail.php',779],['lib/google/src/Google/Service','Gmail.php',937],['lib/google/src/Google/Service','Gmail.php',1030],['lib/google/src/Google/Service','Gmail.php',1206],['lib/google/src/Google/Service','Gmail.php',1250],['lib/google/src/Google/Service','Taskqueue.php',264],['lib/google/src/Google/Service','Taskqueue.php',308],['lib/mustache/src/Mustache','HelperCollection.php',81],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Doubleclicksearch.php',257],['lib/google/src/Google/Service','Doubleclicksearch.php',381],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/google/src/Google/Service','Autoscaler.php',331],['lib/google/src/Google/Service','Autoscaler.php',445],['lib/google/src/Google/Service','AdExchangeSeller.php',444],['lib/google/src/Google/Service','AdExchangeSeller.php',552],['lib/google/src/Google/Service','AdExchangeSeller.php',666],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Prediction.php',276],['lib/behat/classes','behat_context_helper.php',63],['lib/google/src/Google/Service','SiteVerification.php',152],['lib/google/src/Google/Service','Drive.php',1333],['lib/google/src/Google/Service','Drive.php',1369],['lib/google/src/Google/Service','Drive.php',1422],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1617],['lib/google/src/Google/Service','Drive.php',1792],['lib/google/src/Google/Service','Drive.php',2054],['lib/google/src/Google/Service','Drive.php',2124],['lib/google/src/Google/Service','Drive.php',2256],['lib/google/src/Google/Service','Drive.php',2350],['lib/google/src/Google/Service','Drive.php',2418],['lib/google/src/Google/Service','Drive.php',2537],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Proximitybeacon.php',348],['lib/google/src/Google/Service','Groupssettings.php',108],['lib/google/src/Google/Service','Directory.php',1698],['lib/google/src/Google/Service','Directory.php',1766],['lib/google/src/Google/Service','Directory.php',1860],['lib/google/src/Google/Service','Directory.php',1930],['lib/google/src/Google/Service','Directory.php',2003],['lib/google/src/Google/Service','Directory.php',2072],['lib/google/src/Google/Service','Directory.php',2238],['lib/google/src/Google/Service','Directory.php',2365],['lib/google/src/Google/Service','Directory.php',2435],['lib/google/src/Google/Service','Directory.php',2531],['lib/google/src/Google/Service','Directory.php',2666],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',2850],['lib/google/src/Google/Service','Directory.php',2954],['lib/google/src/Google/Service','Directory.php',3012],['lib/google/src/Google/Service','Directory.php',3287],['lib/google/src/Google/Service','Fusiontables.php',659],['lib/google/src/Google/Service','Fusiontables.php',826],['lib/google/src/Google/Service','Fusiontables.php',950],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/google/src/Google/Service','AdSenseHost.php',645],['lib/google/src/Google/Service','AdSenseHost.php',686],['lib/google/src/Google/Service','AdSenseHost.php',751],['lib/google/src/Google/Service','AdSenseHost.php',918],['lib/google/src/Google/Service','AdSenseHost.php',1026],['lib/google/src/Google/Service','Plus.php',343],['lib/google/src/Google/Service','Plus.php',418],['lib/google/src/Google/Service','Plus.php',525],['lib/google/src/Google/Service','Mirror.php',438],['lib/google/src/Google/Service','Mirror.php',523],['lib/google/src/Google/Service','Mirror.php',563],['lib/google/src/Google/Service','Mirror.php',674],['lib/google/src/Google/Service','Mirror.php',786],['lib/google/src/Google/Service','AndroidEnterprise.php',1002],['lib/google/src/Google/Service','AndroidEnterprise.php',1109],['lib/google/src/Google/Service','AndroidEnterprise.php',1196],['lib/google/src/Google/Service','AndroidEnterprise.php',1312],['lib/google/src/Google/Service','AndroidEnterprise.php',1432],['lib/google/src/Google/Service','AndroidEnterprise.php',1524],['lib/google/src/Google/Service','AndroidEnterprise.php',1616],['lib/google/src/Google/Service','AndroidEnterprise.php',1705],['lib/google/src/Google/Service','AndroidEnterprise.php',1777],['lib/google/src/Google/Service','AndroidEnterprise.php',1879],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/testing/classes','nasty_strings.php',73],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/google/src/Google/Service','Playmoviespartner.php',411],['lib/google/src/Google/Service','Playmoviespartner.php',475],['lib/google/src/Google/Service','Playmoviespartner.php',580],['lib','coursecatlib.php',212],['lib/google/src/Google/Service','Cloudtrace.php',217],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['tag/classes','tag.php',190],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['competency/classes','url.php',55],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','Calendar.php',919],['lib/google/src/Google/Service','Calendar.php',1086],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1387],['lib/google/src/Google/Service','Calendar.php',1431],['lib/google/src/Google/Service','Calendar.php',1873],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['cache/stores/session','lib.php',225],['lib/google/src/Google/Service','Cloudbilling.php',162],['lib/google/src/Google/Service','PlusDomains.php',468],['lib/google/src/Google/Service','PlusDomains.php',593],['lib/google/src/Google/Service','PlusDomains.php',719],['lib/google/src/Google/Service','PlusDomains.php',813],['lib/google/src/Google/Service','Storagetransfer.php',248],['lib/google/src/Google/Service','Storagetransfer.php',295],['lib/google/src/Google/Service','Storagetransfer.php',396],['cache/stores/mongodb','lib.php',252],['lib/google/src/Google/Cache','Null.php',36],['lib/google/src/Google/Service','GamesConfiguration.php',265],['lib/google/src/Google/Service','GamesConfiguration.php',404],['cache/stores/file','lib.php',330],['cache/stores/memcached','lib.php',319],['lib/google/src/Google/Service','AppState.php',171],['lib/google/src/Google/Service','Resourceviews.php',354],['lib/google/src/Google/Service','Resourceviews.php',439],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','Classroom.php',484],['lib/google/src/Google/Service','Classroom.php',724],['lib/google/src/Google/Service','Classroom.php',830],['lib/google/src/Google/Service','Classroom.php',951],['lib/google/src/Google/Service','Classroom.php',1010],['lib/google/src/Google/Service','SQLAdmin.php',804],['lib/google/src/Google/Service','SQLAdmin.php',874],['lib/google/src/Google/Service','SQLAdmin.php',1076],['lib/google/src/Google/Service','SQLAdmin.php',1298],['lib/google/src/Google/Service','SQLAdmin.php',1387],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/google/src/Google/Service','Compute.php',4037],['lib/google/src/Google/Service','Compute.php',4166],['lib/google/src/Google/Service','Compute.php',4299],['lib/google/src/Google/Service','Compute.php',4460],['lib/google/src/Google/Service','Compute.php',4590],['lib/google/src/Google/Service','Compute.php',4686],['lib/google/src/Google/Service','Compute.php',4845],['lib/google/src/Google/Service','Compute.php',4957],['lib/google/src/Google/Service','Compute.php',5048],['lib/google/src/Google/Service','Compute.php',5188],['lib/google/src/Google/Service','Compute.php',5264],['lib/google/src/Google/Service','Compute.php',5394],['lib/google/src/Google/Service','Compute.php',5542],['lib/google/src/Google/Service','Compute.php',5726],['lib/google/src/Google/Service','Compute.php',6001],['lib/google/src/Google/Service','Compute.php',6171],['lib/google/src/Google/Service','Compute.php',6369],['lib/google/src/Google/Service','Compute.php',6595],['lib/google/src/Google/Service','Compute.php',6655],['lib/google/src/Google/Service','Compute.php',6732],['lib/google/src/Google/Service','Compute.php',6808],['lib/google/src/Google/Service','Compute.php',6914],['lib/google/src/Google/Service','Compute.php',6977],['lib/google/src/Google/Service','Compute.php',7052],['lib/google/src/Google/Service','Compute.php',7148],['lib/google/src/Google/Service','Compute.php',7223],['lib/google/src/Google/Service','Compute.php',7315],['lib/google/src/Google/Service','Compute.php',7425],['lib/google/src/Google/Service','Compute.php',7586],['lib/google/src/Google/Service','Compute.php',7750],['lib/google/src/Google/Service','Compute.php',7955],['lib/google/src/Google/Service','Compute.php',8050],['lib/google/src/Google/Service','Compute.php',8226],['lib/google/src/Google/Service','Compute.php',8321],['lib/google/src/Google/Service','Compute.php',8384],['lib/google/src/Google/Service','Pubsub.php',255],['lib/google/src/Google/Service','Pubsub.php',394],['lib/google/src/Google/Cache','Apc.php',52],['lib/google/src/Google/Service','Dfareporting.php',4559],['lib/google/src/Google/Service','Dfareporting.php',4587],['lib/google/src/Google/Service','Dfareporting.php',4629],['lib/google/src/Google/Service','Dfareporting.php',4671],['lib/google/src/Google/Service','Dfareporting.php',4779],['lib/google/src/Google/Service','Dfareporting.php',4867],['lib/google/src/Google/Service','Dfareporting.php',5014],['lib/google/src/Google/Service','Dfareporting.php',5117],['lib/google/src/Google/Service','Dfareporting.php',5308],['lib/google/src/Google/Service','Dfareporting.php',5427],['lib/google/src/Google/Service','Dfareporting.php',5525],['lib/google/src/Google/Service','Dfareporting.php',5580],['lib/google/src/Google/Service','Dfareporting.php',5683],['lib/google/src/Google/Service','Dfareporting.php',5769],['lib/google/src/Google/Service','Dfareporting.php',5891],['lib/google/src/Google/Service','Dfareporting.php',5997],['lib/google/src/Google/Service','Dfareporting.php',6105],['lib/google/src/Google/Service','Dfareporting.php',6255],['lib/google/src/Google/Service','Dfareporting.php',6314],['lib/google/src/Google/Service','Dfareporting.php',6411],['lib/google/src/Google/Service','Dfareporting.php',6529],['lib/google/src/Google/Service','Dfareporting.php',6609],['lib/google/src/Google/Service','Dfareporting.php',6746],['lib/google/src/Google/Service','Dfareporting.php',6862],['lib/google/src/Google/Service','Dfareporting.php',6940],['lib/google/src/Google/Service','Dfareporting.php',7011],['lib/google/src/Google/Service','Dfareporting.php',7131],['lib/google/src/Google/Service','Dfareporting.php',7172],['lib/google/src/Google/Service','Dfareporting.php',7214],['lib/google/src/Google/Service','Dfareporting.php',7256],['lib/google/src/Google/Service','Dfareporting.php',7320],['lib/google/src/Google/Service','Dfareporting.php',7378],['lib/google/src/Google/Service','Dfareporting.php',7517],['lib/google/src/Google/Service','Dfareporting.php',7640],['lib/google/src/Google/Service','Dfareporting.php',7771],['lib/google/src/Google/Service','Dfareporting.php',7812],['lib/google/src/Google/Service','Dfareporting.php',7853],['lib/google/src/Google/Service','Dfareporting.php',7935],['lib/google/src/Google/Service','Dfareporting.php',7995],['lib/google/src/Google/Service','Dfareporting.php',8116],['lib/google/src/Google/Service','Dfareporting.php',8258],['lib/google/src/Google/Service','Dfareporting.php',8307],['lib/google/src/Google/Service','Dfareporting.php',8421],['lib/google/src/Google/Service','Dfareporting.php',8482],['lib/google/src/Google/Service','Dfareporting.php',8584],['lib/google/src/Google/Service','Dfareporting.php',8643],['lib/google/src/Google/Service','Dfareporting.php',8682],['lib/google/src/Google/Service','Dfareporting.php',8724],['lib/google/src/Google/Service','Dfareporting.php',8782],['lib/google/src/Google/Service','Manager.php',259],['lib/google/src/Google/Service','Manager.php',338],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['lib','webdavlib.php',264]], 21532],
'io': ['io', '', [['lib/yuilib/3.17.2/io-base','io-base-debug.js',39],['lib/yuilib/3.17.2/io-base','io-base.js',39]], 193],
'on': ['on', '', [['lib/requirejs','require.js',508],['lib/jquery','jquery-3.1.0.js',4809]], 3823],
'clip': ['clip', 'Set a rectangular clipping area. ', [['lib/tcpdf','tcpdf.php',14423]], 14],
'pop': ['pop', 'Pop the latest timer start and return the difference with the current time. ', [['lib/horde/framework/Horde/Support','Timer.php',42],['lib/horde/framework/Horde/Support','Memory.php',58],['lib/evalmath','evalmath.class.php',467],['lib/horde/framework/Horde/Support','Stack.php',28],['lib/phpexcel/PHPExcel/CalcEngine','CyclicReferenceStack.php',57],['lib/horde/framework/Horde/Support','Array.php',53],['lib/mustache/src/Mustache','Context.php',52],['lib','outputlib.php',2063],['lib/phpexcel/PHPExcel/Calculation/Token','Stack.php',76]], 307],
'sethtml': ['sethtml', 'Set the source HTML ', [['lib/html2text','Html2Text.php',246],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',6099],['backup/cc/cc_lib/gral_lib','cssparser.php',117],['lib/google/src/Google/Service','Mirror.php',1691]], 262],
'apply': ['apply', '', [['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16662]], 2690],
'getstyle': ['getstyle', 'Get Style ', [['lib/phpexcel/PHPExcel/Style','Conditional.php',240],['lib/google/src/Google/Service','MapsEngine.php',4388],['lib/yuilib/2in3/2.9.0/build/yui2-carousel','yui2-carousel-debug.js',341],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',17496],['lib/phpexcel/PHPExcel','Cell.php',534],['lib/yuilib/2in3/2.9.0/build/yui2-carousel','yui2-carousel.js',340],['lib/phpexcel/PHPExcel','Worksheet.php',1396],['lib/editor/tinymce/tiny_mce/3.5.11/utils','form_utils.js',200],['lib/google/src/Google/Service','YouTube.php',6296]], 841],
'append': ['append', 'Append data to PPS ', [['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',55],['lib/horde/framework/Horde/Imap/Client','Base.php',1741]], 1081],
'parse': ['parse', 'Parse the input data ', [['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',122],['lib/minify/lib','JSMinPlus.php',732],['lib/google/src/Google/Utils','URITemplate.php',59],['lib/simplepie/library/SimplePie','Parser.php',78],['lib/simplepie/library/SimplePie/Parse','Date.php',582],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',44],['mnet/xmlrpc','xmlparser.php',61],['backup/cc/cc_lib/gral_lib','cssparser.php',251],['backup/util/xml/parser','progressive_parser.class.php',178],['lib/mustache/src/Mustache','Parser.php',27],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',365],['lib/htmlpurifier/HTMLPurifier','VarParser.php',51],['mod/wiki/parser','parser.php',16],['mod/wiki/parser','parser.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',20],['lib/simplepie/library/SimplePie','gzdecode.php',197],['mod/scorm/datamodels','scormlib.php',911],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',91],['lib/mustache/src/Mustache','Engine.php',731],['lib/lessphp','Parser.php',294],['lib','lexer.php',325],['lib/simplepie/library/SimplePie/HTTP','Parser.php',142]], 342],
'move': ['move', 'Moves the specified task to another position in the task list. This can include putting it as a child task under a new parent and/or move it to a different position among its sibling tasks. (tasks.move) ', [['lib/google/src/Google/Service','Tasks.php',516],['mod/chat','lib.php',39],['mod/lesson','locallib.php',2338],['lib/adodb','adodb.inc.php',3720],['lib/google/src/Google/Service','Calendar.php',1639],['lib','webdavlib.php',531]], 50],
'draw': ['draw', '', [['lib','graphlib.php',274]], 116],
'bind': ['bind', '', [['lib/requirejs','require.js',132],['lib/adodb/drivers','adodb-oci8.inc.php',1089],['lib/google/src/Google/Service','YouTube.php',2703]], 1215],
'substr': ['substr', '', [], 2823],
'each': ['each', '', [], 2670],
'date': ['date', '', [], 693]};
CLASS_DATA={
'editor': ['editor', 'Class for HTML editors ', [['lib/classes/plugininfo','editor.php',31]], 3]};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
