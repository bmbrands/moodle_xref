<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/assign/feedback/editpdf/classes/pdf.php source</title>
    <link rel="stylesheet" href="../../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../../';
subdir='mod/assign/feedback/editpdf/classes';
filename='pdf.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/assign/feedback/editpdf/classes/</a> -> <a href="pdf.php.html">pdf.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="pdf.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="pdf.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Library code for manipulating PDFs</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package assignfeedback_editpdf</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright 2012 Davo Smith</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  namespace assignfeedback_editpdf;
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../../_variables/CFG.html">$CFG</a>;
<a name="l30"><span class="linenum">  30</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../../_variables/libdir.html">libdir</a>.'/pdflib.php');
<a name="l31"><span class="linenum">  31</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../../../../mod/assign/feedback/editpdf/fpdi/fpdi.php.html">/mod/assign/feedback/editpdf/fpdi/fpdi.php</a>');
<a name="l32"><span class="linenum">  32</span></a>  
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment">/**</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * Library code for manipulating PDFs</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> *</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @package assignfeedback_editpdf</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * @copyright 2012 Davo Smith</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> */</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('pdf')" href="../../../../../_classes/pdf.html" onMouseOver="classPopup(event,'pdf')">pdf</a> extends \FPDI {
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">    /** @var int the number of the current page in the PDF being processed */</span>
<a name="l43"><span class="linenum">  43</span></a>      protected <a class="var it10055" onMouseOver="hilite(10055)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../../../../../_variables/currentpage.html">$currentpage</a> = 0;
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">    /** @var int the total number of pages in the PDF being processed */</span>
<a name="l45"><span class="linenum">  45</span></a>      protected <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a> = 0;
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">    /** @var float used to scale the pixel position of annotations (in the database) to the position in the final PDF */</span>
<a name="l47"><span class="linenum">  47</span></a>      protected <a class="var it94" onMouseOver="hilite(94)" onMouseOut="lolite()" onClick="logVariable('scale')" href="../../../../../_variables/scale.html">$scale</a> = 0.0;
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">    /** @var string the path in which to store generated page images */</span>
<a name="l49"><span class="linenum">  49</span></a>      protected <a class="var it28856" onMouseOver="hilite(28856)" onMouseOut="lolite()" onClick="logVariable('imagefolder')" href="../../../../../_variables/imagefolder.html">$imagefolder</a> = null;
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">    /** @var string the path to the PDF currently being processed */</span>
<a name="l51"><span class="linenum">  51</span></a>      protected <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../../_variables/filename.html">$filename</a> = null;
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">    /** No errors */</span>
<a name="l54"><span class="linenum">  54</span></a>      const GSPATH_OK = 'ok';
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">    /** Not set */</span>
<a name="l56"><span class="linenum">  56</span></a>      const GSPATH_EMPTY = 'empty';
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">    /** Does not exist */</span>
<a name="l58"><span class="linenum">  58</span></a>      const GSPATH_DOESNOTEXIST = 'doesnotexist';
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">    /** Is a dir */</span>
<a name="l60"><span class="linenum">  60</span></a>      const GSPATH_ISDIR = 'isdir';
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">    /** Not executable */</span>
<a name="l62"><span class="linenum">  62</span></a>      const GSPATH_NOTEXECUTABLE = 'notexecutable';
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">    /** Test file missing */</span>
<a name="l64"><span class="linenum">  64</span></a>      const GSPATH_NOTESTFILE = 'notestfile';
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">    /** Any other error */</span>
<a name="l66"><span class="linenum">  66</span></a>      const GSPATH_ERROR = 'error';
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">    /** Min. width an annotation should have */</span>
<a name="l68"><span class="linenum">  68</span></a>      const MIN_ANNOTATION_WIDTH = 5;
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">    /** Min. height an annotation should have */</span>
<a name="l70"><span class="linenum">  70</span></a>      const MIN_ANNOTATION_HEIGHT = 5;
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>      <span class="comment">/**</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     * Combine the given PDF files into a single PDF. Optionally add a coversheet and coversheet fields.</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     * @param string[] $pdflist  the filenames of the files to combine</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">     * @param string $outfilename the filename to write to</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">     * @return int the number of pages in the combined PDF</span>
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">     */</span>
<a name="l78"><span class="linenum">  78</span></a>      public function <a class="function" onClick="logFunction('combine_pdfs')" href="../../../../../_functions/combine_pdfs.html" onMouseOver="funcPopup(event,'combine_pdfs')">combine_pdfs</a>(<a class="var it28857" onMouseOver="hilite(28857)" onMouseOut="lolite()" onClick="logVariable('pdflist')" href="../../../../../_variables/pdflist.html">$pdflist</a>, <a class="var it28858" onMouseOver="hilite(28858)" onMouseOut="lolite()" onClick="logVariable('outfilename')" href="../../../../../_variables/outfilename.html">$outfilename</a>) {
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>          <a class="function" onClick="logFunction('raise_memory_limit')" href="../../../../../_functions/raise_memory_limit.html" onMouseOver="funcPopup(event,'raise_memory_limit')">raise_memory_limit</a>(<a class="constant" onClick="logConstant('MEMORY_EXTRA')" href="../../../../../_constants/MEMORY_EXTRA.html" onMouseOver="constPopup(event,'MEMORY_EXTRA')">MEMORY_EXTRA</a>);
<a name="l81"><span class="linenum">  81</span></a>          <a class="var it14691" onMouseOver="hilite(14691)" onMouseOut="lolite()" onClick="logVariable('olddebug')" href="../../../../../_variables/olddebug.html">$olddebug</a> = <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../../../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(0);
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setPageUnit')" href="../../../../../_functions/setpageunit.html" onMouseOver="funcPopup(event,'setpageunit')">setPageUnit</a>('pt');
<a name="l84"><span class="linenum">  84</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setPrintHeader')" href="../../../../../_functions/setprintheader.html" onMouseOver="funcPopup(event,'setprintheader')">setPrintHeader</a>(false);
<a name="l85"><span class="linenum">  85</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setPrintFooter')" href="../../../../../_functions/setprintfooter.html" onMouseOver="funcPopup(event,'setprintfooter')">setPrintFooter</a>(false);
<a name="l86"><span class="linenum">  86</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a> = 72.0 / 100.0;
<a name="l87"><span class="linenum">  87</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetFont')" href="../../../../../_functions/setfont.html" onMouseOver="funcPopup(event,'setfont')">SetFont</a>('helvetica', '', 16.0 * <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>);
<a name="l88"><span class="linenum">  88</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetTextColor')" href="../../../../../_functions/settextcolor.html" onMouseOver="funcPopup(event,'settextcolor')">SetTextColor</a>(0, 0, 0);
<a name="l89"><span class="linenum">  89</span></a>  
<a name="l90"><span class="linenum">  90</span></a>          <a class="var it28859" onMouseOver="hilite(28859)" onMouseOut="lolite()" onClick="logVariable('totalpagecount')" href="../../../../../_variables/totalpagecount.html">$totalpagecount</a> = 0;
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>          foreach (<a class="var it28857" onMouseOver="hilite(28857)" onMouseOut="lolite()" onClick="logVariable('pdflist')" href="../../../../../_variables/pdflist.html">$pdflist</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../../../_variables/file.html">$file</a>) {
<a name="l93"><span class="linenum">  93</span></a>              <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setSourceFile')" href="../../../../../_functions/setsourcefile.html" onMouseOver="funcPopup(event,'setsourcefile')">setSourceFile</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../../../_variables/file.html">$file</a>);
<a name="l94"><span class="linenum">  94</span></a>              <a class="var it28859" onMouseOver="hilite(28859)" onMouseOut="lolite()" onClick="logVariable('totalpagecount')" href="../../../../../_variables/totalpagecount.html">$totalpagecount</a> += <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a>;
<a name="l95"><span class="linenum">  95</span></a>              for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../../_variables/i.html">$i</a> = 1; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../../_variables/i.html">$i</a>&lt;=<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a>; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../../_variables/i.html">$i</a>++) {
<a name="l96"><span class="linenum">  96</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('create_page_from_source')" href="../../../../../_functions/create_page_from_source.html" onMouseOver="funcPopup(event,'create_page_from_source')">create_page_from_source</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../../_variables/i.html">$i</a>);
<a name="l97"><span class="linenum">  97</span></a>              }
<a name="l98"><span class="linenum">  98</span></a>          }
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_pdf')" href="../../../../../_functions/save_pdf.html" onMouseOver="funcPopup(event,'save_pdf')">save_pdf</a>(<a class="var it28858" onMouseOver="hilite(28858)" onMouseOut="lolite()" onClick="logVariable('outfilename')" href="../../../../../_variables/outfilename.html">$outfilename</a>);
<a name="l101"><span class="linenum"> 101</span></a>          <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../../../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(<a class="var it14691" onMouseOver="hilite(14691)" onMouseOut="lolite()" onClick="logVariable('olddebug')" href="../../../../../_variables/olddebug.html">$olddebug</a>);
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>          return <a class="var it28859" onMouseOver="hilite(28859)" onMouseOut="lolite()" onClick="logVariable('totalpagecount')" href="../../../../../_variables/totalpagecount.html">$totalpagecount</a>;
<a name="l104"><span class="linenum"> 104</span></a>      }
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>      <span class="comment">/**</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">     * The number of the current page in the PDF being processed</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     * @return int</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     */</span>
<a name="l110"><span class="linenum"> 110</span></a>      public function <a class="function" onClick="logFunction('current_page')" href="../../../../../_functions/current_page.html" onMouseOver="funcPopup(event,'current_page')">current_page</a>() {
<a name="l111"><span class="linenum"> 111</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentpage')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/currentpage.html">currentpage</a>;
<a name="l112"><span class="linenum"> 112</span></a>      }
<a name="l113"><span class="linenum"> 113</span></a>  
<a name="l114"><span class="linenum"> 114</span></a>      <span class="comment">/**</span>
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">     * The total number of pages in the PDF being processed</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">     * @return int</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     */</span>
<a name="l118"><span class="linenum"> 118</span></a>      public function <a class="function" onClick="logFunction('page_count')" href="../../../../../_functions/page_count.html" onMouseOver="funcPopup(event,'page_count')">page_count</a>() {
<a name="l119"><span class="linenum"> 119</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagecount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/pagecount.html">pagecount</a>;
<a name="l120"><span class="linenum"> 120</span></a>      }
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>      <span class="comment">/**</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * Load the specified PDF and set the initial output configuration</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     * Used when processing comments and outputting a new PDF</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     * @param string $filename the path to the PDF to load</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     * @return int the number of pages in the PDF</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     */</span>
<a name="l128"><span class="linenum"> 128</span></a>      public function <a class="function" onClick="logFunction('load_pdf')" href="../../../../../_functions/load_pdf.html" onMouseOver="funcPopup(event,'load_pdf')">load_pdf</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../../_variables/filename.html">$filename</a>) {
<a name="l129"><span class="linenum"> 129</span></a>          <a class="function" onClick="logFunction('raise_memory_limit')" href="../../../../../_functions/raise_memory_limit.html" onMouseOver="funcPopup(event,'raise_memory_limit')">raise_memory_limit</a>(<a class="constant" onClick="logConstant('MEMORY_EXTRA')" href="../../../../../_constants/MEMORY_EXTRA.html" onMouseOver="constPopup(event,'MEMORY_EXTRA')">MEMORY_EXTRA</a>);
<a name="l130"><span class="linenum"> 130</span></a>          <a class="var it14691" onMouseOver="hilite(14691)" onMouseOut="lolite()" onClick="logVariable('olddebug')" href="../../../../../_variables/olddebug.html">$olddebug</a> = <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../../../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(0);
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setPageUnit')" href="../../../../../_functions/setpageunit.html" onMouseOver="funcPopup(event,'setpageunit')">setPageUnit</a>('pt');
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a> = 72.0 / 100.0;
<a name="l134"><span class="linenum"> 134</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetFont')" href="../../../../../_functions/setfont.html" onMouseOver="funcPopup(event,'setfont')">SetFont</a>('helvetica', '', 16.0 * <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>);
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetFillColor')" href="../../../../../_functions/setfillcolor.html" onMouseOver="funcPopup(event,'setfillcolor')">SetFillColor</a>(255, 255, 176);
<a name="l136"><span class="linenum"> 136</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetDrawColor')" href="../../../../../_functions/setdrawcolor.html" onMouseOver="funcPopup(event,'setdrawcolor')">SetDrawColor</a>(0, 0, 0);
<a name="l137"><span class="linenum"> 137</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetLineWidth')" href="../../../../../_functions/setlinewidth.html" onMouseOver="funcPopup(event,'setlinewidth')">SetLineWidth</a>(1.0 * <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>);
<a name="l138"><span class="linenum"> 138</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetTextColor')" href="../../../../../_functions/settextcolor.html" onMouseOver="funcPopup(event,'settextcolor')">SetTextColor</a>(0, 0, 0);
<a name="l139"><span class="linenum"> 139</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setPrintHeader')" href="../../../../../_functions/setprintheader.html" onMouseOver="funcPopup(event,'setprintheader')">setPrintHeader</a>(false);
<a name="l140"><span class="linenum"> 140</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setPrintFooter')" href="../../../../../_functions/setprintfooter.html" onMouseOver="funcPopup(event,'setprintfooter')">setPrintFooter</a>(false);
<a name="l141"><span class="linenum"> 141</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagecount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/pagecount.html">pagecount</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setSourceFile')" href="../../../../../_functions/setsourcefile.html" onMouseOver="funcPopup(event,'setsourcefile')">setSourceFile</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../../_variables/filename.html">$filename</a>);
<a name="l142"><span class="linenum"> 142</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('filename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/filename.html">filename</a> = <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../../_variables/filename.html">$filename</a>;
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>          <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../../../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(<a class="var it14691" onMouseOver="hilite(14691)" onMouseOut="lolite()" onClick="logVariable('olddebug')" href="../../../../../_variables/olddebug.html">$olddebug</a>);
<a name="l145"><span class="linenum"> 145</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagecount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/pagecount.html">pagecount</a>;
<a name="l146"><span class="linenum"> 146</span></a>      }
<a name="l147"><span class="linenum"> 147</span></a>  
<a name="l148"><span class="linenum"> 148</span></a>      <span class="comment">/**</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     * Sets the name of the PDF to process, but only loads the file if the</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     * pagecount is zero (in order to count the number of pages)</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">     * Used when generating page images (but not a new PDF)</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">     * @param string $filename the path to the PDF to process</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     * @param int $pagecount optional the number of pages in the PDF, if known</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     * @return int the number of pages in the PDF</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     */</span>
<a name="l156"><span class="linenum"> 156</span></a>      public function <a class="function" onClick="logFunction('set_pdf')" href="../../../../../_functions/set_pdf.html" onMouseOver="funcPopup(event,'set_pdf')">set_pdf</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../../_variables/filename.html">$filename</a>, <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a> = 0) {
<a name="l157"><span class="linenum"> 157</span></a>          if (<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a> == 0) {
<a name="l158"><span class="linenum"> 158</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_pdf')" href="../../../../../_functions/load_pdf.html" onMouseOver="funcPopup(event,'load_pdf')">load_pdf</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../../_variables/filename.html">$filename</a>);
<a name="l159"><span class="linenum"> 159</span></a>          } else {
<a name="l160"><span class="linenum"> 160</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('filename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/filename.html">filename</a> = <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../../_variables/filename.html">$filename</a>;
<a name="l161"><span class="linenum"> 161</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagecount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/pagecount.html">pagecount</a> = <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a>;
<a name="l162"><span class="linenum"> 162</span></a>              return <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a>;
<a name="l163"><span class="linenum"> 163</span></a>          }
<a name="l164"><span class="linenum"> 164</span></a>      }
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>      <span class="comment">/**</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     * Copy the next page from the source file and set it as the current page</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     * @return bool true if successful</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     */</span>
<a name="l170"><span class="linenum"> 170</span></a>      public function <a class="function" onClick="logFunction('copy_page')" href="../../../../../_functions/copy_page.html" onMouseOver="funcPopup(event,'copy_page')">copy_page</a>() {
<a name="l171"><span class="linenum"> 171</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('filename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/filename.html">filename</a>) {
<a name="l172"><span class="linenum"> 172</span></a>              return false;
<a name="l173"><span class="linenum"> 173</span></a>          }
<a name="l174"><span class="linenum"> 174</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentpage')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/currentpage.html">currentpage</a>&gt;=<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pagecount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/pagecount.html">pagecount</a>) {
<a name="l175"><span class="linenum"> 175</span></a>              return false;
<a name="l176"><span class="linenum"> 176</span></a>          }
<a name="l177"><span class="linenum"> 177</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentpage')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/currentpage.html">currentpage</a>++;
<a name="l178"><span class="linenum"> 178</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('create_page_from_source')" href="../../../../../_functions/create_page_from_source.html" onMouseOver="funcPopup(event,'create_page_from_source')">create_page_from_source</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentpage')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/currentpage.html">currentpage</a>);
<a name="l179"><span class="linenum"> 179</span></a>          return true;
<a name="l180"><span class="linenum"> 180</span></a>      }
<a name="l181"><span class="linenum"> 181</span></a>  
<a name="l182"><span class="linenum"> 182</span></a>      <span class="comment">/**</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     * Create a page from a source PDF.</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">     *</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">     * @param int $pageno</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">     */</span>
<a name="l187"><span class="linenum"> 187</span></a>      protected function <a class="function" onClick="logFunction('create_page_from_source')" href="../../../../../_functions/create_page_from_source.html" onMouseOver="funcPopup(event,'create_page_from_source')">create_page_from_source</a>(<a class="var it5022" onMouseOver="hilite(5022)" onMouseOut="lolite()" onClick="logVariable('pageno')" href="../../../../../_variables/pageno.html">$pageno</a>) {
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">        // Get the size (and deduce the orientation) of the next page.</span>
<a name="l189"><span class="linenum"> 189</span></a>          <a class="var it2289" onMouseOver="hilite(2289)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../../../../_variables/template.html">$template</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('importPage')" href="../../../../../_functions/importpage.html" onMouseOver="funcPopup(event,'importpage')">importPage</a>(<a class="var it5022" onMouseOver="hilite(5022)" onMouseOut="lolite()" onClick="logVariable('pageno')" href="../../../../../_variables/pageno.html">$pageno</a>);
<a name="l190"><span class="linenum"> 190</span></a>          <a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../../../_variables/size.html">$size</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getTemplateSize')" href="../../../../../_functions/gettemplatesize.html" onMouseOver="funcPopup(event,'gettemplatesize')">getTemplateSize</a>(<a class="var it2289" onMouseOver="hilite(2289)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../../../../_variables/template.html">$template</a>);
<a name="l191"><span class="linenum"> 191</span></a>          <a class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" onClick="logVariable('orientation')" href="../../../../../_variables/orientation.html">$orientation</a> = 'P';
<a name="l192"><span class="linenum"> 192</span></a>          if (<a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../../../_variables/size.html">$size</a>['w'] &gt; <a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../../../_variables/size.html">$size</a>['h']) {
<a name="l193"><span class="linenum"> 193</span></a>              <a class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" onClick="logVariable('orientation')" href="../../../../../_variables/orientation.html">$orientation</a> = 'L';
<a name="l194"><span class="linenum"> 194</span></a>          }
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">        // Create a page of the required size / orientation.</span>
<a name="l196"><span class="linenum"> 196</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('AddPage')" href="../../../../../_functions/addpage.html" onMouseOver="funcPopup(event,'addpage')">AddPage</a>(<a class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" onClick="logVariable('orientation')" href="../../../../../_variables/orientation.html">$orientation</a>, array(<a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../../../_variables/size.html">$size</a>['w'], <a class="var it804" onMouseOver="hilite(804)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../../../_variables/size.html">$size</a>['h']));
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">        // Prevent new page creation when comments are at the bottom of a page.</span>
<a name="l198"><span class="linenum"> 198</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setPageOrientation')" href="../../../../../_functions/setpageorientation.html" onMouseOver="funcPopup(event,'setpageorientation')">setPageOrientation</a>(<a class="var it8994" onMouseOver="hilite(8994)" onMouseOut="lolite()" onClick="logVariable('orientation')" href="../../../../../_variables/orientation.html">$orientation</a>, false, 0);
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">        // Fill in the page with the original contents from the student.</span>
<a name="l200"><span class="linenum"> 200</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('useTemplate')" href="../../../../../_functions/usetemplate.html" onMouseOver="funcPopup(event,'usetemplate')">useTemplate</a>(<a class="var it2289" onMouseOver="hilite(2289)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../../../../_variables/template.html">$template</a>);
<a name="l201"><span class="linenum"> 201</span></a>      }
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>      <span class="comment">/**</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">     * Copy all the remaining pages in the file</span>
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">     */</span>
<a name="l206"><span class="linenum"> 206</span></a>      public function <a class="function" onClick="logFunction('copy_remaining_pages')" href="../../../../../_functions/copy_remaining_pages.html" onMouseOver="funcPopup(event,'copy_remaining_pages')">copy_remaining_pages</a>() {
<a name="l207"><span class="linenum"> 207</span></a>          <a class="var it20929" onMouseOver="hilite(20929)" onMouseOut="lolite()" onClick="logVariable('morepages')" href="../../../../../_variables/morepages.html">$morepages</a> = true;
<a name="l208"><span class="linenum"> 208</span></a>          while (<a class="var it20929" onMouseOver="hilite(20929)" onMouseOut="lolite()" onClick="logVariable('morepages')" href="../../../../../_variables/morepages.html">$morepages</a>) {
<a name="l209"><span class="linenum"> 209</span></a>              <a class="var it20929" onMouseOver="hilite(20929)" onMouseOut="lolite()" onClick="logVariable('morepages')" href="../../../../../_variables/morepages.html">$morepages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('copy_page')" href="../../../../../_functions/copy_page.html" onMouseOver="funcPopup(event,'copy_page')">copy_page</a>();
<a name="l210"><span class="linenum"> 210</span></a>          }
<a name="l211"><span class="linenum"> 211</span></a>      }
<a name="l212"><span class="linenum"> 212</span></a>  
<a name="l213"><span class="linenum"> 213</span></a>      <span class="comment">/**</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     * Add a comment to the current page</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     * @param string $text the text of the comment</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">     * @param int $x the x-coordinate of the comment (in pixels)</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">     * @param int $y the y-coordinate of the comment (in pixels)</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">     * @param int $width the width of the comment (in pixels)</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">     * @param string $colour optional the background colour of the comment (red, yellow, green, blue, white, clear)</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     * @return bool true if successful (always)</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">     */</span>
<a name="l222"><span class="linenum"> 222</span></a>      public function <a class="function" onClick="logFunction('add_comment')" href="../../../../../_functions/add_comment.html" onMouseOver="funcPopup(event,'add_comment')">add_comment</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../../_variables/text.html">$text</a>, <a class="var it1123" onMouseOver="hilite(1123)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../../../../_variables/x.html">$x</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../../../../../_variables/y.html">$y</a>, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../../../../../_variables/width.html">$width</a>, <a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('colour')" href="../../../../../_variables/colour.html">$colour</a> = 'yellow') {
<a name="l223"><span class="linenum"> 223</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('filename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/filename.html">filename</a>) {
<a name="l224"><span class="linenum"> 224</span></a>              return false;
<a name="l225"><span class="linenum"> 225</span></a>          }
<a name="l226"><span class="linenum"> 226</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetDrawColor')" href="../../../../../_functions/setdrawcolor.html" onMouseOver="funcPopup(event,'setdrawcolor')">SetDrawColor</a>(51, 51, 51);
<a name="l227"><span class="linenum"> 227</span></a>          switch (<a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('colour')" href="../../../../../_variables/colour.html">$colour</a>) {
<a name="l228"><span class="linenum"> 228</span></a>              case 'red':
<a name="l229"><span class="linenum"> 229</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetFillColor')" href="../../../../../_functions/setfillcolor.html" onMouseOver="funcPopup(event,'setfillcolor')">SetFillColor</a>(249, 181, 179);
<a name="l230"><span class="linenum"> 230</span></a>                  break;
<a name="l231"><span class="linenum"> 231</span></a>              case 'green':
<a name="l232"><span class="linenum"> 232</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetFillColor')" href="../../../../../_functions/setfillcolor.html" onMouseOver="funcPopup(event,'setfillcolor')">SetFillColor</a>(214, 234, 178);
<a name="l233"><span class="linenum"> 233</span></a>                  break;
<a name="l234"><span class="linenum"> 234</span></a>              case 'blue':
<a name="l235"><span class="linenum"> 235</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetFillColor')" href="../../../../../_functions/setfillcolor.html" onMouseOver="funcPopup(event,'setfillcolor')">SetFillColor</a>(203, 217, 237);
<a name="l236"><span class="linenum"> 236</span></a>                  break;
<a name="l237"><span class="linenum"> 237</span></a>              case 'white':
<a name="l238"><span class="linenum"> 238</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetFillColor')" href="../../../../../_functions/setfillcolor.html" onMouseOver="funcPopup(event,'setfillcolor')">SetFillColor</a>(255, 255, 255);
<a name="l239"><span class="linenum"> 239</span></a>                  break;
<a name="l240"><span class="linenum"> 240</span></a>              default: <span class="comment">/* Yellow */</span>
<a name="l241"><span class="linenum"> 241</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetFillColor')" href="../../../../../_functions/setfillcolor.html" onMouseOver="funcPopup(event,'setfillcolor')">SetFillColor</a>(255, 236, 174);
<a name="l242"><span class="linenum"> 242</span></a>                  break;
<a name="l243"><span class="linenum"> 243</span></a>          }
<a name="l244"><span class="linenum"> 244</span></a>  
<a name="l245"><span class="linenum"> 245</span></a>          <a class="var it1123" onMouseOver="hilite(1123)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../../../../_variables/x.html">$x</a> *= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>;
<a name="l246"><span class="linenum"> 246</span></a>          <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../../../../../_variables/y.html">$y</a> *= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>;
<a name="l247"><span class="linenum"> 247</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../../../../../_variables/width.html">$width</a> *= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>;
<a name="l248"><span class="linenum"> 248</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&amp;lt;', '&lt;', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../../_variables/text.html">$text</a>);
<a name="l249"><span class="linenum"> 249</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&amp;gt;', '&gt;', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../../_variables/text.html">$text</a>);
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">        // Draw the text with a border, but no background colour (using a background colour would cause the fill to</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">        // appear behind any existing content on the page, hence the extra filled rectangle drawn below).</span>
<a name="l252"><span class="linenum"> 252</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('MultiCell')" href="../../../../../_functions/multicell.html" onMouseOver="funcPopup(event,'multicell')">MultiCell</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../../../../../_variables/width.html">$width</a>, 1.0, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../../_variables/text.html">$text</a>, 0, 'L', 0, 4, <a class="var it1123" onMouseOver="hilite(1123)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../../../../_variables/x.html">$x</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../../../../../_variables/y.html">$y</a>); <span class="comment">/* width, height, text, border, justify, fill, ln, x, y */</span>
<a name="l253"><span class="linenum"> 253</span></a>          if (<a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('colour')" href="../../../../../_variables/colour.html">$colour</a> != 'clear') {
<a name="l254"><span class="linenum"> 254</span></a>              <a class="var it28860" onMouseOver="hilite(28860)" onMouseOut="lolite()" onClick="logVariable('newy')" href="../../../../../_variables/newy.html">$newy</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('GetY')" href="../../../../../_functions/gety.html" onMouseOver="funcPopup(event,'gety')">GetY</a>();
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">            // Now we know the final size of the comment, draw a rectangle with the background colour.</span>
<a name="l256"><span class="linenum"> 256</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('Rect')" href="../../../../../_functions/rect.html" onMouseOver="funcPopup(event,'rect')">Rect</a>(<a class="var it1123" onMouseOver="hilite(1123)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../../../../_variables/x.html">$x</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../../../../../_variables/y.html">$y</a>, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../../../../../_variables/width.html">$width</a>, <a class="var it28860" onMouseOver="hilite(28860)" onMouseOut="lolite()" onClick="logVariable('newy')" href="../../../../../_variables/newy.html">$newy</a> - <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../../../../../_variables/y.html">$y</a>, 'DF');
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">            // Re-draw the text over the top of the background rectangle.</span>
<a name="l258"><span class="linenum"> 258</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('MultiCell')" href="../../../../../_functions/multicell.html" onMouseOver="funcPopup(event,'multicell')">MultiCell</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../../../../../_variables/width.html">$width</a>, 1.0, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../../_variables/text.html">$text</a>, 0, 'L', 0, 4, <a class="var it1123" onMouseOver="hilite(1123)" onMouseOut="lolite()" onClick="logVariable('x')" href="../../../../../_variables/x.html">$x</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../../../../../_variables/y.html">$y</a>); <span class="comment">/* width, height, text, border, justify, fill, ln, x, y */</span>
<a name="l259"><span class="linenum"> 259</span></a>          }
<a name="l260"><span class="linenum"> 260</span></a>          return true;
<a name="l261"><span class="linenum"> 261</span></a>      }
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>      <span class="comment">/**</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">     * Add an annotation to the current page</span>
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">     * @param int $sx starting x-coordinate (in pixels)</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">     * @param int $sy starting y-coordinate (in pixels)</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     * @param int $ex ending x-coordinate (in pixels)</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">     * @param int $ey ending y-coordinate (in pixels)</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">     * @param string $colour optional the colour of the annotation (red, yellow, green, blue, white, black)</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">     * @param string $type optional the type of annotation (line, oval, rectangle, highlight, pen, stamp)</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">     * @param int[]|string $path optional for 'pen' annotations this is an array of x and y coordinates for</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">     *              the line, for 'stamp' annotations it is the name of the stamp file (without the path)</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">     * @param string $imagefolder - Folder containing stamp images.</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">     * @return bool true if successful (always)</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">     */</span>
<a name="l276"><span class="linenum"> 276</span></a>      public function <a class="function" onClick="logFunction('add_annotation')" href="../../../../../_functions/add_annotation.html" onMouseOver="funcPopup(event,'add_annotation')">add_annotation</a>(<a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a>, <a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a>, <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../../../_variables/ex.html">$ex</a>, <a class="var it28861" onMouseOver="hilite(28861)" onMouseOut="lolite()" onClick="logVariable('ey')" href="../../../../../_variables/ey.html">$ey</a>, <a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('colour')" href="../../../../../_variables/colour.html">$colour</a> = 'yellow', <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../../_variables/type.html">$type</a> = 'line', <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../../../_variables/path.html">$path</a>, <a class="var it28856" onMouseOver="hilite(28856)" onMouseOut="lolite()" onClick="logVariable('imagefolder')" href="../../../../../_variables/imagefolder.html">$imagefolder</a>) {
<a name="l277"><span class="linenum"> 277</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../../_variables/CFG.html">$CFG</a>;
<a name="l278"><span class="linenum"> 278</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('filename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/filename.html">filename</a>) {
<a name="l279"><span class="linenum"> 279</span></a>              return false;
<a name="l280"><span class="linenum"> 280</span></a>          }
<a name="l281"><span class="linenum"> 281</span></a>          switch (<a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('colour')" href="../../../../../_variables/colour.html">$colour</a>) {
<a name="l282"><span class="linenum"> 282</span></a>              case 'yellow':
<a name="l283"><span class="linenum"> 283</span></a>                  <a class="var it28862" onMouseOver="hilite(28862)" onMouseOut="lolite()" onClick="logVariable('colourarray')" href="../../../../../_variables/colourarray.html">$colourarray</a> = array(255, 207, 53);
<a name="l284"><span class="linenum"> 284</span></a>                  break;
<a name="l285"><span class="linenum"> 285</span></a>              case 'green':
<a name="l286"><span class="linenum"> 286</span></a>                  <a class="var it28862" onMouseOver="hilite(28862)" onMouseOut="lolite()" onClick="logVariable('colourarray')" href="../../../../../_variables/colourarray.html">$colourarray</a> = array(153, 202, 62);
<a name="l287"><span class="linenum"> 287</span></a>                  break;
<a name="l288"><span class="linenum"> 288</span></a>              case 'blue':
<a name="l289"><span class="linenum"> 289</span></a>                  <a class="var it28862" onMouseOver="hilite(28862)" onMouseOut="lolite()" onClick="logVariable('colourarray')" href="../../../../../_variables/colourarray.html">$colourarray</a> = array(125, 159, 211);
<a name="l290"><span class="linenum"> 290</span></a>                  break;
<a name="l291"><span class="linenum"> 291</span></a>              case 'white':
<a name="l292"><span class="linenum"> 292</span></a>                  <a class="var it28862" onMouseOver="hilite(28862)" onMouseOut="lolite()" onClick="logVariable('colourarray')" href="../../../../../_variables/colourarray.html">$colourarray</a> = array(255, 255, 255);
<a name="l293"><span class="linenum"> 293</span></a>                  break;
<a name="l294"><span class="linenum"> 294</span></a>              case 'black':
<a name="l295"><span class="linenum"> 295</span></a>                  <a class="var it28862" onMouseOver="hilite(28862)" onMouseOut="lolite()" onClick="logVariable('colourarray')" href="../../../../../_variables/colourarray.html">$colourarray</a> = array(51, 51, 51);
<a name="l296"><span class="linenum"> 296</span></a>                  break;
<a name="l297"><span class="linenum"> 297</span></a>              default: <span class="comment">/* Red */</span>
<a name="l298"><span class="linenum"> 298</span></a>                  <a class="var it299" onMouseOver="hilite(299)" onMouseOut="lolite()" onClick="logVariable('colour')" href="../../../../../_variables/colour.html">$colour</a> = 'red';
<a name="l299"><span class="linenum"> 299</span></a>                  <a class="var it28862" onMouseOver="hilite(28862)" onMouseOut="lolite()" onClick="logVariable('colourarray')" href="../../../../../_variables/colourarray.html">$colourarray</a> = array(239, 69, 64);
<a name="l300"><span class="linenum"> 300</span></a>                  break;
<a name="l301"><span class="linenum"> 301</span></a>          }
<a name="l302"><span class="linenum"> 302</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetDrawColorArray')" href="../../../../../_functions/setdrawcolorarray.html" onMouseOver="funcPopup(event,'setdrawcolorarray')">SetDrawColorArray</a>(<a class="var it28862" onMouseOver="hilite(28862)" onMouseOut="lolite()" onClick="logVariable('colourarray')" href="../../../../../_variables/colourarray.html">$colourarray</a>);
<a name="l303"><span class="linenum"> 303</span></a>  
<a name="l304"><span class="linenum"> 304</span></a>          <a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a> *= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>;
<a name="l305"><span class="linenum"> 305</span></a>          <a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a> *= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>;
<a name="l306"><span class="linenum"> 306</span></a>          <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../../../_variables/ex.html">$ex</a> *= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>;
<a name="l307"><span class="linenum"> 307</span></a>          <a class="var it28861" onMouseOver="hilite(28861)" onMouseOut="lolite()" onClick="logVariable('ey')" href="../../../../../_variables/ey.html">$ey</a> *= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>;
<a name="l308"><span class="linenum"> 308</span></a>  
<a name="l309"><span class="linenum"> 309</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetLineWidth')" href="../../../../../_functions/setlinewidth.html" onMouseOver="funcPopup(event,'setlinewidth')">SetLineWidth</a>(3.0 * <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>);
<a name="l310"><span class="linenum"> 310</span></a>          switch (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../../_variables/type.html">$type</a>) {
<a name="l311"><span class="linenum"> 311</span></a>              case 'oval':
<a name="l312"><span class="linenum"> 312</span></a>                  <a class="var it17305" onMouseOver="hilite(17305)" onMouseOut="lolite()" onClick="logVariable('rx')" href="../../../../../_variables/rx.html">$rx</a> = <a class="phpfunction" onClick="logFunction('abs')" href="../../../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a> - <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../../../_variables/ex.html">$ex</a>) / 2;
<a name="l313"><span class="linenum"> 313</span></a>                  <a class="var it17306" onMouseOver="hilite(17306)" onMouseOut="lolite()" onClick="logVariable('ry')" href="../../../../../_variables/ry.html">$ry</a> = <a class="phpfunction" onClick="logFunction('abs')" href="../../../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a> - <a class="var it28861" onMouseOver="hilite(28861)" onMouseOut="lolite()" onClick="logVariable('ey')" href="../../../../../_variables/ey.html">$ey</a>) / 2;
<a name="l314"><span class="linenum"> 314</span></a>                  <a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a> = <a class="phpfunction" onClick="logFunction('min')" href="../../../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(<a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a>, <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../../../_variables/ex.html">$ex</a>) + <a class="var it17305" onMouseOver="hilite(17305)" onMouseOut="lolite()" onClick="logVariable('rx')" href="../../../../../_variables/rx.html">$rx</a>;
<a name="l315"><span class="linenum"> 315</span></a>                  <a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a> = <a class="phpfunction" onClick="logFunction('min')" href="../../../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(<a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a>, <a class="var it28861" onMouseOver="hilite(28861)" onMouseOut="lolite()" onClick="logVariable('ey')" href="../../../../../_variables/ey.html">$ey</a>) + <a class="var it17306" onMouseOver="hilite(17306)" onMouseOut="lolite()" onClick="logVariable('ry')" href="../../../../../_variables/ry.html">$ry</a>;
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">                // $rx and $ry should be &gt;= min width and height</span>
<a name="l318"><span class="linenum"> 318</span></a>                  if (<a class="var it17305" onMouseOver="hilite(17305)" onMouseOut="lolite()" onClick="logVariable('rx')" href="../../../../../_variables/rx.html">$rx</a> &lt; self::MIN_ANNOTATION_WIDTH) {
<a name="l319"><span class="linenum"> 319</span></a>                      <a class="var it17305" onMouseOver="hilite(17305)" onMouseOut="lolite()" onClick="logVariable('rx')" href="../../../../../_variables/rx.html">$rx</a> = self::MIN_ANNOTATION_WIDTH;
<a name="l320"><span class="linenum"> 320</span></a>                  }
<a name="l321"><span class="linenum"> 321</span></a>                  if (<a class="var it17306" onMouseOver="hilite(17306)" onMouseOut="lolite()" onClick="logVariable('ry')" href="../../../../../_variables/ry.html">$ry</a> &lt; self::MIN_ANNOTATION_HEIGHT) {
<a name="l322"><span class="linenum"> 322</span></a>                      <a class="var it17306" onMouseOver="hilite(17306)" onMouseOut="lolite()" onClick="logVariable('ry')" href="../../../../../_variables/ry.html">$ry</a> = self::MIN_ANNOTATION_HEIGHT;
<a name="l323"><span class="linenum"> 323</span></a>                  }
<a name="l324"><span class="linenum"> 324</span></a>  
<a name="l325"><span class="linenum"> 325</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('Ellipse')" href="../../../../../_functions/ellipse.html" onMouseOver="funcPopup(event,'ellipse')">Ellipse</a>(<a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a>, <a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a>, <a class="var it17305" onMouseOver="hilite(17305)" onMouseOut="lolite()" onClick="logVariable('rx')" href="../../../../../_variables/rx.html">$rx</a>, <a class="var it17306" onMouseOver="hilite(17306)" onMouseOut="lolite()" onClick="logVariable('ry')" href="../../../../../_variables/ry.html">$ry</a>);
<a name="l326"><span class="linenum"> 326</span></a>                  break;
<a name="l327"><span class="linenum"> 327</span></a>              case 'rectangle':
<a name="l328"><span class="linenum"> 328</span></a>                  <a class="var it2888" onMouseOver="hilite(2888)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../../../_variables/w.html">$w</a> = <a class="phpfunction" onClick="logFunction('abs')" href="../../../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a> - <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../../../_variables/ex.html">$ex</a>);
<a name="l329"><span class="linenum"> 329</span></a>                  <a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../../_variables/h.html">$h</a> = <a class="phpfunction" onClick="logFunction('abs')" href="../../../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a> - <a class="var it28861" onMouseOver="hilite(28861)" onMouseOut="lolite()" onClick="logVariable('ey')" href="../../../../../_variables/ey.html">$ey</a>);
<a name="l330"><span class="linenum"> 330</span></a>                  <a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a> = <a class="phpfunction" onClick="logFunction('min')" href="../../../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(<a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a>, <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../../../_variables/ex.html">$ex</a>);
<a name="l331"><span class="linenum"> 331</span></a>                  <a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a> = <a class="phpfunction" onClick="logFunction('min')" href="../../../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(<a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a>, <a class="var it28861" onMouseOver="hilite(28861)" onMouseOut="lolite()" onClick="logVariable('ey')" href="../../../../../_variables/ey.html">$ey</a>);
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">                // Width or height should be &gt;= min width and height</span>
<a name="l334"><span class="linenum"> 334</span></a>                  if (<a class="var it2888" onMouseOver="hilite(2888)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../../../_variables/w.html">$w</a> &lt; self::MIN_ANNOTATION_WIDTH) {
<a name="l335"><span class="linenum"> 335</span></a>                      <a class="var it2888" onMouseOver="hilite(2888)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../../../_variables/w.html">$w</a> = self::MIN_ANNOTATION_WIDTH;
<a name="l336"><span class="linenum"> 336</span></a>                  }
<a name="l337"><span class="linenum"> 337</span></a>                  if (<a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../../_variables/h.html">$h</a> &lt; self::MIN_ANNOTATION_HEIGHT) {
<a name="l338"><span class="linenum"> 338</span></a>                      <a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../../_variables/h.html">$h</a> = self::MIN_ANNOTATION_HEIGHT;
<a name="l339"><span class="linenum"> 339</span></a>                  }
<a name="l340"><span class="linenum"> 340</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('Rect')" href="../../../../../_functions/rect.html" onMouseOver="funcPopup(event,'rect')">Rect</a>(<a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a>, <a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a>, <a class="var it2888" onMouseOver="hilite(2888)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../../../_variables/w.html">$w</a>, <a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../../_variables/h.html">$h</a>);
<a name="l341"><span class="linenum"> 341</span></a>                  break;
<a name="l342"><span class="linenum"> 342</span></a>              case 'highlight':
<a name="l343"><span class="linenum"> 343</span></a>                  <a class="var it2888" onMouseOver="hilite(2888)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../../../_variables/w.html">$w</a> = <a class="phpfunction" onClick="logFunction('abs')" href="../../../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a> - <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../../../_variables/ex.html">$ex</a>);
<a name="l344"><span class="linenum"> 344</span></a>                  <a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../../_variables/h.html">$h</a> = 8.0 * <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>;
<a name="l345"><span class="linenum"> 345</span></a>                  <a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a> = <a class="phpfunction" onClick="logFunction('min')" href="../../../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(<a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a>, <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../../../_variables/ex.html">$ex</a>);
<a name="l346"><span class="linenum"> 346</span></a>                  <a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a> = <a class="phpfunction" onClick="logFunction('min')" href="../../../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(<a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a>, <a class="var it28861" onMouseOver="hilite(28861)" onMouseOut="lolite()" onClick="logVariable('ey')" href="../../../../../_variables/ey.html">$ey</a>) + (<a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../../_variables/h.html">$h</a> * 0.5);
<a name="l347"><span class="linenum"> 347</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetAlpha')" href="../../../../../_functions/setalpha.html" onMouseOver="funcPopup(event,'setalpha')">SetAlpha</a>(0.5, 'Normal', 0.5, 'Normal');
<a name="l348"><span class="linenum"> 348</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetLineWidth')" href="../../../../../_functions/setlinewidth.html" onMouseOver="funcPopup(event,'setlinewidth')">SetLineWidth</a>(8.0 * <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>);
<a name="l349"><span class="linenum"> 349</span></a>  
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">                // width should be &gt;= min width</span>
<a name="l351"><span class="linenum"> 351</span></a>                  if (<a class="var it2888" onMouseOver="hilite(2888)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../../../_variables/w.html">$w</a> &lt; self::MIN_ANNOTATION_WIDTH) {
<a name="l352"><span class="linenum"> 352</span></a>                      <a class="var it2888" onMouseOver="hilite(2888)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../../../_variables/w.html">$w</a> = self::MIN_ANNOTATION_WIDTH;
<a name="l353"><span class="linenum"> 353</span></a>                  }
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('Rect')" href="../../../../../_functions/rect.html" onMouseOver="funcPopup(event,'rect')">Rect</a>(<a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a>, <a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a>, <a class="var it2888" onMouseOver="hilite(2888)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../../../_variables/w.html">$w</a>, <a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../../_variables/h.html">$h</a>);
<a name="l356"><span class="linenum"> 356</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetAlpha')" href="../../../../../_functions/setalpha.html" onMouseOver="funcPopup(event,'setalpha')">SetAlpha</a>(1.0, 'Normal', 1.0, 'Normal');
<a name="l357"><span class="linenum"> 357</span></a>                  break;
<a name="l358"><span class="linenum"> 358</span></a>              case 'pen':
<a name="l359"><span class="linenum"> 359</span></a>                  if (<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../../../_variables/path.html">$path</a>) {
<a name="l360"><span class="linenum"> 360</span></a>                      <a class="var it28863" onMouseOver="hilite(28863)" onMouseOut="lolite()" onClick="logVariable('scalepath')" href="../../../../../_variables/scalepath.html">$scalepath</a> = array();
<a name="l361"><span class="linenum"> 361</span></a>                      <a class="var it17705" onMouseOver="hilite(17705)" onMouseOut="lolite()" onClick="logVariable('points')" href="../../../../../_variables/points.html">$points</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../../../../../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('/[,:]/', <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../../../_variables/path.html">$path</a>);
<a name="l362"><span class="linenum"> 362</span></a>                      foreach (<a class="var it17705" onMouseOver="hilite(17705)" onMouseOut="lolite()" onClick="logVariable('points')" href="../../../../../_variables/points.html">$points</a> as <a class="var it26537" onMouseOver="hilite(26537)" onMouseOut="lolite()" onClick="logVariable('point')" href="../../../../../_variables/point.html">$point</a>) {
<a name="l363"><span class="linenum"> 363</span></a>                          <a class="var it28863" onMouseOver="hilite(28863)" onMouseOut="lolite()" onClick="logVariable('scalepath')" href="../../../../../_variables/scalepath.html">$scalepath</a>[] = <a class="phpfunction" onClick="logFunction('intval')" href="../../../../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it26537" onMouseOver="hilite(26537)" onMouseOut="lolite()" onClick="logVariable('point')" href="../../../../../_variables/point.html">$point</a>) * <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>;
<a name="l364"><span class="linenum"> 364</span></a>                      }
<a name="l365"><span class="linenum"> 365</span></a>  
<a name="l366"><span class="linenum"> 366</span></a>                      if (!empty(<a class="var it28863" onMouseOver="hilite(28863)" onMouseOut="lolite()" onClick="logVariable('scalepath')" href="../../../../../_variables/scalepath.html">$scalepath</a>)) {
<a name="l367"><span class="linenum"> 367</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('PolyLine')" href="../../../../../_functions/polyline.html" onMouseOver="funcPopup(event,'polyline')">PolyLine</a>(<a class="var it28863" onMouseOver="hilite(28863)" onMouseOut="lolite()" onClick="logVariable('scalepath')" href="../../../../../_variables/scalepath.html">$scalepath</a>, 'S');
<a name="l368"><span class="linenum"> 368</span></a>                      }
<a name="l369"><span class="linenum"> 369</span></a>                  }
<a name="l370"><span class="linenum"> 370</span></a>                  break;
<a name="l371"><span class="linenum"> 371</span></a>              case 'stamp':
<a name="l372"><span class="linenum"> 372</span></a>                  <a class="var it28864" onMouseOver="hilite(28864)" onMouseOut="lolite()" onClick="logVariable('imgfile')" href="../../../../../_variables/imgfile.html">$imgfile</a> = <a class="var it28856" onMouseOver="hilite(28856)" onMouseOut="lolite()" onClick="logVariable('imagefolder')" href="../../../../../_variables/imagefolder.html">$imagefolder</a> . '/' . <a class="function" onClick="logFunction('clean_filename')" href="../../../../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../../../../_variables/path.html">$path</a>);
<a name="l373"><span class="linenum"> 373</span></a>                  <a class="var it2888" onMouseOver="hilite(2888)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../../../_variables/w.html">$w</a> = <a class="phpfunction" onClick="logFunction('abs')" href="../../../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a> - <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../../../_variables/ex.html">$ex</a>);
<a name="l374"><span class="linenum"> 374</span></a>                  <a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../../_variables/h.html">$h</a> = <a class="phpfunction" onClick="logFunction('abs')" href="../../../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a> - <a class="var it28861" onMouseOver="hilite(28861)" onMouseOut="lolite()" onClick="logVariable('ey')" href="../../../../../_variables/ey.html">$ey</a>);
<a name="l375"><span class="linenum"> 375</span></a>                  <a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a> = <a class="phpfunction" onClick="logFunction('min')" href="../../../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(<a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a>, <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../../../_variables/ex.html">$ex</a>);
<a name="l376"><span class="linenum"> 376</span></a>                  <a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a> = <a class="phpfunction" onClick="logFunction('min')" href="../../../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(<a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a>, <a class="var it28861" onMouseOver="hilite(28861)" onMouseOut="lolite()" onClick="logVariable('ey')" href="../../../../../_variables/ey.html">$ey</a>);
<a name="l377"><span class="linenum"> 377</span></a>  
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">                // Stamp is always more than 40px, so no need to check width/height.</span>
<a name="l379"><span class="linenum"> 379</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('Image')" href="../../../../../_functions/image.html" onMouseOver="funcPopup(event,'image')">Image</a>(<a class="var it28864" onMouseOver="hilite(28864)" onMouseOut="lolite()" onClick="logVariable('imgfile')" href="../../../../../_variables/imgfile.html">$imgfile</a>, <a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a>, <a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a>, <a class="var it2888" onMouseOver="hilite(2888)" onMouseOut="lolite()" onClick="logVariable('w')" href="../../../../../_variables/w.html">$w</a>, <a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../../_variables/h.html">$h</a>);
<a name="l380"><span class="linenum"> 380</span></a>                  break;
<a name="l381"><span class="linenum"> 381</span></a>              default: // Line.
<a name="l382"><span class="linenum"> 382</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('Line')" href="../../../../../_functions/line.html" onMouseOver="funcPopup(event,'line')">Line</a>(<a class="var it859" onMouseOver="hilite(859)" onMouseOut="lolite()" onClick="logVariable('sx')" href="../../../../../_variables/sx.html">$sx</a>, <a class="var it858" onMouseOver="hilite(858)" onMouseOut="lolite()" onClick="logVariable('sy')" href="../../../../../_variables/sy.html">$sy</a>, <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../../../../../_variables/ex.html">$ex</a>, <a class="var it28861" onMouseOver="hilite(28861)" onMouseOut="lolite()" onClick="logVariable('ey')" href="../../../../../_variables/ey.html">$ey</a>);
<a name="l383"><span class="linenum"> 383</span></a>                  break;
<a name="l384"><span class="linenum"> 384</span></a>          }
<a name="l385"><span class="linenum"> 385</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetDrawColor')" href="../../../../../_functions/setdrawcolor.html" onMouseOver="funcPopup(event,'setdrawcolor')">SetDrawColor</a>(0, 0, 0);
<a name="l386"><span class="linenum"> 386</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('SetLineWidth')" href="../../../../../_functions/setlinewidth.html" onMouseOver="funcPopup(event,'setlinewidth')">SetLineWidth</a>(1.0 * <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scale')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/scale.html">scale</a>);
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>          return true;
<a name="l389"><span class="linenum"> 389</span></a>      }
<a name="l390"><span class="linenum"> 390</span></a>  
<a name="l391"><span class="linenum"> 391</span></a>      <span class="comment">/**</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">     * Save the completed PDF to the given file</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">     * @param string $filename the filename for the PDF (including the full path)</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">     */</span>
<a name="l395"><span class="linenum"> 395</span></a>      public function <a class="function" onClick="logFunction('save_pdf')" href="../../../../../_functions/save_pdf.html" onMouseOver="funcPopup(event,'save_pdf')">save_pdf</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../../_variables/filename.html">$filename</a>) {
<a name="l396"><span class="linenum"> 396</span></a>          <a class="var it14691" onMouseOver="hilite(14691)" onMouseOut="lolite()" onClick="logVariable('olddebug')" href="../../../../../_variables/olddebug.html">$olddebug</a> = <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../../../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(0);
<a name="l397"><span class="linenum"> 397</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('Output')" href="../../../../../_functions/output.html" onMouseOver="funcPopup(event,'output')">Output</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../../_variables/filename.html">$filename</a>, 'F');
<a name="l398"><span class="linenum"> 398</span></a>          <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../../../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(<a class="var it14691" onMouseOver="hilite(14691)" onMouseOut="lolite()" onClick="logVariable('olddebug')" href="../../../../../_variables/olddebug.html">$olddebug</a>);
<a name="l399"><span class="linenum"> 399</span></a>      }
<a name="l400"><span class="linenum"> 400</span></a>  
<a name="l401"><span class="linenum"> 401</span></a>      <span class="comment">/**</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">     * Set the path to the folder in which to generate page image files</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment">     * @param string $folder</span>
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">     */</span>
<a name="l405"><span class="linenum"> 405</span></a>      public function <a class="function" onClick="logFunction('set_image_folder')" href="../../../../../_functions/set_image_folder.html" onMouseOver="funcPopup(event,'set_image_folder')">set_image_folder</a>(<a class="var it3232" onMouseOver="hilite(3232)" onMouseOut="lolite()" onClick="logVariable('folder')" href="../../../../../_variables/folder.html">$folder</a>) {
<a name="l406"><span class="linenum"> 406</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('imagefolder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/imagefolder.html">imagefolder</a> = <a class="var it3232" onMouseOver="hilite(3232)" onMouseOut="lolite()" onClick="logVariable('folder')" href="../../../../../_variables/folder.html">$folder</a>;
<a name="l407"><span class="linenum"> 407</span></a>      }
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>      <span class="comment">/**</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">     * Generate an image of the specified page in the PDF</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">     * @param int $pageno the page to generate the image of</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">     * @return string the filename of the generated image</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">     */</span>
<a name="l416"><span class="linenum"> 416</span></a>      public function <a class="function" onClick="logFunction('get_image')" href="../../../../../_functions/get_image.html" onMouseOver="funcPopup(event,'get_image')">get_image</a>(<a class="var it5022" onMouseOver="hilite(5022)" onMouseOut="lolite()" onClick="logVariable('pageno')" href="../../../../../_variables/pageno.html">$pageno</a>) {
<a name="l417"><span class="linenum"> 417</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../../_variables/CFG.html">$CFG</a>;
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('filename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/filename.html">filename</a>) {
<a name="l420"><span class="linenum"> 420</span></a>              throw new \coding_exception('Attempting to generate a page image without first setting the PDF filename');
<a name="l421"><span class="linenum"> 421</span></a>          }
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('imagefolder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/imagefolder.html">imagefolder</a>) {
<a name="l424"><span class="linenum"> 424</span></a>              throw new \coding_exception('Attempting to generate a page image without first specifying the image output folder');
<a name="l425"><span class="linenum"> 425</span></a>          }
<a name="l426"><span class="linenum"> 426</span></a>  
<a name="l427"><span class="linenum"> 427</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_dir')" href="../../../../../_functions/is_dir.html" onMouseOver="phpfuncPopup(event,'is_dir')">is_dir</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('imagefolder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/imagefolder.html">imagefolder</a>)) {
<a name="l428"><span class="linenum"> 428</span></a>              throw new \coding_exception('The specified image output folder is not a valid folder');
<a name="l429"><span class="linenum"> 429</span></a>          }
<a name="l430"><span class="linenum"> 430</span></a>  
<a name="l431"><span class="linenum"> 431</span></a>          <a class="var it3323" onMouseOver="hilite(3323)" onMouseOut="lolite()" onClick="logVariable('imagefile')" href="../../../../../_variables/imagefile.html">$imagefile</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('imagefolder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/imagefolder.html">imagefolder</a>.'/image_page' . <a class="var it5022" onMouseOver="hilite(5022)" onMouseOut="lolite()" onClick="logVariable('pageno')" href="../../../../../_variables/pageno.html">$pageno</a> . '.png';
<a name="l432"><span class="linenum"> 432</span></a>          <a class="var it28865" onMouseOver="hilite(28865)" onMouseOut="lolite()" onClick="logVariable('generate')" href="../../../../../_variables/generate.html">$generate</a> = true;
<a name="l433"><span class="linenum"> 433</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../../../../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it3323" onMouseOver="hilite(3323)" onMouseOut="lolite()" onClick="logVariable('imagefile')" href="../../../../../_variables/imagefile.html">$imagefile</a>)) {
<a name="l434"><span class="linenum"> 434</span></a>              if (<a class="phpfunction" onClick="logFunction('filemtime')" href="../../../../../_functions/filemtime.html" onMouseOver="phpfuncPopup(event,'filemtime')">filemtime</a>(<a class="var it3323" onMouseOver="hilite(3323)" onMouseOut="lolite()" onClick="logVariable('imagefile')" href="../../../../../_variables/imagefile.html">$imagefile</a>)&gt;<a class="phpfunction" onClick="logFunction('filemtime')" href="../../../../../_functions/filemtime.html" onMouseOver="phpfuncPopup(event,'filemtime')">filemtime</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('filename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/filename.html">filename</a>)) {
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">                // Make sure the image is newer than the PDF file.</span>
<a name="l436"><span class="linenum"> 436</span></a>                  <a class="var it28865" onMouseOver="hilite(28865)" onMouseOut="lolite()" onClick="logVariable('generate')" href="../../../../../_variables/generate.html">$generate</a> = false;
<a name="l437"><span class="linenum"> 437</span></a>              }
<a name="l438"><span class="linenum"> 438</span></a>          }
<a name="l439"><span class="linenum"> 439</span></a>  
<a name="l440"><span class="linenum"> 440</span></a>          if (<a class="var it28865" onMouseOver="hilite(28865)" onMouseOut="lolite()" onClick="logVariable('generate')" href="../../../../../_variables/generate.html">$generate</a>) {
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">            // Use ghostscript to generate an image of the specified page.</span>
<a name="l442"><span class="linenum"> 442</span></a>              <a class="var it28866" onMouseOver="hilite(28866)" onMouseOut="lolite()" onClick="logVariable('gsexec')" href="../../../../../_variables/gsexec.html">$gsexec</a> = \<a class="phpfunction" onClick="logFunction('escapeshellarg')" href="../../../../../_functions/escapeshellarg.html" onMouseOver="phpfuncPopup(event,'escapeshellarg')">escapeshellarg</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('pathtogs')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../../_variables/pathtogs.html">pathtogs</a>);
<a name="l443"><span class="linenum"> 443</span></a>              <a class="var it28868" onMouseOver="hilite(28868)" onMouseOut="lolite()" onClick="logVariable('imageres')" href="../../../../../_variables/imageres.html">$imageres</a> = \<a class="phpfunction" onClick="logFunction('escapeshellarg')" href="../../../../../_functions/escapeshellarg.html" onMouseOver="phpfuncPopup(event,'escapeshellarg')">escapeshellarg</a>(100);
<a name="l444"><span class="linenum"> 444</span></a>              <a class="var it28869" onMouseOver="hilite(28869)" onMouseOut="lolite()" onClick="logVariable('imagefilearg')" href="../../../../../_variables/imagefilearg.html">$imagefilearg</a> = \<a class="phpfunction" onClick="logFunction('escapeshellarg')" href="../../../../../_functions/escapeshellarg.html" onMouseOver="phpfuncPopup(event,'escapeshellarg')">escapeshellarg</a>(<a class="var it3323" onMouseOver="hilite(3323)" onMouseOut="lolite()" onClick="logVariable('imagefile')" href="../../../../../_variables/imagefile.html">$imagefile</a>);
<a name="l445"><span class="linenum"> 445</span></a>              <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../../_variables/filename.html">$filename</a> = \<a class="phpfunction" onClick="logFunction('escapeshellarg')" href="../../../../../_functions/escapeshellarg.html" onMouseOver="phpfuncPopup(event,'escapeshellarg')">escapeshellarg</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('filename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/filename.html">filename</a>);
<a name="l446"><span class="linenum"> 446</span></a>              <a class="var it28870" onMouseOver="hilite(28870)" onMouseOut="lolite()" onClick="logVariable('pagenoinc')" href="../../../../../_variables/pagenoinc.html">$pagenoinc</a> = \<a class="phpfunction" onClick="logFunction('escapeshellarg')" href="../../../../../_functions/escapeshellarg.html" onMouseOver="phpfuncPopup(event,'escapeshellarg')">escapeshellarg</a>(<a class="var it5022" onMouseOver="hilite(5022)" onMouseOut="lolite()" onClick="logVariable('pageno')" href="../../../../../_variables/pageno.html">$pageno</a> + 1);
<a name="l447"><span class="linenum"> 447</span></a>              <a class="var it2979" onMouseOver="hilite(2979)" onMouseOut="lolite()" onClick="logVariable('command')" href="../../../../../_variables/command.html">$command</a> = &quot;<a class="var it28866" onMouseOver="hilite(28866)" onMouseOut="lolite()" onClick="logVariable('gsexec')" href="../../../../../_variables/gsexec.html">$gsexec</a> -q -sDEVICE=png16m -dSAFER -dBATCH -dNOPAUSE -r<a class="var it28868" onMouseOver="hilite(28868)" onMouseOut="lolite()" onClick="logVariable('imageres')" href="../../../../../_variables/imageres.html">$imageres</a> -dFirstPage=<a class="var it28870" onMouseOver="hilite(28870)" onMouseOut="lolite()" onClick="logVariable('pagenoinc')" href="../../../../../_variables/pagenoinc.html">$pagenoinc</a> -dLastPage=<a class="var it28870" onMouseOver="hilite(28870)" onMouseOut="lolite()" onClick="logVariable('pagenoinc')" href="../../../../../_variables/pagenoinc.html">$pagenoinc</a> &quot;.
<a name="l448"><span class="linenum"> 448</span></a>                  &quot;-dDOINTERPOLATE -dGraphicsAlphaBits=4 -dTextAlphaBits=4 -sOutputFile=<a class="var it28869" onMouseOver="hilite(28869)" onMouseOut="lolite()" onClick="logVariable('imagefilearg')" href="../../../../../_variables/imagefilearg.html">$imagefilearg</a> <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../../_variables/filename.html">$filename</a>&quot;;
<a name="l449"><span class="linenum"> 449</span></a>  
<a name="l450"><span class="linenum"> 450</span></a>              <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../../../_variables/output.html">$output</a> = null;
<a name="l451"><span class="linenum"> 451</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../../_variables/result.html">$result</a> = <a class="phpfunction" onClick="logFunction('exec')" href="../../../../../_functions/exec.html" onMouseOver="phpfuncPopup(event,'exec')">exec</a>(<a class="var it2979" onMouseOver="hilite(2979)" onMouseOut="lolite()" onClick="logVariable('command')" href="../../../../../_variables/command.html">$command</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../../../_variables/output.html">$output</a>);
<a name="l452"><span class="linenum"> 452</span></a>              if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../../../../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it3323" onMouseOver="hilite(3323)" onMouseOut="lolite()" onClick="logVariable('imagefile')" href="../../../../../_variables/imagefile.html">$imagefile</a>)) {
<a name="l453"><span class="linenum"> 453</span></a>                  <a class="var it28871" onMouseOver="hilite(28871)" onMouseOut="lolite()" onClick="logVariable('fullerror')" href="../../../../../_variables/fullerror.html">$fullerror</a> = '&lt;pre&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('command', 'assignfeedback_editpdf').&quot;\n&quot;;
<a name="l454"><span class="linenum"> 454</span></a>                  <a class="var it28871" onMouseOver="hilite(28871)" onMouseOut="lolite()" onClick="logVariable('fullerror')" href="../../../../../_variables/fullerror.html">$fullerror</a> .= <a class="var it2979" onMouseOver="hilite(2979)" onMouseOut="lolite()" onClick="logVariable('command')" href="../../../../../_variables/command.html">$command</a> . &quot;\n\n&quot;;
<a name="l455"><span class="linenum"> 455</span></a>                  <a class="var it28871" onMouseOver="hilite(28871)" onMouseOut="lolite()" onClick="logVariable('fullerror')" href="../../../../../_variables/fullerror.html">$fullerror</a> .= <a class="function" onClick="logFunction('get_string')" href="../../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('result', 'assignfeedback_editpdf').&quot;\n&quot;;
<a name="l456"><span class="linenum"> 456</span></a>                  <a class="var it28871" onMouseOver="hilite(28871)" onMouseOut="lolite()" onClick="logVariable('fullerror')" href="../../../../../_variables/fullerror.html">$fullerror</a> .= <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../../../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../../_variables/result.html">$result</a>) . &quot;\n\n&quot;;
<a name="l457"><span class="linenum"> 457</span></a>                  <a class="var it28871" onMouseOver="hilite(28871)" onMouseOut="lolite()" onClick="logVariable('fullerror')" href="../../../../../_variables/fullerror.html">$fullerror</a> .= <a class="function" onClick="logFunction('get_string')" href="../../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('output', 'assignfeedback_editpdf').&quot;\n&quot;;
<a name="l458"><span class="linenum"> 458</span></a>                  <a class="var it28871" onMouseOver="hilite(28871)" onMouseOut="lolite()" onClick="logVariable('fullerror')" href="../../../../../_variables/fullerror.html">$fullerror</a> .= <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../../../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="phpfunction" onClick="logFunction('implode')" href="../../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;\n&quot;,<a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../../../_variables/output.html">$output</a>)) . '&lt;/pre&gt;';
<a name="l459"><span class="linenum"> 459</span></a>                  throw new \moodle_exception('errorgenerateimage', 'assignfeedback_editpdf', '', <a class="var it28871" onMouseOver="hilite(28871)" onMouseOut="lolite()" onClick="logVariable('fullerror')" href="../../../../../_variables/fullerror.html">$fullerror</a>);
<a name="l460"><span class="linenum"> 460</span></a>              }
<a name="l461"><span class="linenum"> 461</span></a>          }
<a name="l462"><span class="linenum"> 462</span></a>  
<a name="l463"><span class="linenum"> 463</span></a>          return 'image_page'.<a class="var it5022" onMouseOver="hilite(5022)" onMouseOut="lolite()" onClick="logVariable('pageno')" href="../../../../../_variables/pageno.html">$pageno</a>.'.png';
<a name="l464"><span class="linenum"> 464</span></a>      }
<a name="l465"><span class="linenum"> 465</span></a>  
<a name="l466"><span class="linenum"> 466</span></a>      <span class="comment">/**</span>
<a name="l467"><span class="linenum"> 467</span></a>  <span class="comment">     * Check to see if PDF is version 1.4 (or below); if not: use ghostscript to convert it</span>
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">     * @param stored_file $file</span>
<a name="l469"><span class="linenum"> 469</span></a>  <span class="comment">     * @return string path to copy or converted pdf (false == fail)</span>
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment">     */</span>
<a name="l471"><span class="linenum"> 471</span></a>      public static function <a class="function" onClick="logFunction('ensure_pdf_compatible')" href="../../../../../_functions/ensure_pdf_compatible.html" onMouseOver="funcPopup(event,'ensure_pdf_compatible')">ensure_pdf_compatible</a>(\stored_file <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../../../_variables/file.html">$file</a>) {
<a name="l472"><span class="linenum"> 472</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../../_variables/CFG.html">$CFG</a>;
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>          <a class="var it28872" onMouseOver="hilite(28872)" onMouseOut="lolite()" onClick="logVariable('temparea')" href="../../../../../_variables/temparea.html">$temparea</a> = \<a class="function" onClick="logFunction('make_temp_directory')" href="../../../../../_functions/make_temp_directory.html" onMouseOver="funcPopup(event,'make_temp_directory')">make_temp_directory</a>('assignfeedback_editpdf');
<a name="l475"><span class="linenum"> 475</span></a>          <a class="var it928" onMouseOver="hilite(928)" onMouseOut="lolite()" onClick="logVariable('hash')" href="../../../../../_variables/hash.html">$hash</a> = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_contenthash')" href="../../../../../_functions/get_contenthash.html" onMouseOver="funcPopup(event,'get_contenthash')">get_contenthash</a>(); <span class="comment">// Use the contenthash to make sure the temp files have unique names.</span>
<a name="l476"><span class="linenum"> 476</span></a>          <a class="var it28873" onMouseOver="hilite(28873)" onMouseOut="lolite()" onClick="logVariable('tempsrc')" href="../../../../../_variables/tempsrc.html">$tempsrc</a> = <a class="var it28872" onMouseOver="hilite(28872)" onMouseOut="lolite()" onClick="logVariable('temparea')" href="../../../../../_variables/temparea.html">$temparea</a> . &quot;/src-<a class="var it928" onMouseOver="hilite(928)" onMouseOut="lolite()" onClick="logVariable('hash')" href="../../../../../_variables/hash.html">$hash</a>.pdf&quot;;
<a name="l477"><span class="linenum"> 477</span></a>          <a class="var it28874" onMouseOver="hilite(28874)" onMouseOut="lolite()" onClick="logVariable('tempdst')" href="../../../../../_variables/tempdst.html">$tempdst</a> = <a class="var it28872" onMouseOver="hilite(28872)" onMouseOut="lolite()" onClick="logVariable('temparea')" href="../../../../../_variables/temparea.html">$temparea</a> . &quot;/dst-<a class="var it928" onMouseOver="hilite(928)" onMouseOut="lolite()" onClick="logVariable('hash')" href="../../../../../_variables/hash.html">$hash</a>.pdf&quot;;
<a name="l478"><span class="linenum"> 478</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('copy_content_to')" href="../../../../../_functions/copy_content_to.html" onMouseOver="funcPopup(event,'copy_content_to')">copy_content_to</a>(<a class="var it28873" onMouseOver="hilite(28873)" onMouseOut="lolite()" onClick="logVariable('tempsrc')" href="../../../../../_variables/tempsrc.html">$tempsrc</a>); <span class="comment">// Copy the file.</span>
<a name="l479"><span class="linenum"> 479</span></a>  
<a name="l480"><span class="linenum"> 480</span></a>          <a class="var it8998" onMouseOver="hilite(8998)" onMouseOut="lolite()" onClick="logVariable('pdf')" href="../../../../../_variables/pdf.html">$pdf</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pdf')" href="../../../../../_classes/pdf.html" onMouseOver="classPopup(event,'pdf')">pdf</a>();
<a name="l481"><span class="linenum"> 481</span></a>          <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a> = 0;
<a name="l482"><span class="linenum"> 482</span></a>          try {
<a name="l483"><span class="linenum"> 483</span></a>              <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a> = <a class="var it8998" onMouseOver="hilite(8998)" onMouseOut="lolite()" onClick="logVariable('pdf')" href="../../../../../_variables/pdf.html">$pdf</a>-&gt;<a class="function" onClick="logFunction('load_pdf')" href="../../../../../_functions/load_pdf.html" onMouseOver="funcPopup(event,'load_pdf')">load_pdf</a>(<a class="var it28873" onMouseOver="hilite(28873)" onMouseOut="lolite()" onClick="logVariable('tempsrc')" href="../../../../../_variables/tempsrc.html">$tempsrc</a>);
<a name="l484"><span class="linenum"> 484</span></a>          } catch (\Exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../../_variables/e.html">$e</a>) {
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment">            // PDF was not valid - try running it through ghostscript to clean it up.</span>
<a name="l486"><span class="linenum"> 486</span></a>              <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a> = 0;
<a name="l487"><span class="linenum"> 487</span></a>          }
<a name="l488"><span class="linenum"> 488</span></a>          <a class="var it8998" onMouseOver="hilite(8998)" onMouseOut="lolite()" onClick="logVariable('pdf')" href="../../../../../_variables/pdf.html">$pdf</a>-&gt;<a class="function" onClick="logFunction('Close')" href="../../../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">Close</a>(); <span class="comment">// PDF loaded and never saved/outputted needs to be closed.</span>
<a name="l489"><span class="linenum"> 489</span></a>  
<a name="l490"><span class="linenum"> 490</span></a>          if (<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a> &gt; 0) {
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">            // Page is valid and can be read by tcpdf.</span>
<a name="l492"><span class="linenum"> 492</span></a>              return <a class="var it28873" onMouseOver="hilite(28873)" onMouseOut="lolite()" onClick="logVariable('tempsrc')" href="../../../../../_variables/tempsrc.html">$tempsrc</a>;
<a name="l493"><span class="linenum"> 493</span></a>          }
<a name="l494"><span class="linenum"> 494</span></a>  
<a name="l495"><span class="linenum"> 495</span></a>          <a class="var it28866" onMouseOver="hilite(28866)" onMouseOut="lolite()" onClick="logVariable('gsexec')" href="../../../../../_variables/gsexec.html">$gsexec</a> = \<a class="phpfunction" onClick="logFunction('escapeshellarg')" href="../../../../../_functions/escapeshellarg.html" onMouseOver="phpfuncPopup(event,'escapeshellarg')">escapeshellarg</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('pathtogs')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../../_variables/pathtogs.html">pathtogs</a>);
<a name="l496"><span class="linenum"> 496</span></a>          <a class="var it28875" onMouseOver="hilite(28875)" onMouseOut="lolite()" onClick="logVariable('tempdstarg')" href="../../../../../_variables/tempdstarg.html">$tempdstarg</a> = \<a class="phpfunction" onClick="logFunction('escapeshellarg')" href="../../../../../_functions/escapeshellarg.html" onMouseOver="phpfuncPopup(event,'escapeshellarg')">escapeshellarg</a>(<a class="var it28874" onMouseOver="hilite(28874)" onMouseOut="lolite()" onClick="logVariable('tempdst')" href="../../../../../_variables/tempdst.html">$tempdst</a>);
<a name="l497"><span class="linenum"> 497</span></a>          <a class="var it28876" onMouseOver="hilite(28876)" onMouseOut="lolite()" onClick="logVariable('tempsrcarg')" href="../../../../../_variables/tempsrcarg.html">$tempsrcarg</a> = \<a class="phpfunction" onClick="logFunction('escapeshellarg')" href="../../../../../_functions/escapeshellarg.html" onMouseOver="phpfuncPopup(event,'escapeshellarg')">escapeshellarg</a>(<a class="var it28873" onMouseOver="hilite(28873)" onMouseOut="lolite()" onClick="logVariable('tempsrc')" href="../../../../../_variables/tempsrc.html">$tempsrc</a>);
<a name="l498"><span class="linenum"> 498</span></a>          <a class="var it2979" onMouseOver="hilite(2979)" onMouseOut="lolite()" onClick="logVariable('command')" href="../../../../../_variables/command.html">$command</a> = &quot;<a class="var it28866" onMouseOver="hilite(28866)" onMouseOut="lolite()" onClick="logVariable('gsexec')" href="../../../../../_variables/gsexec.html">$gsexec</a> -q -sDEVICE=pdfwrite -dBATCH -dNOPAUSE -sOutputFile=<a class="var it28875" onMouseOver="hilite(28875)" onMouseOut="lolite()" onClick="logVariable('tempdstarg')" href="../../../../../_variables/tempdstarg.html">$tempdstarg</a> <a class="var it28876" onMouseOver="hilite(28876)" onMouseOut="lolite()" onClick="logVariable('tempsrcarg')" href="../../../../../_variables/tempsrcarg.html">$tempsrcarg</a>&quot;;
<a name="l499"><span class="linenum"> 499</span></a>          <a class="phpfunction" onClick="logFunction('exec')" href="../../../../../_functions/exec.html" onMouseOver="phpfuncPopup(event,'exec')">exec</a>(<a class="var it2979" onMouseOver="hilite(2979)" onMouseOut="lolite()" onClick="logVariable('command')" href="../../../../../_variables/command.html">$command</a>);
<a name="l500"><span class="linenum"> 500</span></a>          @<a class="phpfunction" onClick="logFunction('unlink')" href="../../../../../_functions/unlink.html" onMouseOver="phpfuncPopup(event,'unlink')">unlink</a>(<a class="var it28873" onMouseOver="hilite(28873)" onMouseOut="lolite()" onClick="logVariable('tempsrc')" href="../../../../../_variables/tempsrc.html">$tempsrc</a>);
<a name="l501"><span class="linenum"> 501</span></a>          if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../../../../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it28874" onMouseOver="hilite(28874)" onMouseOut="lolite()" onClick="logVariable('tempdst')" href="../../../../../_variables/tempdst.html">$tempdst</a>)) {
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment">            // Something has gone wrong in the conversion.</span>
<a name="l503"><span class="linenum"> 503</span></a>              return false;
<a name="l504"><span class="linenum"> 504</span></a>          }
<a name="l505"><span class="linenum"> 505</span></a>  
<a name="l506"><span class="linenum"> 506</span></a>          <a class="var it8998" onMouseOver="hilite(8998)" onMouseOut="lolite()" onClick="logVariable('pdf')" href="../../../../../_variables/pdf.html">$pdf</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pdf')" href="../../../../../_classes/pdf.html" onMouseOver="classPopup(event,'pdf')">pdf</a>();
<a name="l507"><span class="linenum"> 507</span></a>          <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a> = 0;
<a name="l508"><span class="linenum"> 508</span></a>          try {
<a name="l509"><span class="linenum"> 509</span></a>              <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a> = <a class="var it8998" onMouseOver="hilite(8998)" onMouseOut="lolite()" onClick="logVariable('pdf')" href="../../../../../_variables/pdf.html">$pdf</a>-&gt;<a class="function" onClick="logFunction('load_pdf')" href="../../../../../_functions/load_pdf.html" onMouseOver="funcPopup(event,'load_pdf')">load_pdf</a>(<a class="var it28874" onMouseOver="hilite(28874)" onMouseOut="lolite()" onClick="logVariable('tempdst')" href="../../../../../_variables/tempdst.html">$tempdst</a>);
<a name="l510"><span class="linenum"> 510</span></a>          } catch (\Exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../../_variables/e.html">$e</a>) {
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">            // PDF was not valid - try running it through ghostscript to clean it up.</span>
<a name="l512"><span class="linenum"> 512</span></a>              <a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a> = 0;
<a name="l513"><span class="linenum"> 513</span></a>          }
<a name="l514"><span class="linenum"> 514</span></a>          <a class="var it8998" onMouseOver="hilite(8998)" onMouseOut="lolite()" onClick="logVariable('pdf')" href="../../../../../_variables/pdf.html">$pdf</a>-&gt;<a class="function" onClick="logFunction('Close')" href="../../../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">Close</a>(); <span class="comment">// PDF loaded and never saved/outputted needs to be closed.</span>
<a name="l515"><span class="linenum"> 515</span></a>  
<a name="l516"><span class="linenum"> 516</span></a>          if (<a class="var it287" onMouseOver="hilite(287)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../../../../_variables/pagecount.html">$pagecount</a> &lt;= 0) {
<a name="l517"><span class="linenum"> 517</span></a>              @<a class="phpfunction" onClick="logFunction('unlink')" href="../../../../../_functions/unlink.html" onMouseOver="phpfuncPopup(event,'unlink')">unlink</a>(<a class="var it28874" onMouseOver="hilite(28874)" onMouseOut="lolite()" onClick="logVariable('tempdst')" href="../../../../../_variables/tempdst.html">$tempdst</a>);
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment">            // Could not parse the converted pdf.</span>
<a name="l519"><span class="linenum"> 519</span></a>              return false;
<a name="l520"><span class="linenum"> 520</span></a>          }
<a name="l521"><span class="linenum"> 521</span></a>  
<a name="l522"><span class="linenum"> 522</span></a>          return <a class="var it28874" onMouseOver="hilite(28874)" onMouseOut="lolite()" onClick="logVariable('tempdst')" href="../../../../../_variables/tempdst.html">$tempdst</a>;
<a name="l523"><span class="linenum"> 523</span></a>      }
<a name="l524"><span class="linenum"> 524</span></a>  
<a name="l525"><span class="linenum"> 525</span></a>      <span class="comment">/**</span>
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment">     * Test that the configured path to ghostscript is correct and working.</span>
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment">     * @param bool $generateimage - If true - a test image will be generated to verify the install.</span>
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment">     * @return bool</span>
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment">     */</span>
<a name="l530"><span class="linenum"> 530</span></a>      public static function <a class="function" onClick="logFunction('test_gs_path')" href="../../../../../_functions/test_gs_path.html" onMouseOver="funcPopup(event,'test_gs_path')">test_gs_path</a>(<a class="var it28877" onMouseOver="hilite(28877)" onMouseOut="lolite()" onClick="logVariable('generateimage')" href="../../../../../_variables/generateimage.html">$generateimage</a> = true) {
<a name="l531"><span class="linenum"> 531</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../../_variables/CFG.html">$CFG</a>;
<a name="l532"><span class="linenum"> 532</span></a>  
<a name="l533"><span class="linenum"> 533</span></a>          <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a> = (object)array(
<a name="l534"><span class="linenum"> 534</span></a>              'status' =&gt; self::GSPATH_OK,
<a name="l535"><span class="linenum"> 535</span></a>              'message' =&gt; null,
<a name="l536"><span class="linenum"> 536</span></a>          );
<a name="l537"><span class="linenum"> 537</span></a>          <a class="var it28878" onMouseOver="hilite(28878)" onMouseOut="lolite()" onClick="logVariable('gspath')" href="../../../../../_variables/gspath.html">$gspath</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('pathtogs')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../../_variables/pathtogs.html">pathtogs</a>;
<a name="l538"><span class="linenum"> 538</span></a>          if (empty(<a class="var it28878" onMouseOver="hilite(28878)" onMouseOut="lolite()" onClick="logVariable('gspath')" href="../../../../../_variables/gspath.html">$gspath</a>)) {
<a name="l539"><span class="linenum"> 539</span></a>              <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>-&gt;<a onClick="logVariable('status')" class="var it43883" onMouseOver="hilite(43883)" onMouseOut="lolite()" href="../../../../../_variables/status.html">status</a> = self::GSPATH_EMPTY;
<a name="l540"><span class="linenum"> 540</span></a>              return <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>;
<a name="l541"><span class="linenum"> 541</span></a>          }
<a name="l542"><span class="linenum"> 542</span></a>          if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../../../../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it28878" onMouseOver="hilite(28878)" onMouseOut="lolite()" onClick="logVariable('gspath')" href="../../../../../_variables/gspath.html">$gspath</a>)) {
<a name="l543"><span class="linenum"> 543</span></a>              <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>-&gt;<a onClick="logVariable('status')" class="var it43883" onMouseOver="hilite(43883)" onMouseOut="lolite()" href="../../../../../_variables/status.html">status</a> = self::GSPATH_DOESNOTEXIST;
<a name="l544"><span class="linenum"> 544</span></a>              return <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>;
<a name="l545"><span class="linenum"> 545</span></a>          }
<a name="l546"><span class="linenum"> 546</span></a>          if (<a class="phpfunction" onClick="logFunction('is_dir')" href="../../../../../_functions/is_dir.html" onMouseOver="phpfuncPopup(event,'is_dir')">is_dir</a>(<a class="var it28878" onMouseOver="hilite(28878)" onMouseOut="lolite()" onClick="logVariable('gspath')" href="../../../../../_variables/gspath.html">$gspath</a>)) {
<a name="l547"><span class="linenum"> 547</span></a>              <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>-&gt;<a onClick="logVariable('status')" class="var it43883" onMouseOver="hilite(43883)" onMouseOut="lolite()" href="../../../../../_variables/status.html">status</a> = self::GSPATH_ISDIR;
<a name="l548"><span class="linenum"> 548</span></a>              return <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>;
<a name="l549"><span class="linenum"> 549</span></a>          }
<a name="l550"><span class="linenum"> 550</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_executable')" href="../../../../../_functions/is_executable.html" onMouseOver="phpfuncPopup(event,'is_executable')">is_executable</a>(<a class="var it28878" onMouseOver="hilite(28878)" onMouseOut="lolite()" onClick="logVariable('gspath')" href="../../../../../_variables/gspath.html">$gspath</a>)) {
<a name="l551"><span class="linenum"> 551</span></a>              <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>-&gt;<a onClick="logVariable('status')" class="var it43883" onMouseOver="hilite(43883)" onMouseOut="lolite()" href="../../../../../_variables/status.html">status</a> = self::GSPATH_NOTEXECUTABLE;
<a name="l552"><span class="linenum"> 552</span></a>              return <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>;
<a name="l553"><span class="linenum"> 553</span></a>          }
<a name="l554"><span class="linenum"> 554</span></a>  
<a name="l555"><span class="linenum"> 555</span></a>          if (!<a class="var it28877" onMouseOver="hilite(28877)" onMouseOut="lolite()" onClick="logVariable('generateimage')" href="../../../../../_variables/generateimage.html">$generateimage</a>) {
<a name="l556"><span class="linenum"> 556</span></a>              return <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>;
<a name="l557"><span class="linenum"> 557</span></a>          }
<a name="l558"><span class="linenum"> 558</span></a>  
<a name="l559"><span class="linenum"> 559</span></a>          <a class="var it21448" onMouseOver="hilite(21448)" onMouseOut="lolite()" onClick="logVariable('testfile')" href="../../../../../_variables/testfile.html">$testfile</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../../_variables/dirroot.html">dirroot</a>.'/mod/assign/feedback/editpdf/tests/fixtures/testgs.pdf';
<a name="l560"><span class="linenum"> 560</span></a>          if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../../../../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it21448" onMouseOver="hilite(21448)" onMouseOut="lolite()" onClick="logVariable('testfile')" href="../../../../../_variables/testfile.html">$testfile</a>)) {
<a name="l561"><span class="linenum"> 561</span></a>              <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>-&gt;<a onClick="logVariable('status')" class="var it43883" onMouseOver="hilite(43883)" onMouseOut="lolite()" href="../../../../../_variables/status.html">status</a> = self::GSPATH_NOTESTFILE;
<a name="l562"><span class="linenum"> 562</span></a>              return <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>;
<a name="l563"><span class="linenum"> 563</span></a>          }
<a name="l564"><span class="linenum"> 564</span></a>  
<a name="l565"><span class="linenum"> 565</span></a>          <a class="var it28879" onMouseOver="hilite(28879)" onMouseOut="lolite()" onClick="logVariable('testimagefolder')" href="../../../../../_variables/testimagefolder.html">$testimagefolder</a> = \<a class="function" onClick="logFunction('make_temp_directory')" href="../../../../../_functions/make_temp_directory.html" onMouseOver="funcPopup(event,'make_temp_directory')">make_temp_directory</a>('assignfeedback_editpdf_test');
<a name="l566"><span class="linenum"> 566</span></a>          @<a class="phpfunction" onClick="logFunction('unlink')" href="../../../../../_functions/unlink.html" onMouseOver="phpfuncPopup(event,'unlink')">unlink</a>(<a class="var it28879" onMouseOver="hilite(28879)" onMouseOut="lolite()" onClick="logVariable('testimagefolder')" href="../../../../../_variables/testimagefolder.html">$testimagefolder</a>.'/image_page0.png'); <span class="comment">// Delete any previous test images.</span>
<a name="l567"><span class="linenum"> 567</span></a>  
<a name="l568"><span class="linenum"> 568</span></a>          <a class="var it8998" onMouseOver="hilite(8998)" onMouseOut="lolite()" onClick="logVariable('pdf')" href="../../../../../_variables/pdf.html">$pdf</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pdf')" href="../../../../../_classes/pdf.html" onMouseOver="classPopup(event,'pdf')">pdf</a>();
<a name="l569"><span class="linenum"> 569</span></a>          <a class="var it8998" onMouseOver="hilite(8998)" onMouseOut="lolite()" onClick="logVariable('pdf')" href="../../../../../_variables/pdf.html">$pdf</a>-&gt;<a class="function" onClick="logFunction('set_pdf')" href="../../../../../_functions/set_pdf.html" onMouseOver="funcPopup(event,'set_pdf')">set_pdf</a>(<a class="var it21448" onMouseOver="hilite(21448)" onMouseOut="lolite()" onClick="logVariable('testfile')" href="../../../../../_variables/testfile.html">$testfile</a>);
<a name="l570"><span class="linenum"> 570</span></a>          <a class="var it8998" onMouseOver="hilite(8998)" onMouseOut="lolite()" onClick="logVariable('pdf')" href="../../../../../_variables/pdf.html">$pdf</a>-&gt;<a class="function" onClick="logFunction('set_image_folder')" href="../../../../../_functions/set_image_folder.html" onMouseOver="funcPopup(event,'set_image_folder')">set_image_folder</a>(<a class="var it28879" onMouseOver="hilite(28879)" onMouseOut="lolite()" onClick="logVariable('testimagefolder')" href="../../../../../_variables/testimagefolder.html">$testimagefolder</a>);
<a name="l571"><span class="linenum"> 571</span></a>          try {
<a name="l572"><span class="linenum"> 572</span></a>              <a class="var it8998" onMouseOver="hilite(8998)" onMouseOut="lolite()" onClick="logVariable('pdf')" href="../../../../../_variables/pdf.html">$pdf</a>-&gt;<a class="function" onClick="logFunction('get_image')" href="../../../../../_functions/get_image.html" onMouseOver="funcPopup(event,'get_image')">get_image</a>(0);
<a name="l573"><span class="linenum"> 573</span></a>          } catch (\moodle_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../../_variables/e.html">$e</a>) {
<a name="l574"><span class="linenum"> 574</span></a>              <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>-&gt;<a onClick="logVariable('status')" class="var it43883" onMouseOver="hilite(43883)" onMouseOut="lolite()" href="../../../../../_variables/status.html">status</a> = self::GSPATH_ERROR;
<a name="l575"><span class="linenum"> 575</span></a>              <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>-&gt;<a onClick="logVariable('message')" class="var it43883" onMouseOver="hilite(43883)" onMouseOut="lolite()" href="../../../../../_variables/message.html">message</a> = <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../../../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>();
<a name="l576"><span class="linenum"> 576</span></a>          }
<a name="l577"><span class="linenum"> 577</span></a>          <a class="var it8998" onMouseOver="hilite(8998)" onMouseOut="lolite()" onClick="logVariable('pdf')" href="../../../../../_variables/pdf.html">$pdf</a>-&gt;<a class="function" onClick="logFunction('Close')" href="../../../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">Close</a>(); <span class="comment">// PDF loaded and never saved/outputted needs to be closed.</span>
<a name="l578"><span class="linenum"> 578</span></a>  
<a name="l579"><span class="linenum"> 579</span></a>          return <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../../../../../_variables/ret.html">$ret</a>;
<a name="l580"><span class="linenum"> 580</span></a>      }
<a name="l581"><span class="linenum"> 581</span></a>  
<a name="l582"><span class="linenum"> 582</span></a>      <span class="comment">/**</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     * If the test image has been generated correctly - send it direct to the browser.</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">     */</span>
<a name="l585"><span class="linenum"> 585</span></a>      public static function <a class="function" onClick="logFunction('send_test_image')" href="../../../../../_functions/send_test_image.html" onMouseOver="funcPopup(event,'send_test_image')">send_test_image</a>() {
<a name="l586"><span class="linenum"> 586</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../../_variables/CFG.html">$CFG</a>;
<a name="l587"><span class="linenum"> 587</span></a>          <a class="phpfunction" onClick="logFunction('header')" href="../../../../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Content-type: image/png');
<a name="l588"><span class="linenum"> 588</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../../_variables/libdir.html">libdir</a>.'/filelib.php');
<a name="l589"><span class="linenum"> 589</span></a>  
<a name="l590"><span class="linenum"> 590</span></a>          <a class="var it28879" onMouseOver="hilite(28879)" onMouseOut="lolite()" onClick="logVariable('testimagefolder')" href="../../../../../_variables/testimagefolder.html">$testimagefolder</a> = \<a class="function" onClick="logFunction('make_temp_directory')" href="../../../../../_functions/make_temp_directory.html" onMouseOver="funcPopup(event,'make_temp_directory')">make_temp_directory</a>('assignfeedback_editpdf_test');
<a name="l591"><span class="linenum"> 591</span></a>          <a class="var it28880" onMouseOver="hilite(28880)" onMouseOut="lolite()" onClick="logVariable('testimage')" href="../../../../../_variables/testimage.html">$testimage</a> = <a class="var it28879" onMouseOver="hilite(28879)" onMouseOut="lolite()" onClick="logVariable('testimagefolder')" href="../../../../../_variables/testimagefolder.html">$testimagefolder</a>.'/image_page0.png';
<a name="l592"><span class="linenum"> 592</span></a>          <a class="function" onClick="logFunction('send_file')" href="../../../../../_functions/send_file.html" onMouseOver="funcPopup(event,'send_file')">send_file</a>(<a class="var it28880" onMouseOver="hilite(28880)" onMouseOut="lolite()" onClick="logVariable('testimage')" href="../../../../../_variables/testimage.html">$testimage</a>, <a class="phpfunction" onClick="logFunction('basename')" href="../../../../../_functions/basename.html" onMouseOver="phpfuncPopup(event,'basename')">basename</a>(<a class="var it28880" onMouseOver="hilite(28880)" onMouseOut="lolite()" onClick="logVariable('testimage')" href="../../../../../_variables/testimage.html">$testimage</a>), 0);
<a name="l593"><span class="linenum"> 593</span></a>          die();
<a name="l594"><span class="linenum"> 594</span></a>      }
<a name="l595"><span class="linenum"> 595</span></a>  
<a name="l596"><span class="linenum"> 596</span></a>  }
<a name="l597"><span class="linenum"> 597</span></a>  
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'settextcolor': ['settextcolor', 'Defines the color used for text. It can be expressed in RGB components or gray scale. The method can be called before the first page is created and the value is retained from page to page. ', [['lib/tcpdf','tcpdf.php',4003],['lib/google/src/Google/Service','YouTube.php',12984]], 6],
'load_pdf': ['load_pdf', 'Load the specified PDF and set the initial output configuration Used when processing comments and outputting a new PDF ', [['mod/assign/feedback/editpdf/classes','pdf.php',122]], 4],
'add_comment': ['add_comment', 'Add a comment to the current page ', [['mod/assign/feedback/editpdf/classes','pdf.php',213],['mod/assign/feedback/editpdf/classes','page_editor.php',108],['mod/wiki','pagelib.php',2302],['mod/assign/feedback/editpdf/classes','comments_quick_list.php',50]], 8],
'set_image_folder': ['set_image_folder', 'Set the path to the folder in which to generate page image files ', [['mod/assign/feedback/editpdf/classes','pdf.php',401]], 2],
'make_temp_directory': ['make_temp_directory', 'Create a directory under tempdir and make sure it is writable. ', [['lib','setuplib.php',1642]], 50],
'raise_memory_limit': ['raise_memory_limit', 'Function to raise the memory limit to a new value. Will respect the memory limit if it is higher, thus allowing settings in php.ini, apache conf or command line switches to override it. ', [['lib','setuplib.php',1206]], 59],
'send_test_image': ['send_test_image', 'If the test image has been generated correctly - send it direct to the browser. ', [['mod/assign/feedback/editpdf/classes','pdf.php',582]], 1],
'send_file': ['send_file', 'Repository method to serve the referenced file ', [['repository/boxnet','lib.php',482],['lib','filelib.php',2073],['repository/dropbox','lib.php',670],['repository','lib.php',1200],['repository/equella','lib.php',243],['lib/filestorage','stored_file.php',999],['lib','googleapi.php',142],['lib','googleapi.php',253],['repository/filesystem','lib.php',601],['lib/portfolio','plugin.php',811]], 26],
'page_count': ['page_count', 'The total number of pages in the PDF being processed ', [['mod/assign/feedback/editpdf/classes','pdf.php',114]], 0],
'create_page_from_source': ['create_page_from_source', 'Create a page from a source PDF. ', [['mod/assign/feedback/editpdf/classes','pdf.php',182]], 2],
'get_contenthash': ['get_contenthash', 'Returns sha1 hash code ', [['lib/filebrowser','virtual_root_file.php',299],['lib/filestorage','stored_file.php',795]], 78],
'copy_content_to': ['copy_content_to', 'Copy content of file to given pathname ', [['lib/filebrowser','virtual_root_file.php',115],['lib/filestorage','stored_file.php',466]], 13],
'output': ['output', 'Specific output method for the memory XML sink. ', [['lib/dtl','string_xml_database_exporter.php',34],['lib/tcpdf','tcpdf.php',7537],['lib','weblib.php',3368],['lib','weblib.php',3387],['lib','weblib.php',3408],['lib','weblib.php',3432],['lib','weblib.php',3491],['lib','weblib.php',3530],['lib','weblib.php',3602],['backup/util/output','output_controller.class.php',67],['lib','pdflib.php',178],['lib/amd/src','chart_output_chartjs.js',46],['comment','lib.php',420],['lib/amd/src','chart_output_htmltable.js',29],['lib/minify/lib/HTTP','Encoder.php',285],['lib/dtl','file_xml_database_exporter.php',51],['lib','graphlib.php',1485],['grade/report/singleview','lib.php',104],['admin/tool/uploadcourse/classes','tracker.php',135]], 218],
'multicell': ['multicell', 'This method allows printing text with line breaks. They can be automatic (as soon as the text reaches the right border of the cell) or explicit (via the \n character). As many cells as necessary are output, one below the other.<br /> Text can be aligned, centered or justified. The cell block can be framed and the background painted. ', [['lib/tcpdf','tcpdf.php',5732]], 28],
'gettemplatesize': ['gettemplatesize', 'Get the calculated size of a template. ', [['mod/assign/feedback/editpdf/fpdi','fpdf_tpl.php',259]], 3],
'setpageunit': ['setpageunit', 'Set the units of measure for the document. ', [['lib/tcpdf','tcpdf.php',2005]], 4],
'save_pdf': ['save_pdf', 'Save the completed PDF to the given file ', [['mod/assign/feedback/editpdf/classes','pdf.php',391]], 2],
'setfont': ['setfont', '', [['lib/google/src/Google/Service','AdSense.php',2400],['lib/phpexcel/PHPExcel','Style.php',492],['mod/assign/feedback/editpdf/fpdi','fpdf_tpl.php',291],['lib/phpexcel/PHPExcel/RichText','Run.php',57],['lib/tcpdf','tcpdf.php',4410],['lib/google/src/Google/Service','AdSenseHost.php',1458],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',228]], 37],
'addpage': ['addpage', 'Adds a new page to the document. ', [['mod/assign/feedback/editpdf/fpdi','fpdf_tpl.php',346],['lib/tcpdf','tcpdf.php',3091]], 17],
'setlinewidth': ['setlinewidth', 'Defines the line width. By default, the value equals 0.2 mm. The method can be called before the first page is created and the value is retained from page to page. ', [['lib/tcpdf','tcpdf.php',11262]], 7],
'setpageorientation': ['setpageorientation', 'Set page orientation. ', [['lib/tcpdf','tcpdf.php',2209]], 6],
'gety': ['gety', 'Returns the ordinate of the current position. ', [['lib/tcpdf','tcpdf.php',7411]], 160],
'setprintfooter': ['setprintfooter', 'Set a flag to print page footer. ', [['lib/tcpdf','tcpdf.php',3343]], 6],
'copy_page': ['copy_page', 'Copy the next page from the source file and set it as the current page ', [['mod/assign/feedback/editpdf/classes','pdf.php',166]], 2],
'setalpha': ['setalpha', 'Set alpha for stroking (CA) and non-stroking (ca) operations. ', [['lib/tcpdf','tcpdf.php',13890],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',251]], 12],
'importpage': ['importpage', 'Import a page. ', [['mod/assign/feedback/editpdf/fpdi','fpdi.php',146]], 1],
'setprintheader': ['setprintheader', 'Set a flag to print page header. ', [['lib/tcpdf','tcpdf.php',3334],['lib/google/src/Google/Service','Bigquery.php',1810]], 5],
'ensure_pdf_compatible': ['ensure_pdf_compatible', 'Check to see if PDF is version 1.4 (or below); if not: use ghostscript to convert it ', [['mod/assign/feedback/editpdf/classes','pdf.php',466]], 2],
'test_gs_path': ['test_gs_path', 'Test that the configured path to ghostscript is correct and working. ', [['mod/assign/feedback/editpdf/classes','pdf.php',525]], 4],
'current_page': ['current_page', 'The number of the current page in the PDF being processed ', [['mod/assign/feedback/editpdf/classes','pdf.php',106]], 0],
'set_pdf': ['set_pdf', 'Sets the name of the PDF to process, but only loads the file if the pagecount is zero (in order to count the number of pages) Used when generating page images (but not a new PDF) ', [['mod/assign/feedback/editpdf/classes','pdf.php',148]], 4],
'copy_remaining_pages': ['copy_remaining_pages', 'Copy all the remaining pages in the file ', [['mod/assign/feedback/editpdf/classes','pdf.php',203]], 0],
'image': ['image', 'Puts an image. ', [['mod/assign/feedback/editpdf/fpdi','fpdf_tpl.php',317],['lib/tcpdf','tcpdf.php',6784],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',217],['mod/data','lib.php',483]], 53],
'combine_pdfs': ['combine_pdfs', 'Combine the given PDF files into a single PDF. Optionally add a coversheet and coversheet fields. ', [['mod/assign/feedback/editpdf/classes','pdf.php',72]], 1],
'setdrawcolor': ['setdrawcolor', 'Defines the color used for all drawing operations (lines, rectangles and cell borders). It can be expressed in RGB components or gray scale. The method can be called before the first page is created and the value is retained from page to page. ', [['lib/tcpdf','tcpdf.php',3969]], 4],
'line': ['line', 'Draws a line between two points. ', [['lib/tcpdf','tcpdf.php',11460],['lib','graphlib.php',1698],['lib/amd/src','chart_line.js',26]], 23],
'getmessage': ['getmessage', '', [['lib/google/src/Google/Service','Freebase.php',441],['lib/google/src/Google/Service','AdSense.php',2970],['lib/google/src/Google/Service','Replicapool.php',1165],['lib/google/src/Google/Service','Replicapool.php',1257],['lib/google/src/Google/Service','Computeaccounts.php',1368],['lib/google/src/Google/Service','Computeaccounts.php',1460],['lib/google/src/Google/Service','Appengine.php',1604],['lib/google/src/Google/Service','Books.php',3579],['lib/google/src/Google/Service','Books.php',4429],['lib/google/src/Google/Service','Script.php',360],['lib/google/src/Google/Service','DeploymentManager.php',1116],['lib/google/src/Google/Service','DeploymentManager.php',1604],['lib/google/src/Google/Service','DeploymentManager.php',1641],['lib/google/src/Google/Service','DeploymentManager.php',1823],['lib/google/src/Google/Service','DeploymentManager.php',1860],['lib/google/src/Google/Service','Dataflow.php',2656],['lib/google/src/Google/Service','CloudUserAccounts.php',1807],['lib/google/src/Google/Service','CloudUserAccounts.php',1899],['lib/google/src/Google/Service','Replicapoolupdater.php',617],['lib/google/src/Google/Service','Replicapoolupdater.php',926],['lib/google/src/Google/Service','Replicapoolupdater.php',1018],['lib/google/src/Google/Service','Replicapoolupdater.php',1252],['lib/google/src/Google/Service','Bigquery.php',1367],['lib/google/src/Google/Service','ShoppingContent.php',4125],['lib/google/src/Google/Service','ShoppingContent.php',4527],['lib/google/src/Google/Service','ShoppingContent.php',4572],['lib/google/src/Google/Service','Genomics.php',3622],['lib/google/src/Google/Service','Reports.php',1106],['lib/google/src/Google/Service','Gmail.php',1371],['lib/google/src/Google/Service','Gmail.php',1467],['lib/google/src/Google/Service','Gmail.php',1495],['lib/google/src/Google/Service','Gmail.php',1513],['lib/google/src/Google/Service','Gmail.php',1531],['lib/google/src/Google/Service','Autoscaler.php',1079],['lib/google/src/Google/Service','Autoscaler.php',1171],['lib/google/src/Google/Service','AdExchangeSeller.php',1043],['lib/google/src/Google/Service','IdentityToolkit.php',1266],['lib/pear','PEAR.php',941],['lib/google/src/Google/Service','Storagetransfer.php',948],['lib/htmlpurifier/HTMLPurifier','Language.php',86],['lib/google/src/Google/Service','Resourceviews.php',894],['lib/google/src/Google/Service','Resourceviews.php',986],['lib/google/src/Google/Service','SQLAdmin.php',3029],['lib/google/src/Google/Service','Compute.php',8752],['lib/google/src/Google/Service','Compute.php',9200],['lib/google/src/Google/Service','Compute.php',10292],['lib/google/src/Google/Service','Compute.php',10384],['lib/google/src/Google/Service','Compute.php',10890],['lib/google/src/Google/Service','Compute.php',12525],['lib/google/src/Google/Service','Compute.php',12771],['lib/google/src/Google/Service','Compute.php',13249],['lib/google/src/Google/Service','Compute.php',13652],['lib/google/src/Google/Service','Compute.php',13804],['lib/google/src/Google/Service','Compute.php',14396],['lib/google/src/Google/Service','Compute.php',14488],['lib/google/src/Google/Service','Compute.php',14580],['lib/google/src/Google/Service','Compute.php',15235],['lib/google/src/Google/Service','Compute.php',16249],['lib/google/src/Google/Service','Compute.php',16675],['lib/google/src/Google/Service','Compute.php',17005],['lib/google/src/Google/Service','Compute.php',17723],['lib/google/src/Google/Service','Pubsub.php',711],['lib/google/src/Google/Service','Pubsub.php',748],['lib/google/src/Google/Service','Dfareporting.php',19533]], 489],
'polyline': ['polyline', 'Draws a polygonal line ', [['lib/tcpdf','tcpdf.php',11818]], 3],
'setfillcolor': ['setfillcolor', 'Defines the color used for all filling operations (filled rectangles and cell backgrounds). It can be expressed in RGB components or gray scale. The method can be called before the first page is created and the value is retained from page to page. ', [['lib/tcpdf','tcpdf.php',3986],['lib/google/src/Google/Service','Fusiontables.php',1783]], 16],
'rect': ['rect', 'Draws a rectangle. ', [['lib/tcpdf','tcpdf.php',11483]], 85],
'add_annotation': ['add_annotation', 'Add an annotation to the current page ', [['mod/assign/feedback/editpdf/classes','pdf.php',263],['mod/assign/feedback/editpdf/classes','page_editor.php',289]], 4],
'get_image': ['get_image', 'Generate an image of the specified page in the PDF ', [['mod/assign/feedback/editpdf/classes','pdf.php',409],['blocks/rss_client/classes/output','feed.php',174]], 2],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'setsourcefile': ['setsourcefile', 'Set a source-file. ', [['mod/assign/feedback/editpdf/fpdi','fpdi.php',83]], 2],
'clean_filename': ['clean_filename', 'Cleans a given filename by removing suspicious or troublesome characters ', [['lib','moodlelib.php',6575]], 58],
'usetemplate': ['usetemplate', 'Use a template in current page or other template. ', [['mod/assign/feedback/editpdf/fpdi','fpdf_tpl.php',185],['mod/assign/feedback/editpdf/fpdi','fpdi.php',265]], 2],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'ellipse': ['ellipse', 'Draws an ellipse. An ellipse is formed from n Bezier curves. ', [['lib/tcpdf','tcpdf.php',11624]], 5],
'setdrawcolorarray': ['setdrawcolorarray', 'Defines the color used for all drawing operations (lines, rectangles and cell borders). It can be expressed in RGB, CMYK or GRAY SCALE components. The method can be called before the first page is created and the value is retained from page to page. ', [['lib/tcpdf','tcpdf.php',3837]], 8],
'defined': ['defined', '', [], 4731],
'escapeshellarg': ['escapeshellarg', '', [], 38],
'basename': ['basename', '', [], 153],
'htmlspecialchars': ['htmlspecialchars', '', [], 215],
'is_executable': ['is_executable', '', [], 12],
'header': ['header', '', [], 1355],
'str_replace': ['str_replace', '', [], 1648],
'filemtime': ['filemtime', '', [], 70],
'is_dir': ['is_dir', '', [], 211],
'implode': ['implode', '', [], 1281],
'preg_split': ['preg_split', '', [], 146],
'file_exists': ['file_exists', '', [], 867],
'error_reporting': ['error_reporting', '', [], 91],
'min': ['min', '', [], 898],
'exec': ['exec', '', [], 346],
'unlink': ['unlink', '', [], 256],
'intval': ['intval', '', [], 455],
'abs': ['abs', '', [], 560]};
CLASS_DATA={
'pdf': ['pdf', 'Wrapper class that extends TCPDF (lib/tcpdf/tcpdf.php). Moodle customisations are done here. ', [['lib','pdflib.php',151],['mod/assign/feedback/editpdf/classes','pdf.php',33]], 21]};
CONST_DATA={
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'MEMORY_EXTRA': ['MEMORY_EXTRA', '', [['lib','setuplib.php',50]], 40]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
