<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/assign/locallib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/assign';
filename='locallib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/assign/</a> -> <a href="locallib.php.html">locallib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="locallib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="locallib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * This file contains the definition for the class assignment</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * This class provides all the functionality for the new assign module.</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> *</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @package   mod_assign</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @copyright 2012 NetSpot {@link http://www.netspot.com.au}</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">// Assignment submission statuses.</span>
<a name="l30"><span class="linenum">  30</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_NEW')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_NEW.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_NEW')">ASSIGN_SUBMISSION_STATUS_NEW</a>', 'new');
<a name="l31"><span class="linenum">  31</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_REOPENED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_REOPENED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_REOPENED')">ASSIGN_SUBMISSION_STATUS_REOPENED</a>', 'reopened');
<a name="l32"><span class="linenum">  32</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_DRAFT')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_DRAFT.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_DRAFT')">ASSIGN_SUBMISSION_STATUS_DRAFT</a>', 'draft');
<a name="l33"><span class="linenum">  33</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>', 'submitted');
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">// Search filters for grading page.</span>
<a name="l36"><span class="linenum">  36</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_FILTER_SUBMITTED')" href="../../_constants/ASSIGN_FILTER_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_FILTER_SUBMITTED')">ASSIGN_FILTER_SUBMITTED</a>', 'submitted');
<a name="l37"><span class="linenum">  37</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_FILTER_NOT_SUBMITTED')" href="../../_constants/ASSIGN_FILTER_NOT_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_FILTER_NOT_SUBMITTED')">ASSIGN_FILTER_NOT_SUBMITTED</a>', 'notsubmitted');
<a name="l38"><span class="linenum">  38</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_FILTER_SINGLE_USER')" href="../../_constants/ASSIGN_FILTER_SINGLE_USER.html" onMouseOver="constPopup(event,'ASSIGN_FILTER_SINGLE_USER')">ASSIGN_FILTER_SINGLE_USER</a>', 'singleuser');
<a name="l39"><span class="linenum">  39</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_FILTER_REQUIRE_GRADING')" href="../../_constants/ASSIGN_FILTER_REQUIRE_GRADING.html" onMouseOver="constPopup(event,'ASSIGN_FILTER_REQUIRE_GRADING')">ASSIGN_FILTER_REQUIRE_GRADING</a>', 'require_grading');
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">// Marker filter for grading page.</span>
<a name="l42"><span class="linenum">  42</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_MARKER_FILTER_NO_MARKER')" href="../../_constants/ASSIGN_MARKER_FILTER_NO_MARKER.html" onMouseOver="constPopup(event,'ASSIGN_MARKER_FILTER_NO_MARKER')">ASSIGN_MARKER_FILTER_NO_MARKER</a>', -1);
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">// Reopen attempt methods.</span>
<a name="l45"><span class="linenum">  45</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_ATTEMPT_REOPEN_METHOD_NONE')" href="../../_constants/ASSIGN_ATTEMPT_REOPEN_METHOD_NONE.html" onMouseOver="constPopup(event,'ASSIGN_ATTEMPT_REOPEN_METHOD_NONE')">ASSIGN_ATTEMPT_REOPEN_METHOD_NONE</a>', 'none');
<a name="l46"><span class="linenum">  46</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL')" href="../../_constants/ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL.html" onMouseOver="constPopup(event,'ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL')">ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL</a>', 'manual');
<a name="l47"><span class="linenum">  47</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_ATTEMPT_REOPEN_METHOD_UNTILPASS')" href="../../_constants/ASSIGN_ATTEMPT_REOPEN_METHOD_UNTILPASS.html" onMouseOver="constPopup(event,'ASSIGN_ATTEMPT_REOPEN_METHOD_UNTILPASS')">ASSIGN_ATTEMPT_REOPEN_METHOD_UNTILPASS</a>', 'untilpass');
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">// Special value means allow unlimited attempts.</span>
<a name="l50"><span class="linenum">  50</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_UNLIMITED_ATTEMPTS')" href="../../_constants/ASSIGN_UNLIMITED_ATTEMPTS.html" onMouseOver="constPopup(event,'ASSIGN_UNLIMITED_ATTEMPTS')">ASSIGN_UNLIMITED_ATTEMPTS</a>', -1);
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">// Grading states.</span>
<a name="l53"><span class="linenum">  53</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_GRADING_STATUS_GRADED')" href="../../_constants/ASSIGN_GRADING_STATUS_GRADED.html" onMouseOver="constPopup(event,'ASSIGN_GRADING_STATUS_GRADED')">ASSIGN_GRADING_STATUS_GRADED</a>', 'graded');
<a name="l54"><span class="linenum">  54</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_GRADING_STATUS_NOT_GRADED')" href="../../_constants/ASSIGN_GRADING_STATUS_NOT_GRADED.html" onMouseOver="constPopup(event,'ASSIGN_GRADING_STATUS_NOT_GRADED')">ASSIGN_GRADING_STATUS_NOT_GRADED</a>', 'notgraded');
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">// Marking workflow states.</span>
<a name="l57"><span class="linenum">  57</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED')">ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED</a>', 'notmarked');
<a name="l58"><span class="linenum">  58</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_INMARKING')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_INMARKING.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_INMARKING')">ASSIGN_MARKING_WORKFLOW_STATE_INMARKING</a>', 'inmarking');
<a name="l59"><span class="linenum">  59</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('ASSIGN_MARKING_WORKFLOW_STATE_READYFORREVIEW', 'readyforreview');
<a name="l60"><span class="linenum">  60</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW')">ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW</a>', 'inreview');
<a name="l61"><span class="linenum">  61</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('ASSIGN_MARKING_WORKFLOW_STATE_READYFORRELEASE', 'readyforrelease');
<a name="l62"><span class="linenum">  62</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_RELEASED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')">ASSIGN_MARKING_WORKFLOW_STATE_RELEASED</a>', 'released');
<a name="l63"><span class="linenum">  63</span></a>  
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">// Name of file area for intro attachments.</span>
<a name="l65"><span class="linenum">  65</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGN_INTROATTACHMENT_FILEAREA')" href="../../_constants/ASSIGN_INTROATTACHMENT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGN_INTROATTACHMENT_FILEAREA')">ASSIGN_INTROATTACHMENT_FILEAREA</a>', 'introattachment');
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/accesslib.php');
<a name="l68"><span class="linenum">  68</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/formslib.php');
<a name="l69"><span class="linenum">  69</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../repository/lib.php.html">/repository/lib.php</a>');
<a name="l70"><span class="linenum">  70</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/mod_form.php.html">/mod/assign/mod_form.php</a>');
<a name="l71"><span class="linenum">  71</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l72"><span class="linenum">  72</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../grade/grading/lib.php.html">/grade/grading/lib.php</a>');
<a name="l73"><span class="linenum">  73</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/feedbackplugin.php.html">/mod/assign/feedbackplugin.php</a>');
<a name="l74"><span class="linenum">  74</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/submissionplugin.php.html">/mod/assign/submissionplugin.php</a>');
<a name="l75"><span class="linenum">  75</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/renderable.php.html">/mod/assign/renderable.php</a>');
<a name="l76"><span class="linenum">  76</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/gradingtable.php.html">/mod/assign/gradingtable.php</a>');
<a name="l77"><span class="linenum">  77</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/eventslib.php');
<a name="l78"><span class="linenum">  78</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/portfolio/caller.php');
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>  use \mod_assign\output\grading_app;
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">/**</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment"> * Standard base class for mod_assign (assignment types).</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment"> *</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment"> * @package   mod_assign</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment"> * @copyright 2012 NetSpot {@link http://www.netspot.com.au}</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment"> */</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('assign')" href="../../_classes/assign.html" onMouseOver="classPopup(event,'assign')">assign</a> {
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">    /** @var stdClass the assignment record that contains the global settings for this assign instance */</span>
<a name="l92"><span class="linenum">  92</span></a>      private <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>;
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">    /** @var stdClass the grade_item record for this assign instance's primary grade item. */</span>
<a name="l95"><span class="linenum">  95</span></a>      private <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>;
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>      <span class="comment">/** @var context the context of the course module for this assign instance</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">     *               (or just the course if we are creating a new one)</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment">     */</span>
<a name="l100"><span class="linenum"> 100</span></a>      private <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l101"><span class="linenum"> 101</span></a>  
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">    /** @var stdClass the course this assign instance belongs to */</span>
<a name="l103"><span class="linenum"> 103</span></a>      private <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>;
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">    /** @var stdClass the admin config for all assign instances  */</span>
<a name="l106"><span class="linenum"> 106</span></a>      private <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>;
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">    /** @var assign_renderer the custom renderer for this module */</span>
<a name="l109"><span class="linenum"> 109</span></a>      private <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>;
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">    /** @var cm_info the course module for this assign instance */</span>
<a name="l112"><span class="linenum"> 112</span></a>      private <a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>;
<a name="l113"><span class="linenum"> 113</span></a>  
<a name="l114"><span class="linenum"> 114</span></a>      <span class="comment">/** @var array cache for things like the coursemodule name or the scale menu -</span>
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">     *             only lives for a single request.</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">     */</span>
<a name="l117"><span class="linenum"> 117</span></a>      private <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../../_variables/cache.html">$cache</a>;
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">    /** @var array list of the installed submission plugins */</span>
<a name="l120"><span class="linenum"> 120</span></a>      private <a class="var it19953" onMouseOver="hilite(19953)" onMouseOut="lolite()" onClick="logVariable('submissionplugins')" href="../../_variables/submissionplugins.html">$submissionplugins</a>;
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">    /** @var array list of the installed feedback plugins */</span>
<a name="l123"><span class="linenum"> 123</span></a>      private <a class="var it24219" onMouseOver="hilite(24219)" onMouseOut="lolite()" onClick="logVariable('feedbackplugins')" href="../../_variables/feedbackplugins.html">$feedbackplugins</a>;
<a name="l124"><span class="linenum"> 124</span></a>  
<a name="l125"><span class="linenum"> 125</span></a>      <span class="comment">/** @var string action to be used to return to this page</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     *              (without repeating any form submissions etc).</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     */</span>
<a name="l128"><span class="linenum"> 128</span></a>      private <a class="var it25220" onMouseOver="hilite(25220)" onMouseOut="lolite()" onClick="logVariable('returnaction')" href="../../_variables/returnaction.html">$returnaction</a> = 'view';
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">    /** @var array params to be used to return to this page */</span>
<a name="l131"><span class="linenum"> 131</span></a>      private <a class="var it25221" onMouseOver="hilite(25221)" onMouseOut="lolite()" onClick="logVariable('returnparams')" href="../../_variables/returnparams.html">$returnparams</a> = array();
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">    /** @var string modulename prevents excessive calls to get_string */</span>
<a name="l134"><span class="linenum"> 134</span></a>      private static <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a> = null;
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">    /** @var string modulenameplural prevents excessive calls to get_string */</span>
<a name="l137"><span class="linenum"> 137</span></a>      private static <a class="var it32106" onMouseOver="hilite(32106)" onMouseOut="lolite()" onClick="logVariable('modulenameplural')" href="../../_variables/modulenameplural.html">$modulenameplural</a> = null;
<a name="l138"><span class="linenum"> 138</span></a>  
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">    /** @var array of marking workflow states for the current user */</span>
<a name="l140"><span class="linenum"> 140</span></a>      private <a class="var it32107" onMouseOver="hilite(32107)" onMouseOut="lolite()" onClick="logVariable('markingworkflowstates')" href="../../_variables/markingworkflowstates.html">$markingworkflowstates</a> = null;
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">    /** @var bool whether to exclude users with inactive enrolment */</span>
<a name="l143"><span class="linenum"> 143</span></a>      private <a class="var it4014" onMouseOver="hilite(4014)" onMouseOut="lolite()" onClick="logVariable('showonlyactiveenrol')" href="../../_variables/showonlyactiveenrol.html">$showonlyactiveenrol</a> = null;
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">    /** @var string A key used to identify userlists created by this object. */</span>
<a name="l146"><span class="linenum"> 146</span></a>      private <a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a> = null;
<a name="l147"><span class="linenum"> 147</span></a>  
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">    /** @var array cached list of participants for this assignment. The cache key will be group, showactive and the context id */</span>
<a name="l149"><span class="linenum"> 149</span></a>      private <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a> = array();
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">    /** @var array cached list of user groups when team submissions are enabled. The cache key will be the user. */</span>
<a name="l152"><span class="linenum"> 152</span></a>      private <a class="var it32108" onMouseOver="hilite(32108)" onMouseOut="lolite()" onClick="logVariable('usersubmissiongroups')" href="../../_variables/usersubmissiongroups.html">$usersubmissiongroups</a> = array();
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">    /** @var array cached list of user groups. The cache key will be the user. */</span>
<a name="l155"><span class="linenum"> 155</span></a>      private <a class="var it3731" onMouseOver="hilite(3731)" onMouseOut="lolite()" onClick="logVariable('usergroups')" href="../../_variables/usergroups.html">$usergroups</a> = array();
<a name="l156"><span class="linenum"> 156</span></a>  
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">    /** @var array cached list of IDs of users who share group membership with the user. The cache key will be the user. */</span>
<a name="l158"><span class="linenum"> 158</span></a>      private <a class="var it32109" onMouseOver="hilite(32109)" onMouseOut="lolite()" onClick="logVariable('sharedgroupmembers')" href="../../_variables/sharedgroupmembers.html">$sharedgroupmembers</a> = array();
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>      <span class="comment">/**</span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">     * Constructor for the base assign class.</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">     *</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">     * Note: For $coursemodule you can supply a stdclass if you like, but it</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">     * will be more efficient to supply a cm_info object.</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     *</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">     * @param mixed $coursemodulecontext context|null the course module context</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     *                                   (or the course context if the coursemodule has not been</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     *                                   created yet).</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     * @param mixed $coursemodule the current course module if it was already loaded,</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     *                            otherwise this class will load one from the context as required.</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">     * @param mixed $course the current course  if it was already loaded,</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">     *                      otherwise this class will load one from the context as required.</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">     */</span>
<a name="l174"><span class="linenum"> 174</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it32110" onMouseOver="hilite(32110)" onMouseOut="lolite()" onClick="logVariable('coursemodulecontext')" href="../../_variables/coursemodulecontext.html">$coursemodulecontext</a>, <a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l175"><span class="linenum"> 175</span></a>          global <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>;
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = <a class="var it32110" onMouseOver="hilite(32110)" onMouseOut="lolite()" onClick="logVariable('coursemodulecontext')" href="../../_variables/coursemodulecontext.html">$coursemodulecontext</a>;
<a name="l178"><span class="linenum"> 178</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/course.html">course</a> = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>;
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">        // Ensure that $this-&gt;coursemodule is a cm_info object (or null).</span>
<a name="l181"><span class="linenum"> 181</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a> = <a class="class" onClick="logClass('cm_info')" href="../../_classes/cm_info.html" onMouseOver="classPopup(event,'cm_info')">cm_info</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>);
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">        // Temporary cache only lives for a single request - used to reduce db lookups.</span>
<a name="l184"><span class="linenum"> 184</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a> = array();
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_plugins')" href="../../_functions/load_plugins.html" onMouseOver="funcPopup(event,'load_plugins')">load_plugins</a>('assignsubmission');
<a name="l187"><span class="linenum"> 187</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_plugins')" href="../../_functions/load_plugins.html" onMouseOver="funcPopup(event,'load_plugins')">load_plugins</a>('assignfeedback');
<a name="l188"><span class="linenum"> 188</span></a>  
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">        // Extra entropy is required for uniqid() to work on cygwin.</span>
<a name="l190"><span class="linenum"> 190</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('useridlistid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/useridlistid.html">useridlistid</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="phpfunction" onClick="logFunction('uniqid')" href="../../_functions/uniqid.html" onMouseOver="phpfuncPopup(event,'uniqid')">uniqid</a>('', true), <a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>);
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>          if (!isset(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('mod_assign_useridlist')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/mod_assign_useridlist.html">mod_assign_useridlist</a>)) {
<a name="l193"><span class="linenum"> 193</span></a>              <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('mod_assign_useridlist')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/mod_assign_useridlist.html">mod_assign_useridlist</a> = [];
<a name="l194"><span class="linenum"> 194</span></a>          }
<a name="l195"><span class="linenum"> 195</span></a>      }
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>      <span class="comment">/**</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment">     * Set the action and parameters that can be used to return to the current page.</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">     *</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">     * @param string $action The action for the current page</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">     * @param array $params An array of name value pairs which form the parameters</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">     *                      to return to the current page.</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">     * @return void</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">     */</span>
<a name="l205"><span class="linenum"> 205</span></a>      public function <a class="function" onClick="logFunction('register_return_link')" href="../../_functions/register_return_link.html" onMouseOver="funcPopup(event,'register_return_link')">register_return_link</a>(<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) {
<a name="l206"><span class="linenum"> 206</span></a>          global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l207"><span class="linenum"> 207</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['action'] = <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>;
<a name="l208"><span class="linenum"> 208</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>();
<a name="l209"><span class="linenum"> 209</span></a>          if (<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) {
<a name="l210"><span class="linenum"> 210</span></a>              <a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../../_variables/currenturl.html">$currenturl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/assign/view.php.html">/mod/assign/view.php</a>', array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l211"><span class="linenum"> 211</span></a>          } else {
<a name="l212"><span class="linenum"> 212</span></a>              <a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../../_variables/currenturl.html">$currenturl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/assign/index.php.html">/mod/assign/index.php</a>', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id));
<a name="l213"><span class="linenum"> 213</span></a>          }
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>          <a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../../_variables/currenturl.html">$currenturl</a>-&gt;<a class="function" onClick="logFunction('params')" href="../../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l216"><span class="linenum"> 216</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>(<a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../../_variables/currenturl.html">$currenturl</a>);
<a name="l217"><span class="linenum"> 217</span></a>      }
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>      <span class="comment">/**</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     * Return an action that can be used to get back to the current page.</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">     *</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">     * @return string action</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">     */</span>
<a name="l224"><span class="linenum"> 224</span></a>      public function <a class="function" onClick="logFunction('get_return_action')" href="../../_functions/get_return_action.html" onMouseOver="funcPopup(event,'get_return_action')">get_return_action</a>() {
<a name="l225"><span class="linenum"> 225</span></a>          global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l226"><span class="linenum"> 226</span></a>  
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">        // Web services don't set a URL, we should avoid debugging when ussing the url object.</span>
<a name="l228"><span class="linenum"> 228</span></a>          if (!<a class="constant" onClick="logConstant('WS_SERVER')" href="../../_constants/WS_SERVER.html" onMouseOver="constPopup(event,'WS_SERVER')">WS_SERVER</a>) {
<a name="l229"><span class="linenum"> 229</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/url.html">url</a>-&gt;<a class="function" onClick="logFunction('params')" href="../../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>();
<a name="l230"><span class="linenum"> 230</span></a>          }
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>          if (!empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['action'])) {
<a name="l233"><span class="linenum"> 233</span></a>              return <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['action'];
<a name="l234"><span class="linenum"> 234</span></a>          }
<a name="l235"><span class="linenum"> 235</span></a>          return '';
<a name="l236"><span class="linenum"> 236</span></a>      }
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>      <span class="comment">/**</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">     * Based on the current assignment settings should we display the intro.</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">     *</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">     * @return bool showintro</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">     */</span>
<a name="l243"><span class="linenum"> 243</span></a>      public function <a class="function" onClick="logFunction('show_intro')" href="../../_functions/show_intro.html" onMouseOver="funcPopup(event,'show_intro')">show_intro</a>() {
<a name="l244"><span class="linenum"> 244</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;alwaysshowdescription ||
<a name="l245"><span class="linenum"> 245</span></a>                  <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() &gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;allowsubmissionsfromdate) {
<a name="l246"><span class="linenum"> 246</span></a>              return true;
<a name="l247"><span class="linenum"> 247</span></a>          }
<a name="l248"><span class="linenum"> 248</span></a>          return false;
<a name="l249"><span class="linenum"> 249</span></a>      }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>      <span class="comment">/**</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment">     * Return a list of parameters that can be used to get back to the current page.</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">     *</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">     * @return array params</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     */</span>
<a name="l256"><span class="linenum"> 256</span></a>      public function <a class="function" onClick="logFunction('get_return_params')" href="../../_functions/get_return_params.html" onMouseOver="funcPopup(event,'get_return_params')">get_return_params</a>() {
<a name="l257"><span class="linenum"> 257</span></a>          global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l258"><span class="linenum"> 258</span></a>  
<a name="l259"><span class="linenum"> 259</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/url.html">url</a>-&gt;<a class="function" onClick="logFunction('params')" href="../../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>();
<a name="l260"><span class="linenum"> 260</span></a>          unset(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['id']);
<a name="l261"><span class="linenum"> 261</span></a>          unset(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['action']);
<a name="l262"><span class="linenum"> 262</span></a>          return <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>;
<a name="l263"><span class="linenum"> 263</span></a>      }
<a name="l264"><span class="linenum"> 264</span></a>  
<a name="l265"><span class="linenum"> 265</span></a>      <span class="comment">/**</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">     * Set the submitted form data.</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     *</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">     * @param stdClass $data The form data (instance)</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">     */</span>
<a name="l270"><span class="linenum"> 270</span></a>      public function <a class="function" onClick="logFunction('set_instance')" href="../../_functions/set_instance.html" onMouseOver="funcPopup(event,'set_instance')">set_instance</a>(stdClass <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l271"><span class="linenum"> 271</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>;
<a name="l272"><span class="linenum"> 272</span></a>      }
<a name="l273"><span class="linenum"> 273</span></a>  
<a name="l274"><span class="linenum"> 274</span></a>      <span class="comment">/**</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">     * Set the context.</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">     *</span>
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">     * @param context $context The new context</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">     */</span>
<a name="l279"><span class="linenum"> 279</span></a>      public function <a class="function" onClick="logFunction('set_context')" href="../../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(context <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l280"><span class="linenum"> 280</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l281"><span class="linenum"> 281</span></a>      }
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>      <span class="comment">/**</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">     * Set the course data.</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">     *</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">     * @param stdClass $course The course data</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">     */</span>
<a name="l288"><span class="linenum"> 288</span></a>      public function <a class="function" onClick="logFunction('set_course')" href="../../_functions/set_course.html" onMouseOver="funcPopup(event,'set_course')">set_course</a>(stdClass <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l289"><span class="linenum"> 289</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/course.html">course</a> = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>;
<a name="l290"><span class="linenum"> 290</span></a>      }
<a name="l291"><span class="linenum"> 291</span></a>  
<a name="l292"><span class="linenum"> 292</span></a>      <span class="comment">/**</span>
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">     * Get list of feedback plugins installed.</span>
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment">     *</span>
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment">     * @return array</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment">     */</span>
<a name="l297"><span class="linenum"> 297</span></a>      public function <a class="function" onClick="logFunction('get_feedback_plugins')" href="../../_functions/get_feedback_plugins.html" onMouseOver="funcPopup(event,'get_feedback_plugins')">get_feedback_plugins</a>() {
<a name="l298"><span class="linenum"> 298</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a>;
<a name="l299"><span class="linenum"> 299</span></a>      }
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>      <span class="comment">/**</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">     * Get list of submission plugins installed.</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">     *</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">     * @return array</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">     */</span>
<a name="l306"><span class="linenum"> 306</span></a>      public function <a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>() {
<a name="l307"><span class="linenum"> 307</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a>;
<a name="l308"><span class="linenum"> 308</span></a>      }
<a name="l309"><span class="linenum"> 309</span></a>  
<a name="l310"><span class="linenum"> 310</span></a>      <span class="comment">/**</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">     * Is blind marking enabled and reveal identities not set yet?</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">     *</span>
<a name="l313"><span class="linenum"> 313</span></a>  <span class="comment">     * @return bool</span>
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">     */</span>
<a name="l315"><span class="linenum"> 315</span></a>      public function <a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>() {
<a name="l316"><span class="linenum"> 316</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;blindmarking &amp;&amp; !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;revealidentities;
<a name="l317"><span class="linenum"> 317</span></a>      }
<a name="l318"><span class="linenum"> 318</span></a>  
<a name="l319"><span class="linenum"> 319</span></a>      <span class="comment">/**</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">     * Does an assignment have submission(s) or grade(s) already?</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">     *</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment">     * @return bool</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment">     */</span>
<a name="l324"><span class="linenum"> 324</span></a>      public function <a class="function" onClick="logFunction('has_submissions_or_grades')" href="../../_functions/has_submissions_or_grades.html" onMouseOver="funcPopup(event,'has_submissions_or_grades')">has_submissions_or_grades</a>() {
<a name="l325"><span class="linenum"> 325</span></a>          <a class="var it3976" onMouseOver="hilite(3976)" onMouseOut="lolite()" onClick="logVariable('allgrades')" href="../../_variables/allgrades.html">$allgrades</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_grades')" href="../../_functions/count_grades.html" onMouseOver="funcPopup(event,'count_grades')">count_grades</a>();
<a name="l326"><span class="linenum"> 326</span></a>          <a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_submissions')" href="../../_functions/count_submissions.html" onMouseOver="funcPopup(event,'count_submissions')">count_submissions</a>();
<a name="l327"><span class="linenum"> 327</span></a>          if ((<a class="var it3976" onMouseOver="hilite(3976)" onMouseOut="lolite()" onClick="logVariable('allgrades')" href="../../_variables/allgrades.html">$allgrades</a> == 0) &amp;&amp; (<a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a> == 0)) {
<a name="l328"><span class="linenum"> 328</span></a>              return false;
<a name="l329"><span class="linenum"> 329</span></a>          }
<a name="l330"><span class="linenum"> 330</span></a>          return true;
<a name="l331"><span class="linenum"> 331</span></a>      }
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>      <span class="comment">/**</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">     * Get a specific submission plugin by its type.</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">     *</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">     * @param string $subtype assignsubmission | assignfeedback</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">     * @param string $type</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">     * @return mixed assign_plugin|null</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">     */</span>
<a name="l340"><span class="linenum"> 340</span></a>      public function <a class="function" onClick="logFunction('get_plugin_by_type')" href="../../_functions/get_plugin_by_type.html" onMouseOver="funcPopup(event,'get_plugin_by_type')">get_plugin_by_type</a>(<a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../../_variables/subtype.html">$subtype</a>, <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l341"><span class="linenum"> 341</span></a>          <a class="var it21790" onMouseOver="hilite(21790)" onMouseOut="lolite()" onClick="logVariable('shortsubtype')" href="../../_variables/shortsubtype.html">$shortsubtype</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../../_variables/subtype.html">$subtype</a>, <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>('assign'));
<a name="l342"><span class="linenum"> 342</span></a>          <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="var it21790" onMouseOver="hilite(21790)" onMouseOut="lolite()" onClick="logVariable('shortsubtype')" href="../../_variables/shortsubtype.html">$shortsubtype</a> . 'plugins';
<a name="l343"><span class="linenum"> 343</span></a>          if (<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> != 'feedbackplugins' &amp;&amp; <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> != 'submissionplugins') {
<a name="l344"><span class="linenum"> 344</span></a>              return null;
<a name="l345"><span class="linenum"> 345</span></a>          }
<a name="l346"><span class="linenum"> 346</span></a>          <a class="var it22111" onMouseOver="hilite(22111)" onMouseOut="lolite()" onClick="logVariable('pluginlist')" href="../../_variables/pluginlist.html">$pluginlist</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>;
<a name="l347"><span class="linenum"> 347</span></a>          foreach (<a class="var it22111" onMouseOver="hilite(22111)" onMouseOut="lolite()" onClick="logVariable('pluginlist')" href="../../_variables/pluginlist.html">$pluginlist</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l348"><span class="linenum"> 348</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>() == <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l349"><span class="linenum"> 349</span></a>                  return <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>;
<a name="l350"><span class="linenum"> 350</span></a>              }
<a name="l351"><span class="linenum"> 351</span></a>          }
<a name="l352"><span class="linenum"> 352</span></a>          return null;
<a name="l353"><span class="linenum"> 353</span></a>      }
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>      <span class="comment">/**</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment">     * Get a feedback plugin by type.</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">     *</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">     * @param string $type - The type of plugin e.g comments</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">     * @return mixed assign_feedback_plugin|null</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">     */</span>
<a name="l361"><span class="linenum"> 361</span></a>      public function <a class="function" onClick="logFunction('get_feedback_plugin_by_type')" href="../../_functions/get_feedback_plugin_by_type.html" onMouseOver="funcPopup(event,'get_feedback_plugin_by_type')">get_feedback_plugin_by_type</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l362"><span class="linenum"> 362</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_plugin_by_type')" href="../../_functions/get_plugin_by_type.html" onMouseOver="funcPopup(event,'get_plugin_by_type')">get_plugin_by_type</a>('assignfeedback', <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>);
<a name="l363"><span class="linenum"> 363</span></a>      }
<a name="l364"><span class="linenum"> 364</span></a>  
<a name="l365"><span class="linenum"> 365</span></a>      <span class="comment">/**</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">     * Get a submission plugin by type.</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">     *</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">     * @param string $type - The type of plugin e.g comments</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">     * @return mixed assign_submission_plugin|null</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment">     */</span>
<a name="l371"><span class="linenum"> 371</span></a>      public function <a class="function" onClick="logFunction('get_submission_plugin_by_type')" href="../../_functions/get_submission_plugin_by_type.html" onMouseOver="funcPopup(event,'get_submission_plugin_by_type')">get_submission_plugin_by_type</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l372"><span class="linenum"> 372</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_plugin_by_type')" href="../../_functions/get_plugin_by_type.html" onMouseOver="funcPopup(event,'get_plugin_by_type')">get_plugin_by_type</a>('assignsubmission', <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>);
<a name="l373"><span class="linenum"> 373</span></a>      }
<a name="l374"><span class="linenum"> 374</span></a>  
<a name="l375"><span class="linenum"> 375</span></a>      <span class="comment">/**</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">     * Load the plugins from the sub folders under subtype.</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">     *</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">     * @param string $subtype - either submission or feedback</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">     * @return array - The sorted list of plugins</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     */</span>
<a name="l381"><span class="linenum"> 381</span></a>      protected function <a class="function" onClick="logFunction('load_plugins')" href="../../_functions/load_plugins.html" onMouseOver="funcPopup(event,'load_plugins')">load_plugins</a>(<a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../../_variables/subtype.html">$subtype</a>) {
<a name="l382"><span class="linenum"> 382</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l383"><span class="linenum"> 383</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l384"><span class="linenum"> 384</span></a>  
<a name="l385"><span class="linenum"> 385</span></a>          <a class="var it3550" onMouseOver="hilite(3550)" onMouseOut="lolite()" onClick="logVariable('names')" href="../../_variables/names.html">$names</a> = <a class="class" onClick="logClass('core_component')" href="../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>(<a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../../_variables/subtype.html">$subtype</a>);
<a name="l386"><span class="linenum"> 386</span></a>  
<a name="l387"><span class="linenum"> 387</span></a>          foreach (<a class="var it3550" onMouseOver="hilite(3550)" onMouseOut="lolite()" onClick="logVariable('names')" href="../../_variables/names.html">$names</a> as <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> =&gt; <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>) {
<a name="l388"><span class="linenum"> 388</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a> . '/locallib.php')) {
<a name="l389"><span class="linenum"> 389</span></a>                  <span class="keyword">require_once</span> <a class="filename" href="../../mod/assign/locallib.php.html" onMouseOver="reqPopup(event, 'locallib.php', '../../mod/assign/locallib.php')">($path . '/locallib.php')</a>;
<a name="l390"><span class="linenum"> 390</span></a>  
<a name="l391"><span class="linenum"> 391</span></a>                  <a class="var it21790" onMouseOver="hilite(21790)" onMouseOut="lolite()" onClick="logVariable('shortsubtype')" href="../../_variables/shortsubtype.html">$shortsubtype</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../../_variables/subtype.html">$subtype</a>, <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>('assign'));
<a name="l392"><span class="linenum"> 392</span></a>                  <a class="var it7708" onMouseOver="hilite(7708)" onMouseOut="lolite()" onClick="logVariable('pluginclass')" href="../../_variables/pluginclass.html">$pluginclass</a> = 'assign_' . <a class="var it21790" onMouseOver="hilite(21790)" onMouseOut="lolite()" onClick="logVariable('shortsubtype')" href="../../_variables/shortsubtype.html">$shortsubtype</a> . '_' . <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>;
<a name="l393"><span class="linenum"> 393</span></a>  
<a name="l394"><span class="linenum"> 394</span></a>                  <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a> = new <a class="var it7708" onMouseOver="hilite(7708)" onMouseOut="lolite()" onClick="logVariable('pluginclass')" href="../../_variables/pluginclass.html">$pluginclass</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l395"><span class="linenum"> 395</span></a>  
<a name="l396"><span class="linenum"> 396</span></a>                  if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a> instanceof assign_plugin) {
<a name="l397"><span class="linenum"> 397</span></a>                      <a class="var it1677" onMouseOver="hilite(1677)" onMouseOut="lolite()" onClick="logVariable('idx')" href="../../_variables/idx.html">$idx</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_sort_order')" href="../../_functions/get_sort_order.html" onMouseOver="funcPopup(event,'get_sort_order')">get_sort_order</a>();
<a name="l398"><span class="linenum"> 398</span></a>                      while (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1677" onMouseOver="hilite(1677)" onMouseOut="lolite()" onClick="logVariable('idx')" href="../../_variables/idx.html">$idx</a>, <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>)) {
<a name="l399"><span class="linenum"> 399</span></a>                          <a class="var it1677" onMouseOver="hilite(1677)" onMouseOut="lolite()" onClick="logVariable('idx')" href="../../_variables/idx.html">$idx</a> +=1;
<a name="l400"><span class="linenum"> 400</span></a>                      }
<a name="l401"><span class="linenum"> 401</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>[<a class="var it1677" onMouseOver="hilite(1677)" onMouseOut="lolite()" onClick="logVariable('idx')" href="../../_variables/idx.html">$idx</a>] = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>;
<a name="l402"><span class="linenum"> 402</span></a>                  }
<a name="l403"><span class="linenum"> 403</span></a>              }
<a name="l404"><span class="linenum"> 404</span></a>          }
<a name="l405"><span class="linenum"> 405</span></a>          <a class="phpfunction" onClick="logFunction('ksort')" href="../../_functions/ksort.html" onMouseOver="phpfuncPopup(event,'ksort')">ksort</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l406"><span class="linenum"> 406</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l407"><span class="linenum"> 407</span></a>      }
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>      <span class="comment">/**</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">     * Display the assignment, used by view.php</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">     *</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">     * The assignment is displayed differently depending on your role,</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">     * the settings for the assignment and the status of the assignment.</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">     *</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">     * @param string $action The current action if any.</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">     * @param array $args Optional arguments to pass to the view (instead of getting them from GET and POST).</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment">     * @return string - The page output.</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment">     */</span>
<a name="l419"><span class="linenum"> 419</span></a>      public function <a class="function" onClick="logFunction('view')" href="../../_functions/view.html" onMouseOver="funcPopup(event,'view')">view</a>(<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>='', <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a> = array()) {
<a name="l420"><span class="linenum"> 420</span></a>          global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l421"><span class="linenum"> 421</span></a>  
<a name="l422"><span class="linenum"> 422</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l423"><span class="linenum"> 423</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = null;
<a name="l424"><span class="linenum"> 424</span></a>          <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a> = array();
<a name="l425"><span class="linenum"> 425</span></a>          <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a> = array();
<a name="l426"><span class="linenum"> 426</span></a>  
<a name="l427"><span class="linenum"> 427</span></a>          if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id)) {
<a name="l428"><span class="linenum"> 428</span></a>              <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['id'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id;
<a name="l429"><span class="linenum"> 429</span></a>          }
<a name="l430"><span class="linenum"> 430</span></a>  
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">        // Handle form submissions first.</span>
<a name="l432"><span class="linenum"> 432</span></a>          if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'savesubmission') {
<a name="l433"><span class="linenum"> 433</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'editsubmission';
<a name="l434"><span class="linenum"> 434</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_save_submission')" href="../../_functions/process_save_submission.html" onMouseOver="funcPopup(event,'process_save_submission')">process_save_submission</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>)) {
<a name="l435"><span class="linenum"> 435</span></a>                  <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l436"><span class="linenum"> 436</span></a>                  <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'view';
<a name="l437"><span class="linenum"> 437</span></a>              }
<a name="l438"><span class="linenum"> 438</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'editprevioussubmission') {
<a name="l439"><span class="linenum"> 439</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'editsubmission';
<a name="l440"><span class="linenum"> 440</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_copy_previous_attempt')" href="../../_functions/process_copy_previous_attempt.html" onMouseOver="funcPopup(event,'process_copy_previous_attempt')">process_copy_previous_attempt</a>(<a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>)) {
<a name="l441"><span class="linenum"> 441</span></a>                  <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l442"><span class="linenum"> 442</span></a>                  <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'editsubmission';
<a name="l443"><span class="linenum"> 443</span></a>              }
<a name="l444"><span class="linenum"> 444</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'lock') {
<a name="l445"><span class="linenum"> 445</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_lock_submission')" href="../../_functions/process_lock_submission.html" onMouseOver="funcPopup(event,'process_lock_submission')">process_lock_submission</a>();
<a name="l446"><span class="linenum"> 446</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l447"><span class="linenum"> 447</span></a>              <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grading';
<a name="l448"><span class="linenum"> 448</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'addattempt') {
<a name="l449"><span class="linenum"> 449</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_add_attempt')" href="../../_functions/process_add_attempt.html" onMouseOver="funcPopup(event,'process_add_attempt')">process_add_attempt</a>(<a class="function" onClick="logFunction('required_param')" href="../../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('userid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>));
<a name="l450"><span class="linenum"> 450</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l451"><span class="linenum"> 451</span></a>              <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grading';
<a name="l452"><span class="linenum"> 452</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'reverttodraft') {
<a name="l453"><span class="linenum"> 453</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_revert_to_draft')" href="../../_functions/process_revert_to_draft.html" onMouseOver="funcPopup(event,'process_revert_to_draft')">process_revert_to_draft</a>();
<a name="l454"><span class="linenum"> 454</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l455"><span class="linenum"> 455</span></a>              <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grading';
<a name="l456"><span class="linenum"> 456</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'unlock') {
<a name="l457"><span class="linenum"> 457</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_unlock_submission')" href="../../_functions/process_unlock_submission.html" onMouseOver="funcPopup(event,'process_unlock_submission')">process_unlock_submission</a>();
<a name="l458"><span class="linenum"> 458</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l459"><span class="linenum"> 459</span></a>              <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grading';
<a name="l460"><span class="linenum"> 460</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'setbatchmarkingworkflowstate') {
<a name="l461"><span class="linenum"> 461</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_set_batch_marking_workflow_state')" href="../../_functions/process_set_batch_marking_workflow_state.html" onMouseOver="funcPopup(event,'process_set_batch_marking_workflow_state')">process_set_batch_marking_workflow_state</a>();
<a name="l462"><span class="linenum"> 462</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l463"><span class="linenum"> 463</span></a>              <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grading';
<a name="l464"><span class="linenum"> 464</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'setbatchmarkingallocation') {
<a name="l465"><span class="linenum"> 465</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_set_batch_marking_allocation')" href="../../_functions/process_set_batch_marking_allocation.html" onMouseOver="funcPopup(event,'process_set_batch_marking_allocation')">process_set_batch_marking_allocation</a>();
<a name="l466"><span class="linenum"> 466</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l467"><span class="linenum"> 467</span></a>              <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grading';
<a name="l468"><span class="linenum"> 468</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'confirmsubmit') {
<a name="l469"><span class="linenum"> 469</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'submit';
<a name="l470"><span class="linenum"> 470</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_submit_for_grading')" href="../../_functions/process_submit_for_grading.html" onMouseOver="funcPopup(event,'process_submit_for_grading')">process_submit_for_grading</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>)) {
<a name="l471"><span class="linenum"> 471</span></a>                  <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l472"><span class="linenum"> 472</span></a>                  <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'view';
<a name="l473"><span class="linenum"> 473</span></a>              } else if (<a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>) {
<a name="l474"><span class="linenum"> 474</span></a>                  <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'viewsubmitforgradingerror';
<a name="l475"><span class="linenum"> 475</span></a>              }
<a name="l476"><span class="linenum"> 476</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'submitotherforgrading') {
<a name="l477"><span class="linenum"> 477</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_submit_other_for_grading')" href="../../_functions/process_submit_other_for_grading.html" onMouseOver="funcPopup(event,'process_submit_other_for_grading')">process_submit_other_for_grading</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>)) {
<a name="l478"><span class="linenum"> 478</span></a>                  <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l479"><span class="linenum"> 479</span></a>                  <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grading';
<a name="l480"><span class="linenum"> 480</span></a>              } else {
<a name="l481"><span class="linenum"> 481</span></a>                  <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'viewsubmitforgradingerror';
<a name="l482"><span class="linenum"> 482</span></a>              }
<a name="l483"><span class="linenum"> 483</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'gradingbatchoperation') {
<a name="l484"><span class="linenum"> 484</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_grading_batch_operation')" href="../../_functions/process_grading_batch_operation.html" onMouseOver="funcPopup(event,'process_grading_batch_operation')">process_grading_batch_operation</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l485"><span class="linenum"> 485</span></a>              if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'grading') {
<a name="l486"><span class="linenum"> 486</span></a>                  <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l487"><span class="linenum"> 487</span></a>                  <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grading';
<a name="l488"><span class="linenum"> 488</span></a>              }
<a name="l489"><span class="linenum"> 489</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'submitgrade') {
<a name="l490"><span class="linenum"> 490</span></a>              if (<a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('saveandshownext', null, <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>)) {
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">                // Save and show next.</span>
<a name="l492"><span class="linenum"> 492</span></a>                  <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'grade';
<a name="l493"><span class="linenum"> 493</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_save_grade')" href="../../_functions/process_save_grade.html" onMouseOver="funcPopup(event,'process_save_grade')">process_save_grade</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>)) {
<a name="l494"><span class="linenum"> 494</span></a>                      <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l495"><span class="linenum"> 495</span></a>                      <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grade';
<a name="l496"><span class="linenum"> 496</span></a>                      <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['rownum'] = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('rownum', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>) + 1;
<a name="l497"><span class="linenum"> 497</span></a>                      <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['useridlistid'] = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('useridlistid', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_useridlist_key_id')" href="../../_functions/get_useridlist_key_id.html" onMouseOver="funcPopup(event,'get_useridlist_key_id')">get_useridlist_key_id</a>(), <a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>);
<a name="l498"><span class="linenum"> 498</span></a>                  }
<a name="l499"><span class="linenum"> 499</span></a>              } else if (<a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('nosaveandprevious', null, <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>)) {
<a name="l500"><span class="linenum"> 500</span></a>                  <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l501"><span class="linenum"> 501</span></a>                  <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grade';
<a name="l502"><span class="linenum"> 502</span></a>                  <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['rownum'] = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('rownum', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>) - 1;
<a name="l503"><span class="linenum"> 503</span></a>                  <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['useridlistid'] = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('useridlistid', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_useridlist_key_id')" href="../../_functions/get_useridlist_key_id.html" onMouseOver="funcPopup(event,'get_useridlist_key_id')">get_useridlist_key_id</a>(), <a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>);
<a name="l504"><span class="linenum"> 504</span></a>              } else if (<a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('nosaveandnext', null, <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>)) {
<a name="l505"><span class="linenum"> 505</span></a>                  <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l506"><span class="linenum"> 506</span></a>                  <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grade';
<a name="l507"><span class="linenum"> 507</span></a>                  <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['rownum'] = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('rownum', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>) + 1;
<a name="l508"><span class="linenum"> 508</span></a>                  <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['useridlistid'] = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('useridlistid', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_useridlist_key_id')" href="../../_functions/get_useridlist_key_id.html" onMouseOver="funcPopup(event,'get_useridlist_key_id')">get_useridlist_key_id</a>(), <a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>);
<a name="l509"><span class="linenum"> 509</span></a>              } else if (<a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('savegrade', null, <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>)) {
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">                // Save changes button.</span>
<a name="l511"><span class="linenum"> 511</span></a>                  <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'grade';
<a name="l512"><span class="linenum"> 512</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_save_grade')" href="../../_functions/process_save_grade.html" onMouseOver="funcPopup(event,'process_save_grade')">process_save_grade</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>)) {
<a name="l513"><span class="linenum"> 513</span></a>                      <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l514"><span class="linenum"> 514</span></a>                      <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'savegradingresult';
<a name="l515"><span class="linenum"> 515</span></a>                  }
<a name="l516"><span class="linenum"> 516</span></a>              } else {
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">                // Cancel button.</span>
<a name="l518"><span class="linenum"> 518</span></a>                  <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l519"><span class="linenum"> 519</span></a>                  <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grading';
<a name="l520"><span class="linenum"> 520</span></a>              }
<a name="l521"><span class="linenum"> 521</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'quickgrade') {
<a name="l522"><span class="linenum"> 522</span></a>              <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_save_quick_grades')" href="../../_functions/process_save_quick_grades.html" onMouseOver="funcPopup(event,'process_save_quick_grades')">process_save_quick_grades</a>();
<a name="l523"><span class="linenum"> 523</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'quickgradingresult';
<a name="l524"><span class="linenum"> 524</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'saveoptions') {
<a name="l525"><span class="linenum"> 525</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_save_grading_options')" href="../../_functions/process_save_grading_options.html" onMouseOver="funcPopup(event,'process_save_grading_options')">process_save_grading_options</a>();
<a name="l526"><span class="linenum"> 526</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l527"><span class="linenum"> 527</span></a>              <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grading';
<a name="l528"><span class="linenum"> 528</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'saveextension') {
<a name="l529"><span class="linenum"> 529</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'grantextension';
<a name="l530"><span class="linenum"> 530</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_save_extension')" href="../../_functions/process_save_extension.html" onMouseOver="funcPopup(event,'process_save_extension')">process_save_extension</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>)) {
<a name="l531"><span class="linenum"> 531</span></a>                  <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l532"><span class="linenum"> 532</span></a>                  <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grading';
<a name="l533"><span class="linenum"> 533</span></a>              }
<a name="l534"><span class="linenum"> 534</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'revealidentitiesconfirm') {
<a name="l535"><span class="linenum"> 535</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_reveal_identities')" href="../../_functions/process_reveal_identities.html" onMouseOver="funcPopup(event,'process_reveal_identities')">process_reveal_identities</a>();
<a name="l536"><span class="linenum"> 536</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = 'redirect';
<a name="l537"><span class="linenum"> 537</span></a>              <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>['action'] = 'grading';
<a name="l538"><span class="linenum"> 538</span></a>          }
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>          <a class="var it25221" onMouseOver="hilite(25221)" onMouseOut="lolite()" onClick="logVariable('returnparams')" href="../../_variables/returnparams.html">$returnparams</a> = array('rownum'=&gt;<a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('rownum', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>),
<a name="l541"><span class="linenum"> 541</span></a>                                'useridlistid' =&gt; <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('useridlistid', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_useridlist_key_id')" href="../../_functions/get_useridlist_key_id.html" onMouseOver="funcPopup(event,'get_useridlist_key_id')">get_useridlist_key_id</a>(), <a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>));
<a name="l542"><span class="linenum"> 542</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('register_return_link')" href="../../_functions/register_return_link.html" onMouseOver="funcPopup(event,'register_return_link')">register_return_link</a>(<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>, <a class="var it25221" onMouseOver="hilite(25221)" onMouseOut="lolite()" onClick="logVariable('returnparams')" href="../../_variables/returnparams.html">$returnparams</a>);
<a name="l543"><span class="linenum"> 543</span></a>  
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">        // Include any page action as part of the body tag CSS id.</span>
<a name="l545"><span class="linenum"> 545</span></a>          if (!empty(<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>)) {
<a name="l546"><span class="linenum"> 546</span></a>              <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagetype')" href="../../_functions/set_pagetype.html" onMouseOver="funcPopup(event,'set_pagetype')">set_pagetype</a>('mod-assign-' . <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>);
<a name="l547"><span class="linenum"> 547</span></a>          }
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">        // Now show the right view page.</span>
<a name="l549"><span class="linenum"> 549</span></a>          if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'redirect') {
<a name="l550"><span class="linenum"> 550</span></a>              <a class="var it26892" onMouseOver="hilite(26892)" onMouseOut="lolite()" onClick="logVariable('nextpageurl')" href="../../_variables/nextpageurl.html">$nextpageurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/assign/view.php.html">/mod/assign/view.php</a>', <a class="var it32113" onMouseOver="hilite(32113)" onMouseOut="lolite()" onClick="logVariable('nextpageparams')" href="../../_variables/nextpageparams.html">$nextpageparams</a>);
<a name="l551"><span class="linenum"> 551</span></a>              <a class="function" onClick="logFunction('redirect')" href="../../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it26892" onMouseOver="hilite(26892)" onMouseOut="lolite()" onClick="logVariable('nextpageurl')" href="../../_variables/nextpageurl.html">$nextpageurl</a>);
<a name="l552"><span class="linenum"> 552</span></a>              return;
<a name="l553"><span class="linenum"> 553</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'savegradingresult') {
<a name="l554"><span class="linenum"> 554</span></a>              <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradingchangessaved', 'assign');
<a name="l555"><span class="linenum"> 555</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_savegrading_result')" href="../../_functions/view_savegrading_result.html" onMouseOver="funcPopup(event,'view_savegrading_result')">view_savegrading_result</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>);
<a name="l556"><span class="linenum"> 556</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'quickgradingresult') {
<a name="l557"><span class="linenum"> 557</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = null;
<a name="l558"><span class="linenum"> 558</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_quickgrading_result')" href="../../_functions/view_quickgrading_result.html" onMouseOver="funcPopup(event,'view_quickgrading_result')">view_quickgrading_result</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>);
<a name="l559"><span class="linenum"> 559</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'gradingpanel') {
<a name="l560"><span class="linenum"> 560</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_single_grading_panel')" href="../../_functions/view_single_grading_panel.html" onMouseOver="funcPopup(event,'view_single_grading_panel')">view_single_grading_panel</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l561"><span class="linenum"> 561</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'grade') {
<a name="l562"><span class="linenum"> 562</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_single_grade_page')" href="../../_functions/view_single_grade_page.html" onMouseOver="funcPopup(event,'view_single_grade_page')">view_single_grade_page</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l563"><span class="linenum"> 563</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'viewpluginassignfeedback') {
<a name="l564"><span class="linenum"> 564</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_plugin_content')" href="../../_functions/view_plugin_content.html" onMouseOver="funcPopup(event,'view_plugin_content')">view_plugin_content</a>('assignfeedback');
<a name="l565"><span class="linenum"> 565</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'viewpluginassignsubmission') {
<a name="l566"><span class="linenum"> 566</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_plugin_content')" href="../../_functions/view_plugin_content.html" onMouseOver="funcPopup(event,'view_plugin_content')">view_plugin_content</a>('assignsubmission');
<a name="l567"><span class="linenum"> 567</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'editsubmission') {
<a name="l568"><span class="linenum"> 568</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_edit_submission_page')" href="../../_functions/view_edit_submission_page.html" onMouseOver="funcPopup(event,'view_edit_submission_page')">view_edit_submission_page</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>);
<a name="l569"><span class="linenum"> 569</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'grader') {
<a name="l570"><span class="linenum"> 570</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_grader')" href="../../_functions/view_grader.html" onMouseOver="funcPopup(event,'view_grader')">view_grader</a>();
<a name="l571"><span class="linenum"> 571</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'grading') {
<a name="l572"><span class="linenum"> 572</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_grading_page')" href="../../_functions/view_grading_page.html" onMouseOver="funcPopup(event,'view_grading_page')">view_grading_page</a>();
<a name="l573"><span class="linenum"> 573</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'downloadall') {
<a name="l574"><span class="linenum"> 574</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('download_submissions')" href="../../_functions/download_submissions.html" onMouseOver="funcPopup(event,'download_submissions')">download_submissions</a>();
<a name="l575"><span class="linenum"> 575</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'submit') {
<a name="l576"><span class="linenum"> 576</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_submit_for_grading')" href="../../_functions/check_submit_for_grading.html" onMouseOver="funcPopup(event,'check_submit_for_grading')">check_submit_for_grading</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l577"><span class="linenum"> 577</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'grantextension') {
<a name="l578"><span class="linenum"> 578</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_grant_extension')" href="../../_functions/view_grant_extension.html" onMouseOver="funcPopup(event,'view_grant_extension')">view_grant_extension</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l579"><span class="linenum"> 579</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'revealidentities') {
<a name="l580"><span class="linenum"> 580</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_reveal_identities_confirm')" href="../../_functions/view_reveal_identities_confirm.html" onMouseOver="funcPopup(event,'view_reveal_identities_confirm')">view_reveal_identities_confirm</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l581"><span class="linenum"> 581</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'plugingradingbatchoperation') {
<a name="l582"><span class="linenum"> 582</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_plugin_grading_batch_operation')" href="../../_functions/view_plugin_grading_batch_operation.html" onMouseOver="funcPopup(event,'view_plugin_grading_batch_operation')">view_plugin_grading_batch_operation</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l583"><span class="linenum"> 583</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'viewpluginpage') {
<a name="l584"><span class="linenum"> 584</span></a>               <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_plugin_page')" href="../../_functions/view_plugin_page.html" onMouseOver="funcPopup(event,'view_plugin_page')">view_plugin_page</a>();
<a name="l585"><span class="linenum"> 585</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'viewcourseindex') {
<a name="l586"><span class="linenum"> 586</span></a>               <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_course_index')" href="../../_functions/view_course_index.html" onMouseOver="funcPopup(event,'view_course_index')">view_course_index</a>();
<a name="l587"><span class="linenum"> 587</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'viewbatchsetmarkingworkflowstate') {
<a name="l588"><span class="linenum"> 588</span></a>               <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_batch_set_workflow_state')" href="../../_functions/view_batch_set_workflow_state.html" onMouseOver="funcPopup(event,'view_batch_set_workflow_state')">view_batch_set_workflow_state</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l589"><span class="linenum"> 589</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'viewbatchmarkingallocation') {
<a name="l590"><span class="linenum"> 590</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_batch_markingallocation')" href="../../_functions/view_batch_markingallocation.html" onMouseOver="funcPopup(event,'view_batch_markingallocation')">view_batch_markingallocation</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l591"><span class="linenum"> 591</span></a>          } else if (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'viewsubmitforgradingerror') {
<a name="l592"><span class="linenum"> 592</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;view_error_page(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submitforgrading', 'assign'), <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>);
<a name="l593"><span class="linenum"> 593</span></a>          } else {
<a name="l594"><span class="linenum"> 594</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_submission_page')" href="../../_functions/view_submission_page.html" onMouseOver="funcPopup(event,'view_submission_page')">view_submission_page</a>();
<a name="l595"><span class="linenum"> 595</span></a>          }
<a name="l596"><span class="linenum"> 596</span></a>  
<a name="l597"><span class="linenum"> 597</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l598"><span class="linenum"> 598</span></a>      }
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>      <span class="comment">/**</span>
<a name="l601"><span class="linenum"> 601</span></a>  <span class="comment">     * Add this instance to the database.</span>
<a name="l602"><span class="linenum"> 602</span></a>  <span class="comment">     *</span>
<a name="l603"><span class="linenum"> 603</span></a>  <span class="comment">     * @param stdClass $formdata The data submitted from the form</span>
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">     * @param bool $callplugins This is used to skip the plugin code</span>
<a name="l605"><span class="linenum"> 605</span></a>  <span class="comment">     *             when upgrading an old assignment to a new one (the plugins get called manually)</span>
<a name="l606"><span class="linenum"> 606</span></a>  <span class="comment">     * @return mixed false if an error occurs or the int id of the new instance</span>
<a name="l607"><span class="linenum"> 607</span></a>  <span class="comment">     */</span>
<a name="l608"><span class="linenum"> 608</span></a>      public function <a class="function" onClick="logFunction('add_instance')" href="../../_functions/add_instance.html" onMouseOver="funcPopup(event,'add_instance')">add_instance</a>(stdClass <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>, <a class="var it32114" onMouseOver="hilite(32114)" onMouseOut="lolite()" onClick="logVariable('callplugins')" href="../../_variables/callplugins.html">$callplugins</a>) {
<a name="l609"><span class="linenum"> 609</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l610"><span class="linenum"> 610</span></a>          <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>();
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>          <a class="var it210" onMouseOver="hilite(210)" onMouseOut="lolite()" onClick="logVariable('err')" href="../../_variables/err.html">$err</a> = '';
<a name="l613"><span class="linenum"> 613</span></a>  
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">        // Add the database record.</span>
<a name="l615"><span class="linenum"> 615</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a> = new stdClass();
<a name="l616"><span class="linenum"> 616</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('name')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('name')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l617"><span class="linenum"> 617</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l618"><span class="linenum"> 618</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('timecreated')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l619"><span class="linenum"> 619</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('course')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/course.html">course</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('course')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>;
<a name="l620"><span class="linenum"> 620</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('courseid')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('course')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>;
<a name="l621"><span class="linenum"> 621</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('intro')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('intro')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a>;
<a name="l622"><span class="linenum"> 622</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('introformat')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/introformat.html">introformat</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('introformat')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/introformat.html">introformat</a>;
<a name="l623"><span class="linenum"> 623</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('alwaysshowdescription')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/alwaysshowdescription.html">alwaysshowdescription</a> = !empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('alwaysshowdescription')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/alwaysshowdescription.html">alwaysshowdescription</a>);
<a name="l624"><span class="linenum"> 624</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('submissiondrafts')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/submissiondrafts.html">submissiondrafts</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('submissiondrafts')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/submissiondrafts.html">submissiondrafts</a>;
<a name="l625"><span class="linenum"> 625</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('requiresubmissionstatement')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/requiresubmissionstatement.html">requiresubmissionstatement</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('requiresubmissionstatement')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/requiresubmissionstatement.html">requiresubmissionstatement</a>;
<a name="l626"><span class="linenum"> 626</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('sendnotifications')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/sendnotifications.html">sendnotifications</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('sendnotifications')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/sendnotifications.html">sendnotifications</a>;
<a name="l627"><span class="linenum"> 627</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('sendlatenotifications')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/sendlatenotifications.html">sendlatenotifications</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('sendlatenotifications')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/sendlatenotifications.html">sendlatenotifications</a>;
<a name="l628"><span class="linenum"> 628</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('sendstudentnotifications')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/sendstudentnotifications.html">sendstudentnotifications</a> = <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('sendstudentnotifications')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/sendstudentnotifications.html">sendstudentnotifications</a>;
<a name="l629"><span class="linenum"> 629</span></a>          if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('sendstudentnotifications')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/sendstudentnotifications.html">sendstudentnotifications</a>)) {
<a name="l630"><span class="linenum"> 630</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('sendstudentnotifications')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/sendstudentnotifications.html">sendstudentnotifications</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('sendstudentnotifications')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/sendstudentnotifications.html">sendstudentnotifications</a>;
<a name="l631"><span class="linenum"> 631</span></a>          }
<a name="l632"><span class="linenum"> 632</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('duedate')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/duedate.html">duedate</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('duedate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/duedate.html">duedate</a>;
<a name="l633"><span class="linenum"> 633</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('cutoffdate')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/cutoffdate.html">cutoffdate</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('cutoffdate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/cutoffdate.html">cutoffdate</a>;
<a name="l634"><span class="linenum"> 634</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('allowsubmissionsfromdate')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/allowsubmissionsfromdate.html">allowsubmissionsfromdate</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('allowsubmissionsfromdate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/allowsubmissionsfromdate.html">allowsubmissionsfromdate</a>;
<a name="l635"><span class="linenum"> 635</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('grade')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('grade')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>;
<a name="l636"><span class="linenum"> 636</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('completionsubmit')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/completionsubmit.html">completionsubmit</a> = !empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('completionsubmit')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/completionsubmit.html">completionsubmit</a>);
<a name="l637"><span class="linenum"> 637</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>;
<a name="l638"><span class="linenum"> 638</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('requireallteammemberssubmit')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/requireallteammemberssubmit.html">requireallteammemberssubmit</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('requireallteammemberssubmit')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/requireallteammemberssubmit.html">requireallteammemberssubmit</a>;
<a name="l639"><span class="linenum"> 639</span></a>          if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('teamsubmissiongroupingid')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/teamsubmissiongroupingid.html">teamsubmissiongroupingid</a>)) {
<a name="l640"><span class="linenum"> 640</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('teamsubmissiongroupingid')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/teamsubmissiongroupingid.html">teamsubmissiongroupingid</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('teamsubmissiongroupingid')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/teamsubmissiongroupingid.html">teamsubmissiongroupingid</a>;
<a name="l641"><span class="linenum"> 641</span></a>          }
<a name="l642"><span class="linenum"> 642</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('blindmarking')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/blindmarking.html">blindmarking</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('blindmarking')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/blindmarking.html">blindmarking</a>;
<a name="l643"><span class="linenum"> 643</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('attemptreopenmethod')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/attemptreopenmethod.html">attemptreopenmethod</a> = <a class="constant" onClick="logConstant('ASSIGN_ATTEMPT_REOPEN_METHOD_NONE')" href="../../_constants/ASSIGN_ATTEMPT_REOPEN_METHOD_NONE.html" onMouseOver="constPopup(event,'ASSIGN_ATTEMPT_REOPEN_METHOD_NONE')">ASSIGN_ATTEMPT_REOPEN_METHOD_NONE</a>;
<a name="l644"><span class="linenum"> 644</span></a>          if (!empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('attemptreopenmethod')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/attemptreopenmethod.html">attemptreopenmethod</a>)) {
<a name="l645"><span class="linenum"> 645</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('attemptreopenmethod')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/attemptreopenmethod.html">attemptreopenmethod</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('attemptreopenmethod')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/attemptreopenmethod.html">attemptreopenmethod</a>;
<a name="l646"><span class="linenum"> 646</span></a>          }
<a name="l647"><span class="linenum"> 647</span></a>          if (!empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>)) {
<a name="l648"><span class="linenum"> 648</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>;
<a name="l649"><span class="linenum"> 649</span></a>          }
<a name="l650"><span class="linenum"> 650</span></a>          if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('preventsubmissionnotingroup')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/preventsubmissionnotingroup.html">preventsubmissionnotingroup</a>)) {
<a name="l651"><span class="linenum"> 651</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('preventsubmissionnotingroup')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/preventsubmissionnotingroup.html">preventsubmissionnotingroup</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('preventsubmissionnotingroup')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/preventsubmissionnotingroup.html">preventsubmissionnotingroup</a>;
<a name="l652"><span class="linenum"> 652</span></a>          }
<a name="l653"><span class="linenum"> 653</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('markingworkflow')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/markingworkflow.html">markingworkflow</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('markingworkflow')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/markingworkflow.html">markingworkflow</a>;
<a name="l654"><span class="linenum"> 654</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('markingallocation')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/markingallocation.html">markingallocation</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('markingallocation')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/markingallocation.html">markingallocation</a>;
<a name="l655"><span class="linenum"> 655</span></a>          if (empty(<a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('markingworkflow')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/markingworkflow.html">markingworkflow</a>)) { // If marking workflow is disabled, make sure allocation is disabled.
<a name="l656"><span class="linenum"> 656</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('markingallocation')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/markingallocation.html">markingallocation</a> = 0;
<a name="l657"><span class="linenum"> 657</span></a>          }
<a name="l658"><span class="linenum"> 658</span></a>  
<a name="l659"><span class="linenum"> 659</span></a>          <a class="var it3467" onMouseOver="hilite(3467)" onMouseOut="lolite()" onClick="logVariable('returnid')" href="../../_variables/returnid.html">$returnid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('assign', <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>);
<a name="l660"><span class="linenum"> 660</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assign', array('id'=&gt;<a class="var it3467" onMouseOver="hilite(3467)" onMouseOut="lolite()" onClick="logVariable('returnid')" href="../../_variables/returnid.html">$returnid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l661"><span class="linenum"> 661</span></a>  <span class="comment">        // Cache the course record.</span>
<a name="l662"><span class="linenum"> 662</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/course.html">course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('course')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l663"><span class="linenum"> 663</span></a>  
<a name="l664"><span class="linenum"> 664</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_intro_draft_files')" href="../../_functions/save_intro_draft_files.html" onMouseOver="funcPopup(event,'save_intro_draft_files')">save_intro_draft_files</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>);
<a name="l665"><span class="linenum"> 665</span></a>  
<a name="l666"><span class="linenum"> 666</span></a>          if (<a class="var it32114" onMouseOver="hilite(32114)" onMouseOut="lolite()" onClick="logVariable('callplugins')" href="../../_variables/callplugins.html">$callplugins</a>) {
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment">            // Call save_settings hook for submission plugins.</span>
<a name="l668"><span class="linenum"> 668</span></a>              foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l669"><span class="linenum"> 669</span></a>                  if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_plugin_instance')" href="../../_functions/update_plugin_instance.html" onMouseOver="funcPopup(event,'update_plugin_instance')">update_plugin_instance</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>, <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>)) {
<a name="l670"><span class="linenum"> 670</span></a>                      <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_error')" href="../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>());
<a name="l671"><span class="linenum"> 671</span></a>                      return false;
<a name="l672"><span class="linenum"> 672</span></a>                  }
<a name="l673"><span class="linenum"> 673</span></a>              }
<a name="l674"><span class="linenum"> 674</span></a>              foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l675"><span class="linenum"> 675</span></a>                  if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_plugin_instance')" href="../../_functions/update_plugin_instance.html" onMouseOver="funcPopup(event,'update_plugin_instance')">update_plugin_instance</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>, <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>)) {
<a name="l676"><span class="linenum"> 676</span></a>                      <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_error')" href="../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>());
<a name="l677"><span class="linenum"> 677</span></a>                      return false;
<a name="l678"><span class="linenum"> 678</span></a>                  }
<a name="l679"><span class="linenum"> 679</span></a>              }
<a name="l680"><span class="linenum"> 680</span></a>  
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment">            // In the case of upgrades the coursemodule has not been set,</span>
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment">            // so we need to wait before calling these two.</span>
<a name="l683"><span class="linenum"> 683</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_calendar')" href="../../_functions/update_calendar.html" onMouseOver="funcPopup(event,'update_calendar')">update_calendar</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>);
<a name="l684"><span class="linenum"> 684</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_gradebook')" href="../../_functions/update_gradebook.html" onMouseOver="funcPopup(event,'update_gradebook')">update_gradebook</a>(false, <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>);
<a name="l685"><span class="linenum"> 685</span></a>  
<a name="l686"><span class="linenum"> 686</span></a>          }
<a name="l687"><span class="linenum"> 687</span></a>  
<a name="l688"><span class="linenum"> 688</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a> = new stdClass();
<a name="l689"><span class="linenum"> 689</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('id')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l690"><span class="linenum"> 690</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('nosubmissions')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/nosubmissions.html">nosubmissions</a> = (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>()) ? 1: 0;
<a name="l691"><span class="linenum"> 691</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('assign', <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>);
<a name="l692"><span class="linenum"> 692</span></a>  
<a name="l693"><span class="linenum"> 693</span></a>          return <a class="var it3467" onMouseOver="hilite(3467)" onMouseOut="lolite()" onClick="logVariable('returnid')" href="../../_variables/returnid.html">$returnid</a>;
<a name="l694"><span class="linenum"> 694</span></a>      }
<a name="l695"><span class="linenum"> 695</span></a>  
<a name="l696"><span class="linenum"> 696</span></a>      <span class="comment">/**</span>
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment">     * Delete all grades from the gradebook for this assignment.</span>
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment">     *</span>
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">     * @return bool</span>
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment">     */</span>
<a name="l701"><span class="linenum"> 701</span></a>      protected function <a class="function" onClick="logFunction('delete_grades')" href="../../_functions/delete_grades.html" onMouseOver="funcPopup(event,'delete_grades')">delete_grades</a>() {
<a name="l702"><span class="linenum"> 702</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l703"><span class="linenum"> 703</span></a>  
<a name="l704"><span class="linenum"> 704</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>('mod/assign',
<a name="l705"><span class="linenum"> 705</span></a>                                 <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l706"><span class="linenum"> 706</span></a>                                 'mod',
<a name="l707"><span class="linenum"> 707</span></a>                                 'assign',
<a name="l708"><span class="linenum"> 708</span></a>                                 <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id,
<a name="l709"><span class="linenum"> 709</span></a>                                 0,
<a name="l710"><span class="linenum"> 710</span></a>                                 null,
<a name="l711"><span class="linenum"> 711</span></a>                                 array('deleted'=&gt;1));
<a name="l712"><span class="linenum"> 712</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> == <a class="constant" onClick="logConstant('GRADE_UPDATE_OK')" href="../../_constants/GRADE_UPDATE_OK.html" onMouseOver="constPopup(event,'GRADE_UPDATE_OK')">GRADE_UPDATE_OK</a>;
<a name="l713"><span class="linenum"> 713</span></a>      }
<a name="l714"><span class="linenum"> 714</span></a>  
<a name="l715"><span class="linenum"> 715</span></a>      <span class="comment">/**</span>
<a name="l716"><span class="linenum"> 716</span></a>  <span class="comment">     * Delete this instance from the database.</span>
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment">     *</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment">     * @return bool false if an error occurs</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment">     */</span>
<a name="l720"><span class="linenum"> 720</span></a>      public function <a class="function" onClick="logFunction('delete_instance')" href="../../_functions/delete_instance.html" onMouseOver="funcPopup(event,'delete_instance')">delete_instance</a>() {
<a name="l721"><span class="linenum"> 721</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l722"><span class="linenum"> 722</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = true;
<a name="l723"><span class="linenum"> 723</span></a>  
<a name="l724"><span class="linenum"> 724</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l725"><span class="linenum"> 725</span></a>              if (!<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('delete_instance')" href="../../_functions/delete_instance.html" onMouseOver="funcPopup(event,'delete_instance')">delete_instance</a>()) {
<a name="l726"><span class="linenum"> 726</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_error')" href="../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>());
<a name="l727"><span class="linenum"> 727</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l728"><span class="linenum"> 728</span></a>              }
<a name="l729"><span class="linenum"> 729</span></a>          }
<a name="l730"><span class="linenum"> 730</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l731"><span class="linenum"> 731</span></a>              if (!<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('delete_instance')" href="../../_functions/delete_instance.html" onMouseOver="funcPopup(event,'delete_instance')">delete_instance</a>()) {
<a name="l732"><span class="linenum"> 732</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_error')" href="../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>());
<a name="l733"><span class="linenum"> 733</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l734"><span class="linenum"> 734</span></a>              }
<a name="l735"><span class="linenum"> 735</span></a>          }
<a name="l736"><span class="linenum"> 736</span></a>  
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment">        // Delete files associated with this assignment.</span>
<a name="l738"><span class="linenum"> 738</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l739"><span class="linenum"> 739</span></a>          if (! <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id) ) {
<a name="l740"><span class="linenum"> 740</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l741"><span class="linenum"> 741</span></a>          }
<a name="l742"><span class="linenum"> 742</span></a>  
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment">        // Delete_records will throw an exception if it fails - so no need for error checking here.</span>
<a name="l744"><span class="linenum"> 744</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('assign_submission', array('assignment' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id));
<a name="l745"><span class="linenum"> 745</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('assign_grades', array('assignment' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id));
<a name="l746"><span class="linenum"> 746</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('assign_plugin_config', array('assignment' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id));
<a name="l747"><span class="linenum"> 747</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('assign_user_flags', array('assignment' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id));
<a name="l748"><span class="linenum"> 748</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('assign_user_mapping', array('assignment' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id));
<a name="l749"><span class="linenum"> 749</span></a>  
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">        // Delete items from the gradebook.</span>
<a name="l751"><span class="linenum"> 751</span></a>          if (! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('delete_grades')" href="../../_functions/delete_grades.html" onMouseOver="funcPopup(event,'delete_grades')">delete_grades</a>()) {
<a name="l752"><span class="linenum"> 752</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l753"><span class="linenum"> 753</span></a>          }
<a name="l754"><span class="linenum"> 754</span></a>  
<a name="l755"><span class="linenum"> 755</span></a>  <span class="comment">        // Delete the instance.</span>
<a name="l756"><span class="linenum"> 756</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('assign', array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id));
<a name="l757"><span class="linenum"> 757</span></a>  
<a name="l758"><span class="linenum"> 758</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l759"><span class="linenum"> 759</span></a>      }
<a name="l760"><span class="linenum"> 760</span></a>  
<a name="l761"><span class="linenum"> 761</span></a>      <span class="comment">/**</span>
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment">     * Actual implementation of the reset course functionality, delete all the</span>
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment">     * assignment submissions for course $data-&gt;courseid.</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment">     *</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment">     * @param stdClass $data the data submitted from the reset course.</span>
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment">     * @return array status array</span>
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment">     */</span>
<a name="l768"><span class="linenum"> 768</span></a>      public function <a class="function" onClick="logFunction('reset_userdata')" href="../../_functions/reset_userdata.html" onMouseOver="funcPopup(event,'reset_userdata')">reset_userdata</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l769"><span class="linenum"> 769</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l770"><span class="linenum"> 770</span></a>  
<a name="l771"><span class="linenum"> 771</span></a>          <a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'assign');
<a name="l772"><span class="linenum"> 772</span></a>          <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = array();
<a name="l773"><span class="linenum"> 773</span></a>  
<a name="l774"><span class="linenum"> 774</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l775"><span class="linenum"> 775</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_assign_submissions')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_assign_submissions.html">reset_assign_submissions</a>)) {
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment">            // Delete files associated with this assignment.</span>
<a name="l777"><span class="linenum"> 777</span></a>              foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l778"><span class="linenum"> 778</span></a>                  <a class="var it9842" onMouseOver="hilite(9842)" onMouseOut="lolite()" onClick="logVariable('fileareas')" href="../../_variables/fileareas.html">$fileareas</a> = array();
<a name="l779"><span class="linenum"> 779</span></a>                  <a class="var it25235" onMouseOver="hilite(25235)" onMouseOut="lolite()" onClick="logVariable('plugincomponent')" href="../../_variables/plugincomponent.html">$plugincomponent</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_subtype')" href="../../_functions/get_subtype.html" onMouseOver="funcPopup(event,'get_subtype')">get_subtype</a>() . '_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>();
<a name="l780"><span class="linenum"> 780</span></a>                  <a class="var it9842" onMouseOver="hilite(9842)" onMouseOut="lolite()" onClick="logVariable('fileareas')" href="../../_variables/fileareas.html">$fileareas</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_file_areas')" href="../../_functions/get_file_areas.html" onMouseOver="funcPopup(event,'get_file_areas')">get_file_areas</a>();
<a name="l781"><span class="linenum"> 781</span></a>                  foreach (<a class="var it9842" onMouseOver="hilite(9842)" onMouseOut="lolite()" onClick="logVariable('fileareas')" href="../../_variables/fileareas.html">$fileareas</a> as <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> =&gt; <a class="var it2687" onMouseOver="hilite(2687)" onMouseOut="lolite()" onClick="logVariable('notused')" href="../../_variables/notused.html">$notused</a>) {
<a name="l782"><span class="linenum"> 782</span></a>                      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id, <a class="var it25235" onMouseOver="hilite(25235)" onMouseOut="lolite()" onClick="logVariable('plugincomponent')" href="../../_variables/plugincomponent.html">$plugincomponent</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>);
<a name="l783"><span class="linenum"> 783</span></a>                  }
<a name="l784"><span class="linenum"> 784</span></a>  
<a name="l785"><span class="linenum"> 785</span></a>                  if (!<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('delete_instance')" href="../../_functions/delete_instance.html" onMouseOver="funcPopup(event,'delete_instance')">delete_instance</a>()) {
<a name="l786"><span class="linenum"> 786</span></a>                      <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>,
<a name="l787"><span class="linenum"> 787</span></a>                                        'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallsubmissions', 'assign'),
<a name="l788"><span class="linenum"> 788</span></a>                                        'error'=&gt;<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_error')" href="../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>());
<a name="l789"><span class="linenum"> 789</span></a>                  }
<a name="l790"><span class="linenum"> 790</span></a>              }
<a name="l791"><span class="linenum"> 791</span></a>  
<a name="l792"><span class="linenum"> 792</span></a>              foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l793"><span class="linenum"> 793</span></a>                  <a class="var it9842" onMouseOver="hilite(9842)" onMouseOut="lolite()" onClick="logVariable('fileareas')" href="../../_variables/fileareas.html">$fileareas</a> = array();
<a name="l794"><span class="linenum"> 794</span></a>                  <a class="var it25235" onMouseOver="hilite(25235)" onMouseOut="lolite()" onClick="logVariable('plugincomponent')" href="../../_variables/plugincomponent.html">$plugincomponent</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_subtype')" href="../../_functions/get_subtype.html" onMouseOver="funcPopup(event,'get_subtype')">get_subtype</a>() . '_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>();
<a name="l795"><span class="linenum"> 795</span></a>                  <a class="var it9842" onMouseOver="hilite(9842)" onMouseOut="lolite()" onClick="logVariable('fileareas')" href="../../_variables/fileareas.html">$fileareas</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_file_areas')" href="../../_functions/get_file_areas.html" onMouseOver="funcPopup(event,'get_file_areas')">get_file_areas</a>();
<a name="l796"><span class="linenum"> 796</span></a>                  foreach (<a class="var it9842" onMouseOver="hilite(9842)" onMouseOut="lolite()" onClick="logVariable('fileareas')" href="../../_variables/fileareas.html">$fileareas</a> as <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> =&gt; <a class="var it2687" onMouseOver="hilite(2687)" onMouseOut="lolite()" onClick="logVariable('notused')" href="../../_variables/notused.html">$notused</a>) {
<a name="l797"><span class="linenum"> 797</span></a>                      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id, <a class="var it25235" onMouseOver="hilite(25235)" onMouseOut="lolite()" onClick="logVariable('plugincomponent')" href="../../_variables/plugincomponent.html">$plugincomponent</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>);
<a name="l798"><span class="linenum"> 798</span></a>                  }
<a name="l799"><span class="linenum"> 799</span></a>  
<a name="l800"><span class="linenum"> 800</span></a>                  if (!<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('delete_instance')" href="../../_functions/delete_instance.html" onMouseOver="funcPopup(event,'delete_instance')">delete_instance</a>()) {
<a name="l801"><span class="linenum"> 801</span></a>                      <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>,
<a name="l802"><span class="linenum"> 802</span></a>                                        'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallsubmissions', 'assign'),
<a name="l803"><span class="linenum"> 803</span></a>                                        'error'=&gt;<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_error')" href="../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>());
<a name="l804"><span class="linenum"> 804</span></a>                  }
<a name="l805"><span class="linenum"> 805</span></a>              }
<a name="l806"><span class="linenum"> 806</span></a>  
<a name="l807"><span class="linenum"> 807</span></a>              <a class="var it32116" onMouseOver="hilite(32116)" onMouseOut="lolite()" onClick="logVariable('assignids')" href="../../_variables/assignids.html">$assignids</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('assign', array('course' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>), '', 'id');
<a name="l808"><span class="linenum"> 808</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it32116" onMouseOver="hilite(32116)" onMouseOut="lolite()" onClick="logVariable('assignids')" href="../../_variables/assignids.html">$assignids</a>));
<a name="l809"><span class="linenum"> 809</span></a>  
<a name="l810"><span class="linenum"> 810</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('assign_submission', &quot;assignment <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l811"><span class="linenum"> 811</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('assign_user_flags', &quot;assignment <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l812"><span class="linenum"> 812</span></a>  
<a name="l813"><span class="linenum"> 813</span></a>              <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>,
<a name="l814"><span class="linenum"> 814</span></a>                                'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallsubmissions', 'assign'),
<a name="l815"><span class="linenum"> 815</span></a>                                'error'=&gt;false);
<a name="l816"><span class="linenum"> 816</span></a>  
<a name="l817"><span class="linenum"> 817</span></a>              if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_gradebook_grades')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_gradebook_grades.html">reset_gradebook_grades</a>)) {
<a name="l818"><span class="linenum"> 818</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('assign_grades', &quot;assignment <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l819"><span class="linenum"> 819</span></a>  <span class="comment">                // Remove all grades from gradebook.</span>
<a name="l820"><span class="linenum"> 820</span></a>                  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../mod/assign/lib.php.html">/mod/assign/lib.php</a>');
<a name="l821"><span class="linenum"> 821</span></a>                  <a class="function" onClick="logFunction('assign_reset_gradebook')" href="../../_functions/assign_reset_gradebook.html" onMouseOver="funcPopup(event,'assign_reset_gradebook')">assign_reset_gradebook</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>);
<a name="l822"><span class="linenum"> 822</span></a>  
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment">                // Reset revealidentities if both submissions and grades have been reset.</span>
<a name="l824"><span class="linenum"> 824</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;blindmarking &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;revealidentities) {
<a name="l825"><span class="linenum"> 825</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('assign', 'revealidentities', 0, array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id));
<a name="l826"><span class="linenum"> 826</span></a>                  }
<a name="l827"><span class="linenum"> 827</span></a>              }
<a name="l828"><span class="linenum"> 828</span></a>          }
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment">        // Updating dates - shift may be negative too.</span>
<a name="l830"><span class="linenum"> 830</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeshift')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/timeshift.html">timeshift</a>) {
<a name="l831"><span class="linenum"> 831</span></a>              <a class="function" onClick="logFunction('shift_course_mod_dates')" href="../../_functions/shift_course_mod_dates.html" onMouseOver="funcPopup(event,'shift_course_mod_dates')">shift_course_mod_dates</a>('assign',
<a name="l832"><span class="linenum"> 832</span></a>                                      array('duedate', 'allowsubmissionsfromdate', 'cutoffdate'),
<a name="l833"><span class="linenum"> 833</span></a>                                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeshift')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/timeshift.html">timeshift</a>,
<a name="l834"><span class="linenum"> 834</span></a>                                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id);
<a name="l835"><span class="linenum"> 835</span></a>              <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>,
<a name="l836"><span class="linenum"> 836</span></a>                                'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('datechanged'),
<a name="l837"><span class="linenum"> 837</span></a>                                'error'=&gt;false);
<a name="l838"><span class="linenum"> 838</span></a>          }
<a name="l839"><span class="linenum"> 839</span></a>  
<a name="l840"><span class="linenum"> 840</span></a>          return <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>;
<a name="l841"><span class="linenum"> 841</span></a>      }
<a name="l842"><span class="linenum"> 842</span></a>  
<a name="l843"><span class="linenum"> 843</span></a>      <span class="comment">/**</span>
<a name="l844"><span class="linenum"> 844</span></a>  <span class="comment">     * Update the settings for a single plugin.</span>
<a name="l845"><span class="linenum"> 845</span></a>  <span class="comment">     *</span>
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment">     * @param assign_plugin $plugin The plugin to update</span>
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment">     * @param stdClass $formdata The form data</span>
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment">     * @return bool false if an error occurs</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment">     */</span>
<a name="l850"><span class="linenum"> 850</span></a>      protected function <a class="function" onClick="logFunction('update_plugin_instance')" href="../../_functions/update_plugin_instance.html" onMouseOver="funcPopup(event,'update_plugin_instance')">update_plugin_instance</a>(assign_plugin <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>, stdClass <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>) {
<a name="l851"><span class="linenum"> 851</span></a>          if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l852"><span class="linenum"> 852</span></a>              <a class="var it11361" onMouseOver="hilite(11361)" onMouseOut="lolite()" onClick="logVariable('enabledname')" href="../../_variables/enabledname.html">$enabledname</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_subtype')" href="../../_functions/get_subtype.html" onMouseOver="funcPopup(event,'get_subtype')">get_subtype</a>() . '_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>() . '_enabled';
<a name="l853"><span class="linenum"> 853</span></a>              if (!empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a class="var it11361" onMouseOver="hilite(11361)" onMouseOut="lolite()" onClick="logVariable('enabledname')" href="../../_variables/enabledname.html">$enabledname</a>)) {
<a name="l854"><span class="linenum"> 854</span></a>                  <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('enable')" href="../../_functions/enable.html" onMouseOver="funcPopup(event,'enable')">enable</a>();
<a name="l855"><span class="linenum"> 855</span></a>                  if (!<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('save_settings')" href="../../_functions/save_settings.html" onMouseOver="funcPopup(event,'save_settings')">save_settings</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>)) {
<a name="l856"><span class="linenum"> 856</span></a>                      <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_error')" href="../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>());
<a name="l857"><span class="linenum"> 857</span></a>                      return false;
<a name="l858"><span class="linenum"> 858</span></a>                  }
<a name="l859"><span class="linenum"> 859</span></a>              } else {
<a name="l860"><span class="linenum"> 860</span></a>                  <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('disable')" href="../../_functions/disable.html" onMouseOver="funcPopup(event,'disable')">disable</a>();
<a name="l861"><span class="linenum"> 861</span></a>              }
<a name="l862"><span class="linenum"> 862</span></a>          }
<a name="l863"><span class="linenum"> 863</span></a>          return true;
<a name="l864"><span class="linenum"> 864</span></a>      }
<a name="l865"><span class="linenum"> 865</span></a>  
<a name="l866"><span class="linenum"> 866</span></a>      <span class="comment">/**</span>
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment">     * Update the gradebook information for this assignment.</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment">     *</span>
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment">     * @param bool $reset If true, will reset all grades in the gradbook for this assignment</span>
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment">     * @param int $coursemoduleid This is required because it might not exist in the database yet</span>
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment">     * @return bool</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">     */</span>
<a name="l873"><span class="linenum"> 873</span></a>      public function <a class="function" onClick="logFunction('update_gradebook')" href="../../_functions/update_gradebook.html" onMouseOver="funcPopup(event,'update_gradebook')">update_gradebook</a>(<a class="var it2084" onMouseOver="hilite(2084)" onMouseOut="lolite()" onClick="logVariable('reset')" href="../../_variables/reset.html">$reset</a>, <a class="var it15374" onMouseOver="hilite(15374)" onMouseOut="lolite()" onClick="logVariable('coursemoduleid')" href="../../_variables/coursemoduleid.html">$coursemoduleid</a>) {
<a name="l874"><span class="linenum"> 874</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l875"><span class="linenum"> 875</span></a>  
<a name="l876"><span class="linenum"> 876</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../mod/assign/lib.php.html">/mod/assign/lib.php</a>');
<a name="l877"><span class="linenum"> 877</span></a>          <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../../_variables/assign.html">$assign</a> = clone <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l878"><span class="linenum"> 878</span></a>          <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../../_variables/assign.html">$assign</a>-&gt;<a onClick="logVariable('cmidnumber')" class="var it43084" onMouseOver="hilite(43084)" onMouseOut="lolite()" href="../../_variables/cmidnumber.html">cmidnumber</a> = <a class="var it15374" onMouseOver="hilite(15374)" onMouseOut="lolite()" onClick="logVariable('coursemoduleid')" href="../../_variables/coursemoduleid.html">$coursemoduleid</a>;
<a name="l879"><span class="linenum"> 879</span></a>  
<a name="l880"><span class="linenum"> 880</span></a>  <span class="comment">        // Set assign gradebook feedback plugin status (enabled and visible).</span>
<a name="l881"><span class="linenum"> 881</span></a>          <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../../_variables/assign.html">$assign</a>-&gt;<a onClick="logVariable('gradefeedbackenabled')" class="var it43084" onMouseOver="hilite(43084)" onMouseOut="lolite()" href="../../_variables/gradefeedbackenabled.html">gradefeedbackenabled</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_gradebook_feedback_enabled')" href="../../_functions/is_gradebook_feedback_enabled.html" onMouseOver="funcPopup(event,'is_gradebook_feedback_enabled')">is_gradebook_feedback_enabled</a>();
<a name="l882"><span class="linenum"> 882</span></a>  
<a name="l883"><span class="linenum"> 883</span></a>          <a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a> = null;
<a name="l884"><span class="linenum"> 884</span></a>          if (<a class="var it2084" onMouseOver="hilite(2084)" onMouseOut="lolite()" onClick="logVariable('reset')" href="../../_variables/reset.html">$reset</a>) {
<a name="l885"><span class="linenum"> 885</span></a>              <a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a> = 'reset';
<a name="l886"><span class="linenum"> 886</span></a>          }
<a name="l887"><span class="linenum"> 887</span></a>  
<a name="l888"><span class="linenum"> 888</span></a>          return <a class="function" onClick="logFunction('assign_grade_item_update')" href="../../_functions/assign_grade_item_update.html" onMouseOver="funcPopup(event,'assign_grade_item_update')">assign_grade_item_update</a>(<a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../../_variables/assign.html">$assign</a>, <a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>);
<a name="l889"><span class="linenum"> 889</span></a>      }
<a name="l890"><span class="linenum"> 890</span></a>  
<a name="l891"><span class="linenum"> 891</span></a>      <span class="comment">/**</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment">     * Get the marking table page size</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment">     *</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment">     * @return integer</span>
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment">     */</span>
<a name="l896"><span class="linenum"> 896</span></a>      public function <a class="function" onClick="logFunction('get_assign_perpage')" href="../../_functions/get_assign_perpage.html" onMouseOver="funcPopup(event,'get_assign_perpage')">get_assign_perpage</a>() {
<a name="l897"><span class="linenum"> 897</span></a>          <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a> = (int) <a class="function" onClick="logFunction('get_user_preferences')" href="../../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('assign_perpage', 10);
<a name="l898"><span class="linenum"> 898</span></a>          <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>();
<a name="l899"><span class="linenum"> 899</span></a>          <a class="var it21977" onMouseOver="hilite(21977)" onMouseOut="lolite()" onClick="logVariable('maxperpage')" href="../../_variables/maxperpage.html">$maxperpage</a> = -1;
<a name="l900"><span class="linenum"> 900</span></a>          if (isset(<a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('maxperpage')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/maxperpage.html">maxperpage</a>)) {
<a name="l901"><span class="linenum"> 901</span></a>              <a class="var it21977" onMouseOver="hilite(21977)" onMouseOut="lolite()" onClick="logVariable('maxperpage')" href="../../_variables/maxperpage.html">$maxperpage</a> = <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('maxperpage')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/maxperpage.html">maxperpage</a>;
<a name="l902"><span class="linenum"> 902</span></a>          }
<a name="l903"><span class="linenum"> 903</span></a>          if (isset(<a class="var it21977" onMouseOver="hilite(21977)" onMouseOut="lolite()" onClick="logVariable('maxperpage')" href="../../_variables/maxperpage.html">$maxperpage</a>) &amp;&amp;
<a name="l904"><span class="linenum"> 904</span></a>              <a class="var it21977" onMouseOver="hilite(21977)" onMouseOut="lolite()" onClick="logVariable('maxperpage')" href="../../_variables/maxperpage.html">$maxperpage</a> != -1 &amp;&amp;
<a name="l905"><span class="linenum"> 905</span></a>              (<a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a> == -1 || <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a> &gt; <a class="var it21977" onMouseOver="hilite(21977)" onMouseOut="lolite()" onClick="logVariable('maxperpage')" href="../../_variables/maxperpage.html">$maxperpage</a>)) {
<a name="l906"><span class="linenum"> 906</span></a>              <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a> = <a class="var it21977" onMouseOver="hilite(21977)" onMouseOut="lolite()" onClick="logVariable('maxperpage')" href="../../_variables/maxperpage.html">$maxperpage</a>;
<a name="l907"><span class="linenum"> 907</span></a>          }
<a name="l908"><span class="linenum"> 908</span></a>          return <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>;
<a name="l909"><span class="linenum"> 909</span></a>      }
<a name="l910"><span class="linenum"> 910</span></a>  
<a name="l911"><span class="linenum"> 911</span></a>      <span class="comment">/**</span>
<a name="l912"><span class="linenum"> 912</span></a>  <span class="comment">     * Load and cache the admin config for this module.</span>
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment">     *</span>
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment">     * @return stdClass the plugin config</span>
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">     */</span>
<a name="l916"><span class="linenum"> 916</span></a>      public function <a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>() {
<a name="l917"><span class="linenum"> 917</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('adminconfig')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/adminconfig.html">adminconfig</a>) {
<a name="l918"><span class="linenum"> 918</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('adminconfig')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/adminconfig.html">adminconfig</a>;
<a name="l919"><span class="linenum"> 919</span></a>          }
<a name="l920"><span class="linenum"> 920</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('adminconfig')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/adminconfig.html">adminconfig</a> = <a class="function" onClick="logFunction('get_config')" href="../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('assign');
<a name="l921"><span class="linenum"> 921</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('adminconfig')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/adminconfig.html">adminconfig</a>;
<a name="l922"><span class="linenum"> 922</span></a>      }
<a name="l923"><span class="linenum"> 923</span></a>  
<a name="l924"><span class="linenum"> 924</span></a>      <span class="comment">/**</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment">     * Update the calendar entries for this assignment.</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment">     *</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment">     * @param int $coursemoduleid - Required to pass this in because it might</span>
<a name="l928"><span class="linenum"> 928</span></a>  <span class="comment">     *                              not exist in the database yet.</span>
<a name="l929"><span class="linenum"> 929</span></a>  <span class="comment">     * @return bool</span>
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment">     */</span>
<a name="l931"><span class="linenum"> 931</span></a>      public function <a class="function" onClick="logFunction('update_calendar')" href="../../_functions/update_calendar.html" onMouseOver="funcPopup(event,'update_calendar')">update_calendar</a>(<a class="var it15374" onMouseOver="hilite(15374)" onMouseOut="lolite()" onClick="logVariable('coursemoduleid')" href="../../_variables/coursemoduleid.html">$coursemoduleid</a>) {
<a name="l932"><span class="linenum"> 932</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l933"><span class="linenum"> 933</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../calendar/lib.php.html">/calendar/lib.php</a>');
<a name="l934"><span class="linenum"> 934</span></a>  
<a name="l935"><span class="linenum"> 935</span></a>  <span class="comment">        // Special case for add_instance as the coursemodule has not been set yet.</span>
<a name="l936"><span class="linenum"> 936</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l937"><span class="linenum"> 937</span></a>  
<a name="l938"><span class="linenum"> 938</span></a>          <a class="var it5771" onMouseOver="hilite(5771)" onMouseOut="lolite()" onClick="logVariable('eventtype')" href="../../_variables/eventtype.html">$eventtype</a> = 'due';
<a name="l939"><span class="linenum"> 939</span></a>  
<a name="l940"><span class="linenum"> 940</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('duedate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/duedate.html">duedate</a>) {
<a name="l941"><span class="linenum"> 941</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = new stdClass();
<a name="l942"><span class="linenum"> 942</span></a>  
<a name="l943"><span class="linenum"> 943</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('modulename' =&gt; 'assign', 'instance' =&gt; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'eventtype' =&gt; <a class="var it5771" onMouseOver="hilite(5771)" onMouseOut="lolite()" onClick="logVariable('eventtype')" href="../../_variables/eventtype.html">$eventtype</a>);
<a name="l944"><span class="linenum"> 944</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('event', 'id', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l945"><span class="linenum"> 945</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('name')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l946"><span class="linenum"> 946</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/timestart.html">timestart</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('duedate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/duedate.html">duedate</a>;
<a name="l947"><span class="linenum"> 947</span></a>  
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment">            // Convert the links to pluginfile. It is a bit hacky but at this stage the files</span>
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment">            // might not have been saved in the module area yet.</span>
<a name="l950"><span class="linenum"> 950</span></a>              <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('intro')" href="../../_variables/intro.html">$intro</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('intro')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a>;
<a name="l951"><span class="linenum"> 951</span></a>              if (<a class="var it2102" onMouseOver="hilite(2102)" onMouseOut="lolite()" onClick="logVariable('draftid')" href="../../_variables/draftid.html">$draftid</a> = <a class="function" onClick="logFunction('file_get_submitted_draft_itemid')" href="../../_functions/file_get_submitted_draft_itemid.html" onMouseOver="funcPopup(event,'file_get_submitted_draft_itemid')">file_get_submitted_draft_itemid</a>('introeditor')) {
<a name="l952"><span class="linenum"> 952</span></a>                  <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('intro')" href="../../_variables/intro.html">$intro</a> = <a class="function" onClick="logFunction('file_rewrite_urls_to_pluginfile')" href="../../_functions/file_rewrite_urls_to_pluginfile.html" onMouseOver="funcPopup(event,'file_rewrite_urls_to_pluginfile')">file_rewrite_urls_to_pluginfile</a>(<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('intro')" href="../../_variables/intro.html">$intro</a>, <a class="var it2102" onMouseOver="hilite(2102)" onMouseOut="lolite()" onClick="logVariable('draftid')" href="../../_variables/draftid.html">$draftid</a>);
<a name="l953"><span class="linenum"> 953</span></a>              }
<a name="l954"><span class="linenum"> 954</span></a>  
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment">            // We need to remove the links to files as the calendar is not ready</span>
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment">            // to support module events with file areas.</span>
<a name="l957"><span class="linenum"> 957</span></a>              <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('intro')" href="../../_variables/intro.html">$intro</a> = <a class="function" onClick="logFunction('strip_pluginfile_content')" href="../../_functions/strip_pluginfile_content.html" onMouseOver="funcPopup(event,'strip_pluginfile_content')">strip_pluginfile_content</a>(<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('intro')" href="../../_variables/intro.html">$intro</a>);
<a name="l958"><span class="linenum"> 958</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_intro')" href="../../_functions/show_intro.html" onMouseOver="funcPopup(event,'show_intro')">show_intro</a>()) {
<a name="l959"><span class="linenum"> 959</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('description')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/description.html">description</a> = array(
<a name="l960"><span class="linenum"> 960</span></a>                      'text' =&gt; <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('intro')" href="../../_variables/intro.html">$intro</a>,
<a name="l961"><span class="linenum"> 961</span></a>                      'format' =&gt; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;introformat
<a name="l962"><span class="linenum"> 962</span></a>                  );
<a name="l963"><span class="linenum"> 963</span></a>              } else {
<a name="l964"><span class="linenum"> 964</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('description')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/description.html">description</a> = array(
<a name="l965"><span class="linenum"> 965</span></a>                      'text' =&gt; '',
<a name="l966"><span class="linenum"> 966</span></a>                      'format' =&gt; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;introformat
<a name="l967"><span class="linenum"> 967</span></a>                  );
<a name="l968"><span class="linenum"> 968</span></a>              }
<a name="l969"><span class="linenum"> 969</span></a>  
<a name="l970"><span class="linenum"> 970</span></a>              if (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l971"><span class="linenum"> 971</span></a>                  <a class="var it12895" onMouseOver="hilite(12895)" onMouseOut="lolite()" onClick="logVariable('calendarevent')" href="../../_variables/calendarevent.html">$calendarevent</a> = <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l972"><span class="linenum"> 972</span></a>                  <a class="var it12895" onMouseOver="hilite(12895)" onMouseOut="lolite()" onClick="logVariable('calendarevent')" href="../../_variables/calendarevent.html">$calendarevent</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l973"><span class="linenum"> 973</span></a>              } else {
<a name="l974"><span class="linenum"> 974</span></a>                  unset(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l975"><span class="linenum"> 975</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>    = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('course')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>;
<a name="l976"><span class="linenum"> 976</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>     = 0;
<a name="l977"><span class="linenum"> 977</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('userid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>      = 0;
<a name="l978"><span class="linenum"> 978</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/modulename.html">modulename</a>  = 'assign';
<a name="l979"><span class="linenum"> 979</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('instance')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>    = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l980"><span class="linenum"> 980</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('eventtype')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/eventtype.html">eventtype</a>   = <a class="var it5771" onMouseOver="hilite(5771)" onMouseOut="lolite()" onClick="logVariable('eventtype')" href="../../_variables/eventtype.html">$eventtype</a>;
<a name="l981"><span class="linenum"> 981</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../../_variables/timeduration.html">timeduration</a> = 0;
<a name="l982"><span class="linenum"> 982</span></a>                  <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l983"><span class="linenum"> 983</span></a>              }
<a name="l984"><span class="linenum"> 984</span></a>          } else {
<a name="l985"><span class="linenum"> 985</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('event', array('modulename' =&gt; 'assign', 'instance' =&gt; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'eventtype' =&gt; <a class="var it5771" onMouseOver="hilite(5771)" onMouseOut="lolite()" onClick="logVariable('eventtype')" href="../../_variables/eventtype.html">$eventtype</a>));
<a name="l986"><span class="linenum"> 986</span></a>          }
<a name="l987"><span class="linenum"> 987</span></a>      }
<a name="l988"><span class="linenum"> 988</span></a>  
<a name="l989"><span class="linenum"> 989</span></a>  
<a name="l990"><span class="linenum"> 990</span></a>      <span class="comment">/**</span>
<a name="l991"><span class="linenum"> 991</span></a>  <span class="comment">     * Update this instance in the database.</span>
<a name="l992"><span class="linenum"> 992</span></a>  <span class="comment">     *</span>
<a name="l993"><span class="linenum"> 993</span></a>  <span class="comment">     * @param stdClass $formdata - the data submitted from the form</span>
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment">     * @return bool false if an error occurs</span>
<a name="l995"><span class="linenum"> 995</span></a>  <span class="comment">     */</span>
<a name="l996"><span class="linenum"> 996</span></a>      public function <a class="function" onClick="logFunction('update_instance')" href="../../_functions/update_instance.html" onMouseOver="funcPopup(event,'update_instance')">update_instance</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>) {
<a name="l997"><span class="linenum"> 997</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l998"><span class="linenum"> 998</span></a>          <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>();
<a name="l999"><span class="linenum"> 999</span></a>  
<a name="l1000"><span class="linenum">1000</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a> = new stdClass();
<a name="l1001"><span class="linenum">1001</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('id')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('instance')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l1002"><span class="linenum">1002</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('name')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('name')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l1003"><span class="linenum">1003</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1004"><span class="linenum">1004</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('course')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/course.html">course</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('course')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>;
<a name="l1005"><span class="linenum">1005</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('intro')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('intro')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a>;
<a name="l1006"><span class="linenum">1006</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('introformat')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/introformat.html">introformat</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('introformat')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/introformat.html">introformat</a>;
<a name="l1007"><span class="linenum">1007</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('alwaysshowdescription')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/alwaysshowdescription.html">alwaysshowdescription</a> = !empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('alwaysshowdescription')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/alwaysshowdescription.html">alwaysshowdescription</a>);
<a name="l1008"><span class="linenum">1008</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('submissiondrafts')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/submissiondrafts.html">submissiondrafts</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('submissiondrafts')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/submissiondrafts.html">submissiondrafts</a>;
<a name="l1009"><span class="linenum">1009</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('requiresubmissionstatement')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/requiresubmissionstatement.html">requiresubmissionstatement</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('requiresubmissionstatement')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/requiresubmissionstatement.html">requiresubmissionstatement</a>;
<a name="l1010"><span class="linenum">1010</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('sendnotifications')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/sendnotifications.html">sendnotifications</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('sendnotifications')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/sendnotifications.html">sendnotifications</a>;
<a name="l1011"><span class="linenum">1011</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('sendlatenotifications')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/sendlatenotifications.html">sendlatenotifications</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('sendlatenotifications')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/sendlatenotifications.html">sendlatenotifications</a>;
<a name="l1012"><span class="linenum">1012</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('sendstudentnotifications')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/sendstudentnotifications.html">sendstudentnotifications</a> = <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('sendstudentnotifications')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/sendstudentnotifications.html">sendstudentnotifications</a>;
<a name="l1013"><span class="linenum">1013</span></a>          if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('sendstudentnotifications')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/sendstudentnotifications.html">sendstudentnotifications</a>)) {
<a name="l1014"><span class="linenum">1014</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('sendstudentnotifications')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/sendstudentnotifications.html">sendstudentnotifications</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('sendstudentnotifications')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/sendstudentnotifications.html">sendstudentnotifications</a>;
<a name="l1015"><span class="linenum">1015</span></a>          }
<a name="l1016"><span class="linenum">1016</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('duedate')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/duedate.html">duedate</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('duedate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/duedate.html">duedate</a>;
<a name="l1017"><span class="linenum">1017</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('cutoffdate')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/cutoffdate.html">cutoffdate</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('cutoffdate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/cutoffdate.html">cutoffdate</a>;
<a name="l1018"><span class="linenum">1018</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('allowsubmissionsfromdate')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/allowsubmissionsfromdate.html">allowsubmissionsfromdate</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('allowsubmissionsfromdate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/allowsubmissionsfromdate.html">allowsubmissionsfromdate</a>;
<a name="l1019"><span class="linenum">1019</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('grade')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('grade')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>;
<a name="l1020"><span class="linenum">1020</span></a>          if (!empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('completionunlocked')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/completionunlocked.html">completionunlocked</a>)) {
<a name="l1021"><span class="linenum">1021</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('completionsubmit')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/completionsubmit.html">completionsubmit</a> = !empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('completionsubmit')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/completionsubmit.html">completionsubmit</a>);
<a name="l1022"><span class="linenum">1022</span></a>          }
<a name="l1023"><span class="linenum">1023</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>;
<a name="l1024"><span class="linenum">1024</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('requireallteammemberssubmit')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/requireallteammemberssubmit.html">requireallteammemberssubmit</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('requireallteammemberssubmit')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/requireallteammemberssubmit.html">requireallteammemberssubmit</a>;
<a name="l1025"><span class="linenum">1025</span></a>          if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('teamsubmissiongroupingid')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/teamsubmissiongroupingid.html">teamsubmissiongroupingid</a>)) {
<a name="l1026"><span class="linenum">1026</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('teamsubmissiongroupingid')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/teamsubmissiongroupingid.html">teamsubmissiongroupingid</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('teamsubmissiongroupingid')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/teamsubmissiongroupingid.html">teamsubmissiongroupingid</a>;
<a name="l1027"><span class="linenum">1027</span></a>          }
<a name="l1028"><span class="linenum">1028</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('blindmarking')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/blindmarking.html">blindmarking</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('blindmarking')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/blindmarking.html">blindmarking</a>;
<a name="l1029"><span class="linenum">1029</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('attemptreopenmethod')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/attemptreopenmethod.html">attemptreopenmethod</a> = <a class="constant" onClick="logConstant('ASSIGN_ATTEMPT_REOPEN_METHOD_NONE')" href="../../_constants/ASSIGN_ATTEMPT_REOPEN_METHOD_NONE.html" onMouseOver="constPopup(event,'ASSIGN_ATTEMPT_REOPEN_METHOD_NONE')">ASSIGN_ATTEMPT_REOPEN_METHOD_NONE</a>;
<a name="l1030"><span class="linenum">1030</span></a>          if (!empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('attemptreopenmethod')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/attemptreopenmethod.html">attemptreopenmethod</a>)) {
<a name="l1031"><span class="linenum">1031</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('attemptreopenmethod')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/attemptreopenmethod.html">attemptreopenmethod</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('attemptreopenmethod')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/attemptreopenmethod.html">attemptreopenmethod</a>;
<a name="l1032"><span class="linenum">1032</span></a>          }
<a name="l1033"><span class="linenum">1033</span></a>          if (!empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>)) {
<a name="l1034"><span class="linenum">1034</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>;
<a name="l1035"><span class="linenum">1035</span></a>          }
<a name="l1036"><span class="linenum">1036</span></a>          if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('preventsubmissionnotingroup')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/preventsubmissionnotingroup.html">preventsubmissionnotingroup</a>)) {
<a name="l1037"><span class="linenum">1037</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('preventsubmissionnotingroup')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/preventsubmissionnotingroup.html">preventsubmissionnotingroup</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('preventsubmissionnotingroup')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/preventsubmissionnotingroup.html">preventsubmissionnotingroup</a>;
<a name="l1038"><span class="linenum">1038</span></a>          }
<a name="l1039"><span class="linenum">1039</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('markingworkflow')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/markingworkflow.html">markingworkflow</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('markingworkflow')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/markingworkflow.html">markingworkflow</a>;
<a name="l1040"><span class="linenum">1040</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('markingallocation')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/markingallocation.html">markingallocation</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('markingallocation')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/markingallocation.html">markingallocation</a>;
<a name="l1041"><span class="linenum">1041</span></a>          if (empty(<a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('markingworkflow')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/markingworkflow.html">markingworkflow</a>)) { // If marking workflow is disabled, make sure allocation is disabled.
<a name="l1042"><span class="linenum">1042</span></a>              <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('markingallocation')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/markingallocation.html">markingallocation</a> = 0;
<a name="l1043"><span class="linenum">1043</span></a>          }
<a name="l1044"><span class="linenum">1044</span></a>  
<a name="l1045"><span class="linenum">1045</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('assign', <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>);
<a name="l1046"><span class="linenum">1046</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assign', array('id'=&gt;<a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('id')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1047"><span class="linenum">1047</span></a>  
<a name="l1048"><span class="linenum">1048</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_intro_draft_files')" href="../../_functions/save_intro_draft_files.html" onMouseOver="funcPopup(event,'save_intro_draft_files')">save_intro_draft_files</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>);
<a name="l1049"><span class="linenum">1049</span></a>  
<a name="l1050"><span class="linenum">1050</span></a>  <span class="comment">        // Load the assignment so the plugins have access to it.</span>
<a name="l1051"><span class="linenum">1051</span></a>  
<a name="l1052"><span class="linenum">1052</span></a>  <span class="comment">        // Call save_settings hook for submission plugins.</span>
<a name="l1053"><span class="linenum">1053</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l1054"><span class="linenum">1054</span></a>              if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_plugin_instance')" href="../../_functions/update_plugin_instance.html" onMouseOver="funcPopup(event,'update_plugin_instance')">update_plugin_instance</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>, <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>)) {
<a name="l1055"><span class="linenum">1055</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_error')" href="../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>());
<a name="l1056"><span class="linenum">1056</span></a>                  return false;
<a name="l1057"><span class="linenum">1057</span></a>              }
<a name="l1058"><span class="linenum">1058</span></a>          }
<a name="l1059"><span class="linenum">1059</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l1060"><span class="linenum">1060</span></a>              if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_plugin_instance')" href="../../_functions/update_plugin_instance.html" onMouseOver="funcPopup(event,'update_plugin_instance')">update_plugin_instance</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>, <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>)) {
<a name="l1061"><span class="linenum">1061</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_error')" href="../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>());
<a name="l1062"><span class="linenum">1062</span></a>                  return false;
<a name="l1063"><span class="linenum">1063</span></a>              }
<a name="l1064"><span class="linenum">1064</span></a>          }
<a name="l1065"><span class="linenum">1065</span></a>  
<a name="l1066"><span class="linenum">1066</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_calendar')" href="../../_functions/update_calendar.html" onMouseOver="funcPopup(event,'update_calendar')">update_calendar</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id);
<a name="l1067"><span class="linenum">1067</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_gradebook')" href="../../_functions/update_gradebook.html" onMouseOver="funcPopup(event,'update_gradebook')">update_gradebook</a>(false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id);
<a name="l1068"><span class="linenum">1068</span></a>  
<a name="l1069"><span class="linenum">1069</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a> = new stdClass();
<a name="l1070"><span class="linenum">1070</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('id')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l1071"><span class="linenum">1071</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('nosubmissions')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/nosubmissions.html">nosubmissions</a> = (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>()) ? 1: 0;
<a name="l1072"><span class="linenum">1072</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('assign', <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>);
<a name="l1073"><span class="linenum">1073</span></a>  
<a name="l1074"><span class="linenum">1074</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l1075"><span class="linenum">1075</span></a>      }
<a name="l1076"><span class="linenum">1076</span></a>  
<a name="l1077"><span class="linenum">1077</span></a>      <span class="comment">/**</span>
<a name="l1078"><span class="linenum">1078</span></a>  <span class="comment">     * Save the attachments in the draft areas.</span>
<a name="l1079"><span class="linenum">1079</span></a>  <span class="comment">     *</span>
<a name="l1080"><span class="linenum">1080</span></a>  <span class="comment">     * @param stdClass $formdata</span>
<a name="l1081"><span class="linenum">1081</span></a>  <span class="comment">     */</span>
<a name="l1082"><span class="linenum">1082</span></a>      protected function <a class="function" onClick="logFunction('save_intro_draft_files')" href="../../_functions/save_intro_draft_files.html" onMouseOver="funcPopup(event,'save_intro_draft_files')">save_intro_draft_files</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>) {
<a name="l1083"><span class="linenum">1083</span></a>          if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('introattachments')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/introattachments.html">introattachments</a>)) {
<a name="l1084"><span class="linenum">1084</span></a>              <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('introattachments')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/introattachments.html">introattachments</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;id,
<a name="l1085"><span class="linenum">1085</span></a>                                         'mod_assign', <a class="constant" onClick="logConstant('ASSIGN_INTROATTACHMENT_FILEAREA')" href="../../_constants/ASSIGN_INTROATTACHMENT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGN_INTROATTACHMENT_FILEAREA')">ASSIGN_INTROATTACHMENT_FILEAREA</a>, 0);
<a name="l1086"><span class="linenum">1086</span></a>          }
<a name="l1087"><span class="linenum">1087</span></a>      }
<a name="l1088"><span class="linenum">1088</span></a>  
<a name="l1089"><span class="linenum">1089</span></a>      <span class="comment">/**</span>
<a name="l1090"><span class="linenum">1090</span></a>  <span class="comment">     * Add elements in grading plugin form.</span>
<a name="l1091"><span class="linenum">1091</span></a>  <span class="comment">     *</span>
<a name="l1092"><span class="linenum">1092</span></a>  <span class="comment">     * @param mixed $grade stdClass|null</span>
<a name="l1093"><span class="linenum">1093</span></a>  <span class="comment">     * @param MoodleQuickForm $mform</span>
<a name="l1094"><span class="linenum">1094</span></a>  <span class="comment">     * @param stdClass $data</span>
<a name="l1095"><span class="linenum">1095</span></a>  <span class="comment">     * @param int $userid - The userid we are grading</span>
<a name="l1096"><span class="linenum">1096</span></a>  <span class="comment">     * @return void</span>
<a name="l1097"><span class="linenum">1097</span></a>  <span class="comment">     */</span>
<a name="l1098"><span class="linenum">1098</span></a>      protected function <a class="function" onClick="logFunction('add_plugin_grade_elements')" href="../../_functions/add_plugin_grade_elements.html" onMouseOver="funcPopup(event,'add_plugin_grade_elements')">add_plugin_grade_elements</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, MoodleQuickForm <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, stdClass <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l1099"><span class="linenum">1099</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l1100"><span class="linenum">1100</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l1101"><span class="linenum">1101</span></a>                  <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_form_elements_for_user')" href="../../_functions/get_form_elements_for_user.html" onMouseOver="funcPopup(event,'get_form_elements_for_user')">get_form_elements_for_user</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l1102"><span class="linenum">1102</span></a>              }
<a name="l1103"><span class="linenum">1103</span></a>          }
<a name="l1104"><span class="linenum">1104</span></a>      }
<a name="l1105"><span class="linenum">1105</span></a>  
<a name="l1106"><span class="linenum">1106</span></a>  
<a name="l1107"><span class="linenum">1107</span></a>  
<a name="l1108"><span class="linenum">1108</span></a>      <span class="comment">/**</span>
<a name="l1109"><span class="linenum">1109</span></a>  <span class="comment">     * Add one plugins settings to edit plugin form.</span>
<a name="l1110"><span class="linenum">1110</span></a>  <span class="comment">     *</span>
<a name="l1111"><span class="linenum">1111</span></a>  <span class="comment">     * @param assign_plugin $plugin The plugin to add the settings from</span>
<a name="l1112"><span class="linenum">1112</span></a>  <span class="comment">     * @param MoodleQuickForm $mform The form to add the configuration settings to.</span>
<a name="l1113"><span class="linenum">1113</span></a>  <span class="comment">     *                               This form is modified directly (not returned).</span>
<a name="l1114"><span class="linenum">1114</span></a>  <span class="comment">     * @param array $pluginsenabled A list of form elements to be added to a group.</span>
<a name="l1115"><span class="linenum">1115</span></a>  <span class="comment">     *                              The new element is added to this array by this function.</span>
<a name="l1116"><span class="linenum">1116</span></a>  <span class="comment">     * @return void</span>
<a name="l1117"><span class="linenum">1117</span></a>  <span class="comment">     */</span>
<a name="l1118"><span class="linenum">1118</span></a>      protected function <a class="function" onClick="logFunction('add_plugin_settings')" href="../../_functions/add_plugin_settings.html" onMouseOver="funcPopup(event,'add_plugin_settings')">add_plugin_settings</a>(assign_plugin <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>, MoodleQuickForm <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, &amp; <a class="var it32119" onMouseOver="hilite(32119)" onMouseOut="lolite()" onClick="logVariable('pluginsenabled')" href="../../_variables/pluginsenabled.html">$pluginsenabled</a>) {
<a name="l1119"><span class="linenum">1119</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1120"><span class="linenum">1120</span></a>          if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() &amp;&amp; !<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_configurable')" href="../../_functions/is_configurable.html" onMouseOver="funcPopup(event,'is_configurable')">is_configurable</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>()) {
<a name="l1121"><span class="linenum">1121</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_subtype')" href="../../_functions/get_subtype.html" onMouseOver="funcPopup(event,'get_subtype')">get_subtype</a>() . '_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>() . '_enabled';
<a name="l1122"><span class="linenum">1122</span></a>              <a class="var it32119" onMouseOver="hilite(32119)" onMouseOut="lolite()" onClick="logVariable('pluginsenabled')" href="../../_variables/pluginsenabled.html">$pluginsenabled</a>[] = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('createElement')" href="../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('hidden', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, 1);
<a name="l1123"><span class="linenum">1123</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l1124"><span class="linenum">1124</span></a>              <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_settings')" href="../../_functions/get_settings.html" onMouseOver="funcPopup(event,'get_settings')">get_settings</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l1125"><span class="linenum">1125</span></a>          } else if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_configurable')" href="../../_functions/is_configurable.html" onMouseOver="funcPopup(event,'is_configurable')">is_configurable</a>()) {
<a name="l1126"><span class="linenum">1126</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_subtype')" href="../../_functions/get_subtype.html" onMouseOver="funcPopup(event,'get_subtype')">get_subtype</a>() . '_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>() . '_enabled';
<a name="l1127"><span class="linenum">1127</span></a>              <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l1128"><span class="linenum">1128</span></a>              <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a> .= ' ' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('help_icon')" href="../../_functions/help_icon.html" onMouseOver="funcPopup(event,'help_icon')">help_icon</a>('enabled', <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_subtype')" href="../../_functions/get_subtype.html" onMouseOver="funcPopup(event,'get_subtype')">get_subtype</a>() . '_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>());
<a name="l1129"><span class="linenum">1129</span></a>              <a class="var it32119" onMouseOver="hilite(32119)" onMouseOut="lolite()" onClick="logVariable('pluginsenabled')" href="../../_variables/pluginsenabled.html">$pluginsenabled</a>[] = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('createElement')" href="../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('checkbox', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, '', <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../../_variables/label.html">$label</a>);
<a name="l1130"><span class="linenum">1130</span></a>  
<a name="l1131"><span class="linenum">1131</span></a>              <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a> = <a class="function" onClick="logFunction('get_config')" href="../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_subtype')" href="../../_functions/get_subtype.html" onMouseOver="funcPopup(event,'get_subtype')">get_subtype</a>() . '_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>(), 'default');
<a name="l1132"><span class="linenum">1132</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_config')" href="../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('enabled') !== false) {
<a name="l1133"><span class="linenum">1133</span></a>                  <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>();
<a name="l1134"><span class="linenum">1134</span></a>              }
<a name="l1135"><span class="linenum">1135</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_subtype')" href="../../_functions/get_subtype.html" onMouseOver="funcPopup(event,'get_subtype')">get_subtype</a>() . '_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>() . '_enabled', <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../../_variables/default.html">$default</a>);
<a name="l1136"><span class="linenum">1136</span></a>  
<a name="l1137"><span class="linenum">1137</span></a>              <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_settings')" href="../../_functions/get_settings.html" onMouseOver="funcPopup(event,'get_settings')">get_settings</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l1138"><span class="linenum">1138</span></a>  
<a name="l1139"><span class="linenum">1139</span></a>          }
<a name="l1140"><span class="linenum">1140</span></a>      }
<a name="l1141"><span class="linenum">1141</span></a>  
<a name="l1142"><span class="linenum">1142</span></a>      <span class="comment">/**</span>
<a name="l1143"><span class="linenum">1143</span></a>  <span class="comment">     * Add settings to edit plugin form.</span>
<a name="l1144"><span class="linenum">1144</span></a>  <span class="comment">     *</span>
<a name="l1145"><span class="linenum">1145</span></a>  <span class="comment">     * @param MoodleQuickForm $mform The form to add the configuration settings to.</span>
<a name="l1146"><span class="linenum">1146</span></a>  <span class="comment">     *                               This form is modified directly (not returned).</span>
<a name="l1147"><span class="linenum">1147</span></a>  <span class="comment">     * @return void</span>
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment">     */</span>
<a name="l1149"><span class="linenum">1149</span></a>      public function <a class="function" onClick="logFunction('add_all_plugin_settings')" href="../../_functions/add_all_plugin_settings.html" onMouseOver="funcPopup(event,'add_all_plugin_settings')">add_all_plugin_settings</a>(MoodleQuickForm <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l1150"><span class="linenum">1150</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'submissiontypes', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissiontypes', 'assign'));
<a name="l1151"><span class="linenum">1151</span></a>  
<a name="l1152"><span class="linenum">1152</span></a>          <a class="var it32120" onMouseOver="hilite(32120)" onMouseOut="lolite()" onClick="logVariable('submissionpluginsenabled')" href="../../_variables/submissionpluginsenabled.html">$submissionpluginsenabled</a> = array();
<a name="l1153"><span class="linenum">1153</span></a>          <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addGroup')" href="../../_functions/addgroup.html" onMouseOver="funcPopup(event,'addgroup')">addGroup</a>(array(), 'submissionplugins', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissiontypes', 'assign'), array(' '), false);
<a name="l1154"><span class="linenum">1154</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l1155"><span class="linenum">1155</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_plugin_settings')" href="../../_functions/add_plugin_settings.html" onMouseOver="funcPopup(event,'add_plugin_settings')">add_plugin_settings</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>, <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it32120" onMouseOver="hilite(32120)" onMouseOut="lolite()" onClick="logVariable('submissionpluginsenabled')" href="../../_variables/submissionpluginsenabled.html">$submissionpluginsenabled</a>);
<a name="l1156"><span class="linenum">1156</span></a>          }
<a name="l1157"><span class="linenum">1157</span></a>          <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>-&gt;<a class="function" onClick="logFunction('setElements')" href="../../_functions/setelements.html" onMouseOver="funcPopup(event,'setelements')">setElements</a>(<a class="var it32120" onMouseOver="hilite(32120)" onMouseOut="lolite()" onClick="logVariable('submissionpluginsenabled')" href="../../_variables/submissionpluginsenabled.html">$submissionpluginsenabled</a>);
<a name="l1158"><span class="linenum">1158</span></a>  
<a name="l1159"><span class="linenum">1159</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'feedbacktypes', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('feedbacktypes', 'assign'));
<a name="l1160"><span class="linenum">1160</span></a>          <a class="var it32121" onMouseOver="hilite(32121)" onMouseOut="lolite()" onClick="logVariable('feedbackpluginsenabled')" href="../../_variables/feedbackpluginsenabled.html">$feedbackpluginsenabled</a> = array();
<a name="l1161"><span class="linenum">1161</span></a>          <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addGroup')" href="../../_functions/addgroup.html" onMouseOver="funcPopup(event,'addgroup')">addGroup</a>(array(), 'feedbackplugins', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('feedbacktypes', 'assign'), array(' '), false);
<a name="l1162"><span class="linenum">1162</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l1163"><span class="linenum">1163</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_plugin_settings')" href="../../_functions/add_plugin_settings.html" onMouseOver="funcPopup(event,'add_plugin_settings')">add_plugin_settings</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>, <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it32121" onMouseOver="hilite(32121)" onMouseOut="lolite()" onClick="logVariable('feedbackpluginsenabled')" href="../../_variables/feedbackpluginsenabled.html">$feedbackpluginsenabled</a>);
<a name="l1164"><span class="linenum">1164</span></a>          }
<a name="l1165"><span class="linenum">1165</span></a>          <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>-&gt;<a class="function" onClick="logFunction('setElements')" href="../../_functions/setelements.html" onMouseOver="funcPopup(event,'setelements')">setElements</a>(<a class="var it32121" onMouseOver="hilite(32121)" onMouseOut="lolite()" onClick="logVariable('feedbackpluginsenabled')" href="../../_variables/feedbackpluginsenabled.html">$feedbackpluginsenabled</a>);
<a name="l1166"><span class="linenum">1166</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setExpanded')" href="../../_functions/setexpanded.html" onMouseOver="funcPopup(event,'setexpanded')">setExpanded</a>('submissiontypes');
<a name="l1167"><span class="linenum">1167</span></a>      }
<a name="l1168"><span class="linenum">1168</span></a>  
<a name="l1169"><span class="linenum">1169</span></a>      <span class="comment">/**</span>
<a name="l1170"><span class="linenum">1170</span></a>  <span class="comment">     * Allow each plugin an opportunity to update the defaultvalues</span>
<a name="l1171"><span class="linenum">1171</span></a>  <span class="comment">     * passed in to the settings form (needed to set up draft areas for</span>
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment">     * editor and filemanager elements)</span>
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment">     *</span>
<a name="l1174"><span class="linenum">1174</span></a>  <span class="comment">     * @param array $defaultvalues</span>
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment">     */</span>
<a name="l1176"><span class="linenum">1176</span></a>      public function <a class="function" onClick="logFunction('plugin_data_preprocessing')" href="../../_functions/plugin_data_preprocessing.html" onMouseOver="funcPopup(event,'plugin_data_preprocessing')">plugin_data_preprocessing</a>(&amp;<a class="var it633" onMouseOver="hilite(633)" onMouseOut="lolite()" onClick="logVariable('defaultvalues')" href="../../_variables/defaultvalues.html">$defaultvalues</a>) {
<a name="l1177"><span class="linenum">1177</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l1178"><span class="linenum">1178</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l1179"><span class="linenum">1179</span></a>                  <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('data_preprocessing')" href="../../_functions/data_preprocessing.html" onMouseOver="funcPopup(event,'data_preprocessing')">data_preprocessing</a>(<a class="var it633" onMouseOver="hilite(633)" onMouseOut="lolite()" onClick="logVariable('defaultvalues')" href="../../_variables/defaultvalues.html">$defaultvalues</a>);
<a name="l1180"><span class="linenum">1180</span></a>              }
<a name="l1181"><span class="linenum">1181</span></a>          }
<a name="l1182"><span class="linenum">1182</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l1183"><span class="linenum">1183</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l1184"><span class="linenum">1184</span></a>                  <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('data_preprocessing')" href="../../_functions/data_preprocessing.html" onMouseOver="funcPopup(event,'data_preprocessing')">data_preprocessing</a>(<a class="var it633" onMouseOver="hilite(633)" onMouseOut="lolite()" onClick="logVariable('defaultvalues')" href="../../_variables/defaultvalues.html">$defaultvalues</a>);
<a name="l1185"><span class="linenum">1185</span></a>              }
<a name="l1186"><span class="linenum">1186</span></a>          }
<a name="l1187"><span class="linenum">1187</span></a>      }
<a name="l1188"><span class="linenum">1188</span></a>  
<a name="l1189"><span class="linenum">1189</span></a>      <span class="comment">/**</span>
<a name="l1190"><span class="linenum">1190</span></a>  <span class="comment">     * Get the name of the current module.</span>
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment">     *</span>
<a name="l1192"><span class="linenum">1192</span></a>  <span class="comment">     * @return string the module name (Assignment)</span>
<a name="l1193"><span class="linenum">1193</span></a>  <span class="comment">     */</span>
<a name="l1194"><span class="linenum">1194</span></a>      protected function <a class="function" onClick="logFunction('get_module_name')" href="../../_functions/get_module_name.html" onMouseOver="funcPopup(event,'get_module_name')">get_module_name</a>() {
<a name="l1195"><span class="linenum">1195</span></a>          if (isset(self::<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a>)) {
<a name="l1196"><span class="linenum">1196</span></a>              return self::<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a>;
<a name="l1197"><span class="linenum">1197</span></a>          }
<a name="l1198"><span class="linenum">1198</span></a>          self::<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', 'assign');
<a name="l1199"><span class="linenum">1199</span></a>          return self::<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a>;
<a name="l1200"><span class="linenum">1200</span></a>      }
<a name="l1201"><span class="linenum">1201</span></a>  
<a name="l1202"><span class="linenum">1202</span></a>      <span class="comment">/**</span>
<a name="l1203"><span class="linenum">1203</span></a>  <span class="comment">     * Get the plural name of the current module.</span>
<a name="l1204"><span class="linenum">1204</span></a>  <span class="comment">     *</span>
<a name="l1205"><span class="linenum">1205</span></a>  <span class="comment">     * @return string the module name plural (Assignments)</span>
<a name="l1206"><span class="linenum">1206</span></a>  <span class="comment">     */</span>
<a name="l1207"><span class="linenum">1207</span></a>      protected function <a class="function" onClick="logFunction('get_module_name_plural')" href="../../_functions/get_module_name_plural.html" onMouseOver="funcPopup(event,'get_module_name_plural')">get_module_name_plural</a>() {
<a name="l1208"><span class="linenum">1208</span></a>          if (isset(self::<a class="var it32106" onMouseOver="hilite(32106)" onMouseOut="lolite()" onClick="logVariable('modulenameplural')" href="../../_variables/modulenameplural.html">$modulenameplural</a>)) {
<a name="l1209"><span class="linenum">1209</span></a>              return self::<a class="var it32106" onMouseOver="hilite(32106)" onMouseOut="lolite()" onClick="logVariable('modulenameplural')" href="../../_variables/modulenameplural.html">$modulenameplural</a>;
<a name="l1210"><span class="linenum">1210</span></a>          }
<a name="l1211"><span class="linenum">1211</span></a>          self::<a class="var it32106" onMouseOver="hilite(32106)" onMouseOut="lolite()" onClick="logVariable('modulenameplural')" href="../../_variables/modulenameplural.html">$modulenameplural</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'assign');
<a name="l1212"><span class="linenum">1212</span></a>          return self::<a class="var it32106" onMouseOver="hilite(32106)" onMouseOut="lolite()" onClick="logVariable('modulenameplural')" href="../../_variables/modulenameplural.html">$modulenameplural</a>;
<a name="l1213"><span class="linenum">1213</span></a>      }
<a name="l1214"><span class="linenum">1214</span></a>  
<a name="l1215"><span class="linenum">1215</span></a>      <span class="comment">/**</span>
<a name="l1216"><span class="linenum">1216</span></a>  <span class="comment">     * Has this assignment been constructed from an instance?</span>
<a name="l1217"><span class="linenum">1217</span></a>  <span class="comment">     *</span>
<a name="l1218"><span class="linenum">1218</span></a>  <span class="comment">     * @return bool</span>
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment">     */</span>
<a name="l1220"><span class="linenum">1220</span></a>      public function <a class="function" onClick="logFunction('has_instance')" href="../../_functions/has_instance.html" onMouseOver="funcPopup(event,'has_instance')">has_instance</a>() {
<a name="l1221"><span class="linenum">1221</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a> || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>();
<a name="l1222"><span class="linenum">1222</span></a>      }
<a name="l1223"><span class="linenum">1223</span></a>  
<a name="l1224"><span class="linenum">1224</span></a>      <span class="comment">/**</span>
<a name="l1225"><span class="linenum">1225</span></a>  <span class="comment">     * Get the settings for the current instance of this assignment</span>
<a name="l1226"><span class="linenum">1226</span></a>  <span class="comment">     *</span>
<a name="l1227"><span class="linenum">1227</span></a>  <span class="comment">     * @return stdClass The settings</span>
<a name="l1228"><span class="linenum">1228</span></a>  <span class="comment">     */</span>
<a name="l1229"><span class="linenum">1229</span></a>      public function <a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>() {
<a name="l1230"><span class="linenum">1230</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1231"><span class="linenum">1231</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>) {
<a name="l1232"><span class="linenum">1232</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l1233"><span class="linenum">1233</span></a>          }
<a name="l1234"><span class="linenum">1234</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()) {
<a name="l1235"><span class="linenum">1235</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;instance);
<a name="l1236"><span class="linenum">1236</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assign', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1237"><span class="linenum">1237</span></a>          }
<a name="l1238"><span class="linenum">1238</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>) {
<a name="l1239"><span class="linenum">1239</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Improper use of the assignment class. ' .
<a name="l1240"><span class="linenum">1240</span></a>                                         'Cannot load the assignment record.');
<a name="l1241"><span class="linenum">1241</span></a>          }
<a name="l1242"><span class="linenum">1242</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l1243"><span class="linenum">1243</span></a>      }
<a name="l1244"><span class="linenum">1244</span></a>  
<a name="l1245"><span class="linenum">1245</span></a>      <span class="comment">/**</span>
<a name="l1246"><span class="linenum">1246</span></a>  <span class="comment">     * Get the primary grade item for this assign instance.</span>
<a name="l1247"><span class="linenum">1247</span></a>  <span class="comment">     *</span>
<a name="l1248"><span class="linenum">1248</span></a>  <span class="comment">     * @return stdClass The grade_item record</span>
<a name="l1249"><span class="linenum">1249</span></a>  <span class="comment">     */</span>
<a name="l1250"><span class="linenum">1250</span></a>      public function <a class="function" onClick="logFunction('get_grade_item')" href="../../_functions/get_grade_item.html" onMouseOver="funcPopup(event,'get_grade_item')">get_grade_item</a>() {
<a name="l1251"><span class="linenum">1251</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradeitem')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/gradeitem.html">gradeitem</a>) {
<a name="l1252"><span class="linenum">1252</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradeitem')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/gradeitem.html">gradeitem</a>;
<a name="l1253"><span class="linenum">1253</span></a>          }
<a name="l1254"><span class="linenum">1254</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l1255"><span class="linenum">1255</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('itemtype' =&gt; 'mod',
<a name="l1256"><span class="linenum">1256</span></a>                          'itemmodule' =&gt; 'assign',
<a name="l1257"><span class="linenum">1257</span></a>                          'iteminstance' =&gt; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1258"><span class="linenum">1258</span></a>                          'courseid' =&gt; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('course')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>,
<a name="l1259"><span class="linenum">1259</span></a>                          'itemnumber' =&gt; 0);
<a name="l1260"><span class="linenum">1260</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradeitem')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/gradeitem.html">gradeitem</a> = <a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch')" href="../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1261"><span class="linenum">1261</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradeitem')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/gradeitem.html">gradeitem</a>) {
<a name="l1262"><span class="linenum">1262</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Improper use of the assignment class. ' .
<a name="l1263"><span class="linenum">1263</span></a>                                         'Cannot load the grade item.');
<a name="l1264"><span class="linenum">1264</span></a>          }
<a name="l1265"><span class="linenum">1265</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradeitem')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/gradeitem.html">gradeitem</a>;
<a name="l1266"><span class="linenum">1266</span></a>      }
<a name="l1267"><span class="linenum">1267</span></a>  
<a name="l1268"><span class="linenum">1268</span></a>      <span class="comment">/**</span>
<a name="l1269"><span class="linenum">1269</span></a>  <span class="comment">     * Get the context of the current course.</span>
<a name="l1270"><span class="linenum">1270</span></a>  <span class="comment">     *</span>
<a name="l1271"><span class="linenum">1271</span></a>  <span class="comment">     * @return mixed context|null The course context</span>
<a name="l1272"><span class="linenum">1272</span></a>  <span class="comment">     */</span>
<a name="l1273"><span class="linenum">1273</span></a>      public function <a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>() {
<a name="l1274"><span class="linenum">1274</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> &amp;&amp; !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>) {
<a name="l1275"><span class="linenum">1275</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Improper use of the assignment class. ' .
<a name="l1276"><span class="linenum">1276</span></a>                                         'Cannot load the course context.');
<a name="l1277"><span class="linenum">1277</span></a>          }
<a name="l1278"><span class="linenum">1278</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>) {
<a name="l1279"><span class="linenum">1279</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>();
<a name="l1280"><span class="linenum">1280</span></a>          } else {
<a name="l1281"><span class="linenum">1281</span></a>              return <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>-&gt;id);
<a name="l1282"><span class="linenum">1282</span></a>          }
<a name="l1283"><span class="linenum">1283</span></a>      }
<a name="l1284"><span class="linenum">1284</span></a>  
<a name="l1285"><span class="linenum">1285</span></a>  
<a name="l1286"><span class="linenum">1286</span></a>      <span class="comment">/**</span>
<a name="l1287"><span class="linenum">1287</span></a>  <span class="comment">     * Get the current course module.</span>
<a name="l1288"><span class="linenum">1288</span></a>  <span class="comment">     *</span>
<a name="l1289"><span class="linenum">1289</span></a>  <span class="comment">     * @return cm_info|null The course module or null if not known</span>
<a name="l1290"><span class="linenum">1290</span></a>  <span class="comment">     */</span>
<a name="l1291"><span class="linenum">1291</span></a>      public function <a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>() {
<a name="l1292"><span class="linenum">1292</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>) {
<a name="l1293"><span class="linenum">1293</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>;
<a name="l1294"><span class="linenum">1294</span></a>          }
<a name="l1295"><span class="linenum">1295</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>) {
<a name="l1296"><span class="linenum">1296</span></a>              return null;
<a name="l1297"><span class="linenum">1297</span></a>          }
<a name="l1298"><span class="linenum">1298</span></a>  
<a name="l1299"><span class="linenum">1299</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;contextlevel == <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>) {
<a name="l1300"><span class="linenum">1300</span></a>              <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>());
<a name="l1301"><span class="linenum">1301</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a> = <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_cm')" href="../../_functions/get_cm.html" onMouseOver="funcPopup(event,'get_cm')">get_cm</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;instanceid);
<a name="l1302"><span class="linenum">1302</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>;
<a name="l1303"><span class="linenum">1303</span></a>          }
<a name="l1304"><span class="linenum">1304</span></a>          return null;
<a name="l1305"><span class="linenum">1305</span></a>      }
<a name="l1306"><span class="linenum">1306</span></a>  
<a name="l1307"><span class="linenum">1307</span></a>      <span class="comment">/**</span>
<a name="l1308"><span class="linenum">1308</span></a>  <span class="comment">     * Get context module.</span>
<a name="l1309"><span class="linenum">1309</span></a>  <span class="comment">     *</span>
<a name="l1310"><span class="linenum">1310</span></a>  <span class="comment">     * @return context</span>
<a name="l1311"><span class="linenum">1311</span></a>  <span class="comment">     */</span>
<a name="l1312"><span class="linenum">1312</span></a>      public function <a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>() {
<a name="l1313"><span class="linenum">1313</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>;
<a name="l1314"><span class="linenum">1314</span></a>      }
<a name="l1315"><span class="linenum">1315</span></a>  
<a name="l1316"><span class="linenum">1316</span></a>      <span class="comment">/**</span>
<a name="l1317"><span class="linenum">1317</span></a>  <span class="comment">     * Get the current course.</span>
<a name="l1318"><span class="linenum">1318</span></a>  <span class="comment">     *</span>
<a name="l1319"><span class="linenum">1319</span></a>  <span class="comment">     * @return mixed stdClass|null The course</span>
<a name="l1320"><span class="linenum">1320</span></a>  <span class="comment">     */</span>
<a name="l1321"><span class="linenum">1321</span></a>      public function <a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>() {
<a name="l1322"><span class="linenum">1322</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1323"><span class="linenum">1323</span></a>  
<a name="l1324"><span class="linenum">1324</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>) {
<a name="l1325"><span class="linenum">1325</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>;
<a name="l1326"><span class="linenum">1326</span></a>          }
<a name="l1327"><span class="linenum">1327</span></a>  
<a name="l1328"><span class="linenum">1328</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>) {
<a name="l1329"><span class="linenum">1329</span></a>              return null;
<a name="l1330"><span class="linenum">1330</span></a>          }
<a name="l1331"><span class="linenum">1331</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>()-&gt;instanceid);
<a name="l1332"><span class="linenum">1332</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/course.html">course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1333"><span class="linenum">1333</span></a>  
<a name="l1334"><span class="linenum">1334</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>;
<a name="l1335"><span class="linenum">1335</span></a>      }
<a name="l1336"><span class="linenum">1336</span></a>  
<a name="l1337"><span class="linenum">1337</span></a>      <span class="comment">/**</span>
<a name="l1338"><span class="linenum">1338</span></a>  <span class="comment">     * Count the number of intro attachments.</span>
<a name="l1339"><span class="linenum">1339</span></a>  <span class="comment">     *</span>
<a name="l1340"><span class="linenum">1340</span></a>  <span class="comment">     * @return int</span>
<a name="l1341"><span class="linenum">1341</span></a>  <span class="comment">     */</span>
<a name="l1342"><span class="linenum">1342</span></a>      protected function <a class="function" onClick="logFunction('count_attachments')" href="../../_functions/count_attachments.html" onMouseOver="funcPopup(event,'count_attachments')">count_attachments</a>() {
<a name="l1343"><span class="linenum">1343</span></a>  
<a name="l1344"><span class="linenum">1344</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1345"><span class="linenum">1345</span></a>          <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;id, 'mod_assign', <a class="constant" onClick="logConstant('ASSIGN_INTROATTACHMENT_FILEAREA')" href="../../_constants/ASSIGN_INTROATTACHMENT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGN_INTROATTACHMENT_FILEAREA')">ASSIGN_INTROATTACHMENT_FILEAREA</a>,
<a name="l1346"><span class="linenum">1346</span></a>                          0, 'id', false);
<a name="l1347"><span class="linenum">1347</span></a>  
<a name="l1348"><span class="linenum">1348</span></a>          return <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a>);
<a name="l1349"><span class="linenum">1349</span></a>      }
<a name="l1350"><span class="linenum">1350</span></a>  
<a name="l1351"><span class="linenum">1351</span></a>      <span class="comment">/**</span>
<a name="l1352"><span class="linenum">1352</span></a>  <span class="comment">     * Are there any intro attachments to display?</span>
<a name="l1353"><span class="linenum">1353</span></a>  <span class="comment">     *</span>
<a name="l1354"><span class="linenum">1354</span></a>  <span class="comment">     * @return boolean</span>
<a name="l1355"><span class="linenum">1355</span></a>  <span class="comment">     */</span>
<a name="l1356"><span class="linenum">1356</span></a>      protected function <a class="function" onClick="logFunction('has_visible_attachments')" href="../../_functions/has_visible_attachments.html" onMouseOver="funcPopup(event,'has_visible_attachments')">has_visible_attachments</a>() {
<a name="l1357"><span class="linenum">1357</span></a>          return (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_attachments')" href="../../_functions/count_attachments.html" onMouseOver="funcPopup(event,'count_attachments')">count_attachments</a>() &gt; 0);
<a name="l1358"><span class="linenum">1358</span></a>      }
<a name="l1359"><span class="linenum">1359</span></a>  
<a name="l1360"><span class="linenum">1360</span></a>      <span class="comment">/**</span>
<a name="l1361"><span class="linenum">1361</span></a>  <span class="comment">     * Return a grade in user-friendly form, whether it's a scale or not.</span>
<a name="l1362"><span class="linenum">1362</span></a>  <span class="comment">     *</span>
<a name="l1363"><span class="linenum">1363</span></a>  <span class="comment">     * @param mixed $grade int|null</span>
<a name="l1364"><span class="linenum">1364</span></a>  <span class="comment">     * @param boolean $editing Are we allowing changes to this grade?</span>
<a name="l1365"><span class="linenum">1365</span></a>  <span class="comment">     * @param int $userid The user id the grade belongs to</span>
<a name="l1366"><span class="linenum">1366</span></a>  <span class="comment">     * @param int $modified Timestamp from when the grade was last modified</span>
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment">     * @return string User-friendly representation of grade</span>
<a name="l1368"><span class="linenum">1368</span></a>  <span class="comment">     */</span>
<a name="l1369"><span class="linenum">1369</span></a>      public function <a class="function" onClick="logFunction('display_grade')" href="../../_functions/display_grade.html" onMouseOver="funcPopup(event,'display_grade')">display_grade</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="var it1266" onMouseOver="hilite(1266)" onMouseOut="lolite()" onClick="logVariable('editing')" href="../../_variables/editing.html">$editing</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>=0, <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>=0) {
<a name="l1370"><span class="linenum">1370</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1371"><span class="linenum">1371</span></a>  
<a name="l1372"><span class="linenum">1372</span></a>          static <a class="var it32122" onMouseOver="hilite(32122)" onMouseOut="lolite()" onClick="logVariable('scalegrades')" href="../../_variables/scalegrades.html">$scalegrades</a> = array();
<a name="l1373"><span class="linenum">1373</span></a>  
<a name="l1374"><span class="linenum">1374</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l1375"><span class="linenum">1375</span></a>  
<a name="l1376"><span class="linenum">1376</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade &gt;= 0) {
<a name="l1377"><span class="linenum">1377</span></a>  <span class="comment">            // Normal number.</span>
<a name="l1378"><span class="linenum">1378</span></a>              if (<a class="var it1266" onMouseOver="hilite(1266)" onMouseOut="lolite()" onClick="logVariable('editing')" href="../../_variables/editing.html">$editing</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade &gt; 0) {
<a name="l1379"><span class="linenum">1379</span></a>                  if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> &lt; 0) {
<a name="l1380"><span class="linenum">1380</span></a>                      <a class="var it32123" onMouseOver="hilite(32123)" onMouseOut="lolite()" onClick="logVariable('displaygrade')" href="../../_variables/displaygrade.html">$displaygrade</a> = '';
<a name="l1381"><span class="linenum">1381</span></a>                  } else {
<a name="l1382"><span class="linenum">1382</span></a>                      <a class="var it32123" onMouseOver="hilite(32123)" onMouseOut="lolite()" onClick="logVariable('displaygrade')" href="../../_variables/displaygrade.html">$displaygrade</a> = <a class="function" onClick="logFunction('format_float')" href="../../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, 2);
<a name="l1383"><span class="linenum">1383</span></a>                  }
<a name="l1384"><span class="linenum">1384</span></a>                  <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= '&lt;label class=&quot;accesshide&quot; for=&quot;quickgrade_' . <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> . '&quot;&gt;' .
<a name="l1385"><span class="linenum">1385</span></a>                         <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('usergrade', 'assign') .
<a name="l1386"><span class="linenum">1386</span></a>                         '&lt;/label&gt;';
<a name="l1387"><span class="linenum">1387</span></a>                  <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= '&lt;input type=&quot;text&quot;
<a name="l1388"><span class="linenum">1388</span></a>                                id=&quot;quickgrade_' . <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> . '&quot;
<a name="l1389"><span class="linenum">1389</span></a>                                name=&quot;quickgrade_' . <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> . '&quot;
<a name="l1390"><span class="linenum">1390</span></a>                                value=&quot;' .  <a class="var it32123" onMouseOver="hilite(32123)" onMouseOut="lolite()" onClick="logVariable('displaygrade')" href="../../_variables/displaygrade.html">$displaygrade</a> . '&quot;
<a name="l1391"><span class="linenum">1391</span></a>                                size=&quot;6&quot;
<a name="l1392"><span class="linenum">1392</span></a>                                maxlength=&quot;10&quot;
<a name="l1393"><span class="linenum">1393</span></a>                                class=&quot;quickgrade&quot;/&gt;';
<a name="l1394"><span class="linenum">1394</span></a>                  <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= '&amp;nbsp;/&amp;nbsp;' . <a class="function" onClick="logFunction('format_float')" href="../../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade, 2);
<a name="l1395"><span class="linenum">1395</span></a>                  return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l1396"><span class="linenum">1396</span></a>              } else {
<a name="l1397"><span class="linenum">1397</span></a>                  if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> == -1 || <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> === null) {
<a name="l1398"><span class="linenum">1398</span></a>                      <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= '-';
<a name="l1399"><span class="linenum">1399</span></a>                  } else {
<a name="l1400"><span class="linenum">1400</span></a>                      <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_grade_item')" href="../../_functions/get_grade_item.html" onMouseOver="funcPopup(event,'get_grade_item')">get_grade_item</a>();
<a name="l1401"><span class="linenum">1401</span></a>                      <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="function" onClick="logFunction('grade_format_gradevalue')" href="../../_functions/grade_format_gradevalue.html" onMouseOver="funcPopup(event,'grade_format_gradevalue')">grade_format_gradevalue</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>);
<a name="l1402"><span class="linenum">1402</span></a>                      if (<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a class="function" onClick="logFunction('get_displaytype')" href="../../_functions/get_displaytype.html" onMouseOver="funcPopup(event,'get_displaytype')">get_displaytype</a>() == <a class="constant" onClick="logConstant('GRADE_DISPLAY_TYPE_REAL')" href="../../_constants/GRADE_DISPLAY_TYPE_REAL.html" onMouseOver="constPopup(event,'GRADE_DISPLAY_TYPE_REAL')">GRADE_DISPLAY_TYPE_REAL</a>) {
<a name="l1403"><span class="linenum">1403</span></a>  <span class="comment">                        // If displaying the raw grade, also display the total value.</span>
<a name="l1404"><span class="linenum">1404</span></a>                          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= '&amp;nbsp;/&amp;nbsp;' . <a class="function" onClick="logFunction('format_float')" href="../../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade, 2);
<a name="l1405"><span class="linenum">1405</span></a>                      }
<a name="l1406"><span class="linenum">1406</span></a>                  }
<a name="l1407"><span class="linenum">1407</span></a>                  return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l1408"><span class="linenum">1408</span></a>              }
<a name="l1409"><span class="linenum">1409</span></a>  
<a name="l1410"><span class="linenum">1410</span></a>          } else {
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment">            // Scale.</span>
<a name="l1412"><span class="linenum">1412</span></a>              if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a>['scale'])) {
<a name="l1413"><span class="linenum">1413</span></a>                  if (<a class="var it94" onMouseOver="hilite(94)" onMouseOut="lolite()" onClick="logVariable('scale')" href="../../_variables/scale.html">$scale</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('scale', array('id'=&gt;-(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade)))) {
<a name="l1414"><span class="linenum">1414</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a>['scale'] = <a class="function" onClick="logFunction('make_menu_from_list')" href="../../_functions/make_menu_from_list.html" onMouseOver="funcPopup(event,'make_menu_from_list')">make_menu_from_list</a>(<a class="var it94" onMouseOver="hilite(94)" onMouseOut="lolite()" onClick="logVariable('scale')" href="../../_variables/scale.html">$scale</a>-&gt;<a onClick="logVariable('scale')" class="var it43117" onMouseOver="hilite(43117)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>);
<a name="l1415"><span class="linenum">1415</span></a>                  } else {
<a name="l1416"><span class="linenum">1416</span></a>                      <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= '-';
<a name="l1417"><span class="linenum">1417</span></a>                      return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l1418"><span class="linenum">1418</span></a>                  }
<a name="l1419"><span class="linenum">1419</span></a>              }
<a name="l1420"><span class="linenum">1420</span></a>              if (<a class="var it1266" onMouseOver="hilite(1266)" onMouseOut="lolite()" onClick="logVariable('editing')" href="../../_variables/editing.html">$editing</a>) {
<a name="l1421"><span class="linenum">1421</span></a>                  <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= '&lt;label class=&quot;accesshide&quot;
<a name="l1422"><span class="linenum">1422</span></a>                                for=&quot;quickgrade_' . <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> . '&quot;&gt;' .
<a name="l1423"><span class="linenum">1423</span></a>                        <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('usergrade', 'assign') .
<a name="l1424"><span class="linenum">1424</span></a>                        '&lt;/label&gt;';
<a name="l1425"><span class="linenum">1425</span></a>                  <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= '&lt;select name=&quot;quickgrade_' . <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> . '&quot; class=&quot;quickgrade&quot;&gt;';
<a name="l1426"><span class="linenum">1426</span></a>                  <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= '&lt;option value=&quot;-1&quot;&gt;' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nograde') . '&lt;/option&gt;';
<a name="l1427"><span class="linenum">1427</span></a>                  foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a>['scale'] as <a class="var it6606" onMouseOver="hilite(6606)" onMouseOut="lolite()" onClick="logVariable('optionid')" href="../../_variables/optionid.html">$optionid</a> =&gt; <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../../_variables/option.html">$option</a>) {
<a name="l1428"><span class="linenum">1428</span></a>                      <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> = '';
<a name="l1429"><span class="linenum">1429</span></a>                      if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> == <a class="var it6606" onMouseOver="hilite(6606)" onMouseOut="lolite()" onClick="logVariable('optionid')" href="../../_variables/optionid.html">$optionid</a>) {
<a name="l1430"><span class="linenum">1430</span></a>                          <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> = 'selected=&quot;selected&quot;';
<a name="l1431"><span class="linenum">1431</span></a>                      }
<a name="l1432"><span class="linenum">1432</span></a>                      <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= '&lt;option value=&quot;' . <a class="var it6606" onMouseOver="hilite(6606)" onMouseOut="lolite()" onClick="logVariable('optionid')" href="../../_variables/optionid.html">$optionid</a> . '&quot; ' . <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> . '&gt;' . <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../../_variables/option.html">$option</a> . '&lt;/option&gt;';
<a name="l1433"><span class="linenum">1433</span></a>                  }
<a name="l1434"><span class="linenum">1434</span></a>                  <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= '&lt;/select&gt;';
<a name="l1435"><span class="linenum">1435</span></a>                  return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l1436"><span class="linenum">1436</span></a>              } else {
<a name="l1437"><span class="linenum">1437</span></a>                  <a class="var it973" onMouseOver="hilite(973)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a> = (int)<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>;
<a name="l1438"><span class="linenum">1438</span></a>                  if (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a>['scale'][<a class="var it973" onMouseOver="hilite(973)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>])) {
<a name="l1439"><span class="linenum">1439</span></a>                      <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a>['scale'][<a class="var it973" onMouseOver="hilite(973)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>];
<a name="l1440"><span class="linenum">1440</span></a>                      return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l1441"><span class="linenum">1441</span></a>                  }
<a name="l1442"><span class="linenum">1442</span></a>                  <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= '-';
<a name="l1443"><span class="linenum">1443</span></a>                  return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l1444"><span class="linenum">1444</span></a>              }
<a name="l1445"><span class="linenum">1445</span></a>          }
<a name="l1446"><span class="linenum">1446</span></a>      }
<a name="l1447"><span class="linenum">1447</span></a>  
<a name="l1448"><span class="linenum">1448</span></a>      <span class="comment">/**</span>
<a name="l1449"><span class="linenum">1449</span></a>  <span class="comment">     * Get the submission status/grading status for all submissions in this assignment for the</span>
<a name="l1450"><span class="linenum">1450</span></a>  <span class="comment">     * given paticipants.</span>
<a name="l1451"><span class="linenum">1451</span></a>  <span class="comment">     *</span>
<a name="l1452"><span class="linenum">1452</span></a>  <span class="comment">     * These statuses match the available filters (requiregrading, submitted, notsubmitted).</span>
<a name="l1453"><span class="linenum">1453</span></a>  <span class="comment">     * If this is a group assignment, group info is also returned.</span>
<a name="l1454"><span class="linenum">1454</span></a>  <span class="comment">     *</span>
<a name="l1455"><span class="linenum">1455</span></a>  <span class="comment">     * @param array $participants an associative array where the key is the participant id and</span>
<a name="l1456"><span class="linenum">1456</span></a>  <span class="comment">     *                            the value is the participant record.</span>
<a name="l1457"><span class="linenum">1457</span></a>  <span class="comment">     * @return array an associative array where the key is the participant id and the value is</span>
<a name="l1458"><span class="linenum">1458</span></a>  <span class="comment">     *               the participant record.</span>
<a name="l1459"><span class="linenum">1459</span></a>  <span class="comment">     */</span>
<a name="l1460"><span class="linenum">1460</span></a>      private function <a class="function" onClick="logFunction('get_submission_info_for_participants')" href="../../_functions/get_submission_info_for_participants.html" onMouseOver="funcPopup(event,'get_submission_info_for_participants')">get_submission_info_for_participants</a>(<a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>) {
<a name="l1461"><span class="linenum">1461</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1462"><span class="linenum">1462</span></a>  
<a name="l1463"><span class="linenum">1463</span></a>          if (empty(<a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>)) {
<a name="l1464"><span class="linenum">1464</span></a>              return <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>;
<a name="l1465"><span class="linenum">1465</span></a>          }
<a name="l1466"><span class="linenum">1466</span></a>  
<a name="l1467"><span class="linenum">1467</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1041" onMouseOver="hilite(1041)" onMouseOut="lolite()" onClick="logVariable('insql')" href="../../_variables/insql.html">$insql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>), <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l1468"><span class="linenum">1468</span></a>  
<a name="l1469"><span class="linenum">1469</span></a>          <a class="var it15765" onMouseOver="hilite(15765)" onMouseOut="lolite()" onClick="logVariable('assignid')" href="../../_variables/assignid.html">$assignid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l1470"><span class="linenum">1470</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['assignmentid1'] = <a class="var it15765" onMouseOver="hilite(15765)" onMouseOut="lolite()" onClick="logVariable('assignid')" href="../../_variables/assignid.html">$assignid</a>;
<a name="l1471"><span class="linenum">1471</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['assignmentid2'] = <a class="var it15765" onMouseOver="hilite(15765)" onMouseOut="lolite()" onClick="logVariable('assignid')" href="../../_variables/assignid.html">$assignid</a>;
<a name="l1472"><span class="linenum">1472</span></a>  
<a name="l1473"><span class="linenum">1473</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT u.id, s.status, s.timemodified AS stime, g.timemodified AS gtime, g.grade FROM {user} u
<a name="l1474"><span class="linenum">1474</span></a>                           LEFT JOIN {assign_submission} s
<a name="l1475"><span class="linenum">1475</span></a>                                  ON u.id = s.userid
<a name="l1476"><span class="linenum">1476</span></a>                                 AND s.assignment = :assignmentid1
<a name="l1477"><span class="linenum">1477</span></a>                                 AND s.latest = 1
<a name="l1478"><span class="linenum">1478</span></a>                           LEFT JOIN {assign_grades} g
<a name="l1479"><span class="linenum">1479</span></a>                                  ON u.id = g.userid
<a name="l1480"><span class="linenum">1480</span></a>                                 AND g.assignment = :assignmentid2
<a name="l1481"><span class="linenum">1481</span></a>                                 AND g.attemptnumber = s.attemptnumber
<a name="l1482"><span class="linenum">1482</span></a>                           WHERE u.id ' . <a class="var it1041" onMouseOver="hilite(1041)" onMouseOut="lolite()" onClick="logVariable('insql')" href="../../_variables/insql.html">$insql</a>;
<a name="l1483"><span class="linenum">1483</span></a>  
<a name="l1484"><span class="linenum">1484</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1485"><span class="linenum">1485</span></a>  
<a name="l1486"><span class="linenum">1486</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l1487"><span class="linenum">1487</span></a>  <span class="comment">            // Get all groups.</span>
<a name="l1488"><span class="linenum">1488</span></a>              <a class="var it6664" onMouseOver="hilite(6664)" onMouseOut="lolite()" onClick="logVariable('allgroups')" href="../../_variables/allgroups.html">$allgroups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l1489"><span class="linenum">1489</span></a>                                                 <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>),
<a name="l1490"><span class="linenum">1490</span></a>                                                 <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmissiongroupingid,
<a name="l1491"><span class="linenum">1491</span></a>                                                 'DISTINCT g.id, g.name');
<a name="l1492"><span class="linenum">1492</span></a>  
<a name="l1493"><span class="linenum">1493</span></a>          }
<a name="l1494"><span class="linenum">1494</span></a>          foreach (<a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a> as <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> =&gt; <a class="var it19859" onMouseOver="hilite(19859)" onMouseOut="lolite()" onClick="logVariable('participant')" href="../../_variables/participant.html">$participant</a>) {
<a name="l1495"><span class="linenum">1495</span></a>              <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;fullname = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it19859" onMouseOver="hilite(19859)" onMouseOut="lolite()" onClick="logVariable('participant')" href="../../_variables/participant.html">$participant</a>);
<a name="l1496"><span class="linenum">1496</span></a>              <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;submitted = false;
<a name="l1497"><span class="linenum">1497</span></a>              <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;requiregrading = false;
<a name="l1498"><span class="linenum">1498</span></a>          }
<a name="l1499"><span class="linenum">1499</span></a>  
<a name="l1500"><span class="linenum">1500</span></a>          foreach (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> as <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> =&gt; <a class="var it32124" onMouseOver="hilite(32124)" onMouseOut="lolite()" onClick="logVariable('submissioninfo')" href="../../_variables/submissioninfo.html">$submissioninfo</a>) {
<a name="l1501"><span class="linenum">1501</span></a>  <span class="comment">            // These filters are 100% the same as the ones in the grading table SQL.</span>
<a name="l1502"><span class="linenum">1502</span></a>              <a class="var it15024" onMouseOver="hilite(15024)" onMouseOut="lolite()" onClick="logVariable('submitted')" href="../../_variables/submitted.html">$submitted</a> = false;
<a name="l1503"><span class="linenum">1503</span></a>              <a class="var it24218" onMouseOver="hilite(24218)" onMouseOut="lolite()" onClick="logVariable('requiregrading')" href="../../_variables/requiregrading.html">$requiregrading</a> = false;
<a name="l1504"><span class="linenum">1504</span></a>  
<a name="l1505"><span class="linenum">1505</span></a>              if (!empty(<a class="var it32124" onMouseOver="hilite(32124)" onMouseOut="lolite()" onClick="logVariable('submissioninfo')" href="../../_variables/submissioninfo.html">$submissioninfo</a>-&gt;<a onClick="logVariable('stime')" class="var it45737" onMouseOver="hilite(45737)" onMouseOut="lolite()" href="../../_variables/stime.html">stime</a>) &amp;&amp; <a class="var it32124" onMouseOver="hilite(32124)" onMouseOut="lolite()" onClick="logVariable('submissioninfo')" href="../../_variables/submissioninfo.html">$submissioninfo</a>-&gt;<a onClick="logVariable('status')" class="var it45737" onMouseOver="hilite(45737)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> == <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>) {
<a name="l1506"><span class="linenum">1506</span></a>                  <a class="var it15024" onMouseOver="hilite(15024)" onMouseOut="lolite()" onClick="logVariable('submitted')" href="../../_variables/submitted.html">$submitted</a> = true;
<a name="l1507"><span class="linenum">1507</span></a>              }
<a name="l1508"><span class="linenum">1508</span></a>  
<a name="l1509"><span class="linenum">1509</span></a>              if (<a class="var it15024" onMouseOver="hilite(15024)" onMouseOut="lolite()" onClick="logVariable('submitted')" href="../../_variables/submitted.html">$submitted</a> &amp;&amp; (<a class="var it32124" onMouseOver="hilite(32124)" onMouseOut="lolite()" onClick="logVariable('submissioninfo')" href="../../_variables/submissioninfo.html">$submissioninfo</a>-&gt;<a onClick="logVariable('stime')" class="var it45737" onMouseOver="hilite(45737)" onMouseOut="lolite()" href="../../_variables/stime.html">stime</a> &gt;= <a class="var it32124" onMouseOver="hilite(32124)" onMouseOut="lolite()" onClick="logVariable('submissioninfo')" href="../../_variables/submissioninfo.html">$submissioninfo</a>-&gt;<a onClick="logVariable('gtime')" class="var it45737" onMouseOver="hilite(45737)" onMouseOut="lolite()" href="../../_variables/gtime.html">gtime</a> ||
<a name="l1510"><span class="linenum">1510</span></a>                      empty(<a class="var it32124" onMouseOver="hilite(32124)" onMouseOut="lolite()" onClick="logVariable('submissioninfo')" href="../../_variables/submissioninfo.html">$submissioninfo</a>-&gt;<a onClick="logVariable('gtime')" class="var it45737" onMouseOver="hilite(45737)" onMouseOut="lolite()" href="../../_variables/gtime.html">gtime</a>) ||
<a name="l1511"><span class="linenum">1511</span></a>                      <a class="var it32124" onMouseOver="hilite(32124)" onMouseOut="lolite()" onClick="logVariable('submissioninfo')" href="../../_variables/submissioninfo.html">$submissioninfo</a>-&gt;<a onClick="logVariable('grade')" class="var it45737" onMouseOver="hilite(45737)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> === null)) {
<a name="l1512"><span class="linenum">1512</span></a>                  <a class="var it24218" onMouseOver="hilite(24218)" onMouseOut="lolite()" onClick="logVariable('requiregrading')" href="../../_variables/requiregrading.html">$requiregrading</a> = true;
<a name="l1513"><span class="linenum">1513</span></a>              }
<a name="l1514"><span class="linenum">1514</span></a>  
<a name="l1515"><span class="linenum">1515</span></a>              <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;submitted = <a class="var it15024" onMouseOver="hilite(15024)" onMouseOut="lolite()" onClick="logVariable('submitted')" href="../../_variables/submitted.html">$submitted</a>;
<a name="l1516"><span class="linenum">1516</span></a>              <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;requiregrading = <a class="var it24218" onMouseOver="hilite(24218)" onMouseOut="lolite()" onClick="logVariable('requiregrading')" href="../../_variables/requiregrading.html">$requiregrading</a>;
<a name="l1517"><span class="linenum">1517</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l1518"><span class="linenum">1518</span></a>                  <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l1519"><span class="linenum">1519</span></a>                  if (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>) {
<a name="l1520"><span class="linenum">1520</span></a>                      <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;groupid = <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1521"><span class="linenum">1521</span></a>                      <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;groupname = <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('name')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l1522"><span class="linenum">1522</span></a>                  }
<a name="l1523"><span class="linenum">1523</span></a>              }
<a name="l1524"><span class="linenum">1524</span></a>          }
<a name="l1525"><span class="linenum">1525</span></a>          return <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>;
<a name="l1526"><span class="linenum">1526</span></a>      }
<a name="l1527"><span class="linenum">1527</span></a>  
<a name="l1528"><span class="linenum">1528</span></a>      <span class="comment">/**</span>
<a name="l1529"><span class="linenum">1529</span></a>  <span class="comment">     * Get the submission status/grading status for all submissions in this assignment.</span>
<a name="l1530"><span class="linenum">1530</span></a>  <span class="comment">     * These statuses match the available filters (requiregrading, submitted, notsubmitted).</span>
<a name="l1531"><span class="linenum">1531</span></a>  <span class="comment">     * If this is a group assignment, group info is also returned.</span>
<a name="l1532"><span class="linenum">1532</span></a>  <span class="comment">     *</span>
<a name="l1533"><span class="linenum">1533</span></a>  <span class="comment">     * @param int $currentgroup</span>
<a name="l1534"><span class="linenum">1534</span></a>  <span class="comment">     * @return array List of user records with extra fields 'submitted', 'notsubmitted', 'requiregrading', 'groupid', 'groupname'</span>
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment">     */</span>
<a name="l1536"><span class="linenum">1536</span></a>      public function <a class="function" onClick="logFunction('list_participants_with_filter_status_and_group')" href="../../_functions/list_participants_with_filter_status_and_group.html" onMouseOver="funcPopup(event,'list_participants_with_filter_status_and_group')">list_participants_with_filter_status_and_group</a>(<a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>) {
<a name="l1537"><span class="linenum">1537</span></a>          <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('list_participants')" href="../../_functions/list_participants.html" onMouseOver="funcPopup(event,'list_participants')">list_participants</a>(<a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, false);
<a name="l1538"><span class="linenum">1538</span></a>  
<a name="l1539"><span class="linenum">1539</span></a>          if (empty(<a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>)) {
<a name="l1540"><span class="linenum">1540</span></a>              return <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>;
<a name="l1541"><span class="linenum">1541</span></a>          } else {
<a name="l1542"><span class="linenum">1542</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_info_for_participants')" href="../../_functions/get_submission_info_for_participants.html" onMouseOver="funcPopup(event,'get_submission_info_for_participants')">get_submission_info_for_participants</a>(<a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>);
<a name="l1543"><span class="linenum">1543</span></a>          }
<a name="l1544"><span class="linenum">1544</span></a>      }
<a name="l1545"><span class="linenum">1545</span></a>  
<a name="l1546"><span class="linenum">1546</span></a>      <span class="comment">/**</span>
<a name="l1547"><span class="linenum">1547</span></a>  <span class="comment">     * Load a list of users enrolled in the current course with the specified permission and group.</span>
<a name="l1548"><span class="linenum">1548</span></a>  <span class="comment">     * 0 for no group.</span>
<a name="l1549"><span class="linenum">1549</span></a>  <span class="comment">     *</span>
<a name="l1550"><span class="linenum">1550</span></a>  <span class="comment">     * @param int $currentgroup</span>
<a name="l1551"><span class="linenum">1551</span></a>  <span class="comment">     * @param bool $idsonly</span>
<a name="l1552"><span class="linenum">1552</span></a>  <span class="comment">     * @return array List of user records</span>
<a name="l1553"><span class="linenum">1553</span></a>  <span class="comment">     */</span>
<a name="l1554"><span class="linenum">1554</span></a>      public function <a class="function" onClick="logFunction('list_participants')" href="../../_functions/list_participants.html" onMouseOver="funcPopup(event,'list_participants')">list_participants</a>(<a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, <a class="var it32126" onMouseOver="hilite(32126)" onMouseOut="lolite()" onClick="logVariable('idsonly')" href="../../_variables/idsonly.html">$idsonly</a>) {
<a name="l1555"><span class="linenum">1555</span></a>  
<a name="l1556"><span class="linenum">1556</span></a>          if (empty(<a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>)) {
<a name="l1557"><span class="linenum">1557</span></a>              <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = 0;
<a name="l1558"><span class="linenum">1558</span></a>          }
<a name="l1559"><span class="linenum">1559</span></a>  
<a name="l1560"><span class="linenum">1560</span></a>          <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id . '-' . <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> . '-' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_only_active_users')" href="../../_functions/show_only_active_users.html" onMouseOver="funcPopup(event,'show_only_active_users')">show_only_active_users</a>();
<a name="l1561"><span class="linenum">1561</span></a>          if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('participants')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/participants.html">participants</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>])) {
<a name="l1562"><span class="linenum">1562</span></a>              <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a> = 'u.lastname, u.firstname, u.id';
<a name="l1563"><span class="linenum">1563</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>()) {
<a name="l1564"><span class="linenum">1564</span></a>                  <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a> = 'u.id';
<a name="l1565"><span class="linenum">1565</span></a>              }
<a name="l1566"><span class="linenum">1566</span></a>              <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> = <a class="function" onClick="logFunction('get_enrolled_users')" href="../../_functions/get_enrolled_users.html" onMouseOver="funcPopup(event,'get_enrolled_users')">get_enrolled_users</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, 'mod/assign:submit', <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, 'u.*', <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a>, null, null,
<a name="l1567"><span class="linenum">1567</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_only_active_users')" href="../../_functions/show_only_active_users.html" onMouseOver="funcPopup(event,'show_only_active_users')">show_only_active_users</a>());
<a name="l1568"><span class="linenum">1568</span></a>  
<a name="l1569"><span class="linenum">1569</span></a>              <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>();
<a name="l1570"><span class="linenum">1570</span></a>              <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = new \core_availability\info_module(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l1571"><span class="linenum">1571</span></a>              <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> = <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a class="function" onClick="logFunction('filter_user_list')" href="../../_functions/filter_user_list.html" onMouseOver="funcPopup(event,'filter_user_list')">filter_user_list</a>(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>);
<a name="l1572"><span class="linenum">1572</span></a>  
<a name="l1573"><span class="linenum">1573</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('participants')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/participants.html">participants</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] = <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>;
<a name="l1574"><span class="linenum">1574</span></a>          }
<a name="l1575"><span class="linenum">1575</span></a>  
<a name="l1576"><span class="linenum">1576</span></a>          if (<a class="var it32126" onMouseOver="hilite(32126)" onMouseOut="lolite()" onClick="logVariable('idsonly')" href="../../_variables/idsonly.html">$idsonly</a>) {
<a name="l1577"><span class="linenum">1577</span></a>              <a class="var it32127" onMouseOver="hilite(32127)" onMouseOut="lolite()" onClick="logVariable('idslist')" href="../../_variables/idslist.html">$idslist</a> = array();
<a name="l1578"><span class="linenum">1578</span></a>              foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('participants')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/participants.html">participants</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> =&gt; <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l1579"><span class="linenum">1579</span></a>                  <a class="var it32127" onMouseOver="hilite(32127)" onMouseOut="lolite()" onClick="logVariable('idslist')" href="../../_variables/idslist.html">$idslist</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>] = new stdClass();
<a name="l1580"><span class="linenum">1580</span></a>                  <a class="var it32127" onMouseOver="hilite(32127)" onMouseOut="lolite()" onClick="logVariable('idslist')" href="../../_variables/idslist.html">$idslist</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>]-&gt;id = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>;
<a name="l1581"><span class="linenum">1581</span></a>              }
<a name="l1582"><span class="linenum">1582</span></a>              return <a class="var it32127" onMouseOver="hilite(32127)" onMouseOut="lolite()" onClick="logVariable('idslist')" href="../../_variables/idslist.html">$idslist</a>;
<a name="l1583"><span class="linenum">1583</span></a>          }
<a name="l1584"><span class="linenum">1584</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('participants')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/participants.html">participants</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>];
<a name="l1585"><span class="linenum">1585</span></a>      }
<a name="l1586"><span class="linenum">1586</span></a>  
<a name="l1587"><span class="linenum">1587</span></a>      <span class="comment">/**</span>
<a name="l1588"><span class="linenum">1588</span></a>  <span class="comment">     * Load a user if they are enrolled in the current course. Populated with submission</span>
<a name="l1589"><span class="linenum">1589</span></a>  <span class="comment">     * status for this assignment.</span>
<a name="l1590"><span class="linenum">1590</span></a>  <span class="comment">     *</span>
<a name="l1591"><span class="linenum">1591</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l1592"><span class="linenum">1592</span></a>  <span class="comment">     * @return null|stdClass user record</span>
<a name="l1593"><span class="linenum">1593</span></a>  <span class="comment">     */</span>
<a name="l1594"><span class="linenum">1594</span></a>      public function <a class="function" onClick="logFunction('get_participant')" href="../../_functions/get_participant.html" onMouseOver="funcPopup(event,'get_participant')">get_participant</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l1595"><span class="linenum">1595</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1596"><span class="linenum">1596</span></a>  
<a name="l1597"><span class="linenum">1597</span></a>          <a class="var it19859" onMouseOver="hilite(19859)" onMouseOut="lolite()" onClick="logVariable('participant')" href="../../_variables/participant.html">$participant</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l1598"><span class="linenum">1598</span></a>          if (!<a class="var it19859" onMouseOver="hilite(19859)" onMouseOut="lolite()" onClick="logVariable('participant')" href="../../_variables/participant.html">$participant</a>) {
<a name="l1599"><span class="linenum">1599</span></a>              return null;
<a name="l1600"><span class="linenum">1600</span></a>          }
<a name="l1601"><span class="linenum">1601</span></a>  
<a name="l1602"><span class="linenum">1602</span></a>          if (!<a class="function" onClick="logFunction('is_enrolled')" href="../../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, <a class="var it19859" onMouseOver="hilite(19859)" onMouseOut="lolite()" onClick="logVariable('participant')" href="../../_variables/participant.html">$participant</a>, 'mod/assign:submit', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_only_active_users')" href="../../_functions/show_only_active_users.html" onMouseOver="funcPopup(event,'show_only_active_users')">show_only_active_users</a>())) {
<a name="l1603"><span class="linenum">1603</span></a>              return null;
<a name="l1604"><span class="linenum">1604</span></a>          }
<a name="l1605"><span class="linenum">1605</span></a>  
<a name="l1606"><span class="linenum">1606</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_info_for_participants')" href="../../_functions/get_submission_info_for_participants.html" onMouseOver="funcPopup(event,'get_submission_info_for_participants')">get_submission_info_for_participants</a>(array(<a class="var it19859" onMouseOver="hilite(19859)" onMouseOut="lolite()" onClick="logVariable('participant')" href="../../_variables/participant.html">$participant</a>-&gt;<a onClick="logVariable('id')" class="var it43308" onMouseOver="hilite(43308)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> =&gt; <a class="var it19859" onMouseOver="hilite(19859)" onMouseOut="lolite()" onClick="logVariable('participant')" href="../../_variables/participant.html">$participant</a>));
<a name="l1607"><span class="linenum">1607</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>[<a class="var it19859" onMouseOver="hilite(19859)" onMouseOut="lolite()" onClick="logVariable('participant')" href="../../_variables/participant.html">$participant</a>-&gt;<a onClick="logVariable('id')" class="var it43308" onMouseOver="hilite(43308)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>];
<a name="l1608"><span class="linenum">1608</span></a>      }
<a name="l1609"><span class="linenum">1609</span></a>  
<a name="l1610"><span class="linenum">1610</span></a>      <span class="comment">/**</span>
<a name="l1611"><span class="linenum">1611</span></a>  <span class="comment">     * Load a count of valid teams for this assignment.</span>
<a name="l1612"><span class="linenum">1612</span></a>  <span class="comment">     *</span>
<a name="l1613"><span class="linenum">1613</span></a>  <span class="comment">     * @param int $activitygroup Activity active group</span>
<a name="l1614"><span class="linenum">1614</span></a>  <span class="comment">     * @return int number of valid teams</span>
<a name="l1615"><span class="linenum">1615</span></a>  <span class="comment">     */</span>
<a name="l1616"><span class="linenum">1616</span></a>      public function <a class="function" onClick="logFunction('count_teams')" href="../../_functions/count_teams.html" onMouseOver="funcPopup(event,'count_teams')">count_teams</a>(<a class="var it32128" onMouseOver="hilite(32128)" onMouseOut="lolite()" onClick="logVariable('activitygroup')" href="../../_variables/activitygroup.html">$activitygroup</a> = 0) {
<a name="l1617"><span class="linenum">1617</span></a>  
<a name="l1618"><span class="linenum">1618</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = 0;
<a name="l1619"><span class="linenum">1619</span></a>  
<a name="l1620"><span class="linenum">1620</span></a>          <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('list_participants')" href="../../_functions/list_participants.html" onMouseOver="funcPopup(event,'list_participants')">list_participants</a>(<a class="var it32128" onMouseOver="hilite(32128)" onMouseOut="lolite()" onClick="logVariable('activitygroup')" href="../../_variables/activitygroup.html">$activitygroup</a>, true);
<a name="l1621"><span class="linenum">1621</span></a>  
<a name="l1622"><span class="linenum">1622</span></a>  <span class="comment">        // If a team submission grouping id is provided all good as all returned groups</span>
<a name="l1623"><span class="linenum">1623</span></a>  <span class="comment">        // are the submission teams, but if no team submission grouping was specified</span>
<a name="l1624"><span class="linenum">1624</span></a>  <span class="comment">        // $groups will contain all participants groups.</span>
<a name="l1625"><span class="linenum">1625</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmissiongroupingid) {
<a name="l1626"><span class="linenum">1626</span></a>  
<a name="l1627"><span class="linenum">1627</span></a>  <span class="comment">            // We restrict the users to the selected group ones.</span>
<a name="l1628"><span class="linenum">1628</span></a>              <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l1629"><span class="linenum">1629</span></a>                                              <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>),
<a name="l1630"><span class="linenum">1630</span></a>                                              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmissiongroupingid,
<a name="l1631"><span class="linenum">1631</span></a>                                              'DISTINCT g.id, g.name');
<a name="l1632"><span class="linenum">1632</span></a>  
<a name="l1633"><span class="linenum">1633</span></a>              <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>);
<a name="l1634"><span class="linenum">1634</span></a>  
<a name="l1635"><span class="linenum">1635</span></a>  <span class="comment">            // When a specific group is selected we don't count the default group users.</span>
<a name="l1636"><span class="linenum">1636</span></a>              if (<a class="var it32128" onMouseOver="hilite(32128)" onMouseOut="lolite()" onClick="logVariable('activitygroup')" href="../../_variables/activitygroup.html">$activitygroup</a> == 0) {
<a name="l1637"><span class="linenum">1637</span></a>                  if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;preventsubmissionnotingroup)) {
<a name="l1638"><span class="linenum">1638</span></a>  <span class="comment">                    // See if there are any users in the default group.</span>
<a name="l1639"><span class="linenum">1639</span></a>                      <a class="var it32129" onMouseOver="hilite(32129)" onMouseOut="lolite()" onClick="logVariable('defaultusers')" href="../../_variables/defaultusers.html">$defaultusers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group_members')" href="../../_functions/get_submission_group_members.html" onMouseOver="funcPopup(event,'get_submission_group_members')">get_submission_group_members</a>(0, true);
<a name="l1640"><span class="linenum">1640</span></a>                      if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32129" onMouseOver="hilite(32129)" onMouseOut="lolite()" onClick="logVariable('defaultusers')" href="../../_variables/defaultusers.html">$defaultusers</a>) &gt; 0) {
<a name="l1641"><span class="linenum">1641</span></a>                          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> += 1;
<a name="l1642"><span class="linenum">1642</span></a>                      }
<a name="l1643"><span class="linenum">1643</span></a>                  }
<a name="l1644"><span class="linenum">1644</span></a>              }
<a name="l1645"><span class="linenum">1645</span></a>          } else {
<a name="l1646"><span class="linenum">1646</span></a>  <span class="comment">            // It is faster to loop around participants if no grouping was specified.</span>
<a name="l1647"><span class="linenum">1647</span></a>              <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> = array();
<a name="l1648"><span class="linenum">1648</span></a>              foreach (<a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a> as <a class="var it19859" onMouseOver="hilite(19859)" onMouseOut="lolite()" onClick="logVariable('participant')" href="../../_variables/participant.html">$participant</a>) {
<a name="l1649"><span class="linenum">1649</span></a>                  if (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it19859" onMouseOver="hilite(19859)" onMouseOut="lolite()" onClick="logVariable('participant')" href="../../_variables/participant.html">$participant</a>-&gt;<a onClick="logVariable('id')" class="var it43308" onMouseOver="hilite(43308)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l1650"><span class="linenum">1650</span></a>                      <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>[<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = true;
<a name="l1651"><span class="linenum">1651</span></a>                  } else if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;preventsubmissionnotingroup)) {
<a name="l1652"><span class="linenum">1652</span></a>                      <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>[0] = true;
<a name="l1653"><span class="linenum">1653</span></a>                  }
<a name="l1654"><span class="linenum">1654</span></a>              }
<a name="l1655"><span class="linenum">1655</span></a>  
<a name="l1656"><span class="linenum">1656</span></a>              <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>);
<a name="l1657"><span class="linenum">1657</span></a>          }
<a name="l1658"><span class="linenum">1658</span></a>  
<a name="l1659"><span class="linenum">1659</span></a>          return <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>;
<a name="l1660"><span class="linenum">1660</span></a>      }
<a name="l1661"><span class="linenum">1661</span></a>  
<a name="l1662"><span class="linenum">1662</span></a>      <span class="comment">/**</span>
<a name="l1663"><span class="linenum">1663</span></a>  <span class="comment">     * Load a count of active users enrolled in the current course with the specified permission and group.</span>
<a name="l1664"><span class="linenum">1664</span></a>  <span class="comment">     * 0 for no group.</span>
<a name="l1665"><span class="linenum">1665</span></a>  <span class="comment">     *</span>
<a name="l1666"><span class="linenum">1666</span></a>  <span class="comment">     * @param int $currentgroup</span>
<a name="l1667"><span class="linenum">1667</span></a>  <span class="comment">     * @return int number of matching users</span>
<a name="l1668"><span class="linenum">1668</span></a>  <span class="comment">     */</span>
<a name="l1669"><span class="linenum">1669</span></a>      public function <a class="function" onClick="logFunction('count_participants')" href="../../_functions/count_participants.html" onMouseOver="funcPopup(event,'count_participants')">count_participants</a>(<a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>) {
<a name="l1670"><span class="linenum">1670</span></a>          return <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('list_participants')" href="../../_functions/list_participants.html" onMouseOver="funcPopup(event,'list_participants')">list_participants</a>(<a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, true));
<a name="l1671"><span class="linenum">1671</span></a>      }
<a name="l1672"><span class="linenum">1672</span></a>  
<a name="l1673"><span class="linenum">1673</span></a>      <span class="comment">/**</span>
<a name="l1674"><span class="linenum">1674</span></a>  <span class="comment">     * Load a count of active users submissions in the current module that require grading</span>
<a name="l1675"><span class="linenum">1675</span></a>  <span class="comment">     * This means the submission modification time is more recent than the</span>
<a name="l1676"><span class="linenum">1676</span></a>  <span class="comment">     * grading modification time and the status is SUBMITTED.</span>
<a name="l1677"><span class="linenum">1677</span></a>  <span class="comment">     *</span>
<a name="l1678"><span class="linenum">1678</span></a>  <span class="comment">     * @return int number of matching submissions</span>
<a name="l1679"><span class="linenum">1679</span></a>  <span class="comment">     */</span>
<a name="l1680"><span class="linenum">1680</span></a>      public function <a class="function" onClick="logFunction('count_submissions_need_grading')" href="../../_functions/count_submissions_need_grading.html" onMouseOver="funcPopup(event,'count_submissions_need_grading')">count_submissions_need_grading</a>() {
<a name="l1681"><span class="linenum">1681</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1682"><span class="linenum">1682</span></a>  
<a name="l1683"><span class="linenum">1683</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l1684"><span class="linenum">1684</span></a>  <span class="comment">            // This does not make sense for group assignment because the submission is shared.</span>
<a name="l1685"><span class="linenum">1685</span></a>              return 0;
<a name="l1686"><span class="linenum">1686</span></a>          }
<a name="l1687"><span class="linenum">1687</span></a>  
<a name="l1688"><span class="linenum">1688</span></a>          <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), true);
<a name="l1689"><span class="linenum">1689</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it4199" onMouseOver="hilite(4199)" onMouseOut="lolite()" onClick="logVariable('esql')" href="../../_variables/esql.html">$esql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="function" onClick="logFunction('get_enrolled_sql')" href="../../_functions/get_enrolled_sql.html" onMouseOver="funcPopup(event,'get_enrolled_sql')">get_enrolled_sql</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(), 'mod/assign:submit', <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, true);
<a name="l1690"><span class="linenum">1690</span></a>  
<a name="l1691"><span class="linenum">1691</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['assignid'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l1692"><span class="linenum">1692</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['submitted'] = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>;
<a name="l1693"><span class="linenum">1693</span></a>  
<a name="l1694"><span class="linenum">1694</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(s.userid)
<a name="l1695"><span class="linenum">1695</span></a>                     FROM {assign_submission} s
<a name="l1696"><span class="linenum">1696</span></a>                     LEFT JOIN {assign_grades} g ON
<a name="l1697"><span class="linenum">1697</span></a>                          s.assignment = g.assignment AND
<a name="l1698"><span class="linenum">1698</span></a>                          s.userid = g.userid AND
<a name="l1699"><span class="linenum">1699</span></a>                          g.attemptnumber = s.attemptnumber
<a name="l1700"><span class="linenum">1700</span></a>                     <a class="function" onClick="logFunction('JOIN')" href="../../_functions/join.html" onMouseOver="funcPopup(event,'join')">JOIN</a>(' . <a class="var it4199" onMouseOver="hilite(4199)" onMouseOut="lolite()" onClick="logVariable('esql')" href="../../_variables/esql.html">$esql</a> . ') e ON e.id = s.userid
<a name="l1701"><span class="linenum">1701</span></a>                     WHERE
<a name="l1702"><span class="linenum">1702</span></a>                          s.latest = 1 AND
<a name="l1703"><span class="linenum">1703</span></a>                          s.assignment = :assignid AND
<a name="l1704"><span class="linenum">1704</span></a>                          s.timemodified IS NOT NULL AND
<a name="l1705"><span class="linenum">1705</span></a>                          s.status = :submitted AND
<a name="l1706"><span class="linenum">1706</span></a>                          (s.timemodified &gt;= g.timemodified OR g.timemodified IS NULL OR g.grade IS NULL)';
<a name="l1707"><span class="linenum">1707</span></a>  
<a name="l1708"><span class="linenum">1708</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1709"><span class="linenum">1709</span></a>      }
<a name="l1710"><span class="linenum">1710</span></a>  
<a name="l1711"><span class="linenum">1711</span></a>      <span class="comment">/**</span>
<a name="l1712"><span class="linenum">1712</span></a>  <span class="comment">     * Load a count of grades.</span>
<a name="l1713"><span class="linenum">1713</span></a>  <span class="comment">     *</span>
<a name="l1714"><span class="linenum">1714</span></a>  <span class="comment">     * @return int number of grades</span>
<a name="l1715"><span class="linenum">1715</span></a>  <span class="comment">     */</span>
<a name="l1716"><span class="linenum">1716</span></a>      public function <a class="function" onClick="logFunction('count_grades')" href="../../_functions/count_grades.html" onMouseOver="funcPopup(event,'count_grades')">count_grades</a>() {
<a name="l1717"><span class="linenum">1717</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1718"><span class="linenum">1718</span></a>  
<a name="l1719"><span class="linenum">1719</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_instance')" href="../../_functions/has_instance.html" onMouseOver="funcPopup(event,'has_instance')">has_instance</a>()) {
<a name="l1720"><span class="linenum">1720</span></a>              return 0;
<a name="l1721"><span class="linenum">1721</span></a>          }
<a name="l1722"><span class="linenum">1722</span></a>  
<a name="l1723"><span class="linenum">1723</span></a>          <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), true);
<a name="l1724"><span class="linenum">1724</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it4199" onMouseOver="hilite(4199)" onMouseOut="lolite()" onClick="logVariable('esql')" href="../../_variables/esql.html">$esql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="function" onClick="logFunction('get_enrolled_sql')" href="../../_functions/get_enrolled_sql.html" onMouseOver="funcPopup(event,'get_enrolled_sql')">get_enrolled_sql</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(), 'mod/assign:submit', <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, true);
<a name="l1725"><span class="linenum">1725</span></a>  
<a name="l1726"><span class="linenum">1726</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['assignid'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l1727"><span class="linenum">1727</span></a>  
<a name="l1728"><span class="linenum">1728</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(g.userid)
<a name="l1729"><span class="linenum">1729</span></a>                     FROM {assign_grades} g
<a name="l1730"><span class="linenum">1730</span></a>                     <a class="function" onClick="logFunction('JOIN')" href="../../_functions/join.html" onMouseOver="funcPopup(event,'join')">JOIN</a>(' . <a class="var it4199" onMouseOver="hilite(4199)" onMouseOut="lolite()" onClick="logVariable('esql')" href="../../_variables/esql.html">$esql</a> . ') e ON e.id = g.userid
<a name="l1731"><span class="linenum">1731</span></a>                     WHERE g.assignment = :assignid';
<a name="l1732"><span class="linenum">1732</span></a>  
<a name="l1733"><span class="linenum">1733</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1734"><span class="linenum">1734</span></a>      }
<a name="l1735"><span class="linenum">1735</span></a>  
<a name="l1736"><span class="linenum">1736</span></a>      <span class="comment">/**</span>
<a name="l1737"><span class="linenum">1737</span></a>  <span class="comment">     * Load a count of submissions.</span>
<a name="l1738"><span class="linenum">1738</span></a>  <span class="comment">     *</span>
<a name="l1739"><span class="linenum">1739</span></a>  <span class="comment">     * @param bool $includenew When true, also counts the submissions with status 'new'.</span>
<a name="l1740"><span class="linenum">1740</span></a>  <span class="comment">     * @return int number of submissions</span>
<a name="l1741"><span class="linenum">1741</span></a>  <span class="comment">     */</span>
<a name="l1742"><span class="linenum">1742</span></a>      public function <a class="function" onClick="logFunction('count_submissions')" href="../../_functions/count_submissions.html" onMouseOver="funcPopup(event,'count_submissions')">count_submissions</a>(<a class="var it32130" onMouseOver="hilite(32130)" onMouseOut="lolite()" onClick="logVariable('includenew')" href="../../_variables/includenew.html">$includenew</a> = false) {
<a name="l1743"><span class="linenum">1743</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1744"><span class="linenum">1744</span></a>  
<a name="l1745"><span class="linenum">1745</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_instance')" href="../../_functions/has_instance.html" onMouseOver="funcPopup(event,'has_instance')">has_instance</a>()) {
<a name="l1746"><span class="linenum">1746</span></a>              return 0;
<a name="l1747"><span class="linenum">1747</span></a>          }
<a name="l1748"><span class="linenum">1748</span></a>  
<a name="l1749"><span class="linenum">1749</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l1750"><span class="linenum">1750</span></a>          <a class="var it32131" onMouseOver="hilite(32131)" onMouseOut="lolite()" onClick="logVariable('sqlnew')" href="../../_variables/sqlnew.html">$sqlnew</a> = '';
<a name="l1751"><span class="linenum">1751</span></a>  
<a name="l1752"><span class="linenum">1752</span></a>          if (!<a class="var it32130" onMouseOver="hilite(32130)" onMouseOut="lolite()" onClick="logVariable('includenew')" href="../../_variables/includenew.html">$includenew</a>) {
<a name="l1753"><span class="linenum">1753</span></a>              <a class="var it32131" onMouseOver="hilite(32131)" onMouseOut="lolite()" onClick="logVariable('sqlnew')" href="../../_variables/sqlnew.html">$sqlnew</a> = ' AND s.status &lt;&gt; :status ';
<a name="l1754"><span class="linenum">1754</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['status'] = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_NEW')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_NEW.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_NEW')">ASSIGN_SUBMISSION_STATUS_NEW</a>;
<a name="l1755"><span class="linenum">1755</span></a>          }
<a name="l1756"><span class="linenum">1756</span></a>  
<a name="l1757"><span class="linenum">1757</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l1758"><span class="linenum">1758</span></a>  <span class="comment">            // We cannot join on the enrolment tables for group submissions (no userid).</span>
<a name="l1759"><span class="linenum">1759</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT s.groupid)
<a name="l1760"><span class="linenum">1760</span></a>                          FROM {assign_submission} s
<a name="l1761"><span class="linenum">1761</span></a>                          WHERE
<a name="l1762"><span class="linenum">1762</span></a>                              s.assignment = :assignid AND
<a name="l1763"><span class="linenum">1763</span></a>                              s.timemodified IS NOT NULL AND
<a name="l1764"><span class="linenum">1764</span></a>                              s.userid = :groupuserid' .
<a name="l1765"><span class="linenum">1765</span></a>                              <a class="var it32131" onMouseOver="hilite(32131)" onMouseOut="lolite()" onClick="logVariable('sqlnew')" href="../../_variables/sqlnew.html">$sqlnew</a>;
<a name="l1766"><span class="linenum">1766</span></a>  
<a name="l1767"><span class="linenum">1767</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['assignid'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l1768"><span class="linenum">1768</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['groupuserid'] = 0;
<a name="l1769"><span class="linenum">1769</span></a>          } else {
<a name="l1770"><span class="linenum">1770</span></a>              <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), true);
<a name="l1771"><span class="linenum">1771</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it4199" onMouseOver="hilite(4199)" onMouseOut="lolite()" onClick="logVariable('esql')" href="../../_variables/esql.html">$esql</a>, <a class="var it11371" onMouseOver="hilite(11371)" onMouseOut="lolite()" onClick="logVariable('enrolparams')" href="../../_variables/enrolparams.html">$enrolparams</a>) = <a class="function" onClick="logFunction('get_enrolled_sql')" href="../../_functions/get_enrolled_sql.html" onMouseOver="funcPopup(event,'get_enrolled_sql')">get_enrolled_sql</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(), 'mod/assign:submit', <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, true);
<a name="l1772"><span class="linenum">1772</span></a>  
<a name="l1773"><span class="linenum">1773</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it11371" onMouseOver="hilite(11371)" onMouseOut="lolite()" onClick="logVariable('enrolparams')" href="../../_variables/enrolparams.html">$enrolparams</a>);
<a name="l1774"><span class="linenum">1774</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['assignid'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l1775"><span class="linenum">1775</span></a>  
<a name="l1776"><span class="linenum">1776</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT s.userid)
<a name="l1777"><span class="linenum">1777</span></a>                         FROM {assign_submission} s
<a name="l1778"><span class="linenum">1778</span></a>                         <a class="function" onClick="logFunction('JOIN')" href="../../_functions/join.html" onMouseOver="funcPopup(event,'join')">JOIN</a>(' . <a class="var it4199" onMouseOver="hilite(4199)" onMouseOut="lolite()" onClick="logVariable('esql')" href="../../_variables/esql.html">$esql</a> . ') e ON e.id = s.userid
<a name="l1779"><span class="linenum">1779</span></a>                         WHERE
<a name="l1780"><span class="linenum">1780</span></a>                              s.assignment = :assignid AND
<a name="l1781"><span class="linenum">1781</span></a>                              s.timemodified IS NOT NULL ' .
<a name="l1782"><span class="linenum">1782</span></a>                              <a class="var it32131" onMouseOver="hilite(32131)" onMouseOut="lolite()" onClick="logVariable('sqlnew')" href="../../_variables/sqlnew.html">$sqlnew</a>;
<a name="l1783"><span class="linenum">1783</span></a>  
<a name="l1784"><span class="linenum">1784</span></a>          }
<a name="l1785"><span class="linenum">1785</span></a>  
<a name="l1786"><span class="linenum">1786</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1787"><span class="linenum">1787</span></a>      }
<a name="l1788"><span class="linenum">1788</span></a>  
<a name="l1789"><span class="linenum">1789</span></a>      <span class="comment">/**</span>
<a name="l1790"><span class="linenum">1790</span></a>  <span class="comment">     * Load a count of submissions with a specified status.</span>
<a name="l1791"><span class="linenum">1791</span></a>  <span class="comment">     *</span>
<a name="l1792"><span class="linenum">1792</span></a>  <span class="comment">     * @param string $status The submission status - should match one of the constants</span>
<a name="l1793"><span class="linenum">1793</span></a>  <span class="comment">     * @return int number of matching submissions</span>
<a name="l1794"><span class="linenum">1794</span></a>  <span class="comment">     */</span>
<a name="l1795"><span class="linenum">1795</span></a>      public function <a class="function" onClick="logFunction('count_submissions_with_status')" href="../../_functions/count_submissions_with_status.html" onMouseOver="funcPopup(event,'count_submissions_with_status')">count_submissions_with_status</a>(<a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>) {
<a name="l1796"><span class="linenum">1796</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1797"><span class="linenum">1797</span></a>  
<a name="l1798"><span class="linenum">1798</span></a>          <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), true);
<a name="l1799"><span class="linenum">1799</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it4199" onMouseOver="hilite(4199)" onMouseOut="lolite()" onClick="logVariable('esql')" href="../../_variables/esql.html">$esql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="function" onClick="logFunction('get_enrolled_sql')" href="../../_functions/get_enrolled_sql.html" onMouseOver="funcPopup(event,'get_enrolled_sql')">get_enrolled_sql</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(), 'mod/assign:submit', <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, true);
<a name="l1800"><span class="linenum">1800</span></a>  
<a name="l1801"><span class="linenum">1801</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['assignid'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l1802"><span class="linenum">1802</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['assignid2'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l1803"><span class="linenum">1803</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['submissionstatus'] = <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>;
<a name="l1804"><span class="linenum">1804</span></a>  
<a name="l1805"><span class="linenum">1805</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l1806"><span class="linenum">1806</span></a>  
<a name="l1807"><span class="linenum">1807</span></a>              <a class="var it32132" onMouseOver="hilite(32132)" onMouseOut="lolite()" onClick="logVariable('groupsstr')" href="../../_variables/groupsstr.html">$groupsstr</a> = '';
<a name="l1808"><span class="linenum">1808</span></a>              if (<a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> != 0) {
<a name="l1809"><span class="linenum">1809</span></a>  <span class="comment">                // If there is an active group we should only display the current group users groups.</span>
<a name="l1810"><span class="linenum">1810</span></a>                  <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('list_participants')" href="../../_functions/list_participants.html" onMouseOver="funcPopup(event,'list_participants')">list_participants</a>(<a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, true);
<a name="l1811"><span class="linenum">1811</span></a>                  <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l1812"><span class="linenum">1812</span></a>                                                  <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a>),
<a name="l1813"><span class="linenum">1813</span></a>                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmissiongroupingid,
<a name="l1814"><span class="linenum">1814</span></a>                                                  'DISTINCT g.id, g.name');
<a name="l1815"><span class="linenum">1815</span></a>                  <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it32133" onMouseOver="hilite(32133)" onMouseOut="lolite()" onClick="logVariable('groupssql')" href="../../_variables/groupssql.html">$groupssql</a>, <a class="var it32134" onMouseOver="hilite(32134)" onMouseOut="lolite()" onClick="logVariable('groupsparams')" href="../../_variables/groupsparams.html">$groupsparams</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>), <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l1816"><span class="linenum">1816</span></a>                  <a class="var it32132" onMouseOver="hilite(32132)" onMouseOut="lolite()" onClick="logVariable('groupsstr')" href="../../_variables/groupsstr.html">$groupsstr</a> = 's.groupid ' . <a class="var it32133" onMouseOver="hilite(32133)" onMouseOut="lolite()" onClick="logVariable('groupssql')" href="../../_variables/groupssql.html">$groupssql</a> . ' AND';
<a name="l1817"><span class="linenum">1817</span></a>                  <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> + <a class="var it32134" onMouseOver="hilite(32134)" onMouseOut="lolite()" onClick="logVariable('groupsparams')" href="../../_variables/groupsparams.html">$groupsparams</a>;
<a name="l1818"><span class="linenum">1818</span></a>              }
<a name="l1819"><span class="linenum">1819</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(s.groupid)
<a name="l1820"><span class="linenum">1820</span></a>                          FROM {assign_submission} s
<a name="l1821"><span class="linenum">1821</span></a>                          WHERE
<a name="l1822"><span class="linenum">1822</span></a>                              s.latest = 1 AND
<a name="l1823"><span class="linenum">1823</span></a>                              s.assignment = :assignid AND
<a name="l1824"><span class="linenum">1824</span></a>                              s.timemodified IS NOT NULL AND
<a name="l1825"><span class="linenum">1825</span></a>                              s.userid = :groupuserid AND '
<a name="l1826"><span class="linenum">1826</span></a>                              . <a class="var it32132" onMouseOver="hilite(32132)" onMouseOut="lolite()" onClick="logVariable('groupsstr')" href="../../_variables/groupsstr.html">$groupsstr</a> . '
<a name="l1827"><span class="linenum">1827</span></a>                              s.status = :submissionstatus';
<a name="l1828"><span class="linenum">1828</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['groupuserid'] = 0;
<a name="l1829"><span class="linenum">1829</span></a>          } else {
<a name="l1830"><span class="linenum">1830</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(s.userid)
<a name="l1831"><span class="linenum">1831</span></a>                          FROM {assign_submission} s
<a name="l1832"><span class="linenum">1832</span></a>                          <a class="function" onClick="logFunction('JOIN')" href="../../_functions/join.html" onMouseOver="funcPopup(event,'join')">JOIN</a>(' . <a class="var it4199" onMouseOver="hilite(4199)" onMouseOut="lolite()" onClick="logVariable('esql')" href="../../_variables/esql.html">$esql</a> . ') e ON e.id = s.userid
<a name="l1833"><span class="linenum">1833</span></a>                          WHERE
<a name="l1834"><span class="linenum">1834</span></a>                              s.latest = 1 AND
<a name="l1835"><span class="linenum">1835</span></a>                              s.assignment = :assignid AND
<a name="l1836"><span class="linenum">1836</span></a>                              s.timemodified IS NOT NULL AND
<a name="l1837"><span class="linenum">1837</span></a>                              s.status = :submissionstatus';
<a name="l1838"><span class="linenum">1838</span></a>  
<a name="l1839"><span class="linenum">1839</span></a>          }
<a name="l1840"><span class="linenum">1840</span></a>  
<a name="l1841"><span class="linenum">1841</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1842"><span class="linenum">1842</span></a>      }
<a name="l1843"><span class="linenum">1843</span></a>  
<a name="l1844"><span class="linenum">1844</span></a>      <span class="comment">/**</span>
<a name="l1845"><span class="linenum">1845</span></a>  <span class="comment">     * Utility function to get the userid for every row in the grading table</span>
<a name="l1846"><span class="linenum">1846</span></a>  <span class="comment">     * so the order can be frozen while we iterate it.</span>
<a name="l1847"><span class="linenum">1847</span></a>  <span class="comment">     *</span>
<a name="l1848"><span class="linenum">1848</span></a>  <span class="comment">     * @return array An array of userids</span>
<a name="l1849"><span class="linenum">1849</span></a>  <span class="comment">     */</span>
<a name="l1850"><span class="linenum">1850</span></a>      protected function <a class="function" onClick="logFunction('get_grading_userid_list')" href="../../_functions/get_grading_userid_list.html" onMouseOver="funcPopup(event,'get_grading_userid_list')">get_grading_userid_list</a>() {
<a name="l1851"><span class="linenum">1851</span></a>          <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../../_variables/filter.html">$filter</a> = <a class="function" onClick="logFunction('get_user_preferences')" href="../../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('assign_filter', '');
<a name="l1852"><span class="linenum">1852</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_grading_table')" href="../../_classes/assign_grading_table.html" onMouseOver="classPopup(event,'assign_grading_table')">assign_grading_table</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, 0, <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../../_variables/filter.html">$filter</a>, 0, false);
<a name="l1853"><span class="linenum">1853</span></a>  
<a name="l1854"><span class="linenum">1854</span></a>          <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> = <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a class="function" onClick="logFunction('get_column_data')" href="../../_functions/get_column_data.html" onMouseOver="funcPopup(event,'get_column_data')">get_column_data</a>('userid');
<a name="l1855"><span class="linenum">1855</span></a>  
<a name="l1856"><span class="linenum">1856</span></a>          return <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a>;
<a name="l1857"><span class="linenum">1857</span></a>      }
<a name="l1858"><span class="linenum">1858</span></a>  
<a name="l1859"><span class="linenum">1859</span></a>      <span class="comment">/**</span>
<a name="l1860"><span class="linenum">1860</span></a>  <span class="comment">     * Generate zip file from array of given files.</span>
<a name="l1861"><span class="linenum">1861</span></a>  <span class="comment">     *</span>
<a name="l1862"><span class="linenum">1862</span></a>  <span class="comment">     * @param array $filesforzipping - array of files to pass into archive_to_pathname.</span>
<a name="l1863"><span class="linenum">1863</span></a>  <span class="comment">     *                                 This array is indexed by the final file name and each</span>
<a name="l1864"><span class="linenum">1864</span></a>  <span class="comment">     *                                 element in the array is an instance of a stored_file object.</span>
<a name="l1865"><span class="linenum">1865</span></a>  <span class="comment">     * @return path of temp file - note this returned file does</span>
<a name="l1866"><span class="linenum">1866</span></a>  <span class="comment">     *         not have a .zip extension - it is a temp file.</span>
<a name="l1867"><span class="linenum">1867</span></a>  <span class="comment">     */</span>
<a name="l1868"><span class="linenum">1868</span></a>      protected function <a class="function" onClick="logFunction('pack_files')" href="../../_functions/pack_files.html" onMouseOver="funcPopup(event,'pack_files')">pack_files</a>(<a class="var it32136" onMouseOver="hilite(32136)" onMouseOut="lolite()" onClick="logVariable('filesforzipping')" href="../../_variables/filesforzipping.html">$filesforzipping</a>) {
<a name="l1869"><span class="linenum">1869</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1870"><span class="linenum">1870</span></a>  <span class="comment">        // Create path for new zip file.</span>
<a name="l1871"><span class="linenum">1871</span></a>          <a class="var it21940" onMouseOver="hilite(21940)" onMouseOut="lolite()" onClick="logVariable('tempzip')" href="../../_variables/tempzip.html">$tempzip</a> = <a class="phpfunction" onClick="logFunction('tempnam')" href="../../_functions/tempnam.html" onMouseOver="phpfuncPopup(event,'tempnam')">tempnam</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tempdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/tempdir.html">tempdir</a> . '/', 'assignment_');
<a name="l1872"><span class="linenum">1872</span></a>  <span class="comment">        // Zip files.</span>
<a name="l1873"><span class="linenum">1873</span></a>          <a class="var it2111" onMouseOver="hilite(2111)" onMouseOut="lolite()" onClick="logVariable('zipper')" href="../../_variables/zipper.html">$zipper</a> = <span class="keyword">new </span><a class="class" onClick="logClass('zip_packer')" href="../../_classes/zip_packer.html" onMouseOver="classPopup(event,'zip_packer')">zip_packer</a>();
<a name="l1874"><span class="linenum">1874</span></a>          if (<a class="var it2111" onMouseOver="hilite(2111)" onMouseOut="lolite()" onClick="logVariable('zipper')" href="../../_variables/zipper.html">$zipper</a>-&gt;<a class="function" onClick="logFunction('archive_to_pathname')" href="../../_functions/archive_to_pathname.html" onMouseOver="funcPopup(event,'archive_to_pathname')">archive_to_pathname</a>(<a class="var it32136" onMouseOver="hilite(32136)" onMouseOut="lolite()" onClick="logVariable('filesforzipping')" href="../../_variables/filesforzipping.html">$filesforzipping</a>, <a class="var it21940" onMouseOver="hilite(21940)" onMouseOut="lolite()" onClick="logVariable('tempzip')" href="../../_variables/tempzip.html">$tempzip</a>)) {
<a name="l1875"><span class="linenum">1875</span></a>              return <a class="var it21940" onMouseOver="hilite(21940)" onMouseOut="lolite()" onClick="logVariable('tempzip')" href="../../_variables/tempzip.html">$tempzip</a>;
<a name="l1876"><span class="linenum">1876</span></a>          }
<a name="l1877"><span class="linenum">1877</span></a>          return false;
<a name="l1878"><span class="linenum">1878</span></a>      }
<a name="l1879"><span class="linenum">1879</span></a>  
<a name="l1880"><span class="linenum">1880</span></a>      <span class="comment">/**</span>
<a name="l1881"><span class="linenum">1881</span></a>  <span class="comment">     * Finds all assignment notifications that have yet to be mailed out, and mails them.</span>
<a name="l1882"><span class="linenum">1882</span></a>  <span class="comment">     *</span>
<a name="l1883"><span class="linenum">1883</span></a>  <span class="comment">     * Cron function to be run periodically according to the moodle cron.</span>
<a name="l1884"><span class="linenum">1884</span></a>  <span class="comment">     *</span>
<a name="l1885"><span class="linenum">1885</span></a>  <span class="comment">     * @return bool</span>
<a name="l1886"><span class="linenum">1886</span></a>  <span class="comment">     */</span>
<a name="l1887"><span class="linenum">1887</span></a>      public static function <a class="function" onClick="logFunction('cron')" href="../../_functions/cron.html" onMouseOver="funcPopup(event,'cron')">cron</a>() {
<a name="l1888"><span class="linenum">1888</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1889"><span class="linenum">1889</span></a>  
<a name="l1890"><span class="linenum">1890</span></a>  <span class="comment">        // Only ever send a max of one days worth of updates.</span>
<a name="l1891"><span class="linenum">1891</span></a>          <a class="var it19947" onMouseOver="hilite(19947)" onMouseOut="lolite()" onClick="logVariable('yesterday')" href="../../_variables/yesterday.html">$yesterday</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - (24 * 3600);
<a name="l1892"><span class="linenum">1892</span></a>          <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a>   = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1893"><span class="linenum">1893</span></a>          <a class="var it10395" onMouseOver="hilite(10395)" onMouseOut="lolite()" onClick="logVariable('lastcron')" href="../../_variables/lastcron.html">$lastcron</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('modules', 'lastcron', array('name' =&gt; 'assign'));
<a name="l1894"><span class="linenum">1894</span></a>  
<a name="l1895"><span class="linenum">1895</span></a>  <span class="comment">        // Collect all submissions that require mailing.</span>
<a name="l1896"><span class="linenum">1896</span></a>  <span class="comment">        // Submissions are included if all are true:</span>
<a name="l1897"><span class="linenum">1897</span></a>  <span class="comment">        //   - The assignment is visible in the gradebook.</span>
<a name="l1898"><span class="linenum">1898</span></a>  <span class="comment">        //   - No previous notification has been sent.</span>
<a name="l1899"><span class="linenum">1899</span></a>  <span class="comment">        //   - If marking workflow is not enabled, the grade was updated in the past 24 hours, or</span>
<a name="l1900"><span class="linenum">1900</span></a>  <span class="comment">        //     if marking workflow is enabled, the workflow state is at 'released'.</span>
<a name="l1901"><span class="linenum">1901</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT g.id as gradeid, a.course, a.name, a.blindmarking, a.revealidentities,
<a name="l1902"><span class="linenum">1902</span></a>                         g.*, g.timemodified as lastmodified, cm.id as cmid
<a name="l1903"><span class="linenum">1903</span></a>                   FROM {assign} a
<a name="l1904"><span class="linenum">1904</span></a>                   JOIN {assign_grades} g ON g.assignment = a.id
<a name="l1905"><span class="linenum">1905</span></a>              LEFT JOIN {assign_user_flags} uf ON uf.assignment = a.id AND uf.userid = g.userid
<a name="l1906"><span class="linenum">1906</span></a>                   JOIN {course_modules} cm ON cm.course = a.course AND cm.instance = a.id
<a name="l1907"><span class="linenum">1907</span></a>                   JOIN {modules} md ON md.id = cm.module AND md.name = 'assign'
<a name="l1908"><span class="linenum">1908</span></a>                   JOIN {grade_items} gri ON gri.iteminstance = a.id AND gri.courseid = a.course AND gri.itemmodule = md.name
<a name="l1909"><span class="linenum">1909</span></a>                   <a class="function" onClick="logFunction('WHERE')" href="../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a> ((a.markingworkflow = 0 AND g.timemodified &gt;= :yesterday AND g.timemodified &lt;= :today) OR
<a name="l1910"><span class="linenum">1910</span></a>                          (a.markingworkflow = 1 AND uf.workflowstate = :wfreleased)) AND
<a name="l1911"><span class="linenum">1911</span></a>                         uf.mailed = 0 AND gri.hidden = 0
<a name="l1912"><span class="linenum">1912</span></a>                ORDER BY a.course, cm.id&quot;;
<a name="l1913"><span class="linenum">1913</span></a>  
<a name="l1914"><span class="linenum">1914</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(
<a name="l1915"><span class="linenum">1915</span></a>              'yesterday' =&gt; <a class="var it19947" onMouseOver="hilite(19947)" onMouseOut="lolite()" onClick="logVariable('yesterday')" href="../../_variables/yesterday.html">$yesterday</a>,
<a name="l1916"><span class="linenum">1916</span></a>              'today' =&gt; <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a>,
<a name="l1917"><span class="linenum">1917</span></a>              'wfreleased' =&gt; <a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_RELEASED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')">ASSIGN_MARKING_WORKFLOW_STATE_RELEASED</a>,
<a name="l1918"><span class="linenum">1918</span></a>          );
<a name="l1919"><span class="linenum">1919</span></a>          <a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1920"><span class="linenum">1920</span></a>  
<a name="l1921"><span class="linenum">1921</span></a>          if (!empty(<a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>)) {
<a name="l1922"><span class="linenum">1922</span></a>  
<a name="l1923"><span class="linenum">1923</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('Processing ' . <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>) . ' assignment submissions ...');
<a name="l1924"><span class="linenum">1924</span></a>  
<a name="l1925"><span class="linenum">1925</span></a>  <span class="comment">            // Preload courses we are going to need those.</span>
<a name="l1926"><span class="linenum">1926</span></a>              <a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a> = array();
<a name="l1927"><span class="linenum">1927</span></a>              foreach (<a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a> as <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l1928"><span class="linenum">1928</span></a>                  <a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a>[] = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('course')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>;
<a name="l1929"><span class="linenum">1929</span></a>              }
<a name="l1930"><span class="linenum">1930</span></a>  
<a name="l1931"><span class="linenum">1931</span></a>  <span class="comment">            // Filter out duplicates.</span>
<a name="l1932"><span class="linenum">1932</span></a>              <a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a>);
<a name="l1933"><span class="linenum">1933</span></a>              <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../../_variables/ctxselect.html">$ctxselect</a> = <a class="class" onClick="logClass('context_helper')" href="../../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l1934"><span class="linenum">1934</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it29616" onMouseOver="hilite(29616)" onMouseOut="lolite()" onClick="logVariable('courseidsql')" href="../../_variables/courseidsql.html">$courseidsql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l1935"><span class="linenum">1935</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT c.*, ' . <a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../../_variables/ctxselect.html">$ctxselect</a> .
<a name="l1936"><span class="linenum">1936</span></a>                        ' FROM {course} c
<a name="l1937"><span class="linenum">1937</span></a>                   LEFT JOIN {context} ctx ON ctx.instanceid = c.id AND ctx.contextlevel = :contextlevel
<a name="l1938"><span class="linenum">1938</span></a>                       WHERE c.id ' . <a class="var it29616" onMouseOver="hilite(29616)" onMouseOut="lolite()" onClick="logVariable('courseidsql')" href="../../_variables/courseidsql.html">$courseidsql</a>;
<a name="l1939"><span class="linenum">1939</span></a>  
<a name="l1940"><span class="linenum">1940</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['contextlevel'] = <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>;
<a name="l1941"><span class="linenum">1941</span></a>              <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1942"><span class="linenum">1942</span></a>  
<a name="l1943"><span class="linenum">1943</span></a>  <span class="comment">            // Clean up... this could go on for a while.</span>
<a name="l1944"><span class="linenum">1944</span></a>              unset(<a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a>);
<a name="l1945"><span class="linenum">1945</span></a>              unset(<a class="var it1071" onMouseOver="hilite(1071)" onMouseOut="lolite()" onClick="logVariable('ctxselect')" href="../../_variables/ctxselect.html">$ctxselect</a>);
<a name="l1946"><span class="linenum">1946</span></a>              unset(<a class="var it29616" onMouseOver="hilite(29616)" onMouseOut="lolite()" onClick="logVariable('courseidsql')" href="../../_variables/courseidsql.html">$courseidsql</a>);
<a name="l1947"><span class="linenum">1947</span></a>              unset(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1948"><span class="linenum">1948</span></a>  
<a name="l1949"><span class="linenum">1949</span></a>  <span class="comment">            // Message students about new feedback.</span>
<a name="l1950"><span class="linenum">1950</span></a>              foreach (<a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a> as <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l1951"><span class="linenum">1951</span></a>  
<a name="l1952"><span class="linenum">1952</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Processing assignment submission <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> ...&quot;);
<a name="l1953"><span class="linenum">1953</span></a>  
<a name="l1954"><span class="linenum">1954</span></a>  <span class="comment">                // Do not cache user lookups - could be too many.</span>
<a name="l1955"><span class="linenum">1955</span></a>                  if (!<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>))) {
<a name="l1956"><span class="linenum">1956</span></a>                      <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('Could not find user ' . <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>);
<a name="l1957"><span class="linenum">1957</span></a>                      continue;
<a name="l1958"><span class="linenum">1958</span></a>                  }
<a name="l1959"><span class="linenum">1959</span></a>  
<a name="l1960"><span class="linenum">1960</span></a>  <span class="comment">                // Use a cache to prevent the same DB queries happening over and over.</span>
<a name="l1961"><span class="linenum">1961</span></a>                  if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('course')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>)) {
<a name="l1962"><span class="linenum">1962</span></a>                      <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('Could not find course ' . <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('course')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>);
<a name="l1963"><span class="linenum">1963</span></a>                      continue;
<a name="l1964"><span class="linenum">1964</span></a>                  }
<a name="l1965"><span class="linenum">1965</span></a>                  <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('course')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>];
<a name="l1966"><span class="linenum">1966</span></a>                  if (isset(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('ctxid')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/ctxid.html">ctxid</a>)) {
<a name="l1967"><span class="linenum">1967</span></a>  <span class="comment">                    // Context has not yet been preloaded. Do so now.</span>
<a name="l1968"><span class="linenum">1968</span></a>                      <a class="class" onClick="logClass('context_helper')" href="../../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l1969"><span class="linenum">1969</span></a>                  }
<a name="l1970"><span class="linenum">1970</span></a>  
<a name="l1971"><span class="linenum">1971</span></a>  <span class="comment">                // Override the language and timezone of the &quot;current&quot; user, so that</span>
<a name="l1972"><span class="linenum">1972</span></a>  <span class="comment">                // mail is customised for the receiver.</span>
<a name="l1973"><span class="linenum">1973</span></a>                  <a class="function" onClick="logFunction('cron_setup_user')" href="../../_functions/cron_setup_user.html" onMouseOver="funcPopup(event,'cron_setup_user')">cron_setup_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l1974"><span class="linenum">1974</span></a>  
<a name="l1975"><span class="linenum">1975</span></a>  <span class="comment">                // Context lookups are already cached.</span>
<a name="l1976"><span class="linenum">1976</span></a>                  <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1977"><span class="linenum">1977</span></a>                  if (!<a class="function" onClick="logFunction('is_enrolled')" href="../../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../../_variables/coursecontext.html">$coursecontext</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l1978"><span class="linenum">1978</span></a>                      <a class="var it8904" onMouseOver="hilite(8904)" onMouseOut="lolite()" onClick="logVariable('courseshortname')" href="../../_variables/courseshortname.html">$courseshortname</a> = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/shortname.html">shortname</a>,
<a name="l1979"><span class="linenum">1979</span></a>                                                       true,
<a name="l1980"><span class="linenum">1980</span></a>                                                       array('context' =&gt; <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../../_variables/coursecontext.html">$coursecontext</a>));
<a name="l1981"><span class="linenum">1981</span></a>                      <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(<a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) . ' not an active participant in ' . <a class="var it8904" onMouseOver="hilite(8904)" onMouseOut="lolite()" onClick="logVariable('courseshortname')" href="../../_variables/courseshortname.html">$courseshortname</a>);
<a name="l1982"><span class="linenum">1982</span></a>                      continue;
<a name="l1983"><span class="linenum">1983</span></a>                  }
<a name="l1984"><span class="linenum">1984</span></a>  
<a name="l1985"><span class="linenum">1985</span></a>                  if (!<a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('grader')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a>))) {
<a name="l1986"><span class="linenum">1986</span></a>                      <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('Could not find grader ' . <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('grader')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a>);
<a name="l1987"><span class="linenum">1987</span></a>                      continue;
<a name="l1988"><span class="linenum">1988</span></a>                  }
<a name="l1989"><span class="linenum">1989</span></a>  
<a name="l1990"><span class="linenum">1990</span></a>                  <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1991"><span class="linenum">1991</span></a>                  <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_cm')" href="../../_functions/get_cm.html" onMouseOver="funcPopup(event,'get_cm')">get_cm</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('cmid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>);
<a name="l1992"><span class="linenum">1992</span></a>  <span class="comment">                // Context lookups are already cached.</span>
<a name="l1993"><span class="linenum">1993</span></a>                  <a class="var it5513" onMouseOver="hilite(5513)" onMouseOut="lolite()" onClick="logVariable('contextmodule')" href="../../_variables/contextmodule.html">$contextmodule</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1994"><span class="linenum">1994</span></a>  
<a name="l1995"><span class="linenum">1995</span></a>                  if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('uservisible')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/uservisible.html">uservisible</a>) {
<a name="l1996"><span class="linenum">1996</span></a>  <span class="comment">                    // Hold mail notification for assignments the user cannot access until later.</span>
<a name="l1997"><span class="linenum">1997</span></a>                      continue;
<a name="l1998"><span class="linenum">1998</span></a>                  }
<a name="l1999"><span class="linenum">1999</span></a>  
<a name="l2000"><span class="linenum">2000</span></a>  <span class="comment">                // Need to send this to the student.</span>
<a name="l2001"><span class="linenum">2001</span></a>                  <a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a> = 'feedbackavailable';
<a name="l2002"><span class="linenum">2002</span></a>                  <a class="var it5771" onMouseOver="hilite(5771)" onMouseOut="lolite()" onClick="logVariable('eventtype')" href="../../_variables/eventtype.html">$eventtype</a> = 'assign_notification';
<a name="l2003"><span class="linenum">2003</span></a>                  <a class="var it11920" onMouseOver="hilite(11920)" onMouseOut="lolite()" onClick="logVariable('updatetime')" href="../../_variables/updatetime.html">$updatetime</a> = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('lastmodified')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/lastmodified.html">lastmodified</a>;
<a name="l2004"><span class="linenum">2004</span></a>                  <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', 'assign');
<a name="l2005"><span class="linenum">2005</span></a>  
<a name="l2006"><span class="linenum">2006</span></a>                  <a class="var it4593" onMouseOver="hilite(4593)" onMouseOut="lolite()" onClick="logVariable('uniqueid')" href="../../_variables/uniqueid.html">$uniqueid</a> = 0;
<a name="l2007"><span class="linenum">2007</span></a>                  if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('blindmarking')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/blindmarking.html">blindmarking</a> &amp;&amp; !<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('revealidentities')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/revealidentities.html">revealidentities</a>) {
<a name="l2008"><span class="linenum">2008</span></a>                      <a class="var it4593" onMouseOver="hilite(4593)" onMouseOut="lolite()" onClick="logVariable('uniqueid')" href="../../_variables/uniqueid.html">$uniqueid</a> = self::<a class="function" onClick="logFunction('get_uniqueid_for_user_static')" href="../../_functions/get_uniqueid_for_user_static.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user_static')">get_uniqueid_for_user_static</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('assignment')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/assignment.html">assignment</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2009"><span class="linenum">2009</span></a>                  }
<a name="l2010"><span class="linenum">2010</span></a>                  <a class="var it3574" onMouseOver="hilite(3574)" onMouseOut="lolite()" onClick="logVariable('showusers')" href="../../_variables/showusers.html">$showusers</a> = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('blindmarking')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/blindmarking.html">blindmarking</a> &amp;&amp; !<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('revealidentities')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/revealidentities.html">revealidentities</a>;
<a name="l2011"><span class="linenum">2011</span></a>                  self::<a class="function" onClick="logFunction('send_assignment_notification')" href="../../_functions/send_assignment_notification.html" onMouseOver="funcPopup(event,'send_assignment_notification')">send_assignment_notification</a>(<a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>,
<a name="l2012"><span class="linenum">2012</span></a>                                                     <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>,
<a name="l2013"><span class="linenum">2013</span></a>                                                     <a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a>,
<a name="l2014"><span class="linenum">2014</span></a>                                                     <a class="var it5771" onMouseOver="hilite(5771)" onMouseOut="lolite()" onClick="logVariable('eventtype')" href="../../_variables/eventtype.html">$eventtype</a>,
<a name="l2015"><span class="linenum">2015</span></a>                                                     <a class="var it11920" onMouseOver="hilite(11920)" onMouseOut="lolite()" onClick="logVariable('updatetime')" href="../../_variables/updatetime.html">$updatetime</a>,
<a name="l2016"><span class="linenum">2016</span></a>                                                     <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>,
<a name="l2017"><span class="linenum">2017</span></a>                                                     <a class="var it5513" onMouseOver="hilite(5513)" onMouseOut="lolite()" onClick="logVariable('contextmodule')" href="../../_variables/contextmodule.html">$contextmodule</a>,
<a name="l2018"><span class="linenum">2018</span></a>                                                     <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>,
<a name="l2019"><span class="linenum">2019</span></a>                                                     <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a>,
<a name="l2020"><span class="linenum">2020</span></a>                                                     <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('name')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>,
<a name="l2021"><span class="linenum">2021</span></a>                                                     <a class="var it3574" onMouseOver="hilite(3574)" onMouseOut="lolite()" onClick="logVariable('showusers')" href="../../_variables/showusers.html">$showusers</a>,
<a name="l2022"><span class="linenum">2022</span></a>                                                     <a class="var it4593" onMouseOver="hilite(4593)" onMouseOut="lolite()" onClick="logVariable('uniqueid')" href="../../_variables/uniqueid.html">$uniqueid</a>);
<a name="l2023"><span class="linenum">2023</span></a>  
<a name="l2024"><span class="linenum">2024</span></a>                  <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assign_user_flags', array('userid'=&gt;<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'assignment'=&gt;<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('assignment')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/assignment.html">assignment</a>));
<a name="l2025"><span class="linenum">2025</span></a>                  if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>) {
<a name="l2026"><span class="linenum">2026</span></a>                      <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('mailed')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/mailed.html">mailed</a> = 1;
<a name="l2027"><span class="linenum">2027</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('assign_user_flags', <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>);
<a name="l2028"><span class="linenum">2028</span></a>                  } else {
<a name="l2029"><span class="linenum">2029</span></a>                      <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = new stdClass();
<a name="l2030"><span class="linenum">2030</span></a>                      <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('userid')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2031"><span class="linenum">2031</span></a>                      <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('assignment')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/assignment.html">assignment</a> = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('assignment')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/assignment.html">assignment</a>;
<a name="l2032"><span class="linenum">2032</span></a>                      <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('mailed')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/mailed.html">mailed</a> = 1;
<a name="l2033"><span class="linenum">2033</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('assign_user_flags', <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>);
<a name="l2034"><span class="linenum">2034</span></a>                  }
<a name="l2035"><span class="linenum">2035</span></a>  
<a name="l2036"><span class="linenum">2036</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('Done');
<a name="l2037"><span class="linenum">2037</span></a>              }
<a name="l2038"><span class="linenum">2038</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('Done processing ' . <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>) . ' assignment submissions');
<a name="l2039"><span class="linenum">2039</span></a>  
<a name="l2040"><span class="linenum">2040</span></a>              <a class="function" onClick="logFunction('cron_setup_user')" href="../../_functions/cron_setup_user.html" onMouseOver="funcPopup(event,'cron_setup_user')">cron_setup_user</a>();
<a name="l2041"><span class="linenum">2041</span></a>  
<a name="l2042"><span class="linenum">2042</span></a>  <span class="comment">            // Free up memory just to be sure.</span>
<a name="l2043"><span class="linenum">2043</span></a>              unset(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>);
<a name="l2044"><span class="linenum">2044</span></a>          }
<a name="l2045"><span class="linenum">2045</span></a>  
<a name="l2046"><span class="linenum">2046</span></a>  <span class="comment">        // Update calendar events to provide a description.</span>
<a name="l2047"><span class="linenum">2047</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT id
<a name="l2048"><span class="linenum">2048</span></a>                      FROM {assign}
<a name="l2049"><span class="linenum">2049</span></a>                      WHERE
<a name="l2050"><span class="linenum">2050</span></a>                          allowsubmissionsfromdate &gt;= :lastcron AND
<a name="l2051"><span class="linenum">2051</span></a>                          allowsubmissionsfromdate &lt;= :timenow AND
<a name="l2052"><span class="linenum">2052</span></a>                          alwaysshowdescription = 0';
<a name="l2053"><span class="linenum">2053</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('lastcron' =&gt; <a class="var it10395" onMouseOver="hilite(10395)" onMouseOut="lolite()" onClick="logVariable('lastcron')" href="../../_variables/lastcron.html">$lastcron</a>, 'timenow' =&gt; <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a>);
<a name="l2054"><span class="linenum">2054</span></a>          <a class="var it32138" onMouseOver="hilite(32138)" onMouseOut="lolite()" onClick="logVariable('newlyavailable')" href="../../_variables/newlyavailable.html">$newlyavailable</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2055"><span class="linenum">2055</span></a>          foreach (<a class="var it32138" onMouseOver="hilite(32138)" onMouseOut="lolite()" onClick="logVariable('newlyavailable')" href="../../_variables/newlyavailable.html">$newlyavailable</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l2056"><span class="linenum">2056</span></a>              <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('assign', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2057"><span class="linenum">2057</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2058"><span class="linenum">2058</span></a>  
<a name="l2059"><span class="linenum">2059</span></a>              <a class="var it284" onMouseOver="hilite(284)" onMouseOut="lolite()" onClick="logVariable('assignment')" href="../../_variables/assignment.html">$assignment</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign')" href="../../_classes/assign.html" onMouseOver="classPopup(event,'assign')">assign</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, null, null);
<a name="l2060"><span class="linenum">2060</span></a>              <a class="var it284" onMouseOver="hilite(284)" onMouseOut="lolite()" onClick="logVariable('assignment')" href="../../_variables/assignment.html">$assignment</a>-&gt;<a class="function" onClick="logFunction('update_calendar')" href="../../_functions/update_calendar.html" onMouseOver="funcPopup(event,'update_calendar')">update_calendar</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2061"><span class="linenum">2061</span></a>          }
<a name="l2062"><span class="linenum">2062</span></a>  
<a name="l2063"><span class="linenum">2063</span></a>          return true;
<a name="l2064"><span class="linenum">2064</span></a>      }
<a name="l2065"><span class="linenum">2065</span></a>  
<a name="l2066"><span class="linenum">2066</span></a>      <span class="comment">/**</span>
<a name="l2067"><span class="linenum">2067</span></a>  <span class="comment">     * Mark in the database that this grade record should have an update notification sent by cron.</span>
<a name="l2068"><span class="linenum">2068</span></a>  <span class="comment">     *</span>
<a name="l2069"><span class="linenum">2069</span></a>  <span class="comment">     * @param stdClass $grade a grade record keyed on id</span>
<a name="l2070"><span class="linenum">2070</span></a>  <span class="comment">     * @param bool $mailedoverride when true, flag notification to be sent again.</span>
<a name="l2071"><span class="linenum">2071</span></a>  <span class="comment">     * @return bool true for success</span>
<a name="l2072"><span class="linenum">2072</span></a>  <span class="comment">     */</span>
<a name="l2073"><span class="linenum">2073</span></a>      public function <a class="function" onClick="logFunction('notify_grade_modified')" href="../../_functions/notify_grade_modified.html" onMouseOver="funcPopup(event,'notify_grade_modified')">notify_grade_modified</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="var it32139" onMouseOver="hilite(32139)" onMouseOut="lolite()" onClick="logVariable('mailedoverride')" href="../../_variables/mailedoverride.html">$mailedoverride</a> = false) {
<a name="l2074"><span class="linenum">2074</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2075"><span class="linenum">2075</span></a>  
<a name="l2076"><span class="linenum">2076</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, true);
<a name="l2077"><span class="linenum">2077</span></a>          if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('mailed')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/mailed.html">mailed</a> != 1 || <a class="var it32139" onMouseOver="hilite(32139)" onMouseOut="lolite()" onClick="logVariable('mailedoverride')" href="../../_variables/mailedoverride.html">$mailedoverride</a>) {
<a name="l2078"><span class="linenum">2078</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('mailed')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/mailed.html">mailed</a> = 0;
<a name="l2079"><span class="linenum">2079</span></a>          }
<a name="l2080"><span class="linenum">2080</span></a>  
<a name="l2081"><span class="linenum">2081</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_user_flags')" href="../../_functions/update_user_flags.html" onMouseOver="funcPopup(event,'update_user_flags')">update_user_flags</a>(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>);
<a name="l2082"><span class="linenum">2082</span></a>      }
<a name="l2083"><span class="linenum">2083</span></a>  
<a name="l2084"><span class="linenum">2084</span></a>      <span class="comment">/**</span>
<a name="l2085"><span class="linenum">2085</span></a>  <span class="comment">     * Update user flags for this user in this assignment.</span>
<a name="l2086"><span class="linenum">2086</span></a>  <span class="comment">     *</span>
<a name="l2087"><span class="linenum">2087</span></a>  <span class="comment">     * @param stdClass $flags a flags record keyed on id</span>
<a name="l2088"><span class="linenum">2088</span></a>  <span class="comment">     * @return bool true for success</span>
<a name="l2089"><span class="linenum">2089</span></a>  <span class="comment">     */</span>
<a name="l2090"><span class="linenum">2090</span></a>      public function <a class="function" onClick="logFunction('update_user_flags')" href="../../_functions/update_user_flags.html" onMouseOver="funcPopup(event,'update_user_flags')">update_user_flags</a>(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>) {
<a name="l2091"><span class="linenum">2091</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2092"><span class="linenum">2092</span></a>          if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('userid')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> &lt;= 0 || <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('assignment')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/assignment.html">assignment</a> &lt;= 0 || <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('id')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> &lt;= 0) {
<a name="l2093"><span class="linenum">2093</span></a>              return false;
<a name="l2094"><span class="linenum">2094</span></a>          }
<a name="l2095"><span class="linenum">2095</span></a>  
<a name="l2096"><span class="linenum">2096</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('assign_user_flags', <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>);
<a name="l2097"><span class="linenum">2097</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l2098"><span class="linenum">2098</span></a>      }
<a name="l2099"><span class="linenum">2099</span></a>  
<a name="l2100"><span class="linenum">2100</span></a>      <span class="comment">/**</span>
<a name="l2101"><span class="linenum">2101</span></a>  <span class="comment">     * Update a grade in the grade table for the assignment and in the gradebook.</span>
<a name="l2102"><span class="linenum">2102</span></a>  <span class="comment">     *</span>
<a name="l2103"><span class="linenum">2103</span></a>  <span class="comment">     * @param stdClass $grade a grade record keyed on id</span>
<a name="l2104"><span class="linenum">2104</span></a>  <span class="comment">     * @param bool $reopenattempt If the attempt reopen method is manual, allow another attempt at this assignment.</span>
<a name="l2105"><span class="linenum">2105</span></a>  <span class="comment">     * @return bool true for success</span>
<a name="l2106"><span class="linenum">2106</span></a>  <span class="comment">     */</span>
<a name="l2107"><span class="linenum">2107</span></a>      public function <a class="function" onClick="logFunction('update_grade')" href="../../_functions/update_grade.html" onMouseOver="funcPopup(event,'update_grade')">update_grade</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="var it32140" onMouseOver="hilite(32140)" onMouseOut="lolite()" onClick="logVariable('reopenattempt')" href="../../_variables/reopenattempt.html">$reopenattempt</a> = false) {
<a name="l2108"><span class="linenum">2108</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2109"><span class="linenum">2109</span></a>  
<a name="l2110"><span class="linenum">2110</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2111"><span class="linenum">2111</span></a>  
<a name="l2112"><span class="linenum">2112</span></a>          if (!empty(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>)) {
<a name="l2113"><span class="linenum">2113</span></a>              <a class="var it32141" onMouseOver="hilite(32141)" onMouseOut="lolite()" onClick="logVariable('validstates')" href="../../_variables/validstates.html">$validstates</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_marking_workflow_states_for_current_user')" href="../../_functions/get_marking_workflow_states_for_current_user.html" onMouseOver="funcPopup(event,'get_marking_workflow_states_for_current_user')">get_marking_workflow_states_for_current_user</a>();
<a name="l2114"><span class="linenum">2114</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>, <a class="var it32141" onMouseOver="hilite(32141)" onMouseOut="lolite()" onClick="logVariable('validstates')" href="../../_variables/validstates.html">$validstates</a>)) {
<a name="l2115"><span class="linenum">2115</span></a>                  return false;
<a name="l2116"><span class="linenum">2116</span></a>              }
<a name="l2117"><span class="linenum">2117</span></a>          }
<a name="l2118"><span class="linenum">2118</span></a>  
<a name="l2119"><span class="linenum">2119</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> &amp;&amp; <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> != -1) {
<a name="l2120"><span class="linenum">2120</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade &gt; 0) {
<a name="l2121"><span class="linenum">2121</span></a>                  if (!<a class="phpfunction" onClick="logFunction('is_numeric')" href="../../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>)) {
<a name="l2122"><span class="linenum">2122</span></a>                      return false;
<a name="l2123"><span class="linenum">2123</span></a>                  } else if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> &gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade) {
<a name="l2124"><span class="linenum">2124</span></a>                      return false;
<a name="l2125"><span class="linenum">2125</span></a>                  } else if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> &lt; 0) {
<a name="l2126"><span class="linenum">2126</span></a>                      return false;
<a name="l2127"><span class="linenum">2127</span></a>                  }
<a name="l2128"><span class="linenum">2128</span></a>              } else {
<a name="l2129"><span class="linenum">2129</span></a>  <span class="comment">                // This is a scale.</span>
<a name="l2130"><span class="linenum">2130</span></a>                  if (<a class="var it94" onMouseOver="hilite(94)" onMouseOut="lolite()" onClick="logVariable('scale')" href="../../_variables/scale.html">$scale</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('scale', array('id' =&gt; -(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade)))) {
<a name="l2131"><span class="linenum">2131</span></a>                      <a class="var it16418" onMouseOver="hilite(16418)" onMouseOut="lolite()" onClick="logVariable('scaleoptions')" href="../../_variables/scaleoptions.html">$scaleoptions</a> = <a class="function" onClick="logFunction('make_menu_from_list')" href="../../_functions/make_menu_from_list.html" onMouseOver="funcPopup(event,'make_menu_from_list')">make_menu_from_list</a>(<a class="var it94" onMouseOver="hilite(94)" onMouseOut="lolite()" onClick="logVariable('scale')" href="../../_variables/scale.html">$scale</a>-&gt;<a onClick="logVariable('scale')" class="var it43117" onMouseOver="hilite(43117)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>);
<a name="l2132"><span class="linenum">2132</span></a>                      if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>((int) <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>, <a class="var it16418" onMouseOver="hilite(16418)" onMouseOut="lolite()" onClick="logVariable('scaleoptions')" href="../../_variables/scaleoptions.html">$scaleoptions</a>)) {
<a name="l2133"><span class="linenum">2133</span></a>                          return false;
<a name="l2134"><span class="linenum">2134</span></a>                      }
<a name="l2135"><span class="linenum">2135</span></a>                  }
<a name="l2136"><span class="linenum">2136</span></a>              }
<a name="l2137"><span class="linenum">2137</span></a>          }
<a name="l2138"><span class="linenum">2138</span></a>  
<a name="l2139"><span class="linenum">2139</span></a>          if (empty(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>)) {
<a name="l2140"><span class="linenum">2140</span></a>  <span class="comment">            // Set it to the default.</span>
<a name="l2141"><span class="linenum">2141</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> = 0;
<a name="l2142"><span class="linenum">2142</span></a>          }
<a name="l2143"><span class="linenum">2143</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('assign_grades', <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l2144"><span class="linenum">2144</span></a>  
<a name="l2145"><span class="linenum">2145</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = null;
<a name="l2146"><span class="linenum">2146</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l2147"><span class="linenum">2147</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, 0, false);
<a name="l2148"><span class="linenum">2148</span></a>          } else {
<a name="l2149"><span class="linenum">2149</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, false);
<a name="l2150"><span class="linenum">2150</span></a>          }
<a name="l2151"><span class="linenum">2151</span></a>  
<a name="l2152"><span class="linenum">2152</span></a>  <span class="comment">        // Only push to gradebook if the update is for the latest attempt.</span>
<a name="l2153"><span class="linenum">2153</span></a>  <span class="comment">        // Not the latest attempt.</span>
<a name="l2154"><span class="linenum">2154</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> &amp;&amp; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> != <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>) {
<a name="l2155"><span class="linenum">2155</span></a>              return true;
<a name="l2156"><span class="linenum">2156</span></a>          }
<a name="l2157"><span class="linenum">2157</span></a>  
<a name="l2158"><span class="linenum">2158</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('gradebook_item_update')" href="../../_functions/gradebook_item_update.html" onMouseOver="funcPopup(event,'gradebook_item_update')">gradebook_item_update</a>(null, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>)) {
<a name="l2159"><span class="linenum">2159</span></a>              \mod_assign\event\<a class="class" onClick="logClass('submission_graded')" href="../../_classes/submission_graded.html" onMouseOver="classPopup(event,'submission_graded')">submission_graded</a>::<a class="function" onClick="logFunction('create_from_grade')" href="../../_functions/create_from_grade.html" onMouseOver="funcPopup(event,'create_from_grade')">create_from_grade</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2160"><span class="linenum">2160</span></a>          }
<a name="l2161"><span class="linenum">2161</span></a>  
<a name="l2162"><span class="linenum">2162</span></a>  <span class="comment">        // If the conditions are met, allow another attempt.</span>
<a name="l2163"><span class="linenum">2163</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l2164"><span class="linenum">2164</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('reopen_submission_if_required')" href="../../_functions/reopen_submission_if_required.html" onMouseOver="funcPopup(event,'reopen_submission_if_required')">reopen_submission_if_required</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>,
<a name="l2165"><span class="linenum">2165</span></a>                      <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>,
<a name="l2166"><span class="linenum">2166</span></a>                      <a class="var it32140" onMouseOver="hilite(32140)" onMouseOut="lolite()" onClick="logVariable('reopenattempt')" href="../../_variables/reopenattempt.html">$reopenattempt</a>);
<a name="l2167"><span class="linenum">2167</span></a>          }
<a name="l2168"><span class="linenum">2168</span></a>  
<a name="l2169"><span class="linenum">2169</span></a>          return true;
<a name="l2170"><span class="linenum">2170</span></a>      }
<a name="l2171"><span class="linenum">2171</span></a>  
<a name="l2172"><span class="linenum">2172</span></a>      <span class="comment">/**</span>
<a name="l2173"><span class="linenum">2173</span></a>  <span class="comment">     * View the grant extension date page.</span>
<a name="l2174"><span class="linenum">2174</span></a>  <span class="comment">     *</span>
<a name="l2175"><span class="linenum">2175</span></a>  <span class="comment">     * Uses url parameters 'userid'</span>
<a name="l2176"><span class="linenum">2176</span></a>  <span class="comment">     * or from parameter 'selectedusers'</span>
<a name="l2177"><span class="linenum">2177</span></a>  <span class="comment">     *</span>
<a name="l2178"><span class="linenum">2178</span></a>  <span class="comment">     * @param moodleform $mform - Used for validation of the submitted data</span>
<a name="l2179"><span class="linenum">2179</span></a>  <span class="comment">     * @return string</span>
<a name="l2180"><span class="linenum">2180</span></a>  <span class="comment">     */</span>
<a name="l2181"><span class="linenum">2181</span></a>      protected function <a class="function" onClick="logFunction('view_grant_extension')" href="../../_functions/view_grant_extension.html" onMouseOver="funcPopup(event,'view_grant_extension')">view_grant_extension</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l2182"><span class="linenum">2182</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2183"><span class="linenum">2183</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/extensionform.php.html">/mod/assign/extensionform.php</a>');
<a name="l2184"><span class="linenum">2184</span></a>  
<a name="l2185"><span class="linenum">2185</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l2186"><span class="linenum">2186</span></a>  
<a name="l2187"><span class="linenum">2187</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l2188"><span class="linenum">2188</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id;
<a name="l2189"><span class="linenum">2189</span></a>  
<a name="l2190"><span class="linenum">2190</span></a>          <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a> = array(
<a name="l2191"><span class="linenum">2191</span></a>              'instance' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()
<a name="l2192"><span class="linenum">2192</span></a>          );
<a name="l2193"><span class="linenum">2193</span></a>  
<a name="l2194"><span class="linenum">2194</span></a>          <a class="var it25205" onMouseOver="hilite(25205)" onMouseOut="lolite()" onClick="logVariable('extrauserfields')" href="../../_variables/extrauserfields.html">$extrauserfields</a> = <a class="function" onClick="logFunction('get_extra_user_fields')" href="../../_functions/get_extra_user_fields.html" onMouseOver="funcPopup(event,'get_extra_user_fields')">get_extra_user_fields</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l2195"><span class="linenum">2195</span></a>  
<a name="l2196"><span class="linenum">2196</span></a>          if (<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l2197"><span class="linenum">2197</span></a>              <a class="var it8924" onMouseOver="hilite(8924)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>();
<a name="l2198"><span class="linenum">2198</span></a>              <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> = <a class="var it8924" onMouseOver="hilite(8924)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a>-&gt;<a onClick="logVariable('selectedusers')" class="var it45738" onMouseOver="hilite(45738)" onMouseOut="lolite()" href="../../_variables/selectedusers.html">selectedusers</a>;
<a name="l2199"><span class="linenum">2199</span></a>              <a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>);
<a name="l2200"><span class="linenum">2200</span></a>  
<a name="l2201"><span class="linenum">2201</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('selectedusers')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/selectedusers.html">selectedusers</a> = <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>;
<a name="l2202"><span class="linenum">2202</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = 0;
<a name="l2203"><span class="linenum">2203</span></a>  
<a name="l2204"><span class="linenum">2204</span></a>              <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a> = '';
<a name="l2205"><span class="linenum">2205</span></a>              <a class="var it7481" onMouseOver="hilite(7481)" onMouseOut="lolite()" onClick="logVariable('usercount')" href="../../_variables/usercount.html">$usercount</a> = 0;
<a name="l2206"><span class="linenum">2206</span></a>              foreach (<a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a> as <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l2207"><span class="linenum">2207</span></a>                  if (<a class="var it7481" onMouseOver="hilite(7481)" onMouseOut="lolite()" onClick="logVariable('usercount')" href="../../_variables/usercount.html">$usercount</a> &gt;= 5) {
<a name="l2208"><span class="linenum">2208</span></a>                      <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a> .= <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('moreusers', 'assign', <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a>) - 5);
<a name="l2209"><span class="linenum">2209</span></a>                      break;
<a name="l2210"><span class="linenum">2210</span></a>                  }
<a name="l2211"><span class="linenum">2211</span></a>                  <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2212"><span class="linenum">2212</span></a>  
<a name="l2213"><span class="linenum">2213</span></a>                  <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_user_summary')" href="../../_classes/assign_user_summary.html" onMouseOver="classPopup(event,'assign_user_summary')">assign_user_summary</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>,
<a name="l2214"><span class="linenum">2214</span></a>                                                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l2215"><span class="linenum">2215</span></a>                                                                      <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames',
<a name="l2216"><span class="linenum">2216</span></a>                                                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>()),
<a name="l2217"><span class="linenum">2217</span></a>                                                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>(),
<a name="l2218"><span class="linenum">2218</span></a>                                                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_uniqueid_for_user')" href="../../_functions/get_uniqueid_for_user.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user')">get_uniqueid_for_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l2219"><span class="linenum">2219</span></a>                                                                      <a class="var it25205" onMouseOver="hilite(25205)" onMouseOut="lolite()" onClick="logVariable('extrauserfields')" href="../../_variables/extrauserfields.html">$extrauserfields</a>,
<a name="l2220"><span class="linenum">2220</span></a>                                                                      !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_active_user')" href="../../_functions/is_active_user.html" onMouseOver="funcPopup(event,'is_active_user')">is_active_user</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)));
<a name="l2221"><span class="linenum">2221</span></a>                  <a class="var it7481" onMouseOver="hilite(7481)" onMouseOut="lolite()" onClick="logVariable('usercount')" href="../../_variables/usercount.html">$usercount</a> += 1;
<a name="l2222"><span class="linenum">2222</span></a>              }
<a name="l2223"><span class="linenum">2223</span></a>  
<a name="l2224"><span class="linenum">2224</span></a>              <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a>['userscount'] = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a>);
<a name="l2225"><span class="linenum">2225</span></a>              <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a>['usershtml'] = <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a>;
<a name="l2226"><span class="linenum">2226</span></a>  
<a name="l2227"><span class="linenum">2227</span></a>          } else {
<a name="l2228"><span class="linenum">2228</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="function" onClick="logFunction('required_param')" href="../../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('userid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2229"><span class="linenum">2229</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2230"><span class="linenum">2230</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l2231"><span class="linenum">2231</span></a>  
<a name="l2232"><span class="linenum">2232</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2233"><span class="linenum">2233</span></a>              if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>) {
<a name="l2234"><span class="linenum">2234</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('extensionduedate')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/extensionduedate.html">extensionduedate</a> = <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('extensionduedate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/extensionduedate.html">extensionduedate</a>;
<a name="l2235"><span class="linenum">2235</span></a>              }
<a name="l2236"><span class="linenum">2236</span></a>  
<a name="l2237"><span class="linenum">2237</span></a>              <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_user_summary')" href="../../_classes/assign_user_summary.html" onMouseOver="classPopup(event,'assign_user_summary')">assign_user_summary</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>,
<a name="l2238"><span class="linenum">2238</span></a>                                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l2239"><span class="linenum">2239</span></a>                                                                  <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames',
<a name="l2240"><span class="linenum">2240</span></a>                                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>()),
<a name="l2241"><span class="linenum">2241</span></a>                                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>(),
<a name="l2242"><span class="linenum">2242</span></a>                                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_uniqueid_for_user')" href="../../_functions/get_uniqueid_for_user.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user')">get_uniqueid_for_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l2243"><span class="linenum">2243</span></a>                                                                  <a class="var it25205" onMouseOver="hilite(25205)" onMouseOut="lolite()" onClick="logVariable('extrauserfields')" href="../../_variables/extrauserfields.html">$extrauserfields</a>,
<a name="l2244"><span class="linenum">2244</span></a>                                                                  !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_active_user')" href="../../_functions/is_active_user.html" onMouseOver="funcPopup(event,'is_active_user')">is_active_user</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)));
<a name="l2245"><span class="linenum">2245</span></a>              <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a>['usershtml'] = <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a>;
<a name="l2246"><span class="linenum">2246</span></a>          }
<a name="l2247"><span class="linenum">2247</span></a>  
<a name="l2248"><span class="linenum">2248</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_extension_form')" href="../../_classes/mod_assign_extension_form.html" onMouseOver="classPopup(event,'mod_assign_extension_form')">mod_assign_extension_form</a>(null, <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a>);
<a name="l2249"><span class="linenum">2249</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="../../_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l2250"><span class="linenum">2250</span></a>          <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(),
<a name="l2251"><span class="linenum">2251</span></a>                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l2252"><span class="linenum">2252</span></a>                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_intro')" href="../../_functions/show_intro.html" onMouseOver="funcPopup(event,'show_intro')">show_intro</a>(),
<a name="l2253"><span class="linenum">2253</span></a>                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l2254"><span class="linenum">2254</span></a>                                      <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grantextension', 'assign'));
<a name="l2255"><span class="linenum">2255</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a>);
<a name="l2256"><span class="linenum">2256</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_form')" href="../../_classes/assign_form.html" onMouseOver="classPopup(event,'assign_form')">assign_form</a>('extensionform', <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>));
<a name="l2257"><span class="linenum">2257</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l2258"><span class="linenum">2258</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l2259"><span class="linenum">2259</span></a>      }
<a name="l2260"><span class="linenum">2260</span></a>  
<a name="l2261"><span class="linenum">2261</span></a>      <span class="comment">/**</span>
<a name="l2262"><span class="linenum">2262</span></a>  <span class="comment">     * Get a list of the users in the same group as this user.</span>
<a name="l2263"><span class="linenum">2263</span></a>  <span class="comment">     *</span>
<a name="l2264"><span class="linenum">2264</span></a>  <span class="comment">     * @param int $groupid The id of the group whose members we want or 0 for the default group</span>
<a name="l2265"><span class="linenum">2265</span></a>  <span class="comment">     * @param bool $onlyids Whether to retrieve only the user id's</span>
<a name="l2266"><span class="linenum">2266</span></a>  <span class="comment">     * @param bool $excludesuspended Whether to exclude suspended users</span>
<a name="l2267"><span class="linenum">2267</span></a>  <span class="comment">     * @return array The users (possibly id's only)</span>
<a name="l2268"><span class="linenum">2268</span></a>  <span class="comment">     */</span>
<a name="l2269"><span class="linenum">2269</span></a>      public function <a class="function" onClick="logFunction('get_submission_group_members')" href="../../_functions/get_submission_group_members.html" onMouseOver="funcPopup(event,'get_submission_group_members')">get_submission_group_members</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, <a class="var it32143" onMouseOver="hilite(32143)" onMouseOut="lolite()" onClick="logVariable('onlyids')" href="../../_variables/onlyids.html">$onlyids</a>, <a class="var it32144" onMouseOver="hilite(32144)" onMouseOut="lolite()" onClick="logVariable('excludesuspended')" href="../../_variables/excludesuspended.html">$excludesuspended</a> = false) {
<a name="l2270"><span class="linenum">2270</span></a>          <a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a> = array();
<a name="l2271"><span class="linenum">2271</span></a>          if (<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> != 0) {
<a name="l2272"><span class="linenum">2272</span></a>              <a class="var it24803" onMouseOver="hilite(24803)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('list_participants')" href="../../_functions/list_participants.html" onMouseOver="funcPopup(event,'list_participants')">list_participants</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, <a class="var it32143" onMouseOver="hilite(32143)" onMouseOut="lolite()" onClick="logVariable('onlyids')" href="../../_variables/onlyids.html">$onlyids</a>);
<a name="l2273"><span class="linenum">2273</span></a>              foreach (<a class="var it24803" onMouseOver="hilite(24803)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a> as <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l2274"><span class="linenum">2274</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l2275"><span class="linenum">2275</span></a>                      <a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a>[] = <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>;
<a name="l2276"><span class="linenum">2276</span></a>                  }
<a name="l2277"><span class="linenum">2277</span></a>              }
<a name="l2278"><span class="linenum">2278</span></a>          } else {
<a name="l2279"><span class="linenum">2279</span></a>              <a class="var it24803" onMouseOver="hilite(24803)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('list_participants')" href="../../_functions/list_participants.html" onMouseOver="funcPopup(event,'list_participants')">list_participants</a>(null, <a class="var it32143" onMouseOver="hilite(32143)" onMouseOut="lolite()" onClick="logVariable('onlyids')" href="../../_variables/onlyids.html">$onlyids</a>);
<a name="l2280"><span class="linenum">2280</span></a>              foreach (<a class="var it24803" onMouseOver="hilite(24803)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a> as <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l2281"><span class="linenum">2281</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) == null) {
<a name="l2282"><span class="linenum">2282</span></a>                      <a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a>[] = <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>;
<a name="l2283"><span class="linenum">2283</span></a>                  }
<a name="l2284"><span class="linenum">2284</span></a>              }
<a name="l2285"><span class="linenum">2285</span></a>          }
<a name="l2286"><span class="linenum">2286</span></a>  <span class="comment">        // Exclude suspended users, if user can't see them.</span>
<a name="l2287"><span class="linenum">2287</span></a>          if (<a class="var it32144" onMouseOver="hilite(32144)" onMouseOut="lolite()" onClick="logVariable('excludesuspended')" href="../../_variables/excludesuspended.html">$excludesuspended</a> || !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewsuspendedusers', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l2288"><span class="linenum">2288</span></a>              foreach (<a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>) {
<a name="l2289"><span class="linenum">2289</span></a>                  if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_active_user')" href="../../_functions/is_active_user.html" onMouseOver="funcPopup(event,'is_active_user')">is_active_user</a>(<a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('id')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l2290"><span class="linenum">2290</span></a>                      unset(<a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]);
<a name="l2291"><span class="linenum">2291</span></a>                  }
<a name="l2292"><span class="linenum">2292</span></a>              }
<a name="l2293"><span class="linenum">2293</span></a>          }
<a name="l2294"><span class="linenum">2294</span></a>  
<a name="l2295"><span class="linenum">2295</span></a>          return <a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a>;
<a name="l2296"><span class="linenum">2296</span></a>      }
<a name="l2297"><span class="linenum">2297</span></a>  
<a name="l2298"><span class="linenum">2298</span></a>      <span class="comment">/**</span>
<a name="l2299"><span class="linenum">2299</span></a>  <span class="comment">     * Get a list of the users in the same group as this user that have not submitted the assignment.</span>
<a name="l2300"><span class="linenum">2300</span></a>  <span class="comment">     *</span>
<a name="l2301"><span class="linenum">2301</span></a>  <span class="comment">     * @param int $groupid The id of the group whose members we want or 0 for the default group</span>
<a name="l2302"><span class="linenum">2302</span></a>  <span class="comment">     * @param bool $onlyids Whether to retrieve only the user id's</span>
<a name="l2303"><span class="linenum">2303</span></a>  <span class="comment">     * @return array The users (possibly id's only)</span>
<a name="l2304"><span class="linenum">2304</span></a>  <span class="comment">     */</span>
<a name="l2305"><span class="linenum">2305</span></a>      public function <a class="function" onClick="logFunction('get_submission_group_members_who_have_not_submitted')" href="../../_functions/get_submission_group_members_who_have_not_submitted.html" onMouseOver="funcPopup(event,'get_submission_group_members_who_have_not_submitted')">get_submission_group_members_who_have_not_submitted</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, <a class="var it32143" onMouseOver="hilite(32143)" onMouseOut="lolite()" onClick="logVariable('onlyids')" href="../../_variables/onlyids.html">$onlyids</a>) {
<a name="l2306"><span class="linenum">2306</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l2307"><span class="linenum">2307</span></a>          if (!<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a> || !<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('requireallteammemberssubmit')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/requireallteammemberssubmit.html">requireallteammemberssubmit</a>) {
<a name="l2308"><span class="linenum">2308</span></a>              return array();
<a name="l2309"><span class="linenum">2309</span></a>          }
<a name="l2310"><span class="linenum">2310</span></a>          <a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group_members')" href="../../_functions/get_submission_group_members.html" onMouseOver="funcPopup(event,'get_submission_group_members')">get_submission_group_members</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, <a class="var it32143" onMouseOver="hilite(32143)" onMouseOut="lolite()" onClick="logVariable('onlyids')" href="../../_variables/onlyids.html">$onlyids</a>);
<a name="l2311"><span class="linenum">2311</span></a>  
<a name="l2312"><span class="linenum">2312</span></a>          foreach (<a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> =&gt; <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>) {
<a name="l2313"><span class="linenum">2313</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('id')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l2314"><span class="linenum">2314</span></a>              if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> &amp;&amp; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> == <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>) {
<a name="l2315"><span class="linenum">2315</span></a>                  unset(<a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>]);
<a name="l2316"><span class="linenum">2316</span></a>              } else {
<a name="l2317"><span class="linenum">2317</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>()) {
<a name="l2318"><span class="linenum">2318</span></a>                      <a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>]-&gt;alias = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('hiddenuser', 'assign') .
<a name="l2319"><span class="linenum">2319</span></a>                                             <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_uniqueid_for_user')" href="../../_functions/get_uniqueid_for_user.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user')">get_uniqueid_for_user</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>);
<a name="l2320"><span class="linenum">2320</span></a>                  }
<a name="l2321"><span class="linenum">2321</span></a>              }
<a name="l2322"><span class="linenum">2322</span></a>          }
<a name="l2323"><span class="linenum">2323</span></a>          return <a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a>;
<a name="l2324"><span class="linenum">2324</span></a>      }
<a name="l2325"><span class="linenum">2325</span></a>  
<a name="l2326"><span class="linenum">2326</span></a>      <span class="comment">/**</span>
<a name="l2327"><span class="linenum">2327</span></a>  <span class="comment">     * Load the group submission object for a particular user, optionally creating it if required.</span>
<a name="l2328"><span class="linenum">2328</span></a>  <span class="comment">     *</span>
<a name="l2329"><span class="linenum">2329</span></a>  <span class="comment">     * @param int $userid The id of the user whose submission we want</span>
<a name="l2330"><span class="linenum">2330</span></a>  <span class="comment">     * @param int $groupid The id of the group for this user - may be 0 in which</span>
<a name="l2331"><span class="linenum">2331</span></a>  <span class="comment">     *                     case it is determined from the userid.</span>
<a name="l2332"><span class="linenum">2332</span></a>  <span class="comment">     * @param bool $create If set to true a new submission object will be created in the database</span>
<a name="l2333"><span class="linenum">2333</span></a>  <span class="comment">     *                     with the status set to &quot;new&quot;.</span>
<a name="l2334"><span class="linenum">2334</span></a>  <span class="comment">     * @param int $attemptnumber - -1 means the latest attempt</span>
<a name="l2335"><span class="linenum">2335</span></a>  <span class="comment">     * @return stdClass The submission</span>
<a name="l2336"><span class="linenum">2336</span></a>  <span class="comment">     */</span>
<a name="l2337"><span class="linenum">2337</span></a>      public function <a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, <a class="var it5305" onMouseOver="hilite(5305)" onMouseOut="lolite()" onClick="logVariable('create')" href="../../_variables/create.html">$create</a>, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>=-1) {
<a name="l2338"><span class="linenum">2338</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2339"><span class="linenum">2339</span></a>  
<a name="l2340"><span class="linenum">2340</span></a>          if (<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> == 0) {
<a name="l2341"><span class="linenum">2341</span></a>              <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l2342"><span class="linenum">2342</span></a>              if (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>) {
<a name="l2343"><span class="linenum">2343</span></a>                  <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2344"><span class="linenum">2344</span></a>              }
<a name="l2345"><span class="linenum">2345</span></a>          }
<a name="l2346"><span class="linenum">2346</span></a>  
<a name="l2347"><span class="linenum">2347</span></a>  <span class="comment">        // Now get the group submission.</span>
<a name="l2348"><span class="linenum">2348</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('assignment'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id, 'groupid'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, 'userid'=&gt;0);
<a name="l2349"><span class="linenum">2349</span></a>          if (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> &gt;= 0) {
<a name="l2350"><span class="linenum">2350</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['attemptnumber'] = <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>;
<a name="l2351"><span class="linenum">2351</span></a>          }
<a name="l2352"><span class="linenum">2352</span></a>  
<a name="l2353"><span class="linenum">2353</span></a>  <span class="comment">        // Only return the row with the highest attemptnumber.</span>
<a name="l2354"><span class="linenum">2354</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = null;
<a name="l2355"><span class="linenum">2355</span></a>          <a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('assign_submission', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'attemptnumber DESC', '*', 0, 1);
<a name="l2356"><span class="linenum">2356</span></a>          if (<a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>) {
<a name="l2357"><span class="linenum">2357</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>);
<a name="l2358"><span class="linenum">2358</span></a>          }
<a name="l2359"><span class="linenum">2359</span></a>  
<a name="l2360"><span class="linenum">2360</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l2361"><span class="linenum">2361</span></a>              return <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>;
<a name="l2362"><span class="linenum">2362</span></a>          }
<a name="l2363"><span class="linenum">2363</span></a>          if (<a class="var it5305" onMouseOver="hilite(5305)" onMouseOut="lolite()" onClick="logVariable('create')" href="../../_variables/create.html">$create</a>) {
<a name="l2364"><span class="linenum">2364</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = new stdClass();
<a name="l2365"><span class="linenum">2365</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('assignment')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/assignment.html">assignment</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l2366"><span class="linenum">2366</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = 0;
<a name="l2367"><span class="linenum">2367</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('groupid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a> = <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>;
<a name="l2368"><span class="linenum">2368</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2369"><span class="linenum">2369</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>;
<a name="l2370"><span class="linenum">2370</span></a>              if (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> &gt;= 0) {
<a name="l2371"><span class="linenum">2371</span></a>                  <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> = <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>;
<a name="l2372"><span class="linenum">2372</span></a>              } else {
<a name="l2373"><span class="linenum">2373</span></a>                  <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> = 0;
<a name="l2374"><span class="linenum">2374</span></a>              }
<a name="l2375"><span class="linenum">2375</span></a>  <span class="comment">            // Work out if this is the latest submission.</span>
<a name="l2376"><span class="linenum">2376</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('latest')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/latest.html">latest</a> = 0;
<a name="l2377"><span class="linenum">2377</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('assignment'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id, 'groupid'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, 'userid'=&gt;0);
<a name="l2378"><span class="linenum">2378</span></a>              if (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> == -1) {
<a name="l2379"><span class="linenum">2379</span></a>  <span class="comment">                // This is a new submission so it must be the latest.</span>
<a name="l2380"><span class="linenum">2380</span></a>                  <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('latest')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/latest.html">latest</a> = 1;
<a name="l2381"><span class="linenum">2381</span></a>              } else {
<a name="l2382"><span class="linenum">2382</span></a>  <span class="comment">                // We need to work this out.</span>
<a name="l2383"><span class="linenum">2383</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('assign_submission', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'attemptnumber DESC', 'attemptnumber', 0, 1);
<a name="l2384"><span class="linenum">2384</span></a>                  if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>) {
<a name="l2385"><span class="linenum">2385</span></a>                      <a class="var it32145" onMouseOver="hilite(32145)" onMouseOut="lolite()" onClick="logVariable('latestsubmission')" href="../../_variables/latestsubmission.html">$latestsubmission</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l2386"><span class="linenum">2386</span></a>                  }
<a name="l2387"><span class="linenum">2387</span></a>                  if (!<a class="var it32145" onMouseOver="hilite(32145)" onMouseOut="lolite()" onClick="logVariable('latestsubmission')" href="../../_variables/latestsubmission.html">$latestsubmission</a> || (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> == <a class="var it32145" onMouseOver="hilite(32145)" onMouseOut="lolite()" onClick="logVariable('latestsubmission')" href="../../_variables/latestsubmission.html">$latestsubmission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it45739" onMouseOver="hilite(45739)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>)) {
<a name="l2388"><span class="linenum">2388</span></a>                      <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('latest')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/latest.html">latest</a> = 1;
<a name="l2389"><span class="linenum">2389</span></a>                  }
<a name="l2390"><span class="linenum">2390</span></a>              }
<a name="l2391"><span class="linenum">2391</span></a>              if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('latest')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/latest.html">latest</a>) {
<a name="l2392"><span class="linenum">2392</span></a>  <span class="comment">                // This is the case when we need to set latest to 0 for all the other attempts.</span>
<a name="l2393"><span class="linenum">2393</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('assign_submission', 'latest', 0, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2394"><span class="linenum">2394</span></a>              }
<a name="l2395"><span class="linenum">2395</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_NEW')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_NEW.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_NEW')">ASSIGN_SUBMISSION_STATUS_NEW</a>;
<a name="l2396"><span class="linenum">2396</span></a>              <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('sid')" href="../../_variables/sid.html">$sid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('assign_submission', <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l2397"><span class="linenum">2397</span></a>              return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assign_submission', array('id' =&gt; <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('sid')" href="../../_variables/sid.html">$sid</a>));
<a name="l2398"><span class="linenum">2398</span></a>          }
<a name="l2399"><span class="linenum">2399</span></a>          return false;
<a name="l2400"><span class="linenum">2400</span></a>      }
<a name="l2401"><span class="linenum">2401</span></a>  
<a name="l2402"><span class="linenum">2402</span></a>      <span class="comment">/**</span>
<a name="l2403"><span class="linenum">2403</span></a>  <span class="comment">     * View a summary listing of all assignments in the current course.</span>
<a name="l2404"><span class="linenum">2404</span></a>  <span class="comment">     *</span>
<a name="l2405"><span class="linenum">2405</span></a>  <span class="comment">     * @return string</span>
<a name="l2406"><span class="linenum">2406</span></a>  <span class="comment">     */</span>
<a name="l2407"><span class="linenum">2407</span></a>      private function <a class="function" onClick="logFunction('view_course_index')" href="../../_functions/view_course_index.html" onMouseOver="funcPopup(event,'view_course_index')">view_course_index</a>() {
<a name="l2408"><span class="linenum">2408</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l2409"><span class="linenum">2409</span></a>  
<a name="l2410"><span class="linenum">2410</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l2411"><span class="linenum">2411</span></a>  
<a name="l2412"><span class="linenum">2412</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>();
<a name="l2413"><span class="linenum">2413</span></a>          <a class="var it25256" onMouseOver="hilite(25256)" onMouseOut="lolite()" onClick="logVariable('strplural')" href="../../_variables/strplural.html">$strplural</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'assign');
<a name="l2414"><span class="linenum">2414</span></a>  
<a name="l2415"><span class="linenum">2415</span></a>          if (!<a class="var it698" onMouseOver="hilite(698)" onMouseOut="lolite()" onClick="logVariable('cms')" href="../../_variables/cms.html">$cms</a> = <a class="function" onClick="logFunction('get_coursemodules_in_course')" href="../../_functions/get_coursemodules_in_course.html" onMouseOver="funcPopup(event,'get_coursemodules_in_course')">get_coursemodules_in_course</a>('assign', <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'm.duedate')) {
<a name="l2416"><span class="linenum">2416</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('thereareno', 'moodle', <a class="var it25256" onMouseOver="hilite(25256)" onMouseOut="lolite()" onClick="logVariable('strplural')" href="../../_variables/strplural.html">$strplural</a>));
<a name="l2417"><span class="linenum">2417</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('continue_button')" href="../../_functions/continue_button.html" onMouseOver="funcPopup(event,'continue_button')">continue_button</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../course/view.php.html">/course/view.php</a>', array('id' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l2418"><span class="linenum">2418</span></a>              return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l2419"><span class="linenum">2419</span></a>          }
<a name="l2420"><span class="linenum">2420</span></a>  
<a name="l2421"><span class="linenum">2421</span></a>          <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('strsectionname')" href="../../_variables/strsectionname.html">$strsectionname</a> = '';
<a name="l2422"><span class="linenum">2422</span></a>          <a class="var it1869" onMouseOver="hilite(1869)" onMouseOut="lolite()" onClick="logVariable('usesections')" href="../../_variables/usesections.html">$usesections</a> = <a class="function" onClick="logFunction('course_format_uses_sections')" href="../../_functions/course_format_uses_sections.html" onMouseOver="funcPopup(event,'course_format_uses_sections')">course_format_uses_sections</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/format.html">format</a>);
<a name="l2423"><span class="linenum">2423</span></a>          <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l2424"><span class="linenum">2424</span></a>  
<a name="l2425"><span class="linenum">2425</span></a>          if (<a class="var it1869" onMouseOver="hilite(1869)" onMouseOut="lolite()" onClick="logVariable('usesections')" href="../../_variables/usesections.html">$usesections</a>) {
<a name="l2426"><span class="linenum">2426</span></a>              <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('strsectionname')" href="../../_variables/strsectionname.html">$strsectionname</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('sectionname', 'format_'.<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/format.html">format</a>);
<a name="l2427"><span class="linenum">2427</span></a>              <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../../_variables/sections.html">$sections</a> = <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_section_info_all')" href="../../_functions/get_section_info_all.html" onMouseOver="funcPopup(event,'get_section_info_all')">get_section_info_all</a>();
<a name="l2428"><span class="linenum">2428</span></a>          }
<a name="l2429"><span class="linenum">2429</span></a>          <a class="var it32146" onMouseOver="hilite(32146)" onMouseOut="lolite()" onClick="logVariable('courseindexsummary')" href="../../_variables/courseindexsummary.html">$courseindexsummary</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_course_index_summary')" href="../../_classes/assign_course_index_summary.html" onMouseOver="classPopup(event,'assign_course_index_summary')">assign_course_index_summary</a>(<a class="var it1869" onMouseOver="hilite(1869)" onMouseOut="lolite()" onClick="logVariable('usesections')" href="../../_variables/usesections.html">$usesections</a>, <a class="var it1873" onMouseOver="hilite(1873)" onMouseOut="lolite()" onClick="logVariable('strsectionname')" href="../../_variables/strsectionname.html">$strsectionname</a>);
<a name="l2430"><span class="linenum">2430</span></a>  
<a name="l2431"><span class="linenum">2431</span></a>          <a class="var it1858" onMouseOver="hilite(1858)" onMouseOut="lolite()" onClick="logVariable('timenow')" href="../../_variables/timenow.html">$timenow</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2432"><span class="linenum">2432</span></a>  
<a name="l2433"><span class="linenum">2433</span></a>          <a class="var it1878" onMouseOver="hilite(1878)" onMouseOut="lolite()" onClick="logVariable('currentsection')" href="../../_variables/currentsection.html">$currentsection</a> = '';
<a name="l2434"><span class="linenum">2434</span></a>          foreach (<a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('instances')" class="var it43006" onMouseOver="hilite(43006)" onMouseOut="lolite()" href="../../_variables/instances.html">instances</a>['assign'] as <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) {
<a name="l2435"><span class="linenum">2435</span></a>              if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('uservisible')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/uservisible.html">uservisible</a>) {
<a name="l2436"><span class="linenum">2436</span></a>                  continue;
<a name="l2437"><span class="linenum">2437</span></a>              }
<a name="l2438"><span class="linenum">2438</span></a>  
<a name="l2439"><span class="linenum">2439</span></a>              <a class="var it31285" onMouseOver="hilite(31285)" onMouseOut="lolite()" onClick="logVariable('timedue')" href="../../_variables/timedue.html">$timedue</a> = <a class="var it698" onMouseOver="hilite(698)" onMouseOut="lolite()" onClick="logVariable('cms')" href="../../_variables/cms.html">$cms</a>[<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]-&gt;duedate;
<a name="l2440"><span class="linenum">2440</span></a>  
<a name="l2441"><span class="linenum">2441</span></a>              <a class="var it5126" onMouseOver="hilite(5126)" onMouseOut="lolite()" onClick="logVariable('sectionname')" href="../../_variables/sectionname.html">$sectionname</a> = '';
<a name="l2442"><span class="linenum">2442</span></a>              if (<a class="var it1869" onMouseOver="hilite(1869)" onMouseOut="lolite()" onClick="logVariable('usesections')" href="../../_variables/usesections.html">$usesections</a> &amp;&amp; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/sectionnum.html">sectionnum</a>) {
<a name="l2443"><span class="linenum">2443</span></a>                  <a class="var it5126" onMouseOver="hilite(5126)" onMouseOut="lolite()" onClick="logVariable('sectionname')" href="../../_variables/sectionname.html">$sectionname</a> = <a class="function" onClick="logFunction('get_section_name')" href="../../_functions/get_section_name.html" onMouseOver="funcPopup(event,'get_section_name')">get_section_name</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../../_variables/sections.html">$sections</a>[<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/sectionnum.html">sectionnum</a>]);
<a name="l2444"><span class="linenum">2444</span></a>              }
<a name="l2445"><span class="linenum">2445</span></a>  
<a name="l2446"><span class="linenum">2446</span></a>              <a class="var it15024" onMouseOver="hilite(15024)" onMouseOut="lolite()" onClick="logVariable('submitted')" href="../../_variables/submitted.html">$submitted</a> = '';
<a name="l2447"><span class="linenum">2447</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2448"><span class="linenum">2448</span></a>  
<a name="l2449"><span class="linenum">2449</span></a>              <a class="var it284" onMouseOver="hilite(284)" onMouseOut="lolite()" onClick="logVariable('assignment')" href="../../_variables/assignment.html">$assignment</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign')" href="../../_classes/assign.html" onMouseOver="classPopup(event,'assign')">assign</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l2450"><span class="linenum">2450</span></a>  
<a name="l2451"><span class="linenum">2451</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:grade', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2452"><span class="linenum">2452</span></a>                  <a class="var it15024" onMouseOver="hilite(15024)" onMouseOut="lolite()" onClick="logVariable('submitted')" href="../../_variables/submitted.html">$submitted</a> = <a class="var it284" onMouseOver="hilite(284)" onMouseOut="lolite()" onClick="logVariable('assignment')" href="../../_variables/assignment.html">$assignment</a>-&gt;<a class="function" onClick="logFunction('count_submissions_with_status')" href="../../_functions/count_submissions_with_status.html" onMouseOver="funcPopup(event,'count_submissions_with_status')">count_submissions_with_status</a>(<a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>);
<a name="l2453"><span class="linenum">2453</span></a>  
<a name="l2454"><span class="linenum">2454</span></a>              } else if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:submit', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l2455"><span class="linenum">2455</span></a>                  <a class="var it32147" onMouseOver="hilite(32147)" onMouseOut="lolite()" onClick="logVariable('usersubmission')" href="../../_variables/usersubmission.html">$usersubmission</a> = <a class="var it284" onMouseOver="hilite(284)" onMouseOut="lolite()" onClick="logVariable('assignment')" href="../../_variables/assignment.html">$assignment</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l2456"><span class="linenum">2456</span></a>  
<a name="l2457"><span class="linenum">2457</span></a>                  if (!empty(<a class="var it32147" onMouseOver="hilite(32147)" onMouseOut="lolite()" onClick="logVariable('usersubmission')" href="../../_variables/usersubmission.html">$usersubmission</a>-&gt;<a onClick="logVariable('status')" class="var it45740" onMouseOver="hilite(45740)" onMouseOut="lolite()" href="../../_variables/status.html">status</a>)) {
<a name="l2458"><span class="linenum">2458</span></a>                      <a class="var it15024" onMouseOver="hilite(15024)" onMouseOut="lolite()" onClick="logVariable('submitted')" href="../../_variables/submitted.html">$submitted</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionstatus_' . <a class="var it32147" onMouseOver="hilite(32147)" onMouseOut="lolite()" onClick="logVariable('usersubmission')" href="../../_variables/usersubmission.html">$usersubmission</a>-&gt;<a onClick="logVariable('status')" class="var it45740" onMouseOver="hilite(45740)" onMouseOut="lolite()" href="../../_variables/status.html">status</a>, 'assign');
<a name="l2459"><span class="linenum">2459</span></a>                  } else {
<a name="l2460"><span class="linenum">2460</span></a>                      <a class="var it15024" onMouseOver="hilite(15024)" onMouseOut="lolite()" onClick="logVariable('submitted')" href="../../_variables/submitted.html">$submitted</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionstatus_', 'assign');
<a name="l2461"><span class="linenum">2461</span></a>                  }
<a name="l2462"><span class="linenum">2462</span></a>              }
<a name="l2463"><span class="linenum">2463</span></a>              <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod', 'assign', <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2464"><span class="linenum">2464</span></a>              if (isset(<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]) &amp;&amp;
<a name="l2465"><span class="linenum">2465</span></a>                      !<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]-&gt;hidden ) {
<a name="l2466"><span class="linenum">2466</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]-&gt;str_grade;
<a name="l2467"><span class="linenum">2467</span></a>              } else {
<a name="l2468"><span class="linenum">2468</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = '-';
<a name="l2469"><span class="linenum">2469</span></a>              }
<a name="l2470"><span class="linenum">2470</span></a>  
<a name="l2471"><span class="linenum">2471</span></a>              <a class="var it32146" onMouseOver="hilite(32146)" onMouseOut="lolite()" onClick="logVariable('courseindexsummary')" href="../../_variables/courseindexsummary.html">$courseindexsummary</a>-&gt;<a class="function" onClick="logFunction('add_assign_info')" href="../../_functions/add_assign_info.html" onMouseOver="funcPopup(event,'add_assign_info')">add_assign_info</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, <a class="var it5126" onMouseOver="hilite(5126)" onMouseOut="lolite()" onClick="logVariable('sectionname')" href="../../_variables/sectionname.html">$sectionname</a>, <a class="var it31285" onMouseOver="hilite(31285)" onMouseOut="lolite()" onClick="logVariable('timedue')" href="../../_variables/timedue.html">$timedue</a>, <a class="var it15024" onMouseOver="hilite(15024)" onMouseOut="lolite()" onClick="logVariable('submitted')" href="../../_variables/submitted.html">$submitted</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l2472"><span class="linenum">2472</span></a>  
<a name="l2473"><span class="linenum">2473</span></a>          }
<a name="l2474"><span class="linenum">2474</span></a>  
<a name="l2475"><span class="linenum">2475</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it32146" onMouseOver="hilite(32146)" onMouseOut="lolite()" onClick="logVariable('courseindexsummary')" href="../../_variables/courseindexsummary.html">$courseindexsummary</a>);
<a name="l2476"><span class="linenum">2476</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l2477"><span class="linenum">2477</span></a>  
<a name="l2478"><span class="linenum">2478</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l2479"><span class="linenum">2479</span></a>      }
<a name="l2480"><span class="linenum">2480</span></a>  
<a name="l2481"><span class="linenum">2481</span></a>      <span class="comment">/**</span>
<a name="l2482"><span class="linenum">2482</span></a>  <span class="comment">     * View a page rendered by a plugin.</span>
<a name="l2483"><span class="linenum">2483</span></a>  <span class="comment">     *</span>
<a name="l2484"><span class="linenum">2484</span></a>  <span class="comment">     * Uses url parameters 'pluginaction', 'pluginsubtype', 'plugin', and 'id'.</span>
<a name="l2485"><span class="linenum">2485</span></a>  <span class="comment">     *</span>
<a name="l2486"><span class="linenum">2486</span></a>  <span class="comment">     * @return string</span>
<a name="l2487"><span class="linenum">2487</span></a>  <span class="comment">     */</span>
<a name="l2488"><span class="linenum">2488</span></a>      protected function <a class="function" onClick="logFunction('view_plugin_page')" href="../../_functions/view_plugin_page.html" onMouseOver="funcPopup(event,'view_plugin_page')">view_plugin_page</a>() {
<a name="l2489"><span class="linenum">2489</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l2490"><span class="linenum">2490</span></a>  
<a name="l2491"><span class="linenum">2491</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l2492"><span class="linenum">2492</span></a>  
<a name="l2493"><span class="linenum">2493</span></a>          <a class="var it32148" onMouseOver="hilite(32148)" onMouseOut="lolite()" onClick="logVariable('pluginsubtype')" href="../../_variables/pluginsubtype.html">$pluginsubtype</a> = <a class="function" onClick="logFunction('required_param')" href="../../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('pluginsubtype', <a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>);
<a name="l2494"><span class="linenum">2494</span></a>          <a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a> = <a class="function" onClick="logFunction('required_param')" href="../../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('plugin', <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l2495"><span class="linenum">2495</span></a>          <a class="var it32149" onMouseOver="hilite(32149)" onMouseOut="lolite()" onClick="logVariable('pluginaction')" href="../../_variables/pluginaction.html">$pluginaction</a> = <a class="function" onClick="logFunction('required_param')" href="../../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('pluginaction', <a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>);
<a name="l2496"><span class="linenum">2496</span></a>  
<a name="l2497"><span class="linenum">2497</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_plugin_by_type')" href="../../_functions/get_plugin_by_type.html" onMouseOver="funcPopup(event,'get_plugin_by_type')">get_plugin_by_type</a>(<a class="var it32148" onMouseOver="hilite(32148)" onMouseOut="lolite()" onClick="logVariable('pluginsubtype')" href="../../_variables/pluginsubtype.html">$pluginsubtype</a>, <a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a>);
<a name="l2498"><span class="linenum">2498</span></a>          if (!<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l2499"><span class="linenum">2499</span></a>              <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidformdata', '');
<a name="l2500"><span class="linenum">2500</span></a>              return;
<a name="l2501"><span class="linenum">2501</span></a>          }
<a name="l2502"><span class="linenum">2502</span></a>  
<a name="l2503"><span class="linenum">2503</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('view_page')" href="../../_functions/view_page.html" onMouseOver="funcPopup(event,'view_page')">view_page</a>(<a class="var it32149" onMouseOver="hilite(32149)" onMouseOut="lolite()" onClick="logVariable('pluginaction')" href="../../_variables/pluginaction.html">$pluginaction</a>);
<a name="l2504"><span class="linenum">2504</span></a>  
<a name="l2505"><span class="linenum">2505</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l2506"><span class="linenum">2506</span></a>      }
<a name="l2507"><span class="linenum">2507</span></a>  
<a name="l2508"><span class="linenum">2508</span></a>  
<a name="l2509"><span class="linenum">2509</span></a>      <span class="comment">/**</span>
<a name="l2510"><span class="linenum">2510</span></a>  <span class="comment">     * This is used for team assignments to get the group for the specified user.</span>
<a name="l2511"><span class="linenum">2511</span></a>  <span class="comment">     * If the user is a member of multiple or no groups this will return false</span>
<a name="l2512"><span class="linenum">2512</span></a>  <span class="comment">     *</span>
<a name="l2513"><span class="linenum">2513</span></a>  <span class="comment">     * @param int $userid The id of the user whose submission we want</span>
<a name="l2514"><span class="linenum">2514</span></a>  <span class="comment">     * @return mixed The group or false</span>
<a name="l2515"><span class="linenum">2515</span></a>  <span class="comment">     */</span>
<a name="l2516"><span class="linenum">2516</span></a>      public function <a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l2517"><span class="linenum">2517</span></a>  
<a name="l2518"><span class="linenum">2518</span></a>          if (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('usersubmissiongroups')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/usersubmissiongroups.html">usersubmissiongroups</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>])) {
<a name="l2519"><span class="linenum">2519</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('usersubmissiongroups')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/usersubmissiongroups.html">usersubmissiongroups</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>];
<a name="l2520"><span class="linenum">2520</span></a>          }
<a name="l2521"><span class="linenum">2521</span></a>  
<a name="l2522"><span class="linenum">2522</span></a>          <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_all_groups')" href="../../_functions/get_all_groups.html" onMouseOver="funcPopup(event,'get_all_groups')">get_all_groups</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l2523"><span class="linenum">2523</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>) != 1) {
<a name="l2524"><span class="linenum">2524</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = false;
<a name="l2525"><span class="linenum">2525</span></a>          } else {
<a name="l2526"><span class="linenum">2526</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = <a class="phpfunction" onClick="logFunction('array_pop')" href="../../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>);
<a name="l2527"><span class="linenum">2527</span></a>          }
<a name="l2528"><span class="linenum">2528</span></a>  
<a name="l2529"><span class="linenum">2529</span></a>  <span class="comment">        // Cache the user submission group.</span>
<a name="l2530"><span class="linenum">2530</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('usersubmissiongroups')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/usersubmissiongroups.html">usersubmissiongroups</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>] = <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l2531"><span class="linenum">2531</span></a>  
<a name="l2532"><span class="linenum">2532</span></a>          return <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l2533"><span class="linenum">2533</span></a>      }
<a name="l2534"><span class="linenum">2534</span></a>  
<a name="l2535"><span class="linenum">2535</span></a>      <span class="comment">/**</span>
<a name="l2536"><span class="linenum">2536</span></a>  <span class="comment">     * Gets all groups the user is a member of.</span>
<a name="l2537"><span class="linenum">2537</span></a>  <span class="comment">     *</span>
<a name="l2538"><span class="linenum">2538</span></a>  <span class="comment">     * @param int $userid Teh id of the user who's groups we are checking</span>
<a name="l2539"><span class="linenum">2539</span></a>  <span class="comment">     * @return array The group objects</span>
<a name="l2540"><span class="linenum">2540</span></a>  <span class="comment">     */</span>
<a name="l2541"><span class="linenum">2541</span></a>      public function <a class="function" onClick="logFunction('get_all_groups')" href="../../_functions/get_all_groups.html" onMouseOver="funcPopup(event,'get_all_groups')">get_all_groups</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l2542"><span class="linenum">2542</span></a>          if (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('usergroups')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/usergroups.html">usergroups</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>])) {
<a name="l2543"><span class="linenum">2543</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('usergroups')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/usergroups.html">usergroups</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>];
<a name="l2544"><span class="linenum">2544</span></a>          }
<a name="l2545"><span class="linenum">2545</span></a>  
<a name="l2546"><span class="linenum">2546</span></a>          <a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('grouping')" href="../../_variables/grouping.html">$grouping</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmissiongroupingid;
<a name="l2547"><span class="linenum">2547</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('grouping')" href="../../_variables/grouping.html">$grouping</a>);
<a name="l2548"><span class="linenum">2548</span></a>  
<a name="l2549"><span class="linenum">2549</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('usergroups')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/usergroups.html">usergroups</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>] = <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l2550"><span class="linenum">2550</span></a>  
<a name="l2551"><span class="linenum">2551</span></a>          return <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l2552"><span class="linenum">2552</span></a>      }
<a name="l2553"><span class="linenum">2553</span></a>  
<a name="l2554"><span class="linenum">2554</span></a>  
<a name="l2555"><span class="linenum">2555</span></a>      <span class="comment">/**</span>
<a name="l2556"><span class="linenum">2556</span></a>  <span class="comment">     * Display the submission that is used by a plugin.</span>
<a name="l2557"><span class="linenum">2557</span></a>  <span class="comment">     *</span>
<a name="l2558"><span class="linenum">2558</span></a>  <span class="comment">     * Uses url parameters 'sid', 'gid' and 'plugin'.</span>
<a name="l2559"><span class="linenum">2559</span></a>  <span class="comment">     *</span>
<a name="l2560"><span class="linenum">2560</span></a>  <span class="comment">     * @param string $pluginsubtype</span>
<a name="l2561"><span class="linenum">2561</span></a>  <span class="comment">     * @return string</span>
<a name="l2562"><span class="linenum">2562</span></a>  <span class="comment">     */</span>
<a name="l2563"><span class="linenum">2563</span></a>      protected function <a class="function" onClick="logFunction('view_plugin_content')" href="../../_functions/view_plugin_content.html" onMouseOver="funcPopup(event,'view_plugin_content')">view_plugin_content</a>(<a class="var it32148" onMouseOver="hilite(32148)" onMouseOut="lolite()" onClick="logVariable('pluginsubtype')" href="../../_variables/pluginsubtype.html">$pluginsubtype</a>) {
<a name="l2564"><span class="linenum">2564</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l2565"><span class="linenum">2565</span></a>  
<a name="l2566"><span class="linenum">2566</span></a>          <a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../_variables/submissionid.html">$submissionid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('sid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2567"><span class="linenum">2567</span></a>          <a class="var it300" onMouseOver="hilite(300)" onMouseOut="lolite()" onClick="logVariable('gradeid')" href="../../_variables/gradeid.html">$gradeid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('gid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2568"><span class="linenum">2568</span></a>          <a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a> = <a class="function" onClick="logFunction('required_param')" href="../../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('plugin', <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l2569"><span class="linenum">2569</span></a>          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = null;
<a name="l2570"><span class="linenum">2570</span></a>          if (<a class="var it32148" onMouseOver="hilite(32148)" onMouseOut="lolite()" onClick="logVariable('pluginsubtype')" href="../../_variables/pluginsubtype.html">$pluginsubtype</a> == 'assignsubmission') {
<a name="l2571"><span class="linenum">2571</span></a>              <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugin_by_type')" href="../../_functions/get_submission_plugin_by_type.html" onMouseOver="funcPopup(event,'get_submission_plugin_by_type')">get_submission_plugin_by_type</a>(<a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a>);
<a name="l2572"><span class="linenum">2572</span></a>              if (<a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../_variables/submissionid.html">$submissionid</a> &lt;= 0) {
<a name="l2573"><span class="linenum">2573</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Submission id should not be 0');
<a name="l2574"><span class="linenum">2574</span></a>              }
<a name="l2575"><span class="linenum">2575</span></a>              <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission')" href="../../_functions/get_submission.html" onMouseOver="funcPopup(event,'get_submission')">get_submission</a>(<a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../_variables/submissionid.html">$submissionid</a>);
<a name="l2576"><span class="linenum">2576</span></a>  
<a name="l2577"><span class="linenum">2577</span></a>  <span class="comment">            // Check permissions.</span>
<a name="l2578"><span class="linenum">2578</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('require_view_submission')" href="../../_functions/require_view_submission.html" onMouseOver="funcPopup(event,'require_view_submission')">require_view_submission</a>(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('userid')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>);
<a name="l2579"><span class="linenum">2579</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(),
<a name="l2580"><span class="linenum">2580</span></a>                                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l2581"><span class="linenum">2581</span></a>                                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_intro')" href="../../_functions/show_intro.html" onMouseOver="funcPopup(event,'show_intro')">show_intro</a>(),
<a name="l2582"><span class="linenum">2582</span></a>                                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l2583"><span class="linenum">2583</span></a>                                                                <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>()));
<a name="l2584"><span class="linenum">2584</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_submission_plugin_submission')" href="../../_classes/assign_submission_plugin_submission.html" onMouseOver="classPopup(event,'assign_submission_plugin_submission')">assign_submission_plugin_submission</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>,
<a name="l2585"><span class="linenum">2585</span></a>                                                                <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>,
<a name="l2586"><span class="linenum">2586</span></a>                                                                <a class="class" onClick="logClass('assign_submission_plugin_submission')" href="../../_classes/assign_submission_plugin_submission.html" onMouseOver="classPopup(event,'assign_submission_plugin_submission')">assign_submission_plugin_submission</a>::FULL,
<a name="l2587"><span class="linenum">2587</span></a>                                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l2588"><span class="linenum">2588</span></a>                                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_action')" href="../../_functions/get_return_action.html" onMouseOver="funcPopup(event,'get_return_action')">get_return_action</a>(),
<a name="l2589"><span class="linenum">2589</span></a>                                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_params')" href="../../_functions/get_return_params.html" onMouseOver="funcPopup(event,'get_return_params')">get_return_params</a>()));
<a name="l2590"><span class="linenum">2590</span></a>  
<a name="l2591"><span class="linenum">2591</span></a>  <span class="comment">            // Trigger event for viewing a submission.</span>
<a name="l2592"><span class="linenum">2592</span></a>              \mod_assign\event\<a class="class" onClick="logClass('submission_viewed')" href="../../_classes/submission_viewed.html" onMouseOver="classPopup(event,'submission_viewed')">submission_viewed</a>::<a class="function" onClick="logFunction('create_from_submission')" href="../../_functions/create_from_submission.html" onMouseOver="funcPopup(event,'create_from_submission')">create_from_submission</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2593"><span class="linenum">2593</span></a>  
<a name="l2594"><span class="linenum">2594</span></a>          } else {
<a name="l2595"><span class="linenum">2595</span></a>              <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_plugin_by_type')" href="../../_functions/get_feedback_plugin_by_type.html" onMouseOver="funcPopup(event,'get_feedback_plugin_by_type')">get_feedback_plugin_by_type</a>(<a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a>);
<a name="l2596"><span class="linenum">2596</span></a>              if (<a class="var it300" onMouseOver="hilite(300)" onMouseOut="lolite()" onClick="logVariable('gradeid')" href="../../_variables/gradeid.html">$gradeid</a> &lt;= 0) {
<a name="l2597"><span class="linenum">2597</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Grade id should not be 0');
<a name="l2598"><span class="linenum">2598</span></a>              }
<a name="l2599"><span class="linenum">2599</span></a>              <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_grade')" href="../../_functions/get_grade.html" onMouseOver="funcPopup(event,'get_grade')">get_grade</a>(<a class="var it300" onMouseOver="hilite(300)" onMouseOut="lolite()" onClick="logVariable('gradeid')" href="../../_variables/gradeid.html">$gradeid</a>);
<a name="l2600"><span class="linenum">2600</span></a>  <span class="comment">            // Check permissions.</span>
<a name="l2601"><span class="linenum">2601</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('require_view_submission')" href="../../_functions/require_view_submission.html" onMouseOver="funcPopup(event,'require_view_submission')">require_view_submission</a>(<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('userid')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>);
<a name="l2602"><span class="linenum">2602</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(),
<a name="l2603"><span class="linenum">2603</span></a>                                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l2604"><span class="linenum">2604</span></a>                                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_intro')" href="../../_functions/show_intro.html" onMouseOver="funcPopup(event,'show_intro')">show_intro</a>(),
<a name="l2605"><span class="linenum">2605</span></a>                                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l2606"><span class="linenum">2606</span></a>                                                                <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>()));
<a name="l2607"><span class="linenum">2607</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_feedback_plugin_feedback')" href="../../_classes/assign_feedback_plugin_feedback.html" onMouseOver="classPopup(event,'assign_feedback_plugin_feedback')">assign_feedback_plugin_feedback</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>,
<a name="l2608"><span class="linenum">2608</span></a>                                                                <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>,
<a name="l2609"><span class="linenum">2609</span></a>                                                                <a class="class" onClick="logClass('assign_feedback_plugin_feedback')" href="../../_classes/assign_feedback_plugin_feedback.html" onMouseOver="classPopup(event,'assign_feedback_plugin_feedback')">assign_feedback_plugin_feedback</a>::FULL,
<a name="l2610"><span class="linenum">2610</span></a>                                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l2611"><span class="linenum">2611</span></a>                                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_action')" href="../../_functions/get_return_action.html" onMouseOver="funcPopup(event,'get_return_action')">get_return_action</a>(),
<a name="l2612"><span class="linenum">2612</span></a>                                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_params')" href="../../_functions/get_return_params.html" onMouseOver="funcPopup(event,'get_return_params')">get_return_params</a>()));
<a name="l2613"><span class="linenum">2613</span></a>  
<a name="l2614"><span class="linenum">2614</span></a>  <span class="comment">            // Trigger event for viewing feedback.</span>
<a name="l2615"><span class="linenum">2615</span></a>              \mod_assign\event\<a class="class" onClick="logClass('feedback_viewed')" href="../../_classes/feedback_viewed.html" onMouseOver="classPopup(event,'feedback_viewed')">feedback_viewed</a>::<a class="function" onClick="logFunction('create_from_grade')" href="../../_functions/create_from_grade.html" onMouseOver="funcPopup(event,'create_from_grade')">create_from_grade</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2616"><span class="linenum">2616</span></a>          }
<a name="l2617"><span class="linenum">2617</span></a>  
<a name="l2618"><span class="linenum">2618</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_return_links')" href="../../_functions/view_return_links.html" onMouseOver="funcPopup(event,'view_return_links')">view_return_links</a>();
<a name="l2619"><span class="linenum">2619</span></a>  
<a name="l2620"><span class="linenum">2620</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l2621"><span class="linenum">2621</span></a>  
<a name="l2622"><span class="linenum">2622</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l2623"><span class="linenum">2623</span></a>      }
<a name="l2624"><span class="linenum">2624</span></a>  
<a name="l2625"><span class="linenum">2625</span></a>      <span class="comment">/**</span>
<a name="l2626"><span class="linenum">2626</span></a>  <span class="comment">     * Rewrite plugin file urls so they resolve correctly in an exported zip.</span>
<a name="l2627"><span class="linenum">2627</span></a>  <span class="comment">     *</span>
<a name="l2628"><span class="linenum">2628</span></a>  <span class="comment">     * @param string $text - The replacement text</span>
<a name="l2629"><span class="linenum">2629</span></a>  <span class="comment">     * @param stdClass $user - The user record</span>
<a name="l2630"><span class="linenum">2630</span></a>  <span class="comment">     * @param assign_plugin $plugin - The assignment plugin</span>
<a name="l2631"><span class="linenum">2631</span></a>  <span class="comment">     */</span>
<a name="l2632"><span class="linenum">2632</span></a>      public function <a class="function" onClick="logFunction('download_rewrite_pluginfile_urls')" href="../../_functions/download_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'download_rewrite_pluginfile_urls')">download_rewrite_pluginfile_urls</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l2633"><span class="linenum">2633</span></a>          <a class="var it688" onMouseOver="hilite(688)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>());
<a name="l2634"><span class="linenum">2634</span></a>          <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../_variables/groupname.html">$groupname</a> = '';
<a name="l2635"><span class="linenum">2635</span></a>          if (<a class="var it688" onMouseOver="hilite(688)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a>) {
<a name="l2636"><span class="linenum">2636</span></a>              <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), true);
<a name="l2637"><span class="linenum">2637</span></a>              <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../_variables/groupname.html">$groupname</a> = <a class="function" onClick="logFunction('groups_get_group_name')" href="../../_functions/groups_get_group_name.html" onMouseOver="funcPopup(event,'groups_get_group_name')">groups_get_group_name</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>).'-';
<a name="l2638"><span class="linenum">2638</span></a>          }
<a name="l2639"><span class="linenum">2639</span></a>  
<a name="l2640"><span class="linenum">2640</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>()) {
<a name="l2641"><span class="linenum">2641</span></a>              <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../_variables/groupname.html">$groupname</a> . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('participant', 'assign');
<a name="l2642"><span class="linenum">2642</span></a>              <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('_', ' ', <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a>);
<a name="l2643"><span class="linenum">2643</span></a>              <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = <a class="function" onClick="logFunction('clean_filename')" href="../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> . '_' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_uniqueid_for_user')" href="../../_functions/get_uniqueid_for_user.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user')">get_uniqueid_for_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) . '_');
<a name="l2644"><span class="linenum">2644</span></a>          } else {
<a name="l2645"><span class="linenum">2645</span></a>              <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../_variables/groupname.html">$groupname</a> . <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l2646"><span class="linenum">2646</span></a>              <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('_', ' ', <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a>);
<a name="l2647"><span class="linenum">2647</span></a>              <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = <a class="function" onClick="logFunction('clean_filename')" href="../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> . '_' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_uniqueid_for_user')" href="../../_functions/get_uniqueid_for_user.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user')">get_uniqueid_for_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) . '_');
<a name="l2648"><span class="linenum">2648</span></a>          }
<a name="l2649"><span class="linenum">2649</span></a>  
<a name="l2650"><span class="linenum">2650</span></a>          <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../../_variables/subtype.html">$subtype</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_subtype')" href="../../_functions/get_subtype.html" onMouseOver="funcPopup(event,'get_subtype')">get_subtype</a>();
<a name="l2651"><span class="linenum">2651</span></a>          <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>();
<a name="l2652"><span class="linenum">2652</span></a>          <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> . <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../../_variables/subtype.html">$subtype</a> . '_' . <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> . '_';
<a name="l2653"><span class="linenum">2653</span></a>  
<a name="l2654"><span class="linenum">2654</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('@@PLUGINFILE@@/', <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a>, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>);
<a name="l2655"><span class="linenum">2655</span></a>  
<a name="l2656"><span class="linenum">2656</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l2657"><span class="linenum">2657</span></a>      }
<a name="l2658"><span class="linenum">2658</span></a>  
<a name="l2659"><span class="linenum">2659</span></a>      <span class="comment">/**</span>
<a name="l2660"><span class="linenum">2660</span></a>  <span class="comment">     * Render the content in editor that is often used by plugin.</span>
<a name="l2661"><span class="linenum">2661</span></a>  <span class="comment">     *</span>
<a name="l2662"><span class="linenum">2662</span></a>  <span class="comment">     * @param string $filearea</span>
<a name="l2663"><span class="linenum">2663</span></a>  <span class="comment">     * @param int  $submissionid</span>
<a name="l2664"><span class="linenum">2664</span></a>  <span class="comment">     * @param string $plugintype</span>
<a name="l2665"><span class="linenum">2665</span></a>  <span class="comment">     * @param string $editor</span>
<a name="l2666"><span class="linenum">2666</span></a>  <span class="comment">     * @param string $component</span>
<a name="l2667"><span class="linenum">2667</span></a>  <span class="comment">     * @return string</span>
<a name="l2668"><span class="linenum">2668</span></a>  <span class="comment">     */</span>
<a name="l2669"><span class="linenum">2669</span></a>      public function <a class="function" onClick="logFunction('render_editor_content')" href="../../_functions/render_editor_content.html" onMouseOver="funcPopup(event,'render_editor_content')">render_editor_content</a>(<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../_variables/submissionid.html">$submissionid</a>, <a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a>, <a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>) {
<a name="l2670"><span class="linenum">2670</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2671"><span class="linenum">2671</span></a>  
<a name="l2672"><span class="linenum">2672</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = '';
<a name="l2673"><span class="linenum">2673</span></a>  
<a name="l2674"><span class="linenum">2674</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugin_by_type')" href="../../_functions/get_submission_plugin_by_type.html" onMouseOver="funcPopup(event,'get_submission_plugin_by_type')">get_submission_plugin_by_type</a>(<a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a>);
<a name="l2675"><span class="linenum">2675</span></a>  
<a name="l2676"><span class="linenum">2676</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_editor_text')" href="../../_functions/get_editor_text.html" onMouseOver="funcPopup(event,'get_editor_text')">get_editor_text</a>(<a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>, <a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../_variables/submissionid.html">$submissionid</a>);
<a name="l2677"><span class="linenum">2677</span></a>          <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_editor_format')" href="../../_functions/get_editor_format.html" onMouseOver="funcPopup(event,'get_editor_format')">get_editor_format</a>(<a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>, <a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../_variables/submissionid.html">$submissionid</a>);
<a name="l2678"><span class="linenum">2678</span></a>  
<a name="l2679"><span class="linenum">2679</span></a>          <a class="var it32150" onMouseOver="hilite(32150)" onMouseOut="lolite()" onClick="logVariable('finaltext')" href="../../_variables/finaltext.html">$finaltext</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>,
<a name="l2680"><span class="linenum">2680</span></a>                                                    '<a class="filename" href="../../pluginfile.php.html">pluginfile.php</a>',
<a name="l2681"><span class="linenum">2681</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;id,
<a name="l2682"><span class="linenum">2682</span></a>                                                    <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>,
<a name="l2683"><span class="linenum">2683</span></a>                                                    <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>,
<a name="l2684"><span class="linenum">2684</span></a>                                                    <a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../_variables/submissionid.html">$submissionid</a>);
<a name="l2685"><span class="linenum">2685</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('overflowdiv' =&gt; true, 'context' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l2686"><span class="linenum">2686</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> .= <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it32150" onMouseOver="hilite(32150)" onMouseOut="lolite()" onClick="logVariable('finaltext')" href="../../_variables/finaltext.html">$finaltext</a>, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2687"><span class="linenum">2687</span></a>  
<a name="l2688"><span class="linenum">2688</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableportfolios')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/enableportfolios.html">enableportfolios</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:exportownsubmission', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l2689"><span class="linenum">2689</span></a>              require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/portfoliolib.php');
<a name="l2690"><span class="linenum">2690</span></a>  
<a name="l2691"><span class="linenum">2691</span></a>              <a class="var it2196" onMouseOver="hilite(2196)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a> = <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_add_button')" href="../../_classes/portfolio_add_button.html" onMouseOver="classPopup(event,'portfolio_add_button')">portfolio_add_button</a>();
<a name="l2692"><span class="linenum">2692</span></a>              <a class="var it32151" onMouseOver="hilite(32151)" onMouseOut="lolite()" onClick="logVariable('portfolioparams')" href="../../_variables/portfolioparams.html">$portfolioparams</a> = array('cmid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l2693"><span class="linenum">2693</span></a>                                       'sid' =&gt; <a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../_variables/submissionid.html">$submissionid</a>,
<a name="l2694"><span class="linenum">2694</span></a>                                       'plugin' =&gt; <a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a>,
<a name="l2695"><span class="linenum">2695</span></a>                                       'editor' =&gt; <a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>,
<a name="l2696"><span class="linenum">2696</span></a>                                       'area'=&gt;<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>);
<a name="l2697"><span class="linenum">2697</span></a>              <a class="var it2196" onMouseOver="hilite(2196)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a>-&gt;<a class="function" onClick="logFunction('set_callback_options')" href="../../_functions/set_callback_options.html" onMouseOver="funcPopup(event,'set_callback_options')">set_callback_options</a>('assign_portfolio_caller', <a class="var it32151" onMouseOver="hilite(32151)" onMouseOut="lolite()" onClick="logVariable('portfolioparams')" href="../../_variables/portfolioparams.html">$portfolioparams</a>, 'mod_assign');
<a name="l2698"><span class="linenum">2698</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2699"><span class="linenum">2699</span></a>  
<a name="l2700"><span class="linenum">2700</span></a>              if (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id,
<a name="l2701"><span class="linenum">2701</span></a>                                               <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>,
<a name="l2702"><span class="linenum">2702</span></a>                                               <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>,
<a name="l2703"><span class="linenum">2703</span></a>                                               <a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../_variables/submissionid.html">$submissionid</a>,
<a name="l2704"><span class="linenum">2704</span></a>                                               'timemodified',
<a name="l2705"><span class="linenum">2705</span></a>                                               false)) {
<a name="l2706"><span class="linenum">2706</span></a>                  <a class="var it2196" onMouseOver="hilite(2196)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a>-&gt;<a class="function" onClick="logFunction('set_formats')" href="../../_functions/set_formats.html" onMouseOver="funcPopup(event,'set_formats')">set_formats</a>(<a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_RICHHTML')" href="../../_constants/PORTFOLIO_FORMAT_RICHHTML.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_RICHHTML')">PORTFOLIO_FORMAT_RICHHTML</a>);
<a name="l2707"><span class="linenum">2707</span></a>              } else {
<a name="l2708"><span class="linenum">2708</span></a>                  <a class="var it2196" onMouseOver="hilite(2196)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a>-&gt;<a class="function" onClick="logFunction('set_formats')" href="../../_functions/set_formats.html" onMouseOver="funcPopup(event,'set_formats')">set_formats</a>(<a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_PLAINHTML')" href="../../_constants/PORTFOLIO_FORMAT_PLAINHTML.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_PLAINHTML')">PORTFOLIO_FORMAT_PLAINHTML</a>);
<a name="l2709"><span class="linenum">2709</span></a>              }
<a name="l2710"><span class="linenum">2710</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> .= <a class="var it2196" onMouseOver="hilite(2196)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a>-&gt;<a class="function" onClick="logFunction('to_html')" href="../../_functions/to_html.html" onMouseOver="funcPopup(event,'to_html')">to_html</a>();
<a name="l2711"><span class="linenum">2711</span></a>          }
<a name="l2712"><span class="linenum">2712</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l2713"><span class="linenum">2713</span></a>      }
<a name="l2714"><span class="linenum">2714</span></a>  
<a name="l2715"><span class="linenum">2715</span></a>      <span class="comment">/**</span>
<a name="l2716"><span class="linenum">2716</span></a>  <span class="comment">     * Display a continue page after grading.</span>
<a name="l2717"><span class="linenum">2717</span></a>  <span class="comment">     *</span>
<a name="l2718"><span class="linenum">2718</span></a>  <span class="comment">     * @param string $message - The message to display.</span>
<a name="l2719"><span class="linenum">2719</span></a>  <span class="comment">     * @return string</span>
<a name="l2720"><span class="linenum">2720</span></a>  <span class="comment">     */</span>
<a name="l2721"><span class="linenum">2721</span></a>      protected function <a class="function" onClick="logFunction('view_savegrading_result')" href="../../_functions/view_savegrading_result.html" onMouseOver="funcPopup(event,'view_savegrading_result')">view_savegrading_result</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>) {
<a name="l2722"><span class="linenum">2722</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l2723"><span class="linenum">2723</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(),
<a name="l2724"><span class="linenum">2724</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l2725"><span class="linenum">2725</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_intro')" href="../../_functions/show_intro.html" onMouseOver="funcPopup(event,'show_intro')">show_intro</a>(),
<a name="l2726"><span class="linenum">2726</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l2727"><span class="linenum">2727</span></a>                                                        <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savegradingresult', 'assign')));
<a name="l2728"><span class="linenum">2728</span></a>          <a class="var it32152" onMouseOver="hilite(32152)" onMouseOut="lolite()" onClick="logVariable('gradingresult')" href="../../_variables/gradingresult.html">$gradingresult</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_gradingmessage')" href="../../_classes/assign_gradingmessage.html" onMouseOver="classPopup(event,'assign_gradingmessage')">assign_gradingmessage</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savegradingresult', 'assign'),
<a name="l2729"><span class="linenum">2729</span></a>                                                     <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>,
<a name="l2730"><span class="linenum">2730</span></a>                                                     <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id);
<a name="l2731"><span class="linenum">2731</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it32152" onMouseOver="hilite(32152)" onMouseOut="lolite()" onClick="logVariable('gradingresult')" href="../../_variables/gradingresult.html">$gradingresult</a>);
<a name="l2732"><span class="linenum">2732</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l2733"><span class="linenum">2733</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l2734"><span class="linenum">2734</span></a>      }
<a name="l2735"><span class="linenum">2735</span></a>      <span class="comment">/**</span>
<a name="l2736"><span class="linenum">2736</span></a>  <span class="comment">     * Display a continue page after quickgrading.</span>
<a name="l2737"><span class="linenum">2737</span></a>  <span class="comment">     *</span>
<a name="l2738"><span class="linenum">2738</span></a>  <span class="comment">     * @param string $message - The message to display.</span>
<a name="l2739"><span class="linenum">2739</span></a>  <span class="comment">     * @return string</span>
<a name="l2740"><span class="linenum">2740</span></a>  <span class="comment">     */</span>
<a name="l2741"><span class="linenum">2741</span></a>      protected function <a class="function" onClick="logFunction('view_quickgrading_result')" href="../../_functions/view_quickgrading_result.html" onMouseOver="funcPopup(event,'view_quickgrading_result')">view_quickgrading_result</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>) {
<a name="l2742"><span class="linenum">2742</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l2743"><span class="linenum">2743</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(),
<a name="l2744"><span class="linenum">2744</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l2745"><span class="linenum">2745</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_intro')" href="../../_functions/show_intro.html" onMouseOver="funcPopup(event,'show_intro')">show_intro</a>(),
<a name="l2746"><span class="linenum">2746</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l2747"><span class="linenum">2747</span></a>                                                        <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('quickgradingresult', 'assign')));
<a name="l2748"><span class="linenum">2748</span></a>          <a class="var it16222" onMouseOver="hilite(16222)" onMouseOut="lolite()" onClick="logVariable('lastpage')" href="../../_variables/lastpage.html">$lastpage</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('lastpage', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2749"><span class="linenum">2749</span></a>          <a class="var it32152" onMouseOver="hilite(32152)" onMouseOut="lolite()" onClick="logVariable('gradingresult')" href="../../_variables/gradingresult.html">$gradingresult</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_gradingmessage')" href="../../_classes/assign_gradingmessage.html" onMouseOver="classPopup(event,'assign_gradingmessage')">assign_gradingmessage</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('quickgradingresult', 'assign'),
<a name="l2750"><span class="linenum">2750</span></a>                                                     <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>,
<a name="l2751"><span class="linenum">2751</span></a>                                                     <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l2752"><span class="linenum">2752</span></a>                                                     false,
<a name="l2753"><span class="linenum">2753</span></a>                                                     <a class="var it16222" onMouseOver="hilite(16222)" onMouseOut="lolite()" onClick="logVariable('lastpage')" href="../../_variables/lastpage.html">$lastpage</a>);
<a name="l2754"><span class="linenum">2754</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it32152" onMouseOver="hilite(32152)" onMouseOut="lolite()" onClick="logVariable('gradingresult')" href="../../_variables/gradingresult.html">$gradingresult</a>);
<a name="l2755"><span class="linenum">2755</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l2756"><span class="linenum">2756</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l2757"><span class="linenum">2757</span></a>      }
<a name="l2758"><span class="linenum">2758</span></a>  
<a name="l2759"><span class="linenum">2759</span></a>      <span class="comment">/**</span>
<a name="l2760"><span class="linenum">2760</span></a>  <span class="comment">     * Display the page footer.</span>
<a name="l2761"><span class="linenum">2761</span></a>  <span class="comment">     *</span>
<a name="l2762"><span class="linenum">2762</span></a>  <span class="comment">     * @return string</span>
<a name="l2763"><span class="linenum">2763</span></a>  <span class="comment">     */</span>
<a name="l2764"><span class="linenum">2764</span></a>      protected function <a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>() {
<a name="l2765"><span class="linenum">2765</span></a>  <span class="comment">        // When viewing the footer during PHPUNIT tests a set_state error is thrown.</span>
<a name="l2766"><span class="linenum">2766</span></a>          if (!<a class="constant" onClick="logConstant('PHPUNIT_TEST')" href="../../_constants/PHPUNIT_TEST.html" onMouseOver="constPopup(event,'PHPUNIT_TEST')">PHPUNIT_TEST</a>) {
<a name="l2767"><span class="linenum">2767</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render_footer')" href="../../_functions/render_footer.html" onMouseOver="funcPopup(event,'render_footer')">render_footer</a>();
<a name="l2768"><span class="linenum">2768</span></a>          }
<a name="l2769"><span class="linenum">2769</span></a>  
<a name="l2770"><span class="linenum">2770</span></a>          return '';
<a name="l2771"><span class="linenum">2771</span></a>      }
<a name="l2772"><span class="linenum">2772</span></a>  
<a name="l2773"><span class="linenum">2773</span></a>      <span class="comment">/**</span>
<a name="l2774"><span class="linenum">2774</span></a>  <span class="comment">     * Throw an error if the permissions to view this users submission are missing.</span>
<a name="l2775"><span class="linenum">2775</span></a>  <span class="comment">     *</span>
<a name="l2776"><span class="linenum">2776</span></a>  <span class="comment">     * @throws required_capability_exception</span>
<a name="l2777"><span class="linenum">2777</span></a>  <span class="comment">     * @return none</span>
<a name="l2778"><span class="linenum">2778</span></a>  <span class="comment">     */</span>
<a name="l2779"><span class="linenum">2779</span></a>      public function <a class="function" onClick="logFunction('require_view_submission')" href="../../_functions/require_view_submission.html" onMouseOver="funcPopup(event,'require_view_submission')">require_view_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l2780"><span class="linenum">2780</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_view_submission')" href="../../_functions/can_view_submission.html" onMouseOver="funcPopup(event,'can_view_submission')">can_view_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l2781"><span class="linenum">2781</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('required_capability_exception')" href="../../_classes/required_capability_exception.html" onMouseOver="classPopup(event,'required_capability_exception')">required_capability_exception</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, 'mod/assign:viewgrades', 'nopermission', '');
<a name="l2782"><span class="linenum">2782</span></a>          }
<a name="l2783"><span class="linenum">2783</span></a>      }
<a name="l2784"><span class="linenum">2784</span></a>  
<a name="l2785"><span class="linenum">2785</span></a>      <span class="comment">/**</span>
<a name="l2786"><span class="linenum">2786</span></a>  <span class="comment">     * Throw an error if the permissions to view grades in this assignment are missing.</span>
<a name="l2787"><span class="linenum">2787</span></a>  <span class="comment">     *</span>
<a name="l2788"><span class="linenum">2788</span></a>  <span class="comment">     * @throws required_capability_exception</span>
<a name="l2789"><span class="linenum">2789</span></a>  <span class="comment">     * @return none</span>
<a name="l2790"><span class="linenum">2790</span></a>  <span class="comment">     */</span>
<a name="l2791"><span class="linenum">2791</span></a>      public function <a class="function" onClick="logFunction('require_view_grades')" href="../../_functions/require_view_grades.html" onMouseOver="funcPopup(event,'require_view_grades')">require_view_grades</a>() {
<a name="l2792"><span class="linenum">2792</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_view_grades')" href="../../_functions/can_view_grades.html" onMouseOver="funcPopup(event,'can_view_grades')">can_view_grades</a>()) {
<a name="l2793"><span class="linenum">2793</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('required_capability_exception')" href="../../_classes/required_capability_exception.html" onMouseOver="classPopup(event,'required_capability_exception')">required_capability_exception</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, 'mod/assign:viewgrades', 'nopermission', '');
<a name="l2794"><span class="linenum">2794</span></a>          }
<a name="l2795"><span class="linenum">2795</span></a>      }
<a name="l2796"><span class="linenum">2796</span></a>  
<a name="l2797"><span class="linenum">2797</span></a>      <span class="comment">/**</span>
<a name="l2798"><span class="linenum">2798</span></a>  <span class="comment">     * Does this user have view grade or grade permission for this assignment?</span>
<a name="l2799"><span class="linenum">2799</span></a>  <span class="comment">     *</span>
<a name="l2800"><span class="linenum">2800</span></a>  <span class="comment">     * @return bool</span>
<a name="l2801"><span class="linenum">2801</span></a>  <span class="comment">     */</span>
<a name="l2802"><span class="linenum">2802</span></a>      public function <a class="function" onClick="logFunction('can_view_grades')" href="../../_functions/can_view_grades.html" onMouseOver="funcPopup(event,'can_view_grades')">can_view_grades</a>() {
<a name="l2803"><span class="linenum">2803</span></a>  <span class="comment">        // Permissions check.</span>
<a name="l2804"><span class="linenum">2804</span></a>          if (!<a class="function" onClick="logFunction('has_any_capability')" href="../../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('mod/assign:viewgrades', 'mod/assign:grade'), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l2805"><span class="linenum">2805</span></a>              return false;
<a name="l2806"><span class="linenum">2806</span></a>          }
<a name="l2807"><span class="linenum">2807</span></a>  
<a name="l2808"><span class="linenum">2808</span></a>          return true;
<a name="l2809"><span class="linenum">2809</span></a>      }
<a name="l2810"><span class="linenum">2810</span></a>  
<a name="l2811"><span class="linenum">2811</span></a>      <span class="comment">/**</span>
<a name="l2812"><span class="linenum">2812</span></a>  <span class="comment">     * Does this user have grade permission for this assignment?</span>
<a name="l2813"><span class="linenum">2813</span></a>  <span class="comment">     *</span>
<a name="l2814"><span class="linenum">2814</span></a>  <span class="comment">     * @return bool</span>
<a name="l2815"><span class="linenum">2815</span></a>  <span class="comment">     */</span>
<a name="l2816"><span class="linenum">2816</span></a>      public function <a class="function" onClick="logFunction('can_grade')" href="../../_functions/can_grade.html" onMouseOver="funcPopup(event,'can_grade')">can_grade</a>() {
<a name="l2817"><span class="linenum">2817</span></a>  <span class="comment">        // Permissions check.</span>
<a name="l2818"><span class="linenum">2818</span></a>          if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:grade', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l2819"><span class="linenum">2819</span></a>              return false;
<a name="l2820"><span class="linenum">2820</span></a>          }
<a name="l2821"><span class="linenum">2821</span></a>  
<a name="l2822"><span class="linenum">2822</span></a>          return true;
<a name="l2823"><span class="linenum">2823</span></a>      }
<a name="l2824"><span class="linenum">2824</span></a>  
<a name="l2825"><span class="linenum">2825</span></a>      <span class="comment">/**</span>
<a name="l2826"><span class="linenum">2826</span></a>  <span class="comment">     * Download a zip file of all assignment submissions.</span>
<a name="l2827"><span class="linenum">2827</span></a>  <span class="comment">     *</span>
<a name="l2828"><span class="linenum">2828</span></a>  <span class="comment">     * @param array $userids Array of user ids to download assignment submissions in a zip file</span>
<a name="l2829"><span class="linenum">2829</span></a>  <span class="comment">     * @return string - If an error occurs, this will contain the error page.</span>
<a name="l2830"><span class="linenum">2830</span></a>  <span class="comment">     */</span>
<a name="l2831"><span class="linenum">2831</span></a>      protected function <a class="function" onClick="logFunction('download_submissions')" href="../../_functions/download_submissions.html" onMouseOver="funcPopup(event,'download_submissions')">download_submissions</a>(<a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../../_variables/userids.html">$userids</a> = false) {
<a name="l2832"><span class="linenum">2832</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2833"><span class="linenum">2833</span></a>  
<a name="l2834"><span class="linenum">2834</span></a>  <span class="comment">        // More efficient to load this here.</span>
<a name="l2835"><span class="linenum">2835</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/filelib.php');
<a name="l2836"><span class="linenum">2836</span></a>  
<a name="l2837"><span class="linenum">2837</span></a>  <span class="comment">        // Increase the server timeout to handle the creation and sending of large zip files.</span>
<a name="l2838"><span class="linenum">2838</span></a>          <a class="class" onClick="logClass('core_php_time_limit')" href="../../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>();
<a name="l2839"><span class="linenum">2839</span></a>  
<a name="l2840"><span class="linenum">2840</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('require_view_grades')" href="../../_functions/require_view_grades.html" onMouseOver="funcPopup(event,'require_view_grades')">require_view_grades</a>();
<a name="l2841"><span class="linenum">2841</span></a>  
<a name="l2842"><span class="linenum">2842</span></a>  <span class="comment">        // Load all users with submit.</span>
<a name="l2843"><span class="linenum">2843</span></a>          <a class="var it3996" onMouseOver="hilite(3996)" onMouseOut="lolite()" onClick="logVariable('students')" href="../../_variables/students.html">$students</a> = <a class="function" onClick="logFunction('get_enrolled_users')" href="../../_functions/get_enrolled_users.html" onMouseOver="funcPopup(event,'get_enrolled_users')">get_enrolled_users</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, &quot;mod/assign:submit&quot;, null, 'u.*', null, null, null,
<a name="l2844"><span class="linenum">2844</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_only_active_users')" href="../../_functions/show_only_active_users.html" onMouseOver="funcPopup(event,'show_only_active_users')">show_only_active_users</a>());
<a name="l2845"><span class="linenum">2845</span></a>  
<a name="l2846"><span class="linenum">2846</span></a>  <span class="comment">        // Build a list of files to zip.</span>
<a name="l2847"><span class="linenum">2847</span></a>          <a class="var it32136" onMouseOver="hilite(32136)" onMouseOut="lolite()" onClick="logVariable('filesforzipping')" href="../../_variables/filesforzipping.html">$filesforzipping</a> = array();
<a name="l2848"><span class="linenum">2848</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2849"><span class="linenum">2849</span></a>  
<a name="l2850"><span class="linenum">2850</span></a>          <a class="var it688" onMouseOver="hilite(688)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>());
<a name="l2851"><span class="linenum">2851</span></a>  <span class="comment">        // All users.</span>
<a name="l2852"><span class="linenum">2852</span></a>          <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = 0;
<a name="l2853"><span class="linenum">2853</span></a>          <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../_variables/groupname.html">$groupname</a> = '';
<a name="l2854"><span class="linenum">2854</span></a>          if (<a class="var it688" onMouseOver="hilite(688)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a>) {
<a name="l2855"><span class="linenum">2855</span></a>              <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), true);
<a name="l2856"><span class="linenum">2856</span></a>              <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../_variables/groupname.html">$groupname</a> = <a class="function" onClick="logFunction('groups_get_group_name')" href="../../_functions/groups_get_group_name.html" onMouseOver="funcPopup(event,'groups_get_group_name')">groups_get_group_name</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>).'-';
<a name="l2857"><span class="linenum">2857</span></a>          }
<a name="l2858"><span class="linenum">2858</span></a>  
<a name="l2859"><span class="linenum">2859</span></a>  <span class="comment">        // Construct the zip file name.</span>
<a name="l2860"><span class="linenum">2860</span></a>          <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="function" onClick="logFunction('clean_filename')" href="../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;shortname . '-' .
<a name="l2861"><span class="linenum">2861</span></a>                                     <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;name . '-' .
<a name="l2862"><span class="linenum">2862</span></a>                                     <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../_variables/groupname.html">$groupname</a>.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id . '.zip');
<a name="l2863"><span class="linenum">2863</span></a>  
<a name="l2864"><span class="linenum">2864</span></a>  <span class="comment">        // Get all the files for each student.</span>
<a name="l2865"><span class="linenum">2865</span></a>          foreach (<a class="var it3996" onMouseOver="hilite(3996)" onMouseOut="lolite()" onClick="logVariable('students')" href="../../_variables/students.html">$students</a> as <a class="var it4751" onMouseOver="hilite(4751)" onMouseOut="lolite()" onClick="logVariable('student')" href="../../_variables/student.html">$student</a>) {
<a name="l2866"><span class="linenum">2866</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it4751" onMouseOver="hilite(4751)" onMouseOut="lolite()" onClick="logVariable('student')" href="../../_variables/student.html">$student</a>-&gt;<a onClick="logVariable('id')" class="var it42939" onMouseOver="hilite(42939)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2867"><span class="linenum">2867</span></a>  <span class="comment">            // Download all assigments submission or only selected users.</span>
<a name="l2868"><span class="linenum">2868</span></a>              if (<a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../../_variables/userids.html">$userids</a> and !<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../../_variables/userids.html">$userids</a>)) {
<a name="l2869"><span class="linenum">2869</span></a>                  continue;
<a name="l2870"><span class="linenum">2870</span></a>              }
<a name="l2871"><span class="linenum">2871</span></a>  
<a name="l2872"><span class="linenum">2872</span></a>              if ((<a class="function" onClick="logFunction('groups_is_member')" href="../../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) or !<a class="var it688" onMouseOver="hilite(688)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> or !<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>)) {
<a name="l2873"><span class="linenum">2873</span></a>  <span class="comment">                // Get the plugins to add their own files to the zip.</span>
<a name="l2874"><span class="linenum">2874</span></a>  
<a name="l2875"><span class="linenum">2875</span></a>                  <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a> = false;
<a name="l2876"><span class="linenum">2876</span></a>                  <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../_variables/groupname.html">$groupname</a> = '';
<a name="l2877"><span class="linenum">2877</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l2878"><span class="linenum">2878</span></a>                      <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 0, false);
<a name="l2879"><span class="linenum">2879</span></a>                      <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l2880"><span class="linenum">2880</span></a>                      if (<a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a>) {
<a name="l2881"><span class="linenum">2881</span></a>                          <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../_variables/groupname.html">$groupname</a> = <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a>-&gt;<a onClick="logVariable('name')" class="var it45741" onMouseOver="hilite(45741)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> . '-';
<a name="l2882"><span class="linenum">2882</span></a>                      } else {
<a name="l2883"><span class="linenum">2883</span></a>                          <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../_variables/groupname.html">$groupname</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('defaultteam', 'assign') . '-';
<a name="l2884"><span class="linenum">2884</span></a>                      }
<a name="l2885"><span class="linenum">2885</span></a>                  } else {
<a name="l2886"><span class="linenum">2886</span></a>                      <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l2887"><span class="linenum">2887</span></a>                  }
<a name="l2888"><span class="linenum">2888</span></a>  
<a name="l2889"><span class="linenum">2889</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>()) {
<a name="l2890"><span class="linenum">2890</span></a>                      <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('_', ' ', <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../_variables/groupname.html">$groupname</a> . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('participant', 'assign'));
<a name="l2891"><span class="linenum">2891</span></a>                      <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = <a class="function" onClick="logFunction('clean_filename')" href="../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> . '_' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_uniqueid_for_user')" href="../../_functions/get_uniqueid_for_user.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user')">get_uniqueid_for_user</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l2892"><span class="linenum">2892</span></a>                  } else {
<a name="l2893"><span class="linenum">2893</span></a>                      <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('_', ' ', <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../_variables/groupname.html">$groupname</a> . <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it4751" onMouseOver="hilite(4751)" onMouseOut="lolite()" onClick="logVariable('student')" href="../../_variables/student.html">$student</a>));
<a name="l2894"><span class="linenum">2894</span></a>                      <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = <a class="function" onClick="logFunction('clean_filename')" href="../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> . '_' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_uniqueid_for_user')" href="../../_functions/get_uniqueid_for_user.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user')">get_uniqueid_for_user</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l2895"><span class="linenum">2895</span></a>                  }
<a name="l2896"><span class="linenum">2896</span></a>  
<a name="l2897"><span class="linenum">2897</span></a>                  if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l2898"><span class="linenum">2898</span></a>                      foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l2899"><span class="linenum">2899</span></a>                          if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l2900"><span class="linenum">2900</span></a>                              <a class="var it23124" onMouseOver="hilite(23124)" onMouseOut="lolite()" onClick="logVariable('pluginfiles')" href="../../_variables/pluginfiles.html">$pluginfiles</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_files')" href="../../_functions/get_files.html" onMouseOver="funcPopup(event,'get_files')">get_files</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it4751" onMouseOver="hilite(4751)" onMouseOut="lolite()" onClick="logVariable('student')" href="../../_variables/student.html">$student</a>);
<a name="l2901"><span class="linenum">2901</span></a>                              foreach (<a class="var it23124" onMouseOver="hilite(23124)" onMouseOut="lolite()" onClick="logVariable('pluginfiles')" href="../../_variables/pluginfiles.html">$pluginfiles</a> as <a class="var it8494" onMouseOver="hilite(8494)" onMouseOut="lolite()" onClick="logVariable('zipfilepath')" href="../../_variables/zipfilepath.html">$zipfilepath</a> =&gt; <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l2902"><span class="linenum">2902</span></a>                                  <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../../_variables/subtype.html">$subtype</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_subtype')" href="../../_functions/get_subtype.html" onMouseOver="funcPopup(event,'get_subtype')">get_subtype</a>();
<a name="l2903"><span class="linenum">2903</span></a>                                  <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>();
<a name="l2904"><span class="linenum">2904</span></a>                                  <a class="var it2553" onMouseOver="hilite(2553)" onMouseOut="lolite()" onClick="logVariable('zipfilename')" href="../../_variables/zipfilename.html">$zipfilename</a> = <a class="phpfunction" onClick="logFunction('basename')" href="../../_functions/basename.html" onMouseOver="phpfuncPopup(event,'basename')">basename</a>(<a class="var it8494" onMouseOver="hilite(8494)" onMouseOut="lolite()" onClick="logVariable('zipfilepath')" href="../../_variables/zipfilepath.html">$zipfilepath</a>);
<a name="l2905"><span class="linenum">2905</span></a>                                  <a class="var it32153" onMouseOver="hilite(32153)" onMouseOut="lolite()" onClick="logVariable('prefixedfilename')" href="../../_variables/prefixedfilename.html">$prefixedfilename</a> = <a class="function" onClick="logFunction('clean_filename')" href="../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> .
<a name="l2906"><span class="linenum">2906</span></a>                                                                     '_' .
<a name="l2907"><span class="linenum">2907</span></a>                                                                     <a class="var it755" onMouseOver="hilite(755)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../../_variables/subtype.html">$subtype</a> .
<a name="l2908"><span class="linenum">2908</span></a>                                                                     '_' .
<a name="l2909"><span class="linenum">2909</span></a>                                                                     <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> .
<a name="l2910"><span class="linenum">2910</span></a>                                                                     '_');
<a name="l2911"><span class="linenum">2911</span></a>                                  if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> == 'file') {
<a name="l2912"><span class="linenum">2912</span></a>                                      <a class="var it32154" onMouseOver="hilite(32154)" onMouseOut="lolite()" onClick="logVariable('pathfilename')" href="../../_variables/pathfilename.html">$pathfilename</a> = <a class="var it32153" onMouseOver="hilite(32153)" onMouseOut="lolite()" onClick="logVariable('prefixedfilename')" href="../../_variables/prefixedfilename.html">$prefixedfilename</a> . <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>() . <a class="var it2553" onMouseOver="hilite(2553)" onMouseOut="lolite()" onClick="logVariable('zipfilename')" href="../../_variables/zipfilename.html">$zipfilename</a>;
<a name="l2913"><span class="linenum">2913</span></a>                                  } else if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> == 'onlinetext') {
<a name="l2914"><span class="linenum">2914</span></a>                                      <a class="var it32154" onMouseOver="hilite(32154)" onMouseOut="lolite()" onClick="logVariable('pathfilename')" href="../../_variables/pathfilename.html">$pathfilename</a> = <a class="var it32153" onMouseOver="hilite(32153)" onMouseOut="lolite()" onClick="logVariable('prefixedfilename')" href="../../_variables/prefixedfilename.html">$prefixedfilename</a> . '/' . <a class="var it2553" onMouseOver="hilite(2553)" onMouseOut="lolite()" onClick="logVariable('zipfilename')" href="../../_variables/zipfilename.html">$zipfilename</a>;
<a name="l2915"><span class="linenum">2915</span></a>                                  } else {
<a name="l2916"><span class="linenum">2916</span></a>                                      <a class="var it32154" onMouseOver="hilite(32154)" onMouseOut="lolite()" onClick="logVariable('pathfilename')" href="../../_variables/pathfilename.html">$pathfilename</a> = <a class="var it32153" onMouseOver="hilite(32153)" onMouseOut="lolite()" onClick="logVariable('prefixedfilename')" href="../../_variables/prefixedfilename.html">$prefixedfilename</a> . '/' . <a class="var it2553" onMouseOver="hilite(2553)" onMouseOut="lolite()" onClick="logVariable('zipfilename')" href="../../_variables/zipfilename.html">$zipfilename</a>;
<a name="l2917"><span class="linenum">2917</span></a>                                  }
<a name="l2918"><span class="linenum">2918</span></a>                                  <a class="var it32154" onMouseOver="hilite(32154)" onMouseOut="lolite()" onClick="logVariable('pathfilename')" href="../../_variables/pathfilename.html">$pathfilename</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it32154" onMouseOver="hilite(32154)" onMouseOut="lolite()" onClick="logVariable('pathfilename')" href="../../_variables/pathfilename.html">$pathfilename</a>, <a class="constant" onClick="logConstant('PARAM_PATH')" href="../../_constants/PARAM_PATH.html" onMouseOver="constPopup(event,'PARAM_PATH')">PARAM_PATH</a>);
<a name="l2919"><span class="linenum">2919</span></a>                                  <a class="var it32136" onMouseOver="hilite(32136)" onMouseOut="lolite()" onClick="logVariable('filesforzipping')" href="../../_variables/filesforzipping.html">$filesforzipping</a>[<a class="var it32154" onMouseOver="hilite(32154)" onMouseOut="lolite()" onClick="logVariable('pathfilename')" href="../../_variables/pathfilename.html">$pathfilename</a>] = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>;
<a name="l2920"><span class="linenum">2920</span></a>                              }
<a name="l2921"><span class="linenum">2921</span></a>                          }
<a name="l2922"><span class="linenum">2922</span></a>                      }
<a name="l2923"><span class="linenum">2923</span></a>                  }
<a name="l2924"><span class="linenum">2924</span></a>              }
<a name="l2925"><span class="linenum">2925</span></a>          }
<a name="l2926"><span class="linenum">2926</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = '';
<a name="l2927"><span class="linenum">2927</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32136" onMouseOver="hilite(32136)" onMouseOut="lolite()" onClick="logVariable('filesforzipping')" href="../../_variables/filesforzipping.html">$filesforzipping</a>) == 0) {
<a name="l2928"><span class="linenum">2928</span></a>              <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(),
<a name="l2929"><span class="linenum">2929</span></a>                                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l2930"><span class="linenum">2930</span></a>                                          '',
<a name="l2931"><span class="linenum">2931</span></a>                                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l2932"><span class="linenum">2932</span></a>                                          <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('downloadall', 'assign'));
<a name="l2933"><span class="linenum">2933</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a>);
<a name="l2934"><span class="linenum">2934</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nosubmission', 'assign'));
<a name="l2935"><span class="linenum">2935</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/assign/view.php.html">/mod/assign/view.php</a>', array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l2936"><span class="linenum">2936</span></a>                                                                      'action'=&gt;'grading'));
<a name="l2937"><span class="linenum">2937</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('continue_button')" href="../../_functions/continue_button.html" onMouseOver="funcPopup(event,'continue_button')">continue_button</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>);
<a name="l2938"><span class="linenum">2938</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l2939"><span class="linenum">2939</span></a>          } else if (<a class="var it2112" onMouseOver="hilite(2112)" onMouseOut="lolite()" onClick="logVariable('zipfile')" href="../../_variables/zipfile.html">$zipfile</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('pack_files')" href="../../_functions/pack_files.html" onMouseOver="funcPopup(event,'pack_files')">pack_files</a>(<a class="var it32136" onMouseOver="hilite(32136)" onMouseOut="lolite()" onClick="logVariable('filesforzipping')" href="../../_variables/filesforzipping.html">$filesforzipping</a>)) {
<a name="l2940"><span class="linenum">2940</span></a>              \mod_assign\event\<a class="class" onClick="logClass('all_submissions_downloaded')" href="../../_classes/all_submissions_downloaded.html" onMouseOver="classPopup(event,'all_submissions_downloaded')">all_submissions_downloaded</a>::<a class="function" onClick="logFunction('create_from_assign')" href="../../_functions/create_from_assign.html" onMouseOver="funcPopup(event,'create_from_assign')">create_from_assign</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2941"><span class="linenum">2941</span></a>  <span class="comment">            // Send file and delete after sending.</span>
<a name="l2942"><span class="linenum">2942</span></a>              <a class="function" onClick="logFunction('send_temp_file')" href="../../_functions/send_temp_file.html" onMouseOver="funcPopup(event,'send_temp_file')">send_temp_file</a>(<a class="var it2112" onMouseOver="hilite(2112)" onMouseOut="lolite()" onClick="logVariable('zipfile')" href="../../_variables/zipfile.html">$zipfile</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>);
<a name="l2943"><span class="linenum">2943</span></a>  <span class="comment">            // We will not get here - send_temp_file calls exit.</span>
<a name="l2944"><span class="linenum">2944</span></a>          }
<a name="l2945"><span class="linenum">2945</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l2946"><span class="linenum">2946</span></a>      }
<a name="l2947"><span class="linenum">2947</span></a>  
<a name="l2948"><span class="linenum">2948</span></a>      <span class="comment">/**</span>
<a name="l2949"><span class="linenum">2949</span></a>  <span class="comment">     * Util function to add a message to the log.</span>
<a name="l2950"><span class="linenum">2950</span></a>  <span class="comment">     *</span>
<a name="l2951"><span class="linenum">2951</span></a>  <span class="comment">     * @deprecated since 2.7 - Use new events system instead.</span>
<a name="l2952"><span class="linenum">2952</span></a>  <span class="comment">     *             (see http://docs.moodle.org/dev/Migrating_logging_calls_in_plugins).</span>
<a name="l2953"><span class="linenum">2953</span></a>  <span class="comment">     *</span>
<a name="l2954"><span class="linenum">2954</span></a>  <span class="comment">     * @param string $action The current action</span>
<a name="l2955"><span class="linenum">2955</span></a>  <span class="comment">     * @param string $info A detailed description of the change. But no more than 255 characters.</span>
<a name="l2956"><span class="linenum">2956</span></a>  <span class="comment">     * @param string $url The url to the assign module instance.</span>
<a name="l2957"><span class="linenum">2957</span></a>  <span class="comment">     * @param bool $return If true, returns the arguments, else adds to log. The purpose of this is to</span>
<a name="l2958"><span class="linenum">2958</span></a>  <span class="comment">     *                     retrieve the arguments to use them with the new event system (Event 2).</span>
<a name="l2959"><span class="linenum">2959</span></a>  <span class="comment">     * @return void|array</span>
<a name="l2960"><span class="linenum">2960</span></a>  <span class="comment">     */</span>
<a name="l2961"><span class="linenum">2961</span></a>      public function <a class="function" onClick="logFunction('add_to_log')" href="../../_functions/add_to_log.html" onMouseOver="funcPopup(event,'add_to_log')">add_to_log</a>(<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = '', <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = '', <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>='', <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = false) {
<a name="l2962"><span class="linenum">2962</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l2963"><span class="linenum">2963</span></a>  
<a name="l2964"><span class="linenum">2964</span></a>          <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../../_variables/fullurl.html">$fullurl</a> = 'view.php?id=' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id;
<a name="l2965"><span class="linenum">2965</span></a>          if (<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> != '') {
<a name="l2966"><span class="linenum">2966</span></a>              <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../../_variables/fullurl.html">$fullurl</a> .= '&amp;' . <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>;
<a name="l2967"><span class="linenum">2967</span></a>          }
<a name="l2968"><span class="linenum">2968</span></a>  
<a name="l2969"><span class="linenum">2969</span></a>          <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a> = array(
<a name="l2970"><span class="linenum">2970</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l2971"><span class="linenum">2971</span></a>              'assign',
<a name="l2972"><span class="linenum">2972</span></a>              <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>,
<a name="l2973"><span class="linenum">2973</span></a>              <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../../_variables/fullurl.html">$fullurl</a>,
<a name="l2974"><span class="linenum">2974</span></a>              <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>,
<a name="l2975"><span class="linenum">2975</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id
<a name="l2976"><span class="linenum">2976</span></a>          );
<a name="l2977"><span class="linenum">2977</span></a>  
<a name="l2978"><span class="linenum">2978</span></a>          if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>) {
<a name="l2979"><span class="linenum">2979</span></a>  <span class="comment">            // We only need to call debugging when returning a value. This is because the call to</span>
<a name="l2980"><span class="linenum">2980</span></a>  <span class="comment">            // call_user_func_array('add_to_log', $args) will trigger a debugging message of it's own.</span>
<a name="l2981"><span class="linenum">2981</span></a>              <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('The mod_assign <a class="function" onClick="logFunction('add_to_log')" href="../../_functions/add_to_log.html" onMouseOver="funcPopup(event,'add_to_log')">add_to_log</a>() function is now deprecated.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l2982"><span class="linenum">2982</span></a>              return <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>;
<a name="l2983"><span class="linenum">2983</span></a>          }
<a name="l2984"><span class="linenum">2984</span></a>          <a class="phpfunction" onClick="logFunction('call_user_func_array')" href="../../_functions/call_user_func_array.html" onMouseOver="phpfuncPopup(event,'call_user_func_array')">call_user_func_array</a>('add_to_log', <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l2985"><span class="linenum">2985</span></a>      }
<a name="l2986"><span class="linenum">2986</span></a>  
<a name="l2987"><span class="linenum">2987</span></a>      <span class="comment">/**</span>
<a name="l2988"><span class="linenum">2988</span></a>  <span class="comment">     * Lazy load the page renderer and expose the renderer to plugins.</span>
<a name="l2989"><span class="linenum">2989</span></a>  <span class="comment">     *</span>
<a name="l2990"><span class="linenum">2990</span></a>  <span class="comment">     * @return assign_renderer</span>
<a name="l2991"><span class="linenum">2991</span></a>  <span class="comment">     */</span>
<a name="l2992"><span class="linenum">2992</span></a>      public function <a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>() {
<a name="l2993"><span class="linenum">2993</span></a>          global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l2994"><span class="linenum">2994</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('output')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/output.html">output</a>) {
<a name="l2995"><span class="linenum">2995</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('output')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/output.html">output</a>;
<a name="l2996"><span class="linenum">2996</span></a>          }
<a name="l2997"><span class="linenum">2997</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('output')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/output.html">output</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('mod_assign', null, <a class="constant" onClick="logConstant('RENDERER_TARGET_GENERAL')" href="../../_constants/RENDERER_TARGET_GENERAL.html" onMouseOver="constPopup(event,'RENDERER_TARGET_GENERAL')">RENDERER_TARGET_GENERAL</a>);
<a name="l2998"><span class="linenum">2998</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('output')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/output.html">output</a>;
<a name="l2999"><span class="linenum">2999</span></a>      }
<a name="l3000"><span class="linenum">3000</span></a>  
<a name="l3001"><span class="linenum">3001</span></a>      <span class="comment">/**</span>
<a name="l3002"><span class="linenum">3002</span></a>  <span class="comment">     * Load the submission object for a particular user, optionally creating it if required.</span>
<a name="l3003"><span class="linenum">3003</span></a>  <span class="comment">     *</span>
<a name="l3004"><span class="linenum">3004</span></a>  <span class="comment">     * For team assignments there are 2 submissions - the student submission and the team submission</span>
<a name="l3005"><span class="linenum">3005</span></a>  <span class="comment">     * All files are associated with the team submission but the status of the students contribution is</span>
<a name="l3006"><span class="linenum">3006</span></a>  <span class="comment">     * recorded separately.</span>
<a name="l3007"><span class="linenum">3007</span></a>  <span class="comment">     *</span>
<a name="l3008"><span class="linenum">3008</span></a>  <span class="comment">     * @param int $userid The id of the user whose submission we want or 0 in which case USER-&gt;id is used</span>
<a name="l3009"><span class="linenum">3009</span></a>  <span class="comment">     * @param bool $create If set to true a new submission object will be created in the database with the status set to &quot;new&quot;.</span>
<a name="l3010"><span class="linenum">3010</span></a>  <span class="comment">     * @param int $attemptnumber - -1 means the latest attempt</span>
<a name="l3011"><span class="linenum">3011</span></a>  <span class="comment">     * @return stdClass The submission</span>
<a name="l3012"><span class="linenum">3012</span></a>  <span class="comment">     */</span>
<a name="l3013"><span class="linenum">3013</span></a>      public function <a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it5305" onMouseOver="hilite(5305)" onMouseOut="lolite()" onClick="logVariable('create')" href="../../_variables/create.html">$create</a>, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>=-1) {
<a name="l3014"><span class="linenum">3014</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l3015"><span class="linenum">3015</span></a>  
<a name="l3016"><span class="linenum">3016</span></a>          if (!<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l3017"><span class="linenum">3017</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3018"><span class="linenum">3018</span></a>          }
<a name="l3019"><span class="linenum">3019</span></a>  <span class="comment">        // If the userid is not null then use userid.</span>
<a name="l3020"><span class="linenum">3020</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('assignment'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id, 'userid'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 'groupid'=&gt;0);
<a name="l3021"><span class="linenum">3021</span></a>          if (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> &gt;= 0) {
<a name="l3022"><span class="linenum">3022</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['attemptnumber'] = <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>;
<a name="l3023"><span class="linenum">3023</span></a>          }
<a name="l3024"><span class="linenum">3024</span></a>  
<a name="l3025"><span class="linenum">3025</span></a>  <span class="comment">        // Only return the row with the highest attemptnumber.</span>
<a name="l3026"><span class="linenum">3026</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = null;
<a name="l3027"><span class="linenum">3027</span></a>          <a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('assign_submission', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'attemptnumber DESC', '*', 0, 1);
<a name="l3028"><span class="linenum">3028</span></a>          if (<a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>) {
<a name="l3029"><span class="linenum">3029</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>);
<a name="l3030"><span class="linenum">3030</span></a>          }
<a name="l3031"><span class="linenum">3031</span></a>  
<a name="l3032"><span class="linenum">3032</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l3033"><span class="linenum">3033</span></a>              return <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>;
<a name="l3034"><span class="linenum">3034</span></a>          }
<a name="l3035"><span class="linenum">3035</span></a>          if (<a class="var it5305" onMouseOver="hilite(5305)" onMouseOut="lolite()" onClick="logVariable('create')" href="../../_variables/create.html">$create</a>) {
<a name="l3036"><span class="linenum">3036</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = new stdClass();
<a name="l3037"><span class="linenum">3037</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('assignment')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/assignment.html">assignment</a>   = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l3038"><span class="linenum">3038</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>       = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l3039"><span class="linenum">3039</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l3040"><span class="linenum">3040</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>;
<a name="l3041"><span class="linenum">3041</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_NEW')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_NEW.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_NEW')">ASSIGN_SUBMISSION_STATUS_NEW</a>;
<a name="l3042"><span class="linenum">3042</span></a>              if (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> &gt;= 0) {
<a name="l3043"><span class="linenum">3043</span></a>                  <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> = <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>;
<a name="l3044"><span class="linenum">3044</span></a>              } else {
<a name="l3045"><span class="linenum">3045</span></a>                  <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> = 0;
<a name="l3046"><span class="linenum">3046</span></a>              }
<a name="l3047"><span class="linenum">3047</span></a>  <span class="comment">            // Work out if this is the latest submission.</span>
<a name="l3048"><span class="linenum">3048</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('latest')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/latest.html">latest</a> = 0;
<a name="l3049"><span class="linenum">3049</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('assignment'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id, 'userid'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 'groupid'=&gt;0);
<a name="l3050"><span class="linenum">3050</span></a>              if (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> == -1) {
<a name="l3051"><span class="linenum">3051</span></a>  <span class="comment">                // This is a new submission so it must be the latest.</span>
<a name="l3052"><span class="linenum">3052</span></a>                  <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('latest')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/latest.html">latest</a> = 1;
<a name="l3053"><span class="linenum">3053</span></a>              } else {
<a name="l3054"><span class="linenum">3054</span></a>  <span class="comment">                // We need to work this out.</span>
<a name="l3055"><span class="linenum">3055</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('assign_submission', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'attemptnumber DESC', 'attemptnumber', 0, 1);
<a name="l3056"><span class="linenum">3056</span></a>                  <a class="var it32145" onMouseOver="hilite(32145)" onMouseOut="lolite()" onClick="logVariable('latestsubmission')" href="../../_variables/latestsubmission.html">$latestsubmission</a> = null;
<a name="l3057"><span class="linenum">3057</span></a>                  if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>) {
<a name="l3058"><span class="linenum">3058</span></a>                      <a class="var it32145" onMouseOver="hilite(32145)" onMouseOut="lolite()" onClick="logVariable('latestsubmission')" href="../../_variables/latestsubmission.html">$latestsubmission</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l3059"><span class="linenum">3059</span></a>                  }
<a name="l3060"><span class="linenum">3060</span></a>                  if (empty(<a class="var it32145" onMouseOver="hilite(32145)" onMouseOut="lolite()" onClick="logVariable('latestsubmission')" href="../../_variables/latestsubmission.html">$latestsubmission</a>) || (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> &gt; <a class="var it32145" onMouseOver="hilite(32145)" onMouseOut="lolite()" onClick="logVariable('latestsubmission')" href="../../_variables/latestsubmission.html">$latestsubmission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it45739" onMouseOver="hilite(45739)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>)) {
<a name="l3061"><span class="linenum">3061</span></a>                      <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('latest')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/latest.html">latest</a> = 1;
<a name="l3062"><span class="linenum">3062</span></a>                  }
<a name="l3063"><span class="linenum">3063</span></a>              }
<a name="l3064"><span class="linenum">3064</span></a>              if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('latest')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/latest.html">latest</a>) {
<a name="l3065"><span class="linenum">3065</span></a>  <span class="comment">                // This is the case when we need to set latest to 0 for all the other attempts.</span>
<a name="l3066"><span class="linenum">3066</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('assign_submission', 'latest', 0, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l3067"><span class="linenum">3067</span></a>              }
<a name="l3068"><span class="linenum">3068</span></a>              <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('sid')" href="../../_variables/sid.html">$sid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('assign_submission', <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l3069"><span class="linenum">3069</span></a>              return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assign_submission', array('id' =&gt; <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('sid')" href="../../_variables/sid.html">$sid</a>));
<a name="l3070"><span class="linenum">3070</span></a>          }
<a name="l3071"><span class="linenum">3071</span></a>          return false;
<a name="l3072"><span class="linenum">3072</span></a>      }
<a name="l3073"><span class="linenum">3073</span></a>  
<a name="l3074"><span class="linenum">3074</span></a>      <span class="comment">/**</span>
<a name="l3075"><span class="linenum">3075</span></a>  <span class="comment">     * Load the submission object from it's id.</span>
<a name="l3076"><span class="linenum">3076</span></a>  <span class="comment">     *</span>
<a name="l3077"><span class="linenum">3077</span></a>  <span class="comment">     * @param int $submissionid The id of the submission we want</span>
<a name="l3078"><span class="linenum">3078</span></a>  <span class="comment">     * @return stdClass The submission</span>
<a name="l3079"><span class="linenum">3079</span></a>  <span class="comment">     */</span>
<a name="l3080"><span class="linenum">3080</span></a>      protected function <a class="function" onClick="logFunction('get_submission')" href="../../_functions/get_submission.html" onMouseOver="funcPopup(event,'get_submission')">get_submission</a>(<a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../_variables/submissionid.html">$submissionid</a>) {
<a name="l3081"><span class="linenum">3081</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3082"><span class="linenum">3082</span></a>  
<a name="l3083"><span class="linenum">3083</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('assignment'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id, 'id'=&gt;<a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../_variables/submissionid.html">$submissionid</a>);
<a name="l3084"><span class="linenum">3084</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assign_submission', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l3085"><span class="linenum">3085</span></a>      }
<a name="l3086"><span class="linenum">3086</span></a>  
<a name="l3087"><span class="linenum">3087</span></a>      <span class="comment">/**</span>
<a name="l3088"><span class="linenum">3088</span></a>  <span class="comment">     * This will retrieve a user flags object from the db optionally creating it if required.</span>
<a name="l3089"><span class="linenum">3089</span></a>  <span class="comment">     * The user flags was split from the user_grades table in 2.5.</span>
<a name="l3090"><span class="linenum">3090</span></a>  <span class="comment">     *</span>
<a name="l3091"><span class="linenum">3091</span></a>  <span class="comment">     * @param int $userid The user we are getting the flags for.</span>
<a name="l3092"><span class="linenum">3092</span></a>  <span class="comment">     * @param bool $create If true the flags record will be created if it does not exist</span>
<a name="l3093"><span class="linenum">3093</span></a>  <span class="comment">     * @return stdClass The flags record</span>
<a name="l3094"><span class="linenum">3094</span></a>  <span class="comment">     */</span>
<a name="l3095"><span class="linenum">3095</span></a>      public function <a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it5305" onMouseOver="hilite(5305)" onMouseOut="lolite()" onClick="logVariable('create')" href="../../_variables/create.html">$create</a>) {
<a name="l3096"><span class="linenum">3096</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l3097"><span class="linenum">3097</span></a>  
<a name="l3098"><span class="linenum">3098</span></a>  <span class="comment">        // If the userid is not null then use userid.</span>
<a name="l3099"><span class="linenum">3099</span></a>          if (!<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l3100"><span class="linenum">3100</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3101"><span class="linenum">3101</span></a>          }
<a name="l3102"><span class="linenum">3102</span></a>  
<a name="l3103"><span class="linenum">3103</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('assignment'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id, 'userid'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l3104"><span class="linenum">3104</span></a>  
<a name="l3105"><span class="linenum">3105</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assign_user_flags', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l3106"><span class="linenum">3106</span></a>  
<a name="l3107"><span class="linenum">3107</span></a>          if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>) {
<a name="l3108"><span class="linenum">3108</span></a>              return <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>;
<a name="l3109"><span class="linenum">3109</span></a>          }
<a name="l3110"><span class="linenum">3110</span></a>          if (<a class="var it5305" onMouseOver="hilite(5305)" onMouseOut="lolite()" onClick="logVariable('create')" href="../../_variables/create.html">$create</a>) {
<a name="l3111"><span class="linenum">3111</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = new stdClass();
<a name="l3112"><span class="linenum">3112</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('assignment')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/assignment.html">assignment</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l3113"><span class="linenum">3113</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('userid')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l3114"><span class="linenum">3114</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('locked')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/locked.html">locked</a> = 0;
<a name="l3115"><span class="linenum">3115</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('extensionduedate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/extensionduedate.html">extensionduedate</a> = 0;
<a name="l3116"><span class="linenum">3116</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> = '';
<a name="l3117"><span class="linenum">3117</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a> = 0;
<a name="l3118"><span class="linenum">3118</span></a>  
<a name="l3119"><span class="linenum">3119</span></a>  <span class="comment">            // The mailed flag can be one of 3 values: 0 is unsent, 1 is sent and 2 is do not send yet.</span>
<a name="l3120"><span class="linenum">3120</span></a>  <span class="comment">            // This is because students only want to be notified about certain types of update (grades and feedback).</span>
<a name="l3121"><span class="linenum">3121</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('mailed')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/mailed.html">mailed</a> = 2;
<a name="l3122"><span class="linenum">3122</span></a>  
<a name="l3123"><span class="linenum">3123</span></a>              <a class="var it10017" onMouseOver="hilite(10017)" onMouseOut="lolite()" onClick="logVariable('fid')" href="../../_variables/fid.html">$fid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('assign_user_flags', <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>);
<a name="l3124"><span class="linenum">3124</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('id')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it10017" onMouseOver="hilite(10017)" onMouseOut="lolite()" onClick="logVariable('fid')" href="../../_variables/fid.html">$fid</a>;
<a name="l3125"><span class="linenum">3125</span></a>              return <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>;
<a name="l3126"><span class="linenum">3126</span></a>          }
<a name="l3127"><span class="linenum">3127</span></a>          return false;
<a name="l3128"><span class="linenum">3128</span></a>      }
<a name="l3129"><span class="linenum">3129</span></a>  
<a name="l3130"><span class="linenum">3130</span></a>      <span class="comment">/**</span>
<a name="l3131"><span class="linenum">3131</span></a>  <span class="comment">     * This will retrieve a grade object from the db, optionally creating it if required.</span>
<a name="l3132"><span class="linenum">3132</span></a>  <span class="comment">     *</span>
<a name="l3133"><span class="linenum">3133</span></a>  <span class="comment">     * @param int $userid The user we are grading</span>
<a name="l3134"><span class="linenum">3134</span></a>  <span class="comment">     * @param bool $create If true the grade will be created if it does not exist</span>
<a name="l3135"><span class="linenum">3135</span></a>  <span class="comment">     * @param int $attemptnumber The attempt number to retrieve the grade for. -1 means the latest submission.</span>
<a name="l3136"><span class="linenum">3136</span></a>  <span class="comment">     * @return stdClass The grade record</span>
<a name="l3137"><span class="linenum">3137</span></a>  <span class="comment">     */</span>
<a name="l3138"><span class="linenum">3138</span></a>      public function <a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it5305" onMouseOver="hilite(5305)" onMouseOut="lolite()" onClick="logVariable('create')" href="../../_variables/create.html">$create</a>, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>=-1) {
<a name="l3139"><span class="linenum">3139</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l3140"><span class="linenum">3140</span></a>  
<a name="l3141"><span class="linenum">3141</span></a>  <span class="comment">        // If the userid is not null then use userid.</span>
<a name="l3142"><span class="linenum">3142</span></a>          if (!<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l3143"><span class="linenum">3143</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3144"><span class="linenum">3144</span></a>          }
<a name="l3145"><span class="linenum">3145</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = null;
<a name="l3146"><span class="linenum">3146</span></a>  
<a name="l3147"><span class="linenum">3147</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('assignment'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id, 'userid'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l3148"><span class="linenum">3148</span></a>          if (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> &lt; 0 || <a class="var it5305" onMouseOver="hilite(5305)" onMouseOut="lolite()" onClick="logVariable('create')" href="../../_variables/create.html">$create</a>) {
<a name="l3149"><span class="linenum">3149</span></a>  <span class="comment">            // Make sure this grade matches the latest submission attempt.</span>
<a name="l3150"><span class="linenum">3150</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l3151"><span class="linenum">3151</span></a>                  <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 0, true);
<a name="l3152"><span class="linenum">3152</span></a>              } else {
<a name="l3153"><span class="linenum">3153</span></a>                  <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true);
<a name="l3154"><span class="linenum">3154</span></a>              }
<a name="l3155"><span class="linenum">3155</span></a>              if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l3156"><span class="linenum">3156</span></a>                  <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>;
<a name="l3157"><span class="linenum">3157</span></a>              }
<a name="l3158"><span class="linenum">3158</span></a>          }
<a name="l3159"><span class="linenum">3159</span></a>  
<a name="l3160"><span class="linenum">3160</span></a>          if (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> &gt;= 0) {
<a name="l3161"><span class="linenum">3161</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['attemptnumber'] = <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>;
<a name="l3162"><span class="linenum">3162</span></a>          }
<a name="l3163"><span class="linenum">3163</span></a>  
<a name="l3164"><span class="linenum">3164</span></a>          <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('assign_grades', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'attemptnumber DESC', '*', 0, 1);
<a name="l3165"><span class="linenum">3165</span></a>  
<a name="l3166"><span class="linenum">3166</span></a>          if (<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>) {
<a name="l3167"><span class="linenum">3167</span></a>              return <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>);
<a name="l3168"><span class="linenum">3168</span></a>          }
<a name="l3169"><span class="linenum">3169</span></a>          if (<a class="var it5305" onMouseOver="hilite(5305)" onMouseOut="lolite()" onClick="logVariable('create')" href="../../_variables/create.html">$create</a>) {
<a name="l3170"><span class="linenum">3170</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = new stdClass();
<a name="l3171"><span class="linenum">3171</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('assignment')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/assignment.html">assignment</a>   = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l3172"><span class="linenum">3172</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>       = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l3173"><span class="linenum">3173</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l3174"><span class="linenum">3174</span></a>  <span class="comment">            // If we are &quot;auto-creating&quot; a grade - and there is a submission</span>
<a name="l3175"><span class="linenum">3175</span></a>  <span class="comment">            // the new grade should not have a more recent timemodified value</span>
<a name="l3176"><span class="linenum">3176</span></a>  <span class="comment">            // than the submission.</span>
<a name="l3177"><span class="linenum">3177</span></a>              if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l3178"><span class="linenum">3178</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>;
<a name="l3179"><span class="linenum">3179</span></a>              } else {
<a name="l3180"><span class="linenum">3180</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>;
<a name="l3181"><span class="linenum">3181</span></a>              }
<a name="l3182"><span class="linenum">3182</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = -1;
<a name="l3183"><span class="linenum">3183</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3184"><span class="linenum">3184</span></a>              if (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> &gt;= 0) {
<a name="l3185"><span class="linenum">3185</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> = <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>;
<a name="l3186"><span class="linenum">3186</span></a>              }
<a name="l3187"><span class="linenum">3187</span></a>  
<a name="l3188"><span class="linenum">3188</span></a>              <a class="var it2844" onMouseOver="hilite(2844)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../../_variables/gid.html">$gid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('assign_grades', <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l3189"><span class="linenum">3189</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('id')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2844" onMouseOver="hilite(2844)" onMouseOut="lolite()" onClick="logVariable('gid')" href="../../_variables/gid.html">$gid</a>;
<a name="l3190"><span class="linenum">3190</span></a>              return <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>;
<a name="l3191"><span class="linenum">3191</span></a>          }
<a name="l3192"><span class="linenum">3192</span></a>          return false;
<a name="l3193"><span class="linenum">3193</span></a>      }
<a name="l3194"><span class="linenum">3194</span></a>  
<a name="l3195"><span class="linenum">3195</span></a>      <span class="comment">/**</span>
<a name="l3196"><span class="linenum">3196</span></a>  <span class="comment">     * This will retrieve a grade object from the db.</span>
<a name="l3197"><span class="linenum">3197</span></a>  <span class="comment">     *</span>
<a name="l3198"><span class="linenum">3198</span></a>  <span class="comment">     * @param int $gradeid The id of the grade</span>
<a name="l3199"><span class="linenum">3199</span></a>  <span class="comment">     * @return stdClass The grade record</span>
<a name="l3200"><span class="linenum">3200</span></a>  <span class="comment">     */</span>
<a name="l3201"><span class="linenum">3201</span></a>      protected function <a class="function" onClick="logFunction('get_grade')" href="../../_functions/get_grade.html" onMouseOver="funcPopup(event,'get_grade')">get_grade</a>(<a class="var it300" onMouseOver="hilite(300)" onMouseOut="lolite()" onClick="logVariable('gradeid')" href="../../_variables/gradeid.html">$gradeid</a>) {
<a name="l3202"><span class="linenum">3202</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3203"><span class="linenum">3203</span></a>  
<a name="l3204"><span class="linenum">3204</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('assignment'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id, 'id'=&gt;<a class="var it300" onMouseOver="hilite(300)" onMouseOut="lolite()" onClick="logVariable('gradeid')" href="../../_variables/gradeid.html">$gradeid</a>);
<a name="l3205"><span class="linenum">3205</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assign_grades', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l3206"><span class="linenum">3206</span></a>      }
<a name="l3207"><span class="linenum">3207</span></a>  
<a name="l3208"><span class="linenum">3208</span></a>      <span class="comment">/**</span>
<a name="l3209"><span class="linenum">3209</span></a>  <span class="comment">     * Print the grading page for a single user submission.</span>
<a name="l3210"><span class="linenum">3210</span></a>  <span class="comment">     *</span>
<a name="l3211"><span class="linenum">3211</span></a>  <span class="comment">     * @param array $args Optional args array (better than pulling args from _GET and _POST)</span>
<a name="l3212"><span class="linenum">3212</span></a>  <span class="comment">     * @return string</span>
<a name="l3213"><span class="linenum">3213</span></a>  <span class="comment">     */</span>
<a name="l3214"><span class="linenum">3214</span></a>      protected function <a class="function" onClick="logFunction('view_single_grading_panel')" href="../../_functions/view_single_grading_panel.html" onMouseOver="funcPopup(event,'view_single_grading_panel')">view_single_grading_panel</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>) {
<a name="l3215"><span class="linenum">3215</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l3216"><span class="linenum">3216</span></a>  
<a name="l3217"><span class="linenum">3217</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l3218"><span class="linenum">3218</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l3219"><span class="linenum">3219</span></a>  
<a name="l3220"><span class="linenum">3220</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/gradeform.php.html">/mod/assign/gradeform.php</a>');
<a name="l3221"><span class="linenum">3221</span></a>  
<a name="l3222"><span class="linenum">3222</span></a>  <span class="comment">        // Need submit permission to submit an assignment.</span>
<a name="l3223"><span class="linenum">3223</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:grade', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l3224"><span class="linenum">3224</span></a>  
<a name="l3225"><span class="linenum">3225</span></a>  <span class="comment">        // If userid is passed - we are only grading a single student.</span>
<a name="l3226"><span class="linenum">3226</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>['userid'];
<a name="l3227"><span class="linenum">3227</span></a>          <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> = <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>['attemptnumber'];
<a name="l3228"><span class="linenum">3228</span></a>  
<a name="l3229"><span class="linenum">3229</span></a>          <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a> = 0;
<a name="l3230"><span class="linenum">3230</span></a>          <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> = array(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l3231"><span class="linenum">3231</span></a>  
<a name="l3232"><span class="linenum">3232</span></a>          <a class="var it490" onMouseOver="hilite(490)" onMouseOut="lolite()" onClick="logVariable('last')" href="../../_variables/last.html">$last</a> = true;
<a name="l3233"><span class="linenum">3233</span></a>  <span class="comment">        // This variation on the url will link direct to this student, with no next/previous links.</span>
<a name="l3234"><span class="linenum">3234</span></a>  <span class="comment">        // The benefit is the url will be the same every time for this student, so Atto autosave drafts can match up.</span>
<a name="l3235"><span class="linenum">3235</span></a>          <a class="var it25221" onMouseOver="hilite(25221)" onMouseOut="lolite()" onClick="logVariable('returnparams')" href="../../_variables/returnparams.html">$returnparams</a> = array('userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 'rownum' =&gt; 0, 'useridlistid' =&gt; 0);
<a name="l3236"><span class="linenum">3236</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('register_return_link')" href="../../_functions/register_return_link.html" onMouseOver="funcPopup(event,'register_return_link')">register_return_link</a>('grade', <a class="var it25221" onMouseOver="hilite(25221)" onMouseOut="lolite()" onClick="logVariable('returnparams')" href="../../_variables/returnparams.html">$returnparams</a>);
<a name="l3237"><span class="linenum">3237</span></a>  
<a name="l3238"><span class="linenum">3238</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l3239"><span class="linenum">3239</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>);
<a name="l3240"><span class="linenum">3240</span></a>          <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a> = null;
<a name="l3241"><span class="linenum">3241</span></a>          <a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a> = null;
<a name="l3242"><span class="linenum">3242</span></a>          <a class="var it15025" onMouseOver="hilite(15025)" onMouseOut="lolite()" onClick="logVariable('notsubmitted')" href="../../_variables/notsubmitted.html">$notsubmitted</a> = array();
<a name="l3243"><span class="linenum">3243</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>) {
<a name="l3244"><span class="linenum">3244</span></a>              <a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 0, false, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>);
<a name="l3245"><span class="linenum">3245</span></a>              <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l3246"><span class="linenum">3246</span></a>              <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = 0;
<a name="l3247"><span class="linenum">3247</span></a>              if (<a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a>) {
<a name="l3248"><span class="linenum">3248</span></a>                  <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a>-&gt;<a onClick="logVariable('id')" class="var it45741" onMouseOver="hilite(45741)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3249"><span class="linenum">3249</span></a>              }
<a name="l3250"><span class="linenum">3250</span></a>              <a class="var it15025" onMouseOver="hilite(15025)" onMouseOut="lolite()" onClick="logVariable('notsubmitted')" href="../../_variables/notsubmitted.html">$notsubmitted</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group_members_who_have_not_submitted')" href="../../_functions/get_submission_group_members_who_have_not_submitted.html" onMouseOver="funcPopup(event,'get_submission_group_members_who_have_not_submitted')">get_submission_group_members_who_have_not_submitted</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, false);
<a name="l3251"><span class="linenum">3251</span></a>  
<a name="l3252"><span class="linenum">3252</span></a>          }
<a name="l3253"><span class="linenum">3253</span></a>  
<a name="l3254"><span class="linenum">3254</span></a>  <span class="comment">        // Get the requested grade.</span>
<a name="l3255"><span class="linenum">3255</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>);
<a name="l3256"><span class="linenum">3256</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l3257"><span class="linenum">3257</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_view_submission')" href="../../_functions/can_view_submission.html" onMouseOver="funcPopup(event,'can_view_submission')">can_view_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l3258"><span class="linenum">3258</span></a>              <a class="var it32155" onMouseOver="hilite(32155)" onMouseOut="lolite()" onClick="logVariable('gradelocked')" href="../../_variables/gradelocked.html">$gradelocked</a> = (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> &amp;&amp; <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('locked')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/locked.html">locked</a>) || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('grading_disabled')" href="../../_functions/grading_disabled.html" onMouseOver="funcPopup(event,'grading_disabled')">grading_disabled</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l3259"><span class="linenum">3259</span></a>              <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a> = null;
<a name="l3260"><span class="linenum">3260</span></a>              if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>) {
<a name="l3261"><span class="linenum">3261</span></a>                  <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a> = <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('extensionduedate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/extensionduedate.html">extensionduedate</a>;
<a name="l3262"><span class="linenum">3262</span></a>              }
<a name="l3263"><span class="linenum">3263</span></a>              <a class="var it32156" onMouseOver="hilite(32156)" onMouseOut="lolite()" onClick="logVariable('showedit')" href="../../_variables/showedit.html">$showedit</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submissions_open')" href="../../_functions/submissions_open.html" onMouseOver="funcPopup(event,'submissions_open')">submissions_open</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) &amp;&amp; (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>());
<a name="l3264"><span class="linenum">3264</span></a>              <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>());
<a name="l3265"><span class="linenum">3265</span></a>              <a class="var it3731" onMouseOver="hilite(3731)" onMouseOut="lolite()" onClick="logVariable('usergroups')" href="../../_variables/usergroups.html">$usergroups</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_all_groups')" href="../../_functions/get_all_groups.html" onMouseOver="funcPopup(event,'get_all_groups')">get_all_groups</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l3266"><span class="linenum">3266</span></a>  
<a name="l3267"><span class="linenum">3267</span></a>              <a class="var it32157" onMouseOver="hilite(32157)" onMouseOut="lolite()" onClick="logVariable('submissionstatus')" href="../../_variables/submissionstatus.html">$submissionstatus</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_submission_status_compact')" href="../../_classes/assign_submission_status_compact.html" onMouseOver="classPopup(event,'assign_submission_status_compact')">assign_submission_status_compact</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('allowsubmissionsfromdate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/allowsubmissionsfromdate.html">allowsubmissionsfromdate</a>,
<a name="l3268"><span class="linenum">3268</span></a>                                                                       <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('alwaysshowdescription')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/alwaysshowdescription.html">alwaysshowdescription</a>,
<a name="l3269"><span class="linenum">3269</span></a>                                                                       <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>,
<a name="l3270"><span class="linenum">3270</span></a>                                                                       <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>,
<a name="l3271"><span class="linenum">3271</span></a>                                                                       <a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a>,
<a name="l3272"><span class="linenum">3272</span></a>                                                                       <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a>,
<a name="l3273"><span class="linenum">3273</span></a>                                                                       <a class="var it15025" onMouseOver="hilite(15025)" onMouseOut="lolite()" onClick="logVariable('notsubmitted')" href="../../_variables/notsubmitted.html">$notsubmitted</a>,
<a name="l3274"><span class="linenum">3274</span></a>                                                                       <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>(),
<a name="l3275"><span class="linenum">3275</span></a>                                                                       <a class="var it32155" onMouseOver="hilite(32155)" onMouseOut="lolite()" onClick="logVariable('gradelocked')" href="../../_variables/gradelocked.html">$gradelocked</a>,
<a name="l3276"><span class="linenum">3276</span></a>                                                                       <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_graded')" href="../../_functions/is_graded.html" onMouseOver="funcPopup(event,'is_graded')">is_graded</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>),
<a name="l3277"><span class="linenum">3277</span></a>                                                                       <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('duedate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/duedate.html">duedate</a>,
<a name="l3278"><span class="linenum">3278</span></a>                                                                       <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('cutoffdate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/cutoffdate.html">cutoffdate</a>,
<a name="l3279"><span class="linenum">3279</span></a>                                                                       <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>(),
<a name="l3280"><span class="linenum">3280</span></a>                                                                       <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_action')" href="../../_functions/get_return_action.html" onMouseOver="funcPopup(event,'get_return_action')">get_return_action</a>(),
<a name="l3281"><span class="linenum">3281</span></a>                                                                       <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_params')" href="../../_functions/get_return_params.html" onMouseOver="funcPopup(event,'get_return_params')">get_return_params</a>(),
<a name="l3282"><span class="linenum">3282</span></a>                                                                       <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l3283"><span class="linenum">3283</span></a>                                                                       <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l3284"><span class="linenum">3284</span></a>                                                                       <a class="class" onClick="logClass('assign_submission_status')" href="../../_classes/assign_submission_status.html" onMouseOver="classPopup(event,'assign_submission_status')">assign_submission_status</a>::GRADER_VIEW,
<a name="l3285"><span class="linenum">3285</span></a>                                                                       <a class="var it32156" onMouseOver="hilite(32156)" onMouseOut="lolite()" onClick="logVariable('showedit')" href="../../_variables/showedit.html">$showedit</a>,
<a name="l3286"><span class="linenum">3286</span></a>                                                                       false,
<a name="l3287"><span class="linenum">3287</span></a>                                                                       <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>,
<a name="l3288"><span class="linenum">3288</span></a>                                                                       <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a>,
<a name="l3289"><span class="linenum">3289</span></a>                                                                       <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l3290"><span class="linenum">3290</span></a>                                                                       <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>(),
<a name="l3291"><span class="linenum">3291</span></a>                                                                       '',
<a name="l3292"><span class="linenum">3292</span></a>                                                                       <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('attemptreopenmethod')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/attemptreopenmethod.html">attemptreopenmethod</a>,
<a name="l3293"><span class="linenum">3293</span></a>                                                                       <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>,
<a name="l3294"><span class="linenum">3294</span></a>                                                                       <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_grading_status')" href="../../_functions/get_grading_status.html" onMouseOver="funcPopup(event,'get_grading_status')">get_grading_status</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>),
<a name="l3295"><span class="linenum">3295</span></a>                                                                       <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('preventsubmissionnotingroup')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/preventsubmissionnotingroup.html">preventsubmissionnotingroup</a>,
<a name="l3296"><span class="linenum">3296</span></a>                                                                       <a class="var it3731" onMouseOver="hilite(3731)" onMouseOut="lolite()" onClick="logVariable('usergroups')" href="../../_variables/usergroups.html">$usergroups</a>);
<a name="l3297"><span class="linenum">3297</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it32157" onMouseOver="hilite(32157)" onMouseOut="lolite()" onClick="logVariable('submissionstatus')" href="../../_variables/submissionstatus.html">$submissionstatus</a>);
<a name="l3298"><span class="linenum">3298</span></a>          }
<a name="l3299"><span class="linenum">3299</span></a>  
<a name="l3300"><span class="linenum">3300</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l3301"><span class="linenum">3301</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l3302"><span class="linenum">3302</span></a>              if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> !== null &amp;&amp; <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> &gt;= 0) {
<a name="l3303"><span class="linenum">3303</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('grade')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = <a class="function" onClick="logFunction('format_float')" href="../../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>, 2);
<a name="l3304"><span class="linenum">3304</span></a>              }
<a name="l3305"><span class="linenum">3305</span></a>          } else {
<a name="l3306"><span class="linenum">3306</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l3307"><span class="linenum">3307</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('grade')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = '';
<a name="l3308"><span class="linenum">3308</span></a>          }
<a name="l3309"><span class="linenum">3309</span></a>  
<a name="l3310"><span class="linenum">3310</span></a>          if (!empty(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>)) {
<a name="l3311"><span class="linenum">3311</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> = <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>;
<a name="l3312"><span class="linenum">3312</span></a>          }
<a name="l3313"><span class="linenum">3313</span></a>          if (!empty(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a>)) {
<a name="l3314"><span class="linenum">3314</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a> = <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a>;
<a name="l3315"><span class="linenum">3315</span></a>          }
<a name="l3316"><span class="linenum">3316</span></a>  
<a name="l3317"><span class="linenum">3317</span></a>  <span class="comment">        // Warning if required.</span>
<a name="l3318"><span class="linenum">3318</span></a>          <a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_all_submissions')" href="../../_functions/get_all_submissions.html" onMouseOver="funcPopup(event,'get_all_submissions')">get_all_submissions</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l3319"><span class="linenum">3319</span></a>  
<a name="l3320"><span class="linenum">3320</span></a>          if (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> != -1 &amp;&amp; (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> + 1) != <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a>)) {
<a name="l3321"><span class="linenum">3321</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('attemptnumber' =&gt; <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> + 1,
<a name="l3322"><span class="linenum">3322</span></a>                              'totalattempts' =&gt; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a>));
<a name="l3323"><span class="linenum">3323</span></a>              <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editingpreviousfeedbackwarning', 'assign', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l3324"><span class="linenum">3324</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>);
<a name="l3325"><span class="linenum">3325</span></a>          }
<a name="l3326"><span class="linenum">3326</span></a>  
<a name="l3327"><span class="linenum">3327</span></a>          <a class="var it25319" onMouseOver="hilite(25319)" onMouseOut="lolite()" onClick="logVariable('pagination')" href="../../_variables/pagination.html">$pagination</a> = array('rownum' =&gt; <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a>,
<a name="l3328"><span class="linenum">3328</span></a>                              'useridlistid' =&gt; 0,
<a name="l3329"><span class="linenum">3329</span></a>                              'last' =&gt; <a class="var it490" onMouseOver="hilite(490)" onMouseOut="lolite()" onClick="logVariable('last')" href="../../_variables/last.html">$last</a>,
<a name="l3330"><span class="linenum">3330</span></a>                              'userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>,
<a name="l3331"><span class="linenum">3331</span></a>                              'attemptnumber' =&gt; <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>,
<a name="l3332"><span class="linenum">3332</span></a>                              'gradingpanel' =&gt; true);
<a name="l3333"><span class="linenum">3333</span></a>  
<a name="l3334"><span class="linenum">3334</span></a>          if (!empty(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>['formdata'])) {
<a name="l3335"><span class="linenum">3335</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = (array) <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>;
<a name="l3336"><span class="linenum">3336</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = (object) <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>['formdata']);
<a name="l3337"><span class="linenum">3337</span></a>          }
<a name="l3338"><span class="linenum">3338</span></a>          <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a> = array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it25319" onMouseOver="hilite(25319)" onMouseOut="lolite()" onClick="logVariable('pagination')" href="../../_variables/pagination.html">$pagination</a>);
<a name="l3339"><span class="linenum">3339</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_grade_form')" href="../../_classes/mod_assign_grade_form.html" onMouseOver="classPopup(event,'mod_assign_grade_form')">mod_assign_grade_form</a>(null,
<a name="l3340"><span class="linenum">3340</span></a>                                             <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a>,
<a name="l3341"><span class="linenum">3341</span></a>                                             'post',
<a name="l3342"><span class="linenum">3342</span></a>                                             '',
<a name="l3343"><span class="linenum">3343</span></a>                                             array('class' =&gt; 'gradeform'));
<a name="l3344"><span class="linenum">3344</span></a>  
<a name="l3345"><span class="linenum">3345</span></a>          if (!empty(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>['formdata'])) {
<a name="l3346"><span class="linenum">3346</span></a>  <span class="comment">            // If we were passed form data - we want the form to check the data</span>
<a name="l3347"><span class="linenum">3347</span></a>  <span class="comment">            // and show errors.</span>
<a name="l3348"><span class="linenum">3348</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('is_validated')" href="../../_functions/is_validated.html" onMouseOver="funcPopup(event,'is_validated')">is_validated</a>();
<a name="l3349"><span class="linenum">3349</span></a>          }
<a name="l3350"><span class="linenum">3350</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('heading')" href="../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade'), 3);
<a name="l3351"><span class="linenum">3351</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_form')" href="../../_classes/assign_form.html" onMouseOver="classPopup(event,'assign_form')">assign_form</a>('gradingform', <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>));
<a name="l3352"><span class="linenum">3352</span></a>  
<a name="l3353"><span class="linenum">3353</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a>) &gt; 1) {
<a name="l3354"><span class="linenum">3354</span></a>              <a class="var it3976" onMouseOver="hilite(3976)" onMouseOut="lolite()" onClick="logVariable('allgrades')" href="../../_variables/allgrades.html">$allgrades</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_all_grades')" href="../../_functions/get_all_grades.html" onMouseOver="funcPopup(event,'get_all_grades')">get_all_grades</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l3355"><span class="linenum">3355</span></a>              <a class="var it15366" onMouseOver="hilite(15366)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../_variables/history.html">$history</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_attempt_history_chooser')" href="../../_classes/assign_attempt_history_chooser.html" onMouseOver="classPopup(event,'assign_attempt_history_chooser')">assign_attempt_history_chooser</a>(<a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a>,
<a name="l3356"><span class="linenum">3356</span></a>                                                            <a class="var it3976" onMouseOver="hilite(3976)" onMouseOut="lolite()" onClick="logVariable('allgrades')" href="../../_variables/allgrades.html">$allgrades</a>,
<a name="l3357"><span class="linenum">3357</span></a>                                                            <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l3358"><span class="linenum">3358</span></a>                                                            <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l3359"><span class="linenum">3359</span></a>  
<a name="l3360"><span class="linenum">3360</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it15366" onMouseOver="hilite(15366)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../_variables/history.html">$history</a>);
<a name="l3361"><span class="linenum">3361</span></a>          }
<a name="l3362"><span class="linenum">3362</span></a>  
<a name="l3363"><span class="linenum">3363</span></a>          \mod_assign\event\<a class="class" onClick="logClass('grading_form_viewed')" href="../../_classes/grading_form_viewed.html" onMouseOver="classPopup(event,'grading_form_viewed')">grading_form_viewed</a>::<a class="function" onClick="logFunction('create_from_user')" href="../../_functions/create_from_user.html" onMouseOver="funcPopup(event,'create_from_user')">create_from_user</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l3364"><span class="linenum">3364</span></a>  
<a name="l3365"><span class="linenum">3365</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l3366"><span class="linenum">3366</span></a>      }
<a name="l3367"><span class="linenum">3367</span></a>  
<a name="l3368"><span class="linenum">3368</span></a>      <span class="comment">/**</span>
<a name="l3369"><span class="linenum">3369</span></a>  <span class="comment">     * Print the grading page for a single user submission.</span>
<a name="l3370"><span class="linenum">3370</span></a>  <span class="comment">     *</span>
<a name="l3371"><span class="linenum">3371</span></a>  <span class="comment">     * @param moodleform $mform</span>
<a name="l3372"><span class="linenum">3372</span></a>  <span class="comment">     * @return string</span>
<a name="l3373"><span class="linenum">3373</span></a>  <span class="comment">     */</span>
<a name="l3374"><span class="linenum">3374</span></a>      protected function <a class="function" onClick="logFunction('view_single_grade_page')" href="../../_functions/view_single_grade_page.html" onMouseOver="funcPopup(event,'view_single_grade_page')">view_single_grade_page</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l3375"><span class="linenum">3375</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>;
<a name="l3376"><span class="linenum">3376</span></a>  
<a name="l3377"><span class="linenum">3377</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l3378"><span class="linenum">3378</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l3379"><span class="linenum">3379</span></a>  
<a name="l3380"><span class="linenum">3380</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/gradeform.php.html">/mod/assign/gradeform.php</a>');
<a name="l3381"><span class="linenum">3381</span></a>  
<a name="l3382"><span class="linenum">3382</span></a>  <span class="comment">        // Need submit permission to submit an assignment.</span>
<a name="l3383"><span class="linenum">3383</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:grade', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l3384"><span class="linenum">3384</span></a>  
<a name="l3385"><span class="linenum">3385</span></a>          <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>,
<a name="l3386"><span class="linenum">3386</span></a>                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l3387"><span class="linenum">3387</span></a>                                      false,
<a name="l3388"><span class="linenum">3388</span></a>                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l3389"><span class="linenum">3389</span></a>                                      <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grading', 'assign'));
<a name="l3390"><span class="linenum">3390</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a>);
<a name="l3391"><span class="linenum">3391</span></a>  
<a name="l3392"><span class="linenum">3392</span></a>  <span class="comment">        // If userid is passed - we are only grading a single student.</span>
<a name="l3393"><span class="linenum">3393</span></a>          <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('rownum', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l3394"><span class="linenum">3394</span></a>          <a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('useridlistid', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_useridlist_key_id')" href="../../_functions/get_useridlist_key_id.html" onMouseOver="funcPopup(event,'get_useridlist_key_id')">get_useridlist_key_id</a>(), <a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>);
<a name="l3395"><span class="linenum">3395</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('userid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l3396"><span class="linenum">3396</span></a>          <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('attemptnumber', -1, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l3397"><span class="linenum">3397</span></a>  
<a name="l3398"><span class="linenum">3398</span></a>          if (!<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l3399"><span class="linenum">3399</span></a>              <a class="var it32158" onMouseOver="hilite(32158)" onMouseOut="lolite()" onClick="logVariable('useridlistkey')" href="../../_variables/useridlistkey.html">$useridlistkey</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_useridlist_key')" href="../../_functions/get_useridlist_key.html" onMouseOver="funcPopup(event,'get_useridlist_key')">get_useridlist_key</a>(<a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a>);
<a name="l3400"><span class="linenum">3400</span></a>              if (empty(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('mod_assign_useridlist')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/mod_assign_useridlist.html">mod_assign_useridlist</a>[<a class="var it32158" onMouseOver="hilite(32158)" onMouseOut="lolite()" onClick="logVariable('useridlistkey')" href="../../_variables/useridlistkey.html">$useridlistkey</a>])) {
<a name="l3401"><span class="linenum">3401</span></a>                  <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('mod_assign_useridlist')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/mod_assign_useridlist.html">mod_assign_useridlist</a>[<a class="var it32158" onMouseOver="hilite(32158)" onMouseOut="lolite()" onClick="logVariable('useridlistkey')" href="../../_variables/useridlistkey.html">$useridlistkey</a>] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_grading_userid_list')" href="../../_functions/get_grading_userid_list.html" onMouseOver="funcPopup(event,'get_grading_userid_list')">get_grading_userid_list</a>();
<a name="l3402"><span class="linenum">3402</span></a>              }
<a name="l3403"><span class="linenum">3403</span></a>              <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> = <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('mod_assign_useridlist')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/mod_assign_useridlist.html">mod_assign_useridlist</a>[<a class="var it32158" onMouseOver="hilite(32158)" onMouseOut="lolite()" onClick="logVariable('useridlistkey')" href="../../_variables/useridlistkey.html">$useridlistkey</a>];
<a name="l3404"><span class="linenum">3404</span></a>          } else {
<a name="l3405"><span class="linenum">3405</span></a>              <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a> = 0;
<a name="l3406"><span class="linenum">3406</span></a>              <a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a> = 0;
<a name="l3407"><span class="linenum">3407</span></a>              <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> = array(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l3408"><span class="linenum">3408</span></a>          }
<a name="l3409"><span class="linenum">3409</span></a>  
<a name="l3410"><span class="linenum">3410</span></a>          if (<a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a> &lt; 0 || <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a> &gt; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a>)) {
<a name="l3411"><span class="linenum">3411</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Row is out of bounds for the current grading table: ' . <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a>);
<a name="l3412"><span class="linenum">3412</span></a>          }
<a name="l3413"><span class="linenum">3413</span></a>  
<a name="l3414"><span class="linenum">3414</span></a>          <a class="var it490" onMouseOver="hilite(490)" onMouseOut="lolite()" onClick="logVariable('last')" href="../../_variables/last.html">$last</a> = false;
<a name="l3415"><span class="linenum">3415</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a>[<a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a>];
<a name="l3416"><span class="linenum">3416</span></a>          if (<a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a> == <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a>) - 1) {
<a name="l3417"><span class="linenum">3417</span></a>              <a class="var it490" onMouseOver="hilite(490)" onMouseOut="lolite()" onClick="logVariable('last')" href="../../_variables/last.html">$last</a> = true;
<a name="l3418"><span class="linenum">3418</span></a>          }
<a name="l3419"><span class="linenum">3419</span></a>  <span class="comment">        // This variation on the url will link direct to this student, with no next/previous links.</span>
<a name="l3420"><span class="linenum">3420</span></a>  <span class="comment">        // The benefit is the url will be the same every time for this student, so Atto autosave drafts can match up.</span>
<a name="l3421"><span class="linenum">3421</span></a>          <a class="var it25221" onMouseOver="hilite(25221)" onMouseOut="lolite()" onClick="logVariable('returnparams')" href="../../_variables/returnparams.html">$returnparams</a> = array('userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 'rownum' =&gt; 0, 'useridlistid' =&gt; 0);
<a name="l3422"><span class="linenum">3422</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('register_return_link')" href="../../_functions/register_return_link.html" onMouseOver="funcPopup(event,'register_return_link')">register_return_link</a>('grade', <a class="var it25221" onMouseOver="hilite(25221)" onMouseOut="lolite()" onClick="logVariable('returnparams')" href="../../_variables/returnparams.html">$returnparams</a>);
<a name="l3423"><span class="linenum">3423</span></a>  
<a name="l3424"><span class="linenum">3424</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l3425"><span class="linenum">3425</span></a>          if (<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l3426"><span class="linenum">3426</span></a>              <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>());
<a name="l3427"><span class="linenum">3427</span></a>              <a class="var it32159" onMouseOver="hilite(32159)" onMouseOut="lolite()" onClick="logVariable('usersummary')" href="../../_variables/usersummary.html">$usersummary</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_user_summary')" href="../../_classes/assign_user_summary.html" onMouseOver="classPopup(event,'assign_user_summary')">assign_user_summary</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>,
<a name="l3428"><span class="linenum">3428</span></a>                                                     <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l3429"><span class="linenum">3429</span></a>                                                     <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>,
<a name="l3430"><span class="linenum">3430</span></a>                                                     <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>(),
<a name="l3431"><span class="linenum">3431</span></a>                                                     <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_uniqueid_for_user')" href="../../_functions/get_uniqueid_for_user.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user')">get_uniqueid_for_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l3432"><span class="linenum">3432</span></a>                                                     <a class="function" onClick="logFunction('get_extra_user_fields')" href="../../_functions/get_extra_user_fields.html" onMouseOver="funcPopup(event,'get_extra_user_fields')">get_extra_user_fields</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()),
<a name="l3433"><span class="linenum">3433</span></a>                                                     !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_active_user')" href="../../_functions/is_active_user.html" onMouseOver="funcPopup(event,'is_active_user')">is_active_user</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l3434"><span class="linenum">3434</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it32159" onMouseOver="hilite(32159)" onMouseOut="lolite()" onClick="logVariable('usersummary')" href="../../_variables/usersummary.html">$usersummary</a>);
<a name="l3435"><span class="linenum">3435</span></a>          }
<a name="l3436"><span class="linenum">3436</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>);
<a name="l3437"><span class="linenum">3437</span></a>          <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a> = null;
<a name="l3438"><span class="linenum">3438</span></a>          <a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a> = null;
<a name="l3439"><span class="linenum">3439</span></a>          <a class="var it15025" onMouseOver="hilite(15025)" onMouseOut="lolite()" onClick="logVariable('notsubmitted')" href="../../_variables/notsubmitted.html">$notsubmitted</a> = array();
<a name="l3440"><span class="linenum">3440</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>) {
<a name="l3441"><span class="linenum">3441</span></a>              <a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 0, false, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>);
<a name="l3442"><span class="linenum">3442</span></a>              <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l3443"><span class="linenum">3443</span></a>              <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = 0;
<a name="l3444"><span class="linenum">3444</span></a>              if (<a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a>) {
<a name="l3445"><span class="linenum">3445</span></a>                  <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a>-&gt;<a onClick="logVariable('id')" class="var it45741" onMouseOver="hilite(45741)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3446"><span class="linenum">3446</span></a>              }
<a name="l3447"><span class="linenum">3447</span></a>              <a class="var it15025" onMouseOver="hilite(15025)" onMouseOut="lolite()" onClick="logVariable('notsubmitted')" href="../../_variables/notsubmitted.html">$notsubmitted</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group_members_who_have_not_submitted')" href="../../_functions/get_submission_group_members_who_have_not_submitted.html" onMouseOver="funcPopup(event,'get_submission_group_members_who_have_not_submitted')">get_submission_group_members_who_have_not_submitted</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, false);
<a name="l3448"><span class="linenum">3448</span></a>  
<a name="l3449"><span class="linenum">3449</span></a>          }
<a name="l3450"><span class="linenum">3450</span></a>  
<a name="l3451"><span class="linenum">3451</span></a>  <span class="comment">        // Get the requested grade.</span>
<a name="l3452"><span class="linenum">3452</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>);
<a name="l3453"><span class="linenum">3453</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l3454"><span class="linenum">3454</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_view_submission')" href="../../_functions/can_view_submission.html" onMouseOver="funcPopup(event,'can_view_submission')">can_view_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l3455"><span class="linenum">3455</span></a>              <a class="var it32155" onMouseOver="hilite(32155)" onMouseOut="lolite()" onClick="logVariable('gradelocked')" href="../../_variables/gradelocked.html">$gradelocked</a> = (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> &amp;&amp; <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('locked')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/locked.html">locked</a>) || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('grading_disabled')" href="../../_functions/grading_disabled.html" onMouseOver="funcPopup(event,'grading_disabled')">grading_disabled</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l3456"><span class="linenum">3456</span></a>              <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a> = null;
<a name="l3457"><span class="linenum">3457</span></a>              if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>) {
<a name="l3458"><span class="linenum">3458</span></a>                  <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a> = <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('extensionduedate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/extensionduedate.html">extensionduedate</a>;
<a name="l3459"><span class="linenum">3459</span></a>              }
<a name="l3460"><span class="linenum">3460</span></a>              <a class="var it32156" onMouseOver="hilite(32156)" onMouseOut="lolite()" onClick="logVariable('showedit')" href="../../_variables/showedit.html">$showedit</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submissions_open')" href="../../_functions/submissions_open.html" onMouseOver="funcPopup(event,'submissions_open')">submissions_open</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) &amp;&amp; (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>());
<a name="l3461"><span class="linenum">3461</span></a>              <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>());
<a name="l3462"><span class="linenum">3462</span></a>              <a class="var it3731" onMouseOver="hilite(3731)" onMouseOut="lolite()" onClick="logVariable('usergroups')" href="../../_variables/usergroups.html">$usergroups</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_all_groups')" href="../../_functions/get_all_groups.html" onMouseOver="funcPopup(event,'get_all_groups')">get_all_groups</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l3463"><span class="linenum">3463</span></a>  
<a name="l3464"><span class="linenum">3464</span></a>              <a class="var it32157" onMouseOver="hilite(32157)" onMouseOut="lolite()" onClick="logVariable('submissionstatus')" href="../../_variables/submissionstatus.html">$submissionstatus</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_submission_status')" href="../../_classes/assign_submission_status.html" onMouseOver="classPopup(event,'assign_submission_status')">assign_submission_status</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('allowsubmissionsfromdate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/allowsubmissionsfromdate.html">allowsubmissionsfromdate</a>,
<a name="l3465"><span class="linenum">3465</span></a>                                                               <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('alwaysshowdescription')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/alwaysshowdescription.html">alwaysshowdescription</a>,
<a name="l3466"><span class="linenum">3466</span></a>                                                               <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>,
<a name="l3467"><span class="linenum">3467</span></a>                                                               <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>,
<a name="l3468"><span class="linenum">3468</span></a>                                                               <a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a>,
<a name="l3469"><span class="linenum">3469</span></a>                                                               <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a>,
<a name="l3470"><span class="linenum">3470</span></a>                                                               <a class="var it15025" onMouseOver="hilite(15025)" onMouseOut="lolite()" onClick="logVariable('notsubmitted')" href="../../_variables/notsubmitted.html">$notsubmitted</a>,
<a name="l3471"><span class="linenum">3471</span></a>                                                               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>(),
<a name="l3472"><span class="linenum">3472</span></a>                                                               <a class="var it32155" onMouseOver="hilite(32155)" onMouseOut="lolite()" onClick="logVariable('gradelocked')" href="../../_variables/gradelocked.html">$gradelocked</a>,
<a name="l3473"><span class="linenum">3473</span></a>                                                               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_graded')" href="../../_functions/is_graded.html" onMouseOver="funcPopup(event,'is_graded')">is_graded</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>),
<a name="l3474"><span class="linenum">3474</span></a>                                                               <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('duedate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/duedate.html">duedate</a>,
<a name="l3475"><span class="linenum">3475</span></a>                                                               <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('cutoffdate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/cutoffdate.html">cutoffdate</a>,
<a name="l3476"><span class="linenum">3476</span></a>                                                               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>(),
<a name="l3477"><span class="linenum">3477</span></a>                                                               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_action')" href="../../_functions/get_return_action.html" onMouseOver="funcPopup(event,'get_return_action')">get_return_action</a>(),
<a name="l3478"><span class="linenum">3478</span></a>                                                               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_params')" href="../../_functions/get_return_params.html" onMouseOver="funcPopup(event,'get_return_params')">get_return_params</a>(),
<a name="l3479"><span class="linenum">3479</span></a>                                                               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l3480"><span class="linenum">3480</span></a>                                                               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l3481"><span class="linenum">3481</span></a>                                                               <a class="class" onClick="logClass('assign_submission_status')" href="../../_classes/assign_submission_status.html" onMouseOver="classPopup(event,'assign_submission_status')">assign_submission_status</a>::GRADER_VIEW,
<a name="l3482"><span class="linenum">3482</span></a>                                                               <a class="var it32156" onMouseOver="hilite(32156)" onMouseOut="lolite()" onClick="logVariable('showedit')" href="../../_variables/showedit.html">$showedit</a>,
<a name="l3483"><span class="linenum">3483</span></a>                                                               false,
<a name="l3484"><span class="linenum">3484</span></a>                                                               <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>,
<a name="l3485"><span class="linenum">3485</span></a>                                                               <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a>,
<a name="l3486"><span class="linenum">3486</span></a>                                                               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l3487"><span class="linenum">3487</span></a>                                                               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>(),
<a name="l3488"><span class="linenum">3488</span></a>                                                               '',
<a name="l3489"><span class="linenum">3489</span></a>                                                               <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('attemptreopenmethod')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/attemptreopenmethod.html">attemptreopenmethod</a>,
<a name="l3490"><span class="linenum">3490</span></a>                                                               <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>,
<a name="l3491"><span class="linenum">3491</span></a>                                                               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_grading_status')" href="../../_functions/get_grading_status.html" onMouseOver="funcPopup(event,'get_grading_status')">get_grading_status</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>),
<a name="l3492"><span class="linenum">3492</span></a>                                                               <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('preventsubmissionnotingroup')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/preventsubmissionnotingroup.html">preventsubmissionnotingroup</a>,
<a name="l3493"><span class="linenum">3493</span></a>                                                               <a class="var it3731" onMouseOver="hilite(3731)" onMouseOut="lolite()" onClick="logVariable('usergroups')" href="../../_variables/usergroups.html">$usergroups</a>);
<a name="l3494"><span class="linenum">3494</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it32157" onMouseOver="hilite(32157)" onMouseOut="lolite()" onClick="logVariable('submissionstatus')" href="../../_variables/submissionstatus.html">$submissionstatus</a>);
<a name="l3495"><span class="linenum">3495</span></a>          }
<a name="l3496"><span class="linenum">3496</span></a>  
<a name="l3497"><span class="linenum">3497</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l3498"><span class="linenum">3498</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l3499"><span class="linenum">3499</span></a>              if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> !== null &amp;&amp; <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> &gt;= 0) {
<a name="l3500"><span class="linenum">3500</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('grade')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = <a class="function" onClick="logFunction('format_float')" href="../../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>, 2);
<a name="l3501"><span class="linenum">3501</span></a>              }
<a name="l3502"><span class="linenum">3502</span></a>          } else {
<a name="l3503"><span class="linenum">3503</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l3504"><span class="linenum">3504</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('grade')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = '';
<a name="l3505"><span class="linenum">3505</span></a>          }
<a name="l3506"><span class="linenum">3506</span></a>  
<a name="l3507"><span class="linenum">3507</span></a>          if (!empty(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>)) {
<a name="l3508"><span class="linenum">3508</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> = <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>;
<a name="l3509"><span class="linenum">3509</span></a>          }
<a name="l3510"><span class="linenum">3510</span></a>          if (!empty(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a>)) {
<a name="l3511"><span class="linenum">3511</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a> = <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a>;
<a name="l3512"><span class="linenum">3512</span></a>          }
<a name="l3513"><span class="linenum">3513</span></a>  
<a name="l3514"><span class="linenum">3514</span></a>  <span class="comment">        // Warning if required.</span>
<a name="l3515"><span class="linenum">3515</span></a>          <a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_all_submissions')" href="../../_functions/get_all_submissions.html" onMouseOver="funcPopup(event,'get_all_submissions')">get_all_submissions</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l3516"><span class="linenum">3516</span></a>  
<a name="l3517"><span class="linenum">3517</span></a>          if (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> != -1 &amp;&amp; (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> + 1) != <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a>)) {
<a name="l3518"><span class="linenum">3518</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('attemptnumber'=&gt;<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> + 1,
<a name="l3519"><span class="linenum">3519</span></a>                              'totalattempts'=&gt;<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a>));
<a name="l3520"><span class="linenum">3520</span></a>              <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editingpreviousfeedbackwarning', 'assign', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l3521"><span class="linenum">3521</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>);
<a name="l3522"><span class="linenum">3522</span></a>          }
<a name="l3523"><span class="linenum">3523</span></a>  
<a name="l3524"><span class="linenum">3524</span></a>  <span class="comment">        // Now show the grading form.</span>
<a name="l3525"><span class="linenum">3525</span></a>          if (!<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l3526"><span class="linenum">3526</span></a>              <a class="var it25319" onMouseOver="hilite(25319)" onMouseOut="lolite()" onClick="logVariable('pagination')" href="../../_variables/pagination.html">$pagination</a> = array('rownum' =&gt; <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a>,
<a name="l3527"><span class="linenum">3527</span></a>                                  'useridlistid' =&gt; <a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a>,
<a name="l3528"><span class="linenum">3528</span></a>                                  'last' =&gt; <a class="var it490" onMouseOver="hilite(490)" onMouseOut="lolite()" onClick="logVariable('last')" href="../../_variables/last.html">$last</a>,
<a name="l3529"><span class="linenum">3529</span></a>                                  'userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>,
<a name="l3530"><span class="linenum">3530</span></a>                                  'attemptnumber' =&gt; <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>);
<a name="l3531"><span class="linenum">3531</span></a>              <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a> = array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it25319" onMouseOver="hilite(25319)" onMouseOut="lolite()" onClick="logVariable('pagination')" href="../../_variables/pagination.html">$pagination</a>);
<a name="l3532"><span class="linenum">3532</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_grade_form')" href="../../_classes/mod_assign_grade_form.html" onMouseOver="classPopup(event,'mod_assign_grade_form')">mod_assign_grade_form</a>(null,
<a name="l3533"><span class="linenum">3533</span></a>                                                 <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a>,
<a name="l3534"><span class="linenum">3534</span></a>                                                 'post',
<a name="l3535"><span class="linenum">3535</span></a>                                                 '',
<a name="l3536"><span class="linenum">3536</span></a>                                                 array('class'=&gt;'gradeform'));
<a name="l3537"><span class="linenum">3537</span></a>          }
<a name="l3538"><span class="linenum">3538</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('heading')" href="../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade'), 3);
<a name="l3539"><span class="linenum">3539</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_form')" href="../../_classes/assign_form.html" onMouseOver="classPopup(event,'assign_form')">assign_form</a>('gradingform', <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>));
<a name="l3540"><span class="linenum">3540</span></a>  
<a name="l3541"><span class="linenum">3541</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a>) &gt; 1 &amp;&amp; <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> == -1) {
<a name="l3542"><span class="linenum">3542</span></a>              <a class="var it3976" onMouseOver="hilite(3976)" onMouseOut="lolite()" onClick="logVariable('allgrades')" href="../../_variables/allgrades.html">$allgrades</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_all_grades')" href="../../_functions/get_all_grades.html" onMouseOver="funcPopup(event,'get_all_grades')">get_all_grades</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l3543"><span class="linenum">3543</span></a>              <a class="var it15366" onMouseOver="hilite(15366)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../_variables/history.html">$history</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_attempt_history')" href="../../_classes/assign_attempt_history.html" onMouseOver="classPopup(event,'assign_attempt_history')">assign_attempt_history</a>(<a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a>,
<a name="l3544"><span class="linenum">3544</span></a>                                                    <a class="var it3976" onMouseOver="hilite(3976)" onMouseOut="lolite()" onClick="logVariable('allgrades')" href="../../_variables/allgrades.html">$allgrades</a>,
<a name="l3545"><span class="linenum">3545</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>(),
<a name="l3546"><span class="linenum">3546</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_plugins')" href="../../_functions/get_feedback_plugins.html" onMouseOver="funcPopup(event,'get_feedback_plugins')">get_feedback_plugins</a>(),
<a name="l3547"><span class="linenum">3547</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l3548"><span class="linenum">3548</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_action')" href="../../_functions/get_return_action.html" onMouseOver="funcPopup(event,'get_return_action')">get_return_action</a>(),
<a name="l3549"><span class="linenum">3549</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_params')" href="../../_functions/get_return_params.html" onMouseOver="funcPopup(event,'get_return_params')">get_return_params</a>(),
<a name="l3550"><span class="linenum">3550</span></a>                                                    true,
<a name="l3551"><span class="linenum">3551</span></a>                                                    <a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a>,
<a name="l3552"><span class="linenum">3552</span></a>                                                    <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a>);
<a name="l3553"><span class="linenum">3553</span></a>  
<a name="l3554"><span class="linenum">3554</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it15366" onMouseOver="hilite(15366)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../_variables/history.html">$history</a>);
<a name="l3555"><span class="linenum">3555</span></a>          }
<a name="l3556"><span class="linenum">3556</span></a>  
<a name="l3557"><span class="linenum">3557</span></a>          \mod_assign\event\<a class="class" onClick="logClass('grading_form_viewed')" href="../../_classes/grading_form_viewed.html" onMouseOver="classPopup(event,'grading_form_viewed')">grading_form_viewed</a>::<a class="function" onClick="logFunction('create_from_user')" href="../../_functions/create_from_user.html" onMouseOver="funcPopup(event,'create_from_user')">create_from_user</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l3558"><span class="linenum">3558</span></a>  
<a name="l3559"><span class="linenum">3559</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l3560"><span class="linenum">3560</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l3561"><span class="linenum">3561</span></a>      }
<a name="l3562"><span class="linenum">3562</span></a>  
<a name="l3563"><span class="linenum">3563</span></a>      <span class="comment">/**</span>
<a name="l3564"><span class="linenum">3564</span></a>  <span class="comment">     * Show a confirmation page to make sure they want to release student identities.</span>
<a name="l3565"><span class="linenum">3565</span></a>  <span class="comment">     *</span>
<a name="l3566"><span class="linenum">3566</span></a>  <span class="comment">     * @return string</span>
<a name="l3567"><span class="linenum">3567</span></a>  <span class="comment">     */</span>
<a name="l3568"><span class="linenum">3568</span></a>      protected function <a class="function" onClick="logFunction('view_reveal_identities_confirm')" href="../../_functions/view_reveal_identities_confirm.html" onMouseOver="funcPopup(event,'view_reveal_identities_confirm')">view_reveal_identities_confirm</a>() {
<a name="l3569"><span class="linenum">3569</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:revealidentities', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l3570"><span class="linenum">3570</span></a>  
<a name="l3571"><span class="linenum">3571</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l3572"><span class="linenum">3572</span></a>          <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(),
<a name="l3573"><span class="linenum">3573</span></a>                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l3574"><span class="linenum">3574</span></a>                                      false,
<a name="l3575"><span class="linenum">3575</span></a>                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id);
<a name="l3576"><span class="linenum">3576</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a>);
<a name="l3577"><span class="linenum">3577</span></a>  
<a name="l3578"><span class="linenum">3578</span></a>          <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../../_variables/urlparams.html">$urlparams</a> = array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l3579"><span class="linenum">3579</span></a>                             'action'=&gt;'revealidentitiesconfirm',
<a name="l3580"><span class="linenum">3580</span></a>                             'sesskey'=&gt;<a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>());
<a name="l3581"><span class="linenum">3581</span></a>          <a class="var it6070" onMouseOver="hilite(6070)" onMouseOut="lolite()" onClick="logVariable('confirmurl')" href="../../_variables/confirmurl.html">$confirmurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/assign/view.php.html">/mod/assign/view.php</a>', <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../../_variables/urlparams.html">$urlparams</a>);
<a name="l3582"><span class="linenum">3582</span></a>  
<a name="l3583"><span class="linenum">3583</span></a>          <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../../_variables/urlparams.html">$urlparams</a> = array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l3584"><span class="linenum">3584</span></a>                             'action'=&gt;'grading');
<a name="l3585"><span class="linenum">3585</span></a>          <a class="var it5237" onMouseOver="hilite(5237)" onMouseOut="lolite()" onClick="logVariable('cancelurl')" href="../../_variables/cancelurl.html">$cancelurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/assign/view.php.html">/mod/assign/view.php</a>', <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../../_variables/urlparams.html">$urlparams</a>);
<a name="l3586"><span class="linenum">3586</span></a>  
<a name="l3587"><span class="linenum">3587</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('confirm')" href="../../_functions/confirm.html" onMouseOver="funcPopup(event,'confirm')">confirm</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('revealidentitiesconfirm', 'assign'),
<a name="l3588"><span class="linenum">3588</span></a>                                               <a class="var it6070" onMouseOver="hilite(6070)" onMouseOut="lolite()" onClick="logVariable('confirmurl')" href="../../_variables/confirmurl.html">$confirmurl</a>,
<a name="l3589"><span class="linenum">3589</span></a>                                               <a class="var it5237" onMouseOver="hilite(5237)" onMouseOut="lolite()" onClick="logVariable('cancelurl')" href="../../_variables/cancelurl.html">$cancelurl</a>);
<a name="l3590"><span class="linenum">3590</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l3591"><span class="linenum">3591</span></a>  
<a name="l3592"><span class="linenum">3592</span></a>          \mod_assign\event\<a class="class" onClick="logClass('reveal_identities_confirmation_page_viewed')" href="../../_classes/reveal_identities_confirmation_page_viewed.html" onMouseOver="classPopup(event,'reveal_identities_confirmation_page_viewed')">reveal_identities_confirmation_page_viewed</a>::<a class="function" onClick="logFunction('create_from_assign')" href="../../_functions/create_from_assign.html" onMouseOver="funcPopup(event,'create_from_assign')">create_from_assign</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l3593"><span class="linenum">3593</span></a>  
<a name="l3594"><span class="linenum">3594</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l3595"><span class="linenum">3595</span></a>      }
<a name="l3596"><span class="linenum">3596</span></a>  
<a name="l3597"><span class="linenum">3597</span></a>      <span class="comment">/**</span>
<a name="l3598"><span class="linenum">3598</span></a>  <span class="comment">     * View a link to go back to the previous page. Uses url parameters returnaction and returnparams.</span>
<a name="l3599"><span class="linenum">3599</span></a>  <span class="comment">     *</span>
<a name="l3600"><span class="linenum">3600</span></a>  <span class="comment">     * @return string</span>
<a name="l3601"><span class="linenum">3601</span></a>  <span class="comment">     */</span>
<a name="l3602"><span class="linenum">3602</span></a>      protected function <a class="function" onClick="logFunction('view_return_links')" href="../../_functions/view_return_links.html" onMouseOver="funcPopup(event,'view_return_links')">view_return_links</a>() {
<a name="l3603"><span class="linenum">3603</span></a>          <a class="var it25220" onMouseOver="hilite(25220)" onMouseOut="lolite()" onClick="logVariable('returnaction')" href="../../_variables/returnaction.html">$returnaction</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('returnaction', '', <a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>);
<a name="l3604"><span class="linenum">3604</span></a>          <a class="var it25221" onMouseOver="hilite(25221)" onMouseOut="lolite()" onClick="logVariable('returnparams')" href="../../_variables/returnparams.html">$returnparams</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('returnparams', '', <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l3605"><span class="linenum">3605</span></a>  
<a name="l3606"><span class="linenum">3606</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l3607"><span class="linenum">3607</span></a>          <a class="var it25221" onMouseOver="hilite(25221)" onMouseOut="lolite()" onClick="logVariable('returnparams')" href="../../_variables/returnparams.html">$returnparams</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&amp;amp;', '&amp;', <a class="var it25221" onMouseOver="hilite(25221)" onMouseOut="lolite()" onClick="logVariable('returnparams')" href="../../_variables/returnparams.html">$returnparams</a>);
<a name="l3608"><span class="linenum">3608</span></a>          <a class="phpfunction" onClick="logFunction('parse_str')" href="../../_functions/parse_str.html" onMouseOver="phpfuncPopup(event,'parse_str')">parse_str</a>(<a class="var it25221" onMouseOver="hilite(25221)" onMouseOut="lolite()" onClick="logVariable('returnparams')" href="../../_variables/returnparams.html">$returnparams</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l3609"><span class="linenum">3609</span></a>          <a class="var it4638" onMouseOver="hilite(4638)" onMouseOut="lolite()" onClick="logVariable('newparams')" href="../../_variables/newparams.html">$newparams</a> = array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id, 'action' =&gt; <a class="var it25220" onMouseOver="hilite(25220)" onMouseOut="lolite()" onClick="logVariable('returnaction')" href="../../_variables/returnaction.html">$returnaction</a>);
<a name="l3610"><span class="linenum">3610</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it4638" onMouseOver="hilite(4638)" onMouseOut="lolite()" onClick="logVariable('newparams')" href="../../_variables/newparams.html">$newparams</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l3611"><span class="linenum">3611</span></a>  
<a name="l3612"><span class="linenum">3612</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/assign/view.php.html">/mod/assign/view.php</a>', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l3613"><span class="linenum">3613</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('single_button')" href="../../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('back'), 'get');
<a name="l3614"><span class="linenum">3614</span></a>      }
<a name="l3615"><span class="linenum">3615</span></a>  
<a name="l3616"><span class="linenum">3616</span></a>      <span class="comment">/**</span>
<a name="l3617"><span class="linenum">3617</span></a>  <span class="comment">     * View the grading table of all submissions for this assignment.</span>
<a name="l3618"><span class="linenum">3618</span></a>  <span class="comment">     *</span>
<a name="l3619"><span class="linenum">3619</span></a>  <span class="comment">     * @return string</span>
<a name="l3620"><span class="linenum">3620</span></a>  <span class="comment">     */</span>
<a name="l3621"><span class="linenum">3621</span></a>      protected function <a class="function" onClick="logFunction('view_grading_table')" href="../../_functions/view_grading_table.html" onMouseOver="funcPopup(event,'view_grading_table')">view_grading_table</a>() {
<a name="l3622"><span class="linenum">3622</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>;
<a name="l3623"><span class="linenum">3623</span></a>  
<a name="l3624"><span class="linenum">3624</span></a>  <span class="comment">        // Include grading options form.</span>
<a name="l3625"><span class="linenum">3625</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/gradingoptionsform.php.html">/mod/assign/gradingoptionsform.php</a>');
<a name="l3626"><span class="linenum">3626</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/quickgradingform.php.html">/mod/assign/quickgradingform.php</a>');
<a name="l3627"><span class="linenum">3627</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/gradingbatchoperationsform.php.html">/mod/assign/gradingbatchoperationsform.php</a>');
<a name="l3628"><span class="linenum">3628</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l3629"><span class="linenum">3629</span></a>          <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id;
<a name="l3630"><span class="linenum">3630</span></a>  
<a name="l3631"><span class="linenum">3631</span></a>          <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a> = array();
<a name="l3632"><span class="linenum">3632</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('gradereport/grader:view', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>()) &amp;&amp;
<a name="l3633"><span class="linenum">3633</span></a>                  <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:viewall', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>())) {
<a name="l3634"><span class="linenum">3634</span></a>              <a class="var it32160" onMouseOver="hilite(32160)" onMouseOut="lolite()" onClick="logVariable('gradebookurl')" href="../../_variables/gradebookurl.html">$gradebookurl</a> = '/grade/report/grader/index.php?id=' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id;
<a name="l3635"><span class="linenum">3635</span></a>              <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>[<a class="var it32160" onMouseOver="hilite(32160)" onMouseOut="lolite()" onClick="logVariable('gradebookurl')" href="../../_variables/gradebookurl.html">$gradebookurl</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('viewgradebook', 'assign');
<a name="l3636"><span class="linenum">3636</span></a>          }
<a name="l3637"><span class="linenum">3637</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>() &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_submissions')" href="../../_functions/count_submissions.html" onMouseOver="funcPopup(event,'count_submissions')">count_submissions</a>()) {
<a name="l3638"><span class="linenum">3638</span></a>              <a class="var it5427" onMouseOver="hilite(5427)" onMouseOut="lolite()" onClick="logVariable('downloadurl')" href="../../_variables/downloadurl.html">$downloadurl</a> = '/mod/assign/view.php?id=' . <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a> . '&amp;action=downloadall';
<a name="l3639"><span class="linenum">3639</span></a>              <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>[<a class="var it5427" onMouseOver="hilite(5427)" onMouseOut="lolite()" onClick="logVariable('downloadurl')" href="../../_variables/downloadurl.html">$downloadurl</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('downloadall', 'assign');
<a name="l3640"><span class="linenum">3640</span></a>          }
<a name="l3641"><span class="linenum">3641</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>() &amp;&amp;
<a name="l3642"><span class="linenum">3642</span></a>                  <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:revealidentities', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>())) {
<a name="l3643"><span class="linenum">3643</span></a>              <a class="var it32161" onMouseOver="hilite(32161)" onMouseOut="lolite()" onClick="logVariable('revealidentitiesurl')" href="../../_variables/revealidentitiesurl.html">$revealidentitiesurl</a> = '/mod/assign/view.php?id=' . <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a> . '&amp;action=revealidentities';
<a name="l3644"><span class="linenum">3644</span></a>              <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>[<a class="var it32161" onMouseOver="hilite(32161)" onMouseOut="lolite()" onClick="logVariable('revealidentitiesurl')" href="../../_variables/revealidentitiesurl.html">$revealidentitiesurl</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('revealidentities', 'assign');
<a name="l3645"><span class="linenum">3645</span></a>          }
<a name="l3646"><span class="linenum">3646</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_plugins')" href="../../_functions/get_feedback_plugins.html" onMouseOver="funcPopup(event,'get_feedback_plugins')">get_feedback_plugins</a>() as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l3647"><span class="linenum">3647</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l3648"><span class="linenum">3648</span></a>                  foreach (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_grading_actions')" href="../../_functions/get_grading_actions.html" onMouseOver="funcPopup(event,'get_grading_actions')">get_grading_actions</a>() as <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> =&gt; <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../_variables/description.html">$description</a>) {
<a name="l3649"><span class="linenum">3649</span></a>                      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = '<a class="filename" href="../../mod/assign/view.php.html">/mod/assign/view.php</a>' .
<a name="l3650"><span class="linenum">3650</span></a>                             '?id=' .  <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a> .
<a name="l3651"><span class="linenum">3651</span></a>                             '&amp;plugin=' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>() .
<a name="l3652"><span class="linenum">3652</span></a>                             '&amp;pluginsubtype=assignfeedback' .
<a name="l3653"><span class="linenum">3653</span></a>                             '&amp;action=viewpluginpage&amp;pluginaction=' . <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>;
<a name="l3654"><span class="linenum">3654</span></a>                      <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>[<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>] = <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../_variables/description.html">$description</a>;
<a name="l3655"><span class="linenum">3655</span></a>                  }
<a name="l3656"><span class="linenum">3656</span></a>              }
<a name="l3657"><span class="linenum">3657</span></a>          }
<a name="l3658"><span class="linenum">3658</span></a>  
<a name="l3659"><span class="linenum">3659</span></a>  <span class="comment">        // Sort links alphabetically based on the link description.</span>
<a name="l3660"><span class="linenum">3660</span></a>          <a class="class" onClick="logClass('core_collator')" href="../../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="phpfunction" onClick="logFunction('asort')" href="../../_functions/asort.html" onMouseOver="phpfuncPopup(event,'asort')">asort</a>(<a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>);
<a name="l3661"><span class="linenum">3661</span></a>  
<a name="l3662"><span class="linenum">3662</span></a>          <a class="var it32162" onMouseOver="hilite(32162)" onMouseOut="lolite()" onClick="logVariable('gradingactions')" href="../../_variables/gradingactions.html">$gradingactions</a> = <span class="keyword">new </span><a class="class" onClick="logClass('url_select')" href="../../_classes/url_select.html" onMouseOver="classPopup(event,'url_select')">url_select</a>(<a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>);
<a name="l3663"><span class="linenum">3663</span></a>          <a class="var it32162" onMouseOver="hilite(32162)" onMouseOut="lolite()" onClick="logVariable('gradingactions')" href="../../_variables/gradingactions.html">$gradingactions</a>-&gt;<a class="function" onClick="logFunction('set_label')" href="../../_functions/set_label.html" onMouseOver="funcPopup(event,'set_label')">set_label</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('choosegradingaction', 'assign'));
<a name="l3664"><span class="linenum">3664</span></a>  
<a name="l3665"><span class="linenum">3665</span></a>          <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a> = <a class="function" onClick="logFunction('get_grading_manager')" href="../../_functions/get_grading_manager.html" onMouseOver="funcPopup(event,'get_grading_manager')">get_grading_manager</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(), 'mod_assign', 'submissions');
<a name="l3666"><span class="linenum">3666</span></a>  
<a name="l3667"><span class="linenum">3667</span></a>          <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_assign_perpage')" href="../../_functions/get_assign_perpage.html" onMouseOver="funcPopup(event,'get_assign_perpage')">get_assign_perpage</a>();
<a name="l3668"><span class="linenum">3668</span></a>          <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../../_variables/filter.html">$filter</a> = <a class="function" onClick="logFunction('get_user_preferences')" href="../../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('assign_filter', '');
<a name="l3669"><span class="linenum">3669</span></a>          <a class="var it30986" onMouseOver="hilite(30986)" onMouseOut="lolite()" onClick="logVariable('markerfilter')" href="../../_variables/markerfilter.html">$markerfilter</a> = <a class="function" onClick="logFunction('get_user_preferences')" href="../../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('assign_markerfilter', '');
<a name="l3670"><span class="linenum">3670</span></a>          <a class="var it21979" onMouseOver="hilite(21979)" onMouseOut="lolite()" onClick="logVariable('workflowfilter')" href="../../_variables/workflowfilter.html">$workflowfilter</a> = <a class="function" onClick="logFunction('get_user_preferences')" href="../../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('assign_workflowfilter', '');
<a name="l3671"><span class="linenum">3671</span></a>          <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a> = <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a>-&gt;<a class="function" onClick="logFunction('get_active_controller')" href="../../_functions/get_active_controller.html" onMouseOver="funcPopup(event,'get_active_controller')">get_active_controller</a>();
<a name="l3672"><span class="linenum">3672</span></a>          <a class="var it32163" onMouseOver="hilite(32163)" onMouseOut="lolite()" onClick="logVariable('showquickgrading')" href="../../_variables/showquickgrading.html">$showquickgrading</a> = empty(<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_grade')" href="../../_functions/can_grade.html" onMouseOver="funcPopup(event,'can_grade')">can_grade</a>();
<a name="l3673"><span class="linenum">3673</span></a>          <a class="var it4054" onMouseOver="hilite(4054)" onMouseOut="lolite()" onClick="logVariable('quickgrading')" href="../../_variables/quickgrading.html">$quickgrading</a> = <a class="function" onClick="logFunction('get_user_preferences')" href="../../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('assign_quickgrading', false);
<a name="l3674"><span class="linenum">3674</span></a>          <a class="var it32164" onMouseOver="hilite(32164)" onMouseOut="lolite()" onClick="logVariable('showonlyactiveenrolopt')" href="../../_variables/showonlyactiveenrolopt.html">$showonlyactiveenrolopt</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewsuspendedusers', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l3675"><span class="linenum">3675</span></a>  
<a name="l3676"><span class="linenum">3676</span></a>          <a class="var it26822" onMouseOver="hilite(26822)" onMouseOut="lolite()" onClick="logVariable('markingallocation')" href="../../_variables/markingallocation.html">$markingallocation</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow &amp;&amp;
<a name="l3677"><span class="linenum">3677</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingallocation &amp;&amp;
<a name="l3678"><span class="linenum">3678</span></a>              <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:manageallocations', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l3679"><span class="linenum">3679</span></a>  <span class="comment">        // Get markers to use in drop lists.</span>
<a name="l3680"><span class="linenum">3680</span></a>          <a class="var it32165" onMouseOver="hilite(32165)" onMouseOut="lolite()" onClick="logVariable('markingallocationoptions')" href="../../_variables/markingallocationoptions.html">$markingallocationoptions</a> = array();
<a name="l3681"><span class="linenum">3681</span></a>          if (<a class="var it26822" onMouseOver="hilite(26822)" onMouseOut="lolite()" onClick="logVariable('markingallocation')" href="../../_variables/markingallocation.html">$markingallocation</a>) {
<a name="l3682"><span class="linenum">3682</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="function" onClick="logFunction('users_order_by_sql')" href="../../_functions/users_order_by_sql.html" onMouseOver="funcPopup(event,'users_order_by_sql')">users_order_by_sql</a>();
<a name="l3683"><span class="linenum">3683</span></a>              <a class="var it15515" onMouseOver="hilite(15515)" onMouseOut="lolite()" onClick="logVariable('markers')" href="../../_variables/markers.html">$markers</a> = <a class="function" onClick="logFunction('get_users_by_capability')" href="../../_functions/get_users_by_capability.html" onMouseOver="funcPopup(event,'get_users_by_capability')">get_users_by_capability</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, 'mod/assign:grade', '', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l3684"><span class="linenum">3684</span></a>              <a class="var it32165" onMouseOver="hilite(32165)" onMouseOut="lolite()" onClick="logVariable('markingallocationoptions')" href="../../_variables/markingallocationoptions.html">$markingallocationoptions</a>[''] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('filternone', 'assign');
<a name="l3685"><span class="linenum">3685</span></a>              <a class="var it32165" onMouseOver="hilite(32165)" onMouseOut="lolite()" onClick="logVariable('markingallocationoptions')" href="../../_variables/markingallocationoptions.html">$markingallocationoptions</a>[<a class="constant" onClick="logConstant('ASSIGN_MARKER_FILTER_NO_MARKER')" href="../../_constants/ASSIGN_MARKER_FILTER_NO_MARKER.html" onMouseOver="constPopup(event,'ASSIGN_MARKER_FILTER_NO_MARKER')">ASSIGN_MARKER_FILTER_NO_MARKER</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('markerfilternomarker', 'assign');
<a name="l3686"><span class="linenum">3686</span></a>              foreach (<a class="var it15515" onMouseOver="hilite(15515)" onMouseOut="lolite()" onClick="logVariable('markers')" href="../../_variables/markers.html">$markers</a> as <a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>) {
<a name="l3687"><span class="linenum">3687</span></a>                  <a class="var it32165" onMouseOver="hilite(32165)" onMouseOut="lolite()" onClick="logVariable('markingallocationoptions')" href="../../_variables/markingallocationoptions.html">$markingallocationoptions</a>[<a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>-&gt;<a onClick="logVariable('id')" class="var it43495" onMouseOver="hilite(43495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>);
<a name="l3688"><span class="linenum">3688</span></a>              }
<a name="l3689"><span class="linenum">3689</span></a>          }
<a name="l3690"><span class="linenum">3690</span></a>  
<a name="l3691"><span class="linenum">3691</span></a>          <a class="var it24511" onMouseOver="hilite(24511)" onMouseOut="lolite()" onClick="logVariable('markingworkflow')" href="../../_variables/markingworkflow.html">$markingworkflow</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow;
<a name="l3692"><span class="linenum">3692</span></a>  <span class="comment">        // Get marking states to show in form.</span>
<a name="l3693"><span class="linenum">3693</span></a>          <a class="var it32166" onMouseOver="hilite(32166)" onMouseOut="lolite()" onClick="logVariable('markingworkflowoptions')" href="../../_variables/markingworkflowoptions.html">$markingworkflowoptions</a> = array();
<a name="l3694"><span class="linenum">3694</span></a>          if (<a class="var it24511" onMouseOver="hilite(24511)" onMouseOut="lolite()" onClick="logVariable('markingworkflow')" href="../../_variables/markingworkflow.html">$markingworkflow</a>) {
<a name="l3695"><span class="linenum">3695</span></a>              <a class="var it30992" onMouseOver="hilite(30992)" onMouseOut="lolite()" onClick="logVariable('notmarked')" href="../../_variables/notmarked.html">$notmarked</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('markingworkflowstatenotmarked', 'assign');
<a name="l3696"><span class="linenum">3696</span></a>              <a class="var it32166" onMouseOver="hilite(32166)" onMouseOut="lolite()" onClick="logVariable('markingworkflowoptions')" href="../../_variables/markingworkflowoptions.html">$markingworkflowoptions</a>[''] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('filternone', 'assign');
<a name="l3697"><span class="linenum">3697</span></a>              <a class="var it32166" onMouseOver="hilite(32166)" onMouseOut="lolite()" onClick="logVariable('markingworkflowoptions')" href="../../_variables/markingworkflowoptions.html">$markingworkflowoptions</a>[<a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED')">ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED</a>] = <a class="var it30992" onMouseOver="hilite(30992)" onMouseOut="lolite()" onClick="logVariable('notmarked')" href="../../_variables/notmarked.html">$notmarked</a>;
<a name="l3698"><span class="linenum">3698</span></a>              <a class="var it32166" onMouseOver="hilite(32166)" onMouseOut="lolite()" onClick="logVariable('markingworkflowoptions')" href="../../_variables/markingworkflowoptions.html">$markingworkflowoptions</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it32166" onMouseOver="hilite(32166)" onMouseOut="lolite()" onClick="logVariable('markingworkflowoptions')" href="../../_variables/markingworkflowoptions.html">$markingworkflowoptions</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_marking_workflow_states_for_current_user')" href="../../_functions/get_marking_workflow_states_for_current_user.html" onMouseOver="funcPopup(event,'get_marking_workflow_states_for_current_user')">get_marking_workflow_states_for_current_user</a>());
<a name="l3699"><span class="linenum">3699</span></a>          }
<a name="l3700"><span class="linenum">3700</span></a>  
<a name="l3701"><span class="linenum">3701</span></a>  <span class="comment">        // Print options for changing the filter and changing the number of results per page.</span>
<a name="l3702"><span class="linenum">3702</span></a>          <a class="var it32167" onMouseOver="hilite(32167)" onMouseOut="lolite()" onClick="logVariable('gradingoptionsformparams')" href="../../_variables/gradingoptionsformparams.html">$gradingoptionsformparams</a> = array('cm'=&gt;<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>,
<a name="l3703"><span class="linenum">3703</span></a>                                            'contextid'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id,
<a name="l3704"><span class="linenum">3704</span></a>                                            'userid'=&gt;<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l3705"><span class="linenum">3705</span></a>                                            'submissionsenabled'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>(),
<a name="l3706"><span class="linenum">3706</span></a>                                            'showquickgrading'=&gt;<a class="var it32163" onMouseOver="hilite(32163)" onMouseOut="lolite()" onClick="logVariable('showquickgrading')" href="../../_variables/showquickgrading.html">$showquickgrading</a>,
<a name="l3707"><span class="linenum">3707</span></a>                                            'quickgrading'=&gt;<a class="var it4054" onMouseOver="hilite(4054)" onMouseOut="lolite()" onClick="logVariable('quickgrading')" href="../../_variables/quickgrading.html">$quickgrading</a>,
<a name="l3708"><span class="linenum">3708</span></a>                                            'markingworkflowopt'=&gt;<a class="var it32166" onMouseOver="hilite(32166)" onMouseOut="lolite()" onClick="logVariable('markingworkflowoptions')" href="../../_variables/markingworkflowoptions.html">$markingworkflowoptions</a>,
<a name="l3709"><span class="linenum">3709</span></a>                                            'markingallocationopt'=&gt;<a class="var it32165" onMouseOver="hilite(32165)" onMouseOut="lolite()" onClick="logVariable('markingallocationoptions')" href="../../_variables/markingallocationoptions.html">$markingallocationoptions</a>,
<a name="l3710"><span class="linenum">3710</span></a>                                            'showonlyactiveenrolopt'=&gt;<a class="var it32164" onMouseOver="hilite(32164)" onMouseOut="lolite()" onClick="logVariable('showonlyactiveenrolopt')" href="../../_variables/showonlyactiveenrolopt.html">$showonlyactiveenrolopt</a>,
<a name="l3711"><span class="linenum">3711</span></a>                                            'showonlyactiveenrol'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_only_active_users')" href="../../_functions/show_only_active_users.html" onMouseOver="funcPopup(event,'show_only_active_users')">show_only_active_users</a>());
<a name="l3712"><span class="linenum">3712</span></a>  
<a name="l3713"><span class="linenum">3713</span></a>          <a class="var it32168" onMouseOver="hilite(32168)" onMouseOut="lolite()" onClick="logVariable('classoptions')" href="../../_variables/classoptions.html">$classoptions</a> = array('class'=&gt;'gradingoptionsform');
<a name="l3714"><span class="linenum">3714</span></a>          <a class="var it32169" onMouseOver="hilite(32169)" onMouseOut="lolite()" onClick="logVariable('gradingoptionsform')" href="../../_variables/gradingoptionsform.html">$gradingoptionsform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_grading_options_form')" href="../../_classes/mod_assign_grading_options_form.html" onMouseOver="classPopup(event,'mod_assign_grading_options_form')">mod_assign_grading_options_form</a>(null,
<a name="l3715"><span class="linenum">3715</span></a>                                                                    <a class="var it32167" onMouseOver="hilite(32167)" onMouseOut="lolite()" onClick="logVariable('gradingoptionsformparams')" href="../../_variables/gradingoptionsformparams.html">$gradingoptionsformparams</a>,
<a name="l3716"><span class="linenum">3716</span></a>                                                                    'post',
<a name="l3717"><span class="linenum">3717</span></a>                                                                    '',
<a name="l3718"><span class="linenum">3718</span></a>                                                                    <a class="var it32168" onMouseOver="hilite(32168)" onMouseOut="lolite()" onClick="logVariable('classoptions')" href="../../_variables/classoptions.html">$classoptions</a>);
<a name="l3719"><span class="linenum">3719</span></a>  
<a name="l3720"><span class="linenum">3720</span></a>          <a class="var it32170" onMouseOver="hilite(32170)" onMouseOut="lolite()" onClick="logVariable('batchformparams')" href="../../_variables/batchformparams.html">$batchformparams</a> = array('cm'=&gt;<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>,
<a name="l3721"><span class="linenum">3721</span></a>                                   'submissiondrafts'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;submissiondrafts,
<a name="l3722"><span class="linenum">3722</span></a>                                   'duedate'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;duedate,
<a name="l3723"><span class="linenum">3723</span></a>                                   'attemptreopenmethod'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;attemptreopenmethod,
<a name="l3724"><span class="linenum">3724</span></a>                                   'feedbackplugins'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_plugins')" href="../../_functions/get_feedback_plugins.html" onMouseOver="funcPopup(event,'get_feedback_plugins')">get_feedback_plugins</a>(),
<a name="l3725"><span class="linenum">3725</span></a>                                   'context'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l3726"><span class="linenum">3726</span></a>                                   'markingworkflow'=&gt;<a class="var it24511" onMouseOver="hilite(24511)" onMouseOut="lolite()" onClick="logVariable('markingworkflow')" href="../../_variables/markingworkflow.html">$markingworkflow</a>,
<a name="l3727"><span class="linenum">3727</span></a>                                   'markingallocation'=&gt;<a class="var it26822" onMouseOver="hilite(26822)" onMouseOut="lolite()" onClick="logVariable('markingallocation')" href="../../_variables/markingallocation.html">$markingallocation</a>);
<a name="l3728"><span class="linenum">3728</span></a>          <a class="var it32168" onMouseOver="hilite(32168)" onMouseOut="lolite()" onClick="logVariable('classoptions')" href="../../_variables/classoptions.html">$classoptions</a> = array('class'=&gt;'gradingbatchoperationsform');
<a name="l3729"><span class="linenum">3729</span></a>  
<a name="l3730"><span class="linenum">3730</span></a>          <a class="var it32171" onMouseOver="hilite(32171)" onMouseOut="lolite()" onClick="logVariable('gradingbatchoperationsform')" href="../../_variables/gradingbatchoperationsform.html">$gradingbatchoperationsform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_grading_batch_operations_form')" href="../../_classes/mod_assign_grading_batch_operations_form.html" onMouseOver="classPopup(event,'mod_assign_grading_batch_operations_form')">mod_assign_grading_batch_operations_form</a>(null,
<a name="l3731"><span class="linenum">3731</span></a>                                                                                     <a class="var it32170" onMouseOver="hilite(32170)" onMouseOut="lolite()" onClick="logVariable('batchformparams')" href="../../_variables/batchformparams.html">$batchformparams</a>,
<a name="l3732"><span class="linenum">3732</span></a>                                                                                     'post',
<a name="l3733"><span class="linenum">3733</span></a>                                                                                     '',
<a name="l3734"><span class="linenum">3734</span></a>                                                                                     <a class="var it32168" onMouseOver="hilite(32168)" onMouseOut="lolite()" onClick="logVariable('classoptions')" href="../../_variables/classoptions.html">$classoptions</a>);
<a name="l3735"><span class="linenum">3735</span></a>  
<a name="l3736"><span class="linenum">3736</span></a>          <a class="var it32172" onMouseOver="hilite(32172)" onMouseOut="lolite()" onClick="logVariable('gradingoptionsdata')" href="../../_variables/gradingoptionsdata.html">$gradingoptionsdata</a> = new stdClass();
<a name="l3737"><span class="linenum">3737</span></a>          <a class="var it32172" onMouseOver="hilite(32172)" onMouseOut="lolite()" onClick="logVariable('gradingoptionsdata')" href="../../_variables/gradingoptionsdata.html">$gradingoptionsdata</a>-&gt;<a onClick="logVariable('perpage')" class="var it45742" onMouseOver="hilite(45742)" onMouseOut="lolite()" href="../../_variables/perpage.html">perpage</a> = <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>;
<a name="l3738"><span class="linenum">3738</span></a>          <a class="var it32172" onMouseOver="hilite(32172)" onMouseOut="lolite()" onClick="logVariable('gradingoptionsdata')" href="../../_variables/gradingoptionsdata.html">$gradingoptionsdata</a>-&gt;<a onClick="logVariable('filter')" class="var it45742" onMouseOver="hilite(45742)" onMouseOut="lolite()" href="../../_variables/filter.html">filter</a> = <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../../_variables/filter.html">$filter</a>;
<a name="l3739"><span class="linenum">3739</span></a>          <a class="var it32172" onMouseOver="hilite(32172)" onMouseOut="lolite()" onClick="logVariable('gradingoptionsdata')" href="../../_variables/gradingoptionsdata.html">$gradingoptionsdata</a>-&gt;<a onClick="logVariable('markerfilter')" class="var it45742" onMouseOver="hilite(45742)" onMouseOut="lolite()" href="../../_variables/markerfilter.html">markerfilter</a> = <a class="var it30986" onMouseOver="hilite(30986)" onMouseOut="lolite()" onClick="logVariable('markerfilter')" href="../../_variables/markerfilter.html">$markerfilter</a>;
<a name="l3740"><span class="linenum">3740</span></a>          <a class="var it32172" onMouseOver="hilite(32172)" onMouseOut="lolite()" onClick="logVariable('gradingoptionsdata')" href="../../_variables/gradingoptionsdata.html">$gradingoptionsdata</a>-&gt;<a onClick="logVariable('workflowfilter')" class="var it45742" onMouseOver="hilite(45742)" onMouseOut="lolite()" href="../../_variables/workflowfilter.html">workflowfilter</a> = <a class="var it21979" onMouseOver="hilite(21979)" onMouseOut="lolite()" onClick="logVariable('workflowfilter')" href="../../_variables/workflowfilter.html">$workflowfilter</a>;
<a name="l3741"><span class="linenum">3741</span></a>          <a class="var it32169" onMouseOver="hilite(32169)" onMouseOut="lolite()" onClick="logVariable('gradingoptionsform')" href="../../_variables/gradingoptionsform.html">$gradingoptionsform</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="../../_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it32172" onMouseOver="hilite(32172)" onMouseOut="lolite()" onClick="logVariable('gradingoptionsdata')" href="../../_variables/gradingoptionsdata.html">$gradingoptionsdata</a>);
<a name="l3742"><span class="linenum">3742</span></a>  
<a name="l3743"><span class="linenum">3743</span></a>          <a class="var it32173" onMouseOver="hilite(32173)" onMouseOut="lolite()" onClick="logVariable('actionformtext')" href="../../_variables/actionformtext.html">$actionformtext</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it32162" onMouseOver="hilite(32162)" onMouseOut="lolite()" onClick="logVariable('gradingactions')" href="../../_variables/gradingactions.html">$gradingactions</a>);
<a name="l3744"><span class="linenum">3744</span></a>          <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(),
<a name="l3745"><span class="linenum">3745</span></a>                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l3746"><span class="linenum">3746</span></a>                                      false,
<a name="l3747"><span class="linenum">3747</span></a>                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l3748"><span class="linenum">3748</span></a>                                      <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grading', 'assign'),
<a name="l3749"><span class="linenum">3749</span></a>                                      <a class="var it32173" onMouseOver="hilite(32173)" onMouseOut="lolite()" onClick="logVariable('actionformtext')" href="../../_variables/actionformtext.html">$actionformtext</a>);
<a name="l3750"><span class="linenum">3750</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a>);
<a name="l3751"><span class="linenum">3751</span></a>  
<a name="l3752"><span class="linenum">3752</span></a>          <a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../../_variables/currenturl.html">$currenturl</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> .
<a name="l3753"><span class="linenum">3753</span></a>                        '/mod/assign/view.php?id=' .
<a name="l3754"><span class="linenum">3754</span></a>                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id .
<a name="l3755"><span class="linenum">3755</span></a>                        '&amp;action=grading';
<a name="l3756"><span class="linenum">3756</span></a>  
<a name="l3757"><span class="linenum">3757</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="function" onClick="logFunction('groups_print_activity_menu')" href="../../_functions/groups_print_activity_menu.html" onMouseOver="funcPopup(event,'groups_print_activity_menu')">groups_print_activity_menu</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), <a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../../_variables/currenturl.html">$currenturl</a>, true);
<a name="l3758"><span class="linenum">3758</span></a>  
<a name="l3759"><span class="linenum">3759</span></a>  <span class="comment">        // Plagiarism update status apearring in the grading book.</span>
<a name="l3760"><span class="linenum">3760</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableplagiarism')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/enableplagiarism.html">enableplagiarism</a>)) {
<a name="l3761"><span class="linenum">3761</span></a>              require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/plagiarismlib.php');
<a name="l3762"><span class="linenum">3762</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="function" onClick="logFunction('plagiarism_update_status')" href="../../_functions/plagiarism_update_status.html" onMouseOver="funcPopup(event,'plagiarism_update_status')">plagiarism_update_status</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>());
<a name="l3763"><span class="linenum">3763</span></a>          }
<a name="l3764"><span class="linenum">3764</span></a>  
<a name="l3765"><span class="linenum">3765</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>() &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:viewblinddetails', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>())) {
<a name="l3766"><span class="linenum">3766</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('blindmarkingenabledwarning', 'assign'), 'notifymessage');
<a name="l3767"><span class="linenum">3767</span></a>          }
<a name="l3768"><span class="linenum">3768</span></a>  
<a name="l3769"><span class="linenum">3769</span></a>  <span class="comment">        // Load and print the table of submissions.</span>
<a name="l3770"><span class="linenum">3770</span></a>          if (<a class="var it32163" onMouseOver="hilite(32163)" onMouseOut="lolite()" onClick="logVariable('showquickgrading')" href="../../_variables/showquickgrading.html">$showquickgrading</a> &amp;&amp; <a class="var it4054" onMouseOver="hilite(4054)" onMouseOut="lolite()" onClick="logVariable('quickgrading')" href="../../_variables/quickgrading.html">$quickgrading</a>) {
<a name="l3771"><span class="linenum">3771</span></a>              <a class="var it25292" onMouseOver="hilite(25292)" onMouseOut="lolite()" onClick="logVariable('gradingtable')" href="../../_variables/gradingtable.html">$gradingtable</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_grading_table')" href="../../_classes/assign_grading_table.html" onMouseOver="classPopup(event,'assign_grading_table')">assign_grading_table</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>, <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../../_variables/filter.html">$filter</a>, 0, true);
<a name="l3772"><span class="linenum">3772</span></a>              <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it25292" onMouseOver="hilite(25292)" onMouseOut="lolite()" onClick="logVariable('gradingtable')" href="../../_variables/gradingtable.html">$gradingtable</a>);
<a name="l3773"><span class="linenum">3773</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('page', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l3774"><span class="linenum">3774</span></a>              <a class="var it32174" onMouseOver="hilite(32174)" onMouseOut="lolite()" onClick="logVariable('quickformparams')" href="../../_variables/quickformparams.html">$quickformparams</a> = array('cm'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l3775"><span class="linenum">3775</span></a>                                       'gradingtable'=&gt;<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>,
<a name="l3776"><span class="linenum">3776</span></a>                                       'sendstudentnotifications' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;sendstudentnotifications,
<a name="l3777"><span class="linenum">3777</span></a>                                       'page' =&gt; <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>);
<a name="l3778"><span class="linenum">3778</span></a>              <a class="var it32175" onMouseOver="hilite(32175)" onMouseOut="lolite()" onClick="logVariable('quickgradingform')" href="../../_variables/quickgradingform.html">$quickgradingform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_quick_grading_form')" href="../../_classes/mod_assign_quick_grading_form.html" onMouseOver="classPopup(event,'mod_assign_quick_grading_form')">mod_assign_quick_grading_form</a>(null, <a class="var it32174" onMouseOver="hilite(32174)" onMouseOut="lolite()" onClick="logVariable('quickformparams')" href="../../_variables/quickformparams.html">$quickformparams</a>);
<a name="l3779"><span class="linenum">3779</span></a>  
<a name="l3780"><span class="linenum">3780</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_form')" href="../../_classes/assign_form.html" onMouseOver="classPopup(event,'assign_form')">assign_form</a>('quickgradingform', <a class="var it32175" onMouseOver="hilite(32175)" onMouseOut="lolite()" onClick="logVariable('quickgradingform')" href="../../_variables/quickgradingform.html">$quickgradingform</a>));
<a name="l3781"><span class="linenum">3781</span></a>          } else {
<a name="l3782"><span class="linenum">3782</span></a>              <a class="var it25292" onMouseOver="hilite(25292)" onMouseOut="lolite()" onClick="logVariable('gradingtable')" href="../../_variables/gradingtable.html">$gradingtable</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_grading_table')" href="../../_classes/assign_grading_table.html" onMouseOver="classPopup(event,'assign_grading_table')">assign_grading_table</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>, <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../../_variables/filter.html">$filter</a>, 0, false);
<a name="l3783"><span class="linenum">3783</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it25292" onMouseOver="hilite(25292)" onMouseOut="lolite()" onClick="logVariable('gradingtable')" href="../../_variables/gradingtable.html">$gradingtable</a>);
<a name="l3784"><span class="linenum">3784</span></a>          }
<a name="l3785"><span class="linenum">3785</span></a>  
<a name="l3786"><span class="linenum">3786</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_grade')" href="../../_functions/can_grade.html" onMouseOver="funcPopup(event,'can_grade')">can_grade</a>()) {
<a name="l3787"><span class="linenum">3787</span></a>  <span class="comment">            // We need to store the order of uses in the table as the person may wish to grade them.</span>
<a name="l3788"><span class="linenum">3788</span></a>  <span class="comment">            // This is done based on the row number of the user.</span>
<a name="l3789"><span class="linenum">3789</span></a>              <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> = <a class="var it25292" onMouseOver="hilite(25292)" onMouseOut="lolite()" onClick="logVariable('gradingtable')" href="../../_variables/gradingtable.html">$gradingtable</a>-&gt;<a class="function" onClick="logFunction('get_column_data')" href="../../_functions/get_column_data.html" onMouseOver="funcPopup(event,'get_column_data')">get_column_data</a>('userid');
<a name="l3790"><span class="linenum">3790</span></a>              <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('mod_assign_useridlist')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/mod_assign_useridlist.html">mod_assign_useridlist</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_useridlist_key')" href="../../_functions/get_useridlist_key.html" onMouseOver="funcPopup(event,'get_useridlist_key')">get_useridlist_key</a>()] = <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a>;
<a name="l3791"><span class="linenum">3791</span></a>          }
<a name="l3792"><span class="linenum">3792</span></a>  
<a name="l3793"><span class="linenum">3793</span></a>          <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), true);
<a name="l3794"><span class="linenum">3794</span></a>          <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('list_participants')" href="../../_functions/list_participants.html" onMouseOver="funcPopup(event,'list_participants')">list_participants</a>(<a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, true));
<a name="l3795"><span class="linenum">3795</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>) != 0 &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_grade')" href="../../_functions/can_grade.html" onMouseOver="funcPopup(event,'can_grade')">can_grade</a>()) {
<a name="l3796"><span class="linenum">3796</span></a>  <span class="comment">            // If no enrolled user in a course then don't display the batch operations feature.</span>
<a name="l3797"><span class="linenum">3797</span></a>              <a class="var it32176" onMouseOver="hilite(32176)" onMouseOut="lolite()" onClick="logVariable('assignform')" href="../../_variables/assignform.html">$assignform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_form')" href="../../_classes/assign_form.html" onMouseOver="classPopup(event,'assign_form')">assign_form</a>('gradingbatchoperationsform', <a class="var it32171" onMouseOver="hilite(32171)" onMouseOut="lolite()" onClick="logVariable('gradingbatchoperationsform')" href="../../_variables/gradingbatchoperationsform.html">$gradingbatchoperationsform</a>);
<a name="l3798"><span class="linenum">3798</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it32176" onMouseOver="hilite(32176)" onMouseOut="lolite()" onClick="logVariable('assignform')" href="../../_variables/assignform.html">$assignform</a>);
<a name="l3799"><span class="linenum">3799</span></a>          }
<a name="l3800"><span class="linenum">3800</span></a>          <a class="var it32176" onMouseOver="hilite(32176)" onMouseOut="lolite()" onClick="logVariable('assignform')" href="../../_variables/assignform.html">$assignform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_form')" href="../../_classes/assign_form.html" onMouseOver="classPopup(event,'assign_form')">assign_form</a>('gradingoptionsform',
<a name="l3801"><span class="linenum">3801</span></a>                                        <a class="var it32169" onMouseOver="hilite(32169)" onMouseOut="lolite()" onClick="logVariable('gradingoptionsform')" href="../../_variables/gradingoptionsform.html">$gradingoptionsform</a>,
<a name="l3802"><span class="linenum">3802</span></a>                                        'M.mod_assign.init_grading_options');
<a name="l3803"><span class="linenum">3803</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it32176" onMouseOver="hilite(32176)" onMouseOut="lolite()" onClick="logVariable('assignform')" href="../../_variables/assignform.html">$assignform</a>);
<a name="l3804"><span class="linenum">3804</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l3805"><span class="linenum">3805</span></a>      }
<a name="l3806"><span class="linenum">3806</span></a>  
<a name="l3807"><span class="linenum">3807</span></a>      <span class="comment">/**</span>
<a name="l3808"><span class="linenum">3808</span></a>  <span class="comment">     * View entire grader app.</span>
<a name="l3809"><span class="linenum">3809</span></a>  <span class="comment">     *</span>
<a name="l3810"><span class="linenum">3810</span></a>  <span class="comment">     * @return string</span>
<a name="l3811"><span class="linenum">3811</span></a>  <span class="comment">     */</span>
<a name="l3812"><span class="linenum">3812</span></a>      protected function <a class="function" onClick="logFunction('view_grader')" href="../../_functions/view_grader.html" onMouseOver="funcPopup(event,'view_grader')">view_grader</a>() {
<a name="l3813"><span class="linenum">3813</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l3814"><span class="linenum">3814</span></a>  
<a name="l3815"><span class="linenum">3815</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l3816"><span class="linenum">3816</span></a>  <span class="comment">        // Need submit permission to submit an assignment.</span>
<a name="l3817"><span class="linenum">3817</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('require_view_grades')" href="../../_functions/require_view_grades.html" onMouseOver="funcPopup(event,'require_view_grades')">require_view_grades</a>();
<a name="l3818"><span class="linenum">3818</span></a>  
<a name="l3819"><span class="linenum">3819</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('embedded');
<a name="l3820"><span class="linenum">3820</span></a>  
<a name="l3821"><span class="linenum">3821</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;<a class="function" onClick="logFunction('get_context_name')" href="../../_functions/get_context_name.html" onMouseOver="funcPopup(event,'get_context_name')">get_context_name</a>());
<a name="l3822"><span class="linenum">3822</span></a>  
<a name="l3823"><span class="linenum">3823</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l3824"><span class="linenum">3824</span></a>  
<a name="l3825"><span class="linenum">3825</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('userid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l3826"><span class="linenum">3826</span></a>          <a class="var it32177" onMouseOver="hilite(32177)" onMouseOut="lolite()" onClick="logVariable('blindid')" href="../../_variables/blindid.html">$blindid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('blindid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l3827"><span class="linenum">3827</span></a>  
<a name="l3828"><span class="linenum">3828</span></a>          if (!<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> &amp;&amp; <a class="var it32177" onMouseOver="hilite(32177)" onMouseOut="lolite()" onClick="logVariable('blindid')" href="../../_variables/blindid.html">$blindid</a>) {
<a name="l3829"><span class="linenum">3829</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_id_for_uniqueid')" href="../../_functions/get_user_id_for_uniqueid.html" onMouseOver="funcPopup(event,'get_user_id_for_uniqueid')">get_user_id_for_uniqueid</a>(<a class="var it32177" onMouseOver="hilite(32177)" onMouseOut="lolite()" onClick="logVariable('blindid')" href="../../_variables/blindid.html">$blindid</a>);
<a name="l3830"><span class="linenum">3830</span></a>          }
<a name="l3831"><span class="linenum">3831</span></a>  
<a name="l3832"><span class="linenum">3832</span></a>          <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), true);
<a name="l3833"><span class="linenum">3833</span></a>          <a class="var it32178" onMouseOver="hilite(32178)" onMouseOut="lolite()" onClick="logVariable('framegrader')" href="../../_variables/framegrader.html">$framegrader</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grading_app')" href="../../_classes/grading_app.html" onMouseOver="classPopup(event,'grading_app')">grading_app</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>);
<a name="l3834"><span class="linenum">3834</span></a>  
<a name="l3835"><span class="linenum">3835</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it32178" onMouseOver="hilite(32178)" onMouseOut="lolite()" onClick="logVariable('framegrader')" href="../../_variables/framegrader.html">$framegrader</a>);
<a name="l3836"><span class="linenum">3836</span></a>  
<a name="l3837"><span class="linenum">3837</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l3838"><span class="linenum">3838</span></a>  
<a name="l3839"><span class="linenum">3839</span></a>          \mod_assign\event\<a class="class" onClick="logClass('grading_table_viewed')" href="../../_classes/grading_table_viewed.html" onMouseOver="classPopup(event,'grading_table_viewed')">grading_table_viewed</a>::<a class="function" onClick="logFunction('create_from_assign')" href="../../_functions/create_from_assign.html" onMouseOver="funcPopup(event,'create_from_assign')">create_from_assign</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l3840"><span class="linenum">3840</span></a>  
<a name="l3841"><span class="linenum">3841</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l3842"><span class="linenum">3842</span></a>      }
<a name="l3843"><span class="linenum">3843</span></a>      <span class="comment">/**</span>
<a name="l3844"><span class="linenum">3844</span></a>  <span class="comment">     * View entire grading page.</span>
<a name="l3845"><span class="linenum">3845</span></a>  <span class="comment">     *</span>
<a name="l3846"><span class="linenum">3846</span></a>  <span class="comment">     * @return string</span>
<a name="l3847"><span class="linenum">3847</span></a>  <span class="comment">     */</span>
<a name="l3848"><span class="linenum">3848</span></a>      protected function <a class="function" onClick="logFunction('view_grading_page')" href="../../_functions/view_grading_page.html" onMouseOver="funcPopup(event,'view_grading_page')">view_grading_page</a>() {
<a name="l3849"><span class="linenum">3849</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l3850"><span class="linenum">3850</span></a>  
<a name="l3851"><span class="linenum">3851</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l3852"><span class="linenum">3852</span></a>  <span class="comment">        // Need submit permission to submit an assignment.</span>
<a name="l3853"><span class="linenum">3853</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('require_view_grades')" href="../../_functions/require_view_grades.html" onMouseOver="funcPopup(event,'require_view_grades')">require_view_grades</a>();
<a name="l3854"><span class="linenum">3854</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/gradeform.php.html">/mod/assign/gradeform.php</a>');
<a name="l3855"><span class="linenum">3855</span></a>  
<a name="l3856"><span class="linenum">3856</span></a>  <span class="comment">        // Only load this if it is.</span>
<a name="l3857"><span class="linenum">3857</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_grading_table')" href="../../_functions/view_grading_table.html" onMouseOver="funcPopup(event,'view_grading_table')">view_grading_table</a>();
<a name="l3858"><span class="linenum">3858</span></a>  
<a name="l3859"><span class="linenum">3859</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l3860"><span class="linenum">3860</span></a>  
<a name="l3861"><span class="linenum">3861</span></a>          \mod_assign\event\<a class="class" onClick="logClass('grading_table_viewed')" href="../../_classes/grading_table_viewed.html" onMouseOver="classPopup(event,'grading_table_viewed')">grading_table_viewed</a>::<a class="function" onClick="logFunction('create_from_assign')" href="../../_functions/create_from_assign.html" onMouseOver="funcPopup(event,'create_from_assign')">create_from_assign</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l3862"><span class="linenum">3862</span></a>  
<a name="l3863"><span class="linenum">3863</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l3864"><span class="linenum">3864</span></a>      }
<a name="l3865"><span class="linenum">3865</span></a>  
<a name="l3866"><span class="linenum">3866</span></a>      <span class="comment">/**</span>
<a name="l3867"><span class="linenum">3867</span></a>  <span class="comment">     * Capture the output of the plagiarism plugins disclosures and return it as a string.</span>
<a name="l3868"><span class="linenum">3868</span></a>  <span class="comment">     *</span>
<a name="l3869"><span class="linenum">3869</span></a>  <span class="comment">     * @return string</span>
<a name="l3870"><span class="linenum">3870</span></a>  <span class="comment">     */</span>
<a name="l3871"><span class="linenum">3871</span></a>      protected function <a class="function" onClick="logFunction('plagiarism_print_disclosure')" href="../../_functions/plagiarism_print_disclosure.html" onMouseOver="funcPopup(event,'plagiarism_print_disclosure')">plagiarism_print_disclosure</a>() {
<a name="l3872"><span class="linenum">3872</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l3873"><span class="linenum">3873</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l3874"><span class="linenum">3874</span></a>  
<a name="l3875"><span class="linenum">3875</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableplagiarism')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/enableplagiarism.html">enableplagiarism</a>)) {
<a name="l3876"><span class="linenum">3876</span></a>              require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/plagiarismlib.php');
<a name="l3877"><span class="linenum">3877</span></a>  
<a name="l3878"><span class="linenum">3878</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="function" onClick="logFunction('plagiarism_print_disclosure')" href="../../_functions/plagiarism_print_disclosure.html" onMouseOver="funcPopup(event,'plagiarism_print_disclosure')">plagiarism_print_disclosure</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id);
<a name="l3879"><span class="linenum">3879</span></a>          }
<a name="l3880"><span class="linenum">3880</span></a>  
<a name="l3881"><span class="linenum">3881</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l3882"><span class="linenum">3882</span></a>      }
<a name="l3883"><span class="linenum">3883</span></a>  
<a name="l3884"><span class="linenum">3884</span></a>      <span class="comment">/**</span>
<a name="l3885"><span class="linenum">3885</span></a>  <span class="comment">     * Message for students when assignment submissions have been closed.</span>
<a name="l3886"><span class="linenum">3886</span></a>  <span class="comment">     *</span>
<a name="l3887"><span class="linenum">3887</span></a>  <span class="comment">     * @param string $title The page title</span>
<a name="l3888"><span class="linenum">3888</span></a>  <span class="comment">     * @param array $notices The array of notices to show.</span>
<a name="l3889"><span class="linenum">3889</span></a>  <span class="comment">     * @return string</span>
<a name="l3890"><span class="linenum">3890</span></a>  <span class="comment">     */</span>
<a name="l3891"><span class="linenum">3891</span></a>      protected function <a class="function" onClick="logFunction('view_notices')" href="../../_functions/view_notices.html" onMouseOver="funcPopup(event,'view_notices')">view_notices</a>(<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>, <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>) {
<a name="l3892"><span class="linenum">3892</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l3893"><span class="linenum">3893</span></a>  
<a name="l3894"><span class="linenum">3894</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l3895"><span class="linenum">3895</span></a>  
<a name="l3896"><span class="linenum">3896</span></a>          <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(),
<a name="l3897"><span class="linenum">3897</span></a>                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l3898"><span class="linenum">3898</span></a>                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_intro')" href="../../_functions/show_intro.html" onMouseOver="funcPopup(event,'show_intro')">show_intro</a>(),
<a name="l3899"><span class="linenum">3899</span></a>                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l3900"><span class="linenum">3900</span></a>                                      <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>);
<a name="l3901"><span class="linenum">3901</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a>);
<a name="l3902"><span class="linenum">3902</span></a>  
<a name="l3903"><span class="linenum">3903</span></a>          foreach (<a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a> as <a class="var it2710" onMouseOver="hilite(2710)" onMouseOut="lolite()" onClick="logVariable('notice')" href="../../_variables/notice.html">$notice</a>) {
<a name="l3904"><span class="linenum">3904</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it2710" onMouseOver="hilite(2710)" onMouseOut="lolite()" onClick="logVariable('notice')" href="../../_variables/notice.html">$notice</a>);
<a name="l3905"><span class="linenum">3905</span></a>          }
<a name="l3906"><span class="linenum">3906</span></a>  
<a name="l3907"><span class="linenum">3907</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/assign/view.php.html">/mod/assign/view.php</a>', array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id, 'action'=&gt;'view'));
<a name="l3908"><span class="linenum">3908</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('continue_button')" href="../../_functions/continue_button.html" onMouseOver="funcPopup(event,'continue_button')">continue_button</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>);
<a name="l3909"><span class="linenum">3909</span></a>  
<a name="l3910"><span class="linenum">3910</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l3911"><span class="linenum">3911</span></a>  
<a name="l3912"><span class="linenum">3912</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l3913"><span class="linenum">3913</span></a>      }
<a name="l3914"><span class="linenum">3914</span></a>  
<a name="l3915"><span class="linenum">3915</span></a>      <span class="comment">/**</span>
<a name="l3916"><span class="linenum">3916</span></a>  <span class="comment">     * Get the name for a user - hiding their real name if blind marking is on.</span>
<a name="l3917"><span class="linenum">3917</span></a>  <span class="comment">     *</span>
<a name="l3918"><span class="linenum">3918</span></a>  <span class="comment">     * @param stdClass $user The user record as required by fullname()</span>
<a name="l3919"><span class="linenum">3919</span></a>  <span class="comment">     * @return string The name.</span>
<a name="l3920"><span class="linenum">3920</span></a>  <span class="comment">     */</span>
<a name="l3921"><span class="linenum">3921</span></a>      public function <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l3922"><span class="linenum">3922</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>()) {
<a name="l3923"><span class="linenum">3923</span></a>              <a class="var it30983" onMouseOver="hilite(30983)" onMouseOut="lolite()" onClick="logVariable('hasviewblind')" href="../../_variables/hasviewblind.html">$hasviewblind</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:viewblinddetails', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l3924"><span class="linenum">3924</span></a>              <a class="var it4593" onMouseOver="hilite(4593)" onMouseOut="lolite()" onClick="logVariable('uniqueid')" href="../../_variables/uniqueid.html">$uniqueid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_uniqueid_for_user')" href="../../_functions/get_uniqueid_for_user.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user')">get_uniqueid_for_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l3925"><span class="linenum">3925</span></a>              if (<a class="var it30983" onMouseOver="hilite(30983)" onMouseOut="lolite()" onClick="logVariable('hasviewblind')" href="../../_variables/hasviewblind.html">$hasviewblind</a>) {
<a name="l3926"><span class="linenum">3926</span></a>                  return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('participant', 'assign') . ' ' . <a class="var it4593" onMouseOver="hilite(4593)" onMouseOut="lolite()" onClick="logVariable('uniqueid')" href="../../_variables/uniqueid.html">$uniqueid</a> . ' (' . <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) . ')';
<a name="l3927"><span class="linenum">3927</span></a>              } else {
<a name="l3928"><span class="linenum">3928</span></a>                  return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('participant', 'assign') . ' ' . <a class="var it4593" onMouseOver="hilite(4593)" onMouseOut="lolite()" onClick="logVariable('uniqueid')" href="../../_variables/uniqueid.html">$uniqueid</a>;
<a name="l3929"><span class="linenum">3929</span></a>              }
<a name="l3930"><span class="linenum">3930</span></a>          } else {
<a name="l3931"><span class="linenum">3931</span></a>              return <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l3932"><span class="linenum">3932</span></a>          }
<a name="l3933"><span class="linenum">3933</span></a>      }
<a name="l3934"><span class="linenum">3934</span></a>  
<a name="l3935"><span class="linenum">3935</span></a>      <span class="comment">/**</span>
<a name="l3936"><span class="linenum">3936</span></a>  <span class="comment">     * View edit submissions page.</span>
<a name="l3937"><span class="linenum">3937</span></a>  <span class="comment">     *</span>
<a name="l3938"><span class="linenum">3938</span></a>  <span class="comment">     * @param moodleform $mform</span>
<a name="l3939"><span class="linenum">3939</span></a>  <span class="comment">     * @param array $notices A list of notices to display at the top of the</span>
<a name="l3940"><span class="linenum">3940</span></a>  <span class="comment">     *                       edit submission form (e.g. from plugins).</span>
<a name="l3941"><span class="linenum">3941</span></a>  <span class="comment">     * @return string The page output.</span>
<a name="l3942"><span class="linenum">3942</span></a>  <span class="comment">     */</span>
<a name="l3943"><span class="linenum">3943</span></a>      protected function <a class="function" onClick="logFunction('view_edit_submission_page')" href="../../_functions/view_edit_submission_page.html" onMouseOver="funcPopup(event,'view_edit_submission_page')">view_edit_submission_page</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>) {
<a name="l3944"><span class="linenum">3944</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3945"><span class="linenum">3945</span></a>  
<a name="l3946"><span class="linenum">3946</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l3947"><span class="linenum">3947</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/submission_form.php.html">/mod/assign/submission_form.php</a>');
<a name="l3948"><span class="linenum">3948</span></a>  <span class="comment">        // Need submit permission to submit an assignment.</span>
<a name="l3949"><span class="linenum">3949</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('userid', <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l3950"><span class="linenum">3950</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l3951"><span class="linenum">3951</span></a>  
<a name="l3952"><span class="linenum">3952</span></a>  <span class="comment">        // This variation on the url will link direct to this student.</span>
<a name="l3953"><span class="linenum">3953</span></a>  <span class="comment">        // The benefit is the url will be the same every time for this student, so Atto autosave drafts can match up.</span>
<a name="l3954"><span class="linenum">3954</span></a>          <a class="var it25221" onMouseOver="hilite(25221)" onMouseOut="lolite()" onClick="logVariable('returnparams')" href="../../_variables/returnparams.html">$returnparams</a> = array('userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 'rownum' =&gt; 0, 'useridlistid' =&gt; 0);
<a name="l3955"><span class="linenum">3955</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('register_return_link')" href="../../_functions/register_return_link.html" onMouseOver="funcPopup(event,'register_return_link')">register_return_link</a>('editsubmission', <a class="var it25221" onMouseOver="hilite(25221)" onMouseOut="lolite()" onClick="logVariable('returnparams')" href="../../_variables/returnparams.html">$returnparams</a>);
<a name="l3956"><span class="linenum">3956</span></a>  
<a name="l3957"><span class="linenum">3957</span></a>          if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l3958"><span class="linenum">3958</span></a>              if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_edit_submission')" href="../../_functions/can_edit_submission.html" onMouseOver="funcPopup(event,'can_edit_submission')">can_edit_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l3959"><span class="linenum">3959</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('nopermission');
<a name="l3960"><span class="linenum">3960</span></a>              }
<a name="l3961"><span class="linenum">3961</span></a>  <span class="comment">            // User is editing their own submission.</span>
<a name="l3962"><span class="linenum">3962</span></a>              <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:submit', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l3963"><span class="linenum">3963</span></a>              <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editsubmission', 'assign');
<a name="l3964"><span class="linenum">3964</span></a>          } else {
<a name="l3965"><span class="linenum">3965</span></a>  <span class="comment">            // User is editing another user's submission.</span>
<a name="l3966"><span class="linenum">3966</span></a>              if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_edit_submission')" href="../../_functions/can_edit_submission.html" onMouseOver="funcPopup(event,'can_edit_submission')">can_edit_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l3967"><span class="linenum">3967</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('nopermission');
<a name="l3968"><span class="linenum">3968</span></a>              }
<a name="l3969"><span class="linenum">3969</span></a>  
<a name="l3970"><span class="linenum">3970</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l3971"><span class="linenum">3971</span></a>              <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editsubmissionother', 'assign', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l3972"><span class="linenum">3972</span></a>          }
<a name="l3973"><span class="linenum">3973</span></a>  
<a name="l3974"><span class="linenum">3974</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submissions_open')" href="../../_functions/submissions_open.html" onMouseOver="funcPopup(event,'submissions_open')">submissions_open</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l3975"><span class="linenum">3975</span></a>              <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a> = array(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionsclosed', 'assign'));
<a name="l3976"><span class="linenum">3976</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_notices')" href="../../_functions/view_notices.html" onMouseOver="funcPopup(event,'view_notices')">view_notices</a>(<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>, <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>);
<a name="l3977"><span class="linenum">3977</span></a>          }
<a name="l3978"><span class="linenum">3978</span></a>  
<a name="l3979"><span class="linenum">3979</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(),
<a name="l3980"><span class="linenum">3980</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l3981"><span class="linenum">3981</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_intro')" href="../../_functions/show_intro.html" onMouseOver="funcPopup(event,'show_intro')">show_intro</a>(),
<a name="l3982"><span class="linenum">3982</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l3983"><span class="linenum">3983</span></a>                                                        <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>));
<a name="l3984"><span class="linenum">3984</span></a>          if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l3985"><span class="linenum">3985</span></a>  <span class="comment">            // We only show this if it their submission.</span>
<a name="l3986"><span class="linenum">3986</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('plagiarism_print_disclosure')" href="../../_functions/plagiarism_print_disclosure.html" onMouseOver="funcPopup(event,'plagiarism_print_disclosure')">plagiarism_print_disclosure</a>();
<a name="l3987"><span class="linenum">3987</span></a>          }
<a name="l3988"><span class="linenum">3988</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l3989"><span class="linenum">3989</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l3990"><span class="linenum">3990</span></a>          if (!<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l3991"><span class="linenum">3991</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_submission_form')" href="../../_classes/mod_assign_submission_form.html" onMouseOver="classPopup(event,'mod_assign_submission_form')">mod_assign_submission_form</a>(null, array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>));
<a name="l3992"><span class="linenum">3992</span></a>          }
<a name="l3993"><span class="linenum">3993</span></a>  
<a name="l3994"><span class="linenum">3994</span></a>          foreach (<a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a> as <a class="var it2710" onMouseOver="hilite(2710)" onMouseOut="lolite()" onClick="logVariable('notice')" href="../../_variables/notice.html">$notice</a>) {
<a name="l3995"><span class="linenum">3995</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('notification')" href="../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="var it2710" onMouseOver="hilite(2710)" onMouseOut="lolite()" onClick="logVariable('notice')" href="../../_variables/notice.html">$notice</a>);
<a name="l3996"><span class="linenum">3996</span></a>          }
<a name="l3997"><span class="linenum">3997</span></a>  
<a name="l3998"><span class="linenum">3998</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_form')" href="../../_classes/assign_form.html" onMouseOver="classPopup(event,'assign_form')">assign_form</a>('editsubmissionform', <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>));
<a name="l3999"><span class="linenum">3999</span></a>  
<a name="l4000"><span class="linenum">4000</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l4001"><span class="linenum">4001</span></a>  
<a name="l4002"><span class="linenum">4002</span></a>          \mod_assign\event\<a class="class" onClick="logClass('submission_form_viewed')" href="../../_classes/submission_form_viewed.html" onMouseOver="classPopup(event,'submission_form_viewed')">submission_form_viewed</a>::<a class="function" onClick="logFunction('create_from_user')" href="../../_functions/create_from_user.html" onMouseOver="funcPopup(event,'create_from_user')">create_from_user</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l4003"><span class="linenum">4003</span></a>  
<a name="l4004"><span class="linenum">4004</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l4005"><span class="linenum">4005</span></a>      }
<a name="l4006"><span class="linenum">4006</span></a>  
<a name="l4007"><span class="linenum">4007</span></a>      <span class="comment">/**</span>
<a name="l4008"><span class="linenum">4008</span></a>  <span class="comment">     * See if this assignment has a grade yet.</span>
<a name="l4009"><span class="linenum">4009</span></a>  <span class="comment">     *</span>
<a name="l4010"><span class="linenum">4010</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l4011"><span class="linenum">4011</span></a>  <span class="comment">     * @return bool</span>
<a name="l4012"><span class="linenum">4012</span></a>  <span class="comment">     */</span>
<a name="l4013"><span class="linenum">4013</span></a>      protected function <a class="function" onClick="logFunction('is_graded')" href="../../_functions/is_graded.html" onMouseOver="funcPopup(event,'is_graded')">is_graded</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l4014"><span class="linenum">4014</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l4015"><span class="linenum">4015</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l4016"><span class="linenum">4016</span></a>              return (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> !== null &amp;&amp; <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> &gt;= 0);
<a name="l4017"><span class="linenum">4017</span></a>          }
<a name="l4018"><span class="linenum">4018</span></a>          return false;
<a name="l4019"><span class="linenum">4019</span></a>      }
<a name="l4020"><span class="linenum">4020</span></a>  
<a name="l4021"><span class="linenum">4021</span></a>      <span class="comment">/**</span>
<a name="l4022"><span class="linenum">4022</span></a>  <span class="comment">     * Perform an access check to see if the current $USER can view this group submission.</span>
<a name="l4023"><span class="linenum">4023</span></a>  <span class="comment">     *</span>
<a name="l4024"><span class="linenum">4024</span></a>  <span class="comment">     * @param int $groupid</span>
<a name="l4025"><span class="linenum">4025</span></a>  <span class="comment">     * @return bool</span>
<a name="l4026"><span class="linenum">4026</span></a>  <span class="comment">     */</span>
<a name="l4027"><span class="linenum">4027</span></a>      public function <a class="function" onClick="logFunction('can_view_group_submission')" href="../../_functions/can_view_group_submission.html" onMouseOver="funcPopup(event,'can_view_group_submission')">can_view_group_submission</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) {
<a name="l4028"><span class="linenum">4028</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l4029"><span class="linenum">4029</span></a>  
<a name="l4030"><span class="linenum">4030</span></a>          <a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group_members')" href="../../_functions/get_submission_group_members.html" onMouseOver="funcPopup(event,'get_submission_group_members')">get_submission_group_members</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, true);
<a name="l4031"><span class="linenum">4031</span></a>          foreach (<a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a> as <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>) {
<a name="l4032"><span class="linenum">4032</span></a>  <span class="comment">            // If we can view any members submission, we can view the submission for the group.</span>
<a name="l4033"><span class="linenum">4033</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_view_submission')" href="../../_functions/can_view_submission.html" onMouseOver="funcPopup(event,'can_view_submission')">can_view_submission</a>(<a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('id')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l4034"><span class="linenum">4034</span></a>                  return true;
<a name="l4035"><span class="linenum">4035</span></a>              }
<a name="l4036"><span class="linenum">4036</span></a>          }
<a name="l4037"><span class="linenum">4037</span></a>          return false;
<a name="l4038"><span class="linenum">4038</span></a>      }
<a name="l4039"><span class="linenum">4039</span></a>  
<a name="l4040"><span class="linenum">4040</span></a>      <span class="comment">/**</span>
<a name="l4041"><span class="linenum">4041</span></a>  <span class="comment">     * Perform an access check to see if the current $USER can view this users submission.</span>
<a name="l4042"><span class="linenum">4042</span></a>  <span class="comment">     *</span>
<a name="l4043"><span class="linenum">4043</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l4044"><span class="linenum">4044</span></a>  <span class="comment">     * @return bool</span>
<a name="l4045"><span class="linenum">4045</span></a>  <span class="comment">     */</span>
<a name="l4046"><span class="linenum">4046</span></a>      public function <a class="function" onClick="logFunction('can_view_submission')" href="../../_functions/can_view_submission.html" onMouseOver="funcPopup(event,'can_view_submission')">can_view_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l4047"><span class="linenum">4047</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l4048"><span class="linenum">4048</span></a>  
<a name="l4049"><span class="linenum">4049</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_active_user')" href="../../_functions/is_active_user.html" onMouseOver="funcPopup(event,'is_active_user')">is_active_user</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) &amp;&amp; !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewsuspendedusers', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l4050"><span class="linenum">4050</span></a>              return false;
<a name="l4051"><span class="linenum">4051</span></a>          }
<a name="l4052"><span class="linenum">4052</span></a>          if (!<a class="function" onClick="logFunction('is_enrolled')" href="../../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>(), <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l4053"><span class="linenum">4053</span></a>              return false;
<a name="l4054"><span class="linenum">4054</span></a>          }
<a name="l4055"><span class="linenum">4055</span></a>          if (<a class="function" onClick="logFunction('has_any_capability')" href="../../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('mod/assign:viewgrades', 'mod/assign:grade'), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l4056"><span class="linenum">4056</span></a>              return true;
<a name="l4057"><span class="linenum">4057</span></a>          }
<a name="l4058"><span class="linenum">4058</span></a>          if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:submit', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l4059"><span class="linenum">4059</span></a>              return true;
<a name="l4060"><span class="linenum">4060</span></a>          }
<a name="l4061"><span class="linenum">4061</span></a>          return false;
<a name="l4062"><span class="linenum">4062</span></a>      }
<a name="l4063"><span class="linenum">4063</span></a>  
<a name="l4064"><span class="linenum">4064</span></a>      <span class="comment">/**</span>
<a name="l4065"><span class="linenum">4065</span></a>  <span class="comment">     * Allows the plugin to show a batch grading operation page.</span>
<a name="l4066"><span class="linenum">4066</span></a>  <span class="comment">     *</span>
<a name="l4067"><span class="linenum">4067</span></a>  <span class="comment">     * @param moodleform $mform</span>
<a name="l4068"><span class="linenum">4068</span></a>  <span class="comment">     * @return none</span>
<a name="l4069"><span class="linenum">4069</span></a>  <span class="comment">     */</span>
<a name="l4070"><span class="linenum">4070</span></a>      protected function <a class="function" onClick="logFunction('view_plugin_grading_batch_operation')" href="../../_functions/view_plugin_grading_batch_operation.html" onMouseOver="funcPopup(event,'view_plugin_grading_batch_operation')">view_plugin_grading_batch_operation</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l4071"><span class="linenum">4071</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:grade', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l4072"><span class="linenum">4072</span></a>          <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = 'plugingradingbatchoperation_';
<a name="l4073"><span class="linenum">4073</span></a>  
<a name="l4074"><span class="linenum">4074</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l4075"><span class="linenum">4075</span></a>              <a class="var it32100" onMouseOver="hilite(32100)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../_variables/tail.html">$tail</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('operation')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/operation.html">operation</a>, <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a>));
<a name="l4076"><span class="linenum">4076</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a>, <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>) = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('_', <a class="var it32100" onMouseOver="hilite(32100)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../_variables/tail.html">$tail</a>, 2);
<a name="l4077"><span class="linenum">4077</span></a>  
<a name="l4078"><span class="linenum">4078</span></a>              <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_plugin_by_type')" href="../../_functions/get_feedback_plugin_by_type.html" onMouseOver="funcPopup(event,'get_feedback_plugin_by_type')">get_feedback_plugin_by_type</a>(<a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a>);
<a name="l4079"><span class="linenum">4079</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l4080"><span class="linenum">4080</span></a>                  <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('selectedusers')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/selectedusers.html">selectedusers</a>;
<a name="l4081"><span class="linenum">4081</span></a>                  <a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>);
<a name="l4082"><span class="linenum">4082</span></a>                  echo <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('grading_batch_operation')" href="../../_functions/grading_batch_operation.html" onMouseOver="funcPopup(event,'grading_batch_operation')">grading_batch_operation</a>(<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>, <a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a>);
<a name="l4083"><span class="linenum">4083</span></a>                  return;
<a name="l4084"><span class="linenum">4084</span></a>              }
<a name="l4085"><span class="linenum">4085</span></a>          }
<a name="l4086"><span class="linenum">4086</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidformdata', '');
<a name="l4087"><span class="linenum">4087</span></a>      }
<a name="l4088"><span class="linenum">4088</span></a>  
<a name="l4089"><span class="linenum">4089</span></a>      <span class="comment">/**</span>
<a name="l4090"><span class="linenum">4090</span></a>  <span class="comment">     * Ask the user to confirm they want to perform this batch operation</span>
<a name="l4091"><span class="linenum">4091</span></a>  <span class="comment">     *</span>
<a name="l4092"><span class="linenum">4092</span></a>  <span class="comment">     * @param moodleform $mform Set to a grading batch operations form</span>
<a name="l4093"><span class="linenum">4093</span></a>  <span class="comment">     * @return string - the page to view after processing these actions</span>
<a name="l4094"><span class="linenum">4094</span></a>  <span class="comment">     */</span>
<a name="l4095"><span class="linenum">4095</span></a>      protected function <a class="function" onClick="logFunction('process_grading_batch_operation')" href="../../_functions/process_grading_batch_operation.html" onMouseOver="funcPopup(event,'process_grading_batch_operation')">process_grading_batch_operation</a>(&amp; <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l4096"><span class="linenum">4096</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l4097"><span class="linenum">4097</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/gradingbatchoperationsform.php.html">/mod/assign/gradingbatchoperationsform.php</a>');
<a name="l4098"><span class="linenum">4098</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l4099"><span class="linenum">4099</span></a>  
<a name="l4100"><span class="linenum">4100</span></a>          <a class="var it26822" onMouseOver="hilite(26822)" onMouseOut="lolite()" onClick="logVariable('markingallocation')" href="../../_variables/markingallocation.html">$markingallocation</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow &amp;&amp;
<a name="l4101"><span class="linenum">4101</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingallocation &amp;&amp;
<a name="l4102"><span class="linenum">4102</span></a>              <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:manageallocations', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l4103"><span class="linenum">4103</span></a>  
<a name="l4104"><span class="linenum">4104</span></a>          <a class="var it32170" onMouseOver="hilite(32170)" onMouseOut="lolite()" onClick="logVariable('batchformparams')" href="../../_variables/batchformparams.html">$batchformparams</a> = array('cm'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l4105"><span class="linenum">4105</span></a>                                   'submissiondrafts'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;submissiondrafts,
<a name="l4106"><span class="linenum">4106</span></a>                                   'duedate'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;duedate,
<a name="l4107"><span class="linenum">4107</span></a>                                   'attemptreopenmethod'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;attemptreopenmethod,
<a name="l4108"><span class="linenum">4108</span></a>                                   'feedbackplugins'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_plugins')" href="../../_functions/get_feedback_plugins.html" onMouseOver="funcPopup(event,'get_feedback_plugins')">get_feedback_plugins</a>(),
<a name="l4109"><span class="linenum">4109</span></a>                                   'context'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l4110"><span class="linenum">4110</span></a>                                   'markingworkflow'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow,
<a name="l4111"><span class="linenum">4111</span></a>                                   'markingallocation'=&gt;<a class="var it26822" onMouseOver="hilite(26822)" onMouseOut="lolite()" onClick="logVariable('markingallocation')" href="../../_variables/markingallocation.html">$markingallocation</a>);
<a name="l4112"><span class="linenum">4112</span></a>          <a class="var it32179" onMouseOver="hilite(32179)" onMouseOut="lolite()" onClick="logVariable('formclasses')" href="../../_variables/formclasses.html">$formclasses</a> = array('class'=&gt;'gradingbatchoperationsform');
<a name="l4113"><span class="linenum">4113</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_grading_batch_operations_form')" href="../../_classes/mod_assign_grading_batch_operations_form.html" onMouseOver="classPopup(event,'mod_assign_grading_batch_operations_form')">mod_assign_grading_batch_operations_form</a>(null,
<a name="l4114"><span class="linenum">4114</span></a>                                                                <a class="var it32170" onMouseOver="hilite(32170)" onMouseOut="lolite()" onClick="logVariable('batchformparams')" href="../../_variables/batchformparams.html">$batchformparams</a>,
<a name="l4115"><span class="linenum">4115</span></a>                                                                'post',
<a name="l4116"><span class="linenum">4116</span></a>                                                                '',
<a name="l4117"><span class="linenum">4117</span></a>                                                                <a class="var it32179" onMouseOver="hilite(32179)" onMouseOut="lolite()" onClick="logVariable('formclasses')" href="../../_variables/formclasses.html">$formclasses</a>);
<a name="l4118"><span class="linenum">4118</span></a>  
<a name="l4119"><span class="linenum">4119</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l4120"><span class="linenum">4120</span></a>  <span class="comment">            // Get the list of users.</span>
<a name="l4121"><span class="linenum">4121</span></a>              <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('selectedusers')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/selectedusers.html">selectedusers</a>;
<a name="l4122"><span class="linenum">4122</span></a>              <a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>);
<a name="l4123"><span class="linenum">4123</span></a>  
<a name="l4124"><span class="linenum">4124</span></a>              <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = 'plugingradingbatchoperation_';
<a name="l4125"><span class="linenum">4125</span></a>  
<a name="l4126"><span class="linenum">4126</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('operation')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/operation.html">operation</a> == 'grantextension') {
<a name="l4127"><span class="linenum">4127</span></a>  <span class="comment">                // Reset the form so the grant extension page will create the extension form.</span>
<a name="l4128"><span class="linenum">4128</span></a>                  return 'grantextension';
<a name="l4129"><span class="linenum">4129</span></a>              } else if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('operation')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/operation.html">operation</a> == 'setmarkingworkflowstate') {
<a name="l4130"><span class="linenum">4130</span></a>                  return 'viewbatchsetmarkingworkflowstate';
<a name="l4131"><span class="linenum">4131</span></a>              } else if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('operation')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/operation.html">operation</a> == 'setmarkingallocation') {
<a name="l4132"><span class="linenum">4132</span></a>                  return 'viewbatchmarkingallocation';
<a name="l4133"><span class="linenum">4133</span></a>              } else if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('operation')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/operation.html">operation</a>, <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a>) === 0) {
<a name="l4134"><span class="linenum">4134</span></a>                  <a class="var it32100" onMouseOver="hilite(32100)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../_variables/tail.html">$tail</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('operation')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/operation.html">operation</a>, <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a>));
<a name="l4135"><span class="linenum">4135</span></a>                  <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a>, <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>) = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('_', <a class="var it32100" onMouseOver="hilite(32100)" onMouseOut="lolite()" onClick="logVariable('tail')" href="../../_variables/tail.html">$tail</a>, 2);
<a name="l4136"><span class="linenum">4136</span></a>  
<a name="l4137"><span class="linenum">4137</span></a>                  <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_plugin_by_type')" href="../../_functions/get_feedback_plugin_by_type.html" onMouseOver="funcPopup(event,'get_feedback_plugin_by_type')">get_feedback_plugin_by_type</a>(<a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a>);
<a name="l4138"><span class="linenum">4138</span></a>                  if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l4139"><span class="linenum">4139</span></a>                      return 'plugingradingbatchoperation';
<a name="l4140"><span class="linenum">4140</span></a>                  }
<a name="l4141"><span class="linenum">4141</span></a>              }
<a name="l4142"><span class="linenum">4142</span></a>  
<a name="l4143"><span class="linenum">4143</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('operation')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/operation.html">operation</a> == 'downloadselected') {
<a name="l4144"><span class="linenum">4144</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('download_submissions')" href="../../_functions/download_submissions.html" onMouseOver="funcPopup(event,'download_submissions')">download_submissions</a>(<a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a>);
<a name="l4145"><span class="linenum">4145</span></a>              } else {
<a name="l4146"><span class="linenum">4146</span></a>                  foreach (<a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a> as <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l4147"><span class="linenum">4147</span></a>                      if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('operation')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/operation.html">operation</a> == 'lock') {
<a name="l4148"><span class="linenum">4148</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_lock_submission')" href="../../_functions/process_lock_submission.html" onMouseOver="funcPopup(event,'process_lock_submission')">process_lock_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l4149"><span class="linenum">4149</span></a>                      } else if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('operation')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/operation.html">operation</a> == 'unlock') {
<a name="l4150"><span class="linenum">4150</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_unlock_submission')" href="../../_functions/process_unlock_submission.html" onMouseOver="funcPopup(event,'process_unlock_submission')">process_unlock_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l4151"><span class="linenum">4151</span></a>                      } else if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('operation')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/operation.html">operation</a> == 'reverttodraft') {
<a name="l4152"><span class="linenum">4152</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_revert_to_draft')" href="../../_functions/process_revert_to_draft.html" onMouseOver="funcPopup(event,'process_revert_to_draft')">process_revert_to_draft</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l4153"><span class="linenum">4153</span></a>                      } else if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('operation')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/operation.html">operation</a> == 'addattempt') {
<a name="l4154"><span class="linenum">4154</span></a>                          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l4155"><span class="linenum">4155</span></a>                              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_add_attempt')" href="../../_functions/process_add_attempt.html" onMouseOver="funcPopup(event,'process_add_attempt')">process_add_attempt</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l4156"><span class="linenum">4156</span></a>                          }
<a name="l4157"><span class="linenum">4157</span></a>                      }
<a name="l4158"><span class="linenum">4158</span></a>                  }
<a name="l4159"><span class="linenum">4159</span></a>              }
<a name="l4160"><span class="linenum">4160</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('operation')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/operation.html">operation</a> == 'addattempt') {
<a name="l4161"><span class="linenum">4161</span></a>  <span class="comment">                // This needs to be handled separately so that each team submission is only re-opened one time.</span>
<a name="l4162"><span class="linenum">4162</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_add_attempt_group')" href="../../_functions/process_add_attempt_group.html" onMouseOver="funcPopup(event,'process_add_attempt_group')">process_add_attempt_group</a>(<a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a>);
<a name="l4163"><span class="linenum">4163</span></a>              }
<a name="l4164"><span class="linenum">4164</span></a>          }
<a name="l4165"><span class="linenum">4165</span></a>  
<a name="l4166"><span class="linenum">4166</span></a>          return 'grading';
<a name="l4167"><span class="linenum">4167</span></a>      }
<a name="l4168"><span class="linenum">4168</span></a>  
<a name="l4169"><span class="linenum">4169</span></a>      <span class="comment">/**</span>
<a name="l4170"><span class="linenum">4170</span></a>  <span class="comment">     * Shows a form that allows the workflow state for selected submissions to be changed.</span>
<a name="l4171"><span class="linenum">4171</span></a>  <span class="comment">     *</span>
<a name="l4172"><span class="linenum">4172</span></a>  <span class="comment">     * @param moodleform $mform Set to a grading batch operations form</span>
<a name="l4173"><span class="linenum">4173</span></a>  <span class="comment">     * @return string - the page to view after processing these actions</span>
<a name="l4174"><span class="linenum">4174</span></a>  <span class="comment">     */</span>
<a name="l4175"><span class="linenum">4175</span></a>      protected function <a class="function" onClick="logFunction('view_batch_set_workflow_state')" href="../../_functions/view_batch_set_workflow_state.html" onMouseOver="funcPopup(event,'view_batch_set_workflow_state')">view_batch_set_workflow_state</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l4176"><span class="linenum">4176</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l4177"><span class="linenum">4177</span></a>  
<a name="l4178"><span class="linenum">4178</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/batchsetmarkingworkflowstateform.php.html">/mod/assign/batchsetmarkingworkflowstateform.php</a>');
<a name="l4179"><span class="linenum">4179</span></a>  
<a name="l4180"><span class="linenum">4180</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l4181"><span class="linenum">4181</span></a>  
<a name="l4182"><span class="linenum">4182</span></a>          <a class="var it8924" onMouseOver="hilite(8924)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>();
<a name="l4183"><span class="linenum">4183</span></a>          <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> = <a class="var it8924" onMouseOver="hilite(8924)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a>-&gt;<a onClick="logVariable('selectedusers')" class="var it45738" onMouseOver="hilite(45738)" onMouseOut="lolite()" href="../../_variables/selectedusers.html">selectedusers</a>;
<a name="l4184"><span class="linenum">4184</span></a>          <a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>);
<a name="l4185"><span class="linenum">4185</span></a>  
<a name="l4186"><span class="linenum">4186</span></a>          <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a> = array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l4187"><span class="linenum">4187</span></a>                            'selectedusers' =&gt; <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>);
<a name="l4188"><span class="linenum">4188</span></a>  
<a name="l4189"><span class="linenum">4189</span></a>          <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a> = '';
<a name="l4190"><span class="linenum">4190</span></a>  
<a name="l4191"><span class="linenum">4191</span></a>          <a class="var it7481" onMouseOver="hilite(7481)" onMouseOut="lolite()" onClick="logVariable('usercount')" href="../../_variables/usercount.html">$usercount</a> = 0;
<a name="l4192"><span class="linenum">4192</span></a>          <a class="var it25205" onMouseOver="hilite(25205)" onMouseOut="lolite()" onClick="logVariable('extrauserfields')" href="../../_variables/extrauserfields.html">$extrauserfields</a> = <a class="function" onClick="logFunction('get_extra_user_fields')" href="../../_functions/get_extra_user_fields.html" onMouseOver="funcPopup(event,'get_extra_user_fields')">get_extra_user_fields</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l4193"><span class="linenum">4193</span></a>          foreach (<a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a> as <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l4194"><span class="linenum">4194</span></a>              if (<a class="var it7481" onMouseOver="hilite(7481)" onMouseOut="lolite()" onClick="logVariable('usercount')" href="../../_variables/usercount.html">$usercount</a> &gt;= 5) {
<a name="l4195"><span class="linenum">4195</span></a>                  <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a> .= <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('moreusers', 'assign', <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a>) - 5);
<a name="l4196"><span class="linenum">4196</span></a>                  break;
<a name="l4197"><span class="linenum">4197</span></a>              }
<a name="l4198"><span class="linenum">4198</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l4199"><span class="linenum">4199</span></a>  
<a name="l4200"><span class="linenum">4200</span></a>              <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_user_summary')" href="../../_classes/assign_user_summary.html" onMouseOver="classPopup(event,'assign_user_summary')">assign_user_summary</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>,
<a name="l4201"><span class="linenum">4201</span></a>                                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l4202"><span class="linenum">4202</span></a>                                                                  <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames',
<a name="l4203"><span class="linenum">4203</span></a>                                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>()),
<a name="l4204"><span class="linenum">4204</span></a>                                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>(),
<a name="l4205"><span class="linenum">4205</span></a>                                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_uniqueid_for_user')" href="../../_functions/get_uniqueid_for_user.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user')">get_uniqueid_for_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l4206"><span class="linenum">4206</span></a>                                                                  <a class="var it25205" onMouseOver="hilite(25205)" onMouseOut="lolite()" onClick="logVariable('extrauserfields')" href="../../_variables/extrauserfields.html">$extrauserfields</a>,
<a name="l4207"><span class="linenum">4207</span></a>                                                                  !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_active_user')" href="../../_functions/is_active_user.html" onMouseOver="funcPopup(event,'is_active_user')">is_active_user</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)));
<a name="l4208"><span class="linenum">4208</span></a>              <a class="var it7481" onMouseOver="hilite(7481)" onMouseOut="lolite()" onClick="logVariable('usercount')" href="../../_variables/usercount.html">$usercount</a> += 1;
<a name="l4209"><span class="linenum">4209</span></a>          }
<a name="l4210"><span class="linenum">4210</span></a>  
<a name="l4211"><span class="linenum">4211</span></a>          <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a> = array(
<a name="l4212"><span class="linenum">4212</span></a>              'userscount' =&gt; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a>),
<a name="l4213"><span class="linenum">4213</span></a>              'usershtml' =&gt; <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a>,
<a name="l4214"><span class="linenum">4214</span></a>              'markingworkflowstates' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_marking_workflow_states_for_current_user')" href="../../_functions/get_marking_workflow_states_for_current_user.html" onMouseOver="funcPopup(event,'get_marking_workflow_states_for_current_user')">get_marking_workflow_states_for_current_user</a>()
<a name="l4215"><span class="linenum">4215</span></a>          );
<a name="l4216"><span class="linenum">4216</span></a>  
<a name="l4217"><span class="linenum">4217</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_batch_set_marking_workflow_state_form')" href="../../_classes/mod_assign_batch_set_marking_workflow_state_form.html" onMouseOver="classPopup(event,'mod_assign_batch_set_marking_workflow_state_form')">mod_assign_batch_set_marking_workflow_state_form</a>(null, <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a>);
<a name="l4218"><span class="linenum">4218</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="../../_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>);    <span class="comment">// Initialises the hidden elements.</span>
<a name="l4219"><span class="linenum">4219</span></a>          <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(),
<a name="l4220"><span class="linenum">4220</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l4221"><span class="linenum">4221</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_intro')" href="../../_functions/show_intro.html" onMouseOver="funcPopup(event,'show_intro')">show_intro</a>(),
<a name="l4222"><span class="linenum">4222</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l4223"><span class="linenum">4223</span></a>              <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('setmarkingworkflowstate', 'assign'));
<a name="l4224"><span class="linenum">4224</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a>);
<a name="l4225"><span class="linenum">4225</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_form')" href="../../_classes/assign_form.html" onMouseOver="classPopup(event,'assign_form')">assign_form</a>('setworkflowstate', <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>));
<a name="l4226"><span class="linenum">4226</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l4227"><span class="linenum">4227</span></a>  
<a name="l4228"><span class="linenum">4228</span></a>          \mod_assign\event\<a class="class" onClick="logClass('batch_set_workflow_state_viewed')" href="../../_classes/batch_set_workflow_state_viewed.html" onMouseOver="classPopup(event,'batch_set_workflow_state_viewed')">batch_set_workflow_state_viewed</a>::<a class="function" onClick="logFunction('create_from_assign')" href="../../_functions/create_from_assign.html" onMouseOver="funcPopup(event,'create_from_assign')">create_from_assign</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l4229"><span class="linenum">4229</span></a>  
<a name="l4230"><span class="linenum">4230</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l4231"><span class="linenum">4231</span></a>      }
<a name="l4232"><span class="linenum">4232</span></a>  
<a name="l4233"><span class="linenum">4233</span></a>      <span class="comment">/**</span>
<a name="l4234"><span class="linenum">4234</span></a>  <span class="comment">     * Shows a form that allows the allocated marker for selected submissions to be changed.</span>
<a name="l4235"><span class="linenum">4235</span></a>  <span class="comment">     *</span>
<a name="l4236"><span class="linenum">4236</span></a>  <span class="comment">     * @param moodleform $mform Set to a grading batch operations form</span>
<a name="l4237"><span class="linenum">4237</span></a>  <span class="comment">     * @return string - the page to view after processing these actions</span>
<a name="l4238"><span class="linenum">4238</span></a>  <span class="comment">     */</span>
<a name="l4239"><span class="linenum">4239</span></a>      public function <a class="function" onClick="logFunction('view_batch_markingallocation')" href="../../_functions/view_batch_markingallocation.html" onMouseOver="funcPopup(event,'view_batch_markingallocation')">view_batch_markingallocation</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l4240"><span class="linenum">4240</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l4241"><span class="linenum">4241</span></a>  
<a name="l4242"><span class="linenum">4242</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/batchsetallocatedmarkerform.php.html">/mod/assign/batchsetallocatedmarkerform.php</a>');
<a name="l4243"><span class="linenum">4243</span></a>  
<a name="l4244"><span class="linenum">4244</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l4245"><span class="linenum">4245</span></a>  
<a name="l4246"><span class="linenum">4246</span></a>          <a class="var it8924" onMouseOver="hilite(8924)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>();
<a name="l4247"><span class="linenum">4247</span></a>          <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> = <a class="var it8924" onMouseOver="hilite(8924)" onMouseOut="lolite()" onClick="logVariable('submitteddata')" href="../../_variables/submitteddata.html">$submitteddata</a>-&gt;<a onClick="logVariable('selectedusers')" class="var it45738" onMouseOver="hilite(45738)" onMouseOut="lolite()" href="../../_variables/selectedusers.html">selectedusers</a>;
<a name="l4248"><span class="linenum">4248</span></a>          <a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>);
<a name="l4249"><span class="linenum">4249</span></a>  
<a name="l4250"><span class="linenum">4250</span></a>          <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a> = array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l4251"><span class="linenum">4251</span></a>                            'selectedusers' =&gt; <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>);
<a name="l4252"><span class="linenum">4252</span></a>  
<a name="l4253"><span class="linenum">4253</span></a>          <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a> = '';
<a name="l4254"><span class="linenum">4254</span></a>  
<a name="l4255"><span class="linenum">4255</span></a>          <a class="var it7481" onMouseOver="hilite(7481)" onMouseOut="lolite()" onClick="logVariable('usercount')" href="../../_variables/usercount.html">$usercount</a> = 0;
<a name="l4256"><span class="linenum">4256</span></a>          <a class="var it25205" onMouseOver="hilite(25205)" onMouseOut="lolite()" onClick="logVariable('extrauserfields')" href="../../_variables/extrauserfields.html">$extrauserfields</a> = <a class="function" onClick="logFunction('get_extra_user_fields')" href="../../_functions/get_extra_user_fields.html" onMouseOver="funcPopup(event,'get_extra_user_fields')">get_extra_user_fields</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l4257"><span class="linenum">4257</span></a>          foreach (<a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a> as <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l4258"><span class="linenum">4258</span></a>              if (<a class="var it7481" onMouseOver="hilite(7481)" onMouseOut="lolite()" onClick="logVariable('usercount')" href="../../_variables/usercount.html">$usercount</a> &gt;= 5) {
<a name="l4259"><span class="linenum">4259</span></a>                  <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a> .= <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('moreusers', 'assign', <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a>) - 5);
<a name="l4260"><span class="linenum">4260</span></a>                  break;
<a name="l4261"><span class="linenum">4261</span></a>              }
<a name="l4262"><span class="linenum">4262</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l4263"><span class="linenum">4263</span></a>  
<a name="l4264"><span class="linenum">4264</span></a>              <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_user_summary')" href="../../_classes/assign_user_summary.html" onMouseOver="classPopup(event,'assign_user_summary')">assign_user_summary</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>,
<a name="l4265"><span class="linenum">4265</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l4266"><span class="linenum">4266</span></a>                  <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames',
<a name="l4267"><span class="linenum">4267</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>()),
<a name="l4268"><span class="linenum">4268</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>(),
<a name="l4269"><span class="linenum">4269</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_uniqueid_for_user')" href="../../_functions/get_uniqueid_for_user.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user')">get_uniqueid_for_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l4270"><span class="linenum">4270</span></a>                  <a class="var it25205" onMouseOver="hilite(25205)" onMouseOut="lolite()" onClick="logVariable('extrauserfields')" href="../../_variables/extrauserfields.html">$extrauserfields</a>,
<a name="l4271"><span class="linenum">4271</span></a>                  !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_active_user')" href="../../_functions/is_active_user.html" onMouseOver="funcPopup(event,'is_active_user')">is_active_user</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)));
<a name="l4272"><span class="linenum">4272</span></a>              <a class="var it7481" onMouseOver="hilite(7481)" onMouseOut="lolite()" onClick="logVariable('usercount')" href="../../_variables/usercount.html">$usercount</a> += 1;
<a name="l4273"><span class="linenum">4273</span></a>          }
<a name="l4274"><span class="linenum">4274</span></a>  
<a name="l4275"><span class="linenum">4275</span></a>          <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a> = array(
<a name="l4276"><span class="linenum">4276</span></a>              'userscount' =&gt; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1811" onMouseOver="hilite(1811)" onMouseOut="lolite()" onClick="logVariable('userlist')" href="../../_variables/userlist.html">$userlist</a>),
<a name="l4277"><span class="linenum">4277</span></a>              'usershtml' =&gt; <a class="var it32142" onMouseOver="hilite(32142)" onMouseOut="lolite()" onClick="logVariable('usershtml')" href="../../_variables/usershtml.html">$usershtml</a>,
<a name="l4278"><span class="linenum">4278</span></a>          );
<a name="l4279"><span class="linenum">4279</span></a>  
<a name="l4280"><span class="linenum">4280</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="function" onClick="logFunction('users_order_by_sql')" href="../../_functions/users_order_by_sql.html" onMouseOver="funcPopup(event,'users_order_by_sql')">users_order_by_sql</a>();
<a name="l4281"><span class="linenum">4281</span></a>          <a class="var it15515" onMouseOver="hilite(15515)" onMouseOut="lolite()" onClick="logVariable('markers')" href="../../_variables/markers.html">$markers</a> = <a class="function" onClick="logFunction('get_users_by_capability')" href="../../_functions/get_users_by_capability.html" onMouseOver="funcPopup(event,'get_users_by_capability')">get_users_by_capability</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(), 'mod/assign:grade', '', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l4282"><span class="linenum">4282</span></a>          <a class="var it30993" onMouseOver="hilite(30993)" onMouseOut="lolite()" onClick="logVariable('markerlist')" href="../../_variables/markerlist.html">$markerlist</a> = array();
<a name="l4283"><span class="linenum">4283</span></a>          foreach (<a class="var it15515" onMouseOver="hilite(15515)" onMouseOut="lolite()" onClick="logVariable('markers')" href="../../_variables/markers.html">$markers</a> as <a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>) {
<a name="l4284"><span class="linenum">4284</span></a>              <a class="var it30993" onMouseOver="hilite(30993)" onMouseOut="lolite()" onClick="logVariable('markerlist')" href="../../_variables/markerlist.html">$markerlist</a>[<a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>-&gt;<a onClick="logVariable('id')" class="var it43495" onMouseOver="hilite(43495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>);
<a name="l4285"><span class="linenum">4285</span></a>          }
<a name="l4286"><span class="linenum">4286</span></a>  
<a name="l4287"><span class="linenum">4287</span></a>          <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a>['markers'] = <a class="var it30993" onMouseOver="hilite(30993)" onMouseOut="lolite()" onClick="logVariable('markerlist')" href="../../_variables/markerlist.html">$markerlist</a>;
<a name="l4288"><span class="linenum">4288</span></a>  
<a name="l4289"><span class="linenum">4289</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_batch_set_allocatedmarker_form')" href="../../_classes/mod_assign_batch_set_allocatedmarker_form.html" onMouseOver="classPopup(event,'mod_assign_batch_set_allocatedmarker_form')">mod_assign_batch_set_allocatedmarker_form</a>(null, <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a>);
<a name="l4290"><span class="linenum">4290</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="../../_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>);    <span class="comment">// Initialises the hidden elements.</span>
<a name="l4291"><span class="linenum">4291</span></a>          <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(),
<a name="l4292"><span class="linenum">4292</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l4293"><span class="linenum">4293</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_intro')" href="../../_functions/show_intro.html" onMouseOver="funcPopup(event,'show_intro')">show_intro</a>(),
<a name="l4294"><span class="linenum">4294</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l4295"><span class="linenum">4295</span></a>              <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('setmarkingallocation', 'assign'));
<a name="l4296"><span class="linenum">4296</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../_variables/header.html">$header</a>);
<a name="l4297"><span class="linenum">4297</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_form')" href="../../_classes/assign_form.html" onMouseOver="classPopup(event,'assign_form')">assign_form</a>('setworkflowstate', <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>));
<a name="l4298"><span class="linenum">4298</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l4299"><span class="linenum">4299</span></a>  
<a name="l4300"><span class="linenum">4300</span></a>          \mod_assign\event\<a class="class" onClick="logClass('batch_set_marker_allocation_viewed')" href="../../_classes/batch_set_marker_allocation_viewed.html" onMouseOver="classPopup(event,'batch_set_marker_allocation_viewed')">batch_set_marker_allocation_viewed</a>::<a class="function" onClick="logFunction('create_from_assign')" href="../../_functions/create_from_assign.html" onMouseOver="funcPopup(event,'create_from_assign')">create_from_assign</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l4301"><span class="linenum">4301</span></a>  
<a name="l4302"><span class="linenum">4302</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l4303"><span class="linenum">4303</span></a>      }
<a name="l4304"><span class="linenum">4304</span></a>  
<a name="l4305"><span class="linenum">4305</span></a>      <span class="comment">/**</span>
<a name="l4306"><span class="linenum">4306</span></a>  <span class="comment">     * Ask the user to confirm they want to submit their work for grading.</span>
<a name="l4307"><span class="linenum">4307</span></a>  <span class="comment">     *</span>
<a name="l4308"><span class="linenum">4308</span></a>  <span class="comment">     * @param moodleform $mform - null unless form validation has failed</span>
<a name="l4309"><span class="linenum">4309</span></a>  <span class="comment">     * @return string</span>
<a name="l4310"><span class="linenum">4310</span></a>  <span class="comment">     */</span>
<a name="l4311"><span class="linenum">4311</span></a>      protected function <a class="function" onClick="logFunction('check_submit_for_grading')" href="../../_functions/check_submit_for_grading.html" onMouseOver="funcPopup(event,'check_submit_for_grading')">check_submit_for_grading</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l4312"><span class="linenum">4312</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l4313"><span class="linenum">4313</span></a>  
<a name="l4314"><span class="linenum">4314</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/submissionconfirmform.php.html">/mod/assign/submissionconfirmform.php</a>');
<a name="l4315"><span class="linenum">4315</span></a>  
<a name="l4316"><span class="linenum">4316</span></a>  <span class="comment">        // Check that all of the submission plugins are ready for this submission.</span>
<a name="l4317"><span class="linenum">4317</span></a>          <a class="var it1809" onMouseOver="hilite(1809)" onMouseOut="lolite()" onClick="logVariable('notifications')" href="../../_variables/notifications.html">$notifications</a> = array();
<a name="l4318"><span class="linenum">4318</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l4319"><span class="linenum">4319</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>();
<a name="l4320"><span class="linenum">4320</span></a>          foreach (<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l4321"><span class="linenum">4321</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l4322"><span class="linenum">4322</span></a>                  <a class="var it6382" onMouseOver="hilite(6382)" onMouseOut="lolite()" onClick="logVariable('check')" href="../../_variables/check.html">$check</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('precheck_submission')" href="../../_functions/precheck_submission.html" onMouseOver="funcPopup(event,'precheck_submission')">precheck_submission</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l4323"><span class="linenum">4323</span></a>                  if (<a class="var it6382" onMouseOver="hilite(6382)" onMouseOut="lolite()" onClick="logVariable('check')" href="../../_variables/check.html">$check</a> !== true) {
<a name="l4324"><span class="linenum">4324</span></a>                      <a class="var it1809" onMouseOver="hilite(1809)" onMouseOut="lolite()" onClick="logVariable('notifications')" href="../../_variables/notifications.html">$notifications</a>[] = <a class="var it6382" onMouseOver="hilite(6382)" onMouseOut="lolite()" onClick="logVariable('check')" href="../../_variables/check.html">$check</a>;
<a name="l4325"><span class="linenum">4325</span></a>                  }
<a name="l4326"><span class="linenum">4326</span></a>              }
<a name="l4327"><span class="linenum">4327</span></a>          }
<a name="l4328"><span class="linenum">4328</span></a>  
<a name="l4329"><span class="linenum">4329</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l4330"><span class="linenum">4330</span></a>          <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>();
<a name="l4331"><span class="linenum">4331</span></a>          <a class="var it26817" onMouseOver="hilite(26817)" onMouseOut="lolite()" onClick="logVariable('requiresubmissionstatement')" href="../../_variables/requiresubmissionstatement.html">$requiresubmissionstatement</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;requiresubmissionstatement &amp;&amp;
<a name="l4332"><span class="linenum">4332</span></a>                                         !empty(<a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('submissionstatement')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/submissionstatement.html">submissionstatement</a>);
<a name="l4333"><span class="linenum">4333</span></a>  
<a name="l4334"><span class="linenum">4334</span></a>          <a class="var it19952" onMouseOver="hilite(19952)" onMouseOut="lolite()" onClick="logVariable('submissionstatement')" href="../../_variables/submissionstatement.html">$submissionstatement</a> = '';
<a name="l4335"><span class="linenum">4335</span></a>          if (!empty(<a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('submissionstatement')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/submissionstatement.html">submissionstatement</a>)) {
<a name="l4336"><span class="linenum">4336</span></a>  <span class="comment">            // Format the submission statement before its sent. We turn off para because this is going within</span>
<a name="l4337"><span class="linenum">4337</span></a>  <span class="comment">            // a form element.</span>
<a name="l4338"><span class="linenum">4338</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array(
<a name="l4339"><span class="linenum">4339</span></a>                  'context' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l4340"><span class="linenum">4340</span></a>                  'para' =&gt; false
<a name="l4341"><span class="linenum">4341</span></a>              );
<a name="l4342"><span class="linenum">4342</span></a>              <a class="var it19952" onMouseOver="hilite(19952)" onMouseOut="lolite()" onClick="logVariable('submissionstatement')" href="../../_variables/submissionstatement.html">$submissionstatement</a> = <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('submissionstatement')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/submissionstatement.html">submissionstatement</a>, <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l4343"><span class="linenum">4343</span></a>          }
<a name="l4344"><span class="linenum">4344</span></a>  
<a name="l4345"><span class="linenum">4345</span></a>          if (<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> == null) {
<a name="l4346"><span class="linenum">4346</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_confirm_submission_form')" href="../../_classes/mod_assign_confirm_submission_form.html" onMouseOver="classPopup(event,'mod_assign_confirm_submission_form')">mod_assign_confirm_submission_form</a>(null, array(<a class="var it26817" onMouseOver="hilite(26817)" onMouseOut="lolite()" onClick="logVariable('requiresubmissionstatement')" href="../../_variables/requiresubmissionstatement.html">$requiresubmissionstatement</a>,
<a name="l4347"><span class="linenum">4347</span></a>                                                                          <a class="var it19952" onMouseOver="hilite(19952)" onMouseOut="lolite()" onClick="logVariable('submissionstatement')" href="../../_variables/submissionstatement.html">$submissionstatement</a>,
<a name="l4348"><span class="linenum">4348</span></a>                                                                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l4349"><span class="linenum">4349</span></a>                                                                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>));
<a name="l4350"><span class="linenum">4350</span></a>          }
<a name="l4351"><span class="linenum">4351</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l4352"><span class="linenum">4352</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l4353"><span class="linenum">4353</span></a>          <a class="var it32180" onMouseOver="hilite(32180)" onMouseOut="lolite()" onClick="logVariable('submitforgradingpage')" href="../../_variables/submitforgradingpage.html">$submitforgradingpage</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_submit_for_grading_page')" href="../../_classes/assign_submit_for_grading_page.html" onMouseOver="classPopup(event,'assign_submit_for_grading_page')">assign_submit_for_grading_page</a>(<a class="var it1809" onMouseOver="hilite(1809)" onMouseOut="lolite()" onClick="logVariable('notifications')" href="../../_variables/notifications.html">$notifications</a>,
<a name="l4354"><span class="linenum">4354</span></a>                                                                     <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l4355"><span class="linenum">4355</span></a>                                                                     <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>);
<a name="l4356"><span class="linenum">4356</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it32180" onMouseOver="hilite(32180)" onMouseOut="lolite()" onClick="logVariable('submitforgradingpage')" href="../../_variables/submitforgradingpage.html">$submitforgradingpage</a>);
<a name="l4357"><span class="linenum">4357</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l4358"><span class="linenum">4358</span></a>  
<a name="l4359"><span class="linenum">4359</span></a>          \mod_assign\event\<a class="class" onClick="logClass('submission_confirmation_form_viewed')" href="../../_classes/submission_confirmation_form_viewed.html" onMouseOver="classPopup(event,'submission_confirmation_form_viewed')">submission_confirmation_form_viewed</a>::<a class="function" onClick="logFunction('create_from_assign')" href="../../_functions/create_from_assign.html" onMouseOver="funcPopup(event,'create_from_assign')">create_from_assign</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l4360"><span class="linenum">4360</span></a>  
<a name="l4361"><span class="linenum">4361</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l4362"><span class="linenum">4362</span></a>      }
<a name="l4363"><span class="linenum">4363</span></a>  
<a name="l4364"><span class="linenum">4364</span></a>      <span class="comment">/**</span>
<a name="l4365"><span class="linenum">4365</span></a>  <span class="comment">     * Creates an assign_submission_status renderable.</span>
<a name="l4366"><span class="linenum">4366</span></a>  <span class="comment">     *</span>
<a name="l4367"><span class="linenum">4367</span></a>  <span class="comment">     * @param stdClass $user the user to get the report for</span>
<a name="l4368"><span class="linenum">4368</span></a>  <span class="comment">     * @param bool $showlinks return plain text or links to the profile</span>
<a name="l4369"><span class="linenum">4369</span></a>  <span class="comment">     * @return assign_submission_status renderable object</span>
<a name="l4370"><span class="linenum">4370</span></a>  <span class="comment">     */</span>
<a name="l4371"><span class="linenum">4371</span></a>      public function <a class="function" onClick="logFunction('get_assign_submission_status_renderable')" href="../../_functions/get_assign_submission_status_renderable.html" onMouseOver="funcPopup(event,'get_assign_submission_status_renderable')">get_assign_submission_status_renderable</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it32181" onMouseOver="hilite(32181)" onMouseOut="lolite()" onClick="logVariable('showlinks')" href="../../_variables/showlinks.html">$showlinks</a>) {
<a name="l4372"><span class="linenum">4372</span></a>          global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l4373"><span class="linenum">4373</span></a>  
<a name="l4374"><span class="linenum">4374</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l4375"><span class="linenum">4375</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l4376"><span class="linenum">4376</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l4377"><span class="linenum">4377</span></a>  
<a name="l4378"><span class="linenum">4378</span></a>          <a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a> = null;
<a name="l4379"><span class="linenum">4379</span></a>          <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a> = null;
<a name="l4380"><span class="linenum">4380</span></a>          <a class="var it15025" onMouseOver="hilite(15025)" onMouseOut="lolite()" onClick="logVariable('notsubmitted')" href="../../_variables/notsubmitted.html">$notsubmitted</a> = array();
<a name="l4381"><span class="linenum">4381</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>) {
<a name="l4382"><span class="linenum">4382</span></a>              <a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, false);
<a name="l4383"><span class="linenum">4383</span></a>              <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l4384"><span class="linenum">4384</span></a>              <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = 0;
<a name="l4385"><span class="linenum">4385</span></a>              if (<a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a>) {
<a name="l4386"><span class="linenum">4386</span></a>                  <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a>-&gt;<a onClick="logVariable('id')" class="var it45741" onMouseOver="hilite(45741)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l4387"><span class="linenum">4387</span></a>              }
<a name="l4388"><span class="linenum">4388</span></a>              <a class="var it15025" onMouseOver="hilite(15025)" onMouseOut="lolite()" onClick="logVariable('notsubmitted')" href="../../_variables/notsubmitted.html">$notsubmitted</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group_members_who_have_not_submitted')" href="../../_functions/get_submission_group_members_who_have_not_submitted.html" onMouseOver="funcPopup(event,'get_submission_group_members_who_have_not_submitted')">get_submission_group_members_who_have_not_submitted</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, false);
<a name="l4389"><span class="linenum">4389</span></a>          }
<a name="l4390"><span class="linenum">4390</span></a>  
<a name="l4391"><span class="linenum">4391</span></a>          <a class="var it32156" onMouseOver="hilite(32156)" onMouseOut="lolite()" onClick="logVariable('showedit')" href="../../_variables/showedit.html">$showedit</a> = <a class="var it32181" onMouseOver="hilite(32181)" onMouseOut="lolite()" onClick="logVariable('showlinks')" href="../../_variables/showlinks.html">$showlinks</a> &amp;&amp;
<a name="l4392"><span class="linenum">4392</span></a>                      (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>()) &amp;&amp;
<a name="l4393"><span class="linenum">4393</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_edit_submission')" href="../../_functions/can_edit_submission.html" onMouseOver="funcPopup(event,'can_edit_submission')">can_edit_submission</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l4394"><span class="linenum">4394</span></a>  
<a name="l4395"><span class="linenum">4395</span></a>          <a class="var it32155" onMouseOver="hilite(32155)" onMouseOut="lolite()" onClick="logVariable('gradelocked')" href="../../_variables/gradelocked.html">$gradelocked</a> = (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> &amp;&amp; <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('locked')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/locked.html">locked</a>) || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('grading_disabled')" href="../../_functions/grading_disabled.html" onMouseOver="funcPopup(event,'grading_disabled')">grading_disabled</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l4396"><span class="linenum">4396</span></a>  
<a name="l4397"><span class="linenum">4397</span></a>  <span class="comment">        // Grading criteria preview.</span>
<a name="l4398"><span class="linenum">4398</span></a>          <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a> = <a class="function" onClick="logFunction('get_grading_manager')" href="../../_functions/get_grading_manager.html" onMouseOver="funcPopup(event,'get_grading_manager')">get_grading_manager</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, 'mod_assign', 'submissions');
<a name="l4399"><span class="linenum">4399</span></a>          <a class="var it25232" onMouseOver="hilite(25232)" onMouseOut="lolite()" onClick="logVariable('gradingcontrollerpreview')" href="../../_variables/gradingcontrollerpreview.html">$gradingcontrollerpreview</a> = '';
<a name="l4400"><span class="linenum">4400</span></a>          if (<a class="var it20395" onMouseOver="hilite(20395)" onMouseOut="lolite()" onClick="logVariable('gradingmethod')" href="../../_variables/gradingmethod.html">$gradingmethod</a> = <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a>-&gt;<a class="function" onClick="logFunction('get_active_method')" href="../../_functions/get_active_method.html" onMouseOver="funcPopup(event,'get_active_method')">get_active_method</a>()) {
<a name="l4401"><span class="linenum">4401</span></a>              <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a> = <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a>-&gt;<a class="function" onClick="logFunction('get_controller')" href="../../_functions/get_controller.html" onMouseOver="funcPopup(event,'get_controller')">get_controller</a>(<a class="var it20395" onMouseOver="hilite(20395)" onMouseOut="lolite()" onClick="logVariable('gradingmethod')" href="../../_variables/gradingmethod.html">$gradingmethod</a>);
<a name="l4402"><span class="linenum">4402</span></a>              if (<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('is_form_defined')" href="../../_functions/is_form_defined.html" onMouseOver="funcPopup(event,'is_form_defined')">is_form_defined</a>()) {
<a name="l4403"><span class="linenum">4403</span></a>                  <a class="var it25232" onMouseOver="hilite(25232)" onMouseOut="lolite()" onClick="logVariable('gradingcontrollerpreview')" href="../../_variables/gradingcontrollerpreview.html">$gradingcontrollerpreview</a> = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('render_preview')" href="../../_functions/render_preview.html" onMouseOver="funcPopup(event,'render_preview')">render_preview</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>);
<a name="l4404"><span class="linenum">4404</span></a>              }
<a name="l4405"><span class="linenum">4405</span></a>          }
<a name="l4406"><span class="linenum">4406</span></a>  
<a name="l4407"><span class="linenum">4407</span></a>          <a class="var it32182" onMouseOver="hilite(32182)" onMouseOut="lolite()" onClick="logVariable('showsubmit')" href="../../_variables/showsubmit.html">$showsubmit</a> = (<a class="var it32181" onMouseOver="hilite(32181)" onMouseOut="lolite()" onClick="logVariable('showlinks')" href="../../_variables/showlinks.html">$showlinks</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submissions_open')" href="../../_functions/submissions_open.html" onMouseOver="funcPopup(event,'submissions_open')">submissions_open</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l4408"><span class="linenum">4408</span></a>          <a class="var it32182" onMouseOver="hilite(32182)" onMouseOut="lolite()" onClick="logVariable('showsubmit')" href="../../_variables/showsubmit.html">$showsubmit</a> = (<a class="var it32182" onMouseOver="hilite(32182)" onMouseOut="lolite()" onClick="logVariable('showsubmit')" href="../../_variables/showsubmit.html">$showsubmit</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_submit_button')" href="../../_functions/show_submit_button.html" onMouseOver="funcPopup(event,'show_submit_button')">show_submit_button</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l4409"><span class="linenum">4409</span></a>  
<a name="l4410"><span class="linenum">4410</span></a>          <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a> = null;
<a name="l4411"><span class="linenum">4411</span></a>          if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>) {
<a name="l4412"><span class="linenum">4412</span></a>              <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a> = <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('extensionduedate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/extensionduedate.html">extensionduedate</a>;
<a name="l4413"><span class="linenum">4413</span></a>          }
<a name="l4414"><span class="linenum">4414</span></a>          <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>());
<a name="l4415"><span class="linenum">4415</span></a>  
<a name="l4416"><span class="linenum">4416</span></a>          <a class="var it25230" onMouseOver="hilite(25230)" onMouseOut="lolite()" onClick="logVariable('gradingstatus')" href="../../_variables/gradingstatus.html">$gradingstatus</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_grading_status')" href="../../_functions/get_grading_status.html" onMouseOver="funcPopup(event,'get_grading_status')">get_grading_status</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l4417"><span class="linenum">4417</span></a>          <a class="var it3731" onMouseOver="hilite(3731)" onMouseOut="lolite()" onClick="logVariable('usergroups')" href="../../_variables/usergroups.html">$usergroups</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_all_groups')" href="../../_functions/get_all_groups.html" onMouseOver="funcPopup(event,'get_all_groups')">get_all_groups</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l4418"><span class="linenum">4418</span></a>          <a class="var it32157" onMouseOver="hilite(32157)" onMouseOut="lolite()" onClick="logVariable('submissionstatus')" href="../../_variables/submissionstatus.html">$submissionstatus</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_submission_status')" href="../../_classes/assign_submission_status.html" onMouseOver="classPopup(event,'assign_submission_status')">assign_submission_status</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('allowsubmissionsfromdate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/allowsubmissionsfromdate.html">allowsubmissionsfromdate</a>,
<a name="l4419"><span class="linenum">4419</span></a>                                                            <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('alwaysshowdescription')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/alwaysshowdescription.html">alwaysshowdescription</a>,
<a name="l4420"><span class="linenum">4420</span></a>                                                            <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>,
<a name="l4421"><span class="linenum">4421</span></a>                                                            <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>,
<a name="l4422"><span class="linenum">4422</span></a>                                                            <a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a>,
<a name="l4423"><span class="linenum">4423</span></a>                                                            <a class="var it25223" onMouseOver="hilite(25223)" onMouseOut="lolite()" onClick="logVariable('submissiongroup')" href="../../_variables/submissiongroup.html">$submissiongroup</a>,
<a name="l4424"><span class="linenum">4424</span></a>                                                            <a class="var it15025" onMouseOver="hilite(15025)" onMouseOut="lolite()" onClick="logVariable('notsubmitted')" href="../../_variables/notsubmitted.html">$notsubmitted</a>,
<a name="l4425"><span class="linenum">4425</span></a>                                                            <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>(),
<a name="l4426"><span class="linenum">4426</span></a>                                                            <a class="var it32155" onMouseOver="hilite(32155)" onMouseOut="lolite()" onClick="logVariable('gradelocked')" href="../../_variables/gradelocked.html">$gradelocked</a>,
<a name="l4427"><span class="linenum">4427</span></a>                                                            <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_graded')" href="../../_functions/is_graded.html" onMouseOver="funcPopup(event,'is_graded')">is_graded</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l4428"><span class="linenum">4428</span></a>                                                            <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('duedate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/duedate.html">duedate</a>,
<a name="l4429"><span class="linenum">4429</span></a>                                                            <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('cutoffdate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/cutoffdate.html">cutoffdate</a>,
<a name="l4430"><span class="linenum">4430</span></a>                                                            <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>(),
<a name="l4431"><span class="linenum">4431</span></a>                                                            <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_action')" href="../../_functions/get_return_action.html" onMouseOver="funcPopup(event,'get_return_action')">get_return_action</a>(),
<a name="l4432"><span class="linenum">4432</span></a>                                                            <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_params')" href="../../_functions/get_return_params.html" onMouseOver="funcPopup(event,'get_return_params')">get_return_params</a>(),
<a name="l4433"><span class="linenum">4433</span></a>                                                            <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l4434"><span class="linenum">4434</span></a>                                                            <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l4435"><span class="linenum">4435</span></a>                                                            <a class="class" onClick="logClass('assign_submission_status')" href="../../_classes/assign_submission_status.html" onMouseOver="classPopup(event,'assign_submission_status')">assign_submission_status</a>::STUDENT_VIEW,
<a name="l4436"><span class="linenum">4436</span></a>                                                            <a class="var it32156" onMouseOver="hilite(32156)" onMouseOut="lolite()" onClick="logVariable('showedit')" href="../../_variables/showedit.html">$showedit</a>,
<a name="l4437"><span class="linenum">4437</span></a>                                                            <a class="var it32182" onMouseOver="hilite(32182)" onMouseOut="lolite()" onClick="logVariable('showsubmit')" href="../../_variables/showsubmit.html">$showsubmit</a>,
<a name="l4438"><span class="linenum">4438</span></a>                                                            <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>,
<a name="l4439"><span class="linenum">4439</span></a>                                                            <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a>,
<a name="l4440"><span class="linenum">4440</span></a>                                                            <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l4441"><span class="linenum">4441</span></a>                                                            <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>(),
<a name="l4442"><span class="linenum">4442</span></a>                                                            <a class="var it25232" onMouseOver="hilite(25232)" onMouseOut="lolite()" onClick="logVariable('gradingcontrollerpreview')" href="../../_variables/gradingcontrollerpreview.html">$gradingcontrollerpreview</a>,
<a name="l4443"><span class="linenum">4443</span></a>                                                            <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('attemptreopenmethod')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/attemptreopenmethod.html">attemptreopenmethod</a>,
<a name="l4444"><span class="linenum">4444</span></a>                                                            <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a>,
<a name="l4445"><span class="linenum">4445</span></a>                                                            <a class="var it25230" onMouseOver="hilite(25230)" onMouseOut="lolite()" onClick="logVariable('gradingstatus')" href="../../_variables/gradingstatus.html">$gradingstatus</a>,
<a name="l4446"><span class="linenum">4446</span></a>                                                            <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('preventsubmissionnotingroup')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/preventsubmissionnotingroup.html">preventsubmissionnotingroup</a>,
<a name="l4447"><span class="linenum">4447</span></a>                                                            <a class="var it3731" onMouseOver="hilite(3731)" onMouseOut="lolite()" onClick="logVariable('usergroups')" href="../../_variables/usergroups.html">$usergroups</a>);
<a name="l4448"><span class="linenum">4448</span></a>          return <a class="var it32157" onMouseOver="hilite(32157)" onMouseOut="lolite()" onClick="logVariable('submissionstatus')" href="../../_variables/submissionstatus.html">$submissionstatus</a>;
<a name="l4449"><span class="linenum">4449</span></a>      }
<a name="l4450"><span class="linenum">4450</span></a>  
<a name="l4451"><span class="linenum">4451</span></a>  
<a name="l4452"><span class="linenum">4452</span></a>      <span class="comment">/**</span>
<a name="l4453"><span class="linenum">4453</span></a>  <span class="comment">     * Creates an assign_feedback_status renderable.</span>
<a name="l4454"><span class="linenum">4454</span></a>  <span class="comment">     *</span>
<a name="l4455"><span class="linenum">4455</span></a>  <span class="comment">     * @param stdClass $user the user to get the report for</span>
<a name="l4456"><span class="linenum">4456</span></a>  <span class="comment">     * @return assign_feedback_status renderable object</span>
<a name="l4457"><span class="linenum">4457</span></a>  <span class="comment">     */</span>
<a name="l4458"><span class="linenum">4458</span></a>      public function <a class="function" onClick="logFunction('get_assign_feedback_status_renderable')" href="../../_functions/get_assign_feedback_status_renderable.html" onMouseOver="funcPopup(event,'get_assign_feedback_status_renderable')">get_assign_feedback_status_renderable</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l4459"><span class="linenum">4459</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l4460"><span class="linenum">4460</span></a>  
<a name="l4461"><span class="linenum">4461</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l4462"><span class="linenum">4462</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../grade/grading/lib.php.html">/grade/grading/lib.php</a>');
<a name="l4463"><span class="linenum">4463</span></a>  
<a name="l4464"><span class="linenum">4464</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l4465"><span class="linenum">4465</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l4466"><span class="linenum">4466</span></a>          <a class="var it25230" onMouseOver="hilite(25230)" onMouseOut="lolite()" onClick="logVariable('gradingstatus')" href="../../_variables/gradingstatus.html">$gradingstatus</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_grading_status')" href="../../_functions/get_grading_status.html" onMouseOver="funcPopup(event,'get_grading_status')">get_grading_status</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l4467"><span class="linenum">4467</span></a>  
<a name="l4468"><span class="linenum">4468</span></a>          <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l4469"><span class="linenum">4469</span></a>                                      'mod',
<a name="l4470"><span class="linenum">4470</span></a>                                      'assign',
<a name="l4471"><span class="linenum">4471</span></a>                                      <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l4472"><span class="linenum">4472</span></a>                                      <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l4473"><span class="linenum">4473</span></a>  
<a name="l4474"><span class="linenum">4474</span></a>          <a class="var it30891" onMouseOver="hilite(30891)" onMouseOut="lolite()" onClick="logVariable('gradingitem')" href="../../_variables/gradingitem.html">$gradingitem</a> = null;
<a name="l4475"><span class="linenum">4475</span></a>          <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a> = null;
<a name="l4476"><span class="linenum">4476</span></a>          if (isset(<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0])) {
<a name="l4477"><span class="linenum">4477</span></a>              <a class="var it30891" onMouseOver="hilite(30891)" onMouseOut="lolite()" onClick="logVariable('gradingitem')" href="../../_variables/gradingitem.html">$gradingitem</a> = <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0];
<a name="l4478"><span class="linenum">4478</span></a>              <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a> = <a class="var it30891" onMouseOver="hilite(30891)" onMouseOut="lolite()" onClick="logVariable('gradingitem')" href="../../_variables/gradingitem.html">$gradingitem</a>-&gt;<a onClick="logVariable('grades')" class="var it44980" onMouseOver="hilite(44980)" onMouseOut="lolite()" href="../../_variables/grades.html">grades</a>[<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>];
<a name="l4479"><span class="linenum">4479</span></a>          }
<a name="l4480"><span class="linenum">4480</span></a>  
<a name="l4481"><span class="linenum">4481</span></a>  <span class="comment">        // Check to see if all feedback plugins are empty.</span>
<a name="l4482"><span class="linenum">4482</span></a>          <a class="var it32183" onMouseOver="hilite(32183)" onMouseOut="lolite()" onClick="logVariable('emptyplugins')" href="../../_variables/emptyplugins.html">$emptyplugins</a> = true;
<a name="l4483"><span class="linenum">4483</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l4484"><span class="linenum">4484</span></a>              foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_plugins')" href="../../_functions/get_feedback_plugins.html" onMouseOver="funcPopup(event,'get_feedback_plugins')">get_feedback_plugins</a>() as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l4485"><span class="linenum">4485</span></a>                  if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>()) {
<a name="l4486"><span class="linenum">4486</span></a>                      if (!<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_empty')" href="../../_functions/is_empty.html" onMouseOver="funcPopup(event,'is_empty')">is_empty</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>)) {
<a name="l4487"><span class="linenum">4487</span></a>                          <a class="var it32183" onMouseOver="hilite(32183)" onMouseOut="lolite()" onClick="logVariable('emptyplugins')" href="../../_variables/emptyplugins.html">$emptyplugins</a> = false;
<a name="l4488"><span class="linenum">4488</span></a>                      }
<a name="l4489"><span class="linenum">4489</span></a>                  }
<a name="l4490"><span class="linenum">4490</span></a>              }
<a name="l4491"><span class="linenum">4491</span></a>          }
<a name="l4492"><span class="linenum">4492</span></a>  
<a name="l4493"><span class="linenum">4493</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow &amp;&amp; <a class="var it25230" onMouseOver="hilite(25230)" onMouseOut="lolite()" onClick="logVariable('gradingstatus')" href="../../_variables/gradingstatus.html">$gradingstatus</a> != <a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_RELEASED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')">ASSIGN_MARKING_WORKFLOW_STATE_RELEASED</a>) {
<a name="l4494"><span class="linenum">4494</span></a>              <a class="var it32183" onMouseOver="hilite(32183)" onMouseOut="lolite()" onClick="logVariable('emptyplugins')" href="../../_variables/emptyplugins.html">$emptyplugins</a> = true; <span class="comment">// Don't show feedback plugins until released either.</span>
<a name="l4495"><span class="linenum">4495</span></a>          }
<a name="l4496"><span class="linenum">4496</span></a>  
<a name="l4497"><span class="linenum">4497</span></a>          <a class="var it10462" onMouseOver="hilite(10462)" onMouseOut="lolite()" onClick="logVariable('cangrade')" href="../../_variables/cangrade.html">$cangrade</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:grade', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l4498"><span class="linenum">4498</span></a>  <span class="comment">        // If there is a visible grade, show the summary.</span>
<a name="l4499"><span class="linenum">4499</span></a>          if ((!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>-&gt;<a onClick="logVariable('grade')" class="var it43555" onMouseOver="hilite(43555)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>) || !<a class="var it32183" onMouseOver="hilite(32183)" onMouseOut="lolite()" onClick="logVariable('emptyplugins')" href="../../_variables/emptyplugins.html">$emptyplugins</a>)
<a name="l4500"><span class="linenum">4500</span></a>                  &amp;&amp; (<a class="var it10462" onMouseOver="hilite(10462)" onMouseOut="lolite()" onClick="logVariable('cangrade')" href="../../_variables/cangrade.html">$cangrade</a> || !<a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>-&gt;<a onClick="logVariable('hidden')" class="var it43555" onMouseOver="hilite(43555)" onMouseOut="lolite()" href="../../_variables/hidden.html">hidden</a>)) {
<a name="l4501"><span class="linenum">4501</span></a>  
<a name="l4502"><span class="linenum">4502</span></a>              <a class="var it25216" onMouseOver="hilite(25216)" onMouseOut="lolite()" onClick="logVariable('gradefordisplay')" href="../../_variables/gradefordisplay.html">$gradefordisplay</a> = null;
<a name="l4503"><span class="linenum">4503</span></a>              <a class="var it25217" onMouseOver="hilite(25217)" onMouseOut="lolite()" onClick="logVariable('gradeddate')" href="../../_variables/gradeddate.html">$gradeddate</a> = null;
<a name="l4504"><span class="linenum">4504</span></a>              <a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a> = null;
<a name="l4505"><span class="linenum">4505</span></a>              <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a> = <a class="function" onClick="logFunction('get_grading_manager')" href="../../_functions/get_grading_manager.html" onMouseOver="funcPopup(event,'get_grading_manager')">get_grading_manager</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(), 'mod_assign', 'submissions');
<a name="l4506"><span class="linenum">4506</span></a>  
<a name="l4507"><span class="linenum">4507</span></a>  <span class="comment">            // Only show the grade if it is not hidden in gradebook.</span>
<a name="l4508"><span class="linenum">4508</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>-&gt;<a onClick="logVariable('grade')" class="var it43555" onMouseOver="hilite(43555)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>) &amp;&amp; (<a class="var it10462" onMouseOver="hilite(10462)" onMouseOut="lolite()" onClick="logVariable('cangrade')" href="../../_variables/cangrade.html">$cangrade</a> || !<a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>-&gt;<a onClick="logVariable('hidden')" class="var it43555" onMouseOver="hilite(43555)" onMouseOut="lolite()" href="../../_variables/hidden.html">hidden</a>)) {
<a name="l4509"><span class="linenum">4509</span></a>                  if (<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a> = <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a>-&gt;<a class="function" onClick="logFunction('get_active_controller')" href="../../_functions/get_active_controller.html" onMouseOver="funcPopup(event,'get_active_controller')">get_active_controller</a>()) {
<a name="l4510"><span class="linenum">4510</span></a>                      <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../../_variables/menu.html">$menu</a> = <a class="function" onClick="logFunction('make_grades_menu')" href="../../_functions/make_grades_menu.html" onMouseOver="funcPopup(event,'make_grades_menu')">make_grades_menu</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade);
<a name="l4511"><span class="linenum">4511</span></a>                      <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('set_grade_range')" href="../../_functions/set_grade_range.html" onMouseOver="funcPopup(event,'set_grade_range')">set_grade_range</a>(<a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../../_variables/menu.html">$menu</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade &gt; 0);
<a name="l4512"><span class="linenum">4512</span></a>                      <a class="var it25216" onMouseOver="hilite(25216)" onMouseOut="lolite()" onClick="logVariable('gradefordisplay')" href="../../_variables/gradefordisplay.html">$gradefordisplay</a> = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('render_grade')" href="../../_functions/render_grade.html" onMouseOver="funcPopup(event,'render_grade')">render_grade</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>,
<a name="l4513"><span class="linenum">4513</span></a>                                                                   <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('id')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l4514"><span class="linenum">4514</span></a>                                                                   <a class="var it30891" onMouseOver="hilite(30891)" onMouseOut="lolite()" onClick="logVariable('gradingitem')" href="../../_variables/gradingitem.html">$gradingitem</a>,
<a name="l4515"><span class="linenum">4515</span></a>                                                                   <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it43555" onMouseOver="hilite(43555)" onMouseOut="lolite()" href="../../_variables/str_long_grade.html">str_long_grade</a>,
<a name="l4516"><span class="linenum">4516</span></a>                                                                   <a class="var it10462" onMouseOver="hilite(10462)" onMouseOut="lolite()" onClick="logVariable('cangrade')" href="../../_variables/cangrade.html">$cangrade</a>);
<a name="l4517"><span class="linenum">4517</span></a>                  } else {
<a name="l4518"><span class="linenum">4518</span></a>                      <a class="var it25216" onMouseOver="hilite(25216)" onMouseOut="lolite()" onClick="logVariable('gradefordisplay')" href="../../_variables/gradefordisplay.html">$gradefordisplay</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('display_grade')" href="../../_functions/display_grade.html" onMouseOver="funcPopup(event,'display_grade')">display_grade</a>(<a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>-&gt;<a onClick="logVariable('grade')" class="var it43555" onMouseOver="hilite(43555)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>, false);
<a name="l4519"><span class="linenum">4519</span></a>                  }
<a name="l4520"><span class="linenum">4520</span></a>                  <a class="var it25217" onMouseOver="hilite(25217)" onMouseOut="lolite()" onClick="logVariable('gradeddate')" href="../../_variables/gradeddate.html">$gradeddate</a> = <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>-&gt;<a onClick="logVariable('dategraded')" class="var it43555" onMouseOver="hilite(43555)" onMouseOut="lolite()" href="../../_variables/dategraded.html">dategraded</a>;
<a name="l4521"><span class="linenum">4521</span></a>                  if (isset(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a>)) {
<a name="l4522"><span class="linenum">4522</span></a>                      <a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a>));
<a name="l4523"><span class="linenum">4523</span></a>                  }
<a name="l4524"><span class="linenum">4524</span></a>              }
<a name="l4525"><span class="linenum">4525</span></a>  
<a name="l4526"><span class="linenum">4526</span></a>              <a class="var it32184" onMouseOver="hilite(32184)" onMouseOut="lolite()" onClick="logVariable('feedbackstatus')" href="../../_variables/feedbackstatus.html">$feedbackstatus</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_feedback_status')" href="../../_classes/assign_feedback_status.html" onMouseOver="classPopup(event,'assign_feedback_status')">assign_feedback_status</a>(<a class="var it25216" onMouseOver="hilite(25216)" onMouseOut="lolite()" onClick="logVariable('gradefordisplay')" href="../../_variables/gradefordisplay.html">$gradefordisplay</a>,
<a name="l4527"><span class="linenum">4527</span></a>                                                    <a class="var it25217" onMouseOver="hilite(25217)" onMouseOut="lolite()" onClick="logVariable('gradeddate')" href="../../_variables/gradeddate.html">$gradeddate</a>,
<a name="l4528"><span class="linenum">4528</span></a>                                                    <a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>,
<a name="l4529"><span class="linenum">4529</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_plugins')" href="../../_functions/get_feedback_plugins.html" onMouseOver="funcPopup(event,'get_feedback_plugins')">get_feedback_plugins</a>(),
<a name="l4530"><span class="linenum">4530</span></a>                                                    <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>,
<a name="l4531"><span class="linenum">4531</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l4532"><span class="linenum">4532</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_action')" href="../../_functions/get_return_action.html" onMouseOver="funcPopup(event,'get_return_action')">get_return_action</a>(),
<a name="l4533"><span class="linenum">4533</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_params')" href="../../_functions/get_return_params.html" onMouseOver="funcPopup(event,'get_return_params')">get_return_params</a>());
<a name="l4534"><span class="linenum">4534</span></a>              return <a class="var it32184" onMouseOver="hilite(32184)" onMouseOut="lolite()" onClick="logVariable('feedbackstatus')" href="../../_variables/feedbackstatus.html">$feedbackstatus</a>;
<a name="l4535"><span class="linenum">4535</span></a>          }
<a name="l4536"><span class="linenum">4536</span></a>          return;
<a name="l4537"><span class="linenum">4537</span></a>      }
<a name="l4538"><span class="linenum">4538</span></a>  
<a name="l4539"><span class="linenum">4539</span></a>      <span class="comment">/**</span>
<a name="l4540"><span class="linenum">4540</span></a>  <span class="comment">     * Creates an assign_attempt_history renderable.</span>
<a name="l4541"><span class="linenum">4541</span></a>  <span class="comment">     *</span>
<a name="l4542"><span class="linenum">4542</span></a>  <span class="comment">     * @param stdClass $user the user to get the report for</span>
<a name="l4543"><span class="linenum">4543</span></a>  <span class="comment">     * @return assign_attempt_history renderable object</span>
<a name="l4544"><span class="linenum">4544</span></a>  <span class="comment">     */</span>
<a name="l4545"><span class="linenum">4545</span></a>      public function <a class="function" onClick="logFunction('get_assign_attempt_history_renderable')" href="../../_functions/get_assign_attempt_history_renderable.html" onMouseOver="funcPopup(event,'get_assign_attempt_history_renderable')">get_assign_attempt_history_renderable</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l4546"><span class="linenum">4546</span></a>  
<a name="l4547"><span class="linenum">4547</span></a>          <a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_all_submissions')" href="../../_functions/get_all_submissions.html" onMouseOver="funcPopup(event,'get_all_submissions')">get_all_submissions</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l4548"><span class="linenum">4548</span></a>          <a class="var it3976" onMouseOver="hilite(3976)" onMouseOut="lolite()" onClick="logVariable('allgrades')" href="../../_variables/allgrades.html">$allgrades</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_all_grades')" href="../../_functions/get_all_grades.html" onMouseOver="funcPopup(event,'get_all_grades')">get_all_grades</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l4549"><span class="linenum">4549</span></a>  
<a name="l4550"><span class="linenum">4550</span></a>          <a class="var it15366" onMouseOver="hilite(15366)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../_variables/history.html">$history</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_attempt_history')" href="../../_classes/assign_attempt_history.html" onMouseOver="classPopup(event,'assign_attempt_history')">assign_attempt_history</a>(<a class="var it32112" onMouseOver="hilite(32112)" onMouseOut="lolite()" onClick="logVariable('allsubmissions')" href="../../_variables/allsubmissions.html">$allsubmissions</a>,
<a name="l4551"><span class="linenum">4551</span></a>                                                <a class="var it3976" onMouseOver="hilite(3976)" onMouseOut="lolite()" onClick="logVariable('allgrades')" href="../../_variables/allgrades.html">$allgrades</a>,
<a name="l4552"><span class="linenum">4552</span></a>                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>(),
<a name="l4553"><span class="linenum">4553</span></a>                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_plugins')" href="../../_functions/get_feedback_plugins.html" onMouseOver="funcPopup(event,'get_feedback_plugins')">get_feedback_plugins</a>(),
<a name="l4554"><span class="linenum">4554</span></a>                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l4555"><span class="linenum">4555</span></a>                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_action')" href="../../_functions/get_return_action.html" onMouseOver="funcPopup(event,'get_return_action')">get_return_action</a>(),
<a name="l4556"><span class="linenum">4556</span></a>                                                <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_params')" href="../../_functions/get_return_params.html" onMouseOver="funcPopup(event,'get_return_params')">get_return_params</a>(),
<a name="l4557"><span class="linenum">4557</span></a>                                                false,
<a name="l4558"><span class="linenum">4558</span></a>                                                0,
<a name="l4559"><span class="linenum">4559</span></a>                                                0);
<a name="l4560"><span class="linenum">4560</span></a>          return <a class="var it15366" onMouseOver="hilite(15366)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../_variables/history.html">$history</a>;
<a name="l4561"><span class="linenum">4561</span></a>      }
<a name="l4562"><span class="linenum">4562</span></a>  
<a name="l4563"><span class="linenum">4563</span></a>      <span class="comment">/**</span>
<a name="l4564"><span class="linenum">4564</span></a>  <span class="comment">     * Print 2 tables of information with no action links -</span>
<a name="l4565"><span class="linenum">4565</span></a>  <span class="comment">     * the submission summary and the grading summary.</span>
<a name="l4566"><span class="linenum">4566</span></a>  <span class="comment">     *</span>
<a name="l4567"><span class="linenum">4567</span></a>  <span class="comment">     * @param stdClass $user the user to print the report for</span>
<a name="l4568"><span class="linenum">4568</span></a>  <span class="comment">     * @param bool $showlinks - Return plain text or links to the profile</span>
<a name="l4569"><span class="linenum">4569</span></a>  <span class="comment">     * @return string - the html summary</span>
<a name="l4570"><span class="linenum">4570</span></a>  <span class="comment">     */</span>
<a name="l4571"><span class="linenum">4571</span></a>      public function <a class="function" onClick="logFunction('view_student_summary')" href="../../_functions/view_student_summary.html" onMouseOver="funcPopup(event,'view_student_summary')">view_student_summary</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it32181" onMouseOver="hilite(32181)" onMouseOut="lolite()" onClick="logVariable('showlinks')" href="../../_variables/showlinks.html">$showlinks</a>) {
<a name="l4572"><span class="linenum">4572</span></a>  
<a name="l4573"><span class="linenum">4573</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l4574"><span class="linenum">4574</span></a>  
<a name="l4575"><span class="linenum">4575</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_view_submission')" href="../../_functions/can_view_submission.html" onMouseOver="funcPopup(event,'can_view_submission')">can_view_submission</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l4576"><span class="linenum">4576</span></a>  
<a name="l4577"><span class="linenum">4577</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:submit', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(), <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>)) {
<a name="l4578"><span class="linenum">4578</span></a>                  <a class="var it32157" onMouseOver="hilite(32157)" onMouseOut="lolite()" onClick="logVariable('submissionstatus')" href="../../_variables/submissionstatus.html">$submissionstatus</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_assign_submission_status_renderable')" href="../../_functions/get_assign_submission_status_renderable.html" onMouseOver="funcPopup(event,'get_assign_submission_status_renderable')">get_assign_submission_status_renderable</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it32181" onMouseOver="hilite(32181)" onMouseOut="lolite()" onClick="logVariable('showlinks')" href="../../_variables/showlinks.html">$showlinks</a>);
<a name="l4579"><span class="linenum">4579</span></a>                  <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it32157" onMouseOver="hilite(32157)" onMouseOut="lolite()" onClick="logVariable('submissionstatus')" href="../../_variables/submissionstatus.html">$submissionstatus</a>);
<a name="l4580"><span class="linenum">4580</span></a>              }
<a name="l4581"><span class="linenum">4581</span></a>  
<a name="l4582"><span class="linenum">4582</span></a>  <span class="comment">            // If there is a visible grade, show the feedback.</span>
<a name="l4583"><span class="linenum">4583</span></a>              <a class="var it32184" onMouseOver="hilite(32184)" onMouseOut="lolite()" onClick="logVariable('feedbackstatus')" href="../../_variables/feedbackstatus.html">$feedbackstatus</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_assign_feedback_status_renderable')" href="../../_functions/get_assign_feedback_status_renderable.html" onMouseOver="funcPopup(event,'get_assign_feedback_status_renderable')">get_assign_feedback_status_renderable</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l4584"><span class="linenum">4584</span></a>              if (<a class="var it32184" onMouseOver="hilite(32184)" onMouseOut="lolite()" onClick="logVariable('feedbackstatus')" href="../../_variables/feedbackstatus.html">$feedbackstatus</a>) {
<a name="l4585"><span class="linenum">4585</span></a>                  <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it32184" onMouseOver="hilite(32184)" onMouseOut="lolite()" onClick="logVariable('feedbackstatus')" href="../../_variables/feedbackstatus.html">$feedbackstatus</a>);
<a name="l4586"><span class="linenum">4586</span></a>              }
<a name="l4587"><span class="linenum">4587</span></a>  
<a name="l4588"><span class="linenum">4588</span></a>  <span class="comment">            // If there is more than one submission, show the history.</span>
<a name="l4589"><span class="linenum">4589</span></a>              <a class="var it15366" onMouseOver="hilite(15366)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../_variables/history.html">$history</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_assign_attempt_history_renderable')" href="../../_functions/get_assign_attempt_history_renderable.html" onMouseOver="funcPopup(event,'get_assign_attempt_history_renderable')">get_assign_attempt_history_renderable</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l4590"><span class="linenum">4590</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it15366" onMouseOver="hilite(15366)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../_variables/history.html">$history</a>-&gt;<a onClick="logVariable('submissions')" class="var it44744" onMouseOver="hilite(44744)" onMouseOut="lolite()" href="../../_variables/submissions.html">submissions</a>) &gt; 1) {
<a name="l4591"><span class="linenum">4591</span></a>                  <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it15366" onMouseOver="hilite(15366)" onMouseOut="lolite()" onClick="logVariable('history')" href="../../_variables/history.html">$history</a>);
<a name="l4592"><span class="linenum">4592</span></a>              }
<a name="l4593"><span class="linenum">4593</span></a>          }
<a name="l4594"><span class="linenum">4594</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l4595"><span class="linenum">4595</span></a>      }
<a name="l4596"><span class="linenum">4596</span></a>  
<a name="l4597"><span class="linenum">4597</span></a>      <span class="comment">/**</span>
<a name="l4598"><span class="linenum">4598</span></a>  <span class="comment">     * Returns true if the submit subsission button should be shown to the user.</span>
<a name="l4599"><span class="linenum">4599</span></a>  <span class="comment">     *</span>
<a name="l4600"><span class="linenum">4600</span></a>  <span class="comment">     * @param stdClass $submission The users own submission record.</span>
<a name="l4601"><span class="linenum">4601</span></a>  <span class="comment">     * @param stdClass $teamsubmission The users team submission record if there is one</span>
<a name="l4602"><span class="linenum">4602</span></a>  <span class="comment">     * @param int $userid The user</span>
<a name="l4603"><span class="linenum">4603</span></a>  <span class="comment">     * @return bool</span>
<a name="l4604"><span class="linenum">4604</span></a>  <span class="comment">     */</span>
<a name="l4605"><span class="linenum">4605</span></a>      protected function <a class="function" onClick="logFunction('show_submit_button')" href="../../_functions/show_submit_button.html" onMouseOver="funcPopup(event,'show_submit_button')">show_submit_button</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = null, <a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a> = null, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = null) {
<a name="l4606"><span class="linenum">4606</span></a>          if (<a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a>) {
<a name="l4607"><span class="linenum">4607</span></a>              if (<a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a>-&gt;<a onClick="logVariable('status')" class="var it45743" onMouseOver="hilite(45743)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> === <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>) {
<a name="l4608"><span class="linenum">4608</span></a>  <span class="comment">                // The assignment submission has been completed.</span>
<a name="l4609"><span class="linenum">4609</span></a>                  return false;
<a name="l4610"><span class="linenum">4610</span></a>              } else if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submission_empty')" href="../../_functions/submission_empty.html" onMouseOver="funcPopup(event,'submission_empty')">submission_empty</a>(<a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a>)) {
<a name="l4611"><span class="linenum">4611</span></a>  <span class="comment">                // There is nothing to submit yet.</span>
<a name="l4612"><span class="linenum">4612</span></a>                  return false;
<a name="l4613"><span class="linenum">4613</span></a>              } else if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> &amp;&amp; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> === <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>) {
<a name="l4614"><span class="linenum">4614</span></a>  <span class="comment">                // The user has already clicked the submit button on the team submission.</span>
<a name="l4615"><span class="linenum">4615</span></a>                  return false;
<a name="l4616"><span class="linenum">4616</span></a>              } else if (
<a name="l4617"><span class="linenum">4617</span></a>                  !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;preventsubmissionnotingroup)
<a name="l4618"><span class="linenum">4618</span></a>                  &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) == false
<a name="l4619"><span class="linenum">4619</span></a>              ) {
<a name="l4620"><span class="linenum">4620</span></a>                  return false;
<a name="l4621"><span class="linenum">4621</span></a>              }
<a name="l4622"><span class="linenum">4622</span></a>          } else if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l4623"><span class="linenum">4623</span></a>              if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> === <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>) {
<a name="l4624"><span class="linenum">4624</span></a>  <span class="comment">                // The assignment submission has been completed.</span>
<a name="l4625"><span class="linenum">4625</span></a>                  return false;
<a name="l4626"><span class="linenum">4626</span></a>              } else if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submission_empty')" href="../../_functions/submission_empty.html" onMouseOver="funcPopup(event,'submission_empty')">submission_empty</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>)) {
<a name="l4627"><span class="linenum">4627</span></a>  <span class="comment">                // There is nothing to submit.</span>
<a name="l4628"><span class="linenum">4628</span></a>                  return false;
<a name="l4629"><span class="linenum">4629</span></a>              }
<a name="l4630"><span class="linenum">4630</span></a>          } else {
<a name="l4631"><span class="linenum">4631</span></a>  <span class="comment">            // We've not got a valid submission or team submission.</span>
<a name="l4632"><span class="linenum">4632</span></a>              return false;
<a name="l4633"><span class="linenum">4633</span></a>          }
<a name="l4634"><span class="linenum">4634</span></a>  <span class="comment">        // Last check is that this instance allows drafts.</span>
<a name="l4635"><span class="linenum">4635</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;submissiondrafts;
<a name="l4636"><span class="linenum">4636</span></a>      }
<a name="l4637"><span class="linenum">4637</span></a>  
<a name="l4638"><span class="linenum">4638</span></a>      <span class="comment">/**</span>
<a name="l4639"><span class="linenum">4639</span></a>  <span class="comment">     * Get the grades for all previous attempts.</span>
<a name="l4640"><span class="linenum">4640</span></a>  <span class="comment">     * For each grade - the grader is a full user record,</span>
<a name="l4641"><span class="linenum">4641</span></a>  <span class="comment">     * and gradefordisplay is added (rendered from grading manager).</span>
<a name="l4642"><span class="linenum">4642</span></a>  <span class="comment">     *</span>
<a name="l4643"><span class="linenum">4643</span></a>  <span class="comment">     * @param int $userid If not set, $USER-&gt;id will be used.</span>
<a name="l4644"><span class="linenum">4644</span></a>  <span class="comment">     * @return array $grades All grade records for this user.</span>
<a name="l4645"><span class="linenum">4645</span></a>  <span class="comment">     */</span>
<a name="l4646"><span class="linenum">4646</span></a>      protected function <a class="function" onClick="logFunction('get_all_grades')" href="../../_functions/get_all_grades.html" onMouseOver="funcPopup(event,'get_all_grades')">get_all_grades</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l4647"><span class="linenum">4647</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l4648"><span class="linenum">4648</span></a>  
<a name="l4649"><span class="linenum">4649</span></a>  <span class="comment">        // If the userid is not null then use userid.</span>
<a name="l4650"><span class="linenum">4650</span></a>          if (!<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l4651"><span class="linenum">4651</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l4652"><span class="linenum">4652</span></a>          }
<a name="l4653"><span class="linenum">4653</span></a>  
<a name="l4654"><span class="linenum">4654</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('assignment'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id, 'userid'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l4655"><span class="linenum">4655</span></a>  
<a name="l4656"><span class="linenum">4656</span></a>          <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('assign_grades', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'attemptnumber ASC');
<a name="l4657"><span class="linenum">4657</span></a>  
<a name="l4658"><span class="linenum">4658</span></a>          <a class="var it32185" onMouseOver="hilite(32185)" onMouseOut="lolite()" onClick="logVariable('gradercache')" href="../../_variables/gradercache.html">$gradercache</a> = array();
<a name="l4659"><span class="linenum">4659</span></a>          <a class="var it10462" onMouseOver="hilite(10462)" onMouseOut="lolite()" onClick="logVariable('cangrade')" href="../../_variables/cangrade.html">$cangrade</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:grade', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>());
<a name="l4660"><span class="linenum">4660</span></a>  
<a name="l4661"><span class="linenum">4661</span></a>  <span class="comment">        // Need gradingitem and gradingmanager.</span>
<a name="l4662"><span class="linenum">4662</span></a>          <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a> = <a class="function" onClick="logFunction('get_grading_manager')" href="../../_functions/get_grading_manager.html" onMouseOver="funcPopup(event,'get_grading_manager')">get_grading_manager</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(), 'mod_assign', 'submissions');
<a name="l4663"><span class="linenum">4663</span></a>          <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a> = <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a>-&gt;<a class="function" onClick="logFunction('get_active_controller')" href="../../_functions/get_active_controller.html" onMouseOver="funcPopup(event,'get_active_controller')">get_active_controller</a>();
<a name="l4664"><span class="linenum">4664</span></a>  
<a name="l4665"><span class="linenum">4665</span></a>          <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l4666"><span class="linenum">4666</span></a>                                          'mod',
<a name="l4667"><span class="linenum">4667</span></a>                                          'assign',
<a name="l4668"><span class="linenum">4668</span></a>                                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id,
<a name="l4669"><span class="linenum">4669</span></a>                                          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l4670"><span class="linenum">4670</span></a>  
<a name="l4671"><span class="linenum">4671</span></a>          <a class="var it30891" onMouseOver="hilite(30891)" onMouseOut="lolite()" onClick="logVariable('gradingitem')" href="../../_variables/gradingitem.html">$gradingitem</a> = null;
<a name="l4672"><span class="linenum">4672</span></a>          if (isset(<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0])) {
<a name="l4673"><span class="linenum">4673</span></a>              <a class="var it30891" onMouseOver="hilite(30891)" onMouseOut="lolite()" onClick="logVariable('gradingitem')" href="../../_variables/gradingitem.html">$gradingitem</a> = <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0];
<a name="l4674"><span class="linenum">4674</span></a>          }
<a name="l4675"><span class="linenum">4675</span></a>  
<a name="l4676"><span class="linenum">4676</span></a>          foreach (<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> as <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l4677"><span class="linenum">4677</span></a>  <span class="comment">            // First lookup the grader info.</span>
<a name="l4678"><span class="linenum">4678</span></a>              if (isset(<a class="var it32185" onMouseOver="hilite(32185)" onMouseOut="lolite()" onClick="logVariable('gradercache')" href="../../_variables/gradercache.html">$gradercache</a>[<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a>])) {
<a name="l4679"><span class="linenum">4679</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a> = <a class="var it32185" onMouseOver="hilite(32185)" onMouseOut="lolite()" onClick="logVariable('gradercache')" href="../../_variables/gradercache.html">$gradercache</a>[<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a>];
<a name="l4680"><span class="linenum">4680</span></a>              } else {
<a name="l4681"><span class="linenum">4681</span></a>  <span class="comment">                // Not in cache - need to load the grader record.</span>
<a name="l4682"><span class="linenum">4682</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a>));
<a name="l4683"><span class="linenum">4683</span></a>                  <a class="var it32185" onMouseOver="hilite(32185)" onMouseOut="lolite()" onClick="logVariable('gradercache')" href="../../_variables/gradercache.html">$gradercache</a>[<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a>-&gt;id] = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a>;
<a name="l4684"><span class="linenum">4684</span></a>              }
<a name="l4685"><span class="linenum">4685</span></a>  
<a name="l4686"><span class="linenum">4686</span></a>  <span class="comment">            // Now get the gradefordisplay.</span>
<a name="l4687"><span class="linenum">4687</span></a>              if (<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>) {
<a name="l4688"><span class="linenum">4688</span></a>                  <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('set_grade_range')" href="../../_functions/set_grade_range.html" onMouseOver="funcPopup(event,'set_grade_range')">set_grade_range</a>(<a class="function" onClick="logFunction('make_grades_menu')" href="../../_functions/make_grades_menu.html" onMouseOver="funcPopup(event,'make_grades_menu')">make_grades_menu</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade &gt; 0);
<a name="l4689"><span class="linenum">4689</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('gradefordisplay')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/gradefordisplay.html">gradefordisplay</a> = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('render_grade')" href="../../_functions/render_grade.html" onMouseOver="funcPopup(event,'render_grade')">render_grade</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>,
<a name="l4690"><span class="linenum">4690</span></a>                                                                       <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('id')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l4691"><span class="linenum">4691</span></a>                                                                       <a class="var it30891" onMouseOver="hilite(30891)" onMouseOut="lolite()" onClick="logVariable('gradingitem')" href="../../_variables/gradingitem.html">$gradingitem</a>,
<a name="l4692"><span class="linenum">4692</span></a>                                                                       <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>,
<a name="l4693"><span class="linenum">4693</span></a>                                                                       <a class="var it10462" onMouseOver="hilite(10462)" onMouseOut="lolite()" onClick="logVariable('cangrade')" href="../../_variables/cangrade.html">$cangrade</a>);
<a name="l4694"><span class="linenum">4694</span></a>              } else {
<a name="l4695"><span class="linenum">4695</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('gradefordisplay')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/gradefordisplay.html">gradefordisplay</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('display_grade')" href="../../_functions/display_grade.html" onMouseOver="funcPopup(event,'display_grade')">display_grade</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>, false);
<a name="l4696"><span class="linenum">4696</span></a>              }
<a name="l4697"><span class="linenum">4697</span></a>  
<a name="l4698"><span class="linenum">4698</span></a>          }
<a name="l4699"><span class="linenum">4699</span></a>  
<a name="l4700"><span class="linenum">4700</span></a>          return <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>;
<a name="l4701"><span class="linenum">4701</span></a>      }
<a name="l4702"><span class="linenum">4702</span></a>  
<a name="l4703"><span class="linenum">4703</span></a>      <span class="comment">/**</span>
<a name="l4704"><span class="linenum">4704</span></a>  <span class="comment">     * Get the submissions for all previous attempts.</span>
<a name="l4705"><span class="linenum">4705</span></a>  <span class="comment">     *</span>
<a name="l4706"><span class="linenum">4706</span></a>  <span class="comment">     * @param int $userid If not set, $USER-&gt;id will be used.</span>
<a name="l4707"><span class="linenum">4707</span></a>  <span class="comment">     * @return array $submissions All submission records for this user (or group).</span>
<a name="l4708"><span class="linenum">4708</span></a>  <span class="comment">     */</span>
<a name="l4709"><span class="linenum">4709</span></a>      protected function <a class="function" onClick="logFunction('get_all_submissions')" href="../../_functions/get_all_submissions.html" onMouseOver="funcPopup(event,'get_all_submissions')">get_all_submissions</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l4710"><span class="linenum">4710</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l4711"><span class="linenum">4711</span></a>  
<a name="l4712"><span class="linenum">4712</span></a>  <span class="comment">        // If the userid is not null then use userid.</span>
<a name="l4713"><span class="linenum">4713</span></a>          if (!<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l4714"><span class="linenum">4714</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l4715"><span class="linenum">4715</span></a>          }
<a name="l4716"><span class="linenum">4716</span></a>  
<a name="l4717"><span class="linenum">4717</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l4718"><span class="linenum">4718</span></a>  
<a name="l4719"><span class="linenum">4719</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l4720"><span class="linenum">4720</span></a>              <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = 0;
<a name="l4721"><span class="linenum">4721</span></a>              <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l4722"><span class="linenum">4722</span></a>              if (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>) {
<a name="l4723"><span class="linenum">4723</span></a>                  <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l4724"><span class="linenum">4724</span></a>              }
<a name="l4725"><span class="linenum">4725</span></a>  
<a name="l4726"><span class="linenum">4726</span></a>  <span class="comment">            // Params to get the group submissions.</span>
<a name="l4727"><span class="linenum">4727</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('assignment'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id, 'groupid'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, 'userid'=&gt;0);
<a name="l4728"><span class="linenum">4728</span></a>          } else {
<a name="l4729"><span class="linenum">4729</span></a>  <span class="comment">            // Params to get the user submissions.</span>
<a name="l4730"><span class="linenum">4730</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('assignment'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id, 'userid'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l4731"><span class="linenum">4731</span></a>          }
<a name="l4732"><span class="linenum">4732</span></a>  
<a name="l4733"><span class="linenum">4733</span></a>  <span class="comment">        // Return the submissions ordered by attempt.</span>
<a name="l4734"><span class="linenum">4734</span></a>          <a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('assign_submission', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'attemptnumber ASC');
<a name="l4735"><span class="linenum">4735</span></a>  
<a name="l4736"><span class="linenum">4736</span></a>          return <a class="var it8117" onMouseOver="hilite(8117)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>;
<a name="l4737"><span class="linenum">4737</span></a>      }
<a name="l4738"><span class="linenum">4738</span></a>  
<a name="l4739"><span class="linenum">4739</span></a>      <span class="comment">/**</span>
<a name="l4740"><span class="linenum">4740</span></a>  <span class="comment">     * Creates an assign_grading_summary renderable.</span>
<a name="l4741"><span class="linenum">4741</span></a>  <span class="comment">     *</span>
<a name="l4742"><span class="linenum">4742</span></a>  <span class="comment">     * @return assign_grading_summary renderable object</span>
<a name="l4743"><span class="linenum">4743</span></a>  <span class="comment">     */</span>
<a name="l4744"><span class="linenum">4744</span></a>      public function <a class="function" onClick="logFunction('get_assign_grading_summary_renderable')" href="../../_functions/get_assign_grading_summary_renderable.html" onMouseOver="funcPopup(event,'get_assign_grading_summary_renderable')">get_assign_grading_summary_renderable</a>() {
<a name="l4745"><span class="linenum">4745</span></a>  
<a name="l4746"><span class="linenum">4746</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l4747"><span class="linenum">4747</span></a>  
<a name="l4748"><span class="linenum">4748</span></a>          <a class="var it285" onMouseOver="hilite(285)" onMouseOut="lolite()" onClick="logVariable('draft')" href="../../_variables/draft.html">$draft</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_DRAFT')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_DRAFT.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_DRAFT')">ASSIGN_SUBMISSION_STATUS_DRAFT</a>;
<a name="l4749"><span class="linenum">4749</span></a>          <a class="var it15024" onMouseOver="hilite(15024)" onMouseOut="lolite()" onClick="logVariable('submitted')" href="../../_variables/submitted.html">$submitted</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>;
<a name="l4750"><span class="linenum">4750</span></a>  
<a name="l4751"><span class="linenum">4751</span></a>          <a class="var it32128" onMouseOver="hilite(32128)" onMouseOut="lolite()" onClick="logVariable('activitygroup')" href="../../_variables/activitygroup.html">$activitygroup</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>());
<a name="l4752"><span class="linenum">4752</span></a>  
<a name="l4753"><span class="linenum">4753</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>) {
<a name="l4754"><span class="linenum">4754</span></a>              <a class="var it32186" onMouseOver="hilite(32186)" onMouseOut="lolite()" onClick="logVariable('defaultteammembers')" href="../../_variables/defaultteammembers.html">$defaultteammembers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group_members')" href="../../_functions/get_submission_group_members.html" onMouseOver="funcPopup(event,'get_submission_group_members')">get_submission_group_members</a>(0, true);
<a name="l4755"><span class="linenum">4755</span></a>              <a class="var it25209" onMouseOver="hilite(25209)" onMouseOut="lolite()" onClick="logVariable('warnofungroupedusers')" href="../../_variables/warnofungroupedusers.html">$warnofungroupedusers</a> = (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32186" onMouseOver="hilite(32186)" onMouseOut="lolite()" onClick="logVariable('defaultteammembers')" href="../../_variables/defaultteammembers.html">$defaultteammembers</a>) &gt; 0 &amp;&amp; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('preventsubmissionnotingroup')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/preventsubmissionnotingroup.html">preventsubmissionnotingroup</a>);
<a name="l4756"><span class="linenum">4756</span></a>  
<a name="l4757"><span class="linenum">4757</span></a>              <a class="var it958" onMouseOver="hilite(958)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../_variables/summary.html">$summary</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_grading_summary')" href="../../_classes/assign_grading_summary.html" onMouseOver="classPopup(event,'assign_grading_summary')">assign_grading_summary</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_teams')" href="../../_functions/count_teams.html" onMouseOver="funcPopup(event,'count_teams')">count_teams</a>(<a class="var it32128" onMouseOver="hilite(32128)" onMouseOut="lolite()" onClick="logVariable('activitygroup')" href="../../_variables/activitygroup.html">$activitygroup</a>),
<a name="l4758"><span class="linenum">4758</span></a>                                                    <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('submissiondrafts')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/submissiondrafts.html">submissiondrafts</a>,
<a name="l4759"><span class="linenum">4759</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_submissions_with_status')" href="../../_functions/count_submissions_with_status.html" onMouseOver="funcPopup(event,'count_submissions_with_status')">count_submissions_with_status</a>(<a class="var it285" onMouseOver="hilite(285)" onMouseOut="lolite()" onClick="logVariable('draft')" href="../../_variables/draft.html">$draft</a>),
<a name="l4760"><span class="linenum">4760</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>(),
<a name="l4761"><span class="linenum">4761</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_submissions_with_status')" href="../../_functions/count_submissions_with_status.html" onMouseOver="funcPopup(event,'count_submissions_with_status')">count_submissions_with_status</a>(<a class="var it15024" onMouseOver="hilite(15024)" onMouseOut="lolite()" onClick="logVariable('submitted')" href="../../_variables/submitted.html">$submitted</a>),
<a name="l4762"><span class="linenum">4762</span></a>                                                    <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('cutoffdate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/cutoffdate.html">cutoffdate</a>,
<a name="l4763"><span class="linenum">4763</span></a>                                                    <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('duedate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/duedate.html">duedate</a>,
<a name="l4764"><span class="linenum">4764</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l4765"><span class="linenum">4765</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_submissions_need_grading')" href="../../_functions/count_submissions_need_grading.html" onMouseOver="funcPopup(event,'count_submissions_need_grading')">count_submissions_need_grading</a>(),
<a name="l4766"><span class="linenum">4766</span></a>                                                    <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>,
<a name="l4767"><span class="linenum">4767</span></a>                                                    <a class="var it25209" onMouseOver="hilite(25209)" onMouseOut="lolite()" onClick="logVariable('warnofungroupedusers')" href="../../_variables/warnofungroupedusers.html">$warnofungroupedusers</a>);
<a name="l4768"><span class="linenum">4768</span></a>          } else {
<a name="l4769"><span class="linenum">4769</span></a>  <span class="comment">            // The active group has already been updated in groups_print_activity_menu().</span>
<a name="l4770"><span class="linenum">4770</span></a>              <a class="var it15022" onMouseOver="hilite(15022)" onMouseOut="lolite()" onClick="logVariable('countparticipants')" href="../../_variables/countparticipants.html">$countparticipants</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_participants')" href="../../_functions/count_participants.html" onMouseOver="funcPopup(event,'count_participants')">count_participants</a>(<a class="var it32128" onMouseOver="hilite(32128)" onMouseOut="lolite()" onClick="logVariable('activitygroup')" href="../../_variables/activitygroup.html">$activitygroup</a>);
<a name="l4771"><span class="linenum">4771</span></a>              <a class="var it958" onMouseOver="hilite(958)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../_variables/summary.html">$summary</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_grading_summary')" href="../../_classes/assign_grading_summary.html" onMouseOver="classPopup(event,'assign_grading_summary')">assign_grading_summary</a>(<a class="var it15022" onMouseOver="hilite(15022)" onMouseOut="lolite()" onClick="logVariable('countparticipants')" href="../../_variables/countparticipants.html">$countparticipants</a>,
<a name="l4772"><span class="linenum">4772</span></a>                                                    <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('submissiondrafts')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/submissiondrafts.html">submissiondrafts</a>,
<a name="l4773"><span class="linenum">4773</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_submissions_with_status')" href="../../_functions/count_submissions_with_status.html" onMouseOver="funcPopup(event,'count_submissions_with_status')">count_submissions_with_status</a>(<a class="var it285" onMouseOver="hilite(285)" onMouseOut="lolite()" onClick="logVariable('draft')" href="../../_variables/draft.html">$draft</a>),
<a name="l4774"><span class="linenum">4774</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>(),
<a name="l4775"><span class="linenum">4775</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_submissions_with_status')" href="../../_functions/count_submissions_with_status.html" onMouseOver="funcPopup(event,'count_submissions_with_status')">count_submissions_with_status</a>(<a class="var it15024" onMouseOver="hilite(15024)" onMouseOut="lolite()" onClick="logVariable('submitted')" href="../../_variables/submitted.html">$submitted</a>),
<a name="l4776"><span class="linenum">4776</span></a>                                                    <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('cutoffdate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/cutoffdate.html">cutoffdate</a>,
<a name="l4777"><span class="linenum">4777</span></a>                                                    <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('duedate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/duedate.html">duedate</a>,
<a name="l4778"><span class="linenum">4778</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l4779"><span class="linenum">4779</span></a>                                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('count_submissions_need_grading')" href="../../_functions/count_submissions_need_grading.html" onMouseOver="funcPopup(event,'count_submissions_need_grading')">count_submissions_need_grading</a>(),
<a name="l4780"><span class="linenum">4780</span></a>                                                    <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>,
<a name="l4781"><span class="linenum">4781</span></a>                                                    false);
<a name="l4782"><span class="linenum">4782</span></a>  
<a name="l4783"><span class="linenum">4783</span></a>          }
<a name="l4784"><span class="linenum">4784</span></a>  
<a name="l4785"><span class="linenum">4785</span></a>          return <a class="var it958" onMouseOver="hilite(958)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../_variables/summary.html">$summary</a>;
<a name="l4786"><span class="linenum">4786</span></a>      }
<a name="l4787"><span class="linenum">4787</span></a>  
<a name="l4788"><span class="linenum">4788</span></a>      <span class="comment">/**</span>
<a name="l4789"><span class="linenum">4789</span></a>  <span class="comment">     * View submissions page (contains details of current submission).</span>
<a name="l4790"><span class="linenum">4790</span></a>  <span class="comment">     *</span>
<a name="l4791"><span class="linenum">4791</span></a>  <span class="comment">     * @return string</span>
<a name="l4792"><span class="linenum">4792</span></a>  <span class="comment">     */</span>
<a name="l4793"><span class="linenum">4793</span></a>      protected function <a class="function" onClick="logFunction('view_submission_page')" href="../../_functions/view_submission_page.html" onMouseOver="funcPopup(event,'view_submission_page')">view_submission_page</a>() {
<a name="l4794"><span class="linenum">4794</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l4795"><span class="linenum">4795</span></a>  
<a name="l4796"><span class="linenum">4796</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l4797"><span class="linenum">4797</span></a>  
<a name="l4798"><span class="linenum">4798</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> = '';
<a name="l4799"><span class="linenum">4799</span></a>  
<a name="l4800"><span class="linenum">4800</span></a>          <a class="var it4952" onMouseOver="hilite(4952)" onMouseOut="lolite()" onClick="logVariable('postfix')" href="../../_variables/postfix.html">$postfix</a> = '';
<a name="l4801"><span class="linenum">4801</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_visible_attachments')" href="../../_functions/has_visible_attachments.html" onMouseOver="funcPopup(event,'has_visible_attachments')">has_visible_attachments</a>()) {
<a name="l4802"><span class="linenum">4802</span></a>              <a class="var it4952" onMouseOver="hilite(4952)" onMouseOut="lolite()" onClick="logVariable('postfix')" href="../../_variables/postfix.html">$postfix</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('render_area_files')" href="../../_functions/render_area_files.html" onMouseOver="funcPopup(event,'render_area_files')">render_area_files</a>('mod_assign', <a class="constant" onClick="logConstant('ASSIGN_INTROATTACHMENT_FILEAREA')" href="../../_constants/ASSIGN_INTROATTACHMENT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGN_INTROATTACHMENT_FILEAREA')">ASSIGN_INTROATTACHMENT_FILEAREA</a>, 0);
<a name="l4803"><span class="linenum">4803</span></a>          }
<a name="l4804"><span class="linenum">4804</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_header')" href="../../_classes/assign_header.html" onMouseOver="classPopup(event,'assign_header')">assign_header</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>,
<a name="l4805"><span class="linenum">4805</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l4806"><span class="linenum">4806</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_intro')" href="../../_functions/show_intro.html" onMouseOver="funcPopup(event,'show_intro')">show_intro</a>(),
<a name="l4807"><span class="linenum">4807</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l4808"><span class="linenum">4808</span></a>                                                        '', '', <a class="var it4952" onMouseOver="hilite(4952)" onMouseOut="lolite()" onClick="logVariable('postfix')" href="../../_variables/postfix.html">$postfix</a>));
<a name="l4809"><span class="linenum">4809</span></a>  
<a name="l4810"><span class="linenum">4810</span></a>  <span class="comment">        // Display plugin specific headers.</span>
<a name="l4811"><span class="linenum">4811</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>(), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_plugins')" href="../../_functions/get_feedback_plugins.html" onMouseOver="funcPopup(event,'get_feedback_plugins')">get_feedback_plugins</a>());
<a name="l4812"><span class="linenum">4812</span></a>          foreach (<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l4813"><span class="linenum">4813</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l4814"><span class="linenum">4814</span></a>                  <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<span class="keyword">new </span><a class="class" onClick="logClass('assign_plugin_header')" href="../../_classes/assign_plugin_header.html" onMouseOver="classPopup(event,'assign_plugin_header')">assign_plugin_header</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>));
<a name="l4815"><span class="linenum">4815</span></a>              }
<a name="l4816"><span class="linenum">4816</span></a>          }
<a name="l4817"><span class="linenum">4817</span></a>  
<a name="l4818"><span class="linenum">4818</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_view_grades')" href="../../_functions/can_view_grades.html" onMouseOver="funcPopup(event,'can_view_grades')">can_view_grades</a>()) {
<a name="l4819"><span class="linenum">4819</span></a>  <span class="comment">            // Group selector will only be displayed if necessary.</span>
<a name="l4820"><span class="linenum">4820</span></a>              <a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../../_variables/currenturl.html">$currenturl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/assign/view.php.html">/mod/assign/view.php</a>', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id));
<a name="l4821"><span class="linenum">4821</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="function" onClick="logFunction('groups_print_activity_menu')" href="../../_functions/groups_print_activity_menu.html" onMouseOver="funcPopup(event,'groups_print_activity_menu')">groups_print_activity_menu</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), <a class="var it7785" onMouseOver="hilite(7785)" onMouseOut="lolite()" onClick="logVariable('currenturl')" href="../../_variables/currenturl.html">$currenturl</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), true);
<a name="l4822"><span class="linenum">4822</span></a>  
<a name="l4823"><span class="linenum">4823</span></a>              <a class="var it958" onMouseOver="hilite(958)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../_variables/summary.html">$summary</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_assign_grading_summary_renderable')" href="../../_functions/get_assign_grading_summary_renderable.html" onMouseOver="funcPopup(event,'get_assign_grading_summary_renderable')">get_assign_grading_summary_renderable</a>();
<a name="l4824"><span class="linenum">4824</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it958" onMouseOver="hilite(958)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../../_variables/summary.html">$summary</a>);
<a name="l4825"><span class="linenum">4825</span></a>          }
<a name="l4826"><span class="linenum">4826</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l4827"><span class="linenum">4827</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l4828"><span class="linenum">4828</span></a>  
<a name="l4829"><span class="linenum">4829</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_view_submission')" href="../../_functions/can_view_submission.html" onMouseOver="funcPopup(event,'can_view_submission')">can_view_submission</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l4830"><span class="linenum">4830</span></a>              <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_student_summary')" href="../../_functions/view_student_summary.html" onMouseOver="funcPopup(event,'view_student_summary')">view_student_summary</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, true);
<a name="l4831"><span class="linenum">4831</span></a>          }
<a name="l4832"><span class="linenum">4832</span></a>  
<a name="l4833"><span class="linenum">4833</span></a>          <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('view_footer')" href="../../_functions/view_footer.html" onMouseOver="funcPopup(event,'view_footer')">view_footer</a>();
<a name="l4834"><span class="linenum">4834</span></a>  
<a name="l4835"><span class="linenum">4835</span></a>          \mod_assign\event\<a class="class" onClick="logClass('submission_status_viewed')" href="../../_classes/submission_status_viewed.html" onMouseOver="classPopup(event,'submission_status_viewed')">submission_status_viewed</a>::<a class="function" onClick="logFunction('create_from_assign')" href="../../_functions/create_from_assign.html" onMouseOver="funcPopup(event,'create_from_assign')">create_from_assign</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l4836"><span class="linenum">4836</span></a>  
<a name="l4837"><span class="linenum">4837</span></a>          return <a class="var it1491" onMouseOver="hilite(1491)" onMouseOut="lolite()" onClick="logVariable('o')" href="../../_variables/o.html">$o</a>;
<a name="l4838"><span class="linenum">4838</span></a>      }
<a name="l4839"><span class="linenum">4839</span></a>  
<a name="l4840"><span class="linenum">4840</span></a>      <span class="comment">/**</span>
<a name="l4841"><span class="linenum">4841</span></a>  <span class="comment">     * Convert the final raw grade(s) in the grading table for the gradebook.</span>
<a name="l4842"><span class="linenum">4842</span></a>  <span class="comment">     *</span>
<a name="l4843"><span class="linenum">4843</span></a>  <span class="comment">     * @param stdClass $grade</span>
<a name="l4844"><span class="linenum">4844</span></a>  <span class="comment">     * @return array</span>
<a name="l4845"><span class="linenum">4845</span></a>  <span class="comment">     */</span>
<a name="l4846"><span class="linenum">4846</span></a>      protected function <a class="function" onClick="logFunction('convert_grade_for_gradebook')" href="../../_functions/convert_grade_for_gradebook.html" onMouseOver="funcPopup(event,'convert_grade_for_gradebook')">convert_grade_for_gradebook</a>(stdClass <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l4847"><span class="linenum">4847</span></a>          <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a> = array();
<a name="l4848"><span class="linenum">4848</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> &gt;= 0) {
<a name="l4849"><span class="linenum">4849</span></a>              <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>['rawgrade'] = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>;
<a name="l4850"><span class="linenum">4850</span></a>          }
<a name="l4851"><span class="linenum">4851</span></a>  <span class="comment">        // Allow &quot;no grade&quot; to be chosen.</span>
<a name="l4852"><span class="linenum">4852</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> == -1) {
<a name="l4853"><span class="linenum">4853</span></a>              <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>['rawgrade'] = NULL;
<a name="l4854"><span class="linenum">4854</span></a>          }
<a name="l4855"><span class="linenum">4855</span></a>          <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>['userid'] = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l4856"><span class="linenum">4856</span></a>          <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>['usermodified'] = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a>;
<a name="l4857"><span class="linenum">4857</span></a>          <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>['datesubmitted'] = null;
<a name="l4858"><span class="linenum">4858</span></a>          <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>['dategraded'] = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>;
<a name="l4859"><span class="linenum">4859</span></a>          if (isset(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/feedbackformat.html">feedbackformat</a>)) {
<a name="l4860"><span class="linenum">4860</span></a>              <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>['feedbackformat'] = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/feedbackformat.html">feedbackformat</a>;
<a name="l4861"><span class="linenum">4861</span></a>          }
<a name="l4862"><span class="linenum">4862</span></a>          if (isset(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>)) {
<a name="l4863"><span class="linenum">4863</span></a>              <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>['feedback'] = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a>;
<a name="l4864"><span class="linenum">4864</span></a>          }
<a name="l4865"><span class="linenum">4865</span></a>  
<a name="l4866"><span class="linenum">4866</span></a>          return <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>;
<a name="l4867"><span class="linenum">4867</span></a>      }
<a name="l4868"><span class="linenum">4868</span></a>  
<a name="l4869"><span class="linenum">4869</span></a>      <span class="comment">/**</span>
<a name="l4870"><span class="linenum">4870</span></a>  <span class="comment">     * Convert submission details for the gradebook.</span>
<a name="l4871"><span class="linenum">4871</span></a>  <span class="comment">     *</span>
<a name="l4872"><span class="linenum">4872</span></a>  <span class="comment">     * @param stdClass $submission</span>
<a name="l4873"><span class="linenum">4873</span></a>  <span class="comment">     * @return array</span>
<a name="l4874"><span class="linenum">4874</span></a>  <span class="comment">     */</span>
<a name="l4875"><span class="linenum">4875</span></a>      protected function <a class="function" onClick="logFunction('convert_submission_for_gradebook')" href="../../_functions/convert_submission_for_gradebook.html" onMouseOver="funcPopup(event,'convert_submission_for_gradebook')">convert_submission_for_gradebook</a>(stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l4876"><span class="linenum">4876</span></a>          <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a> = array();
<a name="l4877"><span class="linenum">4877</span></a>  
<a name="l4878"><span class="linenum">4878</span></a>          <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>['userid'] = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l4879"><span class="linenum">4879</span></a>          <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>['usermodified'] = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l4880"><span class="linenum">4880</span></a>          <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>['datesubmitted'] = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>;
<a name="l4881"><span class="linenum">4881</span></a>  
<a name="l4882"><span class="linenum">4882</span></a>          return <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>;
<a name="l4883"><span class="linenum">4883</span></a>      }
<a name="l4884"><span class="linenum">4884</span></a>  
<a name="l4885"><span class="linenum">4885</span></a>      <span class="comment">/**</span>
<a name="l4886"><span class="linenum">4886</span></a>  <span class="comment">     * Update grades in the gradebook.</span>
<a name="l4887"><span class="linenum">4887</span></a>  <span class="comment">     *</span>
<a name="l4888"><span class="linenum">4888</span></a>  <span class="comment">     * @param mixed $submission stdClass|null</span>
<a name="l4889"><span class="linenum">4889</span></a>  <span class="comment">     * @param mixed $grade stdClass|null</span>
<a name="l4890"><span class="linenum">4890</span></a>  <span class="comment">     * @return bool</span>
<a name="l4891"><span class="linenum">4891</span></a>  <span class="comment">     */</span>
<a name="l4892"><span class="linenum">4892</span></a>      protected function <a class="function" onClick="logFunction('gradebook_item_update')" href="../../_functions/gradebook_item_update.html" onMouseOver="funcPopup(event,'gradebook_item_update')">gradebook_item_update</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>=null, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>=null) {
<a name="l4893"><span class="linenum">4893</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l4894"><span class="linenum">4894</span></a>  
<a name="l4895"><span class="linenum">4895</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../mod/assign/lib.php.html">/mod/assign/lib.php</a>');
<a name="l4896"><span class="linenum">4896</span></a>  <span class="comment">        // Do not push grade to gradebook if blind marking is active as</span>
<a name="l4897"><span class="linenum">4897</span></a>  <span class="comment">        // the gradebook would reveal the students.</span>
<a name="l4898"><span class="linenum">4898</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>()) {
<a name="l4899"><span class="linenum">4899</span></a>              return false;
<a name="l4900"><span class="linenum">4900</span></a>          }
<a name="l4901"><span class="linenum">4901</span></a>  
<a name="l4902"><span class="linenum">4902</span></a>  <span class="comment">        // If marking workflow is enabled and grade is not released then remove any grade that may exist in the gradebook.</span>
<a name="l4903"><span class="linenum">4903</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow &amp;&amp; !empty(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) &amp;&amp;
<a name="l4904"><span class="linenum">4904</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_grading_status')" href="../../_functions/get_grading_status.html" onMouseOver="funcPopup(event,'get_grading_status')">get_grading_status</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>) != <a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_RELEASED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')">ASSIGN_MARKING_WORKFLOW_STATE_RELEASED</a>) {
<a name="l4905"><span class="linenum">4905</span></a>  <span class="comment">            // Remove the grade (if it exists) from the gradebook as it is not 'final'.</span>
<a name="l4906"><span class="linenum">4906</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = -1;
<a name="l4907"><span class="linenum">4907</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a> = '';
<a name="l4908"><span class="linenum">4908</span></a>          }
<a name="l4909"><span class="linenum">4909</span></a>  
<a name="l4910"><span class="linenum">4910</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> != null) {
<a name="l4911"><span class="linenum">4911</span></a>              if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> == 0) {
<a name="l4912"><span class="linenum">4912</span></a>  <span class="comment">                // This is a group submission update.</span>
<a name="l4913"><span class="linenum">4913</span></a>                  <a class="var it15265" onMouseOver="hilite(15265)" onMouseOut="lolite()" onClick="logVariable('team')" href="../../_variables/team.html">$team</a> = <a class="function" onClick="logFunction('groups_get_members')" href="../../_functions/groups_get_members.html" onMouseOver="funcPopup(event,'groups_get_members')">groups_get_members</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('groupid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>, 'u.id');
<a name="l4914"><span class="linenum">4914</span></a>  
<a name="l4915"><span class="linenum">4915</span></a>                  foreach (<a class="var it15265" onMouseOver="hilite(15265)" onMouseOut="lolite()" onClick="logVariable('team')" href="../../_variables/team.html">$team</a> as <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>) {
<a name="l4916"><span class="linenum">4916</span></a>                      <a class="var it32187" onMouseOver="hilite(32187)" onMouseOut="lolite()" onClick="logVariable('membersubmission')" href="../../_variables/membersubmission.html">$membersubmission</a> = clone <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>;
<a name="l4917"><span class="linenum">4917</span></a>                      <a class="var it32187" onMouseOver="hilite(32187)" onMouseOut="lolite()" onClick="logVariable('membersubmission')" href="../../_variables/membersubmission.html">$membersubmission</a>-&gt;<a onClick="logVariable('groupid')" class="var it45744" onMouseOver="hilite(45744)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a> = 0;
<a name="l4918"><span class="linenum">4918</span></a>                      <a class="var it32187" onMouseOver="hilite(32187)" onMouseOut="lolite()" onClick="logVariable('membersubmission')" href="../../_variables/membersubmission.html">$membersubmission</a>-&gt;<a onClick="logVariable('userid')" class="var it45744" onMouseOver="hilite(45744)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('id')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l4919"><span class="linenum">4919</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('gradebook_item_update')" href="../../_functions/gradebook_item_update.html" onMouseOver="funcPopup(event,'gradebook_item_update')">gradebook_item_update</a>(<a class="var it32187" onMouseOver="hilite(32187)" onMouseOut="lolite()" onClick="logVariable('membersubmission')" href="../../_variables/membersubmission.html">$membersubmission</a>, null);
<a name="l4920"><span class="linenum">4920</span></a>                  }
<a name="l4921"><span class="linenum">4921</span></a>                  return;
<a name="l4922"><span class="linenum">4922</span></a>              }
<a name="l4923"><span class="linenum">4923</span></a>  
<a name="l4924"><span class="linenum">4924</span></a>              <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('convert_submission_for_gradebook')" href="../../_functions/convert_submission_for_gradebook.html" onMouseOver="funcPopup(event,'convert_submission_for_gradebook')">convert_submission_for_gradebook</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l4925"><span class="linenum">4925</span></a>  
<a name="l4926"><span class="linenum">4926</span></a>          } else {
<a name="l4927"><span class="linenum">4927</span></a>              <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('convert_grade_for_gradebook')" href="../../_functions/convert_grade_for_gradebook.html" onMouseOver="funcPopup(event,'convert_grade_for_gradebook')">convert_grade_for_gradebook</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l4928"><span class="linenum">4928</span></a>          }
<a name="l4929"><span class="linenum">4929</span></a>  <span class="comment">        // Grading is disabled, return.</span>
<a name="l4930"><span class="linenum">4930</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('grading_disabled')" href="../../_functions/grading_disabled.html" onMouseOver="funcPopup(event,'grading_disabled')">grading_disabled</a>(<a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>['userid'])) {
<a name="l4931"><span class="linenum">4931</span></a>              return false;
<a name="l4932"><span class="linenum">4932</span></a>          }
<a name="l4933"><span class="linenum">4933</span></a>          <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../../_variables/assign.html">$assign</a> = clone <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l4934"><span class="linenum">4934</span></a>          <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../../_variables/assign.html">$assign</a>-&gt;<a onClick="logVariable('cmidnumber')" class="var it43084" onMouseOver="hilite(43084)" onMouseOut="lolite()" href="../../_variables/cmidnumber.html">cmidnumber</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;idnumber;
<a name="l4935"><span class="linenum">4935</span></a>  <span class="comment">        // Set assign gradebook feedback plugin status (enabled and visible).</span>
<a name="l4936"><span class="linenum">4936</span></a>          <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../../_variables/assign.html">$assign</a>-&gt;<a onClick="logVariable('gradefeedbackenabled')" class="var it43084" onMouseOver="hilite(43084)" onMouseOut="lolite()" href="../../_variables/gradefeedbackenabled.html">gradefeedbackenabled</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_gradebook_feedback_enabled')" href="../../_functions/is_gradebook_feedback_enabled.html" onMouseOver="funcPopup(event,'is_gradebook_feedback_enabled')">is_gradebook_feedback_enabled</a>();
<a name="l4937"><span class="linenum">4937</span></a>          return <a class="function" onClick="logFunction('assign_grade_item_update')" href="../../_functions/assign_grade_item_update.html" onMouseOver="funcPopup(event,'assign_grade_item_update')">assign_grade_item_update</a>(<a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../../_variables/assign.html">$assign</a>, <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>) == <a class="constant" onClick="logConstant('GRADE_UPDATE_OK')" href="../../_constants/GRADE_UPDATE_OK.html" onMouseOver="constPopup(event,'GRADE_UPDATE_OK')">GRADE_UPDATE_OK</a>;
<a name="l4938"><span class="linenum">4938</span></a>      }
<a name="l4939"><span class="linenum">4939</span></a>  
<a name="l4940"><span class="linenum">4940</span></a>      <span class="comment">/**</span>
<a name="l4941"><span class="linenum">4941</span></a>  <span class="comment">     * Update team submission.</span>
<a name="l4942"><span class="linenum">4942</span></a>  <span class="comment">     *</span>
<a name="l4943"><span class="linenum">4943</span></a>  <span class="comment">     * @param stdClass $submission</span>
<a name="l4944"><span class="linenum">4944</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l4945"><span class="linenum">4945</span></a>  <span class="comment">     * @param bool $updatetime</span>
<a name="l4946"><span class="linenum">4946</span></a>  <span class="comment">     * @return bool</span>
<a name="l4947"><span class="linenum">4947</span></a>  <span class="comment">     */</span>
<a name="l4948"><span class="linenum">4948</span></a>      protected function <a class="function" onClick="logFunction('update_team_submission')" href="../../_functions/update_team_submission.html" onMouseOver="funcPopup(event,'update_team_submission')">update_team_submission</a>(stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it11920" onMouseOver="hilite(11920)" onMouseOut="lolite()" onClick="logVariable('updatetime')" href="../../_variables/updatetime.html">$updatetime</a>) {
<a name="l4949"><span class="linenum">4949</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l4950"><span class="linenum">4950</span></a>  
<a name="l4951"><span class="linenum">4951</span></a>          if (<a class="var it11920" onMouseOver="hilite(11920)" onMouseOut="lolite()" onClick="logVariable('updatetime')" href="../../_variables/updatetime.html">$updatetime</a>) {
<a name="l4952"><span class="linenum">4952</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l4953"><span class="linenum">4953</span></a>          }
<a name="l4954"><span class="linenum">4954</span></a>  
<a name="l4955"><span class="linenum">4955</span></a>  <span class="comment">        // First update the submission for the current user.</span>
<a name="l4956"><span class="linenum">4956</span></a>          <a class="var it32007" onMouseOver="hilite(32007)" onMouseOut="lolite()" onClick="logVariable('mysubmission')" href="../../_variables/mysubmission.html">$mysubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>);
<a name="l4957"><span class="linenum">4957</span></a>          <a class="var it32007" onMouseOver="hilite(32007)" onMouseOut="lolite()" onClick="logVariable('mysubmission')" href="../../_variables/mysubmission.html">$mysubmission</a>-&gt;<a onClick="logVariable('status')" class="var it45415" onMouseOver="hilite(45415)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a>;
<a name="l4958"><span class="linenum">4958</span></a>  
<a name="l4959"><span class="linenum">4959</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_submission')" href="../../_functions/update_submission.html" onMouseOver="funcPopup(event,'update_submission')">update_submission</a>(<a class="var it32007" onMouseOver="hilite(32007)" onMouseOut="lolite()" onClick="logVariable('mysubmission')" href="../../_variables/mysubmission.html">$mysubmission</a>, 0, <a class="var it11920" onMouseOver="hilite(11920)" onMouseOut="lolite()" onClick="logVariable('updatetime')" href="../../_variables/updatetime.html">$updatetime</a>, false);
<a name="l4960"><span class="linenum">4960</span></a>  
<a name="l4961"><span class="linenum">4961</span></a>  <span class="comment">        // Now check the team settings to see if this assignment qualifies as submitted or draft.</span>
<a name="l4962"><span class="linenum">4962</span></a>          <a class="var it15265" onMouseOver="hilite(15265)" onMouseOut="lolite()" onClick="logVariable('team')" href="../../_variables/team.html">$team</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group_members')" href="../../_functions/get_submission_group_members.html" onMouseOver="funcPopup(event,'get_submission_group_members')">get_submission_group_members</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('groupid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>, true);
<a name="l4963"><span class="linenum">4963</span></a>  
<a name="l4964"><span class="linenum">4964</span></a>          <a class="var it32188" onMouseOver="hilite(32188)" onMouseOut="lolite()" onClick="logVariable('allsubmitted')" href="../../_variables/allsubmitted.html">$allsubmitted</a> = true;
<a name="l4965"><span class="linenum">4965</span></a>          <a class="var it32189" onMouseOver="hilite(32189)" onMouseOut="lolite()" onClick="logVariable('anysubmitted')" href="../../_variables/anysubmitted.html">$anysubmitted</a> = false;
<a name="l4966"><span class="linenum">4966</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = true;
<a name="l4967"><span class="linenum">4967</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> != <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_REOPENED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_REOPENED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_REOPENED')">ASSIGN_SUBMISSION_STATUS_REOPENED</a>) {
<a name="l4968"><span class="linenum">4968</span></a>              foreach (<a class="var it15265" onMouseOver="hilite(15265)" onMouseOut="lolite()" onClick="logVariable('team')" href="../../_variables/team.html">$team</a> as <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>) {
<a name="l4969"><span class="linenum">4969</span></a>                  <a class="var it32187" onMouseOver="hilite(32187)" onMouseOut="lolite()" onClick="logVariable('membersubmission')" href="../../_variables/membersubmission.html">$membersubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('id')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>);
<a name="l4970"><span class="linenum">4970</span></a>  
<a name="l4971"><span class="linenum">4971</span></a>  <span class="comment">                // If no submission found for team member and member is active then everyone has not submitted.</span>
<a name="l4972"><span class="linenum">4972</span></a>                  if (!<a class="var it32187" onMouseOver="hilite(32187)" onMouseOut="lolite()" onClick="logVariable('membersubmission')" href="../../_variables/membersubmission.html">$membersubmission</a> || <a class="var it32187" onMouseOver="hilite(32187)" onMouseOut="lolite()" onClick="logVariable('membersubmission')" href="../../_variables/membersubmission.html">$membersubmission</a>-&gt;<a onClick="logVariable('status')" class="var it45744" onMouseOver="hilite(45744)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> != <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>
<a name="l4973"><span class="linenum">4973</span></a>                          &amp;&amp; (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_active_user')" href="../../_functions/is_active_user.html" onMouseOver="funcPopup(event,'is_active_user')">is_active_user</a>(<a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('id')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l4974"><span class="linenum">4974</span></a>                      <a class="var it32188" onMouseOver="hilite(32188)" onMouseOut="lolite()" onClick="logVariable('allsubmitted')" href="../../_variables/allsubmitted.html">$allsubmitted</a> = false;
<a name="l4975"><span class="linenum">4975</span></a>                      if (<a class="var it32189" onMouseOver="hilite(32189)" onMouseOut="lolite()" onClick="logVariable('anysubmitted')" href="../../_variables/anysubmitted.html">$anysubmitted</a>) {
<a name="l4976"><span class="linenum">4976</span></a>                          break;
<a name="l4977"><span class="linenum">4977</span></a>                      }
<a name="l4978"><span class="linenum">4978</span></a>                  } else {
<a name="l4979"><span class="linenum">4979</span></a>                      <a class="var it32189" onMouseOver="hilite(32189)" onMouseOut="lolite()" onClick="logVariable('anysubmitted')" href="../../_variables/anysubmitted.html">$anysubmitted</a> = true;
<a name="l4980"><span class="linenum">4980</span></a>                  }
<a name="l4981"><span class="linenum">4981</span></a>              }
<a name="l4982"><span class="linenum">4982</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;requireallteammemberssubmit) {
<a name="l4983"><span class="linenum">4983</span></a>                  if (<a class="var it32188" onMouseOver="hilite(32188)" onMouseOut="lolite()" onClick="logVariable('allsubmitted')" href="../../_variables/allsubmitted.html">$allsubmitted</a>) {
<a name="l4984"><span class="linenum">4984</span></a>                      <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>;
<a name="l4985"><span class="linenum">4985</span></a>                  } else {
<a name="l4986"><span class="linenum">4986</span></a>                      <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_DRAFT')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_DRAFT.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_DRAFT')">ASSIGN_SUBMISSION_STATUS_DRAFT</a>;
<a name="l4987"><span class="linenum">4987</span></a>                  }
<a name="l4988"><span class="linenum">4988</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('assign_submission', <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l4989"><span class="linenum">4989</span></a>              } else {
<a name="l4990"><span class="linenum">4990</span></a>                  if (<a class="var it32189" onMouseOver="hilite(32189)" onMouseOut="lolite()" onClick="logVariable('anysubmitted')" href="../../_variables/anysubmitted.html">$anysubmitted</a>) {
<a name="l4991"><span class="linenum">4991</span></a>                      <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>;
<a name="l4992"><span class="linenum">4992</span></a>                  } else {
<a name="l4993"><span class="linenum">4993</span></a>                      <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_DRAFT')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_DRAFT.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_DRAFT')">ASSIGN_SUBMISSION_STATUS_DRAFT</a>;
<a name="l4994"><span class="linenum">4994</span></a>                  }
<a name="l4995"><span class="linenum">4995</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('assign_submission', <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l4996"><span class="linenum">4996</span></a>              }
<a name="l4997"><span class="linenum">4997</span></a>          } else {
<a name="l4998"><span class="linenum">4998</span></a>  <span class="comment">            // Set the group submission to reopened.</span>
<a name="l4999"><span class="linenum">4999</span></a>              foreach (<a class="var it15265" onMouseOver="hilite(15265)" onMouseOut="lolite()" onClick="logVariable('team')" href="../../_variables/team.html">$team</a> as <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>) {
<a name="l5000"><span class="linenum">5000</span></a>                  <a class="var it32187" onMouseOver="hilite(32187)" onMouseOut="lolite()" onClick="logVariable('membersubmission')" href="../../_variables/membersubmission.html">$membersubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('id')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, true, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>);
<a name="l5001"><span class="linenum">5001</span></a>                  <a class="var it32187" onMouseOver="hilite(32187)" onMouseOut="lolite()" onClick="logVariable('membersubmission')" href="../../_variables/membersubmission.html">$membersubmission</a>-&gt;<a onClick="logVariable('status')" class="var it45744" onMouseOver="hilite(45744)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_REOPENED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_REOPENED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_REOPENED')">ASSIGN_SUBMISSION_STATUS_REOPENED</a>;
<a name="l5002"><span class="linenum">5002</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('assign_submission', <a class="var it32187" onMouseOver="hilite(32187)" onMouseOut="lolite()" onClick="logVariable('membersubmission')" href="../../_variables/membersubmission.html">$membersubmission</a>) &amp;&amp; <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l5003"><span class="linenum">5003</span></a>              }
<a name="l5004"><span class="linenum">5004</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('assign_submission', <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) &amp;&amp; <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l5005"><span class="linenum">5005</span></a>          }
<a name="l5006"><span class="linenum">5006</span></a>  
<a name="l5007"><span class="linenum">5007</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('gradebook_item_update')" href="../../_functions/gradebook_item_update.html" onMouseOver="funcPopup(event,'gradebook_item_update')">gradebook_item_update</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l5008"><span class="linenum">5008</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l5009"><span class="linenum">5009</span></a>      }
<a name="l5010"><span class="linenum">5010</span></a>  
<a name="l5011"><span class="linenum">5011</span></a>      <span class="comment">/**</span>
<a name="l5012"><span class="linenum">5012</span></a>  <span class="comment">     * Update grades in the gradebook based on submission time.</span>
<a name="l5013"><span class="linenum">5013</span></a>  <span class="comment">     *</span>
<a name="l5014"><span class="linenum">5014</span></a>  <span class="comment">     * @param stdClass $submission</span>
<a name="l5015"><span class="linenum">5015</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l5016"><span class="linenum">5016</span></a>  <span class="comment">     * @param bool $updatetime</span>
<a name="l5017"><span class="linenum">5017</span></a>  <span class="comment">     * @param bool $teamsubmission</span>
<a name="l5018"><span class="linenum">5018</span></a>  <span class="comment">     * @return bool</span>
<a name="l5019"><span class="linenum">5019</span></a>  <span class="comment">     */</span>
<a name="l5020"><span class="linenum">5020</span></a>      protected function <a class="function" onClick="logFunction('update_submission')" href="../../_functions/update_submission.html" onMouseOver="funcPopup(event,'update_submission')">update_submission</a>(stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it11920" onMouseOver="hilite(11920)" onMouseOut="lolite()" onClick="logVariable('updatetime')" href="../../_variables/updatetime.html">$updatetime</a>, <a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a>) {
<a name="l5021"><span class="linenum">5021</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l5022"><span class="linenum">5022</span></a>  
<a name="l5023"><span class="linenum">5023</span></a>          if (<a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a>) {
<a name="l5024"><span class="linenum">5024</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_team_submission')" href="../../_functions/update_team_submission.html" onMouseOver="funcPopup(event,'update_team_submission')">update_team_submission</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it11920" onMouseOver="hilite(11920)" onMouseOut="lolite()" onClick="logVariable('updatetime')" href="../../_variables/updatetime.html">$updatetime</a>);
<a name="l5025"><span class="linenum">5025</span></a>          }
<a name="l5026"><span class="linenum">5026</span></a>  
<a name="l5027"><span class="linenum">5027</span></a>          if (<a class="var it11920" onMouseOver="hilite(11920)" onMouseOut="lolite()" onClick="logVariable('updatetime')" href="../../_variables/updatetime.html">$updatetime</a>) {
<a name="l5028"><span class="linenum">5028</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l5029"><span class="linenum">5029</span></a>          }
<a name="l5030"><span class="linenum">5030</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>= <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('assign_submission', <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l5031"><span class="linenum">5031</span></a>          if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>) {
<a name="l5032"><span class="linenum">5032</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('gradebook_item_update')" href="../../_functions/gradebook_item_update.html" onMouseOver="funcPopup(event,'gradebook_item_update')">gradebook_item_update</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l5033"><span class="linenum">5033</span></a>          }
<a name="l5034"><span class="linenum">5034</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l5035"><span class="linenum">5035</span></a>      }
<a name="l5036"><span class="linenum">5036</span></a>  
<a name="l5037"><span class="linenum">5037</span></a>      <span class="comment">/**</span>
<a name="l5038"><span class="linenum">5038</span></a>  <span class="comment">     * Is this assignment open for submissions?</span>
<a name="l5039"><span class="linenum">5039</span></a>  <span class="comment">     *</span>
<a name="l5040"><span class="linenum">5040</span></a>  <span class="comment">     * Check the due date,</span>
<a name="l5041"><span class="linenum">5041</span></a>  <span class="comment">     * prevent late submissions,</span>
<a name="l5042"><span class="linenum">5042</span></a>  <span class="comment">     * has this person already submitted,</span>
<a name="l5043"><span class="linenum">5043</span></a>  <span class="comment">     * is the assignment locked?</span>
<a name="l5044"><span class="linenum">5044</span></a>  <span class="comment">     *</span>
<a name="l5045"><span class="linenum">5045</span></a>  <span class="comment">     * @param int $userid - Optional userid so we can see if a different user can submit</span>
<a name="l5046"><span class="linenum">5046</span></a>  <span class="comment">     * @param bool $skipenrolled - Skip enrollment checks (because they have been done already)</span>
<a name="l5047"><span class="linenum">5047</span></a>  <span class="comment">     * @param stdClass $submission - Pre-fetched submission record (or false to fetch it)</span>
<a name="l5048"><span class="linenum">5048</span></a>  <span class="comment">     * @param stdClass $flags - Pre-fetched user flags record (or false to fetch it)</span>
<a name="l5049"><span class="linenum">5049</span></a>  <span class="comment">     * @param stdClass $gradinginfo - Pre-fetched user gradinginfo record (or false to fetch it)</span>
<a name="l5050"><span class="linenum">5050</span></a>  <span class="comment">     * @return bool</span>
<a name="l5051"><span class="linenum">5051</span></a>  <span class="comment">     */</span>
<a name="l5052"><span class="linenum">5052</span></a>      public function <a class="function" onClick="logFunction('submissions_open')" href="../../_functions/submissions_open.html" onMouseOver="funcPopup(event,'submissions_open')">submissions_open</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = 0,
<a name="l5053"><span class="linenum">5053</span></a>                                       <a class="var it32190" onMouseOver="hilite(32190)" onMouseOut="lolite()" onClick="logVariable('skipenrolled')" href="../../_variables/skipenrolled.html">$skipenrolled</a> = false,
<a name="l5054"><span class="linenum">5054</span></a>                                       <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = false,
<a name="l5055"><span class="linenum">5055</span></a>                                       <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = false,
<a name="l5056"><span class="linenum">5056</span></a>                                       <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a> = false) {
<a name="l5057"><span class="linenum">5057</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l5058"><span class="linenum">5058</span></a>  
<a name="l5059"><span class="linenum">5059</span></a>          if (!<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l5060"><span class="linenum">5060</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l5061"><span class="linenum">5061</span></a>          }
<a name="l5062"><span class="linenum">5062</span></a>  
<a name="l5063"><span class="linenum">5063</span></a>          <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l5064"><span class="linenum">5064</span></a>          <a class="var it32191" onMouseOver="hilite(32191)" onMouseOut="lolite()" onClick="logVariable('dateopen')" href="../../_variables/dateopen.html">$dateopen</a> = true;
<a name="l5065"><span class="linenum">5065</span></a>          <a class="var it2264" onMouseOver="hilite(2264)" onMouseOut="lolite()" onClick="logVariable('finaldate')" href="../../_variables/finaldate.html">$finaldate</a> = false;
<a name="l5066"><span class="linenum">5066</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;cutoffdate) {
<a name="l5067"><span class="linenum">5067</span></a>              <a class="var it2264" onMouseOver="hilite(2264)" onMouseOut="lolite()" onClick="logVariable('finaldate')" href="../../_variables/finaldate.html">$finaldate</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;cutoffdate;
<a name="l5068"><span class="linenum">5068</span></a>          }
<a name="l5069"><span class="linenum">5069</span></a>  
<a name="l5070"><span class="linenum">5070</span></a>          if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> === false) {
<a name="l5071"><span class="linenum">5071</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l5072"><span class="linenum">5072</span></a>          }
<a name="l5073"><span class="linenum">5073</span></a>          if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> &amp;&amp; <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('locked')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/locked.html">locked</a>) {
<a name="l5074"><span class="linenum">5074</span></a>              return false;
<a name="l5075"><span class="linenum">5075</span></a>          }
<a name="l5076"><span class="linenum">5076</span></a>  
<a name="l5077"><span class="linenum">5077</span></a>  <span class="comment">        // User extensions.</span>
<a name="l5078"><span class="linenum">5078</span></a>          if (<a class="var it2264" onMouseOver="hilite(2264)" onMouseOut="lolite()" onClick="logVariable('finaldate')" href="../../_variables/finaldate.html">$finaldate</a>) {
<a name="l5079"><span class="linenum">5079</span></a>              if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> &amp;&amp; <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('extensionduedate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/extensionduedate.html">extensionduedate</a>) {
<a name="l5080"><span class="linenum">5080</span></a>  <span class="comment">                // Extension can be before cut off date.</span>
<a name="l5081"><span class="linenum">5081</span></a>                  if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('extensionduedate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/extensionduedate.html">extensionduedate</a> &gt; <a class="var it2264" onMouseOver="hilite(2264)" onMouseOut="lolite()" onClick="logVariable('finaldate')" href="../../_variables/finaldate.html">$finaldate</a>) {
<a name="l5082"><span class="linenum">5082</span></a>                      <a class="var it2264" onMouseOver="hilite(2264)" onMouseOut="lolite()" onClick="logVariable('finaldate')" href="../../_variables/finaldate.html">$finaldate</a> = <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('extensionduedate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/extensionduedate.html">extensionduedate</a>;
<a name="l5083"><span class="linenum">5083</span></a>                  }
<a name="l5084"><span class="linenum">5084</span></a>              }
<a name="l5085"><span class="linenum">5085</span></a>          }
<a name="l5086"><span class="linenum">5086</span></a>  
<a name="l5087"><span class="linenum">5087</span></a>          if (<a class="var it2264" onMouseOver="hilite(2264)" onMouseOut="lolite()" onClick="logVariable('finaldate')" href="../../_variables/finaldate.html">$finaldate</a>) {
<a name="l5088"><span class="linenum">5088</span></a>              <a class="var it32191" onMouseOver="hilite(32191)" onMouseOut="lolite()" onClick="logVariable('dateopen')" href="../../_variables/dateopen.html">$dateopen</a> = (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;allowsubmissionsfromdate &lt;= <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a> &amp;&amp; <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a> &lt;= <a class="var it2264" onMouseOver="hilite(2264)" onMouseOut="lolite()" onClick="logVariable('finaldate')" href="../../_variables/finaldate.html">$finaldate</a>);
<a name="l5089"><span class="linenum">5089</span></a>          } else {
<a name="l5090"><span class="linenum">5090</span></a>              <a class="var it32191" onMouseOver="hilite(32191)" onMouseOut="lolite()" onClick="logVariable('dateopen')" href="../../_variables/dateopen.html">$dateopen</a> = (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;allowsubmissionsfromdate &lt;= <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a>);
<a name="l5091"><span class="linenum">5091</span></a>          }
<a name="l5092"><span class="linenum">5092</span></a>  
<a name="l5093"><span class="linenum">5093</span></a>          if (!<a class="var it32191" onMouseOver="hilite(32191)" onMouseOut="lolite()" onClick="logVariable('dateopen')" href="../../_variables/dateopen.html">$dateopen</a>) {
<a name="l5094"><span class="linenum">5094</span></a>              return false;
<a name="l5095"><span class="linenum">5095</span></a>          }
<a name="l5096"><span class="linenum">5096</span></a>  
<a name="l5097"><span class="linenum">5097</span></a>  <span class="comment">        // Now check if this user has already submitted etc.</span>
<a name="l5098"><span class="linenum">5098</span></a>          if (!<a class="var it32190" onMouseOver="hilite(32190)" onMouseOut="lolite()" onClick="logVariable('skipenrolled')" href="../../_variables/skipenrolled.html">$skipenrolled</a> &amp;&amp; !<a class="function" onClick="logFunction('is_enrolled')" href="../../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>(), <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l5099"><span class="linenum">5099</span></a>              return false;
<a name="l5100"><span class="linenum">5100</span></a>          }
<a name="l5101"><span class="linenum">5101</span></a>  <span class="comment">        // Note you can pass null for submission and it will not be fetched.</span>
<a name="l5102"><span class="linenum">5102</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> === false) {
<a name="l5103"><span class="linenum">5103</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l5104"><span class="linenum">5104</span></a>                  <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 0, false);
<a name="l5105"><span class="linenum">5105</span></a>              } else {
<a name="l5106"><span class="linenum">5106</span></a>                  <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l5107"><span class="linenum">5107</span></a>              }
<a name="l5108"><span class="linenum">5108</span></a>          }
<a name="l5109"><span class="linenum">5109</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l5110"><span class="linenum">5110</span></a>  
<a name="l5111"><span class="linenum">5111</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;submissiondrafts &amp;&amp; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> == <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>) {
<a name="l5112"><span class="linenum">5112</span></a>  <span class="comment">                // Drafts are tracked and the student has submitted the assignment.</span>
<a name="l5113"><span class="linenum">5113</span></a>                  return false;
<a name="l5114"><span class="linenum">5114</span></a>              }
<a name="l5115"><span class="linenum">5115</span></a>          }
<a name="l5116"><span class="linenum">5116</span></a>  
<a name="l5117"><span class="linenum">5117</span></a>  <span class="comment">        // See if this user grade is locked in the gradebook.</span>
<a name="l5118"><span class="linenum">5118</span></a>          if (<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a> === false) {
<a name="l5119"><span class="linenum">5119</span></a>              <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l5120"><span class="linenum">5120</span></a>                                              'mod',
<a name="l5121"><span class="linenum">5121</span></a>                                              'assign',
<a name="l5122"><span class="linenum">5122</span></a>                                              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id,
<a name="l5123"><span class="linenum">5123</span></a>                                              array(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l5124"><span class="linenum">5124</span></a>          }
<a name="l5125"><span class="linenum">5125</span></a>          if (<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a> &amp;&amp;
<a name="l5126"><span class="linenum">5126</span></a>                  isset(<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]) &amp;&amp;
<a name="l5127"><span class="linenum">5127</span></a>                  <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;locked) {
<a name="l5128"><span class="linenum">5128</span></a>              return false;
<a name="l5129"><span class="linenum">5129</span></a>          }
<a name="l5130"><span class="linenum">5130</span></a>  
<a name="l5131"><span class="linenum">5131</span></a>          return true;
<a name="l5132"><span class="linenum">5132</span></a>      }
<a name="l5133"><span class="linenum">5133</span></a>  
<a name="l5134"><span class="linenum">5134</span></a>      <span class="comment">/**</span>
<a name="l5135"><span class="linenum">5135</span></a>  <span class="comment">     * Render the files in file area.</span>
<a name="l5136"><span class="linenum">5136</span></a>  <span class="comment">     *</span>
<a name="l5137"><span class="linenum">5137</span></a>  <span class="comment">     * @param string $component</span>
<a name="l5138"><span class="linenum">5138</span></a>  <span class="comment">     * @param string $area</span>
<a name="l5139"><span class="linenum">5139</span></a>  <span class="comment">     * @param int $submissionid</span>
<a name="l5140"><span class="linenum">5140</span></a>  <span class="comment">     * @return string</span>
<a name="l5141"><span class="linenum">5141</span></a>  <span class="comment">     */</span>
<a name="l5142"><span class="linenum">5142</span></a>      public function <a class="function" onClick="logFunction('render_area_files')" href="../../_functions/render_area_files.html" onMouseOver="funcPopup(event,'render_area_files')">render_area_files</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a>, <a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../_variables/submissionid.html">$submissionid</a>) {
<a name="l5143"><span class="linenum">5143</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l5144"><span class="linenum">5144</span></a>  
<a name="l5145"><span class="linenum">5145</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('assign_files')" href="../../_functions/assign_files.html" onMouseOver="funcPopup(event,'assign_files')">assign_files</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, <a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../_variables/submissionid.html">$submissionid</a>, <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>);
<a name="l5146"><span class="linenum">5146</span></a>  
<a name="l5147"><span class="linenum">5147</span></a>      }
<a name="l5148"><span class="linenum">5148</span></a>  
<a name="l5149"><span class="linenum">5149</span></a>      <span class="comment">/**</span>
<a name="l5150"><span class="linenum">5150</span></a>  <span class="comment">     * Capability check to make sure this grader can edit this submission.</span>
<a name="l5151"><span class="linenum">5151</span></a>  <span class="comment">     *</span>
<a name="l5152"><span class="linenum">5152</span></a>  <span class="comment">     * @param int $userid - The user whose submission is to be edited</span>
<a name="l5153"><span class="linenum">5153</span></a>  <span class="comment">     * @param int $graderid (optional) - The user who will do the editing (default to $USER-&gt;id).</span>
<a name="l5154"><span class="linenum">5154</span></a>  <span class="comment">     * @return bool</span>
<a name="l5155"><span class="linenum">5155</span></a>  <span class="comment">     */</span>
<a name="l5156"><span class="linenum">5156</span></a>      public function <a class="function" onClick="logFunction('can_edit_submission')" href="../../_functions/can_edit_submission.html" onMouseOver="funcPopup(event,'can_edit_submission')">can_edit_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it32192" onMouseOver="hilite(32192)" onMouseOut="lolite()" onClick="logVariable('graderid')" href="../../_variables/graderid.html">$graderid</a> = 0) {
<a name="l5157"><span class="linenum">5157</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l5158"><span class="linenum">5158</span></a>  
<a name="l5159"><span class="linenum">5159</span></a>          if (empty(<a class="var it32192" onMouseOver="hilite(32192)" onMouseOut="lolite()" onClick="logVariable('graderid')" href="../../_variables/graderid.html">$graderid</a>)) {
<a name="l5160"><span class="linenum">5160</span></a>              <a class="var it32192" onMouseOver="hilite(32192)" onMouseOut="lolite()" onClick="logVariable('graderid')" href="../../_variables/graderid.html">$graderid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l5161"><span class="linenum">5161</span></a>          }
<a name="l5162"><span class="linenum">5162</span></a>  
<a name="l5163"><span class="linenum">5163</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l5164"><span class="linenum">5164</span></a>          if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> == <a class="var it32192" onMouseOver="hilite(32192)" onMouseOut="lolite()" onClick="logVariable('graderid')" href="../../_variables/graderid.html">$graderid</a> &amp;&amp;
<a name="l5165"><span class="linenum">5165</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a> &amp;&amp;
<a name="l5166"><span class="linenum">5166</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('preventsubmissionnotingroup')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/preventsubmissionnotingroup.html">preventsubmissionnotingroup</a> &amp;&amp;
<a name="l5167"><span class="linenum">5167</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) == false) {
<a name="l5168"><span class="linenum">5168</span></a>              return false;
<a name="l5169"><span class="linenum">5169</span></a>          }
<a name="l5170"><span class="linenum">5170</span></a>  
<a name="l5171"><span class="linenum">5171</span></a>          if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> == <a class="var it32192" onMouseOver="hilite(32192)" onMouseOut="lolite()" onClick="logVariable('graderid')" href="../../_variables/graderid.html">$graderid</a> &amp;&amp;
<a name="l5172"><span class="linenum">5172</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submissions_open')" href="../../_functions/submissions_open.html" onMouseOver="funcPopup(event,'submissions_open')">submissions_open</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) &amp;&amp;
<a name="l5173"><span class="linenum">5173</span></a>                  <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:submit', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, <a class="var it32192" onMouseOver="hilite(32192)" onMouseOut="lolite()" onClick="logVariable('graderid')" href="../../_variables/graderid.html">$graderid</a>)) {
<a name="l5174"><span class="linenum">5174</span></a>  <span class="comment">            // User can edit their own submission.</span>
<a name="l5175"><span class="linenum">5175</span></a>              return true;
<a name="l5176"><span class="linenum">5176</span></a>          }
<a name="l5177"><span class="linenum">5177</span></a>  
<a name="l5178"><span class="linenum">5178</span></a>          if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:editothersubmission', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, <a class="var it32192" onMouseOver="hilite(32192)" onMouseOut="lolite()" onClick="logVariable('graderid')" href="../../_variables/graderid.html">$graderid</a>)) {
<a name="l5179"><span class="linenum">5179</span></a>              return false;
<a name="l5180"><span class="linenum">5180</span></a>          }
<a name="l5181"><span class="linenum">5181</span></a>  
<a name="l5182"><span class="linenum">5182</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>();
<a name="l5183"><span class="linenum">5183</span></a>          if (<a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a>) {
<a name="l5184"><span class="linenum">5184</span></a>              <a class="var it32109" onMouseOver="hilite(32109)" onMouseOut="lolite()" onClick="logVariable('sharedgroupmembers')" href="../../_variables/sharedgroupmembers.html">$sharedgroupmembers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_shared_group_members')" href="../../_functions/get_shared_group_members.html" onMouseOver="funcPopup(event,'get_shared_group_members')">get_shared_group_members</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it32192" onMouseOver="hilite(32192)" onMouseOut="lolite()" onClick="logVariable('graderid')" href="../../_variables/graderid.html">$graderid</a>);
<a name="l5185"><span class="linenum">5185</span></a>              return <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it32109" onMouseOver="hilite(32109)" onMouseOut="lolite()" onClick="logVariable('sharedgroupmembers')" href="../../_variables/sharedgroupmembers.html">$sharedgroupmembers</a>);
<a name="l5186"><span class="linenum">5186</span></a>          }
<a name="l5187"><span class="linenum">5187</span></a>          return true;
<a name="l5188"><span class="linenum">5188</span></a>      }
<a name="l5189"><span class="linenum">5189</span></a>  
<a name="l5190"><span class="linenum">5190</span></a>      <span class="comment">/**</span>
<a name="l5191"><span class="linenum">5191</span></a>  <span class="comment">     * Returns IDs of the users who share group membership with the specified user.</span>
<a name="l5192"><span class="linenum">5192</span></a>  <span class="comment">     *</span>
<a name="l5193"><span class="linenum">5193</span></a>  <span class="comment">     * @param stdClass|cm_info $cm Course-module</span>
<a name="l5194"><span class="linenum">5194</span></a>  <span class="comment">     * @param int $userid User ID</span>
<a name="l5195"><span class="linenum">5195</span></a>  <span class="comment">     * @return array An array of ID of users.</span>
<a name="l5196"><span class="linenum">5196</span></a>  <span class="comment">     */</span>
<a name="l5197"><span class="linenum">5197</span></a>      public function <a class="function" onClick="logFunction('get_shared_group_members')" href="../../_functions/get_shared_group_members.html" onMouseOver="funcPopup(event,'get_shared_group_members')">get_shared_group_members</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l5198"><span class="linenum">5198</span></a>          if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sharedgroupmembers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/sharedgroupmembers.html">sharedgroupmembers</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>])) {
<a name="l5199"><span class="linenum">5199</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sharedgroupmembers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/sharedgroupmembers.html">sharedgroupmembers</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>] = array();
<a name="l5200"><span class="linenum">5200</span></a>              <a class="var it32193" onMouseOver="hilite(32193)" onMouseOut="lolite()" onClick="logVariable('groupsids')" href="../../_variables/groupsids.html">$groupsids</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="function" onClick="logFunction('groups_get_activity_allowed_groups')" href="../../_functions/groups_get_activity_allowed_groups.html" onMouseOver="funcPopup(event,'groups_get_activity_allowed_groups')">groups_get_activity_allowed_groups</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l5201"><span class="linenum">5201</span></a>              foreach (<a class="var it32193" onMouseOver="hilite(32193)" onMouseOut="lolite()" onClick="logVariable('groupsids')" href="../../_variables/groupsids.html">$groupsids</a> as <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) {
<a name="l5202"><span class="linenum">5202</span></a>                  <a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="function" onClick="logFunction('groups_get_members')" href="../../_functions/groups_get_members.html" onMouseOver="funcPopup(event,'groups_get_members')">groups_get_members</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, 'u.id'));
<a name="l5203"><span class="linenum">5203</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sharedgroupmembers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/sharedgroupmembers.html">sharedgroupmembers</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>] = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sharedgroupmembers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/sharedgroupmembers.html">sharedgroupmembers</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>], <a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a>);
<a name="l5204"><span class="linenum">5204</span></a>              }
<a name="l5205"><span class="linenum">5205</span></a>          }
<a name="l5206"><span class="linenum">5206</span></a>  
<a name="l5207"><span class="linenum">5207</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sharedgroupmembers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/sharedgroupmembers.html">sharedgroupmembers</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>];
<a name="l5208"><span class="linenum">5208</span></a>      }
<a name="l5209"><span class="linenum">5209</span></a>  
<a name="l5210"><span class="linenum">5210</span></a>      <span class="comment">/**</span>
<a name="l5211"><span class="linenum">5211</span></a>  <span class="comment">     * Returns a list of teachers that should be grading given submission.</span>
<a name="l5212"><span class="linenum">5212</span></a>  <span class="comment">     *</span>
<a name="l5213"><span class="linenum">5213</span></a>  <span class="comment">     * @param int $userid The submission to grade</span>
<a name="l5214"><span class="linenum">5214</span></a>  <span class="comment">     * @return array</span>
<a name="l5215"><span class="linenum">5215</span></a>  <span class="comment">     */</span>
<a name="l5216"><span class="linenum">5216</span></a>      protected function <a class="function" onClick="logFunction('get_graders')" href="../../_functions/get_graders.html" onMouseOver="funcPopup(event,'get_graders')">get_graders</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l5217"><span class="linenum">5217</span></a>  <span class="comment">        // Potential graders should be active users only.</span>
<a name="l5218"><span class="linenum">5218</span></a>          <a class="var it32194" onMouseOver="hilite(32194)" onMouseOut="lolite()" onClick="logVariable('potentialgraders')" href="../../_variables/potentialgraders.html">$potentialgraders</a> = <a class="function" onClick="logFunction('get_enrolled_users')" href="../../_functions/get_enrolled_users.html" onMouseOver="funcPopup(event,'get_enrolled_users')">get_enrolled_users</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, &quot;mod/assign:grade&quot;, null, 'u.*', null, null, null, true);
<a name="l5219"><span class="linenum">5219</span></a>  
<a name="l5220"><span class="linenum">5220</span></a>          <a class="var it15855" onMouseOver="hilite(15855)" onMouseOut="lolite()" onClick="logVariable('graders')" href="../../_variables/graders.html">$graders</a> = array();
<a name="l5221"><span class="linenum">5221</span></a>          if (<a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()) == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a>) {
<a name="l5222"><span class="linenum">5222</span></a>              if (<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;groupingid)) {
<a name="l5223"><span class="linenum">5223</span></a>                  foreach (<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> as <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>) {
<a name="l5224"><span class="linenum">5224</span></a>                      foreach (<a class="var it32194" onMouseOver="hilite(32194)" onMouseOut="lolite()" onClick="logVariable('potentialgraders')" href="../../_variables/potentialgraders.html">$potentialgraders</a> as <a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>) {
<a name="l5225"><span class="linenum">5225</span></a>                          if (<a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>-&gt;<a onClick="logVariable('id')" class="var it45530" onMouseOver="hilite(45530)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l5226"><span class="linenum">5226</span></a>  <span class="comment">                            // Do not send self.</span>
<a name="l5227"><span class="linenum">5227</span></a>                              continue;
<a name="l5228"><span class="linenum">5228</span></a>                          }
<a name="l5229"><span class="linenum">5229</span></a>                          if (<a class="function" onClick="logFunction('groups_is_member')" href="../../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>-&gt;<a onClick="logVariable('id')" class="var it45530" onMouseOver="hilite(45530)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l5230"><span class="linenum">5230</span></a>                              <a class="var it15855" onMouseOver="hilite(15855)" onMouseOut="lolite()" onClick="logVariable('graders')" href="../../_variables/graders.html">$graders</a>[<a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>-&gt;<a onClick="logVariable('id')" class="var it45530" onMouseOver="hilite(45530)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>;
<a name="l5231"><span class="linenum">5231</span></a>                          }
<a name="l5232"><span class="linenum">5232</span></a>                      }
<a name="l5233"><span class="linenum">5233</span></a>                  }
<a name="l5234"><span class="linenum">5234</span></a>              } else {
<a name="l5235"><span class="linenum">5235</span></a>  <span class="comment">                // User not in group, try to find graders without group.</span>
<a name="l5236"><span class="linenum">5236</span></a>                  foreach (<a class="var it32194" onMouseOver="hilite(32194)" onMouseOut="lolite()" onClick="logVariable('potentialgraders')" href="../../_variables/potentialgraders.html">$potentialgraders</a> as <a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>) {
<a name="l5237"><span class="linenum">5237</span></a>                      if (<a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>-&gt;<a onClick="logVariable('id')" class="var it45530" onMouseOver="hilite(45530)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l5238"><span class="linenum">5238</span></a>  <span class="comment">                        // Do not send self.</span>
<a name="l5239"><span class="linenum">5239</span></a>                          continue;
<a name="l5240"><span class="linenum">5240</span></a>                      }
<a name="l5241"><span class="linenum">5241</span></a>                      if (!<a class="function" onClick="logFunction('groups_has_membership')" href="../../_functions/groups_has_membership.html" onMouseOver="funcPopup(event,'groups_has_membership')">groups_has_membership</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), <a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>-&gt;<a onClick="logVariable('id')" class="var it45530" onMouseOver="hilite(45530)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l5242"><span class="linenum">5242</span></a>                          <a class="var it15855" onMouseOver="hilite(15855)" onMouseOut="lolite()" onClick="logVariable('graders')" href="../../_variables/graders.html">$graders</a>[<a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>-&gt;<a onClick="logVariable('id')" class="var it45530" onMouseOver="hilite(45530)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>;
<a name="l5243"><span class="linenum">5243</span></a>                      }
<a name="l5244"><span class="linenum">5244</span></a>                  }
<a name="l5245"><span class="linenum">5245</span></a>              }
<a name="l5246"><span class="linenum">5246</span></a>          } else {
<a name="l5247"><span class="linenum">5247</span></a>              foreach (<a class="var it32194" onMouseOver="hilite(32194)" onMouseOut="lolite()" onClick="logVariable('potentialgraders')" href="../../_variables/potentialgraders.html">$potentialgraders</a> as <a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>) {
<a name="l5248"><span class="linenum">5248</span></a>                  if (<a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>-&gt;<a onClick="logVariable('id')" class="var it45530" onMouseOver="hilite(45530)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l5249"><span class="linenum">5249</span></a>  <span class="comment">                    // Do not send self.</span>
<a name="l5250"><span class="linenum">5250</span></a>                      continue;
<a name="l5251"><span class="linenum">5251</span></a>                  }
<a name="l5252"><span class="linenum">5252</span></a>  <span class="comment">                // Must be enrolled.</span>
<a name="l5253"><span class="linenum">5253</span></a>                  if (<a class="function" onClick="logFunction('is_enrolled')" href="../../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>(), <a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>-&gt;<a onClick="logVariable('id')" class="var it45530" onMouseOver="hilite(45530)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l5254"><span class="linenum">5254</span></a>                      <a class="var it15855" onMouseOver="hilite(15855)" onMouseOut="lolite()" onClick="logVariable('graders')" href="../../_variables/graders.html">$graders</a>[<a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>-&gt;<a onClick="logVariable('id')" class="var it45530" onMouseOver="hilite(45530)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it8956" onMouseOver="hilite(8956)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>;
<a name="l5255"><span class="linenum">5255</span></a>                  }
<a name="l5256"><span class="linenum">5256</span></a>              }
<a name="l5257"><span class="linenum">5257</span></a>          }
<a name="l5258"><span class="linenum">5258</span></a>          return <a class="var it15855" onMouseOver="hilite(15855)" onMouseOut="lolite()" onClick="logVariable('graders')" href="../../_variables/graders.html">$graders</a>;
<a name="l5259"><span class="linenum">5259</span></a>      }
<a name="l5260"><span class="linenum">5260</span></a>  
<a name="l5261"><span class="linenum">5261</span></a>      <span class="comment">/**</span>
<a name="l5262"><span class="linenum">5262</span></a>  <span class="comment">     * Returns a list of users that should receive notification about given submission.</span>
<a name="l5263"><span class="linenum">5263</span></a>  <span class="comment">     *</span>
<a name="l5264"><span class="linenum">5264</span></a>  <span class="comment">     * @param int $userid The submission to grade</span>
<a name="l5265"><span class="linenum">5265</span></a>  <span class="comment">     * @return array</span>
<a name="l5266"><span class="linenum">5266</span></a>  <span class="comment">     */</span>
<a name="l5267"><span class="linenum">5267</span></a>      protected function <a class="function" onClick="logFunction('get_notifiable_users')" href="../../_functions/get_notifiable_users.html" onMouseOver="funcPopup(event,'get_notifiable_users')">get_notifiable_users</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l5268"><span class="linenum">5268</span></a>  <span class="comment">        // Potential users should be active users only.</span>
<a name="l5269"><span class="linenum">5269</span></a>          <a class="var it32195" onMouseOver="hilite(32195)" onMouseOut="lolite()" onClick="logVariable('potentialusers')" href="../../_variables/potentialusers.html">$potentialusers</a> = <a class="function" onClick="logFunction('get_enrolled_users')" href="../../_functions/get_enrolled_users.html" onMouseOver="funcPopup(event,'get_enrolled_users')">get_enrolled_users</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, &quot;mod/assign:receivegradernotifications&quot;,
<a name="l5270"><span class="linenum">5270</span></a>                                               null, 'u.*', null, null, null, true);
<a name="l5271"><span class="linenum">5271</span></a>  
<a name="l5272"><span class="linenum">5272</span></a>          <a class="var it32196" onMouseOver="hilite(32196)" onMouseOut="lolite()" onClick="logVariable('notifiableusers')" href="../../_variables/notifiableusers.html">$notifiableusers</a> = array();
<a name="l5273"><span class="linenum">5273</span></a>          if (<a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()) == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a>) {
<a name="l5274"><span class="linenum">5274</span></a>              if (<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;groupingid)) {
<a name="l5275"><span class="linenum">5275</span></a>                  foreach (<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> as <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>) {
<a name="l5276"><span class="linenum">5276</span></a>                      foreach (<a class="var it32195" onMouseOver="hilite(32195)" onMouseOut="lolite()" onClick="logVariable('potentialusers')" href="../../_variables/potentialusers.html">$potentialusers</a> as <a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>) {
<a name="l5277"><span class="linenum">5277</span></a>                          if (<a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>-&gt;<a onClick="logVariable('id')" class="var it45745" onMouseOver="hilite(45745)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l5278"><span class="linenum">5278</span></a>  <span class="comment">                            // Do not send self.</span>
<a name="l5279"><span class="linenum">5279</span></a>                              continue;
<a name="l5280"><span class="linenum">5280</span></a>                          }
<a name="l5281"><span class="linenum">5281</span></a>                          if (<a class="function" onClick="logFunction('groups_is_member')" href="../../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>-&gt;<a onClick="logVariable('id')" class="var it45745" onMouseOver="hilite(45745)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l5282"><span class="linenum">5282</span></a>                              <a class="var it32196" onMouseOver="hilite(32196)" onMouseOut="lolite()" onClick="logVariable('notifiableusers')" href="../../_variables/notifiableusers.html">$notifiableusers</a>[<a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>-&gt;<a onClick="logVariable('id')" class="var it45745" onMouseOver="hilite(45745)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>;
<a name="l5283"><span class="linenum">5283</span></a>                          }
<a name="l5284"><span class="linenum">5284</span></a>                      }
<a name="l5285"><span class="linenum">5285</span></a>                  }
<a name="l5286"><span class="linenum">5286</span></a>              } else {
<a name="l5287"><span class="linenum">5287</span></a>  <span class="comment">                // User not in group, try to find graders without group.</span>
<a name="l5288"><span class="linenum">5288</span></a>                  foreach (<a class="var it32195" onMouseOver="hilite(32195)" onMouseOut="lolite()" onClick="logVariable('potentialusers')" href="../../_variables/potentialusers.html">$potentialusers</a> as <a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>) {
<a name="l5289"><span class="linenum">5289</span></a>                      if (<a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>-&gt;<a onClick="logVariable('id')" class="var it45745" onMouseOver="hilite(45745)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l5290"><span class="linenum">5290</span></a>  <span class="comment">                        // Do not send self.</span>
<a name="l5291"><span class="linenum">5291</span></a>                          continue;
<a name="l5292"><span class="linenum">5292</span></a>                      }
<a name="l5293"><span class="linenum">5293</span></a>                      if (!<a class="function" onClick="logFunction('groups_has_membership')" href="../../_functions/groups_has_membership.html" onMouseOver="funcPopup(event,'groups_has_membership')">groups_has_membership</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), <a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>-&gt;<a onClick="logVariable('id')" class="var it45745" onMouseOver="hilite(45745)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l5294"><span class="linenum">5294</span></a>                          <a class="var it32196" onMouseOver="hilite(32196)" onMouseOut="lolite()" onClick="logVariable('notifiableusers')" href="../../_variables/notifiableusers.html">$notifiableusers</a>[<a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>-&gt;<a onClick="logVariable('id')" class="var it45745" onMouseOver="hilite(45745)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>;
<a name="l5295"><span class="linenum">5295</span></a>                      }
<a name="l5296"><span class="linenum">5296</span></a>                  }
<a name="l5297"><span class="linenum">5297</span></a>              }
<a name="l5298"><span class="linenum">5298</span></a>          } else {
<a name="l5299"><span class="linenum">5299</span></a>              foreach (<a class="var it32195" onMouseOver="hilite(32195)" onMouseOut="lolite()" onClick="logVariable('potentialusers')" href="../../_variables/potentialusers.html">$potentialusers</a> as <a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>) {
<a name="l5300"><span class="linenum">5300</span></a>                  if (<a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>-&gt;<a onClick="logVariable('id')" class="var it45745" onMouseOver="hilite(45745)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l5301"><span class="linenum">5301</span></a>  <span class="comment">                    // Do not send self.</span>
<a name="l5302"><span class="linenum">5302</span></a>                      continue;
<a name="l5303"><span class="linenum">5303</span></a>                  }
<a name="l5304"><span class="linenum">5304</span></a>  <span class="comment">                // Must be enrolled.</span>
<a name="l5305"><span class="linenum">5305</span></a>                  if (<a class="function" onClick="logFunction('is_enrolled')" href="../../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>(), <a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>-&gt;<a onClick="logVariable('id')" class="var it45745" onMouseOver="hilite(45745)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l5306"><span class="linenum">5306</span></a>                      <a class="var it32196" onMouseOver="hilite(32196)" onMouseOut="lolite()" onClick="logVariable('notifiableusers')" href="../../_variables/notifiableusers.html">$notifiableusers</a>[<a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>-&gt;<a onClick="logVariable('id')" class="var it45745" onMouseOver="hilite(45745)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it32197" onMouseOver="hilite(32197)" onMouseOut="lolite()" onClick="logVariable('potentialuser')" href="../../_variables/potentialuser.html">$potentialuser</a>;
<a name="l5307"><span class="linenum">5307</span></a>                  }
<a name="l5308"><span class="linenum">5308</span></a>              }
<a name="l5309"><span class="linenum">5309</span></a>          }
<a name="l5310"><span class="linenum">5310</span></a>          return <a class="var it32196" onMouseOver="hilite(32196)" onMouseOut="lolite()" onClick="logVariable('notifiableusers')" href="../../_variables/notifiableusers.html">$notifiableusers</a>;
<a name="l5311"><span class="linenum">5311</span></a>      }
<a name="l5312"><span class="linenum">5312</span></a>  
<a name="l5313"><span class="linenum">5313</span></a>      <span class="comment">/**</span>
<a name="l5314"><span class="linenum">5314</span></a>  <span class="comment">     * Format a notification for plain text.</span>
<a name="l5315"><span class="linenum">5315</span></a>  <span class="comment">     *</span>
<a name="l5316"><span class="linenum">5316</span></a>  <span class="comment">     * @param string $messagetype</span>
<a name="l5317"><span class="linenum">5317</span></a>  <span class="comment">     * @param stdClass $info</span>
<a name="l5318"><span class="linenum">5318</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l5319"><span class="linenum">5319</span></a>  <span class="comment">     * @param stdClass $context</span>
<a name="l5320"><span class="linenum">5320</span></a>  <span class="comment">     * @param string $modulename</span>
<a name="l5321"><span class="linenum">5321</span></a>  <span class="comment">     * @param string $assignmentname</span>
<a name="l5322"><span class="linenum">5322</span></a>  <span class="comment">     */</span>
<a name="l5323"><span class="linenum">5323</span></a>      protected static function <a class="function" onClick="logFunction('format_notification_message_text')" href="../../_functions/format_notification_message_text.html" onMouseOver="funcPopup(event,'format_notification_message_text')">format_notification_message_text</a>(<a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a>,
<a name="l5324"><span class="linenum">5324</span></a>                                                               <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>,
<a name="l5325"><span class="linenum">5325</span></a>                                                               <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>,
<a name="l5326"><span class="linenum">5326</span></a>                                                               <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l5327"><span class="linenum">5327</span></a>                                                               <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a>,
<a name="l5328"><span class="linenum">5328</span></a>                                                               <a class="var it32198" onMouseOver="hilite(32198)" onMouseOut="lolite()" onClick="logVariable('assignmentname')" href="../../_variables/assignmentname.html">$assignmentname</a>) {
<a name="l5329"><span class="linenum">5329</span></a>          <a class="var it32199" onMouseOver="hilite(32199)" onMouseOut="lolite()" onClick="logVariable('formatparams')" href="../../_variables/formatparams.html">$formatparams</a> = array('context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>());
<a name="l5330"><span class="linenum">5330</span></a>          <a class="var it25780" onMouseOver="hilite(25780)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a>  = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/shortname.html">shortname</a>, true, <a class="var it32199" onMouseOver="hilite(32199)" onMouseOut="lolite()" onClick="logVariable('formatparams')" href="../../_variables/formatparams.html">$formatparams</a>) .
<a name="l5331"><span class="linenum">5331</span></a>                       ' -&gt; ' .
<a name="l5332"><span class="linenum">5332</span></a>                       <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a> .
<a name="l5333"><span class="linenum">5333</span></a>                       ' -&gt; ' .
<a name="l5334"><span class="linenum">5334</span></a>                       <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it32198" onMouseOver="hilite(32198)" onMouseOut="lolite()" onClick="logVariable('assignmentname')" href="../../_variables/assignmentname.html">$assignmentname</a>, true, <a class="var it32199" onMouseOver="hilite(32199)" onMouseOut="lolite()" onClick="logVariable('formatparams')" href="../../_variables/formatparams.html">$formatparams</a>) . &quot;\n&quot;;
<a name="l5335"><span class="linenum">5335</span></a>          <a class="var it25780" onMouseOver="hilite(25780)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a> .= '---------------------------------------------------------------------' . &quot;\n&quot;;
<a name="l5336"><span class="linenum">5336</span></a>          <a class="var it25780" onMouseOver="hilite(25780)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a> .= <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a> . 'text', 'assign', <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>).&quot;\n&quot;;
<a name="l5337"><span class="linenum">5337</span></a>          <a class="var it25780" onMouseOver="hilite(25780)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a> .= &quot;\n---------------------------------------------------------------------\n&quot;;
<a name="l5338"><span class="linenum">5338</span></a>          return <a class="var it25780" onMouseOver="hilite(25780)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a>;
<a name="l5339"><span class="linenum">5339</span></a>      }
<a name="l5340"><span class="linenum">5340</span></a>  
<a name="l5341"><span class="linenum">5341</span></a>      <span class="comment">/**</span>
<a name="l5342"><span class="linenum">5342</span></a>  <span class="comment">     * Format a notification for HTML.</span>
<a name="l5343"><span class="linenum">5343</span></a>  <span class="comment">     *</span>
<a name="l5344"><span class="linenum">5344</span></a>  <span class="comment">     * @param string $messagetype</span>
<a name="l5345"><span class="linenum">5345</span></a>  <span class="comment">     * @param stdClass $info</span>
<a name="l5346"><span class="linenum">5346</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l5347"><span class="linenum">5347</span></a>  <span class="comment">     * @param stdClass $context</span>
<a name="l5348"><span class="linenum">5348</span></a>  <span class="comment">     * @param string $modulename</span>
<a name="l5349"><span class="linenum">5349</span></a>  <span class="comment">     * @param stdClass $coursemodule</span>
<a name="l5350"><span class="linenum">5350</span></a>  <span class="comment">     * @param string $assignmentname</span>
<a name="l5351"><span class="linenum">5351</span></a>  <span class="comment">     */</span>
<a name="l5352"><span class="linenum">5352</span></a>      protected static function <a class="function" onClick="logFunction('format_notification_message_html')" href="../../_functions/format_notification_message_html.html" onMouseOver="funcPopup(event,'format_notification_message_html')">format_notification_message_html</a>(<a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a>,
<a name="l5353"><span class="linenum">5353</span></a>                                                               <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>,
<a name="l5354"><span class="linenum">5354</span></a>                                                               <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>,
<a name="l5355"><span class="linenum">5355</span></a>                                                               <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l5356"><span class="linenum">5356</span></a>                                                               <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a>,
<a name="l5357"><span class="linenum">5357</span></a>                                                               <a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>,
<a name="l5358"><span class="linenum">5358</span></a>                                                               <a class="var it32198" onMouseOver="hilite(32198)" onMouseOut="lolite()" onClick="logVariable('assignmentname')" href="../../_variables/assignmentname.html">$assignmentname</a>) {
<a name="l5359"><span class="linenum">5359</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l5360"><span class="linenum">5360</span></a>          <a class="var it32199" onMouseOver="hilite(32199)" onMouseOut="lolite()" onClick="logVariable('formatparams')" href="../../_variables/formatparams.html">$formatparams</a> = array('context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>());
<a name="l5361"><span class="linenum">5361</span></a>          <a class="var it25781" onMouseOver="hilite(25781)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a>  = '&lt;p&gt;&lt;font face=&quot;sans-serif&quot;&gt;' .
<a name="l5362"><span class="linenum">5362</span></a>                       '&lt;a href=&quot;' . <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> . '/course/view.php?id=' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . '&quot;&gt;' .
<a name="l5363"><span class="linenum">5363</span></a>                       <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/shortname.html">shortname</a>, true, <a class="var it32199" onMouseOver="hilite(32199)" onMouseOut="lolite()" onClick="logVariable('formatparams')" href="../../_variables/formatparams.html">$formatparams</a>) .
<a name="l5364"><span class="linenum">5364</span></a>                       '&lt;/a&gt; -&gt;' .
<a name="l5365"><span class="linenum">5365</span></a>                       '&lt;a href=&quot;' . <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> . '/mod/assign/index.php?id=' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . '&quot;&gt;' .
<a name="l5366"><span class="linenum">5366</span></a>                       <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a> .
<a name="l5367"><span class="linenum">5367</span></a>                       '&lt;/a&gt; -&gt;' .
<a name="l5368"><span class="linenum">5368</span></a>                       '&lt;a href=&quot;' . <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> . '/mod/assign/view.php?id=' . <a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>-&gt;<a onClick="logVariable('id')" class="var it43092" onMouseOver="hilite(43092)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . '&quot;&gt;' .
<a name="l5369"><span class="linenum">5369</span></a>                       <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it32198" onMouseOver="hilite(32198)" onMouseOut="lolite()" onClick="logVariable('assignmentname')" href="../../_variables/assignmentname.html">$assignmentname</a>, true, <a class="var it32199" onMouseOver="hilite(32199)" onMouseOut="lolite()" onClick="logVariable('formatparams')" href="../../_variables/formatparams.html">$formatparams</a>) .
<a name="l5370"><span class="linenum">5370</span></a>                       '&lt;/a&gt;&lt;/font&gt;&lt;/p&gt;';
<a name="l5371"><span class="linenum">5371</span></a>          <a class="var it25781" onMouseOver="hilite(25781)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a> .= '&lt;hr /&gt;&lt;font face=&quot;sans-serif&quot;&gt;';
<a name="l5372"><span class="linenum">5372</span></a>          <a class="var it25781" onMouseOver="hilite(25781)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a> .= '&lt;p&gt;' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a> . 'html', 'assign', <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>) . '&lt;/p&gt;';
<a name="l5373"><span class="linenum">5373</span></a>          <a class="var it25781" onMouseOver="hilite(25781)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a> .= '&lt;/font&gt;&lt;hr /&gt;';
<a name="l5374"><span class="linenum">5374</span></a>          return <a class="var it25781" onMouseOver="hilite(25781)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a>;
<a name="l5375"><span class="linenum">5375</span></a>      }
<a name="l5376"><span class="linenum">5376</span></a>  
<a name="l5377"><span class="linenum">5377</span></a>      <span class="comment">/**</span>
<a name="l5378"><span class="linenum">5378</span></a>  <span class="comment">     * Message someone about something (static so it can be called from cron).</span>
<a name="l5379"><span class="linenum">5379</span></a>  <span class="comment">     *</span>
<a name="l5380"><span class="linenum">5380</span></a>  <span class="comment">     * @param stdClass $userfrom</span>
<a name="l5381"><span class="linenum">5381</span></a>  <span class="comment">     * @param stdClass $userto</span>
<a name="l5382"><span class="linenum">5382</span></a>  <span class="comment">     * @param string $messagetype</span>
<a name="l5383"><span class="linenum">5383</span></a>  <span class="comment">     * @param string $eventtype</span>
<a name="l5384"><span class="linenum">5384</span></a>  <span class="comment">     * @param int $updatetime</span>
<a name="l5385"><span class="linenum">5385</span></a>  <span class="comment">     * @param stdClass $coursemodule</span>
<a name="l5386"><span class="linenum">5386</span></a>  <span class="comment">     * @param stdClass $context</span>
<a name="l5387"><span class="linenum">5387</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l5388"><span class="linenum">5388</span></a>  <span class="comment">     * @param string $modulename</span>
<a name="l5389"><span class="linenum">5389</span></a>  <span class="comment">     * @param string $assignmentname</span>
<a name="l5390"><span class="linenum">5390</span></a>  <span class="comment">     * @param bool $blindmarking</span>
<a name="l5391"><span class="linenum">5391</span></a>  <span class="comment">     * @param int $uniqueidforuser</span>
<a name="l5392"><span class="linenum">5392</span></a>  <span class="comment">     * @return void</span>
<a name="l5393"><span class="linenum">5393</span></a>  <span class="comment">     */</span>
<a name="l5394"><span class="linenum">5394</span></a>      public static function <a class="function" onClick="logFunction('send_assignment_notification')" href="../../_functions/send_assignment_notification.html" onMouseOver="funcPopup(event,'send_assignment_notification')">send_assignment_notification</a>(<a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../_variables/userfrom.html">$userfrom</a>,
<a name="l5395"><span class="linenum">5395</span></a>                                                          <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('userto')" href="../../_variables/userto.html">$userto</a>,
<a name="l5396"><span class="linenum">5396</span></a>                                                          <a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a>,
<a name="l5397"><span class="linenum">5397</span></a>                                                          <a class="var it5771" onMouseOver="hilite(5771)" onMouseOut="lolite()" onClick="logVariable('eventtype')" href="../../_variables/eventtype.html">$eventtype</a>,
<a name="l5398"><span class="linenum">5398</span></a>                                                          <a class="var it11920" onMouseOver="hilite(11920)" onMouseOut="lolite()" onClick="logVariable('updatetime')" href="../../_variables/updatetime.html">$updatetime</a>,
<a name="l5399"><span class="linenum">5399</span></a>                                                          <a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>,
<a name="l5400"><span class="linenum">5400</span></a>                                                          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l5401"><span class="linenum">5401</span></a>                                                          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>,
<a name="l5402"><span class="linenum">5402</span></a>                                                          <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a>,
<a name="l5403"><span class="linenum">5403</span></a>                                                          <a class="var it32198" onMouseOver="hilite(32198)" onMouseOut="lolite()" onClick="logVariable('assignmentname')" href="../../_variables/assignmentname.html">$assignmentname</a>,
<a name="l5404"><span class="linenum">5404</span></a>                                                          <a class="var it25202" onMouseOver="hilite(25202)" onMouseOut="lolite()" onClick="logVariable('blindmarking')" href="../../_variables/blindmarking.html">$blindmarking</a>,
<a name="l5405"><span class="linenum">5405</span></a>                                                          <a class="var it25203" onMouseOver="hilite(25203)" onMouseOut="lolite()" onClick="logVariable('uniqueidforuser')" href="../../_variables/uniqueidforuser.html">$uniqueidforuser</a>) {
<a name="l5406"><span class="linenum">5406</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l5407"><span class="linenum">5407</span></a>  
<a name="l5408"><span class="linenum">5408</span></a>          <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = new stdClass();
<a name="l5409"><span class="linenum">5409</span></a>          if (<a class="var it25202" onMouseOver="hilite(25202)" onMouseOut="lolite()" onClick="logVariable('blindmarking')" href="../../_variables/blindmarking.html">$blindmarking</a>) {
<a name="l5410"><span class="linenum">5410</span></a>              <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../_variables/userfrom.html">$userfrom</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../_variables/userfrom.html">$userfrom</a>);
<a name="l5411"><span class="linenum">5411</span></a>              <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('username')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/username.html">username</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('participant', 'assign') . ' ' . <a class="var it25203" onMouseOver="hilite(25203)" onMouseOut="lolite()" onClick="logVariable('uniqueidforuser')" href="../../_variables/uniqueidforuser.html">$uniqueidforuser</a>;
<a name="l5412"><span class="linenum">5412</span></a>              <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('firstname')" class="var it43355" onMouseOver="hilite(43355)" onMouseOut="lolite()" href="../../_variables/firstname.html">firstname</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('participant', 'assign');
<a name="l5413"><span class="linenum">5413</span></a>              <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('lastname')" class="var it43355" onMouseOver="hilite(43355)" onMouseOut="lolite()" href="../../_variables/lastname.html">lastname</a> = <a class="var it25203" onMouseOver="hilite(25203)" onMouseOut="lolite()" onClick="logVariable('uniqueidforuser')" href="../../_variables/uniqueidforuser.html">$uniqueidforuser</a>;
<a name="l5414"><span class="linenum">5414</span></a>              <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('email')" class="var it43355" onMouseOver="hilite(43355)" onMouseOut="lolite()" href="../../_variables/email.html">email</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('noreplyaddress')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/noreplyaddress.html">noreplyaddress</a>;
<a name="l5415"><span class="linenum">5415</span></a>          } else {
<a name="l5416"><span class="linenum">5416</span></a>              <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('username')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/username.html">username</a> = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../_variables/userfrom.html">$userfrom</a>, true);
<a name="l5417"><span class="linenum">5417</span></a>          }
<a name="l5418"><span class="linenum">5418</span></a>          <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('assignment')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/assignment.html">assignment</a> = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it32198" onMouseOver="hilite(32198)" onMouseOut="lolite()" onClick="logVariable('assignmentname')" href="../../_variables/assignmentname.html">$assignmentname</a>, true, array('context'=&gt;<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>));
<a name="l5419"><span class="linenum">5419</span></a>          <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('url')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/url.html">url</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/mod/assign/view.php?id='.<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>-&gt;<a onClick="logVariable('id')" class="var it43092" onMouseOver="hilite(43092)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l5420"><span class="linenum">5420</span></a>          <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('timeupdated')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/timeupdated.html">timeupdated</a> = <a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it11920" onMouseOver="hilite(11920)" onMouseOut="lolite()" onClick="logVariable('updatetime')" href="../../_variables/updatetime.html">$updatetime</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimerecentfull'));
<a name="l5421"><span class="linenum">5421</span></a>  
<a name="l5422"><span class="linenum">5422</span></a>          <a class="var it21048" onMouseOver="hilite(21048)" onMouseOut="lolite()" onClick="logVariable('postsubject')" href="../../_variables/postsubject.html">$postsubject</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a> . 'small', 'assign', <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>);
<a name="l5423"><span class="linenum">5423</span></a>          <a class="var it25780" onMouseOver="hilite(25780)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a> = self::<a class="function" onClick="logFunction('format_notification_message_text')" href="../../_functions/format_notification_message_text.html" onMouseOver="funcPopup(event,'format_notification_message_text')">format_notification_message_text</a>(<a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a>,
<a name="l5424"><span class="linenum">5424</span></a>                                                             <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>,
<a name="l5425"><span class="linenum">5425</span></a>                                                             <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>,
<a name="l5426"><span class="linenum">5426</span></a>                                                             <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l5427"><span class="linenum">5427</span></a>                                                             <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a>,
<a name="l5428"><span class="linenum">5428</span></a>                                                             <a class="var it32198" onMouseOver="hilite(32198)" onMouseOut="lolite()" onClick="logVariable('assignmentname')" href="../../_variables/assignmentname.html">$assignmentname</a>);
<a name="l5429"><span class="linenum">5429</span></a>          <a class="var it25781" onMouseOver="hilite(25781)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a> = '';
<a name="l5430"><span class="linenum">5430</span></a>          if (<a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('userto')" href="../../_variables/userto.html">$userto</a>-&gt;<a onClick="logVariable('mailformat')" class="var it44088" onMouseOver="hilite(44088)" onMouseOut="lolite()" href="../../_variables/mailformat.html">mailformat</a> == 1) {
<a name="l5431"><span class="linenum">5431</span></a>              <a class="var it25781" onMouseOver="hilite(25781)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a> = self::<a class="function" onClick="logFunction('format_notification_message_html')" href="../../_functions/format_notification_message_html.html" onMouseOver="funcPopup(event,'format_notification_message_html')">format_notification_message_html</a>(<a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a>,
<a name="l5432"><span class="linenum">5432</span></a>                                                                 <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>,
<a name="l5433"><span class="linenum">5433</span></a>                                                                 <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>,
<a name="l5434"><span class="linenum">5434</span></a>                                                                 <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l5435"><span class="linenum">5435</span></a>                                                                 <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../_variables/modulename.html">$modulename</a>,
<a name="l5436"><span class="linenum">5436</span></a>                                                                 <a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>,
<a name="l5437"><span class="linenum">5437</span></a>                                                                 <a class="var it32198" onMouseOver="hilite(32198)" onMouseOut="lolite()" onClick="logVariable('assignmentname')" href="../../_variables/assignmentname.html">$assignmentname</a>);
<a name="l5438"><span class="linenum">5438</span></a>          }
<a name="l5439"><span class="linenum">5439</span></a>  
<a name="l5440"><span class="linenum">5440</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a> = new stdClass();
<a name="l5441"><span class="linenum">5441</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('modulename')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../_variables/modulename.html">modulename</a>       = 'assign';
<a name="l5442"><span class="linenum">5442</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userfrom')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../_variables/userfrom.html">userfrom</a>         = <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../_variables/userfrom.html">$userfrom</a>;
<a name="l5443"><span class="linenum">5443</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userto')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../_variables/userto.html">userto</a>           = <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('userto')" href="../../_variables/userto.html">$userto</a>;
<a name="l5444"><span class="linenum">5444</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('subject')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../_variables/subject.html">subject</a>          = <a class="var it21048" onMouseOver="hilite(21048)" onMouseOut="lolite()" onClick="logVariable('postsubject')" href="../../_variables/postsubject.html">$postsubject</a>;
<a name="l5445"><span class="linenum">5445</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../_variables/fullmessage.html">fullmessage</a>      = <a class="var it25780" onMouseOver="hilite(25780)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a>;
<a name="l5446"><span class="linenum">5446</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessageformat')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../_variables/fullmessageformat.html">fullmessageformat</a> = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l5447"><span class="linenum">5447</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessagehtml')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../_variables/fullmessagehtml.html">fullmessagehtml</a>  = <a class="var it25781" onMouseOver="hilite(25781)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a>;
<a name="l5448"><span class="linenum">5448</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('smallmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../_variables/smallmessage.html">smallmessage</a>     = <a class="var it21048" onMouseOver="hilite(21048)" onMouseOut="lolite()" onClick="logVariable('postsubject')" href="../../_variables/postsubject.html">$postsubject</a>;
<a name="l5449"><span class="linenum">5449</span></a>  
<a name="l5450"><span class="linenum">5450</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('name')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>            = <a class="var it5771" onMouseOver="hilite(5771)" onMouseOut="lolite()" onClick="logVariable('eventtype')" href="../../_variables/eventtype.html">$eventtype</a>;
<a name="l5451"><span class="linenum">5451</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('component')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>       = 'mod_assign';
<a name="l5452"><span class="linenum">5452</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('notification')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../_variables/notification.html">notification</a>    = 1;
<a name="l5453"><span class="linenum">5453</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('contexturl')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../_variables/contexturl.html">contexturl</a>      = <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('url')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/url.html">url</a>;
<a name="l5454"><span class="linenum">5454</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('contexturlname')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../_variables/contexturlname.html">contexturlname</a>  = <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('assignment')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/assignment.html">assignment</a>;
<a name="l5455"><span class="linenum">5455</span></a>  
<a name="l5456"><span class="linenum">5456</span></a>          <a class="function" onClick="logFunction('message_send')" href="../../_functions/message_send.html" onMouseOver="funcPopup(event,'message_send')">message_send</a>(<a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>);
<a name="l5457"><span class="linenum">5457</span></a>      }
<a name="l5458"><span class="linenum">5458</span></a>  
<a name="l5459"><span class="linenum">5459</span></a>      <span class="comment">/**</span>
<a name="l5460"><span class="linenum">5460</span></a>  <span class="comment">     * Message someone about something.</span>
<a name="l5461"><span class="linenum">5461</span></a>  <span class="comment">     *</span>
<a name="l5462"><span class="linenum">5462</span></a>  <span class="comment">     * @param stdClass $userfrom</span>
<a name="l5463"><span class="linenum">5463</span></a>  <span class="comment">     * @param stdClass $userto</span>
<a name="l5464"><span class="linenum">5464</span></a>  <span class="comment">     * @param string $messagetype</span>
<a name="l5465"><span class="linenum">5465</span></a>  <span class="comment">     * @param string $eventtype</span>
<a name="l5466"><span class="linenum">5466</span></a>  <span class="comment">     * @param int $updatetime</span>
<a name="l5467"><span class="linenum">5467</span></a>  <span class="comment">     * @return void</span>
<a name="l5468"><span class="linenum">5468</span></a>  <span class="comment">     */</span>
<a name="l5469"><span class="linenum">5469</span></a>      public function <a class="function" onClick="logFunction('send_notification')" href="../../_functions/send_notification.html" onMouseOver="funcPopup(event,'send_notification')">send_notification</a>(<a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../_variables/userfrom.html">$userfrom</a>, <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('userto')" href="../../_variables/userto.html">$userto</a>, <a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a>, <a class="var it5771" onMouseOver="hilite(5771)" onMouseOut="lolite()" onClick="logVariable('eventtype')" href="../../_variables/eventtype.html">$eventtype</a>, <a class="var it11920" onMouseOver="hilite(11920)" onMouseOut="lolite()" onClick="logVariable('updatetime')" href="../../_variables/updatetime.html">$updatetime</a>) {
<a name="l5470"><span class="linenum">5470</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l5471"><span class="linenum">5471</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="class" onClick="logClass('core_user')" href="../../_classes/core_user.html" onMouseOver="classPopup(event,'core_user')">core_user</a>::<a class="function" onClick="logFunction('is_real_user')" href="../../_functions/is_real_user.html" onMouseOver="funcPopup(event,'is_real_user')">is_real_user</a>(<a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('id')" class="var it43355" onMouseOver="hilite(43355)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) ? <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('id')" class="var it43355" onMouseOver="hilite(43355)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> : <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l5472"><span class="linenum">5472</span></a>          <a class="var it4593" onMouseOver="hilite(4593)" onMouseOut="lolite()" onClick="logVariable('uniqueid')" href="../../_variables/uniqueid.html">$uniqueid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_uniqueid_for_user')" href="../../_functions/get_uniqueid_for_user.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user')">get_uniqueid_for_user</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l5473"><span class="linenum">5473</span></a>          self::<a class="function" onClick="logFunction('send_assignment_notification')" href="../../_functions/send_assignment_notification.html" onMouseOver="funcPopup(event,'send_assignment_notification')">send_assignment_notification</a>(<a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../_variables/userfrom.html">$userfrom</a>,
<a name="l5474"><span class="linenum">5474</span></a>                                             <a class="var it6922" onMouseOver="hilite(6922)" onMouseOut="lolite()" onClick="logVariable('userto')" href="../../_variables/userto.html">$userto</a>,
<a name="l5475"><span class="linenum">5475</span></a>                                             <a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../../_variables/messagetype.html">$messagetype</a>,
<a name="l5476"><span class="linenum">5476</span></a>                                             <a class="var it5771" onMouseOver="hilite(5771)" onMouseOut="lolite()" onClick="logVariable('eventtype')" href="../../_variables/eventtype.html">$eventtype</a>,
<a name="l5477"><span class="linenum">5477</span></a>                                             <a class="var it11920" onMouseOver="hilite(11920)" onMouseOut="lolite()" onClick="logVariable('updatetime')" href="../../_variables/updatetime.html">$updatetime</a>,
<a name="l5478"><span class="linenum">5478</span></a>                                             <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(),
<a name="l5479"><span class="linenum">5479</span></a>                                             <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l5480"><span class="linenum">5480</span></a>                                             <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(),
<a name="l5481"><span class="linenum">5481</span></a>                                             <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_module_name')" href="../../_functions/get_module_name.html" onMouseOver="funcPopup(event,'get_module_name')">get_module_name</a>(),
<a name="l5482"><span class="linenum">5482</span></a>                                             <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;name,
<a name="l5483"><span class="linenum">5483</span></a>                                             <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_blind_marking')" href="../../_functions/is_blind_marking.html" onMouseOver="funcPopup(event,'is_blind_marking')">is_blind_marking</a>(),
<a name="l5484"><span class="linenum">5484</span></a>                                             <a class="var it4593" onMouseOver="hilite(4593)" onMouseOut="lolite()" onClick="logVariable('uniqueid')" href="../../_variables/uniqueid.html">$uniqueid</a>);
<a name="l5485"><span class="linenum">5485</span></a>      }
<a name="l5486"><span class="linenum">5486</span></a>  
<a name="l5487"><span class="linenum">5487</span></a>      <span class="comment">/**</span>
<a name="l5488"><span class="linenum">5488</span></a>  <span class="comment">     * Notify student upon successful submission copy.</span>
<a name="l5489"><span class="linenum">5489</span></a>  <span class="comment">     *</span>
<a name="l5490"><span class="linenum">5490</span></a>  <span class="comment">     * @param stdClass $submission</span>
<a name="l5491"><span class="linenum">5491</span></a>  <span class="comment">     * @return void</span>
<a name="l5492"><span class="linenum">5492</span></a>  <span class="comment">     */</span>
<a name="l5493"><span class="linenum">5493</span></a>      protected function <a class="function" onClick="logFunction('notify_student_submission_copied')" href="../../_functions/notify_student_submission_copied.html" onMouseOver="funcPopup(event,'notify_student_submission_copied')">notify_student_submission_copied</a>(stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l5494"><span class="linenum">5494</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l5495"><span class="linenum">5495</span></a>  
<a name="l5496"><span class="linenum">5496</span></a>          <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>();
<a name="l5497"><span class="linenum">5497</span></a>  <span class="comment">        // Use the same setting for this - no need for another one.</span>
<a name="l5498"><span class="linenum">5498</span></a>          if (empty(<a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('submissionreceipts')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/submissionreceipts.html">submissionreceipts</a>)) {
<a name="l5499"><span class="linenum">5499</span></a>  <span class="comment">            // No need to do anything.</span>
<a name="l5500"><span class="linenum">5500</span></a>              return;
<a name="l5501"><span class="linenum">5501</span></a>          }
<a name="l5502"><span class="linenum">5502</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>) {
<a name="l5503"><span class="linenum">5503</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l5504"><span class="linenum">5504</span></a>          } else {
<a name="l5505"><span class="linenum">5505</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l5506"><span class="linenum">5506</span></a>          }
<a name="l5507"><span class="linenum">5507</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('send_notification')" href="../../_functions/send_notification.html" onMouseOver="funcPopup(event,'send_notification')">send_notification</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>,
<a name="l5508"><span class="linenum">5508</span></a>                                   <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>,
<a name="l5509"><span class="linenum">5509</span></a>                                   'submissioncopied',
<a name="l5510"><span class="linenum">5510</span></a>                                   'assign_notification',
<a name="l5511"><span class="linenum">5511</span></a>                                   <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>);
<a name="l5512"><span class="linenum">5512</span></a>      }
<a name="l5513"><span class="linenum">5513</span></a>      <span class="comment">/**</span>
<a name="l5514"><span class="linenum">5514</span></a>  <span class="comment">     * Notify student upon successful submission.</span>
<a name="l5515"><span class="linenum">5515</span></a>  <span class="comment">     *</span>
<a name="l5516"><span class="linenum">5516</span></a>  <span class="comment">     * @param stdClass $submission</span>
<a name="l5517"><span class="linenum">5517</span></a>  <span class="comment">     * @return void</span>
<a name="l5518"><span class="linenum">5518</span></a>  <span class="comment">     */</span>
<a name="l5519"><span class="linenum">5519</span></a>      protected function <a class="function" onClick="logFunction('notify_student_submission_receipt')" href="../../_functions/notify_student_submission_receipt.html" onMouseOver="funcPopup(event,'notify_student_submission_receipt')">notify_student_submission_receipt</a>(stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l5520"><span class="linenum">5520</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l5521"><span class="linenum">5521</span></a>  
<a name="l5522"><span class="linenum">5522</span></a>          <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>();
<a name="l5523"><span class="linenum">5523</span></a>          if (empty(<a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('submissionreceipts')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/submissionreceipts.html">submissionreceipts</a>)) {
<a name="l5524"><span class="linenum">5524</span></a>  <span class="comment">            // No need to do anything.</span>
<a name="l5525"><span class="linenum">5525</span></a>              return;
<a name="l5526"><span class="linenum">5526</span></a>          }
<a name="l5527"><span class="linenum">5527</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>) {
<a name="l5528"><span class="linenum">5528</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l5529"><span class="linenum">5529</span></a>          } else {
<a name="l5530"><span class="linenum">5530</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l5531"><span class="linenum">5531</span></a>          }
<a name="l5532"><span class="linenum">5532</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l5533"><span class="linenum">5533</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('send_notification')" href="../../_functions/send_notification.html" onMouseOver="funcPopup(event,'send_notification')">send_notification</a>(<a class="class" onClick="logClass('core_user')" href="../../_classes/core_user.html" onMouseOver="classPopup(event,'core_user')">core_user</a>::<a class="function" onClick="logFunction('get_noreply_user')" href="../../_functions/get_noreply_user.html" onMouseOver="funcPopup(event,'get_noreply_user')">get_noreply_user</a>(),
<a name="l5534"><span class="linenum">5534</span></a>                                       <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>,
<a name="l5535"><span class="linenum">5535</span></a>                                       'submissionreceipt',
<a name="l5536"><span class="linenum">5536</span></a>                                       'assign_notification',
<a name="l5537"><span class="linenum">5537</span></a>                                       <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>);
<a name="l5538"><span class="linenum">5538</span></a>          } else {
<a name="l5539"><span class="linenum">5539</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('send_notification')" href="../../_functions/send_notification.html" onMouseOver="funcPopup(event,'send_notification')">send_notification</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>,
<a name="l5540"><span class="linenum">5540</span></a>                                       <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>,
<a name="l5541"><span class="linenum">5541</span></a>                                       'submissionreceiptother',
<a name="l5542"><span class="linenum">5542</span></a>                                       'assign_notification',
<a name="l5543"><span class="linenum">5543</span></a>                                       <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>);
<a name="l5544"><span class="linenum">5544</span></a>          }
<a name="l5545"><span class="linenum">5545</span></a>      }
<a name="l5546"><span class="linenum">5546</span></a>  
<a name="l5547"><span class="linenum">5547</span></a>      <span class="comment">/**</span>
<a name="l5548"><span class="linenum">5548</span></a>  <span class="comment">     * Send notifications to graders upon student submissions.</span>
<a name="l5549"><span class="linenum">5549</span></a>  <span class="comment">     *</span>
<a name="l5550"><span class="linenum">5550</span></a>  <span class="comment">     * @param stdClass $submission</span>
<a name="l5551"><span class="linenum">5551</span></a>  <span class="comment">     * @return void</span>
<a name="l5552"><span class="linenum">5552</span></a>  <span class="comment">     */</span>
<a name="l5553"><span class="linenum">5553</span></a>      protected function <a class="function" onClick="logFunction('notify_graders')" href="../../_functions/notify_graders.html" onMouseOver="funcPopup(event,'notify_graders')">notify_graders</a>(stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l5554"><span class="linenum">5554</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l5555"><span class="linenum">5555</span></a>  
<a name="l5556"><span class="linenum">5556</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l5557"><span class="linenum">5557</span></a>  
<a name="l5558"><span class="linenum">5558</span></a>          <a class="var it15005" onMouseOver="hilite(15005)" onMouseOut="lolite()" onClick="logVariable('late')" href="../../_variables/late.html">$late</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('duedate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/duedate.html">duedate</a> &amp;&amp; (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('duedate')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/duedate.html">duedate</a> &lt; <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>());
<a name="l5559"><span class="linenum">5559</span></a>  
<a name="l5560"><span class="linenum">5560</span></a>          if (!<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('sendnotifications')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/sendnotifications.html">sendnotifications</a> &amp;&amp; !(<a class="var it15005" onMouseOver="hilite(15005)" onMouseOut="lolite()" onClick="logVariable('late')" href="../../_variables/late.html">$late</a> &amp;&amp; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('sendlatenotifications')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/sendlatenotifications.html">sendlatenotifications</a>)) {
<a name="l5561"><span class="linenum">5561</span></a>  <span class="comment">            // No need to do anything.</span>
<a name="l5562"><span class="linenum">5562</span></a>              return;
<a name="l5563"><span class="linenum">5563</span></a>          }
<a name="l5564"><span class="linenum">5564</span></a>  
<a name="l5565"><span class="linenum">5565</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>) {
<a name="l5566"><span class="linenum">5566</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l5567"><span class="linenum">5567</span></a>          } else {
<a name="l5568"><span class="linenum">5568</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l5569"><span class="linenum">5569</span></a>          }
<a name="l5570"><span class="linenum">5570</span></a>  
<a name="l5571"><span class="linenum">5571</span></a>          if (<a class="var it32201" onMouseOver="hilite(32201)" onMouseOut="lolite()" onClick="logVariable('notifyusers')" href="../../_variables/notifyusers.html">$notifyusers</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_notifiable_users')" href="../../_functions/get_notifiable_users.html" onMouseOver="funcPopup(event,'get_notifiable_users')">get_notifiable_users</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l5572"><span class="linenum">5572</span></a>              foreach (<a class="var it32201" onMouseOver="hilite(32201)" onMouseOut="lolite()" onClick="logVariable('notifyusers')" href="../../_variables/notifyusers.html">$notifyusers</a> as <a class="var it32202" onMouseOver="hilite(32202)" onMouseOut="lolite()" onClick="logVariable('notifyuser')" href="../../_variables/notifyuser.html">$notifyuser</a>) {
<a name="l5573"><span class="linenum">5573</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('send_notification')" href="../../_functions/send_notification.html" onMouseOver="funcPopup(event,'send_notification')">send_notification</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>,
<a name="l5574"><span class="linenum">5574</span></a>                                           <a class="var it32202" onMouseOver="hilite(32202)" onMouseOut="lolite()" onClick="logVariable('notifyuser')" href="../../_variables/notifyuser.html">$notifyuser</a>,
<a name="l5575"><span class="linenum">5575</span></a>                                           'gradersubmissionupdated',
<a name="l5576"><span class="linenum">5576</span></a>                                           'assign_notification',
<a name="l5577"><span class="linenum">5577</span></a>                                           <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>);
<a name="l5578"><span class="linenum">5578</span></a>              }
<a name="l5579"><span class="linenum">5579</span></a>          }
<a name="l5580"><span class="linenum">5580</span></a>      }
<a name="l5581"><span class="linenum">5581</span></a>  
<a name="l5582"><span class="linenum">5582</span></a>      <span class="comment">/**</span>
<a name="l5583"><span class="linenum">5583</span></a>  <span class="comment">     * Submit a submission for grading.</span>
<a name="l5584"><span class="linenum">5584</span></a>  <span class="comment">     *</span>
<a name="l5585"><span class="linenum">5585</span></a>  <span class="comment">     * @param stdClass $data - The form data</span>
<a name="l5586"><span class="linenum">5586</span></a>  <span class="comment">     * @param array $notices - List of error messages to display on an error condition.</span>
<a name="l5587"><span class="linenum">5587</span></a>  <span class="comment">     * @return bool Return false if the submission was not submitted.</span>
<a name="l5588"><span class="linenum">5588</span></a>  <span class="comment">     */</span>
<a name="l5589"><span class="linenum">5589</span></a>      public function <a class="function" onClick="logFunction('submit_for_grading')" href="../../_functions/submit_for_grading.html" onMouseOver="funcPopup(event,'submit_for_grading')">submit_for_grading</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>) {
<a name="l5590"><span class="linenum">5590</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l5591"><span class="linenum">5591</span></a>  
<a name="l5592"><span class="linenum">5592</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l5593"><span class="linenum">5593</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>)) {
<a name="l5594"><span class="linenum">5594</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l5595"><span class="linenum">5595</span></a>          }
<a name="l5596"><span class="linenum">5596</span></a>  <span class="comment">        // Need submit permission to submit an assignment.</span>
<a name="l5597"><span class="linenum">5597</span></a>          if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l5598"><span class="linenum">5598</span></a>              <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:submit', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l5599"><span class="linenum">5599</span></a>          } else {
<a name="l5600"><span class="linenum">5600</span></a>              if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_edit_submission')" href="../../_functions/can_edit_submission.html" onMouseOver="funcPopup(event,'can_edit_submission')">can_edit_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l5601"><span class="linenum">5601</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('nopermission');
<a name="l5602"><span class="linenum">5602</span></a>              }
<a name="l5603"><span class="linenum">5603</span></a>          }
<a name="l5604"><span class="linenum">5604</span></a>  
<a name="l5605"><span class="linenum">5605</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l5606"><span class="linenum">5606</span></a>  
<a name="l5607"><span class="linenum">5607</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>) {
<a name="l5608"><span class="linenum">5608</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 0, true);
<a name="l5609"><span class="linenum">5609</span></a>          } else {
<a name="l5610"><span class="linenum">5610</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true);
<a name="l5611"><span class="linenum">5611</span></a>          }
<a name="l5612"><span class="linenum">5612</span></a>  
<a name="l5613"><span class="linenum">5613</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submissions_open')" href="../../_functions/submissions_open.html" onMouseOver="funcPopup(event,'submissions_open')">submissions_open</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l5614"><span class="linenum">5614</span></a>              <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionsclosed', 'assign');
<a name="l5615"><span class="linenum">5615</span></a>              return false;
<a name="l5616"><span class="linenum">5616</span></a>          }
<a name="l5617"><span class="linenum">5617</span></a>  
<a name="l5618"><span class="linenum">5618</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('requiresubmissionstatement')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/requiresubmissionstatement.html">requiresubmissionstatement</a> &amp;&amp; empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('submissionstatement')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/submissionstatement.html">submissionstatement</a>) &amp;&amp; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l5619"><span class="linenum">5619</span></a>              return false;
<a name="l5620"><span class="linenum">5620</span></a>          }
<a name="l5621"><span class="linenum">5621</span></a>  
<a name="l5622"><span class="linenum">5622</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> != <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>) {
<a name="l5623"><span class="linenum">5623</span></a>  <span class="comment">            // Give each submission plugin a chance to process the submission.</span>
<a name="l5624"><span class="linenum">5624</span></a>              <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>();
<a name="l5625"><span class="linenum">5625</span></a>              foreach (<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l5626"><span class="linenum">5626</span></a>                  if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l5627"><span class="linenum">5627</span></a>                      <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('submit_for_grading')" href="../../_functions/submit_for_grading.html" onMouseOver="funcPopup(event,'submit_for_grading')">submit_for_grading</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l5628"><span class="linenum">5628</span></a>                  }
<a name="l5629"><span class="linenum">5629</span></a>              }
<a name="l5630"><span class="linenum">5630</span></a>  
<a name="l5631"><span class="linenum">5631</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>;
<a name="l5632"><span class="linenum">5632</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_submission')" href="../../_functions/update_submission.html" onMouseOver="funcPopup(event,'update_submission')">update_submission</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>);
<a name="l5633"><span class="linenum">5633</span></a>              <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>());
<a name="l5634"><span class="linenum">5634</span></a>              if (<a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()) &amp;&amp; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('completionsubmit')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/completionsubmit.html">completionsubmit</a>) {
<a name="l5635"><span class="linenum">5635</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_activity_completion_records')" href="../../_functions/update_activity_completion_records.html" onMouseOver="funcPopup(event,'update_activity_completion_records')">update_activity_completion_records</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>,
<a name="l5636"><span class="linenum">5636</span></a>                                                            <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('requireallteammemberssubmit')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/requireallteammemberssubmit.html">requireallteammemberssubmit</a>,
<a name="l5637"><span class="linenum">5637</span></a>                                                            <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>,
<a name="l5638"><span class="linenum">5638</span></a>                                                            <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>,
<a name="l5639"><span class="linenum">5639</span></a>                                                            <a class="constant" onClick="logConstant('COMPLETION_COMPLETE')" href="../../_constants/COMPLETION_COMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_COMPLETE')">COMPLETION_COMPLETE</a>,
<a name="l5640"><span class="linenum">5640</span></a>                                                            <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>);
<a name="l5641"><span class="linenum">5641</span></a>              }
<a name="l5642"><span class="linenum">5642</span></a>  
<a name="l5643"><span class="linenum">5643</span></a>              if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('submissionstatement')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/submissionstatement.html">submissionstatement</a>) &amp;&amp; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l5644"><span class="linenum">5644</span></a>                  \mod_assign\event\<a class="class" onClick="logClass('statement_accepted')" href="../../_classes/statement_accepted.html" onMouseOver="classPopup(event,'statement_accepted')">statement_accepted</a>::<a class="function" onClick="logFunction('create_from_submission')" href="../../_functions/create_from_submission.html" onMouseOver="funcPopup(event,'create_from_submission')">create_from_submission</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l5645"><span class="linenum">5645</span></a>              }
<a name="l5646"><span class="linenum">5646</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('notify_graders')" href="../../_functions/notify_graders.html" onMouseOver="funcPopup(event,'notify_graders')">notify_graders</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l5647"><span class="linenum">5647</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('notify_student_submission_receipt')" href="../../_functions/notify_student_submission_receipt.html" onMouseOver="funcPopup(event,'notify_student_submission_receipt')">notify_student_submission_receipt</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l5648"><span class="linenum">5648</span></a>  
<a name="l5649"><span class="linenum">5649</span></a>              \mod_assign\event\<a class="class" onClick="logClass('assessable_submitted')" href="../../_classes/assessable_submitted.html" onMouseOver="classPopup(event,'assessable_submitted')">assessable_submitted</a>::<a class="function" onClick="logFunction('create_from_submission')" href="../../_functions/create_from_submission.html" onMouseOver="funcPopup(event,'create_from_submission')">create_from_submission</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, false)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l5650"><span class="linenum">5650</span></a>  
<a name="l5651"><span class="linenum">5651</span></a>              return true;
<a name="l5652"><span class="linenum">5652</span></a>          }
<a name="l5653"><span class="linenum">5653</span></a>          <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionsclosed', 'assign');
<a name="l5654"><span class="linenum">5654</span></a>          return false;
<a name="l5655"><span class="linenum">5655</span></a>      }
<a name="l5656"><span class="linenum">5656</span></a>  
<a name="l5657"><span class="linenum">5657</span></a>      <span class="comment">/**</span>
<a name="l5658"><span class="linenum">5658</span></a>  <span class="comment">     * A students submission is submitted for grading by a teacher.</span>
<a name="l5659"><span class="linenum">5659</span></a>  <span class="comment">     *</span>
<a name="l5660"><span class="linenum">5660</span></a>  <span class="comment">     * @return bool</span>
<a name="l5661"><span class="linenum">5661</span></a>  <span class="comment">     */</span>
<a name="l5662"><span class="linenum">5662</span></a>      protected function <a class="function" onClick="logFunction('process_submit_other_for_grading')" href="../../_functions/process_submit_other_for_grading.html" onMouseOver="funcPopup(event,'process_submit_other_for_grading')">process_submit_other_for_grading</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>) {
<a name="l5663"><span class="linenum">5663</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l5664"><span class="linenum">5664</span></a>  
<a name="l5665"><span class="linenum">5665</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l5666"><span class="linenum">5666</span></a>  
<a name="l5667"><span class="linenum">5667</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('userid', <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l5668"><span class="linenum">5668</span></a>  
<a name="l5669"><span class="linenum">5669</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submissions_open')" href="../../_functions/submissions_open.html" onMouseOver="funcPopup(event,'submissions_open')">submissions_open</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l5670"><span class="linenum">5670</span></a>              <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionsclosed', 'assign');
<a name="l5671"><span class="linenum">5671</span></a>              return false;
<a name="l5672"><span class="linenum">5672</span></a>          }
<a name="l5673"><span class="linenum">5673</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l5674"><span class="linenum">5674</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l5675"><span class="linenum">5675</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submit_for_grading')" href="../../_functions/submit_for_grading.html" onMouseOver="funcPopup(event,'submit_for_grading')">submit_for_grading</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>);
<a name="l5676"><span class="linenum">5676</span></a>      }
<a name="l5677"><span class="linenum">5677</span></a>  
<a name="l5678"><span class="linenum">5678</span></a>      <span class="comment">/**</span>
<a name="l5679"><span class="linenum">5679</span></a>  <span class="comment">     * Assignment submission is processed before grading.</span>
<a name="l5680"><span class="linenum">5680</span></a>  <span class="comment">     *</span>
<a name="l5681"><span class="linenum">5681</span></a>  <span class="comment">     * @param moodleform|null $mform If validation failed when submitting this form - this is the moodleform.</span>
<a name="l5682"><span class="linenum">5682</span></a>  <span class="comment">     *               It can be null.</span>
<a name="l5683"><span class="linenum">5683</span></a>  <span class="comment">     * @return bool Return false if the validation fails. This affects which page is displayed next.</span>
<a name="l5684"><span class="linenum">5684</span></a>  <span class="comment">     */</span>
<a name="l5685"><span class="linenum">5685</span></a>      protected function <a class="function" onClick="logFunction('process_submit_for_grading')" href="../../_functions/process_submit_for_grading.html" onMouseOver="funcPopup(event,'process_submit_for_grading')">process_submit_for_grading</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>) {
<a name="l5686"><span class="linenum">5686</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l5687"><span class="linenum">5687</span></a>  
<a name="l5688"><span class="linenum">5688</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/submissionconfirmform.php.html">/mod/assign/submissionconfirmform.php</a>');
<a name="l5689"><span class="linenum">5689</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l5690"><span class="linenum">5690</span></a>  
<a name="l5691"><span class="linenum">5691</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submissions_open')" href="../../_functions/submissions_open.html" onMouseOver="funcPopup(event,'submissions_open')">submissions_open</a>()) {
<a name="l5692"><span class="linenum">5692</span></a>              <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionsclosed', 'assign');
<a name="l5693"><span class="linenum">5693</span></a>              return false;
<a name="l5694"><span class="linenum">5694</span></a>          }
<a name="l5695"><span class="linenum">5695</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l5696"><span class="linenum">5696</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l5697"><span class="linenum">5697</span></a>          <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>();
<a name="l5698"><span class="linenum">5698</span></a>          <a class="var it26817" onMouseOver="hilite(26817)" onMouseOut="lolite()" onClick="logVariable('requiresubmissionstatement')" href="../../_variables/requiresubmissionstatement.html">$requiresubmissionstatement</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('requiresubmissionstatement')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/requiresubmissionstatement.html">requiresubmissionstatement</a> &amp;&amp;
<a name="l5699"><span class="linenum">5699</span></a>                                         !empty(<a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('submissionstatement')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/submissionstatement.html">submissionstatement</a>);
<a name="l5700"><span class="linenum">5700</span></a>  
<a name="l5701"><span class="linenum">5701</span></a>          <a class="var it19952" onMouseOver="hilite(19952)" onMouseOut="lolite()" onClick="logVariable('submissionstatement')" href="../../_variables/submissionstatement.html">$submissionstatement</a> = '';
<a name="l5702"><span class="linenum">5702</span></a>          if (!empty(<a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('submissionstatement')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/submissionstatement.html">submissionstatement</a>)) {
<a name="l5703"><span class="linenum">5703</span></a>  <span class="comment">            // Format the submission statement before its sent. We turn off para because this is going within</span>
<a name="l5704"><span class="linenum">5704</span></a>  <span class="comment">            // a form element.</span>
<a name="l5705"><span class="linenum">5705</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array(
<a name="l5706"><span class="linenum">5706</span></a>                  'context' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l5707"><span class="linenum">5707</span></a>                  'para' =&gt; false
<a name="l5708"><span class="linenum">5708</span></a>              );
<a name="l5709"><span class="linenum">5709</span></a>              <a class="var it19952" onMouseOver="hilite(19952)" onMouseOut="lolite()" onClick="logVariable('submissionstatement')" href="../../_variables/submissionstatement.html">$submissionstatement</a> = <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('submissionstatement')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/submissionstatement.html">submissionstatement</a>, <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l5710"><span class="linenum">5710</span></a>          }
<a name="l5711"><span class="linenum">5711</span></a>  
<a name="l5712"><span class="linenum">5712</span></a>          if (<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> == null) {
<a name="l5713"><span class="linenum">5713</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_confirm_submission_form')" href="../../_classes/mod_assign_confirm_submission_form.html" onMouseOver="classPopup(event,'mod_assign_confirm_submission_form')">mod_assign_confirm_submission_form</a>(null, array(<a class="var it26817" onMouseOver="hilite(26817)" onMouseOut="lolite()" onClick="logVariable('requiresubmissionstatement')" href="../../_variables/requiresubmissionstatement.html">$requiresubmissionstatement</a>,
<a name="l5714"><span class="linenum">5714</span></a>                                                                      <a class="var it19952" onMouseOver="hilite(19952)" onMouseOut="lolite()" onClick="logVariable('submissionstatement')" href="../../_variables/submissionstatement.html">$submissionstatement</a>,
<a name="l5715"><span class="linenum">5715</span></a>                                                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l5716"><span class="linenum">5716</span></a>                                                                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>));
<a name="l5717"><span class="linenum">5717</span></a>          }
<a name="l5718"><span class="linenum">5718</span></a>  
<a name="l5719"><span class="linenum">5719</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>();
<a name="l5720"><span class="linenum">5720</span></a>          if (!<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('is_cancelled')" href="../../_functions/is_cancelled.html" onMouseOver="funcPopup(event,'is_cancelled')">is_cancelled</a>()) {
<a name="l5721"><span class="linenum">5721</span></a>              if (<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>() == false) {
<a name="l5722"><span class="linenum">5722</span></a>                  return false;
<a name="l5723"><span class="linenum">5723</span></a>              }
<a name="l5724"><span class="linenum">5724</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submit_for_grading')" href="../../_functions/submit_for_grading.html" onMouseOver="funcPopup(event,'submit_for_grading')">submit_for_grading</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>);
<a name="l5725"><span class="linenum">5725</span></a>          }
<a name="l5726"><span class="linenum">5726</span></a>          return true;
<a name="l5727"><span class="linenum">5727</span></a>      }
<a name="l5728"><span class="linenum">5728</span></a>  
<a name="l5729"><span class="linenum">5729</span></a>      <span class="comment">/**</span>
<a name="l5730"><span class="linenum">5730</span></a>  <span class="comment">     * Save the extension date for a single user.</span>
<a name="l5731"><span class="linenum">5731</span></a>  <span class="comment">     *</span>
<a name="l5732"><span class="linenum">5732</span></a>  <span class="comment">     * @param int $userid The user id</span>
<a name="l5733"><span class="linenum">5733</span></a>  <span class="comment">     * @param mixed $extensionduedate Either an integer date or null</span>
<a name="l5734"><span class="linenum">5734</span></a>  <span class="comment">     * @return boolean</span>
<a name="l5735"><span class="linenum">5735</span></a>  <span class="comment">     */</span>
<a name="l5736"><span class="linenum">5736</span></a>      public function <a class="function" onClick="logFunction('save_user_extension')" href="../../_functions/save_user_extension.html" onMouseOver="funcPopup(event,'save_user_extension')">save_user_extension</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a>) {
<a name="l5737"><span class="linenum">5737</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l5738"><span class="linenum">5738</span></a>  
<a name="l5739"><span class="linenum">5739</span></a>  <span class="comment">        // Need submit permission to submit an assignment.</span>
<a name="l5740"><span class="linenum">5740</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:grantextension', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l5741"><span class="linenum">5741</span></a>  
<a name="l5742"><span class="linenum">5742</span></a>          if (!<a class="function" onClick="logFunction('is_enrolled')" href="../../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>(), <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l5743"><span class="linenum">5743</span></a>              return false;
<a name="l5744"><span class="linenum">5744</span></a>          }
<a name="l5745"><span class="linenum">5745</span></a>          if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:submit', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l5746"><span class="linenum">5746</span></a>              return false;
<a name="l5747"><span class="linenum">5747</span></a>          }
<a name="l5748"><span class="linenum">5748</span></a>  
<a name="l5749"><span class="linenum">5749</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;duedate &amp;&amp; <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a>) {
<a name="l5750"><span class="linenum">5750</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;duedate &gt; <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a>) {
<a name="l5751"><span class="linenum">5751</span></a>                  return false;
<a name="l5752"><span class="linenum">5752</span></a>              }
<a name="l5753"><span class="linenum">5753</span></a>          }
<a name="l5754"><span class="linenum">5754</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;allowsubmissionsfromdate &amp;&amp; <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a>) {
<a name="l5755"><span class="linenum">5755</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;allowsubmissionsfromdate &gt; <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a>) {
<a name="l5756"><span class="linenum">5756</span></a>                  return false;
<a name="l5757"><span class="linenum">5757</span></a>              }
<a name="l5758"><span class="linenum">5758</span></a>          }
<a name="l5759"><span class="linenum">5759</span></a>  
<a name="l5760"><span class="linenum">5760</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true);
<a name="l5761"><span class="linenum">5761</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('extensionduedate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/extensionduedate.html">extensionduedate</a> = <a class="var it25231" onMouseOver="hilite(25231)" onMouseOut="lolite()" onClick="logVariable('extensionduedate')" href="../../_variables/extensionduedate.html">$extensionduedate</a>;
<a name="l5762"><span class="linenum">5762</span></a>  
<a name="l5763"><span class="linenum">5763</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_user_flags')" href="../../_functions/update_user_flags.html" onMouseOver="funcPopup(event,'update_user_flags')">update_user_flags</a>(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>);
<a name="l5764"><span class="linenum">5764</span></a>  
<a name="l5765"><span class="linenum">5765</span></a>          if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>) {
<a name="l5766"><span class="linenum">5766</span></a>              \mod_assign\event\<a class="class" onClick="logClass('extension_granted')" href="../../_classes/extension_granted.html" onMouseOver="classPopup(event,'extension_granted')">extension_granted</a>::<a class="function" onClick="logFunction('create_from_assign')" href="../../_functions/create_from_assign.html" onMouseOver="funcPopup(event,'create_from_assign')">create_from_assign</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l5767"><span class="linenum">5767</span></a>          }
<a name="l5768"><span class="linenum">5768</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l5769"><span class="linenum">5769</span></a>      }
<a name="l5770"><span class="linenum">5770</span></a>  
<a name="l5771"><span class="linenum">5771</span></a>      <span class="comment">/**</span>
<a name="l5772"><span class="linenum">5772</span></a>  <span class="comment">     * Save extension date.</span>
<a name="l5773"><span class="linenum">5773</span></a>  <span class="comment">     *</span>
<a name="l5774"><span class="linenum">5774</span></a>  <span class="comment">     * @param moodleform $mform The submitted form</span>
<a name="l5775"><span class="linenum">5775</span></a>  <span class="comment">     * @return boolean</span>
<a name="l5776"><span class="linenum">5776</span></a>  <span class="comment">     */</span>
<a name="l5777"><span class="linenum">5777</span></a>      protected function <a class="function" onClick="logFunction('process_save_extension')" href="../../_functions/process_save_extension.html" onMouseOver="funcPopup(event,'process_save_extension')">process_save_extension</a>(&amp; <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l5778"><span class="linenum">5778</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l5779"><span class="linenum">5779</span></a>  
<a name="l5780"><span class="linenum">5780</span></a>  <span class="comment">        // Include extension form.</span>
<a name="l5781"><span class="linenum">5781</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/extensionform.php.html">/mod/assign/extensionform.php</a>');
<a name="l5782"><span class="linenum">5782</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l5783"><span class="linenum">5783</span></a>  
<a name="l5784"><span class="linenum">5784</span></a>          <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a> = array(
<a name="l5785"><span class="linenum">5785</span></a>              'instance' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(),
<a name="l5786"><span class="linenum">5786</span></a>              'userscount' =&gt; 0,
<a name="l5787"><span class="linenum">5787</span></a>              'usershtml' =&gt; '',
<a name="l5788"><span class="linenum">5788</span></a>          );
<a name="l5789"><span class="linenum">5789</span></a>  
<a name="l5790"><span class="linenum">5790</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_extension_form')" href="../../_classes/mod_assign_extension_form.html" onMouseOver="classPopup(event,'mod_assign_extension_form')">mod_assign_extension_form</a>(null, <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a>);
<a name="l5791"><span class="linenum">5791</span></a>  
<a name="l5792"><span class="linenum">5792</span></a>          if (<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('is_cancelled')" href="../../_functions/is_cancelled.html" onMouseOver="funcPopup(event,'is_cancelled')">is_cancelled</a>()) {
<a name="l5793"><span class="linenum">5793</span></a>              return true;
<a name="l5794"><span class="linenum">5794</span></a>          }
<a name="l5795"><span class="linenum">5795</span></a>  
<a name="l5796"><span class="linenum">5796</span></a>          if (<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l5797"><span class="linenum">5797</span></a>              if (!empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('selectedusers')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/selectedusers.html">selectedusers</a>)) {
<a name="l5798"><span class="linenum">5798</span></a>                  <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('selectedusers')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/selectedusers.html">selectedusers</a>);
<a name="l5799"><span class="linenum">5799</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = true;
<a name="l5800"><span class="linenum">5800</span></a>                  foreach (<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> as <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l5801"><span class="linenum">5801</span></a>                      <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l5802"><span class="linenum">5802</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_user_extension')" href="../../_functions/save_user_extension.html" onMouseOver="funcPopup(event,'save_user_extension')">save_user_extension</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('extensionduedate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/extensionduedate.html">extensionduedate</a>) &amp;&amp; <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l5803"><span class="linenum">5803</span></a>                  }
<a name="l5804"><span class="linenum">5804</span></a>                  return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l5805"><span class="linenum">5805</span></a>              }
<a name="l5806"><span class="linenum">5806</span></a>              if (!empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('userid')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>)) {
<a name="l5807"><span class="linenum">5807</span></a>                  <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('userid')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l5808"><span class="linenum">5808</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_user_extension')" href="../../_functions/save_user_extension.html" onMouseOver="funcPopup(event,'save_user_extension')">save_user_extension</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('extensionduedate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/extensionduedate.html">extensionduedate</a>);
<a name="l5809"><span class="linenum">5809</span></a>              }
<a name="l5810"><span class="linenum">5810</span></a>          }
<a name="l5811"><span class="linenum">5811</span></a>  
<a name="l5812"><span class="linenum">5812</span></a>          return false;
<a name="l5813"><span class="linenum">5813</span></a>      }
<a name="l5814"><span class="linenum">5814</span></a>  
<a name="l5815"><span class="linenum">5815</span></a>  
<a name="l5816"><span class="linenum">5816</span></a>      <span class="comment">/**</span>
<a name="l5817"><span class="linenum">5817</span></a>  <span class="comment">     * Save quick grades.</span>
<a name="l5818"><span class="linenum">5818</span></a>  <span class="comment">     *</span>
<a name="l5819"><span class="linenum">5819</span></a>  <span class="comment">     * @return string The result of the save operation</span>
<a name="l5820"><span class="linenum">5820</span></a>  <span class="comment">     */</span>
<a name="l5821"><span class="linenum">5821</span></a>      protected function <a class="function" onClick="logFunction('process_save_quick_grades')" href="../../_functions/process_save_quick_grades.html" onMouseOver="funcPopup(event,'process_save_quick_grades')">process_save_quick_grades</a>() {
<a name="l5822"><span class="linenum">5822</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l5823"><span class="linenum">5823</span></a>  
<a name="l5824"><span class="linenum">5824</span></a>  <span class="comment">        // Need grade permission.</span>
<a name="l5825"><span class="linenum">5825</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:grade', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l5826"><span class="linenum">5826</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l5827"><span class="linenum">5827</span></a>  
<a name="l5828"><span class="linenum">5828</span></a>  <span class="comment">        // Make sure advanced grading is disabled.</span>
<a name="l5829"><span class="linenum">5829</span></a>          <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a> = <a class="function" onClick="logFunction('get_grading_manager')" href="../../_functions/get_grading_manager.html" onMouseOver="funcPopup(event,'get_grading_manager')">get_grading_manager</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(), 'mod_assign', 'submissions');
<a name="l5830"><span class="linenum">5830</span></a>          <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a> = <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a>-&gt;<a class="function" onClick="logFunction('get_active_controller')" href="../../_functions/get_active_controller.html" onMouseOver="funcPopup(event,'get_active_controller')">get_active_controller</a>();
<a name="l5831"><span class="linenum">5831</span></a>          if (!empty(<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>)) {
<a name="l5832"><span class="linenum">5832</span></a>              return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('errorquickgradingvsadvancedgrading', 'assign');
<a name="l5833"><span class="linenum">5833</span></a>          }
<a name="l5834"><span class="linenum">5834</span></a>  
<a name="l5835"><span class="linenum">5835</span></a>          <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> = array();
<a name="l5836"><span class="linenum">5836</span></a>  <span class="comment">        // First check all the last modified values.</span>
<a name="l5837"><span class="linenum">5837</span></a>          <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), true);
<a name="l5838"><span class="linenum">5838</span></a>          <a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('list_participants')" href="../../_functions/list_participants.html" onMouseOver="funcPopup(event,'list_participants')">list_participants</a>(<a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, true);
<a name="l5839"><span class="linenum">5839</span></a>  
<a name="l5840"><span class="linenum">5840</span></a>  <span class="comment">        // Gets a list of possible users and look for values based upon that.</span>
<a name="l5841"><span class="linenum">5841</span></a>          foreach (<a class="var it19858" onMouseOver="hilite(19858)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../../_variables/participants.html">$participants</a> as <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> =&gt; <a class="var it1292" onMouseOver="hilite(1292)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../../_variables/unused.html">$unused</a>) {
<a name="l5842"><span class="linenum">5842</span></a>              <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('grademodified_' . <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, -1, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l5843"><span class="linenum">5843</span></a>              <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('gradeattempt_' . <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, -1, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l5844"><span class="linenum">5844</span></a>  <span class="comment">            // Gather the userid, updated grade and last modified value.</span>
<a name="l5845"><span class="linenum">5845</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = new stdClass();
<a name="l5846"><span class="linenum">5846</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l5847"><span class="linenum">5847</span></a>              if (<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a> &gt;= 0) {
<a name="l5848"><span class="linenum">5848</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('grade')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = <a class="function" onClick="logFunction('unformat_float')" href="../../_functions/unformat_float.html" onMouseOver="funcPopup(event,'unformat_float')">unformat_float</a>(<a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('quickgrade_' . <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, -1, <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>));
<a name="l5849"><span class="linenum">5849</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('quickgrade_' . <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>.'_workflowstate', false, <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l5850"><span class="linenum">5850</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('quickgrade_' . <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>.'_allocatedmarker', false, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l5851"><span class="linenum">5851</span></a>              } else {
<a name="l5852"><span class="linenum">5852</span></a>  <span class="comment">                // This user was not in the grading table.</span>
<a name="l5853"><span class="linenum">5853</span></a>                  continue;
<a name="l5854"><span class="linenum">5854</span></a>              }
<a name="l5855"><span class="linenum">5855</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> = <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>;
<a name="l5856"><span class="linenum">5856</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('lastmodified')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/lastmodified.html">lastmodified</a> = <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>;
<a name="l5857"><span class="linenum">5857</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('gradinginfo')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/gradinginfo.html">gradinginfo</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l5858"><span class="linenum">5858</span></a>                                                      'mod',
<a name="l5859"><span class="linenum">5859</span></a>                                                      'assign',
<a name="l5860"><span class="linenum">5860</span></a>                                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id,
<a name="l5861"><span class="linenum">5861</span></a>                                                      array(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l5862"><span class="linenum">5862</span></a>              <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>] = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>;
<a name="l5863"><span class="linenum">5863</span></a>          }
<a name="l5864"><span class="linenum">5864</span></a>  
<a name="l5865"><span class="linenum">5865</span></a>          if (empty(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>)) {
<a name="l5866"><span class="linenum">5866</span></a>              return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nousersselected', 'assign');
<a name="l5867"><span class="linenum">5867</span></a>          }
<a name="l5868"><span class="linenum">5868</span></a>  
<a name="l5869"><span class="linenum">5869</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../../_variables/userids.html">$userids</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>), <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l5870"><span class="linenum">5870</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['assignid1'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l5871"><span class="linenum">5871</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['assignid2'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l5872"><span class="linenum">5872</span></a>  
<a name="l5873"><span class="linenum">5873</span></a>  <span class="comment">        // Check them all for currency.</span>
<a name="l5874"><span class="linenum">5874</span></a>          <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('grademaxattempt')" href="../../_variables/grademaxattempt.html">$grademaxattempt</a> = 'SELECT s.userid, s.attemptnumber AS maxattempt
<a name="l5875"><span class="linenum">5875</span></a>                                FROM {assign_submission} s
<a name="l5876"><span class="linenum">5876</span></a>                               WHERE s.assignment = :assignid1 AND s.latest = 1';
<a name="l5877"><span class="linenum">5877</span></a>  
<a name="l5878"><span class="linenum">5878</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT u.id AS userid, g.grade AS grade, g.timemodified AS lastmodified,
<a name="l5879"><span class="linenum">5879</span></a>                         uf.workflowstate, uf.allocatedmarker, gmx.maxattempt AS attemptnumber
<a name="l5880"><span class="linenum">5880</span></a>                    FROM {user} u
<a name="l5881"><span class="linenum">5881</span></a>               LEFT <a class="function" onClick="logFunction('JOIN')" href="../../_functions/join.html" onMouseOver="funcPopup(event,'join')">JOIN</a> ( ' . <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('grademaxattempt')" href="../../_variables/grademaxattempt.html">$grademaxattempt</a> . ' ) gmx ON u.id = gmx.userid
<a name="l5882"><span class="linenum">5882</span></a>               LEFT JOIN {assign_grades} g ON
<a name="l5883"><span class="linenum">5883</span></a>                         u.id = g.userid AND
<a name="l5884"><span class="linenum">5884</span></a>                         g.assignment = :assignid2 AND
<a name="l5885"><span class="linenum">5885</span></a>                         g.attemptnumber = gmx.maxattempt
<a name="l5886"><span class="linenum">5886</span></a>               LEFT JOIN {assign_user_flags} uf ON uf.assignment = g.assignment AND uf.userid = g.userid
<a name="l5887"><span class="linenum">5887</span></a>                   WHERE u.id ' . <a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../../_variables/userids.html">$userids</a>;
<a name="l5888"><span class="linenum">5888</span></a>          <a class="var it9943" onMouseOver="hilite(9943)" onMouseOut="lolite()" onClick="logVariable('currentgrades')" href="../../_variables/currentgrades.html">$currentgrades</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l5889"><span class="linenum">5889</span></a>  
<a name="l5890"><span class="linenum">5890</span></a>          <a class="var it32203" onMouseOver="hilite(32203)" onMouseOut="lolite()" onClick="logVariable('modifiedusers')" href="../../_variables/modifiedusers.html">$modifiedusers</a> = array();
<a name="l5891"><span class="linenum">5891</span></a>          foreach (<a class="var it9943" onMouseOver="hilite(9943)" onMouseOut="lolite()" onClick="logVariable('currentgrades')" href="../../_variables/currentgrades.html">$currentgrades</a> as <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>) {
<a name="l5892"><span class="linenum">5892</span></a>              <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a> = <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[(int)<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('userid')" class="var it43284" onMouseOver="hilite(43284)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>];
<a name="l5893"><span class="linenum">5893</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('userid')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, false);
<a name="l5894"><span class="linenum">5894</span></a>  <span class="comment">            // Check to see if the grade column was even visible.</span>
<a name="l5895"><span class="linenum">5895</span></a>              <a class="var it32204" onMouseOver="hilite(32204)" onMouseOut="lolite()" onClick="logVariable('gradecolpresent')" href="../../_variables/gradecolpresent.html">$gradecolpresent</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('quickgrade_' . <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('userid')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, false, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>) !== false;
<a name="l5896"><span class="linenum">5896</span></a>  
<a name="l5897"><span class="linenum">5897</span></a>  <span class="comment">            // Check to see if the outcomes were modified.</span>
<a name="l5898"><span class="linenum">5898</span></a>              if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableoutcomes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/enableoutcomes.html">enableoutcomes</a>) {
<a name="l5899"><span class="linenum">5899</span></a>                  foreach (<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('gradinginfo')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/gradinginfo.html">gradinginfo</a>-&gt;outcomes as <a class="var it972" onMouseOver="hilite(972)" onMouseOut="lolite()" onClick="logVariable('outcomeid')" href="../../_variables/outcomeid.html">$outcomeid</a> =&gt; <a class="var it3376" onMouseOver="hilite(3376)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../../_variables/outcome.html">$outcome</a>) {
<a name="l5900"><span class="linenum">5900</span></a>                      <a class="var it32205" onMouseOver="hilite(32205)" onMouseOut="lolite()" onClick="logVariable('oldoutcome')" href="../../_variables/oldoutcome.html">$oldoutcome</a> = <a class="var it3376" onMouseOver="hilite(3376)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('grades')" class="var it43346" onMouseOver="hilite(43346)" onMouseOut="lolite()" href="../../_variables/grades.html">grades</a>[<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('userid')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>]-&gt;grade;
<a name="l5901"><span class="linenum">5901</span></a>                      <a class="var it15919" onMouseOver="hilite(15919)" onMouseOut="lolite()" onClick="logVariable('paramname')" href="../../_variables/paramname.html">$paramname</a> = 'outcome_' . <a class="var it972" onMouseOver="hilite(972)" onMouseOut="lolite()" onClick="logVariable('outcomeid')" href="../../_variables/outcomeid.html">$outcomeid</a> . '_' . <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('userid')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l5902"><span class="linenum">5902</span></a>                      <a class="var it32206" onMouseOver="hilite(32206)" onMouseOut="lolite()" onClick="logVariable('newoutcome')" href="../../_variables/newoutcome.html">$newoutcome</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>(<a class="var it15919" onMouseOver="hilite(15919)" onMouseOut="lolite()" onClick="logVariable('paramname')" href="../../_variables/paramname.html">$paramname</a>, -1, <a class="constant" onClick="logConstant('PARAM_FLOAT')" href="../../_constants/PARAM_FLOAT.html" onMouseOver="constPopup(event,'PARAM_FLOAT')">PARAM_FLOAT</a>);
<a name="l5903"><span class="linenum">5903</span></a>  <span class="comment">                    // Check to see if the outcome column was even visible.</span>
<a name="l5904"><span class="linenum">5904</span></a>                      <a class="var it32207" onMouseOver="hilite(32207)" onMouseOut="lolite()" onClick="logVariable('outcomecolpresent')" href="../../_variables/outcomecolpresent.html">$outcomecolpresent</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>(<a class="var it15919" onMouseOver="hilite(15919)" onMouseOut="lolite()" onClick="logVariable('paramname')" href="../../_variables/paramname.html">$paramname</a>, false, <a class="constant" onClick="logConstant('PARAM_FLOAT')" href="../../_constants/PARAM_FLOAT.html" onMouseOver="constPopup(event,'PARAM_FLOAT')">PARAM_FLOAT</a>) !== false;
<a name="l5905"><span class="linenum">5905</span></a>                      if (<a class="var it32207" onMouseOver="hilite(32207)" onMouseOut="lolite()" onClick="logVariable('outcomecolpresent')" href="../../_variables/outcomecolpresent.html">$outcomecolpresent</a> &amp;&amp; (<a class="var it32205" onMouseOver="hilite(32205)" onMouseOut="lolite()" onClick="logVariable('oldoutcome')" href="../../_variables/oldoutcome.html">$oldoutcome</a> != <a class="var it32206" onMouseOver="hilite(32206)" onMouseOut="lolite()" onClick="logVariable('newoutcome')" href="../../_variables/newoutcome.html">$newoutcome</a>)) {
<a name="l5906"><span class="linenum">5906</span></a>  <span class="comment">                        // Can't check modified time for outcomes because it is not reported.</span>
<a name="l5907"><span class="linenum">5907</span></a>                          <a class="var it32203" onMouseOver="hilite(32203)" onMouseOut="lolite()" onClick="logVariable('modifiedusers')" href="../../_variables/modifiedusers.html">$modifiedusers</a>[<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('userid')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>] = <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>;
<a name="l5908"><span class="linenum">5908</span></a>                          continue;
<a name="l5909"><span class="linenum">5909</span></a>                      }
<a name="l5910"><span class="linenum">5910</span></a>                  }
<a name="l5911"><span class="linenum">5911</span></a>              }
<a name="l5912"><span class="linenum">5912</span></a>  
<a name="l5913"><span class="linenum">5913</span></a>  <span class="comment">            // Let plugins participate.</span>
<a name="l5914"><span class="linenum">5914</span></a>              foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l5915"><span class="linenum">5915</span></a>                  if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('supports_quickgrading')" href="../../_functions/supports_quickgrading.html" onMouseOver="funcPopup(event,'supports_quickgrading')">supports_quickgrading</a>()) {
<a name="l5916"><span class="linenum">5916</span></a>  <span class="comment">                    // The plugins must handle is_quickgrading_modified correctly - ie</span>
<a name="l5917"><span class="linenum">5917</span></a>  <span class="comment">                    // handle hidden columns.</span>
<a name="l5918"><span class="linenum">5918</span></a>                      if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_quickgrading_modified')" href="../../_functions/is_quickgrading_modified.html" onMouseOver="funcPopup(event,'is_quickgrading_modified')">is_quickgrading_modified</a>(<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('userid')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>)) {
<a name="l5919"><span class="linenum">5919</span></a>                          if ((int)<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('lastmodified')" class="var it43284" onMouseOver="hilite(43284)" onMouseOut="lolite()" href="../../_variables/lastmodified.html">lastmodified</a> &gt; (int)<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('lastmodified')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/lastmodified.html">lastmodified</a>) {
<a name="l5920"><span class="linenum">5920</span></a>                              return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('errorrecordmodified', 'assign');
<a name="l5921"><span class="linenum">5921</span></a>                          } else {
<a name="l5922"><span class="linenum">5922</span></a>                              <a class="var it32203" onMouseOver="hilite(32203)" onMouseOut="lolite()" onClick="logVariable('modifiedusers')" href="../../_variables/modifiedusers.html">$modifiedusers</a>[<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('userid')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>] = <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>;
<a name="l5923"><span class="linenum">5923</span></a>                              continue;
<a name="l5924"><span class="linenum">5924</span></a>                          }
<a name="l5925"><span class="linenum">5925</span></a>                      }
<a name="l5926"><span class="linenum">5926</span></a>                  }
<a name="l5927"><span class="linenum">5927</span></a>              }
<a name="l5928"><span class="linenum">5928</span></a>  
<a name="l5929"><span class="linenum">5929</span></a>              if ((<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('grade')" class="var it43284" onMouseOver="hilite(43284)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> &lt; 0 || <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('grade')" class="var it43284" onMouseOver="hilite(43284)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> === null) &amp;&amp;
<a name="l5930"><span class="linenum">5930</span></a>                  (<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('grade')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> &lt; 0 || <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('grade')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> === null)) {
<a name="l5931"><span class="linenum">5931</span></a>  <span class="comment">                // Different ways to indicate no grade.</span>
<a name="l5932"><span class="linenum">5932</span></a>                  <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('grade')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('grade')" class="var it43284" onMouseOver="hilite(43284)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>; <span class="comment">// Keep existing grade.</span>
<a name="l5933"><span class="linenum">5933</span></a>              }
<a name="l5934"><span class="linenum">5934</span></a>  <span class="comment">            // Treat 0 and null as different values.</span>
<a name="l5935"><span class="linenum">5935</span></a>              if (<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('grade')" class="var it43284" onMouseOver="hilite(43284)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> !== null) {
<a name="l5936"><span class="linenum">5936</span></a>                  <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('grade')" class="var it43284" onMouseOver="hilite(43284)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = <a class="phpfunction" onClick="logFunction('floatval')" href="../../_functions/floatval.html" onMouseOver="phpfuncPopup(event,'floatval')">floatval</a>(<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('grade')" class="var it43284" onMouseOver="hilite(43284)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>);
<a name="l5937"><span class="linenum">5937</span></a>              }
<a name="l5938"><span class="linenum">5938</span></a>              <a class="var it5325" onMouseOver="hilite(5325)" onMouseOut="lolite()" onClick="logVariable('gradechanged')" href="../../_variables/gradechanged.html">$gradechanged</a> = <a class="var it32204" onMouseOver="hilite(32204)" onMouseOut="lolite()" onClick="logVariable('gradecolpresent')" href="../../_variables/gradecolpresent.html">$gradecolpresent</a> &amp;&amp; <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('grade')" class="var it43284" onMouseOver="hilite(43284)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> !== <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('grade')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>;
<a name="l5939"><span class="linenum">5939</span></a>              <a class="var it32208" onMouseOver="hilite(32208)" onMouseOut="lolite()" onClick="logVariable('markingallocationchanged')" href="../../_variables/markingallocationchanged.html">$markingallocationchanged</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow &amp;&amp;
<a name="l5940"><span class="linenum">5940</span></a>                                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingallocation &amp;&amp;
<a name="l5941"><span class="linenum">5941</span></a>                                              (<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a> !== false) &amp;&amp;
<a name="l5942"><span class="linenum">5942</span></a>                                              (<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43284" onMouseOver="hilite(43284)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a> != <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a>);
<a name="l5943"><span class="linenum">5943</span></a>              <a class="var it32209" onMouseOver="hilite(32209)" onMouseOut="lolite()" onClick="logVariable('workflowstatechanged')" href="../../_variables/workflowstatechanged.html">$workflowstatechanged</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow &amp;&amp;
<a name="l5944"><span class="linenum">5944</span></a>                                              (<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> !== false) &amp;&amp;
<a name="l5945"><span class="linenum">5945</span></a>                                              (<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43284" onMouseOver="hilite(43284)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> != <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>);
<a name="l5946"><span class="linenum">5946</span></a>              if (<a class="var it5325" onMouseOver="hilite(5325)" onMouseOut="lolite()" onClick="logVariable('gradechanged')" href="../../_variables/gradechanged.html">$gradechanged</a> || <a class="var it32208" onMouseOver="hilite(32208)" onMouseOut="lolite()" onClick="logVariable('markingallocationchanged')" href="../../_variables/markingallocationchanged.html">$markingallocationchanged</a> || <a class="var it32209" onMouseOver="hilite(32209)" onMouseOut="lolite()" onClick="logVariable('workflowstatechanged')" href="../../_variables/workflowstatechanged.html">$workflowstatechanged</a>) {
<a name="l5947"><span class="linenum">5947</span></a>  <span class="comment">                // Grade changed.</span>
<a name="l5948"><span class="linenum">5948</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('grading_disabled')" href="../../_functions/grading_disabled.html" onMouseOver="funcPopup(event,'grading_disabled')">grading_disabled</a>(<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('userid')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>)) {
<a name="l5949"><span class="linenum">5949</span></a>                      continue;
<a name="l5950"><span class="linenum">5950</span></a>                  }
<a name="l5951"><span class="linenum">5951</span></a>                  <a class="var it32210" onMouseOver="hilite(32210)" onMouseOut="lolite()" onClick="logVariable('badmodified')" href="../../_variables/badmodified.html">$badmodified</a> = (int)<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('lastmodified')" class="var it43284" onMouseOver="hilite(43284)" onMouseOut="lolite()" href="../../_variables/lastmodified.html">lastmodified</a> &gt; (int)<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('lastmodified')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/lastmodified.html">lastmodified</a>;
<a name="l5952"><span class="linenum">5952</span></a>                  <a class="var it32211" onMouseOver="hilite(32211)" onMouseOut="lolite()" onClick="logVariable('badattempt')" href="../../_variables/badattempt.html">$badattempt</a> = (int)<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it43284" onMouseOver="hilite(43284)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> != (int)<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>;
<a name="l5953"><span class="linenum">5953</span></a>                  if (<a class="var it32210" onMouseOver="hilite(32210)" onMouseOut="lolite()" onClick="logVariable('badmodified')" href="../../_variables/badmodified.html">$badmodified</a> || <a class="var it32211" onMouseOver="hilite(32211)" onMouseOut="lolite()" onClick="logVariable('badattempt')" href="../../_variables/badattempt.html">$badattempt</a>) {
<a name="l5954"><span class="linenum">5954</span></a>  <span class="comment">                    // Error - record has been modified since viewing the page.</span>
<a name="l5955"><span class="linenum">5955</span></a>                      return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('errorrecordmodified', 'assign');
<a name="l5956"><span class="linenum">5956</span></a>                  } else {
<a name="l5957"><span class="linenum">5957</span></a>                      <a class="var it32203" onMouseOver="hilite(32203)" onMouseOut="lolite()" onClick="logVariable('modifiedusers')" href="../../_variables/modifiedusers.html">$modifiedusers</a>[<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('userid')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>] = <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>;
<a name="l5958"><span class="linenum">5958</span></a>                  }
<a name="l5959"><span class="linenum">5959</span></a>              }
<a name="l5960"><span class="linenum">5960</span></a>  
<a name="l5961"><span class="linenum">5961</span></a>          }
<a name="l5962"><span class="linenum">5962</span></a>          <a class="var it9943" onMouseOver="hilite(9943)" onMouseOut="lolite()" onClick="logVariable('currentgrades')" href="../../_variables/currentgrades.html">$currentgrades</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l5963"><span class="linenum">5963</span></a>  
<a name="l5964"><span class="linenum">5964</span></a>          <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>();
<a name="l5965"><span class="linenum">5965</span></a>          <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a> = <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('feedback_plugin_for_gradebook')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/feedback_plugin_for_gradebook.html">feedback_plugin_for_gradebook</a>;
<a name="l5966"><span class="linenum">5966</span></a>  
<a name="l5967"><span class="linenum">5967</span></a>  <span class="comment">        // Ok - ready to process the updates.</span>
<a name="l5968"><span class="linenum">5968</span></a>          foreach (<a class="var it32203" onMouseOver="hilite(32203)" onMouseOut="lolite()" onClick="logVariable('modifiedusers')" href="../../_variables/modifiedusers.html">$modifiedusers</a> as <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> =&gt; <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>) {
<a name="l5969"><span class="linenum">5969</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true);
<a name="l5970"><span class="linenum">5970</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true);
<a name="l5971"><span class="linenum">5971</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>= <a class="function" onClick="logFunction('grade_floatval')" href="../../_functions/grade_floatval.html" onMouseOver="funcPopup(event,'grade_floatval')">grade_floatval</a>(<a class="function" onClick="logFunction('unformat_float')" href="../../_functions/unformat_float.html" onMouseOver="funcPopup(event,'unformat_float')">unformat_float</a>(<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('grade')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>));
<a name="l5972"><span class="linenum">5972</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a>= <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l5973"><span class="linenum">5973</span></a>              <a class="var it32204" onMouseOver="hilite(32204)" onMouseOut="lolite()" onClick="logVariable('gradecolpresent')" href="../../_variables/gradecolpresent.html">$gradecolpresent</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('quickgrade_' . <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>) !== false;
<a name="l5974"><span class="linenum">5974</span></a>  
<a name="l5975"><span class="linenum">5975</span></a>  <span class="comment">            // Save plugins data.</span>
<a name="l5976"><span class="linenum">5976</span></a>              foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l5977"><span class="linenum">5977</span></a>                  if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('supports_quickgrading')" href="../../_functions/supports_quickgrading.html" onMouseOver="funcPopup(event,'supports_quickgrading')">supports_quickgrading</a>()) {
<a name="l5978"><span class="linenum">5978</span></a>                      <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('save_quickgrading_changes')" href="../../_functions/save_quickgrading_changes.html" onMouseOver="funcPopup(event,'save_quickgrading_changes')">save_quickgrading_changes</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l5979"><span class="linenum">5979</span></a>                      if (('assignfeedback_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>()) == <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a>) {
<a name="l5980"><span class="linenum">5980</span></a>  <span class="comment">                        // This is the feedback plugin chose to push comments to the gradebook.</span>
<a name="l5981"><span class="linenum">5981</span></a>                          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('text_for_gradebook')" href="../../_functions/text_for_gradebook.html" onMouseOver="funcPopup(event,'text_for_gradebook')">text_for_gradebook</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l5982"><span class="linenum">5982</span></a>                          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/feedbackformat.html">feedbackformat</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('format_for_gradebook')" href="../../_functions/format_for_gradebook.html" onMouseOver="funcPopup(event,'format_for_gradebook')">format_for_gradebook</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l5983"><span class="linenum">5983</span></a>                      }
<a name="l5984"><span class="linenum">5984</span></a>                  }
<a name="l5985"><span class="linenum">5985</span></a>              }
<a name="l5986"><span class="linenum">5986</span></a>  
<a name="l5987"><span class="linenum">5987</span></a>  <span class="comment">            // These will be set to false if they are not present in the quickgrading</span>
<a name="l5988"><span class="linenum">5988</span></a>  <span class="comment">            // form (e.g. column hidden).</span>
<a name="l5989"><span class="linenum">5989</span></a>              <a class="var it32212" onMouseOver="hilite(32212)" onMouseOut="lolite()" onClick="logVariable('workflowstatemodified')" href="../../_variables/workflowstatemodified.html">$workflowstatemodified</a> = (<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> !== false) &amp;&amp;
<a name="l5990"><span class="linenum">5990</span></a>                                          (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> != <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>);
<a name="l5991"><span class="linenum">5991</span></a>  
<a name="l5992"><span class="linenum">5992</span></a>              <a class="var it32213" onMouseOver="hilite(32213)" onMouseOut="lolite()" onClick="logVariable('allocatedmarkermodified')" href="../../_variables/allocatedmarkermodified.html">$allocatedmarkermodified</a> = (<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a> !== false) &amp;&amp;
<a name="l5993"><span class="linenum">5993</span></a>                                          (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a> != <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a>);
<a name="l5994"><span class="linenum">5994</span></a>  
<a name="l5995"><span class="linenum">5995</span></a>              if (<a class="var it32212" onMouseOver="hilite(32212)" onMouseOut="lolite()" onClick="logVariable('workflowstatemodified')" href="../../_variables/workflowstatemodified.html">$workflowstatemodified</a>) {
<a name="l5996"><span class="linenum">5996</span></a>                  <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> = <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>;
<a name="l5997"><span class="linenum">5997</span></a>              }
<a name="l5998"><span class="linenum">5998</span></a>              if (<a class="var it32213" onMouseOver="hilite(32213)" onMouseOut="lolite()" onClick="logVariable('allocatedmarkermodified')" href="../../_variables/allocatedmarkermodified.html">$allocatedmarkermodified</a>) {
<a name="l5999"><span class="linenum">5999</span></a>                  <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a> = <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a>;
<a name="l6000"><span class="linenum">6000</span></a>              }
<a name="l6001"><span class="linenum">6001</span></a>              if (<a class="var it32212" onMouseOver="hilite(32212)" onMouseOut="lolite()" onClick="logVariable('workflowstatemodified')" href="../../_variables/workflowstatemodified.html">$workflowstatemodified</a> || <a class="var it32213" onMouseOver="hilite(32213)" onMouseOut="lolite()" onClick="logVariable('allocatedmarkermodified')" href="../../_variables/allocatedmarkermodified.html">$allocatedmarkermodified</a>) {
<a name="l6002"><span class="linenum">6002</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_user_flags')" href="../../_functions/update_user_flags.html" onMouseOver="funcPopup(event,'update_user_flags')">update_user_flags</a>(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>) &amp;&amp; <a class="var it32212" onMouseOver="hilite(32212)" onMouseOut="lolite()" onClick="logVariable('workflowstatemodified')" href="../../_variables/workflowstatemodified.html">$workflowstatemodified</a>) {
<a name="l6003"><span class="linenum">6003</span></a>                      <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l6004"><span class="linenum">6004</span></a>                      \mod_assign\event\<a class="class" onClick="logClass('workflow_state_updated')" href="../../_classes/workflow_state_updated.html" onMouseOver="classPopup(event,'workflow_state_updated')">workflow_state_updated</a>::<a class="function" onClick="logFunction('create_from_user')" href="../../_functions/create_from_user.html" onMouseOver="funcPopup(event,'create_from_user')">create_from_user</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l6005"><span class="linenum">6005</span></a>                  }
<a name="l6006"><span class="linenum">6006</span></a>              }
<a name="l6007"><span class="linenum">6007</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_grade')" href="../../_functions/update_grade.html" onMouseOver="funcPopup(event,'update_grade')">update_grade</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l6008"><span class="linenum">6008</span></a>  
<a name="l6009"><span class="linenum">6009</span></a>  <span class="comment">            // Allow teachers to skip sending notifications.</span>
<a name="l6010"><span class="linenum">6010</span></a>              if (<a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('sendstudentnotifications', true, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>)) {
<a name="l6011"><span class="linenum">6011</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('notify_grade_modified')" href="../../_functions/notify_grade_modified.html" onMouseOver="funcPopup(event,'notify_grade_modified')">notify_grade_modified</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, true);
<a name="l6012"><span class="linenum">6012</span></a>              }
<a name="l6013"><span class="linenum">6013</span></a>  
<a name="l6014"><span class="linenum">6014</span></a>  <span class="comment">            // Save outcomes.</span>
<a name="l6015"><span class="linenum">6015</span></a>              if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableoutcomes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/enableoutcomes.html">enableoutcomes</a>) {
<a name="l6016"><span class="linenum">6016</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = array();
<a name="l6017"><span class="linenum">6017</span></a>                  foreach (<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('gradinginfo')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/gradinginfo.html">gradinginfo</a>-&gt;outcomes as <a class="var it972" onMouseOver="hilite(972)" onMouseOut="lolite()" onClick="logVariable('outcomeid')" href="../../_variables/outcomeid.html">$outcomeid</a> =&gt; <a class="var it3376" onMouseOver="hilite(3376)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../../_variables/outcome.html">$outcome</a>) {
<a name="l6018"><span class="linenum">6018</span></a>                      <a class="var it32205" onMouseOver="hilite(32205)" onMouseOut="lolite()" onClick="logVariable('oldoutcome')" href="../../_variables/oldoutcome.html">$oldoutcome</a> = <a class="var it3376" onMouseOver="hilite(3376)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('grades')" class="var it43346" onMouseOver="hilite(43346)" onMouseOut="lolite()" href="../../_variables/grades.html">grades</a>[<a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('userid')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>]-&gt;grade;
<a name="l6019"><span class="linenum">6019</span></a>                      <a class="var it15919" onMouseOver="hilite(15919)" onMouseOut="lolite()" onClick="logVariable('paramname')" href="../../_variables/paramname.html">$paramname</a> = 'outcome_' . <a class="var it972" onMouseOver="hilite(972)" onMouseOut="lolite()" onClick="logVariable('outcomeid')" href="../../_variables/outcomeid.html">$outcomeid</a> . '_' . <a class="var it793" onMouseOver="hilite(793)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>-&gt;<a onClick="logVariable('userid')" class="var it45746" onMouseOver="hilite(45746)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l6020"><span class="linenum">6020</span></a>  <span class="comment">                    // This will be false if the input was not in the quickgrading</span>
<a name="l6021"><span class="linenum">6021</span></a>  <span class="comment">                    // form (e.g. column hidden).</span>
<a name="l6022"><span class="linenum">6022</span></a>                      <a class="var it32206" onMouseOver="hilite(32206)" onMouseOut="lolite()" onClick="logVariable('newoutcome')" href="../../_variables/newoutcome.html">$newoutcome</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>(<a class="var it15919" onMouseOver="hilite(15919)" onMouseOut="lolite()" onClick="logVariable('paramname')" href="../../_variables/paramname.html">$paramname</a>, false, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l6023"><span class="linenum">6023</span></a>                      if (<a class="var it32206" onMouseOver="hilite(32206)" onMouseOut="lolite()" onClick="logVariable('newoutcome')" href="../../_variables/newoutcome.html">$newoutcome</a> !== false &amp;&amp; (<a class="var it32205" onMouseOver="hilite(32205)" onMouseOut="lolite()" onClick="logVariable('oldoutcome')" href="../../_variables/oldoutcome.html">$oldoutcome</a> != <a class="var it32206" onMouseOver="hilite(32206)" onMouseOut="lolite()" onClick="logVariable('newoutcome')" href="../../_variables/newoutcome.html">$newoutcome</a>)) {
<a name="l6024"><span class="linenum">6024</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>[<a class="var it972" onMouseOver="hilite(972)" onMouseOut="lolite()" onClick="logVariable('outcomeid')" href="../../_variables/outcomeid.html">$outcomeid</a>] = <a class="var it32206" onMouseOver="hilite(32206)" onMouseOut="lolite()" onClick="logVariable('newoutcome')" href="../../_variables/newoutcome.html">$newoutcome</a>;
<a name="l6025"><span class="linenum">6025</span></a>                      }
<a name="l6026"><span class="linenum">6026</span></a>                  }
<a name="l6027"><span class="linenum">6027</span></a>                  if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) &gt; 0) {
<a name="l6028"><span class="linenum">6028</span></a>                      <a class="function" onClick="logFunction('grade_update_outcomes')" href="../../_functions/grade_update_outcomes.html" onMouseOver="funcPopup(event,'grade_update_outcomes')">grade_update_outcomes</a>('mod/assign',
<a name="l6029"><span class="linenum">6029</span></a>                                            <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>-&gt;id,
<a name="l6030"><span class="linenum">6030</span></a>                                            'mod',
<a name="l6031"><span class="linenum">6031</span></a>                                            'assign',
<a name="l6032"><span class="linenum">6032</span></a>                                            <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id,
<a name="l6033"><span class="linenum">6033</span></a>                                            <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>,
<a name="l6034"><span class="linenum">6034</span></a>                                            <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l6035"><span class="linenum">6035</span></a>                  }
<a name="l6036"><span class="linenum">6036</span></a>              }
<a name="l6037"><span class="linenum">6037</span></a>          }
<a name="l6038"><span class="linenum">6038</span></a>  
<a name="l6039"><span class="linenum">6039</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('quickgradingchangessaved', 'assign');
<a name="l6040"><span class="linenum">6040</span></a>      }
<a name="l6041"><span class="linenum">6041</span></a>  
<a name="l6042"><span class="linenum">6042</span></a>      <span class="comment">/**</span>
<a name="l6043"><span class="linenum">6043</span></a>  <span class="comment">     * Reveal student identities to markers (and the gradebook).</span>
<a name="l6044"><span class="linenum">6044</span></a>  <span class="comment">     *</span>
<a name="l6045"><span class="linenum">6045</span></a>  <span class="comment">     * @return void</span>
<a name="l6046"><span class="linenum">6046</span></a>  <span class="comment">     */</span>
<a name="l6047"><span class="linenum">6047</span></a>      public function <a class="function" onClick="logFunction('reveal_identities')" href="../../_functions/reveal_identities.html" onMouseOver="funcPopup(event,'reveal_identities')">reveal_identities</a>() {
<a name="l6048"><span class="linenum">6048</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l6049"><span class="linenum">6049</span></a>  
<a name="l6050"><span class="linenum">6050</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:revealidentities', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l6051"><span class="linenum">6051</span></a>  
<a name="l6052"><span class="linenum">6052</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;revealidentities || empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;blindmarking)) {
<a name="l6053"><span class="linenum">6053</span></a>              return false;
<a name="l6054"><span class="linenum">6054</span></a>          }
<a name="l6055"><span class="linenum">6055</span></a>  
<a name="l6056"><span class="linenum">6056</span></a>  <span class="comment">        // Update the assignment record.</span>
<a name="l6057"><span class="linenum">6057</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a> = new stdClass();
<a name="l6058"><span class="linenum">6058</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('id')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l6059"><span class="linenum">6059</span></a>          <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>-&gt;<a onClick="logVariable('revealidentities')" class="var it43829" onMouseOver="hilite(43829)" onMouseOut="lolite()" href="../../_variables/revealidentities.html">revealidentities</a> = 1;
<a name="l6060"><span class="linenum">6060</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('assign', <a class="var it2088" onMouseOver="hilite(2088)" onMouseOut="lolite()" onClick="logVariable('update')" href="../../_variables/update.html">$update</a>);
<a name="l6061"><span class="linenum">6061</span></a>  
<a name="l6062"><span class="linenum">6062</span></a>  <span class="comment">        // Refresh the instance data.</span>
<a name="l6063"><span class="linenum">6063</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a> = null;
<a name="l6064"><span class="linenum">6064</span></a>  
<a name="l6065"><span class="linenum">6065</span></a>  <span class="comment">        // Release the grades to the gradebook.</span>
<a name="l6066"><span class="linenum">6066</span></a>  <span class="comment">        // First create the column in the gradebook.</span>
<a name="l6067"><span class="linenum">6067</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_gradebook')" href="../../_functions/update_gradebook.html" onMouseOver="funcPopup(event,'update_gradebook')">update_gradebook</a>(false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id);
<a name="l6068"><span class="linenum">6068</span></a>  
<a name="l6069"><span class="linenum">6069</span></a>  <span class="comment">        // Now release all grades.</span>
<a name="l6070"><span class="linenum">6070</span></a>  
<a name="l6071"><span class="linenum">6071</span></a>          <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>();
<a name="l6072"><span class="linenum">6072</span></a>          <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a> = <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('feedback_plugin_for_gradebook')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/feedback_plugin_for_gradebook.html">feedback_plugin_for_gradebook</a>;
<a name="l6073"><span class="linenum">6073</span></a>          <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('assignfeedback_', '', <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a>);
<a name="l6074"><span class="linenum">6074</span></a>          <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('assign_grades', array('assignment'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id));
<a name="l6075"><span class="linenum">6075</span></a>  
<a name="l6076"><span class="linenum">6076</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_plugin_by_type')" href="../../_functions/get_feedback_plugin_by_type.html" onMouseOver="funcPopup(event,'get_feedback_plugin_by_type')">get_feedback_plugin_by_type</a>(<a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a>);
<a name="l6077"><span class="linenum">6077</span></a>  
<a name="l6078"><span class="linenum">6078</span></a>          foreach (<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> as <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l6079"><span class="linenum">6079</span></a>  <span class="comment">            // Fetch any comments for this student.</span>
<a name="l6080"><span class="linenum">6080</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a> &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l6081"><span class="linenum">6081</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('text_for_gradebook')" href="../../_functions/text_for_gradebook.html" onMouseOver="funcPopup(event,'text_for_gradebook')">text_for_gradebook</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l6082"><span class="linenum">6082</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/feedbackformat.html">feedbackformat</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('format_for_gradebook')" href="../../_functions/format_for_gradebook.html" onMouseOver="funcPopup(event,'format_for_gradebook')">format_for_gradebook</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l6083"><span class="linenum">6083</span></a>              }
<a name="l6084"><span class="linenum">6084</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('gradebook_item_update')" href="../../_functions/gradebook_item_update.html" onMouseOver="funcPopup(event,'gradebook_item_update')">gradebook_item_update</a>(null, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l6085"><span class="linenum">6085</span></a>          }
<a name="l6086"><span class="linenum">6086</span></a>  
<a name="l6087"><span class="linenum">6087</span></a>          \mod_assign\event\<a class="class" onClick="logClass('identities_revealed')" href="../../_classes/identities_revealed.html" onMouseOver="classPopup(event,'identities_revealed')">identities_revealed</a>::<a class="function" onClick="logFunction('create_from_assign')" href="../../_functions/create_from_assign.html" onMouseOver="funcPopup(event,'create_from_assign')">create_from_assign</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l6088"><span class="linenum">6088</span></a>      }
<a name="l6089"><span class="linenum">6089</span></a>  
<a name="l6090"><span class="linenum">6090</span></a>      <span class="comment">/**</span>
<a name="l6091"><span class="linenum">6091</span></a>  <span class="comment">     * Reveal student identities to markers (and the gradebook).</span>
<a name="l6092"><span class="linenum">6092</span></a>  <span class="comment">     *</span>
<a name="l6093"><span class="linenum">6093</span></a>  <span class="comment">     * @return void</span>
<a name="l6094"><span class="linenum">6094</span></a>  <span class="comment">     */</span>
<a name="l6095"><span class="linenum">6095</span></a>      protected function <a class="function" onClick="logFunction('process_reveal_identities')" href="../../_functions/process_reveal_identities.html" onMouseOver="funcPopup(event,'process_reveal_identities')">process_reveal_identities</a>() {
<a name="l6096"><span class="linenum">6096</span></a>  
<a name="l6097"><span class="linenum">6097</span></a>          if (!<a class="function" onClick="logFunction('confirm_sesskey')" href="../../_functions/confirm_sesskey.html" onMouseOver="funcPopup(event,'confirm_sesskey')">confirm_sesskey</a>()) {
<a name="l6098"><span class="linenum">6098</span></a>              return false;
<a name="l6099"><span class="linenum">6099</span></a>          }
<a name="l6100"><span class="linenum">6100</span></a>  
<a name="l6101"><span class="linenum">6101</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('reveal_identities')" href="../../_functions/reveal_identities.html" onMouseOver="funcPopup(event,'reveal_identities')">reveal_identities</a>();
<a name="l6102"><span class="linenum">6102</span></a>      }
<a name="l6103"><span class="linenum">6103</span></a>  
<a name="l6104"><span class="linenum">6104</span></a>  
<a name="l6105"><span class="linenum">6105</span></a>      <span class="comment">/**</span>
<a name="l6106"><span class="linenum">6106</span></a>  <span class="comment">     * Save grading options.</span>
<a name="l6107"><span class="linenum">6107</span></a>  <span class="comment">     *</span>
<a name="l6108"><span class="linenum">6108</span></a>  <span class="comment">     * @return void</span>
<a name="l6109"><span class="linenum">6109</span></a>  <span class="comment">     */</span>
<a name="l6110"><span class="linenum">6110</span></a>      protected function <a class="function" onClick="logFunction('process_save_grading_options')" href="../../_functions/process_save_grading_options.html" onMouseOver="funcPopup(event,'process_save_grading_options')">process_save_grading_options</a>() {
<a name="l6111"><span class="linenum">6111</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l6112"><span class="linenum">6112</span></a>  
<a name="l6113"><span class="linenum">6113</span></a>  <span class="comment">        // Include grading options form.</span>
<a name="l6114"><span class="linenum">6114</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/gradingoptionsform.php.html">/mod/assign/gradingoptionsform.php</a>');
<a name="l6115"><span class="linenum">6115</span></a>  
<a name="l6116"><span class="linenum">6116</span></a>  <span class="comment">        // Need submit permission to submit an assignment.</span>
<a name="l6117"><span class="linenum">6117</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('require_view_grades')" href="../../_functions/require_view_grades.html" onMouseOver="funcPopup(event,'require_view_grades')">require_view_grades</a>();
<a name="l6118"><span class="linenum">6118</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l6119"><span class="linenum">6119</span></a>  
<a name="l6120"><span class="linenum">6120</span></a>  <span class="comment">        // Is advanced grading enabled?</span>
<a name="l6121"><span class="linenum">6121</span></a>          <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a> = <a class="function" onClick="logFunction('get_grading_manager')" href="../../_functions/get_grading_manager.html" onMouseOver="funcPopup(event,'get_grading_manager')">get_grading_manager</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(), 'mod_assign', 'submissions');
<a name="l6122"><span class="linenum">6122</span></a>          <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a> = <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a>-&gt;<a class="function" onClick="logFunction('get_active_controller')" href="../../_functions/get_active_controller.html" onMouseOver="funcPopup(event,'get_active_controller')">get_active_controller</a>();
<a name="l6123"><span class="linenum">6123</span></a>          <a class="var it32163" onMouseOver="hilite(32163)" onMouseOut="lolite()" onClick="logVariable('showquickgrading')" href="../../_variables/showquickgrading.html">$showquickgrading</a> = empty(<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>);
<a name="l6124"><span class="linenum">6124</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l6125"><span class="linenum">6125</span></a>              <a class="var it32164" onMouseOver="hilite(32164)" onMouseOut="lolite()" onClick="logVariable('showonlyactiveenrolopt')" href="../../_variables/showonlyactiveenrolopt.html">$showonlyactiveenrolopt</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewsuspendedusers', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l6126"><span class="linenum">6126</span></a>          } else {
<a name="l6127"><span class="linenum">6127</span></a>              <a class="var it32164" onMouseOver="hilite(32164)" onMouseOut="lolite()" onClick="logVariable('showonlyactiveenrolopt')" href="../../_variables/showonlyactiveenrolopt.html">$showonlyactiveenrolopt</a> = false;
<a name="l6128"><span class="linenum">6128</span></a>          }
<a name="l6129"><span class="linenum">6129</span></a>  
<a name="l6130"><span class="linenum">6130</span></a>          <a class="var it26822" onMouseOver="hilite(26822)" onMouseOut="lolite()" onClick="logVariable('markingallocation')" href="../../_variables/markingallocation.html">$markingallocation</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow &amp;&amp;
<a name="l6131"><span class="linenum">6131</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingallocation &amp;&amp;
<a name="l6132"><span class="linenum">6132</span></a>              <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:manageallocations', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l6133"><span class="linenum">6133</span></a>  <span class="comment">        // Get markers to use in drop lists.</span>
<a name="l6134"><span class="linenum">6134</span></a>          <a class="var it32165" onMouseOver="hilite(32165)" onMouseOut="lolite()" onClick="logVariable('markingallocationoptions')" href="../../_variables/markingallocationoptions.html">$markingallocationoptions</a> = array();
<a name="l6135"><span class="linenum">6135</span></a>          if (<a class="var it26822" onMouseOver="hilite(26822)" onMouseOut="lolite()" onClick="logVariable('markingallocation')" href="../../_variables/markingallocation.html">$markingallocation</a>) {
<a name="l6136"><span class="linenum">6136</span></a>              <a class="var it32165" onMouseOver="hilite(32165)" onMouseOut="lolite()" onClick="logVariable('markingallocationoptions')" href="../../_variables/markingallocationoptions.html">$markingallocationoptions</a>[''] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('filternone', 'assign');
<a name="l6137"><span class="linenum">6137</span></a>              <a class="var it32165" onMouseOver="hilite(32165)" onMouseOut="lolite()" onClick="logVariable('markingallocationoptions')" href="../../_variables/markingallocationoptions.html">$markingallocationoptions</a>[<a class="constant" onClick="logConstant('ASSIGN_MARKER_FILTER_NO_MARKER')" href="../../_constants/ASSIGN_MARKER_FILTER_NO_MARKER.html" onMouseOver="constPopup(event,'ASSIGN_MARKER_FILTER_NO_MARKER')">ASSIGN_MARKER_FILTER_NO_MARKER</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('markerfilternomarker', 'assign');
<a name="l6138"><span class="linenum">6138</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="function" onClick="logFunction('users_order_by_sql')" href="../../_functions/users_order_by_sql.html" onMouseOver="funcPopup(event,'users_order_by_sql')">users_order_by_sql</a>();
<a name="l6139"><span class="linenum">6139</span></a>              <a class="var it15515" onMouseOver="hilite(15515)" onMouseOut="lolite()" onClick="logVariable('markers')" href="../../_variables/markers.html">$markers</a> = <a class="function" onClick="logFunction('get_users_by_capability')" href="../../_functions/get_users_by_capability.html" onMouseOver="funcPopup(event,'get_users_by_capability')">get_users_by_capability</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, 'mod/assign:grade', '', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l6140"><span class="linenum">6140</span></a>              foreach (<a class="var it15515" onMouseOver="hilite(15515)" onMouseOut="lolite()" onClick="logVariable('markers')" href="../../_variables/markers.html">$markers</a> as <a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>) {
<a name="l6141"><span class="linenum">6141</span></a>                  <a class="var it32165" onMouseOver="hilite(32165)" onMouseOut="lolite()" onClick="logVariable('markingallocationoptions')" href="../../_variables/markingallocationoptions.html">$markingallocationoptions</a>[<a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>-&gt;<a onClick="logVariable('id')" class="var it43495" onMouseOver="hilite(43495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>);
<a name="l6142"><span class="linenum">6142</span></a>              }
<a name="l6143"><span class="linenum">6143</span></a>          }
<a name="l6144"><span class="linenum">6144</span></a>  
<a name="l6145"><span class="linenum">6145</span></a>  <span class="comment">        // Get marking states to show in form.</span>
<a name="l6146"><span class="linenum">6146</span></a>          <a class="var it32166" onMouseOver="hilite(32166)" onMouseOut="lolite()" onClick="logVariable('markingworkflowoptions')" href="../../_variables/markingworkflowoptions.html">$markingworkflowoptions</a> = array();
<a name="l6147"><span class="linenum">6147</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow) {
<a name="l6148"><span class="linenum">6148</span></a>              <a class="var it30992" onMouseOver="hilite(30992)" onMouseOut="lolite()" onClick="logVariable('notmarked')" href="../../_variables/notmarked.html">$notmarked</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('markingworkflowstatenotmarked', 'assign');
<a name="l6149"><span class="linenum">6149</span></a>              <a class="var it32166" onMouseOver="hilite(32166)" onMouseOut="lolite()" onClick="logVariable('markingworkflowoptions')" href="../../_variables/markingworkflowoptions.html">$markingworkflowoptions</a>[''] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('filternone', 'assign');
<a name="l6150"><span class="linenum">6150</span></a>              <a class="var it32166" onMouseOver="hilite(32166)" onMouseOut="lolite()" onClick="logVariable('markingworkflowoptions')" href="../../_variables/markingworkflowoptions.html">$markingworkflowoptions</a>[<a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED')">ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED</a>] = <a class="var it30992" onMouseOver="hilite(30992)" onMouseOut="lolite()" onClick="logVariable('notmarked')" href="../../_variables/notmarked.html">$notmarked</a>;
<a name="l6151"><span class="linenum">6151</span></a>              <a class="var it32166" onMouseOver="hilite(32166)" onMouseOut="lolite()" onClick="logVariable('markingworkflowoptions')" href="../../_variables/markingworkflowoptions.html">$markingworkflowoptions</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it32166" onMouseOver="hilite(32166)" onMouseOut="lolite()" onClick="logVariable('markingworkflowoptions')" href="../../_variables/markingworkflowoptions.html">$markingworkflowoptions</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_marking_workflow_states_for_current_user')" href="../../_functions/get_marking_workflow_states_for_current_user.html" onMouseOver="funcPopup(event,'get_marking_workflow_states_for_current_user')">get_marking_workflow_states_for_current_user</a>());
<a name="l6152"><span class="linenum">6152</span></a>          }
<a name="l6153"><span class="linenum">6153</span></a>  
<a name="l6154"><span class="linenum">6154</span></a>          <a class="var it32214" onMouseOver="hilite(32214)" onMouseOut="lolite()" onClick="logVariable('gradingoptionsparams')" href="../../_variables/gradingoptionsparams.html">$gradingoptionsparams</a> = array('cm'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l6155"><span class="linenum">6155</span></a>                                        'contextid'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id,
<a name="l6156"><span class="linenum">6156</span></a>                                        'userid'=&gt;<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l6157"><span class="linenum">6157</span></a>                                        'submissionsenabled'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>(),
<a name="l6158"><span class="linenum">6158</span></a>                                        'showquickgrading'=&gt;<a class="var it32163" onMouseOver="hilite(32163)" onMouseOut="lolite()" onClick="logVariable('showquickgrading')" href="../../_variables/showquickgrading.html">$showquickgrading</a>,
<a name="l6159"><span class="linenum">6159</span></a>                                        'quickgrading'=&gt;false,
<a name="l6160"><span class="linenum">6160</span></a>                                        'markingworkflowopt' =&gt; <a class="var it32166" onMouseOver="hilite(32166)" onMouseOut="lolite()" onClick="logVariable('markingworkflowoptions')" href="../../_variables/markingworkflowoptions.html">$markingworkflowoptions</a>,
<a name="l6161"><span class="linenum">6161</span></a>                                        'markingallocationopt' =&gt; <a class="var it32165" onMouseOver="hilite(32165)" onMouseOut="lolite()" onClick="logVariable('markingallocationoptions')" href="../../_variables/markingallocationoptions.html">$markingallocationoptions</a>,
<a name="l6162"><span class="linenum">6162</span></a>                                        'showonlyactiveenrolopt'=&gt;<a class="var it32164" onMouseOver="hilite(32164)" onMouseOut="lolite()" onClick="logVariable('showonlyactiveenrolopt')" href="../../_variables/showonlyactiveenrolopt.html">$showonlyactiveenrolopt</a>,
<a name="l6163"><span class="linenum">6163</span></a>                                        'showonlyactiveenrol'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_only_active_users')" href="../../_functions/show_only_active_users.html" onMouseOver="funcPopup(event,'show_only_active_users')">show_only_active_users</a>());
<a name="l6164"><span class="linenum">6164</span></a>  
<a name="l6165"><span class="linenum">6165</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_grading_options_form')" href="../../_classes/mod_assign_grading_options_form.html" onMouseOver="classPopup(event,'mod_assign_grading_options_form')">mod_assign_grading_options_form</a>(null, <a class="var it32214" onMouseOver="hilite(32214)" onMouseOut="lolite()" onClick="logVariable('gradingoptionsparams')" href="../../_variables/gradingoptionsparams.html">$gradingoptionsparams</a>);
<a name="l6166"><span class="linenum">6166</span></a>          if (<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l6167"><span class="linenum">6167</span></a>              <a class="function" onClick="logFunction('set_user_preference')" href="../../_functions/set_user_preference.html" onMouseOver="funcPopup(event,'set_user_preference')">set_user_preference</a>('assign_perpage', <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('perpage')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/perpage.html">perpage</a>);
<a name="l6168"><span class="linenum">6168</span></a>              if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('filter')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/filter.html">filter</a>)) {
<a name="l6169"><span class="linenum">6169</span></a>                  <a class="function" onClick="logFunction('set_user_preference')" href="../../_functions/set_user_preference.html" onMouseOver="funcPopup(event,'set_user_preference')">set_user_preference</a>('assign_filter', <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('filter')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/filter.html">filter</a>);
<a name="l6170"><span class="linenum">6170</span></a>              }
<a name="l6171"><span class="linenum">6171</span></a>              if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('markerfilter')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/markerfilter.html">markerfilter</a>)) {
<a name="l6172"><span class="linenum">6172</span></a>                  <a class="function" onClick="logFunction('set_user_preference')" href="../../_functions/set_user_preference.html" onMouseOver="funcPopup(event,'set_user_preference')">set_user_preference</a>('assign_markerfilter', <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('markerfilter')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/markerfilter.html">markerfilter</a>);
<a name="l6173"><span class="linenum">6173</span></a>              }
<a name="l6174"><span class="linenum">6174</span></a>              if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('workflowfilter')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/workflowfilter.html">workflowfilter</a>)) {
<a name="l6175"><span class="linenum">6175</span></a>                  <a class="function" onClick="logFunction('set_user_preference')" href="../../_functions/set_user_preference.html" onMouseOver="funcPopup(event,'set_user_preference')">set_user_preference</a>('assign_workflowfilter', <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('workflowfilter')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/workflowfilter.html">workflowfilter</a>);
<a name="l6176"><span class="linenum">6176</span></a>              }
<a name="l6177"><span class="linenum">6177</span></a>              if (<a class="var it32163" onMouseOver="hilite(32163)" onMouseOut="lolite()" onClick="logVariable('showquickgrading')" href="../../_variables/showquickgrading.html">$showquickgrading</a>) {
<a name="l6178"><span class="linenum">6178</span></a>                  <a class="function" onClick="logFunction('set_user_preference')" href="../../_functions/set_user_preference.html" onMouseOver="funcPopup(event,'set_user_preference')">set_user_preference</a>('assign_quickgrading', isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('quickgrading')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/quickgrading.html">quickgrading</a>));
<a name="l6179"><span class="linenum">6179</span></a>              }
<a name="l6180"><span class="linenum">6180</span></a>              if (!empty(<a class="var it32164" onMouseOver="hilite(32164)" onMouseOut="lolite()" onClick="logVariable('showonlyactiveenrolopt')" href="../../_variables/showonlyactiveenrolopt.html">$showonlyactiveenrolopt</a>)) {
<a name="l6181"><span class="linenum">6181</span></a>                  <a class="var it4014" onMouseOver="hilite(4014)" onMouseOut="lolite()" onClick="logVariable('showonlyactiveenrol')" href="../../_variables/showonlyactiveenrol.html">$showonlyactiveenrol</a> = isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('showonlyactiveenrol')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/showonlyactiveenrol.html">showonlyactiveenrol</a>);
<a name="l6182"><span class="linenum">6182</span></a>                  <a class="function" onClick="logFunction('set_user_preference')" href="../../_functions/set_user_preference.html" onMouseOver="funcPopup(event,'set_user_preference')">set_user_preference</a>('grade_report_showonlyactiveenrol', <a class="var it4014" onMouseOver="hilite(4014)" onMouseOut="lolite()" onClick="logVariable('showonlyactiveenrol')" href="../../_variables/showonlyactiveenrol.html">$showonlyactiveenrol</a>);
<a name="l6183"><span class="linenum">6183</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('showonlyactiveenrol')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/showonlyactiveenrol.html">showonlyactiveenrol</a> = <a class="var it4014" onMouseOver="hilite(4014)" onMouseOut="lolite()" onClick="logVariable('showonlyactiveenrol')" href="../../_variables/showonlyactiveenrol.html">$showonlyactiveenrol</a>;
<a name="l6184"><span class="linenum">6184</span></a>              }
<a name="l6185"><span class="linenum">6185</span></a>          }
<a name="l6186"><span class="linenum">6186</span></a>      }
<a name="l6187"><span class="linenum">6187</span></a>  
<a name="l6188"><span class="linenum">6188</span></a>      <span class="comment">/**</span>
<a name="l6189"><span class="linenum">6189</span></a>  <span class="comment">     * Take a grade object and print a short summary for the log file.</span>
<a name="l6190"><span class="linenum">6190</span></a>  <span class="comment">     * The size limit for the log file is 255 characters, so be careful not</span>
<a name="l6191"><span class="linenum">6191</span></a>  <span class="comment">     * to include too much information.</span>
<a name="l6192"><span class="linenum">6192</span></a>  <span class="comment">     *</span>
<a name="l6193"><span class="linenum">6193</span></a>  <span class="comment">     * @deprecated since 2.7</span>
<a name="l6194"><span class="linenum">6194</span></a>  <span class="comment">     *</span>
<a name="l6195"><span class="linenum">6195</span></a>  <span class="comment">     * @param stdClass $grade</span>
<a name="l6196"><span class="linenum">6196</span></a>  <span class="comment">     * @return string</span>
<a name="l6197"><span class="linenum">6197</span></a>  <span class="comment">     */</span>
<a name="l6198"><span class="linenum">6198</span></a>      public function <a class="function" onClick="logFunction('format_grade_for_log')" href="../../_functions/format_grade_for_log.html" onMouseOver="funcPopup(event,'format_grade_for_log')">format_grade_for_log</a>(stdClass <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l6199"><span class="linenum">6199</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l6200"><span class="linenum">6200</span></a>  
<a name="l6201"><span class="linenum">6201</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l6202"><span class="linenum">6202</span></a>  
<a name="l6203"><span class="linenum">6203</span></a>          <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradestudent', 'assign', array('id'=&gt;<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'fullname'=&gt;<a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>)));
<a name="l6204"><span class="linenum">6204</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> != '') {
<a name="l6205"><span class="linenum">6205</span></a>              <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> .= <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade') . ': ' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('display_grade')" href="../../_functions/display_grade.html" onMouseOver="funcPopup(event,'display_grade')">display_grade</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>, false) . '. ';
<a name="l6206"><span class="linenum">6206</span></a>          } else {
<a name="l6207"><span class="linenum">6207</span></a>              <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> .= <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nograde', 'assign');
<a name="l6208"><span class="linenum">6208</span></a>          }
<a name="l6209"><span class="linenum">6209</span></a>          return <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>;
<a name="l6210"><span class="linenum">6210</span></a>      }
<a name="l6211"><span class="linenum">6211</span></a>  
<a name="l6212"><span class="linenum">6212</span></a>      <span class="comment">/**</span>
<a name="l6213"><span class="linenum">6213</span></a>  <span class="comment">     * Take a submission object and print a short summary for the log file.</span>
<a name="l6214"><span class="linenum">6214</span></a>  <span class="comment">     * The size limit for the log file is 255 characters, so be careful not</span>
<a name="l6215"><span class="linenum">6215</span></a>  <span class="comment">     * to include too much information.</span>
<a name="l6216"><span class="linenum">6216</span></a>  <span class="comment">     *</span>
<a name="l6217"><span class="linenum">6217</span></a>  <span class="comment">     * @deprecated since 2.7</span>
<a name="l6218"><span class="linenum">6218</span></a>  <span class="comment">     *</span>
<a name="l6219"><span class="linenum">6219</span></a>  <span class="comment">     * @param stdClass $submission</span>
<a name="l6220"><span class="linenum">6220</span></a>  <span class="comment">     * @return string</span>
<a name="l6221"><span class="linenum">6221</span></a>  <span class="comment">     */</span>
<a name="l6222"><span class="linenum">6222</span></a>      public function <a class="function" onClick="logFunction('format_submission_for_log')" href="../../_functions/format_submission_for_log.html" onMouseOver="funcPopup(event,'format_submission_for_log')">format_submission_for_log</a>(stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l6223"><span class="linenum">6223</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l6224"><span class="linenum">6224</span></a>  
<a name="l6225"><span class="linenum">6225</span></a>          <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = '';
<a name="l6226"><span class="linenum">6226</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>) {
<a name="l6227"><span class="linenum">6227</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l6228"><span class="linenum">6228</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l6229"><span class="linenum">6229</span></a>          } else {
<a name="l6230"><span class="linenum">6230</span></a>              <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>);
<a name="l6231"><span class="linenum">6231</span></a>              if (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>) {
<a name="l6232"><span class="linenum">6232</span></a>                  <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('name')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l6233"><span class="linenum">6233</span></a>              } else {
<a name="l6234"><span class="linenum">6234</span></a>                  <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('defaultteam', 'assign');
<a name="l6235"><span class="linenum">6235</span></a>              }
<a name="l6236"><span class="linenum">6236</span></a>          }
<a name="l6237"><span class="linenum">6237</span></a>          <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionstatus_' . <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a>, 'assign');
<a name="l6238"><span class="linenum">6238</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('id'=&gt;<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, 'fullname'=&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, 'status'=&gt;<a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>);
<a name="l6239"><span class="linenum">6239</span></a>          <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> .= <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionlog', 'assign', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) . ' &lt;br&gt;';
<a name="l6240"><span class="linenum">6240</span></a>  
<a name="l6241"><span class="linenum">6241</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l6242"><span class="linenum">6242</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l6243"><span class="linenum">6243</span></a>                  <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> .= '&lt;br&gt;' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('format_for_log')" href="../../_functions/format_for_log.html" onMouseOver="funcPopup(event,'format_for_log')">format_for_log</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l6244"><span class="linenum">6244</span></a>              }
<a name="l6245"><span class="linenum">6245</span></a>          }
<a name="l6246"><span class="linenum">6246</span></a>  
<a name="l6247"><span class="linenum">6247</span></a>          return <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>;
<a name="l6248"><span class="linenum">6248</span></a>      }
<a name="l6249"><span class="linenum">6249</span></a>  
<a name="l6250"><span class="linenum">6250</span></a>      <span class="comment">/**</span>
<a name="l6251"><span class="linenum">6251</span></a>  <span class="comment">     * Require a valid sess key and then call copy_previous_attempt.</span>
<a name="l6252"><span class="linenum">6252</span></a>  <span class="comment">     *</span>
<a name="l6253"><span class="linenum">6253</span></a>  <span class="comment">     * @param  array $notices Any error messages that should be shown</span>
<a name="l6254"><span class="linenum">6254</span></a>  <span class="comment">     *                        to the user at the top of the edit submission form.</span>
<a name="l6255"><span class="linenum">6255</span></a>  <span class="comment">     * @return bool</span>
<a name="l6256"><span class="linenum">6256</span></a>  <span class="comment">     */</span>
<a name="l6257"><span class="linenum">6257</span></a>      protected function <a class="function" onClick="logFunction('process_copy_previous_attempt')" href="../../_functions/process_copy_previous_attempt.html" onMouseOver="funcPopup(event,'process_copy_previous_attempt')">process_copy_previous_attempt</a>(&amp;<a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>) {
<a name="l6258"><span class="linenum">6258</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l6259"><span class="linenum">6259</span></a>  
<a name="l6260"><span class="linenum">6260</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('copy_previous_attempt')" href="../../_functions/copy_previous_attempt.html" onMouseOver="funcPopup(event,'copy_previous_attempt')">copy_previous_attempt</a>(<a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>);
<a name="l6261"><span class="linenum">6261</span></a>      }
<a name="l6262"><span class="linenum">6262</span></a>  
<a name="l6263"><span class="linenum">6263</span></a>      <span class="comment">/**</span>
<a name="l6264"><span class="linenum">6264</span></a>  <span class="comment">     * Copy the current assignment submission from the last submitted attempt.</span>
<a name="l6265"><span class="linenum">6265</span></a>  <span class="comment">     *</span>
<a name="l6266"><span class="linenum">6266</span></a>  <span class="comment">     * @param  array $notices Any error messages that should be shown</span>
<a name="l6267"><span class="linenum">6267</span></a>  <span class="comment">     *                        to the user at the top of the edit submission form.</span>
<a name="l6268"><span class="linenum">6268</span></a>  <span class="comment">     * @return bool</span>
<a name="l6269"><span class="linenum">6269</span></a>  <span class="comment">     */</span>
<a name="l6270"><span class="linenum">6270</span></a>      public function <a class="function" onClick="logFunction('copy_previous_attempt')" href="../../_functions/copy_previous_attempt.html" onMouseOver="funcPopup(event,'copy_previous_attempt')">copy_previous_attempt</a>(&amp;<a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>) {
<a name="l6271"><span class="linenum">6271</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l6272"><span class="linenum">6272</span></a>  
<a name="l6273"><span class="linenum">6273</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:submit', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l6274"><span class="linenum">6274</span></a>  
<a name="l6275"><span class="linenum">6275</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l6276"><span class="linenum">6276</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>) {
<a name="l6277"><span class="linenum">6277</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, true);
<a name="l6278"><span class="linenum">6278</span></a>          } else {
<a name="l6279"><span class="linenum">6279</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, true);
<a name="l6280"><span class="linenum">6280</span></a>          }
<a name="l6281"><span class="linenum">6281</span></a>          if (!<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> || <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> != <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_REOPENED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_REOPENED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_REOPENED')">ASSIGN_SUBMISSION_STATUS_REOPENED</a>) {
<a name="l6282"><span class="linenum">6282</span></a>              <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionnotcopiedinvalidstatus', 'assign');
<a name="l6283"><span class="linenum">6283</span></a>              return false;
<a name="l6284"><span class="linenum">6284</span></a>          }
<a name="l6285"><span class="linenum">6285</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l6286"><span class="linenum">6286</span></a>  
<a name="l6287"><span class="linenum">6287</span></a>  <span class="comment">        // Get the flags to check if it is locked.</span>
<a name="l6288"><span class="linenum">6288</span></a>          if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> &amp;&amp; <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('locked')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/locked.html">locked</a>) {
<a name="l6289"><span class="linenum">6289</span></a>              <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionslocked', 'assign');
<a name="l6290"><span class="linenum">6290</span></a>              return false;
<a name="l6291"><span class="linenum">6291</span></a>          }
<a name="l6292"><span class="linenum">6292</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('submissiondrafts')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/submissiondrafts.html">submissiondrafts</a>) {
<a name="l6293"><span class="linenum">6293</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_DRAFT')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_DRAFT.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_DRAFT')">ASSIGN_SUBMISSION_STATUS_DRAFT</a>;
<a name="l6294"><span class="linenum">6294</span></a>          } else {
<a name="l6295"><span class="linenum">6295</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>;
<a name="l6296"><span class="linenum">6296</span></a>          }
<a name="l6297"><span class="linenum">6297</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_submission')" href="../../_functions/update_submission.html" onMouseOver="funcPopup(event,'update_submission')">update_submission</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, true, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>);
<a name="l6298"><span class="linenum">6298</span></a>  
<a name="l6299"><span class="linenum">6299</span></a>  <span class="comment">        // Find the previous submission.</span>
<a name="l6300"><span class="linenum">6300</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>) {
<a name="l6301"><span class="linenum">6301</span></a>              <a class="var it32215" onMouseOver="hilite(32215)" onMouseOut="lolite()" onClick="logVariable('previoussubmission')" href="../../_variables/previoussubmission.html">$previoussubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, true, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> - 1);
<a name="l6302"><span class="linenum">6302</span></a>          } else {
<a name="l6303"><span class="linenum">6303</span></a>              <a class="var it32215" onMouseOver="hilite(32215)" onMouseOut="lolite()" onClick="logVariable('previoussubmission')" href="../../_variables/previoussubmission.html">$previoussubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, true, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> - 1);
<a name="l6304"><span class="linenum">6304</span></a>          }
<a name="l6305"><span class="linenum">6305</span></a>  
<a name="l6306"><span class="linenum">6306</span></a>          if (!<a class="var it32215" onMouseOver="hilite(32215)" onMouseOut="lolite()" onClick="logVariable('previoussubmission')" href="../../_variables/previoussubmission.html">$previoussubmission</a>) {
<a name="l6307"><span class="linenum">6307</span></a>  <span class="comment">            // There was no previous submission so there is nothing else to do.</span>
<a name="l6308"><span class="linenum">6308</span></a>              return true;
<a name="l6309"><span class="linenum">6309</span></a>          }
<a name="l6310"><span class="linenum">6310</span></a>  
<a name="l6311"><span class="linenum">6311</span></a>          <a class="var it32216" onMouseOver="hilite(32216)" onMouseOut="lolite()" onClick="logVariable('pluginerror')" href="../../_variables/pluginerror.html">$pluginerror</a> = false;
<a name="l6312"><span class="linenum">6312</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>() as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l6313"><span class="linenum">6313</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>()) {
<a name="l6314"><span class="linenum">6314</span></a>                  if (!<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('copy_submission')" href="../../_functions/copy_submission.html" onMouseOver="funcPopup(event,'copy_submission')">copy_submission</a>(<a class="var it32215" onMouseOver="hilite(32215)" onMouseOut="lolite()" onClick="logVariable('previoussubmission')" href="../../_variables/previoussubmission.html">$previoussubmission</a>, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>)) {
<a name="l6315"><span class="linenum">6315</span></a>                      <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>[] = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_error')" href="../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>();
<a name="l6316"><span class="linenum">6316</span></a>                      <a class="var it32216" onMouseOver="hilite(32216)" onMouseOut="lolite()" onClick="logVariable('pluginerror')" href="../../_variables/pluginerror.html">$pluginerror</a> = true;
<a name="l6317"><span class="linenum">6317</span></a>                  }
<a name="l6318"><span class="linenum">6318</span></a>              }
<a name="l6319"><span class="linenum">6319</span></a>          }
<a name="l6320"><span class="linenum">6320</span></a>          if (<a class="var it32216" onMouseOver="hilite(32216)" onMouseOut="lolite()" onClick="logVariable('pluginerror')" href="../../_variables/pluginerror.html">$pluginerror</a>) {
<a name="l6321"><span class="linenum">6321</span></a>              return false;
<a name="l6322"><span class="linenum">6322</span></a>          }
<a name="l6323"><span class="linenum">6323</span></a>  
<a name="l6324"><span class="linenum">6324</span></a>          \mod_assign\event\<a class="class" onClick="logClass('submission_duplicated')" href="../../_classes/submission_duplicated.html" onMouseOver="classPopup(event,'submission_duplicated')">submission_duplicated</a>::<a class="function" onClick="logFunction('create_from_submission')" href="../../_functions/create_from_submission.html" onMouseOver="funcPopup(event,'create_from_submission')">create_from_submission</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l6325"><span class="linenum">6325</span></a>  
<a name="l6326"><span class="linenum">6326</span></a>          <a class="var it767" onMouseOver="hilite(767)" onMouseOut="lolite()" onClick="logVariable('complete')" href="../../_variables/complete.html">$complete</a> = <a class="constant" onClick="logConstant('COMPLETION_INCOMPLETE')" href="../../_constants/COMPLETION_INCOMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_INCOMPLETE')">COMPLETION_INCOMPLETE</a>;
<a name="l6327"><span class="linenum">6327</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> == <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>) {
<a name="l6328"><span class="linenum">6328</span></a>              <a class="var it767" onMouseOver="hilite(767)" onMouseOut="lolite()" onClick="logVariable('complete')" href="../../_variables/complete.html">$complete</a> = <a class="constant" onClick="logConstant('COMPLETION_COMPLETE')" href="../../_constants/COMPLETION_COMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_COMPLETE')">COMPLETION_COMPLETE</a>;
<a name="l6329"><span class="linenum">6329</span></a>          }
<a name="l6330"><span class="linenum">6330</span></a>          <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>());
<a name="l6331"><span class="linenum">6331</span></a>          if (<a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()) &amp;&amp; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('completionsubmit')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/completionsubmit.html">completionsubmit</a>) {
<a name="l6332"><span class="linenum">6332</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_activity_completion_records')" href="../../_functions/update_activity_completion_records.html" onMouseOver="funcPopup(event,'update_activity_completion_records')">update_activity_completion_records</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>,
<a name="l6333"><span class="linenum">6333</span></a>                                                        <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('requireallteammemberssubmit')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/requireallteammemberssubmit.html">requireallteammemberssubmit</a>,
<a name="l6334"><span class="linenum">6334</span></a>                                                        <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>,
<a name="l6335"><span class="linenum">6335</span></a>                                                        <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l6336"><span class="linenum">6336</span></a>                                                        <a class="var it767" onMouseOver="hilite(767)" onMouseOut="lolite()" onClick="logVariable('complete')" href="../../_variables/complete.html">$complete</a>,
<a name="l6337"><span class="linenum">6337</span></a>                                                        <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>);
<a name="l6338"><span class="linenum">6338</span></a>          }
<a name="l6339"><span class="linenum">6339</span></a>  
<a name="l6340"><span class="linenum">6340</span></a>          if (!<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('submissiondrafts')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/submissiondrafts.html">submissiondrafts</a>) {
<a name="l6341"><span class="linenum">6341</span></a>  <span class="comment">            // There is a case for not notifying the student about the submission copy,</span>
<a name="l6342"><span class="linenum">6342</span></a>  <span class="comment">            // but it provides a record of the event and if they then cancel editing it</span>
<a name="l6343"><span class="linenum">6343</span></a>  <span class="comment">            // is clear that the submission was copied.</span>
<a name="l6344"><span class="linenum">6344</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('notify_student_submission_copied')" href="../../_functions/notify_student_submission_copied.html" onMouseOver="funcPopup(event,'notify_student_submission_copied')">notify_student_submission_copied</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l6345"><span class="linenum">6345</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('notify_graders')" href="../../_functions/notify_graders.html" onMouseOver="funcPopup(event,'notify_graders')">notify_graders</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l6346"><span class="linenum">6346</span></a>  
<a name="l6347"><span class="linenum">6347</span></a>  <span class="comment">            // The same logic applies here - we could not notify teachers,</span>
<a name="l6348"><span class="linenum">6348</span></a>  <span class="comment">            // but then they would wonder why there are submitted assignments</span>
<a name="l6349"><span class="linenum">6349</span></a>  <span class="comment">            // and they haven't been notified.</span>
<a name="l6350"><span class="linenum">6350</span></a>              \mod_assign\event\<a class="class" onClick="logClass('assessable_submitted')" href="../../_classes/assessable_submitted.html" onMouseOver="classPopup(event,'assessable_submitted')">assessable_submitted</a>::<a class="function" onClick="logFunction('create_from_submission')" href="../../_functions/create_from_submission.html" onMouseOver="funcPopup(event,'create_from_submission')">create_from_submission</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, true)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l6351"><span class="linenum">6351</span></a>          }
<a name="l6352"><span class="linenum">6352</span></a>          return true;
<a name="l6353"><span class="linenum">6353</span></a>      }
<a name="l6354"><span class="linenum">6354</span></a>  
<a name="l6355"><span class="linenum">6355</span></a>      <span class="comment">/**</span>
<a name="l6356"><span class="linenum">6356</span></a>  <span class="comment">     * Determine if the current submission is empty or not.</span>
<a name="l6357"><span class="linenum">6357</span></a>  <span class="comment">     *</span>
<a name="l6358"><span class="linenum">6358</span></a>  <span class="comment">     * @param submission $submission the students submission record to check.</span>
<a name="l6359"><span class="linenum">6359</span></a>  <span class="comment">     * @return bool</span>
<a name="l6360"><span class="linenum">6360</span></a>  <span class="comment">     */</span>
<a name="l6361"><span class="linenum">6361</span></a>      public function <a class="function" onClick="logFunction('submission_empty')" href="../../_functions/submission_empty.html" onMouseOver="funcPopup(event,'submission_empty')">submission_empty</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l6362"><span class="linenum">6362</span></a>          <a class="var it32217" onMouseOver="hilite(32217)" onMouseOut="lolite()" onClick="logVariable('allempty')" href="../../_variables/allempty.html">$allempty</a> = true;
<a name="l6363"><span class="linenum">6363</span></a>  
<a name="l6364"><span class="linenum">6364</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l6365"><span class="linenum">6365</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l6366"><span class="linenum">6366</span></a>                  if (!<a class="var it32217" onMouseOver="hilite(32217)" onMouseOut="lolite()" onClick="logVariable('allempty')" href="../../_variables/allempty.html">$allempty</a> || !<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_empty')" href="../../_functions/is_empty.html" onMouseOver="funcPopup(event,'is_empty')">is_empty</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>)) {
<a name="l6367"><span class="linenum">6367</span></a>                      <a class="var it32217" onMouseOver="hilite(32217)" onMouseOut="lolite()" onClick="logVariable('allempty')" href="../../_variables/allempty.html">$allempty</a> = false;
<a name="l6368"><span class="linenum">6368</span></a>                  }
<a name="l6369"><span class="linenum">6369</span></a>              }
<a name="l6370"><span class="linenum">6370</span></a>          }
<a name="l6371"><span class="linenum">6371</span></a>          return <a class="var it32217" onMouseOver="hilite(32217)" onMouseOut="lolite()" onClick="logVariable('allempty')" href="../../_variables/allempty.html">$allempty</a>;
<a name="l6372"><span class="linenum">6372</span></a>      }
<a name="l6373"><span class="linenum">6373</span></a>  
<a name="l6374"><span class="linenum">6374</span></a>      <span class="comment">/**</span>
<a name="l6375"><span class="linenum">6375</span></a>  <span class="comment">     * Determine if a new submission is empty or not</span>
<a name="l6376"><span class="linenum">6376</span></a>  <span class="comment">     *</span>
<a name="l6377"><span class="linenum">6377</span></a>  <span class="comment">     * @param stdClass $data Submission data</span>
<a name="l6378"><span class="linenum">6378</span></a>  <span class="comment">     * @return bool</span>
<a name="l6379"><span class="linenum">6379</span></a>  <span class="comment">     */</span>
<a name="l6380"><span class="linenum">6380</span></a>      public function <a class="function" onClick="logFunction('new_submission_empty')" href="../../_functions/new_submission_empty.html" onMouseOver="funcPopup(event,'new_submission_empty')">new_submission_empty</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l6381"><span class="linenum">6381</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l6382"><span class="linenum">6382</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('allow_submissions')" href="../../_functions/allow_submissions.html" onMouseOver="funcPopup(event,'allow_submissions')">allow_submissions</a>() &amp;&amp;
<a name="l6383"><span class="linenum">6383</span></a>                      !<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('submission_is_empty')" href="../../_functions/submission_is_empty.html" onMouseOver="funcPopup(event,'submission_is_empty')">submission_is_empty</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l6384"><span class="linenum">6384</span></a>                  return false;
<a name="l6385"><span class="linenum">6385</span></a>              }
<a name="l6386"><span class="linenum">6386</span></a>          }
<a name="l6387"><span class="linenum">6387</span></a>          return true;
<a name="l6388"><span class="linenum">6388</span></a>      }
<a name="l6389"><span class="linenum">6389</span></a>  
<a name="l6390"><span class="linenum">6390</span></a>      <span class="comment">/**</span>
<a name="l6391"><span class="linenum">6391</span></a>  <span class="comment">     * Save assignment submission for the current user.</span>
<a name="l6392"><span class="linenum">6392</span></a>  <span class="comment">     *</span>
<a name="l6393"><span class="linenum">6393</span></a>  <span class="comment">     * @param  stdClass $data</span>
<a name="l6394"><span class="linenum">6394</span></a>  <span class="comment">     * @param  array $notices Any error messages that should be shown</span>
<a name="l6395"><span class="linenum">6395</span></a>  <span class="comment">     *                        to the user.</span>
<a name="l6396"><span class="linenum">6396</span></a>  <span class="comment">     * @return bool</span>
<a name="l6397"><span class="linenum">6397</span></a>  <span class="comment">     */</span>
<a name="l6398"><span class="linenum">6398</span></a>      public function <a class="function" onClick="logFunction('save_submission')" href="../../_functions/save_submission.html" onMouseOver="funcPopup(event,'save_submission')">save_submission</a>(stdClass <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, &amp; <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>) {
<a name="l6399"><span class="linenum">6399</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l6400"><span class="linenum">6400</span></a>  
<a name="l6401"><span class="linenum">6401</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l6402"><span class="linenum">6402</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>)) {
<a name="l6403"><span class="linenum">6403</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l6404"><span class="linenum">6404</span></a>          }
<a name="l6405"><span class="linenum">6405</span></a>  
<a name="l6406"><span class="linenum">6406</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>);
<a name="l6407"><span class="linenum">6407</span></a>          if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l6408"><span class="linenum">6408</span></a>              <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:submit', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l6409"><span class="linenum">6409</span></a>          } else {
<a name="l6410"><span class="linenum">6410</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l6411"><span class="linenum">6411</span></a>              if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_edit_submission')" href="../../_functions/can_edit_submission.html" onMouseOver="funcPopup(event,'can_edit_submission')">can_edit_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l6412"><span class="linenum">6412</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('nopermission');
<a name="l6413"><span class="linenum">6413</span></a>              }
<a name="l6414"><span class="linenum">6414</span></a>          }
<a name="l6415"><span class="linenum">6415</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l6416"><span class="linenum">6416</span></a>  
<a name="l6417"><span class="linenum">6417</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>) {
<a name="l6418"><span class="linenum">6418</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 0, true);
<a name="l6419"><span class="linenum">6419</span></a>          } else {
<a name="l6420"><span class="linenum">6420</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true);
<a name="l6421"><span class="linenum">6421</span></a>          }
<a name="l6422"><span class="linenum">6422</span></a>  
<a name="l6423"><span class="linenum">6423</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('new_submission_empty')" href="../../_functions/new_submission_empty.html" onMouseOver="funcPopup(event,'new_submission_empty')">new_submission_empty</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l6424"><span class="linenum">6424</span></a>              <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionempty', 'mod_assign');
<a name="l6425"><span class="linenum">6425</span></a>              return false;
<a name="l6426"><span class="linenum">6426</span></a>          }
<a name="l6427"><span class="linenum">6427</span></a>  
<a name="l6428"><span class="linenum">6428</span></a>  <span class="comment">        // Check that no one has modified the submission since we started looking at it.</span>
<a name="l6429"><span class="linenum">6429</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('lastmodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/lastmodified.html">lastmodified</a>) &amp;&amp; (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> &gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('lastmodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/lastmodified.html">lastmodified</a>)) {
<a name="l6430"><span class="linenum">6430</span></a>  <span class="comment">            // Another user has submitted something. Notify the current user.</span>
<a name="l6431"><span class="linenum">6431</span></a>              if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> !== <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_NEW')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_NEW.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_NEW')">ASSIGN_SUBMISSION_STATUS_NEW</a>) {
<a name="l6432"><span class="linenum">6432</span></a>                  <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>[] = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a> ? <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionmodifiedgroup', 'mod_assign')
<a name="l6433"><span class="linenum">6433</span></a>                                                         : <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionmodified', 'mod_assign');
<a name="l6434"><span class="linenum">6434</span></a>                  return false;
<a name="l6435"><span class="linenum">6435</span></a>              }
<a name="l6436"><span class="linenum">6436</span></a>          }
<a name="l6437"><span class="linenum">6437</span></a>  
<a name="l6438"><span class="linenum">6438</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('submissiondrafts')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/submissiondrafts.html">submissiondrafts</a>) {
<a name="l6439"><span class="linenum">6439</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_DRAFT')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_DRAFT.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_DRAFT')">ASSIGN_SUBMISSION_STATUS_DRAFT</a>;
<a name="l6440"><span class="linenum">6440</span></a>          } else {
<a name="l6441"><span class="linenum">6441</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>;
<a name="l6442"><span class="linenum">6442</span></a>          }
<a name="l6443"><span class="linenum">6443</span></a>  
<a name="l6444"><span class="linenum">6444</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l6445"><span class="linenum">6445</span></a>  
<a name="l6446"><span class="linenum">6446</span></a>  <span class="comment">        // Get the flags to check if it is locked.</span>
<a name="l6447"><span class="linenum">6447</span></a>          if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> &amp;&amp; <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('locked')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/locked.html">locked</a>) {
<a name="l6448"><span class="linenum">6448</span></a>              <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('submissionslocked', 'assign');
<a name="l6449"><span class="linenum">6449</span></a>              return true;
<a name="l6450"><span class="linenum">6450</span></a>          }
<a name="l6451"><span class="linenum">6451</span></a>  
<a name="l6452"><span class="linenum">6452</span></a>          <a class="var it32216" onMouseOver="hilite(32216)" onMouseOut="lolite()" onClick="logVariable('pluginerror')" href="../../_variables/pluginerror.html">$pluginerror</a> = false;
<a name="l6453"><span class="linenum">6453</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l6454"><span class="linenum">6454</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l6455"><span class="linenum">6455</span></a>                  if (!<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('save')" href="../../_functions/save.html" onMouseOver="funcPopup(event,'save')">save</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l6456"><span class="linenum">6456</span></a>                      <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>[] = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_error')" href="../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>();
<a name="l6457"><span class="linenum">6457</span></a>                      <a class="var it32216" onMouseOver="hilite(32216)" onMouseOut="lolite()" onClick="logVariable('pluginerror')" href="../../_variables/pluginerror.html">$pluginerror</a> = true;
<a name="l6458"><span class="linenum">6458</span></a>                  }
<a name="l6459"><span class="linenum">6459</span></a>              }
<a name="l6460"><span class="linenum">6460</span></a>          }
<a name="l6461"><span class="linenum">6461</span></a>  
<a name="l6462"><span class="linenum">6462</span></a>          <a class="var it32217" onMouseOver="hilite(32217)" onMouseOut="lolite()" onClick="logVariable('allempty')" href="../../_variables/allempty.html">$allempty</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submission_empty')" href="../../_functions/submission_empty.html" onMouseOver="funcPopup(event,'submission_empty')">submission_empty</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l6463"><span class="linenum">6463</span></a>          if (<a class="var it32216" onMouseOver="hilite(32216)" onMouseOut="lolite()" onClick="logVariable('pluginerror')" href="../../_variables/pluginerror.html">$pluginerror</a> || <a class="var it32217" onMouseOver="hilite(32217)" onMouseOut="lolite()" onClick="logVariable('allempty')" href="../../_variables/allempty.html">$allempty</a>) {
<a name="l6464"><span class="linenum">6464</span></a>              if (<a class="var it32217" onMouseOver="hilite(32217)" onMouseOut="lolite()" onClick="logVariable('allempty')" href="../../_variables/allempty.html">$allempty</a>) {
<a name="l6465"><span class="linenum">6465</span></a>                  <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionempty', 'mod_assign');
<a name="l6466"><span class="linenum">6466</span></a>              }
<a name="l6467"><span class="linenum">6467</span></a>              return false;
<a name="l6468"><span class="linenum">6468</span></a>          }
<a name="l6469"><span class="linenum">6469</span></a>  
<a name="l6470"><span class="linenum">6470</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_submission')" href="../../_functions/update_submission.html" onMouseOver="funcPopup(event,'update_submission')">update_submission</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>);
<a name="l6471"><span class="linenum">6471</span></a>  
<a name="l6472"><span class="linenum">6472</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a> &amp;&amp; !<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('requireallteammemberssubmit')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/requireallteammemberssubmit.html">requireallteammemberssubmit</a>) {
<a name="l6473"><span class="linenum">6473</span></a>              <a class="var it15265" onMouseOver="hilite(15265)" onMouseOut="lolite()" onClick="logVariable('team')" href="../../_variables/team.html">$team</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group_members')" href="../../_functions/get_submission_group_members.html" onMouseOver="funcPopup(event,'get_submission_group_members')">get_submission_group_members</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('groupid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>, true);
<a name="l6474"><span class="linenum">6474</span></a>  
<a name="l6475"><span class="linenum">6475</span></a>              foreach (<a class="var it15265" onMouseOver="hilite(15265)" onMouseOut="lolite()" onClick="logVariable('team')" href="../../_variables/team.html">$team</a> as <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>) {
<a name="l6476"><span class="linenum">6476</span></a>                  if (<a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('id')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> != <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l6477"><span class="linenum">6477</span></a>                      <a class="var it32187" onMouseOver="hilite(32187)" onMouseOut="lolite()" onClick="logVariable('membersubmission')" href="../../_variables/membersubmission.html">$membersubmission</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l6478"><span class="linenum">6478</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_submission')" href="../../_functions/update_submission.html" onMouseOver="funcPopup(event,'update_submission')">update_submission</a>(<a class="var it32187" onMouseOver="hilite(32187)" onMouseOut="lolite()" onClick="logVariable('membersubmission')" href="../../_variables/membersubmission.html">$membersubmission</a>, <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('id')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, true, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>);
<a name="l6479"><span class="linenum">6479</span></a>                  }
<a name="l6480"><span class="linenum">6480</span></a>              }
<a name="l6481"><span class="linenum">6481</span></a>          }
<a name="l6482"><span class="linenum">6482</span></a>  
<a name="l6483"><span class="linenum">6483</span></a>  <span class="comment">        // Logging.</span>
<a name="l6484"><span class="linenum">6484</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('submissionstatement')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/submissionstatement.html">submissionstatement</a>) &amp;&amp; (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l6485"><span class="linenum">6485</span></a>              \mod_assign\event\<a class="class" onClick="logClass('statement_accepted')" href="../../_classes/statement_accepted.html" onMouseOver="classPopup(event,'statement_accepted')">statement_accepted</a>::<a class="function" onClick="logFunction('create_from_submission')" href="../../_functions/create_from_submission.html" onMouseOver="funcPopup(event,'create_from_submission')">create_from_submission</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l6486"><span class="linenum">6486</span></a>          }
<a name="l6487"><span class="linenum">6487</span></a>  
<a name="l6488"><span class="linenum">6488</span></a>          <a class="var it767" onMouseOver="hilite(767)" onMouseOut="lolite()" onClick="logVariable('complete')" href="../../_variables/complete.html">$complete</a> = <a class="constant" onClick="logConstant('COMPLETION_INCOMPLETE')" href="../../_constants/COMPLETION_INCOMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_INCOMPLETE')">COMPLETION_INCOMPLETE</a>;
<a name="l6489"><span class="linenum">6489</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> == <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>) {
<a name="l6490"><span class="linenum">6490</span></a>              <a class="var it767" onMouseOver="hilite(767)" onMouseOut="lolite()" onClick="logVariable('complete')" href="../../_variables/complete.html">$complete</a> = <a class="constant" onClick="logConstant('COMPLETION_COMPLETE')" href="../../_constants/COMPLETION_COMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_COMPLETE')">COMPLETION_COMPLETE</a>;
<a name="l6491"><span class="linenum">6491</span></a>          }
<a name="l6492"><span class="linenum">6492</span></a>          <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>());
<a name="l6493"><span class="linenum">6493</span></a>          if (<a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()) &amp;&amp; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('completionsubmit')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/completionsubmit.html">completionsubmit</a>) {
<a name="l6494"><span class="linenum">6494</span></a>              <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('update_state')" href="../../_functions/update_state.html" onMouseOver="funcPopup(event,'update_state')">update_state</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), <a class="var it767" onMouseOver="hilite(767)" onMouseOut="lolite()" onClick="logVariable('complete')" href="../../_variables/complete.html">$complete</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l6495"><span class="linenum">6495</span></a>          }
<a name="l6496"><span class="linenum">6496</span></a>  
<a name="l6497"><span class="linenum">6497</span></a>          if (!<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('submissiondrafts')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/submissiondrafts.html">submissiondrafts</a>) {
<a name="l6498"><span class="linenum">6498</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('notify_student_submission_receipt')" href="../../_functions/notify_student_submission_receipt.html" onMouseOver="funcPopup(event,'notify_student_submission_receipt')">notify_student_submission_receipt</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l6499"><span class="linenum">6499</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('notify_graders')" href="../../_functions/notify_graders.html" onMouseOver="funcPopup(event,'notify_graders')">notify_graders</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l6500"><span class="linenum">6500</span></a>              \mod_assign\event\<a class="class" onClick="logClass('assessable_submitted')" href="../../_classes/assessable_submitted.html" onMouseOver="classPopup(event,'assessable_submitted')">assessable_submitted</a>::<a class="function" onClick="logFunction('create_from_submission')" href="../../_functions/create_from_submission.html" onMouseOver="funcPopup(event,'create_from_submission')">create_from_submission</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, true)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l6501"><span class="linenum">6501</span></a>          }
<a name="l6502"><span class="linenum">6502</span></a>          return true;
<a name="l6503"><span class="linenum">6503</span></a>      }
<a name="l6504"><span class="linenum">6504</span></a>  
<a name="l6505"><span class="linenum">6505</span></a>      <span class="comment">/**</span>
<a name="l6506"><span class="linenum">6506</span></a>  <span class="comment">     * Save assignment submission.</span>
<a name="l6507"><span class="linenum">6507</span></a>  <span class="comment">     *</span>
<a name="l6508"><span class="linenum">6508</span></a>  <span class="comment">     * @param  moodleform $mform</span>
<a name="l6509"><span class="linenum">6509</span></a>  <span class="comment">     * @param  array $notices Any error messages that should be shown</span>
<a name="l6510"><span class="linenum">6510</span></a>  <span class="comment">     *                        to the user at the top of the edit submission form.</span>
<a name="l6511"><span class="linenum">6511</span></a>  <span class="comment">     * @return bool</span>
<a name="l6512"><span class="linenum">6512</span></a>  <span class="comment">     */</span>
<a name="l6513"><span class="linenum">6513</span></a>      protected function <a class="function" onClick="logFunction('process_save_submission')" href="../../_functions/process_save_submission.html" onMouseOver="funcPopup(event,'process_save_submission')">process_save_submission</a>(&amp;<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, &amp;<a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>) {
<a name="l6514"><span class="linenum">6514</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l6515"><span class="linenum">6515</span></a>  
<a name="l6516"><span class="linenum">6516</span></a>  <span class="comment">        // Include submission form.</span>
<a name="l6517"><span class="linenum">6517</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/submission_form.php.html">/mod/assign/submission_form.php</a>');
<a name="l6518"><span class="linenum">6518</span></a>  
<a name="l6519"><span class="linenum">6519</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('userid', <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l6520"><span class="linenum">6520</span></a>  <span class="comment">        // Need submit permission to submit an assignment.</span>
<a name="l6521"><span class="linenum">6521</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l6522"><span class="linenum">6522</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('submissions_open')" href="../../_functions/submissions_open.html" onMouseOver="funcPopup(event,'submissions_open')">submissions_open</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l6523"><span class="linenum">6523</span></a>              <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('duedatereached', 'assign');
<a name="l6524"><span class="linenum">6524</span></a>              return false;
<a name="l6525"><span class="linenum">6525</span></a>          }
<a name="l6526"><span class="linenum">6526</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l6527"><span class="linenum">6527</span></a>  
<a name="l6528"><span class="linenum">6528</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l6529"><span class="linenum">6529</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l6530"><span class="linenum">6530</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_submission_form')" href="../../_classes/mod_assign_submission_form.html" onMouseOver="classPopup(event,'mod_assign_submission_form')">mod_assign_submission_form</a>(null, array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>));
<a name="l6531"><span class="linenum">6531</span></a>          if (<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('is_cancelled')" href="../../_functions/is_cancelled.html" onMouseOver="funcPopup(event,'is_cancelled')">is_cancelled</a>()) {
<a name="l6532"><span class="linenum">6532</span></a>              return true;
<a name="l6533"><span class="linenum">6533</span></a>          }
<a name="l6534"><span class="linenum">6534</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l6535"><span class="linenum">6535</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_submission')" href="../../_functions/save_submission.html" onMouseOver="funcPopup(event,'save_submission')">save_submission</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it19951" onMouseOver="hilite(19951)" onMouseOut="lolite()" onClick="logVariable('notices')" href="../../_variables/notices.html">$notices</a>);
<a name="l6536"><span class="linenum">6536</span></a>          }
<a name="l6537"><span class="linenum">6537</span></a>          return false;
<a name="l6538"><span class="linenum">6538</span></a>      }
<a name="l6539"><span class="linenum">6539</span></a>  
<a name="l6540"><span class="linenum">6540</span></a>  
<a name="l6541"><span class="linenum">6541</span></a>      <span class="comment">/**</span>
<a name="l6542"><span class="linenum">6542</span></a>  <span class="comment">     * Determine if this users grade can be edited.</span>
<a name="l6543"><span class="linenum">6543</span></a>  <span class="comment">     *</span>
<a name="l6544"><span class="linenum">6544</span></a>  <span class="comment">     * @param int $userid - The student userid</span>
<a name="l6545"><span class="linenum">6545</span></a>  <span class="comment">     * @param bool $checkworkflow - whether to include a check for the workflow state.</span>
<a name="l6546"><span class="linenum">6546</span></a>  <span class="comment">     * @return bool $gradingdisabled</span>
<a name="l6547"><span class="linenum">6547</span></a>  <span class="comment">     */</span>
<a name="l6548"><span class="linenum">6548</span></a>      public function <a class="function" onClick="logFunction('grading_disabled')" href="../../_functions/grading_disabled.html" onMouseOver="funcPopup(event,'grading_disabled')">grading_disabled</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it32218" onMouseOver="hilite(32218)" onMouseOut="lolite()" onClick="logVariable('checkworkflow')" href="../../_variables/checkworkflow.html">$checkworkflow</a>=true) {
<a name="l6549"><span class="linenum">6549</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l6550"><span class="linenum">6550</span></a>          if (<a class="var it32218" onMouseOver="hilite(32218)" onMouseOut="lolite()" onClick="logVariable('checkworkflow')" href="../../_variables/checkworkflow.html">$checkworkflow</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow) {
<a name="l6551"><span class="linenum">6551</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l6552"><span class="linenum">6552</span></a>              <a class="var it32141" onMouseOver="hilite(32141)" onMouseOut="lolite()" onClick="logVariable('validstates')" href="../../_variables/validstates.html">$validstates</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_marking_workflow_states_for_current_user')" href="../../_functions/get_marking_workflow_states_for_current_user.html" onMouseOver="funcPopup(event,'get_marking_workflow_states_for_current_user')">get_marking_workflow_states_for_current_user</a>();
<a name="l6553"><span class="linenum">6553</span></a>              if (!empty(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) &amp;&amp; !empty(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>) &amp;&amp; !<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>, <a class="var it32141" onMouseOver="hilite(32141)" onMouseOut="lolite()" onClick="logVariable('validstates')" href="../../_variables/validstates.html">$validstates</a>)) {
<a name="l6554"><span class="linenum">6554</span></a>                  return true;
<a name="l6555"><span class="linenum">6555</span></a>              }
<a name="l6556"><span class="linenum">6556</span></a>          }
<a name="l6557"><span class="linenum">6557</span></a>          <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l6558"><span class="linenum">6558</span></a>                                          'mod',
<a name="l6559"><span class="linenum">6559</span></a>                                          'assign',
<a name="l6560"><span class="linenum">6560</span></a>                                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id,
<a name="l6561"><span class="linenum">6561</span></a>                                          array(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l6562"><span class="linenum">6562</span></a>          if (!<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>) {
<a name="l6563"><span class="linenum">6563</span></a>              return false;
<a name="l6564"><span class="linenum">6564</span></a>          }
<a name="l6565"><span class="linenum">6565</span></a>  
<a name="l6566"><span class="linenum">6566</span></a>          if (!isset(<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>])) {
<a name="l6567"><span class="linenum">6567</span></a>              return false;
<a name="l6568"><span class="linenum">6568</span></a>          }
<a name="l6569"><span class="linenum">6569</span></a>          <a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a> = <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;locked ||
<a name="l6570"><span class="linenum">6570</span></a>                             <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;overridden;
<a name="l6571"><span class="linenum">6571</span></a>          return <a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a>;
<a name="l6572"><span class="linenum">6572</span></a>      }
<a name="l6573"><span class="linenum">6573</span></a>  
<a name="l6574"><span class="linenum">6574</span></a>  
<a name="l6575"><span class="linenum">6575</span></a>      <span class="comment">/**</span>
<a name="l6576"><span class="linenum">6576</span></a>  <span class="comment">     * Get an instance of a grading form if advanced grading is enabled.</span>
<a name="l6577"><span class="linenum">6577</span></a>  <span class="comment">     * This is specific to the assignment, marker and student.</span>
<a name="l6578"><span class="linenum">6578</span></a>  <span class="comment">     *</span>
<a name="l6579"><span class="linenum">6579</span></a>  <span class="comment">     * @param int $userid - The student userid</span>
<a name="l6580"><span class="linenum">6580</span></a>  <span class="comment">     * @param stdClass|false $grade - The grade record</span>
<a name="l6581"><span class="linenum">6581</span></a>  <span class="comment">     * @param bool $gradingdisabled</span>
<a name="l6582"><span class="linenum">6582</span></a>  <span class="comment">     * @return mixed gradingform_instance|null $gradinginstance</span>
<a name="l6583"><span class="linenum">6583</span></a>  <span class="comment">     */</span>
<a name="l6584"><span class="linenum">6584</span></a>      protected function <a class="function" onClick="logFunction('get_grading_instance')" href="../../_functions/get_grading_instance.html" onMouseOver="funcPopup(event,'get_grading_instance')">get_grading_instance</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a>) {
<a name="l6585"><span class="linenum">6585</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l6586"><span class="linenum">6586</span></a>  
<a name="l6587"><span class="linenum">6587</span></a>          <a class="var it32219" onMouseOver="hilite(32219)" onMouseOut="lolite()" onClick="logVariable('grademenu')" href="../../_variables/grademenu.html">$grademenu</a> = <a class="function" onClick="logFunction('make_grades_menu')" href="../../_functions/make_grades_menu.html" onMouseOver="funcPopup(event,'make_grades_menu')">make_grades_menu</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade);
<a name="l6588"><span class="linenum">6588</span></a>          <a class="var it29220" onMouseOver="hilite(29220)" onMouseOut="lolite()" onClick="logVariable('allowgradedecimals')" href="../../_variables/allowgradedecimals.html">$allowgradedecimals</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade &gt; 0;
<a name="l6589"><span class="linenum">6589</span></a>  
<a name="l6590"><span class="linenum">6590</span></a>          <a class="var it32220" onMouseOver="hilite(32220)" onMouseOut="lolite()" onClick="logVariable('advancedgradingwarning')" href="../../_variables/advancedgradingwarning.html">$advancedgradingwarning</a> = false;
<a name="l6591"><span class="linenum">6591</span></a>          <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a> = <a class="function" onClick="logFunction('get_grading_manager')" href="../../_functions/get_grading_manager.html" onMouseOver="funcPopup(event,'get_grading_manager')">get_grading_manager</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, 'mod_assign', 'submissions');
<a name="l6592"><span class="linenum">6592</span></a>          <a class="var it32221" onMouseOver="hilite(32221)" onMouseOut="lolite()" onClick="logVariable('gradinginstance')" href="../../_variables/gradinginstance.html">$gradinginstance</a> = null;
<a name="l6593"><span class="linenum">6593</span></a>          if (<a class="var it20395" onMouseOver="hilite(20395)" onMouseOut="lolite()" onClick="logVariable('gradingmethod')" href="../../_variables/gradingmethod.html">$gradingmethod</a> = <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a>-&gt;<a class="function" onClick="logFunction('get_active_method')" href="../../_functions/get_active_method.html" onMouseOver="funcPopup(event,'get_active_method')">get_active_method</a>()) {
<a name="l6594"><span class="linenum">6594</span></a>              <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a> = <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('gradingmanager')" href="../../_variables/gradingmanager.html">$gradingmanager</a>-&gt;<a class="function" onClick="logFunction('get_controller')" href="../../_functions/get_controller.html" onMouseOver="funcPopup(event,'get_controller')">get_controller</a>(<a class="var it20395" onMouseOver="hilite(20395)" onMouseOut="lolite()" onClick="logVariable('gradingmethod')" href="../../_variables/gradingmethod.html">$gradingmethod</a>);
<a name="l6595"><span class="linenum">6595</span></a>              if (<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('is_form_available')" href="../../_functions/is_form_available.html" onMouseOver="funcPopup(event,'is_form_available')">is_form_available</a>()) {
<a name="l6596"><span class="linenum">6596</span></a>                  <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a> = null;
<a name="l6597"><span class="linenum">6597</span></a>                  if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l6598"><span class="linenum">6598</span></a>                      <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a> = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('id')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l6599"><span class="linenum">6599</span></a>                  }
<a name="l6600"><span class="linenum">6600</span></a>                  if (<a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a> &amp;&amp; <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>) {
<a name="l6601"><span class="linenum">6601</span></a>                      <a class="var it32221" onMouseOver="hilite(32221)" onMouseOut="lolite()" onClick="logVariable('gradinginstance')" href="../../_variables/gradinginstance.html">$gradinginstance</a> = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_current_instance')" href="../../_functions/get_current_instance.html" onMouseOver="funcPopup(event,'get_current_instance')">get_current_instance</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>);
<a name="l6602"><span class="linenum">6602</span></a>                  } else if (!<a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a>) {
<a name="l6603"><span class="linenum">6603</span></a>                      <a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../../_variables/instanceid.html">$instanceid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('advancedgradinginstanceid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l6604"><span class="linenum">6604</span></a>                      <a class="var it32221" onMouseOver="hilite(32221)" onMouseOut="lolite()" onClick="logVariable('gradinginstance')" href="../../_variables/gradinginstance.html">$gradinginstance</a> = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_or_create_instance')" href="../../_functions/get_or_create_instance.html" onMouseOver="funcPopup(event,'get_or_create_instance')">get_or_create_instance</a>(<a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../../_variables/instanceid.html">$instanceid</a>,
<a name="l6605"><span class="linenum">6605</span></a>                                                                             <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l6606"><span class="linenum">6606</span></a>                                                                             <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>);
<a name="l6607"><span class="linenum">6607</span></a>                  }
<a name="l6608"><span class="linenum">6608</span></a>              } else {
<a name="l6609"><span class="linenum">6609</span></a>                  <a class="var it32220" onMouseOver="hilite(32220)" onMouseOut="lolite()" onClick="logVariable('advancedgradingwarning')" href="../../_variables/advancedgradingwarning.html">$advancedgradingwarning</a> = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('form_unavailable_notification')" href="../../_functions/form_unavailable_notification.html" onMouseOver="funcPopup(event,'form_unavailable_notification')">form_unavailable_notification</a>();
<a name="l6610"><span class="linenum">6610</span></a>              }
<a name="l6611"><span class="linenum">6611</span></a>          }
<a name="l6612"><span class="linenum">6612</span></a>          if (<a class="var it32221" onMouseOver="hilite(32221)" onMouseOut="lolite()" onClick="logVariable('gradinginstance')" href="../../_variables/gradinginstance.html">$gradinginstance</a>) {
<a name="l6613"><span class="linenum">6613</span></a>              <a class="var it32221" onMouseOver="hilite(32221)" onMouseOut="lolite()" onClick="logVariable('gradinginstance')" href="../../_variables/gradinginstance.html">$gradinginstance</a>-&gt;<a class="function" onClick="logFunction('get_controller')" href="../../_functions/get_controller.html" onMouseOver="funcPopup(event,'get_controller')">get_controller</a>()-&gt;<a class="function" onClick="logFunction('set_grade_range')" href="../../_functions/set_grade_range.html" onMouseOver="funcPopup(event,'set_grade_range')">set_grade_range</a>(<a class="var it32219" onMouseOver="hilite(32219)" onMouseOut="lolite()" onClick="logVariable('grademenu')" href="../../_variables/grademenu.html">$grademenu</a>, <a class="var it29220" onMouseOver="hilite(29220)" onMouseOut="lolite()" onClick="logVariable('allowgradedecimals')" href="../../_variables/allowgradedecimals.html">$allowgradedecimals</a>);
<a name="l6614"><span class="linenum">6614</span></a>          }
<a name="l6615"><span class="linenum">6615</span></a>          return <a class="var it32221" onMouseOver="hilite(32221)" onMouseOut="lolite()" onClick="logVariable('gradinginstance')" href="../../_variables/gradinginstance.html">$gradinginstance</a>;
<a name="l6616"><span class="linenum">6616</span></a>      }
<a name="l6617"><span class="linenum">6617</span></a>  
<a name="l6618"><span class="linenum">6618</span></a>      <span class="comment">/**</span>
<a name="l6619"><span class="linenum">6619</span></a>  <span class="comment">     * Add elements to grade form.</span>
<a name="l6620"><span class="linenum">6620</span></a>  <span class="comment">     *</span>
<a name="l6621"><span class="linenum">6621</span></a>  <span class="comment">     * @param MoodleQuickForm $mform</span>
<a name="l6622"><span class="linenum">6622</span></a>  <span class="comment">     * @param stdClass $data</span>
<a name="l6623"><span class="linenum">6623</span></a>  <span class="comment">     * @param array $params</span>
<a name="l6624"><span class="linenum">6624</span></a>  <span class="comment">     * @return void</span>
<a name="l6625"><span class="linenum">6625</span></a>  <span class="comment">     */</span>
<a name="l6626"><span class="linenum">6626</span></a>      public function <a class="function" onClick="logFunction('add_grade_form_elements')" href="../../_functions/add_grade_form_elements.html" onMouseOver="funcPopup(event,'add_grade_form_elements')">add_grade_form_elements</a>(MoodleQuickForm <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, stdClass <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) {
<a name="l6627"><span class="linenum">6627</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>;
<a name="l6628"><span class="linenum">6628</span></a>          <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l6629"><span class="linenum">6629</span></a>  
<a name="l6630"><span class="linenum">6630</span></a>          <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a> = isset(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['rownum']) ? <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['rownum'] : 0;
<a name="l6631"><span class="linenum">6631</span></a>          <a class="var it490" onMouseOver="hilite(490)" onMouseOut="lolite()" onClick="logVariable('last')" href="../../_variables/last.html">$last</a> = isset(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['last']) ? <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['last'] : true;
<a name="l6632"><span class="linenum">6632</span></a>          <a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a> = isset(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['useridlistid']) ? <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['useridlistid'] : 0;
<a name="l6633"><span class="linenum">6633</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = isset(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['userid']) ? <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['userid'] : 0;
<a name="l6634"><span class="linenum">6634</span></a>          <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> = isset(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['attemptnumber']) ? <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['attemptnumber'] : 0;
<a name="l6635"><span class="linenum">6635</span></a>          <a class="var it32222" onMouseOver="hilite(32222)" onMouseOut="lolite()" onClick="logVariable('gradingpanel')" href="../../_variables/gradingpanel.html">$gradingpanel</a> = !empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['gradingpanel']);
<a name="l6636"><span class="linenum">6636</span></a>          <a class="var it32223" onMouseOver="hilite(32223)" onMouseOut="lolite()" onClick="logVariable('bothids')" href="../../_variables/bothids.html">$bothids</a> = (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> &amp;&amp; <a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a>);
<a name="l6637"><span class="linenum">6637</span></a>  
<a name="l6638"><span class="linenum">6638</span></a>          if (!<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> || <a class="var it32223" onMouseOver="hilite(32223)" onMouseOut="lolite()" onClick="logVariable('bothids')" href="../../_variables/bothids.html">$bothids</a>) {
<a name="l6639"><span class="linenum">6639</span></a>              <a class="var it32158" onMouseOver="hilite(32158)" onMouseOut="lolite()" onClick="logVariable('useridlistkey')" href="../../_variables/useridlistkey.html">$useridlistkey</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_useridlist_key')" href="../../_functions/get_useridlist_key.html" onMouseOver="funcPopup(event,'get_useridlist_key')">get_useridlist_key</a>(<a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a>);
<a name="l6640"><span class="linenum">6640</span></a>              if (empty(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('mod_assign_useridlist')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/mod_assign_useridlist.html">mod_assign_useridlist</a>[<a class="var it32158" onMouseOver="hilite(32158)" onMouseOut="lolite()" onClick="logVariable('useridlistkey')" href="../../_variables/useridlistkey.html">$useridlistkey</a>])) {
<a name="l6641"><span class="linenum">6641</span></a>                  <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('mod_assign_useridlist')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/mod_assign_useridlist.html">mod_assign_useridlist</a>[<a class="var it32158" onMouseOver="hilite(32158)" onMouseOut="lolite()" onClick="logVariable('useridlistkey')" href="../../_variables/useridlistkey.html">$useridlistkey</a>] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_grading_userid_list')" href="../../_functions/get_grading_userid_list.html" onMouseOver="funcPopup(event,'get_grading_userid_list')">get_grading_userid_list</a>();
<a name="l6642"><span class="linenum">6642</span></a>              }
<a name="l6643"><span class="linenum">6643</span></a>              <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> = <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('mod_assign_useridlist')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/mod_assign_useridlist.html">mod_assign_useridlist</a>[<a class="var it32158" onMouseOver="hilite(32158)" onMouseOut="lolite()" onClick="logVariable('useridlistkey')" href="../../_variables/useridlistkey.html">$useridlistkey</a>];
<a name="l6644"><span class="linenum">6644</span></a>          } else {
<a name="l6645"><span class="linenum">6645</span></a>              <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> = array(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l6646"><span class="linenum">6646</span></a>              <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a> = 0;
<a name="l6647"><span class="linenum">6647</span></a>              <a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a> = '';
<a name="l6648"><span class="linenum">6648</span></a>          }
<a name="l6649"><span class="linenum">6649</span></a>  
<a name="l6650"><span class="linenum">6650</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a>[<a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a>];
<a name="l6651"><span class="linenum">6651</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>);
<a name="l6652"><span class="linenum">6652</span></a>  
<a name="l6653"><span class="linenum">6653</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = null;
<a name="l6654"><span class="linenum">6654</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l6655"><span class="linenum">6655</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 0, false, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>);
<a name="l6656"><span class="linenum">6656</span></a>          } else {
<a name="l6657"><span class="linenum">6657</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>);
<a name="l6658"><span class="linenum">6658</span></a>          }
<a name="l6659"><span class="linenum">6659</span></a>  
<a name="l6660"><span class="linenum">6660</span></a>  <span class="comment">        // Add advanced grading.</span>
<a name="l6661"><span class="linenum">6661</span></a>          <a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('grading_disabled')" href="../../_functions/grading_disabled.html" onMouseOver="funcPopup(event,'grading_disabled')">grading_disabled</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l6662"><span class="linenum">6662</span></a>          <a class="var it32221" onMouseOver="hilite(32221)" onMouseOut="lolite()" onClick="logVariable('gradinginstance')" href="../../_variables/gradinginstance.html">$gradinginstance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_grading_instance')" href="../../_functions/get_grading_instance.html" onMouseOver="funcPopup(event,'get_grading_instance')">get_grading_instance</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a>);
<a name="l6663"><span class="linenum">6663</span></a>  
<a name="l6664"><span class="linenum">6664</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'gradeheader', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade'));
<a name="l6665"><span class="linenum">6665</span></a>          if (<a class="var it32221" onMouseOver="hilite(32221)" onMouseOut="lolite()" onClick="logVariable('gradinginstance')" href="../../_variables/gradinginstance.html">$gradinginstance</a>) {
<a name="l6666"><span class="linenum">6666</span></a>              <a class="var it32224" onMouseOver="hilite(32224)" onMouseOut="lolite()" onClick="logVariable('gradingelement')" href="../../_variables/gradingelement.html">$gradingelement</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('grading',
<a name="l6667"><span class="linenum">6667</span></a>                                                   'advancedgrading',
<a name="l6668"><span class="linenum">6668</span></a>                                                   <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade').':',
<a name="l6669"><span class="linenum">6669</span></a>                                                   array('gradinginstance' =&gt; <a class="var it32221" onMouseOver="hilite(32221)" onMouseOut="lolite()" onClick="logVariable('gradinginstance')" href="../../_variables/gradinginstance.html">$gradinginstance</a>));
<a name="l6670"><span class="linenum">6670</span></a>              if (<a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a>) {
<a name="l6671"><span class="linenum">6671</span></a>                  <a class="var it32224" onMouseOver="hilite(32224)" onMouseOut="lolite()" onClick="logVariable('gradingelement')" href="../../_variables/gradingelement.html">$gradingelement</a>-&gt;<a class="function" onClick="logFunction('freeze')" href="../../_functions/freeze.html" onMouseOver="funcPopup(event,'freeze')">freeze</a>();
<a name="l6672"><span class="linenum">6672</span></a>              } else {
<a name="l6673"><span class="linenum">6673</span></a>                  <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'advancedgradinginstanceid', <a class="var it32221" onMouseOver="hilite(32221)" onMouseOut="lolite()" onClick="logVariable('gradinginstance')" href="../../_variables/gradinginstance.html">$gradinginstance</a>-&gt;<a class="function" onClick="logFunction('get_id')" href="../../_functions/get_id.html" onMouseOver="funcPopup(event,'get_id')">get_id</a>());
<a name="l6674"><span class="linenum">6674</span></a>                  <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('advancedgradinginstanceid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l6675"><span class="linenum">6675</span></a>              }
<a name="l6676"><span class="linenum">6676</span></a>          } else {
<a name="l6677"><span class="linenum">6677</span></a>  <span class="comment">            // Use simple direct grading.</span>
<a name="l6678"><span class="linenum">6678</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade &gt; 0) {
<a name="l6679"><span class="linenum">6679</span></a>                  <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradeoutof', 'assign', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade);
<a name="l6680"><span class="linenum">6680</span></a>                  if (!<a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a>) {
<a name="l6681"><span class="linenum">6681</span></a>                      <a class="var it32224" onMouseOver="hilite(32224)" onMouseOut="lolite()" onClick="logVariable('gradingelement')" href="../../_variables/gradingelement.html">$gradingelement</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('text', 'grade', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l6682"><span class="linenum">6682</span></a>                      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addHelpButton')" href="../../_functions/addhelpbutton.html" onMouseOver="funcPopup(event,'addhelpbutton')">addHelpButton</a>('grade', 'gradeoutofhelp', 'assign');
<a name="l6683"><span class="linenum">6683</span></a>                      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('grade', <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l6684"><span class="linenum">6684</span></a>                  } else {
<a name="l6685"><span class="linenum">6685</span></a>                      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'grade', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l6686"><span class="linenum">6686</span></a>                      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('hardFreeze')" href="../../_functions/hardfreeze.html" onMouseOver="funcPopup(event,'hardfreeze')">hardFreeze</a>('grade');
<a name="l6687"><span class="linenum">6687</span></a>                      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('grade', <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l6688"><span class="linenum">6688</span></a>                      <a class="var it32225" onMouseOver="hilite(32225)" onMouseOut="lolite()" onClick="logVariable('strgradelocked')" href="../../_variables/strgradelocked.html">$strgradelocked</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradelocked', 'assign');
<a name="l6689"><span class="linenum">6689</span></a>                      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('static', 'gradedisabled', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it32225" onMouseOver="hilite(32225)" onMouseOut="lolite()" onClick="logVariable('strgradelocked')" href="../../_variables/strgradelocked.html">$strgradelocked</a>);
<a name="l6690"><span class="linenum">6690</span></a>                      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addHelpButton')" href="../../_functions/addhelpbutton.html" onMouseOver="funcPopup(event,'addhelpbutton')">addHelpButton</a>('gradedisabled', 'gradeoutofhelp', 'assign');
<a name="l6691"><span class="linenum">6691</span></a>                  }
<a name="l6692"><span class="linenum">6692</span></a>              } else {
<a name="l6693"><span class="linenum">6693</span></a>                  <a class="var it32219" onMouseOver="hilite(32219)" onMouseOut="lolite()" onClick="logVariable('grademenu')" href="../../_variables/grademenu.html">$grademenu</a> = array(-1 =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;nograde&quot;)) + <a class="function" onClick="logFunction('make_grades_menu')" href="../../_functions/make_grades_menu.html" onMouseOver="funcPopup(event,'make_grades_menu')">make_grades_menu</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;grade);
<a name="l6694"><span class="linenum">6694</span></a>                  if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32219" onMouseOver="hilite(32219)" onMouseOut="lolite()" onClick="logVariable('grademenu')" href="../../_variables/grademenu.html">$grademenu</a>) &gt; 1) {
<a name="l6695"><span class="linenum">6695</span></a>                      <a class="var it32224" onMouseOver="hilite(32224)" onMouseOut="lolite()" onClick="logVariable('gradingelement')" href="../../_variables/gradingelement.html">$gradingelement</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('select', 'grade', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade') . ':', <a class="var it32219" onMouseOver="hilite(32219)" onMouseOut="lolite()" onClick="logVariable('grademenu')" href="../../_variables/grademenu.html">$grademenu</a>);
<a name="l6696"><span class="linenum">6696</span></a>  
<a name="l6697"><span class="linenum">6697</span></a>  <span class="comment">                    // The grade is already formatted with format_float so it needs to be converted back to an integer.</span>
<a name="l6698"><span class="linenum">6698</span></a>                      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('grade')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>)) {
<a name="l6699"><span class="linenum">6699</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('grade')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = (int)<a class="function" onClick="logFunction('unformat_float')" href="../../_functions/unformat_float.html" onMouseOver="funcPopup(event,'unformat_float')">unformat_float</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('grade')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>);
<a name="l6700"><span class="linenum">6700</span></a>                      }
<a name="l6701"><span class="linenum">6701</span></a>                      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('grade', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l6702"><span class="linenum">6702</span></a>                      if (<a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a>) {
<a name="l6703"><span class="linenum">6703</span></a>                          <a class="var it32224" onMouseOver="hilite(32224)" onMouseOut="lolite()" onClick="logVariable('gradingelement')" href="../../_variables/gradingelement.html">$gradingelement</a>-&gt;<a class="function" onClick="logFunction('freeze')" href="../../_functions/freeze.html" onMouseOver="funcPopup(event,'freeze')">freeze</a>();
<a name="l6704"><span class="linenum">6704</span></a>                      }
<a name="l6705"><span class="linenum">6705</span></a>                  }
<a name="l6706"><span class="linenum">6706</span></a>              }
<a name="l6707"><span class="linenum">6707</span></a>          }
<a name="l6708"><span class="linenum">6708</span></a>  
<a name="l6709"><span class="linenum">6709</span></a>          <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l6710"><span class="linenum">6710</span></a>                                          'mod',
<a name="l6711"><span class="linenum">6711</span></a>                                          'assign',
<a name="l6712"><span class="linenum">6712</span></a>                                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id,
<a name="l6713"><span class="linenum">6713</span></a>                                          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l6714"><span class="linenum">6714</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableoutcomes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/enableoutcomes.html">enableoutcomes</a>)) {
<a name="l6715"><span class="linenum">6715</span></a>              foreach (<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('outcomes')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/outcomes.html">outcomes</a> as <a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a> =&gt; <a class="var it3376" onMouseOver="hilite(3376)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../../_variables/outcome.html">$outcome</a>) {
<a name="l6716"><span class="linenum">6716</span></a>                  <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = <a class="function" onClick="logFunction('make_grades_menu')" href="../../_functions/make_grades_menu.html" onMouseOver="funcPopup(event,'make_grades_menu')">make_grades_menu</a>(-<a class="var it3376" onMouseOver="hilite(3376)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('scaleid')" class="var it43346" onMouseOver="hilite(43346)" onMouseOut="lolite()" href="../../_variables/scaleid.html">scaleid</a>);
<a name="l6717"><span class="linenum">6717</span></a>                  if (<a class="var it3376" onMouseOver="hilite(3376)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('grades')" class="var it43346" onMouseOver="hilite(43346)" onMouseOut="lolite()" href="../../_variables/grades.html">grades</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;locked) {
<a name="l6718"><span class="linenum">6718</span></a>                      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>[0] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nooutcome', 'grades');
<a name="l6719"><span class="linenum">6719</span></a>                      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('static',
<a name="l6720"><span class="linenum">6720</span></a>                                         'outcome_' . <a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a> . '[' . <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> . ']',
<a name="l6721"><span class="linenum">6721</span></a>                                         <a class="var it3376" onMouseOver="hilite(3376)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('name')" class="var it43346" onMouseOver="hilite(43346)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> . ':',
<a name="l6722"><span class="linenum">6722</span></a>                                         <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>[<a class="var it3376" onMouseOver="hilite(3376)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('grades')" class="var it43346" onMouseOver="hilite(43346)" onMouseOut="lolite()" href="../../_variables/grades.html">grades</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;grade]);
<a name="l6723"><span class="linenum">6723</span></a>                  } else {
<a name="l6724"><span class="linenum">6724</span></a>                      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>[''] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nooutcome', 'grades');
<a name="l6725"><span class="linenum">6725</span></a>                      <a class="var it493" onMouseOver="hilite(493)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../../_variables/attributes.html">$attributes</a> = array('id' =&gt; 'menuoutcome_' . <a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a> );
<a name="l6726"><span class="linenum">6726</span></a>                      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('select',
<a name="l6727"><span class="linenum">6727</span></a>                                         'outcome_' . <a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a> . '[' . <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> . ']',
<a name="l6728"><span class="linenum">6728</span></a>                                         <a class="var it3376" onMouseOver="hilite(3376)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('name')" class="var it43346" onMouseOver="hilite(43346)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>.':',
<a name="l6729"><span class="linenum">6729</span></a>                                         <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>,
<a name="l6730"><span class="linenum">6730</span></a>                                         <a class="var it493" onMouseOver="hilite(493)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../../_variables/attributes.html">$attributes</a>);
<a name="l6731"><span class="linenum">6731</span></a>                      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('outcome_' . <a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a> . '[' . <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> . ']', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l6732"><span class="linenum">6732</span></a>                      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>('outcome_' . <a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a> . '[' . <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> . ']',
<a name="l6733"><span class="linenum">6733</span></a>                                         <a class="var it3376" onMouseOver="hilite(3376)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('grades')" class="var it43346" onMouseOver="hilite(43346)" onMouseOut="lolite()" href="../../_variables/grades.html">grades</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;grade);
<a name="l6734"><span class="linenum">6734</span></a>                  }
<a name="l6735"><span class="linenum">6735</span></a>              }
<a name="l6736"><span class="linenum">6736</span></a>          }
<a name="l6737"><span class="linenum">6737</span></a>  
<a name="l6738"><span class="linenum">6738</span></a>          <a class="var it32226" onMouseOver="hilite(32226)" onMouseOut="lolite()" onClick="logVariable('capabilitylist')" href="../../_variables/capabilitylist.html">$capabilitylist</a> = array('gradereport/grader:view', 'moodle/grade:viewall');
<a name="l6739"><span class="linenum">6739</span></a>          if (<a class="function" onClick="logFunction('has_all_capabilities')" href="../../_functions/has_all_capabilities.html" onMouseOver="funcPopup(event,'has_all_capabilities')">has_all_capabilities</a>(<a class="var it32226" onMouseOver="hilite(32226)" onMouseOut="lolite()" onClick="logVariable('capabilitylist')" href="../../_variables/capabilitylist.html">$capabilitylist</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>())) {
<a name="l6740"><span class="linenum">6740</span></a>              <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../../_variables/urlparams.html">$urlparams</a> = array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id);
<a name="l6741"><span class="linenum">6741</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../grade/report/grader/index.php.html">/grade/report/grader/index.php</a>', <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../../_variables/urlparams.html">$urlparams</a>);
<a name="l6742"><span class="linenum">6742</span></a>              <a class="var it14959" onMouseOver="hilite(14959)" onMouseOut="lolite()" onClick="logVariable('usergrade')" href="../../_variables/usergrade.html">$usergrade</a> = '-';
<a name="l6743"><span class="linenum">6743</span></a>              if (isset(<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;str_grade)) {
<a name="l6744"><span class="linenum">6744</span></a>                  <a class="var it14959" onMouseOver="hilite(14959)" onMouseOut="lolite()" onClick="logVariable('usergrade')" href="../../_variables/usergrade.html">$usergrade</a> = <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;str_grade;
<a name="l6745"><span class="linenum">6745</span></a>              }
<a name="l6746"><span class="linenum">6746</span></a>              <a class="var it32227" onMouseOver="hilite(32227)" onMouseOut="lolite()" onClick="logVariable('gradestring')" href="../../_variables/gradestring.html">$gradestring</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>()-&gt;<a class="function" onClick="logFunction('action_link')" href="../../_functions/action_link.html" onMouseOver="funcPopup(event,'action_link')">action_link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it14959" onMouseOver="hilite(14959)" onMouseOut="lolite()" onClick="logVariable('usergrade')" href="../../_variables/usergrade.html">$usergrade</a>);
<a name="l6747"><span class="linenum">6747</span></a>          } else {
<a name="l6748"><span class="linenum">6748</span></a>              <a class="var it14959" onMouseOver="hilite(14959)" onMouseOut="lolite()" onClick="logVariable('usergrade')" href="../../_variables/usergrade.html">$usergrade</a> = '-';
<a name="l6749"><span class="linenum">6749</span></a>              if (isset(<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]) &amp;&amp;
<a name="l6750"><span class="linenum">6750</span></a>                      !<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;hidden) {
<a name="l6751"><span class="linenum">6751</span></a>                  <a class="var it14959" onMouseOver="hilite(14959)" onMouseOut="lolite()" onClick="logVariable('usergrade')" href="../../_variables/usergrade.html">$usergrade</a> = <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('items')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;str_grade;
<a name="l6752"><span class="linenum">6752</span></a>              }
<a name="l6753"><span class="linenum">6753</span></a>              <a class="var it32227" onMouseOver="hilite(32227)" onMouseOut="lolite()" onClick="logVariable('gradestring')" href="../../_variables/gradestring.html">$gradestring</a> = <a class="var it14959" onMouseOver="hilite(14959)" onMouseOut="lolite()" onClick="logVariable('usergrade')" href="../../_variables/usergrade.html">$usergrade</a>;
<a name="l6754"><span class="linenum">6754</span></a>          }
<a name="l6755"><span class="linenum">6755</span></a>  
<a name="l6756"><span class="linenum">6756</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow) {
<a name="l6757"><span class="linenum">6757</span></a>              <a class="var it1335" onMouseOver="hilite(1335)" onMouseOut="lolite()" onClick="logVariable('states')" href="../../_variables/states.html">$states</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_marking_workflow_states_for_current_user')" href="../../_functions/get_marking_workflow_states_for_current_user.html" onMouseOver="funcPopup(event,'get_marking_workflow_states_for_current_user')">get_marking_workflow_states_for_current_user</a>();
<a name="l6758"><span class="linenum">6758</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array('' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('markingworkflowstatenotmarked', 'assign')) + <a class="var it1335" onMouseOver="hilite(1335)" onMouseOut="lolite()" onClick="logVariable('states')" href="../../_variables/states.html">$states</a>;
<a name="l6759"><span class="linenum">6759</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('select', 'workflowstate', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('markingworkflowstate', 'assign'), <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l6760"><span class="linenum">6760</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addHelpButton')" href="../../_functions/addhelpbutton.html" onMouseOver="funcPopup(event,'addhelpbutton')">addHelpButton</a>('workflowstate', 'markingworkflowstate', 'assign');
<a name="l6761"><span class="linenum">6761</span></a>          }
<a name="l6762"><span class="linenum">6762</span></a>  
<a name="l6763"><span class="linenum">6763</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow &amp;&amp;
<a name="l6764"><span class="linenum">6764</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingallocation &amp;&amp;
<a name="l6765"><span class="linenum">6765</span></a>              <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:manageallocations', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l6766"><span class="linenum">6766</span></a>  
<a name="l6767"><span class="linenum">6767</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="function" onClick="logFunction('users_order_by_sql')" href="../../_functions/users_order_by_sql.html" onMouseOver="funcPopup(event,'users_order_by_sql')">users_order_by_sql</a>();
<a name="l6768"><span class="linenum">6768</span></a>              <a class="var it15515" onMouseOver="hilite(15515)" onMouseOut="lolite()" onClick="logVariable('markers')" href="../../_variables/markers.html">$markers</a> = <a class="function" onClick="logFunction('get_users_by_capability')" href="../../_functions/get_users_by_capability.html" onMouseOver="funcPopup(event,'get_users_by_capability')">get_users_by_capability</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, 'mod/assign:grade', '', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l6769"><span class="linenum">6769</span></a>              <a class="var it30993" onMouseOver="hilite(30993)" onMouseOut="lolite()" onClick="logVariable('markerlist')" href="../../_variables/markerlist.html">$markerlist</a> = array('' =&gt;  <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('choosemarker', 'assign'));
<a name="l6770"><span class="linenum">6770</span></a>              foreach (<a class="var it15515" onMouseOver="hilite(15515)" onMouseOut="lolite()" onClick="logVariable('markers')" href="../../_variables/markers.html">$markers</a> as <a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>) {
<a name="l6771"><span class="linenum">6771</span></a>                  <a class="var it30993" onMouseOver="hilite(30993)" onMouseOut="lolite()" onClick="logVariable('markerlist')" href="../../_variables/markerlist.html">$markerlist</a>[<a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>-&gt;<a onClick="logVariable('id')" class="var it43495" onMouseOver="hilite(43495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>);
<a name="l6772"><span class="linenum">6772</span></a>              }
<a name="l6773"><span class="linenum">6773</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('select', 'allocatedmarker', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('allocatedmarker', 'assign'), <a class="var it30993" onMouseOver="hilite(30993)" onMouseOut="lolite()" onClick="logVariable('markerlist')" href="../../_variables/markerlist.html">$markerlist</a>);
<a name="l6774"><span class="linenum">6774</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addHelpButton')" href="../../_functions/addhelpbutton.html" onMouseOver="funcPopup(event,'addhelpbutton')">addHelpButton</a>('allocatedmarker', 'allocatedmarker', 'assign');
<a name="l6775"><span class="linenum">6775</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('allocatedmarker', 'workflowstate', 'eq', ASSIGN_MARKING_WORKFLOW_STATE_READYFORREVIEW);
<a name="l6776"><span class="linenum">6776</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('allocatedmarker', 'workflowstate', 'eq', <a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW')">ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW</a>);
<a name="l6777"><span class="linenum">6777</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('allocatedmarker', 'workflowstate', 'eq', ASSIGN_MARKING_WORKFLOW_STATE_READYFORRELEASE);
<a name="l6778"><span class="linenum">6778</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('allocatedmarker', 'workflowstate', 'eq', <a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_RELEASED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')">ASSIGN_MARKING_WORKFLOW_STATE_RELEASED</a>);
<a name="l6779"><span class="linenum">6779</span></a>          }
<a name="l6780"><span class="linenum">6780</span></a>          <a class="var it32227" onMouseOver="hilite(32227)" onMouseOut="lolite()" onClick="logVariable('gradestring')" href="../../_variables/gradestring.html">$gradestring</a> = '&lt;span class=&quot;currentgrade&quot;&gt;' . <a class="var it32227" onMouseOver="hilite(32227)" onMouseOut="lolite()" onClick="logVariable('gradestring')" href="../../_variables/gradestring.html">$gradestring</a> . '&lt;/span&gt;';
<a name="l6781"><span class="linenum">6781</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('static', 'currentgrade', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('currentgrade', 'assign'), <a class="var it32227" onMouseOver="hilite(32227)" onMouseOut="lolite()" onClick="logVariable('gradestring')" href="../../_variables/gradestring.html">$gradestring</a>);
<a name="l6782"><span class="linenum">6782</span></a>  
<a name="l6783"><span class="linenum">6783</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a>) &gt; 1) {
<a name="l6784"><span class="linenum">6784</span></a>              <a class="var it20341" onMouseOver="hilite(20341)" onMouseOut="lolite()" onClick="logVariable('strparams')" href="../../_variables/strparams.html">$strparams</a> = array('current'=&gt;<a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a>+1, 'total'=&gt;<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a>));
<a name="l6785"><span class="linenum">6785</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('outof', 'assign', <a class="var it20341" onMouseOver="hilite(20341)" onMouseOut="lolite()" onClick="logVariable('strparams')" href="../../_variables/strparams.html">$strparams</a>);
<a name="l6786"><span class="linenum">6786</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('static', 'gradingstudent', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradingstudent', 'assign'), <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l6787"><span class="linenum">6787</span></a>          }
<a name="l6788"><span class="linenum">6788</span></a>  
<a name="l6789"><span class="linenum">6789</span></a>  <span class="comment">        // Let feedback plugins add elements to the grading form.</span>
<a name="l6790"><span class="linenum">6790</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_plugin_grade_elements')" href="../../_functions/add_plugin_grade_elements.html" onMouseOver="funcPopup(event,'add_plugin_grade_elements')">add_plugin_grade_elements</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l6791"><span class="linenum">6791</span></a>  
<a name="l6792"><span class="linenum">6792</span></a>  <span class="comment">        // Hidden params.</span>
<a name="l6793"><span class="linenum">6793</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'id', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id);
<a name="l6794"><span class="linenum">6794</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('id', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l6795"><span class="linenum">6795</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'rownum', <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a>);
<a name="l6796"><span class="linenum">6796</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('rownum', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l6797"><span class="linenum">6797</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setConstant')" href="../../_functions/setconstant.html" onMouseOver="funcPopup(event,'setconstant')">setConstant</a>('rownum', <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a>);
<a name="l6798"><span class="linenum">6798</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'useridlistid', <a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a>);
<a name="l6799"><span class="linenum">6799</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('useridlistid', <a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>);
<a name="l6800"><span class="linenum">6800</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'attemptnumber', <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>);
<a name="l6801"><span class="linenum">6801</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('attemptnumber', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l6802"><span class="linenum">6802</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'ajax', <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('ajax', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>));
<a name="l6803"><span class="linenum">6803</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('ajax', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l6804"><span class="linenum">6804</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'userid', <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('userid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>));
<a name="l6805"><span class="linenum">6805</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('userid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l6806"><span class="linenum">6806</span></a>  
<a name="l6807"><span class="linenum">6807</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l6808"><span class="linenum">6808</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'groupsubmissionsettings', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('groupsubmissionsettings', 'assign'));
<a name="l6809"><span class="linenum">6809</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('selectyesno', 'applytoall', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('applytoteam', 'assign'));
<a name="l6810"><span class="linenum">6810</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>('applytoall', 1);
<a name="l6811"><span class="linenum">6811</span></a>          }
<a name="l6812"><span class="linenum">6812</span></a>  
<a name="l6813"><span class="linenum">6813</span></a>  <span class="comment">        // Do not show if we are editing a previous attempt.</span>
<a name="l6814"><span class="linenum">6814</span></a>          if (<a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> == -1 &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;attemptreopenmethod != <a class="constant" onClick="logConstant('ASSIGN_ATTEMPT_REOPEN_METHOD_NONE')" href="../../_constants/ASSIGN_ATTEMPT_REOPEN_METHOD_NONE.html" onMouseOver="constPopup(event,'ASSIGN_ATTEMPT_REOPEN_METHOD_NONE')">ASSIGN_ATTEMPT_REOPEN_METHOD_NONE</a>) {
<a name="l6815"><span class="linenum">6815</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'attemptsettings', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('attemptsettings', 'assign'));
<a name="l6816"><span class="linenum">6816</span></a>              <a class="var it25237" onMouseOver="hilite(25237)" onMouseOut="lolite()" onClick="logVariable('attemptreopenmethod')" href="../../_variables/attemptreopenmethod.html">$attemptreopenmethod</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('attemptreopenmethod_' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;attemptreopenmethod, 'assign');
<a name="l6817"><span class="linenum">6817</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('static', 'attemptreopenmethod', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('attemptreopenmethod', 'assign'), <a class="var it25237" onMouseOver="hilite(25237)" onMouseOut="lolite()" onClick="logVariable('attemptreopenmethod')" href="../../_variables/attemptreopenmethod.html">$attemptreopenmethod</a>);
<a name="l6818"><span class="linenum">6818</span></a>  
<a name="l6819"><span class="linenum">6819</span></a>              <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> = 0;
<a name="l6820"><span class="linenum">6820</span></a>              if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l6821"><span class="linenum">6821</span></a>                  <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>;
<a name="l6822"><span class="linenum">6822</span></a>              }
<a name="l6823"><span class="linenum">6823</span></a>              <a class="var it1237" onMouseOver="hilite(1237)" onMouseOut="lolite()" onClick="logVariable('maxattempts')" href="../../_variables/maxattempts.html">$maxattempts</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;maxattempts;
<a name="l6824"><span class="linenum">6824</span></a>              if (<a class="var it1237" onMouseOver="hilite(1237)" onMouseOut="lolite()" onClick="logVariable('maxattempts')" href="../../_variables/maxattempts.html">$maxattempts</a> == <a class="constant" onClick="logConstant('ASSIGN_UNLIMITED_ATTEMPTS')" href="../../_constants/ASSIGN_UNLIMITED_ATTEMPTS.html" onMouseOver="constPopup(event,'ASSIGN_UNLIMITED_ATTEMPTS')">ASSIGN_UNLIMITED_ATTEMPTS</a>) {
<a name="l6825"><span class="linenum">6825</span></a>                  <a class="var it1237" onMouseOver="hilite(1237)" onMouseOut="lolite()" onClick="logVariable('maxattempts')" href="../../_variables/maxattempts.html">$maxattempts</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('unlimitedattempts', 'assign');
<a name="l6826"><span class="linenum">6826</span></a>              }
<a name="l6827"><span class="linenum">6827</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addelement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addelement</a>('static', 'maxattemptslabel', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('maxattempts', 'assign'), <a class="var it1237" onMouseOver="hilite(1237)" onMouseOut="lolite()" onClick="logVariable('maxattempts')" href="../../_variables/maxattempts.html">$maxattempts</a>);
<a name="l6828"><span class="linenum">6828</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addelement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addelement</a>('static', 'attemptnumberlabel', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('attemptnumber', 'assign'), <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> + 1);
<a name="l6829"><span class="linenum">6829</span></a>  
<a name="l6830"><span class="linenum">6830</span></a>              <a class="var it31006" onMouseOver="hilite(31006)" onMouseOut="lolite()" onClick="logVariable('ismanual')" href="../../_variables/ismanual.html">$ismanual</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;attemptreopenmethod == <a class="constant" onClick="logConstant('ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL')" href="../../_constants/ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL.html" onMouseOver="constPopup(event,'ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL')">ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL</a>;
<a name="l6831"><span class="linenum">6831</span></a>              <a class="var it32228" onMouseOver="hilite(32228)" onMouseOut="lolite()" onClick="logVariable('issubmission')" href="../../_variables/issubmission.html">$issubmission</a> = !empty(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l6832"><span class="linenum">6832</span></a>              <a class="var it31009" onMouseOver="hilite(31009)" onMouseOut="lolite()" onClick="logVariable('isunlimited')" href="../../_variables/isunlimited.html">$isunlimited</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;maxattempts == <a class="constant" onClick="logConstant('ASSIGN_UNLIMITED_ATTEMPTS')" href="../../_constants/ASSIGN_UNLIMITED_ATTEMPTS.html" onMouseOver="constPopup(event,'ASSIGN_UNLIMITED_ATTEMPTS')">ASSIGN_UNLIMITED_ATTEMPTS</a>;
<a name="l6833"><span class="linenum">6833</span></a>              <a class="var it32229" onMouseOver="hilite(32229)" onMouseOut="lolite()" onClick="logVariable('islessthanmaxattempts')" href="../../_variables/islessthanmaxattempts.html">$islessthanmaxattempts</a> = <a class="var it32228" onMouseOver="hilite(32228)" onMouseOut="lolite()" onClick="logVariable('issubmission')" href="../../_variables/issubmission.html">$issubmission</a> &amp;&amp; (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> &lt; (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;maxattempts-1));
<a name="l6834"><span class="linenum">6834</span></a>  
<a name="l6835"><span class="linenum">6835</span></a>              if (<a class="var it31006" onMouseOver="hilite(31006)" onMouseOut="lolite()" onClick="logVariable('ismanual')" href="../../_variables/ismanual.html">$ismanual</a> &amp;&amp; (!<a class="var it32228" onMouseOver="hilite(32228)" onMouseOut="lolite()" onClick="logVariable('issubmission')" href="../../_variables/issubmission.html">$issubmission</a> || <a class="var it31009" onMouseOver="hilite(31009)" onMouseOut="lolite()" onClick="logVariable('isunlimited')" href="../../_variables/isunlimited.html">$isunlimited</a> || <a class="var it32229" onMouseOver="hilite(32229)" onMouseOut="lolite()" onClick="logVariable('islessthanmaxattempts')" href="../../_variables/islessthanmaxattempts.html">$islessthanmaxattempts</a>)) {
<a name="l6836"><span class="linenum">6836</span></a>                  <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('selectyesno', 'addattempt', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addattempt', 'assign'));
<a name="l6837"><span class="linenum">6837</span></a>                  <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>('addattempt', 0);
<a name="l6838"><span class="linenum">6838</span></a>              }
<a name="l6839"><span class="linenum">6839</span></a>          }
<a name="l6840"><span class="linenum">6840</span></a>          if (!<a class="var it32222" onMouseOver="hilite(32222)" onMouseOut="lolite()" onClick="logVariable('gradingpanel')" href="../../_variables/gradingpanel.html">$gradingpanel</a>) {
<a name="l6841"><span class="linenum">6841</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('selectyesno', 'sendstudentnotifications', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('sendstudentnotifications', 'assign'));
<a name="l6842"><span class="linenum">6842</span></a>          } else {
<a name="l6843"><span class="linenum">6843</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'sendstudentnotifications', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('sendstudentnotifications', 'assign'));
<a name="l6844"><span class="linenum">6844</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('sendstudentnotifications', <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l6845"><span class="linenum">6845</span></a>          }
<a name="l6846"><span class="linenum">6846</span></a>  <span class="comment">        // Get assignment visibility information for student.</span>
<a name="l6847"><span class="linenum">6847</span></a>          <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>-&gt;<a onClick="logVariable('course')" class="var it43241" onMouseOver="hilite(43241)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l6848"><span class="linenum">6848</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_cm')" href="../../_functions/get_cm.html" onMouseOver="funcPopup(event,'get_cm')">get_cm</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id);
<a name="l6849"><span class="linenum">6849</span></a>  
<a name="l6850"><span class="linenum">6850</span></a>  <span class="comment">        // Don't allow notification to be sent if the student can't access the assignment,</span>
<a name="l6851"><span class="linenum">6851</span></a>  <span class="comment">        // or until in &quot;Released&quot; state if using marking workflow.</span>
<a name="l6852"><span class="linenum">6852</span></a>          if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('uservisible')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/uservisible.html">uservisible</a>) {
<a name="l6853"><span class="linenum">6853</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>('sendstudentnotifications', 0);
<a name="l6854"><span class="linenum">6854</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('freeze')" href="../../_functions/freeze.html" onMouseOver="funcPopup(event,'freeze')">freeze</a>('sendstudentnotifications');
<a name="l6855"><span class="linenum">6855</span></a>          } else if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow) {
<a name="l6856"><span class="linenum">6856</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>('sendstudentnotifications', 0);
<a name="l6857"><span class="linenum">6857</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('sendstudentnotifications', 'workflowstate', 'neq', <a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_RELEASED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')">ASSIGN_MARKING_WORKFLOW_STATE_RELEASED</a>);
<a name="l6858"><span class="linenum">6858</span></a>          } else {
<a name="l6859"><span class="linenum">6859</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>('sendstudentnotifications', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;sendstudentnotifications);
<a name="l6860"><span class="linenum">6860</span></a>          }
<a name="l6861"><span class="linenum">6861</span></a>  
<a name="l6862"><span class="linenum">6862</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'action', 'submitgrade');
<a name="l6863"><span class="linenum">6863</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('action', <a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>);
<a name="l6864"><span class="linenum">6864</span></a>  
<a name="l6865"><span class="linenum">6865</span></a>          if (!<a class="var it32222" onMouseOver="hilite(32222)" onMouseOut="lolite()" onClick="logVariable('gradingpanel')" href="../../_variables/gradingpanel.html">$gradingpanel</a>) {
<a name="l6866"><span class="linenum">6866</span></a>  
<a name="l6867"><span class="linenum">6867</span></a>              <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('buttonarray')" href="../../_variables/buttonarray.html">$buttonarray</a> = array();
<a name="l6868"><span class="linenum">6868</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savechanges', 'assign');
<a name="l6869"><span class="linenum">6869</span></a>              <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('buttonarray')" href="../../_variables/buttonarray.html">$buttonarray</a>[] = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('createElement')" href="../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('submit', 'savegrade', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l6870"><span class="linenum">6870</span></a>              if (!<a class="var it490" onMouseOver="hilite(490)" onMouseOut="lolite()" onClick="logVariable('last')" href="../../_variables/last.html">$last</a>) {
<a name="l6871"><span class="linenum">6871</span></a>                  <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savenext', 'assign');
<a name="l6872"><span class="linenum">6872</span></a>                  <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('buttonarray')" href="../../_variables/buttonarray.html">$buttonarray</a>[] = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('createElement')" href="../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('submit', 'saveandshownext', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l6873"><span class="linenum">6873</span></a>              }
<a name="l6874"><span class="linenum">6874</span></a>              <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('buttonarray')" href="../../_variables/buttonarray.html">$buttonarray</a>[] = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('createElement')" href="../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('cancel', 'cancelbutton', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cancel'));
<a name="l6875"><span class="linenum">6875</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addGroup')" href="../../_functions/addgroup.html" onMouseOver="funcPopup(event,'addgroup')">addGroup</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('buttonarray')" href="../../_variables/buttonarray.html">$buttonarray</a>, 'buttonar', '', array(' '), false);
<a name="l6876"><span class="linenum">6876</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('closeHeaderBefore')" href="../../_functions/closeheaderbefore.html" onMouseOver="funcPopup(event,'closeheaderbefore')">closeHeaderBefore</a>('buttonar');
<a name="l6877"><span class="linenum">6877</span></a>              <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('buttonarray')" href="../../_variables/buttonarray.html">$buttonarray</a> = array();
<a name="l6878"><span class="linenum">6878</span></a>  
<a name="l6879"><span class="linenum">6879</span></a>              if (<a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a> &gt; 0) {
<a name="l6880"><span class="linenum">6880</span></a>                  <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('previous', 'assign');
<a name="l6881"><span class="linenum">6881</span></a>                  <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('buttonarray')" href="../../_variables/buttonarray.html">$buttonarray</a>[] = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('createElement')" href="../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('submit', 'nosaveandprevious', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l6882"><span class="linenum">6882</span></a>              }
<a name="l6883"><span class="linenum">6883</span></a>  
<a name="l6884"><span class="linenum">6884</span></a>              if (!<a class="var it490" onMouseOver="hilite(490)" onMouseOut="lolite()" onClick="logVariable('last')" href="../../_variables/last.html">$last</a>) {
<a name="l6885"><span class="linenum">6885</span></a>                  <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nosavebutnext', 'assign');
<a name="l6886"><span class="linenum">6886</span></a>                  <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('buttonarray')" href="../../_variables/buttonarray.html">$buttonarray</a>[] = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('createElement')" href="../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('submit', 'nosaveandnext', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l6887"><span class="linenum">6887</span></a>              }
<a name="l6888"><span class="linenum">6888</span></a>              if (!empty(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('buttonarray')" href="../../_variables/buttonarray.html">$buttonarray</a>)) {
<a name="l6889"><span class="linenum">6889</span></a>                  <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addGroup')" href="../../_functions/addgroup.html" onMouseOver="funcPopup(event,'addgroup')">addGroup</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('buttonarray')" href="../../_variables/buttonarray.html">$buttonarray</a>, 'navar', '', array(' '), false);
<a name="l6890"><span class="linenum">6890</span></a>              }
<a name="l6891"><span class="linenum">6891</span></a>          }
<a name="l6892"><span class="linenum">6892</span></a>  <span class="comment">        // The grading form does not work well with shortforms.</span>
<a name="l6893"><span class="linenum">6893</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setDisableShortforms')" href="../../_functions/setdisableshortforms.html" onMouseOver="funcPopup(event,'setdisableshortforms')">setDisableShortforms</a>();
<a name="l6894"><span class="linenum">6894</span></a>      }
<a name="l6895"><span class="linenum">6895</span></a>  
<a name="l6896"><span class="linenum">6896</span></a>      <span class="comment">/**</span>
<a name="l6897"><span class="linenum">6897</span></a>  <span class="comment">     * Add elements in submission plugin form.</span>
<a name="l6898"><span class="linenum">6898</span></a>  <span class="comment">     *</span>
<a name="l6899"><span class="linenum">6899</span></a>  <span class="comment">     * @param mixed $submission stdClass|null</span>
<a name="l6900"><span class="linenum">6900</span></a>  <span class="comment">     * @param MoodleQuickForm $mform</span>
<a name="l6901"><span class="linenum">6901</span></a>  <span class="comment">     * @param stdClass $data</span>
<a name="l6902"><span class="linenum">6902</span></a>  <span class="comment">     * @param int $userid The current userid (same as $USER-&gt;id)</span>
<a name="l6903"><span class="linenum">6903</span></a>  <span class="comment">     * @return void</span>
<a name="l6904"><span class="linenum">6904</span></a>  <span class="comment">     */</span>
<a name="l6905"><span class="linenum">6905</span></a>      protected function <a class="function" onClick="logFunction('add_plugin_submission_elements')" href="../../_functions/add_plugin_submission_elements.html" onMouseOver="funcPopup(event,'add_plugin_submission_elements')">add_plugin_submission_elements</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>,
<a name="l6906"><span class="linenum">6906</span></a>                                                      MoodleQuickForm <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>,
<a name="l6907"><span class="linenum">6907</span></a>                                                      stdClass <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>,
<a name="l6908"><span class="linenum">6908</span></a>                                                      <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l6909"><span class="linenum">6909</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l6910"><span class="linenum">6910</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('allow_submissions')" href="../../_functions/allow_submissions.html" onMouseOver="funcPopup(event,'allow_submissions')">allow_submissions</a>()) {
<a name="l6911"><span class="linenum">6911</span></a>                  <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_form_elements_for_user')" href="../../_functions/get_form_elements_for_user.html" onMouseOver="funcPopup(event,'get_form_elements_for_user')">get_form_elements_for_user</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l6912"><span class="linenum">6912</span></a>              }
<a name="l6913"><span class="linenum">6913</span></a>          }
<a name="l6914"><span class="linenum">6914</span></a>      }
<a name="l6915"><span class="linenum">6915</span></a>  
<a name="l6916"><span class="linenum">6916</span></a>      <span class="comment">/**</span>
<a name="l6917"><span class="linenum">6917</span></a>  <span class="comment">     * Check if feedback plugins installed are enabled.</span>
<a name="l6918"><span class="linenum">6918</span></a>  <span class="comment">     *</span>
<a name="l6919"><span class="linenum">6919</span></a>  <span class="comment">     * @return bool</span>
<a name="l6920"><span class="linenum">6920</span></a>  <span class="comment">     */</span>
<a name="l6921"><span class="linenum">6921</span></a>      public function <a class="function" onClick="logFunction('is_any_feedback_plugin_enabled')" href="../../_functions/is_any_feedback_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_feedback_plugin_enabled')">is_any_feedback_plugin_enabled</a>() {
<a name="l6922"><span class="linenum">6922</span></a>          if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a>['any_feedback_plugin_enabled'])) {
<a name="l6923"><span class="linenum">6923</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a>['any_feedback_plugin_enabled'] = false;
<a name="l6924"><span class="linenum">6924</span></a>              foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l6925"><span class="linenum">6925</span></a>                  if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l6926"><span class="linenum">6926</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a>['any_feedback_plugin_enabled'] = true;
<a name="l6927"><span class="linenum">6927</span></a>                      break;
<a name="l6928"><span class="linenum">6928</span></a>                  }
<a name="l6929"><span class="linenum">6929</span></a>              }
<a name="l6930"><span class="linenum">6930</span></a>          }
<a name="l6931"><span class="linenum">6931</span></a>  
<a name="l6932"><span class="linenum">6932</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a>['any_feedback_plugin_enabled'];
<a name="l6933"><span class="linenum">6933</span></a>  
<a name="l6934"><span class="linenum">6934</span></a>      }
<a name="l6935"><span class="linenum">6935</span></a>  
<a name="l6936"><span class="linenum">6936</span></a>      <span class="comment">/**</span>
<a name="l6937"><span class="linenum">6937</span></a>  <span class="comment">     * Check if submission plugins installed are enabled.</span>
<a name="l6938"><span class="linenum">6938</span></a>  <span class="comment">     *</span>
<a name="l6939"><span class="linenum">6939</span></a>  <span class="comment">     * @return bool</span>
<a name="l6940"><span class="linenum">6940</span></a>  <span class="comment">     */</span>
<a name="l6941"><span class="linenum">6941</span></a>      public function <a class="function" onClick="logFunction('is_any_submission_plugin_enabled')" href="../../_functions/is_any_submission_plugin_enabled.html" onMouseOver="funcPopup(event,'is_any_submission_plugin_enabled')">is_any_submission_plugin_enabled</a>() {
<a name="l6942"><span class="linenum">6942</span></a>          if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a>['any_submission_plugin_enabled'])) {
<a name="l6943"><span class="linenum">6943</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a>['any_submission_plugin_enabled'] = false;
<a name="l6944"><span class="linenum">6944</span></a>              foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l6945"><span class="linenum">6945</span></a>                  if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('allow_submissions')" href="../../_functions/allow_submissions.html" onMouseOver="funcPopup(event,'allow_submissions')">allow_submissions</a>()) {
<a name="l6946"><span class="linenum">6946</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a>['any_submission_plugin_enabled'] = true;
<a name="l6947"><span class="linenum">6947</span></a>                      break;
<a name="l6948"><span class="linenum">6948</span></a>                  }
<a name="l6949"><span class="linenum">6949</span></a>              }
<a name="l6950"><span class="linenum">6950</span></a>          }
<a name="l6951"><span class="linenum">6951</span></a>  
<a name="l6952"><span class="linenum">6952</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cache.html">cache</a>['any_submission_plugin_enabled'];
<a name="l6953"><span class="linenum">6953</span></a>  
<a name="l6954"><span class="linenum">6954</span></a>      }
<a name="l6955"><span class="linenum">6955</span></a>  
<a name="l6956"><span class="linenum">6956</span></a>      <span class="comment">/**</span>
<a name="l6957"><span class="linenum">6957</span></a>  <span class="comment">     * Add elements to submission form.</span>
<a name="l6958"><span class="linenum">6958</span></a>  <span class="comment">     * @param MoodleQuickForm $mform</span>
<a name="l6959"><span class="linenum">6959</span></a>  <span class="comment">     * @param stdClass $data</span>
<a name="l6960"><span class="linenum">6960</span></a>  <span class="comment">     * @return void</span>
<a name="l6961"><span class="linenum">6961</span></a>  <span class="comment">     */</span>
<a name="l6962"><span class="linenum">6962</span></a>      public function <a class="function" onClick="logFunction('add_submission_form_elements')" href="../../_functions/add_submission_form_elements.html" onMouseOver="funcPopup(event,'add_submission_form_elements')">add_submission_form_elements</a>(MoodleQuickForm <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, stdClass <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l6963"><span class="linenum">6963</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l6964"><span class="linenum">6964</span></a>  
<a name="l6965"><span class="linenum">6965</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l6966"><span class="linenum">6966</span></a>  <span class="comment">        // Team submissions.</span>
<a name="l6967"><span class="linenum">6967</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l6968"><span class="linenum">6968</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 0, false);
<a name="l6969"><span class="linenum">6969</span></a>          } else {
<a name="l6970"><span class="linenum">6970</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l6971"><span class="linenum">6971</span></a>          }
<a name="l6972"><span class="linenum">6972</span></a>  
<a name="l6973"><span class="linenum">6973</span></a>  <span class="comment">        // Submission statement.</span>
<a name="l6974"><span class="linenum">6974</span></a>          <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>();
<a name="l6975"><span class="linenum">6975</span></a>  
<a name="l6976"><span class="linenum">6976</span></a>          <a class="var it26817" onMouseOver="hilite(26817)" onMouseOut="lolite()" onClick="logVariable('requiresubmissionstatement')" href="../../_variables/requiresubmissionstatement.html">$requiresubmissionstatement</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;requiresubmissionstatement &amp;&amp;
<a name="l6977"><span class="linenum">6977</span></a>                                         !empty(<a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('submissionstatement')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/submissionstatement.html">submissionstatement</a>);
<a name="l6978"><span class="linenum">6978</span></a>  
<a name="l6979"><span class="linenum">6979</span></a>          <a class="var it32230" onMouseOver="hilite(32230)" onMouseOut="lolite()" onClick="logVariable('draftsenabled')" href="../../_variables/draftsenabled.html">$draftsenabled</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;submissiondrafts;
<a name="l6980"><span class="linenum">6980</span></a>  
<a name="l6981"><span class="linenum">6981</span></a>  <span class="comment">        // Only show submission statement if we are editing our own submission.</span>
<a name="l6982"><span class="linenum">6982</span></a>          if (<a class="var it26817" onMouseOver="hilite(26817)" onMouseOut="lolite()" onClick="logVariable('requiresubmissionstatement')" href="../../_variables/requiresubmissionstatement.html">$requiresubmissionstatement</a> &amp;&amp; !<a class="var it32230" onMouseOver="hilite(32230)" onMouseOut="lolite()" onClick="logVariable('draftsenabled')" href="../../_variables/draftsenabled.html">$draftsenabled</a> &amp;&amp; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l6983"><span class="linenum">6983</span></a>  
<a name="l6984"><span class="linenum">6984</span></a>              <a class="var it19952" onMouseOver="hilite(19952)" onMouseOut="lolite()" onClick="logVariable('submissionstatement')" href="../../_variables/submissionstatement.html">$submissionstatement</a> = '';
<a name="l6985"><span class="linenum">6985</span></a>              if (!empty(<a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('submissionstatement')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/submissionstatement.html">submissionstatement</a>)) {
<a name="l6986"><span class="linenum">6986</span></a>  <span class="comment">                // Format the submission statement before its sent. We turn off para because this is going within</span>
<a name="l6987"><span class="linenum">6987</span></a>  <span class="comment">                // a form element.</span>
<a name="l6988"><span class="linenum">6988</span></a>                  <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array(
<a name="l6989"><span class="linenum">6989</span></a>                      'context' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l6990"><span class="linenum">6990</span></a>                      'para' =&gt; false
<a name="l6991"><span class="linenum">6991</span></a>                  );
<a name="l6992"><span class="linenum">6992</span></a>                  <a class="var it19952" onMouseOver="hilite(19952)" onMouseOut="lolite()" onClick="logVariable('submissionstatement')" href="../../_variables/submissionstatement.html">$submissionstatement</a> = <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('submissionstatement')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/submissionstatement.html">submissionstatement</a>, <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l6993"><span class="linenum">6993</span></a>              }
<a name="l6994"><span class="linenum">6994</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', 'submissionstatement', '', <a class="var it19952" onMouseOver="hilite(19952)" onMouseOut="lolite()" onClick="logVariable('submissionstatement')" href="../../_variables/submissionstatement.html">$submissionstatement</a>);
<a name="l6995"><span class="linenum">6995</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addRule')" href="../../_functions/addrule.html" onMouseOver="funcPopup(event,'addrule')">addRule</a>('submissionstatement', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('required'), 'required', null, 'client');
<a name="l6996"><span class="linenum">6996</span></a>          }
<a name="l6997"><span class="linenum">6997</span></a>  
<a name="l6998"><span class="linenum">6998</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_plugin_submission_elements')" href="../../_functions/add_plugin_submission_elements.html" onMouseOver="funcPopup(event,'add_plugin_submission_elements')">add_plugin_submission_elements</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l6999"><span class="linenum">6999</span></a>  
<a name="l7000"><span class="linenum">7000</span></a>  <span class="comment">        // Hidden params.</span>
<a name="l7001"><span class="linenum">7001</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'id', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id);
<a name="l7002"><span class="linenum">7002</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('id', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l7003"><span class="linenum">7003</span></a>  
<a name="l7004"><span class="linenum">7004</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'userid', <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7005"><span class="linenum">7005</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('userid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l7006"><span class="linenum">7006</span></a>  
<a name="l7007"><span class="linenum">7007</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'action', 'savesubmission');
<a name="l7008"><span class="linenum">7008</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('action', <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l7009"><span class="linenum">7009</span></a>      }
<a name="l7010"><span class="linenum">7010</span></a>  
<a name="l7011"><span class="linenum">7011</span></a>      <span class="comment">/**</span>
<a name="l7012"><span class="linenum">7012</span></a>  <span class="comment">     * Revert to draft.</span>
<a name="l7013"><span class="linenum">7013</span></a>  <span class="comment">     *</span>
<a name="l7014"><span class="linenum">7014</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l7015"><span class="linenum">7015</span></a>  <span class="comment">     * @return boolean</span>
<a name="l7016"><span class="linenum">7016</span></a>  <span class="comment">     */</span>
<a name="l7017"><span class="linenum">7017</span></a>      public function <a class="function" onClick="logFunction('revert_to_draft')" href="../../_functions/revert_to_draft.html" onMouseOver="funcPopup(event,'revert_to_draft')">revert_to_draft</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7018"><span class="linenum">7018</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l7019"><span class="linenum">7019</span></a>  
<a name="l7020"><span class="linenum">7020</span></a>  <span class="comment">        // Need grade permission.</span>
<a name="l7021"><span class="linenum">7021</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:grade', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l7022"><span class="linenum">7022</span></a>  
<a name="l7023"><span class="linenum">7023</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l7024"><span class="linenum">7024</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 0, false);
<a name="l7025"><span class="linenum">7025</span></a>          } else {
<a name="l7026"><span class="linenum">7026</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l7027"><span class="linenum">7027</span></a>          }
<a name="l7028"><span class="linenum">7028</span></a>  
<a name="l7029"><span class="linenum">7029</span></a>          if (!<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l7030"><span class="linenum">7030</span></a>              return false;
<a name="l7031"><span class="linenum">7031</span></a>          }
<a name="l7032"><span class="linenum">7032</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_DRAFT')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_DRAFT.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_DRAFT')">ASSIGN_SUBMISSION_STATUS_DRAFT</a>;
<a name="l7033"><span class="linenum">7033</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_submission')" href="../../_functions/update_submission.html" onMouseOver="funcPopup(event,'update_submission')">update_submission</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission);
<a name="l7034"><span class="linenum">7034</span></a>  
<a name="l7035"><span class="linenum">7035</span></a>  <span class="comment">        // Give each submission plugin a chance to process the reverting to draft.</span>
<a name="l7036"><span class="linenum">7036</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>();
<a name="l7037"><span class="linenum">7037</span></a>          foreach (<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l7038"><span class="linenum">7038</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l7039"><span class="linenum">7039</span></a>                  <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('revert_to_draft')" href="../../_functions/revert_to_draft.html" onMouseOver="funcPopup(event,'revert_to_draft')">revert_to_draft</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>);
<a name="l7040"><span class="linenum">7040</span></a>              }
<a name="l7041"><span class="linenum">7041</span></a>          }
<a name="l7042"><span class="linenum">7042</span></a>  <span class="comment">        // Update the modified time on the grade (grader modified).</span>
<a name="l7043"><span class="linenum">7043</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true);
<a name="l7044"><span class="linenum">7044</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l7045"><span class="linenum">7045</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_grade')" href="../../_functions/update_grade.html" onMouseOver="funcPopup(event,'update_grade')">update_grade</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l7046"><span class="linenum">7046</span></a>  
<a name="l7047"><span class="linenum">7047</span></a>          <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>());
<a name="l7048"><span class="linenum">7048</span></a>          if (<a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()) &amp;&amp;
<a name="l7049"><span class="linenum">7049</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;completionsubmit) {
<a name="l7050"><span class="linenum">7050</span></a>              <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('update_state')" href="../../_functions/update_state.html" onMouseOver="funcPopup(event,'update_state')">update_state</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), <a class="constant" onClick="logConstant('COMPLETION_INCOMPLETE')" href="../../_constants/COMPLETION_INCOMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_INCOMPLETE')">COMPLETION_INCOMPLETE</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7051"><span class="linenum">7051</span></a>          }
<a name="l7052"><span class="linenum">7052</span></a>          \mod_assign\event\<a class="class" onClick="logClass('submission_status_updated')" href="../../_classes/submission_status_updated.html" onMouseOver="classPopup(event,'submission_status_updated')">submission_status_updated</a>::<a class="function" onClick="logFunction('create_from_submission')" href="../../_functions/create_from_submission.html" onMouseOver="funcPopup(event,'create_from_submission')">create_from_submission</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l7053"><span class="linenum">7053</span></a>          return true;
<a name="l7054"><span class="linenum">7054</span></a>      }
<a name="l7055"><span class="linenum">7055</span></a>  
<a name="l7056"><span class="linenum">7056</span></a>      <span class="comment">/**</span>
<a name="l7057"><span class="linenum">7057</span></a>  <span class="comment">     * Revert to draft.</span>
<a name="l7058"><span class="linenum">7058</span></a>  <span class="comment">     * Uses url parameter userid if userid not supplied as a parameter.</span>
<a name="l7059"><span class="linenum">7059</span></a>  <span class="comment">     *</span>
<a name="l7060"><span class="linenum">7060</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l7061"><span class="linenum">7061</span></a>  <span class="comment">     * @return boolean</span>
<a name="l7062"><span class="linenum">7062</span></a>  <span class="comment">     */</span>
<a name="l7063"><span class="linenum">7063</span></a>      protected function <a class="function" onClick="logFunction('process_revert_to_draft')" href="../../_functions/process_revert_to_draft.html" onMouseOver="funcPopup(event,'process_revert_to_draft')">process_revert_to_draft</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = 0) {
<a name="l7064"><span class="linenum">7064</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l7065"><span class="linenum">7065</span></a>  
<a name="l7066"><span class="linenum">7066</span></a>          if (!<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7067"><span class="linenum">7067</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="function" onClick="logFunction('required_param')" href="../../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('userid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l7068"><span class="linenum">7068</span></a>          }
<a name="l7069"><span class="linenum">7069</span></a>  
<a name="l7070"><span class="linenum">7070</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('revert_to_draft')" href="../../_functions/revert_to_draft.html" onMouseOver="funcPopup(event,'revert_to_draft')">revert_to_draft</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7071"><span class="linenum">7071</span></a>      }
<a name="l7072"><span class="linenum">7072</span></a>  
<a name="l7073"><span class="linenum">7073</span></a>      <span class="comment">/**</span>
<a name="l7074"><span class="linenum">7074</span></a>  <span class="comment">     * Prevent student updates to this submission</span>
<a name="l7075"><span class="linenum">7075</span></a>  <span class="comment">     *</span>
<a name="l7076"><span class="linenum">7076</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l7077"><span class="linenum">7077</span></a>  <span class="comment">     * @return bool</span>
<a name="l7078"><span class="linenum">7078</span></a>  <span class="comment">     */</span>
<a name="l7079"><span class="linenum">7079</span></a>      public function <a class="function" onClick="logFunction('lock_submission')" href="../../_functions/lock_submission.html" onMouseOver="funcPopup(event,'lock_submission')">lock_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7080"><span class="linenum">7080</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l7081"><span class="linenum">7081</span></a>  <span class="comment">        // Need grade permission.</span>
<a name="l7082"><span class="linenum">7082</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:grade', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l7083"><span class="linenum">7083</span></a>  
<a name="l7084"><span class="linenum">7084</span></a>  <span class="comment">        // Give each submission plugin a chance to process the locking.</span>
<a name="l7085"><span class="linenum">7085</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>();
<a name="l7086"><span class="linenum">7086</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l7087"><span class="linenum">7087</span></a>  
<a name="l7088"><span class="linenum">7088</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true);
<a name="l7089"><span class="linenum">7089</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('locked')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/locked.html">locked</a> = 1;
<a name="l7090"><span class="linenum">7090</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_user_flags')" href="../../_functions/update_user_flags.html" onMouseOver="funcPopup(event,'update_user_flags')">update_user_flags</a>(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>);
<a name="l7091"><span class="linenum">7091</span></a>  
<a name="l7092"><span class="linenum">7092</span></a>          foreach (<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l7093"><span class="linenum">7093</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l7094"><span class="linenum">7094</span></a>                  <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('lock')" href="../../_functions/lock.html" onMouseOver="funcPopup(event,'lock')">lock</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>);
<a name="l7095"><span class="linenum">7095</span></a>              }
<a name="l7096"><span class="linenum">7096</span></a>          }
<a name="l7097"><span class="linenum">7097</span></a>  
<a name="l7098"><span class="linenum">7098</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l7099"><span class="linenum">7099</span></a>          \mod_assign\event\<a class="class" onClick="logClass('submission_locked')" href="../../_classes/submission_locked.html" onMouseOver="classPopup(event,'submission_locked')">submission_locked</a>::<a class="function" onClick="logFunction('create_from_user')" href="../../_functions/create_from_user.html" onMouseOver="funcPopup(event,'create_from_user')">create_from_user</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l7100"><span class="linenum">7100</span></a>          return true;
<a name="l7101"><span class="linenum">7101</span></a>      }
<a name="l7102"><span class="linenum">7102</span></a>  
<a name="l7103"><span class="linenum">7103</span></a>  
<a name="l7104"><span class="linenum">7104</span></a>      <span class="comment">/**</span>
<a name="l7105"><span class="linenum">7105</span></a>  <span class="comment">     * Set the workflow state for multiple users</span>
<a name="l7106"><span class="linenum">7106</span></a>  <span class="comment">     *</span>
<a name="l7107"><span class="linenum">7107</span></a>  <span class="comment">     * @return void</span>
<a name="l7108"><span class="linenum">7108</span></a>  <span class="comment">     */</span>
<a name="l7109"><span class="linenum">7109</span></a>      protected function <a class="function" onClick="logFunction('process_set_batch_marking_workflow_state')" href="../../_functions/process_set_batch_marking_workflow_state.html" onMouseOver="funcPopup(event,'process_set_batch_marking_workflow_state')">process_set_batch_marking_workflow_state</a>() {
<a name="l7110"><span class="linenum">7110</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l7111"><span class="linenum">7111</span></a>  
<a name="l7112"><span class="linenum">7112</span></a>  <span class="comment">        // Include batch marking workflow form.</span>
<a name="l7113"><span class="linenum">7113</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/batchsetmarkingworkflowstateform.php.html">/mod/assign/batchsetmarkingworkflowstateform.php</a>');
<a name="l7114"><span class="linenum">7114</span></a>  
<a name="l7115"><span class="linenum">7115</span></a>          <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a> = array(
<a name="l7116"><span class="linenum">7116</span></a>              'userscount' =&gt; 0,  // This form is never re-displayed, so we don't need to
<a name="l7117"><span class="linenum">7117</span></a>              'usershtml' =&gt; '',  // initialise these parameters with real information.
<a name="l7118"><span class="linenum">7118</span></a>              'markingworkflowstates' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_marking_workflow_states_for_current_user')" href="../../_functions/get_marking_workflow_states_for_current_user.html" onMouseOver="funcPopup(event,'get_marking_workflow_states_for_current_user')">get_marking_workflow_states_for_current_user</a>()
<a name="l7119"><span class="linenum">7119</span></a>          );
<a name="l7120"><span class="linenum">7120</span></a>  
<a name="l7121"><span class="linenum">7121</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_batch_set_marking_workflow_state_form')" href="../../_classes/mod_assign_batch_set_marking_workflow_state_form.html" onMouseOver="classPopup(event,'mod_assign_batch_set_marking_workflow_state_form')">mod_assign_batch_set_marking_workflow_state_form</a>(null, <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a>);
<a name="l7122"><span class="linenum">7122</span></a>  
<a name="l7123"><span class="linenum">7123</span></a>          if (<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('is_cancelled')" href="../../_functions/is_cancelled.html" onMouseOver="funcPopup(event,'is_cancelled')">is_cancelled</a>()) {
<a name="l7124"><span class="linenum">7124</span></a>              return true;
<a name="l7125"><span class="linenum">7125</span></a>          }
<a name="l7126"><span class="linenum">7126</span></a>  
<a name="l7127"><span class="linenum">7127</span></a>          if (<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l7128"><span class="linenum">7128</span></a>              <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('selectedusers')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/selectedusers.html">selectedusers</a>);
<a name="l7129"><span class="linenum">7129</span></a>              <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../../_variables/state.html">$state</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('markingworkflowstate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/markingworkflowstate.html">markingworkflowstate</a>;
<a name="l7130"><span class="linenum">7130</span></a>  
<a name="l7131"><span class="linenum">7131</span></a>              foreach (<a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> as <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7132"><span class="linenum">7132</span></a>                  <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true);
<a name="l7133"><span class="linenum">7133</span></a>  
<a name="l7134"><span class="linenum">7134</span></a>                  <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> = <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../../_variables/state.html">$state</a>;
<a name="l7135"><span class="linenum">7135</span></a>  
<a name="l7136"><span class="linenum">7136</span></a>  <span class="comment">                // Clear the mailed flag if notification is requested, the student hasn't been</span>
<a name="l7137"><span class="linenum">7137</span></a>  <span class="comment">                // notified previously, the student can access the assignment, and the state</span>
<a name="l7138"><span class="linenum">7138</span></a>  <span class="comment">                // is &quot;Released&quot;.</span>
<a name="l7139"><span class="linenum">7139</span></a>                  <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7140"><span class="linenum">7140</span></a>                  <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_cm')" href="../../_functions/get_cm.html" onMouseOver="funcPopup(event,'get_cm')">get_cm</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id);
<a name="l7141"><span class="linenum">7141</span></a>                  if (<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('sendstudentnotifications')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/sendstudentnotifications.html">sendstudentnotifications</a> &amp;&amp; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('uservisible')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/uservisible.html">uservisible</a> &amp;&amp;
<a name="l7142"><span class="linenum">7142</span></a>                          <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../../_variables/state.html">$state</a> == <a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_RELEASED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')">ASSIGN_MARKING_WORKFLOW_STATE_RELEASED</a>) {
<a name="l7143"><span class="linenum">7143</span></a>                      <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('mailed')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/mailed.html">mailed</a> = 0;
<a name="l7144"><span class="linenum">7144</span></a>                  }
<a name="l7145"><span class="linenum">7145</span></a>  
<a name="l7146"><span class="linenum">7146</span></a>                  <a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('grading_disabled')" href="../../_functions/grading_disabled.html" onMouseOver="funcPopup(event,'grading_disabled')">grading_disabled</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7147"><span class="linenum">7147</span></a>  
<a name="l7148"><span class="linenum">7148</span></a>  <span class="comment">                // Will not apply update if user does not have permission to assign this workflow state.</span>
<a name="l7149"><span class="linenum">7149</span></a>                  if (!<a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_user_flags')" href="../../_functions/update_user_flags.html" onMouseOver="funcPopup(event,'update_user_flags')">update_user_flags</a>(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>)) {
<a name="l7150"><span class="linenum">7150</span></a>                      if (<a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../../_variables/state.html">$state</a> == <a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_RELEASED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')">ASSIGN_MARKING_WORKFLOW_STATE_RELEASED</a>) {
<a name="l7151"><span class="linenum">7151</span></a>  <span class="comment">                        // Update Gradebook.</span>
<a name="l7152"><span class="linenum">7152</span></a>                          <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../../_variables/assign.html">$assign</a> = clone <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l7153"><span class="linenum">7153</span></a>                          <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../../_variables/assign.html">$assign</a>-&gt;<a onClick="logVariable('cmidnumber')" class="var it43084" onMouseOver="hilite(43084)" onMouseOut="lolite()" href="../../_variables/cmidnumber.html">cmidnumber</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;idnumber;
<a name="l7154"><span class="linenum">7154</span></a>  <span class="comment">                        // Set assign gradebook feedback plugin status.</span>
<a name="l7155"><span class="linenum">7155</span></a>                          <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../../_variables/assign.html">$assign</a>-&gt;<a onClick="logVariable('gradefeedbackenabled')" class="var it43084" onMouseOver="hilite(43084)" onMouseOut="lolite()" href="../../_variables/gradefeedbackenabled.html">gradefeedbackenabled</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_gradebook_feedback_enabled')" href="../../_functions/is_gradebook_feedback_enabled.html" onMouseOver="funcPopup(event,'is_gradebook_feedback_enabled')">is_gradebook_feedback_enabled</a>();
<a name="l7156"><span class="linenum">7156</span></a>                          <a class="function" onClick="logFunction('assign_update_grades')" href="../../_functions/assign_update_grades.html" onMouseOver="funcPopup(event,'assign_update_grades')">assign_update_grades</a>(<a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../../_variables/assign.html">$assign</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7157"><span class="linenum">7157</span></a>                      }
<a name="l7158"><span class="linenum">7158</span></a>  
<a name="l7159"><span class="linenum">7159</span></a>                      <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l7160"><span class="linenum">7160</span></a>                      \mod_assign\event\<a class="class" onClick="logClass('workflow_state_updated')" href="../../_classes/workflow_state_updated.html" onMouseOver="classPopup(event,'workflow_state_updated')">workflow_state_updated</a>::<a class="function" onClick="logFunction('create_from_user')" href="../../_functions/create_from_user.html" onMouseOver="funcPopup(event,'create_from_user')">create_from_user</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../../_variables/state.html">$state</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l7161"><span class="linenum">7161</span></a>                  }
<a name="l7162"><span class="linenum">7162</span></a>              }
<a name="l7163"><span class="linenum">7163</span></a>          }
<a name="l7164"><span class="linenum">7164</span></a>      }
<a name="l7165"><span class="linenum">7165</span></a>  
<a name="l7166"><span class="linenum">7166</span></a>      <span class="comment">/**</span>
<a name="l7167"><span class="linenum">7167</span></a>  <span class="comment">     * Set the marking allocation for multiple users</span>
<a name="l7168"><span class="linenum">7168</span></a>  <span class="comment">     *</span>
<a name="l7169"><span class="linenum">7169</span></a>  <span class="comment">     * @return void</span>
<a name="l7170"><span class="linenum">7170</span></a>  <span class="comment">     */</span>
<a name="l7171"><span class="linenum">7171</span></a>      protected function <a class="function" onClick="logFunction('process_set_batch_marking_allocation')" href="../../_functions/process_set_batch_marking_allocation.html" onMouseOver="funcPopup(event,'process_set_batch_marking_allocation')">process_set_batch_marking_allocation</a>() {
<a name="l7172"><span class="linenum">7172</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l7173"><span class="linenum">7173</span></a>  
<a name="l7174"><span class="linenum">7174</span></a>  <span class="comment">        // Include batch marking allocation form.</span>
<a name="l7175"><span class="linenum">7175</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/batchsetallocatedmarkerform.php.html">/mod/assign/batchsetallocatedmarkerform.php</a>');
<a name="l7176"><span class="linenum">7176</span></a>  
<a name="l7177"><span class="linenum">7177</span></a>          <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a> = array(
<a name="l7178"><span class="linenum">7178</span></a>              'userscount' =&gt; 0,  // This form is never re-displayed, so we don't need to
<a name="l7179"><span class="linenum">7179</span></a>              'usershtml' =&gt; ''   // initialise these parameters with real information.
<a name="l7180"><span class="linenum">7180</span></a>          );
<a name="l7181"><span class="linenum">7181</span></a>  
<a name="l7182"><span class="linenum">7182</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="function" onClick="logFunction('users_order_by_sql')" href="../../_functions/users_order_by_sql.html" onMouseOver="funcPopup(event,'users_order_by_sql')">users_order_by_sql</a>();
<a name="l7183"><span class="linenum">7183</span></a>          <a class="var it15515" onMouseOver="hilite(15515)" onMouseOut="lolite()" onClick="logVariable('markers')" href="../../_variables/markers.html">$markers</a> = <a class="function" onClick="logFunction('get_users_by_capability')" href="../../_functions/get_users_by_capability.html" onMouseOver="funcPopup(event,'get_users_by_capability')">get_users_by_capability</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(), 'mod/assign:grade', '', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l7184"><span class="linenum">7184</span></a>          <a class="var it30993" onMouseOver="hilite(30993)" onMouseOut="lolite()" onClick="logVariable('markerlist')" href="../../_variables/markerlist.html">$markerlist</a> = array();
<a name="l7185"><span class="linenum">7185</span></a>          foreach (<a class="var it15515" onMouseOver="hilite(15515)" onMouseOut="lolite()" onClick="logVariable('markers')" href="../../_variables/markers.html">$markers</a> as <a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>) {
<a name="l7186"><span class="linenum">7186</span></a>              <a class="var it30993" onMouseOver="hilite(30993)" onMouseOut="lolite()" onClick="logVariable('markerlist')" href="../../_variables/markerlist.html">$markerlist</a>[<a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>-&gt;<a onClick="logVariable('id')" class="var it43495" onMouseOver="hilite(43495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>);
<a name="l7187"><span class="linenum">7187</span></a>          }
<a name="l7188"><span class="linenum">7188</span></a>  
<a name="l7189"><span class="linenum">7189</span></a>          <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a>['markers'] = <a class="var it30993" onMouseOver="hilite(30993)" onMouseOut="lolite()" onClick="logVariable('markerlist')" href="../../_variables/markerlist.html">$markerlist</a>;
<a name="l7190"><span class="linenum">7190</span></a>  
<a name="l7191"><span class="linenum">7191</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_batch_set_allocatedmarker_form')" href="../../_classes/mod_assign_batch_set_allocatedmarker_form.html" onMouseOver="classPopup(event,'mod_assign_batch_set_allocatedmarker_form')">mod_assign_batch_set_allocatedmarker_form</a>(null, <a class="var it25320" onMouseOver="hilite(25320)" onMouseOut="lolite()" onClick="logVariable('formparams')" href="../../_variables/formparams.html">$formparams</a>);
<a name="l7192"><span class="linenum">7192</span></a>  
<a name="l7193"><span class="linenum">7193</span></a>          if (<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('is_cancelled')" href="../../_functions/is_cancelled.html" onMouseOver="funcPopup(event,'is_cancelled')">is_cancelled</a>()) {
<a name="l7194"><span class="linenum">7194</span></a>              return true;
<a name="l7195"><span class="linenum">7195</span></a>          }
<a name="l7196"><span class="linenum">7196</span></a>  
<a name="l7197"><span class="linenum">7197</span></a>          if (<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l7198"><span class="linenum">7198</span></a>              <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('selectedusers')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/selectedusers.html">selectedusers</a>);
<a name="l7199"><span class="linenum">7199</span></a>              <a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l7200"><span class="linenum">7200</span></a>  
<a name="l7201"><span class="linenum">7201</span></a>              foreach (<a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> as <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7202"><span class="linenum">7202</span></a>                  <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true);
<a name="l7203"><span class="linenum">7203</span></a>                  if (<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> == ASSIGN_MARKING_WORKFLOW_STATE_READYFORREVIEW ||
<a name="l7204"><span class="linenum">7204</span></a>                      <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> == <a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW')">ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW</a> ||
<a name="l7205"><span class="linenum">7205</span></a>                      <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> == ASSIGN_MARKING_WORKFLOW_STATE_READYFORRELEASE ||
<a name="l7206"><span class="linenum">7206</span></a>                      <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> == <a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_RELEASED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')">ASSIGN_MARKING_WORKFLOW_STATE_RELEASED</a>) {
<a name="l7207"><span class="linenum">7207</span></a>  
<a name="l7208"><span class="linenum">7208</span></a>                      continue; <span class="comment">// Allocated marker can only be changed in certain workflow states.</span>
<a name="l7209"><span class="linenum">7209</span></a>                  }
<a name="l7210"><span class="linenum">7210</span></a>  
<a name="l7211"><span class="linenum">7211</span></a>                  <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a> = <a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>-&gt;<a onClick="logVariable('id')" class="var it43495" onMouseOver="hilite(43495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l7212"><span class="linenum">7212</span></a>  
<a name="l7213"><span class="linenum">7213</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_user_flags')" href="../../_functions/update_user_flags.html" onMouseOver="funcPopup(event,'update_user_flags')">update_user_flags</a>(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>)) {
<a name="l7214"><span class="linenum">7214</span></a>                      <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l7215"><span class="linenum">7215</span></a>                      \mod_assign\event\<a class="class" onClick="logClass('marker_updated')" href="../../_classes/marker_updated.html" onMouseOver="classPopup(event,'marker_updated')">marker_updated</a>::<a class="function" onClick="logFunction('create_from_marker')" href="../../_functions/create_from_marker.html" onMouseOver="funcPopup(event,'create_from_marker')">create_from_marker</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it11884" onMouseOver="hilite(11884)" onMouseOut="lolite()" onClick="logVariable('marker')" href="../../_variables/marker.html">$marker</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l7216"><span class="linenum">7216</span></a>                  }
<a name="l7217"><span class="linenum">7217</span></a>              }
<a name="l7218"><span class="linenum">7218</span></a>          }
<a name="l7219"><span class="linenum">7219</span></a>      }
<a name="l7220"><span class="linenum">7220</span></a>  
<a name="l7221"><span class="linenum">7221</span></a>  
<a name="l7222"><span class="linenum">7222</span></a>      <span class="comment">/**</span>
<a name="l7223"><span class="linenum">7223</span></a>  <span class="comment">     * Prevent student updates to this submission.</span>
<a name="l7224"><span class="linenum">7224</span></a>  <span class="comment">     * Uses url parameter userid.</span>
<a name="l7225"><span class="linenum">7225</span></a>  <span class="comment">     *</span>
<a name="l7226"><span class="linenum">7226</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l7227"><span class="linenum">7227</span></a>  <span class="comment">     * @return void</span>
<a name="l7228"><span class="linenum">7228</span></a>  <span class="comment">     */</span>
<a name="l7229"><span class="linenum">7229</span></a>      protected function <a class="function" onClick="logFunction('process_lock_submission')" href="../../_functions/process_lock_submission.html" onMouseOver="funcPopup(event,'process_lock_submission')">process_lock_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = 0) {
<a name="l7230"><span class="linenum">7230</span></a>  
<a name="l7231"><span class="linenum">7231</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l7232"><span class="linenum">7232</span></a>  
<a name="l7233"><span class="linenum">7233</span></a>          if (!<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7234"><span class="linenum">7234</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="function" onClick="logFunction('required_param')" href="../../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('userid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l7235"><span class="linenum">7235</span></a>          }
<a name="l7236"><span class="linenum">7236</span></a>  
<a name="l7237"><span class="linenum">7237</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('lock_submission')" href="../../_functions/lock_submission.html" onMouseOver="funcPopup(event,'lock_submission')">lock_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7238"><span class="linenum">7238</span></a>      }
<a name="l7239"><span class="linenum">7239</span></a>  
<a name="l7240"><span class="linenum">7240</span></a>      <span class="comment">/**</span>
<a name="l7241"><span class="linenum">7241</span></a>  <span class="comment">     * Unlock the student submission.</span>
<a name="l7242"><span class="linenum">7242</span></a>  <span class="comment">     *</span>
<a name="l7243"><span class="linenum">7243</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l7244"><span class="linenum">7244</span></a>  <span class="comment">     * @return bool</span>
<a name="l7245"><span class="linenum">7245</span></a>  <span class="comment">     */</span>
<a name="l7246"><span class="linenum">7246</span></a>      public function <a class="function" onClick="logFunction('unlock_submission')" href="../../_functions/unlock_submission.html" onMouseOver="funcPopup(event,'unlock_submission')">unlock_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7247"><span class="linenum">7247</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l7248"><span class="linenum">7248</span></a>  
<a name="l7249"><span class="linenum">7249</span></a>  <span class="comment">        // Need grade permission.</span>
<a name="l7250"><span class="linenum">7250</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:grade', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l7251"><span class="linenum">7251</span></a>  
<a name="l7252"><span class="linenum">7252</span></a>  <span class="comment">        // Give each submission plugin a chance to process the unlocking.</span>
<a name="l7253"><span class="linenum">7253</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>();
<a name="l7254"><span class="linenum">7254</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l7255"><span class="linenum">7255</span></a>  
<a name="l7256"><span class="linenum">7256</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true);
<a name="l7257"><span class="linenum">7257</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('locked')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/locked.html">locked</a> = 0;
<a name="l7258"><span class="linenum">7258</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_user_flags')" href="../../_functions/update_user_flags.html" onMouseOver="funcPopup(event,'update_user_flags')">update_user_flags</a>(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>);
<a name="l7259"><span class="linenum">7259</span></a>  
<a name="l7260"><span class="linenum">7260</span></a>          foreach (<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l7261"><span class="linenum">7261</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l7262"><span class="linenum">7262</span></a>                  <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('unlock')" href="../../_functions/unlock.html" onMouseOver="funcPopup(event,'unlock')">unlock</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>);
<a name="l7263"><span class="linenum">7263</span></a>              }
<a name="l7264"><span class="linenum">7264</span></a>          }
<a name="l7265"><span class="linenum">7265</span></a>  
<a name="l7266"><span class="linenum">7266</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l7267"><span class="linenum">7267</span></a>          \mod_assign\event\<a class="class" onClick="logClass('submission_unlocked')" href="../../_classes/submission_unlocked.html" onMouseOver="classPopup(event,'submission_unlocked')">submission_unlocked</a>::<a class="function" onClick="logFunction('create_from_user')" href="../../_functions/create_from_user.html" onMouseOver="funcPopup(event,'create_from_user')">create_from_user</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l7268"><span class="linenum">7268</span></a>          return true;
<a name="l7269"><span class="linenum">7269</span></a>      }
<a name="l7270"><span class="linenum">7270</span></a>  
<a name="l7271"><span class="linenum">7271</span></a>      <span class="comment">/**</span>
<a name="l7272"><span class="linenum">7272</span></a>  <span class="comment">     * Unlock the student submission.</span>
<a name="l7273"><span class="linenum">7273</span></a>  <span class="comment">     * Uses url parameter userid.</span>
<a name="l7274"><span class="linenum">7274</span></a>  <span class="comment">     *</span>
<a name="l7275"><span class="linenum">7275</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l7276"><span class="linenum">7276</span></a>  <span class="comment">     * @return bool</span>
<a name="l7277"><span class="linenum">7277</span></a>  <span class="comment">     */</span>
<a name="l7278"><span class="linenum">7278</span></a>      protected function <a class="function" onClick="logFunction('process_unlock_submission')" href="../../_functions/process_unlock_submission.html" onMouseOver="funcPopup(event,'process_unlock_submission')">process_unlock_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = 0) {
<a name="l7279"><span class="linenum">7279</span></a>  
<a name="l7280"><span class="linenum">7280</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l7281"><span class="linenum">7281</span></a>  
<a name="l7282"><span class="linenum">7282</span></a>          if (!<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7283"><span class="linenum">7283</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="function" onClick="logFunction('required_param')" href="../../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('userid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l7284"><span class="linenum">7284</span></a>          }
<a name="l7285"><span class="linenum">7285</span></a>  
<a name="l7286"><span class="linenum">7286</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('unlock_submission')" href="../../_functions/unlock_submission.html" onMouseOver="funcPopup(event,'unlock_submission')">unlock_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7287"><span class="linenum">7287</span></a>      }
<a name="l7288"><span class="linenum">7288</span></a>  
<a name="l7289"><span class="linenum">7289</span></a>      <span class="comment">/**</span>
<a name="l7290"><span class="linenum">7290</span></a>  <span class="comment">     * Apply a grade from a grading form to a user (may be called multiple times for a group submission).</span>
<a name="l7291"><span class="linenum">7291</span></a>  <span class="comment">     *</span>
<a name="l7292"><span class="linenum">7292</span></a>  <span class="comment">     * @param stdClass $formdata - the data from the form</span>
<a name="l7293"><span class="linenum">7293</span></a>  <span class="comment">     * @param int $userid - the user to apply the grade to</span>
<a name="l7294"><span class="linenum">7294</span></a>  <span class="comment">     * @param int $attemptnumber - The attempt number to apply the grade to.</span>
<a name="l7295"><span class="linenum">7295</span></a>  <span class="comment">     * @return void</span>
<a name="l7296"><span class="linenum">7296</span></a>  <span class="comment">     */</span>
<a name="l7297"><span class="linenum">7297</span></a>      protected function <a class="function" onClick="logFunction('apply_grade_to_user')" href="../../_functions/apply_grade_to_user.html" onMouseOver="funcPopup(event,'apply_grade_to_user')">apply_grade_to_user</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>) {
<a name="l7298"><span class="linenum">7298</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l7299"><span class="linenum">7299</span></a>  
<a name="l7300"><span class="linenum">7300</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>);
<a name="l7301"><span class="linenum">7301</span></a>          <a class="var it8110" onMouseOver="hilite(8110)" onMouseOut="lolite()" onClick="logVariable('originalgrade')" href="../../_variables/originalgrade.html">$originalgrade</a> = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>;
<a name="l7302"><span class="linenum">7302</span></a>          <a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('grading_disabled')" href="../../_functions/grading_disabled.html" onMouseOver="funcPopup(event,'grading_disabled')">grading_disabled</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7303"><span class="linenum">7303</span></a>          <a class="var it32221" onMouseOver="hilite(32221)" onMouseOut="lolite()" onClick="logVariable('gradinginstance')" href="../../_variables/gradinginstance.html">$gradinginstance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_grading_instance')" href="../../_functions/get_grading_instance.html" onMouseOver="funcPopup(event,'get_grading_instance')">get_grading_instance</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a>);
<a name="l7304"><span class="linenum">7304</span></a>          if (!<a class="var it30991" onMouseOver="hilite(30991)" onMouseOut="lolite()" onClick="logVariable('gradingdisabled')" href="../../_variables/gradingdisabled.html">$gradingdisabled</a>) {
<a name="l7305"><span class="linenum">7305</span></a>              if (<a class="var it32221" onMouseOver="hilite(32221)" onMouseOut="lolite()" onClick="logVariable('gradinginstance')" href="../../_variables/gradinginstance.html">$gradinginstance</a>) {
<a name="l7306"><span class="linenum">7306</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = <a class="var it32221" onMouseOver="hilite(32221)" onMouseOut="lolite()" onClick="logVariable('gradinginstance')" href="../../_variables/gradinginstance.html">$gradinginstance</a>-&gt;<a class="function" onClick="logFunction('submit_and_get_grade')" href="../../_functions/submit_and_get_grade.html" onMouseOver="funcPopup(event,'submit_and_get_grade')">submit_and_get_grade</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('advancedgrading')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/advancedgrading.html">advancedgrading</a>,
<a name="l7307"><span class="linenum">7307</span></a>                                                                         <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('id')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l7308"><span class="linenum">7308</span></a>              } else {
<a name="l7309"><span class="linenum">7309</span></a>  <span class="comment">                // Handle the case when grade is set to No Grade.</span>
<a name="l7310"><span class="linenum">7310</span></a>                  if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('grade')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>)) {
<a name="l7311"><span class="linenum">7311</span></a>                      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = <a class="function" onClick="logFunction('grade_floatval')" href="../../_functions/grade_floatval.html" onMouseOver="funcPopup(event,'grade_floatval')">grade_floatval</a>(<a class="function" onClick="logFunction('unformat_float')" href="../../_functions/unformat_float.html" onMouseOver="funcPopup(event,'unformat_float')">unformat_float</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('grade')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>));
<a name="l7312"><span class="linenum">7312</span></a>                  }
<a name="l7313"><span class="linenum">7313</span></a>              }
<a name="l7314"><span class="linenum">7314</span></a>              if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>) || isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a>)) {
<a name="l7315"><span class="linenum">7315</span></a>                  <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true);
<a name="l7316"><span class="linenum">7316</span></a>                  <a class="var it32233" onMouseOver="hilite(32233)" onMouseOut="lolite()" onClick="logVariable('oldworkflowstate')" href="../../_variables/oldworkflowstate.html">$oldworkflowstate</a> = <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>;
<a name="l7317"><span class="linenum">7317</span></a>                  <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> = isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>) ? <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> : <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>;
<a name="l7318"><span class="linenum">7318</span></a>                  <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a> = isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a>) ? <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a> : <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('allocatedmarker')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/allocatedmarker.html">allocatedmarker</a>;
<a name="l7319"><span class="linenum">7319</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_user_flags')" href="../../_functions/update_user_flags.html" onMouseOver="funcPopup(event,'update_user_flags')">update_user_flags</a>(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>) &amp;&amp;
<a name="l7320"><span class="linenum">7320</span></a>                          isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>) &amp;&amp;
<a name="l7321"><span class="linenum">7321</span></a>                          <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a> !== <a class="var it32233" onMouseOver="hilite(32233)" onMouseOut="lolite()" onClick="logVariable('oldworkflowstate')" href="../../_variables/oldworkflowstate.html">$oldworkflowstate</a>) {
<a name="l7322"><span class="linenum">7322</span></a>                      <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l7323"><span class="linenum">7323</span></a>                      \mod_assign\event\<a class="class" onClick="logClass('workflow_state_updated')" href="../../_classes/workflow_state_updated.html" onMouseOver="classPopup(event,'workflow_state_updated')">workflow_state_updated</a>::<a class="function" onClick="logFunction('create_from_user')" href="../../_functions/create_from_user.html" onMouseOver="funcPopup(event,'create_from_user')">create_from_user</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l7324"><span class="linenum">7324</span></a>                  }
<a name="l7325"><span class="linenum">7325</span></a>              }
<a name="l7326"><span class="linenum">7326</span></a>          }
<a name="l7327"><span class="linenum">7327</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grader')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grader.html">grader</a>= <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l7328"><span class="linenum">7328</span></a>  
<a name="l7329"><span class="linenum">7329</span></a>          <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>();
<a name="l7330"><span class="linenum">7330</span></a>          <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a> = <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('feedback_plugin_for_gradebook')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/feedback_plugin_for_gradebook.html">feedback_plugin_for_gradebook</a>;
<a name="l7331"><span class="linenum">7331</span></a>  
<a name="l7332"><span class="linenum">7332</span></a>          <a class="var it32234" onMouseOver="hilite(32234)" onMouseOut="lolite()" onClick="logVariable('feedbackmodified')" href="../../_variables/feedbackmodified.html">$feedbackmodified</a> = false;
<a name="l7333"><span class="linenum">7333</span></a>  
<a name="l7334"><span class="linenum">7334</span></a>  <span class="comment">        // Call save in plugins.</span>
<a name="l7335"><span class="linenum">7335</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l7336"><span class="linenum">7336</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l7337"><span class="linenum">7337</span></a>                  <a class="var it32235" onMouseOver="hilite(32235)" onMouseOut="lolite()" onClick="logVariable('gradingmodified')" href="../../_variables/gradingmodified.html">$gradingmodified</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_feedback_modified')" href="../../_functions/is_feedback_modified.html" onMouseOver="funcPopup(event,'is_feedback_modified')">is_feedback_modified</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>);
<a name="l7338"><span class="linenum">7338</span></a>                  if (<a class="var it32235" onMouseOver="hilite(32235)" onMouseOut="lolite()" onClick="logVariable('gradingmodified')" href="../../_variables/gradingmodified.html">$gradingmodified</a>) {
<a name="l7339"><span class="linenum">7339</span></a>                      if (!<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('save')" href="../../_functions/save.html" onMouseOver="funcPopup(event,'save')">save</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>)) {
<a name="l7340"><span class="linenum">7340</span></a>                          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = false;
<a name="l7341"><span class="linenum">7341</span></a>                          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_error')" href="../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>());
<a name="l7342"><span class="linenum">7342</span></a>                      }
<a name="l7343"><span class="linenum">7343</span></a>  <span class="comment">                    // If $feedbackmodified is true, keep it true.</span>
<a name="l7344"><span class="linenum">7344</span></a>                      <a class="var it32234" onMouseOver="hilite(32234)" onMouseOut="lolite()" onClick="logVariable('feedbackmodified')" href="../../_variables/feedbackmodified.html">$feedbackmodified</a> = <a class="var it32234" onMouseOver="hilite(32234)" onMouseOut="lolite()" onClick="logVariable('feedbackmodified')" href="../../_variables/feedbackmodified.html">$feedbackmodified</a> || <a class="var it32235" onMouseOver="hilite(32235)" onMouseOut="lolite()" onClick="logVariable('gradingmodified')" href="../../_variables/gradingmodified.html">$gradingmodified</a>;
<a name="l7345"><span class="linenum">7345</span></a>                  }
<a name="l7346"><span class="linenum">7346</span></a>                  if (('assignfeedback_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>()) == <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a>) {
<a name="l7347"><span class="linenum">7347</span></a>  <span class="comment">                    // This is the feedback plugin chose to push comments to the gradebook.</span>
<a name="l7348"><span class="linenum">7348</span></a>                      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbacktext')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/feedbacktext.html">feedbacktext</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('text_for_gradebook')" href="../../_functions/text_for_gradebook.html" onMouseOver="funcPopup(event,'text_for_gradebook')">text_for_gradebook</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l7349"><span class="linenum">7349</span></a>                      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/feedbackformat.html">feedbackformat</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('format_for_gradebook')" href="../../_functions/format_for_gradebook.html" onMouseOver="funcPopup(event,'format_for_gradebook')">format_for_gradebook</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l7350"><span class="linenum">7350</span></a>                  }
<a name="l7351"><span class="linenum">7351</span></a>              }
<a name="l7352"><span class="linenum">7352</span></a>          }
<a name="l7353"><span class="linenum">7353</span></a>  
<a name="l7354"><span class="linenum">7354</span></a>  <span class="comment">        // We do not want to update the timemodified if no grade was added.</span>
<a name="l7355"><span class="linenum">7355</span></a>          if (!empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('addattempt')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/addattempt.html">addattempt</a>) ||
<a name="l7356"><span class="linenum">7356</span></a>                  (<a class="var it8110" onMouseOver="hilite(8110)" onMouseOut="lolite()" onClick="logVariable('originalgrade')" href="../../_variables/originalgrade.html">$originalgrade</a> !== null &amp;&amp; <a class="var it8110" onMouseOver="hilite(8110)" onMouseOut="lolite()" onClick="logVariable('originalgrade')" href="../../_variables/originalgrade.html">$originalgrade</a> != -1) ||
<a name="l7357"><span class="linenum">7357</span></a>                  (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> !== null &amp;&amp; <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> != -1) ||
<a name="l7358"><span class="linenum">7358</span></a>                  <a class="var it32234" onMouseOver="hilite(32234)" onMouseOut="lolite()" onClick="logVariable('feedbackmodified')" href="../../_variables/feedbackmodified.html">$feedbackmodified</a>) {
<a name="l7359"><span class="linenum">7359</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_grade')" href="../../_functions/update_grade.html" onMouseOver="funcPopup(event,'update_grade')">update_grade</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, !empty(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('addattempt')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/addattempt.html">addattempt</a>));
<a name="l7360"><span class="linenum">7360</span></a>          }
<a name="l7361"><span class="linenum">7361</span></a>  <span class="comment">        // Note the default if not provided for this option is true (e.g. webservices).</span>
<a name="l7362"><span class="linenum">7362</span></a>  <span class="comment">        // This is for backwards compatibility.</span>
<a name="l7363"><span class="linenum">7363</span></a>          if (!isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('sendstudentnotifications')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/sendstudentnotifications.html">sendstudentnotifications</a>) || <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('sendstudentnotifications')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../_variables/sendstudentnotifications.html">sendstudentnotifications</a>) {
<a name="l7364"><span class="linenum">7364</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('notify_grade_modified')" href="../../_functions/notify_grade_modified.html" onMouseOver="funcPopup(event,'notify_grade_modified')">notify_grade_modified</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>, true);
<a name="l7365"><span class="linenum">7365</span></a>          }
<a name="l7366"><span class="linenum">7366</span></a>      }
<a name="l7367"><span class="linenum">7367</span></a>  
<a name="l7368"><span class="linenum">7368</span></a>  
<a name="l7369"><span class="linenum">7369</span></a>      <span class="comment">/**</span>
<a name="l7370"><span class="linenum">7370</span></a>  <span class="comment">     * Save outcomes submitted from grading form.</span>
<a name="l7371"><span class="linenum">7371</span></a>  <span class="comment">     *</span>
<a name="l7372"><span class="linenum">7372</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l7373"><span class="linenum">7373</span></a>  <span class="comment">     * @param stdClass $formdata</span>
<a name="l7374"><span class="linenum">7374</span></a>  <span class="comment">     * @param int $sourceuserid The user ID under which the outcome data is accessible. This is relevant</span>
<a name="l7375"><span class="linenum">7375</span></a>  <span class="comment">     *                          for an outcome set to a user but applied to an entire group.</span>
<a name="l7376"><span class="linenum">7376</span></a>  <span class="comment">     */</span>
<a name="l7377"><span class="linenum">7377</span></a>      protected function <a class="function" onClick="logFunction('process_outcomes')" href="../../_functions/process_outcomes.html" onMouseOver="funcPopup(event,'process_outcomes')">process_outcomes</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>, <a class="var it32237" onMouseOver="hilite(32237)" onMouseOut="lolite()" onClick="logVariable('sourceuserid')" href="../../_variables/sourceuserid.html">$sourceuserid</a> = null) {
<a name="l7378"><span class="linenum">7378</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l7379"><span class="linenum">7379</span></a>  
<a name="l7380"><span class="linenum">7380</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableoutcomes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/enableoutcomes.html">enableoutcomes</a>)) {
<a name="l7381"><span class="linenum">7381</span></a>              return;
<a name="l7382"><span class="linenum">7382</span></a>          }
<a name="l7383"><span class="linenum">7383</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('grading_disabled')" href="../../_functions/grading_disabled.html" onMouseOver="funcPopup(event,'grading_disabled')">grading_disabled</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l7384"><span class="linenum">7384</span></a>              return;
<a name="l7385"><span class="linenum">7385</span></a>          }
<a name="l7386"><span class="linenum">7386</span></a>  
<a name="l7387"><span class="linenum">7387</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l7388"><span class="linenum">7388</span></a>  
<a name="l7389"><span class="linenum">7389</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = array();
<a name="l7390"><span class="linenum">7390</span></a>          <a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l7391"><span class="linenum">7391</span></a>                                          'mod',
<a name="l7392"><span class="linenum">7392</span></a>                                          'assign',
<a name="l7393"><span class="linenum">7393</span></a>                                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id,
<a name="l7394"><span class="linenum">7394</span></a>                                          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7395"><span class="linenum">7395</span></a>  
<a name="l7396"><span class="linenum">7396</span></a>          if (!empty(<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('outcomes')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/outcomes.html">outcomes</a>)) {
<a name="l7397"><span class="linenum">7397</span></a>              foreach (<a class="var it25297" onMouseOver="hilite(25297)" onMouseOut="lolite()" onClick="logVariable('gradinginfo')" href="../../_variables/gradinginfo.html">$gradinginfo</a>-&gt;<a onClick="logVariable('outcomes')" class="var it43809" onMouseOver="hilite(43809)" onMouseOut="lolite()" href="../../_variables/outcomes.html">outcomes</a> as <a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a> =&gt; <a class="var it32205" onMouseOver="hilite(32205)" onMouseOut="lolite()" onClick="logVariable('oldoutcome')" href="../../_variables/oldoutcome.html">$oldoutcome</a>) {
<a name="l7398"><span class="linenum">7398</span></a>                  <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = 'outcome_'.<a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>;
<a name="l7399"><span class="linenum">7399</span></a>                  <a class="var it32237" onMouseOver="hilite(32237)" onMouseOut="lolite()" onClick="logVariable('sourceuserid')" href="../../_variables/sourceuserid.html">$sourceuserid</a> = <a class="var it32237" onMouseOver="hilite(32237)" onMouseOut="lolite()" onClick="logVariable('sourceuserid')" href="../../_variables/sourceuserid.html">$sourceuserid</a> !== null ? <a class="var it32237" onMouseOver="hilite(32237)" onMouseOut="lolite()" onClick="logVariable('sourceuserid')" href="../../_variables/sourceuserid.html">$sourceuserid</a> : <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l7400"><span class="linenum">7400</span></a>                  if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;{<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>}[<a class="var it32237" onMouseOver="hilite(32237)" onMouseOut="lolite()" onClick="logVariable('sourceuserid')" href="../../_variables/sourceuserid.html">$sourceuserid</a>]) &amp;&amp;
<a name="l7401"><span class="linenum">7401</span></a>                          <a class="var it32205" onMouseOver="hilite(32205)" onMouseOut="lolite()" onClick="logVariable('oldoutcome')" href="../../_variables/oldoutcome.html">$oldoutcome</a>-&gt;<a onClick="logVariable('grades')" class="var it45747" onMouseOver="hilite(45747)" onMouseOut="lolite()" href="../../_variables/grades.html">grades</a>[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>]-&gt;grade != <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;{<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>}[<a class="var it32237" onMouseOver="hilite(32237)" onMouseOut="lolite()" onClick="logVariable('sourceuserid')" href="../../_variables/sourceuserid.html">$sourceuserid</a>]) {
<a name="l7402"><span class="linenum">7402</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>[<a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>] = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>-&gt;{<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>}[<a class="var it32237" onMouseOver="hilite(32237)" onMouseOut="lolite()" onClick="logVariable('sourceuserid')" href="../../_variables/sourceuserid.html">$sourceuserid</a>];
<a name="l7403"><span class="linenum">7403</span></a>                  }
<a name="l7404"><span class="linenum">7404</span></a>              }
<a name="l7405"><span class="linenum">7405</span></a>          }
<a name="l7406"><span class="linenum">7406</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) &gt; 0) {
<a name="l7407"><span class="linenum">7407</span></a>              <a class="function" onClick="logFunction('grade_update_outcomes')" href="../../_functions/grade_update_outcomes.html" onMouseOver="funcPopup(event,'grade_update_outcomes')">grade_update_outcomes</a>('mod/assign',
<a name="l7408"><span class="linenum">7408</span></a>                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>-&gt;id,
<a name="l7409"><span class="linenum">7409</span></a>                                    'mod',
<a name="l7410"><span class="linenum">7410</span></a>                                    'assign',
<a name="l7411"><span class="linenum">7411</span></a>                                    <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id,
<a name="l7412"><span class="linenum">7412</span></a>                                    <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>,
<a name="l7413"><span class="linenum">7413</span></a>                                    <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l7414"><span class="linenum">7414</span></a>          }
<a name="l7415"><span class="linenum">7415</span></a>      }
<a name="l7416"><span class="linenum">7416</span></a>  
<a name="l7417"><span class="linenum">7417</span></a>      <span class="comment">/**</span>
<a name="l7418"><span class="linenum">7418</span></a>  <span class="comment">     * If the requirements are met - reopen the submission for another attempt.</span>
<a name="l7419"><span class="linenum">7419</span></a>  <span class="comment">     * Only call this function when grading the latest attempt.</span>
<a name="l7420"><span class="linenum">7420</span></a>  <span class="comment">     *</span>
<a name="l7421"><span class="linenum">7421</span></a>  <span class="comment">     * @param int $userid The userid.</span>
<a name="l7422"><span class="linenum">7422</span></a>  <span class="comment">     * @param stdClass $submission The submission (may be a group submission).</span>
<a name="l7423"><span class="linenum">7423</span></a>  <span class="comment">     * @param bool $addattempt - True if the &quot;allow another attempt&quot; checkbox was checked.</span>
<a name="l7424"><span class="linenum">7424</span></a>  <span class="comment">     * @return bool - true if another attempt was added.</span>
<a name="l7425"><span class="linenum">7425</span></a>  <span class="comment">     */</span>
<a name="l7426"><span class="linenum">7426</span></a>      protected function <a class="function" onClick="logFunction('reopen_submission_if_required')" href="../../_functions/reopen_submission_if_required.html" onMouseOver="funcPopup(event,'reopen_submission_if_required')">reopen_submission_if_required</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>, <a class="var it32236" onMouseOver="hilite(32236)" onMouseOut="lolite()" onClick="logVariable('addattempt')" href="../../_variables/addattempt.html">$addattempt</a>) {
<a name="l7427"><span class="linenum">7427</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l7428"><span class="linenum">7428</span></a>          <a class="var it20916" onMouseOver="hilite(20916)" onMouseOut="lolite()" onClick="logVariable('maxattemptsreached')" href="../../_variables/maxattemptsreached.html">$maxattemptsreached</a> = !empty(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) &amp;&amp;
<a name="l7429"><span class="linenum">7429</span></a>                                <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> &gt;= (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a> - 1) &amp;&amp;
<a name="l7430"><span class="linenum">7430</span></a>                                <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('maxattempts')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/maxattempts.html">maxattempts</a> != <a class="constant" onClick="logConstant('ASSIGN_UNLIMITED_ATTEMPTS')" href="../../_constants/ASSIGN_UNLIMITED_ATTEMPTS.html" onMouseOver="constPopup(event,'ASSIGN_UNLIMITED_ATTEMPTS')">ASSIGN_UNLIMITED_ATTEMPTS</a>;
<a name="l7431"><span class="linenum">7431</span></a>          <a class="var it32238" onMouseOver="hilite(32238)" onMouseOut="lolite()" onClick="logVariable('shouldreopen')" href="../../_variables/shouldreopen.html">$shouldreopen</a> = false;
<a name="l7432"><span class="linenum">7432</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('attemptreopenmethod')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/attemptreopenmethod.html">attemptreopenmethod</a> == <a class="constant" onClick="logConstant('ASSIGN_ATTEMPT_REOPEN_METHOD_UNTILPASS')" href="../../_constants/ASSIGN_ATTEMPT_REOPEN_METHOD_UNTILPASS.html" onMouseOver="constPopup(event,'ASSIGN_ATTEMPT_REOPEN_METHOD_UNTILPASS')">ASSIGN_ATTEMPT_REOPEN_METHOD_UNTILPASS</a>) {
<a name="l7433"><span class="linenum">7433</span></a>  <span class="comment">            // Check the gradetopass from the gradebook.</span>
<a name="l7434"><span class="linenum">7434</span></a>              <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_grade_item')" href="../../_functions/get_grade_item.html" onMouseOver="funcPopup(event,'get_grade_item')">get_grade_item</a>();
<a name="l7435"><span class="linenum">7435</span></a>              if (<a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>) {
<a name="l7436"><span class="linenum">7436</span></a>                  <a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../_variables/gradegrade.html">$gradegrade</a> = <a class="class" onClick="logClass('grade_grade')" href="../../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>::<a class="function" onClick="logFunction('fetch')" href="../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(array('userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 'itemid' =&gt; <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('id')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l7437"><span class="linenum">7437</span></a>  
<a name="l7438"><span class="linenum">7438</span></a>  <span class="comment">                // Do not reopen if is_passed returns null, e.g. if there is no pass criterion set.</span>
<a name="l7439"><span class="linenum">7439</span></a>                  if (<a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../_variables/gradegrade.html">$gradegrade</a> &amp;&amp; (<a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../_variables/gradegrade.html">$gradegrade</a>-&gt;<a class="function" onClick="logFunction('is_passed')" href="../../_functions/is_passed.html" onMouseOver="funcPopup(event,'is_passed')">is_passed</a>() === false)) {
<a name="l7440"><span class="linenum">7440</span></a>                      <a class="var it32238" onMouseOver="hilite(32238)" onMouseOut="lolite()" onClick="logVariable('shouldreopen')" href="../../_variables/shouldreopen.html">$shouldreopen</a> = true;
<a name="l7441"><span class="linenum">7441</span></a>                  }
<a name="l7442"><span class="linenum">7442</span></a>              }
<a name="l7443"><span class="linenum">7443</span></a>          }
<a name="l7444"><span class="linenum">7444</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('attemptreopenmethod')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/attemptreopenmethod.html">attemptreopenmethod</a> == <a class="constant" onClick="logConstant('ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL')" href="../../_constants/ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL.html" onMouseOver="constPopup(event,'ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL')">ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL</a> &amp;&amp;
<a name="l7445"><span class="linenum">7445</span></a>                  !empty(<a class="var it32236" onMouseOver="hilite(32236)" onMouseOut="lolite()" onClick="logVariable('addattempt')" href="../../_variables/addattempt.html">$addattempt</a>)) {
<a name="l7446"><span class="linenum">7446</span></a>              <a class="var it32238" onMouseOver="hilite(32238)" onMouseOut="lolite()" onClick="logVariable('shouldreopen')" href="../../_variables/shouldreopen.html">$shouldreopen</a> = true;
<a name="l7447"><span class="linenum">7447</span></a>          }
<a name="l7448"><span class="linenum">7448</span></a>          if (<a class="var it32238" onMouseOver="hilite(32238)" onMouseOut="lolite()" onClick="logVariable('shouldreopen')" href="../../_variables/shouldreopen.html">$shouldreopen</a> &amp;&amp; !<a class="var it20916" onMouseOver="hilite(20916)" onMouseOut="lolite()" onClick="logVariable('maxattemptsreached')" href="../../_variables/maxattemptsreached.html">$maxattemptsreached</a>) {
<a name="l7449"><span class="linenum">7449</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_attempt')" href="../../_functions/add_attempt.html" onMouseOver="funcPopup(event,'add_attempt')">add_attempt</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7450"><span class="linenum">7450</span></a>              return true;
<a name="l7451"><span class="linenum">7451</span></a>          }
<a name="l7452"><span class="linenum">7452</span></a>          return false;
<a name="l7453"><span class="linenum">7453</span></a>      }
<a name="l7454"><span class="linenum">7454</span></a>  
<a name="l7455"><span class="linenum">7455</span></a>      <span class="comment">/**</span>
<a name="l7456"><span class="linenum">7456</span></a>  <span class="comment">     * Save grade update.</span>
<a name="l7457"><span class="linenum">7457</span></a>  <span class="comment">     *</span>
<a name="l7458"><span class="linenum">7458</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l7459"><span class="linenum">7459</span></a>  <span class="comment">     * @param  stdClass $data</span>
<a name="l7460"><span class="linenum">7460</span></a>  <span class="comment">     * @return bool - was the grade saved</span>
<a name="l7461"><span class="linenum">7461</span></a>  <span class="comment">     */</span>
<a name="l7462"><span class="linenum">7462</span></a>      public function <a class="function" onClick="logFunction('save_grade')" href="../../_functions/save_grade.html" onMouseOver="funcPopup(event,'save_grade')">save_grade</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l7463"><span class="linenum">7463</span></a>  
<a name="l7464"><span class="linenum">7464</span></a>  <span class="comment">        // Need grade permission.</span>
<a name="l7465"><span class="linenum">7465</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:grade', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l7466"><span class="linenum">7466</span></a>  
<a name="l7467"><span class="linenum">7467</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l7468"><span class="linenum">7468</span></a>          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = null;
<a name="l7469"><span class="linenum">7469</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a>) {
<a name="l7470"><span class="linenum">7470</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 0, false, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>);
<a name="l7471"><span class="linenum">7471</span></a>          } else {
<a name="l7472"><span class="linenum">7472</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>);
<a name="l7473"><span class="linenum">7473</span></a>          }
<a name="l7474"><span class="linenum">7474</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('teamsubmission')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../_variables/teamsubmission.html">teamsubmission</a> &amp;&amp; !empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('applytoall')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/applytoall.html">applytoall</a>)) {
<a name="l7475"><span class="linenum">7475</span></a>              <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = 0;
<a name="l7476"><span class="linenum">7476</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l7477"><span class="linenum">7477</span></a>                  <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7478"><span class="linenum">7478</span></a>                  if (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>) {
<a name="l7479"><span class="linenum">7479</span></a>                      <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l7480"><span class="linenum">7480</span></a>                  }
<a name="l7481"><span class="linenum">7481</span></a>              }
<a name="l7482"><span class="linenum">7482</span></a>              <a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group_members')" href="../../_functions/get_submission_group_members.html" onMouseOver="funcPopup(event,'get_submission_group_members')">get_submission_group_members</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, true, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_only_active_users')" href="../../_functions/show_only_active_users.html" onMouseOver="funcPopup(event,'show_only_active_users')">show_only_active_users</a>());
<a name="l7483"><span class="linenum">7483</span></a>              foreach (<a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a> as <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>) {
<a name="l7484"><span class="linenum">7484</span></a>  <span class="comment">                // User may exist in multple groups (which should put them in the default group).</span>
<a name="l7485"><span class="linenum">7485</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('apply_grade_to_user')" href="../../_functions/apply_grade_to_user.html" onMouseOver="funcPopup(event,'apply_grade_to_user')">apply_grade_to_user</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('id')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>);
<a name="l7486"><span class="linenum">7486</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_outcomes')" href="../../_functions/process_outcomes.html" onMouseOver="funcPopup(event,'process_outcomes')">process_outcomes</a>(<a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('id')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7487"><span class="linenum">7487</span></a>              }
<a name="l7488"><span class="linenum">7488</span></a>          } else {
<a name="l7489"><span class="linenum">7489</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('apply_grade_to_user')" href="../../_functions/apply_grade_to_user.html" onMouseOver="funcPopup(event,'apply_grade_to_user')">apply_grade_to_user</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a>);
<a name="l7490"><span class="linenum">7490</span></a>  
<a name="l7491"><span class="linenum">7491</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_outcomes')" href="../../_functions/process_outcomes.html" onMouseOver="funcPopup(event,'process_outcomes')">process_outcomes</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l7492"><span class="linenum">7492</span></a>          }
<a name="l7493"><span class="linenum">7493</span></a>  
<a name="l7494"><span class="linenum">7494</span></a>          return true;
<a name="l7495"><span class="linenum">7495</span></a>      }
<a name="l7496"><span class="linenum">7496</span></a>  
<a name="l7497"><span class="linenum">7497</span></a>      <span class="comment">/**</span>
<a name="l7498"><span class="linenum">7498</span></a>  <span class="comment">     * Save grade.</span>
<a name="l7499"><span class="linenum">7499</span></a>  <span class="comment">     *</span>
<a name="l7500"><span class="linenum">7500</span></a>  <span class="comment">     * @param  moodleform $mform</span>
<a name="l7501"><span class="linenum">7501</span></a>  <span class="comment">     * @return bool - was the grade saved</span>
<a name="l7502"><span class="linenum">7502</span></a>  <span class="comment">     */</span>
<a name="l7503"><span class="linenum">7503</span></a>      protected function <a class="function" onClick="logFunction('process_save_grade')" href="../../_functions/process_save_grade.html" onMouseOver="funcPopup(event,'process_save_grade')">process_save_grade</a>(&amp;<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l7504"><span class="linenum">7504</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>;
<a name="l7505"><span class="linenum">7505</span></a>  <span class="comment">        // Include grade form.</span>
<a name="l7506"><span class="linenum">7506</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/gradeform.php.html">/mod/assign/gradeform.php</a>');
<a name="l7507"><span class="linenum">7507</span></a>  
<a name="l7508"><span class="linenum">7508</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l7509"><span class="linenum">7509</span></a>  
<a name="l7510"><span class="linenum">7510</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>();
<a name="l7511"><span class="linenum">7511</span></a>          <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a> = <a class="function" onClick="logFunction('required_param')" href="../../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('rownum', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l7512"><span class="linenum">7512</span></a>          <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('attemptnumber', -1, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l7513"><span class="linenum">7513</span></a>          <a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('useridlistid', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_useridlist_key_id')" href="../../_functions/get_useridlist_key_id.html" onMouseOver="funcPopup(event,'get_useridlist_key_id')">get_useridlist_key_id</a>(), <a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>);
<a name="l7514"><span class="linenum">7514</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('userid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l7515"><span class="linenum">7515</span></a>          if (!<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7516"><span class="linenum">7516</span></a>              if (empty(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('mod_assign_useridlist')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/mod_assign_useridlist.html">mod_assign_useridlist</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_useridlist_key')" href="../../_functions/get_useridlist_key.html" onMouseOver="funcPopup(event,'get_useridlist_key')">get_useridlist_key</a>(<a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a>)])) {
<a name="l7517"><span class="linenum">7517</span></a>  <span class="comment">                // If the userid list is not stored we must not save, as it is possible that the user in a</span>
<a name="l7518"><span class="linenum">7518</span></a>  <span class="comment">                // given row position may not be the same now as when the grading page was generated.</span>
<a name="l7519"><span class="linenum">7519</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/assign/view.php.html">/mod/assign/view.php</a>', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id));
<a name="l7520"><span class="linenum">7520</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('useridlistnotcached', 'mod_assign', <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>);
<a name="l7521"><span class="linenum">7521</span></a>              }
<a name="l7522"><span class="linenum">7522</span></a>              <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> = <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('mod_assign_useridlist')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../../_variables/mod_assign_useridlist.html">mod_assign_useridlist</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_useridlist_key')" href="../../_functions/get_useridlist_key.html" onMouseOver="funcPopup(event,'get_useridlist_key')">get_useridlist_key</a>(<a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a>)];
<a name="l7523"><span class="linenum">7523</span></a>          } else {
<a name="l7524"><span class="linenum">7524</span></a>              <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> = array(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7525"><span class="linenum">7525</span></a>              <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a> = 0;
<a name="l7526"><span class="linenum">7526</span></a>          }
<a name="l7527"><span class="linenum">7527</span></a>  
<a name="l7528"><span class="linenum">7528</span></a>          <a class="var it490" onMouseOver="hilite(490)" onMouseOut="lolite()" onClick="logVariable('last')" href="../../_variables/last.html">$last</a> = false;
<a name="l7529"><span class="linenum">7529</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = <a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a>[<a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a>];
<a name="l7530"><span class="linenum">7530</span></a>          if (<a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a> == <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a>) - 1) {
<a name="l7531"><span class="linenum">7531</span></a>              <a class="var it490" onMouseOver="hilite(490)" onMouseOut="lolite()" onClick="logVariable('last')" href="../../_variables/last.html">$last</a> = true;
<a name="l7532"><span class="linenum">7532</span></a>          }
<a name="l7533"><span class="linenum">7533</span></a>  
<a name="l7534"><span class="linenum">7534</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l7535"><span class="linenum">7535</span></a>  
<a name="l7536"><span class="linenum">7536</span></a>          <a class="var it32240" onMouseOver="hilite(32240)" onMouseOut="lolite()" onClick="logVariable('gradeformparams')" href="../../_variables/gradeformparams.html">$gradeformparams</a> = array('rownum' =&gt; <a class="var it5054" onMouseOver="hilite(5054)" onMouseOut="lolite()" onClick="logVariable('rownum')" href="../../_variables/rownum.html">$rownum</a>,
<a name="l7537"><span class="linenum">7537</span></a>                                   'useridlistid' =&gt; <a class="var it25248" onMouseOver="hilite(25248)" onMouseOut="lolite()" onClick="logVariable('useridlistid')" href="../../_variables/useridlistid.html">$useridlistid</a>,
<a name="l7538"><span class="linenum">7538</span></a>                                   'last' =&gt; <a class="var it490" onMouseOver="hilite(490)" onMouseOut="lolite()" onClick="logVariable('last')" href="../../_variables/last.html">$last</a>,
<a name="l7539"><span class="linenum">7539</span></a>                                   'attemptnumber' =&gt; <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>,
<a name="l7540"><span class="linenum">7540</span></a>                                   'userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7541"><span class="linenum">7541</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_assign_grade_form')" href="../../_classes/mod_assign_grade_form.html" onMouseOver="classPopup(event,'mod_assign_grade_form')">mod_assign_grade_form</a>(null,
<a name="l7542"><span class="linenum">7542</span></a>                                             array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it32240" onMouseOver="hilite(32240)" onMouseOut="lolite()" onClick="logVariable('gradeformparams')" href="../../_variables/gradeformparams.html">$gradeformparams</a>),
<a name="l7543"><span class="linenum">7543</span></a>                                             'post',
<a name="l7544"><span class="linenum">7544</span></a>                                             '',
<a name="l7545"><span class="linenum">7545</span></a>                                             array('class'=&gt;'gradeform'));
<a name="l7546"><span class="linenum">7546</span></a>  
<a name="l7547"><span class="linenum">7547</span></a>          if (<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l7548"><span class="linenum">7548</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('save_grade')" href="../../_functions/save_grade.html" onMouseOver="funcPopup(event,'save_grade')">save_grade</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../_variables/formdata.html">$formdata</a>);
<a name="l7549"><span class="linenum">7549</span></a>          } else {
<a name="l7550"><span class="linenum">7550</span></a>              return false;
<a name="l7551"><span class="linenum">7551</span></a>          }
<a name="l7552"><span class="linenum">7552</span></a>      }
<a name="l7553"><span class="linenum">7553</span></a>  
<a name="l7554"><span class="linenum">7554</span></a>      <span class="comment">/**</span>
<a name="l7555"><span class="linenum">7555</span></a>  <span class="comment">     * This function is a static wrapper around can_upgrade.</span>
<a name="l7556"><span class="linenum">7556</span></a>  <span class="comment">     *</span>
<a name="l7557"><span class="linenum">7557</span></a>  <span class="comment">     * @param string $type The plugin type</span>
<a name="l7558"><span class="linenum">7558</span></a>  <span class="comment">     * @param int $version The plugin version</span>
<a name="l7559"><span class="linenum">7559</span></a>  <span class="comment">     * @return bool</span>
<a name="l7560"><span class="linenum">7560</span></a>  <span class="comment">     */</span>
<a name="l7561"><span class="linenum">7561</span></a>      public static function <a class="function" onClick="logFunction('can_upgrade_assignment')" href="../../_functions/can_upgrade_assignment.html" onMouseOver="funcPopup(event,'can_upgrade_assignment')">can_upgrade_assignment</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a>) {
<a name="l7562"><span class="linenum">7562</span></a>          <a class="var it284" onMouseOver="hilite(284)" onMouseOut="lolite()" onClick="logVariable('assignment')" href="../../_variables/assignment.html">$assignment</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign')" href="../../_classes/assign.html" onMouseOver="classPopup(event,'assign')">assign</a>(null, null, null);
<a name="l7563"><span class="linenum">7563</span></a>          return <a class="var it284" onMouseOver="hilite(284)" onMouseOut="lolite()" onClick="logVariable('assignment')" href="../../_variables/assignment.html">$assignment</a>-&gt;<a class="function" onClick="logFunction('can_upgrade')" href="../../_functions/can_upgrade.html" onMouseOver="funcPopup(event,'can_upgrade')">can_upgrade</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a>);
<a name="l7564"><span class="linenum">7564</span></a>      }
<a name="l7565"><span class="linenum">7565</span></a>  
<a name="l7566"><span class="linenum">7566</span></a>      <span class="comment">/**</span>
<a name="l7567"><span class="linenum">7567</span></a>  <span class="comment">     * This function returns true if it can upgrade an assignment from the 2.2 module.</span>
<a name="l7568"><span class="linenum">7568</span></a>  <span class="comment">     *</span>
<a name="l7569"><span class="linenum">7569</span></a>  <span class="comment">     * @param string $type The plugin type</span>
<a name="l7570"><span class="linenum">7570</span></a>  <span class="comment">     * @param int $version The plugin version</span>
<a name="l7571"><span class="linenum">7571</span></a>  <span class="comment">     * @return bool</span>
<a name="l7572"><span class="linenum">7572</span></a>  <span class="comment">     */</span>
<a name="l7573"><span class="linenum">7573</span></a>      public function <a class="function" onClick="logFunction('can_upgrade')" href="../../_functions/can_upgrade.html" onMouseOver="funcPopup(event,'can_upgrade')">can_upgrade</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a>) {
<a name="l7574"><span class="linenum">7574</span></a>          if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> == 'offline' &amp;&amp; <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a> &gt;= 2011112900) {
<a name="l7575"><span class="linenum">7575</span></a>              return true;
<a name="l7576"><span class="linenum">7576</span></a>          }
<a name="l7577"><span class="linenum">7577</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('submissionplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/submissionplugins.html">submissionplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l7578"><span class="linenum">7578</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('can_upgrade')" href="../../_functions/can_upgrade.html" onMouseOver="funcPopup(event,'can_upgrade')">can_upgrade</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a>)) {
<a name="l7579"><span class="linenum">7579</span></a>                  return true;
<a name="l7580"><span class="linenum">7580</span></a>              }
<a name="l7581"><span class="linenum">7581</span></a>          }
<a name="l7582"><span class="linenum">7582</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l7583"><span class="linenum">7583</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('can_upgrade')" href="../../_functions/can_upgrade.html" onMouseOver="funcPopup(event,'can_upgrade')">can_upgrade</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../_variables/version.html">$version</a>)) {
<a name="l7584"><span class="linenum">7584</span></a>                  return true;
<a name="l7585"><span class="linenum">7585</span></a>              }
<a name="l7586"><span class="linenum">7586</span></a>          }
<a name="l7587"><span class="linenum">7587</span></a>          return false;
<a name="l7588"><span class="linenum">7588</span></a>      }
<a name="l7589"><span class="linenum">7589</span></a>  
<a name="l7590"><span class="linenum">7590</span></a>      <span class="comment">/**</span>
<a name="l7591"><span class="linenum">7591</span></a>  <span class="comment">     * Copy all the files from the old assignment files area to the new one.</span>
<a name="l7592"><span class="linenum">7592</span></a>  <span class="comment">     * This is used by the plugin upgrade code.</span>
<a name="l7593"><span class="linenum">7593</span></a>  <span class="comment">     *</span>
<a name="l7594"><span class="linenum">7594</span></a>  <span class="comment">     * @param int $oldcontextid The old assignment context id</span>
<a name="l7595"><span class="linenum">7595</span></a>  <span class="comment">     * @param int $oldcomponent The old assignment component ('assignment')</span>
<a name="l7596"><span class="linenum">7596</span></a>  <span class="comment">     * @param int $oldfilearea The old assignment filearea ('submissions')</span>
<a name="l7597"><span class="linenum">7597</span></a>  <span class="comment">     * @param int $olditemid The old submissionid (can be null e.g. intro)</span>
<a name="l7598"><span class="linenum">7598</span></a>  <span class="comment">     * @param int $newcontextid The new assignment context id</span>
<a name="l7599"><span class="linenum">7599</span></a>  <span class="comment">     * @param int $newcomponent The new assignment component ('assignment')</span>
<a name="l7600"><span class="linenum">7600</span></a>  <span class="comment">     * @param int $newfilearea The new assignment filearea ('submissions')</span>
<a name="l7601"><span class="linenum">7601</span></a>  <span class="comment">     * @param int $newitemid The new submissionid (can be null e.g. intro)</span>
<a name="l7602"><span class="linenum">7602</span></a>  <span class="comment">     * @return int The number of files copied</span>
<a name="l7603"><span class="linenum">7603</span></a>  <span class="comment">     */</span>
<a name="l7604"><span class="linenum">7604</span></a>      public function <a class="function" onClick="logFunction('copy_area_files_for_upgrade')" href="../../_functions/copy_area_files_for_upgrade.html" onMouseOver="funcPopup(event,'copy_area_files_for_upgrade')">copy_area_files_for_upgrade</a>(<a class="var it5968" onMouseOver="hilite(5968)" onMouseOut="lolite()" onClick="logVariable('oldcontextid')" href="../../_variables/oldcontextid.html">$oldcontextid</a>,
<a name="l7605"><span class="linenum">7605</span></a>                                                  <a class="var it32241" onMouseOver="hilite(32241)" onMouseOut="lolite()" onClick="logVariable('oldcomponent')" href="../../_variables/oldcomponent.html">$oldcomponent</a>,
<a name="l7606"><span class="linenum">7606</span></a>                                                  <a class="var it32242" onMouseOver="hilite(32242)" onMouseOut="lolite()" onClick="logVariable('oldfilearea')" href="../../_variables/oldfilearea.html">$oldfilearea</a>,
<a name="l7607"><span class="linenum">7607</span></a>                                                  <a class="var it15456" onMouseOver="hilite(15456)" onMouseOut="lolite()" onClick="logVariable('olditemid')" href="../../_variables/olditemid.html">$olditemid</a>,
<a name="l7608"><span class="linenum">7608</span></a>                                                  <a class="var it5969" onMouseOver="hilite(5969)" onMouseOut="lolite()" onClick="logVariable('newcontextid')" href="../../_variables/newcontextid.html">$newcontextid</a>,
<a name="l7609"><span class="linenum">7609</span></a>                                                  <a class="var it14742" onMouseOver="hilite(14742)" onMouseOut="lolite()" onClick="logVariable('newcomponent')" href="../../_variables/newcomponent.html">$newcomponent</a>,
<a name="l7610"><span class="linenum">7610</span></a>                                                  <a class="var it17970" onMouseOver="hilite(17970)" onMouseOut="lolite()" onClick="logVariable('newfilearea')" href="../../_variables/newfilearea.html">$newfilearea</a>,
<a name="l7611"><span class="linenum">7611</span></a>                                                  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('newitemid')" href="../../_variables/newitemid.html">$newitemid</a>) {
<a name="l7612"><span class="linenum">7612</span></a>  <span class="comment">        // Note, this code is based on some code in filestorage - but that code</span>
<a name="l7613"><span class="linenum">7613</span></a>  <span class="comment">        // deleted the old files (which we don't want).</span>
<a name="l7614"><span class="linenum">7614</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = 0;
<a name="l7615"><span class="linenum">7615</span></a>  
<a name="l7616"><span class="linenum">7616</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l7617"><span class="linenum">7617</span></a>  
<a name="l7618"><span class="linenum">7618</span></a>          <a class="var it9431" onMouseOver="hilite(9431)" onMouseOut="lolite()" onClick="logVariable('oldfiles')" href="../../_variables/oldfiles.html">$oldfiles</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it5968" onMouseOver="hilite(5968)" onMouseOut="lolite()" onClick="logVariable('oldcontextid')" href="../../_variables/oldcontextid.html">$oldcontextid</a>,
<a name="l7619"><span class="linenum">7619</span></a>                                          <a class="var it32241" onMouseOver="hilite(32241)" onMouseOut="lolite()" onClick="logVariable('oldcomponent')" href="../../_variables/oldcomponent.html">$oldcomponent</a>,
<a name="l7620"><span class="linenum">7620</span></a>                                          <a class="var it32242" onMouseOver="hilite(32242)" onMouseOut="lolite()" onClick="logVariable('oldfilearea')" href="../../_variables/oldfilearea.html">$oldfilearea</a>,
<a name="l7621"><span class="linenum">7621</span></a>                                          <a class="var it15456" onMouseOver="hilite(15456)" onMouseOut="lolite()" onClick="logVariable('olditemid')" href="../../_variables/olditemid.html">$olditemid</a>,
<a name="l7622"><span class="linenum">7622</span></a>                                          'id',
<a name="l7623"><span class="linenum">7623</span></a>                                          false);
<a name="l7624"><span class="linenum">7624</span></a>          foreach (<a class="var it9431" onMouseOver="hilite(9431)" onMouseOut="lolite()" onClick="logVariable('oldfiles')" href="../../_variables/oldfiles.html">$oldfiles</a> as <a class="var it9434" onMouseOver="hilite(9434)" onMouseOut="lolite()" onClick="logVariable('oldfile')" href="../../_variables/oldfile.html">$oldfile</a>) {
<a name="l7625"><span class="linenum">7625</span></a>              <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a> = new stdClass();
<a name="l7626"><span class="linenum">7626</span></a>              <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('contextid')" class="var it42901" onMouseOver="hilite(42901)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it5969" onMouseOver="hilite(5969)" onMouseOut="lolite()" onClick="logVariable('newcontextid')" href="../../_variables/newcontextid.html">$newcontextid</a>;
<a name="l7627"><span class="linenum">7627</span></a>              <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('component')" class="var it42901" onMouseOver="hilite(42901)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = <a class="var it14742" onMouseOver="hilite(14742)" onMouseOut="lolite()" onClick="logVariable('newcomponent')" href="../../_variables/newcomponent.html">$newcomponent</a>;
<a name="l7628"><span class="linenum">7628</span></a>              <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('filearea')" class="var it42901" onMouseOver="hilite(42901)" onMouseOut="lolite()" href="../../_variables/filearea.html">filearea</a> = <a class="var it17970" onMouseOver="hilite(17970)" onMouseOut="lolite()" onClick="logVariable('newfilearea')" href="../../_variables/newfilearea.html">$newfilearea</a>;
<a name="l7629"><span class="linenum">7629</span></a>              <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>-&gt;<a onClick="logVariable('itemid')" class="var it42901" onMouseOver="hilite(42901)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('newitemid')" href="../../_variables/newitemid.html">$newitemid</a>;
<a name="l7630"><span class="linenum">7630</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_storedfile')" href="../../_functions/create_file_from_storedfile.html" onMouseOver="funcPopup(event,'create_file_from_storedfile')">create_file_from_storedfile</a>(<a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>, <a class="var it9434" onMouseOver="hilite(9434)" onMouseOut="lolite()" onClick="logVariable('oldfile')" href="../../_variables/oldfile.html">$oldfile</a>);
<a name="l7631"><span class="linenum">7631</span></a>              <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> += 1;
<a name="l7632"><span class="linenum">7632</span></a>          }
<a name="l7633"><span class="linenum">7633</span></a>  
<a name="l7634"><span class="linenum">7634</span></a>          return <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>;
<a name="l7635"><span class="linenum">7635</span></a>      }
<a name="l7636"><span class="linenum">7636</span></a>  
<a name="l7637"><span class="linenum">7637</span></a>      <span class="comment">/**</span>
<a name="l7638"><span class="linenum">7638</span></a>  <span class="comment">     * Add a new attempt for each user in the list - but reopen each group assignment</span>
<a name="l7639"><span class="linenum">7639</span></a>  <span class="comment">     * at most 1 time.</span>
<a name="l7640"><span class="linenum">7640</span></a>  <span class="comment">     *</span>
<a name="l7641"><span class="linenum">7641</span></a>  <span class="comment">     * @param array $useridlist Array of userids to reopen.</span>
<a name="l7642"><span class="linenum">7642</span></a>  <span class="comment">     * @return bool</span>
<a name="l7643"><span class="linenum">7643</span></a>  <span class="comment">     */</span>
<a name="l7644"><span class="linenum">7644</span></a>      protected function <a class="function" onClick="logFunction('process_add_attempt_group')" href="../../_functions/process_add_attempt_group.html" onMouseOver="funcPopup(event,'process_add_attempt_group')">process_add_attempt_group</a>(<a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a>) {
<a name="l7645"><span class="linenum">7645</span></a>          <a class="var it32243" onMouseOver="hilite(32243)" onMouseOut="lolite()" onClick="logVariable('groupsprocessed')" href="../../_variables/groupsprocessed.html">$groupsprocessed</a> = array();
<a name="l7646"><span class="linenum">7646</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = true;
<a name="l7647"><span class="linenum">7647</span></a>  
<a name="l7648"><span class="linenum">7648</span></a>          foreach (<a class="var it32135" onMouseOver="hilite(32135)" onMouseOut="lolite()" onClick="logVariable('useridlist')" href="../../_variables/useridlist.html">$useridlist</a> as <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7649"><span class="linenum">7649</span></a>              <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = 0;
<a name="l7650"><span class="linenum">7650</span></a>              <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_group')" href="../../_functions/get_submission_group.html" onMouseOver="funcPopup(event,'get_submission_group')">get_submission_group</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7651"><span class="linenum">7651</span></a>              if (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>) {
<a name="l7652"><span class="linenum">7652</span></a>                  <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l7653"><span class="linenum">7653</span></a>              }
<a name="l7654"><span class="linenum">7654</span></a>  
<a name="l7655"><span class="linenum">7655</span></a>              if (empty(<a class="var it32243" onMouseOver="hilite(32243)" onMouseOut="lolite()" onClick="logVariable('groupsprocessed')" href="../../_variables/groupsprocessed.html">$groupsprocessed</a>[<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>])) {
<a name="l7656"><span class="linenum">7656</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_add_attempt')" href="../../_functions/process_add_attempt.html" onMouseOver="funcPopup(event,'process_add_attempt')">process_add_attempt</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) &amp;&amp; <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l7657"><span class="linenum">7657</span></a>                  <a class="var it32243" onMouseOver="hilite(32243)" onMouseOut="lolite()" onClick="logVariable('groupsprocessed')" href="../../_variables/groupsprocessed.html">$groupsprocessed</a>[<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>] = true;
<a name="l7658"><span class="linenum">7658</span></a>              }
<a name="l7659"><span class="linenum">7659</span></a>          }
<a name="l7660"><span class="linenum">7660</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l7661"><span class="linenum">7661</span></a>      }
<a name="l7662"><span class="linenum">7662</span></a>  
<a name="l7663"><span class="linenum">7663</span></a>      <span class="comment">/**</span>
<a name="l7664"><span class="linenum">7664</span></a>  <span class="comment">     * Check for a sess key and then call add_attempt.</span>
<a name="l7665"><span class="linenum">7665</span></a>  <span class="comment">     *</span>
<a name="l7666"><span class="linenum">7666</span></a>  <span class="comment">     * @param int $userid int The user to add the attempt for</span>
<a name="l7667"><span class="linenum">7667</span></a>  <span class="comment">     * @return bool - true if successful.</span>
<a name="l7668"><span class="linenum">7668</span></a>  <span class="comment">     */</span>
<a name="l7669"><span class="linenum">7669</span></a>      protected function <a class="function" onClick="logFunction('process_add_attempt')" href="../../_functions/process_add_attempt.html" onMouseOver="funcPopup(event,'process_add_attempt')">process_add_attempt</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7670"><span class="linenum">7670</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l7671"><span class="linenum">7671</span></a>  
<a name="l7672"><span class="linenum">7672</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_attempt')" href="../../_functions/add_attempt.html" onMouseOver="funcPopup(event,'add_attempt')">add_attempt</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7673"><span class="linenum">7673</span></a>      }
<a name="l7674"><span class="linenum">7674</span></a>  
<a name="l7675"><span class="linenum">7675</span></a>      <span class="comment">/**</span>
<a name="l7676"><span class="linenum">7676</span></a>  <span class="comment">     * Add a new attempt for a user.</span>
<a name="l7677"><span class="linenum">7677</span></a>  <span class="comment">     *</span>
<a name="l7678"><span class="linenum">7678</span></a>  <span class="comment">     * @param int $userid int The user to add the attempt for</span>
<a name="l7679"><span class="linenum">7679</span></a>  <span class="comment">     * @return bool - true if successful.</span>
<a name="l7680"><span class="linenum">7680</span></a>  <span class="comment">     */</span>
<a name="l7681"><span class="linenum">7681</span></a>      protected function <a class="function" onClick="logFunction('add_attempt')" href="../../_functions/add_attempt.html" onMouseOver="funcPopup(event,'add_attempt')">add_attempt</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7682"><span class="linenum">7682</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/assign:grade', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l7683"><span class="linenum">7683</span></a>  
<a name="l7684"><span class="linenum">7684</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;attemptreopenmethod == <a class="constant" onClick="logConstant('ASSIGN_ATTEMPT_REOPEN_METHOD_NONE')" href="../../_constants/ASSIGN_ATTEMPT_REOPEN_METHOD_NONE.html" onMouseOver="constPopup(event,'ASSIGN_ATTEMPT_REOPEN_METHOD_NONE')">ASSIGN_ATTEMPT_REOPEN_METHOD_NONE</a>) {
<a name="l7685"><span class="linenum">7685</span></a>              return false;
<a name="l7686"><span class="linenum">7686</span></a>          }
<a name="l7687"><span class="linenum">7687</span></a>  
<a name="l7688"><span class="linenum">7688</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l7689"><span class="linenum">7689</span></a>              <a class="var it24346" onMouseOver="hilite(24346)" onMouseOut="lolite()" onClick="logVariable('oldsubmission')" href="../../_variables/oldsubmission.html">$oldsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 0, false);
<a name="l7690"><span class="linenum">7690</span></a>          } else {
<a name="l7691"><span class="linenum">7691</span></a>              <a class="var it24346" onMouseOver="hilite(24346)" onMouseOut="lolite()" onClick="logVariable('oldsubmission')" href="../../_variables/oldsubmission.html">$oldsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l7692"><span class="linenum">7692</span></a>          }
<a name="l7693"><span class="linenum">7693</span></a>  
<a name="l7694"><span class="linenum">7694</span></a>          if (!<a class="var it24346" onMouseOver="hilite(24346)" onMouseOut="lolite()" onClick="logVariable('oldsubmission')" href="../../_variables/oldsubmission.html">$oldsubmission</a>) {
<a name="l7695"><span class="linenum">7695</span></a>              return false;
<a name="l7696"><span class="linenum">7696</span></a>          }
<a name="l7697"><span class="linenum">7697</span></a>  
<a name="l7698"><span class="linenum">7698</span></a>  <span class="comment">        // No more than max attempts allowed.</span>
<a name="l7699"><span class="linenum">7699</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;maxattempts != <a class="constant" onClick="logConstant('ASSIGN_UNLIMITED_ATTEMPTS')" href="../../_constants/ASSIGN_UNLIMITED_ATTEMPTS.html" onMouseOver="constPopup(event,'ASSIGN_UNLIMITED_ATTEMPTS')">ASSIGN_UNLIMITED_ATTEMPTS</a> &amp;&amp;
<a name="l7700"><span class="linenum">7700</span></a>              <a class="var it24346" onMouseOver="hilite(24346)" onMouseOut="lolite()" onClick="logVariable('oldsubmission')" href="../../_variables/oldsubmission.html">$oldsubmission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it43959" onMouseOver="hilite(43959)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> &gt;= (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;maxattempts - 1)) {
<a name="l7701"><span class="linenum">7701</span></a>              return false;
<a name="l7702"><span class="linenum">7702</span></a>          }
<a name="l7703"><span class="linenum">7703</span></a>  
<a name="l7704"><span class="linenum">7704</span></a>  <span class="comment">        // Create the new submission record for the group/user.</span>
<a name="l7705"><span class="linenum">7705</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission) {
<a name="l7706"><span class="linenum">7706</span></a>              <a class="var it32244" onMouseOver="hilite(32244)" onMouseOut="lolite()" onClick="logVariable('newsubmission')" href="../../_variables/newsubmission.html">$newsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_group_submission')" href="../../_functions/get_group_submission.html" onMouseOver="funcPopup(event,'get_group_submission')">get_group_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 0, true, <a class="var it24346" onMouseOver="hilite(24346)" onMouseOut="lolite()" onClick="logVariable('oldsubmission')" href="../../_variables/oldsubmission.html">$oldsubmission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it43959" onMouseOver="hilite(43959)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> + 1);
<a name="l7707"><span class="linenum">7707</span></a>          } else {
<a name="l7708"><span class="linenum">7708</span></a>              <a class="var it32244" onMouseOver="hilite(32244)" onMouseOut="lolite()" onClick="logVariable('newsubmission')" href="../../_variables/newsubmission.html">$newsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_submission')" href="../../_functions/get_user_submission.html" onMouseOver="funcPopup(event,'get_user_submission')">get_user_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, true, <a class="var it24346" onMouseOver="hilite(24346)" onMouseOut="lolite()" onClick="logVariable('oldsubmission')" href="../../_variables/oldsubmission.html">$oldsubmission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it43959" onMouseOver="hilite(43959)" onMouseOut="lolite()" href="../../_variables/attemptnumber.html">attemptnumber</a> + 1);
<a name="l7709"><span class="linenum">7709</span></a>          }
<a name="l7710"><span class="linenum">7710</span></a>  
<a name="l7711"><span class="linenum">7711</span></a>  <span class="comment">        // Set the status of the new attempt to reopened.</span>
<a name="l7712"><span class="linenum">7712</span></a>          <a class="var it32244" onMouseOver="hilite(32244)" onMouseOut="lolite()" onClick="logVariable('newsubmission')" href="../../_variables/newsubmission.html">$newsubmission</a>-&gt;<a onClick="logVariable('status')" class="var it45748" onMouseOver="hilite(45748)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_REOPENED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_REOPENED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_REOPENED')">ASSIGN_SUBMISSION_STATUS_REOPENED</a>;
<a name="l7713"><span class="linenum">7713</span></a>  
<a name="l7714"><span class="linenum">7714</span></a>  <span class="comment">        // Give each submission plugin a chance to process the add_attempt.</span>
<a name="l7715"><span class="linenum">7715</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugins')" href="../../_functions/get_submission_plugins.html" onMouseOver="funcPopup(event,'get_submission_plugins')">get_submission_plugins</a>();
<a name="l7716"><span class="linenum">7716</span></a>          foreach (<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../../_variables/plugins.html">$plugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l7717"><span class="linenum">7717</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l7718"><span class="linenum">7718</span></a>                  <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('add_attempt')" href="../../_functions/add_attempt.html" onMouseOver="funcPopup(event,'add_attempt')">add_attempt</a>(<a class="var it24346" onMouseOver="hilite(24346)" onMouseOut="lolite()" onClick="logVariable('oldsubmission')" href="../../_variables/oldsubmission.html">$oldsubmission</a>, <a class="var it32244" onMouseOver="hilite(32244)" onMouseOut="lolite()" onClick="logVariable('newsubmission')" href="../../_variables/newsubmission.html">$newsubmission</a>);
<a name="l7719"><span class="linenum">7719</span></a>              }
<a name="l7720"><span class="linenum">7720</span></a>          }
<a name="l7721"><span class="linenum">7721</span></a>  
<a name="l7722"><span class="linenum">7722</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_submission')" href="../../_functions/update_submission.html" onMouseOver="funcPopup(event,'update_submission')">update_submission</a>(<a class="var it32244" onMouseOver="hilite(32244)" onMouseOut="lolite()" onClick="logVariable('newsubmission')" href="../../_variables/newsubmission.html">$newsubmission</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;teamsubmission);
<a name="l7723"><span class="linenum">7723</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l7724"><span class="linenum">7724</span></a>          if (isset(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('locked')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/locked.html">locked</a>) &amp;&amp; <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('locked')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/locked.html">locked</a>) { // May not exist.
<a name="l7725"><span class="linenum">7725</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_unlock_submission')" href="../../_functions/process_unlock_submission.html" onMouseOver="funcPopup(event,'process_unlock_submission')">process_unlock_submission</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7726"><span class="linenum">7726</span></a>          }
<a name="l7727"><span class="linenum">7727</span></a>          return true;
<a name="l7728"><span class="linenum">7728</span></a>      }
<a name="l7729"><span class="linenum">7729</span></a>  
<a name="l7730"><span class="linenum">7730</span></a>      <span class="comment">/**</span>
<a name="l7731"><span class="linenum">7731</span></a>  <span class="comment">     * Get an upto date list of user grades and feedback for the gradebook.</span>
<a name="l7732"><span class="linenum">7732</span></a>  <span class="comment">     *</span>
<a name="l7733"><span class="linenum">7733</span></a>  <span class="comment">     * @param int $userid int or 0 for all users</span>
<a name="l7734"><span class="linenum">7734</span></a>  <span class="comment">     * @return array of grade data formated for the gradebook api</span>
<a name="l7735"><span class="linenum">7735</span></a>  <span class="comment">     *         The data required by the gradebook api is userid,</span>
<a name="l7736"><span class="linenum">7736</span></a>  <span class="comment">     *                                                   rawgrade,</span>
<a name="l7737"><span class="linenum">7737</span></a>  <span class="comment">     *                                                   feedback,</span>
<a name="l7738"><span class="linenum">7738</span></a>  <span class="comment">     *                                                   feedbackformat,</span>
<a name="l7739"><span class="linenum">7739</span></a>  <span class="comment">     *                                                   usermodified,</span>
<a name="l7740"><span class="linenum">7740</span></a>  <span class="comment">     *                                                   dategraded,</span>
<a name="l7741"><span class="linenum">7741</span></a>  <span class="comment">     *                                                   datesubmitted</span>
<a name="l7742"><span class="linenum">7742</span></a>  <span class="comment">     */</span>
<a name="l7743"><span class="linenum">7743</span></a>      public function <a class="function" onClick="logFunction('get_user_grades_for_gradebook')" href="../../_functions/get_user_grades_for_gradebook.html" onMouseOver="funcPopup(event,'get_user_grades_for_gradebook')">get_user_grades_for_gradebook</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7744"><span class="linenum">7744</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l7745"><span class="linenum">7745</span></a>          <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = array();
<a name="l7746"><span class="linenum">7746</span></a>          <a class="var it281" onMouseOver="hilite(281)" onMouseOut="lolite()" onClick="logVariable('assignmentid')" href="../../_variables/assignmentid.html">$assignmentid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l7747"><span class="linenum">7747</span></a>  
<a name="l7748"><span class="linenum">7748</span></a>          <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>();
<a name="l7749"><span class="linenum">7749</span></a>          <a class="var it32245" onMouseOver="hilite(32245)" onMouseOut="lolite()" onClick="logVariable('gradebookpluginname')" href="../../_variables/gradebookpluginname.html">$gradebookpluginname</a> = <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('feedback_plugin_for_gradebook')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/feedback_plugin_for_gradebook.html">feedback_plugin_for_gradebook</a>;
<a name="l7750"><span class="linenum">7750</span></a>          <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a> = null;
<a name="l7751"><span class="linenum">7751</span></a>  
<a name="l7752"><span class="linenum">7752</span></a>  <span class="comment">        // Find the gradebook plugin.</span>
<a name="l7753"><span class="linenum">7753</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('feedbackplugins')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/feedbackplugins.html">feedbackplugins</a> as <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>) {
<a name="l7754"><span class="linenum">7754</span></a>              if (<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() &amp;&amp; <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>()) {
<a name="l7755"><span class="linenum">7755</span></a>                  if (('assignfeedback_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>()) == <a class="var it32245" onMouseOver="hilite(32245)" onMouseOut="lolite()" onClick="logVariable('gradebookpluginname')" href="../../_variables/gradebookpluginname.html">$gradebookpluginname</a>) {
<a name="l7756"><span class="linenum">7756</span></a>                      <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>;
<a name="l7757"><span class="linenum">7757</span></a>                  }
<a name="l7758"><span class="linenum">7758</span></a>              }
<a name="l7759"><span class="linenum">7759</span></a>          }
<a name="l7760"><span class="linenum">7760</span></a>          if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7761"><span class="linenum">7761</span></a>              <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../_variables/where.html">$where</a> = ' WHERE u.id = :userid ';
<a name="l7762"><span class="linenum">7762</span></a>          } else {
<a name="l7763"><span class="linenum">7763</span></a>              <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../_variables/where.html">$where</a> = ' WHERE u.id != :userid ';
<a name="l7764"><span class="linenum">7764</span></a>          }
<a name="l7765"><span class="linenum">7765</span></a>  
<a name="l7766"><span class="linenum">7766</span></a>  <span class="comment">        // When the gradebook asks us for grades - only return the last attempt for each user.</span>
<a name="l7767"><span class="linenum">7767</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('assignid1'=&gt;<a class="var it281" onMouseOver="hilite(281)" onMouseOut="lolite()" onClick="logVariable('assignmentid')" href="../../_variables/assignmentid.html">$assignmentid</a>,
<a name="l7768"><span class="linenum">7768</span></a>                          'assignid2'=&gt;<a class="var it281" onMouseOver="hilite(281)" onMouseOut="lolite()" onClick="logVariable('assignmentid')" href="../../_variables/assignmentid.html">$assignmentid</a>,
<a name="l7769"><span class="linenum">7769</span></a>                          'userid'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7770"><span class="linenum">7770</span></a>          <a class="var it32246" onMouseOver="hilite(32246)" onMouseOut="lolite()" onClick="logVariable('graderesults')" href="../../_variables/graderesults.html">$graderesults</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>('SELECT
<a name="l7771"><span class="linenum">7771</span></a>                                                      u.id as userid,
<a name="l7772"><span class="linenum">7772</span></a>                                                      s.timemodified as datesubmitted,
<a name="l7773"><span class="linenum">7773</span></a>                                                      g.grade as rawgrade,
<a name="l7774"><span class="linenum">7774</span></a>                                                      g.timemodified as dategraded,
<a name="l7775"><span class="linenum">7775</span></a>                                                      g.grader as usermodified
<a name="l7776"><span class="linenum">7776</span></a>                                                  FROM {user} u
<a name="l7777"><span class="linenum">7777</span></a>                                                  LEFT JOIN {assign_submission} s
<a name="l7778"><span class="linenum">7778</span></a>                                                      ON u.id = s.userid and s.assignment = :assignid1 AND
<a name="l7779"><span class="linenum">7779</span></a>                                                      s.latest = 1
<a name="l7780"><span class="linenum">7780</span></a>                                                  JOIN {assign_grades} g
<a name="l7781"><span class="linenum">7781</span></a>                                                      ON u.id = g.userid and g.assignment = :assignid2 AND
<a name="l7782"><span class="linenum">7782</span></a>                                                      g.attemptnumber = s.attemptnumber' .
<a name="l7783"><span class="linenum">7783</span></a>                                                  <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../_variables/where.html">$where</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l7784"><span class="linenum">7784</span></a>  
<a name="l7785"><span class="linenum">7785</span></a>          foreach (<a class="var it32246" onMouseOver="hilite(32246)" onMouseOut="lolite()" onClick="logVariable('graderesults')" href="../../_variables/graderesults.html">$graderesults</a> as <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>) {
<a name="l7786"><span class="linenum">7786</span></a>              <a class="var it25230" onMouseOver="hilite(25230)" onMouseOut="lolite()" onClick="logVariable('gradingstatus')" href="../../_variables/gradingstatus.html">$gradingstatus</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_grading_status')" href="../../_functions/get_grading_status.html" onMouseOver="funcPopup(event,'get_grading_status')">get_grading_status</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('userid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>);
<a name="l7787"><span class="linenum">7787</span></a>              if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow || <a class="var it25230" onMouseOver="hilite(25230)" onMouseOut="lolite()" onClick="logVariable('gradingstatus')" href="../../_variables/gradingstatus.html">$gradingstatus</a> == <a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_RELEASED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')">ASSIGN_MARKING_WORKFLOW_STATE_RELEASED</a>) {
<a name="l7788"><span class="linenum">7788</span></a>                  <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a> = clone <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l7789"><span class="linenum">7789</span></a>  <span class="comment">                // Now get the feedback.</span>
<a name="l7790"><span class="linenum">7790</span></a>                  if (<a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a>) {
<a name="l7791"><span class="linenum">7791</span></a>                      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('userid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, false);
<a name="l7792"><span class="linenum">7792</span></a>                      if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l7793"><span class="linenum">7793</span></a>                          <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>-&gt;<a onClick="logVariable('feedback')" class="var it43555" onMouseOver="hilite(43555)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a>-&gt;<a class="function" onClick="logFunction('text_for_gradebook')" href="../../_functions/text_for_gradebook.html" onMouseOver="funcPopup(event,'text_for_gradebook')">text_for_gradebook</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l7794"><span class="linenum">7794</span></a>                          <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it43555" onMouseOver="hilite(43555)" onMouseOut="lolite()" href="../../_variables/feedbackformat.html">feedbackformat</a> = <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a>-&gt;<a class="function" onClick="logFunction('format_for_gradebook')" href="../../_functions/format_for_gradebook.html" onMouseOver="funcPopup(event,'format_for_gradebook')">format_for_gradebook</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l7795"><span class="linenum">7795</span></a>                      }
<a name="l7796"><span class="linenum">7796</span></a>                  }
<a name="l7797"><span class="linenum">7797</span></a>                  <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>[<a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>-&gt;<a onClick="logVariable('userid')" class="var it43555" onMouseOver="hilite(43555)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>] = <a class="var it21767" onMouseOver="hilite(21767)" onMouseOut="lolite()" onClick="logVariable('gradebookgrade')" href="../../_variables/gradebookgrade.html">$gradebookgrade</a>;
<a name="l7798"><span class="linenum">7798</span></a>              }
<a name="l7799"><span class="linenum">7799</span></a>          }
<a name="l7800"><span class="linenum">7800</span></a>  
<a name="l7801"><span class="linenum">7801</span></a>          <a class="var it32246" onMouseOver="hilite(32246)" onMouseOut="lolite()" onClick="logVariable('graderesults')" href="../../_variables/graderesults.html">$graderesults</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l7802"><span class="linenum">7802</span></a>          return <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>;
<a name="l7803"><span class="linenum">7803</span></a>      }
<a name="l7804"><span class="linenum">7804</span></a>  
<a name="l7805"><span class="linenum">7805</span></a>      <span class="comment">/**</span>
<a name="l7806"><span class="linenum">7806</span></a>  <span class="comment">     * Call the static version of this function</span>
<a name="l7807"><span class="linenum">7807</span></a>  <span class="comment">     *</span>
<a name="l7808"><span class="linenum">7808</span></a>  <span class="comment">     * @param int $userid The userid to lookup</span>
<a name="l7809"><span class="linenum">7809</span></a>  <span class="comment">     * @return int The unique id</span>
<a name="l7810"><span class="linenum">7810</span></a>  <span class="comment">     */</span>
<a name="l7811"><span class="linenum">7811</span></a>      public function <a class="function" onClick="logFunction('get_uniqueid_for_user')" href="../../_functions/get_uniqueid_for_user.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user')">get_uniqueid_for_user</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7812"><span class="linenum">7812</span></a>          return self::<a class="function" onClick="logFunction('get_uniqueid_for_user_static')" href="../../_functions/get_uniqueid_for_user_static.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user_static')">get_uniqueid_for_user_static</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7813"><span class="linenum">7813</span></a>      }
<a name="l7814"><span class="linenum">7814</span></a>  
<a name="l7815"><span class="linenum">7815</span></a>      <span class="comment">/**</span>
<a name="l7816"><span class="linenum">7816</span></a>  <span class="comment">     * Foreach participant in the course - assign them a random id.</span>
<a name="l7817"><span class="linenum">7817</span></a>  <span class="comment">     *</span>
<a name="l7818"><span class="linenum">7818</span></a>  <span class="comment">     * @param int $assignid The assignid to lookup</span>
<a name="l7819"><span class="linenum">7819</span></a>  <span class="comment">     */</span>
<a name="l7820"><span class="linenum">7820</span></a>      public static function <a class="function" onClick="logFunction('allocate_unique_ids')" href="../../_functions/allocate_unique_ids.html" onMouseOver="funcPopup(event,'allocate_unique_ids')">allocate_unique_ids</a>(<a class="var it15765" onMouseOver="hilite(15765)" onMouseOut="lolite()" onClick="logVariable('assignid')" href="../../_variables/assignid.html">$assignid</a>) {
<a name="l7821"><span class="linenum">7821</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l7822"><span class="linenum">7822</span></a>  
<a name="l7823"><span class="linenum">7823</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('assign', <a class="var it15765" onMouseOver="hilite(15765)" onMouseOut="lolite()" onClick="logVariable('assignid')" href="../../_variables/assignid.html">$assignid</a>, 0, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l7824"><span class="linenum">7824</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l7825"><span class="linenum">7825</span></a>  
<a name="l7826"><span class="linenum">7826</span></a>          <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, true);
<a name="l7827"><span class="linenum">7827</span></a>          <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> = <a class="function" onClick="logFunction('get_enrolled_users')" href="../../_functions/get_enrolled_users.html" onMouseOver="funcPopup(event,'get_enrolled_users')">get_enrolled_users</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, &quot;mod/assign:submit&quot;, <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../_variables/currentgroup.html">$currentgroup</a>, 'u.id');
<a name="l7828"><span class="linenum">7828</span></a>  
<a name="l7829"><span class="linenum">7829</span></a>  <span class="comment">        // Shuffle the users.</span>
<a name="l7830"><span class="linenum">7830</span></a>          <a class="phpfunction" onClick="logFunction('shuffle')" href="../../_functions/shuffle.html" onMouseOver="phpfuncPopup(event,'shuffle')">shuffle</a>(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>);
<a name="l7831"><span class="linenum">7831</span></a>  
<a name="l7832"><span class="linenum">7832</span></a>          foreach (<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> as <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l7833"><span class="linenum">7833</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assign_user_mapping',
<a name="l7834"><span class="linenum">7834</span></a>                                        array('assignment'=&gt;<a class="var it15765" onMouseOver="hilite(15765)" onMouseOut="lolite()" onClick="logVariable('assignid')" href="../../_variables/assignid.html">$assignid</a>, 'userid'=&gt;<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l7835"><span class="linenum">7835</span></a>                                       'id');
<a name="l7836"><span class="linenum">7836</span></a>              if (!<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l7837"><span class="linenum">7837</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = new stdClass();
<a name="l7838"><span class="linenum">7838</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('assignment')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/assignment.html">assignment</a> = <a class="var it15765" onMouseOver="hilite(15765)" onMouseOut="lolite()" onClick="logVariable('assignid')" href="../../_variables/assignid.html">$assignid</a>;
<a name="l7839"><span class="linenum">7839</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l7840"><span class="linenum">7840</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('assign_user_mapping', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l7841"><span class="linenum">7841</span></a>              }
<a name="l7842"><span class="linenum">7842</span></a>          }
<a name="l7843"><span class="linenum">7843</span></a>      }
<a name="l7844"><span class="linenum">7844</span></a>  
<a name="l7845"><span class="linenum">7845</span></a>      <span class="comment">/**</span>
<a name="l7846"><span class="linenum">7846</span></a>  <span class="comment">     * Lookup this user id and return the unique id for this assignment.</span>
<a name="l7847"><span class="linenum">7847</span></a>  <span class="comment">     *</span>
<a name="l7848"><span class="linenum">7848</span></a>  <span class="comment">     * @param int $assignid The assignment id</span>
<a name="l7849"><span class="linenum">7849</span></a>  <span class="comment">     * @param int $userid The userid to lookup</span>
<a name="l7850"><span class="linenum">7850</span></a>  <span class="comment">     * @return int The unique id</span>
<a name="l7851"><span class="linenum">7851</span></a>  <span class="comment">     */</span>
<a name="l7852"><span class="linenum">7852</span></a>      public static function <a class="function" onClick="logFunction('get_uniqueid_for_user_static')" href="../../_functions/get_uniqueid_for_user_static.html" onMouseOver="funcPopup(event,'get_uniqueid_for_user_static')">get_uniqueid_for_user_static</a>(<a class="var it15765" onMouseOver="hilite(15765)" onMouseOut="lolite()" onClick="logVariable('assignid')" href="../../_variables/assignid.html">$assignid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7853"><span class="linenum">7853</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l7854"><span class="linenum">7854</span></a>  
<a name="l7855"><span class="linenum">7855</span></a>  <span class="comment">        // Search for a record.</span>
<a name="l7856"><span class="linenum">7856</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('assignment'=&gt;<a class="var it15765" onMouseOver="hilite(15765)" onMouseOut="lolite()" onClick="logVariable('assignid')" href="../../_variables/assignid.html">$assignid</a>, 'userid'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l7857"><span class="linenum">7857</span></a>          if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assign_user_mapping', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'id')) {
<a name="l7858"><span class="linenum">7858</span></a>              return <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l7859"><span class="linenum">7859</span></a>          }
<a name="l7860"><span class="linenum">7860</span></a>  
<a name="l7861"><span class="linenum">7861</span></a>  <span class="comment">        // Be a little smart about this - there is no record for the current user.</span>
<a name="l7862"><span class="linenum">7862</span></a>  <span class="comment">        // We should ensure any unallocated ids for the current participant</span>
<a name="l7863"><span class="linenum">7863</span></a>  <span class="comment">        // list are distrubited randomly.</span>
<a name="l7864"><span class="linenum">7864</span></a>          self::<a class="function" onClick="logFunction('allocate_unique_ids')" href="../../_functions/allocate_unique_ids.html" onMouseOver="funcPopup(event,'allocate_unique_ids')">allocate_unique_ids</a>(<a class="var it15765" onMouseOver="hilite(15765)" onMouseOut="lolite()" onClick="logVariable('assignid')" href="../../_variables/assignid.html">$assignid</a>);
<a name="l7865"><span class="linenum">7865</span></a>  
<a name="l7866"><span class="linenum">7866</span></a>  <span class="comment">        // Retry the search for a record.</span>
<a name="l7867"><span class="linenum">7867</span></a>          if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assign_user_mapping', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'id')) {
<a name="l7868"><span class="linenum">7868</span></a>              return <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l7869"><span class="linenum">7869</span></a>          }
<a name="l7870"><span class="linenum">7870</span></a>  
<a name="l7871"><span class="linenum">7871</span></a>  <span class="comment">        // The requested user must not be a participant. Add a record anyway.</span>
<a name="l7872"><span class="linenum">7872</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = new stdClass();
<a name="l7873"><span class="linenum">7873</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('assignment')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/assignment.html">assignment</a> = <a class="var it15765" onMouseOver="hilite(15765)" onMouseOut="lolite()" onClick="logVariable('assignid')" href="../../_variables/assignid.html">$assignid</a>;
<a name="l7874"><span class="linenum">7874</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l7875"><span class="linenum">7875</span></a>  
<a name="l7876"><span class="linenum">7876</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('assign_user_mapping', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l7877"><span class="linenum">7877</span></a>      }
<a name="l7878"><span class="linenum">7878</span></a>  
<a name="l7879"><span class="linenum">7879</span></a>      <span class="comment">/**</span>
<a name="l7880"><span class="linenum">7880</span></a>  <span class="comment">     * Call the static version of this function.</span>
<a name="l7881"><span class="linenum">7881</span></a>  <span class="comment">     *</span>
<a name="l7882"><span class="linenum">7882</span></a>  <span class="comment">     * @param int $uniqueid The uniqueid to lookup</span>
<a name="l7883"><span class="linenum">7883</span></a>  <span class="comment">     * @return int The user id or false if they don't exist</span>
<a name="l7884"><span class="linenum">7884</span></a>  <span class="comment">     */</span>
<a name="l7885"><span class="linenum">7885</span></a>      public function <a class="function" onClick="logFunction('get_user_id_for_uniqueid')" href="../../_functions/get_user_id_for_uniqueid.html" onMouseOver="funcPopup(event,'get_user_id_for_uniqueid')">get_user_id_for_uniqueid</a>(<a class="var it4593" onMouseOver="hilite(4593)" onMouseOut="lolite()" onClick="logVariable('uniqueid')" href="../../_variables/uniqueid.html">$uniqueid</a>) {
<a name="l7886"><span class="linenum">7886</span></a>          return self::<a class="function" onClick="logFunction('get_user_id_for_uniqueid_static')" href="../../_functions/get_user_id_for_uniqueid_static.html" onMouseOver="funcPopup(event,'get_user_id_for_uniqueid_static')">get_user_id_for_uniqueid_static</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id, <a class="var it4593" onMouseOver="hilite(4593)" onMouseOut="lolite()" onClick="logVariable('uniqueid')" href="../../_variables/uniqueid.html">$uniqueid</a>);
<a name="l7887"><span class="linenum">7887</span></a>      }
<a name="l7888"><span class="linenum">7888</span></a>  
<a name="l7889"><span class="linenum">7889</span></a>      <span class="comment">/**</span>
<a name="l7890"><span class="linenum">7890</span></a>  <span class="comment">     * Lookup this unique id and return the user id for this assignment.</span>
<a name="l7891"><span class="linenum">7891</span></a>  <span class="comment">     *</span>
<a name="l7892"><span class="linenum">7892</span></a>  <span class="comment">     * @param int $assignid The id of the assignment this user mapping is in</span>
<a name="l7893"><span class="linenum">7893</span></a>  <span class="comment">     * @param int $uniqueid The uniqueid to lookup</span>
<a name="l7894"><span class="linenum">7894</span></a>  <span class="comment">     * @return int The user id or false if they don't exist</span>
<a name="l7895"><span class="linenum">7895</span></a>  <span class="comment">     */</span>
<a name="l7896"><span class="linenum">7896</span></a>      public static function <a class="function" onClick="logFunction('get_user_id_for_uniqueid_static')" href="../../_functions/get_user_id_for_uniqueid_static.html" onMouseOver="funcPopup(event,'get_user_id_for_uniqueid_static')">get_user_id_for_uniqueid_static</a>(<a class="var it15765" onMouseOver="hilite(15765)" onMouseOut="lolite()" onClick="logVariable('assignid')" href="../../_variables/assignid.html">$assignid</a>, <a class="var it4593" onMouseOver="hilite(4593)" onMouseOut="lolite()" onClick="logVariable('uniqueid')" href="../../_variables/uniqueid.html">$uniqueid</a>) {
<a name="l7897"><span class="linenum">7897</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l7898"><span class="linenum">7898</span></a>  
<a name="l7899"><span class="linenum">7899</span></a>  <span class="comment">        // Search for a record.</span>
<a name="l7900"><span class="linenum">7900</span></a>          if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assign_user_mapping',
<a name="l7901"><span class="linenum">7901</span></a>                                        array('assignment'=&gt;<a class="var it15765" onMouseOver="hilite(15765)" onMouseOut="lolite()" onClick="logVariable('assignid')" href="../../_variables/assignid.html">$assignid</a>, 'id'=&gt;<a class="var it4593" onMouseOver="hilite(4593)" onMouseOut="lolite()" onClick="logVariable('uniqueid')" href="../../_variables/uniqueid.html">$uniqueid</a>),
<a name="l7902"><span class="linenum">7902</span></a>                                        'userid',
<a name="l7903"><span class="linenum">7903</span></a>                                        <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>)) {
<a name="l7904"><span class="linenum">7904</span></a>              return <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l7905"><span class="linenum">7905</span></a>          }
<a name="l7906"><span class="linenum">7906</span></a>  
<a name="l7907"><span class="linenum">7907</span></a>          return false;
<a name="l7908"><span class="linenum">7908</span></a>      }
<a name="l7909"><span class="linenum">7909</span></a>  
<a name="l7910"><span class="linenum">7910</span></a>      <span class="comment">/**</span>
<a name="l7911"><span class="linenum">7911</span></a>  <span class="comment">     * Get the list of marking_workflow states the current user has permission to transition a grade to.</span>
<a name="l7912"><span class="linenum">7912</span></a>  <span class="comment">     *</span>
<a name="l7913"><span class="linenum">7913</span></a>  <span class="comment">     * @return array of state =&gt; description</span>
<a name="l7914"><span class="linenum">7914</span></a>  <span class="comment">     */</span>
<a name="l7915"><span class="linenum">7915</span></a>      public function <a class="function" onClick="logFunction('get_marking_workflow_states_for_current_user')" href="../../_functions/get_marking_workflow_states_for_current_user.html" onMouseOver="funcPopup(event,'get_marking_workflow_states_for_current_user')">get_marking_workflow_states_for_current_user</a>() {
<a name="l7916"><span class="linenum">7916</span></a>          if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('markingworkflowstates')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/markingworkflowstates.html">markingworkflowstates</a>)) {
<a name="l7917"><span class="linenum">7917</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('markingworkflowstates')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/markingworkflowstates.html">markingworkflowstates</a>;
<a name="l7918"><span class="linenum">7918</span></a>          }
<a name="l7919"><span class="linenum">7919</span></a>          <a class="var it1335" onMouseOver="hilite(1335)" onMouseOut="lolite()" onClick="logVariable('states')" href="../../_variables/states.html">$states</a> = array();
<a name="l7920"><span class="linenum">7920</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:grade', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l7921"><span class="linenum">7921</span></a>              <a class="var it1335" onMouseOver="hilite(1335)" onMouseOut="lolite()" onClick="logVariable('states')" href="../../_variables/states.html">$states</a>[<a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_INMARKING')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_INMARKING.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_INMARKING')">ASSIGN_MARKING_WORKFLOW_STATE_INMARKING</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('markingworkflowstateinmarking', 'assign');
<a name="l7922"><span class="linenum">7922</span></a>              <a class="var it1335" onMouseOver="hilite(1335)" onMouseOut="lolite()" onClick="logVariable('states')" href="../../_variables/states.html">$states</a>[ASSIGN_MARKING_WORKFLOW_STATE_READYFORREVIEW] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('markingworkflowstatereadyforreview', 'assign');
<a name="l7923"><span class="linenum">7923</span></a>          }
<a name="l7924"><span class="linenum">7924</span></a>          if (<a class="function" onClick="logFunction('has_any_capability')" href="../../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('mod/assign:reviewgrades',
<a name="l7925"><span class="linenum">7925</span></a>                                       'mod/assign:managegrades'), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l7926"><span class="linenum">7926</span></a>              <a class="var it1335" onMouseOver="hilite(1335)" onMouseOut="lolite()" onClick="logVariable('states')" href="../../_variables/states.html">$states</a>[<a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW')">ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('markingworkflowstateinreview', 'assign');
<a name="l7927"><span class="linenum">7927</span></a>              <a class="var it1335" onMouseOver="hilite(1335)" onMouseOut="lolite()" onClick="logVariable('states')" href="../../_variables/states.html">$states</a>[ASSIGN_MARKING_WORKFLOW_STATE_READYFORRELEASE] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('markingworkflowstatereadyforrelease', 'assign');
<a name="l7928"><span class="linenum">7928</span></a>          }
<a name="l7929"><span class="linenum">7929</span></a>          if (<a class="function" onClick="logFunction('has_any_capability')" href="../../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('mod/assign:releasegrades',
<a name="l7930"><span class="linenum">7930</span></a>                                       'mod/assign:managegrades'), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l7931"><span class="linenum">7931</span></a>              <a class="var it1335" onMouseOver="hilite(1335)" onMouseOut="lolite()" onClick="logVariable('states')" href="../../_variables/states.html">$states</a>[<a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_RELEASED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_RELEASED')">ASSIGN_MARKING_WORKFLOW_STATE_RELEASED</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('markingworkflowstatereleased', 'assign');
<a name="l7932"><span class="linenum">7932</span></a>          }
<a name="l7933"><span class="linenum">7933</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('markingworkflowstates')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/markingworkflowstates.html">markingworkflowstates</a> = <a class="var it1335" onMouseOver="hilite(1335)" onMouseOut="lolite()" onClick="logVariable('states')" href="../../_variables/states.html">$states</a>;
<a name="l7934"><span class="linenum">7934</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('markingworkflowstates')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/markingworkflowstates.html">markingworkflowstates</a>;
<a name="l7935"><span class="linenum">7935</span></a>      }
<a name="l7936"><span class="linenum">7936</span></a>  
<a name="l7937"><span class="linenum">7937</span></a>      <span class="comment">/**</span>
<a name="l7938"><span class="linenum">7938</span></a>  <span class="comment">     * Check is only active users in course should be shown.</span>
<a name="l7939"><span class="linenum">7939</span></a>  <span class="comment">     *</span>
<a name="l7940"><span class="linenum">7940</span></a>  <span class="comment">     * @return bool true if only active users should be shown.</span>
<a name="l7941"><span class="linenum">7941</span></a>  <span class="comment">     */</span>
<a name="l7942"><span class="linenum">7942</span></a>      public function <a class="function" onClick="logFunction('show_only_active_users')" href="../../_functions/show_only_active_users.html" onMouseOver="funcPopup(event,'show_only_active_users')">show_only_active_users</a>() {
<a name="l7943"><span class="linenum">7943</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l7944"><span class="linenum">7944</span></a>  
<a name="l7945"><span class="linenum">7945</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('showonlyactiveenrol')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/showonlyactiveenrol.html">showonlyactiveenrol</a>)) {
<a name="l7946"><span class="linenum">7946</span></a>              <a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('defaultgradeshowactiveenrol')" href="../../_variables/defaultgradeshowactiveenrol.html">$defaultgradeshowactiveenrol</a> = !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('grade_report_showonlyactiveenrol')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/grade_report_showonlyactiveenrol.html">grade_report_showonlyactiveenrol</a>);
<a name="l7947"><span class="linenum">7947</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('showonlyactiveenrol')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/showonlyactiveenrol.html">showonlyactiveenrol</a> = <a class="function" onClick="logFunction('get_user_preferences')" href="../../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('grade_report_showonlyactiveenrol', <a class="var it4012" onMouseOver="hilite(4012)" onMouseOut="lolite()" onClick="logVariable('defaultgradeshowactiveenrol')" href="../../_variables/defaultgradeshowactiveenrol.html">$defaultgradeshowactiveenrol</a>);
<a name="l7948"><span class="linenum">7948</span></a>  
<a name="l7949"><span class="linenum">7949</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l7950"><span class="linenum">7950</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('showonlyactiveenrol')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/showonlyactiveenrol.html">showonlyactiveenrol</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('showonlyactiveenrol')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/showonlyactiveenrol.html">showonlyactiveenrol</a> ||
<a name="l7951"><span class="linenum">7951</span></a>                              !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewsuspendedusers', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>);
<a name="l7952"><span class="linenum">7952</span></a>              }
<a name="l7953"><span class="linenum">7953</span></a>          }
<a name="l7954"><span class="linenum">7954</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('showonlyactiveenrol')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/showonlyactiveenrol.html">showonlyactiveenrol</a>;
<a name="l7955"><span class="linenum">7955</span></a>      }
<a name="l7956"><span class="linenum">7956</span></a>  
<a name="l7957"><span class="linenum">7957</span></a>      <span class="comment">/**</span>
<a name="l7958"><span class="linenum">7958</span></a>  <span class="comment">     * Return true is user is active user in course else false</span>
<a name="l7959"><span class="linenum">7959</span></a>  <span class="comment">     *</span>
<a name="l7960"><span class="linenum">7960</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l7961"><span class="linenum">7961</span></a>  <span class="comment">     * @return bool true is user is active in course.</span>
<a name="l7962"><span class="linenum">7962</span></a>  <span class="comment">     */</span>
<a name="l7963"><span class="linenum">7963</span></a>      public function <a class="function" onClick="logFunction('is_active_user')" href="../../_functions/is_active_user.html" onMouseOver="funcPopup(event,'is_active_user')">is_active_user</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l7964"><span class="linenum">7964</span></a>          return !<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="function" onClick="logFunction('get_suspended_userids')" href="../../_functions/get_suspended_userids.html" onMouseOver="funcPopup(event,'get_suspended_userids')">get_suspended_userids</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, true));
<a name="l7965"><span class="linenum">7965</span></a>      }
<a name="l7966"><span class="linenum">7966</span></a>  
<a name="l7967"><span class="linenum">7967</span></a>      <span class="comment">/**</span>
<a name="l7968"><span class="linenum">7968</span></a>  <span class="comment">     * Returns true if gradebook feedback plugin is enabled</span>
<a name="l7969"><span class="linenum">7969</span></a>  <span class="comment">     *</span>
<a name="l7970"><span class="linenum">7970</span></a>  <span class="comment">     * @return bool true if gradebook feedback plugin is enabled and visible else false.</span>
<a name="l7971"><span class="linenum">7971</span></a>  <span class="comment">     */</span>
<a name="l7972"><span class="linenum">7972</span></a>      public function <a class="function" onClick="logFunction('is_gradebook_feedback_enabled')" href="../../_functions/is_gradebook_feedback_enabled.html" onMouseOver="funcPopup(event,'is_gradebook_feedback_enabled')">is_gradebook_feedback_enabled</a>() {
<a name="l7973"><span class="linenum">7973</span></a>  <span class="comment">        // Get default grade book feedback plugin.</span>
<a name="l7974"><span class="linenum">7974</span></a>          <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_admin_config')" href="../../_functions/get_admin_config.html" onMouseOver="funcPopup(event,'get_admin_config')">get_admin_config</a>();
<a name="l7975"><span class="linenum">7975</span></a>          <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a> = <a class="var it17943" onMouseOver="hilite(17943)" onMouseOut="lolite()" onClick="logVariable('adminconfig')" href="../../_variables/adminconfig.html">$adminconfig</a>-&gt;<a onClick="logVariable('feedback_plugin_for_gradebook')" class="var it43813" onMouseOver="hilite(43813)" onMouseOut="lolite()" href="../../_variables/feedback_plugin_for_gradebook.html">feedback_plugin_for_gradebook</a>;
<a name="l7976"><span class="linenum">7976</span></a>          <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('assignfeedback_', '', <a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a>);
<a name="l7977"><span class="linenum">7977</span></a>  
<a name="l7978"><span class="linenum">7978</span></a>  <span class="comment">        // Check if default gradebook feedback is visible and enabled.</span>
<a name="l7979"><span class="linenum">7979</span></a>          <a class="var it32247" onMouseOver="hilite(32247)" onMouseOut="lolite()" onClick="logVariable('gradebookfeedbackplugin')" href="../../_variables/gradebookfeedbackplugin.html">$gradebookfeedbackplugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_feedback_plugin_by_type')" href="../../_functions/get_feedback_plugin_by_type.html" onMouseOver="funcPopup(event,'get_feedback_plugin_by_type')">get_feedback_plugin_by_type</a>(<a class="var it17944" onMouseOver="hilite(17944)" onMouseOut="lolite()" onClick="logVariable('gradebookplugin')" href="../../_variables/gradebookplugin.html">$gradebookplugin</a>);
<a name="l7980"><span class="linenum">7980</span></a>  
<a name="l7981"><span class="linenum">7981</span></a>          if (empty(<a class="var it32247" onMouseOver="hilite(32247)" onMouseOut="lolite()" onClick="logVariable('gradebookfeedbackplugin')" href="../../_variables/gradebookfeedbackplugin.html">$gradebookfeedbackplugin</a>)) {
<a name="l7982"><span class="linenum">7982</span></a>              return false;
<a name="l7983"><span class="linenum">7983</span></a>          }
<a name="l7984"><span class="linenum">7984</span></a>  
<a name="l7985"><span class="linenum">7985</span></a>          if (<a class="var it32247" onMouseOver="hilite(32247)" onMouseOut="lolite()" onClick="logVariable('gradebookfeedbackplugin')" href="../../_variables/gradebookfeedbackplugin.html">$gradebookfeedbackplugin</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() &amp;&amp; <a class="var it32247" onMouseOver="hilite(32247)" onMouseOut="lolite()" onClick="logVariable('gradebookfeedbackplugin')" href="../../_variables/gradebookfeedbackplugin.html">$gradebookfeedbackplugin</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>()) {
<a name="l7986"><span class="linenum">7986</span></a>              return true;
<a name="l7987"><span class="linenum">7987</span></a>          }
<a name="l7988"><span class="linenum">7988</span></a>  
<a name="l7989"><span class="linenum">7989</span></a>  <span class="comment">        // Gradebook feedback plugin is either not visible/enabled.</span>
<a name="l7990"><span class="linenum">7990</span></a>          return false;
<a name="l7991"><span class="linenum">7991</span></a>      }
<a name="l7992"><span class="linenum">7992</span></a>  
<a name="l7993"><span class="linenum">7993</span></a>      <span class="comment">/**</span>
<a name="l7994"><span class="linenum">7994</span></a>  <span class="comment">     * Returns the grading status.</span>
<a name="l7995"><span class="linenum">7995</span></a>  <span class="comment">     *</span>
<a name="l7996"><span class="linenum">7996</span></a>  <span class="comment">     * @param int $userid the user id</span>
<a name="l7997"><span class="linenum">7997</span></a>  <span class="comment">     * @return string returns the grading status</span>
<a name="l7998"><span class="linenum">7998</span></a>  <span class="comment">     */</span>
<a name="l7999"><span class="linenum">7999</span></a>      public function <a class="function" onClick="logFunction('get_grading_status')" href="../../_functions/get_grading_status.html" onMouseOver="funcPopup(event,'get_grading_status')">get_grading_status</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l8000"><span class="linenum">8000</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;markingworkflow) {
<a name="l8001"><span class="linenum">8001</span></a>              <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_flags')" href="../../_functions/get_user_flags.html" onMouseOver="funcPopup(event,'get_user_flags')">get_user_flags</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false);
<a name="l8002"><span class="linenum">8002</span></a>              if (!empty(<a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>)) {
<a name="l8003"><span class="linenum">8003</span></a>                  return <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../_variables/flags.html">$flags</a>-&gt;<a onClick="logVariable('workflowstate')" class="var it43097" onMouseOver="hilite(43097)" onMouseOut="lolite()" href="../../_variables/workflowstate.html">workflowstate</a>;
<a name="l8004"><span class="linenum">8004</span></a>              }
<a name="l8005"><span class="linenum">8005</span></a>              return <a class="constant" onClick="logConstant('ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED')" href="../../_constants/ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED.html" onMouseOver="constPopup(event,'ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED')">ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED</a>;
<a name="l8006"><span class="linenum">8006</span></a>          } else {
<a name="l8007"><span class="linenum">8007</span></a>              <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('attemptnumber', -1, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l8008"><span class="linenum">8008</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, false, <a class="var it282" onMouseOver="hilite(282)" onMouseOut="lolite()" onClick="logVariable('attemptnumber')" href="../../_variables/attemptnumber.html">$attemptnumber</a>);
<a name="l8009"><span class="linenum">8009</span></a>  
<a name="l8010"><span class="linenum">8010</span></a>              if (!empty(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) &amp;&amp; <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> !== null &amp;&amp; <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> &gt;= 0) {
<a name="l8011"><span class="linenum">8011</span></a>                  return <a class="constant" onClick="logConstant('ASSIGN_GRADING_STATUS_GRADED')" href="../../_constants/ASSIGN_GRADING_STATUS_GRADED.html" onMouseOver="constPopup(event,'ASSIGN_GRADING_STATUS_GRADED')">ASSIGN_GRADING_STATUS_GRADED</a>;
<a name="l8012"><span class="linenum">8012</span></a>              } else {
<a name="l8013"><span class="linenum">8013</span></a>                  return <a class="constant" onClick="logConstant('ASSIGN_GRADING_STATUS_NOT_GRADED')" href="../../_constants/ASSIGN_GRADING_STATUS_NOT_GRADED.html" onMouseOver="constPopup(event,'ASSIGN_GRADING_STATUS_NOT_GRADED')">ASSIGN_GRADING_STATUS_NOT_GRADED</a>;
<a name="l8014"><span class="linenum">8014</span></a>              }
<a name="l8015"><span class="linenum">8015</span></a>          }
<a name="l8016"><span class="linenum">8016</span></a>      }
<a name="l8017"><span class="linenum">8017</span></a>  
<a name="l8018"><span class="linenum">8018</span></a>      <span class="comment">/**</span>
<a name="l8019"><span class="linenum">8019</span></a>  <span class="comment">     * The id used to uniquily identify the cache for this instance of the assign object.</span>
<a name="l8020"><span class="linenum">8020</span></a>  <span class="comment">     *</span>
<a name="l8021"><span class="linenum">8021</span></a>  <span class="comment">     * @return string</span>
<a name="l8022"><span class="linenum">8022</span></a>  <span class="comment">     */</span>
<a name="l8023"><span class="linenum">8023</span></a>      public function <a class="function" onClick="logFunction('get_useridlist_key_id')" href="../../_functions/get_useridlist_key_id.html" onMouseOver="funcPopup(event,'get_useridlist_key_id')">get_useridlist_key_id</a>() {
<a name="l8024"><span class="linenum">8024</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('useridlistid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/useridlistid.html">useridlistid</a>;
<a name="l8025"><span class="linenum">8025</span></a>      }
<a name="l8026"><span class="linenum">8026</span></a>  
<a name="l8027"><span class="linenum">8027</span></a>      <span class="comment">/**</span>
<a name="l8028"><span class="linenum">8028</span></a>  <span class="comment">     * Generates the key that should be used for an entry in the useridlist cache.</span>
<a name="l8029"><span class="linenum">8029</span></a>  <span class="comment">     *</span>
<a name="l8030"><span class="linenum">8030</span></a>  <span class="comment">     * @param string $id Generate a key for this instance (optional)</span>
<a name="l8031"><span class="linenum">8031</span></a>  <span class="comment">     * @return string The key for the id, or new entry if no $id is passed.</span>
<a name="l8032"><span class="linenum">8032</span></a>  <span class="comment">     */</span>
<a name="l8033"><span class="linenum">8033</span></a>      public function <a class="function" onClick="logFunction('get_useridlist_key')" href="../../_functions/get_useridlist_key.html" onMouseOver="funcPopup(event,'get_useridlist_key')">get_useridlist_key</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> = null) {
<a name="l8034"><span class="linenum">8034</span></a>          if (<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> === null) {
<a name="l8035"><span class="linenum">8035</span></a>              <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_useridlist_key_id')" href="../../_functions/get_useridlist_key_id.html" onMouseOver="funcPopup(event,'get_useridlist_key_id')">get_useridlist_key_id</a>();
<a name="l8036"><span class="linenum">8036</span></a>          }
<a name="l8037"><span class="linenum">8037</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id . '_' . <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>;
<a name="l8038"><span class="linenum">8038</span></a>      }
<a name="l8039"><span class="linenum">8039</span></a>  
<a name="l8040"><span class="linenum">8040</span></a>      <span class="comment">/**</span>
<a name="l8041"><span class="linenum">8041</span></a>  <span class="comment">     * Updates and creates the completion records in mdl_course_modules_completion.</span>
<a name="l8042"><span class="linenum">8042</span></a>  <span class="comment">     *</span>
<a name="l8043"><span class="linenum">8043</span></a>  <span class="comment">     * @param int $teamsubmission value of 0 or 1 to indicate whether this is a group activity</span>
<a name="l8044"><span class="linenum">8044</span></a>  <span class="comment">     * @param int $requireallteammemberssubmit value of 0 or 1 to indicate whether all group members must click Submit</span>
<a name="l8045"><span class="linenum">8045</span></a>  <span class="comment">     * @param obj $submission the submission</span>
<a name="l8046"><span class="linenum">8046</span></a>  <span class="comment">     * @param int $userid the user id</span>
<a name="l8047"><span class="linenum">8047</span></a>  <span class="comment">     * @param int $complete</span>
<a name="l8048"><span class="linenum">8048</span></a>  <span class="comment">     * @param obj $completion</span>
<a name="l8049"><span class="linenum">8049</span></a>  <span class="comment">     *</span>
<a name="l8050"><span class="linenum">8050</span></a>  <span class="comment">     * @return null</span>
<a name="l8051"><span class="linenum">8051</span></a>  <span class="comment">     */</span>
<a name="l8052"><span class="linenum">8052</span></a>      protected function <a class="function" onClick="logFunction('update_activity_completion_records')" href="../../_functions/update_activity_completion_records.html" onMouseOver="funcPopup(event,'update_activity_completion_records')">update_activity_completion_records</a>(<a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a>,
<a name="l8053"><span class="linenum">8053</span></a>                                                            <a class="var it26820" onMouseOver="hilite(26820)" onMouseOut="lolite()" onClick="logVariable('requireallteammemberssubmit')" href="../../_variables/requireallteammemberssubmit.html">$requireallteammemberssubmit</a>,
<a name="l8054"><span class="linenum">8054</span></a>                                                            <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>,
<a name="l8055"><span class="linenum">8055</span></a>                                                            <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>,
<a name="l8056"><span class="linenum">8056</span></a>                                                            <a class="var it767" onMouseOver="hilite(767)" onMouseOut="lolite()" onClick="logVariable('complete')" href="../../_variables/complete.html">$complete</a>,
<a name="l8057"><span class="linenum">8057</span></a>                                                            <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>) {
<a name="l8058"><span class="linenum">8058</span></a>  
<a name="l8059"><span class="linenum">8059</span></a>          if ((<a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a> &amp;&amp; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('groupid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a> &gt; 0 &amp;&amp; !<a class="var it26820" onMouseOver="hilite(26820)" onMouseOut="lolite()" onClick="logVariable('requireallteammemberssubmit')" href="../../_variables/requireallteammemberssubmit.html">$requireallteammemberssubmit</a>) ||
<a name="l8060"><span class="linenum">8060</span></a>              (<a class="var it6060" onMouseOver="hilite(6060)" onMouseOut="lolite()" onClick="logVariable('teamsubmission')" href="../../_variables/teamsubmission.html">$teamsubmission</a> &amp;&amp; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('groupid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a> &gt; 0 &amp;&amp; <a class="var it26820" onMouseOver="hilite(26820)" onMouseOut="lolite()" onClick="logVariable('requireallteammemberssubmit')" href="../../_variables/requireallteammemberssubmit.html">$requireallteammemberssubmit</a> &amp;&amp;
<a name="l8061"><span class="linenum">8061</span></a>               <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/status.html">status</a> == <a class="constant" onClick="logConstant('ASSIGN_SUBMISSION_STATUS_SUBMITTED')" href="../../_constants/ASSIGN_SUBMISSION_STATUS_SUBMITTED.html" onMouseOver="constPopup(event,'ASSIGN_SUBMISSION_STATUS_SUBMITTED')">ASSIGN_SUBMISSION_STATUS_SUBMITTED</a>)) {
<a name="l8062"><span class="linenum">8062</span></a>  
<a name="l8063"><span class="linenum">8063</span></a>              <a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a> = <a class="function" onClick="logFunction('groups_get_members')" href="../../_functions/groups_get_members.html" onMouseOver="funcPopup(event,'groups_get_members')">groups_get_members</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('groupid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>);
<a name="l8064"><span class="linenum">8064</span></a>  
<a name="l8065"><span class="linenum">8065</span></a>              foreach (<a class="var it4200" onMouseOver="hilite(4200)" onMouseOut="lolite()" onClick="logVariable('members')" href="../../_variables/members.html">$members</a> as <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>) {
<a name="l8066"><span class="linenum">8066</span></a>                  <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('update_state')" href="../../_functions/update_state.html" onMouseOver="funcPopup(event,'update_state')">update_state</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), <a class="var it767" onMouseOver="hilite(767)" onMouseOut="lolite()" onClick="logVariable('complete')" href="../../_variables/complete.html">$complete</a>, <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('id')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l8067"><span class="linenum">8067</span></a>              }
<a name="l8068"><span class="linenum">8068</span></a>          } else {
<a name="l8069"><span class="linenum">8069</span></a>              <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('update_state')" href="../../_functions/update_state.html" onMouseOver="funcPopup(event,'update_state')">update_state</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>(), <a class="var it767" onMouseOver="hilite(767)" onMouseOut="lolite()" onClick="logVariable('complete')" href="../../_variables/complete.html">$complete</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l8070"><span class="linenum">8070</span></a>          }
<a name="l8071"><span class="linenum">8071</span></a>  
<a name="l8072"><span class="linenum">8072</span></a>          return;
<a name="l8073"><span class="linenum">8073</span></a>      }
<a name="l8074"><span class="linenum">8074</span></a>  
<a name="l8075"><span class="linenum">8075</span></a>      <span class="comment">/**</span>
<a name="l8076"><span class="linenum">8076</span></a>  <span class="comment">     * Update the module completion status (set it viewed).</span>
<a name="l8077"><span class="linenum">8077</span></a>  <span class="comment">     *</span>
<a name="l8078"><span class="linenum">8078</span></a>  <span class="comment">     * @since Moodle 3.2</span>
<a name="l8079"><span class="linenum">8079</span></a>  <span class="comment">     */</span>
<a name="l8080"><span class="linenum">8080</span></a>      public function <a class="function" onClick="logFunction('set_module_viewed')" href="../../_functions/set_module_viewed.html" onMouseOver="funcPopup(event,'set_module_viewed')">set_module_viewed</a>() {
<a name="l8081"><span class="linenum">8081</span></a>          <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>());
<a name="l8082"><span class="linenum">8082</span></a>          <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('set_module_viewed')" href="../../_functions/set_module_viewed.html" onMouseOver="funcPopup(event,'set_module_viewed')">set_module_viewed</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>());
<a name="l8083"><span class="linenum">8083</span></a>      }
<a name="l8084"><span class="linenum">8084</span></a>  }
<a name="l8085"><span class="linenum">8085</span></a>  
<a name="l8086"><span class="linenum">8086</span></a>  <span class="comment">/**</span>
<a name="l8087"><span class="linenum">8087</span></a>  <span class="comment"> * Portfolio caller class for mod_assign.</span>
<a name="l8088"><span class="linenum">8088</span></a>  <span class="comment"> *</span>
<a name="l8089"><span class="linenum">8089</span></a>  <span class="comment"> * @package   mod_assign</span>
<a name="l8090"><span class="linenum">8090</span></a>  <span class="comment"> * @copyright 2012 NetSpot {@link http://www.netspot.com.au}</span>
<a name="l8091"><span class="linenum">8091</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l8092"><span class="linenum">8092</span></a>  <span class="comment"> */</span>
<a name="l8093"><span class="linenum">8093</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('assign_portfolio_caller')" href="../../_classes/assign_portfolio_caller.html" onMouseOver="classPopup(event,'assign_portfolio_caller')">assign_portfolio_caller</a> extends portfolio_module_caller_base {
<a name="l8094"><span class="linenum">8094</span></a>  
<a name="l8095"><span class="linenum">8095</span></a>  <span class="comment">    /** @var int callback arg - the id of submission we export */</span>
<a name="l8096"><span class="linenum">8096</span></a>      protected <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('sid')" href="../../_variables/sid.html">$sid</a>;
<a name="l8097"><span class="linenum">8097</span></a>  
<a name="l8098"><span class="linenum">8098</span></a>  <span class="comment">    /** @var string component of the submission files we export*/</span>
<a name="l8099"><span class="linenum">8099</span></a>      protected <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>;
<a name="l8100"><span class="linenum">8100</span></a>  
<a name="l8101"><span class="linenum">8101</span></a>  <span class="comment">    /** @var string callback arg - the area of submission files we export */</span>
<a name="l8102"><span class="linenum">8102</span></a>      protected <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a>;
<a name="l8103"><span class="linenum">8103</span></a>  
<a name="l8104"><span class="linenum">8104</span></a>  <span class="comment">    /** @var int callback arg - the id of file we export */</span>
<a name="l8105"><span class="linenum">8105</span></a>      protected <a class="var it5429" onMouseOver="hilite(5429)" onMouseOut="lolite()" onClick="logVariable('fileid')" href="../../_variables/fileid.html">$fileid</a>;
<a name="l8106"><span class="linenum">8106</span></a>  
<a name="l8107"><span class="linenum">8107</span></a>  <span class="comment">    /** @var int callback arg - the cmid of the assignment we export */</span>
<a name="l8108"><span class="linenum">8108</span></a>      protected <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>;
<a name="l8109"><span class="linenum">8109</span></a>  
<a name="l8110"><span class="linenum">8110</span></a>  <span class="comment">    /** @var string callback arg - the plugintype of the editor we export */</span>
<a name="l8111"><span class="linenum">8111</span></a>      protected <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>;
<a name="l8112"><span class="linenum">8112</span></a>  
<a name="l8113"><span class="linenum">8113</span></a>  <span class="comment">    /** @var string callback arg - the name of the editor field we export */</span>
<a name="l8114"><span class="linenum">8114</span></a>      protected <a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../../_variables/editor.html">$editor</a>;
<a name="l8115"><span class="linenum">8115</span></a>  
<a name="l8116"><span class="linenum">8116</span></a>      <span class="comment">/**</span>
<a name="l8117"><span class="linenum">8117</span></a>  <span class="comment">     * Callback arg for a single file export.</span>
<a name="l8118"><span class="linenum">8118</span></a>  <span class="comment">     */</span>
<a name="l8119"><span class="linenum">8119</span></a>      public static function <a class="function" onClick="logFunction('expected_callbackargs')" href="../../_functions/expected_callbackargs.html" onMouseOver="funcPopup(event,'expected_callbackargs')">expected_callbackargs</a>() {
<a name="l8120"><span class="linenum">8120</span></a>          return array(
<a name="l8121"><span class="linenum">8121</span></a>              'cmid' =&gt; true,
<a name="l8122"><span class="linenum">8122</span></a>              'sid' =&gt; false,
<a name="l8123"><span class="linenum">8123</span></a>              'area' =&gt; false,
<a name="l8124"><span class="linenum">8124</span></a>              'component' =&gt; false,
<a name="l8125"><span class="linenum">8125</span></a>              'fileid' =&gt; false,
<a name="l8126"><span class="linenum">8126</span></a>              'plugin' =&gt; false,
<a name="l8127"><span class="linenum">8127</span></a>              'editor' =&gt; false,
<a name="l8128"><span class="linenum">8128</span></a>          );
<a name="l8129"><span class="linenum">8129</span></a>      }
<a name="l8130"><span class="linenum">8130</span></a>  
<a name="l8131"><span class="linenum">8131</span></a>      <span class="comment">/**</span>
<a name="l8132"><span class="linenum">8132</span></a>  <span class="comment">     * The constructor.</span>
<a name="l8133"><span class="linenum">8133</span></a>  <span class="comment">     *</span>
<a name="l8134"><span class="linenum">8134</span></a>  <span class="comment">     * @param array $callbackargs</span>
<a name="l8135"><span class="linenum">8135</span></a>  <span class="comment">     */</span>
<a name="l8136"><span class="linenum">8136</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it10647" onMouseOver="hilite(10647)" onMouseOut="lolite()" onClick="logVariable('callbackargs')" href="../../_variables/callbackargs.html">$callbackargs</a>) {
<a name="l8137"><span class="linenum">8137</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it10647" onMouseOver="hilite(10647)" onMouseOut="lolite()" onClick="logVariable('callbackargs')" href="../../_variables/callbackargs.html">$callbackargs</a>);
<a name="l8138"><span class="linenum">8138</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cm')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_id')" href="../../_functions/get_coursemodule_from_id.html" onMouseOver="funcPopup(event,'get_coursemodule_from_id')">get_coursemodule_from_id</a>('assign', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cmid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>, 0, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l8139"><span class="linenum">8139</span></a>      }
<a name="l8140"><span class="linenum">8140</span></a>  
<a name="l8141"><span class="linenum">8141</span></a>      <span class="comment">/**</span>
<a name="l8142"><span class="linenum">8142</span></a>  <span class="comment">     * Load data needed for the portfolio export.</span>
<a name="l8143"><span class="linenum">8143</span></a>  <span class="comment">     *</span>
<a name="l8144"><span class="linenum">8144</span></a>  <span class="comment">     * If the assignment type implements portfolio_load_data(), the processing is delegated</span>
<a name="l8145"><span class="linenum">8145</span></a>  <span class="comment">     * to it. Otherwise, the caller must provide either fileid (to export single file) or</span>
<a name="l8146"><span class="linenum">8146</span></a>  <span class="comment">     * submissionid and filearea (to export all data attached to the given submission file area)</span>
<a name="l8147"><span class="linenum">8147</span></a>  <span class="comment">     * via callback arguments.</span>
<a name="l8148"><span class="linenum">8148</span></a>  <span class="comment">     *</span>
<a name="l8149"><span class="linenum">8149</span></a>  <span class="comment">     * @throws     portfolio_caller_exception</span>
<a name="l8150"><span class="linenum">8150</span></a>  <span class="comment">     */</span>
<a name="l8151"><span class="linenum">8151</span></a>      public function <a class="function" onClick="logFunction('load_data')" href="../../_functions/load_data.html" onMouseOver="funcPopup(event,'load_data')">load_data</a>() {
<a name="l8152"><span class="linenum">8152</span></a>  
<a name="l8153"><span class="linenum">8153</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cmid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>);
<a name="l8154"><span class="linenum">8154</span></a>  
<a name="l8155"><span class="linenum">8155</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fileid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/fileid.html">fileid</a>)) {
<a name="l8156"><span class="linenum">8156</span></a>              if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/sid.html">sid</a>) || empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>)) {
<a name="l8157"><span class="linenum">8157</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_caller_exception')" href="../../_classes/portfolio_caller_exception.html" onMouseOver="classPopup(event,'portfolio_caller_exception')">portfolio_caller_exception</a>('invalidfileandsubmissionid', 'mod_assign');
<a name="l8158"><span class="linenum">8158</span></a>              }
<a name="l8159"><span class="linenum">8159</span></a>  
<a name="l8160"><span class="linenum">8160</span></a>          }
<a name="l8161"><span class="linenum">8161</span></a>  
<a name="l8162"><span class="linenum">8162</span></a>  <span class="comment">        // Export either an area of files or a single file (see function for more detail).</span>
<a name="l8163"><span class="linenum">8163</span></a>  <span class="comment">        // The first arg is an id or null. If it is an id, the rest of the args are ignored.</span>
<a name="l8164"><span class="linenum">8164</span></a>  <span class="comment">        // If it is null, the rest of the args are used to load a list of files from get_areafiles.</span>
<a name="l8165"><span class="linenum">8165</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_file_and_format_data')" href="../../_functions/set_file_and_format_data.html" onMouseOver="funcPopup(event,'set_file_and_format_data')">set_file_and_format_data</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fileid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/fileid.html">fileid</a>,
<a name="l8166"><span class="linenum">8166</span></a>                                          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l8167"><span class="linenum">8167</span></a>                                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('component')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>,
<a name="l8168"><span class="linenum">8168</span></a>                                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>,
<a name="l8169"><span class="linenum">8169</span></a>                                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/sid.html">sid</a>,
<a name="l8170"><span class="linenum">8170</span></a>                                          'timemodified',
<a name="l8171"><span class="linenum">8171</span></a>                                          false);
<a name="l8172"><span class="linenum">8172</span></a>  
<a name="l8173"><span class="linenum">8173</span></a>      }
<a name="l8174"><span class="linenum">8174</span></a>  
<a name="l8175"><span class="linenum">8175</span></a>      <span class="comment">/**</span>
<a name="l8176"><span class="linenum">8176</span></a>  <span class="comment">     * Prepares the package up before control is passed to the portfolio plugin.</span>
<a name="l8177"><span class="linenum">8177</span></a>  <span class="comment">     *</span>
<a name="l8178"><span class="linenum">8178</span></a>  <span class="comment">     * @throws portfolio_caller_exception</span>
<a name="l8179"><span class="linenum">8179</span></a>  <span class="comment">     * @return mixed</span>
<a name="l8180"><span class="linenum">8180</span></a>  <span class="comment">     */</span>
<a name="l8181"><span class="linenum">8181</span></a>      public function <a class="function" onClick="logFunction('prepare_package')" href="../../_functions/prepare_package.html" onMouseOver="funcPopup(event,'prepare_package')">prepare_package</a>() {
<a name="l8182"><span class="linenum">8182</span></a>  
<a name="l8183"><span class="linenum">8183</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/plugin.html">plugin</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/editor.html">editor</a>) {
<a name="l8184"><span class="linenum">8184</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = <a class="function" onClick="logFunction('portfolio_format_text_options')" href="../../_functions/portfolio_format_text_options.html" onMouseOver="funcPopup(event,'portfolio_format_text_options')">portfolio_format_text_options</a>();
<a name="l8185"><span class="linenum">8185</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cmid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>);
<a name="l8186"><span class="linenum">8186</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('context')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l8187"><span class="linenum">8187</span></a>  
<a name="l8188"><span class="linenum">8188</span></a>              <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugin')" href="../../_functions/get_submission_plugin.html" onMouseOver="funcPopup(event,'get_submission_plugin')">get_submission_plugin</a>();
<a name="l8189"><span class="linenum">8189</span></a>  
<a name="l8190"><span class="linenum">8190</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_editor_text')" href="../../_functions/get_editor_text.html" onMouseOver="funcPopup(event,'get_editor_text')">get_editor_text</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/editor.html">editor</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/sid.html">sid</a>);
<a name="l8191"><span class="linenum">8191</span></a>              <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a> = <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_editor_format')" href="../../_functions/get_editor_format.html" onMouseOver="funcPopup(event,'get_editor_format')">get_editor_format</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/editor.html">editor</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/sid.html">sid</a>);
<a name="l8192"><span class="linenum">8192</span></a>  
<a name="l8193"><span class="linenum">8193</span></a>              <a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('html')" href="../../_variables/html.html">$html</a> = <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l8194"><span class="linenum">8194</span></a>              <a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('html')" href="../../_variables/html.html">$html</a> = <a class="function" onClick="logFunction('portfolio_rewrite_pluginfile_urls')" href="../../_functions/portfolio_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'portfolio_rewrite_pluginfile_urls')">portfolio_rewrite_pluginfile_urls</a>(<a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('html')" href="../../_variables/html.html">$html</a>,
<a name="l8195"><span class="linenum">8195</span></a>                                                        <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l8196"><span class="linenum">8196</span></a>                                                        'mod_assign',
<a name="l8197"><span class="linenum">8197</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>,
<a name="l8198"><span class="linenum">8198</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/sid.html">sid</a>,
<a name="l8199"><span class="linenum">8199</span></a>                                                        <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('format'));
<a name="l8200"><span class="linenum">8200</span></a>  
<a name="l8201"><span class="linenum">8201</span></a>              <a class="var it32248" onMouseOver="hilite(32248)" onMouseOut="lolite()" onClick="logVariable('exporterclass')" href="../../_variables/exporterclass.html">$exporterclass</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('formatclass');
<a name="l8202"><span class="linenum">8202</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it32248" onMouseOver="hilite(32248)" onMouseOut="lolite()" onClick="logVariable('exporterclass')" href="../../_variables/exporterclass.html">$exporterclass</a>, array(<a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_PLAINHTML')" href="../../_constants/PORTFOLIO_FORMAT_PLAINHTML.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_PLAINHTML')">PORTFOLIO_FORMAT_PLAINHTML</a>, <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_RICHHTML')" href="../../_constants/PORTFOLIO_FORMAT_RICHHTML.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_RICHHTML')">PORTFOLIO_FORMAT_RICHHTML</a>))) {
<a name="l8203"><span class="linenum">8203</span></a>                  if (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('caller')-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('multifiles')) {
<a name="l8204"><span class="linenum">8204</span></a>                      foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l8205"><span class="linenum">8205</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('copy_existing_file')" href="../../_functions/copy_existing_file.html" onMouseOver="funcPopup(event,'copy_existing_file')">copy_existing_file</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>);
<a name="l8206"><span class="linenum">8206</span></a>                      }
<a name="l8207"><span class="linenum">8207</span></a>                  }
<a name="l8208"><span class="linenum">8208</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('write_new_file')" href="../../_functions/write_new_file.html" onMouseOver="funcPopup(event,'write_new_file')">write_new_file</a>(<a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('html')" href="../../_variables/html.html">$html</a>, 'assignment.html', !empty(<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a>));
<a name="l8209"><span class="linenum">8209</span></a>              } else if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('formatclass') == <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_LEAP2A')" href="../../_constants/PORTFOLIO_FORMAT_LEAP2A.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_LEAP2A')">PORTFOLIO_FORMAT_LEAP2A</a>) {
<a name="l8210"><span class="linenum">8210</span></a>                  <a class="var it19232" onMouseOver="hilite(19232)" onMouseOut="lolite()" onClick="logVariable('leapwriter')" href="../../_variables/leapwriter.html">$leapwriter</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('format')-&gt;<a class="function" onClick="logFunction('leap2a_writer')" href="../../_functions/leap2a_writer.html" onMouseOver="funcPopup(event,'leap2a_writer')">leap2a_writer</a>();
<a name="l8211"><span class="linenum">8211</span></a>                  <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a> = <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_format_leap2a_entry')" href="../../_classes/portfolio_format_leap2a_entry.html" onMouseOver="classPopup(event,'portfolio_format_leap2a_entry')">portfolio_format_leap2a_entry</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a> . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cmid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>,
<a name="l8212"><span class="linenum">8212</span></a>                                                             <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_context_name')" href="../../_functions/get_context_name.html" onMouseOver="funcPopup(event,'get_context_name')">get_context_name</a>(),
<a name="l8213"><span class="linenum">8213</span></a>                                                             'resource',
<a name="l8214"><span class="linenum">8214</span></a>                                                             <a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('html')" href="../../_variables/html.html">$html</a>);
<a name="l8215"><span class="linenum">8215</span></a>  
<a name="l8216"><span class="linenum">8216</span></a>                  <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a class="function" onClick="logFunction('add_category')" href="../../_functions/add_category.html" onMouseOver="funcPopup(event,'add_category')">add_category</a>('web', 'resource_type');
<a name="l8217"><span class="linenum">8217</span></a>                  <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('author')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/author.html">author</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('user')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>;
<a name="l8218"><span class="linenum">8218</span></a>                  <a class="var it19232" onMouseOver="hilite(19232)" onMouseOut="lolite()" onClick="logVariable('leapwriter')" href="../../_variables/leapwriter.html">$leapwriter</a>-&gt;<a class="function" onClick="logFunction('add_entry')" href="../../_functions/add_entry.html" onMouseOver="funcPopup(event,'add_entry')">add_entry</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>);
<a name="l8219"><span class="linenum">8219</span></a>                  if (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('caller')-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('multifiles')) {
<a name="l8220"><span class="linenum">8220</span></a>                      <a class="var it19232" onMouseOver="hilite(19232)" onMouseOut="lolite()" onClick="logVariable('leapwriter')" href="../../_variables/leapwriter.html">$leapwriter</a>-&gt;<a class="function" onClick="logFunction('link_files')" href="../../_functions/link_files.html" onMouseOver="funcPopup(event,'link_files')">link_files</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a> . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cmid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a> . 'file');
<a name="l8221"><span class="linenum">8221</span></a>                      foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l8222"><span class="linenum">8222</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('copy_existing_file')" href="../../_functions/copy_existing_file.html" onMouseOver="funcPopup(event,'copy_existing_file')">copy_existing_file</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>);
<a name="l8223"><span class="linenum">8223</span></a>                      }
<a name="l8224"><span class="linenum">8224</span></a>                  }
<a name="l8225"><span class="linenum">8225</span></a>                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('write_new_file')" href="../../_functions/write_new_file.html" onMouseOver="funcPopup(event,'write_new_file')">write_new_file</a>(<a class="var it19232" onMouseOver="hilite(19232)" onMouseOut="lolite()" onClick="logVariable('leapwriter')" href="../../_variables/leapwriter.html">$leapwriter</a>-&gt;<a class="function" onClick="logFunction('to_xml')" href="../../_functions/to_xml.html" onMouseOver="funcPopup(event,'to_xml')">to_xml</a>(),
<a name="l8226"><span class="linenum">8226</span></a>                                                         <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('format')-&gt;<a class="function" onClick="logFunction('manifest_name')" href="../../_functions/manifest_name.html" onMouseOver="funcPopup(event,'manifest_name')">manifest_name</a>(),
<a name="l8227"><span class="linenum">8227</span></a>                                                         true);
<a name="l8228"><span class="linenum">8228</span></a>              } else {
<a name="l8229"><span class="linenum">8229</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('invalid format class: ' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('formatclass'));
<a name="l8230"><span class="linenum">8230</span></a>              }
<a name="l8231"><span class="linenum">8231</span></a>  
<a name="l8232"><span class="linenum">8232</span></a>          }
<a name="l8233"><span class="linenum">8233</span></a>  
<a name="l8234"><span class="linenum">8234</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('formatclass') == <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_LEAP2A')" href="../../_constants/PORTFOLIO_FORMAT_LEAP2A.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_LEAP2A')">PORTFOLIO_FORMAT_LEAP2A</a>) {
<a name="l8235"><span class="linenum">8235</span></a>              <a class="var it19232" onMouseOver="hilite(19232)" onMouseOut="lolite()" onClick="logVariable('leapwriter')" href="../../_variables/leapwriter.html">$leapwriter</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('format')-&gt;<a class="function" onClick="logFunction('leap2a_writer')" href="../../_functions/leap2a_writer.html" onMouseOver="funcPopup(event,'leap2a_writer')">leap2a_writer</a>();
<a name="l8236"><span class="linenum">8236</span></a>              <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = array();
<a name="l8237"><span class="linenum">8237</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('singlefile')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/singlefile.html">singlefile</a>) {
<a name="l8238"><span class="linenum">8238</span></a>                  <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('singlefile')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/singlefile.html">singlefile</a>;
<a name="l8239"><span class="linenum">8239</span></a>              } else if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('multifiles')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/multifiles.html">multifiles</a>) {
<a name="l8240"><span class="linenum">8240</span></a>                  <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('multifiles')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/multifiles.html">multifiles</a>;
<a name="l8241"><span class="linenum">8241</span></a>              } else {
<a name="l8242"><span class="linenum">8242</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_caller_exception')" href="../../_classes/portfolio_caller_exception.html" onMouseOver="classPopup(event,'portfolio_caller_exception')">portfolio_caller_exception</a>('invalidpreparepackagefile',
<a name="l8243"><span class="linenum">8243</span></a>                                                       'portfolio',
<a name="l8244"><span class="linenum">8244</span></a>                                                       <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_return_url')" href="../../_functions/get_return_url.html" onMouseOver="funcPopup(event,'get_return_url')">get_return_url</a>());
<a name="l8245"><span class="linenum">8245</span></a>              }
<a name="l8246"><span class="linenum">8246</span></a>  
<a name="l8247"><span class="linenum">8247</span></a>              <a class="var it32250" onMouseOver="hilite(32250)" onMouseOut="lolite()" onClick="logVariable('entryids')" href="../../_variables/entryids.html">$entryids</a> = array();
<a name="l8248"><span class="linenum">8248</span></a>              foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l8249"><span class="linenum">8249</span></a>                  <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a> = <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_format_leap2a_file')" href="../../_classes/portfolio_format_leap2a_file.html" onMouseOver="classPopup(event,'portfolio_format_leap2a_file')">portfolio_format_leap2a_file</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>(), <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>);
<a name="l8250"><span class="linenum">8250</span></a>                  <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('author')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/author.html">author</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('user')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>;
<a name="l8251"><span class="linenum">8251</span></a>                  <a class="var it19232" onMouseOver="hilite(19232)" onMouseOut="lolite()" onClick="logVariable('leapwriter')" href="../../_variables/leapwriter.html">$leapwriter</a>-&gt;<a class="function" onClick="logFunction('add_entry')" href="../../_functions/add_entry.html" onMouseOver="funcPopup(event,'add_entry')">add_entry</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>);
<a name="l8252"><span class="linenum">8252</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('copy_existing_file')" href="../../_functions/copy_existing_file.html" onMouseOver="funcPopup(event,'copy_existing_file')">copy_existing_file</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>);
<a name="l8253"><span class="linenum">8253</span></a>                  <a class="var it32250" onMouseOver="hilite(32250)" onMouseOut="lolite()" onClick="logVariable('entryids')" href="../../_variables/entryids.html">$entryids</a>[] = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l8254"><span class="linenum">8254</span></a>              }
<a name="l8255"><span class="linenum">8255</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a>) &gt; 1) {
<a name="l8256"><span class="linenum">8256</span></a>                  <a class="var it32251" onMouseOver="hilite(32251)" onMouseOut="lolite()" onClick="logVariable('baseid')" href="../../_variables/baseid.html">$baseid</a> = 'assign' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cmid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a> . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>;
<a name="l8257"><span class="linenum">8257</span></a>                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cmid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>);
<a name="l8258"><span class="linenum">8258</span></a>  
<a name="l8259"><span class="linenum">8259</span></a>  <span class="comment">                // If we have multiple files, they should be grouped together into a folder.</span>
<a name="l8260"><span class="linenum">8260</span></a>                  <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a> = <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_format_leap2a_entry')" href="../../_classes/portfolio_format_leap2a_entry.html" onMouseOver="classPopup(event,'portfolio_format_leap2a_entry')">portfolio_format_leap2a_entry</a>(<a class="var it32251" onMouseOver="hilite(32251)" onMouseOut="lolite()" onClick="logVariable('baseid')" href="../../_variables/baseid.html">$baseid</a> . 'group',
<a name="l8261"><span class="linenum">8261</span></a>                                                             <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_context_name')" href="../../_functions/get_context_name.html" onMouseOver="funcPopup(event,'get_context_name')">get_context_name</a>(),
<a name="l8262"><span class="linenum">8262</span></a>                                                             'selection');
<a name="l8263"><span class="linenum">8263</span></a>                  <a class="var it19232" onMouseOver="hilite(19232)" onMouseOut="lolite()" onClick="logVariable('leapwriter')" href="../../_variables/leapwriter.html">$leapwriter</a>-&gt;<a class="function" onClick="logFunction('add_entry')" href="../../_functions/add_entry.html" onMouseOver="funcPopup(event,'add_entry')">add_entry</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>);
<a name="l8264"><span class="linenum">8264</span></a>                  <a class="var it19232" onMouseOver="hilite(19232)" onMouseOut="lolite()" onClick="logVariable('leapwriter')" href="../../_variables/leapwriter.html">$leapwriter</a>-&gt;<a class="function" onClick="logFunction('make_selection')" href="../../_functions/make_selection.html" onMouseOver="funcPopup(event,'make_selection')">make_selection</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it32250" onMouseOver="hilite(32250)" onMouseOut="lolite()" onClick="logVariable('entryids')" href="../../_variables/entryids.html">$entryids</a>, 'Folder');
<a name="l8265"><span class="linenum">8265</span></a>              }
<a name="l8266"><span class="linenum">8266</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('write_new_file')" href="../../_functions/write_new_file.html" onMouseOver="funcPopup(event,'write_new_file')">write_new_file</a>(<a class="var it19232" onMouseOver="hilite(19232)" onMouseOut="lolite()" onClick="logVariable('leapwriter')" href="../../_variables/leapwriter.html">$leapwriter</a>-&gt;<a class="function" onClick="logFunction('to_xml')" href="../../_functions/to_xml.html" onMouseOver="funcPopup(event,'to_xml')">to_xml</a>(),
<a name="l8267"><span class="linenum">8267</span></a>                                                     <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('exporter')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/exporter.html">exporter</a>-&gt;<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('format')-&gt;<a class="function" onClick="logFunction('manifest_name')" href="../../_functions/manifest_name.html" onMouseOver="funcPopup(event,'manifest_name')">manifest_name</a>(),
<a name="l8268"><span class="linenum">8268</span></a>                                                     true);
<a name="l8269"><span class="linenum">8269</span></a>          }
<a name="l8270"><span class="linenum">8270</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('prepare_package_file')" href="../../_functions/prepare_package_file.html" onMouseOver="funcPopup(event,'prepare_package_file')">prepare_package_file</a>();
<a name="l8271"><span class="linenum">8271</span></a>      }
<a name="l8272"><span class="linenum">8272</span></a>  
<a name="l8273"><span class="linenum">8273</span></a>      <span class="comment">/**</span>
<a name="l8274"><span class="linenum">8274</span></a>  <span class="comment">     * Fetch the plugin by its type.</span>
<a name="l8275"><span class="linenum">8275</span></a>  <span class="comment">     *</span>
<a name="l8276"><span class="linenum">8276</span></a>  <span class="comment">     * @return assign_submission_plugin</span>
<a name="l8277"><span class="linenum">8277</span></a>  <span class="comment">     */</span>
<a name="l8278"><span class="linenum">8278</span></a>      protected function <a class="function" onClick="logFunction('get_submission_plugin')" href="../../_functions/get_submission_plugin.html" onMouseOver="funcPopup(event,'get_submission_plugin')">get_submission_plugin</a>() {
<a name="l8279"><span class="linenum">8279</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l8280"><span class="linenum">8280</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/plugin.html">plugin</a> || !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cmid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>) {
<a name="l8281"><span class="linenum">8281</span></a>              return null;
<a name="l8282"><span class="linenum">8282</span></a>          }
<a name="l8283"><span class="linenum">8283</span></a>  
<a name="l8284"><span class="linenum">8284</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/assign/locallib.php.html">/mod/assign/locallib.php</a>');
<a name="l8285"><span class="linenum">8285</span></a>  
<a name="l8286"><span class="linenum">8286</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cmid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>);
<a name="l8287"><span class="linenum">8287</span></a>  
<a name="l8288"><span class="linenum">8288</span></a>          <a class="var it284" onMouseOver="hilite(284)" onMouseOut="lolite()" onClick="logVariable('assignment')" href="../../_variables/assignment.html">$assignment</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign')" href="../../_classes/assign.html" onMouseOver="classPopup(event,'assign')">assign</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, null, null);
<a name="l8289"><span class="linenum">8289</span></a>          return <a class="var it284" onMouseOver="hilite(284)" onMouseOut="lolite()" onClick="logVariable('assignment')" href="../../_variables/assignment.html">$assignment</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugin_by_type')" href="../../_functions/get_submission_plugin_by_type.html" onMouseOver="funcPopup(event,'get_submission_plugin_by_type')">get_submission_plugin_by_type</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/plugin.html">plugin</a>);
<a name="l8290"><span class="linenum">8290</span></a>      }
<a name="l8291"><span class="linenum">8291</span></a>  
<a name="l8292"><span class="linenum">8292</span></a>      <span class="comment">/**</span>
<a name="l8293"><span class="linenum">8293</span></a>  <span class="comment">     * Calculate a sha1 has of either a single file or a list</span>
<a name="l8294"><span class="linenum">8294</span></a>  <span class="comment">     * of files based on the data set by load_data.</span>
<a name="l8295"><span class="linenum">8295</span></a>  <span class="comment">     *</span>
<a name="l8296"><span class="linenum">8296</span></a>  <span class="comment">     * @return string</span>
<a name="l8297"><span class="linenum">8297</span></a>  <span class="comment">     */</span>
<a name="l8298"><span class="linenum">8298</span></a>      public function <a class="function" onClick="logFunction('get_sha1')" href="../../_functions/get_sha1.html" onMouseOver="funcPopup(event,'get_sha1')">get_sha1</a>() {
<a name="l8299"><span class="linenum">8299</span></a>  
<a name="l8300"><span class="linenum">8300</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/plugin.html">plugin</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/editor.html">editor</a>) {
<a name="l8301"><span class="linenum">8301</span></a>              <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_submission_plugin')" href="../../_functions/get_submission_plugin.html" onMouseOver="funcPopup(event,'get_submission_plugin')">get_submission_plugin</a>();
<a name="l8302"><span class="linenum">8302</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = <a class="function" onClick="logFunction('portfolio_format_text_options')" href="../../_functions/portfolio_format_text_options.html" onMouseOver="funcPopup(event,'portfolio_format_text_options')">portfolio_format_text_options</a>();
<a name="l8303"><span class="linenum">8303</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('context')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cmid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>);
<a name="l8304"><span class="linenum">8304</span></a>  
<a name="l8305"><span class="linenum">8305</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_editor_text')" href="../../_functions/get_editor_text.html" onMouseOver="funcPopup(event,'get_editor_text')">get_editor_text</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/editor.html">editor</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/sid.html">sid</a>),
<a name="l8306"><span class="linenum">8306</span></a>                                  <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('get_editor_format')" href="../../_functions/get_editor_format.html" onMouseOver="funcPopup(event,'get_editor_format')">get_editor_format</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/editor.html">editor</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('sid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/sid.html">sid</a>),
<a name="l8307"><span class="linenum">8307</span></a>                                  <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l8308"><span class="linenum">8308</span></a>              <a class="var it32252" onMouseOver="hilite(32252)" onMouseOut="lolite()" onClick="logVariable('textsha1')" href="../../_variables/textsha1.html">$textsha1</a> = <a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>);
<a name="l8309"><span class="linenum">8309</span></a>              <a class="var it32253" onMouseOver="hilite(32253)" onMouseOut="lolite()" onClick="logVariable('filesha1')" href="../../_variables/filesha1.html">$filesha1</a> = '';
<a name="l8310"><span class="linenum">8310</span></a>              try {
<a name="l8311"><span class="linenum">8311</span></a>                  <a class="var it32253" onMouseOver="hilite(32253)" onMouseOut="lolite()" onClick="logVariable('filesha1')" href="../../_variables/filesha1.html">$filesha1</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_sha1_file')" href="../../_functions/get_sha1_file.html" onMouseOver="funcPopup(event,'get_sha1_file')">get_sha1_file</a>();
<a name="l8312"><span class="linenum">8312</span></a>              } catch (portfolio_caller_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l8313"><span class="linenum">8313</span></a>  <span class="comment">                // No files.</span>
<a name="l8314"><span class="linenum">8314</span></a>              }
<a name="l8315"><span class="linenum">8315</span></a>              return <a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it32252" onMouseOver="hilite(32252)" onMouseOut="lolite()" onClick="logVariable('textsha1')" href="../../_variables/textsha1.html">$textsha1</a> . <a class="var it32253" onMouseOver="hilite(32253)" onMouseOut="lolite()" onClick="logVariable('filesha1')" href="../../_variables/filesha1.html">$filesha1</a>);
<a name="l8316"><span class="linenum">8316</span></a>          }
<a name="l8317"><span class="linenum">8317</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_sha1_file')" href="../../_functions/get_sha1_file.html" onMouseOver="funcPopup(event,'get_sha1_file')">get_sha1_file</a>();
<a name="l8318"><span class="linenum">8318</span></a>      }
<a name="l8319"><span class="linenum">8319</span></a>  
<a name="l8320"><span class="linenum">8320</span></a>      <span class="comment">/**</span>
<a name="l8321"><span class="linenum">8321</span></a>  <span class="comment">     * Calculate the time to transfer either a single file or a list</span>
<a name="l8322"><span class="linenum">8322</span></a>  <span class="comment">     * of files based on the data set by load_data.</span>
<a name="l8323"><span class="linenum">8323</span></a>  <span class="comment">     *</span>
<a name="l8324"><span class="linenum">8324</span></a>  <span class="comment">     * @return int</span>
<a name="l8325"><span class="linenum">8325</span></a>  <span class="comment">     */</span>
<a name="l8326"><span class="linenum">8326</span></a>      public function <a class="function" onClick="logFunction('expected_time')" href="../../_functions/expected_time.html" onMouseOver="funcPopup(event,'expected_time')">expected_time</a>() {
<a name="l8327"><span class="linenum">8327</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('expected_time_file')" href="../../_functions/expected_time_file.html" onMouseOver="funcPopup(event,'expected_time_file')">expected_time_file</a>();
<a name="l8328"><span class="linenum">8328</span></a>      }
<a name="l8329"><span class="linenum">8329</span></a>  
<a name="l8330"><span class="linenum">8330</span></a>      <span class="comment">/**</span>
<a name="l8331"><span class="linenum">8331</span></a>  <span class="comment">     * Checking the permissions.</span>
<a name="l8332"><span class="linenum">8332</span></a>  <span class="comment">     *</span>
<a name="l8333"><span class="linenum">8333</span></a>  <span class="comment">     * @return bool</span>
<a name="l8334"><span class="linenum">8334</span></a>  <span class="comment">     */</span>
<a name="l8335"><span class="linenum">8335</span></a>      public function <a class="function" onClick="logFunction('check_permissions')" href="../../_functions/check_permissions.html" onMouseOver="funcPopup(event,'check_permissions')">check_permissions</a>() {
<a name="l8336"><span class="linenum">8336</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cmid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>);
<a name="l8337"><span class="linenum">8337</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/assign:exportownsubmission', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l8338"><span class="linenum">8338</span></a>      }
<a name="l8339"><span class="linenum">8339</span></a>  
<a name="l8340"><span class="linenum">8340</span></a>      <span class="comment">/**</span>
<a name="l8341"><span class="linenum">8341</span></a>  <span class="comment">     * Display a module name.</span>
<a name="l8342"><span class="linenum">8342</span></a>  <span class="comment">     *</span>
<a name="l8343"><span class="linenum">8343</span></a>  <span class="comment">     * @return string</span>
<a name="l8344"><span class="linenum">8344</span></a>  <span class="comment">     */</span>
<a name="l8345"><span class="linenum">8345</span></a>      public static function <a class="function" onClick="logFunction('display_name')" href="../../_functions/display_name.html" onMouseOver="funcPopup(event,'display_name')">display_name</a>() {
<a name="l8346"><span class="linenum">8346</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', 'assign');
<a name="l8347"><span class="linenum">8347</span></a>      }
<a name="l8348"><span class="linenum">8348</span></a>  
<a name="l8349"><span class="linenum">8349</span></a>      <span class="comment">/**</span>
<a name="l8350"><span class="linenum">8350</span></a>  <span class="comment">     * Return array of formats supported by this portfolio call back.</span>
<a name="l8351"><span class="linenum">8351</span></a>  <span class="comment">     *</span>
<a name="l8352"><span class="linenum">8352</span></a>  <span class="comment">     * @return array</span>
<a name="l8353"><span class="linenum">8353</span></a>  <span class="comment">     */</span>
<a name="l8354"><span class="linenum">8354</span></a>      public static function <a class="function" onClick="logFunction('base_supported_formats')" href="../../_functions/base_supported_formats.html" onMouseOver="funcPopup(event,'base_supported_formats')">base_supported_formats</a>() {
<a name="l8355"><span class="linenum">8355</span></a>          return array(<a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_FILE')" href="../../_constants/PORTFOLIO_FORMAT_FILE.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_FILE')">PORTFOLIO_FORMAT_FILE</a>, <a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_LEAP2A')" href="../../_constants/PORTFOLIO_FORMAT_LEAP2A.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_LEAP2A')">PORTFOLIO_FORMAT_LEAP2A</a>);
<a name="l8356"><span class="linenum">8356</span></a>      }
<a name="l8357"><span class="linenum">8357</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'update_submission': ['update_submission', 'Update grades in the gradebook based on submission time. ', [['mod/assign','locallib.php',5011]], 8],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'get_submission_plugin': ['get_submission_plugin', 'Fetch the plugin by its type. ', [['mod/assign','locallib.php',8273]], 2],
'closeheaderbefore': ['closeheaderbefore', 'Adds one or more element names that indicate the end of a fieldset ', [['lib','formslib.php',1738]], 43],
'get_coursemodule_from_id': ['get_coursemodule_from_id', 'Given an id of a course module, finds the coursemodule description ', [['lib','datalib.php',1238]], 212],
'is_enabled': ['is_enabled', 'Tools cannot be disabled. ', [['lib/classes/plugininfo','tool.php',39],['admin/tool/recyclebin/classes','category_bin.php',54],['admin/tool/log/classes/plugininfo','logstore.php',35],['admin/tool/recyclebin/classes','course_bin.php',54],['mod/assign/feedback/offline','locallib.php',380],['admin/tool/recyclebin/classes','base_bin.php',38],['lib','adminlib.php',1955],['search/classes','base.php',190],['lib','medialib.php',318],['lib','medialib.php',635],['lib','medialib.php',1268],['admin/tool/health','index.php',393],['lib/classes/plugininfo','mnetservice.php',33],['lib/classes/message/inbound','manager.php',37],['mod/assignment/classes/plugininfo','assignment.php',32],['competency/classes','api.php',49],['mod/assign','assignmentplugin.php',223],['lib/classes/plugininfo','orphaned.php',37],['search/tests/fixtures','mock_search_area.php',38],['tag/classes','area.php',106],['lib/classes/plugininfo','base.php',383],['mod/assign/feedback/editpdf','locallib.php',340],['tag/classes','tag.php',1269],['mod/assign/submission/comments','locallib.php',172],['lib','completionlib.php',269]], 276],
'get_file_areas': ['get_file_areas', 'Get file areas returns a list of areas this plugin stores files ', [['mod/assign/submission/file','locallib.php',496],['mod/assign','assignmentplugin.php',549],['mod/assign/submission/onlinetext','locallib.php',591],['mod/assign/feedback/file','locallib.php',343],['mod/assign/feedback/editpdf','locallib.php',362]], 9],
'get_module_name_plural': ['get_module_name_plural', 'Get the plural name of the current module. ', [['mod/assign','locallib.php',1202]], 0],
'add_category': ['add_category', 'Adds a structured category to the navigation in the correct order/place ', [['lib','navigationlib.php',1761],['user/classes/output/myprofile','tree.php',67],['lib/portfolio/formats/leap2a','lib.php',348],['question','category_class.php',390]], 42],
'copy_previous_attempt': ['copy_previous_attempt', 'Copy the current assignment submission from the last submitted attempt. ', [['mod/assign','locallib.php',6263],['mod/assign','externallib.php',2101]], 4],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'submission_empty': ['submission_empty', 'Determine if the current submission is empty or not. ', [['mod/assign','locallib.php',6355]], 3],
'get_marking_workflow_states_for_current_user': ['get_marking_workflow_states_for_current_user', 'Get the list of marking_workflow states the current user has permission to transition a grade to. ', [['mod/assign','locallib.php',7910]], 9],
'show_submit_button': ['show_submit_button', 'Returns true if the submit subsission button should be shown to the user. ', [['mod/assign','locallib.php',4597]], 1],
'delete_grades': ['delete_grades', 'Delete all grades from the gradebook for this assignment. ', [['mod/assign','locallib.php',696]], 2],
'count_participants': ['count_participants', 'Load a count of active users enrolled in the current course with the specified permission and group. 0 for no group. ', [['mod/assign','locallib.php',1662],['mod/workshop','locallib.php',670]], 3],
'process_reveal_identities': ['process_reveal_identities', 'Reveal student identities to markers (and the gradebook). ', [['mod/assign','locallib.php',6090]], 1],
'cron': ['cron', 'Find user\'s who have completed this criteria ', [['completion/criteria','completion_criteria_course.php',152],['enrol/manual','lib.php',284],['admin/registration','lib.php',50],['question/engine','bank.php',415],['completion/criteria','completion_criteria_date.php',144],['repository/dropbox','lib.php',704],['lib/classes/update','checker.php',193],['enrol/imsenterprise','lib.php',87],['lib','enrollib.php',1980],['repository','lib.php',2357],['auth/mnet','auth.php',832],['enrol/self','lib.php',423],['cache/classes','helper.php',659],['enrol/cohort','lib.php',164],['lib/filestorage','file_storage.php',2494],['enrol/category','lib.php',77],['mod/assign','assignmentplugin.php',534],['mod/assign','locallib.php',1880],['completion/criteria','completion_criteria_grade.php',185],['blocks/recent_activity','block_recent_activity.php',231],['completion/criteria','completion_criteria_activity.php',198],['enrol/paypal','lib.php',303],['completion/criteria','completion_criteria_duration.php',197],['blocks/rss_client','block_rss_client.php',262],['enrol/meta','lib.php',206]], 71],
'reset_userdata': ['reset_userdata', 'Actual implementation of the reset course functionality, delete all the assignment submissions for course $data->courseid. ', [['mod/assign','locallib.php',761],['mod/workshop','locallib.php',2567]], 8],
'setelements': ['setelements', 'Sets the grouped elements ', [['lib/pear/HTML/QuickForm','group.php',232],['lib/form','group.php',97]], 6],
'get_admin_config': ['get_admin_config', 'Load and cache the admin config for this module. ', [['mod/assign','locallib.php',911]], 15],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'load_data': ['load_data', '', [['mod/chat','locallib.php',51],['message/output/jabber','message_output_jabber.php',125],['user/profile','lib.php',291],['mod/data','locallib.php',77],['grade/report/user/tests','externallib_test.php',43],['mod/assign','locallib.php',8141],['mod/glossary','locallib.php',51],['mod/glossary','locallib.php',233],['message/output/popup','message_output_popup.php',87],['message/output/email','message_output_email.php',180],['message/output/airnotifier','message_output_airnotifier.php',204],['mod/forum','locallib.php',64]], 9],
'confirm': ['confirm', 'Print a message along with button choices for Continue/Cancel ', [['lib','outputrenderers.php',1734]], 204],
'get_grade_item': ['get_grade_item', 'Returns this grade_item. This method is also available in grade_category, for cases where the object type is not know. ', [['lib/grade','grade_item.php',1306],['lib/grade','grade_category.php',2235],['lib/classes','grades_external.php',292],['mod/assign','locallib.php',1245]], 26],
'count_submissions_with_status': ['count_submissions_with_status', 'Load a count of submissions with a specified status. ', [['mod/assign','locallib.php',1789]], 16],
'allow_submissions': ['allow_submissions', 'This plugin accepts submissions from a student The comments plugin has no submission component so should not be counted when determining whether to show the edit submission link. ', [['mod/assign','submissionplugin.php',49],['mod/assign/submission/comments','locallib.php',163]], 6],
'count_teams': ['count_teams', 'Load a count of valid teams for this assignment. ', [['mod/assign','locallib.php',1610]], 6],
'check_permissions': ['check_permissions', '', [['mod/chat','locallib.php',106],['mod/data','locallib.php',238],['comment','lib.php',308],['mod/assign','locallib.php',8330],['mod/glossary','locallib.php',183],['mod/glossary','locallib.php',286],['mod/assign','adminlib.php',258],['mod/forum','locallib.php',374]], 5],
'grading_batch_operation': ['grading_batch_operation', 'Show a batch operations form ', [['mod/assign','feedbackplugin.php',179],['mod/assign/feedback/file','locallib.php',544]], 1],
'is_gradebook_feedback_enabled': ['is_gradebook_feedback_enabled', 'Returns true if gradebook feedback plugin is enabled ', [['mod/assign','locallib.php',7967]], 5],
'save_submission': ['save_submission', 'Save assignment submission for the current user. ', [['mod/assign','locallib.php',6390],['mod/assign','externallib.php',1758]], 21],
'pack_files': ['pack_files', 'Generate zip file from array of given files. ', [['mod/assign','locallib.php',1859]], 1],
'get_id': ['get_id', 'Getter for $id. ', [['lib/classes/task','adhoc_task.php',51],['backup/converter','convertlib.php',100],['lib/filebrowser','virtual_root_file.php',290],['lib','adminlib.php',1719],['admin/tool/uploadcourse/classes','course.php',335],['lib/simplepie/library/SimplePie','Item.php',199],['lib/filestorage','stored_file.php',786],['cache/classes','definition.php',613],['grade/grading/form','lib.php',854],['question/engine','questionusage.php',120],['mod/lti/classes/local/ltiservice','service_base.php',76],['blocks/rss_client/classes/output','item.php',152],['backup/controller','backup_controller.class.php',263],['question/engine','questionattemptstep.php',136],['mod/lti/classes/local/ltiservice','resource_base.php',81]], 2250],
'view_batch_set_workflow_state': ['view_batch_set_workflow_state', 'Shows a form that allows the workflow state for selected submissions to be changed. ', [['mod/assign','locallib.php',4169]], 2],
'view_plugin_content': ['view_plugin_content', 'Display the submission that is used by a plugin. ', [['mod/assign','locallib.php',2555]], 2],
'get_return_action': ['get_return_action', 'Return an action that can be used to get back to the current page. ', [['mod/assign','locallib.php',219]], 9],
'view_grader': ['view_grader', 'View entire grader app. ', [['mod/assign','locallib.php',3807]], 1],
'preload_from_record': ['preload_from_record', 'Preloads context information from db record and strips the cached info. ', [['lib','accesslib.php',5250],['lib','accesslib.php',6079]], 61],
'archive_to_pathname': ['archive_to_pathname', 'Archive files and store the result in an OS file. ', [['lib/filestorage','tgz_packer.php',159],['lib/filestorage','zip_packer.php',89],['lib/filestorage','mbz_packer.php',75]], 32],
'get_submission_group_members': ['get_submission_group_members', 'Get a list of the users in the same group as this user. ', [['mod/assign','locallib.php',2261]], 8],
'get_data': ['get_data', '', [['mod/scorm','mod_form.php',526],['mod/feedback/item/multichoicerated','multichoicerated_form.php',96],['backup/util/structure','restore_path_element.class.php',118],['admin/tool/uploaduser','user_form.php',399],['mod/feedback/item/textfield','textfield_form.php',58],['admin/tool/lp/classes/form','persistent.php',202],['grade/export','grade_export_form.php',206],['mod/feedback','mod_form.php',163],['message/tests','inbound_test.php',632],['mod/feedback/item/textarea','textarea_form.php',57],['mod/survey','mod_form.php',49],['lib/simplepie/library/SimplePie','Parser.php',263],['lib','formslib.php',606],['mod/feedback/item/numeric','numeric_form.php',60],['admin/tool/uploadcourse/classes','course.php',269],['mod/feedback/item','feedback_item_class.php',52],['mod/feedback/item','feedback_item_class.php',264],['admin/webservice','forms.php',299],['grade/grading/form','lib.php',841],['blocks/rss_client','editfeed.php',101],['mod/lesson','mod_form.php',417],['grade/grading/form/guide','edit_form.php',142],['course','editsection_form.php',105],['lib/classes/event','base.php',647],['grade/grading/form/rubric','edit_form.php',136],['mod/feedback/item','feedback_item_form_class.php',112],['admin/tool/filetypes','edit_form.php',97],['mod/forum','mod_form.php',270],['mod/scorm/report/graphs/classes','report.php',49],['lib/classes/message/inbound','address_manager.php',361],['mod/workshop','locallib.php',3990],['mod/glossary','mod_form.php',203],['mod/feedback/item/captcha','lib.php',67],['lib','completionlib.php',869],['mod/feedback/item/multichoice','multichoice_form.php',93],['mod/choice','mod_form.php',121]], 388],
'get_all_groups': ['get_all_groups', 'Gets all groups for the given course. ', [['availability/condition/group/classes','frontend.php',61],['mod/assign','locallib.php',2535],['enrol','locallib.php',626]], 12],
'get_type': ['get_type', 'Get the type of the feed ', [['lib/simplepie/library','SimplePie.php',1624],['lib/simplepie/library/SimplePie','Restriction.php',122],['backup/util/ui','backup_ui_setting.class.php',102],['backup/util/ui','base_ui.class.php',294],['mod/lesson','locallib.php',2394],['lib/simplepie/library/SimplePie','Enclosure.php',877],['lib/classes','chart_series.php',127],['grade/report/singleview/classes/local/ui','bulk_insert.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',79],['backup/util/plan','backup_plan.class.php',70],['availability/classes','condition.php',102],['mod/assign','assignmentplugin.php',153],['backup/controller','backup_controller.class.php',244],['lib/classes','chart_base.php',150],['mod/workshop','locallib.php',3936],['mod/lti/classes/local/ltiservice','resource_base.php',114],['lib/simplepie/library/SimplePie','Caption.php',193],['backup/controller','restore_controller.class.php',261]], 90],
'has_all_capabilities': ['has_all_capabilities', 'Check if the user has all the capabilities in a list. ', [['lib','accesslib.php',521]], 31],
'file_rewrite_urls_to_pluginfile': ['file_rewrite_urls_to_pluginfile', 'Convert the draft file area URLs in some content to @@PLUGINFILE@@ tokens ready to be saved in the database. Normally, this is done automatically by {@link file_save_draft_area_files()}. ', [['lib','filelib.php',976]], 3],
'strlen': ['strlen', 'Counts the number of characters. Unit-tested by Kasper (single byte charsets only) ', [['lib/typo3','class.t3lib_cs.php',1520],['lib/classes','text.php',305]], 1649],
'get_all_submissions': ['get_all_submissions', 'Get the submissions for all previous attempts. ', [['mod/assign','locallib.php',4703]], 3],
'set_instance': ['set_instance', 'Set the submitted form data. ', [['mod/assign','locallib.php',265]], 1],
'users_order_by_sql': ['users_order_by_sql', 'This function generates the standard ORDER BY clause for use when generating lists of users. If you don\'t have a reason to use a different order, then you should use this method to generate the order when displaying lists of users. ', [['lib','datalib.php',290]], 62],
'is_enrolled': ['is_enrolled', 'Returns true if user is enrolled (is participating) in course this is intended for students and teachers. ', [['lib','accesslib.php',2038]], 145],
'get_user_id_for_uniqueid_static': ['get_user_id_for_uniqueid_static', 'Lookup this unique id and return the user id for this assignment. ', [['mod/assign','locallib.php',7889]], 1],
'continue_button': ['continue_button', 'Displays a continue button ', [['backup/util/ui','renderer.php',501],['lib','outputrenderers.php',2990]], 96],
'get_all_grades': ['get_all_grades', 'Get the grades for all previous attempts. For each grade - the grader is a full user record, and gradefordisplay is added (rendered from grading manager). ', [['mod/assign','locallib.php',4638]], 3],
'shift_course_mod_dates': ['shift_course_mod_dates', 'Change dates in module - used from course reset. ', [['lib','moodlelib.php',5026]], 10],
'set_data': ['set_data', '', [['mod/scorm','mod_form.php',456],['mod/feedback/item/multichoicerated','multichoicerated_form.php',84],['backup/util/structure','restore_path_element.class.php',95],['course','moodleform_mod.php',458],['blocks/html','edit_form.php',53],['question/type','edit_question_form.php',450],['question/type/random','edit_random_form.php',68],['lib','formslib.php',456],['question/type/missingtype','edit_missingtype_form.php',52],['badges','edit_form.php',137],['blocks','edit_form.php',255],['course','editsection_form.php',88],['admin/tool/filetypes','edit_form.php',83],['question','category_form.php',73],['lib/classes/message/inbound','address_manager.php',146],['question/type/multianswer','edit_multianswer_form.php',262],['cache','forms.php',242],['question/type/calculated','datasetitems_form.php',360],['mod/feedback/item/multichoice','multichoice_form.php',79]], 235],
'get_user_preferences': ['get_user_preferences', 'Used to fetch user preference(s) ', [['lib','moodlelib.php',1974],['user','externallib.php',1381]], 188],
'delete_instance': ['delete_instance', 'Delete all data related to a given workshop module instance ', [['mod/workshop/eval','lib.php',59],['mod/workshop/allocation/scheduled','lib.php',200],['mod/workshop/eval/best','lib.php',125],['mod/workshop/form','lib.php',118],['lib','enrollib.php',1849],['mod/workshop/allocation/random','lib.php',243],['mod/assign/submission/file','locallib.php',447],['mod/workshop/form/rubric','lib.php',405],['mod/assign/feedback/comments','locallib.php',485],['mod/workshop/form/comments','lib.php',360],['mod/workshop/allocation/manual','lib.php',349],['lib','accesslib.php',6111],['mod/assign','assignmentplugin.php',525],['mod/workshop/allocation','lib.php',62],['mod/assign','locallib.php',715],['mod/workshop/form/accumulative','lib.php',375],['mod/workshop/form/numerrors','lib.php',394],['mod/assign/submission/onlinetext','locallib.php',550],['mod/assign/feedback/file','locallib.php',320],['mod/assign/feedback/editpdf','locallib.php',324],['tag/classes','tag.php',473],['enrol/lti','lib.php',145]], 37],
'can_grade': ['can_grade', 'Does this user have grade permission for this assignment? ', [['mod/assign','locallib.php',2811]], 10],
'has_any_capability': ['has_any_capability', 'Check if the user has any one of several capabilities from a list. ', [['lib','accesslib.php',496]], 100],
'convert_grade_for_gradebook': ['convert_grade_for_gradebook', 'Convert the final raw grade(s) in the grading table for the gradebook. ', [['mod/assign','locallib.php',4840]], 1],
'process_lock_submission': ['process_lock_submission', 'Prevent student updates to this submission. Uses url parameter userid. ', [['mod/assign','locallib.php',7222]], 2],
'assign_files': ['assign_files', 'Rendering assignment files ', [['mod/assign','renderer.php',40]], 2],
'params': ['params', 'Add an array of params to the params for this url. ', [['lib','weblib.php',392],['question/classes/bank/search','condition.php',43],['question/classes/bank/search','category_condition.php',100]], 93],
'add_plugin_settings': ['add_plugin_settings', 'Add one plugins settings to edit plugin form. ', [['mod/assign','locallib.php',1108]], 2],
'save': ['save', 'Save PHPExcel to file ', [['lib/phpexcel/PHPExcel/Writer','CSV.php',89],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',48],['question/engine','datalib.php',1531],['lib/adodb','adodb-active-record.inc.php',834],['backup/cc/cc_lib','xmlbase.php',168],['lib/phpexcel/PHPExcel/Writer','HTML.php',139],['availability/condition/grouping/classes','condition.php',71],['availability/tests/fixtures','mock_condition.php',67],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',49],['lib/simplepie/library/SimplePie/Cache','File.php',97],['availability/condition/group/classes','condition.php',60],['completion','completion_aggregation.php',106],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',111],['lib','badgeslib.php',208],['lib/portfolio','exporter.php',638],['mod/assign/submission/file','locallib.php',189],['mod/assign/feedback/comments','locallib.php',323],['lib/phpexcel/PHPExcel/Writer','PDF.php',82],['lib/adodb','adodb-active-recordx.inc.php',943],['lib/simplepie/library/SimplePie/Cache','Base.php',79],['lib/simplepie/library/SimplePie/Cache','MySQL.php',147],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',48],['lib/phpexcel/PHPExcel/Writer','IWriter.php',30],['badges/criteria','award_criteria_overall.php',171],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',175],['availability/classes','tree.php',618],['mod/assign','assignmentplugin.php',190],['availability/condition/completion/classes','condition.php',72],['availability/condition/date/classes','condition.php',75],['lib/lessphp','Parser.php',654],['lib/simplepie/library/SimplePie/Cache','Memcache.php',108],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',50],['availability/condition/profile/classes','condition.php',127],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',137],['mod/assign/submission/onlinetext','locallib.php',182],['mod/assign/feedback/file','locallib.php',257],['mod/assign/feedback/editpdf','locallib.php',252],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',83],['availability/condition/grade/classes','condition.php',77],['badges/criteria','award_criteria.php',354],['lib/portfolio','plugin.php',670],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',476],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',4783],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',270]], 212],
'unlock_submission': ['unlock_submission', 'Unlock the student submission. ', [['mod/assign','locallib.php',7240]], 3],
'require_sesskey': ['require_sesskey', 'Check the session key using {@link confirm_sesskey()}, and cause a fatal error if it does not match. ', [['lib','sessionlib.php',79]], 229],
'set_file_and_format_data': ['set_file_and_format_data', 'Set up the required files for this export. This supports either passing files directly or passing area arguments directly through to the files api using file_storage::get_area_files ', [['lib/portfolio','caller.php',367]], 4],
'send_notification': ['send_notification', 'Message someone about something. ', [['mod/assign','locallib.php',5459]], 4],
'format_grade_for_log': ['format_grade_for_log', 'Take a grade object and print a short summary for the log file. The size limit for the log file is 255 characters, so be careful not to include too much information. ', [['mod/assign','locallib.php',6188]], 4],
'view_quickgrading_result': ['view_quickgrading_result', 'Display a continue page after quickgrading. ', [['mod/assign','locallib.php',2735]], 1],
'lock': ['lock', 'Acquire a lock. ', [['cache/locks/file','lib.php',99],['cache/classes','interfaces.php',481],['mod/assign','submissionplugin.php',90],['lib','webdavlib.php',576]], 16],
'expected_time': ['expected_time', '', [['portfolio/download','lib.php',18],['mod/chat','locallib.php',88],['portfolio/flickr','lib.php',87],['mod/data','locallib.php',123],['portfolio/boxnet','lib.php',63],['portfolio/googledocs','lib.php',67],['portfolio/mahara','lib.php',76],['mod/assign','locallib.php',8320],['mod/glossary','locallib.php',86],['mod/glossary','locallib.php',277],['portfolio/picasa','lib.php',46],['mod/forum','locallib.php',360]], 4],
'add_entry': ['add_entry', 'Adds a entry to the feed ready to be exported ', [['lib/portfolio/formats/leap2a','lib.php',105]], 12],
'set_context': ['set_context', 'Sets the context the manager operates on ', [['grade/grading','lib.php',116],['lib','pagelib.php',970],['mod/assign','locallib.php',274],['lib/portfolio','caller.php',568]], 278],
'check_submit_for_grading': ['check_submit_for_grading', 'Ask the user to confirm they want to submit their work for grading. ', [['mod/assign','locallib.php',4305]], 1],
'get_notifiable_users': ['get_notifiable_users', 'Returns a list of users that should receive notification about given submission. ', [['mod/assign','locallib.php',5261]], 2],
'submission_is_empty': ['submission_is_empty', 'Determine if a submission is empty ', [['mod/assign/submission/file','locallib.php',482],['mod/assign','submissionplugin.php',128],['mod/assign/submission/onlinetext','locallib.php',575]], 3],
'get_section_info_all': ['get_section_info_all', 'Gets all sections as array from section number => data about section. ', [['lib','modinfolib.php',303]], 27],
'view_plugin_page': ['view_plugin_page', 'View a page rendered by a plugin. ', [['mod/assign','locallib.php',2481]], 1],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',1977]], 289],
'create_from_submission': ['create_from_submission', 'Create instance of event. ', [['mod/assign/classes/event','submission_viewed.php',44],['mod/assign/classes/event','statement_accepted.php',44],['mod/assign/classes/event','submission_status_updated.php',44],['mod/assign/classes/event','submission_duplicated.php',44],['mod/assign/classes/event','assessable_submitted.php',44]], 10],
'send_assignment_notification': ['send_assignment_notification', 'Message someone about something (static so it can be called from cron). ', [['mod/assign','locallib.php',5377]], 2],
'get_filename': ['get_filename', 'Returns file name ', [['lib/filebrowser','virtual_root_file.php',227],['lib/filestorage','stored_file.php',699],['lib','medialib.php',169]], 248],
'lock_submission': ['lock_submission', 'Prevent student updates to this submission ', [['mod/assign','locallib.php',7073]], 3],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'groups_get_activity_allowed_groups': ['groups_get_activity_allowed_groups', 'Gets a list of groups that the user is allowed to access within the specified activity. ', [['lib','grouplib.php',866]], 12],
'groups_print_activity_menu': ['groups_print_activity_menu', 'Print group menu selector for activity. ', [['lib','grouplib.php',670]], 37],
'get_files': ['get_files', 'Returns the array of attached files. ', [['search/classes','document.php',221],['question/engine','datalib.php',1599],['question/engine','datalib.php',1700],['question/engine','datalib.php',1759],['files','externallib.php',64],['mod/assign/submission/file','locallib.php',288],['mod/assign','assignmentplugin.php',443],['competency/classes','user_evidence.php',122],['mod/assign/submission/onlinetext','locallib.php',378]], 14],
'process_save_quick_grades': ['process_save_quick_grades', 'Save quick grades. ', [['mod/assign','locallib.php',5816]], 2],
'save_settings': ['save_settings', 'Save any submitted settings when the quiz settings form is submitted. This is called from {@link quiz_after_add_or_update()} in lib.php. ', [['mod/quiz/accessrule','accessrulebase.php',281],['mod/assign/submission/file','locallib.php',110],['mod/quiz','accessmanager.php',144],['mod/assign/feedback/comments','locallib.php',219],['mod/assign','assignmentplugin.php',110],['mod/assign/submission/onlinetext','locallib.php',103]], 3],
'get_grading_status': ['get_grading_status', 'Returns the grading status. ', [['mod/assign','locallib.php',7993]], 6],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'format_for_log': ['format_for_log', 'Formatting for log info ', [['mod/assign/submission/file','locallib.php',461],['mod/assign','assignmentplugin.php',514],['mod/assign/submission/onlinetext','locallib.php',533]], 2],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3249],['mod/assign','locallib.php',3915]], 546],
'load': ['load', 'Load the class from cache using `require_once`. ', [['lib/mustache/src/Mustache/Cache','FilesystemCache.php',39],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',320],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',284],['lib/pear/HTML/QuickForm','select.php',430],['lib/phpexcel/PHPExcel/Reader','Excel5.php',612],['lib/mustache/src/Mustache/Cache','NoopCache.php',20],['lib/adodb','adodb-active-record.inc.php',775],['backup/cc/cc_lib','xmlbase.php',92],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',69],['lib/simplepie/library/SimplePie/Cache','File.php',118],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',48],['lib/phpexcel/PHPExcel','Autoloader.php',58],['lib/phpexcel/PHPExcel/Reader','IReader.php',38],['grade/grading','lib.php',227],['mod/lesson','locallib.php',1022],['mod/lesson','locallib.php',2240],['mod/lesson','locallib.php',3200],['lib/phpexcel/PHPExcel','IOFactory.php',180],['lib/mustache/src/Mustache','Cache.php',20],['lib','outputlib.php',432],['cache/classes','definition.php',335],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',87],['lib/adodb','adodb-active-recordx.inc.php',813],['lib/simplepie/library/SimplePie/Cache','Base.php',87],['lib/phpexcel/PHPExcel/Reader','HTML.php',143],['lib/simplepie/library/SimplePie/Cache','MySQL.php',286],['lib/mustache/src/Mustache/Loader','InlineLoader.php',87],['lib/mustache/src/Mustache','Loader.php',17],['lib/phpexcel/PHPExcel/Reader','CSV.php',203],['lib/simplepie/library/SimplePie/Cache','Memcache.php',123],['lib/mustache/src/Mustache/Loader','StringLoader.php',28],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',44],['lib/phpunit/classes','autoloader.php',46],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',216],['lib/htmlpurifier/HTMLPurifier','Language.php',69],['lib/phpexcel/PHPExcel/Reader','SYLK.php',190],['calendar','lib.php',2666],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',189],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',41],['cache/classes','config.php',128]], 190],
'file_save_draft_area_files': ['file_save_draft_area_files', 'Saves files from a draft file area to a real one (merging the list of files). Can rewrite URLs in some content at the same time if desired. ', [['lib','filelib.php',778]], 61],
'create_file_from_storedfile': ['create_file_from_storedfile', 'Create new file from stored file - make sure params are valid. ', [['lib/filebrowser','file_info.php',405],['lib/filebrowser','file_info_stored.php',584],['lib/filestorage','file_storage.php',1186]], 47],
'make_selection': ['make_selection', 'Select an entry that has previously been added into the feed ', [['lib/portfolio/formats/leap2a','lib.php',121]], 4],
'get_preload_record_columns_sql': ['get_preload_record_columns_sql', 'Returns all fields necessary for context preloading from user $rec. ', [['lib','accesslib.php',6066]], 56],
'raise': ['raise', 'Sets the PHP time limit to a number of seconds from now. ', [['lib/classes','php_time_limit.php',41]], 90],
'redirect': ['redirect', '', [['enrol/lti/ims-blti','blti.php',230],['lib','weblib.php',2659]], 999],
'setdefault': ['setdefault', 'Set the field default ', [['lib/xmldb','xmldb_field.php',246],['lib','formslib.php',1896],['lib/google/src/Google/Service','YouTube.php',9537],['lib/google/src/Google/Service','YouTube.php',11044],['lib/google/src/Google/Service','Dfareporting.php',15827]], 718],
'view_course_index': ['view_course_index', 'View a summary listing of all assignments in the current course. ', [['mod/assign','locallib.php',2402]], 1],
'grade_update': ['grade_update', 'Submit new or update grade; update/create grade_item definition. Grade must have userid specified, rawgrade and feedback with format are optional. rawgrade NULL means \'Not graded\'. Missing property or key means does not change the existing value. ', [['lib','gradelib.php',40]], 27],
'get_context_name': ['get_context_name', 'Returns human readable context identifier. ', [['lib','accesslib.php',5639],['lib','accesslib.php',6189],['lib','accesslib.php',6431],['lib','accesslib.php',6618],['lib','accesslib.php',6850],['lib','accesslib.php',7072],['lib','accesslib.php',7314]], 73],
'view_return_links': ['view_return_links', 'View a link to go back to the previous page. Uses url parameters returnaction and returnparams. ', [['mod/assign','locallib.php',3597]], 1],
'delete_area_files': ['delete_area_files', 'Delete all area files (optionally limited by itemid). ', [['lib/filestorage','file_storage.php',992]], 123],
'update_activity_completion_records': ['update_activity_completion_records', 'Updates and creates the completion records in mdl_course_modules_completion. ', [['mod/assign','locallib.php',8040]], 3],
'get_suspended_userids': ['get_suspended_userids', 'Given context and array of users, returns array of user ids whose enrolment status is suspended, or enrolment has expired or not started. ', [['lib','accesslib.php',7572]], 8],
'add_grade_form_elements': ['add_grade_form_elements', 'Add elements to grade form. ', [['mod/assign','locallib.php',6618]], 1],
'display_name': ['display_name', '', [['mod/chat','locallib.php',141],['tag/classes','collection.php',128],['mod/data','locallib.php',259],['mod/assign','locallib.php',8340],['tag/classes','area.php',91],['mod/glossary','locallib.php',192],['mod/glossary','locallib.php',297],['lib/portfolio','caller.php',345],['mod/forum','locallib.php',386]], 16],
'get_user_flags': ['get_user_flags', 'This will retrieve a user flags object from the db optionally creating it if required. The user flags was split from the user_grades table in 2.5. ', [['mod/assign','locallib.php',3087],['mod/assign','externallib.php',1019]], 20],
'groups_has_membership': ['groups_has_membership', 'Determines if current or specified is member of any active group in activity ', [['lib','grouplib.php',373]], 2],
'to_xml': ['to_xml', 'Outputs the WSDL in XML format. ', [['webservice/soap/classes','wsdl.php',189],['lib/portfolio/formats/leap2a','lib.php',191]], 14],
'is_quickgrading_modified': ['is_quickgrading_modified', 'Has the plugin quickgrading form element been modified in the current form submission? ', [['mod/assign/feedback/comments','locallib.php',82],['mod/assign','feedbackplugin.php',104]], 1],
'get_return_params': ['get_return_params', 'Return a list of parameters that can be used to get back to the current page. ', [['mod/assign','locallib.php',251]], 9],
'get_filepath': ['get_filepath', 'Returns file path ', [['lib/filebrowser','virtual_root_file.php',218],['lib/filestorage','stored_file.php',690],['backup/util/ui','restore_ui_stage.class.php',547]], 147],
'is_form_available': ['is_form_available', 'Is the grading form defined and ready for usage? ', [['grade/grading/form','lib.php',150]], 6],
'format_float': ['format_float', 'This function should be identical to {@link qtype_calculated_variable_substituter::format_float()}. Except that we do not try to do locale-aware replacement of the decimal point. ', [['question/type/calculated/db','upgradelib.php',205],['lib','moodlelib.php',8061],['mod/feedback/item/numeric','lib.php',206],['question/type/calculated','question.php',328],['question/type/calculatedmulti/db','upgradelib.php',229]], 177],
'count_submissions': ['count_submissions', 'Load a count of submissions. ', [['mod/assign','locallib.php',1736],['mod/workshop','locallib.php',787]], 8],
'get_user_id_for_uniqueid': ['get_user_id_for_uniqueid', 'Call the static version of this function. ', [['mod/assign','locallib.php',7879]], 3],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'get_renderer': ['get_renderer', 'Returns instance of page renderer used by this plugin ', [['course/format','lib.php',905],['question/type/multichoice','question.php',156],['question/type/multichoice','question.php',278],['question/behaviour','behaviourbase.php',135],['question/type','questionbase.php',275],['lib','pagelib.php',802],['lib','outputlib.php',1828],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['mod/assign','locallib.php',2987],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49],['grade/grading/form/guide','lib.php',492]], 452],
'allocate_unique_ids': ['allocate_unique_ids', 'Foreach participant in the course - assign them a random id. ', [['mod/assign','locallib.php',7815]], 1],
'get_feedback_plugin_by_type': ['get_feedback_plugin_by_type', 'Get a feedback plugin by type. ', [['mod/assign','locallib.php',355]], 26],
'process_copy_previous_attempt': ['process_copy_previous_attempt', 'Require a valid sess key and then call copy_previous_attempt. ', [['mod/assign','locallib.php',6250]], 1],
'cron_setup_user': ['cron_setup_user', 'Sets up current user and course environment (lang, etc.) in cron. Do not use outside of cron script! ', [['lib','sessionlib.php',153]], 35],
'grading_disabled': ['grading_disabled', 'Determine if this users grade can be edited. ', [['mod/assign','locallib.php',6541]], 14],
'reveal_identities': ['reveal_identities', 'Reveal student identities to markers (and the gradebook). ', [['mod/assign','locallib.php',6042],['mod/assign','externallib.php',1693]], 10],
'is_configurable': ['is_configurable', 'If true, the plugin will appear on the module settings page and can be enabled/disabled per assignment instance. ', [['mod/assign','assignmentplugin.php',661],['mod/assign/feedback/editpdf','locallib.php',353],['mod/assign/submission/comments','locallib.php',183]], 2],
'get_active_method': ['get_active_method', 'Returns the currently active grading method in the gradable area ', [['grade/grading','lib.php',333]], 15],
'view_savegrading_result': ['view_savegrading_result', 'Display a continue page after grading. ', [['mod/assign','locallib.php',2715]], 1],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',481]], 1488],
'process_save_grading_options': ['process_save_grading_options', 'Save grading options. ', [['mod/assign','locallib.php',6105]], 1],
'get_context': ['get_context', 'Return the course context for new modules, or the module context for existing modules. ', [['course','moodleform_mod.php',148],['availability/classes','info_module.php',72],['availability/classes','info_section.php',55],['competency/classes','user_competency_plan.php',83],['availability/tests/fixtures','mock_info.php',59],['mod/feedback/classes','responses_table.php',146],['competency/classes','competency.php',730],['competency/classes','plan.php',258],['mod/quiz','attemptlib.php',220],['competency/classes','user_competency.php',216],['grade/grading','lib.php',107],['lib','modinfolib.php',1486],['lib','badgeslib.php',157],['competency/classes/external','exporter.php',172],['comment','lib.php',994],['grade/grading/form','lib.php',102],['mod/assign','locallib.php',1307],['competency/classes','user_evidence.php',90],['competency/classes','user_competency_course.php',80],['lib/classes/event','base.php',627],['enrol','locallib.php',921],['lib','coursecatlib.php',2369],['lib','coursecatlib.php',3065],['competency/classes','course_competency_settings.php',133],['lib/tests/behat','behat_data_generators.php',769],['competency/classes','competency_framework.php',70],['competency/classes','template.php',139]], 1033],
'get_graders': ['get_graders', 'Returns a list of teachers that should be grading given submission. ', [['mod/assign','locallib.php',5210],['grade/report/history/classes','helper.php',161]], 4],
'view_grant_extension': ['view_grant_extension', 'View the grant extension date page. ', [['mod/assign','locallib.php',2172]], 1],
'get_module_name': ['get_module_name', 'Returns the module name. ', [['search/classes','base_activity.php',167],['mod/assign','locallib.php',1189]], 16],
'update': ['update', 'In addition to update() as defined in grade_object, handle the grade_outcome and grade_scale objects. Force regrading if necessary, rounds the float numbers using php function, the reason is we need to compare the db value with computed number to skip regrading if possible. ', [['lib/grade','grade_item.php',274],['lib/google/src/Google/Service','Tasks.php',386],['lib/google/src/Google/Service','Tasks.php',556],['lib/google/src/Google/Service','AndroidPublisher.php',1413],['lib/google/src/Google/Service','AndroidPublisher.php',1545],['lib/google/src/Google/Service','AndroidPublisher.php',1615],['lib/google/src/Google/Service','AndroidPublisher.php',1853],['lib/google/src/Google/Service','AndroidPublisher.php',1919],['lib/google/src/Google/Service','AndroidPublisher.php',2003],['lib/google/src/Google/Service','AndroidPublisher.php',2177],['lib/google/src/Google/Service','Reseller.php',344],['lib/grade','grade_category.php',226],['lib/grade','grade_scale.php',125],['lib/adodb','adodb-active-record.inc.php',1004],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','YouTubeAnalytics.php',534],['completion','data_object.php',252],['mod/lesson/pagetypes','matching.php',308],['tag/classes','collection.php',215],['lib/google/src/Google/Service','AdExchangeBuyer.php',802],['lib/google/src/Google/Service','AdExchangeBuyer.php',906],['lib/google/src/Google/Service','AdExchangeBuyer.php',1013],['lib/google/src/Google/Service','AdExchangeBuyer.php',1181],['lib/google/src/Google/Service','AdExchangeBuyer.php',1357],['lib/google/src/Google/Service','AdExchangeBuyer.php',1640],['lib/google/src/Google/Service','Books.php',2025],['lib/grade','grade_grade.php',1009],['lib/grade','grade_outcome.php',144],['lib/google/src/Google/Service','Analytics.php',2215],['lib/google/src/Google/Service','Analytics.php',2388],['lib/google/src/Google/Service','Analytics.php',2501],['lib/google/src/Google/Service','Analytics.php',2626],['lib/google/src/Google/Service','Analytics.php',2736],['lib/google/src/Google/Service','Analytics.php',2843],['lib/google/src/Google/Service','Analytics.php',2971],['lib/google/src/Google/Service','Analytics.php',3062],['lib/google/src/Google/Service','Analytics.php',3185],['lib/google/src/Google/Service','Analytics.php',3502],['lib/google/src/Google/Service','Analytics.php',3604],['lib/google/src/Google/Service','Analytics.php',3686],['lib/google/src/Google/Service','Coordinate.php',611],['lib/google/src/Google/Service','Coordinate.php',727],['lib/google/src/Google/Service','DeploymentManager.php',589],['tag/classes/output','tagareacollection.php',68],['lib','weblib.php',3312],['lib/google/src/Google/Service','Blogger.php',1349],['lib/google/src/Google/Service','Blogger.php',1647],['lib/google/src/Google/Service','Dataflow.php',350],['tag/classes/output','tagcollname.php',58],['competency/classes','persistent.php',452],['lib/google/src/Google/Service','Cloudresourcemanager.php',344],['lib/google/src/Google/Service','Cloudresourcemanager.php',555],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1066],['lib/google/src/Google/Service','TagManager.php',1159],['lib/google/src/Google/Service','TagManager.php',1219],['lib/google/src/Google/Service','TagManager.php',1311],['lib/google/src/Google/Service','TagManager.php',1405],['lib/google/src/Google/Service','TagManager.php',1499],['lib/google/src/Google/Service','TagManager.php',1650],['lib/google/src/Google/Service','TagManager.php',1743],['mod/lesson','locallib.php',2691],['lib/google/src/Google/Service','Bigquery.php',621],['lib/google/src/Google/Service','Bigquery.php',953],['lib/google/src/Google/Service','ShoppingContent.php',1136],['lib/google/src/Google/Service','ShoppingContent.php',1238],['lib/google/src/Google/Service','ShoppingContent.php',1401],['lib/google/src/Google/Service','ShoppingContent.php',1534],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Clouddebugger.php',307],['lib/filestorage','stored_file.php',103],['lib/google/src/Google/Service','Container.php',366],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Storage.php',1127],['lib/google/src/Google/Service','Storage.php',1268],['lib/google/src/Google/Service','Storage.php',1423],['lib/google/src/Google/Service','Storage.php',1564],['lib/google/src/Google/Service','Storage.php',1904],['tag/classes/output','tagname.php',56],['tag/classes/output','tagcollsearchable.php',72],['lib/google/src/Google/Service','Games.php',1508],['lib/google/src/Google/Service','Licensing.php',335],['lib/google/src/Google/Service','Fitness.php',478],['lib/google/src/Google/Service','Fitness.php',691],['lib/google/src/Google/Service','Gmail.php',833],['lib/google/src/Google/Service','Gmail.php',986],['lib/google/src/Google/Service','Taskqueue.php',398],['lib/adodb','adodb-active-recordx.inc.php',1136],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Doubleclicksearch.php',326],['lib/google/src/Google/Service','Autoscaler.php',400],['tag/classes/output','tagisstandard.php',70],['lib/google/src/Google/Service','Prediction.php',339],['lib/google/src/Google/Service','SiteVerification.php',227],['lib/google/src/Google/Service','Drive.php',1691],['lib/google/src/Google/Service','Drive.php',1961],['lib/google/src/Google/Service','Drive.php',2208],['lib/google/src/Google/Service','Drive.php',2320],['lib/google/src/Google/Service','Drive.php',2370],['lib/google/src/Google/Service','Drive.php',2494],['lib/google/src/Google/Service','Drive.php',2582],['tag/classes/output','tagflag.php',71],['lib/google/src/Google/Service','Proximitybeacon.php',440],['lib/google/src/Google/Service','Groupssettings.php',138],['lib/google/src/Google/Service','Directory.php',1829],['lib/google/src/Google/Service','Directory.php',1889],['lib/google/src/Google/Service','Directory.php',2141],['lib/google/src/Google/Service','Directory.php',2306],['lib/google/src/Google/Service','Directory.php',2489],['lib/google/src/Google/Service','Directory.php',2597],['lib/google/src/Google/Service','Directory.php',2808],['lib/google/src/Google/Service','Directory.php',2910],['lib/google/src/Google/Service','Directory.php',3131],['lib/google/src/Google/Service','Directory.php',3317],['lib/google/src/Google/Service','Fusiontables.php',727],['lib/google/src/Google/Service','Fusiontables.php',892],['lib/google/src/Google/Service','Fusiontables.php',1094],['lib/google/src/Google/Service','Fusiontables.php',1269],['lib/google/src/Google/Service','AdSenseHost.php',846],['lib/google/src/Google/Service','AdSenseHost.php',1097],['course/classes/output','course_module_name.php',81],['lib/google/src/Google/Service','Mirror.php',496],['lib/google/src/Google/Service','Mirror.php',634],['lib/google/src/Google/Service','Mirror.php',745],['tag/classes','area.php',226],['lib/google/src/Google/Service','AndroidEnterprise.php',1064],['lib/google/src/Google/Service','AndroidEnterprise.php',1165],['lib/google/src/Google/Service','AndroidEnterprise.php',1489],['lib/google/src/Google/Service','AndroidEnterprise.php',1672],['grade/grading/form/rubric','lib.php',828],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['mod/lesson/pagetypes','essay.php',158],['lib','coursecatlib.php',438],['tag/classes','tag.php',893],['lib/google/src/Google/Service','Calendar.php',1006],['lib/google/src/Google/Service','Calendar.php',1181],['lib/google/src/Google/Service','Calendar.php',1333],['lib/google/src/Google/Service','Calendar.php',1714],['lib/google/src/Google/Service','PlusDomains.php',692],['lib/google/src/Google/Service','GamesConfiguration.php',334],['lib/google/src/Google/Service','GamesConfiguration.php',473],['mod/lesson/pagetypes','branchtable.php',262],['tag/classes/output','tagareashowstandard.php',64],['lib/google/src/Google/Service','AppState.php',202],['calendar','lib.php',2206],['tag/classes/output','tagareaenabled.php',69],['cohort/classes/output','cohortidnumber.php',53],['lib/google/src/Google/Service','Classroom.php',564],['cohort/classes/output','cohortname.php',53],['lib/google/src/Google/Service','SQLAdmin.php',947],['lib/google/src/Google/Service','SQLAdmin.php',1267],['lib/google/src/Google/Service','SQLAdmin.php',1534],['grade/grading/form/guide','lib.php',836],['lib/google/src/Google/Service','Compute.php',4253],['lib/google/src/Google/Service','Compute.php',4398],['lib/google/src/Google/Service','Compute.php',4767],['lib/google/src/Google/Service','Compute.php',5348],['lib/google/src/Google/Service','Compute.php',5478],['lib/google/src/Google/Service','Compute.php',8131],['lib/google/src/Google/Service','YouTube.php',1959],['lib/google/src/Google/Service','YouTube.php',2194],['lib/google/src/Google/Service','YouTube.php',2303],['lib/google/src/Google/Service','YouTube.php',2429],['lib/google/src/Google/Service','YouTube.php',2570],['lib/google/src/Google/Service','YouTube.php',3111],['lib/google/src/Google/Service','YouTube.php',3348],['lib/google/src/Google/Service','YouTube.php',3518],['lib/google/src/Google/Service','YouTube.php',3708],['lib/google/src/Google/Service','YouTube.php',4400],['lib/google/src/Google/Service','Dfareporting.php',4752],['lib/google/src/Google/Service','Dfareporting.php',4840],['lib/google/src/Google/Service','Dfareporting.php',4973],['lib/google/src/Google/Service','Dfareporting.php',5090],['lib/google/src/Google/Service','Dfareporting.php',5204],['lib/google/src/Google/Service','Dfareporting.php',5400],['lib/google/src/Google/Service','Dfareporting.php',5656],['lib/google/src/Google/Service','Dfareporting.php',5848],['lib/google/src/Google/Service','Dfareporting.php',5970],['lib/google/src/Google/Service','Dfareporting.php',6078],['lib/google/src/Google/Service','Dfareporting.php',6196],['lib/google/src/Google/Service','Dfareporting.php',6502],['lib/google/src/Google/Service','Dfareporting.php',6704],['lib/google/src/Google/Service','Dfareporting.php',6834],['lib/google/src/Google/Service','Dfareporting.php',6912],['lib/google/src/Google/Service','Dfareporting.php',7077],['lib/google/src/Google/Service','Dfareporting.php',7476],['lib/google/src/Google/Service','Dfareporting.php',7594],['lib/google/src/Google/Service','Dfareporting.php',7744],['lib/google/src/Google/Service','Dfareporting.php',7968],['lib/google/src/Google/Service','Dfareporting.php',8075],['lib/google/src/Google/Service','Dfareporting.php',8202],['lib/google/src/Google/Service','Dfareporting.php',8394],['lib/google/src/Google/Service','Dfareporting.php',8557],['lib/google/src/Google/Service','Dfareporting.php',8861],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72]], 498],
'add_to_log': ['add_to_log', 'Add an entry to the legacy log table. ', [['lib','deprecatedlib.php',35],['mod/assign','locallib.php',2948]], 6],
'form_unavailable_notification': ['form_unavailable_notification', 'Returns a message why this form is unavailable. Maybe overriden by plugins to give more details. ', [['grade/grading/form','lib.php',189]], 2],
'view_footer': ['view_footer', 'Display the page footer. ', [['mod/assign','locallib.php',2759],['mod/assign','adminlib.php',248]], 17],
'update_team_submission': ['update_team_submission', 'Update team submission. ', [['mod/assign','locallib.php',4940]], 1],
'new_submission_empty': ['new_submission_empty', 'Determine if a new submission is empty or not ', [['mod/assign','locallib.php',6374]], 4],
'get_noreply_user': ['get_noreply_user', 'Return noreply user record, this is currently used in messaging system only for sending messages from noreply email. It will return record of $CFG->noreplyuserid if set else return dummy user object with hard-coded $user->emailstop = 1 so noreply can be sent to user. ', [['lib/classes','user.php',137]], 34],
'confirm_sesskey': ['confirm_sesskey', 'Check the sesskey and return true of false for whether it is valid. (You might like to imagine this function is called sesskey_is_valid().) ', [['lib','sessionlib.php',52]], 306],
'get_course_context': ['get_course_context', '', [['lib','deprecatedlib.php',1907],['lib','accesslib.php',5764],['lib','accesslib.php',6909],['lib','accesslib.php',7170],['lib','accesslib.php',7381],['mod/assign','gradingtable.php',1372],['mod/assign','locallib.php',1268]], 86],
'process_save_submission': ['process_save_submission', 'Save assignment submission. ', [['mod/assign','locallib.php',6505]], 1],
'unlock': ['unlock', '', [['lib/google/src/Google/Cache','File.php',203],['cache/locks/file','lib.php',173],['lib/google/src/Google/Service','Games.php',1178],['cache/classes','interfaces.php',492],['mod/assign','submissionplugin.php',100],['lib','webdavlib.php',664]], 14],
'groups_is_member': ['groups_is_member', 'Determines if the user is a member of the given group. ', [['lib','grouplib.php',353]], 97],
'unformat_float': ['unformat_float', 'Converts locale specific floating point/comma number back to standard PHP float value Do NOT try to do any math operations before this conversion on any user submitted floats! ', [['lib','moodlelib.php',8093]], 62],
'text_for_gradebook': ['text_for_gradebook', 'If this plugin adds to the gradebook comments field, it must format the text of the comment ', [['mod/assign/feedback/comments','locallib.php',467],['mod/assign','feedbackplugin.php',68]], 5],
'can_view_group_submission': ['can_view_group_submission', 'Perform an access check to see if the current $USER can view this group submission. ', [['mod/assign','locallib.php',4021]], 4],
'notify_student_submission_copied': ['notify_student_submission_copied', 'Notify student upon successful submission copy. ', [['mod/assign','locallib.php',5487]], 1],
'is_blind_marking': ['is_blind_marking', 'Is blind marking enabled and reveal identities not set yet? ', [['mod/assign','locallib.php',310]], 36],
'get': ['get', 'Retrieves a variable reference from the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',36],['cache/stores/static','lib.php',220],['cache','disabledlib.php',55],['search/classes','document.php',299],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','DataTransfer.php',162],['lib/google/src/Google/Service','DataTransfer.php',208],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','AdSense.php',1076],['lib/google/src/Google/Service','AdSense.php',1155],['lib/google/src/Google/Service','AdSense.php',1303],['lib/google/src/Google/Service','AdSense.php',1519],['lib/google/src/Google/Service','AdSense.php',1631],['lib/google/src/Google/Service','AdSense.php',1773],['lib/google/src/Google/Service','AdSense.php',2047],['lib/google/src/Google/Service','Replicapool.php',420],['lib/google/src/Google/Service','Replicapool.php',575],['lib/google/src/Google/Service','Tasks.php',323],['lib/google/src/Google/Service','Tasks.php',442],['lib/google/src/Google/Service','Partners.php',362],['lib/google/src/Google/Service','AndroidPublisher.php',1247],['lib/google/src/Google/Service','AndroidPublisher.php',1349],['lib/google/src/Google/Service','AndroidPublisher.php',1510],['lib/google/src/Google/Service','AndroidPublisher.php',1573],['lib/google/src/Google/Service','AndroidPublisher.php',1796],['lib/google/src/Google/Service','AndroidPublisher.php',1884],['lib/google/src/Google/Service','AndroidPublisher.php',1948],['lib/google/src/Google/Service','AndroidPublisher.php',2098],['lib/google/src/Google/Service','AndroidPublisher.php',2223],['lib/google/src/Google/Service','AndroidPublisher.php',2293],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',146],['lib/google/src/Google/Service','YouTubeReporting.php',273],['lib/google/src/Google/Service','YouTubeReporting.php',326],['lib/google/src/Google/Service','Reseller.php',295],['lib/google/src/Google/Service','Reseller.php',458],['lib/google/src/Google/Cache','Memcache.php',74],['lib','filelib.php',3382],['lib','filelib.php',3630],['lib/google/src/Google/Service','Computeaccounts.php',432],['lib/google/src/Google/Service','Computeaccounts.php',512],['lib/google/src/Google/Service','Computeaccounts.php',683],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','MapsEngine.php',1530],['lib/google/src/Google/Service','MapsEngine.php',1709],['lib/google/src/Google/Service','MapsEngine.php',2006],['lib/google/src/Google/Service','MapsEngine.php',2268],['lib/google/src/Google/Service','MapsEngine.php',2360],['lib/google/src/Google/Service','MapsEngine.php',2666],['lib/google/src/Google/Service','MapsEngine.php',2927],['lib/google/src/Google/Service','MapsEngine.php',3118],['lib/google/src/Google/Cache','File.php',47],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Dns.php',307],['lib/google/src/Google/Service','Dns.php',393],['lib/google/src/Google/Service','Dns.php',444],['cache/classes','loaders.php',278],['cache/classes','loaders.php',1422],['cache/classes','loaders.php',1731],['lib/google/src/Google/Service','Appengine.php',320],['lib/google/src/Google/Service','Appengine.php',368],['lib/google/src/Google/Service','Appengine.php',472],['lib/google/src/Google/Service','Appengine.php',525],['lib/google/src/Google/Service','Urlshortener.php',109],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['lib/google/src/Google/Service','AdExchangeBuyer.php',759],['lib/google/src/Google/Service','AdExchangeBuyer.php',829],['lib/google/src/Google/Service','AdExchangeBuyer.php',870],['lib/google/src/Google/Service','AdExchangeBuyer.php',952],['lib/google/src/Google/Service','AdExchangeBuyer.php',1041],['lib/google/src/Google/Service','AdExchangeBuyer.php',1111],['lib/google/src/Google/Service','AdExchangeBuyer.php',1251],['lib/google/src/Google/Service','AdExchangeBuyer.php',1293],['lib/google/src/Google/Service','AdExchangeBuyer.php',1417],['lib/google/src/Google/Service','AdExchangeBuyer.php',1471],['lib/google/src/Google/Service','AdExchangeBuyer.php',1576],['lib/google/src/Google/Service','Books.php',1456],['lib/google/src/Google/Service','Books.php',1625],['lib/google/src/Google/Service','Books.php',1677],['lib/google/src/Google/Service','Books.php',1752],['lib/google/src/Google/Service','Books.php',2086],['lib/google/src/Google/Service','Books.php',2205],['lib/google/src/Google/Service','Books.php',2262],['lib/google/src/Google/Service','Books.php',2345],['lib/google/src/Google/Service','Books.php',2418],['lib/google/src/Google/Service','Books.php',2450],['lib/google/src/Google/Service','Oauth2.php',165],['lib/google/src/Google/Service','Oauth2.php',202],['lib/google/src/Google/Service','Analytics.php',1988],['lib/google/src/Google/Service','Analytics.php',2037],['lib/google/src/Google/Service','Analytics.php',2084],['lib/google/src/Google/Service','Analytics.php',2308],['lib/google/src/Google/Service','Analytics.php',2422],['lib/google/src/Google/Service','Analytics.php',2550],['lib/google/src/Google/Service','Analytics.php',2670],['lib/google/src/Google/Service','Analytics.php',2763],['lib/google/src/Google/Service','Analytics.php',2889],['lib/google/src/Google/Service','Analytics.php',3108],['lib/google/src/Google/Service','Analytics.php',3245],['lib/google/src/Google/Service','Analytics.php',3336],['lib/google/src/Google/Service','Analytics.php',3422],['lib/google/src/Google/Service','Analytics.php',3533],['lib/google/src/Google/Service','Coordinate.php',509],['lib/google/src/Google/Service','Coordinate.php',689],['lib','oauthlib.php',302],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/google/src/Google/Service','DeploymentManager.php',468],['lib/google/src/Google/Service','DeploymentManager.php',632],['lib/google/src/Google/Service','DeploymentManager.php',693],['lib/google/src/Google/Service','DeploymentManager.php',752],['lib/google/src/Google/Service','Blogger.php',945],['lib/google/src/Google/Service','Blogger.php',976],['lib/google/src/Google/Service','Blogger.php',1080],['lib/google/src/Google/Service','Blogger.php',1199],['lib/google/src/Google/Service','Blogger.php',1241],['lib/google/src/Google/Service','Blogger.php',1382],['lib/google/src/Google/Service','Blogger.php',1465],['lib/google/src/Google/Service','Blogger.php',1686],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['question/engine','states.php',116],['lib/google/src/Google/Service','Dataflow.php',292],['lib/horde/framework/Horde','Variables.php',135],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['competency/classes','persistent.php',86],['lib/google/src/Google/Service','CloudUserAccounts.php',542],['lib/google/src/Google/Service','CloudUserAccounts.php',643],['lib/google/src/Google/Service','CloudUserAccounts.php',908],['lib/google/src/Google/Service','Cloudresourcemanager.php',248],['lib/google/src/Google/Service','Cloudresourcemanager.php',427],['lib/editor/tinymce/classes','plugin.php',447],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','TagManager.php',950],['lib/google/src/Google/Service','TagManager.php',1036],['lib/google/src/Google/Service','TagManager.php',1128],['lib/google/src/Google/Service','TagManager.php',1280],['lib/google/src/Google/Service','TagManager.php',1373],['lib/google/src/Google/Service','TagManager.php',1467],['lib/google/src/Google/Service','TagManager.php',1561],['lib/google/src/Google/Service','TagManager.php',1711],['mod/lesson','locallib.php',3248],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapoolupdater.php',338],['lib/google/src/Google/Service','Replicapoolupdater.php',489],['lib/google/src/Google/Service','Bigquery.php',552],['lib/google/src/Google/Service','Bigquery.php',668],['lib/google/src/Google/Service','Bigquery.php',879],['lib/google/src/Google/Service','ShoppingContent.php',1066],['lib/google/src/Google/Service','ShoppingContent.php',1183],['lib/google/src/Google/Service','ShoppingContent.php',1283],['lib/google/src/Google/Service','ShoppingContent.php',1346],['lib/google/src/Google/Service','ShoppingContent.php',1464],['lib/google/src/Google/Service','ShoppingContent.php',1578],['lib/google/src/Google/Service','ShoppingContent.php',1773],['lib/google/src/Google/Service','ShoppingContent.php',1986],['lib/google/src/Google/Service','ShoppingContent.php',2063],['lib/google/src/Google/Service','Webmasters.php',371],['lib/google/src/Google/Service','Webmasters.php',464],['lib/google/src/Google/Service','Webmasters.php',540],['lib','navigationlib.php',384],['lib','navigationlib.php',836],['lib','navigationlib.php',2704],['lib','navigationlib.php',3139],['lib/google/src/Google/Service','Clouddebugger.php',399],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['lib/portfolio','exporter.php',134],['lib/google/src/Google/Service','Container.php',329],['lib/google/src/Google/Service','Container.php',396],['backup/cc/cc_lib/gral_lib','cssparser.php',147],['lib/horde/framework/Horde/Support','Array.php',30],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Storage.php',1059],['lib/google/src/Google/Service','Storage.php',1175],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1476],['lib/google/src/Google/Service','Storage.php',1709],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Genomics.php',660],['lib/google/src/Google/Service','Genomics.php',749],['lib/google/src/Google/Service','Genomics.php',918],['lib/google/src/Google/Service','Genomics.php',1007],['lib/google/src/Google/Service','Genomics.php',1185],['lib/google/src/Google/Service','Genomics.php',1268],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1475],['lib/google/src/Google/Service','Games.php',1220],['lib/google/src/Google/Service','Games.php',1339],['lib/google/src/Google/Service','Games.php',1441],['lib/google/src/Google/Service','Games.php',1699],['lib/google/src/Google/Service','Games.php',1806],['lib/google/src/Google/Service','Games.php',1948],['lib/google/src/Google/Service','Games.php',2082],['lib/google/src/Google/Service','Licensing.php',239],['lib/google/src/Google/Service','Fitness.php',417],['lib/google/src/Google/Service','Fitness.php',543],['lib/google/src/Google/Service','Reports.php',375],['lib/google/src/Google/Service','Reports.php',409],['lib/google/src/Google/Service','Gmail.php',779],['lib/google/src/Google/Service','Gmail.php',937],['lib/google/src/Google/Service','Gmail.php',1030],['lib/google/src/Google/Service','Gmail.php',1206],['lib/google/src/Google/Service','Gmail.php',1250],['lib/google/src/Google/Service','Taskqueue.php',264],['lib/google/src/Google/Service','Taskqueue.php',308],['lib/mustache/src/Mustache','HelperCollection.php',81],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Doubleclicksearch.php',257],['lib/google/src/Google/Service','Doubleclicksearch.php',381],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/google/src/Google/Service','Autoscaler.php',331],['lib/google/src/Google/Service','Autoscaler.php',445],['lib/google/src/Google/Service','AdExchangeSeller.php',444],['lib/google/src/Google/Service','AdExchangeSeller.php',552],['lib/google/src/Google/Service','AdExchangeSeller.php',666],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Prediction.php',276],['lib/behat/classes','behat_context_helper.php',63],['lib/google/src/Google/Service','SiteVerification.php',152],['lib/google/src/Google/Service','Drive.php',1333],['lib/google/src/Google/Service','Drive.php',1369],['lib/google/src/Google/Service','Drive.php',1422],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1617],['lib/google/src/Google/Service','Drive.php',1792],['lib/google/src/Google/Service','Drive.php',2054],['lib/google/src/Google/Service','Drive.php',2124],['lib/google/src/Google/Service','Drive.php',2256],['lib/google/src/Google/Service','Drive.php',2350],['lib/google/src/Google/Service','Drive.php',2418],['lib/google/src/Google/Service','Drive.php',2537],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Proximitybeacon.php',348],['lib/google/src/Google/Service','Groupssettings.php',108],['lib/google/src/Google/Service','Directory.php',1698],['lib/google/src/Google/Service','Directory.php',1766],['lib/google/src/Google/Service','Directory.php',1860],['lib/google/src/Google/Service','Directory.php',1930],['lib/google/src/Google/Service','Directory.php',2003],['lib/google/src/Google/Service','Directory.php',2072],['lib/google/src/Google/Service','Directory.php',2238],['lib/google/src/Google/Service','Directory.php',2365],['lib/google/src/Google/Service','Directory.php',2435],['lib/google/src/Google/Service','Directory.php',2531],['lib/google/src/Google/Service','Directory.php',2666],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',2850],['lib/google/src/Google/Service','Directory.php',2954],['lib/google/src/Google/Service','Directory.php',3012],['lib/google/src/Google/Service','Directory.php',3287],['lib/google/src/Google/Service','Fusiontables.php',659],['lib/google/src/Google/Service','Fusiontables.php',826],['lib/google/src/Google/Service','Fusiontables.php',950],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/google/src/Google/Service','AdSenseHost.php',645],['lib/google/src/Google/Service','AdSenseHost.php',686],['lib/google/src/Google/Service','AdSenseHost.php',751],['lib/google/src/Google/Service','AdSenseHost.php',918],['lib/google/src/Google/Service','AdSenseHost.php',1026],['lib/google/src/Google/Service','Plus.php',343],['lib/google/src/Google/Service','Plus.php',418],['lib/google/src/Google/Service','Plus.php',525],['lib/google/src/Google/Service','Mirror.php',438],['lib/google/src/Google/Service','Mirror.php',523],['lib/google/src/Google/Service','Mirror.php',563],['lib/google/src/Google/Service','Mirror.php',674],['lib/google/src/Google/Service','Mirror.php',786],['lib/google/src/Google/Service','AndroidEnterprise.php',1002],['lib/google/src/Google/Service','AndroidEnterprise.php',1109],['lib/google/src/Google/Service','AndroidEnterprise.php',1196],['lib/google/src/Google/Service','AndroidEnterprise.php',1312],['lib/google/src/Google/Service','AndroidEnterprise.php',1432],['lib/google/src/Google/Service','AndroidEnterprise.php',1524],['lib/google/src/Google/Service','AndroidEnterprise.php',1616],['lib/google/src/Google/Service','AndroidEnterprise.php',1705],['lib/google/src/Google/Service','AndroidEnterprise.php',1777],['lib/google/src/Google/Service','AndroidEnterprise.php',1879],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/testing/classes','nasty_strings.php',73],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/google/src/Google/Service','Playmoviespartner.php',411],['lib/google/src/Google/Service','Playmoviespartner.php',475],['lib/google/src/Google/Service','Playmoviespartner.php',580],['lib','coursecatlib.php',212],['lib/google/src/Google/Service','Cloudtrace.php',217],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['tag/classes','tag.php',190],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['competency/classes','url.php',55],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','Calendar.php',919],['lib/google/src/Google/Service','Calendar.php',1086],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1387],['lib/google/src/Google/Service','Calendar.php',1431],['lib/google/src/Google/Service','Calendar.php',1873],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['cache/stores/session','lib.php',225],['lib/google/src/Google/Service','Cloudbilling.php',162],['lib/google/src/Google/Service','PlusDomains.php',468],['lib/google/src/Google/Service','PlusDomains.php',593],['lib/google/src/Google/Service','PlusDomains.php',719],['lib/google/src/Google/Service','PlusDomains.php',813],['lib/google/src/Google/Service','Storagetransfer.php',248],['lib/google/src/Google/Service','Storagetransfer.php',295],['lib/google/src/Google/Service','Storagetransfer.php',396],['cache/stores/mongodb','lib.php',252],['lib/google/src/Google/Cache','Null.php',36],['lib/google/src/Google/Service','GamesConfiguration.php',265],['lib/google/src/Google/Service','GamesConfiguration.php',404],['cache/stores/file','lib.php',330],['cache/stores/memcached','lib.php',319],['lib/google/src/Google/Service','AppState.php',171],['lib/google/src/Google/Service','Resourceviews.php',354],['lib/google/src/Google/Service','Resourceviews.php',439],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','Classroom.php',484],['lib/google/src/Google/Service','Classroom.php',724],['lib/google/src/Google/Service','Classroom.php',830],['lib/google/src/Google/Service','Classroom.php',951],['lib/google/src/Google/Service','Classroom.php',1010],['lib/google/src/Google/Service','SQLAdmin.php',804],['lib/google/src/Google/Service','SQLAdmin.php',874],['lib/google/src/Google/Service','SQLAdmin.php',1076],['lib/google/src/Google/Service','SQLAdmin.php',1298],['lib/google/src/Google/Service','SQLAdmin.php',1387],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/google/src/Google/Service','Compute.php',4037],['lib/google/src/Google/Service','Compute.php',4166],['lib/google/src/Google/Service','Compute.php',4299],['lib/google/src/Google/Service','Compute.php',4460],['lib/google/src/Google/Service','Compute.php',4590],['lib/google/src/Google/Service','Compute.php',4686],['lib/google/src/Google/Service','Compute.php',4845],['lib/google/src/Google/Service','Compute.php',4957],['lib/google/src/Google/Service','Compute.php',5048],['lib/google/src/Google/Service','Compute.php',5188],['lib/google/src/Google/Service','Compute.php',5264],['lib/google/src/Google/Service','Compute.php',5394],['lib/google/src/Google/Service','Compute.php',5542],['lib/google/src/Google/Service','Compute.php',5726],['lib/google/src/Google/Service','Compute.php',6001],['lib/google/src/Google/Service','Compute.php',6171],['lib/google/src/Google/Service','Compute.php',6369],['lib/google/src/Google/Service','Compute.php',6595],['lib/google/src/Google/Service','Compute.php',6655],['lib/google/src/Google/Service','Compute.php',6732],['lib/google/src/Google/Service','Compute.php',6808],['lib/google/src/Google/Service','Compute.php',6914],['lib/google/src/Google/Service','Compute.php',6977],['lib/google/src/Google/Service','Compute.php',7052],['lib/google/src/Google/Service','Compute.php',7148],['lib/google/src/Google/Service','Compute.php',7223],['lib/google/src/Google/Service','Compute.php',7315],['lib/google/src/Google/Service','Compute.php',7425],['lib/google/src/Google/Service','Compute.php',7586],['lib/google/src/Google/Service','Compute.php',7750],['lib/google/src/Google/Service','Compute.php',7955],['lib/google/src/Google/Service','Compute.php',8050],['lib/google/src/Google/Service','Compute.php',8226],['lib/google/src/Google/Service','Compute.php',8321],['lib/google/src/Google/Service','Compute.php',8384],['lib/google/src/Google/Service','Pubsub.php',255],['lib/google/src/Google/Service','Pubsub.php',394],['lib/google/src/Google/Cache','Apc.php',52],['lib/google/src/Google/Service','Dfareporting.php',4559],['lib/google/src/Google/Service','Dfareporting.php',4587],['lib/google/src/Google/Service','Dfareporting.php',4629],['lib/google/src/Google/Service','Dfareporting.php',4671],['lib/google/src/Google/Service','Dfareporting.php',4779],['lib/google/src/Google/Service','Dfareporting.php',4867],['lib/google/src/Google/Service','Dfareporting.php',5014],['lib/google/src/Google/Service','Dfareporting.php',5117],['lib/google/src/Google/Service','Dfareporting.php',5308],['lib/google/src/Google/Service','Dfareporting.php',5427],['lib/google/src/Google/Service','Dfareporting.php',5525],['lib/google/src/Google/Service','Dfareporting.php',5580],['lib/google/src/Google/Service','Dfareporting.php',5683],['lib/google/src/Google/Service','Dfareporting.php',5769],['lib/google/src/Google/Service','Dfareporting.php',5891],['lib/google/src/Google/Service','Dfareporting.php',5997],['lib/google/src/Google/Service','Dfareporting.php',6105],['lib/google/src/Google/Service','Dfareporting.php',6255],['lib/google/src/Google/Service','Dfareporting.php',6314],['lib/google/src/Google/Service','Dfareporting.php',6411],['lib/google/src/Google/Service','Dfareporting.php',6529],['lib/google/src/Google/Service','Dfareporting.php',6609],['lib/google/src/Google/Service','Dfareporting.php',6746],['lib/google/src/Google/Service','Dfareporting.php',6862],['lib/google/src/Google/Service','Dfareporting.php',6940],['lib/google/src/Google/Service','Dfareporting.php',7011],['lib/google/src/Google/Service','Dfareporting.php',7131],['lib/google/src/Google/Service','Dfareporting.php',7172],['lib/google/src/Google/Service','Dfareporting.php',7214],['lib/google/src/Google/Service','Dfareporting.php',7256],['lib/google/src/Google/Service','Dfareporting.php',7320],['lib/google/src/Google/Service','Dfareporting.php',7378],['lib/google/src/Google/Service','Dfareporting.php',7517],['lib/google/src/Google/Service','Dfareporting.php',7640],['lib/google/src/Google/Service','Dfareporting.php',7771],['lib/google/src/Google/Service','Dfareporting.php',7812],['lib/google/src/Google/Service','Dfareporting.php',7853],['lib/google/src/Google/Service','Dfareporting.php',7935],['lib/google/src/Google/Service','Dfareporting.php',7995],['lib/google/src/Google/Service','Dfareporting.php',8116],['lib/google/src/Google/Service','Dfareporting.php',8258],['lib/google/src/Google/Service','Dfareporting.php',8307],['lib/google/src/Google/Service','Dfareporting.php',8421],['lib/google/src/Google/Service','Dfareporting.php',8482],['lib/google/src/Google/Service','Dfareporting.php',8584],['lib/google/src/Google/Service','Dfareporting.php',8643],['lib/google/src/Google/Service','Dfareporting.php',8682],['lib/google/src/Google/Service','Dfareporting.php',8724],['lib/google/src/Google/Service','Dfareporting.php',8782],['lib/google/src/Google/Service','Manager.php',259],['lib/google/src/Google/Service','Manager.php',338],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['lib','webdavlib.php',264]], 21532],
'update_state': ['update_state', 'Updates (if necessary) the completion state of activity $cm for the given user. ', [['lib','completionlib.php',507]], 40],
'format_notification_message_html': ['format_notification_message_html', 'Format a notification for HTML. ', [['mod/assign','locallib.php',5341]], 1],
'convert_submission_for_gradebook': ['convert_submission_for_gradebook', 'Convert submission details for the gradebook. ', [['mod/assign','locallib.php',4869]], 1],
'process_submit_other_for_grading': ['process_submit_other_for_grading', 'A students submission is submitted for grading by a teacher. ', [['mod/assign','locallib.php',5657]], 1],
'get_controller': ['get_controller', 'Returns the controller object. ', [['backup/util/ui','base_ui.class.php',302],['grade/grading','lib.php',488],['grade/grading/form','lib.php',832]], 72],
'add_assign_info': ['add_assign_info', 'Add a row of data to display on the course index page ', [['mod/assign','renderable.php',811]], 1],
'can_upgrade_assignment': ['can_upgrade_assignment', 'This function is a static wrapper around can_upgrade. ', [['mod/assign','locallib.php',7554]], 4],
'can_upgrade': ['can_upgrade', 'Return true if this plugin can upgrade an old Moodle 2.2 assignment of this type and version. ', [['mod/assign/submission/file','locallib.php',347],['mod/assign/feedback/comments','locallib.php',385],['mod/assign','assignmentplugin.php',468],['mod/assign','locallib.php',7566],['mod/assign/submission/onlinetext','locallib.php',456],['mod/assign/feedback/file','locallib.php',352],['mod/assign/submission/comments','locallib.php',88]], 7],
'render_grade': ['render_grade', 'Returns html code to be included in student\'s feedback. ', [['grade/grading/form','lib.php',633],['grade/grading/form/rubric','lib.php',586],['grade/grading/form/guide','lib.php',590]], 2],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as an moodle_recordset.  $sql must be a complete SQL query. Since this method is a little less readable, use of it should be restricted to code where it\'s possible there might be large datasets being returned.  For known small datasets use get_records_sql - it leads to simpler code. ', [['lib/dml','pdo_moodle_database.php',252],['lib/dml','oci_native_moodle_database.php',1106],['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','mssql_native_moodle_database.php',736],['lib/dml','mysqli_native_moodle_database.php',993],['lib/dml','sqlsrv_native_moodle_database.php',811],['lib/dml/tests','dml_test.php',5544]], 283],
'get_enrolled_users': ['get_enrolled_users', 'Returns list of users enrolled into course. ', [['lib','accesslib.php',2439],['enrol','externallib.php',409]], 61],
'create_from_grade': ['create_from_grade', 'Utility method to create new event. ', [['lib/classes/event','grade_deleted.php',61],['mod/assign/classes/event','feedback_viewed.php',44],['lib/classes/event','user_graded.php',52],['mod/assign/classes/event','submission_graded.php',44]], 16],
'get_assign_feedback_status_renderable': ['get_assign_feedback_status_renderable', 'Creates an assign_feedback_status renderable. ', [['mod/assign','locallib.php',4452]], 2],
'portfolio_rewrite_pluginfile_urls': ['portfolio_rewrite_pluginfile_urls', 'Go through all the @@PLUGINFILE@@ matches in some text, extract the file information and pass it back to the portfolio export format to regenerate the html to output ', [['lib','portfoliolib.php',1365]], 16],
'can_view_grades': ['can_view_grades', 'Does this user have view grade or grade permission for this assignment? ', [['mod/assign','locallib.php',2797]], 3],
'update_plugin_instance': ['update_plugin_instance', 'Update the settings for a single plugin. ', [['mod/assign','locallib.php',843]], 4],
'reopen_submission_if_required': ['reopen_submission_if_required', 'If the requirements are met - reopen the submission for another attempt. Only call this function when grading the latest attempt. ', [['mod/assign','locallib.php',7417]], 1],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'require_capability': ['require_capability', 'Wrapper round the require_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',929],['lib','accesslib.php',762],['backup/util/ui','restore_ui_components.php',157]], 690],
'get_editor_format': ['get_editor_format', 'Given a field name, should return the format of an editor field that is part of this plugin. This is used when exporting to portfolio. ', [['mod/assign','assignmentplugin.php',456],['mod/assign/submission/onlinetext','locallib.php',315]], 5],
'set_user_preference': ['set_user_preference', 'Sets a preference for the specified user. ', [['lib','moodlelib.php',1827]], 172],
'set_course': ['set_course', 'Set the current course. This sets both $PAGE->course and $COURSE. It also sets the right theme and locale. ', [['lib','pagelib.php',922],['mod/assign','locallib.php',283]], 55],
'process_submit_for_grading': ['process_submit_for_grading', 'Assignment submission is processed before grading. ', [['mod/assign','locallib.php',5678]], 1],
'list_participants_with_filter_status_and_group': ['list_participants_with_filter_status_and_group', 'Get the submission status/grading status for all submissions in this assignment. These statuses match the available filters (requiregrading, submitted, notsubmitted). If this is a group assignment, group info is also returned. ', [['mod/assign','locallib.php',1528]], 2],
'update_instance': ['update_instance', 'Update instance of enrol plugin. ', [['enrol/manual','lib.php',164],['lib','enrollib.php',1783],['enrol/self','lib.php',978],['enrol/cohort','lib.php',126],['mod/assign','locallib.php',990],['enrol/lti','lib.php',114],['enrol/paypal','lib.php',137],['enrol/meta','lib.php',165]], 16],
'portfolio_format_text_options': ['portfolio_format_text_options', 'Return default common options for {@link format_text()} when preparing a content to be exported. It is important not to apply filters and not to clean the HTML in format_text() ', [['lib','portfoliolib.php',1198]], 4],
'is_passed': ['is_passed', 'Returns true if the grade\'s value is superior or equal to the grade item\'s gradepass value, false otherwise. ', [['lib/grade','grade_grade.php',964]], 4],
'expected_time_file': ['expected_time_file', 'Helper method to calculate expected time for multi or single file exports ', [['lib/portfolio','caller.php',125]], 3],
'count_attachments': ['count_attachments', 'Count the number of intro attachments. ', [['mod/assign','locallib.php',1337]], 1],
'create_from_assign': ['create_from_assign', 'Create instance of event. ', [['mod/assign/classes/event','extension_granted.php',44],['mod/assign/classes/event','submission_confirmation_form_viewed.php',50],['mod/assign/classes/event','grading_table_viewed.php',50],['mod/assign/classes/event','batch_set_marker_allocation_viewed.php',50],['mod/assign/classes/event','batch_set_workflow_state_viewed.php',50],['mod/assign/classes/event','reveal_identities_confirmation_page_viewed.php',50],['mod/assign/classes/event','identities_revealed.php',44],['mod/assign/classes/event','submission_status_viewed.php',50],['mod/assign/classes/event','all_submissions_downloaded.php',44]], 20],
'assign_grade_item_update': ['assign_grade_item_update', 'Create grade item for given assignment. ', [['mod/assign','lib.php',1062]], 10],
'get_users_by_capability': ['get_users_by_capability', 'Who has this capability in this context? ', [['lib','accesslib.php',3741],['availability/classes','capability_checker.php',58]], 53],
'view_reveal_identities_confirm': ['view_reveal_identities_confirm', 'Show a confirmation page to make sure they want to release student identities. ', [['mod/assign','locallib.php',3563]], 1],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 370],
'plugin_data_preprocessing': ['plugin_data_preprocessing', 'Allow each plugin an opportunity to update the defaultvalues passed in to the settings form (needed to set up draft areas for editor and filemanager elements) ', [['mod/assign','locallib.php',1169]], 1],
'prepare_package': ['prepare_package', '', [['portfolio/download','lib.php',22],['mod/chat','locallib.php',116],['portfolio/flickr','lib.php',45],['mod/data','locallib.php',172],['portfolio/boxnet','lib.php',18],['portfolio/googledocs','lib.php',58],['portfolio/mahara','lib.php',175],['mod/assign','locallib.php',8175],['mod/glossary','locallib.php',110],['mod/glossary','locallib.php',306],['portfolio/picasa','lib.php',37],['mod/forum','locallib.php',162]], 4],
'render': ['render', 'Renders this element ', [['lib/classes/output','inplace_editable.php',238],['lib/adodb','adodb-pager.inc.php',241],['lib/phpexcel/PHPExcel','Chart.php',656],['lib','formslib.php',948],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/fullscreen','fullscreen.htm',82],['lib','outputrenderers.php',170],['lib','outputrenderers.php',302],['question/behaviour','behaviourbase.php',97],['lib/htmlpurifier/HTMLPurifier/Printer','HTMLDefinition.php',15],['lib/htmlpurifier/HTMLPurifier/Printer','CSSDefinition.php',14],['filter/tex','latex.php',88],['lib','portfoliolib.php',241],['mod/quiz/classes/question/bank','custom_view.php',133],['lib/mustache/src/Mustache','Engine.php',204],['question/engine/tests','helpers.php',797],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',85],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',235],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',298],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',391],['lib/mustache/src/Mustache','Template.php',57],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',790],['question/engine','questionattempt.php',814],['lib/mustache/src/Mustache','LambdaHelper.php',39]], 942],
'count_grades': ['count_grades', 'Load a count of grades. ', [['mod/assign','locallib.php',1711]], 4],
'disabledif': ['disabledif', 'Adds a dependency for $elementName which will be disabled if $condition is met. If $condition = \'notchecked\' (default) then the condition is that the $dependentOn element is not checked. If $condition = \'checked\' then the condition is that the $dependentOn element is checked. If $condition is something else (like "eq" for equals) then it is checked to see if the value of the $dependentOn element is $condition (such as equal) to $value. ', [['lib','formslib.php',2429]], 343],
'addrule': ['addrule', 'Adds a validation rule for the given field ', [['lib','formslib.php',2023],['lib/pear/HTML','QuickForm.php',1016],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',330]], 314],
'fetch': ['fetch', 'Finds and returns a data_object instance based on params. ', [['completion/criteria','completion_criteria_course.php',46],['lib/minify/lib/Minify/Cache','APC.php',91],['lib/grade','grade_item.php',346],['completion/criteria','completion_criteria_date.php',43],['lib/grade','grade_category.php',184],['lib/grade','grade_scale.php',89],['lib/grade','grade_object.php',126],['completion','data_object.php',152],['completion','completion_completion.php',70],['lib/grade','grade_grade.php',635],['lib/classes/update','checker.php',117],['lib/grade','grade_outcome.php',182],['lib/minify/lib/Minify/Cache','File.php',90],['completion','completion_aggregation.php',68],['completion/criteria','completion_criteria_role.php',43],['lib/minify/lib/Minify/Cache','ZendPlatform.php',97],['lib/horde/framework/Horde/Imap/Client','Base.php',2373],['completion','completion_criteria_completion.php',74],['completion/criteria','completion_criteria_self.php',43],['completion/criteria','completion_criteria_grade.php',45],['completion/criteria','completion_criteria_unenrol.php',43],['lib/minify/lib/Minify/Cache','Memcache.php',97],['lib/classes','notification.php',93],['completion/criteria','completion_criteria_activity.php',45],['completion/criteria','completion_criteria_duration.php',43],['lib/minify/lib/Minify/Cache','WinCache.php',89],['lib/minify/lib/Minify/Cache','XCache.php',86]], 253],
'manifest_name': ['manifest_name', 'Return the manifest name ', [['lib/portfolio','formats.php',506]], 8],
'submit_and_get_grade': ['submit_and_get_grade', 'Called when teacher submits the grading form: updates the instance in DB, marks it as ACTIVE and returns the grade to be pushed to the gradebook. $itemid must be specified here (it was not required when the instance was created, because it might not existed in draft) ', [['grade/grading/form','lib.php',960]], 1],
'process_add_attempt': ['process_add_attempt', 'Check for a sess key and then call add_attempt. ', [['mod/assign','locallib.php',7663]], 4],
'get_uniqueid_for_user_static': ['get_uniqueid_for_user_static', 'Lookup this user id and return the unique id for this assignment. ', [['mod/assign','locallib.php',7845]], 2],
'set_callback_options': ['set_callback_options', 'Function to set the callback options ', [['lib','portfoliolib.php',134]], 18],
'view_grading_table': ['view_grading_table', 'View the grading table of all submissions for this assignment. ', [['mod/assign','locallib.php',3616],['mod/assign','externallib.php',2153]], 5],
'prepare_package_file': ['prepare_package_file', 'Helper function to copy files into the temp area for single or multi file exports. ', [['lib/portfolio','caller.php',289]], 1],
'apply_grade_to_user': ['apply_grade_to_user', 'Apply a grade from a grading form to a user (may be called multiple times for a group submission). ', [['mod/assign','locallib.php',7289]], 3],
'groups_get_members': ['groups_get_members', 'Returns the users in the specified group. ', [['lib','grouplib.php',416]], 9],
'is_graded': ['is_graded', 'Is this state one of the ones that mean the question attempt has been graded? ', [['question/engine','states.php',138],['question/engine','states.php',380],['question/engine','states.php',403],['question/engine','states.php',414],['mod/assign','locallib.php',4007]], 20],
'download_rewrite_pluginfile_urls': ['download_rewrite_pluginfile_urls', 'Rewrite plugin file urls so they resolve correctly in an exported zip. ', [['mod/assign','locallib.php',2625]], 1],
'setexpanded': ['setexpanded', 'Use this method to indicate that the fieldset should be shown as expanded. The method is applicable to header elements only. ', [['lib','formslib.php',1515]], 42],
'enable': ['enable', 'Enable a license ', [['lib','licenselib.php',90],['mod/assign','assignmentplugin.php',203]], 32],
'get_plugin_by_type': ['get_plugin_by_type', 'Get a specific submission plugin by its type. ', [['mod/assign','locallib.php',333]], 4],
'process_save_extension': ['process_save_extension', 'Save extension date. ', [['mod/assign','locallib.php',5771]], 1],
'create_from_user': ['create_from_user', 'Create instance of event. ', [['mod/assign/classes/event','grading_form_viewed.php',50],['mod/assign/classes/event','workflow_state_updated.php',50],['mod/assign/classes/event','submission_locked.php',44],['lib/classes/event','user_password_updated.php',44],['mod/assign/classes/event','submission_form_viewed.php',50],['mod/assign/classes/event','submission_unlocked.php',44]], 17],
'get_plugin_list': ['get_plugin_list', 'Use when listing real plugins of one type. ', [['lib','deprecatedlib.php',150],['lib/classes','component.php',796],['admin/tool/monitor/classes','eventlist.php',176]], 191],
'grade_update_outcomes': ['grade_update_outcomes', 'Updates a user\'s outcomes. Manual outcomes can not be updated. ', [['lib','gradelib.php',300]], 2],
'get_course': ['get_course', 'Get the course id. ', [['course','moodleform_mod.php',132],['search/classes','engine.php',102],['course/format','lib.php',231],['mod/quiz','attemptlib.php',180],['mod/quiz','attemptlib.php',722],['tag/classes','index_builder.php',296],['lib','modinfolib.php',180],['lib','modinfolib.php',1424],['lib','modinfolib.php',2706],['lib','datalib.php',568],['availability/classes','info.php',70],['mod/assign','locallib.php',1316],['admin/tool/uploadcourse/classes','processor.php',232],['enrol','locallib.php',912],['search/tests/fixtures','mock_search_engine.php',56]], 302],
'can_view_submission': ['can_view_submission', 'Perform an access check to see if the current $USER can view this users submission. ', [['mod/assign','locallib.php',4040]], 37],
'get_instance': ['get_instance', 'Get the DB record for the current instance. ', [['course','moodleform_mod.php',116],['question/engine','bank.php',464],['backup/util/output','output_controller.class.php',53],['repository','lib.php',1137],['backup/util/helper','restore_logs_processor.class.php',69],['grade/grading/form','lib.php',474],['mnet/service/enrol','locallib.php',57],['mod/assign','locallib.php',1224],['lib','externallib.php',1000],['blog','locallib.php',857]], 420],
'is_active_user': ['is_active_user', 'Return true is user is active user in course else false ', [['mod/assign','locallib.php',7957]], 9],
'show_intro': ['show_intro', 'Based on the current assignment settings should we display the intro. ', [['mod/assign','locallib.php',238]], 14],
'set_grade_range': ['set_grade_range', 'Sets the range of grades used in this area. This is usually either range like 0-100 or the scale where keys start from 1. ', [['grade/grading/form','lib.php',647]], 4],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'get_assign_perpage': ['get_assign_perpage', 'Get the marking table page size ', [['mod/assign','locallib.php',891]], 3],
'is_cancelled': ['is_cancelled', 'Returns true if the form was cancelled, false otherwise ', [['backup/util/ui','base_moodleform.class.php',330],['lib','formslib.php',589],['mod/feedback/item','feedback_item_class.php',43],['mod/feedback/item','feedback_item_class.php',258],['mod/feedback/item/captcha','lib.php',63]], 156],
'is_any_feedback_plugin_enabled': ['is_any_feedback_plugin_enabled', 'Check if feedback plugins installed are enabled. ', [['mod/assign','locallib.php',6916]], 0],
'process_revert_to_draft': ['process_revert_to_draft', 'Revert to draft. Uses url parameter userid if userid not supplied as a parameter. ', [['mod/assign','locallib.php',7056]], 2],
'view_batch_markingallocation': ['view_batch_markingallocation', 'Shows a form that allows the allocated marker for selected submissions to be changed. ', [['mod/assign','locallib.php',4233]], 2],
'process_set_batch_marking_allocation': ['process_set_batch_marking_allocation', 'Set the marking allocation for multiple users ', [['mod/assign','locallib.php',7166]], 2],
'add_plugin_submission_elements': ['add_plugin_submission_elements', 'Add elements in submission plugin form. ', [['mod/assign','locallib.php',6896]], 1],
'has_visible_attachments': ['has_visible_attachments', 'Are there any intro attachments to display? ', [['mod/assign','locallib.php',1351]], 1],
'groups_get_all_groups': ['groups_get_all_groups', 'Gets array of all groups in a specified course. ', [['lib','grouplib.php',189]], 108],
'get_return_url': ['get_return_url', '', [['mod/chat','locallib.php',149],['grade','lib.php',1151],['lib/portfolio','caller.php',526],['mod/forum','locallib.php',143]], 29],
'get_cm': ['get_cm', 'Returns the current course module ', [['mod/feedback/classes','complete_form.php',245],['search/classes','base_mod.php',51],['mod/feedback/classes','structure.php',72],['mod/quiz','attemptlib.php',215],['mod/quiz','attemptlib.php',742],['lib','modinfolib.php',222],['comment','lib.php',1010]], 137],
'get_sort_order': ['get_sort_order', '', [['lib/editor/tinymce/plugins/moodleimage','lib.php',46],['lib/editor/tinymce/plugins/pdw','lib.php',48],['lib','outputcomponents.php',2781],['lib/editor/tinymce/plugins/managefiles','lib.php',80],['lib/editor/tinymce/classes','plugin.php',124],['lib/editor/tinymce/plugins/moodlemedia','lib.php',57],['lib/editor/tinymce/plugins/ctrlhelp','lib.php',31],['mod/assign','assignmentplugin.php',277]], 5],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'render_preview': ['render_preview', 'Returns the HTML code displaying the preview of the grading form ', [['grade/grading/form/rubric','lib.php',496],['grade/grading/form/guide','lib.php',502]], 8],
'save_user_extension': ['save_user_extension', 'Save the extension date for a single user. ', [['mod/assign','locallib.php',5729]], 4],
'make_menu_from_list': ['make_menu_from_list', 'Given a list (eg a,b,c,d,e) this function returns an array of 1->a, 2->b, 3->c etc ', [['lib','moodlelib.php',8203]], 9],
'get_grade': ['get_grade', 'Get (or create if not exist yet) grade for this user ', [['lib/grade','grade_item.php',1265],['lib/classes/event','grade_deleted.php',81],['mod/assign','locallib.php',3195],['completion/criteria','completion_criteria_grade.php',96],['grade/grading/form/rubric','lib.php',868],['lib/classes/event','user_graded.php',72],['grade/grading/form/guide','lib.php',889]], 80],
'has_instance': ['has_instance', 'Has this assignment been constructed from an instance? ', [['mod/assign','locallib.php',1215],['enrol','locallib.php',1147]], 3],
'filter_user_list': ['filter_user_list', 'Tests this condition against a user list. Users who do not meet the condition will be removed from the list, unless they have the ability to view hidden activities/sections. ', [['availability/classes','tree_node.php',161],['availability/classes','info_module.php',76],['availability/condition/grouping/classes','condition.php',225],['availability/tests/fixtures','mock_condition.php',111],['availability/condition/group/classes','condition.php',193],['availability/classes','tree.php',297],['availability/classes','info.php',613],['availability/condition/profile/classes','condition.php',448]], 39],
'userdate': ['userdate', 'Returns a formatted string that represents a date in user time. ', [['lib','moodlelib.php',2155],['lib/adodb','adodb.inc.php',2842],['lib/adodb','adodb.inc.php',3569]], 525],
'precheck_submission': ['precheck_submission', 'Check if the submission plugin has all the required data to allow the work to be submitted for grading ', [['mod/assign','submissionplugin.php',60]], 1],
'get_submission_plugin_by_type': ['get_submission_plugin_by_type', 'Get a submission plugin by type. ', [['mod/assign','locallib.php',365]], 62],
'is_empty': ['is_empty', '', [['mod/wiki/diff','difflib.php',364],['mod/feedback/classes','structure.php',132],['user/profile','lib.php',346],['mod/assign/feedback/offline','locallib.php',62],['mod/assign/submission/file','locallib.php',474],['user/profile/field/datetime','field.class.php',117],['mod/assign/feedback/comments','locallib.php',498],['blocks','moodleblock.class.php',181],['blocks','moodleblock.class.php',699],['availability/classes','tree.php',636],['mod/assign','assignmentplugin.php',540],['mod/assign/submission/onlinetext','locallib.php',563],['mod/assign/feedback/file','locallib.php',334],['mod/assign/feedback/editpdf','locallib.php',311],['mod/assign/submission/comments','locallib.php',78]], 20],
'get_grading_manager': ['get_grading_manager', 'Factory method returning an instance of the grading manager ', [['grade/grading','lib.php',27]], 37],
'addhelpbutton': ['addhelpbutton', 'Add a help button to element, only one button per element is allowed. ', [['lib','formslib.php',1909]], 670],
'get_config': ['get_config', 'Config get method. ', [['lib/classes/antivirus','scanner.php',54],['competency/classes','competency_rule.php',59],['question/engine','bank.php',109],['admin/tool/log/classes/helper','store.php',63],['lib','moodlelib.php',1409],['lib','enrollib.php',1142],['lib/editor/tinymce/classes','plugin.php',73],['competency/classes','competency_rule_points.php',43],['search/classes','base.php',169],['mod/assign','assignmentplugin.php',345],['lib/portfolio','plugin.php',546]], 934],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2849],['lib','outputrenderers.php',4412],['lib','outputrenderers.php',4496]], 540],
'set_formats': ['set_formats', 'Sets the available export formats for this content. This function will also poll the static function in the caller class and make sure we\'re not overriding a format that has nothing to do with mimetypes. Eg: if you pass IMAGE here but the caller can export LEAP2A it will keep LEAP2A as well. ', [['lib','portfoliolib.php',164]], 12],
'render_editor_content': ['render_editor_content', 'Render the content in editor that is often used by plugin. ', [['mod/assign','locallib.php',2659]], 2],
'save_grade': ['save_grade', 'Save grade update. ', [['mod/assign','locallib.php',7455],['mod/assign','externallib.php',1863]], 7],
'groups_get_activity_groupmode': ['groups_get_activity_groupmode', 'Returns effective groupmode used in activity, course setting overrides activity setting if groupmodeforce enabled. ', [['lib','grouplib.php',468]], 136],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',782],['lib','externallib.php',1134]], 216],
'get_assign_attempt_history_renderable': ['get_assign_attempt_history_renderable', 'Creates an assign_attempt_history renderable. ', [['mod/assign','locallib.php',4539]], 2],
'view_notices': ['view_notices', 'Message for students when assignment submissions have been closed. ', [['mod/assign','locallib.php',3884]], 1],
'get_submission_group_members_who_have_not_submitted': ['get_submission_group_members_who_have_not_submitted', 'Get a list of the users in the same group as this user that have not submitted the assignment. ', [['mod/assign','locallib.php',2298]], 3],
'revert_to_draft': ['revert_to_draft', 'Revert to draft. ', [['mod/assign','locallib.php',7011],['mod/assign','submissionplugin.php',110]], 6],
'create_from_marker': ['create_from_marker', 'Create instance of event. ', [['mod/assign/classes/event','marker_updated.php',50]], 2],
'add_attempt': ['add_attempt', 'Add a new attempt for a user. ', [['mod/assign','locallib.php',7675],['mod/assign','submissionplugin.php',119]], 3],
'get_form_elements_for_user': ['get_form_elements_for_user', 'Get form elements for the grading page ', [['mod/assign/feedback/comments','locallib.php',291],['mod/assign','assignmentplugin.php',236],['mod/assign/feedback/file','locallib.php',188],['mod/assign/feedback/editpdf','locallib.php',154]], 2],
'setdisableshortforms': ['setdisableshortforms', 'Use this method to indicate that the form will not be using shortforms. ', [['lib','formslib.php',1599]], 22],
'view_plugin_grading_batch_operation': ['view_plugin_grading_batch_operation', 'Allows the plugin to show a batch grading operation page. ', [['mod/assign','locallib.php',4064]], 1],
'is_feedback_modified': ['is_feedback_modified', 'This plugin does not save through the normal interface so this returns false. ', [['mod/assign/feedback/offline','locallib.php',70],['mod/assign/feedback/comments','locallib.php',103],['mod/assign','feedbackplugin.php',115],['mod/assign/feedback/file','locallib.php',80],['mod/assign/feedback/editpdf','locallib.php',183]], 17],
'submit_for_grading': ['submit_for_grading', 'Submit a submission for grading. ', [['mod/assign','locallib.php',5582],['mod/assign','submissionplugin.php',71],['mod/assign','externallib.php',1566]], 20],
'message_send': ['message_send', 'Called when a message provider wants to send a message. This functions checks the message recipient\'s message processor configuration then sends the message to the configured processors ', [['lib','messagelib.php',29]], 94],
'get_submission': ['get_submission', 'Load the submission object from it\'s id. ', [['mod/assign','locallib.php',3074]], 1],
'set_module_viewed': ['set_module_viewed', 'Update the module completion status (set it viewed). ', [['mod/assign','locallib.php',8075],['lib','completionlib.php',657]], 29],
'out': ['out', 'Returns the selector for use in a CSS rule ', [['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['mod/feedback/classes','responses_table.php',332],['lib','moodlelib.php',9729],['lib','weblib.php',545],['lib','tablelib.php',1594],['report/loglive/classes','table_log_ajax.php',37]], 626],
'add_instance': ['add_instance', 'Add new instance of enrol plugin. ', [['enrol/manual','lib.php',147],['lib','enrollib.php',1745],['enrol/self','lib.php',958],['enrol/cohort','lib.php',99],['mod/assign','locallib.php',600],['tag/classes','tag.php',543],['enrol/lti','lib.php',88],['enrol/paypal','lib.php',124],['enrol/guest','lib.php',247],['enrol/meta','lib.php',131]], 91],
'get_enrolled_sql': ['get_enrolled_sql', 'Returns array with sql code and parameters returning all ids of users enrolled into course. ', [['lib','accesslib.php',2247]], 47],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'get_coursemodules_in_course': ['get_coursemodules_in_course', 'Returns all course modules of given activity in course ', [['lib','datalib.php',1351]], 7],
'freeze': ['freeze', 'Freeze the element so that only its value is returned ', [['lib/pear/HTML/QuickForm','file.php',112],['lib/pear/HTML/QuickForm','xbutton.php',76],['lib/pear/HTML/QuickForm','reset.php',67],['lib/pear/HTML/QuickForm','group.php',556],['lib/pear/HTML','QuickForm.php',1544],['lib/form','text.php',77],['lib/pear/HTML/QuickForm','button.php',68],['lib/pear/HTML/QuickForm','image.php',114],['lib/form','submit.php',104],['lib/pear/HTML/QuickForm','element.php',199],['lib/pear/HTML/QuickForm','submit.php',66],['lib/form','cancel.php',113],['lib/pear/HTML/QuickForm','hidden.php',67]], 62],
'base_supported_formats': ['base_supported_formats', '', [['mod/chat','locallib.php',82],['mod/data','locallib.php',379],['mod/assign','locallib.php',8349],['mod/glossary','locallib.php',201],['mod/glossary','locallib.php',372],['lib/portfolio','caller.php',325],['mod/forum','locallib.php',390]], 3],
'render_footer': ['render_footer', 'Page is done - render the footer. ', [['mod/assign','renderer.php',207],['blocks/rss_client/classes/output','renderer.php',76]], 9],
'createelement': ['createelement', 'Create an element, set its class name and optionally install the element to its parent. ', [['lib/yuilib/2in3/2.9.0/build/yui2-carousel','yui2-carousel-debug.js',299],['theme/bootstrapbase/javascript','html5shiv.js',120],['lib/pear/HTML','QuickForm.php',533],['lib/yuilib/2in3/2.9.0/build/yui2-carousel','yui2-carousel.js',298]], 1944],
'get_submission_info_for_participants': ['get_submission_info_for_participants', 'Get the submission status/grading status for all submissions in this assignment for the given paticipants. ', [['mod/assign','locallib.php',1448]], 2],
'process_save_grade': ['process_save_grade', 'Save grade. ', [['mod/assign','locallib.php',7497]], 2],
'get_submission_group': ['get_submission_group', 'This is used for team assignments to get the group for the specified user. If the user is a member of multiple or no groups this will return false ', [['mod/assign','locallib.php',2509]], 19],
'submissions_open': ['submissions_open', 'Is this assignment open for submissions? ', [['mod/assign','locallib.php',5037]], 12],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1086]], 293],
'get_group_submission': ['get_group_submission', 'Load the group submission object for a particular user, optionally creating it if required. ', [['mod/assign','locallib.php',2326]], 36],
'heading': ['heading', 'Outputs a heading ', [['lib','outputrenderers.php',3072],['lib','outputrenderers.php',4364],['lib','outputrenderers.php',4552],['grade/report/singleview/classes/local/screen','screen.php',197],['grade/report/singleview/classes/local/screen','user.php',264],['grade/report/singleview/classes/local/screen','grade.php',283]], 796],
'plagiarism_update_status': ['plagiarism_update_status', 'updates the status of all files within a module ', [['lib','plagiarismlib.php',120]], 1],
'render_area_files': ['render_area_files', 'Render the files in file area. ', [['mod/assign','locallib.php',5134]], 6],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'get_course_module': ['get_course_module', 'Gets the course-module object. Intended for use by conditions. ', [['availability/classes','info_module.php',63],['course','externallib.php',2379],['mod/assign','locallib.php',1286]], 238],
'expected_callbackargs': ['expected_callbackargs', '', [['mod/chat','locallib.php',41],['mod/data','locallib.php',51],['mod/assign','locallib.php',8116],['mod/glossary','locallib.php',39],['mod/glossary','locallib.php',226],['lib/portfolio','caller.php',466],['mod/forum','locallib.php',45]], 1],
'file_get_submitted_draft_itemid': ['file_get_submitted_draft_itemid', 'Returns draft area itemid for a given element. ', [['lib','filelib.php',725]], 48],
'display_grade': ['display_grade', 'Display a grade with scales etc. ', [['mod/assign','gradingtable.php',606],['mod/assign','locallib.php',1360]], 7],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'is_form_defined': ['is_form_defined', 'Is the form definition record available? ', [['grade/grading/form','lib.php',138]], 16],
'make_grades_menu': ['make_grades_menu', 'Creates an array that represents all the current grades that can be chosen using the given grading type. ', [['lib','moodlelib.php',8220]], 10],
'load_plugins': ['load_plugins', 'Load the plugins from the sub folders under subtype. ', [['mod/assign','locallib.php',375]], 2],
'delete_records_select': ['delete_records_select', '', [['lib/dml','pdo_moodle_database.php',208],['lib/dml','oci_native_moodle_database.php',1495],['lib/dml','pgsql_native_moodle_database.php',1162],['lib/dml','mssql_native_moodle_database.php',1146],['lib/dml','mysqli_native_moodle_database.php',1477],['lib/dml','sqlsrv_native_moodle_database.php',1220],['lib/dml/tests','dml_test.php',5553]], 163],
'get_settings': ['get_settings', 'Get the default setting for file submission plugin ', [['mod/assign/submission/file','locallib.php',63],['mod/assign/feedback/comments','locallib.php',230],['mod/assign','assignmentplugin.php',90],['backup/util/plan','base_plan.class.php',107],['mod/assign/submission/onlinetext','locallib.php',61],['backup/util/plan','base_step.class.php',77],['backup/util/plan','base_task.class.php',66]], 30],
'has_submissions_or_grades': ['has_submissions_or_grades', 'Does an assignment have submission(s) or grade(s) already? ', [['mod/assign','locallib.php',319]], 8],
'set_pagetype': ['set_pagetype', 'Sets the pagetype to use for this page. ', [['lib','pagelib.php',1071]], 34],
'get_name': ['get_name', 'Return localised event name. ', [['lib/classes/event','competency_plan_unlinked.php',72],['admin/tool/langimport/classes/task','update_langpacks_task.php',35],['lib/simplepie/library/SimplePie','Author.php',106],['portfolio/download','lib.php',10],['backup/util/structure','restore_path_element.class.php',98],['lib/classes/message/inbound','private_files_handler.php',56],['lib/classes/event','grouping_group_assigned.php',48],['calendar/tests','calendartype_test_example.php',32],['lib/classes/event','enrol_instance_deleted.php',70],['report/log/classes/event','user_report_viewed.php',54],['lib/classes/task','blog_cron_task.php',31],['mod/quiz/classes/event','attempt_reviewed.php',53],['lib/classes/event','tag_unflagged.php',55],['lib/classes/task','send_new_user_passwords_task.php',31],['lib/classes/event','role_unassigned.php',53],['mod/assign/classes/event','grading_form_viewed.php',82],['question/classes/bank','edit_action_column.php',35],['admin/tool/log/store/standard/classes/task','cleanup_task.php',31],['mod/workshop/classes/event','submission_deleted.php',63],['mod/forum/classes/event','discussion_updated.php',65],['lib/classes/event','course_module_instance_list_viewed.php',75],['lib/classes/event','course_created.php',55],['lib/dml','pdo_moodle_database.php',113],['mod/assign/classes/event','extension_granted.php',77],['lib/classes/task','tag_cron_task.php',33],['enrol/imsenterprise/classes/task','cron_task.php',34],['lib/classes/event','course_deleted.php',56],['lib/classes/task','completion_daily_task.php',33],['mod/forum/classes/event','readtracking_enabled.php',64],['mod/wiki/classes/event','page_created.php',48],['lib/dml','oci_native_moodle_database.php',94],['lib/classes/event','competency_viewed.php',70],['mod/choice/classes/event','answer_updated.php',72],['lib/classes/event','search_indexed.php',47],['lib/classes/event','badge_criteria_updated.php',53],['question/classes/bank','question_type_column.php',26],['mod/wiki/classes/event','page_version_deleted.php',54],['lib/grade','grade_item.php',1384],['lib/classes/event','competency_user_competency_rated_in_plan.php',88],['lib/classes/event','webservice_token_sent.php',56],['mod/glossary/classes/event','entry_deleted.php',54],['admin/tool/messageinbound/classes/message/inbound','invalid_recipient_handler.php',60],['lib/classes/event','competency_template_viewed.php',63],['lib/classes/task','context_cleanup_task.php',32],['mod/assign/tests/fixtures','event_mod_assign_fixtures.php',62],['admin/tool/langimport/classes/event','langpack_removed.php',89],['mod/glossary/classes/event','category_deleted.php',46],['mod/forum/classes/message/inbound','reply_handler.php',51],['competency/classes','competency_rule.php',84],['mod/lti/classes/event','unknown_service_api_called.php',82],['lib/classes/event','badge_deleted.php',49],['mod/quiz/classes/event','user_override_updated.php',54],['lib/classes/event','message_contact_added.php',48],['lib/classes/event','cohort_member_added.php',49],['backup/util/ui','restore_ui.class.php',351],['lib/classes/event','blog_entry_updated.php',74],['mod/assign/classes/event','workflow_state_updated.php',88],['mod/forum/classes/event','assessable_uploaded.php',86],['mod/assign/classes/event','submission_created.php',57],['lib/classes/event','group_deleted.php',65],['lib/classes/event','role_allow_assign_updated.php',47],['mod/lesson/classes/event','highscore_added.php',59],['mod/forum/classes/event','discussion_pinned.php',55],['lib/classes/event','webservice_function_called.php',67],['lib/classes/event','competency_plan_reopened.php',75],['mod/lesson/classes/event','essay_attempt_viewed.php',48],['mod/wiki/classes/event','page_locks_deleted.php',54],['lib/classes/event','webservice_service_deleted.php',59],['mod/forum/classes/event','discussion_subscription_created.php',66],['admin/tool/log/store/database/tests/fixtures','event.php',31],['mod/workshop/classes/event','assessable_uploaded.php',93],['lib','csslib.php',2155],['lib','csslib.php',2283],['lib/classes/event','user_loggedout.php',54],['lib/classes/event','webservice_token_created.php',65],['lib/classes/event','tag_collection_updated.php',65],['competency/classes','competency_rule_all.php',84],['backup/util/settings','base_setting.class.php',145],['mod/data/classes/event','field_deleted.php',57],['mod/book/classes/event','chapter_created.php',79],['lib/classes/event','email_failed.php',56],['lib/classes/task','stats_cron_task.php',31],['mod/survey/classes/event','report_downloaded.php',55],['mod/workshop/classes/event','phase_switched.php',75],['lib/grade','grade_category.php',2300],['lib/grade','grade_scale.php',156],['lib/classes/event','course_reset_started.php',53],['mod/workshop/classes/event','assessment_evaluated.php',66],['lib/classes/event','blog_association_created.php',56],['backup/converter','convertlib.php',109],['report/outline/classes/event','activity_report_viewed.php',48],['lib/classes/task','legacy_plugin_cron_task.php',33],['lib/classes/event','competency_plan_updated.php',75],['mod/choice/classes/event','answer_submitted.php',72],['mod/lesson/classes/event','lesson_ended.php',49],['lib/classes/event','role_allow_switch_updated.php',47],['lib/classes/task','portfolio_cron_task.php',31],['lib/classes/event','competency_user_competency_rated_in_course.php',88],['question/classes/bank','question_text_row.php',35],['lib/classes/event','tag_created.php',75],['report/participation/classes/event','report_viewed.php',58],['lib/classes/event','role_capabilities_updated.php',51],['mod/survey/classes/event','response_submitted.php',53],['lib/classes/event','badge_archived.php',47],['mod/workshop/classes/event','assessment_reevaluated.php',76],['mod/assign/classes/event','submission_locked.php',78],['report/outline/classes/event','report_viewed.php',54],['lib/classes/event','user_deleted.php',57],['lib/classes/event','mnet_access_control_updated.php',57],['mod/lesson/classes/event','essay_assessed.php',78],['mod/book/tool/print/classes/event','book_printed.php',76],['lib/classes/event','grouping_deleted.php',72],['admin/tool/monitor/classes','rule.php',239],['lib/classes/event','course_viewed.php',75],['mod/forum/classes/event','user_report_viewed.php',65],['user/selector','lib.php',309],['mod/quiz/classes/event','attempt_summary_viewed.php',56],['lib/classes/event','webservice_service_user_added.php',59],['mod/forum/classes/event','discussion_unpinned.php',55],['lib/classes/event','grouping_group_unassigned.php',48],['lib/grade','grade_outcome.php',272],['mod/chat/classes/event','message_sent.php',59],['lib/classes/event','role_assigned.php',56],['mod/quiz/classes/question/bank','question_name_text_column.php',37],['question/classes/bank','modifier_name_column.php',27],['mod/glossary/classes/event','entry_viewed.php',48],['mod/data/classes/event','record_created.php',56],['lib/classes/event','course_category_deleted.php',59],['lib/dml','mariadb_native_moodle_database.php',41],['lib/classes/event','role_deleted.php',55],['lib/classes/task','question_cron_task.php',31],['portfolio/flickr','lib.php',41],['lib/classes/task','cache_cron_task.php',31],['mod/wiki/classes/event','page_version_viewed.php',54],['admin/tool/recyclebin/classes/event','category_bin_item_deleted.php',47],['admin/tool/log/store/standard/tests/fixtures','event.php',31],['mod/scorm/classes/event','status_submitted.php',46],['admin/tool/monitor/classes/event','rule_created.php',50],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',31],['question/classes/bank','checkbox_column.php',32],['lib/classes/event','competency_user_competency_plan_viewed.php',81],['mod/assign/feedback/offline','locallib.php',42],['admin/tool/messageinbound/classes/task','cleanup_task.php',38],['mod/workshop/classes/event','submission_updated.php',63],['lib/editor/atto/classes/task','autosave_cleanup_task.php',33],['mod/choice/classes/event','report_viewed.php',53],['mod/lesson/classes/event','group_override_deleted.php',54],['mod/wiki/classes/event','page_map_viewed.php',54],['admin/tool/log/store/legacy/tests/fixtures','event.php',31],['mod/lesson/classes/event','question_answered.php',54],['mod/choice/classes/event','report_downloaded.php',54],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',36],['backup/util/ui','backup_ui_setting.class.php',86],['lib/classes/event','competency_user_evidence_created.php',64],['lib/classes/event','course_module_completion_updated.php',54],['repository/coursefiles','lib.php',183],['lib/classes/event','note_updated.php',56],['lib/classes/event','note_created.php',56],['lib/classes/event','competency_framework_created.php',63],['lib/classes/event','course_resources_list_viewed.php',60],['lib/classes/event','tag_updated.php',58],['mod/forum/classes/event','subscribers_viewed.php',65],['mod/book/tool/exportimscp/classes/event','book_exported.php',76],['mod/quiz/classes/question/bank','add_action_column.php',45],['lib/classes/task','completion_regular_task.php',33],['lib/classes/event','user_enrolment_deleted.php',54],['grade/report/grader/classes/event','grade_report_viewed.php',39],['lib','enrollib.php',1076],['admin/tool/recyclebin/classes/event','course_bin_item_restored.php',47],['lib/classes/event','webservice_service_updated.php',59],['lib/editor/tinymce/classes','plugin.php',101],['mod/lesson/classes/event','group_override_created.php',55],['mod/scorm/classes/event','attempt_deleted.php',62],['lib/classes/event','competency_user_competency_review_request_cancelled.php',72],['lib/classes/event','webservice_service_created.php',65],['lib/classes/task','events_cron_task.php',31],['mod/wiki/classes/event','page_version_restored.php',54],['mod/forum/classes/event','discussion_deleted.php',66],['lib/classes/event','competency_framework_updated.php',73],['mod/lesson/classes/event','lesson_restarted.php',48],['mod/wiki/classes/event','page_updated.php',54],['mod/assign/classes/event','marker_updated.php',89],['lib','modinfolib.php',1270],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',38],['lib/classes/event','course_module_updated.php',57],['repository','lib.php',1834],['auth/cas/classes/task','sync_task.php',34],['lib/classes/event','competency_template_deleted.php',73],['mod/assign/classes/event','submission_confirmation_form_viewed.php',79],['lib/bennu','iCalendar_components.php',37],['report/questioninstances/classes/event','report_viewed.php',55],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',36],['lib/classes/event','message_contact_blocked.php',48],['lib/classes/event','competency_template_updated.php',75],['question/behaviour','behaviourbase.php',83],['grade/report/history/classes/event','grade_report_viewed.php',39],['lib/classes/event','badge_disabled.php',47],['mod/assign/classes/event','grading_table_viewed.php',79],['lib/classes/event','badge_enabled.php',47],['mod/lti','OAuth.php',122],['mod/lti','OAuth.php',149],['mod/lti','OAuth.php',173],['calendar/type/gregorian/classes','structure.php',29],['mod/quiz/classes/event','edit_page_viewed.php',53],['lib/simplepie/library/SimplePie','Credit.php',139],['mod/scorm/classes/event','tracks_viewed.php',64],['mod/wiki/classes/event','page_diff_viewed.php',55],['message/tests/fixtures','inbound_fixtures.php',41],['lib/classes/event','grouping_created.php',65],['lib/classes/event','calendar_event_deleted.php',58],['enrol/flatfile/classes/task','flatfile_sync_task.php',37],['lib/classes/event','group_updated.php',65],['lib/classes/task','registration_cron_task.php',31],['mod/book/classes/event','chapter_updated.php',79],['lib/classes/event','grade_deleted.php',94],['admin/tool/recyclebin/classes/event','course_bin_item_created.php',47],['lib/classes/event','user_loggedin.php',64],['lib/classes/task','check_for_updates_task.php',31],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',56],['mod/assign/submission/file','locallib.php',44],['mod/forum/classes/task','cron_task.php',30],['mod/forum/classes/event','subscription_created.php',65],['lib/classes/event','tag_collection_created.php',65],['grade/report/overview/classes/event','grade_report_viewed.php',48],['mod/assign/classes/event','batch_set_marker_allocation_viewed.php',79],['mod/quiz/classes/event','group_override_updated.php',54],['lib/classes/event','competency_plan_created.php',63],['mod/glossary/classes/event','entry_disapproved.php',46],['lib/classes/task','send_failed_login_notifications_task.php',34],['enrol/lti/classes/task','sync_grades.php',36],['lib/classes/event','message_viewed.php',54],['portfolio/boxnet','lib.php',14],['lib/classes/event','comment_created.php',58],['question/classes/bank','preview_action_column.php',26],['lib/classes/event','course_content_deleted.php',54],['lib/dml','pgsql_native_moodle_database.php',87],['mod/feedback/classes/event','response_deleted.php',83],['lib/classes/event','competency_evidence_created.php',98],['lib/classes/event','comment_deleted.php',58],['lib/classes/event','competency_user_competency_review_requested.php',72],['mod/quiz/classes/event','attempt_abandoned.php',63],['mod/scorm/classes/event','user_report_viewed.php',62],['lib/dml','mssql_native_moodle_database.php',88],['mod/quiz/classes/event','attempt_becameoverdue.php',66],['mod/quiz/classes/event','group_override_created.php',55],['lib/dml','mysqli_native_moodle_database.php',352],['backup/util/ui','backup_ui.class.php',194],['mod/book/tool/print/classes/event','chapter_printed.php',79],['mod/data/classes/event','record_deleted.php',56],['competency/classes','competency_rule_points.php',185],['lib/classes/event','competency_user_competency_viewed.php',81],['lib/classes/event','dashboard_viewed.php',59],['mod/lesson/classes/event','question_viewed.php',54],['lib/classes/event','user_profile_viewed.php',56],['lib','medialib.php',345],['admin/tool/monitor/classes/task','clean_events.php',32],['mod/lesson/classes/event','user_override_deleted.php',53],['lib/classes/event','cohort_member_removed.php',50],['mod/lesson/classes/event','lesson_started.php',48],['mod/lesson/classes/event','page_updated.php',73],['mod/workshop/classes/event','submission_viewed.php',63],['question/classes/bank','question_name_column.php',28],['lib/classes/event','competency_deleted.php',87],['admin/tool/monitor/classes','subscription.php',132],['lib/classes/task','grade_cron_task.php',31],['mod/glossary/classes/event','entry_created.php',52],['lib/classes/task','file_temp_cleanup_task.php',31],['lib/classes/event','dashboard_reset.php',60],['backup/util/structure','base_atom.class.php',71],['portfolio/googledocs','lib.php',54],['mod/assign/feedback/comments','locallib.php',36],['mod/wiki/classes/event','page_history_viewed.php',48],['lib/classes/event','competency_plan_review_request_cancelled.php',75],['lib/classes/event','competency_plan_deleted.php',73],['mod/quiz/classes/event','attempt_viewed.php',54],['mod/data/classes/event','field_updated.php',57],['lib/classes/event','grouping_updated.php',65],['cache/classes','definition.php',621],['lib/classes/task','plagiarism_cron_task.php',31],['backup/converter/moodle1','lib.php',1033],['lib/classes/event','question_category_created.php',48],['grade/report/user/classes/event','grade_report_viewed.php',48],['lib/classes/event','user_login_failed.php',56],['mod/scorm/classes/event','report_viewed.php',63],['mod/chat/classes/event','sessions_viewed.php',65],['admin/tool/recyclebin/classes/event','course_bin_item_deleted.php',47],['mod/quiz/classes/event','user_override_deleted.php',53],['portfolio/mahara','lib.php',61],['mod/quiz/classes/event','attempt_submitted.php',63],['grade/report/outcomes/classes/event','grade_report_viewed.php',39],['mod/lesson/classes/event','group_override_updated.php',54],['mod/workshop/classes/event','submission_created.php',63],['mod/assign/classes/event','submission_updated.php',57],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',83],['lib/classes/event','competency_updated.php',70],['lib/classes/event','note_deleted.php',56],['mod/lesson/classes/event','page_moved.php',56],['lib/classes/event','course_completed.php',73],['lib/classes/event','tag_added.php',58],['lib/classes/event','competency_created.php',70],['mod/lesson/classes/event','highscores_viewed.php',51],['lib/classes/event','message_contact_unblocked.php',48],['lib/classes/event','user_enrolment_created.php',53],['lib/classes/task','search_index_task.php',35],['lib/classes/event','course_module_created.php',86],['lib/classes/event','webservice_service_user_removed.php',59],['report/log/classes/event','report_viewed.php',58],['mod/assign/submission/file/classes/event','assessable_uploaded.php',85],['lib/classes/event','group_member_added.php',78],['mod/forum/classes/event','discussion_viewed.php',60],['mod/assign/classes/event','submission_viewed.php',76],['mod/lti/classes/local/ltiservice','service_base.php',87],['enrol/lti/classes/task','sync_members.php',46],['mod/workshop/classes/event','submission_reassessed.php',77],['lib/classes/task','session_cleanup_task.php',31],['lib/tests','messageinbound_test.php',166],['lib/classes/task','backup_cleanup_task.php',31],['mod/workshop/classes/event','assessment_evaluations_reset.php',75],['mod/scorm/classes/event','scoreraw_submitted.php',46],['mod/assign/classes/event','statement_accepted.php',77],['mod/assign/classes/event','feedback_viewed.php',76],['lib/classes/task','delete_unconfirmed_users_task.php',31],['mod/forum/classes/event','discussion_moved.php',66],['lib/classes/event','competency_user_evidence_deleted.php',64],['mod/assign/classes/event','batch_set_workflow_state_viewed.php',79],['mod/lesson/classes/event','lesson_resumed.php',48],['lib/classes/task','badges_cron_task.php',31],['lib/classes/event','comments_viewed.php',51],['mod/data/classes/event','template_viewed.php',55],['mod/wiki/classes/event','page_deleted.php',54],['mod/quiz/classes/event','report_viewed.php',56],['mod/scorm/classes/event','sco_launched.php',64],['mod/glossary/classes/event','entry_updated.php',52],['mod/lesson/classes/event','user_override_created.php',53],['mod/glossary/classes/event','category_updated.php',46],['lib/classes/event','course_updated.php',58],['grade/report/singleview/classes/event','grade_report_viewed.php',39],['mod/feedback/classes/event','response_submitted.php',83],['lib/classes/event','blog_entry_deleted.php',53],['mod/book/classes/event','chapter_deleted.php',79],['report/completion/classes/event','report_viewed.php',49],['lib/classes/event','recent_activity_viewed.php',49],['mod/quiz/classes/event','question_manually_graded.php',55],['mod/assign/classes/event','submission_status_updated.php',79],['lib/classes/event','user_enrolment_updated.php',53],['lib/classes/event','tag_deleted.php',55],['report/completion/classes/event','user_report_viewed.php',49],['report/stats/classes/event','report_viewed.php',56],['lib/classes/event','calendar_event_created.php',58],['mod/assign/classes/event','submission_duplicated.php',77],['lib/classes/event','competency_framework_deleted.php',73],['lib/classes/event','course_section_updated.php',56],['lib/classes/event','message_sent.php',82],['lib/classes/event','calendar_subscription_deleted.php',56],['lib/classes/event','course_category_updated.php',51],['lib/classes/event','user_password_updated.php',70],['enrol/lti/ims-blti','OAuth.php',65],['enrol/lti/ims-blti','OAuth.php',92],['enrol/lti/ims-blti','OAuth.php',116],['mod/forum/classes/event','subscription_deleted.php',65],['mod/assign/classes/event','reveal_identities_confirmation_page_viewed.php',79],['lib/classes/event','user_loggedinas.php',57],['lib/classes/event','competency_template_created.php',63],['lib/classes/event','user_created.php',48],['admin/tool/recyclebin/classes/event','category_bin_item_restored.php',47],['report/loglive/classes/event','report_viewed.php',48],['admin/tool/monitor/classes/event','subscription_created.php',50],['mod/book/classes/event','chapter_viewed.php',79],['lib/classes/event','badge_awarded.php',54],['lib/classes/event','calendar_subscription_created.php',57],['lib/classes/event','enrol_instance_created.php',69],['lib/classes/event','user_list_viewed.php',56],['lib/classes/task','calendar_cron_task.php',31],['mod/forum/classes/event','post_deleted.php',67],['mod/quiz/classes/event','group_override_deleted.php',54],['lib/classes/event','badge_created.php',47],['backup/util/plan','base_plan.class.php',50],['lib/classes/event','base.php',292],['lib/classes/event','competency_framework_viewed.php',69],['lib/classes/event','tag_collection_deleted.php',65],['lib/classes/event','group_member_removed.php',69],['lib/classes/event','grade_report_viewed.php',54],['lib/classes/event','calendar_event_updated.php',58],['mod/assign/submission/onlinetext','locallib.php',40],['lib/classes/event','user_updated.php',48],['mod/lesson/classes/event','page_created.php',54],['backup/util/ui','base_ui_stage.class.php',110],['mod/assign/classes/event','submission_form_viewed.php',82],['auth/ldap/classes/task','sync_task.php',34],['lib/classes/event','course_completion_updated.php',47],['lib/classes/event','competency_plan_review_started.php',75],['lib/classes/event','course_user_report_viewed.php',66],['mod/folder/classes/event','all_files_downloaded.php',60],['mod/workshop/classes/event','assessments_reset.php',74],['lib/tests/fixtures','task_fixtures.php',35],['lib/tests/fixtures','task_fixtures.php',44],['lib/tests/fixtures','task_fixtures.php',53],['mod/data/classes/event','template_updated.php',56],['mod/assign/classes/event','identities_revealed.php',75],['question/classes/bank','copy_action_column.php',35],['admin/tool/log/store/legacy/classes/event','legacy_logged.php',35],['lib/classes/event','notes_viewed.php',49],['admin/tool/recyclebin/classes/event','category_bin_item_created.php',47],['lib/classes/event','competency_plan_viewed.php',63],['mod/data/classes/event','record_updated.php',56],['mod/assign/feedback/file','locallib.php',45],['lib/classes/event','competency_plan_unapproved.php',75],['mod/lesson/classes/event','content_page_viewed.php',48],['mod/assign/feedback/editpdf','locallib.php',43],['lib/dml','sqlsrv_native_moodle_database.php',108],['admin/tool/monitor/classes/event','subscription_deleted.php',50],['mod/assign/classes/event','assessable_submitted.php',109],['mod/quiz/classes/event','attempt_started.php',62],['lib/classes/task','create_contexts_task.php',31],['lib/classes/task','file_trash_cleanup_task.php',31],['lib/classes/event','competency_user_competency_rated.php',82],['mod/forum/classes/event','post_updated.php',67],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',37],['lib/classes/event','course_module_deleted.php',56],['mod/assign/submission/comments','locallib.php',39],['lib/classes/event','competency_plan_review_requested.php',75],['lib/classes/event','user_graded.php',96],['lib/classes/event','webservice_login_failed.php',71],['mod/forum/classes/event','post_created.php',67],['lib/classes/task','complete_plans_task.php',43],['mod/assign/classes/event','submission_status_viewed.php',81],['lib/classes/event','enrol_instance_updated.php',70],['lib/classes/task','messaging_cleanup_task.php',31],['portfolio/picasa','lib.php',33],['admin/tool/capability/classes/event','report_viewed.php',47],['grade/report/singleview/classes/local/ui','unique_name.php',38],['mod/data/classes/event','field_created.php',58],['mod/folder/classes/event','folder_updated.php',48],['lib/classes/event','badge_updated.php',47],['lib/tests/fixtures','event_fixtures.php',34],['lib/classes/task','cache_cleanup_task.php',31],['mod/survey/classes/event','report_viewed.php',55],['mod/quiz/classes/event','attempt_deleted.php',53],['mod/glossary/classes/event','entry_approved.php',46],['mod/wiki/classes/event','page_viewed.php',57],['lib/classes/log','reader.php',30],['lib/classes/task','password_reset_cleanup_task.php',31],['mod/forum/classes/event','readtracking_disabled.php',64],['admin/tool/langimport/classes/event','langpack_imported.php',80],['lib/classes/event','competency_plan_review_stopped.php',75],['admin/tool/langimport/classes/event','langpack_updated.php',80],['lib/classes/event','unknown_logged.php',43],['lib/classes/event','competency_user_competency_viewed_in_plan.php',85],['lib/classes/event','competency_user_competency_viewed_in_course.php',84],['lib/classes/task','search_optimize_task.php',38],['mod/glossary/classes/event','category_created.php',46],['lib/portfolio','plugin.php',120],['report/stats/classes/event','user_report_viewed.php',48],['lib/classes/event','dashboards_reset.php',59],['lib/classes/event','calendar_subscription_updated.php',57],['lib/classes/event','cohort_updated.php',49],['admin/tool/monitor/classes/event','rule_updated.php',50],['mod/lesson/classes/event','page_deleted.php',54],['lib/classes/event','course_section_deleted.php',57],['lib/classes/task','delete_incomplete_users_task.php',31],['lib/classes/task','automated_backup_task.php',31],['admin/tool/monitor/classes/event','subscription_criteria_met.php',55],['lib/classes/event','mnet_access_control_created.php',57],['admin/tool/messageinbound/classes/task','pickup_task.php',38],['mod/forum/classes/event','discussion_created.php',65],['question/classes/bank','creator_name_column.php',28],['lib/classes/event','blog_entries_viewed.php',62],['lib/classes/task','sync_plans_from_template_cohorts_task.php',41],['mod/quiz/classes/event','attempt_preview_started.php',54],['lib/classes/event','content_viewed.php',80],['lib/classes/event','competency_user_evidence_updated.php',64],['lib/dml/tests','dml_test.php',5530],['mod/assign/classes/event','submission_graded.php',78],['mod/assign/classes/event','all_submissions_downloaded.php',75],['lib/classes/event','course_restored.php',58],['lib/classes/event','group_created.php',65],['lib/classes/event','badge_criteria_deleted.php',52],['lib/classes/event','tag_flagged.php',55],['lib/classes/event','competency_plan_completed.php',75],['mod/lesson/classes/event','user_override_updated.php',54],['lib/classes/event','role_allow_override_updated.php',47],['mod/forum/classes/event','discussion_subscription_deleted.php',66],['lib/classes/event','cohort_deleted.php',49],['lib/classes/event','badge_criteria_created.php',52],['admin/tool/log/classes/helper','reader.php',41],['admin/tool/monitor/classes/task','check_subscriptions.php',50],['lib/classes/event','blog_entry_created.php',76],['mod/scorm/classes/event','interactions_viewed.php',63],['mod/workshop/classes/event','submission_assessed.php',76],['lib/classes/event','badge_duplicated.php',47],['backup/util/plan','base_step.class.php',49],['lib/classes/event','course_category_created.php',48],['lib/classes/event','cohort_created.php',49],['lib/classes/event','tag_removed.php',58],['lib/classes/event','competency_plan_approved.php',75],['mod/choice/classes/event','answer_deleted.php',56],['backup/util/ui','restore_ui_stage.class.php',75],['lib/classes/event','competency_user_competency_review_started.php',72],['lib/classes/event','course_reset_ended.php',53],['mod/quiz/classes/event','user_override_created.php',53],['mod/forum/classes/event','course_searched.php',66],['lib/classes/event','message_contact_removed.php',48],['admin/tool/monitor/classes/event','rule_deleted.php',50],['lib/classes/event','message_deleted.php',91],['mod/assign/classes/event','submission_unlocked.php',78],['lib/classes/event','competency_user_competency_review_stopped.php',72],['lib/classes/event','course_module_viewed.php',62],['backup/util/plan','base_task.class.php',58],['question/classes/bank','delete_action_column.php',36]], 469],
'get_useridlist_key': ['get_useridlist_key', 'Generates the key that should be used for an entry in the useridlist cache. ', [['mod/assign','locallib.php',8027]], 5],
'copy_area_files_for_upgrade': ['copy_area_files_for_upgrade', 'Copy all the files from the old assignment files area to the new one. This is used by the plugin upgrade code. ', [['mod/assign','locallib.php',7590]], 4],
'leap2a_writer': ['leap2a_writer', 'Generate portfolio_format_leap2a ', [['lib/portfolio','formats.php',490]], 6],
'list_participants': ['list_participants', 'Load a list of users enrolled in the current course with the specified permission and group. 0 for no group. ', [['mod/assign','locallib.php',1546],['mod/assign','externallib.php',2503]], 18],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 641],
'action_link': ['action_link', 'Renders a special html link with attached action ', [['lib','outputrenderers.php',1623],['report/loglive/classes','table_log.php',285],['report/log/classes','table_log.php',332]], 75],
'process_unlock_submission': ['process_unlock_submission', 'Unlock the student submission. Uses url parameter userid. ', [['mod/assign','locallib.php',7271]], 3],
'process_grading_batch_operation': ['process_grading_batch_operation', 'Ask the user to confirm they want to perform this batch operation ', [['mod/assign','locallib.php',4089]], 1],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',592]], 3302],
'data_preprocessing': ['data_preprocessing', '', [['mod/scorm','mod_form.php',287],['course','moodleform_mod.php',183],['mod/assign','mod_form.php',244],['question/type','edit_question_form.php',514],['question/type/calculatedmulti','edit_calculatedmulti_form.php',195],['mod/feedback','mod_form.php',135],['question/type/ddmarker','edit_ddmarker_form.php',157],['question/type/calculatedsimple','edit_calculatedsimple_form.php',574],['mod/resource','mod_form.php',154],['question/type/numerical','edit_numerical_form.php',195],['question/type/calculated','edit_calculated_form.php',179],['question/type/shortanswer','edit_shortanswer_form.php',61],['question/type/essay','edit_essay_form.php',79],['mod/folder','mod_form.php',83],['mod/assign','assignmentplugin.php',100],['mod/lesson','mod_form.php',337],['mod/page','mod_form.php',116],['mod/workshop','mod_form.php',252],['mod/url','mod_form.php',132],['question/type/randomsamatch','edit_randomsamatch_form.php',58],['mod/data','mod_form.php',107],['question/type/match','edit_match_form.php',78],['mod/forum','mod_form.php',214],['question/type/gapselect','edit_form_base.php',200],['question/type/multichoice','edit_multichoice_form.php',92],['question/type/ddimageortext','edit_ddimageortext_form.php',42],['mod/glossary','mod_form.php',166],['mod/quiz','mod_form.php',449],['mod/choice','mod_form.php',103],['question/type/truefalse','edit_truefalse_form.php',70]], 21],
'view_single_grade_page': ['view_single_grade_page', 'Print the grading page for a single user submission. ', [['mod/assign','locallib.php',3368]], 1],
'view_single_grading_panel': ['view_single_grading_panel', 'Print the grading page for a single user submission. ', [['mod/assign','locallib.php',3208]], 1],
'get_assign_grading_summary_renderable': ['get_assign_grading_summary_renderable', 'Creates an assign_grading_summary renderable. ', [['mod/assign','locallib.php',4739]], 2],
'grade_format_gradevalue': ['grade_format_gradevalue', 'Returns string representation of grade value ', [['lib','gradelib.php',726]], 20],
'add_plugin_grade_elements': ['add_plugin_grade_elements', 'Add elements in grading plugin form. ', [['mod/assign','locallib.php',1089]], 1],
'to_html': ['to_html', 'Returns html string. ', [['lib','listlib.php',110],['lib','listlib.php',523],['lib','portfoliolib.php',254]], 17],
'get_column_data': ['get_column_data', 'Using the current filtering and sorting - load all rows and return a single column from them. ', [['mod/assign','gradingtable.php',1328]], 2],
'assign_reset_gradebook': ['assign_reset_gradebook', 'Removes all grades from gradebook ', [['mod/assign','lib.php',139]], 1],
'view_page': ['view_page', 'Print a sub page in this plugin ', [['mod/assign/feedback/offline','locallib.php',353],['mod/page/classes','external.php',56],['mod/wiki/classes','external.php',262],['mod/assign','assignmentplugin.php',613],['mod/assign/feedback/file','locallib.php',647],['mod/quiz','renderer.php',762]], 10],
'get_subtype': ['get_subtype', 'return subtype name of the plugin ', [['mod/assign','submissionplugin.php',40],['mod/assign','feedbackplugin.php',38]], 41],
'strip_pluginfile_content': ['strip_pluginfile_content', 'Removes the usage of Moodle files from a text. ', [['lib','weblib.php',1560]], 3],
'get_assign_submission_status_renderable': ['get_assign_submission_status_renderable', 'Creates an assign_submission_status renderable. ', [['mod/assign','locallib.php',4364]], 2],
'groups_get_activity_group': ['groups_get_activity_group', 'Returns group active in activity, changes the group by default if \'group\' page param present ', [['lib','grouplib.php',814]], 97],
'link_files': ['link_files', 'Helper function to link some stored_files into the feed and link them to a particular entry ', [['lib/portfolio/formats/leap2a','lib.php',152]], 5],
'set_url': ['set_url', 'Convenience method handling moodle_urls. ', [['competency/classes','evidence.php',151],['lib','outputcomponents.php',2828],['backup/cc/cc_lib','cc_weblink.php',50],['lib','pagelib.php',1227],['blocks/rss_client/classes/output','channel_image.php',89],['backup/util/ui','restore_ui_components.php',141],['mod/wiki','pagelib.php',245],['mod/wiki','pagelib.php',333],['mod/wiki','pagelib.php',425],['mod/wiki','pagelib.php',696],['mod/wiki','pagelib.php',721],['mod/wiki','pagelib.php',835],['mod/wiki','pagelib.php',879],['mod/wiki','pagelib.php',1008],['mod/wiki','pagelib.php',1112],['mod/wiki','pagelib.php',1219],['mod/wiki','pagelib.php',1462],['mod/wiki','pagelib.php',1864],['mod/wiki','pagelib.php',1932],['mod/wiki','pagelib.php',2104],['mod/wiki','pagelib.php',2165],['mod/wiki','pagelib.php',2221],['mod/wiki','pagelib.php',2286],['mod/wiki','pagelib.php',2334],['mod/wiki','pagelib.php',2382],['mod/wiki','pagelib.php',2486]], 596],
'get_extra_user_fields': ['get_extra_user_fields', 'Checks if current user is shown any extra fields when listing users. ', [['lib','moodlelib.php',3480]], 48],
'get_participant': ['get_participant', 'Load a user if they are enrolled in the current course. Populated with submission status for this assignment. ', [['mod/assign','locallib.php',1587],['mod/assign','externallib.php',2669]], 14],
'plagiarism_print_disclosure': ['plagiarism_print_disclosure', 'Capture the output of the plagiarism plugins disclosures and return it as a string. ', [['mod/assign','locallib.php',3866],['lib','plagiarismlib.php',143]], 4],
'require_view_submission': ['require_view_submission', 'Throw an error if the permissions to view this users submission are missing. ', [['mod/assign','locallib.php',2773]], 2],
'view': ['view', 'No full submission view - the summary contains the list of files and that is the whole submission ', [['mod/assign/submission/file','locallib.php',333],['lib/yuilib/3.17.2/view','view.js',42],['mod/assign/feedback/comments','locallib.php',369],['lib/yuilib/3.17.2/view','view-debug.js',42],['mod/assign','assignmentplugin.php',265],['mod/assign','locallib.php',409],['mod/assign/submission/onlinetext','locallib.php',419],['mod/assign/feedback/file','locallib.php',308],['mod/assign/feedback/editpdf','locallib.php',287]], 23],
'set_label': ['set_label', 'Sets the label. ', [['backup/util/ui','backup_ui_setting.class.php',143],['lib','outputcomponents.php',839],['lib','outputcomponents.php',961],['lib/classes','chart_axis.php',143],['backup/cc/cc_lib','cc_asssesment.php',378],['backup/cc/cc_lib','cc_asssesment.php',492],['backup/cc/cc_lib','cc_asssesment.php',1725]], 54],
'update_gradebook': ['update_gradebook', 'Update the gradebook information for this assignment. ', [['mod/assign','locallib.php',866]], 3],
'add_all_plugin_settings': ['add_all_plugin_settings', 'Add settings to edit plugin form. ', [['mod/assign','locallib.php',1142]], 1],
'copy_submission': ['copy_submission', 'Copy the student\'s submission from a previous submission. Used when a student opts to base their resubmission on the last submission. ', [['mod/assign/submission/file','locallib.php',504],['mod/assign','submissionplugin.php',79],['mod/assign/submission/onlinetext','locallib.php',599]], 1],
'save_quickgrading_changes': ['save_quickgrading_changes', 'Save quickgrading changes. ', [['mod/assign/feedback/comments','locallib.php',192],['mod/assign','feedbackplugin.php',128]], 1],
'get_user_grade': ['get_user_grade', 'This will retrieve a grade object from the db, optionally creating it if required. ', [['mod/assign','locallib.php',3130]], 61],
'is_any_submission_plugin_enabled': ['is_any_submission_plugin_enabled', 'Check if submission plugins installed are enabled. ', [['mod/assign','locallib.php',6936]], 19],
'required_param': ['required_param', 'Returns a particular value for the named variable, taken from POST or GET.  If the parameter doesn\'t exist then an error is thrown because we require this variable. ', [['lib','moodlelib.php',525]], 815],
'format_notification_message_text': ['format_notification_message_text', 'Format a notification for plain text. ', [['mod/assign','locallib.php',5313]], 1],
'hardfreeze': ['hardfreeze', 'Displays elements without HTML input tags. This method is different to freeze() in that it makes sure no hidden elements are included in the form. Note: If you want to make sure the submitted value is ignored, please use setDefaults(). ', [['lib','formslib.php',2491]], 68],
'update_user_flags': ['update_user_flags', 'Update user flags for this user in this assignment. ', [['mod/assign','locallib.php',2084]], 10],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1716],['lib/google/src/Google/Service','Games.php',2100]], 1030],
'copy_existing_file': ['copy_existing_file', 'Copies a file from somewhere else in moodle to the portfolio temporary working directory associated with this export ', [['lib/portfolio','exporter.php',758]], 11],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',609]], 2210],
'grade_floatval': ['grade_floatval', 'Convert a number to 5 decimal point float, an empty string or a null db compatible format (we need this to decide if db value changed) ', [['lib','gradelib.php',1583]], 55],
'mtrace': ['mtrace', 'Outputs the given message via {@link mtrace()}. ', [['lib/classes','plugin_manager.php',1376],['lib','moodlelib.php',8509]], 406],
'update_calendar': ['update_calendar', 'Update the calendar entries for this assignment. ', [['mod/assign','locallib.php',924]], 5],
'view_student_summary': ['view_student_summary', 'Print 2 tables of information with no action links - the submission summary and the grading summary. ', [['mod/assign','locallib.php',4563]], 43],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'groups_get_group_name': ['groups_get_group_name', 'Gets the name of a group with a specified id ', [['lib','grouplib.php',55]], 14],
'get_error': ['get_error', 'This function returns the errorstring ', [['lib','componentlib.class.php',559],['lib','csvlib.class.php',268],['lib','mathslib.php',112],['grade/import/csv/classes','load_data.php',602],['mod/assign','assignmentplugin.php',130]], 35],
'clean_filename': ['clean_filename', 'Cleans a given filename by removing suspicious or troublesome characters ', [['lib','moodlelib.php',6575]], 58],
'help_icon': ['help_icon', 'Returns HTML to display a help icon. ', [['lib','outputrenderers.php',2341]], 79],
'get_editor_text': ['get_editor_text', 'Get the saved text content from the editor. ', [['mod/assign/feedback/comments','locallib.php',145],['mod/assign','assignmentplugin.php',431],['mod/assign/submission/onlinetext','locallib.php',297]], 10],
'update_grade': ['update_grade', 'Update a grade in the grade table for the assignment and in the gradebook. ', [['mod/assign','locallib.php',2100]], 11],
'view_grading_page': ['view_grading_page', 'View entire grading page. ', [['mod/assign','locallib.php',3843]], 1],
'file_rewrite_pluginfile_urls': ['file_rewrite_pluginfile_urls', 'Convert encoded URLs in $text from the @@PLUGINFILE@@/... form to an actual URL. Passing a new option reverse = true in the $options var will make the function to convert actual URLs in $text to encoded URLs in the @@PLUGINFILE@@ form. ', [['lib','filelib.php',446]], 96],
'is_visible': ['is_visible', 'Check if the field data is visible to the current user ', [['user/profile','lib.php',322],['repository/coursefiles','lib.php',167],['repository','lib.php',1779],['mod/assign','assignmentplugin.php',287],['backup/cc/cc_lib','cc_converters.php',113]], 63],
'where': ['where', '', [['question/engine','datalib.php',1883],['question/engine','datalib.php',1965],['mod/glossary/classes','entry_query_builder.php',448],['question/classes/bank/search','hidden_condition.php',53],['question/classes/bank/search','category_condition.php',96]], 64],
'get_or_create_instance': ['get_or_create_instance', 'If instanceid is specified and grading instance exists and it is created by this rater for this item, this instance is returned. Otherwise new instance is created for the specified rater and itemid ', [['grade/grading/form','lib.php',514],['grade/grading/form/rubric','lib.php',554],['grade/grading/form/guide','lib.php',557]], 3],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'get_feedback_plugins': ['get_feedback_plugins', 'Get list of feedback plugins installed. ', [['mod/assign','locallib.php',292]], 21],
'require_view_grades': ['require_view_grades', 'Throw an error if the permissions to view grades in this assignment are missing. ', [['mod/assign','locallib.php',2785]], 7],
'write_new_file': ['write_new_file', 'Writes out some content to a file in the portfolio temporary working directory associated with this export. ', [['lib/portfolio','exporter.php',784]], 13],
'get_sha1_file': ['get_sha1_file', 'Helper function to calculate the sha1 for multi or single file exports ', [['lib/portfolio','caller.php',150]], 6],
'__construct': ['__construct', '', [['lib/adodb/drivers','adodb-odbc_mssql.inc.php',50],['lib/adodb/drivers','adodb-odbc_mssql.inc.php',359],['question/classes/statistics/responses','analyser.php',69],['auth/radius','auth.php',38],['lib/xmldb','xmldb_file.php',43],['lib/lessphp/Tree/Mixin','Definition.php',18],['cache/stores/static','lib.php',127],['lib/classes/session','file.php',40],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['backup/util/ui','base_moodleform.class.php',68],['lib/simplepie/library/SimplePie','Author.php',81],['lib/filestorage','zip_archive.php',66],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/phpexcel/PHPExcel','HashTable.php',44],['mod/quiz/tests','repaginate_test.php',39],['lib/form','modvisible.php',43],['lib/phpexcel/PHPExcel/Worksheet','Row.php',44],['cache','disabledlib.php',44],['lib/phpexcel/PHPExcel/Worksheet','Dimension.php',58],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['question/type/ddwtos','question.php',61],['mnet/xmlrpc','client.php',25],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes','useragent.php',115],['lib/pear/HTML/QuickForm','advcheckbox.php',66],['lib/classes/update','checker_exception.php',37],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',53],['lib/jabber/XMPP','XMPP.php',101],['lib/form','radio.php',44],['lib/spout/src/Spout/Reader/XLSX/Helper','StyleHelper.php',45],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/phpexcel/PHPExcel/Style','Border.php',67],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['lib/adodb/drivers','adodb-oci8quercus.inc.php',31],['lib/adodb/drivers','adodb-oci8quercus.inc.php',45],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',29],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/phpexcel/PHPExcel','DocumentProperties.php',123],['lib/typo3','class.t3lib_cs.php',509],['mod/workshop/allocation/scheduled','lib.php',48],['lib/adodb/drivers','adodb-netezza.inc.php',53],['lib/adodb/drivers','adodb-netezza.inc.php',144],['mod/feedback/classes','complete_form.php',58],['search/classes','document.php',188],['webservice/rest','locallib.php',40],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',57],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['backup/moodle2','backup_block_task.class.php',43],['lib/lessphp/Tree','Negative.php',14],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/pear/HTML/QuickForm','header.php',33],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','InMemoryStrategy.php',26],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',51],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',60],['lib/spout/src/Spout/Reader/ODS','Sheet.php',33],['question/type/calculated/tests','helper.php',205],['lib/adodb/drivers','adodb-odbtp.inc.php',38],['lib/adodb/drivers','adodb-odbtp.inc.php',673],['lib/adodb/drivers','adodb-odbtp.inc.php',796],['lib/adodb/drivers','adodb-odbtp.inc.php',806],['lib/adodb/drivers','adodb-odbtp.inc.php',816],['lib/adodb/drivers','adodb-odbtp.inc.php',826],['lib/adodb/drivers','adodb-odbtp.inc.php',836],['enrol/lti/ims-blti','blti.php',28],['backup/cc','cc2moodle.php',105],['mod/chat','locallib.php',181],['mod/chat','locallib.php',229],['user/filters','simpleselect.php',45],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',244],['lib/dml','pdo_moodle_database.php',42],['lib/adodb/drivers','adodb-sqlite3.inc.php',36],['lib/adodb/drivers','adodb-sqlite3.inc.php',350],['lib/pear/HTML/QuickForm','static.php',44],['competency/classes/external','comment_area_exporter.php',48],['lib/lessphp/Tree','Selector.php',31],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['auth/fc','fcFPP.php',33],['lib/xmldb','xmldb_key.php',43],['grade/grading/form/rubric','rubriceditor.php',56],['lib/google/src/Google/Service','Cloudlatencytest.php',40],['course','moodleform_mod.php',69],['auth/nntp','auth.php',35],['grade/report/grader','lib.php',111],['admin/tool/generator/classes','course_backend.php',116],['lib/minify/lib','FirePHP.php',189],['lib/adodb/drivers','adodb-sqlitepo.inc.php',38],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',66],['lib/lessphp/Tree','Rule.php',24],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/google/src/Google/Service','DataTransfer.php',44],['lib/google/src/Google/Http','Batch.php',42],['backup/util/structure','base_processor.class.php',49],['admin/tool/lpmigrate/classes','framework_mapper.php',50],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',46],['lib/lessphp/Tree','NameValue.php',22],['mod/quiz/classes','admin_review_setting.php',82],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['mod/quiz/report','attemptsreport_table.php',76],['blocks/lp/classes/output','summary.php',59],['lib/google/src/Google/IO','Stream.php',45],['lib/google/src/Google/Service','Freebase.php',38],['grade/tests','reportlib_test.php',36],['search/classes','manager.php',100],['question/behaviour/adaptive','behaviour.php',310],['admin/tool/lp/classes/form','framework_autocomplete.php',48],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['lib/google/src/Google/Task','Runner.php',76],['backup/util/settings/root','root_backup_setting.class.php',34],['lib','componentlib.class.php',179],['lib','componentlib.class.php',610],['lib','componentlib.class.php',834],['lib/google/src/Google/Service','AdSense.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['lib/spout/src/Spout/Reader/CSV','Sheet.php',24],['lib/filebrowser','file_info_context_system.php',37],['lib/grade','grade_item.php',260],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['auth/email','auth.php',34],['mod/wiki/editors','wikifiletable.php',40],['lib/google/src/Google/Service','Replicapool.php',51],['lib/dtl','database_exporter.php',55],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/phpexcel/PHPExcel/Writer','CSV.php',79],['lib/google/src/Google/Service','Tasks.php',44],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/minify/lib/Minify','Source.php',43],['lib/jabber/XMPP','Roster.php',48],['lib/lessphp/Tree','Element.php',19],['lib/classes','string_manager_install.php',43],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib/form','filemanager.php',54],['lib/form','filemanager.php',316],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['backup/util/ui','renderer.php',813],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',44],['question/classes/statistics/questions','calculator.php',66],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/google/src/Google/Service','Resource.php',62],['lib/form','autocomplete.php',56],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',60],['mod/lesson/classes','file_info.php',45],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['lib/google/src/Google/Service','Partners.php',43],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',635],['grade/edit/tree','lib.php',668],['grade/edit/tree','lib.php',834],['lib/simplepie/library/SimplePie','Cache.php',69],['mod/wiki/diff','difflib.php',277],['mod/wiki/diff','difflib.php',381],['mod/wiki/diff','difflib.php',478],['lib/pear/HTML/QuickForm','select.php',58],['lib/classes/output','mustache_javascript_helper.php',40],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/data','export_form.php',16],['lib/pear/HTML/QuickForm','autocomplete.php',67],['question/type/shortanswer','question.php',44],['lib/google/src/Google/Service','AndroidPublisher.php',52],['lib/google/src/Google/Verifier','Pem.php',31],['lib/classes/antivirus','scanner.php',41],['lib/phpexcel/PHPExcel/Reader','Excel5.php',414],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/classes/output','inplace_editable.php',107],['lib/adodb/drivers','adodb-informix.inc.php',37],['competency/classes','competency_rule.php',45],['lib/phpexcel/PHPExcel','RichText.php',37],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',59],['lib/pear/HTML/QuickForm','input.php',38],['repository/picasa','lib.php',41],['mod/feedback/classes','structure.php',48],['backup/util/plan','backup_structure_step.class.php',38],['question/classes/bank','random_question_loader.php',61],['mod/quiz/report/statistics/classes','calculated.php',43],['lib/horde/framework/Horde/Stream','String.php',27],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['mod/workshop/backup/moodle1','lib.php',308],['lib/google/src/Google/Service','YouTubeReporting.php',47],['grade/export/txt','grade_export_txt.php',27],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['mod/imscp','locallib.php',289],['lib/form','selectyesno.php',42],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['mod/lti/service/profile/classes/local/service','profile.php',41],['repository/flickr_public','lib.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['admin/tool/lp/classes/output','template_cohorts_table.php',53],['lib/simplepie/library','SimplePie.php',611],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/testing/generator','component_generator_base.php',45],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',175],['lib/classes','plugin_manager.php',91],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/xmldb','xmldb_field.php',84],['lib/adodb/drivers','adodb-ibase.inc.php',59],['lib/adodb/drivers','adodb-ibase.inc.php',764],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['admin/roles/classes','view_role_definition_table.php',28],['lib/google/src/Google/Cache','Memcache.php',44],['lib/pear/HTML/QuickForm','radio.php',48],['lib/filebrowser','file_info_context_coursecat.php',39],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',37],['mod/workshop/eval/best','lib.php',44],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',38],['grade/report','lib.php',156],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['availability/classes','info_module.php',40],['mod/book','locallib.php',414],['question/engine','datalib.php',68],['question/engine','datalib.php',1331],['question/engine','datalib.php',1632],['question/engine','datalib.php',1740],['question/engine','datalib.php',1870],['question/engine','datalib.php',1941],['webservice','lib.php',745],['webservice','lib.php',841],['lib/adodb/drivers','adodb-informix72.inc.php',59],['lib/adodb/drivers','adodb-informix72.inc.php',399],['lib/adodb','adodb-pager.inc.php',60],['user/classes/output/myprofile','category.php',68],['lib/lessphp/Visitor','extendFinder.php',15],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib','filelib.php',2720],['lib','filelib.php',3601],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',32],['report/competency/classes/output','report.php',56],['lib/google/src/Google/Service','Computeaccounts.php',49],['question/type','edit_question_form.php',96],['lib/filebrowser','file_info_context_user.php',39],['admin/tool/lp/classes/output','template_plans_page.php',37],['lib/phpexcel/PHPExcel','Style.php',93],['lib/minify/lib/Minify','HTML.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/form','password.php',44],['backup','backup.class.php',146],['mod/feedback/classes','course_select_form.php',39],['lib/google/src/Google/Auth','AppIdentity.php',39],['lib/adodb','adodb-active-record.inc.php',121],['lib/phpexcel/PHPExcel','Chart.php',169],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['admin/roles/classes','allow_switch_page.php',33],['lib/grade','grade_object.php',80],['lib/google/src/Google/IO','Exception.php',29],['auth/lti','auth.php',38],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier','HTMLPurifier.php',104],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',47],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/evalmath','evalmath.class.php',120],['lib/form','url.php',46],['lib/dml','pdo_moodle_recordset.php',41],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['backup/cc/cc_lib','xmlbase.php',52],['badges/lib','bakerlib.php',52],['lib/google/src/Google/Signer','P12.php',35],['availability/classes','info_section.php',40],['lib/form','static.php',47],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['lib/google/src/Google/Service','YouTubeAnalytics.php',56],['admin/roles/classes','check_capability_table.php',40],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/adodb/drivers','adodb-postgres64.inc.php',127],['lib/adodb/drivers','adodb-postgres64.inc.php',919],['backup/util/helper','restore_prechecks_helper.class.php',213],['user/profile','lib.php',59],['lib/google/src/Google/Service','Admin.php',40],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',62],['lib/google/src/Google/Service','MapsEngine.php',66],['lib','listlib.php',82],['lib','listlib.php',485],['lib/phpexcel/PHPExcel/Writer','HTML.php',128],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/simplepie/library/SimplePie','Source.php',61],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/google/src/Google/Cache','File.php',41],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['backup/util/ui','backup_moodleform.class.php',41],['availability/condition/grouping/classes','condition.php',46],['lib/classes/session','memcache.php',50],['cache/classes','dummystore.php',62],['badges/classes','assertion.php',49],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['availability/tests/fixtures','mock_condition.php',52],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['mod/quiz/report','attemptsreport_options.php',95],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',39],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/google/src/Google/Service','Dns.php',53],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['backup/moodle2','restore_block_task.class.php',45],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',54],['lib/form','recaptcha.php',48],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/phpexcel/PHPExcel/Chart','Legend.php',75],['lib/phpexcel/PHPExcel','WorksheetIterator.php',44],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1189],['cache/classes','loaders.php',1586],['lib/google/src/Google/Service','Appengine.php',44],['admin/tool/lp/classes/output','template_cohorts_page.php',37],['search/classes','engine.php',77],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/classes/progress','display.php',48],['lib/lessphp/Tree','Call.php',19],['course/format','lib.php',78],['question/type/calculated','datasetdefinitions_form.php',53],['lib/google/src/Google/Service','Translate.php',40],['enrol/database','settingslib.php',34],['lib/lessphp/Tree/Mixin','Call.php',14],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/tests','collator_test.php',310],['lib/google/src/Google/Auth','Simple.php',31],['backup/cc/cc_lib','cc_manifest.php',45],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['lib/phpmailer','moodle_phpmailer.php',47],['availability/tests/fixtures','mock_info.php',40],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['admin/tool/lp/classes/form','persistent.php',68],['lib/adodb/drivers','adodb-mysqlt.inc.php',32],['lib/adodb/drivers','adodb-mysqlt.inc.php',96],['webservice/tests','lib_test.php',213],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['filter','local_settings_form.php',33],['mod/quiz/accessrule','accessrulebase.php',52],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['mod/assign/feedback/editpdf/fpdi','pdf_parser.php',170],['lib/lessphp/Tree','Dimension.php',15],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/adodb/perf','perf-oci8.inc.php',203],['lib/phpexcel','PHPExcel.php',361],['backup/util/helper','restore_questions_parser_processor.class.php',42],['backup/moodle2','backup_plugin.class.php',44],['lib/classes/antivirus','scanner_exception.php',38],['webservice/xmlrpc','lib.php',43],['report/loglive/classes','renderable.php',73],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['lib/filebrowser','file_info.php',43],['lib/adodb/drivers','adodb-access.inc.php',34],['lib/adodb/drivers','adodb-access.inc.php',83],['mod/feedback/classes','responses_table.php',54],['lib/editor/tinymce','adminlib.php',36],['admin/tool/monitor/classes','rule.php',44],['lib/google/src/Google/Service','AdExchangeBuyer.php',55],['lib/filebrowser','virtual_root_file.php',45],['lib/phpexcel/PHPExcel/RichText','Run.php',35],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/google/src/Google/Service','CivicInfo.php',40],['mod/feedback/classes/output','summary.php',52],['lib/minify/lib/Minify','Build.php',77],['lib/adodb/drivers','adodb-ado_mssql.inc.php',146],['lib/adodb/drivers','adodb-odbc.inc.php',44],['lib/adodb/drivers','adodb-odbc.inc.php',611],['lib','moodlelib.php',9421],['lib','moodlelib.php',9632],['user/selector','lib.php',85],['user/selector','lib.php',674],['admin/tool/lp/classes/output','plan_page.php',49],['repository/dropbox','lib.php',49],['lib/horde/framework/Horde/Mime','Part.php',261],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','CachingStrategyFactory.php',56],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',777],['lib/google/src/Google/Service','Books.php',60],['lib/google/src/Google/Service','Oauth2.php',50],['admin/tool/log/classes/log','store.php',30],['admin/tool/recyclebin/classes','category_bin.php',45],['lib/phpexcel/PHPExcel/Style','Color.php',64],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',69],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['lib/classes/update','checker.php',50],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',243],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/phpexcel/PHPExcel/Chart','Title.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/adodb/drivers','adodb-text.inc.php',93],['lib/adodb/drivers','adodb-text.inc.php',379],['lib/phpexcel/PHPExcel','Calculation.php',2071],['lib/adodb/drivers','adodb-sqlite.inc.php',36],['lib/adodb/drivers','adodb-sqlite.inc.php',367],['lib/google/src/Google/Service','Analytics.php',77],['blocks/lp/classes/output','plans_to_review_page.php',48],['lib/google/src/Google/Service','Coordinate.php',48],['availability/condition/group/classes','condition.php',43],['lib/lessphp/Exception','Chunk.php',19],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['backup/cc/cc_lib','cc_resources.php',102],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['question/classes/statistics/questions','calculated.php',181],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/xmldb','xmldb_structure.php',40],['lib/ddl','sqlite_sql_generator.php',73],['lib/pear/HTML/QuickForm','Renderer.php',31],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['lib/pear/HTML/QuickForm','file.php',54],['lib/minify/lib/Minify/Cache','File.php',9],['lib/pear/HTML/QuickForm','xbutton.php',39],['lib/htmlpurifier','locallib.php',134],['admin/tool/recyclebin/classes','course_bin.php',45],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',174],['backup/util/helper','backup_helper.class.php',381],['lib/form','htmleditor.php',48],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['repository/skydrive','lib.php',42],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',260],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/horde/framework/Horde/Exception','Pear.php',22],['lib/portfolio','exceptions.php',50],['backup/moodle2','restore_plugin.class.php',43],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',177],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/minify/lib/Minify/JS','ClosureCompiler.php',101],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/form','dateselector.php',70],['lib/spout/src/Spout/Common/Helper','EncodingHelper.php',38],['report/competency/classes/output','user_course_navigation.php',51],['lib/adodb/drivers','adodb-postgres7.inc.php',98],['lib/adodb/drivers','adodb-postgres7.inc.php',311],['lib/adodb/drivers','adodb-postgres7.inc.php',342],['lib/lessphp/Tree','Alpha.php',13],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',46],['lib/tcpdf','tcpdf.php',1822],['lib/adodb/drivers','adodb-sybase.inc.php',47],['lib/adodb/drivers','adodb-sybase.inc.php',313],['lib/adodb/drivers','adodb-sybase.inc.php',394],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',44],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',136],['mod/lesson','editpage_form.php',41],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/horde/framework/Horde','Domhtml.php',53],['lib','formslib.php',142],['lib','formslib.php',1442],['lib','formslib.php',2653],['rating','lib.php',114],['rating','lib.php',1070],['lib/phpexcel/PHPExcel/Worksheet','Column.php',44],['lib/google/src/Google/Service','Script.php',67],['lib/adodb','adodb-xmlschema.inc.php',118],['lib/adodb','adodb-xmlschema.inc.php',245],['lib/adodb','adodb-xmlschema.inc.php',637],['lib/adodb','adodb-xmlschema.inc.php',781],['lib/adodb','adodb-xmlschema.inc.php',982],['lib/adodb','adodb-xmlschema.inc.php',1295],['lib/google/src/Google/Service','DeploymentManager.php',54],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',546],['mod/quiz','attemptlib.php',2337],['mod/quiz','attemptlib.php',2392],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib','boxlib.php',264],['lib/simplepie/library/SimplePie','Restriction.php',81],['admin/roles/classes','allow_assign_page.php',31],['lib/adodb/drivers','adodb-pdo.inc.php',90],['lib/adodb/drivers','adodb-pdo.inc.php',553],['lib/adodb/drivers','adodb-pdo.inc.php',630],['tag/classes/output','tagareacollection.php',40],['admin/tool/lp/classes','template_statistics.php',62],['lib','weblib.php',313],['lib','weblib.php',3183],['lib','weblib.php',3483],['lib','weblib.php',3518],['lib','weblib.php',3593],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/html2text','Html2Text.php',232],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/pear/HTML/QuickForm/Renderer','Array.php',143],['question/engine','lib.php',774],['question/engine','lib.php',1011],['question/engine','lib.php',1059],['lib/jabber/XMPP','XMLObj.php',76],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/editor/atto','adminlib.php',109],['lib/pear/HTML/QuickForm/Renderer','Tableless.php',116],['grade/report/history/classes/output','tablelog.php',72],['lib/google/src/Google/IO','Curl.php',38],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',31],['lib/pear/HTML/QuickForm','hiddenselect.php',41],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['lib/adodb/drivers','adodb-mysqlpo.inc.php',35],['lib/adodb/drivers','adodb-mysqlpo.inc.php',82],['lib/adodb/drivers','adodb-mysqlpo.inc.php',119],['lib/google/src/Google/Service','Blogger.php',50],['backup/util/xml/output','file_xml_output.class.php',37],['lib/form','tags.php',75],['admin/tool/installaddon/classes','installer.php',219],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['lib/simplepie/library/SimplePie','IRI.php',252],['comment','locallib.php',39],['question/engine','states.php',61],['lib/spout/src/Spout/Reader/XLSX/Helper','CellValueFormatter.php',52],['lib/google/src/Google/Service','Dataflow.php',45],['mod/data','locallib.php',66],['mod/data','locallib.php',433],['lib/horde/framework/Horde','Variables.php',60],['backup/util/ui','base_ui.class.php',84],['lib/simplepie/library/SimplePie','Registry.php',99],['cache/locks/file','lib.php',66],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/filebrowser','file_info_stored.php',51],['tag/classes/output','tagcollname.php',42],['competency/classes','persistent.php',54],['admin/tool/lp/classes/output','competency_plan_navigation.php',54],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',146],['lib/pear/HTML/QuickForm','textarea.php',48],['lib/lessphp','Visitor.php',14],['lib/google/src/Google/Service','CloudUserAccounts.php',52],['question/classes/bank','column_base.php',44],['lib/minify/lib/MrClay','Cli.php',74],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',589],['lib','outputcomponents.php',665],['lib','outputcomponents.php',783],['lib','outputcomponents.php',925],['lib','outputcomponents.php',1009],['lib','outputcomponents.php',2183],['lib','outputcomponents.php',2222],['lib','outputcomponents.php',2295],['lib','outputcomponents.php',2376],['lib','outputcomponents.php',2579],['lib','outputcomponents.php',2627],['lib','outputcomponents.php',2687],['lib','outputcomponents.php',2860],['lib','outputcomponents.php',3030],['lib','outputcomponents.php',3134],['lib','outputcomponents.php',3201],['lib','outputcomponents.php',3329],['lib','outputcomponents.php',3613],['lib','outputcomponents.php',3642],['lib','outputcomponents.php',3668],['lib','outputcomponents.php',3690],['lib','outputcomponents.php',3719],['lib','outputcomponents.php',3751],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/phpexcel/PHPExcel','Cell.php',114],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['repository/wikimedia','wikimedia.php',35],['lib/phpexcel/PHPExcel/Style','Fill.php',81],['lib/google/src/Google/Service','Cloudresourcemanager.php',42],['lib/editor/tinymce/classes','plugin.php',49],['mod/wiki/parser/markups','html.php',21],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/horde/framework/Horde/Support','Inflector.php',115],['question/type/gapselect','question.php',55],['lib/google/src/Google','Config.php',33],['badges/criteria','award_criteria_activity.php',45],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['course/format/topics','renderer.php',38],['lib/adodb/drivers','adodb-oci8po.inc.php',33],['lib/adodb/drivers','adodb-oci8po.inc.php',99],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/filestorage','tgz_packer.php',749],['lib/filestorage','tgz_packer.php',831],['tag/classes','index_builder.php',96],['lib/pear/HTML/QuickForm','reset.php',37],['lib/classes/lock','lock.php',55],['admin/roles/classes','assign_user_selector_base.php',40],['backup/util/output','output_controller.class.php',44],['question/type/randomsamatch','question.php',114],['lib/google/src/Google/Service','Customsearch.php',38],['lib/lessphp/Tree','Extend.php',28],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',215],['lib/google/src/Google/Service','TagManager.php',67],['question/type/gapselect/tests','edit_form_test.php',41],['mod/lesson','locallib.php',2004],['mod/lesson','locallib.php',2611],['backup/util/helper','restore_structure_parser_processor.class.php',41],['course','renderer.php',52],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib','modinfolib.php',429],['lib','modinfolib.php',1665],['lib','modinfolib.php',2492],['lib','tablelib.php',128],['lib','tablelib.php',1468],['lib','tablelib.php',1633],['lib','tablelib.php',1698],['user/filters','cohort.php',36],['user/filters','text.php',37],['lib','outputrenderers.php',120],['lib','outputrenderers.php',285],['lib','outputrenderers.php',408],['lib','outputrenderers.php',4578],['lib','outputrenderers.php',4831],['repository','lib.php',116],['repository','lib.php',533],['lib','adminlib.php',791],['lib','adminlib.php',1138],['lib','adminlib.php',1212],['lib','adminlib.php',1355],['lib','adminlib.php',1556],['lib','adminlib.php',1928],['lib','adminlib.php',2040],['lib','adminlib.php',2106],['lib','adminlib.php',2199],['lib','adminlib.php',2260],['lib','adminlib.php',2302],['lib','adminlib.php',2341],['lib','adminlib.php',2429],['lib','adminlib.php',2463],['lib','adminlib.php',2621],['lib','adminlib.php',2706],['lib','adminlib.php',2935],['lib','adminlib.php',3091],['lib','adminlib.php',3233],['lib','adminlib.php',3324],['lib','adminlib.php',3488],['lib','adminlib.php',3571],['lib','adminlib.php',3682],['lib','adminlib.php',3833],['lib','adminlib.php',4067],['lib','adminlib.php',4134],['lib','adminlib.php',4352],['lib','adminlib.php',4381],['lib','adminlib.php',4410],['lib','adminlib.php',4434],['lib','adminlib.php',4464],['lib','adminlib.php',4500],['lib','adminlib.php',4535],['lib','adminlib.php',4567],['lib','adminlib.php',4657],['lib','adminlib.php',4690],['lib','adminlib.php',4748],['lib','adminlib.php',4790],['lib','adminlib.php',4814],['lib','adminlib.php',4840],['lib','adminlib.php',4863],['lib','adminlib.php',4880],['lib','adminlib.php',4925],['lib','adminlib.php',4943],['lib','adminlib.php',5002],['lib','adminlib.php',5045],['lib','adminlib.php',5080],['lib','adminlib.php',5123],['lib','adminlib.php',5206],['lib','adminlib.php',5336],['lib','adminlib.php',5378],['lib','adminlib.php',5423],['lib','adminlib.php',5480],['lib','adminlib.php',5496],['lib','adminlib.php',5552],['lib','adminlib.php',5777],['lib','adminlib.php',5831],['lib','adminlib.php',5885],['lib','adminlib.php',5902],['lib','adminlib.php',5950],['lib','adminlib.php',5992],['lib','adminlib.php',6043],['lib','adminlib.php',6099],['lib','adminlib.php',6328],['lib','adminlib.php',6508],['lib','adminlib.php',6688],['lib','adminlib.php',6782],['lib','adminlib.php',6931],['lib','adminlib.php',7088],['lib','adminlib.php',7712],['lib','adminlib.php',8147],['lib','adminlib.php',8330],['lib','adminlib.php',8617],['lib','adminlib.php',8764],['lib','adminlib.php',8924],['lib','adminlib.php',9071],['lib','adminlib.php',9235],['lib','adminlib.php',9428],['lib','adminlib.php',9482],['lib','adminlib.php',9544],['lib','adminlib.php',9589],['lib','adminlib.php',9626],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',81],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['question/type/numerical','questiontype.php',507],['auth/mnet','auth.php',35],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['auth/imap','auth.php',35],['tag/classes/output','taglist.php',54],['lib','pdflib.php',161],['lib/phpexcel/PHPExcel/RichText','TextElement.php',35],['lib/dml','database_column_info.php',112],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['mod/wiki/editors','wikieditor.php',36],['lib/lessphp/SourceMap','Base64VLQ.php',67],['repository/s3','lib.php',44],['admin/tool/uploadcourse/classes','course.php',111],['lib/google/src/Google/Service','Replicapoolupdater.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',102],['mod/feedback/item','feedback_item_class.php',28],['lib/adodb/drivers','adodb-mssql_n.inc.php',245],['lib','badgeslib.php',133],['lib/pear/HTML/QuickForm','text.php',38],['lib/simplepie/library/SimplePie','Enclosure.php',219],['calendar/classes','rrule_manager.php',182],['auth/webservice','auth.php',35],['lib','outputrequirementslib.php',171],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib','questionlib.php',1261],['lib','questionlib.php',1505],['lib','uploadlib.php',40],['lib/spout/src/Spout/Writer/Common/Helper','ZipHelper.php',28],['lib/google/src/Google/Service','Cloudsearch.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/spout/src/Spout/Writer/Common','Sheet.php',39],['question/behaviour','behaviourbase.php',50],['blocks/rss_client/classes/output','footer.php',47],['lib/dtl','file_xml_database_importer.php',34],['admin/roles/classes','capability_table_with_risks.php',45],['lib/adodb/drivers','adodb-mssql.inc.php',110],['lib/adodb/drivers','adodb-mssql.inc.php',870],['lib/adodb/drivers','adodb-mssql.inc.php',1077],['lib/google/src/Google/Service','Bigquery.php',62],['lib/google/src/Google/Service','ShoppingContent.php',50],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['repository/equella','lib.php',42],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',199],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['cache/classes','helper.php',90],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/classes','chart_series.php',62],['lib/classes/dml','recordset_walk.php',64],['lib/google/src/Google/Service','Webmasters.php',47],['lib/tcpdf/include/barcodes','qrcode.php',631],['backup/moodle2','backup_settingslib.php',42],['backup/moodle2','backup_settingslib.php',138],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',40],['course/tests/fixtures','course_capability_assignment.php',60],['mod/forum/classes','subscriber_selector_base.php',53],['lib','blocklib.php',54],['lib','blocklib.php',152],['report/loglive/classes','table_log.php',50],['lib','navigationlib.php',147],['lib','navigationlib.php',1015],['lib','navigationlib.php',2825],['lib','navigationlib.php',3086],['lib','navigationlib.php',3412],['lib','navigationlib.php',3459],['lib','navigationlib.php',4888],['lib','navigationlib.php',5070],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',41],['grade/report/history/classes/output','user_button.php',40],['user/filters','courserole.php',34],['lib/phpexcel/PHPExcel','IOFactory.php',69],['lib/lessphp/Tree','Color.php',15],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',70],['lib/adodb/drivers','adodb-vfp.inc.php',72],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/google/src/Google/Service','Clouddebugger.php',50],['lib/horde/framework/Horde/Exception','NotFound.php',15],['admin/tool/lp/classes/output','user_competency_course_navigation.php',55],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib','mathslib.php',45],['lib/filestorage','tgz_extractor.php',119],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['filter/emoticon/tests','filter_test.php',68],['mnet/xmlrpc','xmlparser.php',15],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',31],['admin/roles/classes','capability_table_base.php',51],['lib/simplepie/library/SimplePie','Item.php',82],['lib/form','selectgroups.php',57],['auth/shibboleth','auth.php',38],['admin/tool/langimport/classes','controller.php',48],['lib/form','warning.php',49],['lib/filestorage','stored_file.php',63],['grade/grading/form/guide','guideeditor.php',49],['lib/pear/HTML/QuickForm','group.php',80],['backup/moodle2','restore_subplugin.class.php',45],['grade/export','lib.php',60],['grade/export','lib.php',625],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',98],['backup/moodle2','backup_section_task.class.php',40],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib','flickrlib.php',53],['mod/assign/classes/output','grading_app.php',59],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['user/profile/field/menu','field.class.php',39],['lib/spout/src/Spout/Writer/Common/Internal','AbstractWorkbook.php',30],['lib/portfolio','exporter.php',113],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/horde/framework/Horde','Secret.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/classes/update','info.php',48],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/lessphp/Tree','Anonymous.php',21],['admin/tool/lp/classes','course_competencies_form_element.php',43],['lib/lessphp/Tree','Comment.php',17],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/adodb/drivers','adodb-mysql.inc.php',54],['lib/adodb/drivers','adodb-mysql.inc.php',717],['lib/adodb/drivers','adodb-mysql.inc.php',880],['enrol/ldap','lib.php',43],['mod/quiz/report/statistics','statistics_table.php',45],['lib/form','listing.php',68],['lib/google/src/Google/Service','Container.php',43],['mod/quiz','accessmanager.php',45],['lib/classes/message/inbound','processing_failed_exception.php',36],['blocks/online_users/classes','fetcher.php',45],['lib/pear/HTML/QuickForm','checkbox.php',48],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['lib/classes','chart_axis.php',65],['mod/glossary/classes','entry_query_builder.php',83],['mod/feedback/item/label','lib.php',26],['lib/adodb/drivers','adodb-mssqlnative.inc.php',131],['lib/adodb/drivers','adodb-mssqlnative.inc.php',847],['lib/adodb/drivers','adodb-mssqlnative.inc.php',1099],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['lib/form','editor.php',62],['lib','environmentlib.php',1258],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['mod/feedback/classes','templates_table.php',39],['tag/classes','manage_table.php',44],['lib/adodb/drivers','adodb-odbc_db2.inc.php',115],['lib/adodb/drivers','adodb-odbc_db2.inc.php',309],['backup/cc/cc_lib/gral_lib','cssparser.php',21],['lib/horde/framework/Horde/Support','Array.php',21],['lib/google/src/Google/Service','GroupsMigration.php',40],['admin/tool/lp/classes/output','user_evidence_list_page.php',61],['lib/google/src/Google/Service','Audit.php',39],['lib/simplepie/library/SimplePie','File.php',68],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['enrol/lti/classes','manage_table.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['question/type/ddimageortext','question.php',64],['question/type/ddimageortext','question.php',122],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',456],['lib/minify/lib','CSSmin.php',43],['lib/dml','moodle_temptables.php',51],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['blocks/rss_client/classes/output','block.php',47],['question/type/ddmarker','question.php',417],['question/type/ddmarker','question.php',469],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',51],['backup/util/helper','convert_helper.class.php',378],['lib/classes/update','validator.php',265],['lib/lessphp/Tree','Attribute.php',16],['admin/tool/generator/classes','backend.php',84],['backup/util/loggers','file_logger.class.php',35],['lib/adodb','adodb-exceptions.inc.php',30],['lib/google/src/Google','Client.php',70],['user/filters','profilefield.php',36],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['cache/tests/fixtures','lib.php',326],['mod/lti/service/profile/classes/local/resource','profile.php',43],['competency/classes','invalid_persistent_exception.php',38],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',63],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/dml','moodle_database.php',139],['search/classes','base.php',69],['admin/tool/lp/classes/output','competency_summary.php',54],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['mod/workshop/form/rubric','lib.php',105],['grade','lib.php',103],['grade','lib.php',927],['grade','lib.php',1089],['grade','lib.php',2053],['grade','lib.php',2213],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',35],['lib/google/src/Google/Service','Datastore.php',46],['admin/tool/lpmigrate/classes','framework_processor.php',98],['lib/dtl','database_importer.php',61],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['badges/lib','awardlib.php',55],['backup/util/helper','backup_array_iterator.class.php',39],['admin/tool/monitor/classes','subscription.php',43],['question/type/calculated','edit_calculated_form.php',51],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','FileBasedStrategy.php',57],['lib/form','datetimeselector.php',72],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['lib/classes','collator.php',58],['admin/tool/lp/classes','course_competency_statistics.php',48],['lib/google/src/Google/Service','Storage.php',57],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',28],['lib/lessphp/Tree','Paren.php',14],['mod/lti/classes','service_exception_handler.php',63],['lib/tcpdf/include/barcodes','pdf417.php',523],['mod/assign/feedback/offline','importgradeslib.php',66],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['question/engine/upgrade','upgradelib.php',283],['question/engine/upgrade','upgradelib.php',384],['question/type/numerical','question.php',323],['lib/pear/PEAR','Exception.php',107],['course/format','renderer.php',44],['lib/dml','oci_native_moodle_recordset.php',34],['question/behaviour','behaviourtypebase.php',133],['lib/pear/HTML','QuickForm.php',246],['lib/pear/HTML','QuickForm.php',1979],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['lib/google/src/Google/Auth','LoginTicket.php',37],['lib/adodb/drivers','adodb-csv.inc.php',41],['lib/adodb/drivers','adodb-csv.inc.php',196],['user/filters','yesno.php',33],['mod/wiki/parser','parser.php',98],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',87],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['admin/tool/lpmigrate/classes/form','migrate_framework.php',45],['backup/util/xml/parser/tests','parser_test.php',797],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['lib/tests','medialib_test.php',644],['lib/google/src/Google/Service','QPXExpress.php',39],['tag/classes/output','tagname.php',41],['lib/mustache/src/Mustache','Context.php',20],['lib/adodb/drivers','adodb-oracle.inc.php',32],['lib/adodb/drivers','adodb-oracle.inc.php',224],['backup/moodle2','restore_section_task.class.php',42],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['mod/forum/classes/output','forum_post.php',110],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['repository/googledocs','lib.php',65],['cache/stores/memcache','lib.php',120],['lib/filestorage','file_storage.php',78],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['lib/form','duration.php',55],['lib','outputlib.php',480],['lib','outputlib.php',2038],['filter/tex','latex.php',13],['backup/moodle2','backup_course_task.class.php',39],['lib/adodb','adodb.inc.php',310],['lib/adodb','adodb.inc.php',3035],['lib/adodb','adodb.inc.php',3160],['lib/adodb','adodb.inc.php',3242],['lib/adodb','adodb.inc.php',4353],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/google/src/Google/Logger','File.php',51],['admin/roles/classes','allow_role_page.php',37],['mod/quiz/report/overview','overview_table.php',41],['lib/lessphp/Tree','Keyword.php',17],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['question/type/ddmarker','questiontype.php',48],['mod/folder','renderer.php',159],['lib','portfoliolib.php',101],['tag/classes/output','tagcollsearchable.php',40],['webservice/soap/classes','wsdl.php',88],['lib/lessphp/Exception','Parser.php',30],['badges','renderer.php',973],['badges','renderer.php',1014],['badges','renderer.php',1078],['badges','renderer.php',1111],['badges','renderer.php',1137],['competency/classes/external','exporter.php',56],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['lib/google/src/Google/Service','Genomics.php',63],['lib/phpexcel/PHPExcel/Writer','PDF.php',38],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',125],['lib/google/src/Google/Service','Games.php',60],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',141],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/google/src/Google/Service','Licensing.php',40],['mod/workshop/form/comments','lib.php',99],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['lib/google/src/Google/Service','Fitness.php',58],['blocks/private_files','renderer.php',83],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',51],['enrol/flatfile','adminlib.php',35],['lib/xmldb','xmldb_object.php',55],['lib/google/src/Google/Service','Reports.php',47],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['auth/pam','auth.php',53],['lib/horde/framework/Horde','Stream.php',50],['comment','lib.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',53],['lib/google/src/Google/Service','Gmail.php',64],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/horde/framework/Horde/Mime','Related.php',32],['blocks','moodleblock.class.php',111],['lib/tcpdf','tcpdf_parser.php',92],['backup/util/plan','restore_structure_step.class.php',46],['blocks/rss_client/classes/output','channel_image.php',61],['lib/pear/HTML/QuickForm','hierselect.php',105],['question/type/numerical/tests','form_test.php',40],['badges/lib','backpacklib.php',40],['mod/workshop/allocation/manual','lib.php',51],['mod/quiz/report/responses','last_responses_table.php',39],['lib/simplepie','autoloader.php',62],['lib/spout/src/Spout/Common/Helper','StringHelper.php',21],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',121],['lib/pear/Crypt','CHAP.php',82],['lib/pear/Crypt','CHAP.php',170],['lib/pear/Crypt','CHAP.php',424],['lib/spout/src/Spout/Writer/Common/Helper','AbstractStyleHelper.php',22],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',63],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',77],['lib/simplepie/library/SimplePie','gzdecode.php',186],['mod/wiki','renderer.php',540],['lib/adodb','adodb-active-recordx.inc.php',138],['availability/classes','result.php',46],['lib','accesslib.php',5352],['lib','accesslib.php',5897],['lib','accesslib.php',6167],['lib','accesslib.php',6408],['lib','accesslib.php',6595],['lib','accesslib.php',6827],['lib','accesslib.php',7049],['lib','accesslib.php',7291],['lib/phpexcel/PHPExcel/Shared/OLE','PPS.php',110],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['auth/manual','auth.php',46],['question/engine/upgrade','behaviourconverters.php',78],['mod/wiki/diff','diff_nwiki.php',35],['mod/wiki/diff','diff_nwiki.php',50],['mod/wiki/diff','diff_nwiki.php',63],['mod/wiki/diff','diff_nwiki.php',76],['mod/wiki/diff','diff_nwiki.php',495],['mod/wiki/diff','diff_nwiki.php',640],['mod/wiki/diff','diff_nwiki.php',850],['mod/wiki/diff','diff_nwiki.php',901],['mod/wiki/diff','diff_nwiki.php',953],['lib/adodb/drivers','adodb-proxy.inc.php',28],['lib/classes/lock','file_lock_factory.php',57],['lib/google/src/Google/Auth','OAuth2.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['lib/filebrowser','file_info_context_module.php',47],['auth/none','auth.php',34],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/horde/framework/Horde/Text','Flowed.php',75],['admin/tool/log/store/legacy/classes/log','store.php',33],['lib/mustache/src/Mustache','HelperCollection.php',19],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['admin/tool/lp/classes/output','related_competencies.php',47],['mod/quiz/classes/question/bank','custom_view.php',44],['files','renderer.php',1083],['lib/form','text.php',47],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',398],['backup/cc','cc112moodle.php',59],['admin/tool/cohortroles/classes/output','cohort_role_assignments_table.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/google/src/Google/Service','Logging.php',39],['lib/lessphp/Tree','Expression.php',16],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/phpexcel/PHPExcel/Reader','HTML.php',118],['search/engine/solr/classes','schema.php',60],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['lib/adodb/drivers','adodb-ado5.inc.php',42],['lib/adodb/drivers','adodb-ado5.inc.php',380],['mod/assign/feedback/editpdf/classes','comment.php',58],['cache/classes','interfaces.php',473],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['repository/merlot','lib.php',37],['lib/adodb/drivers','adodb-firebird.inc.php',69],['backup/util/settings','backup_setting.class.php',43],['lib/adodb/drivers','adodb-fbsql.inc.php',28],['lib/adodb/drivers','adodb-fbsql.inc.php',167],['mnet/xmlrpc','serverlib.php',674],['webservice/soap','lib.php',45],['admin/tool/log/store/database/classes/log','store.php',47],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/form','passwordunmask.php',46],['lib/lessphp/Tree','Variable.php',20],['report/log/classes','renderable.php',96],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['question/classes/bank','view.php',70],['grade/report/singleview/classes/local/ui','range.php',38],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['admin/roles/classes','define_role_table_basic.php',31],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['blocks/rss_client','editfeed.php',36],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',55],['blocks/lp/classes/output','competencies_to_review_page.php',49],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',187],['mod/assign/feedback/file','renderable.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/adodb/drivers','adodb-db2.inc.php',66],['lib/adodb/drivers','adodb-db2.inc.php',731],['lib/adodb','adodb-xmlschema03.inc.php',136],['lib/adodb','adodb-xmlschema03.inc.php',270],['lib/adodb','adodb-xmlschema03.inc.php',678],['lib/adodb','adodb-xmlschema03.inc.php',823],['lib/adodb','adodb-xmlschema03.inc.php',1081],['lib/adodb','adodb-xmlschema03.inc.php',1399],['repository/youtube','lib.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',38],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/adodb/drivers','adodb-sybase_ase.inc.php',25],['lib/adodb/drivers','adodb-sybase_ase.inc.php',115],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/adodb','adodb-memcache.lib.inc.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',118],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',117],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['lib/spout/src/Spout/Common/Helper','FileSystemHelper.php',22],['lib/pear/HTML/QuickForm','button.php',37],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/mustache/src/Mustache','Engine.php',63],['lib/google/src/Google/Http','MediaFileUpload.php',75],['lib/phpexcel/PHPExcel','Worksheet.php',327],['mod/assign','gradingtable.php',68],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1196],['repository/webdav','lib.php',38],['tag/classes/output','tagisstandard.php',39],['lib/google/src/Google/Service','Appsactivity.php',52],['badges/criteria','award_criteria_course.php',47],['lib','searchlib.php',53],['lib','searchlib.php',95],['lib/lessphp/Output','Mapped.php',39],['availability/classes','tree.php',118],['lib/lessphp/Tree','Javascript.php',20],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/mustache/src/Mustache/Loader','InlineLoader.php',56],['repository/url','lib.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',293],['lib/lessphp/Tree','Ruleset.php',45],['tag/classes/output','tagindex.php',52],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/google/src/Google/Service','Prediction.php',51],['lib/classes/output','notification.php',101],['lib/lessphp/Tree','Unit.php',16],['backup/util/settings/course','course_backup_setting.class.php',25],['lib/spout/src/Spout/Writer','AbstractWriter.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib','dtllib.php',66],['mod/assign','assignmentplugin.php',50],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['backup/cc/cc_lib','cc_version11.php',57],['availability/condition/completion/classes','condition.php',48],['admin/roles/classes','allow_override_page.php',31],['mod/workshop/allocation','lib.php',103],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',23],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/phpexcel/PHPExcel/Calculation','Function.php',64],['availability/classes','capability_checker.php',49],['lib/google/src/Google/Service','Drive.php',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',56],['lib','setuplib.php',67],['lib','setuplib.php',113],['lib','setuplib.php',165],['lib','setuplib.php',184],['lib','setuplib.php',199],['lib','setuplib.php',219],['lib','setuplib.php',249],['lib','setuplib.php',271],['lib','setuplib.php',287],['lib','setuplib.php',309],['lib','setuplib.php',328],['lib','setuplib.php',346],['lib/form','textarea.php',50],['webservice/soap','locallib.php',57],['availability/classes','info.php',55],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/spout/src/Spout/Reader/XLSX/Helper','SheetHelper.php',49],['filter/urltolink/tests','filter_test.php',209],['lib/simplepie/library/SimplePie','Category.php',81],['admin/tool/lp/classes/output','manage_competencies_page.php',65],['lib/markdown','Markdown.php',99],['mod/assign','locallib.php',160],['mod/assign','locallib.php',8131],['lib/adodb/drivers','adodb-ldap.inc.php',48],['lib/adodb/drivers','adodb-ldap.inc.php',297],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',32],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',373],['lib','odslib.class.php',42],['lib','odslib.class.php',124],['lib','odslib.class.php',422],['lib','odslib.class.php',827],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',36],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/lessphp/Tree','Quoted.php',20],['mod/lesson','mod_form.php',36],['blocks/rss_client/classes/output','item.php',89],['lib/google/src/Google/Service','IdentityToolkit.php',38],['lib/horde/framework/Horde/Stream','Temp.php',25],['tag/classes/output','tagflag.php',39],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['lib/behat/form_field','behat_form_field.php',59],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',93],['lib/spout/src/Spout/Reader/ODS/Helper','CellValueFormatter.php',42],['tag/classes','collections_table.php',36],['lib/google/src/Google/Service','Spectrum.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['admin/tool/lp/classes/output','user_competency_summary.php',49],['lib/phpexcel/PHPExcel','NamedRange.php',65],['lib/pear/HTML/QuickForm','image.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['lib/form','searchableselector.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',52],['lib/adodb/drivers','adodb-oci805.inc.php',51],['lib/google/src/Google','Service.php',28],['lib/google/src/Google/IO','Abstract.php',50],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',46],['lib/form','header.php',45],['question/type/randomsamatch/tests','helper.php',121],['mod/workshop/form/accumulative','lib.php',99],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',89],['lib/form','submit.php',41],['report/log/classes','table_log.php',45],['admin/roles/classes','admins_potential_selector.php',30],['question/classes/engine/variants','least_used_strategy.php',51],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['mod/data','lib.php',68],['mod/data','lib.php',2278],['mod/data','lib.php',2552],['mod/data','lib.php',2573],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['mod/scorm','renderer.php',129],['lib/phpunit/classes','advanced_testcase.php',45],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',41],['backup/cc/cc_lib','cc_version1.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['tag/classes','areas_table.php',36],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',125],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/google/src/Google/Service','Proximitybeacon.php',42],['lib/pear','PEAR.php',139],['lib/pear','PEAR.php',818],['competency/classes/external','persistent_exporter.php',42],['lib/google/src/Google/Service','Groupssettings.php',40],['lib/phpexcel/PHPExcel/Reader','CSV.php',87],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/google/src/Google/Service','Directory.php',134],['lib/google/src/Google/Service','Fusiontables.php',48],['question/type/missingtype','edit_missingtype_form.php',38],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/lessphp/Tree','Directive.php',20],['auth/ldap','auth.php',119],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',245],['availability/condition/date/classes','condition.php',52],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes','string_manager_standard.php',53],['repository/skydrive','microsoftliveapi.php',50],['user/filters','globalrole.php',35],['enrol/lti/ims-blti','OAuth.php',16],['enrol/lti/ims-blti','OAuth.php',32],['enrol/lti/ims-blti','OAuth.php',187],['enrol/lti/ims-blti','OAuth.php',451],['course/classes/output','course_module_name.php',46],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Mime','Mdn.php',35],['lib/pear/HTML/QuickForm','html.php',36],['repository/s3','S3.php',193],['repository/s3','S3.php',2018],['repository/s3','S3.php',2374],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',39],['question/classes/bank/search','hidden_condition.php',42],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/pear/HTML/QuickForm','element.php',73],['question/classes/statistics/responses','analysis_for_subpart.php',50],['admin/tool/log/classes','setting_managestores.php',30],['lib/google/src/Google/Service','Mirror.php',49],['lib/adodb/drivers','adodb-db2ora.inc.php',80],['lib/minify/lib/HTTP','Encoder.php',75],['mod/feedback/classes','completion.php',47],['admin/tool/uploadcourse/classes','processor.php',122],['lib/lessphp','Parser.php',78],['lib/adodb/drivers','adodb-sapdb.inc.php',36],['lib/adodb/drivers','adodb-sapdb.inc.php',179],['lib/ddl','sql_generator.php',175],['lib/google/src/Google/Service','AndroidEnterprise.php',51],['admin/tool/lp/classes/output','template_competencies_page.php',70],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['mod/assignment/backup/moodle1','lib.php',223],['blocks','edit_form.php',47],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['mod/quiz/report/statistics','statistics_question_table.php',49],['mod/workshop/form/numerrors','lib.php',102],['mod/quiz/classes','repaginate.php',49],['lib/classes/session','memcached.php',51],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',43],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',206],['mod/workshop','mod_form.php',43],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',48],['availability/condition/profile/classes','condition.php',73],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['auth/cas/CAS/CAS','Client.php',862],['lib/xhprof','xhprof_moodle.php',788],['lib/dtl','file_xml_database_exporter.php',36],['course','lib.php',3061],['lib/adodb/drivers','adodb-mssqlpo.inc.php',54],['lib/xmldb','xmldb_table.php',49],['lib/adodb/perf','perf-postgres.inc.php',92],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['question/type/ddmarker','shapes.php',40],['question/type/ddmarker','shapes.php',203],['question/type/ddmarker','shapes.php',267],['question/type/ddmarker','shapes.php',332],['question/type/ddmarker','shapes.php',470],['mod/lti/classes/local/ltiservice','response.php',58],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/pear/HTML','Common.php',79],['mod/glossary','locallib.php',481],['lib/adodb/perf','perf-mssqlnative.inc.php',70],['lib/adodb/perf','perf-mssql.inc.php',70],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['lib/classes/event','base.php',124],['lib/form','checkbox.php',46],['admin/roles/classes','permissions_table.php',38],['lib/pear/HTML/QuickForm','submit.php',37],['auth/fc','auth.php',37],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/minify/lib/Minify/Cache','Memcache.php',22],['lib/lessphp/Tree','Condition.php',18],['admin/tool/lp/classes/output','plans_page.php',59],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',52],['lib/phpexcel/PHPExcel','Comment.php',93],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/lessphp/Tree','Url.php',17],['mod/lesson','override_form.php',58],['lib/form','button.php',45],['admin/tool/lp/classes/output','manage_templates_page.php',56],['lib/google/src/Google/Service','Playmoviespartner.php',44],['backup/util/ui','base_ui_stage.class.php',67],['backup/cc/cc_lib','cc_converters.php',75],['lib/dtl','database_mover.php',33],['enrol','locallib.php',125],['enrol','locallib.php',1256],['enrol','locallib.php',1379],['enrol','locallib.php',1430],['enrol','locallib.php',1463],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['backup/moodle2','restore_course_task.class.php',41],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib','xmlize.php',31],['lib','googleapi.php',52],['lib','googleapi.php',243],['grade/report/singleview/classes/local/ui','element.php',47],['lib/html2text','lib.php',43],['user/filters','lib.php',52],['user/filters','lib.php',272],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/classes/lock','db_record_lock_factory.php',61],['lib/pear/HTML/QuickForm','link.php',47],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['lib/phpunit/classes','hint_resultprinter.php',37],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['auth/pop3','auth.php',35],['lib/adodb/drivers','adodb-oci8.inc.php',106],['lib/adodb/drivers','adodb-oci8.inc.php',1539],['lib/adodb/drivers','adodb-oci8.inc.php',1805],['lib/classes/session','database.php',52],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['question/classes/bank/search','category_condition.php',60],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',63],['lib/jabber/XMPP','Log.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/lessphp/Tree','Assignment.php',15],['lib/dtl','string_xml_database_importer.php',34],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',62],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['repository/recent','lib.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['admin/webservice','lib.php',38],['lib','coursecatlib.php',194],['lib','coursecatlib.php',2782],['lib/google/src/Google/Service','Cloudtrace.php',43],['lib','filterlib.php',73],['lib','filterlib.php',377],['lib','filterlib.php',456],['lib/classes/lock','lock_factory.php',39],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['enrol','renderer.php',426],['enrol','renderer.php',723],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['admin/tool/lp/classes','course_competency_rule_form_element.php',45],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/phpunit/classes','basic_testcase.php',39],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',49],['backup/util/dbops','backup_dbops.class.php',37],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/structure','backup_optigroup_element.class.php',51],['mod/quiz/report/grading','gradingsettings_form.php',44],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/form','hidden.php',44],['repository/filesystem','lib.php',48],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',409],['backup/util/helper','restore_log_rule.class.php',62],['tag/classes','tag.php',77],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/spout/src/Spout/Writer/Style','StyleBuilder.php',19],['lib/dml','sqlsrv_native_moodle_database.php',53],['user/filters','date.php',40],['auth/nologin','auth.php',35],['lib/google/src/Google','Model.php',35],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/adodb/drivers','adodb-mysqli.inc.php',66],['lib/adodb/drivers','adodb-mysqli.inc.php',887],['lib/adodb/drivers','adodb-mysqli.inc.php',1193],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/form','questioncategory.php',46],['lib/mustache/src/Mustache','Template.php',29],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/google/src/Google/Logger','Abstract.php',123],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel','ReferenceHelper.php',58],['lib/pear/HTML/QuickForm','password.php',37],['lib/dml','moodle_transaction.php',40],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['repository/flickr','lib.php',51],['lib/form','grading.php',57],['lib/classes/update','api.php',71],['backup/cc/cc_lib','cc_converter_lti.php',29],['backup/moodle2','backup_subplugin.class.php',44],['lib/portfolio','caller.php',67],['lib/classes/progress','display_if_slow.php',60],['lib/adodb/perf','perf-informix.inc.php',66],['lib/classes','chart_base.php',52],['lib/lessphp/Tree','Media.php',18],['lib/spout/src/Spout/Common/Escaper','XLSX.php',19],['grade/export/ods','grade_export_ods.php',24],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/google/src/Google/Service','Calendar.php',50],['lib/form','group.php',44],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',44],['lib/pear/HTML/QuickForm/Renderer','Object.php',75],['admin/tool/lp/classes/output','user_evidence_page.php',48],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['grade/export/xls','grade_export_xls.php',24],['lib/classes/output','mustache_pix_helper.php',43],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/google/src/Google/Auth','ComputeEngine.php',35],['cache/stores/session','lib.php',131],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['admin/tool/log/store/database/backup/moodle2','backup_logstore_database_nested_element.php',43],['user','renderer.php',220],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['availability/condition/grade/classes','condition.php',46],['lib/lessphp/Tree','RulesetCall.php',14],['blocks/rss_client/classes/output','feed.php',75],['lib/form','select.php',47],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/lessphp/Visitor','toCSS.php',13],['lib','outputfragmentrequirementslib.php',40],['backup/util/ui','restore_moodleform.class.php',34],['lib/google/src/Google/Service','Cloudbilling.php',43],['lib/google/src/Google/Service','PlusDomains.php',72],['lib','externallib.php',37],['lib','externallib.php',531],['lib','externallib.php',562],['lib','externallib.php',593],['lib','externallib.php',622],['lib','externallib.php',648],['lib','externallib.php',778],['lib','externallib.php',813],['lib','externallib.php',984],['lib','externallib.php',1177],['blog','locallib.php',71],['blog','locallib.php',564],['blog','locallib.php',847],['blog','locallib.php',892],['blog','locallib.php',965],['blog','locallib.php',1016],['blog','locallib.php',1041],['blog','locallib.php',1051],['blog','locallib.php',1063],['blog','locallib.php',1084],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',53],['auth/cas','auth.php',39],['lib','lexer.php',41],['lib','lexer.php',145],['lib','lexer.php',217],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/google/src/Google/Service','Exception.php',34],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['tag/classes/output','tagcloud.php',49],['lib/google/src/Google/Service','Storagetransfer.php',44],['user/filters','select.php',46],['cache/stores/mongodb','lib.php',116],['admin/tool/lp/classes/output','course_competencies_page.php',73],['lib/google/src/Google/Cache','Null.php',28],['lib','graphlib.php',1176],['lib/phpexcel/PHPExcel/Style','Protection.php',49],['lib/google/src/Google/Service','GamesConfiguration.php',42],['repository/dropbox','locallib.php',46],['lib/phpexcel/PHPExcel/Style','Alignment.php',100],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['cache/stores/file','lib.php',117],['tag/classes/output','tagareashowstandard.php',41],['question/type/multianswer','edit_multianswer_form.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',395],['mod/assign','renderable.php',531],['mod/assign','renderable.php',586],['mod/assign','renderable.php',670],['mod/assign','renderable.php',707],['mod/assign','renderable.php',747],['mod/assign','renderable.php',800],['mod/assign','renderable.php',854],['lib/form','selectwithlink.php',56],['backup/moodle2','backup_activity_task.class.php',45],['lib/phpmailer','class.phpmailer.php',633],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['auth/db','auth.php',36],['lib/lessphp/Tree','Value.php',14],['lib/form','course.php',62],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['cohort','locallib.php',37],['cohort','locallib.php',101],['badges/criteria','award_criteria.php',127],['lib/adodb/perf','perf-mysql.inc.php',86],['cache/stores/memcached','lib.php',133],['grade/report/singleview/classes/local/ui','empty_element.php',38],['lib/google/src/Google/Service','AppState.php',40],['lib/adodb/drivers','adodb-odbc_oracle.inc.php',107],['lib/pear/HTML/QuickForm/Renderer','Default.php',139],['tag/classes/output','tag.php',46],['question','previewlib.php',122],['backup/util/loggers','database_logger.class.php',40],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/phpexcel/PHPExcel/Reader','SYLK.php',67],['lib/form','submitlink.php',47],['backup/util/dbops','restore_dbops.class.php',1788],['lib/xmldb','xmldb_index.php',56],['question','category_class.php',58],['question','category_class.php',160],['lib/google/src/Google/Service','Webfonts.php',38],['webservice/xmlrpc','locallib.php',41],['admin/roles/classes','check_users_selector.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['user/profile/field/checkbox','field.class.php',33],['lib/form','cancel.php',47],['lib/google/src/Google/Service','Resourceviews.php',57],['lib/phpexcel/PHPExcel/Style','Font.php',100],['lib/portfolio','plugin.php',445],['calendar','lib.php',2003],['calendar','lib.php',2774],['mod/wiki','pagelib.php',93],['mod/wiki','pagelib.php',380],['mod/wiki','pagelib.php',981],['mod/wiki','pagelib.php',1190],['mod/wiki','pagelib.php',2194],['mod/wiki','pagelib.php',2422],['tag/classes/output','tagfeed.php',43],['tag/classes/output','tagareaenabled.php',38],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['mod/workshop','locallib.php',183],['mod/workshop','locallib.php',2976],['mod/workshop','locallib.php',3411],['mod/workshop','locallib.php',3647],['mod/workshop','locallib.php',3889],['mod/workshop','locallib.php',3975],['mod/workshop','locallib.php',4060],['mod/workshop','locallib.php',4079],['lib/form','advcheckbox.php',48],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['cohort/classes/output','cohortidnumber.php',37],['lib/adodb/drivers','adodb-ado.inc.php',42],['lib/adodb/drivers','adodb-ado.inc.php',346],['lib/form','filepicker.php',53],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/tests/fixtures','test_renderer_factory.php',41],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['grade/report/singleview','lib.php',69],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/google/src/Google/Logger','Psr.php',39],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['lib/lessphp/Tree','Import.php',30],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',37],['lib/google/src/Google/Service','Classroom.php',60],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',875],['admin/tool/lp/classes/external','competency_path_exporter.php',38],['cohort/classes/output','cohortname.php',37],['grade/report/overview','lib.php',76],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpunit/classes','arraydataset.php',45],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1532],['question/engine','questionattempt.php',1618],['question/engine','questionattempt.php',1703],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['webservice/rest','lib.php',47],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',79],['backup/util/xml/output','memory_xml_output.class.php',37],['repository/flickr_public','image.php',34],['mod/lti/classes/local/ltiservice','resource_base.php',62],['admin/tool/lp/classes/output','template_plans_table.php',53],['mod/quiz','mod_form.php',48],['lib/simplepie/library/SimplePie','Caption.php',98],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',30],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['backup/moodle2','backup_theme_plugin.class.php',61],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/phpexcel/PHPExcel','DocumentSecurity.php',65],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',45],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',49],['lib/lessphp/Tree','Operation.php',19],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',461],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1699],['backup/cc/cc_lib','cc_converter_folder.php',28],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/google/src/Google/Service','SQLAdmin.php',50],['lib/lessphp/Tree','DetachedRuleset.php',15],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['mod/quiz','override_form.php',58],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',97],['lib/adodb/perf','perf-db2.inc.php',61],['lib/phpexcel/PHPExcel/Style','Supervisor.php',44],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['lib/ddl','database_manager.php',48],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['admin/roles/classes','define_role_table_advanced.php',46],['lib/dml','oci_native_moodle_temptables.php',40],['lib/horde/framework/Horde/Stream','Existing.php',28],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['availability/classes','multiple_messages.php',56],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/pear/Net','GeoIP.php',323],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/form','modgrade.php',78],['admin/tool/log/store/database/backup/moodle2','restore_logstore_database_subplugin.class.php',40],['cache/classes','config.php',80],['lib/pear/HTML/QuickForm','hidden.php',37],['question/type/calculated','datasetitems_form.php',72],['lib/tests','navigationlib_test.php',554],['lib/tests','navigationlib_test.php',612],['lib/tests','navigationlib_test.php',639],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/tests','completionlib_test.php',882],['admin/tool/generator/classes','site_backend.php',58],['lib/jabber/XMPP','XMLStream.php',171],['lib/simplepie/library/SimplePie','Sanitize.php',75],['cache/classes','factory.php',149],['lib/minify/lib/Minify/Cache','WinCache.php',20],['user/classes/output/myprofile','node.php',82],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/adodb/drivers','adodb-borland_ibase.inc.php',83],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',44],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',262],['lib/classes/update','code_manager.php',57],['search/engine/solr/classes','engine.php',103],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/google/src/Google/Service','Compute.php',89],['lib/phpexcel/PHPExcel/Style','Borders.php',113],['lib','completionlib.php',243],['lib/google/src/Google/Service','Pubsub.php',44],['lib/adodb/drivers','adodb-ads.inc.php',69],['lib/adodb/drivers','adodb-ads.inc.php',657],['lib/markdown','MarkdownExtra.php',56],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/google/src/Google/Service','YouTube.php',75],['lib/lessphp','Functions.php',15],['auth/cas/CAS/CAS','AuthenticationException.php',53],['mod/quiz','locallib.php',1923],['competency/classes/external','stored_file_exporter.php',45],['user/filters','checkbox.php',51],['backup/moodle2','restore_settingslib.php',86],['backup/moodle2','restore_settingslib.php',149],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/pear/HTML/QuickForm','date.php',260],['lib/lessphp/SourceMap','Generator.php',82],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['mod/lti/service/memberships/classes/local/service','memberships.php',50],['lib/google/src/Google/Cache','Apc.php',37],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['lib/pear/Auth','RADIUS.php',120],['lib/pear/Auth','RADIUS.php',579],['lib/pear/Auth','RADIUS.php',672],['lib/pear/Auth','RADIUS.php',879],['lib/adodb/drivers','adodb-ado_access.inc.php',46],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',519],['lib/google/src/Google/Http','Request.php',58],['lib/google/src/Google/Service','Dfareporting.php',99],['lib/google/src/Google/Service','Manager.php',60],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/google/src/Google/Service','CloudMonitoring.php',45],['lib/editor/tinymce/plugins/spellchecker/classes','SpellChecker.php',11],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['lib','webdavlib.php',84],['lib/dml','pgsql_native_moodle_recordset.php',43],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/mustache/src/Mustache','LambdaHelper.php',25],['question/engine/upgrade/tests','helper.php',45],['admin/tool/uploadcourse/classes','tracker.php',72],['grade/report/user','lib.php',188],['lib/adodb/drivers','adodb-sqlanywhere.inc.php',156],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/adodb/drivers','adodb-db2oci.inc.php',220]], 1102],
'get_useridlist_key_id': ['get_useridlist_key_id', 'The id used to uniquily identify the cache for this instance of the assign object. ', [['mod/assign','locallib.php',8018]], 9],
'show_only_active_users': ['show_only_active_users', 'Check is only active users in course should be shown. ', [['mod/assign','locallib.php',7937]], 7],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'get_user_submission': ['get_user_submission', 'Load the submission object for a particular user, optionally creating it if required. ', [['mod/assign','locallib.php',3001]], 87],
'gradebook_item_update': ['gradebook_item_update', 'Update grades in the gradebook. ', [['mod/assign','locallib.php',4885]], 5],
'notify_graders': ['notify_graders', 'Send notifications to graders upon student submissions. ', [['mod/assign','locallib.php',5547]], 3],
'process_outcomes': ['process_outcomes', 'Save outcomes submitted from grading form. ', [['mod/assign','locallib.php',7369]], 2],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'is_validated': ['is_validated', 'Check that form data is valid. You should almost always use this, rather than {@link validate_defined_fields} ', [['lib','formslib.php',507]], 21],
'set_title': ['set_title', 'Sets the title for the node ', [['lib','outputcomponents.php',2820],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_basiclti.php',57],['lib','pagelib.php',1157],['blocks/rss_client/classes/output','channel_image.php',110],['blocks/rss_client/classes/output','item.php',182],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['backup/cc/cc_lib','cc_page.php',38],['lib/classes','chart_base.php',222],['blocks/rss_client/classes/output','feed.php',113],['backup/cc/cc_lib','cc_metadata.php',225],['mod/wiki','pagelib.php',215],['backup/cc/cc_lib','cc_forum.php',39]], 460],
'view_edit_submission_page': ['view_edit_submission_page', 'View edit submissions page. ', [['mod/assign','locallib.php',3935]], 1],
'get_grading_instance': ['get_grading_instance', 'Get an instance of a grading form if advanced grading is enabled. This is specific to the assignment, marker and student. ', [['mod/assign','locallib.php',6575]], 2],
'disable': ['disable', 'Disables the UI for this element ', [['backup/util/ui','backup_ui_setting.class.php',157],['lib','licenselib.php',105],['mod/assign','assignmentplugin.php',213],['cache/classes','factory.php',570]], 27],
'grade_get_grades': ['grade_get_grades', 'Returns grading information for given activity, optionally with user grades Manual, course or category items can not be queried. ', [['lib','gradelib.php',408]], 53],
'notify_grade_modified': ['notify_grade_modified', 'Mark in the database that this grade record should have an update notification sent by cron. ', [['mod/assign','locallib.php',2066]], 6],
'get_active_controller': ['get_active_controller', 'Returns the controller for the active method if it is available ', [['grade/grading','lib.php',534]], 7],
'count_records_sql': ['count_records_sql', 'Get the result of a SQL SELECT COUNT(...) query. ', [['lib/dml','moodle_database.php',1796]], 155],
'get_shared_group_members': ['get_shared_group_members', 'Returns IDs of the users who share group membership with the specified user. ', [['mod/assign','locallib.php',5190]], 6],
'get_user_grades_for_gradebook': ['get_user_grades_for_gradebook', 'Get an upto date list of user grades and feedback for the gradebook. ', [['mod/assign','locallib.php',7730]], 9],
'register_return_link': ['register_return_link', 'Set the action and parameters that can be used to return to the current page. ', [['mod/assign','locallib.php',197]], 5],
'get_current_instance': ['get_current_instance', 'Returns the current instance (either with status ACTIVE or NEEDUPDATE) for this definition for the specified $raterid and $itemid (if multiple raters are allowed, or only for $itemid otherwise). ', [['grade/grading/form','lib.php',380],['grade/grading/form','lib.php',819]], 8],
'send_temp_file': ['send_temp_file', 'Handles the sending of temporary file to user, download is forced. File is deleted after abort or successful sending, does not return, script terminated ', [['lib','filelib.php',2009]], 4],
'single_button': ['single_button', 'Returns a form with a single button. ', [['lib','outputrenderers.php',1772]], 316],
'get_sha1': ['get_sha1', '', [['mod/chat','locallib.php',94],['mod/data','locallib.php',139],['mod/assign','locallib.php',8292],['mod/glossary','locallib.php',97],['mod/glossary','locallib.php',360],['mod/forum','locallib.php',343]], 3],
'format_submission_for_log': ['format_submission_for_log', 'Take a submission object and print a short summary for the log file. The size limit for the log file is 255 characters, so be careful not to include too much information. ', [['mod/assign','locallib.php',6212]], 3],
'can_edit_submission': ['can_edit_submission', 'Capability check to make sure this grader can edit this submission. ', [['mod/assign','locallib.php',5149]], 12],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'get_grading_actions': ['get_grading_actions', 'Return a list of the grading actions performed by this plugin This plugin supports upload zip ', [['mod/assign/feedback/offline','locallib.php',369],['mod/assign','feedbackplugin.php',149],['mod/assign/feedback/file','locallib.php',666]], 1],
'format_for_gradebook': ['format_for_gradebook', 'If this plugin adds to the gradebook comments field, it must specify the format of the text of the comment ', [['mod/assign/feedback/comments','locallib.php',449],['mod/assign','feedbackplugin.php',47]], 5],
'process_add_attempt_group': ['process_add_attempt_group', 'Add a new attempt for each user in the list - but reopen each group assignment at most 1 time. ', [['mod/assign','locallib.php',7637]], 1],
'get_grading_userid_list': ['get_grading_userid_list', 'Utility function to get the userid for every row in the grading table so the order can be frozen while we iterate it. ', [['mod/assign','locallib.php',1844]], 3],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1300]], 441],
'supports_quickgrading': ['supports_quickgrading', 'Override to indicate a plugin supports quickgrading. ', [['mod/assign/feedback/comments','locallib.php',127],['mod/assign','feedbackplugin.php',82]], 3],
'setconstant': ['setconstant', 'Set constant value not overridden by _POST or _GET note: this does not work for complex names with [] :-( ', [['lib','formslib.php',1940]], 61],
'get_uniqueid_for_user': ['get_uniqueid_for_user', 'Call the static version of this function ', [['mod/assign','locallib.php',7805]], 26],
'count_submissions_need_grading': ['count_submissions_need_grading', 'Load a count of active users submissions in the current module that require grading This means the submission modification time is more recent than the grading modification time and the status is SUBMITTED. ', [['mod/assign','locallib.php',1673]], 4],
'addgroup': ['addgroup', 'Adds an element group ', [['lib/pear/HTML','QuickForm.php',717]], 111],
'download_submissions': ['download_submissions', 'Download a zip file of all assignment submissions. ', [['mod/assign','locallib.php',2825]], 2],
'format_text': ['format_text', 'Formats a text string coming from the search engine. ', [['search/classes','document.php',606],['lib/classes','grading_external.php',182],['search/engine/solr/classes','document.php',129],['lib','weblib.php',1158],['lib','tablelib.php',860],['lib','tablelib.php',1667],['question/type','questionbase.php',345]], 322],
'get_submission_plugins': ['get_submission_plugins', 'Get list of submission plugins installed. ', [['mod/assign','locallib.php',301]], 27],
'process_set_batch_marking_workflow_state': ['process_set_batch_marking_workflow_state', 'Set the workflow state for multiple users ', [['mod/assign','locallib.php',7104]], 2],
'course_format_uses_sections': ['course_format_uses_sections', 'Tells if current course format uses sections ', [['course','lib.php',2501]], 25],
'notify_student_submission_receipt': ['notify_student_submission_receipt', 'Notify student upon successful submission. ', [['mod/assign','locallib.php',5513]], 2],
'get_section_name': ['get_section_name', 'Returns the display name of the given section that the course prefers. ', [['course/format/weeks','lib.php',47],['course/format','lib.php',341],['course/format','lib.php',1114],['course/format','formatlegacy.php',53],['course/format/topics','lib.php',47],['course','lib.php',2487]], 60],
'view_submission_page': ['view_submission_page', 'View submissions page (contains details of current submission). ', [['mod/assign','locallib.php',4788]], 1],
'save_intro_draft_files': ['save_intro_draft_files', 'Save the attachments in the draft areas. ', [['mod/assign','locallib.php',1077]], 2],
'get_displaytype': ['get_displaytype', 'Returns the value of the display type ', [['lib/grade','grade_item.php',2329]], 9],
'add_submission_form_elements': ['add_submission_form_elements', 'Add elements to submission form. ', [['mod/assign','locallib.php',6956]], 1],
'assign_update_grades': ['assign_update_grades', 'Update activity grades. ', [['mod/assign','lib.php',1144]], 2],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'is_real_user': ['is_real_user', 'Return true is user id is greater than self::NOREPLY_USER and alternatively check db. ', [['lib/classes','user.php',225]], 22],
'substr': ['substr', '', [], 2823],
'in_array': ['in_array', '', [], 1234],
'settype': ['settype', '', [], 1429],
'ksort': ['ksort', '', [], 153],
'explode': ['explode', '', [], 1572],
'array_pop': ['array_pop', '', [], 483],
'strpos': ['strpos', '', [], 1604],
'time': ['time', '', [], 1959],
'is_numeric': ['is_numeric', '', [], 672],
'file_exists': ['file_exists', '', [], 867],
'count': ['count', '', [], 4095],
'uniqid': ['uniqid', '', [], 86],
'define': ['define', '', [], 2373],
'is_null': ['is_null', '', [], 2003],
'asort': ['asort', '', [], 114],
'shuffle': ['shuffle', '', [], 27],
'header': ['header', '', [], 1355],
'str_replace': ['str_replace', '', [], 1648],
'array_keys': ['array_keys', '', [], 1256],
'floatval': ['floatval', '', [], 101],
'tempnam': ['tempnam', '', [], 31],
'array_unique': ['array_unique', '', [], 171],
'parse_str': ['parse_str', '', [], 11],
'sha1': ['sha1', '', [], 186],
'array_key_exists': ['array_key_exists', '', [], 1445],
'reset': ['reset', '', [], 1213],
'defined': ['defined', '', [], 4731],
'array_merge': ['array_merge', '', [], 2944],
'call_user_func_array': ['call_user_func_array', '', [], 94],
'basename': ['basename', '', [], 153]};
CLASS_DATA={
'assign_plugin_header': ['assign_plugin_header', 'Renderable header related to an individual subplugin ', [['mod/assign','renderable.php',697]], 1],
'grading_table_viewed': ['grading_table_viewed', 'The mod_assign grading table viewed event class. ', [['mod/assign/classes/event','grading_table_viewed.php',29]], 5],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'assign_submission_plugin_submission': ['assign_submission_plugin_submission', 'Implements a renderable submission plugin submission ', [['mod/assign','renderable.php',217]], 10],
'feedback_viewed': ['feedback_viewed', 'The mod_assign feedback viewed event class. ', [['mod/assign/classes/event','feedback_viewed.php',29]], 1],
'assign_portfolio_caller': ['assign_portfolio_caller', 'Portfolio caller class for mod_assign. ', [['mod/assign','locallib.php',8086]], 0],
'core_user': ['core_user', 'User class to access user details. ', [['lib/classes','user.php',27]], 457],
'assign': ['assign', 'Standard base class for mod_assign (assignment types). ', [['mod/assign','locallib.php',82]], 76],
'submission_locked': ['submission_locked', 'The mod_assign submission locked event class. ', [['mod/assign/classes/event','submission_locked.php',29]], 3],
'assign_course_index_summary': ['assign_course_index_summary', 'Renderable course index summary ', [['mod/assign','renderable.php',786]], 1],
'reveal_identities_confirmation_page_viewed': ['reveal_identities_confirmation_page_viewed', 'The mod_assign reveal identities confirmation page viewed event class. ', [['mod/assign/classes/event','reveal_identities_confirmation_page_viewed.php',29]], 3],
'assign_feedback_plugin_feedback': ['assign_feedback_plugin_feedback', 'Implements a renderable feedback plugin feedback ', [['mod/assign','renderable.php',166]], 8],
'required_capability_exception': ['required_capability_exception', 'Exceptions indicating user does not have permissions to do something and the execution can not continue. ', [['lib','setuplib.php',210]], 131],
'grade_item': ['grade_item', 'Class representing a grade item. ', [['lib/grade','grade_item.php',29]], 246],
'grade_grade': ['grade_grade', 'grade_grades is an object mapped to DB table {prefix}grade_grades ', [['lib/grade','grade_grade.php',30]], 154],
'assign_header': ['assign_header', 'Renderable header ', [['mod/assign','renderable.php',648]], 21],
'mod_assign_confirm_submission_form': ['mod_assign_confirm_submission_form', 'Assignment submission confirmation form ', [['mod/assign','submissionconfirmform.php',30]], 2],
'assign_attempt_history_chooser': ['assign_attempt_history_chooser', 'Used to output the attempt history chooser for a particular assignment. ', [['mod/assign','renderable.php',568]], 1],
'assessable_submitted': ['assessable_submitted', 'The mod_assign assessable submitted event class. ', [['mod/assign/classes/event','assessable_submitted.php',29]], 3],
'mod_assign_batch_set_marking_workflow_state_form': ['mod_assign_batch_set_marking_workflow_state_form', 'Set marking workflow form. ', [['mod/assign','batchsetmarkingworkflowstateform.php',30]], 3],
'assign_submission_status': ['assign_submission_status', 'Renderable submission status ', [['mod/assign','renderable.php',321]], 12],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'submission_graded': ['submission_graded', 'The mod_assign submission graded event class. ', [['mod/assign/classes/event','submission_graded.php',29]], 3],
'zip_packer': ['zip_packer', 'Utility class - handles all zipping and unzipping operations. ', [['lib/filestorage','zip_packer.php',30]], 7],
'mod_assign_extension_form': ['mod_assign_extension_form', 'Assignment extension dates form ', [['mod/assign','extensionform.php',31]], 2],
'core_php_time_limit': ['core_php_time_limit', 'Utility class to manage PHP time limit. ', [['lib/classes','php_time_limit.php',27]], 92],
'assign_user_summary': ['assign_user_summary', 'Implements a renderable user summary ', [['mod/assign','renderable.php',117]], 6],
'assign_form': ['assign_form', 'Implements a renderable grading options form ', [['mod/assign','renderable.php',89]], 14],
'extension_granted': ['extension_granted', 'The mod_assign extension granted event class. ', [['mod/assign/classes/event','extension_granted.php',29]], 3],
'grading_app': ['grading_app', 'Grading app renderable. ', [['mod/assign/classes/output','grading_app.php',34]], 1],
'submission_confirmation_form_viewed': ['submission_confirmation_form_viewed', 'The mod_assign submission form viewed event class. ', [['mod/assign/classes/event','submission_confirmation_form_viewed.php',29]], 3],
'context_helper': ['context_helper', 'Context maintenance and helper methods. ', [['lib','accesslib.php',5875]], 203],
'portfolio_format_leap2a_file': ['portfolio_format_leap2a_file', 'Subclass of entry, purely for dealing with files ', [['lib/portfolio/formats/leap2a','lib.php',490]], 3],
'batch_set_marker_allocation_viewed': ['batch_set_marker_allocation_viewed', 'The mod_assign batch set marker allocation viewed event class. ', [['mod/assign/classes/event','batch_set_marker_allocation_viewed.php',29]], 3],
'assign_attempt_history': ['assign_attempt_history', 'Used to output the attempt history for a particular assignment. ', [['mod/assign','renderable.php',501]], 2],
'mod_assign_submission_form': ['mod_assign_submission_form', 'Assign submission form ', [['mod/assign','submission_form.php',31]], 2],
'submission_form_viewed': ['submission_form_viewed', 'The mod_assign submission form viewed event class. ', [['mod/assign/classes/event','submission_form_viewed.php',29]], 3],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'mod_assign_grade_form': ['mod_assign_grade_form', 'Assignment grade form ', [['mod/assign','gradeform.php',32]], 5],
'grading_form_viewed': ['grading_form_viewed', 'The mod_assign grading form viewed event class. ', [['mod/assign/classes/event','grading_form_viewed.php',29]], 4],
'assign_grading_summary': ['assign_grading_summary', 'Renderable grading summary ', [['mod/assign','renderable.php',717]], 2],
'mod_assign_grading_options_form': ['mod_assign_grading_options_form', 'Assignment grading options form ', [['mod/assign','gradingoptionsform.php',31]], 2],
'assign_grading_table': ['assign_grading_table', 'Extends table_sql to provide a table of assignment submissions ', [['mod/assign','gradingtable.php',31]], 20],
'portfolio_add_button': ['portfolio_add_button', 'Use this to add a portfolio button or icon or form to a page. ', [['lib','portfoliolib.php',54]], 13],
'assign_feedback_status': ['assign_feedback_status', 'Renderable feedback status ', [['mod/assign','renderable.php',266]], 1],
'url_select': ['url_select', 'Simple URL selection widget description. ', [['lib','outputcomponents.php',852]], 8],
'mod_assign_quick_grading_form': ['mod_assign_quick_grading_form', 'Assignment quick grading form ', [['mod/assign','quickgradingform.php',31]], 1],
'assign_gradingmessage': ['assign_gradingmessage', 'Implements a renderable message notification ', [['mod/assign','renderable.php',55]], 2],
'submission_unlocked': ['submission_unlocked', 'The mod_assign submission unlocked event class. ', [['mod/assign/classes/event','submission_unlocked.php',29]], 3],
'submission_status_updated': ['submission_status_updated', 'The mod_assign submission status updated event class. ', [['mod/assign/classes/event','submission_status_updated.php',29]], 1],
'statement_accepted': ['statement_accepted', 'The mod_assign statement accepted event class. ', [['mod/assign/classes/event','statement_accepted.php',29]], 4],
'batch_set_workflow_state_viewed': ['batch_set_workflow_state_viewed', 'The mod_assign assignment batch set workflow stated viewed event. ', [['mod/assign/classes/event','batch_set_workflow_state_viewed.php',29]], 3],
'mod_assign_grading_batch_operations_form': ['mod_assign_grading_batch_operations_form', 'Assignment grading options form ', [['mod/assign','gradingbatchoperationsform.php',30]], 4],
'assign_submission_status_compact': ['assign_submission_status_compact', 'Renderable submission status ', [['mod/assign','renderable.php',491]], 1],
'all_submissions_downloaded': ['all_submissions_downloaded', 'The mod_assign all submissions downloaded event class. ', [['mod/assign/classes/event','all_submissions_downloaded.php',29]], 3],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 511],
'identities_revealed': ['identities_revealed', 'The mod_assign identities revealed event class. ', [['mod/assign/classes/event','identities_revealed.php',29]], 3],
'submission_status_viewed': ['submission_status_viewed', 'The mod_assign submission status viewed event class. ', [['mod/assign/classes/event','submission_status_viewed.php',29]], 4],
'cm_info': ['cm_info', 'Data about a single module on a course. This contains most of the fields in the course_modules table, plus additional data when required. ', [['lib','modinfolib.php',623]], 24],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'assign_submit_for_grading_page': ['assign_submit_for_grading_page', 'This class wraps the submit for grading confirmation page ', [['mod/assign','renderable.php',27]], 1],
'core_collator': ['core_collator', 'A collator class with static methods that can be used for sorting. ', [['lib/classes','collator.php',28]], 152],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'submission_duplicated': ['submission_duplicated', 'The mod_assign submission duplicated event class. ', [['mod/assign/classes/event','submission_duplicated.php',29]], 3],
'mod_assign_batch_set_allocatedmarker_form': ['mod_assign_batch_set_allocatedmarker_form', 'Set allocated marker form. ', [['mod/assign','batchsetallocatedmarkerform.php',30]], 3],
'completion_info': ['completion_info', 'Class represents completion information for a course. ', [['lib','completionlib.php',210]], 141],
'portfolio_format_leap2a_entry': ['portfolio_format_leap2a_entry', 'This class represents a single leap2a entry. ', [['lib/portfolio/formats/leap2a','lib.php',207]], 10],
'marker_updated': ['marker_updated', 'The mod_assign marker updated event class. ', [['mod/assign/classes/event','marker_updated.php',29]], 3],
'workflow_state_updated': ['workflow_state_updated', 'mod_assign workflow state updated event class. ', [['mod/assign/classes/event','workflow_state_updated.php',29]], 5],
'portfolio_caller_exception': ['portfolio_caller_exception', 'Exception for callers to throw when they have a problem. ', [['lib/portfolio','exceptions.php',93]], 23],
'calendar_event': ['calendar_event', 'Manage calendar events ', [['calendar','lib.php',1951]], 75],
'submission_viewed': ['submission_viewed', 'The mod_workshop submission viewed event class. ', [['mod/workshop/classes/event','submission_viewed.php',28],['mod/assign/classes/event','submission_viewed.php',29]], 3]};
CONST_DATA={
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812],
'PARAM_ALPHA': ['PARAM_ALPHA', '', [['lib','moodlelib.php',77]], 398],
'ASSIGN_FILTER_REQUIRE_GRADING': ['ASSIGN_FILTER_REQUIRE_GRADING', '', [['mod/assign','locallib.php',39]], 3],
'PARAM_PATH': ['PARAM_PATH', '', [['lib','moodlelib.php',178]], 175],
'ASSIGN_ATTEMPT_REOPEN_METHOD_UNTILPASS': ['ASSIGN_ATTEMPT_REOPEN_METHOD_UNTILPASS', '', [['mod/assign','locallib.php',47]], 5],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 315],
'GRADE_DISPLAY_TYPE_REAL': ['GRADE_DISPLAY_TYPE_REAL', '', [['lib/grade','constants.php',148]], 31],
'ASSIGN_FILTER_SUBMITTED': ['ASSIGN_FILTER_SUBMITTED', '', [['mod/assign','locallib.php',36]], 3],
'ASSIGN_SUBMISSION_STATUS_REOPENED': ['ASSIGN_SUBMISSION_STATUS_REOPENED', '', [['mod/assign','locallib.php',31]], 10],
'PARAM_TEXT': ['PARAM_TEXT', '', [['lib','moodlelib.php',228]], 542],
'FORMAT_PLAIN': ['FORMAT_PLAIN', '', [['lib','weblib.php',52]], 152],
'ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW': ['ASSIGN_MARKING_WORKFLOW_STATE_INREVIEW', '', [['mod/assign','locallib.php',60]], 8],
'PORTFOLIO_FORMAT_PLAINHTML': ['PORTFOLIO_FORMAT_PLAINHTML', '', [['lib/portfolio','constants.php',97]], 17],
'FORMAT_MOODLE': ['FORMAT_MOODLE', '', [['lib','weblib.php',42]], 506],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 466],
'WS_SERVER': ['WS_SERVER', '', [['webservice/soap','simpleserver.php',31],['webservice/xmlrpc','simpleserver.php',31],['webservice/rest','simpleserver.php',31],['webservice/soap','server.php',31],['webservice/xmlrpc','server.php',31],['webservice/rest','server.php',31],['lib','setup.php',310]], 15],
'ASSIGN_SUBMISSION_STATUS_DRAFT': ['ASSIGN_SUBMISSION_STATUS_DRAFT', '', [['mod/assign','locallib.php',32]], 17],
'RENDERER_TARGET_GENERAL': ['RENDERER_TARGET_GENERAL', '', [['lib','outputfactories.php',32]], 3],
'COMPLETION_INCOMPLETE': ['COMPLETION_INCOMPLETE', '', [['lib','completionlib.php',70]], 53],
'ASSIGN_SUBMISSION_STATUS_SUBMITTED': ['ASSIGN_SUBMISSION_STATUS_SUBMITTED', '', [['mod/assign','locallib.php',33]], 70],
'PARAM_ALPHANUM': ['PARAM_ALPHANUM', '', [['lib','moodlelib.php',88]], 112],
'ASSIGN_MARKING_WORKFLOW_STATE_RELEASED': ['ASSIGN_MARKING_WORKFLOW_STATE_RELEASED', '', [['mod/assign','locallib.php',62]], 18],
'PORTFOLIO_FORMAT_LEAP2A': ['PORTFOLIO_FORMAT_LEAP2A', '', [['lib/portfolio','constants.php',142]], 15],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'PHPUNIT_TEST': ['PHPUNIT_TEST', '', [['admin/cli','install.php',145],['','install.php',49],['lib/phpunit','bootstrap.php',63],['lib','setup.php',247]], 59],
'CONTEXT_COURSE': ['CONTEXT_COURSE', '', [['lib','accesslib.php',148]], 441],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'GRADE_UPDATE_OK': ['GRADE_UPDATE_OK', '', [['lib/grade','constants.php',103]], 18],
'PARAM_FLOAT': ['PARAM_FLOAT', '', [['lib','moodlelib.php',146]], 103],
'ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL': ['ASSIGN_ATTEMPT_REOPEN_METHOD_MANUAL', '', [['mod/assign','locallib.php',46]], 12],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 215],
'PORTFOLIO_FORMAT_RICHHTML': ['PORTFOLIO_FORMAT_RICHHTML', '', [['lib/portfolio','constants.php',92]], 19],
'SEPARATEGROUPS': ['SEPARATEGROUPS', '', [['lib','grouplib.php',34]], 190],
'PORTFOLIO_FORMAT_FILE': ['PORTFOLIO_FORMAT_FILE', '', [['lib/portfolio','constants.php',80]], 12],
'ASSIGN_MARKER_FILTER_NO_MARKER': ['ASSIGN_MARKER_FILTER_NO_MARKER', '', [['mod/assign','locallib.php',42]], 4],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 921],
'ASSIGN_UNLIMITED_ATTEMPTS': ['ASSIGN_UNLIMITED_ATTEMPTS', '', [['mod/assign','locallib.php',50]], 10],
'ASSIGN_GRADING_STATUS_GRADED': ['ASSIGN_GRADING_STATUS_GRADED', '', [['mod/assign','locallib.php',53]], 7],
'ASSIGN_ATTEMPT_REOPEN_METHOD_NONE': ['ASSIGN_ATTEMPT_REOPEN_METHOD_NONE', '', [['mod/assign','locallib.php',45]], 9],
'ASSIGN_MARKING_WORKFLOW_STATE_INMARKING': ['ASSIGN_MARKING_WORKFLOW_STATE_INMARKING', '', [['mod/assign','locallib.php',58]], 6],
'ASSIGN_SUBMISSION_STATUS_NEW': ['ASSIGN_SUBMISSION_STATUS_NEW', '', [['mod/assign','locallib.php',30]], 20],
'ASSIGN_GRADING_STATUS_NOT_GRADED': ['ASSIGN_GRADING_STATUS_NOT_GRADED', '', [['mod/assign','locallib.php',54]], 5],
'ASSIGN_FILTER_NOT_SUBMITTED': ['ASSIGN_FILTER_NOT_SUBMITTED', '', [['mod/assign','locallib.php',37]], 3],
'ASSIGN_INTROATTACHMENT_FILEAREA': ['ASSIGN_INTROATTACHMENT_FILEAREA', '', [['mod/assign','locallib.php',65]], 12],
'ASSIGN_FILTER_SINGLE_USER': ['ASSIGN_FILTER_SINGLE_USER', '', [['mod/assign','locallib.php',38]], 2],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 802],
'COMPLETION_COMPLETE': ['COMPLETION_COMPLETE', '', [['lib','completionlib.php',76]], 90],
'ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED': ['ASSIGN_MARKING_WORKFLOW_STATE_NOTMARKED', '', [['mod/assign','locallib.php',57]], 10]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
