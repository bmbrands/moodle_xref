<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/assign/submission/onlinetext/locallib.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='mod/assign/submission/onlinetext';
filename='locallib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/assign/submission/onlinetext/</a> -> <a href="locallib.php.html">locallib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="locallib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="locallib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * This file contains the definition for the library class for onlinetext submission plugin</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * This class provides all the functionality for the new assign module.</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> *</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @package assignsubmission_onlinetext</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @copyright 2012 NetSpot {@link http://www.netspot.com.au}</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment">// File area for online text submission assignment.</span>
<a name="l29"><span class="linenum">  29</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')" href="../../../../_constants/ASSIGNSUBMISSION_ONLINETEXT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')">ASSIGNSUBMISSION_ONLINETEXT_FILEAREA</a>', 'submissions_onlinetext');
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">/**</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * library class for onlinetext submission plugin extending submission plugin base class</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> *</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @package assignsubmission_onlinetext</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @copyright 2012 NetSpot {@link http://www.netspot.com.au}</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> */</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('assign_submission_onlinetext')" href="../../../../_classes/assign_submission_onlinetext.html" onMouseOver="classPopup(event,'assign_submission_onlinetext')">assign_submission_onlinetext</a> extends assign_submission_plugin {
<a name="l39"><span class="linenum">  39</span></a>  
<a name="l40"><span class="linenum">  40</span></a>      <span class="comment">/**</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     * Get the name of the online text submission plugin</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     * @return string</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     */</span>
<a name="l44"><span class="linenum">  44</span></a>      public function <a class="function" onClick="logFunction('get_name')" href="../../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() {
<a name="l45"><span class="linenum">  45</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('onlinetext', 'assignsubmission_onlinetext');
<a name="l46"><span class="linenum">  46</span></a>      }
<a name="l47"><span class="linenum">  47</span></a>  
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>      <span class="comment">/**</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     * Get onlinetext submission information from the database</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     *</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     * @param  int $submissionid</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     * @return mixed</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     */</span>
<a name="l55"><span class="linenum">  55</span></a>      private function <a class="function" onClick="logFunction('get_onlinetext_submission')" href="../../../../_functions/get_onlinetext_submission.html" onMouseOver="funcPopup(event,'get_onlinetext_submission')">get_onlinetext_submission</a>(<a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../../../_variables/submissionid.html">$submissionid</a>) {
<a name="l56"><span class="linenum">  56</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l57"><span class="linenum">  57</span></a>  
<a name="l58"><span class="linenum">  58</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assignsubmission_onlinetext', array('submission'=&gt;<a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../../../_variables/submissionid.html">$submissionid</a>));
<a name="l59"><span class="linenum">  59</span></a>      }
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>      <span class="comment">/**</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">     * Get the settings for onlinetext submission plugin</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     *</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     * @param MoodleQuickForm $mform The form to add elements to</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">     * @return void</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     */</span>
<a name="l67"><span class="linenum">  67</span></a>      public function <a class="function" onClick="logFunction('get_settings')" href="../../../../_functions/get_settings.html" onMouseOver="funcPopup(event,'get_settings')">get_settings</a>(MoodleQuickForm <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../../_variables/mform.html">$mform</a>) {
<a name="l68"><span class="linenum">  68</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>, <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../../../_variables/COURSE.html">$COURSE</a>;
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>          <a class="var it35716" onMouseOver="hilite(35716)" onMouseOut="lolite()" onClick="logVariable('defaultwordlimit')" href="../../../../_variables/defaultwordlimit.html">$defaultwordlimit</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_config')" href="../../../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('wordlimit') == 0 ? '' : <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_config')" href="../../../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('wordlimit');
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it35717" onMouseOver="hilite(35717)" onMouseOut="lolite()" onClick="logVariable('defaultwordlimitenabled')" href="../../../../_variables/defaultwordlimitenabled.html">$defaultwordlimitenabled</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_config')" href="../../../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('wordlimitenabled');
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../../_variables/options.html">$options</a> = array('size' =&gt; '6', 'maxlength' =&gt; '6');
<a name="l74"><span class="linenum">  74</span></a>          <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('wordlimit', 'assignsubmission_onlinetext');
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">        // Create a text box that can be enabled/disabled for onlinetext word limit.</span>
<a name="l77"><span class="linenum">  77</span></a>          <a class="var it35718" onMouseOver="hilite(35718)" onMouseOut="lolite()" onClick="logVariable('wordlimitgrp')" href="../../../../_variables/wordlimitgrp.html">$wordlimitgrp</a> = array();
<a name="l78"><span class="linenum">  78</span></a>          <a class="var it35718" onMouseOver="hilite(35718)" onMouseOut="lolite()" onClick="logVariable('wordlimitgrp')" href="../../../../_variables/wordlimitgrp.html">$wordlimitgrp</a>[] = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('createElement')" href="../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('text', 'assignsubmission_onlinetext_wordlimit', '', <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../../_variables/options.html">$options</a>);
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it35718" onMouseOver="hilite(35718)" onMouseOut="lolite()" onClick="logVariable('wordlimitgrp')" href="../../../../_variables/wordlimitgrp.html">$wordlimitgrp</a>[] = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('createElement')" href="../../../../_functions/createelement.html" onMouseOver="funcPopup(event,'createelement')">createElement</a>('checkbox', 'assignsubmission_onlinetext_wordlimit_enabled',
<a name="l80"><span class="linenum">  80</span></a>                  '', <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('enable'));
<a name="l81"><span class="linenum">  81</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addGroup')" href="../../../../_functions/addgroup.html" onMouseOver="funcPopup(event,'addgroup')">addGroup</a>(<a class="var it35718" onMouseOver="hilite(35718)" onMouseOut="lolite()" onClick="logVariable('wordlimitgrp')" href="../../../../_variables/wordlimitgrp.html">$wordlimitgrp</a>, 'assignsubmission_onlinetext_wordlimit_group', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../../_variables/name.html">$name</a>, ' ', false);
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addHelpButton')" href="../../../../_functions/addhelpbutton.html" onMouseOver="funcPopup(event,'addhelpbutton')">addHelpButton</a>('assignsubmission_onlinetext_wordlimit_group',
<a name="l83"><span class="linenum">  83</span></a>                                'wordlimit',
<a name="l84"><span class="linenum">  84</span></a>                                'assignsubmission_onlinetext');
<a name="l85"><span class="linenum">  85</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('assignsubmission_onlinetext_wordlimit',
<a name="l86"><span class="linenum">  86</span></a>                             'assignsubmission_onlinetext_wordlimit_enabled',
<a name="l87"><span class="linenum">  87</span></a>                             'notchecked');
<a name="l88"><span class="linenum">  88</span></a>  
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">        // Add numeric rule to text field.</span>
<a name="l90"><span class="linenum">  90</span></a>          <a class="var it35719" onMouseOver="hilite(35719)" onMouseOut="lolite()" onClick="logVariable('wordlimitgrprules')" href="../../../../_variables/wordlimitgrprules.html">$wordlimitgrprules</a> = array();
<a name="l91"><span class="linenum">  91</span></a>          <a class="var it35719" onMouseOver="hilite(35719)" onMouseOut="lolite()" onClick="logVariable('wordlimitgrprules')" href="../../../../_variables/wordlimitgrprules.html">$wordlimitgrprules</a>['assignsubmission_onlinetext_wordlimit'][] = array(null, 'numeric', null, 'client');
<a name="l92"><span class="linenum">  92</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addGroupRule')" href="../../../../_functions/addgrouprule.html" onMouseOver="funcPopup(event,'addgrouprule')">addGroupRule</a>('assignsubmission_onlinetext_wordlimit_group', <a class="var it35719" onMouseOver="hilite(35719)" onMouseOut="lolite()" onClick="logVariable('wordlimitgrprules')" href="../../../../_variables/wordlimitgrprules.html">$wordlimitgrprules</a>);
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">        // Rest of group setup.</span>
<a name="l95"><span class="linenum">  95</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>('assignsubmission_onlinetext_wordlimit', <a class="var it35716" onMouseOver="hilite(35716)" onMouseOut="lolite()" onClick="logVariable('defaultwordlimit')" href="../../../../_variables/defaultwordlimit.html">$defaultwordlimit</a>);
<a name="l96"><span class="linenum">  96</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setDefault')" href="../../../../_functions/setdefault.html" onMouseOver="funcPopup(event,'setdefault')">setDefault</a>('assignsubmission_onlinetext_wordlimit_enabled', <a class="var it35717" onMouseOver="hilite(35717)" onMouseOut="lolite()" onClick="logVariable('defaultwordlimitenabled')" href="../../../../_variables/defaultwordlimitenabled.html">$defaultwordlimitenabled</a>);
<a name="l97"><span class="linenum">  97</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../../../../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('assignsubmission_onlinetext_wordlimit', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l98"><span class="linenum">  98</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('assignsubmission_onlinetext_wordlimit_group',
<a name="l99"><span class="linenum">  99</span></a>                             'assignsubmission_onlinetext_enabled',
<a name="l100"><span class="linenum"> 100</span></a>                             'notchecked');
<a name="l101"><span class="linenum"> 101</span></a>      }
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>      <span class="comment">/**</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">     * Save the settings for onlinetext submission plugin</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">     *</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">     * @param stdClass $data</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">     * @return bool</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     */</span>
<a name="l109"><span class="linenum"> 109</span></a>      public function <a class="function" onClick="logFunction('save_settings')" href="../../../../_functions/save_settings.html" onMouseOver="funcPopup(event,'save_settings')">save_settings</a>(stdClass <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>) {
<a name="l110"><span class="linenum"> 110</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assignsubmission_onlinetext_wordlimit')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/assignsubmission_onlinetext_wordlimit.html">assignsubmission_onlinetext_wordlimit</a>) || empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assignsubmission_onlinetext_wordlimit_enabled')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/assignsubmission_onlinetext_wordlimit_enabled.html">assignsubmission_onlinetext_wordlimit_enabled</a>)) {
<a name="l111"><span class="linenum"> 111</span></a>              <a class="var it35722" onMouseOver="hilite(35722)" onMouseOut="lolite()" onClick="logVariable('wordlimit')" href="../../../../_variables/wordlimit.html">$wordlimit</a> = 0;
<a name="l112"><span class="linenum"> 112</span></a>              <a class="var it35723" onMouseOver="hilite(35723)" onMouseOut="lolite()" onClick="logVariable('wordlimitenabled')" href="../../../../_variables/wordlimitenabled.html">$wordlimitenabled</a> = 0;
<a name="l113"><span class="linenum"> 113</span></a>          } else {
<a name="l114"><span class="linenum"> 114</span></a>              <a class="var it35722" onMouseOver="hilite(35722)" onMouseOut="lolite()" onClick="logVariable('wordlimit')" href="../../../../_variables/wordlimit.html">$wordlimit</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assignsubmission_onlinetext_wordlimit')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/assignsubmission_onlinetext_wordlimit.html">assignsubmission_onlinetext_wordlimit</a>;
<a name="l115"><span class="linenum"> 115</span></a>              <a class="var it35723" onMouseOver="hilite(35723)" onMouseOut="lolite()" onClick="logVariable('wordlimitenabled')" href="../../../../_variables/wordlimitenabled.html">$wordlimitenabled</a> = 1;
<a name="l116"><span class="linenum"> 116</span></a>          }
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_config')" href="../../../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('wordlimit', <a class="var it35722" onMouseOver="hilite(35722)" onMouseOut="lolite()" onClick="logVariable('wordlimit')" href="../../../../_variables/wordlimit.html">$wordlimit</a>);
<a name="l119"><span class="linenum"> 119</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_config')" href="../../../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('wordlimitenabled', <a class="var it35723" onMouseOver="hilite(35723)" onMouseOut="lolite()" onClick="logVariable('wordlimitenabled')" href="../../../../_variables/wordlimitenabled.html">$wordlimitenabled</a>);
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>          return true;
<a name="l122"><span class="linenum"> 122</span></a>      }
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>      <span class="comment">/**</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     * Add form elements for settings</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     *</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     * @param mixed $submission can be null</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">     * @param MoodleQuickForm $mform</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     * @param stdClass $data</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     * @return true if elements were added to the form</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">     */</span>
<a name="l132"><span class="linenum"> 132</span></a>      public function <a class="function" onClick="logFunction('get_form_elements')" href="../../../../_functions/get_form_elements.html" onMouseOver="funcPopup(event,'get_form_elements')">get_form_elements</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>, MoodleQuickForm <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../../_variables/mform.html">$mform</a>, stdClass <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>) {
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it511" onMouseOver="hilite(511)" onMouseOut="lolite()" onClick="logVariable('elements')" href="../../../../_variables/elements.html">$elements</a> = array();
<a name="l134"><span class="linenum"> 134</span></a>  
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../../../_variables/editoroptions.html">$editoroptions</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_edit_options')" href="../../../../_functions/get_edit_options.html" onMouseOver="funcPopup(event,'get_edit_options')">get_edit_options</a>();
<a name="l136"><span class="linenum"> 136</span></a>          <a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../../../_variables/submissionid.html">$submissionid</a> = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a> ? <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a> : 0;
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>          if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a>)) {
<a name="l139"><span class="linenum"> 139</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a> = '';
<a name="l140"><span class="linenum"> 140</span></a>          }
<a name="l141"><span class="linenum"> 141</span></a>          if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetextformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetextformat.html">onlinetextformat</a>)) {
<a name="l142"><span class="linenum"> 142</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetextformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetextformat.html">onlinetextformat</a> = <a class="function" onClick="logFunction('editors_get_preferred_format')" href="../../../../_functions/editors_get_preferred_format.html" onMouseOver="funcPopup(event,'editors_get_preferred_format')">editors_get_preferred_format</a>();
<a name="l143"><span class="linenum"> 143</span></a>          }
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>          if (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>) {
<a name="l146"><span class="linenum"> 146</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_onlinetext_submission')" href="../../../../_functions/get_onlinetext_submission.html" onMouseOver="funcPopup(event,'get_onlinetext_submission')">get_onlinetext_submission</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l147"><span class="linenum"> 147</span></a>              if (<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>) {
<a name="l148"><span class="linenum"> 148</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a> = <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a>;
<a name="l149"><span class="linenum"> 149</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetextformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetextformat.html">onlinetextformat</a> = <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlineformat')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlineformat.html">onlineformat</a>;
<a name="l150"><span class="linenum"> 150</span></a>              }
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>          }
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('file_prepare_standard_editor')" href="../../../../_functions/file_prepare_standard_editor.html" onMouseOver="funcPopup(event,'file_prepare_standard_editor')">file_prepare_standard_editor</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>,
<a name="l155"><span class="linenum"> 155</span></a>                                               'onlinetext',
<a name="l156"><span class="linenum"> 156</span></a>                                               <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../../../_variables/editoroptions.html">$editoroptions</a>,
<a name="l157"><span class="linenum"> 157</span></a>                                               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l158"><span class="linenum"> 158</span></a>                                               'assignsubmission_onlinetext',
<a name="l159"><span class="linenum"> 159</span></a>                                               <a class="constant" onClick="logConstant('ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')" href="../../../../_constants/ASSIGNSUBMISSION_ONLINETEXT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')">ASSIGNSUBMISSION_ONLINETEXT_FILEAREA</a>,
<a name="l160"><span class="linenum"> 160</span></a>                                               <a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../../../_variables/submissionid.html">$submissionid</a>);
<a name="l161"><span class="linenum"> 161</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('editor', 'onlinetext_editor', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(), null, <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../../../_variables/editoroptions.html">$editoroptions</a>);
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>          return true;
<a name="l164"><span class="linenum"> 164</span></a>      }
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>      <span class="comment">/**</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     * Editor format options</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     *</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     * @return array</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     */</span>
<a name="l171"><span class="linenum"> 171</span></a>      private function <a class="function" onClick="logFunction('get_edit_options')" href="../../../../_functions/get_edit_options.html" onMouseOver="funcPopup(event,'get_edit_options')">get_edit_options</a>() {
<a name="l172"><span class="linenum"> 172</span></a>           <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../../../_variables/editoroptions.html">$editoroptions</a> = array(
<a name="l173"><span class="linenum"> 173</span></a>             'noclean' =&gt; false,
<a name="l174"><span class="linenum"> 174</span></a>             'maxfiles' =&gt; <a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>,
<a name="l175"><span class="linenum"> 175</span></a>             'maxbytes' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;maxbytes,
<a name="l176"><span class="linenum"> 176</span></a>             'context' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l177"><span class="linenum"> 177</span></a>             'return_types' =&gt; <a class="constant" onClick="logConstant('FILE_INTERNAL')" href="../../../../_constants/FILE_INTERNAL.html" onMouseOver="constPopup(event,'FILE_INTERNAL')">FILE_INTERNAL</a> | <a class="constant" onClick="logConstant('FILE_EXTERNAL')" href="../../../../_constants/FILE_EXTERNAL.html" onMouseOver="constPopup(event,'FILE_EXTERNAL')">FILE_EXTERNAL</a>
<a name="l178"><span class="linenum"> 178</span></a>          );
<a name="l179"><span class="linenum"> 179</span></a>          return <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../../../_variables/editoroptions.html">$editoroptions</a>;
<a name="l180"><span class="linenum"> 180</span></a>      }
<a name="l181"><span class="linenum"> 181</span></a>  
<a name="l182"><span class="linenum"> 182</span></a>      <span class="comment">/**</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     * Save data to the database and trigger plagiarism plugin,</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">     * if enabled, to scan the uploaded content via events trigger</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">     *</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">     * @param stdClass $submission</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">     * @param stdClass $data</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">     * @return bool</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">     */</span>
<a name="l190"><span class="linenum"> 190</span></a>      public function <a class="function" onClick="logFunction('save')" href="../../../../_functions/save.html" onMouseOver="funcPopup(event,'save')">save</a>(stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>, stdClass <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>) {
<a name="l191"><span class="linenum"> 191</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l192"><span class="linenum"> 192</span></a>  
<a name="l193"><span class="linenum"> 193</span></a>          <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../../../_variables/editoroptions.html">$editoroptions</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_edit_options')" href="../../../../_functions/get_edit_options.html" onMouseOver="funcPopup(event,'get_edit_options')">get_edit_options</a>();
<a name="l194"><span class="linenum"> 194</span></a>  
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('file_postupdate_standard_editor')" href="../../../../_functions/file_postupdate_standard_editor.html" onMouseOver="funcPopup(event,'file_postupdate_standard_editor')">file_postupdate_standard_editor</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>,
<a name="l196"><span class="linenum"> 196</span></a>                                                  'onlinetext',
<a name="l197"><span class="linenum"> 197</span></a>                                                  <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../../../_variables/editoroptions.html">$editoroptions</a>,
<a name="l198"><span class="linenum"> 198</span></a>                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>(),
<a name="l199"><span class="linenum"> 199</span></a>                                                  'assignsubmission_onlinetext',
<a name="l200"><span class="linenum"> 200</span></a>                                                  <a class="constant" onClick="logConstant('ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')" href="../../../../_constants/ASSIGNSUBMISSION_ONLINETEXT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')">ASSIGNSUBMISSION_ONLINETEXT_FILEAREA</a>,
<a name="l201"><span class="linenum"> 201</span></a>                                                  <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_onlinetext_submission')" href="../../../../_functions/get_onlinetext_submission.html" onMouseOver="funcPopup(event,'get_onlinetext_submission')">get_onlinetext_submission</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l204"><span class="linenum"> 204</span></a>  
<a name="l205"><span class="linenum"> 205</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l206"><span class="linenum"> 206</span></a>  
<a name="l207"><span class="linenum"> 207</span></a>          <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../../../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;id,
<a name="l208"><span class="linenum"> 208</span></a>                                       'assignsubmission_onlinetext',
<a name="l209"><span class="linenum"> 209</span></a>                                       <a class="constant" onClick="logConstant('ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')" href="../../../../_constants/ASSIGNSUBMISSION_ONLINETEXT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')">ASSIGNSUBMISSION_ONLINETEXT_FILEAREA</a>,
<a name="l210"><span class="linenum"> 210</span></a>                                       <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>,
<a name="l211"><span class="linenum"> 211</span></a>                                       'id',
<a name="l212"><span class="linenum"> 212</span></a>                                       false);
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">        // Check word count before submitting anything.</span>
<a name="l215"><span class="linenum"> 215</span></a>          <a class="var it35728" onMouseOver="hilite(35728)" onMouseOut="lolite()" onClick="logVariable('exceeded')" href="../../../../_variables/exceeded.html">$exceeded</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_word_count')" href="../../../../_functions/check_word_count.html" onMouseOver="funcPopup(event,'check_word_count')">check_word_count</a>(<a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a>));
<a name="l216"><span class="linenum"> 216</span></a>          if (<a class="var it35728" onMouseOver="hilite(35728)" onMouseOut="lolite()" onClick="logVariable('exceeded')" href="../../../../_variables/exceeded.html">$exceeded</a>) {
<a name="l217"><span class="linenum"> 217</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_error')" href="../../../../_functions/set_error.html" onMouseOver="funcPopup(event,'set_error')">set_error</a>(<a class="var it35728" onMouseOver="hilite(35728)" onMouseOut="lolite()" onClick="logVariable('exceeded')" href="../../../../_variables/exceeded.html">$exceeded</a>);
<a name="l218"><span class="linenum"> 218</span></a>              return false;
<a name="l219"><span class="linenum"> 219</span></a>          }
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array(
<a name="l222"><span class="linenum"> 222</span></a>              'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id),
<a name="l223"><span class="linenum"> 223</span></a>              'courseid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l224"><span class="linenum"> 224</span></a>              'objectid' =&gt; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>,
<a name="l225"><span class="linenum"> 225</span></a>              'other' =&gt; array(
<a name="l226"><span class="linenum"> 226</span></a>                  'pathnamehashes' =&gt; <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../../../_variables/files.html">$files</a>),
<a name="l227"><span class="linenum"> 227</span></a>                  'content' =&gt; <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a>),
<a name="l228"><span class="linenum"> 228</span></a>                  'format' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetext_editor')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetext_editor.html">onlinetext_editor</a>['format']
<a name="l229"><span class="linenum"> 229</span></a>              )
<a name="l230"><span class="linenum"> 230</span></a>          );
<a name="l231"><span class="linenum"> 231</span></a>          if (!empty(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a>) &amp;&amp; (<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a> != <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>)) {
<a name="l232"><span class="linenum"> 232</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['relateduserid'] = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a>;
<a name="l233"><span class="linenum"> 233</span></a>          }
<a name="l234"><span class="linenum"> 234</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../../../_variables/event.html">$event</a> = \assignsubmission_onlinetext\event\<a class="class" onClick="logClass('assessable_uploaded')" href="../../../../_classes/assessable_uploaded.html" onMouseOver="classPopup(event,'assessable_uploaded')">assessable_uploaded</a>::<a class="function" onClick="logFunction('create')" href="../../../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>);
<a name="l235"><span class="linenum"> 235</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l236"><span class="linenum"> 236</span></a>  
<a name="l237"><span class="linenum"> 237</span></a>          <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../../../_variables/groupname.html">$groupname</a> = null;
<a name="l238"><span class="linenum"> 238</span></a>          <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../../../_variables/groupid.html">$groupid</a> = 0;
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">        // Get the group name as other fields are not transcribed in the logs and this information is important.</span>
<a name="l240"><span class="linenum"> 240</span></a>          if (empty(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a>) &amp;&amp; !empty(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('groupid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/groupid.html">groupid</a>)) {
<a name="l241"><span class="linenum"> 241</span></a>              <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../../../_variables/groupname.html">$groupname</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('groups', 'name', array('id' =&gt; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('groupid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/groupid.html">groupid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l242"><span class="linenum"> 242</span></a>              <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../../../_variables/groupid.html">$groupid</a> = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('groupid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/groupid.html">groupid</a>;
<a name="l243"><span class="linenum"> 243</span></a>          } else {
<a name="l244"><span class="linenum"> 244</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['relateduserid'] = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a>;
<a name="l245"><span class="linenum"> 245</span></a>          }
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a> = <a class="function" onClick="logFunction('count_words')" href="../../../../_functions/count_words.html" onMouseOver="funcPopup(event,'count_words')">count_words</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a>);
<a name="l248"><span class="linenum"> 248</span></a>  
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">        // Unset the objectid and other field from params for use in submission events.</span>
<a name="l250"><span class="linenum"> 250</span></a>          unset(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['objectid']);
<a name="l251"><span class="linenum"> 251</span></a>          unset(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['other']);
<a name="l252"><span class="linenum"> 252</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['other'] = array(
<a name="l253"><span class="linenum"> 253</span></a>              'submissionid' =&gt; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>,
<a name="l254"><span class="linenum"> 254</span></a>              'submissionattempt' =&gt; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('attemptnumber')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/attemptnumber.html">attemptnumber</a>,
<a name="l255"><span class="linenum"> 255</span></a>              'submissionstatus' =&gt; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('status')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a>,
<a name="l256"><span class="linenum"> 256</span></a>              'onlinetextwordcount' =&gt; <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../../_variables/count.html">$count</a>,
<a name="l257"><span class="linenum"> 257</span></a>              'groupid' =&gt; <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../../../_variables/groupid.html">$groupid</a>,
<a name="l258"><span class="linenum"> 258</span></a>              'groupname' =&gt; <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../../../../_variables/groupname.html">$groupname</a>
<a name="l259"><span class="linenum"> 259</span></a>          );
<a name="l260"><span class="linenum"> 260</span></a>  
<a name="l261"><span class="linenum"> 261</span></a>          if (<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>) {
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a>;
<a name="l264"><span class="linenum"> 264</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlineformat')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlineformat.html">onlineformat</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetext_editor')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetext_editor.html">onlinetext_editor</a>['format'];
<a name="l265"><span class="linenum"> 265</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['objectid'] = <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('id')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l266"><span class="linenum"> 266</span></a>              <a class="var it24336" onMouseOver="hilite(24336)" onMouseOut="lolite()" onClick="logVariable('updatestatus')" href="../../../../_variables/updatestatus.html">$updatestatus</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('assignsubmission_onlinetext', <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>);
<a name="l267"><span class="linenum"> 267</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../../../_variables/event.html">$event</a> = \assignsubmission_onlinetext\event\<a class="class" onClick="logClass('submission_updated')" href="../../../../_classes/submission_updated.html" onMouseOver="classPopup(event,'submission_updated')">submission_updated</a>::<a class="function" onClick="logFunction('create')" href="../../../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>);
<a name="l268"><span class="linenum"> 268</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('set_assign')" href="../../../../_functions/set_assign.html" onMouseOver="funcPopup(event,'set_assign')">set_assign</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>);
<a name="l269"><span class="linenum"> 269</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l270"><span class="linenum"> 270</span></a>              return <a class="var it24336" onMouseOver="hilite(24336)" onMouseOut="lolite()" onClick="logVariable('updatestatus')" href="../../../../_variables/updatestatus.html">$updatestatus</a>;
<a name="l271"><span class="linenum"> 271</span></a>          } else {
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a> = new stdClass();
<a name="l274"><span class="linenum"> 274</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a>;
<a name="l275"><span class="linenum"> 275</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlineformat')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlineformat.html">onlineformat</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetext_editor')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetext_editor.html">onlinetext_editor</a>['format'];
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('submission')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/submission.html">submission</a> = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l278"><span class="linenum"> 278</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('assignment')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l279"><span class="linenum"> 279</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('id')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('assignsubmission_onlinetext', <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>);
<a name="l280"><span class="linenum"> 280</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>['objectid'] = <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('id')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l281"><span class="linenum"> 281</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../../../_variables/event.html">$event</a> = \assignsubmission_onlinetext\event\<a class="class" onClick="logClass('submission_created')" href="../../../../_classes/submission_created.html" onMouseOver="classPopup(event,'submission_created')">submission_created</a>::<a class="function" onClick="logFunction('create')" href="../../../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>);
<a name="l282"><span class="linenum"> 282</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('set_assign')" href="../../../../_functions/set_assign.html" onMouseOver="funcPopup(event,'set_assign')">set_assign</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>);
<a name="l283"><span class="linenum"> 283</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l284"><span class="linenum"> 284</span></a>              return <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('id')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a> &gt; 0;
<a name="l285"><span class="linenum"> 285</span></a>          }
<a name="l286"><span class="linenum"> 286</span></a>      }
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>      <span class="comment">/**</span>
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment">     * Return a list of the text fields that can be imported/exported by this plugin</span>
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">     *</span>
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">     * @return array An array of field names and descriptions. (name=&gt;description, ...)</span>
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">     */</span>
<a name="l293"><span class="linenum"> 293</span></a>      public function <a class="function" onClick="logFunction('get_editor_fields')" href="../../../../_functions/get_editor_fields.html" onMouseOver="funcPopup(event,'get_editor_fields')">get_editor_fields</a>() {
<a name="l294"><span class="linenum"> 294</span></a>          return array('onlinetext' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pluginname', 'assignsubmission_comments'));
<a name="l295"><span class="linenum"> 295</span></a>      }
<a name="l296"><span class="linenum"> 296</span></a>  
<a name="l297"><span class="linenum"> 297</span></a>      <span class="comment">/**</span>
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">     * Get the saved text content from the editor</span>
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment">     *</span>
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">     * @param string $name</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment">     * @param int $submissionid</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">     * @return string</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">     */</span>
<a name="l304"><span class="linenum"> 304</span></a>      public function <a class="function" onClick="logFunction('get_editor_text')" href="../../../../_functions/get_editor_text.html" onMouseOver="funcPopup(event,'get_editor_text')">get_editor_text</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../../_variables/name.html">$name</a>, <a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../../../_variables/submissionid.html">$submissionid</a>) {
<a name="l305"><span class="linenum"> 305</span></a>          if (<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../../_variables/name.html">$name</a> == 'onlinetext') {
<a name="l306"><span class="linenum"> 306</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_onlinetext_submission')" href="../../../../_functions/get_onlinetext_submission.html" onMouseOver="funcPopup(event,'get_onlinetext_submission')">get_onlinetext_submission</a>(<a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../../../_variables/submissionid.html">$submissionid</a>);
<a name="l307"><span class="linenum"> 307</span></a>              if (<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>) {
<a name="l308"><span class="linenum"> 308</span></a>                  return <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a>;
<a name="l309"><span class="linenum"> 309</span></a>              }
<a name="l310"><span class="linenum"> 310</span></a>          }
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>          return '';
<a name="l313"><span class="linenum"> 313</span></a>      }
<a name="l314"><span class="linenum"> 314</span></a>  
<a name="l315"><span class="linenum"> 315</span></a>      <span class="comment">/**</span>
<a name="l316"><span class="linenum"> 316</span></a>  <span class="comment">     * Get the content format for the editor</span>
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">     *</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">     * @param string $name</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">     * @param int $submissionid</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">     * @return int</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">     */</span>
<a name="l322"><span class="linenum"> 322</span></a>      public function <a class="function" onClick="logFunction('get_editor_format')" href="../../../../_functions/get_editor_format.html" onMouseOver="funcPopup(event,'get_editor_format')">get_editor_format</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../../_variables/name.html">$name</a>, <a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../../../_variables/submissionid.html">$submissionid</a>) {
<a name="l323"><span class="linenum"> 323</span></a>          if (<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../../_variables/name.html">$name</a> == 'onlinetext') {
<a name="l324"><span class="linenum"> 324</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_onlinetext_submission')" href="../../../../_functions/get_onlinetext_submission.html" onMouseOver="funcPopup(event,'get_onlinetext_submission')">get_onlinetext_submission</a>(<a class="var it2525" onMouseOver="hilite(2525)" onMouseOut="lolite()" onClick="logVariable('submissionid')" href="../../../../_variables/submissionid.html">$submissionid</a>);
<a name="l325"><span class="linenum"> 325</span></a>              if (<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>) {
<a name="l326"><span class="linenum"> 326</span></a>                  return <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlineformat')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlineformat.html">onlineformat</a>;
<a name="l327"><span class="linenum"> 327</span></a>              }
<a name="l328"><span class="linenum"> 328</span></a>          }
<a name="l329"><span class="linenum"> 329</span></a>  
<a name="l330"><span class="linenum"> 330</span></a>          return 0;
<a name="l331"><span class="linenum"> 331</span></a>      }
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>       <span class="comment">/**</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">      * Display onlinetext word count in the submission status table</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">      *</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">      * @param stdClass $submission</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">      * @param bool $showviewlink - If the summary has been truncated set this to true</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">      * @return string</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">      */</span>
<a name="l341"><span class="linenum"> 341</span></a>      public function <a class="function" onClick="logFunction('view_summary')" href="../../../../_functions/view_summary.html" onMouseOver="funcPopup(event,'view_summary')">view_summary</a>(stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>, &amp; <a class="var it24337" onMouseOver="hilite(24337)" onMouseOut="lolite()" onClick="logVariable('showviewlink')" href="../../../../_variables/showviewlink.html">$showviewlink</a>) {
<a name="l342"><span class="linenum"> 342</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>          <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_onlinetext_submission')" href="../../../../_functions/get_onlinetext_submission.html" onMouseOver="funcPopup(event,'get_onlinetext_submission')">get_onlinetext_submission</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l345"><span class="linenum"> 345</span></a>  <span class="comment">        // Always show the view link.</span>
<a name="l346"><span class="linenum"> 346</span></a>          <a class="var it24337" onMouseOver="hilite(24337)" onMouseOut="lolite()" onClick="logVariable('showviewlink')" href="../../../../_variables/showviewlink.html">$showviewlink</a> = true;
<a name="l347"><span class="linenum"> 347</span></a>  
<a name="l348"><span class="linenum"> 348</span></a>          if (<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>) {
<a name="l349"><span class="linenum"> 349</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../_variables/text.html">$text</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('render_editor_content')" href="../../../../_functions/render_editor_content.html" onMouseOver="funcPopup(event,'render_editor_content')">render_editor_content</a>(<a class="constant" onClick="logConstant('ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')" href="../../../../_constants/ASSIGNSUBMISSION_ONLINETEXT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')">ASSIGNSUBMISSION_ONLINETEXT_FILEAREA</a>,
<a name="l350"><span class="linenum"> 350</span></a>                                                               <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('submission')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/submission.html">submission</a>,
<a name="l351"><span class="linenum"> 351</span></a>                                                               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>(),
<a name="l352"><span class="linenum"> 352</span></a>                                                               'onlinetext',
<a name="l353"><span class="linenum"> 353</span></a>                                                               'assignsubmission_onlinetext');
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>              <a class="var it23268" onMouseOver="hilite(23268)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../../../../_variables/shorttext.html">$shorttext</a> = <a class="function" onClick="logFunction('shorten_text')" href="../../../../_functions/shorten_text.html" onMouseOver="funcPopup(event,'shorten_text')">shorten_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../_variables/text.html">$text</a>, 140);
<a name="l356"><span class="linenum"> 356</span></a>              <a class="var it25260" onMouseOver="hilite(25260)" onMouseOut="lolite()" onClick="logVariable('plagiarismlinks')" href="../../../../_variables/plagiarismlinks.html">$plagiarismlinks</a> = '';
<a name="l357"><span class="linenum"> 357</span></a>  
<a name="l358"><span class="linenum"> 358</span></a>              if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableplagiarism')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/enableplagiarism.html">enableplagiarism</a>)) {
<a name="l359"><span class="linenum"> 359</span></a>                  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/libdir.html">libdir</a> . '/plagiarismlib.php');
<a name="l360"><span class="linenum"> 360</span></a>  
<a name="l361"><span class="linenum"> 361</span></a>                  <a class="var it25260" onMouseOver="hilite(25260)" onMouseOut="lolite()" onClick="logVariable('plagiarismlinks')" href="../../../../_variables/plagiarismlinks.html">$plagiarismlinks</a> .= <a class="function" onClick="logFunction('plagiarism_get_links')" href="../../../../_functions/plagiarism_get_links.html" onMouseOver="funcPopup(event,'plagiarism_get_links')">plagiarism_get_links</a>(array('userid' =&gt; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a>,
<a name="l362"><span class="linenum"> 362</span></a>                      'content' =&gt; <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../_variables/text.html">$text</a>),
<a name="l363"><span class="linenum"> 363</span></a>                      'cmid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l364"><span class="linenum"> 364</span></a>                      'course' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l365"><span class="linenum"> 365</span></a>                      'assignment' =&gt; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('assignment')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>));
<a name="l366"><span class="linenum"> 366</span></a>              }
<a name="l367"><span class="linenum"> 367</span></a>              if (<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../_variables/text.html">$text</a> != <a class="var it23268" onMouseOver="hilite(23268)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../../../../_variables/shorttext.html">$shorttext</a>) {
<a name="l368"><span class="linenum"> 368</span></a>                  <a class="var it35729" onMouseOver="hilite(35729)" onMouseOut="lolite()" onClick="logVariable('wordcount')" href="../../../../_variables/wordcount.html">$wordcount</a> = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('numwords', 'assignsubmission_onlinetext', <a class="function" onClick="logFunction('count_words')" href="../../../../_functions/count_words.html" onMouseOver="funcPopup(event,'count_words')">count_words</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../_variables/text.html">$text</a>));
<a name="l369"><span class="linenum"> 369</span></a>  
<a name="l370"><span class="linenum"> 370</span></a>                  return <a class="var it25260" onMouseOver="hilite(25260)" onMouseOut="lolite()" onClick="logVariable('plagiarismlinks')" href="../../../../_variables/plagiarismlinks.html">$plagiarismlinks</a> . <a class="var it35729" onMouseOver="hilite(35729)" onMouseOut="lolite()" onClick="logVariable('wordcount')" href="../../../../_variables/wordcount.html">$wordcount</a> . <a class="var it23268" onMouseOver="hilite(23268)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../../../../_variables/shorttext.html">$shorttext</a>;
<a name="l371"><span class="linenum"> 371</span></a>              } else {
<a name="l372"><span class="linenum"> 372</span></a>                  return <a class="var it25260" onMouseOver="hilite(25260)" onMouseOut="lolite()" onClick="logVariable('plagiarismlinks')" href="../../../../_variables/plagiarismlinks.html">$plagiarismlinks</a> . <a class="var it23268" onMouseOver="hilite(23268)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../../../../_variables/shorttext.html">$shorttext</a>;
<a name="l373"><span class="linenum"> 373</span></a>              }
<a name="l374"><span class="linenum"> 374</span></a>          }
<a name="l375"><span class="linenum"> 375</span></a>          return '';
<a name="l376"><span class="linenum"> 376</span></a>      }
<a name="l377"><span class="linenum"> 377</span></a>  
<a name="l378"><span class="linenum"> 378</span></a>      <span class="comment">/**</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">     * Produce a list of files suitable for export that represent this submission.</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     *</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">     * @param stdClass $submission - For this is the submission data</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">     * @param stdClass $user - This is the user record for this submission</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">     * @return array - return an array of files indexed by filename</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">     */</span>
<a name="l385"><span class="linenum"> 385</span></a>      public function <a class="function" onClick="logFunction('get_files')" href="../../../../_functions/get_files.html" onMouseOver="funcPopup(event,'get_files')">get_files</a>(stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>, stdClass <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a>) {
<a name="l386"><span class="linenum"> 386</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>          <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../../../_variables/files.html">$files</a> = array();
<a name="l389"><span class="linenum"> 389</span></a>          <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_onlinetext_submission')" href="../../../../_functions/get_onlinetext_submission.html" onMouseOver="funcPopup(event,'get_onlinetext_submission')">get_onlinetext_submission</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l390"><span class="linenum"> 390</span></a>  
<a name="l391"><span class="linenum"> 391</span></a>          if (<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>) {
<a name="l392"><span class="linenum"> 392</span></a>              <a class="var it32150" onMouseOver="hilite(32150)" onMouseOut="lolite()" onClick="logVariable('finaltext')" href="../../../../_variables/finaltext.html">$finaltext</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('download_rewrite_pluginfile_urls')" href="../../../../_functions/download_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'download_rewrite_pluginfile_urls')">download_rewrite_pluginfile_urls</a>(<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>);
<a name="l393"><span class="linenum"> 393</span></a>              <a class="var it8368" onMouseOver="hilite(8368)" onMouseOut="lolite()" onClick="logVariable('formattedtext')" href="../../../../_variables/formattedtext.html">$formattedtext</a> = <a class="function" onClick="logFunction('format_text')" href="../../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it32150" onMouseOver="hilite(32150)" onMouseOut="lolite()" onClick="logVariable('finaltext')" href="../../../../_variables/finaltext.html">$finaltext</a>,
<a name="l394"><span class="linenum"> 394</span></a>                                           <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlineformat')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlineformat.html">onlineformat</a>,
<a name="l395"><span class="linenum"> 395</span></a>                                           array('context'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()));
<a name="l396"><span class="linenum"> 396</span></a>              <a class="var it902" onMouseOver="hilite(902)" onMouseOut="lolite()" onClick="logVariable('head')" href="../../../../_variables/head.html">$head</a> = '&lt;head&gt;&lt;meta charset=&quot;UTF-8&quot;&gt;&lt;/head&gt;';
<a name="l397"><span class="linenum"> 397</span></a>              <a class="var it35730" onMouseOver="hilite(35730)" onMouseOut="lolite()" onClick="logVariable('submissioncontent')" href="../../../../_variables/submissioncontent.html">$submissioncontent</a> = '&lt;!DOCTYPE html&gt;&lt;html&gt;' . <a class="var it902" onMouseOver="hilite(902)" onMouseOut="lolite()" onClick="logVariable('head')" href="../../../../_variables/head.html">$head</a> . '&lt;body&gt;'. <a class="var it8368" onMouseOver="hilite(8368)" onMouseOut="lolite()" onClick="logVariable('formattedtext')" href="../../../../_variables/formattedtext.html">$formattedtext</a> . '&lt;/body&gt;&lt;/html&gt;';
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>              <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a> = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('onlinetextfilename', 'assignsubmission_onlinetext');
<a name="l400"><span class="linenum"> 400</span></a>              <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../../../_variables/files.html">$files</a>[<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a>] = array(<a class="var it35730" onMouseOver="hilite(35730)" onMouseOut="lolite()" onClick="logVariable('submissioncontent')" href="../../../../_variables/submissioncontent.html">$submissioncontent</a>);
<a name="l401"><span class="linenum"> 401</span></a>  
<a name="l402"><span class="linenum"> 402</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l403"><span class="linenum"> 403</span></a>  
<a name="l404"><span class="linenum"> 404</span></a>              <a class="var it35731" onMouseOver="hilite(35731)" onMouseOut="lolite()" onClick="logVariable('fsfiles')" href="../../../../_variables/fsfiles.html">$fsfiles</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;id,
<a name="l405"><span class="linenum"> 405</span></a>                                             'assignsubmission_onlinetext',
<a name="l406"><span class="linenum"> 406</span></a>                                             <a class="constant" onClick="logConstant('ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')" href="../../../../_constants/ASSIGNSUBMISSION_ONLINETEXT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')">ASSIGNSUBMISSION_ONLINETEXT_FILEAREA</a>,
<a name="l407"><span class="linenum"> 407</span></a>                                             <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>,
<a name="l408"><span class="linenum"> 408</span></a>                                             'timemodified',
<a name="l409"><span class="linenum"> 409</span></a>                                             false);
<a name="l410"><span class="linenum"> 410</span></a>  
<a name="l411"><span class="linenum"> 411</span></a>              foreach (<a class="var it35731" onMouseOver="hilite(35731)" onMouseOut="lolite()" onClick="logVariable('fsfiles')" href="../../../../_variables/fsfiles.html">$fsfiles</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../../_variables/file.html">$file</a>) {
<a name="l412"><span class="linenum"> 412</span></a>                  <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../../../_variables/files.html">$files</a>[<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../../../../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>()] = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../../_variables/file.html">$file</a>;
<a name="l413"><span class="linenum"> 413</span></a>              }
<a name="l414"><span class="linenum"> 414</span></a>          }
<a name="l415"><span class="linenum"> 415</span></a>  
<a name="l416"><span class="linenum"> 416</span></a>          return <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../../../_variables/files.html">$files</a>;
<a name="l417"><span class="linenum"> 417</span></a>      }
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>      <span class="comment">/**</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">     * Display the saved text content from the editor in the view table</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">     *</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">     * @param stdClass $submission</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">     * @return string</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">     */</span>
<a name="l425"><span class="linenum"> 425</span></a>      public function <a class="function" onClick="logFunction('view')" href="../../../../_functions/view.html" onMouseOver="funcPopup(event,'view')">view</a>(stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>) {
<a name="l426"><span class="linenum"> 426</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l427"><span class="linenum"> 427</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = '';
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>          <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_onlinetext_submission')" href="../../../../_functions/get_onlinetext_submission.html" onMouseOver="funcPopup(event,'get_onlinetext_submission')">get_onlinetext_submission</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l430"><span class="linenum"> 430</span></a>  
<a name="l431"><span class="linenum"> 431</span></a>          if (<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>) {
<a name="l432"><span class="linenum"> 432</span></a>  
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">            // Render for portfolio API.</span>
<a name="l434"><span class="linenum"> 434</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('render_editor_content')" href="../../../../_functions/render_editor_content.html" onMouseOver="funcPopup(event,'render_editor_content')">render_editor_content</a>(<a class="constant" onClick="logConstant('ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')" href="../../../../_constants/ASSIGNSUBMISSION_ONLINETEXT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')">ASSIGNSUBMISSION_ONLINETEXT_FILEAREA</a>,
<a name="l435"><span class="linenum"> 435</span></a>                                                                  <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('submission')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/submission.html">submission</a>,
<a name="l436"><span class="linenum"> 436</span></a>                                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>(),
<a name="l437"><span class="linenum"> 437</span></a>                                                                  'onlinetext',
<a name="l438"><span class="linenum"> 438</span></a>                                                                  'assignsubmission_onlinetext');
<a name="l439"><span class="linenum"> 439</span></a>  
<a name="l440"><span class="linenum"> 440</span></a>              <a class="var it25260" onMouseOver="hilite(25260)" onMouseOut="lolite()" onClick="logVariable('plagiarismlinks')" href="../../../../_variables/plagiarismlinks.html">$plagiarismlinks</a> = '';
<a name="l441"><span class="linenum"> 441</span></a>  
<a name="l442"><span class="linenum"> 442</span></a>              if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableplagiarism')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/enableplagiarism.html">enableplagiarism</a>)) {
<a name="l443"><span class="linenum"> 443</span></a>                  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/libdir.html">libdir</a> . '/plagiarismlib.php');
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>                  <a class="var it25260" onMouseOver="hilite(25260)" onMouseOut="lolite()" onClick="logVariable('plagiarismlinks')" href="../../../../_variables/plagiarismlinks.html">$plagiarismlinks</a> .= <a class="function" onClick="logFunction('plagiarism_get_links')" href="../../../../_functions/plagiarism_get_links.html" onMouseOver="funcPopup(event,'plagiarism_get_links')">plagiarism_get_links</a>(array('userid' =&gt; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a>,
<a name="l446"><span class="linenum"> 446</span></a>                      'content' =&gt; <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>),
<a name="l447"><span class="linenum"> 447</span></a>                      'cmid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_course_module')" href="../../../../_functions/get_course_module.html" onMouseOver="funcPopup(event,'get_course_module')">get_course_module</a>()-&gt;id,
<a name="l448"><span class="linenum"> 448</span></a>                      'course' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_course')" href="../../../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>()-&gt;id,
<a name="l449"><span class="linenum"> 449</span></a>                      'assignment' =&gt; <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('assignment')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>));
<a name="l450"><span class="linenum"> 450</span></a>              }
<a name="l451"><span class="linenum"> 451</span></a>          }
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>          return <a class="var it25260" onMouseOver="hilite(25260)" onMouseOut="lolite()" onClick="logVariable('plagiarismlinks')" href="../../../../_variables/plagiarismlinks.html">$plagiarismlinks</a> . <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>;
<a name="l454"><span class="linenum"> 454</span></a>      }
<a name="l455"><span class="linenum"> 455</span></a>  
<a name="l456"><span class="linenum"> 456</span></a>      <span class="comment">/**</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">     * Return true if this plugin can upgrade an old Moodle 2.2 assignment of this type and version.</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">     *</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">     * @param string $type old assignment subtype</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">     * @param int $version old assignment version</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">     * @return bool True if upgrade is possible</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">     */</span>
<a name="l463"><span class="linenum"> 463</span></a>      public function <a class="function" onClick="logFunction('can_upgrade')" href="../../../../_functions/can_upgrade.html" onMouseOver="funcPopup(event,'can_upgrade')">can_upgrade</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../../../_variables/version.html">$version</a>) {
<a name="l464"><span class="linenum"> 464</span></a>          if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a> == 'online' &amp;&amp; <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../../../../_variables/version.html">$version</a> &gt;= 2011112900) {
<a name="l465"><span class="linenum"> 465</span></a>              return true;
<a name="l466"><span class="linenum"> 466</span></a>          }
<a name="l467"><span class="linenum"> 467</span></a>          return false;
<a name="l468"><span class="linenum"> 468</span></a>      }
<a name="l469"><span class="linenum"> 469</span></a>  
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>      <span class="comment">/**</span>
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">     * Upgrade the settings from the old assignment to the new plugin based one</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">     *</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">     * @param context $oldcontext - the database for the old assignment context</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">     * @param stdClass $oldassignment - the database for the old assignment instance</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     * @param string $log record log events here</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     * @return bool Was it a success?</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     */</span>
<a name="l479"><span class="linenum"> 479</span></a>      public function <a class="function" onClick="logFunction('upgrade_settings')" href="../../../../_functions/upgrade_settings.html" onMouseOver="funcPopup(event,'upgrade_settings')">upgrade_settings</a>(context <a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('oldcontext')" href="../../../../_variables/oldcontext.html">$oldcontext</a>, stdClass <a class="var it24340" onMouseOver="hilite(24340)" onMouseOut="lolite()" onClick="logVariable('oldassignment')" href="../../../../_variables/oldassignment.html">$oldassignment</a>, &amp; <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../../../_variables/log.html">$log</a>) {
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">        // No settings to upgrade.</span>
<a name="l481"><span class="linenum"> 481</span></a>          return true;
<a name="l482"><span class="linenum"> 482</span></a>      }
<a name="l483"><span class="linenum"> 483</span></a>  
<a name="l484"><span class="linenum"> 484</span></a>      <span class="comment">/**</span>
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment">     * Upgrade the submission from the old assignment to the new one</span>
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment">     *</span>
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment">     * @param context $oldcontext - the database for the old assignment context</span>
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment">     * @param stdClass $oldassignment The data record for the old assignment</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">     * @param stdClass $oldsubmission The data record for the old submission</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment">     * @param stdClass $submission The data record for the new submission</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">     * @param string $log Record upgrade messages in the log</span>
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment">     * @return bool true or false - false will trigger a rollback</span>
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment">     */</span>
<a name="l494"><span class="linenum"> 494</span></a>      public function <a class="function" onClick="logFunction('upgrade')" href="../../../../_functions/upgrade.html" onMouseOver="funcPopup(event,'upgrade')">upgrade</a>(context <a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('oldcontext')" href="../../../../_variables/oldcontext.html">$oldcontext</a>,
<a name="l495"><span class="linenum"> 495</span></a>                              stdClass <a class="var it24340" onMouseOver="hilite(24340)" onMouseOut="lolite()" onClick="logVariable('oldassignment')" href="../../../../_variables/oldassignment.html">$oldassignment</a>,
<a name="l496"><span class="linenum"> 496</span></a>                              stdClass <a class="var it24346" onMouseOver="hilite(24346)" onMouseOut="lolite()" onClick="logVariable('oldsubmission')" href="../../../../_variables/oldsubmission.html">$oldsubmission</a>,
<a name="l497"><span class="linenum"> 497</span></a>                              stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>,
<a name="l498"><span class="linenum"> 498</span></a>                              &amp; <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../../../_variables/log.html">$log</a>) {
<a name="l499"><span class="linenum"> 499</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l500"><span class="linenum"> 500</span></a>  
<a name="l501"><span class="linenum"> 501</span></a>          <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a> = new stdClass();
<a name="l502"><span class="linenum"> 502</span></a>          <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a> = <a class="var it24346" onMouseOver="hilite(24346)" onMouseOut="lolite()" onClick="logVariable('oldsubmission')" href="../../../../_variables/oldsubmission.html">$oldsubmission</a>-&gt;<a onClick="logVariable('data1')" class="var it43959" onMouseOver="hilite(43959)" onMouseOut="lolite()" href="../../../../_variables/data1.html">data1</a>;
<a name="l503"><span class="linenum"> 503</span></a>          <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlineformat')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlineformat.html">onlineformat</a> = <a class="var it24346" onMouseOver="hilite(24346)" onMouseOut="lolite()" onClick="logVariable('oldsubmission')" href="../../../../_variables/oldsubmission.html">$oldsubmission</a>-&gt;<a onClick="logVariable('data2')" class="var it43959" onMouseOver="hilite(43959)" onMouseOut="lolite()" href="../../../../_variables/data2.html">data2</a>;
<a name="l504"><span class="linenum"> 504</span></a>  
<a name="l505"><span class="linenum"> 505</span></a>          <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('submission')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/submission.html">submission</a> = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l506"><span class="linenum"> 506</span></a>          <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('assignment')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id;
<a name="l507"><span class="linenum"> 507</span></a>  
<a name="l508"><span class="linenum"> 508</span></a>          if (<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a> === null) {
<a name="l509"><span class="linenum"> 509</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a> = '';
<a name="l510"><span class="linenum"> 510</span></a>          }
<a name="l511"><span class="linenum"> 511</span></a>  
<a name="l512"><span class="linenum"> 512</span></a>          if (<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlineformat')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlineformat.html">onlineformat</a> === null) {
<a name="l513"><span class="linenum"> 513</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlineformat')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlineformat.html">onlineformat</a> = <a class="function" onClick="logFunction('editors_get_preferred_format')" href="../../../../_functions/editors_get_preferred_format.html" onMouseOver="funcPopup(event,'editors_get_preferred_format')">editors_get_preferred_format</a>();
<a name="l514"><span class="linenum"> 514</span></a>          }
<a name="l515"><span class="linenum"> 515</span></a>  
<a name="l516"><span class="linenum"> 516</span></a>          if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('assignsubmission_onlinetext', <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>) &gt; 0) {
<a name="l517"><span class="linenum"> 517</span></a>              <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../../../_variables/log.html">$log</a> .= <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('couldnotconvertsubmission', 'mod_assign', <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('userid')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a>);
<a name="l518"><span class="linenum"> 518</span></a>              return false;
<a name="l519"><span class="linenum"> 519</span></a>          }
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">        // Now copy the area files.</span>
<a name="l522"><span class="linenum"> 522</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('copy_area_files_for_upgrade')" href="../../../../_functions/copy_area_files_for_upgrade.html" onMouseOver="funcPopup(event,'copy_area_files_for_upgrade')">copy_area_files_for_upgrade</a>(<a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('oldcontext')" href="../../../../_variables/oldcontext.html">$oldcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43400" onMouseOver="hilite(43400)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>,
<a name="l523"><span class="linenum"> 523</span></a>                                                          'mod_assignment',
<a name="l524"><span class="linenum"> 524</span></a>                                                          'submission',
<a name="l525"><span class="linenum"> 525</span></a>                                                          <a class="var it24346" onMouseOver="hilite(24346)" onMouseOut="lolite()" onClick="logVariable('oldsubmission')" href="../../../../_variables/oldsubmission.html">$oldsubmission</a>-&gt;<a onClick="logVariable('id')" class="var it43959" onMouseOver="hilite(43959)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>,
<a name="l526"><span class="linenum"> 526</span></a>                                                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;id,
<a name="l527"><span class="linenum"> 527</span></a>                                                          'assignsubmission_onlinetext',
<a name="l528"><span class="linenum"> 528</span></a>                                                          <a class="constant" onClick="logConstant('ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')" href="../../../../_constants/ASSIGNSUBMISSION_ONLINETEXT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')">ASSIGNSUBMISSION_ONLINETEXT_FILEAREA</a>,
<a name="l529"><span class="linenum"> 529</span></a>                                                          <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l530"><span class="linenum"> 530</span></a>          return true;
<a name="l531"><span class="linenum"> 531</span></a>      }
<a name="l532"><span class="linenum"> 532</span></a>  
<a name="l533"><span class="linenum"> 533</span></a>      <span class="comment">/**</span>
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">     * Formatting for log info</span>
<a name="l535"><span class="linenum"> 535</span></a>  <span class="comment">     *</span>
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">     * @param stdClass $submission The new submission</span>
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">     * @return string</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">     */</span>
<a name="l539"><span class="linenum"> 539</span></a>      public function <a class="function" onClick="logFunction('format_for_log')" href="../../../../_functions/format_for_log.html" onMouseOver="funcPopup(event,'format_for_log')">format_for_log</a>(stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>) {
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">        // Format the info for each submission plugin (will be logged).</span>
<a name="l541"><span class="linenum"> 541</span></a>          <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_onlinetext_submission')" href="../../../../_functions/get_onlinetext_submission.html" onMouseOver="funcPopup(event,'get_onlinetext_submission')">get_onlinetext_submission</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l542"><span class="linenum"> 542</span></a>          <a class="var it35732" onMouseOver="hilite(35732)" onMouseOut="lolite()" onClick="logVariable('onlinetextloginfo')" href="../../../../_variables/onlinetextloginfo.html">$onlinetextloginfo</a> = '';
<a name="l543"><span class="linenum"> 543</span></a>          <a class="var it35732" onMouseOver="hilite(35732)" onMouseOut="lolite()" onClick="logVariable('onlinetextloginfo')" href="../../../../_variables/onlinetextloginfo.html">$onlinetextloginfo</a> .= <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('numwordsforlog',
<a name="l544"><span class="linenum"> 544</span></a>                                           'assignsubmission_onlinetext',
<a name="l545"><span class="linenum"> 545</span></a>                                           <a class="function" onClick="logFunction('count_words')" href="../../../../_functions/count_words.html" onMouseOver="funcPopup(event,'count_words')">count_words</a>(<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a>));
<a name="l546"><span class="linenum"> 546</span></a>  
<a name="l547"><span class="linenum"> 547</span></a>          return <a class="var it35732" onMouseOver="hilite(35732)" onMouseOut="lolite()" onClick="logVariable('onlinetextloginfo')" href="../../../../_variables/onlinetextloginfo.html">$onlinetextloginfo</a>;
<a name="l548"><span class="linenum"> 548</span></a>      }
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>      <span class="comment">/**</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">     * The assignment has been deleted - cleanup</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">     *</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">     * @return bool</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">     */</span>
<a name="l555"><span class="linenum"> 555</span></a>      public function <a class="function" onClick="logFunction('delete_instance')" href="../../../../_functions/delete_instance.html" onMouseOver="funcPopup(event,'delete_instance')">delete_instance</a>() {
<a name="l556"><span class="linenum"> 556</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l557"><span class="linenum"> 557</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('assignsubmission_onlinetext',
<a name="l558"><span class="linenum"> 558</span></a>                              array('assignment'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_instance')" href="../../../../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>()-&gt;id));
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>          return true;
<a name="l561"><span class="linenum"> 561</span></a>      }
<a name="l562"><span class="linenum"> 562</span></a>  
<a name="l563"><span class="linenum"> 563</span></a>      <span class="comment">/**</span>
<a name="l564"><span class="linenum"> 564</span></a>  <span class="comment">     * No text is set for this plugin</span>
<a name="l565"><span class="linenum"> 565</span></a>  <span class="comment">     *</span>
<a name="l566"><span class="linenum"> 566</span></a>  <span class="comment">     * @param stdClass $submission</span>
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment">     * @return bool</span>
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment">     */</span>
<a name="l569"><span class="linenum"> 569</span></a>      public function <a class="function" onClick="logFunction('is_empty')" href="../../../../_functions/is_empty.html" onMouseOver="funcPopup(event,'is_empty')">is_empty</a>(stdClass <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>) {
<a name="l570"><span class="linenum"> 570</span></a>          <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_onlinetext_submission')" href="../../../../_functions/get_onlinetext_submission.html" onMouseOver="funcPopup(event,'get_onlinetext_submission')">get_onlinetext_submission</a>(<a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it42978" onMouseOver="hilite(42978)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>          return empty(<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('onlinetext')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/onlinetext.html">onlinetext</a>);
<a name="l573"><span class="linenum"> 573</span></a>      }
<a name="l574"><span class="linenum"> 574</span></a>  
<a name="l575"><span class="linenum"> 575</span></a>      <span class="comment">/**</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">     * Determine if a submission is empty</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">     *</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment">     * This is distinct from is_empty in that it is intended to be used to</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">     * determine if a submission made before saving is empty.</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">     *</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">     * @param stdClass $data The submission data</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     * @return bool</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     */</span>
<a name="l584"><span class="linenum"> 584</span></a>      public function <a class="function" onClick="logFunction('submission_is_empty')" href="../../../../_functions/submission_is_empty.html" onMouseOver="funcPopup(event,'submission_is_empty')">submission_is_empty</a>(stdClass <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>) {
<a name="l585"><span class="linenum"> 585</span></a>          if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetext_editor')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetext_editor.html">onlinetext_editor</a>)) {
<a name="l586"><span class="linenum"> 586</span></a>              return true;
<a name="l587"><span class="linenum"> 587</span></a>          }
<a name="l588"><span class="linenum"> 588</span></a>          return !<a class="function" onClick="logFunction('strlen')" href="../../../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>((string)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('onlinetext_editor')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/onlinetext_editor.html">onlinetext_editor</a>['text']);
<a name="l589"><span class="linenum"> 589</span></a>      }
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>      <span class="comment">/**</span>
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment">     * Get file areas returns a list of areas this plugin stores files</span>
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment">     * @return array - An array of fileareas (keys) and descriptions (values)</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment">     */</span>
<a name="l595"><span class="linenum"> 595</span></a>      public function <a class="function" onClick="logFunction('get_file_areas')" href="../../../../_functions/get_file_areas.html" onMouseOver="funcPopup(event,'get_file_areas')">get_file_areas</a>() {
<a name="l596"><span class="linenum"> 596</span></a>          return array(<a class="constant" onClick="logConstant('ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')" href="../../../../_constants/ASSIGNSUBMISSION_ONLINETEXT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')">ASSIGNSUBMISSION_ONLINETEXT_FILEAREA</a>=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>());
<a name="l597"><span class="linenum"> 597</span></a>      }
<a name="l598"><span class="linenum"> 598</span></a>  
<a name="l599"><span class="linenum"> 599</span></a>      <span class="comment">/**</span>
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment">     * Copy the student's submission from a previous submission. Used when a student opts to base their resubmission</span>
<a name="l601"><span class="linenum"> 601</span></a>  <span class="comment">     * on the last submission.</span>
<a name="l602"><span class="linenum"> 602</span></a>  <span class="comment">     * @param stdClass $sourcesubmission</span>
<a name="l603"><span class="linenum"> 603</span></a>  <span class="comment">     * @param stdClass $destsubmission</span>
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">     */</span>
<a name="l605"><span class="linenum"> 605</span></a>      public function <a class="function" onClick="logFunction('copy_submission')" href="../../../../_functions/copy_submission.html" onMouseOver="funcPopup(event,'copy_submission')">copy_submission</a>(stdClass <a class="var it24348" onMouseOver="hilite(24348)" onMouseOut="lolite()" onClick="logVariable('sourcesubmission')" href="../../../../_variables/sourcesubmission.html">$sourcesubmission</a>, stdClass <a class="var it24349" onMouseOver="hilite(24349)" onMouseOut="lolite()" onClick="logVariable('destsubmission')" href="../../../../_variables/destsubmission.html">$destsubmission</a>) {
<a name="l606"><span class="linenum"> 606</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l607"><span class="linenum"> 607</span></a>  
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment">        // Copy the files across (attached via the text editor).</span>
<a name="l609"><span class="linenum"> 609</span></a>          <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../../../_variables/contextid.html">$contextid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('assignment')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;id;
<a name="l610"><span class="linenum"> 610</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l611"><span class="linenum"> 611</span></a>          <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../../../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../../../_variables/contextid.html">$contextid</a>, 'assignsubmission_onlinetext',
<a name="l612"><span class="linenum"> 612</span></a>                                       <a class="constant" onClick="logConstant('ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')" href="../../../../_constants/ASSIGNSUBMISSION_ONLINETEXT_FILEAREA.html" onMouseOver="constPopup(event,'ASSIGNSUBMISSION_ONLINETEXT_FILEAREA')">ASSIGNSUBMISSION_ONLINETEXT_FILEAREA</a>, <a class="var it24348" onMouseOver="hilite(24348)" onMouseOut="lolite()" onClick="logVariable('sourcesubmission')" href="../../../../_variables/sourcesubmission.html">$sourcesubmission</a>-&gt;<a onClick="logVariable('id')" class="var it43961" onMouseOver="hilite(43961)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>, 'id', false);
<a name="l613"><span class="linenum"> 613</span></a>          foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../../../_variables/files.html">$files</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../../_variables/file.html">$file</a>) {
<a name="l614"><span class="linenum"> 614</span></a>              <a class="var it24350" onMouseOver="hilite(24350)" onMouseOut="lolite()" onClick="logVariable('fieldupdates')" href="../../../../_variables/fieldupdates.html">$fieldupdates</a> = array('itemid' =&gt; <a class="var it24349" onMouseOver="hilite(24349)" onMouseOut="lolite()" onClick="logVariable('destsubmission')" href="../../../../_variables/destsubmission.html">$destsubmission</a>-&gt;<a onClick="logVariable('id')" class="var it43962" onMouseOver="hilite(43962)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l615"><span class="linenum"> 615</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_storedfile')" href="../../../../_functions/create_file_from_storedfile.html" onMouseOver="funcPopup(event,'create_file_from_storedfile')">create_file_from_storedfile</a>(<a class="var it24350" onMouseOver="hilite(24350)" onMouseOut="lolite()" onClick="logVariable('fieldupdates')" href="../../../../_variables/fieldupdates.html">$fieldupdates</a>, <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../../_variables/file.html">$file</a>);
<a name="l616"><span class="linenum"> 616</span></a>          }
<a name="l617"><span class="linenum"> 617</span></a>  
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment">        // Copy the assignsubmission_onlinetext record.</span>
<a name="l619"><span class="linenum"> 619</span></a>          <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_onlinetext_submission')" href="../../../../_functions/get_onlinetext_submission.html" onMouseOver="funcPopup(event,'get_onlinetext_submission')">get_onlinetext_submission</a>(<a class="var it24348" onMouseOver="hilite(24348)" onMouseOut="lolite()" onClick="logVariable('sourcesubmission')" href="../../../../_variables/sourcesubmission.html">$sourcesubmission</a>-&gt;<a onClick="logVariable('id')" class="var it43961" onMouseOver="hilite(43961)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l620"><span class="linenum"> 620</span></a>          if (<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>) {
<a name="l621"><span class="linenum"> 621</span></a>              unset(<a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('id')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l622"><span class="linenum"> 622</span></a>              <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>-&gt;<a onClick="logVariable('submission')" class="var it43793" onMouseOver="hilite(43793)" onMouseOut="lolite()" href="../../../../_variables/submission.html">submission</a> = <a class="var it24349" onMouseOver="hilite(24349)" onMouseOut="lolite()" onClick="logVariable('destsubmission')" href="../../../../_variables/destsubmission.html">$destsubmission</a>-&gt;<a onClick="logVariable('id')" class="var it43962" onMouseOver="hilite(43962)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l623"><span class="linenum"> 623</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('assignsubmission_onlinetext', <a class="var it35726" onMouseOver="hilite(35726)" onMouseOut="lolite()" onClick="logVariable('onlinetextsubmission')" href="../../../../_variables/onlinetextsubmission.html">$onlinetextsubmission</a>);
<a name="l624"><span class="linenum"> 624</span></a>          }
<a name="l625"><span class="linenum"> 625</span></a>          return true;
<a name="l626"><span class="linenum"> 626</span></a>      }
<a name="l627"><span class="linenum"> 627</span></a>  
<a name="l628"><span class="linenum"> 628</span></a>      <span class="comment">/**</span>
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">     * Return a description of external params suitable for uploading an onlinetext submission from a webservice.</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">     *</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment">     * @return external_description|null</span>
<a name="l632"><span class="linenum"> 632</span></a>  <span class="comment">     */</span>
<a name="l633"><span class="linenum"> 633</span></a>      public function <a class="function" onClick="logFunction('get_external_parameters')" href="../../../../_functions/get_external_parameters.html" onMouseOver="funcPopup(event,'get_external_parameters')">get_external_parameters</a>() {
<a name="l634"><span class="linenum"> 634</span></a>          <a class="var it6171" onMouseOver="hilite(6171)" onMouseOut="lolite()" onClick="logVariable('editorparams')" href="../../../../_variables/editorparams.html">$editorparams</a> = array('text' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'The text for this submission.'),
<a name="l635"><span class="linenum"> 635</span></a>                                'format' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The format for this submission'),
<a name="l636"><span class="linenum"> 636</span></a>                                'itemid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The draft area id for files attached to the submission'));
<a name="l637"><span class="linenum"> 637</span></a>          <a class="var it26800" onMouseOver="hilite(26800)" onMouseOut="lolite()" onClick="logVariable('editorstructure')" href="../../../../_variables/editorstructure.html">$editorstructure</a> = <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(<a class="var it6171" onMouseOver="hilite(6171)" onMouseOut="lolite()" onClick="logVariable('editorparams')" href="../../../../_variables/editorparams.html">$editorparams</a>, 'Editor structure', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>);
<a name="l638"><span class="linenum"> 638</span></a>          return array('onlinetext_editor' =&gt; <a class="var it26800" onMouseOver="hilite(26800)" onMouseOut="lolite()" onClick="logVariable('editorstructure')" href="../../../../_variables/editorstructure.html">$editorstructure</a>);
<a name="l639"><span class="linenum"> 639</span></a>      }
<a name="l640"><span class="linenum"> 640</span></a>  
<a name="l641"><span class="linenum"> 641</span></a>      <span class="comment">/**</span>
<a name="l642"><span class="linenum"> 642</span></a>  <span class="comment">     * Compare word count of onlinetext submission to word limit, and return result.</span>
<a name="l643"><span class="linenum"> 643</span></a>  <span class="comment">     *</span>
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment">     * @param string $submissiontext Onlinetext submission text from editor</span>
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">     * @return string Error message if limit is enabled and exceeded, otherwise null</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">     */</span>
<a name="l647"><span class="linenum"> 647</span></a>      public function <a class="function" onClick="logFunction('check_word_count')" href="../../../../_functions/check_word_count.html" onMouseOver="funcPopup(event,'check_word_count')">check_word_count</a>(<a class="var it35733" onMouseOver="hilite(35733)" onMouseOut="lolite()" onClick="logVariable('submissiontext')" href="../../../../_variables/submissiontext.html">$submissiontext</a>) {
<a name="l648"><span class="linenum"> 648</span></a>          global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l649"><span class="linenum"> 649</span></a>  
<a name="l650"><span class="linenum"> 650</span></a>          <a class="var it35723" onMouseOver="hilite(35723)" onMouseOut="lolite()" onClick="logVariable('wordlimitenabled')" href="../../../../_variables/wordlimitenabled.html">$wordlimitenabled</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_config')" href="../../../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('wordlimitenabled');
<a name="l651"><span class="linenum"> 651</span></a>          <a class="var it35722" onMouseOver="hilite(35722)" onMouseOut="lolite()" onClick="logVariable('wordlimit')" href="../../../../_variables/wordlimit.html">$wordlimit</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_config')" href="../../../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('wordlimit');
<a name="l652"><span class="linenum"> 652</span></a>  
<a name="l653"><span class="linenum"> 653</span></a>          if (<a class="var it35723" onMouseOver="hilite(35723)" onMouseOut="lolite()" onClick="logVariable('wordlimitenabled')" href="../../../../_variables/wordlimitenabled.html">$wordlimitenabled</a> == 0) {
<a name="l654"><span class="linenum"> 654</span></a>              return null;
<a name="l655"><span class="linenum"> 655</span></a>          }
<a name="l656"><span class="linenum"> 656</span></a>  
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment">        // Count words and compare to limit.</span>
<a name="l658"><span class="linenum"> 658</span></a>          <a class="var it35729" onMouseOver="hilite(35729)" onMouseOut="lolite()" onClick="logVariable('wordcount')" href="../../../../_variables/wordcount.html">$wordcount</a> = <a class="function" onClick="logFunction('count_words')" href="../../../../_functions/count_words.html" onMouseOver="funcPopup(event,'count_words')">count_words</a>(<a class="var it35733" onMouseOver="hilite(35733)" onMouseOut="lolite()" onClick="logVariable('submissiontext')" href="../../../../_variables/submissiontext.html">$submissiontext</a>);
<a name="l659"><span class="linenum"> 659</span></a>          if (<a class="var it35729" onMouseOver="hilite(35729)" onMouseOut="lolite()" onClick="logVariable('wordcount')" href="../../../../_variables/wordcount.html">$wordcount</a> &lt;= <a class="var it35722" onMouseOver="hilite(35722)" onMouseOut="lolite()" onClick="logVariable('wordlimit')" href="../../../../_variables/wordlimit.html">$wordlimit</a>) {
<a name="l660"><span class="linenum"> 660</span></a>              return null;
<a name="l661"><span class="linenum"> 661</span></a>          } else {
<a name="l662"><span class="linenum"> 662</span></a>              <a class="var it274" onMouseOver="hilite(274)" onMouseOut="lolite()" onClick="logVariable('errormsg')" href="../../../../_variables/errormsg.html">$errormsg</a> = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('wordlimitexceeded', 'assignsubmission_onlinetext',
<a name="l663"><span class="linenum"> 663</span></a>                      array('limit' =&gt; <a class="var it35722" onMouseOver="hilite(35722)" onMouseOut="lolite()" onClick="logVariable('wordlimit')" href="../../../../_variables/wordlimit.html">$wordlimit</a>, 'count' =&gt; <a class="var it35729" onMouseOver="hilite(35729)" onMouseOut="lolite()" onClick="logVariable('wordcount')" href="../../../../_variables/wordcount.html">$wordcount</a>));
<a name="l664"><span class="linenum"> 664</span></a>              return <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('error_text')" href="../../../../_functions/error_text.html" onMouseOver="funcPopup(event,'error_text')">error_text</a>(<a class="var it274" onMouseOver="hilite(274)" onMouseOut="lolite()" onClick="logVariable('errormsg')" href="../../../../_variables/errormsg.html">$errormsg</a>);
<a name="l665"><span class="linenum"> 665</span></a>          }
<a name="l666"><span class="linenum"> 666</span></a>      }
<a name="l667"><span class="linenum"> 667</span></a>  
<a name="l668"><span class="linenum"> 668</span></a>  }
<a name="l669"><span class="linenum"> 669</span></a>  
<a name="l670"><span class="linenum"> 670</span></a>  
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_name': ['get_name', 'Return localised event name. ', [['lib/classes/event','competency_plan_unlinked.php',72],['admin/tool/langimport/classes/task','update_langpacks_task.php',35],['lib/simplepie/library/SimplePie','Author.php',106],['portfolio/download','lib.php',10],['backup/util/structure','restore_path_element.class.php',98],['lib/classes/message/inbound','private_files_handler.php',56],['lib/classes/event','grouping_group_assigned.php',48],['calendar/tests','calendartype_test_example.php',32],['lib/classes/event','enrol_instance_deleted.php',70],['report/log/classes/event','user_report_viewed.php',54],['lib/classes/task','blog_cron_task.php',31],['mod/quiz/classes/event','attempt_reviewed.php',53],['lib/classes/event','tag_unflagged.php',55],['lib/classes/task','send_new_user_passwords_task.php',31],['lib/classes/event','role_unassigned.php',53],['mod/assign/classes/event','grading_form_viewed.php',82],['question/classes/bank','edit_action_column.php',35],['admin/tool/log/store/standard/classes/task','cleanup_task.php',31],['mod/workshop/classes/event','submission_deleted.php',63],['mod/forum/classes/event','discussion_updated.php',65],['lib/classes/event','course_module_instance_list_viewed.php',75],['lib/classes/event','course_created.php',55],['lib/dml','pdo_moodle_database.php',113],['mod/assign/classes/event','extension_granted.php',77],['lib/classes/task','tag_cron_task.php',33],['enrol/imsenterprise/classes/task','cron_task.php',34],['lib/classes/event','course_deleted.php',56],['lib/classes/task','completion_daily_task.php',33],['mod/forum/classes/event','readtracking_enabled.php',64],['mod/wiki/classes/event','page_created.php',48],['lib/dml','oci_native_moodle_database.php',94],['lib/classes/event','competency_viewed.php',70],['mod/choice/classes/event','answer_updated.php',72],['lib/classes/event','search_indexed.php',47],['lib/classes/event','badge_criteria_updated.php',53],['question/classes/bank','question_type_column.php',26],['mod/wiki/classes/event','page_version_deleted.php',54],['lib/grade','grade_item.php',1384],['lib/classes/event','competency_user_competency_rated_in_plan.php',88],['lib/classes/event','webservice_token_sent.php',56],['mod/glossary/classes/event','entry_deleted.php',54],['admin/tool/messageinbound/classes/message/inbound','invalid_recipient_handler.php',60],['lib/classes/event','competency_template_viewed.php',63],['lib/classes/task','context_cleanup_task.php',32],['mod/assign/tests/fixtures','event_mod_assign_fixtures.php',62],['admin/tool/langimport/classes/event','langpack_removed.php',89],['mod/glossary/classes/event','category_deleted.php',46],['mod/forum/classes/message/inbound','reply_handler.php',51],['competency/classes','competency_rule.php',84],['mod/lti/classes/event','unknown_service_api_called.php',82],['lib/classes/event','badge_deleted.php',49],['mod/quiz/classes/event','user_override_updated.php',54],['lib/classes/event','message_contact_added.php',48],['lib/classes/event','cohort_member_added.php',49],['backup/util/ui','restore_ui.class.php',351],['lib/classes/event','blog_entry_updated.php',74],['mod/assign/classes/event','workflow_state_updated.php',88],['mod/forum/classes/event','assessable_uploaded.php',86],['mod/assign/classes/event','submission_created.php',57],['lib/classes/event','group_deleted.php',65],['lib/classes/event','role_allow_assign_updated.php',47],['mod/lesson/classes/event','highscore_added.php',59],['mod/forum/classes/event','discussion_pinned.php',55],['lib/classes/event','webservice_function_called.php',67],['lib/classes/event','competency_plan_reopened.php',75],['mod/lesson/classes/event','essay_attempt_viewed.php',48],['mod/wiki/classes/event','page_locks_deleted.php',54],['lib/classes/event','webservice_service_deleted.php',59],['mod/forum/classes/event','discussion_subscription_created.php',66],['admin/tool/log/store/database/tests/fixtures','event.php',31],['mod/workshop/classes/event','assessable_uploaded.php',93],['lib','csslib.php',2155],['lib','csslib.php',2283],['lib/classes/event','user_loggedout.php',54],['lib/classes/event','webservice_token_created.php',65],['lib/classes/event','tag_collection_updated.php',65],['competency/classes','competency_rule_all.php',84],['backup/util/settings','base_setting.class.php',145],['mod/data/classes/event','field_deleted.php',57],['mod/book/classes/event','chapter_created.php',79],['lib/classes/event','email_failed.php',56],['lib/classes/task','stats_cron_task.php',31],['mod/survey/classes/event','report_downloaded.php',55],['mod/workshop/classes/event','phase_switched.php',75],['lib/grade','grade_category.php',2300],['lib/grade','grade_scale.php',156],['lib/classes/event','course_reset_started.php',53],['mod/workshop/classes/event','assessment_evaluated.php',66],['lib/classes/event','blog_association_created.php',56],['backup/converter','convertlib.php',109],['report/outline/classes/event','activity_report_viewed.php',48],['lib/classes/task','legacy_plugin_cron_task.php',33],['lib/classes/event','competency_plan_updated.php',75],['mod/choice/classes/event','answer_submitted.php',72],['mod/lesson/classes/event','lesson_ended.php',49],['lib/classes/event','role_allow_switch_updated.php',47],['lib/classes/task','portfolio_cron_task.php',31],['lib/classes/event','competency_user_competency_rated_in_course.php',88],['question/classes/bank','question_text_row.php',35],['lib/classes/event','tag_created.php',75],['report/participation/classes/event','report_viewed.php',58],['lib/classes/event','role_capabilities_updated.php',51],['mod/survey/classes/event','response_submitted.php',53],['lib/classes/event','badge_archived.php',47],['mod/workshop/classes/event','assessment_reevaluated.php',76],['mod/assign/classes/event','submission_locked.php',78],['report/outline/classes/event','report_viewed.php',54],['lib/classes/event','user_deleted.php',57],['lib/classes/event','mnet_access_control_updated.php',57],['mod/lesson/classes/event','essay_assessed.php',78],['mod/book/tool/print/classes/event','book_printed.php',76],['lib/classes/event','grouping_deleted.php',72],['admin/tool/monitor/classes','rule.php',239],['lib/classes/event','course_viewed.php',75],['mod/forum/classes/event','user_report_viewed.php',65],['user/selector','lib.php',309],['mod/quiz/classes/event','attempt_summary_viewed.php',56],['lib/classes/event','webservice_service_user_added.php',59],['mod/forum/classes/event','discussion_unpinned.php',55],['lib/classes/event','grouping_group_unassigned.php',48],['lib/grade','grade_outcome.php',272],['mod/chat/classes/event','message_sent.php',59],['lib/classes/event','role_assigned.php',56],['mod/quiz/classes/question/bank','question_name_text_column.php',37],['question/classes/bank','modifier_name_column.php',27],['mod/glossary/classes/event','entry_viewed.php',48],['mod/data/classes/event','record_created.php',56],['lib/classes/event','course_category_deleted.php',59],['lib/dml','mariadb_native_moodle_database.php',41],['lib/classes/event','role_deleted.php',55],['lib/classes/task','question_cron_task.php',31],['portfolio/flickr','lib.php',41],['lib/classes/task','cache_cron_task.php',31],['mod/wiki/classes/event','page_version_viewed.php',54],['admin/tool/recyclebin/classes/event','category_bin_item_deleted.php',47],['admin/tool/log/store/standard/tests/fixtures','event.php',31],['mod/scorm/classes/event','status_submitted.php',46],['admin/tool/monitor/classes/event','rule_created.php',50],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',31],['question/classes/bank','checkbox_column.php',32],['lib/classes/event','competency_user_competency_plan_viewed.php',81],['mod/assign/feedback/offline','locallib.php',42],['admin/tool/messageinbound/classes/task','cleanup_task.php',38],['mod/workshop/classes/event','submission_updated.php',63],['lib/editor/atto/classes/task','autosave_cleanup_task.php',33],['mod/choice/classes/event','report_viewed.php',53],['mod/lesson/classes/event','group_override_deleted.php',54],['mod/wiki/classes/event','page_map_viewed.php',54],['admin/tool/log/store/legacy/tests/fixtures','event.php',31],['mod/lesson/classes/event','question_answered.php',54],['mod/choice/classes/event','report_downloaded.php',54],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',36],['backup/util/ui','backup_ui_setting.class.php',86],['lib/classes/event','competency_user_evidence_created.php',64],['lib/classes/event','course_module_completion_updated.php',54],['repository/coursefiles','lib.php',183],['lib/classes/event','note_updated.php',56],['lib/classes/event','note_created.php',56],['lib/classes/event','competency_framework_created.php',63],['lib/classes/event','course_resources_list_viewed.php',60],['lib/classes/event','tag_updated.php',58],['mod/forum/classes/event','subscribers_viewed.php',65],['mod/book/tool/exportimscp/classes/event','book_exported.php',76],['mod/quiz/classes/question/bank','add_action_column.php',45],['lib/classes/task','completion_regular_task.php',33],['lib/classes/event','user_enrolment_deleted.php',54],['grade/report/grader/classes/event','grade_report_viewed.php',39],['lib','enrollib.php',1076],['admin/tool/recyclebin/classes/event','course_bin_item_restored.php',47],['lib/classes/event','webservice_service_updated.php',59],['lib/editor/tinymce/classes','plugin.php',101],['mod/lesson/classes/event','group_override_created.php',55],['mod/scorm/classes/event','attempt_deleted.php',62],['lib/classes/event','competency_user_competency_review_request_cancelled.php',72],['lib/classes/event','webservice_service_created.php',65],['lib/classes/task','events_cron_task.php',31],['mod/wiki/classes/event','page_version_restored.php',54],['mod/forum/classes/event','discussion_deleted.php',66],['lib/classes/event','competency_framework_updated.php',73],['mod/lesson/classes/event','lesson_restarted.php',48],['mod/wiki/classes/event','page_updated.php',54],['mod/assign/classes/event','marker_updated.php',89],['lib','modinfolib.php',1270],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',38],['lib/classes/event','course_module_updated.php',57],['repository','lib.php',1834],['auth/cas/classes/task','sync_task.php',34],['lib/classes/event','competency_template_deleted.php',73],['mod/assign/classes/event','submission_confirmation_form_viewed.php',79],['lib/bennu','iCalendar_components.php',37],['report/questioninstances/classes/event','report_viewed.php',55],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',36],['lib/classes/event','message_contact_blocked.php',48],['lib/classes/event','competency_template_updated.php',75],['question/behaviour','behaviourbase.php',83],['grade/report/history/classes/event','grade_report_viewed.php',39],['lib/classes/event','badge_disabled.php',47],['mod/assign/classes/event','grading_table_viewed.php',79],['lib/classes/event','badge_enabled.php',47],['mod/lti','OAuth.php',122],['mod/lti','OAuth.php',149],['mod/lti','OAuth.php',173],['calendar/type/gregorian/classes','structure.php',29],['mod/quiz/classes/event','edit_page_viewed.php',53],['lib/simplepie/library/SimplePie','Credit.php',139],['mod/scorm/classes/event','tracks_viewed.php',64],['mod/wiki/classes/event','page_diff_viewed.php',55],['message/tests/fixtures','inbound_fixtures.php',41],['lib/classes/event','grouping_created.php',65],['lib/classes/event','calendar_event_deleted.php',58],['enrol/flatfile/classes/task','flatfile_sync_task.php',37],['lib/classes/event','group_updated.php',65],['lib/classes/task','registration_cron_task.php',31],['mod/book/classes/event','chapter_updated.php',79],['lib/classes/event','grade_deleted.php',94],['admin/tool/recyclebin/classes/event','course_bin_item_created.php',47],['lib/classes/event','user_loggedin.php',64],['lib/classes/task','check_for_updates_task.php',31],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',56],['mod/assign/submission/file','locallib.php',44],['mod/forum/classes/task','cron_task.php',30],['mod/forum/classes/event','subscription_created.php',65],['lib/classes/event','tag_collection_created.php',65],['grade/report/overview/classes/event','grade_report_viewed.php',48],['mod/assign/classes/event','batch_set_marker_allocation_viewed.php',79],['mod/quiz/classes/event','group_override_updated.php',54],['lib/classes/event','competency_plan_created.php',63],['mod/glossary/classes/event','entry_disapproved.php',46],['lib/classes/task','send_failed_login_notifications_task.php',34],['enrol/lti/classes/task','sync_grades.php',36],['lib/classes/event','message_viewed.php',54],['portfolio/boxnet','lib.php',14],['lib/classes/event','comment_created.php',58],['question/classes/bank','preview_action_column.php',26],['lib/classes/event','course_content_deleted.php',54],['lib/dml','pgsql_native_moodle_database.php',87],['mod/feedback/classes/event','response_deleted.php',83],['lib/classes/event','competency_evidence_created.php',98],['lib/classes/event','comment_deleted.php',58],['lib/classes/event','competency_user_competency_review_requested.php',72],['mod/quiz/classes/event','attempt_abandoned.php',63],['mod/scorm/classes/event','user_report_viewed.php',62],['lib/dml','mssql_native_moodle_database.php',88],['mod/quiz/classes/event','attempt_becameoverdue.php',66],['mod/quiz/classes/event','group_override_created.php',55],['lib/dml','mysqli_native_moodle_database.php',352],['backup/util/ui','backup_ui.class.php',194],['mod/book/tool/print/classes/event','chapter_printed.php',79],['mod/data/classes/event','record_deleted.php',56],['competency/classes','competency_rule_points.php',185],['lib/classes/event','competency_user_competency_viewed.php',81],['lib/classes/event','dashboard_viewed.php',59],['mod/lesson/classes/event','question_viewed.php',54],['lib/classes/event','user_profile_viewed.php',56],['lib','medialib.php',345],['admin/tool/monitor/classes/task','clean_events.php',32],['mod/lesson/classes/event','user_override_deleted.php',53],['lib/classes/event','cohort_member_removed.php',50],['mod/lesson/classes/event','lesson_started.php',48],['mod/lesson/classes/event','page_updated.php',73],['mod/workshop/classes/event','submission_viewed.php',63],['question/classes/bank','question_name_column.php',28],['lib/classes/event','competency_deleted.php',87],['admin/tool/monitor/classes','subscription.php',132],['lib/classes/task','grade_cron_task.php',31],['mod/glossary/classes/event','entry_created.php',52],['lib/classes/task','file_temp_cleanup_task.php',31],['lib/classes/event','dashboard_reset.php',60],['backup/util/structure','base_atom.class.php',71],['portfolio/googledocs','lib.php',54],['mod/assign/feedback/comments','locallib.php',36],['mod/wiki/classes/event','page_history_viewed.php',48],['lib/classes/event','competency_plan_review_request_cancelled.php',75],['lib/classes/event','competency_plan_deleted.php',73],['mod/quiz/classes/event','attempt_viewed.php',54],['mod/data/classes/event','field_updated.php',57],['lib/classes/event','grouping_updated.php',65],['cache/classes','definition.php',621],['lib/classes/task','plagiarism_cron_task.php',31],['backup/converter/moodle1','lib.php',1033],['lib/classes/event','question_category_created.php',48],['grade/report/user/classes/event','grade_report_viewed.php',48],['lib/classes/event','user_login_failed.php',56],['mod/scorm/classes/event','report_viewed.php',63],['mod/chat/classes/event','sessions_viewed.php',65],['admin/tool/recyclebin/classes/event','course_bin_item_deleted.php',47],['mod/quiz/classes/event','user_override_deleted.php',53],['portfolio/mahara','lib.php',61],['mod/quiz/classes/event','attempt_submitted.php',63],['grade/report/outcomes/classes/event','grade_report_viewed.php',39],['mod/lesson/classes/event','group_override_updated.php',54],['mod/workshop/classes/event','submission_created.php',63],['mod/assign/classes/event','submission_updated.php',57],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',83],['lib/classes/event','competency_updated.php',70],['lib/classes/event','note_deleted.php',56],['mod/lesson/classes/event','page_moved.php',56],['lib/classes/event','course_completed.php',73],['lib/classes/event','tag_added.php',58],['lib/classes/event','competency_created.php',70],['mod/lesson/classes/event','highscores_viewed.php',51],['lib/classes/event','message_contact_unblocked.php',48],['lib/classes/event','user_enrolment_created.php',53],['lib/classes/task','search_index_task.php',35],['lib/classes/event','course_module_created.php',86],['lib/classes/event','webservice_service_user_removed.php',59],['report/log/classes/event','report_viewed.php',58],['mod/assign/submission/file/classes/event','assessable_uploaded.php',85],['lib/classes/event','group_member_added.php',78],['mod/forum/classes/event','discussion_viewed.php',60],['mod/assign/classes/event','submission_viewed.php',76],['mod/lti/classes/local/ltiservice','service_base.php',87],['enrol/lti/classes/task','sync_members.php',46],['mod/workshop/classes/event','submission_reassessed.php',77],['lib/classes/task','session_cleanup_task.php',31],['lib/tests','messageinbound_test.php',166],['lib/classes/task','backup_cleanup_task.php',31],['mod/workshop/classes/event','assessment_evaluations_reset.php',75],['mod/scorm/classes/event','scoreraw_submitted.php',46],['mod/assign/classes/event','statement_accepted.php',77],['mod/assign/classes/event','feedback_viewed.php',76],['lib/classes/task','delete_unconfirmed_users_task.php',31],['mod/forum/classes/event','discussion_moved.php',66],['lib/classes/event','competency_user_evidence_deleted.php',64],['mod/assign/classes/event','batch_set_workflow_state_viewed.php',79],['mod/lesson/classes/event','lesson_resumed.php',48],['lib/classes/task','badges_cron_task.php',31],['lib/classes/event','comments_viewed.php',51],['mod/data/classes/event','template_viewed.php',55],['mod/wiki/classes/event','page_deleted.php',54],['mod/quiz/classes/event','report_viewed.php',56],['mod/scorm/classes/event','sco_launched.php',64],['mod/glossary/classes/event','entry_updated.php',52],['mod/lesson/classes/event','user_override_created.php',53],['mod/glossary/classes/event','category_updated.php',46],['lib/classes/event','course_updated.php',58],['grade/report/singleview/classes/event','grade_report_viewed.php',39],['mod/feedback/classes/event','response_submitted.php',83],['lib/classes/event','blog_entry_deleted.php',53],['mod/book/classes/event','chapter_deleted.php',79],['report/completion/classes/event','report_viewed.php',49],['lib/classes/event','recent_activity_viewed.php',49],['mod/quiz/classes/event','question_manually_graded.php',55],['mod/assign/classes/event','submission_status_updated.php',79],['lib/classes/event','user_enrolment_updated.php',53],['lib/classes/event','tag_deleted.php',55],['report/completion/classes/event','user_report_viewed.php',49],['report/stats/classes/event','report_viewed.php',56],['lib/classes/event','calendar_event_created.php',58],['mod/assign/classes/event','submission_duplicated.php',77],['lib/classes/event','competency_framework_deleted.php',73],['lib/classes/event','course_section_updated.php',56],['lib/classes/event','message_sent.php',82],['lib/classes/event','calendar_subscription_deleted.php',56],['lib/classes/event','course_category_updated.php',51],['lib/classes/event','user_password_updated.php',70],['enrol/lti/ims-blti','OAuth.php',65],['enrol/lti/ims-blti','OAuth.php',92],['enrol/lti/ims-blti','OAuth.php',116],['mod/forum/classes/event','subscription_deleted.php',65],['mod/assign/classes/event','reveal_identities_confirmation_page_viewed.php',79],['lib/classes/event','user_loggedinas.php',57],['lib/classes/event','competency_template_created.php',63],['lib/classes/event','user_created.php',48],['admin/tool/recyclebin/classes/event','category_bin_item_restored.php',47],['report/loglive/classes/event','report_viewed.php',48],['admin/tool/monitor/classes/event','subscription_created.php',50],['mod/book/classes/event','chapter_viewed.php',79],['lib/classes/event','badge_awarded.php',54],['lib/classes/event','calendar_subscription_created.php',57],['lib/classes/event','enrol_instance_created.php',69],['lib/classes/event','user_list_viewed.php',56],['lib/classes/task','calendar_cron_task.php',31],['mod/forum/classes/event','post_deleted.php',67],['mod/quiz/classes/event','group_override_deleted.php',54],['lib/classes/event','badge_created.php',47],['backup/util/plan','base_plan.class.php',50],['lib/classes/event','base.php',292],['lib/classes/event','competency_framework_viewed.php',69],['lib/classes/event','tag_collection_deleted.php',65],['lib/classes/event','group_member_removed.php',69],['lib/classes/event','grade_report_viewed.php',54],['lib/classes/event','calendar_event_updated.php',58],['mod/assign/submission/onlinetext','locallib.php',40],['lib/classes/event','user_updated.php',48],['mod/lesson/classes/event','page_created.php',54],['backup/util/ui','base_ui_stage.class.php',110],['mod/assign/classes/event','submission_form_viewed.php',82],['auth/ldap/classes/task','sync_task.php',34],['lib/classes/event','course_completion_updated.php',47],['lib/classes/event','competency_plan_review_started.php',75],['lib/classes/event','course_user_report_viewed.php',66],['mod/folder/classes/event','all_files_downloaded.php',60],['mod/workshop/classes/event','assessments_reset.php',74],['lib/tests/fixtures','task_fixtures.php',35],['lib/tests/fixtures','task_fixtures.php',44],['lib/tests/fixtures','task_fixtures.php',53],['mod/data/classes/event','template_updated.php',56],['mod/assign/classes/event','identities_revealed.php',75],['question/classes/bank','copy_action_column.php',35],['admin/tool/log/store/legacy/classes/event','legacy_logged.php',35],['lib/classes/event','notes_viewed.php',49],['admin/tool/recyclebin/classes/event','category_bin_item_created.php',47],['lib/classes/event','competency_plan_viewed.php',63],['mod/data/classes/event','record_updated.php',56],['mod/assign/feedback/file','locallib.php',45],['lib/classes/event','competency_plan_unapproved.php',75],['mod/lesson/classes/event','content_page_viewed.php',48],['mod/assign/feedback/editpdf','locallib.php',43],['lib/dml','sqlsrv_native_moodle_database.php',108],['admin/tool/monitor/classes/event','subscription_deleted.php',50],['mod/assign/classes/event','assessable_submitted.php',109],['mod/quiz/classes/event','attempt_started.php',62],['lib/classes/task','create_contexts_task.php',31],['lib/classes/task','file_trash_cleanup_task.php',31],['lib/classes/event','competency_user_competency_rated.php',82],['mod/forum/classes/event','post_updated.php',67],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',37],['lib/classes/event','course_module_deleted.php',56],['mod/assign/submission/comments','locallib.php',39],['lib/classes/event','competency_plan_review_requested.php',75],['lib/classes/event','user_graded.php',96],['lib/classes/event','webservice_login_failed.php',71],['mod/forum/classes/event','post_created.php',67],['lib/classes/task','complete_plans_task.php',43],['mod/assign/classes/event','submission_status_viewed.php',81],['lib/classes/event','enrol_instance_updated.php',70],['lib/classes/task','messaging_cleanup_task.php',31],['portfolio/picasa','lib.php',33],['admin/tool/capability/classes/event','report_viewed.php',47],['grade/report/singleview/classes/local/ui','unique_name.php',38],['mod/data/classes/event','field_created.php',58],['mod/folder/classes/event','folder_updated.php',48],['lib/classes/event','badge_updated.php',47],['lib/tests/fixtures','event_fixtures.php',34],['lib/classes/task','cache_cleanup_task.php',31],['mod/survey/classes/event','report_viewed.php',55],['mod/quiz/classes/event','attempt_deleted.php',53],['mod/glossary/classes/event','entry_approved.php',46],['mod/wiki/classes/event','page_viewed.php',57],['lib/classes/log','reader.php',30],['lib/classes/task','password_reset_cleanup_task.php',31],['mod/forum/classes/event','readtracking_disabled.php',64],['admin/tool/langimport/classes/event','langpack_imported.php',80],['lib/classes/event','competency_plan_review_stopped.php',75],['admin/tool/langimport/classes/event','langpack_updated.php',80],['lib/classes/event','unknown_logged.php',43],['lib/classes/event','competency_user_competency_viewed_in_plan.php',85],['lib/classes/event','competency_user_competency_viewed_in_course.php',84],['lib/classes/task','search_optimize_task.php',38],['mod/glossary/classes/event','category_created.php',46],['lib/portfolio','plugin.php',120],['report/stats/classes/event','user_report_viewed.php',48],['lib/classes/event','dashboards_reset.php',59],['lib/classes/event','calendar_subscription_updated.php',57],['lib/classes/event','cohort_updated.php',49],['admin/tool/monitor/classes/event','rule_updated.php',50],['mod/lesson/classes/event','page_deleted.php',54],['lib/classes/event','course_section_deleted.php',57],['lib/classes/task','delete_incomplete_users_task.php',31],['lib/classes/task','automated_backup_task.php',31],['admin/tool/monitor/classes/event','subscription_criteria_met.php',55],['lib/classes/event','mnet_access_control_created.php',57],['admin/tool/messageinbound/classes/task','pickup_task.php',38],['mod/forum/classes/event','discussion_created.php',65],['question/classes/bank','creator_name_column.php',28],['lib/classes/event','blog_entries_viewed.php',62],['lib/classes/task','sync_plans_from_template_cohorts_task.php',41],['mod/quiz/classes/event','attempt_preview_started.php',54],['lib/classes/event','content_viewed.php',80],['lib/classes/event','competency_user_evidence_updated.php',64],['lib/dml/tests','dml_test.php',5530],['mod/assign/classes/event','submission_graded.php',78],['mod/assign/classes/event','all_submissions_downloaded.php',75],['lib/classes/event','course_restored.php',58],['lib/classes/event','group_created.php',65],['lib/classes/event','badge_criteria_deleted.php',52],['lib/classes/event','tag_flagged.php',55],['lib/classes/event','competency_plan_completed.php',75],['mod/lesson/classes/event','user_override_updated.php',54],['lib/classes/event','role_allow_override_updated.php',47],['mod/forum/classes/event','discussion_subscription_deleted.php',66],['lib/classes/event','cohort_deleted.php',49],['lib/classes/event','badge_criteria_created.php',52],['admin/tool/log/classes/helper','reader.php',41],['admin/tool/monitor/classes/task','check_subscriptions.php',50],['lib/classes/event','blog_entry_created.php',76],['mod/scorm/classes/event','interactions_viewed.php',63],['mod/workshop/classes/event','submission_assessed.php',76],['lib/classes/event','badge_duplicated.php',47],['backup/util/plan','base_step.class.php',49],['lib/classes/event','course_category_created.php',48],['lib/classes/event','cohort_created.php',49],['lib/classes/event','tag_removed.php',58],['lib/classes/event','competency_plan_approved.php',75],['mod/choice/classes/event','answer_deleted.php',56],['backup/util/ui','restore_ui_stage.class.php',75],['lib/classes/event','competency_user_competency_review_started.php',72],['lib/classes/event','course_reset_ended.php',53],['mod/quiz/classes/event','user_override_created.php',53],['mod/forum/classes/event','course_searched.php',66],['lib/classes/event','message_contact_removed.php',48],['admin/tool/monitor/classes/event','rule_deleted.php',50],['lib/classes/event','message_deleted.php',91],['mod/assign/classes/event','submission_unlocked.php',78],['lib/classes/event','competency_user_competency_review_stopped.php',72],['lib/classes/event','course_module_viewed.php',62],['backup/util/plan','base_task.class.php',58],['question/classes/bank','delete_action_column.php',36]], 469],
'copy_area_files_for_upgrade': ['copy_area_files_for_upgrade', 'Copy all the files from the old assignment files area to the new one. This is used by the plugin upgrade code. ', [['mod/assign','locallib.php',7590]], 4],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',592]], 3302],
'view': ['view', 'No full submission view - the summary contains the list of files and that is the whole submission ', [['mod/assign/submission/file','locallib.php',333],['lib/yuilib/3.17.2/view','view.js',42],['mod/assign/feedback/comments','locallib.php',369],['lib/yuilib/3.17.2/view','view-debug.js',42],['mod/assign','assignmentplugin.php',265],['mod/assign','locallib.php',409],['mod/assign/submission/onlinetext','locallib.php',419],['mod/assign/feedback/file','locallib.php',308],['mod/assign/feedback/editpdf','locallib.php',287]], 23],
'copy_submission': ['copy_submission', 'Copy the student\'s submission from a previous submission. Used when a student opts to base their resubmission on the last submission. ', [['mod/assign/submission/file','locallib.php',504],['mod/assign','submissionplugin.php',79],['mod/assign/submission/onlinetext','locallib.php',599]], 1],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'get_external_parameters': ['get_external_parameters', 'Return a description of external params suitable for uploading a file submission from a webservice. ', [['mod/assign/submission/file','locallib.php',536],['mod/assign/feedback/comments','locallib.php',508],['mod/assign','assignmentplugin.php',651],['mod/assign/submission/onlinetext','locallib.php',628],['mod/assign/feedback/file','locallib.php',676]], 4],
'count_words': ['count_words', 'Count words in a string. ', [['lib','moodlelib.php',7697]], 16],
'get_editor_text': ['get_editor_text', 'Get the saved text content from the editor. ', [['mod/assign/feedback/comments','locallib.php',145],['mod/assign','assignmentplugin.php',431],['mod/assign/submission/onlinetext','locallib.php',297]], 10],
'check_word_count': ['check_word_count', 'Compare word count of onlinetext submission to word limit, and return result. ', [['mod/assign/submission/onlinetext','locallib.php',641]], 1],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'addgroup': ['addgroup', 'Adds an element group ', [['lib/pear/HTML','QuickForm.php',717]], 111],
'format_text': ['format_text', 'Formats a text string coming from the search engine. ', [['search/classes','document.php',606],['lib/classes','grading_external.php',182],['search/engine/solr/classes','document.php',129],['lib','weblib.php',1158],['lib','tablelib.php',860],['lib','tablelib.php',1667],['question/type','questionbase.php',345]], 322],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'download_rewrite_pluginfile_urls': ['download_rewrite_pluginfile_urls', 'Rewrite plugin file urls so they resolve correctly in an exported zip. ', [['mod/assign','locallib.php',2625]], 1],
'get_course': ['get_course', 'Get the course id. ', [['course','moodleform_mod.php',132],['search/classes','engine.php',102],['course/format','lib.php',231],['mod/quiz','attemptlib.php',180],['mod/quiz','attemptlib.php',722],['tag/classes','index_builder.php',296],['lib','modinfolib.php',180],['lib','modinfolib.php',1424],['lib','modinfolib.php',2706],['lib','datalib.php',568],['availability/classes','info.php',70],['mod/assign','locallib.php',1316],['admin/tool/uploadcourse/classes','processor.php',232],['enrol','locallib.php',912],['search/tests/fixtures','mock_search_engine.php',56]], 302],
'get_instance': ['get_instance', 'Get the DB record for the current instance. ', [['course','moodleform_mod.php',116],['question/engine','bank.php',464],['backup/util/output','output_controller.class.php',53],['repository','lib.php',1137],['backup/util/helper','restore_logs_processor.class.php',69],['grade/grading/form','lib.php',474],['mnet/service/enrol','locallib.php',57],['mod/assign','locallib.php',1224],['lib','externallib.php',1000],['blog','locallib.php',857]], 420],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'editors_get_preferred_format': ['editors_get_preferred_format', 'Returns users preferred text format. ', [['lib','editorlib.php',79]], 19],
'get_config': ['get_config', 'Config get method. ', [['lib/classes/antivirus','scanner.php',54],['competency/classes','competency_rule.php',59],['question/engine','bank.php',109],['admin/tool/log/classes/helper','store.php',63],['lib','moodlelib.php',1409],['lib','enrollib.php',1142],['lib/editor/tinymce/classes','plugin.php',73],['competency/classes','competency_rule_points.php',43],['search/classes','base.php',169],['mod/assign','assignmentplugin.php',345],['lib/portfolio','plugin.php',546]], 934],
'addhelpbutton': ['addhelpbutton', 'Add a help button to element, only one button per element is allowed. ', [['lib','formslib.php',1909]], 670],
'is_empty': ['is_empty', '', [['mod/wiki/diff','difflib.php',364],['mod/feedback/classes','structure.php',132],['user/profile','lib.php',346],['mod/assign/feedback/offline','locallib.php',62],['mod/assign/submission/file','locallib.php',474],['user/profile/field/datetime','field.class.php',117],['mod/assign/feedback/comments','locallib.php',498],['blocks','moodleblock.class.php',181],['blocks','moodleblock.class.php',699],['availability/classes','tree.php',636],['mod/assign','assignmentplugin.php',540],['mod/assign/submission/onlinetext','locallib.php',563],['mod/assign/feedback/file','locallib.php',334],['mod/assign/feedback/editpdf','locallib.php',311],['mod/assign/submission/comments','locallib.php',78]], 20],
'render_editor_content': ['render_editor_content', 'Render the content in editor that is often used by plugin. ', [['mod/assign','locallib.php',2659]], 2],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',782],['lib','externallib.php',1134]], 216],
'plagiarism_get_links': ['plagiarism_get_links', 'displays the similarity score and provides a link to the full report if allowed. ', [['lib','plagiarismlib.php',34]], 7],
'set_error': ['set_error', 'Sets the last error message. ', [['lib','csslib.php',2340],['mod/assign','assignmentplugin.php',121]], 7],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'createelement': ['createelement', 'Create an element, set its class name and optionally install the element to its parent. ', [['lib/yuilib/2in3/2.9.0/build/yui2-carousel','yui2-carousel-debug.js',299],['theme/bootstrapbase/javascript','html5shiv.js',120],['lib/pear/HTML','QuickForm.php',533],['lib/yuilib/2in3/2.9.0/build/yui2-carousel','yui2-carousel.js',298]], 1944],
'get_course_module': ['get_course_module', 'Gets the course-module object. Intended for use by conditions. ', [['availability/classes','info_module.php',63],['course','externallib.php',2379],['mod/assign','locallib.php',1286]], 238],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'get_settings': ['get_settings', 'Get the default setting for file submission plugin ', [['mod/assign/submission/file','locallib.php',63],['mod/assign/feedback/comments','locallib.php',230],['mod/assign','assignmentplugin.php',90],['backup/util/plan','base_plan.class.php',107],['mod/assign/submission/onlinetext','locallib.php',61],['backup/util/plan','base_step.class.php',77],['backup/util/plan','base_task.class.php',66]], 30],
'save_settings': ['save_settings', 'Save any submitted settings when the quiz settings form is submitted. This is called from {@link quiz_after_add_or_update()} in lib.php. ', [['mod/quiz/accessrule','accessrulebase.php',281],['mod/assign/submission/file','locallib.php',110],['mod/quiz','accessmanager.php',144],['mod/assign/feedback/comments','locallib.php',219],['mod/assign','assignmentplugin.php',110],['mod/assign/submission/onlinetext','locallib.php',103]], 3],
'format_for_log': ['format_for_log', 'Formatting for log info ', [['mod/assign/submission/file','locallib.php',461],['mod/assign','assignmentplugin.php',514],['mod/assign/submission/onlinetext','locallib.php',533]], 2],
'file_prepare_standard_editor': ['file_prepare_standard_editor', 'Prepares \'editor\' formslib element from data in database ', [['lib','filelib.php',108]], 41],
'create_file_from_storedfile': ['create_file_from_storedfile', 'Create new file from stored file - make sure params are valid. ', [['lib/filebrowser','file_info.php',405],['lib/filebrowser','file_info_stored.php',584],['lib/filestorage','file_storage.php',1186]], 47],
'get_form_elements': ['get_form_elements', 'Get form elements for grading form ', [['mod/assign/feedback/offline','locallib.php',50],['mod/assign/submission/file','locallib.php',140],['mod/assign','assignmentplugin.php',251],['mod/assign/submission/onlinetext','locallib.php',124]], 1],
'setdefault': ['setdefault', 'Set the field default ', [['lib/xmldb','xmldb_field.php',246],['lib','formslib.php',1896],['lib/google/src/Google/Service','YouTube.php',9537],['lib/google/src/Google/Service','YouTube.php',11044],['lib/google/src/Google/Service','Dfareporting.php',15827]], 718],
'addgrouprule': ['addgrouprule', 'Adds a validation rule for the given group of elements ', [['lib','formslib.php',2047],['lib/pear/HTML','QuickForm.php',1077]], 9],
'get_context': ['get_context', 'Return the course context for new modules, or the module context for existing modules. ', [['course','moodleform_mod.php',148],['availability/classes','info_module.php',72],['availability/classes','info_section.php',55],['competency/classes','user_competency_plan.php',83],['availability/tests/fixtures','mock_info.php',59],['mod/feedback/classes','responses_table.php',146],['competency/classes','competency.php',730],['competency/classes','plan.php',258],['mod/quiz','attemptlib.php',220],['competency/classes','user_competency.php',216],['grade/grading','lib.php',107],['lib','modinfolib.php',1486],['lib','badgeslib.php',157],['competency/classes/external','exporter.php',172],['comment','lib.php',994],['grade/grading/form','lib.php',102],['mod/assign','locallib.php',1307],['competency/classes','user_evidence.php',90],['competency/classes','user_competency_course.php',80],['lib/classes/event','base.php',627],['enrol','locallib.php',921],['lib','coursecatlib.php',2369],['lib','coursecatlib.php',3065],['competency/classes','course_competency_settings.php',133],['lib/tests/behat','behat_data_generators.php',769],['competency/classes','competency_framework.php',70],['competency/classes','template.php',139]], 1033],
'can_upgrade': ['can_upgrade', 'Return true if this plugin can upgrade an old Moodle 2.2 assignment of this type and version. ', [['mod/assign/submission/file','locallib.php',347],['mod/assign/feedback/comments','locallib.php',385],['mod/assign','assignmentplugin.php',468],['mod/assign','locallib.php',7566],['mod/assign/submission/onlinetext','locallib.php',456],['mod/assign/feedback/file','locallib.php',352],['mod/assign/submission/comments','locallib.php',88]], 7],
'get_editor_format': ['get_editor_format', 'Given a field name, should return the format of an editor field that is part of this plugin. This is used when exporting to portfolio. ', [['mod/assign','assignmentplugin.php',456],['mod/assign/submission/onlinetext','locallib.php',315]], 5],
'disabledif': ['disabledif', 'Adds a dependency for $elementName which will be disabled if $condition is met. If $condition = \'notchecked\' (default) then the condition is that the $dependentOn element is not checked. If $condition = \'checked\' then the condition is that the $dependentOn element is checked. If $condition is something else (like "eq" for equals) then it is checked to see if the value of the $dependentOn element is $condition (such as equal) to $value. ', [['lib','formslib.php',2429]], 343],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'file_postupdate_standard_editor': ['file_postupdate_standard_editor', 'Prepares the content of the \'editor\' form element with embedded media files to be saved in database ', [['lib','filelib.php',202]], 45],
'get_editor_fields': ['get_editor_fields', 'Return a list of the text fields that can be imported/exported by this plugin. ', [['mod/assign/feedback/comments','locallib.php',136],['mod/assign','assignmentplugin.php',422],['mod/assign/submission/onlinetext','locallib.php',288]], 5],
'get_file_areas': ['get_file_areas', 'Get file areas returns a list of areas this plugin stores files ', [['mod/assign/submission/file','locallib.php',496],['mod/assign','assignmentplugin.php',549],['mod/assign/submission/onlinetext','locallib.php',591],['mod/assign/feedback/file','locallib.php',343],['mod/assign/feedback/editpdf','locallib.php',362]], 9],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'set_config': ['set_config', 'Set a key in global configuration ', [['lib','moodlelib.php',1336],['lib','enrollib.php',1153],['lib/editor/tinymce/classes','plugin.php',84],['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515]], 1119],
'upgrade': ['upgrade', 'Upgrade the submission from the old assignment to the new one ', [['mod/assign/submission/file','locallib.php',406],['mod/assign/feedback/comments','locallib.php',418],['mod/assign','assignmentplugin.php',494],['mod/assign/submission/onlinetext','locallib.php',484],['mod/assign/feedback/file','locallib.php',380],['mod/assign/submission/comments','locallib.php',123]], 6],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'upgrade_settings': ['upgrade_settings', 'Upgrade the settings from the old assignment to the new plugin based one ', [['mod/assign/submission/file','locallib.php',367],['mod/assign/feedback/comments','locallib.php',402],['mod/assign','assignmentplugin.php',480],['mod/assign/submission/onlinetext','locallib.php',471],['mod/assign/feedback/file','locallib.php',367],['mod/assign/submission/comments','locallib.php',105]], 2],
'get_type': ['get_type', 'Get the type of the feed ', [['lib/simplepie/library','SimplePie.php',1624],['lib/simplepie/library/SimplePie','Restriction.php',122],['backup/util/ui','backup_ui_setting.class.php',102],['backup/util/ui','base_ui.class.php',294],['mod/lesson','locallib.php',2394],['lib/simplepie/library/SimplePie','Enclosure.php',877],['lib/classes','chart_series.php',127],['grade/report/singleview/classes/local/ui','bulk_insert.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',79],['backup/util/plan','backup_plan.class.php',70],['availability/classes','condition.php',102],['mod/assign','assignmentplugin.php',153],['backup/controller','backup_controller.class.php',244],['lib/classes','chart_base.php',150],['mod/workshop','locallib.php',3936],['mod/lti/classes/local/ltiservice','resource_base.php',114],['lib/simplepie/library/SimplePie','Caption.php',193],['backup/controller','restore_controller.class.php',261]], 90],
'strlen': ['strlen', 'Counts the number of characters. Unit-tested by Kasper (single byte charsets only) ', [['lib/typo3','class.t3lib_cs.php',1520],['lib/classes','text.php',305]], 1649],
'delete_instance': ['delete_instance', 'Delete all data related to a given workshop module instance ', [['mod/workshop/eval','lib.php',59],['mod/workshop/allocation/scheduled','lib.php',200],['mod/workshop/eval/best','lib.php',125],['mod/workshop/form','lib.php',118],['lib','enrollib.php',1849],['mod/workshop/allocation/random','lib.php',243],['mod/assign/submission/file','locallib.php',447],['mod/workshop/form/rubric','lib.php',405],['mod/assign/feedback/comments','locallib.php',485],['mod/workshop/form/comments','lib.php',360],['mod/workshop/allocation/manual','lib.php',349],['lib','accesslib.php',6111],['mod/assign','assignmentplugin.php',525],['mod/workshop/allocation','lib.php',62],['mod/assign','locallib.php',715],['mod/workshop/form/accumulative','lib.php',375],['mod/workshop/form/numerrors','lib.php',394],['mod/assign/submission/onlinetext','locallib.php',550],['mod/assign/feedback/file','locallib.php',320],['mod/assign/feedback/editpdf','locallib.php',324],['tag/classes','tag.php',473],['enrol/lti','lib.php',145]], 37],
'shorten_text': ['shorten_text', 'Given some text (which may contain HTML) and an ideal length, this function truncates the text neatly on a word boundary if possible ', [['lib','moodlelib.php',7822]], 87],
'error_text': ['error_text', 'Output an error message. By default wraps the error message in <span class="error">. If the error message is blank, nothing is output. ', [['lib','outputrenderers.php',2740]], 88],
'save': ['save', 'Save PHPExcel to file ', [['lib/phpexcel/PHPExcel/Writer','CSV.php',89],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',48],['question/engine','datalib.php',1531],['lib/adodb','adodb-active-record.inc.php',834],['backup/cc/cc_lib','xmlbase.php',168],['lib/phpexcel/PHPExcel/Writer','HTML.php',139],['availability/condition/grouping/classes','condition.php',71],['availability/tests/fixtures','mock_condition.php',67],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',49],['lib/simplepie/library/SimplePie/Cache','File.php',97],['availability/condition/group/classes','condition.php',60],['completion','completion_aggregation.php',106],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',111],['lib','badgeslib.php',208],['lib/portfolio','exporter.php',638],['mod/assign/submission/file','locallib.php',189],['mod/assign/feedback/comments','locallib.php',323],['lib/phpexcel/PHPExcel/Writer','PDF.php',82],['lib/adodb','adodb-active-recordx.inc.php',943],['lib/simplepie/library/SimplePie/Cache','Base.php',79],['lib/simplepie/library/SimplePie/Cache','MySQL.php',147],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',48],['lib/phpexcel/PHPExcel/Writer','IWriter.php',30],['badges/criteria','award_criteria_overall.php',171],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',175],['availability/classes','tree.php',618],['mod/assign','assignmentplugin.php',190],['availability/condition/completion/classes','condition.php',72],['availability/condition/date/classes','condition.php',75],['lib/lessphp','Parser.php',654],['lib/simplepie/library/SimplePie/Cache','Memcache.php',108],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',50],['availability/condition/profile/classes','condition.php',127],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',137],['mod/assign/submission/onlinetext','locallib.php',182],['mod/assign/feedback/file','locallib.php',257],['mod/assign/feedback/editpdf','locallib.php',252],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',83],['availability/condition/grade/classes','condition.php',77],['badges/criteria','award_criteria.php',354],['lib/portfolio','plugin.php',670],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',476],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',4783],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',270]], 212],
'submission_is_empty': ['submission_is_empty', 'Determine if a submission is empty ', [['mod/assign/submission/file','locallib.php',482],['mod/assign','submissionplugin.php',128],['mod/assign/submission/onlinetext','locallib.php',575]], 3],
'view_summary': ['view_summary', 'Display the list of files  in the submission status table ', [['mod/assign/submission/file','locallib.php',312],['mod/assign/feedback/comments','locallib.php',347],['mod/assign','assignmentplugin.php',386],['mod/assign/submission/onlinetext','locallib.php',334],['mod/assign/feedback/file','locallib.php',285],['mod/assign/feedback/editpdf','locallib.php',275],['mod/assign/submission/comments','locallib.php',47]], 3],
'set_assign': ['set_assign', 'Set assign instance for this event. ', [['mod/assign/classes/event','base.php',51]], 28],
'get_edit_options': ['get_edit_options', 'Editor format options ', [['mod/assign/submission/onlinetext','locallib.php',166]], 2],
'get_filename': ['get_filename', 'Returns file name ', [['lib/filebrowser','virtual_root_file.php',227],['lib/filestorage','stored_file.php',699],['lib','medialib.php',169]], 248],
'get_onlinetext_submission': ['get_onlinetext_submission', 'Get onlinetext submission information from the database ', [['mod/assign/submission/onlinetext','locallib.php',49]], 10],
'get_files': ['get_files', 'Returns the array of attached files. ', [['search/classes','document.php',221],['question/engine','datalib.php',1599],['question/engine','datalib.php',1700],['question/engine','datalib.php',1759],['files','externallib.php',64],['mod/assign/submission/file','locallib.php',288],['mod/assign','assignmentplugin.php',443],['competency/classes','user_evidence.php',122],['mod/assign/submission/onlinetext','locallib.php',378]], 14],
'define': ['define', '', [], 2373],
'trim': ['trim', '', [], 1948],
'settype': ['settype', '', [], 1429],
'defined': ['defined', '', [], 4731],
'array_keys': ['array_keys', '', [], 1256]};
CLASS_DATA={
'external_single_structure': ['external_single_structure', 'Associative array description class ', [['lib','externallib.php',580]], 460],
'assessable_uploaded': ['assessable_uploaded', 'The mod_forum assessable uploaded event class. ', [['mod/forum/classes/event','assessable_uploaded.php',29],['mod/workshop/classes/event','assessable_uploaded.php',29],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',29],['mod/assign/submission/file/classes/event','assessable_uploaded.php',29]], 4],
'submission_created': ['submission_created', 'mod_assign submission_created unit test event class. ', [['mod/assign/tests/fixtures','event_mod_assign_fixtures.php',29],['mod/assign/submission/onlinetext/classes/event','submission_created.php',29],['mod/workshop/classes/event','submission_created.php',28],['mod/assign/submission/file/classes/event','submission_created.php',29]], 11],
'external_value': ['external_value', 'Scalar value description class ', [['lib','externallib.php',546]], 2505],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'submission_updated': ['submission_updated', 'mod_assign submission_updated unit test event class. ', [['mod/assign/tests/fixtures','event_mod_assign_fixtures.php',39],['mod/assign/submission/file/classes/event','submission_updated.php',29],['mod/workshop/classes/event','submission_updated.php',28],['mod/assign/submission/onlinetext/classes/event','submission_updated.php',29]], 5],
'assign_submission_onlinetext': ['assign_submission_onlinetext', 'library class for onlinetext submission plugin extending submission plugin base class ', [['mod/assign/submission/onlinetext','locallib.php',31]], 2]};
CONST_DATA={
'FILE_INTERNAL': ['FILE_INTERNAL', '', [['repository','lib.php',31]], 48],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812],
'EDITOR_UNLIMITED_FILES': ['EDITOR_UNLIMITED_FILES', '', [['lib','formslib.php',51]], 41],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'VALUE_OPTIONAL': ['VALUE_OPTIONAL', '', [['lib','moodlelib.php',337]], 761],
'ASSIGNSUBMISSION_ONLINETEXT_FILEAREA': ['ASSIGNSUBMISSION_ONLINETEXT_FILEAREA', '', [['mod/assign/submission/onlinetext','locallib.php',29]], 10],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 921],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'FILE_EXTERNAL': ['FILE_EXTERNAL', '', [['repository','lib.php',30]], 25]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
