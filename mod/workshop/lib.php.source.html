<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/workshop/lib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/workshop';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/workshop/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Library of workshop module functions needed by Moodle core and other subsystems</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * All the functions neeeded by Moodle core, gradebook, file subsystem etc</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * are placed here.</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> *</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @package    mod_workshop</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * @copyright  2009 David Mudrak &lt;david.mudrak@gmail.com&gt;</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> */</span>
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../calendar/lib.php.html">/calendar/lib.php</a>');
<a name="l32"><span class="linenum">  32</span></a>  
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">// Moodle core API                                                            //</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">/**</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * Returns the information if the module supports a feature</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> *</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> * @see plugin_supports() in lib/moodlelib.php</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> * @param string $feature FEATURE_xx constant for requested feature</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> * @return mixed true if the feature is supported, null if unknown</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> */</span>
<a name="l44"><span class="linenum">  44</span></a>  function <a class="function" onClick="logFunction('workshop_supports')" href="../../_functions/workshop_supports.html" onMouseOver="funcPopup(event,'workshop_supports')">workshop_supports</a>(<a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l45"><span class="linenum">  45</span></a>      switch(<a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l46"><span class="linenum">  46</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_HAS_GRADE')" href="../../_constants/FEATURE_GRADE_HAS_GRADE.html" onMouseOver="constPopup(event,'FEATURE_GRADE_HAS_GRADE')">FEATURE_GRADE_HAS_GRADE</a>:   return true;
<a name="l47"><span class="linenum">  47</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPS')" href="../../_constants/FEATURE_GROUPS.html" onMouseOver="constPopup(event,'FEATURE_GROUPS')">FEATURE_GROUPS</a>:            return true;
<a name="l48"><span class="linenum">  48</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPINGS')" href="../../_constants/FEATURE_GROUPINGS.html" onMouseOver="constPopup(event,'FEATURE_GROUPINGS')">FEATURE_GROUPINGS</a>:         return true;
<a name="l49"><span class="linenum">  49</span></a>          case <a class="constant" onClick="logConstant('FEATURE_MOD_INTRO')" href="../../_constants/FEATURE_MOD_INTRO.html" onMouseOver="constPopup(event,'FEATURE_MOD_INTRO')">FEATURE_MOD_INTRO</a>:         return true;
<a name="l50"><span class="linenum">  50</span></a>          case <a class="constant" onClick="logConstant('FEATURE_BACKUP_MOODLE2')" href="../../_constants/FEATURE_BACKUP_MOODLE2.html" onMouseOver="constPopup(event,'FEATURE_BACKUP_MOODLE2')">FEATURE_BACKUP_MOODLE2</a>:    return true;
<a name="l51"><span class="linenum">  51</span></a>          case <a class="constant" onClick="logConstant('FEATURE_COMPLETION_TRACKS_VIEWS')" href="../../_constants/FEATURE_COMPLETION_TRACKS_VIEWS.html" onMouseOver="constPopup(event,'FEATURE_COMPLETION_TRACKS_VIEWS')">FEATURE_COMPLETION_TRACKS_VIEWS</a>:
<a name="l52"><span class="linenum">  52</span></a>              return true;
<a name="l53"><span class="linenum">  53</span></a>          case <a class="constant" onClick="logConstant('FEATURE_SHOW_DESCRIPTION')" href="../../_constants/FEATURE_SHOW_DESCRIPTION.html" onMouseOver="constPopup(event,'FEATURE_SHOW_DESCRIPTION')">FEATURE_SHOW_DESCRIPTION</a>:  return true;
<a name="l54"><span class="linenum">  54</span></a>          case <a class="constant" onClick="logConstant('FEATURE_PLAGIARISM')" href="../../_constants/FEATURE_PLAGIARISM.html" onMouseOver="constPopup(event,'FEATURE_PLAGIARISM')">FEATURE_PLAGIARISM</a>:        return true;
<a name="l55"><span class="linenum">  55</span></a>          default:                        return null;
<a name="l56"><span class="linenum">  56</span></a>      }
<a name="l57"><span class="linenum">  57</span></a>  }
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">/**</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment"> * Saves a new instance of the workshop into the database</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment"> *</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment"> * Given an object containing all the necessary data,</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment"> * (defined by the form in mod_form.php) this function</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment"> * will save a new instance and return the id number</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment"> * of the new instance.</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment"> *</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment"> * @param stdClass $workshop An object from the form in mod_form.php</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> * @return int The id of the newly inserted workshop record</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> */</span>
<a name="l70"><span class="linenum">  70</span></a>  function <a class="function" onClick="logFunction('workshop_add_instance')" href="../../_functions/workshop_add_instance.html" onMouseOver="funcPopup(event,'workshop_add_instance')">workshop_add_instance</a>(stdclass <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>) {
<a name="l71"><span class="linenum">  71</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l72"><span class="linenum">  72</span></a>      require_once(<a class="phpfunction" onClick="logFunction('dirname')" href="../../_functions/dirname.html" onMouseOver="phpfuncPopup(event,'dirname')">dirname</a>(__FILE__) . '/locallib.php');
<a name="l73"><span class="linenum">  73</span></a>  
<a name="l74"><span class="linenum">  74</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('phase')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/phase.html">phase</a>                 = <a class="class" onClick="logClass('workshop')" href="../../_classes/workshop.html" onMouseOver="classPopup(event,'workshop')">workshop</a>::PHASE_SETUP;
<a name="l75"><span class="linenum">  75</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('timecreated')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>           = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l76"><span class="linenum">  76</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>          = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('timecreated')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>;
<a name="l77"><span class="linenum">  77</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('useexamples')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/useexamples.html">useexamples</a>           = (int)!empty(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('useexamples')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/useexamples.html">useexamples</a>);
<a name="l78"><span class="linenum">  78</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('usepeerassessment')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/usepeerassessment.html">usepeerassessment</a>     = 1;
<a name="l79"><span class="linenum">  79</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('useselfassessment')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/useselfassessment.html">useselfassessment</a>     = (int)!empty(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('useselfassessment')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/useselfassessment.html">useselfassessment</a>);
<a name="l80"><span class="linenum">  80</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('latesubmissions')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/latesubmissions.html">latesubmissions</a>       = (int)!empty(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('latesubmissions')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/latesubmissions.html">latesubmissions</a>);
<a name="l81"><span class="linenum">  81</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('phaseswitchassessment')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/phaseswitchassessment.html">phaseswitchassessment</a> = (int)!empty(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('phaseswitchassessment')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/phaseswitchassessment.html">phaseswitchassessment</a>);
<a name="l82"><span class="linenum">  82</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('evaluation')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/evaluation.html">evaluation</a>            = 'best';
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">    // insert the new record so we get the id</span>
<a name="l85"><span class="linenum">  85</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>);
<a name="l86"><span class="linenum">  86</span></a>  
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">    // we need to use context now, so we need to make sure all needed info is already in db</span>
<a name="l88"><span class="linenum">  88</span></a>      <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>;
<a name="l89"><span class="linenum">  89</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_modules', 'instance', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, array('id' =&gt; <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>));
<a name="l90"><span class="linenum">  90</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>);
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">    // process the custom wysiwyg editors</span>
<a name="l93"><span class="linenum">  93</span></a>      if (<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructauthorseditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructauthorseditor.html">instructauthorseditor</a>['itemid']) {
<a name="l94"><span class="linenum">  94</span></a>          <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructauthors')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructauthors.html">instructauthors</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_workshop', 'instructauthors',
<a name="l95"><span class="linenum">  95</span></a>                  0, <a class="class" onClick="logClass('workshop')" href="../../_classes/workshop.html" onMouseOver="classPopup(event,'workshop')">workshop</a>::<a class="function" onClick="logFunction('instruction_editors_options')" href="../../_functions/instruction_editors_options.html" onMouseOver="funcPopup(event,'instruction_editors_options')">instruction_editors_options</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>), <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructauthorseditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructauthorseditor.html">instructauthorseditor</a>['text']);
<a name="l96"><span class="linenum">  96</span></a>          <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructauthorsformat')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructauthorsformat.html">instructauthorsformat</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructauthorseditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructauthorseditor.html">instructauthorseditor</a>['format'];
<a name="l97"><span class="linenum">  97</span></a>      }
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>      if (<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructreviewerseditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructreviewerseditor.html">instructreviewerseditor</a>['itemid']) {
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructreviewers')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructreviewers.html">instructreviewers</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_workshop', 'instructreviewers',
<a name="l101"><span class="linenum"> 101</span></a>                  0, <a class="class" onClick="logClass('workshop')" href="../../_classes/workshop.html" onMouseOver="classPopup(event,'workshop')">workshop</a>::<a class="function" onClick="logFunction('instruction_editors_options')" href="../../_functions/instruction_editors_options.html" onMouseOver="funcPopup(event,'instruction_editors_options')">instruction_editors_options</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>), <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructreviewerseditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructreviewerseditor.html">instructreviewerseditor</a>['text']);
<a name="l102"><span class="linenum"> 102</span></a>          <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructreviewersformat')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructreviewersformat.html">instructreviewersformat</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructreviewerseditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructreviewerseditor.html">instructreviewerseditor</a>['format'];
<a name="l103"><span class="linenum"> 103</span></a>      }
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>      if (<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('conclusioneditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/conclusioneditor.html">conclusioneditor</a>['itemid']) {
<a name="l106"><span class="linenum"> 106</span></a>          <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('conclusion')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/conclusion.html">conclusion</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_workshop', 'conclusion',
<a name="l107"><span class="linenum"> 107</span></a>                  0, <a class="class" onClick="logClass('workshop')" href="../../_classes/workshop.html" onMouseOver="classPopup(event,'workshop')">workshop</a>::<a class="function" onClick="logFunction('instruction_editors_options')" href="../../_functions/instruction_editors_options.html" onMouseOver="funcPopup(event,'instruction_editors_options')">instruction_editors_options</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>), <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('conclusioneditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/conclusioneditor.html">conclusioneditor</a>['text']);
<a name="l108"><span class="linenum"> 108</span></a>          <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('conclusionformat')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/conclusionformat.html">conclusionformat</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('conclusioneditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/conclusioneditor.html">conclusioneditor</a>['format'];
<a name="l109"><span class="linenum"> 109</span></a>      }
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">    // re-save the record with the replaced URLs in editor fields</span>
<a name="l112"><span class="linenum"> 112</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>);
<a name="l113"><span class="linenum"> 113</span></a>  
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">    // create gradebook items</span>
<a name="l115"><span class="linenum"> 115</span></a>      <a class="function" onClick="logFunction('workshop_grade_item_update')" href="../../_functions/workshop_grade_item_update.html" onMouseOver="funcPopup(event,'workshop_grade_item_update')">workshop_grade_item_update</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>);
<a name="l116"><span class="linenum"> 116</span></a>      <a class="function" onClick="logFunction('workshop_grade_item_category_update')" href="../../_functions/workshop_grade_item_category_update.html" onMouseOver="funcPopup(event,'workshop_grade_item_category_update')">workshop_grade_item_category_update</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>);
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">    // create calendar events</span>
<a name="l119"><span class="linenum"> 119</span></a>      <a class="function" onClick="logFunction('workshop_calendar_update')" href="../../_functions/workshop_calendar_update.html" onMouseOver="funcPopup(event,'workshop_calendar_update')">workshop_calendar_update</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>, <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>);
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>      return <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l122"><span class="linenum"> 122</span></a>  }
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">/**</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment"> * Given an object containing all the necessary data,</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment"> * (defined by the form in mod_form.php) this function</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment"> * will update an existing instance with new data.</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment"> *</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment"> * @param stdClass $workshop An object from the form in mod_form.php</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment"> * @return bool success</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment"> */</span>
<a name="l132"><span class="linenum"> 132</span></a>  function <a class="function" onClick="logFunction('workshop_update_instance')" href="../../_functions/workshop_update_instance.html" onMouseOver="funcPopup(event,'workshop_update_instance')">workshop_update_instance</a>(stdclass <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>) {
<a name="l133"><span class="linenum"> 133</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l134"><span class="linenum"> 134</span></a>      require_once(<a class="phpfunction" onClick="logFunction('dirname')" href="../../_functions/dirname.html" onMouseOver="phpfuncPopup(event,'dirname')">dirname</a>(__FILE__) . '/locallib.php');
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>          = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l137"><span class="linenum"> 137</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>                    = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instance')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l138"><span class="linenum"> 138</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('useexamples')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/useexamples.html">useexamples</a>           = (int)!empty(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('useexamples')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/useexamples.html">useexamples</a>);
<a name="l139"><span class="linenum"> 139</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('usepeerassessment')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/usepeerassessment.html">usepeerassessment</a>     = 1;
<a name="l140"><span class="linenum"> 140</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('useselfassessment')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/useselfassessment.html">useselfassessment</a>     = (int)!empty(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('useselfassessment')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/useselfassessment.html">useselfassessment</a>);
<a name="l141"><span class="linenum"> 141</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('latesubmissions')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/latesubmissions.html">latesubmissions</a>       = (int)!empty(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('latesubmissions')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/latesubmissions.html">latesubmissions</a>);
<a name="l142"><span class="linenum"> 142</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('phaseswitchassessment')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/phaseswitchassessment.html">phaseswitchassessment</a> = (int)!empty(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('phaseswitchassessment')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/phaseswitchassessment.html">phaseswitchassessment</a>);
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">    // todo - if the grading strategy is being changed, we may want to replace all aggregated peer grades with nulls</span>
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>);
<a name="l147"><span class="linenum"> 147</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>);
<a name="l148"><span class="linenum"> 148</span></a>  
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">    // process the custom wysiwyg editors</span>
<a name="l150"><span class="linenum"> 150</span></a>      if (<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructauthorseditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructauthorseditor.html">instructauthorseditor</a>['itemid']) {
<a name="l151"><span class="linenum"> 151</span></a>          <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructauthors')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructauthors.html">instructauthors</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_workshop', 'instructauthors',
<a name="l152"><span class="linenum"> 152</span></a>                  0, <a class="class" onClick="logClass('workshop')" href="../../_classes/workshop.html" onMouseOver="classPopup(event,'workshop')">workshop</a>::<a class="function" onClick="logFunction('instruction_editors_options')" href="../../_functions/instruction_editors_options.html" onMouseOver="funcPopup(event,'instruction_editors_options')">instruction_editors_options</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>), <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructauthorseditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructauthorseditor.html">instructauthorseditor</a>['text']);
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructauthorsformat')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructauthorsformat.html">instructauthorsformat</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructauthorseditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructauthorseditor.html">instructauthorseditor</a>['format'];
<a name="l154"><span class="linenum"> 154</span></a>      }
<a name="l155"><span class="linenum"> 155</span></a>  
<a name="l156"><span class="linenum"> 156</span></a>      if (<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructreviewerseditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructreviewerseditor.html">instructreviewerseditor</a>['itemid']) {
<a name="l157"><span class="linenum"> 157</span></a>          <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructreviewers')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructreviewers.html">instructreviewers</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_workshop', 'instructreviewers',
<a name="l158"><span class="linenum"> 158</span></a>                  0, <a class="class" onClick="logClass('workshop')" href="../../_classes/workshop.html" onMouseOver="classPopup(event,'workshop')">workshop</a>::<a class="function" onClick="logFunction('instruction_editors_options')" href="../../_functions/instruction_editors_options.html" onMouseOver="funcPopup(event,'instruction_editors_options')">instruction_editors_options</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>), <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructreviewerseditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructreviewerseditor.html">instructreviewerseditor</a>['text']);
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructreviewersformat')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructreviewersformat.html">instructreviewersformat</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('instructreviewerseditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/instructreviewerseditor.html">instructreviewerseditor</a>['format'];
<a name="l160"><span class="linenum"> 160</span></a>      }
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>      if (<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('conclusioneditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/conclusioneditor.html">conclusioneditor</a>['itemid']) {
<a name="l163"><span class="linenum"> 163</span></a>          <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('conclusion')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/conclusion.html">conclusion</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_workshop', 'conclusion',
<a name="l164"><span class="linenum"> 164</span></a>                  0, <a class="class" onClick="logClass('workshop')" href="../../_classes/workshop.html" onMouseOver="classPopup(event,'workshop')">workshop</a>::<a class="function" onClick="logFunction('instruction_editors_options')" href="../../_functions/instruction_editors_options.html" onMouseOver="funcPopup(event,'instruction_editors_options')">instruction_editors_options</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>), <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('conclusioneditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/conclusioneditor.html">conclusioneditor</a>['text']);
<a name="l165"><span class="linenum"> 165</span></a>          <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('conclusionformat')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/conclusionformat.html">conclusionformat</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('conclusioneditor')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/conclusioneditor.html">conclusioneditor</a>['format'];
<a name="l166"><span class="linenum"> 166</span></a>      }
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">    // re-save the record with the replaced URLs in editor fields</span>
<a name="l169"><span class="linenum"> 169</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>);
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">    // update gradebook items</span>
<a name="l172"><span class="linenum"> 172</span></a>      <a class="function" onClick="logFunction('workshop_grade_item_update')" href="../../_functions/workshop_grade_item_update.html" onMouseOver="funcPopup(event,'workshop_grade_item_update')">workshop_grade_item_update</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>);
<a name="l173"><span class="linenum"> 173</span></a>      <a class="function" onClick="logFunction('workshop_grade_item_category_update')" href="../../_functions/workshop_grade_item_category_update.html" onMouseOver="funcPopup(event,'workshop_grade_item_category_update')">workshop_grade_item_category_update</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>);
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">    // update calendar events</span>
<a name="l176"><span class="linenum"> 176</span></a>      <a class="function" onClick="logFunction('workshop_calendar_update')" href="../../_functions/workshop_calendar_update.html" onMouseOver="funcPopup(event,'workshop_calendar_update')">workshop_calendar_update</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>, <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>);
<a name="l177"><span class="linenum"> 177</span></a>  
<a name="l178"><span class="linenum"> 178</span></a>      return true;
<a name="l179"><span class="linenum"> 179</span></a>  }
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">/**</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment"> * Given an ID of an instance of this module,</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment"> * this function will permanently delete the instance</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment"> * and any data that depends on it.</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment"> *</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment"> * @param int $id Id of the module instance</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment"> * @return boolean Success/Failure</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment"> */</span>
<a name="l189"><span class="linenum"> 189</span></a>  function <a class="function" onClick="logFunction('workshop_delete_instance')" href="../../_functions/workshop_delete_instance.html" onMouseOver="funcPopup(event,'workshop_delete_instance')">workshop_delete_instance</a>(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l190"><span class="linenum"> 190</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l191"><span class="linenum"> 191</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l192"><span class="linenum"> 192</span></a>  
<a name="l193"><span class="linenum"> 193</span></a>      if (! <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('workshop', array('id' =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>))) {
<a name="l194"><span class="linenum"> 194</span></a>          return false;
<a name="l195"><span class="linenum"> 195</span></a>      }
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">    // delete all associated aggregations</span>
<a name="l198"><span class="linenum"> 198</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('workshop_aggregations', array('workshopid' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l199"><span class="linenum"> 199</span></a>  
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">    // get the list of ids of all submissions</span>
<a name="l201"><span class="linenum"> 201</span></a>      <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('workshop_submissions', array('workshopid' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), '', 'id');
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">    // get the list of all allocated assessments</span>
<a name="l204"><span class="linenum"> 204</span></a>      <a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_list')" href="../../_functions/get_records_list.html" onMouseOver="funcPopup(event,'get_records_list')">get_records_list</a>('workshop_assessments', 'submissionid', <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>), '', 'id');
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">    // delete the associated records from the workshop core tables</span>
<a name="l207"><span class="linenum"> 207</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_list')" href="../../_functions/delete_records_list.html" onMouseOver="funcPopup(event,'delete_records_list')">delete_records_list</a>('workshop_grades', 'assessmentid', <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a>));
<a name="l208"><span class="linenum"> 208</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_list')" href="../../_functions/delete_records_list.html" onMouseOver="funcPopup(event,'delete_records_list')">delete_records_list</a>('workshop_assessments', 'id', <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a>));
<a name="l209"><span class="linenum"> 209</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_list')" href="../../_functions/delete_records_list.html" onMouseOver="funcPopup(event,'delete_records_list')">delete_records_list</a>('workshop_submissions', 'id', <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>));
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">    // call the static clean-up methods of all available subplugins</span>
<a name="l212"><span class="linenum"> 212</span></a>      <a class="var it9143" onMouseOver="hilite(9143)" onMouseOut="lolite()" onClick="logVariable('strategies')" href="../../_variables/strategies.html">$strategies</a> = <a class="class" onClick="logClass('core_component')" href="../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('workshopform');
<a name="l213"><span class="linenum"> 213</span></a>      foreach (<a class="var it9143" onMouseOver="hilite(9143)" onMouseOut="lolite()" onClick="logVariable('strategies')" href="../../_variables/strategies.html">$strategies</a> as <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('strategy')" href="../../_variables/strategy.html">$strategy</a> =&gt; <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>) {
<a name="l214"><span class="linenum"> 214</span></a>          <span class="keyword">require_once</span> <a class="filename" href="../../mod/workshop/lib.php.html" onMouseOver="reqPopup(event, 'lib.php', '../../mod/workshop/lib.php')">($path.'/lib.php')</a>;
<a name="l215"><span class="linenum"> 215</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a> = 'workshop_'.<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('strategy')" href="../../_variables/strategy.html">$strategy</a>.'_strategy';
<a name="l216"><span class="linenum"> 216</span></a>          <a class="phpfunction" onClick="logFunction('call_user_func')" href="../../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a>.'::delete_instance', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l217"><span class="linenum"> 217</span></a>      }
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>      <a class="var it11469" onMouseOver="hilite(11469)" onMouseOut="lolite()" onClick="logVariable('allocators')" href="../../_variables/allocators.html">$allocators</a> = <a class="class" onClick="logClass('core_component')" href="../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('workshopallocation');
<a name="l220"><span class="linenum"> 220</span></a>      foreach (<a class="var it11469" onMouseOver="hilite(11469)" onMouseOut="lolite()" onClick="logVariable('allocators')" href="../../_variables/allocators.html">$allocators</a> as <a class="var it11470" onMouseOver="hilite(11470)" onMouseOut="lolite()" onClick="logVariable('allocator')" href="../../_variables/allocator.html">$allocator</a> =&gt; <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>) {
<a name="l221"><span class="linenum"> 221</span></a>          <span class="keyword">require_once</span> <a class="filename" href="../../mod/workshop/lib.php.html" onMouseOver="reqPopup(event, 'lib.php', '../../mod/workshop/lib.php')">($path.'/lib.php')</a>;
<a name="l222"><span class="linenum"> 222</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a> = 'workshop_'.<a class="var it11470" onMouseOver="hilite(11470)" onMouseOut="lolite()" onClick="logVariable('allocator')" href="../../_variables/allocator.html">$allocator</a>.'_allocator';
<a name="l223"><span class="linenum"> 223</span></a>          <a class="phpfunction" onClick="logFunction('call_user_func')" href="../../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a>.'::delete_instance', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l224"><span class="linenum"> 224</span></a>      }
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>      <a class="var it11471" onMouseOver="hilite(11471)" onMouseOut="lolite()" onClick="logVariable('evaluators')" href="../../_variables/evaluators.html">$evaluators</a> = <a class="class" onClick="logClass('core_component')" href="../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('workshopeval');
<a name="l227"><span class="linenum"> 227</span></a>      foreach (<a class="var it11471" onMouseOver="hilite(11471)" onMouseOut="lolite()" onClick="logVariable('evaluators')" href="../../_variables/evaluators.html">$evaluators</a> as <a class="var it9430" onMouseOver="hilite(9430)" onMouseOut="lolite()" onClick="logVariable('evaluator')" href="../../_variables/evaluator.html">$evaluator</a> =&gt; <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>) {
<a name="l228"><span class="linenum"> 228</span></a>          <span class="keyword">require_once</span> <a class="filename" href="../../mod/workshop/lib.php.html" onMouseOver="reqPopup(event, 'lib.php', '../../mod/workshop/lib.php')">($path.'/lib.php')</a>;
<a name="l229"><span class="linenum"> 229</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a> = 'workshop_'.<a class="var it9430" onMouseOver="hilite(9430)" onMouseOut="lolite()" onClick="logVariable('evaluator')" href="../../_variables/evaluator.html">$evaluator</a>.'_evaluation';
<a name="l230"><span class="linenum"> 230</span></a>          <a class="phpfunction" onClick="logFunction('call_user_func')" href="../../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a>.'::delete_instance', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l231"><span class="linenum"> 231</span></a>      }
<a name="l232"><span class="linenum"> 232</span></a>  
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">    // delete the calendar events</span>
<a name="l234"><span class="linenum"> 234</span></a>      <a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', array('modulename' =&gt; 'workshop', 'instance' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l235"><span class="linenum"> 235</span></a>      foreach (<a class="var it178" onMouseOver="hilite(178)" onMouseOut="lolite()" onClick="logVariable('events')" href="../../_variables/events.html">$events</a> as <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>) {
<a name="l236"><span class="linenum"> 236</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l237"><span class="linenum"> 237</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l238"><span class="linenum"> 238</span></a>      }
<a name="l239"><span class="linenum"> 239</span></a>  
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">    // finally remove the workshop record itself</span>
<a name="l241"><span class="linenum"> 241</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('workshop', array('id' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">    // gradebook cleanup</span>
<a name="l244"><span class="linenum"> 244</span></a>      <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>('mod/workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('course')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, 'mod', 'workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, null, array('deleted' =&gt; true));
<a name="l245"><span class="linenum"> 245</span></a>      <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>('mod/workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('course')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, 'mod', 'workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 1, null, array('deleted' =&gt; true));
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>      return true;
<a name="l248"><span class="linenum"> 248</span></a>  }
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">/**</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment"> * List the actions that correspond to a view of this module.</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment"> *</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment"> *       crud = 'r' and edulevel = LEVEL_PARTICIPATING will</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment"> *       be considered as view action.</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment"> *</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment"> * @return array</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment"> */</span>
<a name="l260"><span class="linenum"> 260</span></a>  function <a class="function" onClick="logFunction('workshop_get_view_actions')" href="../../_functions/workshop_get_view_actions.html" onMouseOver="funcPopup(event,'workshop_get_view_actions')">workshop_get_view_actions</a>() {
<a name="l261"><span class="linenum"> 261</span></a>      return array('view', 'view all', 'view submission', 'view example');
<a name="l262"><span class="linenum"> 262</span></a>  }
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">/**</span>
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment"> * List the actions that correspond to a post of this module.</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment"> *</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment"> *       crud = ('c' || 'u' || 'd') and edulevel = LEVEL_PARTICIPATING</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment"> *       will be considered as post action.</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment"> *</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment"> * @return array</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment"> */</span>
<a name="l274"><span class="linenum"> 274</span></a>  function <a class="function" onClick="logFunction('workshop_get_post_actions')" href="../../_functions/workshop_get_post_actions.html" onMouseOver="funcPopup(event,'workshop_get_post_actions')">workshop_get_post_actions</a>() {
<a name="l275"><span class="linenum"> 275</span></a>      return array('add', 'add assessment', 'add example', 'add submission',
<a name="l276"><span class="linenum"> 276</span></a>                   'update', 'update assessment', 'update example', 'update submission');
<a name="l277"><span class="linenum"> 277</span></a>  }
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">/**</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment"> * Return a small object with summary information about what a</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment"> * user has done with a given particular instance of this module</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment"> * Used for user activity reports.</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment"> * $return-&gt;time = the time they did it</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment"> * $return-&gt;info = a short text description</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment"> *</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment"> * @param stdClass $course The course record.</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment"> * @param stdClass $user The user record.</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment"> * @param cm_info|stdClass $mod The course module info object or record.</span>
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment"> * @param stdClass $workshop The workshop instance record.</span>
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment"> * @return stdclass|null</span>
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment"> */</span>
<a name="l292"><span class="linenum"> 292</span></a>  function <a class="function" onClick="logFunction('workshop_user_outline')" href="../../_functions/workshop_user_outline.html" onMouseOver="funcPopup(event,'workshop_user_outline')">workshop_user_outline</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>) {
<a name="l293"><span class="linenum"> 293</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l294"><span class="linenum"> 294</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>      <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod', 'workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>      <a class="var it11472" onMouseOver="hilite(11472)" onMouseOut="lolite()" onClick="logVariable('submissiongrade')" href="../../_variables/submissiongrade.html">$submissiongrade</a> = null;
<a name="l299"><span class="linenum"> 299</span></a>      <a class="var it11473" onMouseOver="hilite(11473)" onMouseOut="lolite()" onClick="logVariable('assessmentgrade')" href="../../_variables/assessmentgrade.html">$assessmentgrade</a> = null;
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>      <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = '';
<a name="l302"><span class="linenum"> 302</span></a>      <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a> = 0;
<a name="l303"><span class="linenum"> 303</span></a>  
<a name="l304"><span class="linenum"> 304</span></a>      if (!empty(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades)) {
<a name="l305"><span class="linenum"> 305</span></a>          <a class="var it11472" onMouseOver="hilite(11472)" onMouseOut="lolite()" onClick="logVariable('submissiongrade')" href="../../_variables/submissiongrade.html">$submissiongrade</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades);
<a name="l306"><span class="linenum"> 306</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> .= <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissiongrade', 'workshop') . ': ' . <a class="var it11472" onMouseOver="hilite(11472)" onMouseOut="lolite()" onClick="logVariable('submissiongrade')" href="../../_variables/submissiongrade.html">$submissiongrade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it40210" onMouseOver="hilite(40210)" onMouseOut="lolite()" href="../../_variables/str_long_grade.html">str_long_grade</a> . <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('empty_tag')" href="../../_functions/empty_tag.html" onMouseOver="funcPopup(event,'empty_tag')">empty_tag</a>('br');
<a name="l307"><span class="linenum"> 307</span></a>          <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a>, <a class="var it11472" onMouseOver="hilite(11472)" onMouseOut="lolite()" onClick="logVariable('submissiongrade')" href="../../_variables/submissiongrade.html">$submissiongrade</a>-&gt;<a onClick="logVariable('dategraded')" class="var it40210" onMouseOver="hilite(40210)" onMouseOut="lolite()" href="../../_variables/dategraded.html">dategraded</a>);
<a name="l308"><span class="linenum"> 308</span></a>      }
<a name="l309"><span class="linenum"> 309</span></a>      if (!empty(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[1]-&gt;grades)) {
<a name="l310"><span class="linenum"> 310</span></a>          <a class="var it11473" onMouseOver="hilite(11473)" onMouseOut="lolite()" onClick="logVariable('assessmentgrade')" href="../../_variables/assessmentgrade.html">$assessmentgrade</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[1]-&gt;grades);
<a name="l311"><span class="linenum"> 311</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> .= <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradinggrade', 'workshop') . ': ' . <a class="var it11473" onMouseOver="hilite(11473)" onMouseOut="lolite()" onClick="logVariable('assessmentgrade')" href="../../_variables/assessmentgrade.html">$assessmentgrade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it40211" onMouseOver="hilite(40211)" onMouseOut="lolite()" href="../../_variables/str_long_grade.html">str_long_grade</a>;
<a name="l312"><span class="linenum"> 312</span></a>          <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a>, <a class="var it11473" onMouseOver="hilite(11473)" onMouseOut="lolite()" onClick="logVariable('assessmentgrade')" href="../../_variables/assessmentgrade.html">$assessmentgrade</a>-&gt;<a onClick="logVariable('dategraded')" class="var it40211" onMouseOver="hilite(40211)" onMouseOut="lolite()" href="../../_variables/dategraded.html">dategraded</a>);
<a name="l313"><span class="linenum"> 313</span></a>      }
<a name="l314"><span class="linenum"> 314</span></a>  
<a name="l315"><span class="linenum"> 315</span></a>      if (!empty(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>) and !empty(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a>)) {
<a name="l316"><span class="linenum"> 316</span></a>          <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = new stdclass();
<a name="l317"><span class="linenum"> 317</span></a>          <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('time')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/time.html">time</a> = <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a>;
<a name="l318"><span class="linenum"> 318</span></a>          <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('info')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/info.html">info</a> = <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>;
<a name="l319"><span class="linenum"> 319</span></a>          return <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l320"><span class="linenum"> 320</span></a>      }
<a name="l321"><span class="linenum"> 321</span></a>  
<a name="l322"><span class="linenum"> 322</span></a>      return null;
<a name="l323"><span class="linenum"> 323</span></a>  }
<a name="l324"><span class="linenum"> 324</span></a>  
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment">/**</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment"> * Print a detailed representation of what a user has done with</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment"> * a given particular instance of this module, for user activity reports.</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment"> *</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment"> * @param stdClass $course The course record.</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment"> * @param stdClass $user The user record.</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment"> * @param cm_info|stdClass $mod The course module info object or record.</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment"> * @param stdClass $workshop The workshop instance record.</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment"> * @return string HTML</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment"> */</span>
<a name="l335"><span class="linenum"> 335</span></a>  function <a class="function" onClick="logFunction('workshop_user_complete')" href="../../_functions/workshop_user_complete.html" onMouseOver="funcPopup(event,'workshop_user_complete')">workshop_user_complete</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>) {
<a name="l336"><span class="linenum"> 336</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l337"><span class="linenum"> 337</span></a>      require_once(<a class="phpfunction" onClick="logFunction('dirname')" href="../../_functions/dirname.html" onMouseOver="phpfuncPopup(event,'dirname')">dirname</a>(__FILE__).'/locallib.php');
<a name="l338"><span class="linenum"> 338</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l339"><span class="linenum"> 339</span></a>  
<a name="l340"><span class="linenum"> 340</span></a>      <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>   = <span class="keyword">new </span><a class="class" onClick="logClass('workshop')" href="../../_classes/workshop.html" onMouseOver="classPopup(event,'workshop')">workshop</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>, <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l341"><span class="linenum"> 341</span></a>      <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>     = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod', 'workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>      if (!empty(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades)) {
<a name="l344"><span class="linenum"> 344</span></a>          <a class="var it11472" onMouseOver="hilite(11472)" onMouseOut="lolite()" onClick="logVariable('submissiongrade')" href="../../_variables/submissiongrade.html">$submissiongrade</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades);
<a name="l345"><span class="linenum"> 345</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissiongrade', 'workshop') . ': ' . <a class="var it11472" onMouseOver="hilite(11472)" onMouseOut="lolite()" onClick="logVariable('submissiongrade')" href="../../_variables/submissiongrade.html">$submissiongrade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it40210" onMouseOver="hilite(40210)" onMouseOut="lolite()" href="../../_variables/str_long_grade.html">str_long_grade</a>;
<a name="l346"><span class="linenum"> 346</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('li', <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>, array('class'=&gt;'submissiongrade'));
<a name="l347"><span class="linenum"> 347</span></a>      }
<a name="l348"><span class="linenum"> 348</span></a>      if (!empty(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[1]-&gt;grades)) {
<a name="l349"><span class="linenum"> 349</span></a>          <a class="var it11473" onMouseOver="hilite(11473)" onMouseOut="lolite()" onClick="logVariable('assessmentgrade')" href="../../_variables/assessmentgrade.html">$assessmentgrade</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[1]-&gt;grades);
<a name="l350"><span class="linenum"> 350</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradinggrade', 'workshop') . ': ' . <a class="var it11473" onMouseOver="hilite(11473)" onMouseOut="lolite()" onClick="logVariable('assessmentgrade')" href="../../_variables/assessmentgrade.html">$assessmentgrade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it40211" onMouseOver="hilite(40211)" onMouseOut="lolite()" href="../../_variables/str_long_grade.html">str_long_grade</a>;
<a name="l351"><span class="linenum"> 351</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('li', <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>, array('class'=&gt;'gradinggrade'));
<a name="l352"><span class="linenum"> 352</span></a>      }
<a name="l353"><span class="linenum"> 353</span></a>  
<a name="l354"><span class="linenum"> 354</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewallsubmissions', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('context')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l355"><span class="linenum"> 355</span></a>          <a class="var it11474" onMouseOver="hilite(11474)" onMouseOut="lolite()" onClick="logVariable('canviewsubmission')" href="../../_variables/canviewsubmission.html">$canviewsubmission</a> = true;
<a name="l356"><span class="linenum"> 356</span></a>          if (<a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('cm')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>) == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a>) {
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">            // user must have accessallgroups or share at least one group with the submission author</span>
<a name="l358"><span class="linenum"> 358</span></a>              if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('context')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l359"><span class="linenum"> 359</span></a>                  <a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('usersgroups')" href="../../_variables/usersgroups.html">$usersgroups</a> = <a class="function" onClick="logFunction('groups_get_activity_allowed_groups')" href="../../_functions/groups_get_activity_allowed_groups.html" onMouseOver="funcPopup(event,'groups_get_activity_allowed_groups')">groups_get_activity_allowed_groups</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('cm')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>);
<a name="l360"><span class="linenum"> 360</span></a>                  <a class="var it11475" onMouseOver="hilite(11475)" onMouseOut="lolite()" onClick="logVariable('authorsgroups')" href="../../_variables/authorsgroups.html">$authorsgroups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('course')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>-&gt;id, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('cm')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;groupingid, 'g.id');
<a name="l361"><span class="linenum"> 361</span></a>                  <a class="var it11476" onMouseOver="hilite(11476)" onMouseOut="lolite()" onClick="logVariable('sharedgroups')" href="../../_variables/sharedgroups.html">$sharedgroups</a> = array_intersect_key(<a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('usersgroups')" href="../../_variables/usersgroups.html">$usersgroups</a>, <a class="var it11475" onMouseOver="hilite(11475)" onMouseOut="lolite()" onClick="logVariable('authorsgroups')" href="../../_variables/authorsgroups.html">$authorsgroups</a>);
<a name="l362"><span class="linenum"> 362</span></a>                  if (empty(<a class="var it11476" onMouseOver="hilite(11476)" onMouseOut="lolite()" onClick="logVariable('sharedgroups')" href="../../_variables/sharedgroups.html">$sharedgroups</a>)) {
<a name="l363"><span class="linenum"> 363</span></a>                      <a class="var it11474" onMouseOver="hilite(11474)" onMouseOut="lolite()" onClick="logVariable('canviewsubmission')" href="../../_variables/canviewsubmission.html">$canviewsubmission</a> = false;
<a name="l364"><span class="linenum"> 364</span></a>                  }
<a name="l365"><span class="linenum"> 365</span></a>              }
<a name="l366"><span class="linenum"> 366</span></a>          }
<a name="l367"><span class="linenum"> 367</span></a>          if (<a class="var it11474" onMouseOver="hilite(11474)" onMouseOut="lolite()" onClick="logVariable('canviewsubmission')" href="../../_variables/canviewsubmission.html">$canviewsubmission</a> and <a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a class="function" onClick="logFunction('get_submission_by_author')" href="../../_functions/get_submission_by_author.html" onMouseOver="funcPopup(event,'get_submission_by_author')">get_submission_by_author</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l368"><span class="linenum"> 368</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>      = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('title')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/title.html">title</a>);
<a name="l369"><span class="linenum"> 369</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>        = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a class="function" onClick="logFunction('submission_url')" href="../../_functions/submission_url.html" onMouseOver="funcPopup(event,'submission_url')">submission_url</a>(<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l370"><span class="linenum"> 370</span></a>              <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>       = <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>);
<a name="l371"><span class="linenum"> 371</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>       = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submission', 'workshop').': '.<a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>;
<a name="l372"><span class="linenum"> 372</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('li', <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>, array('class'=&gt;'submission'));
<a name="l373"><span class="linenum"> 373</span></a>          }
<a name="l374"><span class="linenum"> 374</span></a>      }
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewallassessments', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('context')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>)) {
<a name="l377"><span class="linenum"> 377</span></a>          if (<a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a class="function" onClick="logFunction('get_assessments_by_reviewer')" href="../../_functions/get_assessments_by_reviewer.html" onMouseOver="funcPopup(event,'get_assessments_by_reviewer')">get_assessments_by_reviewer</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l378"><span class="linenum"> 378</span></a>              foreach (<a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a> as <a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>) {
<a name="l379"><span class="linenum"> 379</span></a>                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a> = new stdclass();
<a name="l380"><span class="linenum"> 380</span></a>                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('submissionurl')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/submissionurl.html">submissionurl</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a class="function" onClick="logFunction('submission_url')" href="../../_functions/submission_url.html" onMouseOver="funcPopup(event,'submission_url')">submission_url</a>(<a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('submissionid')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a>)-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l381"><span class="linenum"> 381</span></a>                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('assessmenturl')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/assessmenturl.html">assessmenturl</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a class="function" onClick="logFunction('assess_url')" href="../../_functions/assess_url.html" onMouseOver="funcPopup(event,'assess_url')">assess_url</a>(<a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('id')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l382"><span class="linenum"> 382</span></a>                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('submissiontitle')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/submissiontitle.html">submissiontitle</a> = <a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('submissiontitle')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/submissiontitle.html">submissiontitle</a>);
<a name="l383"><span class="linenum"> 383</span></a>                  echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('li', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('assessmentofsubmission', 'workshop', <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>));
<a name="l384"><span class="linenum"> 384</span></a>              }
<a name="l385"><span class="linenum"> 385</span></a>          }
<a name="l386"><span class="linenum"> 386</span></a>      }
<a name="l387"><span class="linenum"> 387</span></a>  }
<a name="l388"><span class="linenum"> 388</span></a>  
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment">/**</span>
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment"> * Given a course and a time, this module should find recent activity</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment"> * that has occurred in workshop activities and print it out.</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment"> * Return true if there was output, or false is there was none.</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment"> *</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment"> * @param stdClass $course</span>
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment"> * @param bool $viewfullnames</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment"> * @param int $timestart</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment"> * @return boolean</span>
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment"> */</span>
<a name="l399"><span class="linenum"> 399</span></a>  function <a class="function" onClick="logFunction('workshop_print_recent_activity')" href="../../_functions/workshop_print_recent_activity.html" onMouseOver="funcPopup(event,'workshop_print_recent_activity')">workshop_print_recent_activity</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>) {
<a name="l400"><span class="linenum"> 400</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l401"><span class="linenum"> 401</span></a>  
<a name="l402"><span class="linenum"> 402</span></a>      <a class="var it11480" onMouseOver="hilite(11480)" onMouseOut="lolite()" onClick="logVariable('authoramefields')" href="../../_variables/authoramefields.html">$authoramefields</a> = <a class="function" onClick="logFunction('get_all_user_name_fields')" href="../../_functions/get_all_user_name_fields.html" onMouseOver="funcPopup(event,'get_all_user_name_fields')">get_all_user_name_fields</a>(true, 'author', null, 'author');
<a name="l403"><span class="linenum"> 403</span></a>      <a class="var it11481" onMouseOver="hilite(11481)" onMouseOut="lolite()" onClick="logVariable('reviewerfields')" href="../../_variables/reviewerfields.html">$reviewerfields</a> = <a class="function" onClick="logFunction('get_all_user_name_fields')" href="../../_functions/get_all_user_name_fields.html" onMouseOver="funcPopup(event,'get_all_user_name_fields')">get_all_user_name_fields</a>(true, 'reviewer', null, 'reviewer');
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT s.id AS submissionid, s.title AS submissiontitle, s.timemodified AS submissionmodified,
<a name="l406"><span class="linenum"> 406</span></a>                     author.id AS authorid, <a class="var it11480" onMouseOver="hilite(11480)" onMouseOut="lolite()" onClick="logVariable('authoramefields')" href="../../_variables/authoramefields.html">$authoramefields</a>, a.id AS assessmentid, a.timemodified AS assessmentmodified,
<a name="l407"><span class="linenum"> 407</span></a>                     reviewer.id AS reviewerid, <a class="var it11481" onMouseOver="hilite(11481)" onMouseOut="lolite()" onClick="logVariable('reviewerfields')" href="../../_variables/reviewerfields.html">$reviewerfields</a>, cm.id AS cmid
<a name="l408"><span class="linenum"> 408</span></a>                FROM {workshop} w
<a name="l409"><span class="linenum"> 409</span></a>          INNER JOIN {course_modules} cm ON cm.instance = w.id
<a name="l410"><span class="linenum"> 410</span></a>          INNER JOIN {modules} md ON md.id = cm.module
<a name="l411"><span class="linenum"> 411</span></a>          INNER JOIN {workshop_submissions} s ON s.workshopid = w.id
<a name="l412"><span class="linenum"> 412</span></a>          INNER JOIN {user} author ON s.authorid = author.id
<a name="l413"><span class="linenum"> 413</span></a>           LEFT JOIN {workshop_assessments} a ON a.submissionid = s.id
<a name="l414"><span class="linenum"> 414</span></a>           LEFT JOIN {user} reviewer ON a.reviewerid = reviewer.id
<a name="l415"><span class="linenum"> 415</span></a>               WHERE cm.course = ?
<a name="l416"><span class="linenum"> 416</span></a>                     AND md.name = 'workshop'
<a name="l417"><span class="linenum"> 417</span></a>                     AND s.example = 0
<a name="l418"><span class="linenum"> 418</span></a>                     AND (s.timemodified &gt; ? OR a.timemodified &gt; ?)
<a name="l419"><span class="linenum"> 419</span></a>            ORDER BY s.timemodified&quot;;
<a name="l420"><span class="linenum"> 420</span></a>  
<a name="l421"><span class="linenum"> 421</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>));
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>      <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>); <span class="comment">// reference needed because we might load the groups</span>
<a name="l424"><span class="linenum"> 424</span></a>  
<a name="l425"><span class="linenum"> 425</span></a>      <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a> = array(); <span class="comment">// recent submissions indexed by submission id</span>
<a name="l426"><span class="linenum"> 426</span></a>      <a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a> = array(); <span class="comment">// recent assessments indexed by assessment id</span>
<a name="l427"><span class="linenum"> 427</span></a>      <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>       = array();
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>      foreach (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> as <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>) {
<a name="l430"><span class="linenum"> 430</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('cmid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>, <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('cms')" class="var it39598" onMouseOver="hilite(39598)" onMouseOut="lolite()" href="../../_variables/cms.html">cms</a>)) {
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">            // this should not happen but just in case</span>
<a name="l432"><span class="linenum"> 432</span></a>              continue;
<a name="l433"><span class="linenum"> 433</span></a>          }
<a name="l434"><span class="linenum"> 434</span></a>  
<a name="l435"><span class="linenum"> 435</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('cms')" class="var it39598" onMouseOver="hilite(39598)" onMouseOut="lolite()" href="../../_variables/cms.html">cms</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('cmid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>];
<a name="l436"><span class="linenum"> 436</span></a>          if (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('uservisible')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/uservisible.html">uservisible</a>) {
<a name="l437"><span class="linenum"> 437</span></a>              continue;
<a name="l438"><span class="linenum"> 438</span></a>          }
<a name="l439"><span class="linenum"> 439</span></a>  
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">        // remember all user names we can use later</span>
<a name="l441"><span class="linenum"> 441</span></a>          if (empty(<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('authorid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>])) {
<a name="l442"><span class="linenum"> 442</span></a>              <a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../../_variables/u.html">$u</a> = new stdclass();
<a name="l443"><span class="linenum"> 443</span></a>              <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('authorid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>] = <a class="function" onClick="logFunction('username_load_fields_from_object')" href="../../_functions/username_load_fields_from_object.html" onMouseOver="funcPopup(event,'username_load_fields_from_object')">username_load_fields_from_object</a>(<a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../../_variables/u.html">$u</a>, <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>, 'author');
<a name="l444"><span class="linenum"> 444</span></a>          }
<a name="l445"><span class="linenum"> 445</span></a>          if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a> and empty(<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a>])) {
<a name="l446"><span class="linenum"> 446</span></a>              <a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../../_variables/u.html">$u</a> = new stdclass();
<a name="l447"><span class="linenum"> 447</span></a>              <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a>] = <a class="function" onClick="logFunction('username_load_fields_from_object')" href="../../_functions/username_load_fields_from_object.html" onMouseOver="funcPopup(event,'username_load_fields_from_object')">username_load_fields_from_object</a>(<a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../../_variables/u.html">$u</a>, <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>, 'reviewer');
<a name="l448"><span class="linenum"> 448</span></a>          }
<a name="l449"><span class="linenum"> 449</span></a>  
<a name="l450"><span class="linenum"> 450</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l451"><span class="linenum"> 451</span></a>          <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>          if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionmodified')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionmodified.html">submissionmodified</a> &gt; <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a> and empty(<a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a>])) {
<a name="l454"><span class="linenum"> 454</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a> = new stdclass();
<a name="l455"><span class="linenum"> 455</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('title')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissiontitle')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissiontitle.html">submissiontitle</a>;
<a name="l456"><span class="linenum"> 456</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('authorid')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('authorid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>;
<a name="l457"><span class="linenum"> 457</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('timemodified')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionmodified')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionmodified.html">submissionmodified</a>;
<a name="l458"><span class="linenum"> 458</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('cmid')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('cmid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>;
<a name="l459"><span class="linenum"> 459</span></a>              if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('authorid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a> == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> || <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewauthornames', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l460"><span class="linenum"> 460</span></a>                  <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('authornamevisible')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/authornamevisible.html">authornamevisible</a> = true;
<a name="l461"><span class="linenum"> 461</span></a>              } else {
<a name="l462"><span class="linenum"> 462</span></a>                  <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('authornamevisible')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/authornamevisible.html">authornamevisible</a> = false;
<a name="l463"><span class="linenum"> 463</span></a>              }
<a name="l464"><span class="linenum"> 464</span></a>  
<a name="l465"><span class="linenum"> 465</span></a>  <span class="comment">            // the following do-while wrapper allows to break from deeply nested if-statements</span>
<a name="l466"><span class="linenum"> 466</span></a>              do {
<a name="l467"><span class="linenum"> 467</span></a>                  if (<a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('authorid')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a> === <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">                    // own submissions always visible</span>
<a name="l469"><span class="linenum"> 469</span></a>                      <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a>] = <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>;
<a name="l470"><span class="linenum"> 470</span></a>                      break;
<a name="l471"><span class="linenum"> 471</span></a>                  }
<a name="l472"><span class="linenum"> 472</span></a>  
<a name="l473"><span class="linenum"> 473</span></a>                  if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewallsubmissions', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l474"><span class="linenum"> 474</span></a>                      if (<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l475"><span class="linenum"> 475</span></a>                          if (<a class="function" onClick="logFunction('isguestuser')" href="../../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">                            // shortcut - guest user does not belong into any group</span>
<a name="l477"><span class="linenum"> 477</span></a>                              break;
<a name="l478"><span class="linenum"> 478</span></a>                          }
<a name="l479"><span class="linenum"> 479</span></a>  
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">                        // this might be slow - show only submissions by users who share group with me in this cm</span>
<a name="l481"><span class="linenum"> 481</span></a>                          if (!<a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_groups')" href="../../_functions/get_groups.html" onMouseOver="funcPopup(event,'get_groups')">get_groups</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>)) {
<a name="l482"><span class="linenum"> 482</span></a>                              break;
<a name="l483"><span class="linenum"> 483</span></a>                          }
<a name="l484"><span class="linenum"> 484</span></a>                          <a class="var it11475" onMouseOver="hilite(11475)" onMouseOut="lolite()" onClick="logVariable('authorsgroups')" href="../../_variables/authorsgroups.html">$authorsgroups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('authorid')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>);
<a name="l485"><span class="linenum"> 485</span></a>                          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it11475" onMouseOver="hilite(11475)" onMouseOut="lolite()" onClick="logVariable('authorsgroups')" href="../../_variables/authorsgroups.html">$authorsgroups</a>)) {
<a name="l486"><span class="linenum"> 486</span></a>                              <a class="var it11475" onMouseOver="hilite(11475)" onMouseOut="lolite()" onClick="logVariable('authorsgroups')" href="../../_variables/authorsgroups.html">$authorsgroups</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it11475" onMouseOver="hilite(11475)" onMouseOut="lolite()" onClick="logVariable('authorsgroups')" href="../../_variables/authorsgroups.html">$authorsgroups</a>);
<a name="l487"><span class="linenum"> 487</span></a>                              <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('intersect')" href="../../_variables/intersect.html">$intersect</a> = <a class="phpfunction" onClick="logFunction('array_intersect')" href="../../_functions/array_intersect.html" onMouseOver="phpfuncPopup(event,'array_intersect')">array_intersect</a>(<a class="var it11475" onMouseOver="hilite(11475)" onMouseOut="lolite()" onClick="logVariable('authorsgroups')" href="../../_variables/authorsgroups.html">$authorsgroups</a>, <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_groups')" href="../../_functions/get_groups.html" onMouseOver="funcPopup(event,'get_groups')">get_groups</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>));
<a name="l488"><span class="linenum"> 488</span></a>                              if (empty(<a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('intersect')" href="../../_variables/intersect.html">$intersect</a>)) {
<a name="l489"><span class="linenum"> 489</span></a>                                  break;
<a name="l490"><span class="linenum"> 490</span></a>                              } else {
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">                                // can see all submissions and shares a group with the author</span>
<a name="l492"><span class="linenum"> 492</span></a>                                  <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a>] = <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>;
<a name="l493"><span class="linenum"> 493</span></a>                                  break;
<a name="l494"><span class="linenum"> 494</span></a>                              }
<a name="l495"><span class="linenum"> 495</span></a>                          }
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>                      } else {
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment">                        // can see all submissions from all groups</span>
<a name="l499"><span class="linenum"> 499</span></a>                          <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a>] = <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>;
<a name="l500"><span class="linenum"> 500</span></a>                      }
<a name="l501"><span class="linenum"> 501</span></a>                  }
<a name="l502"><span class="linenum"> 502</span></a>              } while (0);
<a name="l503"><span class="linenum"> 503</span></a>          }
<a name="l504"><span class="linenum"> 504</span></a>  
<a name="l505"><span class="linenum"> 505</span></a>          if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('assessmentmodified')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/assessmentmodified.html">assessmentmodified</a> &gt; <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a> and empty(<a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('assessmentid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/assessmentid.html">assessmentid</a>])) {
<a name="l506"><span class="linenum"> 506</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a> = new stdclass();
<a name="l507"><span class="linenum"> 507</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('submissionid')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a>;
<a name="l508"><span class="linenum"> 508</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('submissiontitle')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/submissiontitle.html">submissiontitle</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissiontitle')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissiontitle.html">submissiontitle</a>;
<a name="l509"><span class="linenum"> 509</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a>;
<a name="l510"><span class="linenum"> 510</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('assessmentmodified')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/assessmentmodified.html">assessmentmodified</a>;
<a name="l511"><span class="linenum"> 511</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('cmid')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('cmid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>;
<a name="l512"><span class="linenum"> 512</span></a>              if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a> == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> || <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewreviewernames', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l513"><span class="linenum"> 513</span></a>                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('reviewernamevisible')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/reviewernamevisible.html">reviewernamevisible</a> = true;
<a name="l514"><span class="linenum"> 514</span></a>              } else {
<a name="l515"><span class="linenum"> 515</span></a>                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('reviewernamevisible')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/reviewernamevisible.html">reviewernamevisible</a> = false;
<a name="l516"><span class="linenum"> 516</span></a>              }
<a name="l517"><span class="linenum"> 517</span></a>  
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment">            // the following do-while wrapper allows to break from deeply nested if-statements</span>
<a name="l519"><span class="linenum"> 519</span></a>              do {
<a name="l520"><span class="linenum"> 520</span></a>                  if (<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a> === <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">                    // own assessments always visible</span>
<a name="l522"><span class="linenum"> 522</span></a>                      <a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('assessmentid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/assessmentid.html">assessmentid</a>] = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>;
<a name="l523"><span class="linenum"> 523</span></a>                      break;
<a name="l524"><span class="linenum"> 524</span></a>                  }
<a name="l525"><span class="linenum"> 525</span></a>  
<a name="l526"><span class="linenum"> 526</span></a>                  if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewallassessments', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l527"><span class="linenum"> 527</span></a>                      if (<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l528"><span class="linenum"> 528</span></a>                          if (<a class="function" onClick="logFunction('isguestuser')" href="../../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment">                            // shortcut - guest user does not belong into any group</span>
<a name="l530"><span class="linenum"> 530</span></a>                              break;
<a name="l531"><span class="linenum"> 531</span></a>                          }
<a name="l532"><span class="linenum"> 532</span></a>  
<a name="l533"><span class="linenum"> 533</span></a>  <span class="comment">                        // this might be slow - show only submissions by users who share group with me in this cm</span>
<a name="l534"><span class="linenum"> 534</span></a>                          if (!<a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_groups')" href="../../_functions/get_groups.html" onMouseOver="funcPopup(event,'get_groups')">get_groups</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>)) {
<a name="l535"><span class="linenum"> 535</span></a>                              break;
<a name="l536"><span class="linenum"> 536</span></a>                          }
<a name="l537"><span class="linenum"> 537</span></a>                          <a class="var it11486" onMouseOver="hilite(11486)" onMouseOut="lolite()" onClick="logVariable('reviewersgroups')" href="../../_variables/reviewersgroups.html">$reviewersgroups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>);
<a name="l538"><span class="linenum"> 538</span></a>                          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it11486" onMouseOver="hilite(11486)" onMouseOut="lolite()" onClick="logVariable('reviewersgroups')" href="../../_variables/reviewersgroups.html">$reviewersgroups</a>)) {
<a name="l539"><span class="linenum"> 539</span></a>                              <a class="var it11486" onMouseOver="hilite(11486)" onMouseOut="lolite()" onClick="logVariable('reviewersgroups')" href="../../_variables/reviewersgroups.html">$reviewersgroups</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it11486" onMouseOver="hilite(11486)" onMouseOut="lolite()" onClick="logVariable('reviewersgroups')" href="../../_variables/reviewersgroups.html">$reviewersgroups</a>);
<a name="l540"><span class="linenum"> 540</span></a>                              <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('intersect')" href="../../_variables/intersect.html">$intersect</a> = <a class="phpfunction" onClick="logFunction('array_intersect')" href="../../_functions/array_intersect.html" onMouseOver="phpfuncPopup(event,'array_intersect')">array_intersect</a>(<a class="var it11486" onMouseOver="hilite(11486)" onMouseOut="lolite()" onClick="logVariable('reviewersgroups')" href="../../_variables/reviewersgroups.html">$reviewersgroups</a>, <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_groups')" href="../../_functions/get_groups.html" onMouseOver="funcPopup(event,'get_groups')">get_groups</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>));
<a name="l541"><span class="linenum"> 541</span></a>                              if (empty(<a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('intersect')" href="../../_variables/intersect.html">$intersect</a>)) {
<a name="l542"><span class="linenum"> 542</span></a>                                  break;
<a name="l543"><span class="linenum"> 543</span></a>                              } else {
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">                                // can see all assessments and shares a group with the reviewer</span>
<a name="l545"><span class="linenum"> 545</span></a>                                  <a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('assessmentid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/assessmentid.html">assessmentid</a>] = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>;
<a name="l546"><span class="linenum"> 546</span></a>                                  break;
<a name="l547"><span class="linenum"> 547</span></a>                              }
<a name="l548"><span class="linenum"> 548</span></a>                          }
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>                      } else {
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">                        // can see all assessments from all groups</span>
<a name="l552"><span class="linenum"> 552</span></a>                          <a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('assessmentid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/assessmentid.html">assessmentid</a>] = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>;
<a name="l553"><span class="linenum"> 553</span></a>                      }
<a name="l554"><span class="linenum"> 554</span></a>                  }
<a name="l555"><span class="linenum"> 555</span></a>              } while (0);
<a name="l556"><span class="linenum"> 556</span></a>          }
<a name="l557"><span class="linenum"> 557</span></a>      }
<a name="l558"><span class="linenum"> 558</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>      <a class="var it11487" onMouseOver="hilite(11487)" onMouseOut="lolite()" onClick="logVariable('shown')" href="../../_variables/shown.html">$shown</a> = false;
<a name="l561"><span class="linenum"> 561</span></a>  
<a name="l562"><span class="linenum"> 562</span></a>      if (!empty(<a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>)) {
<a name="l563"><span class="linenum"> 563</span></a>          <a class="var it11487" onMouseOver="hilite(11487)" onMouseOut="lolite()" onClick="logVariable('shown')" href="../../_variables/shown.html">$shown</a> = true;
<a name="l564"><span class="linenum"> 564</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('recentsubmissions', 'workshop'), 3);
<a name="l565"><span class="linenum"> 565</span></a>          foreach (<a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a> as <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> =&gt; <a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l566"><span class="linenum"> 566</span></a>              <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/workshop/submission.php.html">/mod/workshop/submission.php</a>', array('id'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>, 'cmid'=&gt;<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('cmid')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>));
<a name="l567"><span class="linenum"> 567</span></a>              if (<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('authornamevisible')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/authornamevisible.html">authornamevisible</a>) {
<a name="l568"><span class="linenum"> 568</span></a>                  <a class="var it1443" onMouseOver="hilite(1443)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../_variables/author.html">$author</a> = <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('authorid')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>];
<a name="l569"><span class="linenum"> 569</span></a>              } else {
<a name="l570"><span class="linenum"> 570</span></a>                  <a class="var it1443" onMouseOver="hilite(1443)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../_variables/author.html">$author</a> = null;
<a name="l571"><span class="linenum"> 571</span></a>              }
<a name="l572"><span class="linenum"> 572</span></a>              <a class="function" onClick="logFunction('print_recent_activity_note')" href="../../_functions/print_recent_activity_note.html" onMouseOver="funcPopup(event,'print_recent_activity_note')">print_recent_activity_note</a>(<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>, <a class="var it1443" onMouseOver="hilite(1443)" onMouseOut="lolite()" onClick="logVariable('author')" href="../../_variables/author.html">$author</a>, <a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('title')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/title.html">title</a>, <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), false, <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>);
<a name="l573"><span class="linenum"> 573</span></a>          }
<a name="l574"><span class="linenum"> 574</span></a>      }
<a name="l575"><span class="linenum"> 575</span></a>  
<a name="l576"><span class="linenum"> 576</span></a>      if (!empty(<a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a>)) {
<a name="l577"><span class="linenum"> 577</span></a>          <a class="var it11487" onMouseOver="hilite(11487)" onMouseOut="lolite()" onClick="logVariable('shown')" href="../../_variables/shown.html">$shown</a> = true;
<a name="l578"><span class="linenum"> 578</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('recentassessments', 'workshop'), 3);
<a name="l579"><span class="linenum"> 579</span></a>          <a class="class" onClick="logClass('core_collator')" href="../../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="function" onClick="logFunction('asort_objects_by_property')" href="../../_functions/asort_objects_by_property.html" onMouseOver="funcPopup(event,'asort_objects_by_property')">asort_objects_by_property</a>(<a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a>, 'timemodified');
<a name="l580"><span class="linenum"> 580</span></a>          foreach (<a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a> as <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> =&gt; <a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>) {
<a name="l581"><span class="linenum"> 581</span></a>              <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/workshop/assessment.php.html">/mod/workshop/assessment.php</a>', array('asid' =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l582"><span class="linenum"> 582</span></a>              if (<a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('reviewernamevisible')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/reviewernamevisible.html">reviewernamevisible</a>) {
<a name="l583"><span class="linenum"> 583</span></a>                  <a class="var it11488" onMouseOver="hilite(11488)" onMouseOut="lolite()" onClick="logVariable('reviewer')" href="../../_variables/reviewer.html">$reviewer</a> = <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a>];
<a name="l584"><span class="linenum"> 584</span></a>              } else {
<a name="l585"><span class="linenum"> 585</span></a>                  <a class="var it11488" onMouseOver="hilite(11488)" onMouseOut="lolite()" onClick="logVariable('reviewer')" href="../../_variables/reviewer.html">$reviewer</a> = null;
<a name="l586"><span class="linenum"> 586</span></a>              }
<a name="l587"><span class="linenum"> 587</span></a>              <a class="function" onClick="logFunction('print_recent_activity_note')" href="../../_functions/print_recent_activity_note.html" onMouseOver="funcPopup(event,'print_recent_activity_note')">print_recent_activity_note</a>(<a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>, <a class="var it11488" onMouseOver="hilite(11488)" onMouseOut="lolite()" onClick="logVariable('reviewer')" href="../../_variables/reviewer.html">$reviewer</a>, <a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('submissiontitle')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/submissiontitle.html">submissiontitle</a>, <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), false, <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>);
<a name="l588"><span class="linenum"> 588</span></a>          }
<a name="l589"><span class="linenum"> 589</span></a>      }
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>      if (<a class="var it11487" onMouseOver="hilite(11487)" onMouseOut="lolite()" onClick="logVariable('shown')" href="../../_variables/shown.html">$shown</a>) {
<a name="l592"><span class="linenum"> 592</span></a>          return true;
<a name="l593"><span class="linenum"> 593</span></a>      }
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>      return false;
<a name="l596"><span class="linenum"> 596</span></a>  }
<a name="l597"><span class="linenum"> 597</span></a>  
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment">/**</span>
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment"> * Returns all activity in course workshops since a given time</span>
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment"> *</span>
<a name="l601"><span class="linenum"> 601</span></a>  <span class="comment"> * @param array $activities sequentially indexed array of objects</span>
<a name="l602"><span class="linenum"> 602</span></a>  <span class="comment"> * @param int $index</span>
<a name="l603"><span class="linenum"> 603</span></a>  <span class="comment"> * @param int $timestart</span>
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l605"><span class="linenum"> 605</span></a>  <span class="comment"> * @param int $cmid</span>
<a name="l606"><span class="linenum"> 606</span></a>  <span class="comment"> * @param int $userid defaults to 0</span>
<a name="l607"><span class="linenum"> 607</span></a>  <span class="comment"> * @param int $groupid defaults to 0</span>
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment"> * @return void adds items into $activities and increases $index</span>
<a name="l609"><span class="linenum"> 609</span></a>  <span class="comment"> */</span>
<a name="l610"><span class="linenum"> 610</span></a>  function <a class="function" onClick="logFunction('workshop_get_recent_mod_activity')" href="../../_functions/workshop_get_recent_mod_activity.html" onMouseOver="funcPopup(event,'workshop_get_recent_mod_activity')">workshop_get_recent_mod_activity</a>(&amp;<a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../../_variables/activities.html">$activities</a>, &amp;<a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>=0, <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>=0) {
<a name="l611"><span class="linenum"> 611</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2554" onMouseOver="hilite(2554)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../_variables/COURSE.html">$COURSE</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l612"><span class="linenum"> 612</span></a>  
<a name="l613"><span class="linenum"> 613</span></a>      if (<a class="var it2554" onMouseOver="hilite(2554)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../_variables/COURSE.html">$COURSE</a>-&gt;<a onClick="logVariable('id')" class="var it39504" onMouseOver="hilite(39504)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l614"><span class="linenum"> 614</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2554" onMouseOver="hilite(2554)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../_variables/COURSE.html">$COURSE</a>;
<a name="l615"><span class="linenum"> 615</span></a>      } else {
<a name="l616"><span class="linenum"> 616</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>));
<a name="l617"><span class="linenum"> 617</span></a>      }
<a name="l618"><span class="linenum"> 618</span></a>  
<a name="l619"><span class="linenum"> 619</span></a>      <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l620"><span class="linenum"> 620</span></a>  
<a name="l621"><span class="linenum"> 621</span></a>      <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('cms')" class="var it39598" onMouseOver="hilite(39598)" onMouseOut="lolite()" href="../../_variables/cms.html">cms</a>[<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>];
<a name="l622"><span class="linenum"> 622</span></a>  
<a name="l623"><span class="linenum"> 623</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l624"><span class="linenum"> 624</span></a>      if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l625"><span class="linenum"> 625</span></a>          <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a> = &quot;AND (author.id = :authorid OR reviewer.id = :reviewerid)&quot;;
<a name="l626"><span class="linenum"> 626</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['authorid'] = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l627"><span class="linenum"> 627</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['reviewerid'] = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l628"><span class="linenum"> 628</span></a>      } else {
<a name="l629"><span class="linenum"> 629</span></a>          <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a> = &quot;&quot;;
<a name="l630"><span class="linenum"> 630</span></a>      }
<a name="l631"><span class="linenum"> 631</span></a>  
<a name="l632"><span class="linenum"> 632</span></a>      if (<a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) {
<a name="l633"><span class="linenum"> 633</span></a>          <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('groupselect')" href="../../_variables/groupselect.html">$groupselect</a> = &quot;AND (authorgroupmembership.groupid = :authorgroupid OR reviewergroupmembership.groupid = :reviewergroupid)&quot;;
<a name="l634"><span class="linenum"> 634</span></a>          <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('groupjoin')" href="../../_variables/groupjoin.html">$groupjoin</a>   = &quot;LEFT JOIN {groups_members} authorgroupmembership ON authorgroupmembership.userid = author.id
<a name="l635"><span class="linenum"> 635</span></a>                          LEFT JOIN {groups_members} reviewergroupmembership ON reviewergroupmembership.userid = reviewer.id&quot;;
<a name="l636"><span class="linenum"> 636</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['authorgroupid'] = <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>;
<a name="l637"><span class="linenum"> 637</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['reviewergroupid'] = <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>;
<a name="l638"><span class="linenum"> 638</span></a>      } else {
<a name="l639"><span class="linenum"> 639</span></a>          <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('groupselect')" href="../../_variables/groupselect.html">$groupselect</a> = &quot;&quot;;
<a name="l640"><span class="linenum"> 640</span></a>          <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('groupjoin')" href="../../_variables/groupjoin.html">$groupjoin</a>   = &quot;&quot;;
<a name="l641"><span class="linenum"> 641</span></a>      }
<a name="l642"><span class="linenum"> 642</span></a>  
<a name="l643"><span class="linenum"> 643</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['cminstance'] = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l644"><span class="linenum"> 644</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['submissionmodified'] = <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>;
<a name="l645"><span class="linenum"> 645</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['assessmentmodified'] = <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>;
<a name="l646"><span class="linenum"> 646</span></a>  
<a name="l647"><span class="linenum"> 647</span></a>      <a class="var it11489" onMouseOver="hilite(11489)" onMouseOut="lolite()" onClick="logVariable('authornamefields')" href="../../_variables/authornamefields.html">$authornamefields</a> = <a class="function" onClick="logFunction('get_all_user_name_fields')" href="../../_functions/get_all_user_name_fields.html" onMouseOver="funcPopup(event,'get_all_user_name_fields')">get_all_user_name_fields</a>(true, 'author', null, 'author');
<a name="l648"><span class="linenum"> 648</span></a>      <a class="var it11481" onMouseOver="hilite(11481)" onMouseOut="lolite()" onClick="logVariable('reviewerfields')" href="../../_variables/reviewerfields.html">$reviewerfields</a> = <a class="function" onClick="logFunction('get_all_user_name_fields')" href="../../_functions/get_all_user_name_fields.html" onMouseOver="funcPopup(event,'get_all_user_name_fields')">get_all_user_name_fields</a>(true, 'reviewer', null, 'reviewer');
<a name="l649"><span class="linenum"> 649</span></a>  
<a name="l650"><span class="linenum"> 650</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT s.id AS submissionid, s.title AS submissiontitle, s.timemodified AS submissionmodified,
<a name="l651"><span class="linenum"> 651</span></a>                     author.id AS authorid, <a class="var it11489" onMouseOver="hilite(11489)" onMouseOut="lolite()" onClick="logVariable('authornamefields')" href="../../_variables/authornamefields.html">$authornamefields</a>, author.picture AS authorpicture, author.imagealt AS authorimagealt,
<a name="l652"><span class="linenum"> 652</span></a>                     author.email AS authoremail, a.id AS assessmentid, a.timemodified AS assessmentmodified,
<a name="l653"><span class="linenum"> 653</span></a>                     reviewer.id AS reviewerid, <a class="var it11481" onMouseOver="hilite(11481)" onMouseOut="lolite()" onClick="logVariable('reviewerfields')" href="../../_variables/reviewerfields.html">$reviewerfields</a>, reviewer.picture AS reviewerpicture,
<a name="l654"><span class="linenum"> 654</span></a>                     reviewer.imagealt AS reviewerimagealt, reviewer.email AS revieweremail
<a name="l655"><span class="linenum"> 655</span></a>                FROM {workshop_submissions} s
<a name="l656"><span class="linenum"> 656</span></a>          INNER JOIN {workshop} w ON s.workshopid = w.id
<a name="l657"><span class="linenum"> 657</span></a>          INNER JOIN {user} author ON s.authorid = author.id
<a name="l658"><span class="linenum"> 658</span></a>           LEFT JOIN {workshop_assessments} a ON a.submissionid = s.id
<a name="l659"><span class="linenum"> 659</span></a>           LEFT JOIN {user} reviewer ON a.reviewerid = reviewer.id
<a name="l660"><span class="linenum"> 660</span></a>          <a class="var it7069" onMouseOver="hilite(7069)" onMouseOut="lolite()" onClick="logVariable('groupjoin')" href="../../_variables/groupjoin.html">$groupjoin</a>
<a name="l661"><span class="linenum"> 661</span></a>               WHERE w.id = :cminstance
<a name="l662"><span class="linenum"> 662</span></a>                     AND s.example = 0
<a name="l663"><span class="linenum"> 663</span></a>                     <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a> <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('groupselect')" href="../../_variables/groupselect.html">$groupselect</a>
<a name="l664"><span class="linenum"> 664</span></a>                     AND (s.timemodified &gt; :submissionmodified OR a.timemodified &gt; :assessmentmodified)
<a name="l665"><span class="linenum"> 665</span></a>            ORDER BY s.timemodified ASC, a.timemodified ASC&quot;;
<a name="l666"><span class="linenum"> 666</span></a>  
<a name="l667"><span class="linenum"> 667</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l668"><span class="linenum"> 668</span></a>  
<a name="l669"><span class="linenum"> 669</span></a>      <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a>       = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l670"><span class="linenum"> 670</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>         = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l671"><span class="linenum"> 671</span></a>      <a class="var it1615" onMouseOver="hilite(1615)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>          = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:viewall', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l672"><span class="linenum"> 672</span></a>      <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('accessallgroups')" href="../../_variables/accessallgroups.html">$accessallgroups</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l673"><span class="linenum"> 673</span></a>      <a class="var it11490" onMouseOver="hilite(11490)" onMouseOut="lolite()" onClick="logVariable('viewauthors')" href="../../_variables/viewauthors.html">$viewauthors</a>     = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewauthornames', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l674"><span class="linenum"> 674</span></a>      <a class="var it11491" onMouseOver="hilite(11491)" onMouseOut="lolite()" onClick="logVariable('viewreviewers')" href="../../_variables/viewreviewers.html">$viewreviewers</a>   = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewreviewernames', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l675"><span class="linenum"> 675</span></a>  
<a name="l676"><span class="linenum"> 676</span></a>      <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a> = array(); <span class="comment">// recent submissions indexed by submission id</span>
<a name="l677"><span class="linenum"> 677</span></a>      <a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a> = array(); <span class="comment">// recent assessments indexed by assessment id</span>
<a name="l678"><span class="linenum"> 678</span></a>      <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>       = array();
<a name="l679"><span class="linenum"> 679</span></a>  
<a name="l680"><span class="linenum"> 680</span></a>      foreach (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> as <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>) {
<a name="l681"><span class="linenum"> 681</span></a>  
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment">        // remember all user names we can use later</span>
<a name="l683"><span class="linenum"> 683</span></a>          if (empty(<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('authorid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>])) {
<a name="l684"><span class="linenum"> 684</span></a>              <a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../../_variables/u.html">$u</a> = new stdclass();
<a name="l685"><span class="linenum"> 685</span></a>              <a class="var it2976" onMouseOver="hilite(2976)" onMouseOut="lolite()" onClick="logVariable('additionalfields')" href="../../_variables/additionalfields.html">$additionalfields</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>());
<a name="l686"><span class="linenum"> 686</span></a>              <a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../../_variables/u.html">$u</a> = <a class="function" onClick="logFunction('username_load_fields_from_object')" href="../../_functions/username_load_fields_from_object.html" onMouseOver="funcPopup(event,'username_load_fields_from_object')">username_load_fields_from_object</a>(<a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../../_variables/u.html">$u</a>, <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>, 'author', <a class="var it2976" onMouseOver="hilite(2976)" onMouseOut="lolite()" onClick="logVariable('additionalfields')" href="../../_variables/additionalfields.html">$additionalfields</a>);
<a name="l687"><span class="linenum"> 687</span></a>              <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('authorid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>] = <a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../../_variables/u.html">$u</a>;
<a name="l688"><span class="linenum"> 688</span></a>          }
<a name="l689"><span class="linenum"> 689</span></a>          if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a> and empty(<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a>])) {
<a name="l690"><span class="linenum"> 690</span></a>              <a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../../_variables/u.html">$u</a> = new stdclass();
<a name="l691"><span class="linenum"> 691</span></a>              <a class="var it2976" onMouseOver="hilite(2976)" onMouseOut="lolite()" onClick="logVariable('additionalfields')" href="../../_variables/additionalfields.html">$additionalfields</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>());
<a name="l692"><span class="linenum"> 692</span></a>              <a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../../_variables/u.html">$u</a> = <a class="function" onClick="logFunction('username_load_fields_from_object')" href="../../_functions/username_load_fields_from_object.html" onMouseOver="funcPopup(event,'username_load_fields_from_object')">username_load_fields_from_object</a>(<a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../../_variables/u.html">$u</a>, <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>, 'reviewer', <a class="var it2976" onMouseOver="hilite(2976)" onMouseOut="lolite()" onClick="logVariable('additionalfields')" href="../../_variables/additionalfields.html">$additionalfields</a>);
<a name="l693"><span class="linenum"> 693</span></a>              <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a>] = <a class="var it6456" onMouseOver="hilite(6456)" onMouseOut="lolite()" onClick="logVariable('u')" href="../../_variables/u.html">$u</a>;
<a name="l694"><span class="linenum"> 694</span></a>          }
<a name="l695"><span class="linenum"> 695</span></a>  
<a name="l696"><span class="linenum"> 696</span></a>          if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionmodified')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionmodified.html">submissionmodified</a> &gt; <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a> and empty(<a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a>])) {
<a name="l697"><span class="linenum"> 697</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a> = new stdclass();
<a name="l698"><span class="linenum"> 698</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('id')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a>;
<a name="l699"><span class="linenum"> 699</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('title')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/title.html">title</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissiontitle')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissiontitle.html">submissiontitle</a>;
<a name="l700"><span class="linenum"> 700</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('authorid')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('authorid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>;
<a name="l701"><span class="linenum"> 701</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('timemodified')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionmodified')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionmodified.html">submissionmodified</a>;
<a name="l702"><span class="linenum"> 702</span></a>              if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('authorid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a> == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> || <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewauthornames', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l703"><span class="linenum"> 703</span></a>                  <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('authornamevisible')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/authornamevisible.html">authornamevisible</a> = true;
<a name="l704"><span class="linenum"> 704</span></a>              } else {
<a name="l705"><span class="linenum"> 705</span></a>                  <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('authornamevisible')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/authornamevisible.html">authornamevisible</a> = false;
<a name="l706"><span class="linenum"> 706</span></a>              }
<a name="l707"><span class="linenum"> 707</span></a>  
<a name="l708"><span class="linenum"> 708</span></a>  <span class="comment">            // the following do-while wrapper allows to break from deeply nested if-statements</span>
<a name="l709"><span class="linenum"> 709</span></a>              do {
<a name="l710"><span class="linenum"> 710</span></a>                  if (<a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('authorid')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a> === <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment">                    // own submissions always visible</span>
<a name="l712"><span class="linenum"> 712</span></a>                      <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a>] = <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>;
<a name="l713"><span class="linenum"> 713</span></a>                      break;
<a name="l714"><span class="linenum"> 714</span></a>                  }
<a name="l715"><span class="linenum"> 715</span></a>  
<a name="l716"><span class="linenum"> 716</span></a>                  if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewallsubmissions', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l717"><span class="linenum"> 717</span></a>                      if (<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l718"><span class="linenum"> 718</span></a>                          if (<a class="function" onClick="logFunction('isguestuser')" href="../../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment">                            // shortcut - guest user does not belong into any group</span>
<a name="l720"><span class="linenum"> 720</span></a>                              break;
<a name="l721"><span class="linenum"> 721</span></a>                          }
<a name="l722"><span class="linenum"> 722</span></a>  
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment">                        // this might be slow - show only submissions by users who share group with me in this cm</span>
<a name="l724"><span class="linenum"> 724</span></a>                          if (!<a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_groups')" href="../../_functions/get_groups.html" onMouseOver="funcPopup(event,'get_groups')">get_groups</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>)) {
<a name="l725"><span class="linenum"> 725</span></a>                              break;
<a name="l726"><span class="linenum"> 726</span></a>                          }
<a name="l727"><span class="linenum"> 727</span></a>                          <a class="var it11475" onMouseOver="hilite(11475)" onMouseOut="lolite()" onClick="logVariable('authorsgroups')" href="../../_variables/authorsgroups.html">$authorsgroups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>-&gt;<a onClick="logVariable('authorid')" class="var it40212" onMouseOver="hilite(40212)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>);
<a name="l728"><span class="linenum"> 728</span></a>                          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it11475" onMouseOver="hilite(11475)" onMouseOut="lolite()" onClick="logVariable('authorsgroups')" href="../../_variables/authorsgroups.html">$authorsgroups</a>)) {
<a name="l729"><span class="linenum"> 729</span></a>                              <a class="var it11475" onMouseOver="hilite(11475)" onMouseOut="lolite()" onClick="logVariable('authorsgroups')" href="../../_variables/authorsgroups.html">$authorsgroups</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it11475" onMouseOver="hilite(11475)" onMouseOut="lolite()" onClick="logVariable('authorsgroups')" href="../../_variables/authorsgroups.html">$authorsgroups</a>);
<a name="l730"><span class="linenum"> 730</span></a>                              <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('intersect')" href="../../_variables/intersect.html">$intersect</a> = <a class="phpfunction" onClick="logFunction('array_intersect')" href="../../_functions/array_intersect.html" onMouseOver="phpfuncPopup(event,'array_intersect')">array_intersect</a>(<a class="var it11475" onMouseOver="hilite(11475)" onMouseOut="lolite()" onClick="logVariable('authorsgroups')" href="../../_variables/authorsgroups.html">$authorsgroups</a>, <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_groups')" href="../../_functions/get_groups.html" onMouseOver="funcPopup(event,'get_groups')">get_groups</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>));
<a name="l731"><span class="linenum"> 731</span></a>                              if (empty(<a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('intersect')" href="../../_variables/intersect.html">$intersect</a>)) {
<a name="l732"><span class="linenum"> 732</span></a>                                  break;
<a name="l733"><span class="linenum"> 733</span></a>                              } else {
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment">                                // can see all submissions and shares a group with the author</span>
<a name="l735"><span class="linenum"> 735</span></a>                                  <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a>] = <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>;
<a name="l736"><span class="linenum"> 736</span></a>                                  break;
<a name="l737"><span class="linenum"> 737</span></a>                              }
<a name="l738"><span class="linenum"> 738</span></a>                          }
<a name="l739"><span class="linenum"> 739</span></a>  
<a name="l740"><span class="linenum"> 740</span></a>                      } else {
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment">                        // can see all submissions from all groups</span>
<a name="l742"><span class="linenum"> 742</span></a>                          <a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a>] = <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>;
<a name="l743"><span class="linenum"> 743</span></a>                      }
<a name="l744"><span class="linenum"> 744</span></a>                  }
<a name="l745"><span class="linenum"> 745</span></a>              } while (0);
<a name="l746"><span class="linenum"> 746</span></a>          }
<a name="l747"><span class="linenum"> 747</span></a>  
<a name="l748"><span class="linenum"> 748</span></a>          if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('assessmentmodified')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/assessmentmodified.html">assessmentmodified</a> &gt; <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a> and empty(<a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('assessmentid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/assessmentid.html">assessmentid</a>])) {
<a name="l749"><span class="linenum"> 749</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a> = new stdclass();
<a name="l750"><span class="linenum"> 750</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('id')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('assessmentid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/assessmentid.html">assessmentid</a>;
<a name="l751"><span class="linenum"> 751</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('submissionid')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissionid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a>;
<a name="l752"><span class="linenum"> 752</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('submissiontitle')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/submissiontitle.html">submissiontitle</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('submissiontitle')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/submissiontitle.html">submissiontitle</a>;
<a name="l753"><span class="linenum"> 753</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a>;
<a name="l754"><span class="linenum"> 754</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('assessmentmodified')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/assessmentmodified.html">assessmentmodified</a>;
<a name="l755"><span class="linenum"> 755</span></a>              if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a> == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> || <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewreviewernames', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l756"><span class="linenum"> 756</span></a>                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('reviewernamevisible')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/reviewernamevisible.html">reviewernamevisible</a> = true;
<a name="l757"><span class="linenum"> 757</span></a>              } else {
<a name="l758"><span class="linenum"> 758</span></a>                  <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('reviewernamevisible')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/reviewernamevisible.html">reviewernamevisible</a> = false;
<a name="l759"><span class="linenum"> 759</span></a>              }
<a name="l760"><span class="linenum"> 760</span></a>  
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment">            // the following do-while wrapper allows to break from deeply nested if-statements</span>
<a name="l762"><span class="linenum"> 762</span></a>              do {
<a name="l763"><span class="linenum"> 763</span></a>                  if (<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a> === <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment">                    // own assessments always visible</span>
<a name="l765"><span class="linenum"> 765</span></a>                      <a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('assessmentid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/assessmentid.html">assessmentid</a>] = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>;
<a name="l766"><span class="linenum"> 766</span></a>                      break;
<a name="l767"><span class="linenum"> 767</span></a>                  }
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>                  if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewallassessments', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l770"><span class="linenum"> 770</span></a>                      if (<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l771"><span class="linenum"> 771</span></a>                          if (<a class="function" onClick="logFunction('isguestuser')" href="../../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l772"><span class="linenum"> 772</span></a>  <span class="comment">                            // shortcut - guest user does not belong into any group</span>
<a name="l773"><span class="linenum"> 773</span></a>                              break;
<a name="l774"><span class="linenum"> 774</span></a>                          }
<a name="l775"><span class="linenum"> 775</span></a>  
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment">                        // this might be slow - show only submissions by users who share group with me in this cm</span>
<a name="l777"><span class="linenum"> 777</span></a>                          if (!<a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_groups')" href="../../_functions/get_groups.html" onMouseOver="funcPopup(event,'get_groups')">get_groups</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>)) {
<a name="l778"><span class="linenum"> 778</span></a>                              break;
<a name="l779"><span class="linenum"> 779</span></a>                          }
<a name="l780"><span class="linenum"> 780</span></a>                          <a class="var it11486" onMouseOver="hilite(11486)" onMouseOut="lolite()" onClick="logVariable('reviewersgroups')" href="../../_variables/reviewersgroups.html">$reviewersgroups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>);
<a name="l781"><span class="linenum"> 781</span></a>                          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it11486" onMouseOver="hilite(11486)" onMouseOut="lolite()" onClick="logVariable('reviewersgroups')" href="../../_variables/reviewersgroups.html">$reviewersgroups</a>)) {
<a name="l782"><span class="linenum"> 782</span></a>                              <a class="var it11486" onMouseOver="hilite(11486)" onMouseOut="lolite()" onClick="logVariable('reviewersgroups')" href="../../_variables/reviewersgroups.html">$reviewersgroups</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it11486" onMouseOver="hilite(11486)" onMouseOut="lolite()" onClick="logVariable('reviewersgroups')" href="../../_variables/reviewersgroups.html">$reviewersgroups</a>);
<a name="l783"><span class="linenum"> 783</span></a>                              <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('intersect')" href="../../_variables/intersect.html">$intersect</a> = <a class="phpfunction" onClick="logFunction('array_intersect')" href="../../_functions/array_intersect.html" onMouseOver="phpfuncPopup(event,'array_intersect')">array_intersect</a>(<a class="var it11486" onMouseOver="hilite(11486)" onMouseOut="lolite()" onClick="logVariable('reviewersgroups')" href="../../_variables/reviewersgroups.html">$reviewersgroups</a>, <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_groups')" href="../../_functions/get_groups.html" onMouseOver="funcPopup(event,'get_groups')">get_groups</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>));
<a name="l784"><span class="linenum"> 784</span></a>                              if (empty(<a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('intersect')" href="../../_variables/intersect.html">$intersect</a>)) {
<a name="l785"><span class="linenum"> 785</span></a>                                  break;
<a name="l786"><span class="linenum"> 786</span></a>                              } else {
<a name="l787"><span class="linenum"> 787</span></a>  <span class="comment">                                // can see all assessments and shares a group with the reviewer</span>
<a name="l788"><span class="linenum"> 788</span></a>                                  <a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('assessmentid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/assessmentid.html">assessmentid</a>] = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>;
<a name="l789"><span class="linenum"> 789</span></a>                                  break;
<a name="l790"><span class="linenum"> 790</span></a>                              }
<a name="l791"><span class="linenum"> 791</span></a>                          }
<a name="l792"><span class="linenum"> 792</span></a>  
<a name="l793"><span class="linenum"> 793</span></a>                      } else {
<a name="l794"><span class="linenum"> 794</span></a>  <span class="comment">                        // can see all assessments from all groups</span>
<a name="l795"><span class="linenum"> 795</span></a>                          <a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('assessmentid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/assessmentid.html">assessmentid</a>] = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>;
<a name="l796"><span class="linenum"> 796</span></a>                      }
<a name="l797"><span class="linenum"> 797</span></a>                  }
<a name="l798"><span class="linenum"> 798</span></a>              } while (0);
<a name="l799"><span class="linenum"> 799</span></a>          }
<a name="l800"><span class="linenum"> 800</span></a>      }
<a name="l801"><span class="linenum"> 801</span></a>      <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l802"><span class="linenum"> 802</span></a>  
<a name="l803"><span class="linenum"> 803</span></a>      <a class="var it11492" onMouseOver="hilite(11492)" onMouseOut="lolite()" onClick="logVariable('workshopname')" href="../../_variables/workshopname.html">$workshopname</a> = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, true);
<a name="l804"><span class="linenum"> 804</span></a>  
<a name="l805"><span class="linenum"> 805</span></a>      if (<a class="var it1615" onMouseOver="hilite(1615)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>) {
<a name="l806"><span class="linenum"> 806</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l807"><span class="linenum"> 807</span></a>          <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, 'mod', 'workshop', <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>, <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>));
<a name="l808"><span class="linenum"> 808</span></a>      }
<a name="l809"><span class="linenum"> 809</span></a>  
<a name="l810"><span class="linenum"> 810</span></a>      foreach (<a class="var it7060" onMouseOver="hilite(7060)" onMouseOut="lolite()" onClick="logVariable('submissions')" href="../../_variables/submissions.html">$submissions</a> as <a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>) {
<a name="l811"><span class="linenum"> 811</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>                = new stdclass();
<a name="l812"><span class="linenum"> 812</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('type')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>          = 'workshop';
<a name="l813"><span class="linenum"> 813</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('cmid')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>          = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l814"><span class="linenum"> 814</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('name')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>          = <a class="var it11492" onMouseOver="hilite(11492)" onMouseOut="lolite()" onClick="logVariable('workshopname')" href="../../_variables/workshopname.html">$workshopname</a>;
<a name="l815"><span class="linenum"> 815</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/sectionnum.html">sectionnum</a>    = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/sectionnum.html">sectionnum</a>;
<a name="l816"><span class="linenum"> 816</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('timestamp')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/timestamp.html">timestamp</a>     = <a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>;
<a name="l817"><span class="linenum"> 817</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('subtype')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/subtype.html">subtype</a>       = 'submission';
<a name="l818"><span class="linenum"> 818</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>       = <a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>;
<a name="l819"><span class="linenum"> 819</span></a>          if (<a class="var it1615" onMouseOver="hilite(1615)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>) {
<a name="l820"><span class="linenum"> 820</span></a>              <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('grade')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>     = <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades[<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('authorid')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>]-&gt;str_long_grade;
<a name="l821"><span class="linenum"> 821</span></a>          }
<a name="l822"><span class="linenum"> 822</span></a>          if (<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('authornamevisible')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/authornamevisible.html">authornamevisible</a> and !empty(<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('authorid')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>])) {
<a name="l823"><span class="linenum"> 823</span></a>              <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('user')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>      = <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('authorid')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>];
<a name="l824"><span class="linenum"> 824</span></a>          }
<a name="l825"><span class="linenum"> 825</span></a>          <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../../_variables/activities.html">$activities</a>[<a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>++]       = <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>;
<a name="l826"><span class="linenum"> 826</span></a>      }
<a name="l827"><span class="linenum"> 827</span></a>  
<a name="l828"><span class="linenum"> 828</span></a>      foreach (<a class="var it7618" onMouseOver="hilite(7618)" onMouseOut="lolite()" onClick="logVariable('assessments')" href="../../_variables/assessments.html">$assessments</a> as <a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>) {
<a name="l829"><span class="linenum"> 829</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>                = new stdclass();
<a name="l830"><span class="linenum"> 830</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('type')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>          = 'workshop';
<a name="l831"><span class="linenum"> 831</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('cmid')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>          = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l832"><span class="linenum"> 832</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('name')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>          = <a class="var it11492" onMouseOver="hilite(11492)" onMouseOut="lolite()" onClick="logVariable('workshopname')" href="../../_variables/workshopname.html">$workshopname</a>;
<a name="l833"><span class="linenum"> 833</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/sectionnum.html">sectionnum</a>    = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/sectionnum.html">sectionnum</a>;
<a name="l834"><span class="linenum"> 834</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('timestamp')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/timestamp.html">timestamp</a>     = <a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>;
<a name="l835"><span class="linenum"> 835</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('subtype')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/subtype.html">subtype</a>       = 'assessment';
<a name="l836"><span class="linenum"> 836</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>       = <a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>;
<a name="l837"><span class="linenum"> 837</span></a>          if (<a class="var it1615" onMouseOver="hilite(1615)" onMouseOut="lolite()" onClick="logVariable('grader')" href="../../_variables/grader.html">$grader</a>) {
<a name="l838"><span class="linenum"> 838</span></a>              <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('grade')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>     = <a class="var it663" onMouseOver="hilite(663)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it40209" onMouseOver="hilite(40209)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[1]-&gt;grades[<a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a>]-&gt;str_long_grade;
<a name="l839"><span class="linenum"> 839</span></a>          }
<a name="l840"><span class="linenum"> 840</span></a>          if (<a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('reviewernamevisible')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/reviewernamevisible.html">reviewernamevisible</a> and !empty(<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a>])) {
<a name="l841"><span class="linenum"> 841</span></a>              <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('user')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>      = <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>[<a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a>];
<a name="l842"><span class="linenum"> 842</span></a>          }
<a name="l843"><span class="linenum"> 843</span></a>          <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../../_variables/activities.html">$activities</a>[<a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>++]       = <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>;
<a name="l844"><span class="linenum"> 844</span></a>      }
<a name="l845"><span class="linenum"> 845</span></a>  }
<a name="l846"><span class="linenum"> 846</span></a>  
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment">/**</span>
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment"> * Print single activity item prepared by {@see workshop_get_recent_mod_activity()}</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment"> */</span>
<a name="l850"><span class="linenum"> 850</span></a>  function <a class="function" onClick="logFunction('workshop_print_recent_mod_activity')" href="../../_functions/workshop_print_recent_mod_activity.html" onMouseOver="funcPopup(event,'workshop_print_recent_mod_activity')">workshop_print_recent_mod_activity</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it6083" onMouseOver="hilite(6083)" onMouseOut="lolite()" onClick="logVariable('detail')" href="../../_variables/detail.html">$detail</a>, <a class="var it7072" onMouseOver="hilite(7072)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../../_variables/modnames.html">$modnames</a>, <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>) {
<a name="l851"><span class="linenum"> 851</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l852"><span class="linenum"> 852</span></a>  
<a name="l853"><span class="linenum"> 853</span></a>      if (!empty(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>)) {
<a name="l854"><span class="linenum"> 854</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('div', <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('user_picture')" href="../../_functions/user_picture.html" onMouseOver="funcPopup(event,'user_picture')">user_picture</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>, array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>)),
<a name="l855"><span class="linenum"> 855</span></a>                  array('style' =&gt; 'float: left; padding: 7px;'));
<a name="l856"><span class="linenum"> 856</span></a>      }
<a name="l857"><span class="linenum"> 857</span></a>  
<a name="l858"><span class="linenum"> 858</span></a>      if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('subtype')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/subtype.html">subtype</a> == 'submission') {
<a name="l859"><span class="linenum"> 859</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'submission', 'style'=&gt;'padding: 7px; float:left;'));
<a name="l860"><span class="linenum"> 860</span></a>  
<a name="l861"><span class="linenum"> 861</span></a>          if (<a class="var it6083" onMouseOver="hilite(6083)" onMouseOut="lolite()" onClick="logVariable('detail')" href="../../_variables/detail.html">$detail</a>) {
<a name="l862"><span class="linenum"> 862</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('h4', array('class'=&gt;'workshop'));
<a name="l863"><span class="linenum"> 863</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/workshop/view.php.html">/mod/workshop/view.php</a>', array('id'=&gt;<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('cmid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>));
<a name="l864"><span class="linenum"> 864</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('name')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l865"><span class="linenum"> 865</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('empty_tag')" href="../../_functions/empty_tag.html" onMouseOver="funcPopup(event,'empty_tag')">empty_tag</a>('img', array('src'=&gt;<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('icon', <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('type')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>), 'class'=&gt;'icon', 'alt'=&gt;<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>));
<a name="l866"><span class="linenum"> 866</span></a>              echo ' ' . <a class="var it7072" onMouseOver="hilite(7072)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../../_variables/modnames.html">$modnames</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('type')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>];
<a name="l867"><span class="linenum"> 867</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, array('class'=&gt;'name', 'style'=&gt;'margin-left: 5px'));
<a name="l868"><span class="linenum"> 868</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('h4');
<a name="l869"><span class="linenum"> 869</span></a>          }
<a name="l870"><span class="linenum"> 870</span></a>  
<a name="l871"><span class="linenum"> 871</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'title'));
<a name="l872"><span class="linenum"> 872</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/workshop/submission.php.html">/mod/workshop/submission.php</a>', array('cmid'=&gt;<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('cmid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>, 'id'=&gt;<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;id));
<a name="l873"><span class="linenum"> 873</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;title);
<a name="l874"><span class="linenum"> 874</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('strong', <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>));
<a name="l875"><span class="linenum"> 875</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l876"><span class="linenum"> 876</span></a>  
<a name="l877"><span class="linenum"> 877</span></a>          if (!empty(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>)) {
<a name="l878"><span class="linenum"> 878</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'user'));
<a name="l879"><span class="linenum"> 879</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../user/view.php.html">/user/view.php</a>', array('id'=&gt;<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>-&gt;id, 'course'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>));
<a name="l880"><span class="linenum"> 880</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>);
<a name="l881"><span class="linenum"> 881</span></a>              <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l882"><span class="linenum"> 882</span></a>              echo <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionby', 'workshop', <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>);
<a name="l883"><span class="linenum"> 883</span></a>              echo ' - '.<a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('timestamp')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/timestamp.html">timestamp</a>);
<a name="l884"><span class="linenum"> 884</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l885"><span class="linenum"> 885</span></a>          } else {
<a name="l886"><span class="linenum"> 886</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'anonymous'));
<a name="l887"><span class="linenum"> 887</span></a>              echo <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submission', 'workshop');
<a name="l888"><span class="linenum"> 888</span></a>              echo ' - '.<a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('timestamp')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/timestamp.html">timestamp</a>);
<a name="l889"><span class="linenum"> 889</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l890"><span class="linenum"> 890</span></a>          }
<a name="l891"><span class="linenum"> 891</span></a>  
<a name="l892"><span class="linenum"> 892</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l893"><span class="linenum"> 893</span></a>      }
<a name="l894"><span class="linenum"> 894</span></a>  
<a name="l895"><span class="linenum"> 895</span></a>      if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('subtype')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/subtype.html">subtype</a> == 'assessment') {
<a name="l896"><span class="linenum"> 896</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'assessment', 'style'=&gt;'padding: 7px; float:left;'));
<a name="l897"><span class="linenum"> 897</span></a>  
<a name="l898"><span class="linenum"> 898</span></a>          if (<a class="var it6083" onMouseOver="hilite(6083)" onMouseOut="lolite()" onClick="logVariable('detail')" href="../../_variables/detail.html">$detail</a>) {
<a name="l899"><span class="linenum"> 899</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('h4', array('class'=&gt;'workshop'));
<a name="l900"><span class="linenum"> 900</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/workshop/view.php.html">/mod/workshop/view.php</a>', array('id'=&gt;<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('cmid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>));
<a name="l901"><span class="linenum"> 901</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('name')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l902"><span class="linenum"> 902</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('empty_tag')" href="../../_functions/empty_tag.html" onMouseOver="funcPopup(event,'empty_tag')">empty_tag</a>('img', array('src'=&gt;<a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('icon', <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('type')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>), 'class'=&gt;'icon', 'alt'=&gt;<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>));
<a name="l903"><span class="linenum"> 903</span></a>              echo ' ' . <a class="var it7072" onMouseOver="hilite(7072)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../../_variables/modnames.html">$modnames</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('type')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>];
<a name="l904"><span class="linenum"> 904</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, array('class'=&gt;'name', 'style'=&gt;'margin-left: 5px'));
<a name="l905"><span class="linenum"> 905</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('h4');
<a name="l906"><span class="linenum"> 906</span></a>          }
<a name="l907"><span class="linenum"> 907</span></a>  
<a name="l908"><span class="linenum"> 908</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'title'));
<a name="l909"><span class="linenum"> 909</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/workshop/assessment.php.html">/mod/workshop/assessment.php</a>', array('asid'=&gt;<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;id));
<a name="l910"><span class="linenum"> 910</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;submissiontitle);
<a name="l911"><span class="linenum"> 911</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('em', <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>));
<a name="l912"><span class="linenum"> 912</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l913"><span class="linenum"> 913</span></a>  
<a name="l914"><span class="linenum"> 914</span></a>          if (!empty(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>)) {
<a name="l915"><span class="linenum"> 915</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'user'));
<a name="l916"><span class="linenum"> 916</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../user/view.php.html">/user/view.php</a>', array('id'=&gt;<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>-&gt;id, 'course'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>));
<a name="l917"><span class="linenum"> 917</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>);
<a name="l918"><span class="linenum"> 918</span></a>              <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l919"><span class="linenum"> 919</span></a>              echo <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('assessmentbyfullname', 'workshop', <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>);
<a name="l920"><span class="linenum"> 920</span></a>              echo ' - '.<a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('timestamp')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/timestamp.html">timestamp</a>);
<a name="l921"><span class="linenum"> 921</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l922"><span class="linenum"> 922</span></a>          } else {
<a name="l923"><span class="linenum"> 923</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'anonymous'));
<a name="l924"><span class="linenum"> 924</span></a>              echo <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('assessment', 'workshop');
<a name="l925"><span class="linenum"> 925</span></a>              echo ' - '.<a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('timestamp')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/timestamp.html">timestamp</a>);
<a name="l926"><span class="linenum"> 926</span></a>              echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l927"><span class="linenum"> 927</span></a>          }
<a name="l928"><span class="linenum"> 928</span></a>  
<a name="l929"><span class="linenum"> 929</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l930"><span class="linenum"> 930</span></a>      }
<a name="l931"><span class="linenum"> 931</span></a>  
<a name="l932"><span class="linenum"> 932</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('empty_tag')" href="../../_functions/empty_tag.html" onMouseOver="funcPopup(event,'empty_tag')">empty_tag</a>('br', array('style'=&gt;'clear:both'));
<a name="l933"><span class="linenum"> 933</span></a>  }
<a name="l934"><span class="linenum"> 934</span></a>  
<a name="l935"><span class="linenum"> 935</span></a>  <span class="comment">/**</span>
<a name="l936"><span class="linenum"> 936</span></a>  <span class="comment"> * Regular jobs to execute via cron</span>
<a name="l937"><span class="linenum"> 937</span></a>  <span class="comment"> *</span>
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment"> * @return boolean true on success, false otherwise</span>
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment"> */</span>
<a name="l940"><span class="linenum"> 940</span></a>  function <a class="function" onClick="logFunction('workshop_cron')" href="../../_functions/workshop_cron.html" onMouseOver="funcPopup(event,'workshop_cron')">workshop_cron</a>() {
<a name="l941"><span class="linenum"> 941</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l942"><span class="linenum"> 942</span></a>  
<a name="l943"><span class="linenum"> 943</span></a>      <a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l944"><span class="linenum"> 944</span></a>  
<a name="l945"><span class="linenum"> 945</span></a>      <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(' processing workshop subplugins ...');
<a name="l946"><span class="linenum"> 946</span></a>      <a class="function" onClick="logFunction('cron_execute_plugin_type')" href="../../_functions/cron_execute_plugin_type.html" onMouseOver="funcPopup(event,'cron_execute_plugin_type')">cron_execute_plugin_type</a>('workshopallocation', 'workshop allocation methods');
<a name="l947"><span class="linenum"> 947</span></a>  
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment">    // now when the scheduled allocator had a chance to do its job, check if there</span>
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment">    // are some workshops to switch into the assessment phase</span>
<a name="l950"><span class="linenum"> 950</span></a>      <a class="var it11494" onMouseOver="hilite(11494)" onMouseOut="lolite()" onClick="logVariable('workshops')" href="../../_variables/workshops.html">$workshops</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;workshop&quot;,
<a name="l951"><span class="linenum"> 951</span></a>          &quot;phase = 20 AND phaseswitchassessment = 1 AND submissionend &gt; 0 AND submissionend &lt; ?&quot;, array(<a class="var it345" onMouseOver="hilite(345)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a>));
<a name="l952"><span class="linenum"> 952</span></a>  
<a name="l953"><span class="linenum"> 953</span></a>      if (!empty(<a class="var it11494" onMouseOver="hilite(11494)" onMouseOut="lolite()" onClick="logVariable('workshops')" href="../../_variables/workshops.html">$workshops</a>)) {
<a name="l954"><span class="linenum"> 954</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('Processing automatic assessment phase switch in '.<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it11494" onMouseOver="hilite(11494)" onMouseOut="lolite()" onClick="logVariable('workshops')" href="../../_variables/workshops.html">$workshops</a>).' workshop(s) ... ', '');
<a name="l955"><span class="linenum"> 955</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../mod/workshop/locallib.php.html">/mod/workshop/locallib.php</a>');
<a name="l956"><span class="linenum"> 956</span></a>          foreach (<a class="var it11494" onMouseOver="hilite(11494)" onMouseOut="lolite()" onClick="logVariable('workshops')" href="../../_variables/workshops.html">$workshops</a> as <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>) {
<a name="l957"><span class="linenum"> 957</span></a>              <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('course')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l958"><span class="linenum"> 958</span></a>              <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l959"><span class="linenum"> 959</span></a>              <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a> = <span class="keyword">new </span><a class="class" onClick="logClass('workshop')" href="../../_classes/workshop.html" onMouseOver="classPopup(event,'workshop')">workshop</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l960"><span class="linenum"> 960</span></a>              <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a class="function" onClick="logFunction('switch_phase')" href="../../_functions/switch_phase.html" onMouseOver="funcPopup(event,'switch_phase')">switch_phase</a>(<a class="class" onClick="logClass('workshop')" href="../../_classes/workshop.html" onMouseOver="classPopup(event,'workshop')">workshop</a>::PHASE_ASSESSMENT);
<a name="l961"><span class="linenum"> 961</span></a>  
<a name="l962"><span class="linenum"> 962</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(
<a name="l963"><span class="linenum"> 963</span></a>                  'objectid' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l964"><span class="linenum"> 964</span></a>                  'context' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('context')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>,
<a name="l965"><span class="linenum"> 965</span></a>                  'courseid' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('course')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>-&gt;id,
<a name="l966"><span class="linenum"> 966</span></a>                  'other' =&gt; array(
<a name="l967"><span class="linenum"> 967</span></a>                      'workshopphase' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;phase
<a name="l968"><span class="linenum"> 968</span></a>                  )
<a name="l969"><span class="linenum"> 969</span></a>              );
<a name="l970"><span class="linenum"> 970</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_workshop\event\<a class="class" onClick="logClass('phase_switched')" href="../../_classes/phase_switched.html" onMouseOver="classPopup(event,'phase_switched')">phase_switched</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l971"><span class="linenum"> 971</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l972"><span class="linenum"> 972</span></a>  
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment">            // disable the automatic switching now so that it is not executed again by accident</span>
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment">            // if the teacher changes the phase back to the submission one</span>
<a name="l975"><span class="linenum"> 975</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('workshop', 'phaseswitchassessment', 0, array('id' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l976"><span class="linenum"> 976</span></a>  
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment">            // todo inform the teachers</span>
<a name="l978"><span class="linenum"> 978</span></a>          }
<a name="l979"><span class="linenum"> 979</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('done');
<a name="l980"><span class="linenum"> 980</span></a>      }
<a name="l981"><span class="linenum"> 981</span></a>  
<a name="l982"><span class="linenum"> 982</span></a>      return true;
<a name="l983"><span class="linenum"> 983</span></a>  }
<a name="l984"><span class="linenum"> 984</span></a>  
<a name="l985"><span class="linenum"> 985</span></a>  <span class="comment">/**</span>
<a name="l986"><span class="linenum"> 986</span></a>  <span class="comment"> * Is a given scale used by the instance of workshop?</span>
<a name="l987"><span class="linenum"> 987</span></a>  <span class="comment"> *</span>
<a name="l988"><span class="linenum"> 988</span></a>  <span class="comment"> * The function asks all installed grading strategy subplugins. The workshop</span>
<a name="l989"><span class="linenum"> 989</span></a>  <span class="comment"> * core itself does not use scales. Both grade for submission and grade for</span>
<a name="l990"><span class="linenum"> 990</span></a>  <span class="comment"> * assessments do not use scales.</span>
<a name="l991"><span class="linenum"> 991</span></a>  <span class="comment"> *</span>
<a name="l992"><span class="linenum"> 992</span></a>  <span class="comment"> * @param int $workshopid id of workshop instance</span>
<a name="l993"><span class="linenum"> 993</span></a>  <span class="comment"> * @param int $scaleid id of the scale to check</span>
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment"> * @return bool</span>
<a name="l995"><span class="linenum"> 995</span></a>  <span class="comment"> */</span>
<a name="l996"><span class="linenum"> 996</span></a>  function <a class="function" onClick="logFunction('workshop_scale_used')" href="../../_functions/workshop_scale_used.html" onMouseOver="funcPopup(event,'workshop_scale_used')">workshop_scale_used</a>(<a class="var it603" onMouseOver="hilite(603)" onMouseOut="lolite()" onClick="logVariable('workshopid')" href="../../_variables/workshopid.html">$workshopid</a>, <a class="var it3927" onMouseOver="hilite(3927)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>) {
<a name="l997"><span class="linenum"> 997</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>; <span class="comment">// other files included from here</span>
<a name="l998"><span class="linenum"> 998</span></a>  
<a name="l999"><span class="linenum"> 999</span></a>      <a class="var it9143" onMouseOver="hilite(9143)" onMouseOut="lolite()" onClick="logVariable('strategies')" href="../../_variables/strategies.html">$strategies</a> = <a class="class" onClick="logClass('core_component')" href="../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('workshopform');
<a name="l1000"><span class="linenum">1000</span></a>      foreach (<a class="var it9143" onMouseOver="hilite(9143)" onMouseOut="lolite()" onClick="logVariable('strategies')" href="../../_variables/strategies.html">$strategies</a> as <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('strategy')" href="../../_variables/strategy.html">$strategy</a> =&gt; <a class="var it11495" onMouseOver="hilite(11495)" onMouseOut="lolite()" onClick="logVariable('strategypath')" href="../../_variables/strategypath.html">$strategypath</a>) {
<a name="l1001"><span class="linenum">1001</span></a>          <a class="var it11496" onMouseOver="hilite(11496)" onMouseOut="lolite()" onClick="logVariable('strategylib')" href="../../_variables/strategylib.html">$strategylib</a> = <a class="var it11495" onMouseOver="hilite(11495)" onMouseOut="lolite()" onClick="logVariable('strategypath')" href="../../_variables/strategypath.html">$strategypath</a> . '/lib.php';
<a name="l1002"><span class="linenum">1002</span></a>          if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it11496" onMouseOver="hilite(11496)" onMouseOut="lolite()" onClick="logVariable('strategylib')" href="../../_variables/strategylib.html">$strategylib</a>)) {
<a name="l1003"><span class="linenum">1003</span></a>              require_once(<a class="var it11496" onMouseOver="hilite(11496)" onMouseOut="lolite()" onClick="logVariable('strategylib')" href="../../_variables/strategylib.html">$strategylib</a>);
<a name="l1004"><span class="linenum">1004</span></a>          } else {
<a name="l1005"><span class="linenum">1005</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('the grading forms subplugin must contain library ' . <a class="var it11496" onMouseOver="hilite(11496)" onMouseOut="lolite()" onClick="logVariable('strategylib')" href="../../_variables/strategylib.html">$strategylib</a>);
<a name="l1006"><span class="linenum">1006</span></a>          }
<a name="l1007"><span class="linenum">1007</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a> = 'workshop_' . <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('strategy')" href="../../_variables/strategy.html">$strategy</a> . '_strategy';
<a name="l1008"><span class="linenum">1008</span></a>          if (<a class="phpfunction" onClick="logFunction('method_exists')" href="../../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a>, 'scale_used')) {
<a name="l1009"><span class="linenum">1009</span></a>              if (<a class="phpfunction" onClick="logFunction('call_user_func_array')" href="../../_functions/call_user_func_array.html" onMouseOver="phpfuncPopup(event,'call_user_func_array')">call_user_func_array</a>(array(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a>, 'scale_used'), array(<a class="var it3927" onMouseOver="hilite(3927)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>, <a class="var it603" onMouseOver="hilite(603)" onMouseOut="lolite()" onClick="logVariable('workshopid')" href="../../_variables/workshopid.html">$workshopid</a>))) {
<a name="l1010"><span class="linenum">1010</span></a>  <span class="comment">                // no need to include any other files - scale is used</span>
<a name="l1011"><span class="linenum">1011</span></a>                  return true;
<a name="l1012"><span class="linenum">1012</span></a>              }
<a name="l1013"><span class="linenum">1013</span></a>          }
<a name="l1014"><span class="linenum">1014</span></a>      }
<a name="l1015"><span class="linenum">1015</span></a>  
<a name="l1016"><span class="linenum">1016</span></a>      return false;
<a name="l1017"><span class="linenum">1017</span></a>  }
<a name="l1018"><span class="linenum">1018</span></a>  
<a name="l1019"><span class="linenum">1019</span></a>  <span class="comment">/**</span>
<a name="l1020"><span class="linenum">1020</span></a>  <span class="comment"> * Is a given scale used by any instance of workshop?</span>
<a name="l1021"><span class="linenum">1021</span></a>  <span class="comment"> *</span>
<a name="l1022"><span class="linenum">1022</span></a>  <span class="comment"> * The function asks all installed grading strategy subplugins. The workshop</span>
<a name="l1023"><span class="linenum">1023</span></a>  <span class="comment"> * core itself does not use scales. Both grade for submission and grade for</span>
<a name="l1024"><span class="linenum">1024</span></a>  <span class="comment"> * assessments do not use scales.</span>
<a name="l1025"><span class="linenum">1025</span></a>  <span class="comment"> *</span>
<a name="l1026"><span class="linenum">1026</span></a>  <span class="comment"> * @param int $scaleid id of the scale to check</span>
<a name="l1027"><span class="linenum">1027</span></a>  <span class="comment"> * @return bool</span>
<a name="l1028"><span class="linenum">1028</span></a>  <span class="comment"> */</span>
<a name="l1029"><span class="linenum">1029</span></a>  function <a class="function" onClick="logFunction('workshop_scale_used_anywhere')" href="../../_functions/workshop_scale_used_anywhere.html" onMouseOver="funcPopup(event,'workshop_scale_used_anywhere')">workshop_scale_used_anywhere</a>(<a class="var it3927" onMouseOver="hilite(3927)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>) {
<a name="l1030"><span class="linenum">1030</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>; <span class="comment">// other files included from here</span>
<a name="l1031"><span class="linenum">1031</span></a>  
<a name="l1032"><span class="linenum">1032</span></a>      <a class="var it9143" onMouseOver="hilite(9143)" onMouseOut="lolite()" onClick="logVariable('strategies')" href="../../_variables/strategies.html">$strategies</a> = <a class="class" onClick="logClass('core_component')" href="../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('workshopform');
<a name="l1033"><span class="linenum">1033</span></a>      foreach (<a class="var it9143" onMouseOver="hilite(9143)" onMouseOut="lolite()" onClick="logVariable('strategies')" href="../../_variables/strategies.html">$strategies</a> as <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('strategy')" href="../../_variables/strategy.html">$strategy</a> =&gt; <a class="var it11495" onMouseOver="hilite(11495)" onMouseOut="lolite()" onClick="logVariable('strategypath')" href="../../_variables/strategypath.html">$strategypath</a>) {
<a name="l1034"><span class="linenum">1034</span></a>          <a class="var it11496" onMouseOver="hilite(11496)" onMouseOut="lolite()" onClick="logVariable('strategylib')" href="../../_variables/strategylib.html">$strategylib</a> = <a class="var it11495" onMouseOver="hilite(11495)" onMouseOut="lolite()" onClick="logVariable('strategypath')" href="../../_variables/strategypath.html">$strategypath</a> . '/lib.php';
<a name="l1035"><span class="linenum">1035</span></a>          if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it11496" onMouseOver="hilite(11496)" onMouseOut="lolite()" onClick="logVariable('strategylib')" href="../../_variables/strategylib.html">$strategylib</a>)) {
<a name="l1036"><span class="linenum">1036</span></a>              require_once(<a class="var it11496" onMouseOver="hilite(11496)" onMouseOut="lolite()" onClick="logVariable('strategylib')" href="../../_variables/strategylib.html">$strategylib</a>);
<a name="l1037"><span class="linenum">1037</span></a>          } else {
<a name="l1038"><span class="linenum">1038</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('the grading forms subplugin must contain library ' . <a class="var it11496" onMouseOver="hilite(11496)" onMouseOut="lolite()" onClick="logVariable('strategylib')" href="../../_variables/strategylib.html">$strategylib</a>);
<a name="l1039"><span class="linenum">1039</span></a>          }
<a name="l1040"><span class="linenum">1040</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a> = 'workshop_' . <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('strategy')" href="../../_variables/strategy.html">$strategy</a> . '_strategy';
<a name="l1041"><span class="linenum">1041</span></a>          if (<a class="phpfunction" onClick="logFunction('method_exists')" href="../../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a>, 'scale_used')) {
<a name="l1042"><span class="linenum">1042</span></a>              if (<a class="phpfunction" onClick="logFunction('call_user_func')" href="../../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>(array(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a>, 'scale_used'), <a class="var it3927" onMouseOver="hilite(3927)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>)) {
<a name="l1043"><span class="linenum">1043</span></a>  <span class="comment">                // no need to include any other files - scale is used</span>
<a name="l1044"><span class="linenum">1044</span></a>                  return true;
<a name="l1045"><span class="linenum">1045</span></a>              }
<a name="l1046"><span class="linenum">1046</span></a>          }
<a name="l1047"><span class="linenum">1047</span></a>      }
<a name="l1048"><span class="linenum">1048</span></a>  
<a name="l1049"><span class="linenum">1049</span></a>      return false;
<a name="l1050"><span class="linenum">1050</span></a>  }
<a name="l1051"><span class="linenum">1051</span></a>  
<a name="l1052"><span class="linenum">1052</span></a>  <span class="comment">/**</span>
<a name="l1053"><span class="linenum">1053</span></a>  <span class="comment"> * Returns all other caps used in the module</span>
<a name="l1054"><span class="linenum">1054</span></a>  <span class="comment"> *</span>
<a name="l1055"><span class="linenum">1055</span></a>  <span class="comment"> * @return array</span>
<a name="l1056"><span class="linenum">1056</span></a>  <span class="comment"> */</span>
<a name="l1057"><span class="linenum">1057</span></a>  function <a class="function" onClick="logFunction('workshop_get_extra_capabilities')" href="../../_functions/workshop_get_extra_capabilities.html" onMouseOver="funcPopup(event,'workshop_get_extra_capabilities')">workshop_get_extra_capabilities</a>() {
<a name="l1058"><span class="linenum">1058</span></a>      return array('moodle/site:accessallgroups');
<a name="l1059"><span class="linenum">1059</span></a>  }
<a name="l1060"><span class="linenum">1060</span></a>  
<a name="l1061"><span class="linenum">1061</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l1062"><span class="linenum">1062</span></a>  <span class="comment">// Gradebook API                                                              //</span>
<a name="l1063"><span class="linenum">1063</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l1064"><span class="linenum">1064</span></a>  
<a name="l1065"><span class="linenum">1065</span></a>  <span class="comment">/**</span>
<a name="l1066"><span class="linenum">1066</span></a>  <span class="comment"> * Creates or updates grade items for the give workshop instance</span>
<a name="l1067"><span class="linenum">1067</span></a>  <span class="comment"> *</span>
<a name="l1068"><span class="linenum">1068</span></a>  <span class="comment"> * Needed by grade_update_mod_grades() in lib/gradelib.php. Also used by</span>
<a name="l1069"><span class="linenum">1069</span></a>  <span class="comment"> * {@link workshop_update_grades()}.</span>
<a name="l1070"><span class="linenum">1070</span></a>  <span class="comment"> *</span>
<a name="l1071"><span class="linenum">1071</span></a>  <span class="comment"> * @param stdClass $workshop instance object with extra cmidnumber property</span>
<a name="l1072"><span class="linenum">1072</span></a>  <span class="comment"> * @param stdClass $submissiongrades data for the first grade item</span>
<a name="l1073"><span class="linenum">1073</span></a>  <span class="comment"> * @param stdClass $assessmentgrades data for the second grade item</span>
<a name="l1074"><span class="linenum">1074</span></a>  <span class="comment"> * @return void</span>
<a name="l1075"><span class="linenum">1075</span></a>  <span class="comment"> */</span>
<a name="l1076"><span class="linenum">1076</span></a>  function <a class="function" onClick="logFunction('workshop_grade_item_update')" href="../../_functions/workshop_grade_item_update.html" onMouseOver="funcPopup(event,'workshop_grade_item_update')">workshop_grade_item_update</a>(stdclass <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>, <a class="var it11497" onMouseOver="hilite(11497)" onMouseOut="lolite()" onClick="logVariable('submissiongrades')" href="../../_variables/submissiongrades.html">$submissiongrades</a>=null, <a class="var it11498" onMouseOver="hilite(11498)" onMouseOut="lolite()" onClick="logVariable('assessmentgrades')" href="../../_variables/assessmentgrades.html">$assessmentgrades</a>=null) {
<a name="l1077"><span class="linenum">1077</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1078"><span class="linenum">1078</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l1079"><span class="linenum">1079</span></a>  
<a name="l1080"><span class="linenum">1080</span></a>      <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a> = new stdclass();
<a name="l1081"><span class="linenum">1081</span></a>      <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('workshopname')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/workshopname.html">workshopname</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('name')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>);
<a name="l1082"><span class="linenum">1082</span></a>  
<a name="l1083"><span class="linenum">1083</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = array();
<a name="l1084"><span class="linenum">1084</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>['itemname'] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradeitemsubmission', 'workshop', <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>);
<a name="l1085"><span class="linenum">1085</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>['gradetype'] = <a class="constant" onClick="logConstant('GRADE_TYPE_VALUE')" href="../../_constants/GRADE_TYPE_VALUE.html" onMouseOver="constPopup(event,'GRADE_TYPE_VALUE')">GRADE_TYPE_VALUE</a>;
<a name="l1086"><span class="linenum">1086</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>['grademax']  = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('grade')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a>;
<a name="l1087"><span class="linenum">1087</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>['grademin']  = 0;
<a name="l1088"><span class="linenum">1088</span></a>      <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>('mod/workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('course')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, 'mod', 'workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, <a class="var it11497" onMouseOver="hilite(11497)" onMouseOut="lolite()" onClick="logVariable('submissiongrades')" href="../../_variables/submissiongrades.html">$submissiongrades</a> , <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>);
<a name="l1089"><span class="linenum">1089</span></a>  
<a name="l1090"><span class="linenum">1090</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = array();
<a name="l1091"><span class="linenum">1091</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>['itemname'] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradeitemassessment', 'workshop', <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>);
<a name="l1092"><span class="linenum">1092</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>['gradetype'] = <a class="constant" onClick="logConstant('GRADE_TYPE_VALUE')" href="../../_constants/GRADE_TYPE_VALUE.html" onMouseOver="constPopup(event,'GRADE_TYPE_VALUE')">GRADE_TYPE_VALUE</a>;
<a name="l1093"><span class="linenum">1093</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>['grademax']  = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('gradinggrade')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/gradinggrade.html">gradinggrade</a>;
<a name="l1094"><span class="linenum">1094</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>['grademin']  = 0;
<a name="l1095"><span class="linenum">1095</span></a>      <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>('mod/workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('course')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, 'mod', 'workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 1, <a class="var it11498" onMouseOver="hilite(11498)" onMouseOut="lolite()" onClick="logVariable('assessmentgrades')" href="../../_variables/assessmentgrades.html">$assessmentgrades</a>, <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>);
<a name="l1096"><span class="linenum">1096</span></a>  }
<a name="l1097"><span class="linenum">1097</span></a>  
<a name="l1098"><span class="linenum">1098</span></a>  <span class="comment">/**</span>
<a name="l1099"><span class="linenum">1099</span></a>  <span class="comment"> * Update workshop grades in the gradebook</span>
<a name="l1100"><span class="linenum">1100</span></a>  <span class="comment"> *</span>
<a name="l1101"><span class="linenum">1101</span></a>  <span class="comment"> * Needed by grade_update_mod_grades() in lib/gradelib.php</span>
<a name="l1102"><span class="linenum">1102</span></a>  <span class="comment"> *</span>
<a name="l1103"><span class="linenum">1103</span></a>  <span class="comment"> * @category grade</span>
<a name="l1104"><span class="linenum">1104</span></a>  <span class="comment"> * @param stdClass $workshop instance object with extra cmidnumber and modname property</span>
<a name="l1105"><span class="linenum">1105</span></a>  <span class="comment"> * @param int $userid        update grade of specific user only, 0 means all participants</span>
<a name="l1106"><span class="linenum">1106</span></a>  <span class="comment"> * @return void</span>
<a name="l1107"><span class="linenum">1107</span></a>  <span class="comment"> */</span>
<a name="l1108"><span class="linenum">1108</span></a>  function <a class="function" onClick="logFunction('workshop_update_grades')" href="../../_functions/workshop_update_grades.html" onMouseOver="funcPopup(event,'workshop_update_grades')">workshop_update_grades</a>(stdclass <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>=0) {
<a name="l1109"><span class="linenum">1109</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1110"><span class="linenum">1110</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l1111"><span class="linenum">1111</span></a>  
<a name="l1112"><span class="linenum">1112</span></a>      <a class="var it11499" onMouseOver="hilite(11499)" onMouseOut="lolite()" onClick="logVariable('whereuser')" href="../../_variables/whereuser.html">$whereuser</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> ? ' AND authorid = :userid' : '';
<a name="l1113"><span class="linenum">1113</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('workshopid' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l1114"><span class="linenum">1114</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT authorid, grade, gradeover, gradeoverby, feedbackauthor, feedbackauthorformat, timemodified, timegraded
<a name="l1115"><span class="linenum">1115</span></a>                FROM {workshop_submissions}
<a name="l1116"><span class="linenum">1116</span></a>               WHERE workshopid = :workshopid AND example=0' . <a class="var it11499" onMouseOver="hilite(11499)" onMouseOut="lolite()" onClick="logVariable('whereuser')" href="../../_variables/whereuser.html">$whereuser</a>;
<a name="l1117"><span class="linenum">1117</span></a>      <a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1118"><span class="linenum">1118</span></a>      <a class="var it11497" onMouseOver="hilite(11497)" onMouseOut="lolite()" onClick="logVariable('submissiongrades')" href="../../_variables/submissiongrades.html">$submissiongrades</a> = array();
<a name="l1119"><span class="linenum">1119</span></a>      foreach (<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> as <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l1120"><span class="linenum">1120</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = new stdclass();
<a name="l1121"><span class="linenum">1121</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('authorid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>;
<a name="l1122"><span class="linenum">1122</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('gradeover')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/gradeover.html">gradeover</a>)) {
<a name="l1123"><span class="linenum">1123</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/rawgrade.html">rawgrade</a> = <a class="function" onClick="logFunction('grade_floatval')" href="../../_functions/grade_floatval.html" onMouseOver="funcPopup(event,'grade_floatval')">grade_floatval</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('grade')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> * <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('gradeover')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/gradeover.html">gradeover</a> / 100);
<a name="l1124"><span class="linenum">1124</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('usermodified')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/usermodified.html">usermodified</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('gradeoverby')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/gradeoverby.html">gradeoverby</a>;
<a name="l1125"><span class="linenum">1125</span></a>          } else {
<a name="l1126"><span class="linenum">1126</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/rawgrade.html">rawgrade</a> = <a class="function" onClick="logFunction('grade_floatval')" href="../../_functions/grade_floatval.html" onMouseOver="funcPopup(event,'grade_floatval')">grade_floatval</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('grade')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> * <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('grade')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> / 100);
<a name="l1127"><span class="linenum">1127</span></a>          }
<a name="l1128"><span class="linenum">1128</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('feedbackauthor')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/feedbackauthor.html">feedbackauthor</a>;
<a name="l1129"><span class="linenum">1129</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/feedbackformat.html">feedbackformat</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('feedbackauthorformat')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/feedbackauthorformat.html">feedbackauthorformat</a>;
<a name="l1130"><span class="linenum">1130</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('datesubmitted')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/datesubmitted.html">datesubmitted</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>;
<a name="l1131"><span class="linenum">1131</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('dategraded')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/dategraded.html">dategraded</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timegraded')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/timegraded.html">timegraded</a>;
<a name="l1132"><span class="linenum">1132</span></a>          <a class="var it11497" onMouseOver="hilite(11497)" onMouseOut="lolite()" onClick="logVariable('submissiongrades')" href="../../_variables/submissiongrades.html">$submissiongrades</a>[<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('authorid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>] = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>;
<a name="l1133"><span class="linenum">1133</span></a>      }
<a name="l1134"><span class="linenum">1134</span></a>  
<a name="l1135"><span class="linenum">1135</span></a>      <a class="var it11499" onMouseOver="hilite(11499)" onMouseOut="lolite()" onClick="logVariable('whereuser')" href="../../_variables/whereuser.html">$whereuser</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> ? ' AND userid = :userid' : '';
<a name="l1136"><span class="linenum">1136</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('workshopid' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l1137"><span class="linenum">1137</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT userid, gradinggrade, timegraded
<a name="l1138"><span class="linenum">1138</span></a>                FROM {workshop_aggregations}
<a name="l1139"><span class="linenum">1139</span></a>               WHERE workshopid = :workshopid' . <a class="var it11499" onMouseOver="hilite(11499)" onMouseOut="lolite()" onClick="logVariable('whereuser')" href="../../_variables/whereuser.html">$whereuser</a>;
<a name="l1140"><span class="linenum">1140</span></a>      <a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1141"><span class="linenum">1141</span></a>      <a class="var it11498" onMouseOver="hilite(11498)" onMouseOut="lolite()" onClick="logVariable('assessmentgrades')" href="../../_variables/assessmentgrades.html">$assessmentgrades</a> = array();
<a name="l1142"><span class="linenum">1142</span></a>      foreach (<a class="var it2579" onMouseOver="hilite(2579)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> as <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l1143"><span class="linenum">1143</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = new stdclass();
<a name="l1144"><span class="linenum">1144</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l1145"><span class="linenum">1145</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/rawgrade.html">rawgrade</a> = <a class="function" onClick="logFunction('grade_floatval')" href="../../_functions/grade_floatval.html" onMouseOver="funcPopup(event,'grade_floatval')">grade_floatval</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('gradinggrade')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/gradinggrade.html">gradinggrade</a> * <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('gradinggrade')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/gradinggrade.html">gradinggrade</a> / 100);
<a name="l1146"><span class="linenum">1146</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('dategraded')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../_variables/dategraded.html">dategraded</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timegraded')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/timegraded.html">timegraded</a>;
<a name="l1147"><span class="linenum">1147</span></a>          <a class="var it11498" onMouseOver="hilite(11498)" onMouseOut="lolite()" onClick="logVariable('assessmentgrades')" href="../../_variables/assessmentgrades.html">$assessmentgrades</a>[<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>] = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>;
<a name="l1148"><span class="linenum">1148</span></a>      }
<a name="l1149"><span class="linenum">1149</span></a>  
<a name="l1150"><span class="linenum">1150</span></a>      <a class="function" onClick="logFunction('workshop_grade_item_update')" href="../../_functions/workshop_grade_item_update.html" onMouseOver="funcPopup(event,'workshop_grade_item_update')">workshop_grade_item_update</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>, <a class="var it11497" onMouseOver="hilite(11497)" onMouseOut="lolite()" onClick="logVariable('submissiongrades')" href="../../_variables/submissiongrades.html">$submissiongrades</a>, <a class="var it11498" onMouseOver="hilite(11498)" onMouseOut="lolite()" onClick="logVariable('assessmentgrades')" href="../../_variables/assessmentgrades.html">$assessmentgrades</a>);
<a name="l1151"><span class="linenum">1151</span></a>  }
<a name="l1152"><span class="linenum">1152</span></a>  
<a name="l1153"><span class="linenum">1153</span></a>  <span class="comment">/**</span>
<a name="l1154"><span class="linenum">1154</span></a>  <span class="comment"> * Update the grade items categories if they are changed via mod_form.php</span>
<a name="l1155"><span class="linenum">1155</span></a>  <span class="comment"> *</span>
<a name="l1156"><span class="linenum">1156</span></a>  <span class="comment"> * We must do it manually here in the workshop module because modedit supports only</span>
<a name="l1157"><span class="linenum">1157</span></a>  <span class="comment"> * single grade item while we use two.</span>
<a name="l1158"><span class="linenum">1158</span></a>  <span class="comment"> *</span>
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment"> * @param stdClass $workshop An object from the form in mod_form.php</span>
<a name="l1160"><span class="linenum">1160</span></a>  <span class="comment"> */</span>
<a name="l1161"><span class="linenum">1161</span></a>  function <a class="function" onClick="logFunction('workshop_grade_item_category_update')" href="../../_functions/workshop_grade_item_category_update.html" onMouseOver="funcPopup(event,'workshop_grade_item_category_update')">workshop_grade_item_category_update</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>) {
<a name="l1162"><span class="linenum">1162</span></a>  
<a name="l1163"><span class="linenum">1163</span></a>      <a class="var it11504" onMouseOver="hilite(11504)" onMouseOut="lolite()" onClick="logVariable('gradeitems')" href="../../_variables/gradeitems.html">$gradeitems</a> = <a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch_all')" href="../../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array(
<a name="l1164"><span class="linenum">1164</span></a>          'itemtype'      =&gt; 'mod',
<a name="l1165"><span class="linenum">1165</span></a>          'itemmodule'    =&gt; 'workshop',
<a name="l1166"><span class="linenum">1166</span></a>          'iteminstance'  =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1167"><span class="linenum">1167</span></a>          'courseid'      =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('course')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>));
<a name="l1168"><span class="linenum">1168</span></a>  
<a name="l1169"><span class="linenum">1169</span></a>      if (!empty(<a class="var it11504" onMouseOver="hilite(11504)" onMouseOut="lolite()" onClick="logVariable('gradeitems')" href="../../_variables/gradeitems.html">$gradeitems</a>)) {
<a name="l1170"><span class="linenum">1170</span></a>          foreach (<a class="var it11504" onMouseOver="hilite(11504)" onMouseOut="lolite()" onClick="logVariable('gradeitems')" href="../../_variables/gradeitems.html">$gradeitems</a> as <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>) {
<a name="l1171"><span class="linenum">1171</span></a>              if (<a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39531" onMouseOver="hilite(39531)" onMouseOut="lolite()" href="../../_variables/itemnumber.html">itemnumber</a> == 0) {
<a name="l1172"><span class="linenum">1172</span></a>                  if (isset(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('submissiongradepass')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/submissiongradepass.html">submissiongradepass</a>) &amp;&amp;
<a name="l1173"><span class="linenum">1173</span></a>                          <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('gradepass')" class="var it39531" onMouseOver="hilite(39531)" onMouseOut="lolite()" href="../../_variables/gradepass.html">gradepass</a> != <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('submissiongradepass')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/submissiongradepass.html">submissiongradepass</a>) {
<a name="l1174"><span class="linenum">1174</span></a>                      <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('gradepass')" class="var it39531" onMouseOver="hilite(39531)" onMouseOut="lolite()" href="../../_variables/gradepass.html">gradepass</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('submissiongradepass')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/submissiongradepass.html">submissiongradepass</a>;
<a name="l1175"><span class="linenum">1175</span></a>                      <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l1176"><span class="linenum">1176</span></a>                  }
<a name="l1177"><span class="linenum">1177</span></a>                  if (<a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('categoryid')" class="var it39531" onMouseOver="hilite(39531)" onMouseOut="lolite()" href="../../_variables/categoryid.html">categoryid</a> != <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('gradecategory')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/gradecategory.html">gradecategory</a>) {
<a name="l1178"><span class="linenum">1178</span></a>                      <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('set_parent')" href="../../_functions/set_parent.html" onMouseOver="funcPopup(event,'set_parent')">set_parent</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('gradecategory')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/gradecategory.html">gradecategory</a>);
<a name="l1179"><span class="linenum">1179</span></a>                  }
<a name="l1180"><span class="linenum">1180</span></a>              } else if (<a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it39531" onMouseOver="hilite(39531)" onMouseOut="lolite()" href="../../_variables/itemnumber.html">itemnumber</a> == 1) {
<a name="l1181"><span class="linenum">1181</span></a>                  if (isset(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('gradinggradepass')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/gradinggradepass.html">gradinggradepass</a>) &amp;&amp;
<a name="l1182"><span class="linenum">1182</span></a>                          <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('gradepass')" class="var it39531" onMouseOver="hilite(39531)" onMouseOut="lolite()" href="../../_variables/gradepass.html">gradepass</a> != <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('gradinggradepass')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/gradinggradepass.html">gradinggradepass</a>) {
<a name="l1183"><span class="linenum">1183</span></a>                      <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('gradepass')" class="var it39531" onMouseOver="hilite(39531)" onMouseOut="lolite()" href="../../_variables/gradepass.html">gradepass</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('gradinggradepass')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/gradinggradepass.html">gradinggradepass</a>;
<a name="l1184"><span class="linenum">1184</span></a>                      <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l1185"><span class="linenum">1185</span></a>                  }
<a name="l1186"><span class="linenum">1186</span></a>                  if (<a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('categoryid')" class="var it39531" onMouseOver="hilite(39531)" onMouseOut="lolite()" href="../../_variables/categoryid.html">categoryid</a> != <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('gradinggradecategory')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/gradinggradecategory.html">gradinggradecategory</a>) {
<a name="l1187"><span class="linenum">1187</span></a>                      <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('set_parent')" href="../../_functions/set_parent.html" onMouseOver="funcPopup(event,'set_parent')">set_parent</a>(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('gradinggradecategory')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/gradinggradecategory.html">gradinggradecategory</a>);
<a name="l1188"><span class="linenum">1188</span></a>                  }
<a name="l1189"><span class="linenum">1189</span></a>              }
<a name="l1190"><span class="linenum">1190</span></a>              if (!empty(<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('add')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/add.html">add</a>)) {
<a name="l1191"><span class="linenum">1191</span></a>                  <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a> = <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('get_parent_category')" href="../../_functions/get_parent_category.html" onMouseOver="funcPopup(event,'get_parent_category')">get_parent_category</a>();
<a name="l1192"><span class="linenum">1192</span></a>                  if (<a class="class" onClick="logClass('grade_category')" href="../../_classes/grade_category.html" onMouseOver="classPopup(event,'grade_category')">grade_category</a>::<a class="function" onClick="logFunction('aggregation_uses_aggregationcoef')" href="../../_functions/aggregation_uses_aggregationcoef.html" onMouseOver="funcPopup(event,'aggregation_uses_aggregationcoef')">aggregation_uses_aggregationcoef</a>(<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a onClick="logVariable('aggregation')" class="var it39556" onMouseOver="hilite(39556)" onMouseOut="lolite()" href="../../_variables/aggregation.html">aggregation</a>)) {
<a name="l1193"><span class="linenum">1193</span></a>                      if (<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a onClick="logVariable('aggregation')" class="var it39556" onMouseOver="hilite(39556)" onMouseOut="lolite()" href="../../_variables/aggregation.html">aggregation</a> == <a class="constant" onClick="logConstant('GRADE_AGGREGATE_WEIGHTED_MEAN')" href="../../_constants/GRADE_AGGREGATE_WEIGHTED_MEAN.html" onMouseOver="constPopup(event,'GRADE_AGGREGATE_WEIGHTED_MEAN')">GRADE_AGGREGATE_WEIGHTED_MEAN</a>) {
<a name="l1194"><span class="linenum">1194</span></a>                          <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('aggregationcoef')" class="var it39531" onMouseOver="hilite(39531)" onMouseOut="lolite()" href="../../_variables/aggregationcoef.html">aggregationcoef</a> = 1;
<a name="l1195"><span class="linenum">1195</span></a>                      } else {
<a name="l1196"><span class="linenum">1196</span></a>                          <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('aggregationcoef')" class="var it39531" onMouseOver="hilite(39531)" onMouseOut="lolite()" href="../../_variables/aggregationcoef.html">aggregationcoef</a> = 0;
<a name="l1197"><span class="linenum">1197</span></a>                      }
<a name="l1198"><span class="linenum">1198</span></a>                      <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l1199"><span class="linenum">1199</span></a>                  }
<a name="l1200"><span class="linenum">1200</span></a>              }
<a name="l1201"><span class="linenum">1201</span></a>          }
<a name="l1202"><span class="linenum">1202</span></a>      }
<a name="l1203"><span class="linenum">1203</span></a>  }
<a name="l1204"><span class="linenum">1204</span></a>  
<a name="l1205"><span class="linenum">1205</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l1206"><span class="linenum">1206</span></a>  <span class="comment">// File API                                                                   //</span>
<a name="l1207"><span class="linenum">1207</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l1208"><span class="linenum">1208</span></a>  
<a name="l1209"><span class="linenum">1209</span></a>  <span class="comment">/**</span>
<a name="l1210"><span class="linenum">1210</span></a>  <span class="comment"> * Returns the lists of all browsable file areas within the given module context</span>
<a name="l1211"><span class="linenum">1211</span></a>  <span class="comment"> *</span>
<a name="l1212"><span class="linenum">1212</span></a>  <span class="comment"> * The file area workshop_intro for the activity introduction field is added automatically</span>
<a name="l1213"><span class="linenum">1213</span></a>  <span class="comment"> * by {@link file_browser::get_file_info_context_module()}</span>
<a name="l1214"><span class="linenum">1214</span></a>  <span class="comment"> *</span>
<a name="l1215"><span class="linenum">1215</span></a>  <span class="comment"> * @package  mod_workshop</span>
<a name="l1216"><span class="linenum">1216</span></a>  <span class="comment"> * @category files</span>
<a name="l1217"><span class="linenum">1217</span></a>  <span class="comment"> *</span>
<a name="l1218"><span class="linenum">1218</span></a>  <span class="comment"> * @param stdClass $course</span>
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment"> * @param stdClass $cm</span>
<a name="l1220"><span class="linenum">1220</span></a>  <span class="comment"> * @param stdClass $context</span>
<a name="l1221"><span class="linenum">1221</span></a>  <span class="comment"> * @return array of [(string)filearea] =&gt; (string)description</span>
<a name="l1222"><span class="linenum">1222</span></a>  <span class="comment"> */</span>
<a name="l1223"><span class="linenum">1223</span></a>  function <a class="function" onClick="logFunction('workshop_get_file_areas')" href="../../_functions/workshop_get_file_areas.html" onMouseOver="funcPopup(event,'workshop_get_file_areas')">workshop_get_file_areas</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l1224"><span class="linenum">1224</span></a>      <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a> = array();
<a name="l1225"><span class="linenum">1225</span></a>      <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>['instructauthors']          = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('areainstructauthors', 'workshop');
<a name="l1226"><span class="linenum">1226</span></a>      <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>['instructreviewers']        = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('areainstructreviewers', 'workshop');
<a name="l1227"><span class="linenum">1227</span></a>      <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>['submission_content']       = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('areasubmissioncontent', 'workshop');
<a name="l1228"><span class="linenum">1228</span></a>      <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>['submission_attachment']    = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('areasubmissionattachment', 'workshop');
<a name="l1229"><span class="linenum">1229</span></a>      <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>['conclusion']               = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('areaconclusion', 'workshop');
<a name="l1230"><span class="linenum">1230</span></a>      <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>['overallfeedback_content']  = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('areaoverallfeedbackcontent', 'workshop');
<a name="l1231"><span class="linenum">1231</span></a>      <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>['overallfeedback_attachment'] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('areaoverallfeedbackattachment', 'workshop');
<a name="l1232"><span class="linenum">1232</span></a>  
<a name="l1233"><span class="linenum">1233</span></a>      return <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>;
<a name="l1234"><span class="linenum">1234</span></a>  }
<a name="l1235"><span class="linenum">1235</span></a>  
<a name="l1236"><span class="linenum">1236</span></a>  <span class="comment">/**</span>
<a name="l1237"><span class="linenum">1237</span></a>  <span class="comment"> * Serves the files from the workshop file areas</span>
<a name="l1238"><span class="linenum">1238</span></a>  <span class="comment"> *</span>
<a name="l1239"><span class="linenum">1239</span></a>  <span class="comment"> * Apart from module intro (handled by pluginfile.php automatically), workshop files may be</span>
<a name="l1240"><span class="linenum">1240</span></a>  <span class="comment"> * media inserted into submission content (like images) and submission attachments. For these two,</span>
<a name="l1241"><span class="linenum">1241</span></a>  <span class="comment"> * the fileareas submission_content and submission_attachment are used.</span>
<a name="l1242"><span class="linenum">1242</span></a>  <span class="comment"> * Besides that, areas instructauthors, instructreviewers and conclusion contain the media</span>
<a name="l1243"><span class="linenum">1243</span></a>  <span class="comment"> * embedded using the mod_form.php.</span>
<a name="l1244"><span class="linenum">1244</span></a>  <span class="comment"> *</span>
<a name="l1245"><span class="linenum">1245</span></a>  <span class="comment"> * @package  mod_workshop</span>
<a name="l1246"><span class="linenum">1246</span></a>  <span class="comment"> * @category files</span>
<a name="l1247"><span class="linenum">1247</span></a>  <span class="comment"> *</span>
<a name="l1248"><span class="linenum">1248</span></a>  <span class="comment"> * @param stdClass $course the course object</span>
<a name="l1249"><span class="linenum">1249</span></a>  <span class="comment"> * @param stdClass $cm the course module object</span>
<a name="l1250"><span class="linenum">1250</span></a>  <span class="comment"> * @param stdClass $context the workshop's context</span>
<a name="l1251"><span class="linenum">1251</span></a>  <span class="comment"> * @param string $filearea the name of the file area</span>
<a name="l1252"><span class="linenum">1252</span></a>  <span class="comment"> * @param array $args extra arguments (itemid, path)</span>
<a name="l1253"><span class="linenum">1253</span></a>  <span class="comment"> * @param bool $forcedownload whether or not force download</span>
<a name="l1254"><span class="linenum">1254</span></a>  <span class="comment"> * @param array $options additional options affecting the file serving</span>
<a name="l1255"><span class="linenum">1255</span></a>  <span class="comment"> * @return bool false if the file not found, just send the file otherwise and do not return anything</span>
<a name="l1256"><span class="linenum">1256</span></a>  <span class="comment"> */</span>
<a name="l1257"><span class="linenum">1257</span></a>  function <a class="function" onClick="logFunction('workshop_pluginfile')" href="../../_functions/workshop_pluginfile.html" onMouseOver="funcPopup(event,'workshop_pluginfile')">workshop_pluginfile</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, array <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>=array()) {
<a name="l1258"><span class="linenum">1258</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l1259"><span class="linenum">1259</span></a>  
<a name="l1260"><span class="linenum">1260</span></a>      if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/contextlevel.html">contextlevel</a> != <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>) {
<a name="l1261"><span class="linenum">1261</span></a>          return false;
<a name="l1262"><span class="linenum">1262</span></a>      }
<a name="l1263"><span class="linenum">1263</span></a>  
<a name="l1264"><span class="linenum">1264</span></a>      <a class="function" onClick="logFunction('require_login')" href="../../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, true, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l1265"><span class="linenum">1265</span></a>  
<a name="l1266"><span class="linenum">1266</span></a>      if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'instructauthors') {
<a name="l1267"><span class="linenum">1267</span></a>          <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>); <span class="comment">// itemid is ignored here</span>
<a name="l1268"><span class="linenum">1268</span></a>          <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l1269"><span class="linenum">1269</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a> = &quot;/<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>/mod_workshop/<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>/0/<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>&quot;;
<a name="l1270"><span class="linenum">1270</span></a>  
<a name="l1271"><span class="linenum">1271</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1272"><span class="linenum">1272</span></a>          if (!<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file_by_hash')" href="../../_functions/get_file_by_hash.html" onMouseOver="funcPopup(event,'get_file_by_hash')">get_file_by_hash</a>(<a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a>)) or <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l1273"><span class="linenum">1273</span></a>              <a class="function" onClick="logFunction('send_file_not_found')" href="../../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1274"><span class="linenum">1274</span></a>          }
<a name="l1275"><span class="linenum">1275</span></a>  
<a name="l1276"><span class="linenum">1276</span></a>  <span class="comment">        // finally send the file</span>
<a name="l1277"><span class="linenum">1277</span></a>          <a class="function" onClick="logFunction('send_stored_file')" href="../../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>, null, 0, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l1278"><span class="linenum">1278</span></a>  
<a name="l1279"><span class="linenum">1279</span></a>      } else if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'instructreviewers') {
<a name="l1280"><span class="linenum">1280</span></a>          <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>); <span class="comment">// itemid is ignored here</span>
<a name="l1281"><span class="linenum">1281</span></a>          <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l1282"><span class="linenum">1282</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a> = &quot;/<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>/mod_workshop/<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>/0/<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>&quot;;
<a name="l1283"><span class="linenum">1283</span></a>  
<a name="l1284"><span class="linenum">1284</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1285"><span class="linenum">1285</span></a>          if (!<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file_by_hash')" href="../../_functions/get_file_by_hash.html" onMouseOver="funcPopup(event,'get_file_by_hash')">get_file_by_hash</a>(<a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a>)) or <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l1286"><span class="linenum">1286</span></a>              <a class="function" onClick="logFunction('send_file_not_found')" href="../../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1287"><span class="linenum">1287</span></a>          }
<a name="l1288"><span class="linenum">1288</span></a>  
<a name="l1289"><span class="linenum">1289</span></a>  <span class="comment">        // finally send the file</span>
<a name="l1290"><span class="linenum">1290</span></a>          <a class="function" onClick="logFunction('send_stored_file')" href="../../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>, null, 0, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l1291"><span class="linenum">1291</span></a>  
<a name="l1292"><span class="linenum">1292</span></a>      } else if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'conclusion') {
<a name="l1293"><span class="linenum">1293</span></a>          <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>); <span class="comment">// itemid is ignored here</span>
<a name="l1294"><span class="linenum">1294</span></a>          <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l1295"><span class="linenum">1295</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a> = &quot;/<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>/mod_workshop/<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>/0/<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>&quot;;
<a name="l1296"><span class="linenum">1296</span></a>  
<a name="l1297"><span class="linenum">1297</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1298"><span class="linenum">1298</span></a>          if (!<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file_by_hash')" href="../../_functions/get_file_by_hash.html" onMouseOver="funcPopup(event,'get_file_by_hash')">get_file_by_hash</a>(<a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a>)) or <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l1299"><span class="linenum">1299</span></a>              <a class="function" onClick="logFunction('send_file_not_found')" href="../../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1300"><span class="linenum">1300</span></a>          }
<a name="l1301"><span class="linenum">1301</span></a>  
<a name="l1302"><span class="linenum">1302</span></a>  <span class="comment">        // finally send the file</span>
<a name="l1303"><span class="linenum">1303</span></a>          <a class="function" onClick="logFunction('send_stored_file')" href="../../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>, null, 0, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l1304"><span class="linenum">1304</span></a>  
<a name="l1305"><span class="linenum">1305</span></a>      } else if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'submission_content' or <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'submission_attachment') {
<a name="l1306"><span class="linenum">1306</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a> = (int)<a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l1307"><span class="linenum">1307</span></a>          if (!<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('workshop', array('id' =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>))) {
<a name="l1308"><span class="linenum">1308</span></a>              return false;
<a name="l1309"><span class="linenum">1309</span></a>          }
<a name="l1310"><span class="linenum">1310</span></a>          if (!<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('workshop_submissions', array('id' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, 'workshopid' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l1311"><span class="linenum">1311</span></a>              return false;
<a name="l1312"><span class="linenum">1312</span></a>          }
<a name="l1313"><span class="linenum">1313</span></a>  
<a name="l1314"><span class="linenum">1314</span></a>  <span class="comment">        // make sure the user is allowed to see the file</span>
<a name="l1315"><span class="linenum">1315</span></a>          if (empty(<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('example')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/example.html">example</a>)) {
<a name="l1316"><span class="linenum">1316</span></a>              if (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> != <a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('authorid')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a>) {
<a name="l1317"><span class="linenum">1317</span></a>                  if (<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('published')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/published.html">published</a> == 1 and <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('phase')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/phase.html">phase</a> == 50
<a name="l1318"><span class="linenum">1318</span></a>                          and <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewpublishedsubmissions', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1319"><span class="linenum">1319</span></a>  <span class="comment">                    // Published submission, we can go (workshop does not take the group mode</span>
<a name="l1320"><span class="linenum">1320</span></a>  <span class="comment">                    // into account in this case yet).</span>
<a name="l1321"><span class="linenum">1321</span></a>                  } else if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('workshop_assessments', array('submissionid' =&gt; <a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'reviewerid' =&gt; <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l1322"><span class="linenum">1322</span></a>                      if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewallsubmissions', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1323"><span class="linenum">1323</span></a>                          <a class="function" onClick="logFunction('send_file_not_found')" href="../../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1324"><span class="linenum">1324</span></a>                      } else {
<a name="l1325"><span class="linenum">1325</span></a>                          <a class="var it8230" onMouseOver="hilite(8230)" onMouseOut="lolite()" onClick="logVariable('gmode')" href="../../_variables/gmode.html">$gmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l1326"><span class="linenum">1326</span></a>                          if (<a class="var it8230" onMouseOver="hilite(8230)" onMouseOut="lolite()" onClick="logVariable('gmode')" href="../../_variables/gmode.html">$gmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment">                            // check there is at least one common group with both the $USER</span>
<a name="l1328"><span class="linenum">1328</span></a>  <span class="comment">                            // and the submission author</span>
<a name="l1329"><span class="linenum">1329</span></a>                              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT 'x'
<a name="l1330"><span class="linenum">1330</span></a>                                        FROM {workshop_submissions} s
<a name="l1331"><span class="linenum">1331</span></a>                                        JOIN {user} a <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (a.id = s.authorid)
<a name="l1332"><span class="linenum">1332</span></a>                                        JOIN {groups_members} agm <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (a.id = agm.userid)
<a name="l1333"><span class="linenum">1333</span></a>                                        JOIN {user} u <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (u.id = ?)
<a name="l1334"><span class="linenum">1334</span></a>                                        JOIN {groups_members} ugm <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (u.id = ugm.userid)
<a name="l1335"><span class="linenum">1335</span></a>                                       WHERE s.example = 0 AND s.workshopid = ? AND s.id = ? AND agm.groupid = ugm.groupid&quot;;
<a name="l1336"><span class="linenum">1336</span></a>                              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1337"><span class="linenum">1337</span></a>                              if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l1338"><span class="linenum">1338</span></a>                                  <a class="function" onClick="logFunction('send_file_not_found')" href="../../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1339"><span class="linenum">1339</span></a>                              }
<a name="l1340"><span class="linenum">1340</span></a>                          }
<a name="l1341"><span class="linenum">1341</span></a>                      }
<a name="l1342"><span class="linenum">1342</span></a>                  }
<a name="l1343"><span class="linenum">1343</span></a>              }
<a name="l1344"><span class="linenum">1344</span></a>          }
<a name="l1345"><span class="linenum">1345</span></a>  
<a name="l1346"><span class="linenum">1346</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1347"><span class="linenum">1347</span></a>          <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l1348"><span class="linenum">1348</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a> = &quot;/<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>/mod_workshop/<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>/<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>/<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>&quot;;
<a name="l1349"><span class="linenum">1349</span></a>          if (!<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file_by_hash')" href="../../_functions/get_file_by_hash.html" onMouseOver="funcPopup(event,'get_file_by_hash')">get_file_by_hash</a>(<a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a>)) or <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l1350"><span class="linenum">1350</span></a>              return false;
<a name="l1351"><span class="linenum">1351</span></a>          }
<a name="l1352"><span class="linenum">1352</span></a>  <span class="comment">        // finally send the file</span>
<a name="l1353"><span class="linenum">1353</span></a>  <span class="comment">        // these files are uploaded by students - forcing download for security reasons</span>
<a name="l1354"><span class="linenum">1354</span></a>          <a class="function" onClick="logFunction('send_stored_file')" href="../../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>, 0, 0, true, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l1355"><span class="linenum">1355</span></a>  
<a name="l1356"><span class="linenum">1356</span></a>      } else if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'overallfeedback_content' or <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'overallfeedback_attachment') {
<a name="l1357"><span class="linenum">1357</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a> = (int)<a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l1358"><span class="linenum">1358</span></a>          if (!<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('workshop', array('id' =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>))) {
<a name="l1359"><span class="linenum">1359</span></a>              return false;
<a name="l1360"><span class="linenum">1360</span></a>          }
<a name="l1361"><span class="linenum">1361</span></a>          if (!<a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('workshop_assessments', array('id' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>))) {
<a name="l1362"><span class="linenum">1362</span></a>              return false;
<a name="l1363"><span class="linenum">1363</span></a>          }
<a name="l1364"><span class="linenum">1364</span></a>          if (!<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('workshop_submissions', array('id' =&gt; <a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('submissionid')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/submissionid.html">submissionid</a>, 'workshopid' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l1365"><span class="linenum">1365</span></a>              return false;
<a name="l1366"><span class="linenum">1366</span></a>          }
<a name="l1367"><span class="linenum">1367</span></a>  
<a name="l1368"><span class="linenum">1368</span></a>          if (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('reviewerid')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/reviewerid.html">reviewerid</a>) {
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment">            // Reviewers can always see their own files.</span>
<a name="l1370"><span class="linenum">1370</span></a>          } else if (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('authorid')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/authorid.html">authorid</a> and <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('phase')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/phase.html">phase</a> == 50) {
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment">            // Authors can see the feedback once the workshop is closed.</span>
<a name="l1372"><span class="linenum">1372</span></a>          } else if (!empty(<a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('example')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/example.html">example</a>) and <a class="var it4175" onMouseOver="hilite(4175)" onMouseOut="lolite()" onClick="logVariable('assessment')" href="../../_variables/assessment.html">$assessment</a>-&gt;<a onClick="logVariable('weight')" class="var it39888" onMouseOver="hilite(39888)" onMouseOut="lolite()" href="../../_variables/weight.html">weight</a> == 1) {
<a name="l1373"><span class="linenum">1373</span></a>  <span class="comment">            // Reference assessments of example submissions can be displayed.</span>
<a name="l1374"><span class="linenum">1374</span></a>          } else if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewallassessments', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1375"><span class="linenum">1375</span></a>              <a class="function" onClick="logFunction('send_file_not_found')" href="../../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1376"><span class="linenum">1376</span></a>          } else {
<a name="l1377"><span class="linenum">1377</span></a>              <a class="var it8230" onMouseOver="hilite(8230)" onMouseOut="lolite()" onClick="logVariable('gmode')" href="../../_variables/gmode.html">$gmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l1378"><span class="linenum">1378</span></a>              if (<a class="var it8230" onMouseOver="hilite(8230)" onMouseOut="lolite()" onClick="logVariable('gmode')" href="../../_variables/gmode.html">$gmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1379"><span class="linenum">1379</span></a>  <span class="comment">                // Check there is at least one common group with both the $USER</span>
<a name="l1380"><span class="linenum">1380</span></a>  <span class="comment">                // and the submission author.</span>
<a name="l1381"><span class="linenum">1381</span></a>                  <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT 'x'
<a name="l1382"><span class="linenum">1382</span></a>                            FROM {workshop_submissions} s
<a name="l1383"><span class="linenum">1383</span></a>                            JOIN {user} a <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (a.id = s.authorid)
<a name="l1384"><span class="linenum">1384</span></a>                            JOIN {groups_members} agm <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (a.id = agm.userid)
<a name="l1385"><span class="linenum">1385</span></a>                            JOIN {user} u <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (u.id = ?)
<a name="l1386"><span class="linenum">1386</span></a>                            JOIN {groups_members} ugm <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (u.id = ugm.userid)
<a name="l1387"><span class="linenum">1387</span></a>                           WHERE s.example = 0 AND s.workshopid = ? AND s.id = ? AND agm.groupid = ugm.groupid&quot;;
<a name="l1388"><span class="linenum">1388</span></a>                  <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it4364" onMouseOver="hilite(4364)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../_variables/submission.html">$submission</a>-&gt;<a onClick="logVariable('id')" class="var it39626" onMouseOver="hilite(39626)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1389"><span class="linenum">1389</span></a>                  if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l1390"><span class="linenum">1390</span></a>                      <a class="function" onClick="logFunction('send_file_not_found')" href="../../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1391"><span class="linenum">1391</span></a>                  }
<a name="l1392"><span class="linenum">1392</span></a>              }
<a name="l1393"><span class="linenum">1393</span></a>          }
<a name="l1394"><span class="linenum">1394</span></a>  
<a name="l1395"><span class="linenum">1395</span></a>          <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1396"><span class="linenum">1396</span></a>          <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l1397"><span class="linenum">1397</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a> = &quot;/<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>/mod_workshop/<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>/<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>/<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>&quot;;
<a name="l1398"><span class="linenum">1398</span></a>          if (!<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file_by_hash')" href="../../_functions/get_file_by_hash.html" onMouseOver="funcPopup(event,'get_file_by_hash')">get_file_by_hash</a>(<a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a>)) or <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l1399"><span class="linenum">1399</span></a>              return false;
<a name="l1400"><span class="linenum">1400</span></a>          }
<a name="l1401"><span class="linenum">1401</span></a>  <span class="comment">        // finally send the file</span>
<a name="l1402"><span class="linenum">1402</span></a>  <span class="comment">        // these files are uploaded by students - forcing download for security reasons</span>
<a name="l1403"><span class="linenum">1403</span></a>          <a class="function" onClick="logFunction('send_stored_file')" href="../../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>, 0, 0, true, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l1404"><span class="linenum">1404</span></a>      }
<a name="l1405"><span class="linenum">1405</span></a>  
<a name="l1406"><span class="linenum">1406</span></a>      return false;
<a name="l1407"><span class="linenum">1407</span></a>  }
<a name="l1408"><span class="linenum">1408</span></a>  
<a name="l1409"><span class="linenum">1409</span></a>  <span class="comment">/**</span>
<a name="l1410"><span class="linenum">1410</span></a>  <span class="comment"> * File browsing support for workshop file areas</span>
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment"> *</span>
<a name="l1412"><span class="linenum">1412</span></a>  <span class="comment"> * @package  mod_workshop</span>
<a name="l1413"><span class="linenum">1413</span></a>  <span class="comment"> * @category files</span>
<a name="l1414"><span class="linenum">1414</span></a>  <span class="comment"> *</span>
<a name="l1415"><span class="linenum">1415</span></a>  <span class="comment"> * @param file_browser $browser</span>
<a name="l1416"><span class="linenum">1416</span></a>  <span class="comment"> * @param array $areas</span>
<a name="l1417"><span class="linenum">1417</span></a>  <span class="comment"> * @param stdClass $course</span>
<a name="l1418"><span class="linenum">1418</span></a>  <span class="comment"> * @param stdClass $cm</span>
<a name="l1419"><span class="linenum">1419</span></a>  <span class="comment"> * @param stdClass $context</span>
<a name="l1420"><span class="linenum">1420</span></a>  <span class="comment"> * @param string $filearea</span>
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment"> * @param int $itemid</span>
<a name="l1422"><span class="linenum">1422</span></a>  <span class="comment"> * @param string $filepath</span>
<a name="l1423"><span class="linenum">1423</span></a>  <span class="comment"> * @param string $filename</span>
<a name="l1424"><span class="linenum">1424</span></a>  <span class="comment"> * @return file_info instance or null if not found</span>
<a name="l1425"><span class="linenum">1425</span></a>  <span class="comment"> */</span>
<a name="l1426"><span class="linenum">1426</span></a>  function <a class="function" onClick="logFunction('workshop_get_file_info')" href="../../_functions/workshop_get_file_info.html" onMouseOver="funcPopup(event,'workshop_get_file_info')">workshop_get_file_info</a>(<a class="var it577" onMouseOver="hilite(577)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>, <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>) {
<a name="l1427"><span class="linenum">1427</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l1428"><span class="linenum">1428</span></a>  
<a name="l1429"><span class="linenum">1429</span></a>  <span class="comment">    /** @var array internal cache for author names */</span>
<a name="l1430"><span class="linenum">1430</span></a>      static <a class="var it11509" onMouseOver="hilite(11509)" onMouseOut="lolite()" onClick="logVariable('submissionauthors')" href="../../_variables/submissionauthors.html">$submissionauthors</a> = array();
<a name="l1431"><span class="linenum">1431</span></a>  
<a name="l1432"><span class="linenum">1432</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1433"><span class="linenum">1433</span></a>  
<a name="l1434"><span class="linenum">1434</span></a>      if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'submission_content' or <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'submission_attachment') {
<a name="l1435"><span class="linenum">1435</span></a>  
<a name="l1436"><span class="linenum">1436</span></a>          if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewallsubmissions', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1437"><span class="linenum">1437</span></a>              return null;
<a name="l1438"><span class="linenum">1438</span></a>          }
<a name="l1439"><span class="linenum">1439</span></a>  
<a name="l1440"><span class="linenum">1440</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>)) {
<a name="l1441"><span class="linenum">1441</span></a>  <span class="comment">            // no itemid (submissionid) passed, display the list of all submissions</span>
<a name="l1442"><span class="linenum">1442</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/workshop/fileinfolib.php.html">/mod/workshop/fileinfolib.php</a>');
<a name="l1443"><span class="linenum">1443</span></a>              return <span class="keyword">new </span><a class="class" onClick="logClass('workshop_file_info_submissions_container')" href="../../_classes/workshop_file_info_submissions_container.html" onMouseOver="classPopup(event,'workshop_file_info_submissions_container')">workshop_file_info_submissions_container</a>(<a class="var it577" onMouseOver="hilite(577)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>, <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>);
<a name="l1444"><span class="linenum">1444</span></a>          }
<a name="l1445"><span class="linenum">1445</span></a>  
<a name="l1446"><span class="linenum">1446</span></a>  <span class="comment">        // make sure the user can see the particular submission in separate groups mode</span>
<a name="l1447"><span class="linenum">1447</span></a>          <a class="var it8230" onMouseOver="hilite(8230)" onMouseOut="lolite()" onClick="logVariable('gmode')" href="../../_variables/gmode.html">$gmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l1448"><span class="linenum">1448</span></a>  
<a name="l1449"><span class="linenum">1449</span></a>          if (<a class="var it8230" onMouseOver="hilite(8230)" onMouseOut="lolite()" onClick="logVariable('gmode')" href="../../_variables/gmode.html">$gmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1450"><span class="linenum">1450</span></a>  <span class="comment">            // check there is at least one common group with both the $USER</span>
<a name="l1451"><span class="linenum">1451</span></a>  <span class="comment">            // and the submission author (this is not expected to be a frequent</span>
<a name="l1452"><span class="linenum">1452</span></a>  <span class="comment">            // usecase so we can live with pretty ineffective one query per submission here...)</span>
<a name="l1453"><span class="linenum">1453</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT 'x'
<a name="l1454"><span class="linenum">1454</span></a>                        FROM {workshop_submissions} s
<a name="l1455"><span class="linenum">1455</span></a>                        JOIN {user} a <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (a.id = s.authorid)
<a name="l1456"><span class="linenum">1456</span></a>                        JOIN {groups_members} agm <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (a.id = agm.userid)
<a name="l1457"><span class="linenum">1457</span></a>                        JOIN {user} u <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (u.id = ?)
<a name="l1458"><span class="linenum">1458</span></a>                        JOIN {groups_members} ugm <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (u.id = ugm.userid)
<a name="l1459"><span class="linenum">1459</span></a>                       WHERE s.example = 0 AND s.workshopid = ? AND s.id = ? AND agm.groupid = ugm.groupid&quot;;
<a name="l1460"><span class="linenum">1460</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>);
<a name="l1461"><span class="linenum">1461</span></a>              if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l1462"><span class="linenum">1462</span></a>                  return null;
<a name="l1463"><span class="linenum">1463</span></a>              }
<a name="l1464"><span class="linenum">1464</span></a>          }
<a name="l1465"><span class="linenum">1465</span></a>  
<a name="l1466"><span class="linenum">1466</span></a>  <span class="comment">        // we are inside some particular submission container</span>
<a name="l1467"><span class="linenum">1467</span></a>  
<a name="l1468"><span class="linenum">1468</span></a>          <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>) ? '/' : <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>;
<a name="l1469"><span class="linenum">1469</span></a>          <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>) ? '.' : <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>;
<a name="l1470"><span class="linenum">1470</span></a>  
<a name="l1471"><span class="linenum">1471</span></a>          if (!<a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_workshop', <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>, <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>)) {
<a name="l1472"><span class="linenum">1472</span></a>              if (<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a> === '/' and <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> === '.') {
<a name="l1473"><span class="linenum">1473</span></a>                  <a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a> = <span class="keyword">new </span><a class="class" onClick="logClass('virtual_root_file')" href="../../_classes/virtual_root_file.html" onMouseOver="classPopup(event,'virtual_root_file')">virtual_root_file</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_workshop', <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>);
<a name="l1474"><span class="linenum">1474</span></a>              } else {
<a name="l1475"><span class="linenum">1475</span></a>  <span class="comment">                // not found</span>
<a name="l1476"><span class="linenum">1476</span></a>                  return null;
<a name="l1477"><span class="linenum">1477</span></a>              }
<a name="l1478"><span class="linenum">1478</span></a>          }
<a name="l1479"><span class="linenum">1479</span></a>  
<a name="l1480"><span class="linenum">1480</span></a>  <span class="comment">        // Checks to see if the user can manage files or is the owner.</span>
<a name="l1481"><span class="linenum">1481</span></a>  <span class="comment">        // TODO MDL-33805 - Do not use userid here and move the capability check above.</span>
<a name="l1482"><span class="linenum">1482</span></a>          if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:managefiles', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) &amp;&amp; <a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a>-&gt;<a class="function" onClick="logFunction('get_userid')" href="../../_functions/get_userid.html" onMouseOver="funcPopup(event,'get_userid')">get_userid</a>() != <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l1483"><span class="linenum">1483</span></a>              return null;
<a name="l1484"><span class="linenum">1484</span></a>          }
<a name="l1485"><span class="linenum">1485</span></a>  
<a name="l1486"><span class="linenum">1486</span></a>  <span class="comment">        // let us display the author's name instead of itemid (submission id)</span>
<a name="l1487"><span class="linenum">1487</span></a>  
<a name="l1488"><span class="linenum">1488</span></a>          if (isset(<a class="var it11509" onMouseOver="hilite(11509)" onMouseOut="lolite()" onClick="logVariable('submissionauthors')" href="../../_variables/submissionauthors.html">$submissionauthors</a>[<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>])) {
<a name="l1489"><span class="linenum">1489</span></a>              <a class="var it1707" onMouseOver="hilite(1707)" onMouseOut="lolite()" onClick="logVariable('topvisiblename')" href="../../_variables/topvisiblename.html">$topvisiblename</a> = <a class="var it11509" onMouseOver="hilite(11509)" onMouseOut="lolite()" onClick="logVariable('submissionauthors')" href="../../_variables/submissionauthors.html">$submissionauthors</a>[<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>];
<a name="l1490"><span class="linenum">1490</span></a>  
<a name="l1491"><span class="linenum">1491</span></a>          } else {
<a name="l1492"><span class="linenum">1492</span></a>  
<a name="l1493"><span class="linenum">1493</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT s.id, u.lastname, u.firstname
<a name="l1494"><span class="linenum">1494</span></a>                        FROM {workshop_submissions} s
<a name="l1495"><span class="linenum">1495</span></a>                        JOIN {user} u <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (s.authorid = u.id)
<a name="l1496"><span class="linenum">1496</span></a>                       WHERE s.example = 0 AND s.workshopid = ?&quot;;
<a name="l1497"><span class="linenum">1497</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>);
<a name="l1498"><span class="linenum">1498</span></a>              <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1499"><span class="linenum">1499</span></a>  
<a name="l1500"><span class="linenum">1500</span></a>              foreach (<a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> as <a class="var it11510" onMouseOver="hilite(11510)" onMouseOut="lolite()" onClick="logVariable('submissionauthor')" href="../../_variables/submissionauthor.html">$submissionauthor</a>) {
<a name="l1501"><span class="linenum">1501</span></a>                  <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it11510" onMouseOver="hilite(11510)" onMouseOut="lolite()" onClick="logVariable('submissionauthor')" href="../../_variables/submissionauthor.html">$submissionauthor</a>)); <span class="comment">// this is generally not unique...</span>
<a name="l1502"><span class="linenum">1502</span></a>                  <a class="var it11509" onMouseOver="hilite(11509)" onMouseOut="lolite()" onClick="logVariable('submissionauthors')" href="../../_variables/submissionauthors.html">$submissionauthors</a>[<a class="var it11510" onMouseOver="hilite(11510)" onMouseOut="lolite()" onClick="logVariable('submissionauthor')" href="../../_variables/submissionauthor.html">$submissionauthor</a>-&gt;<a onClick="logVariable('id')" class="var it40214" onMouseOver="hilite(40214)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>;
<a name="l1503"><span class="linenum">1503</span></a>              }
<a name="l1504"><span class="linenum">1504</span></a>              <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1505"><span class="linenum">1505</span></a>  
<a name="l1506"><span class="linenum">1506</span></a>              if (!isset(<a class="var it11509" onMouseOver="hilite(11509)" onMouseOut="lolite()" onClick="logVariable('submissionauthors')" href="../../_variables/submissionauthors.html">$submissionauthors</a>[<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>])) {
<a name="l1507"><span class="linenum">1507</span></a>  <span class="comment">                // should not happen</span>
<a name="l1508"><span class="linenum">1508</span></a>                  return null;
<a name="l1509"><span class="linenum">1509</span></a>              } else {
<a name="l1510"><span class="linenum">1510</span></a>                  <a class="var it1707" onMouseOver="hilite(1707)" onMouseOut="lolite()" onClick="logVariable('topvisiblename')" href="../../_variables/topvisiblename.html">$topvisiblename</a> = <a class="var it11509" onMouseOver="hilite(11509)" onMouseOut="lolite()" onClick="logVariable('submissionauthors')" href="../../_variables/submissionauthors.html">$submissionauthors</a>[<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>];
<a name="l1511"><span class="linenum">1511</span></a>              }
<a name="l1512"><span class="linenum">1512</span></a>          }
<a name="l1513"><span class="linenum">1513</span></a>  
<a name="l1514"><span class="linenum">1514</span></a>          <a class="var it1695" onMouseOver="hilite(1695)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../_variables/urlbase.html">$urlbase</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> . '<a class="filename" href="../../pluginfile.php.html">/pluginfile.php</a>';
<a name="l1515"><span class="linenum">1515</span></a>  <span class="comment">        // do not allow manual modification of any files!</span>
<a name="l1516"><span class="linenum">1516</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('file_info_stored')" href="../../_classes/file_info_stored.html" onMouseOver="classPopup(event,'file_info_stored')">file_info_stored</a>(<a class="var it577" onMouseOver="hilite(577)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a>, <a class="var it1695" onMouseOver="hilite(1695)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../_variables/urlbase.html">$urlbase</a>, <a class="var it1707" onMouseOver="hilite(1707)" onMouseOut="lolite()" onClick="logVariable('topvisiblename')" href="../../_variables/topvisiblename.html">$topvisiblename</a>, true, true, false, false);
<a name="l1517"><span class="linenum">1517</span></a>      }
<a name="l1518"><span class="linenum">1518</span></a>  
<a name="l1519"><span class="linenum">1519</span></a>      if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'overallfeedback_content' or <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'overallfeedback_attachment') {
<a name="l1520"><span class="linenum">1520</span></a>  
<a name="l1521"><span class="linenum">1521</span></a>          if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:viewallassessments', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1522"><span class="linenum">1522</span></a>              return null;
<a name="l1523"><span class="linenum">1523</span></a>          }
<a name="l1524"><span class="linenum">1524</span></a>  
<a name="l1525"><span class="linenum">1525</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>)) {
<a name="l1526"><span class="linenum">1526</span></a>  <span class="comment">            // No itemid (assessmentid) passed, display the list of all assessments.</span>
<a name="l1527"><span class="linenum">1527</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/workshop/fileinfolib.php.html">/mod/workshop/fileinfolib.php</a>');
<a name="l1528"><span class="linenum">1528</span></a>              return <span class="keyword">new </span><a class="class" onClick="logClass('workshop_file_info_overallfeedback_container')" href="../../_classes/workshop_file_info_overallfeedback_container.html" onMouseOver="classPopup(event,'workshop_file_info_overallfeedback_container')">workshop_file_info_overallfeedback_container</a>(<a class="var it577" onMouseOver="hilite(577)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>, <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>);
<a name="l1529"><span class="linenum">1529</span></a>          }
<a name="l1530"><span class="linenum">1530</span></a>  
<a name="l1531"><span class="linenum">1531</span></a>  <span class="comment">        // Make sure the user can see the particular assessment in separate groups mode.</span>
<a name="l1532"><span class="linenum">1532</span></a>          <a class="var it8230" onMouseOver="hilite(8230)" onMouseOut="lolite()" onClick="logVariable('gmode')" href="../../_variables/gmode.html">$gmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l1533"><span class="linenum">1533</span></a>          if (<a class="var it8230" onMouseOver="hilite(8230)" onMouseOut="lolite()" onClick="logVariable('gmode')" href="../../_variables/gmode.html">$gmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1534"><span class="linenum">1534</span></a>  <span class="comment">            // Check there is at least one common group with both the $USER</span>
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment">            // and the submission author.</span>
<a name="l1536"><span class="linenum">1536</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT 'x'
<a name="l1537"><span class="linenum">1537</span></a>                        FROM {workshop_submissions} s
<a name="l1538"><span class="linenum">1538</span></a>                        JOIN {user} a <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (a.id = s.authorid)
<a name="l1539"><span class="linenum">1539</span></a>                        JOIN {groups_members} agm <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (a.id = agm.userid)
<a name="l1540"><span class="linenum">1540</span></a>                        JOIN {user} u <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (u.id = ?)
<a name="l1541"><span class="linenum">1541</span></a>                        JOIN {groups_members} ugm <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (u.id = ugm.userid)
<a name="l1542"><span class="linenum">1542</span></a>                       WHERE s.example = 0 AND s.workshopid = ? AND s.id = ? AND agm.groupid = ugm.groupid&quot;;
<a name="l1543"><span class="linenum">1543</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>);
<a name="l1544"><span class="linenum">1544</span></a>              if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l1545"><span class="linenum">1545</span></a>                  return null;
<a name="l1546"><span class="linenum">1546</span></a>              }
<a name="l1547"><span class="linenum">1547</span></a>          }
<a name="l1548"><span class="linenum">1548</span></a>  
<a name="l1549"><span class="linenum">1549</span></a>  <span class="comment">        // We are inside a particular assessment container.</span>
<a name="l1550"><span class="linenum">1550</span></a>          <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>) ? '/' : <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>;
<a name="l1551"><span class="linenum">1551</span></a>          <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>) ? '.' : <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>;
<a name="l1552"><span class="linenum">1552</span></a>  
<a name="l1553"><span class="linenum">1553</span></a>          if (!<a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_workshop', <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>, <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>)) {
<a name="l1554"><span class="linenum">1554</span></a>              if (<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a> === '/' and <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> === '.') {
<a name="l1555"><span class="linenum">1555</span></a>                  <a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a> = <span class="keyword">new </span><a class="class" onClick="logClass('virtual_root_file')" href="../../_classes/virtual_root_file.html" onMouseOver="classPopup(event,'virtual_root_file')">virtual_root_file</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_workshop', <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>);
<a name="l1556"><span class="linenum">1556</span></a>              } else {
<a name="l1557"><span class="linenum">1557</span></a>  <span class="comment">                // Not found</span>
<a name="l1558"><span class="linenum">1558</span></a>                  return null;
<a name="l1559"><span class="linenum">1559</span></a>              }
<a name="l1560"><span class="linenum">1560</span></a>          }
<a name="l1561"><span class="linenum">1561</span></a>  
<a name="l1562"><span class="linenum">1562</span></a>  <span class="comment">        // Check to see if the user can manage files or is the owner.</span>
<a name="l1563"><span class="linenum">1563</span></a>          if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:managefiles', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) and <a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a>-&gt;<a class="function" onClick="logFunction('get_userid')" href="../../_functions/get_userid.html" onMouseOver="funcPopup(event,'get_userid')">get_userid</a>() != <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l1564"><span class="linenum">1564</span></a>              return null;
<a name="l1565"><span class="linenum">1565</span></a>          }
<a name="l1566"><span class="linenum">1566</span></a>  
<a name="l1567"><span class="linenum">1567</span></a>          <a class="var it1695" onMouseOver="hilite(1695)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../_variables/urlbase.html">$urlbase</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a> . '<a class="filename" href="../../pluginfile.php.html">/pluginfile.php</a>';
<a name="l1568"><span class="linenum">1568</span></a>  
<a name="l1569"><span class="linenum">1569</span></a>  <span class="comment">        // Do not allow manual modification of any files.</span>
<a name="l1570"><span class="linenum">1570</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('file_info_stored')" href="../../_classes/file_info_stored.html" onMouseOver="classPopup(event,'file_info_stored')">file_info_stored</a>(<a class="var it577" onMouseOver="hilite(577)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a>, <a class="var it1695" onMouseOver="hilite(1695)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../_variables/urlbase.html">$urlbase</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, true, true, false, false);
<a name="l1571"><span class="linenum">1571</span></a>      }
<a name="l1572"><span class="linenum">1572</span></a>  
<a name="l1573"><span class="linenum">1573</span></a>      if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> == 'instructauthors' or <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> == 'instructreviewers' or <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> == 'conclusion') {
<a name="l1574"><span class="linenum">1574</span></a>  <span class="comment">        // always only itemid 0</span>
<a name="l1575"><span class="linenum">1575</span></a>  
<a name="l1576"><span class="linenum">1576</span></a>          <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>) ? '/' : <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>;
<a name="l1577"><span class="linenum">1577</span></a>          <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>) ? '.' : <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>;
<a name="l1578"><span class="linenum">1578</span></a>  
<a name="l1579"><span class="linenum">1579</span></a>          <a class="var it1695" onMouseOver="hilite(1695)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../_variables/urlbase.html">$urlbase</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'<a class="filename" href="../../pluginfile.php.html">/pluginfile.php</a>';
<a name="l1580"><span class="linenum">1580</span></a>          if (!<a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_workshop', <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, 0, <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>, <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>)) {
<a name="l1581"><span class="linenum">1581</span></a>              if (<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a> === '/' and <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> === '.') {
<a name="l1582"><span class="linenum">1582</span></a>                  <a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a> = <span class="keyword">new </span><a class="class" onClick="logClass('virtual_root_file')" href="../../_classes/virtual_root_file.html" onMouseOver="classPopup(event,'virtual_root_file')">virtual_root_file</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_workshop', <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, 0);
<a name="l1583"><span class="linenum">1583</span></a>              } else {
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment">                // not found</span>
<a name="l1585"><span class="linenum">1585</span></a>                  return null;
<a name="l1586"><span class="linenum">1586</span></a>              }
<a name="l1587"><span class="linenum">1587</span></a>          }
<a name="l1588"><span class="linenum">1588</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('file_info_stored')" href="../../_classes/file_info_stored.html" onMouseOver="classPopup(event,'file_info_stored')">file_info_stored</a>(<a class="var it577" onMouseOver="hilite(577)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1219" onMouseOver="hilite(1219)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a>, <a class="var it1695" onMouseOver="hilite(1695)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../_variables/urlbase.html">$urlbase</a>, <a class="var it1700" onMouseOver="hilite(1700)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>[<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>], false, true, true, false);
<a name="l1589"><span class="linenum">1589</span></a>      }
<a name="l1590"><span class="linenum">1590</span></a>  }
<a name="l1591"><span class="linenum">1591</span></a>  
<a name="l1592"><span class="linenum">1592</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l1593"><span class="linenum">1593</span></a>  <span class="comment">// Navigation API                                                             //</span>
<a name="l1594"><span class="linenum">1594</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l1595"><span class="linenum">1595</span></a>  
<a name="l1596"><span class="linenum">1596</span></a>  <span class="comment">/**</span>
<a name="l1597"><span class="linenum">1597</span></a>  <span class="comment"> * Extends the global navigation tree by adding workshop nodes if there is a relevant content</span>
<a name="l1598"><span class="linenum">1598</span></a>  <span class="comment"> *</span>
<a name="l1599"><span class="linenum">1599</span></a>  <span class="comment"> * This can be called by an AJAX request so do not rely on $PAGE as it might not be set up properly.</span>
<a name="l1600"><span class="linenum">1600</span></a>  <span class="comment"> *</span>
<a name="l1601"><span class="linenum">1601</span></a>  <span class="comment"> * @param navigation_node $navref An object representing the navigation tree node of the workshop module instance</span>
<a name="l1602"><span class="linenum">1602</span></a>  <span class="comment"> * @param stdClass $course</span>
<a name="l1603"><span class="linenum">1603</span></a>  <span class="comment"> * @param stdClass $module</span>
<a name="l1604"><span class="linenum">1604</span></a>  <span class="comment"> * @param cm_info $cm</span>
<a name="l1605"><span class="linenum">1605</span></a>  <span class="comment"> */</span>
<a name="l1606"><span class="linenum">1606</span></a>  function <a class="function" onClick="logFunction('workshop_extend_navigation')" href="../../_functions/workshop_extend_navigation.html" onMouseOver="funcPopup(event,'workshop_extend_navigation')">workshop_extend_navigation</a>(navigation_node <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('navref')" href="../../_variables/navref.html">$navref</a>, stdclass <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, stdclass <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>, cm_info <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) {
<a name="l1607"><span class="linenum">1607</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1608"><span class="linenum">1608</span></a>  
<a name="l1609"><span class="linenum">1609</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:submit', <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l1610"><span class="linenum">1610</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/workshop/submission.php.html">/mod/workshop/submission.php</a>', array('cmid' =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1611"><span class="linenum">1611</span></a>          <a class="var it11511" onMouseOver="hilite(11511)" onMouseOut="lolite()" onClick="logVariable('mysubmission')" href="../../_variables/mysubmission.html">$mysubmission</a> = <a class="var it7028" onMouseOver="hilite(7028)" onMouseOut="lolite()" onClick="logVariable('navref')" href="../../_variables/navref.html">$navref</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('mysubmission', 'workshop'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>);
<a name="l1612"><span class="linenum">1612</span></a>          <a class="var it11511" onMouseOver="hilite(11511)" onMouseOut="lolite()" onClick="logVariable('mysubmission')" href="../../_variables/mysubmission.html">$mysubmission</a>-&gt;<a onClick="logVariable('mainnavonly')" class="var it40215" onMouseOver="hilite(40215)" onMouseOut="lolite()" href="../../_variables/mainnavonly.html">mainnavonly</a> = true;
<a name="l1613"><span class="linenum">1613</span></a>      }
<a name="l1614"><span class="linenum">1614</span></a>  }
<a name="l1615"><span class="linenum">1615</span></a>  
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment">/**</span>
<a name="l1617"><span class="linenum">1617</span></a>  <span class="comment"> * Extends the settings navigation with the Workshop settings</span>
<a name="l1618"><span class="linenum">1618</span></a>  <span class="comment"></span>
<a name="l1619"><span class="linenum">1619</span></a>  <span class="comment"> * This function is called when the context for the page is a workshop module. This is not called by AJAX</span>
<a name="l1620"><span class="linenum">1620</span></a>  <span class="comment"> * so it is safe to rely on the $PAGE.</span>
<a name="l1621"><span class="linenum">1621</span></a>  <span class="comment"> *</span>
<a name="l1622"><span class="linenum">1622</span></a>  <span class="comment"> * @param settings_navigation $settingsnav {@link settings_navigation}</span>
<a name="l1623"><span class="linenum">1623</span></a>  <span class="comment"> * @param navigation_node $workshopnode {@link navigation_node}</span>
<a name="l1624"><span class="linenum">1624</span></a>  <span class="comment"> */</span>
<a name="l1625"><span class="linenum">1625</span></a>  function <a class="function" onClick="logFunction('workshop_extend_settings_navigation')" href="../../_functions/workshop_extend_settings_navigation.html" onMouseOver="funcPopup(event,'workshop_extend_settings_navigation')">workshop_extend_settings_navigation</a>(settings_navigation <a class="var it1522" onMouseOver="hilite(1522)" onMouseOut="lolite()" onClick="logVariable('settingsnav')" href="../../_variables/settingsnav.html">$settingsnav</a>, navigation_node <a class="var it11513" onMouseOver="hilite(11513)" onMouseOut="lolite()" onClick="logVariable('workshopnode')" href="../../_variables/workshopnode.html">$workshopnode</a>=null) {
<a name="l1626"><span class="linenum">1626</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l1627"><span class="linenum">1627</span></a>  
<a name="l1628"><span class="linenum">1628</span></a>  <span class="comment">    //$workshopobject = $DB-&gt;get_record(&quot;workshop&quot;, array(&quot;id&quot; =&gt; $PAGE-&gt;cm-&gt;instance));</span>
<a name="l1629"><span class="linenum">1629</span></a>  
<a name="l1630"><span class="linenum">1630</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:editdimensions', <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l1631"><span class="linenum">1631</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/workshop/editform.php.html">/mod/workshop/editform.php</a>', array('cmid' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id));
<a name="l1632"><span class="linenum">1632</span></a>          <a class="var it11513" onMouseOver="hilite(11513)" onMouseOut="lolite()" onClick="logVariable('workshopnode')" href="../../_variables/workshopnode.html">$workshopnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editassessmentform', 'workshop'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="class" onClick="logClass('settings_navigation')" href="../../_classes/settings_navigation.html" onMouseOver="classPopup(event,'settings_navigation')">settings_navigation</a>::TYPE_SETTING);
<a name="l1633"><span class="linenum">1633</span></a>      }
<a name="l1634"><span class="linenum">1634</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/workshop:allocate', <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l1635"><span class="linenum">1635</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/workshop/allocation.php.html">/mod/workshop/allocation.php</a>', array('cmid' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id));
<a name="l1636"><span class="linenum">1636</span></a>          <a class="var it11513" onMouseOver="hilite(11513)" onMouseOut="lolite()" onClick="logVariable('workshopnode')" href="../../_variables/workshopnode.html">$workshopnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('allocate', 'workshop'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="class" onClick="logClass('settings_navigation')" href="../../_classes/settings_navigation.html" onMouseOver="classPopup(event,'settings_navigation')">settings_navigation</a>::TYPE_SETTING);
<a name="l1637"><span class="linenum">1637</span></a>      }
<a name="l1638"><span class="linenum">1638</span></a>  }
<a name="l1639"><span class="linenum">1639</span></a>  
<a name="l1640"><span class="linenum">1640</span></a>  <span class="comment">/**</span>
<a name="l1641"><span class="linenum">1641</span></a>  <span class="comment"> * Return a list of page types</span>
<a name="l1642"><span class="linenum">1642</span></a>  <span class="comment"> * @param string $pagetype current page type</span>
<a name="l1643"><span class="linenum">1643</span></a>  <span class="comment"> * @param stdClass $parentcontext Block's parent context</span>
<a name="l1644"><span class="linenum">1644</span></a>  <span class="comment"> * @param stdClass $currentcontext Current context of block</span>
<a name="l1645"><span class="linenum">1645</span></a>  <span class="comment"> */</span>
<a name="l1646"><span class="linenum">1646</span></a>  function <a class="function" onClick="logFunction('workshop_page_type_list')" href="../../_functions/workshop_page_type_list.html" onMouseOver="funcPopup(event,'workshop_page_type_list')">workshop_page_type_list</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../../_variables/parentcontext.html">$parentcontext</a>, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../../_variables/currentcontext.html">$currentcontext</a>) {
<a name="l1647"><span class="linenum">1647</span></a>      <a class="var it8026" onMouseOver="hilite(8026)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a> = array('mod-workshop-*'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-workshop-x', 'workshop'));
<a name="l1648"><span class="linenum">1648</span></a>      return <a class="var it8026" onMouseOver="hilite(8026)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a>;
<a name="l1649"><span class="linenum">1649</span></a>  }
<a name="l1650"><span class="linenum">1650</span></a>  
<a name="l1651"><span class="linenum">1651</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l1652"><span class="linenum">1652</span></a>  <span class="comment">// Calendar API                                                               //</span>
<a name="l1653"><span class="linenum">1653</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l1654"><span class="linenum">1654</span></a>  
<a name="l1655"><span class="linenum">1655</span></a>  <span class="comment">/**</span>
<a name="l1656"><span class="linenum">1656</span></a>  <span class="comment"> * Updates the calendar events associated to the given workshop</span>
<a name="l1657"><span class="linenum">1657</span></a>  <span class="comment"> *</span>
<a name="l1658"><span class="linenum">1658</span></a>  <span class="comment"> * @param stdClass $workshop the workshop instance record</span>
<a name="l1659"><span class="linenum">1659</span></a>  <span class="comment"> * @param int $cmid course module id</span>
<a name="l1660"><span class="linenum">1660</span></a>  <span class="comment"> */</span>
<a name="l1661"><span class="linenum">1661</span></a>  function <a class="function" onClick="logFunction('workshop_calendar_update')" href="../../_functions/workshop_calendar_update.html" onMouseOver="funcPopup(event,'workshop_calendar_update')">workshop_calendar_update</a>(stdClass <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>, <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>) {
<a name="l1662"><span class="linenum">1662</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1663"><span class="linenum">1663</span></a>  
<a name="l1664"><span class="linenum">1664</span></a>  <span class="comment">    // get the currently registered events so that we can re-use their ids</span>
<a name="l1665"><span class="linenum">1665</span></a>      <a class="var it11514" onMouseOver="hilite(11514)" onMouseOut="lolite()" onClick="logVariable('currentevents')" href="../../_variables/currentevents.html">$currentevents</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', array('modulename' =&gt; 'workshop', 'instance' =&gt; <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1666"><span class="linenum">1666</span></a>  
<a name="l1667"><span class="linenum">1667</span></a>  <span class="comment">    // the common properties for all events</span>
<a name="l1668"><span class="linenum">1668</span></a>      <a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a> = new stdClass();
<a name="l1669"><span class="linenum">1669</span></a>      <a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a>-&gt;<a onClick="logVariable('description')" class="var it40046" onMouseOver="hilite(40046)" onMouseOut="lolite()" href="../../_variables/description.html">description</a>  = <a class="function" onClick="logFunction('format_module_intro')" href="../../_functions/format_module_intro.html" onMouseOver="funcPopup(event,'format_module_intro')">format_module_intro</a>('workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>, <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, false);
<a name="l1670"><span class="linenum">1670</span></a>      <a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a>-&gt;<a onClick="logVariable('courseid')" class="var it40046" onMouseOver="hilite(40046)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>     = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('course')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>;
<a name="l1671"><span class="linenum">1671</span></a>      <a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a>-&gt;<a onClick="logVariable('groupid')" class="var it40046" onMouseOver="hilite(40046)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>      = 0;
<a name="l1672"><span class="linenum">1672</span></a>      <a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a>-&gt;<a onClick="logVariable('userid')" class="var it40046" onMouseOver="hilite(40046)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>       = 0;
<a name="l1673"><span class="linenum">1673</span></a>      <a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a>-&gt;<a onClick="logVariable('modulename')" class="var it40046" onMouseOver="hilite(40046)" onMouseOut="lolite()" href="../../_variables/modulename.html">modulename</a>   = 'workshop';
<a name="l1674"><span class="linenum">1674</span></a>      <a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a>-&gt;<a onClick="logVariable('eventtype')" class="var it40046" onMouseOver="hilite(40046)" onMouseOut="lolite()" href="../../_variables/eventtype.html">eventtype</a>    = 'pluginname';
<a name="l1675"><span class="linenum">1675</span></a>      <a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a>-&gt;<a onClick="logVariable('instance')" class="var it40046" onMouseOver="hilite(40046)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>     = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('id')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1676"><span class="linenum">1676</span></a>      <a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a>-&gt;<a onClick="logVariable('visible')" class="var it40046" onMouseOver="hilite(40046)" onMouseOut="lolite()" href="../../_variables/visible.html">visible</a>      = <a class="function" onClick="logFunction('instance_is_visible')" href="../../_functions/instance_is_visible.html" onMouseOver="funcPopup(event,'instance_is_visible')">instance_is_visible</a>('workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>);
<a name="l1677"><span class="linenum">1677</span></a>      <a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a>-&gt;<a onClick="logVariable('timeduration')" class="var it40046" onMouseOver="hilite(40046)" onMouseOut="lolite()" href="../../_variables/timeduration.html">timeduration</a> = 0;
<a name="l1678"><span class="linenum">1678</span></a>  
<a name="l1679"><span class="linenum">1679</span></a>      if (<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('submissionstart')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/submissionstart.html">submissionstart</a>) {
<a name="l1680"><span class="linenum">1680</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a>);
<a name="l1681"><span class="linenum">1681</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionstartevent', 'mod_workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('name')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l1682"><span class="linenum">1682</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timestart.html">timestart</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('submissionstart')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/submissionstart.html">submissionstart</a>;
<a name="l1683"><span class="linenum">1683</span></a>          if (<a class="var it11515" onMouseOver="hilite(11515)" onMouseOut="lolite()" onClick="logVariable('reusedevent')" href="../../_variables/reusedevent.html">$reusedevent</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it11514" onMouseOver="hilite(11514)" onMouseOut="lolite()" onClick="logVariable('currentevents')" href="../../_variables/currentevents.html">$currentevents</a>)) {
<a name="l1684"><span class="linenum">1684</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it11515" onMouseOver="hilite(11515)" onMouseOut="lolite()" onClick="logVariable('reusedevent')" href="../../_variables/reusedevent.html">$reusedevent</a>-&gt;<a onClick="logVariable('id')" class="var it40216" onMouseOver="hilite(40216)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1685"><span class="linenum">1685</span></a>          } else {
<a name="l1686"><span class="linenum">1686</span></a>  <span class="comment">            // should not be set but just in case</span>
<a name="l1687"><span class="linenum">1687</span></a>              unset(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1688"><span class="linenum">1688</span></a>          }
<a name="l1689"><span class="linenum">1689</span></a>  <span class="comment">        // update() will reuse a db record if the id field is set</span>
<a name="l1690"><span class="linenum">1690</span></a>          <a class="var it10238" onMouseOver="hilite(10238)" onMouseOut="lolite()" onClick="logVariable('eventobj')" href="../../_variables/eventobj.html">$eventobj</a> = <span class="keyword">new </span><a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l1691"><span class="linenum">1691</span></a>          <a class="var it10238" onMouseOver="hilite(10238)" onMouseOut="lolite()" onClick="logVariable('eventobj')" href="../../_variables/eventobj.html">$eventobj</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>, false);
<a name="l1692"><span class="linenum">1692</span></a>      }
<a name="l1693"><span class="linenum">1693</span></a>  
<a name="l1694"><span class="linenum">1694</span></a>      if (<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('submissionend')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/submissionend.html">submissionend</a>) {
<a name="l1695"><span class="linenum">1695</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a>);
<a name="l1696"><span class="linenum">1696</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('submissionendevent', 'mod_workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('name')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l1697"><span class="linenum">1697</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timestart.html">timestart</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('submissionend')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/submissionend.html">submissionend</a>;
<a name="l1698"><span class="linenum">1698</span></a>          if (<a class="var it11515" onMouseOver="hilite(11515)" onMouseOut="lolite()" onClick="logVariable('reusedevent')" href="../../_variables/reusedevent.html">$reusedevent</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it11514" onMouseOver="hilite(11514)" onMouseOut="lolite()" onClick="logVariable('currentevents')" href="../../_variables/currentevents.html">$currentevents</a>)) {
<a name="l1699"><span class="linenum">1699</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it11515" onMouseOver="hilite(11515)" onMouseOut="lolite()" onClick="logVariable('reusedevent')" href="../../_variables/reusedevent.html">$reusedevent</a>-&gt;<a onClick="logVariable('id')" class="var it40216" onMouseOver="hilite(40216)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1700"><span class="linenum">1700</span></a>          } else {
<a name="l1701"><span class="linenum">1701</span></a>  <span class="comment">            // should not be set but just in case</span>
<a name="l1702"><span class="linenum">1702</span></a>              unset(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1703"><span class="linenum">1703</span></a>          }
<a name="l1704"><span class="linenum">1704</span></a>  <span class="comment">        // update() will reuse a db record if the id field is set</span>
<a name="l1705"><span class="linenum">1705</span></a>          <a class="var it10238" onMouseOver="hilite(10238)" onMouseOut="lolite()" onClick="logVariable('eventobj')" href="../../_variables/eventobj.html">$eventobj</a> = <span class="keyword">new </span><a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l1706"><span class="linenum">1706</span></a>          <a class="var it10238" onMouseOver="hilite(10238)" onMouseOut="lolite()" onClick="logVariable('eventobj')" href="../../_variables/eventobj.html">$eventobj</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>, false);
<a name="l1707"><span class="linenum">1707</span></a>      }
<a name="l1708"><span class="linenum">1708</span></a>  
<a name="l1709"><span class="linenum">1709</span></a>      if (<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('assessmentstart')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/assessmentstart.html">assessmentstart</a>) {
<a name="l1710"><span class="linenum">1710</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a>);
<a name="l1711"><span class="linenum">1711</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('assessmentstartevent', 'mod_workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('name')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l1712"><span class="linenum">1712</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timestart.html">timestart</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('assessmentstart')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/assessmentstart.html">assessmentstart</a>;
<a name="l1713"><span class="linenum">1713</span></a>          if (<a class="var it11515" onMouseOver="hilite(11515)" onMouseOut="lolite()" onClick="logVariable('reusedevent')" href="../../_variables/reusedevent.html">$reusedevent</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it11514" onMouseOver="hilite(11514)" onMouseOut="lolite()" onClick="logVariable('currentevents')" href="../../_variables/currentevents.html">$currentevents</a>)) {
<a name="l1714"><span class="linenum">1714</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it11515" onMouseOver="hilite(11515)" onMouseOut="lolite()" onClick="logVariable('reusedevent')" href="../../_variables/reusedevent.html">$reusedevent</a>-&gt;<a onClick="logVariable('id')" class="var it40216" onMouseOver="hilite(40216)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1715"><span class="linenum">1715</span></a>          } else {
<a name="l1716"><span class="linenum">1716</span></a>  <span class="comment">            // should not be set but just in case</span>
<a name="l1717"><span class="linenum">1717</span></a>              unset(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1718"><span class="linenum">1718</span></a>          }
<a name="l1719"><span class="linenum">1719</span></a>  <span class="comment">        // update() will reuse a db record if the id field is set</span>
<a name="l1720"><span class="linenum">1720</span></a>          <a class="var it10238" onMouseOver="hilite(10238)" onMouseOut="lolite()" onClick="logVariable('eventobj')" href="../../_variables/eventobj.html">$eventobj</a> = <span class="keyword">new </span><a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l1721"><span class="linenum">1721</span></a>          <a class="var it10238" onMouseOver="hilite(10238)" onMouseOut="lolite()" onClick="logVariable('eventobj')" href="../../_variables/eventobj.html">$eventobj</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>, false);
<a name="l1722"><span class="linenum">1722</span></a>      }
<a name="l1723"><span class="linenum">1723</span></a>  
<a name="l1724"><span class="linenum">1724</span></a>      if (<a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('assessmentend')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/assessmentend.html">assessmentend</a>) {
<a name="l1725"><span class="linenum">1725</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it5295" onMouseOver="hilite(5295)" onMouseOut="lolite()" onClick="logVariable('base')" href="../../_variables/base.html">$base</a>);
<a name="l1726"><span class="linenum">1726</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('assessmentendevent', 'mod_workshop', <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('name')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l1727"><span class="linenum">1727</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timestart.html">timestart</a> = <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a onClick="logVariable('assessmentend')" class="var it39651" onMouseOver="hilite(39651)" onMouseOut="lolite()" href="../../_variables/assessmentend.html">assessmentend</a>;
<a name="l1728"><span class="linenum">1728</span></a>          if (<a class="var it11515" onMouseOver="hilite(11515)" onMouseOut="lolite()" onClick="logVariable('reusedevent')" href="../../_variables/reusedevent.html">$reusedevent</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it11514" onMouseOver="hilite(11514)" onMouseOut="lolite()" onClick="logVariable('currentevents')" href="../../_variables/currentevents.html">$currentevents</a>)) {
<a name="l1729"><span class="linenum">1729</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it11515" onMouseOver="hilite(11515)" onMouseOut="lolite()" onClick="logVariable('reusedevent')" href="../../_variables/reusedevent.html">$reusedevent</a>-&gt;<a onClick="logVariable('id')" class="var it40216" onMouseOver="hilite(40216)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1730"><span class="linenum">1730</span></a>          } else {
<a name="l1731"><span class="linenum">1731</span></a>  <span class="comment">            // should not be set but just in case</span>
<a name="l1732"><span class="linenum">1732</span></a>              unset(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1733"><span class="linenum">1733</span></a>          }
<a name="l1734"><span class="linenum">1734</span></a>  <span class="comment">        // update() will reuse a db record if the id field is set</span>
<a name="l1735"><span class="linenum">1735</span></a>          <a class="var it10238" onMouseOver="hilite(10238)" onMouseOut="lolite()" onClick="logVariable('eventobj')" href="../../_variables/eventobj.html">$eventobj</a> = <span class="keyword">new </span><a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l1736"><span class="linenum">1736</span></a>          <a class="var it10238" onMouseOver="hilite(10238)" onMouseOut="lolite()" onClick="logVariable('eventobj')" href="../../_variables/eventobj.html">$eventobj</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>, false);
<a name="l1737"><span class="linenum">1737</span></a>      }
<a name="l1738"><span class="linenum">1738</span></a>  
<a name="l1739"><span class="linenum">1739</span></a>  <span class="comment">    // delete any leftover events</span>
<a name="l1740"><span class="linenum">1740</span></a>      foreach (<a class="var it11514" onMouseOver="hilite(11514)" onMouseOut="lolite()" onClick="logVariable('currentevents')" href="../../_variables/currentevents.html">$currentevents</a> as <a class="var it11516" onMouseOver="hilite(11516)" onMouseOut="lolite()" onClick="logVariable('oldevent')" href="../../_variables/oldevent.html">$oldevent</a>) {
<a name="l1741"><span class="linenum">1741</span></a>          <a class="var it11516" onMouseOver="hilite(11516)" onMouseOut="lolite()" onClick="logVariable('oldevent')" href="../../_variables/oldevent.html">$oldevent</a> = <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it11516" onMouseOver="hilite(11516)" onMouseOut="lolite()" onClick="logVariable('oldevent')" href="../../_variables/oldevent.html">$oldevent</a>);
<a name="l1742"><span class="linenum">1742</span></a>          <a class="var it11516" onMouseOver="hilite(11516)" onMouseOut="lolite()" onClick="logVariable('oldevent')" href="../../_variables/oldevent.html">$oldevent</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l1743"><span class="linenum">1743</span></a>      }
<a name="l1744"><span class="linenum">1744</span></a>  }
<a name="l1745"><span class="linenum">1745</span></a>  
<a name="l1746"><span class="linenum">1746</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l1747"><span class="linenum">1747</span></a>  <span class="comment">// Course reset API                                                           //</span>
<a name="l1748"><span class="linenum">1748</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l1749"><span class="linenum">1749</span></a>  
<a name="l1750"><span class="linenum">1750</span></a>  <span class="comment">/**</span>
<a name="l1751"><span class="linenum">1751</span></a>  <span class="comment"> * Extends the course reset form with workshop specific settings.</span>
<a name="l1752"><span class="linenum">1752</span></a>  <span class="comment"> *</span>
<a name="l1753"><span class="linenum">1753</span></a>  <span class="comment"> * @param MoodleQuickForm $mform</span>
<a name="l1754"><span class="linenum">1754</span></a>  <span class="comment"> */</span>
<a name="l1755"><span class="linenum">1755</span></a>  function <a class="function" onClick="logFunction('workshop_reset_course_form_definition')" href="../../_functions/workshop_reset_course_form_definition.html" onMouseOver="funcPopup(event,'workshop_reset_course_form_definition')">workshop_reset_course_form_definition</a>(<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l1756"><span class="linenum">1756</span></a>  
<a name="l1757"><span class="linenum">1757</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'workshopheader', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'mod_workshop'));
<a name="l1758"><span class="linenum">1758</span></a>  
<a name="l1759"><span class="linenum">1759</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('advcheckbox', 'reset_workshop_submissions', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetsubmissions', 'mod_workshop'));
<a name="l1760"><span class="linenum">1760</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addHelpButton')" href="../../_functions/addhelpbutton.html" onMouseOver="funcPopup(event,'addhelpbutton')">addHelpButton</a>('reset_workshop_submissions', 'resetsubmissions', 'mod_workshop');
<a name="l1761"><span class="linenum">1761</span></a>  
<a name="l1762"><span class="linenum">1762</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('advcheckbox', 'reset_workshop_assessments', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetassessments', 'mod_workshop'));
<a name="l1763"><span class="linenum">1763</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addHelpButton')" href="../../_functions/addhelpbutton.html" onMouseOver="funcPopup(event,'addhelpbutton')">addHelpButton</a>('reset_workshop_assessments', 'resetassessments', 'mod_workshop');
<a name="l1764"><span class="linenum">1764</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('reset_workshop_assessments', 'reset_workshop_submissions', 'checked');
<a name="l1765"><span class="linenum">1765</span></a>  
<a name="l1766"><span class="linenum">1766</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('advcheckbox', 'reset_workshop_phase', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetphase', 'mod_workshop'));
<a name="l1767"><span class="linenum">1767</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addHelpButton')" href="../../_functions/addhelpbutton.html" onMouseOver="funcPopup(event,'addhelpbutton')">addHelpButton</a>('reset_workshop_phase', 'resetphase', 'mod_workshop');
<a name="l1768"><span class="linenum">1768</span></a>  }
<a name="l1769"><span class="linenum">1769</span></a>  
<a name="l1770"><span class="linenum">1770</span></a>  <span class="comment">/**</span>
<a name="l1771"><span class="linenum">1771</span></a>  <span class="comment"> * Provides default values for the workshop settings in the course reset form.</span>
<a name="l1772"><span class="linenum">1772</span></a>  <span class="comment"> *</span>
<a name="l1773"><span class="linenum">1773</span></a>  <span class="comment"> * @param stdClass $course The course to be reset.</span>
<a name="l1774"><span class="linenum">1774</span></a>  <span class="comment"> */</span>
<a name="l1775"><span class="linenum">1775</span></a>  function <a class="function" onClick="logFunction('workshop_reset_course_form_defaults')" href="../../_functions/workshop_reset_course_form_defaults.html" onMouseOver="funcPopup(event,'workshop_reset_course_form_defaults')">workshop_reset_course_form_defaults</a>(stdClass <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l1776"><span class="linenum">1776</span></a>  
<a name="l1777"><span class="linenum">1777</span></a>      <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../../_variables/defaults.html">$defaults</a> = array(
<a name="l1778"><span class="linenum">1778</span></a>          'reset_workshop_submissions'    =&gt; 1,
<a name="l1779"><span class="linenum">1779</span></a>          'reset_workshop_assessments'    =&gt; 1,
<a name="l1780"><span class="linenum">1780</span></a>          'reset_workshop_phase'          =&gt; 1,
<a name="l1781"><span class="linenum">1781</span></a>      );
<a name="l1782"><span class="linenum">1782</span></a>  
<a name="l1783"><span class="linenum">1783</span></a>      return <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../../_variables/defaults.html">$defaults</a>;
<a name="l1784"><span class="linenum">1784</span></a>  }
<a name="l1785"><span class="linenum">1785</span></a>  
<a name="l1786"><span class="linenum">1786</span></a>  <span class="comment">/**</span>
<a name="l1787"><span class="linenum">1787</span></a>  <span class="comment"> * Performs the reset of all workshop instances in the course.</span>
<a name="l1788"><span class="linenum">1788</span></a>  <span class="comment"> *</span>
<a name="l1789"><span class="linenum">1789</span></a>  <span class="comment"> * @param stdClass $data The actual course reset settings.</span>
<a name="l1790"><span class="linenum">1790</span></a>  <span class="comment"> * @return array List of results, each being array[(string)component, (string)item, (string)error]</span>
<a name="l1791"><span class="linenum">1791</span></a>  <span class="comment"> */</span>
<a name="l1792"><span class="linenum">1792</span></a>  function <a class="function" onClick="logFunction('workshop_reset_userdata')" href="../../_functions/workshop_reset_userdata.html" onMouseOver="funcPopup(event,'workshop_reset_userdata')">workshop_reset_userdata</a>(stdClass <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l1793"><span class="linenum">1793</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1794"><span class="linenum">1794</span></a>  
<a name="l1795"><span class="linenum">1795</span></a>      if (empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_workshop_submissions')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_workshop_submissions.html">reset_workshop_submissions</a>)
<a name="l1796"><span class="linenum">1796</span></a>              and empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_workshop_assessments')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_workshop_assessments.html">reset_workshop_assessments</a>)
<a name="l1797"><span class="linenum">1797</span></a>              and empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_workshop_phase')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/reset_workshop_phase.html">reset_workshop_phase</a>) ) {
<a name="l1798"><span class="linenum">1798</span></a>  <span class="comment">        // Nothing to do here.</span>
<a name="l1799"><span class="linenum">1799</span></a>          return array();
<a name="l1800"><span class="linenum">1800</span></a>      }
<a name="l1801"><span class="linenum">1801</span></a>  
<a name="l1802"><span class="linenum">1802</span></a>      <a class="var it11520" onMouseOver="hilite(11520)" onMouseOut="lolite()" onClick="logVariable('workshoprecords')" href="../../_variables/workshoprecords.html">$workshoprecords</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('workshop', array('course' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>));
<a name="l1803"><span class="linenum">1803</span></a>  
<a name="l1804"><span class="linenum">1804</span></a>      if (empty(<a class="var it11520" onMouseOver="hilite(11520)" onMouseOut="lolite()" onClick="logVariable('workshoprecords')" href="../../_variables/workshoprecords.html">$workshoprecords</a>)) {
<a name="l1805"><span class="linenum">1805</span></a>  <span class="comment">        // What a boring course - no workshops here!</span>
<a name="l1806"><span class="linenum">1806</span></a>          return array();
<a name="l1807"><span class="linenum">1807</span></a>      }
<a name="l1808"><span class="linenum">1808</span></a>  
<a name="l1809"><span class="linenum">1809</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../mod/workshop/locallib.php.html">/mod/workshop/locallib.php</a>');
<a name="l1810"><span class="linenum">1810</span></a>  
<a name="l1811"><span class="linenum">1811</span></a>      <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1812"><span class="linenum">1812</span></a>      <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = array();
<a name="l1813"><span class="linenum">1813</span></a>  
<a name="l1814"><span class="linenum">1814</span></a>      foreach (<a class="var it11520" onMouseOver="hilite(11520)" onMouseOut="lolite()" onClick="logVariable('workshoprecords')" href="../../_variables/workshoprecords.html">$workshoprecords</a> as <a class="var it11521" onMouseOver="hilite(11521)" onMouseOut="lolite()" onClick="logVariable('workshoprecord')" href="../../_variables/workshoprecord.html">$workshoprecord</a>) {
<a name="l1815"><span class="linenum">1815</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('workshop', <a class="var it11521" onMouseOver="hilite(11521)" onMouseOut="lolite()" onClick="logVariable('workshoprecord')" href="../../_variables/workshoprecord.html">$workshoprecord</a>-&gt;<a onClick="logVariable('id')" class="var it40217" onMouseOver="hilite(40217)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1816"><span class="linenum">1816</span></a>          <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a> = <span class="keyword">new </span><a class="class" onClick="logClass('workshop')" href="../../_classes/workshop.html" onMouseOver="classPopup(event,'workshop')">workshop</a>(<a class="var it11521" onMouseOver="hilite(11521)" onMouseOut="lolite()" onClick="logVariable('workshoprecord')" href="../../_variables/workshoprecord.html">$workshoprecord</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l1817"><span class="linenum">1817</span></a>          <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>, <a class="var it4517" onMouseOver="hilite(4517)" onMouseOut="lolite()" onClick="logVariable('workshop')" href="../../_variables/workshop.html">$workshop</a>-&gt;<a class="function" onClick="logFunction('reset_userdata')" href="../../_functions/reset_userdata.html" onMouseOver="funcPopup(event,'reset_userdata')">reset_userdata</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>));
<a name="l1818"><span class="linenum">1818</span></a>      }
<a name="l1819"><span class="linenum">1819</span></a>  
<a name="l1820"><span class="linenum">1820</span></a>      return <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>;
<a name="l1821"><span class="linenum">1821</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_userid': ['get_userid', '', [['backup/util/plan','restore_task.class.php',54],['backup/util/plan','restore_plan.class.php',115],['mod/quiz','attemptlib.php',763],['backup/controller','restore_controller.class.php',283],['backup/controller','backup_controller.class.php',281],['mod/data','lib.php',2471],['lib/filestorage','stored_file.php',708],['lib/filebrowser','virtual_root_file.php',236]], 84],
'load': ['load', 'Load the config.php file for a particular theme, and return an instance of this class. (That is, this is a factory method.) ', [['lib','outputlib.php',399],['lib/adodb','adodb-active-recordx.inc.php',747],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',94],['lib/htmlpurifier/HTMLPurifier','Language.php',69],['cache/classes','definition.php',323],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',44],['lib/mustache/src/Mustache','Loader.php',17],['lib/phpexcel/PHPExcel','IOFactory.php',181],['lib/simplepie/library/SimplePie/Cache','MySQL.php',286],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',293],['lib/mustache/src/Mustache/Cache','NoopCache.php',20],['lib/phpexcel/PHPExcel/Reader','SYLK.php',197],['lib/phpexcel/PHPExcel/Reader','Excel5.php',602],['lib/simplepie/library/SimplePie/Cache','Base.php',87],['lib/pear/HTML/QuickForm','select.php',421],['lib/simplepie/library/SimplePie/Cache','File.php',118],['calendar','lib.php',2631],['backup/cc/cc_lib','xmlbase.php',92],['mod/lesson','locallib.php',1024],['mod/lesson','locallib.php',2243],['mod/lesson','locallib.php',3191],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',337],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',39],['lib/zend/Zend/Loader','PluginLoader.php',350],['lib/mustache/src/Mustache/Loader','StringLoader.php',28],['cache/classes','config.php',128],['lib/phpexcel/PHPExcel/Reader','IReader.php',46],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',69],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',224],['lib/phpexcel/PHPExcel/Reader','CSV.php',218],['lib/phpexcel/PHPExcel','Autoloader.php',62],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',205],['lib/zend/Zend/Loader/PluginLoader','Interface.php',68],['lib/mustache/src/Mustache','Cache.php',20],['lib/simplepie/library/SimplePie/Cache','Memcache.php',123],['lib/phpunit/classes','autoloader.php',46],['grade/grading','lib.php',227],['lib/zend/Zend/Loader/Autoloader','Resource.php',428],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',41],['lib/phpexcel/PHPExcel/Reader','HTML.php',128],['lib/mustache/src/Mustache/Loader','InlineLoader.php',87],['lib/adodb','adodb-active-record.inc.php',682],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',48]], 182],
'workshop_get_post_actions': ['workshop_get_post_actions', 'List the actions that correspond to a post of this module. This is used by the participation report. ', [['mod/workshop','lib.php',264]], 0],
'workshop_supports': ['workshop_supports', 'Returns the information if the module supports a feature ', [['mod/workshop','lib.php',37]], 0],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1318]], 854],
'get_assessments_by_reviewer': ['get_assessments_by_reviewer', 'Get the complete information about all assessments allocated to the given reviewer ', [['mod/workshop','locallib.php',1177]], 6],
'delete_records_list': ['delete_records_list', 'Delete the records from a table where one field match one list of values. ', [['lib/dml','moodle_database.php',1834]], 36],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/zend/Zend/Soap','Wsdl.php',641],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',582]], 3296],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',438],['lib/classes/event','base.php',682]], 778],
'grade_get_grades': ['grade_get_grades', 'Returns grading information for given activity, optionally with user grades Manual, course or category items can not be queried. ', [['lib','gradelib.php',328]], 53],
'switch_phase': ['switch_phase', 'Switch to a new workshop phase ', [['mod/workshop','locallib.php',1700]], 5],
'workshop_scale_used_anywhere': ['workshop_scale_used_anywhere', 'Is a given scale used by any instance of workshop? ', [['mod/workshop','lib.php',1019]], 0],
'on': ['on', '', [['lib/requirejs','require.js',506]], 3494],
'send_stored_file': ['send_stored_file', 'Handles the sending of file data to the user\'s browser, including support for byteranges etc. ', [['lib','filelib.php',2170]], 73],
'cron_execute_plugin_type': ['cron_execute_plugin_type', 'Executes cron functions for a specific type of plugin. ', [['lib','cronlib.php',148]], 22],
'empty_tag': ['empty_tag', 'Outputs an empty tag with attributes ', [['lib','outputcomponents.php',1096]], 511],
'workshop_get_recent_mod_activity': ['workshop_get_recent_mod_activity', 'Returns all activity in course workshops since a given time ', [['mod/workshop','lib.php',598]], 0],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3234],['mod/assign','locallib.php',3440]], 532],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 315],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'workshop_update_instance': ['workshop_update_instance', 'Given an object containing all the necessary data, (defined by the form in mod_form.php) this function will update an existing instance with new data. ', [['mod/workshop','lib.php',124]], 0],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2444]], 635],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as a moodle_recordset using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','oci_native_moodle_database.php',1065],['lib/dml','sqlsrv_native_moodle_database.php',761],['lib/dml','mssql_native_moodle_database.php',687],['lib/dml','mysqli_native_moodle_database.php',985],['lib/dml/tests','dml_test.php',5423],['lib/dml','pdo_moodle_database.php',251]], 279],
'aggregation_uses_aggregationcoef': ['aggregation_uses_aggregationcoef', 'Returns true if aggregation uses aggregationcoef ', [['lib/grade','grade_category.php',1757]], 14],
'file_save_draft_area_files': ['file_save_draft_area_files', 'Saves files from a draft file area to a real one (merging the list of files). Can rewrite URLs in some content at the same time if desired. ', [['lib','filelib.php',772]], 53],
'mtrace': ['mtrace', 'For outputting debugging info ', [['lib','moodlelib.php',8221]], 323],
'delete': ['delete', 'Deletes a key pair ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',110],['lib/google/src/Google/Service','Reseller.php',440],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',1006],['lib/adodb','adodb-active-recordx.inc.php',949],['lib/zend/Zend/Service/Delicious','Post.php',236],['lib/grade','grade_object.php',270],['lib/zend/Zend/Gdata','Gapps.php',258],['lib/google/src/Google/Service','Fusiontables.php',644],['lib/google/src/Google/Service','Fusiontables.php',809],['lib/google/src/Google/Service','Fusiontables.php',934],['lib/google/src/Google/Service','Fusiontables.php',1127],['lib/google/src/Google/Service','Fusiontables.php',1188],['blog','locallib.php',325],['lib/google/src/Google/Service','Blogger.php',1051],['lib/google/src/Google/Service','Blogger.php',1212],['lib/google/src/Google/Service','Blogger.php',1434],['lib/portfolio','plugin.php',692],['lib/google/src/Google/Service','AdExchangeBuyer.php',605],['lib/google/src/Google/Service','Manager.php',240],['lib/google/src/Google/Service','Manager.php',320],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',137],['lib','webdavlib.php',691],['lib/grade','grade_item.php',354],['lib/google/src/Google/Service','Gmail.php',686],['lib/google/src/Google/Service','Gmail.php',843],['lib/google/src/Google/Service','Gmail.php',936],['lib/google/src/Google/Service','Gmail.php',1146],['course','lib.php',3133],['lib/google/src/Google/Service','Mirror.php',424],['lib/google/src/Google/Service','Mirror.php',592],['lib/google/src/Google/Service','Mirror.php',660],['lib/google/src/Google/Service','Mirror.php',771],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',731],['lib/google/src/Google/Service','Genomics.php',963],['lib/google/src/Google/Service','Genomics.php',1327],['lib/google/src/Google/Service','Genomics.php',1399],['cache/classes','interfaces.php',161],['lib/google/src/Google/Service','Dfareporting.php',470],['lib/zend/Zend/Gdata/Gbase','ItemEntry.php',133],['lib/google/src/Google/Service','Licensing.php',221],['lib/google/src/Google/Service','Drive.php',1462],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1681],['lib/google/src/Google/Service','Drive.php',1932],['lib/google/src/Google/Service','Drive.php',2002],['lib/google/src/Google/Service','Drive.php',2131],['lib/google/src/Google/Service','Drive.php',2294],['lib/google/src/Google/Service','Drive.php',2414],['completion','data_object.php',272],['lib/google/src/Google/Service','Books.php',1804],['lib/zend/Zend/Gdata','App.php',914],['lib/google/src/Google/Cache','Memcache.php',142],['lib/google/src/Google/Service','Bigquery.php',512],['lib/google/src/Google/Service','Bigquery.php',822],['cache','disabledlib.php',102],['lib/zend/Zend/Server','Cache.php',132],['lib/zend/Zend/Gdata/App','Entry.php',212],['cache/stores/memcached','lib.php',368],['lib/google/src/Google/Service','YouTube.php',1470],['lib/google/src/Google/Service','YouTube.php',1979],['lib/google/src/Google/Service','YouTube.php',2277],['lib/google/src/Google/Service','YouTube.php',2510],['lib/google/src/Google/Service','YouTube.php',2657],['lib/google/src/Google/Service','YouTube.php',2998],['lib/google/src/Google/Service','YouTube.php',3196],['lib/google/src/Google/Service','Webmasters.php',298],['lib/google/src/Google/Service','Webmasters.php',388],['lib/google/src/Google/Service','Autoscaler.php',314],['lib/google/src/Google/Service','Autoscaler.php',428],['calendar','lib.php',2388],['lib/zend/Zend/Service/Amazon','Sqs.php',129],['lib/google/src/Google/Service','ShoppingContent.php',553],['lib/google/src/Google/Service','ShoppingContent.php',735],['lib/google/src/Google/Service','ShoppingContent.php',969],['mod/lesson','locallib.php',1039],['mod/lesson','locallib.php',2274],['lib/google/src/Google/Service','SQLAdmin.php',628],['lib/google/src/Google/Service','SQLAdmin.php',923],['lib/google/src/Google/Service','Fitness.php',458],['lib/google/src/Google/Service','Fitness.php',563],['lib/google/src/Google/Service','TagManager.php',1049],['lib/google/src/Google/Service','TagManager.php',1140],['lib/google/src/Google/Service','TagManager.php',1233],['lib/google/src/Google/Service','TagManager.php',1326],['lib/google/src/Google/Service','TagManager.php',1419],['lib/google/src/Google/Service','TagManager.php',1513],['lib/google/src/Google/Service','TagManager.php',1607],['lib/google/src/Google/Service','TagManager.php',1757],['lib/google/src/Google/Service','Directory.php',1300],['lib/google/src/Google/Service','Directory.php',1477],['lib/google/src/Google/Service','Directory.php',1587],['lib/google/src/Google/Service','Directory.php',1642],['lib/google/src/Google/Service','Directory.php',1769],['lib/google/src/Google/Service','Directory.php',1838],['lib/google/src/Google/Service','Directory.php',1935],['lib/google/src/Google/Service','Directory.php',2042],['lib/google/src/Google/Service','Directory.php',2144],['lib/google/src/Google/Service','Directory.php',2205],['lib/google/src/Google/Service','Directory.php',2405],['lib/google/src/Google/Service','Directory.php',2480],['cache/stores/static','lib.php',374],['lib/google/src/Google/Service','AppState.php',153],['lib/google/src/Google/Service','Taskqueue.php',292],['lib/google/src/Google/Service','Container.php',343],['lib/google/src/Google/Service','AndroidPublisher.php',1177],['lib/google/src/Google/Service','AndroidPublisher.php',1257],['lib/google/src/Google/Service','AndroidPublisher.php',1595],['lib/google/src/Google/Service','AndroidPublisher.php',1690],['lib/google/src/Google/Service','AndroidPublisher.php',1972],['repository','lib.php',427],['repository','lib.php',2012],['lib','accesslib.php',5529],['lib/google/src/Google/Service','AdSenseHost.php',733],['lib/google/src/Google/Service','AdSenseHost.php',1009],['lib/google/src/Google/Service','AdSenseHost.php',1167],['cache/stores/memcache','lib.php',401],['lib','filelib.php',3440],['lib/google/src/Google/Service','MapsEngine.php',1692],['lib/google/src/Google/Service','MapsEngine.php',1990],['lib/google/src/Google/Service','MapsEngine.php',2343],['lib/google/src/Google/Service','MapsEngine.php',2650],['lib/google/src/Google/Service','MapsEngine.php',2911],['lib/grade','grade_grade.php',955],['comment','lib.php',786],['lib/google/src/Google/Service','SiteVerification.php',138],['lib/google/src/Google/Service','Prediction.php',261],['cache/stores/session','lib.php',417],['cache/classes','dummystore.php',198],['lib/google/src/Google/Service','Compute.php',2812],['lib/google/src/Google/Service','Compute.php',2896],['lib/google/src/Google/Service','Compute.php',3139],['lib/google/src/Google/Service','Compute.php',3225],['lib/google/src/Google/Service','Compute.php',3361],['lib/google/src/Google/Service','Compute.php',3463],['lib/google/src/Google/Service','Compute.php',3543],['lib/google/src/Google/Service','Compute.php',3662],['lib/google/src/Google/Service','Compute.php',3725],['lib/google/src/Google/Service','Compute.php',3844],['lib/google/src/Google/Service','Compute.php',3941],['lib/google/src/Google/Service','Compute.php',4080],['lib/google/src/Google/Service','Compute.php',4406],['lib/google/src/Google/Service','Compute.php',4543],['lib/google/src/Google/Service','Compute.php',4660],['lib/google/src/Google/Service','Compute.php',4740],['lib/google/src/Google/Service','Compute.php',4806],['lib/google/src/Google/Service','Compute.php',4927],['lib/google/src/Google/Service','Compute.php',5069],['lib/google/src/Google/Service','Compute.php',5229],['lib/google/src/Google/Service','Compute.php',5360],['badges/criteria','award_criteria.php',330],['badges/criteria','award_criteria_manual.php',220],['lib/google/src/Google/Service','Calendar.php',886],['lib/google/src/Google/Service','Calendar.php',1040],['lib/google/src/Google/Service','Calendar.php',1228],['lib/google/src/Google/Service','Calendar.php',1362],['lib/google/src/Google/Service','Analytics.php',2068],['lib/google/src/Google/Service','Analytics.php',2211],['lib/google/src/Google/Service','Analytics.php',2293],['lib/google/src/Google/Service','Analytics.php',2414],['lib/google/src/Google/Service','Analytics.php',2631],['lib/google/src/Google/Service','Analytics.php',2760],['lib/google/src/Google/Service','Analytics.php',2851],['lib/google/src/Google/Service','Analytics.php',3181],['lib/google/src/Google/Service','Analytics.php',3406],['lib/google/src/Google/Service','Tasks.php',309],['lib/google/src/Google/Service','Tasks.php',427],['cache/classes','loaders.php',777],['cache/classes','loaders.php',1491],['cache/classes','loaders.php',1859],['cache/stores/mongodb','lib.php',361],['lib/grade','grade_category.php',259],['cache/stores/file','lib.php',392],['lib/google/src/Google/Service','Storage.php',945],['lib/google/src/Google/Service','Storage.php',1060],['lib/google/src/Google/Service','Storage.php',1227],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1565],['admin/tool/uploadcourse/classes','course.php',226],['lib/google/src/Google/Cache','Null.php',51],['lib/filestorage','stored_file.php',323],['lib/filebrowser','virtual_root_file.php',69],['lib/google/src/Google/Service','AdSense.php',1257],['lib/google/src/Google/Service','AdSense.php',1729],['lib/google/src/Google/Service','Pubsub.php',239],['lib/google/src/Google/Service','Pubsub.php',378],['lib/grade','grade_scale.php',136],['lib/filebrowser','file_info.php',418],['lib/google/src/Google/Cache','File.php',106],['lib/htmlpurifier/HTMLPurifier','Zipper.php',89],['lib/google/src/Google/Service','Dns.php',370],['lib/filebrowser','file_info_stored.php',631],['lib/google/src/Google/Service','Replicapool.php',374],['lib/google/src/Google/Service','Resourceviews.php',419],['lib','badgeslib.php',620],['lib/google/src/Google/Cache','Apc.php',103],['lib/adodb','adodb-active-record.inc.php',792],['mnet','peer.php',122],['lib/grade','grade_outcome.php',97]], 260],
'get_records_select': ['get_records_select', 'Get a number of records as an array of objects which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1283]], 163],
'userdate': ['userdate', 'Also in ADORecordSet. ', [['lib/adodb','adodb.inc.php',2607],['lib/adodb','adodb.inc.php',3271],['lib','moodlelib.php',2150]], 496],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'update': ['update', 'Update a customer resource if one it exists and is owned by the reseller. (customers.update) ', [['lib/google/src/Google/Service','Reseller.php',343],['mod/lesson/pagetypes','matching.php',308],['lib/adodb','adodb-active-recordx.inc.php',1047],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','Fusiontables.php',726],['lib/google/src/Google/Service','Fusiontables.php',889],['lib/google/src/Google/Service','Fusiontables.php',1095],['lib/google/src/Google/Service','Fusiontables.php',1269],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Blogger.php',1332],['lib/google/src/Google/Service','Blogger.php',1630],['lib/google/src/Google/Service','Doubleclicksearch.php',325],['lib/google/src/Google/Service','AdExchangeBuyer.php',392],['lib/google/src/Google/Service','AdExchangeBuyer.php',684],['lib/grade','grade_item.php',260],['lib/google/src/Google/Service','Gmail.php',756],['lib/google/src/Google/Service','Gmail.php',908],['lib/google/src/Google/Service','Mirror.php',495],['lib/google/src/Google/Service','Mirror.php',633],['lib/google/src/Google/Service','Mirror.php',744],['lib/google/src/Google/Service','Genomics.php',690],['lib/google/src/Google/Service','Genomics.php',811],['lib/google/src/Google/Service','Genomics.php',1064],['lib/google/src/Google/Service','Genomics.php',1370],['lib/google/src/Google/Service','Genomics.php',1521],['lib/google/src/Google/Service','Dfareporting.php',570],['lib/google/src/Google/Service','PlusDomains.php',691],['lib/google/src/Google/Service','Licensing.php',332],['lib/google/src/Google/Service','Drive.php',1624],['lib/google/src/Google/Service','Drive.php',1859],['lib/google/src/Google/Service','Drive.php',2100],['lib/google/src/Google/Service','Drive.php',2211],['lib/google/src/Google/Service','Drive.php',2261],['lib/google/src/Google/Service','Drive.php',2385],['lib/google/src/Google/Service','Drive.php',2473],['completion','data_object.php',251],['lib/google/src/Google/Service','Books.php',1901],['lib/google/src/Google/Service','Bigquery.php',603],['lib/google/src/Google/Service','Bigquery.php',911],['lib/google/src/Google/Service','Groupssettings.php',137],['lib/google/src/Google/Service','YouTube.php',1596],['lib/google/src/Google/Service','YouTube.php',1697],['lib/google/src/Google/Service','YouTube.php',2201],['lib/google/src/Google/Service','YouTube.php',2439],['lib/google/src/Google/Service','YouTube.php',2613],['lib/google/src/Google/Service','YouTube.php',2809],['lib/google/src/Google/Service','YouTube.php',3419],['lib/google/src/Google/Service','Coordinate.php',568],['lib/google/src/Google/Service','Coordinate.php',680],['lib/google/src/Google/Service','Autoscaler.php',399],['calendar','lib.php',2171],['lib/google/src/Google/Service','ShoppingContent.php',633],['lib/google/src/Google/Service','ShoppingContent.php',815],['lib','weblib.php',3154],['mod/lesson','locallib.php',2682],['lib/google/src/Google/Service','SQLAdmin.php',843],['lib/google/src/Google/Service','Fitness.php',424],['lib/google/src/Google/Service','Fitness.php',607],['lib/google/src/Google/Service','TagManager.php',1004],['lib/google/src/Google/Service','TagManager.php',1093],['lib/google/src/Google/Service','TagManager.php',1186],['lib/google/src/Google/Service','TagManager.php',1279],['lib/google/src/Google/Service','TagManager.php',1372],['lib/google/src/Google/Service','TagManager.php',1466],['lib/google/src/Google/Service','TagManager.php',1560],['lib/google/src/Google/Service','TagManager.php',1711],['lib/google/src/Google/Service','TagManager.php',1804],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Directory.php',1446],['lib/google/src/Google/Service','Directory.php',1559],['lib/google/src/Google/Service','Directory.php',1724],['lib/google/src/Google/Service','Directory.php',1907],['lib/google/src/Google/Service','Directory.php',2014],['lib/google/src/Google/Service','Directory.php',2116],['lib/google/src/Google/Service','Directory.php',2337],['lib/google/src/Google/Service','Directory.php',2523],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['lib/google/src/Google/Service','AppState.php',201],['lib/google/src/Google/Service','Taskqueue.php',397],['lib/google/src/Google/Service','AndroidPublisher.php',1360],['lib/google/src/Google/Service','AndroidPublisher.php',1472],['lib/google/src/Google/Service','AndroidPublisher.php',1542],['lib/google/src/Google/Service','AndroidPublisher.php',1780],['lib/google/src/Google/Service','AndroidPublisher.php',1846],['lib/google/src/Google/Service','AndroidPublisher.php',1928],['lib/google/src/Google/Service','AndroidPublisher.php',2066],['mod/lesson/pagetypes','essay.php',158],['lib/google/src/Google/Service','AdSenseHost.php',845],['lib/google/src/Google/Service','AdSenseHost.php',1096],['lib/google/src/Google/Service','Games.php',1507],['lib/grade','grade_grade.php',940],['lib/google/src/Google/Service','SiteVerification.php',226],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Prediction.php',338],['lib/google/src/Google/Service','Compute.php',2999],['lib/google/src/Google/Service','Compute.php',3310],['lib/google/src/Google/Service','Compute.php',3814],['lib/google/src/Google/Service','Compute.php',5314],['lib/google/src/Google/Service','Calendar.php',979],['lib/google/src/Google/Service','Calendar.php',1144],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1633],['lib/google/src/Google/Service','Analytics.php',2118],['lib/google/src/Google/Service','Analytics.php',2385],['lib/google/src/Google/Service','Analytics.php',2495],['lib/google/src/Google/Service','Analytics.php',2602],['lib/google/src/Google/Service','Analytics.php',2730],['lib/google/src/Google/Service','Analytics.php',2821],['lib/google/src/Google/Service','Analytics.php',2944],['lib/google/src/Google/Service','Analytics.php',3277],['lib/google/src/Google/Service','Analytics.php',3379],['lib/google/src/Google/Service','Analytics.php',3461],['lib/google/src/Google/Service','Tasks.php',385],['lib/google/src/Google/Service','Tasks.php',555],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72],['grade/grading/form/guide','lib.php',826],['lib/grade','grade_category.php',204],['lib/google/src/Google/Service','Storage.php',1030],['lib/google/src/Google/Service','Storage.php',1165],['lib/google/src/Google/Service','Storage.php',1318],['lib/google/src/Google/Service','Storage.php',1454],['lib/google/src/Google/Service','Storage.php',1718],['lib/filestorage','stored_file.php',103],['grade/grading/form/rubric','lib.php',828],['lib/grade','grade_scale.php',125],['lib','coursecatlib.php',441],['lib/adodb','adodb-active-record.inc.php',878],['lib/grade','grade_outcome.php',144],['mod/lesson/pagetypes','branchtable.php',262]], 290],
'assess_url': ['assess_url', '', [['mod/workshop','locallib.php',1434]], 10],
'disabledif': ['disabledif', 'Adds a dependency for $elementName which will be disabled if $condition is met. If $condition = \'notchecked\' (default) then the condition is that the $dependentOn element is not checked. If $condition = \'checked\' then the condition is that the $dependentOn element is checked. If $condition is something else (like "eq" for equals) then it is checked to see if the value of the $dependentOn element is $condition (such as equal) to $value. ', [['lib','formslib.php',2363]], 324],
'get_records_list': ['get_records_list', 'Get a number of records as an array of objects where one field match one list of values. ', [['lib/dml','moodle_database.php',1261]], 32],
'workshop_print_recent_mod_activity': ['workshop_print_recent_mod_activity', 'Print single activity item prepared by {@see workshop_get_recent_mod_activity()} ', [['mod/workshop','lib.php',847]], 0],
'set_field': ['set_field', 'Sets the custom profile field used for testing. ', [['availability/condition/profile/tests','condition_test.php',349],['lib/dml','moodle_database.php',1688]], 462],
'workshop_print_recent_activity': ['workshop_print_recent_activity', 'Given a course and a time, this module should find recent activity that has occurred in workshop activities and print it out. Return true if there was output, or false is there was none. ', [['mod/workshop','lib.php',389]], 0],
'workshop_reset_course_form_definition': ['workshop_reset_course_form_definition', 'Extends the course reset form with workshop specific settings. ', [['mod/workshop','lib.php',1750]], 0],
'workshop_user_complete': ['workshop_user_complete', 'Print a detailed representation of what a user has done with a given particular instance of this module, for user activity reports. ', [['mod/workshop','lib.php',325]], 0],
'set_parent': ['set_parent', 'Set the parent of the optigroup and, at the same time, process all the condition params in all the childs ', [['backup/util/structure','base_optigroup.class.php',118],['lib/grade','grade_item.php',1318],['lib','listlib.php',183],['lib','listlib.php',624],['backup/util/structure','base_final_element.class.php',62],['backup/util/structure','backup_optigroup_element.class.php',184],['lib/grade','grade_category.php',2172],['lib','navigationlib.php',679]], 28],
'workshop_grade_item_update': ['workshop_grade_item_update', 'Creates or updates grade items for the give workshop instance ', [['mod/workshop','lib.php',1065]], 3],
'get_parent_category': ['get_parent_category', 'Returns the grade_category object this grade_item belongs to (referenced by categoryid) or category attached to category item. ', [['lib/grade','grade_item.php',868],['lib/grade','grade_category.php',2114]], 28],
'user_picture': ['user_picture', '', [['mod/quiz','attemptlib.php',2188],['lib','outputrenderers.php',2367],['lib','outputrenderers.php',4702]], 114],
'workshop_scale_used': ['workshop_scale_used', 'Is a given scale used by the instance of workshop? ', [['mod/workshop','lib.php',985]], 0],
'start_tag': ['start_tag', '', [['backup/util/xml/parser','progressive_parser.class.php',215],['lib','outputcomponents.php',1075]], 694],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'record_exists': ['record_exists', 'Test whether a record exists in a table where all the given conditions met. ', [['lib/dml','moodle_database.php',1768]], 735],
'asort_objects_by_property': ['asort_objects_by_property', 'Locale aware sort of objects by a property in common to all objects ', [['lib/classes','collator.php',249]], 17],
'workshop_extend_settings_navigation': ['workshop_extend_settings_navigation', 'Extends the settings navigation with the Workshop settings This function is called when the context for the page is a workshop module. This is not called by AJAX so it is safe to rely on the $PAGE. ', [['mod/workshop','lib.php',1616]], 0],
'workshop_delete_instance': ['workshop_delete_instance', 'Given an ID of an instance of this module, this function will permanently delete the instance and any data that depends on it. ', [['mod/workshop','lib.php',181]], 0],
'workshop_user_outline': ['workshop_user_outline', 'Return a small object with summary information about what a user has done with a given particular instance of this module Used for user activity reports. $return->time = the time they did it $return->info = a short text description ', [['mod/workshop','lib.php',279]], 0],
'workshop_pluginfile': ['workshop_pluginfile', 'Serves the files from the workshop file areas ', [['mod/workshop','lib.php',1236]], 0],
'workshop_get_file_areas': ['workshop_get_file_areas', 'Returns the lists of all browsable file areas within the given module context ', [['mod/workshop','lib.php',1209]], 0],
'instruction_editors_options': ['instruction_editors_options', 'Returns an array of options for the editors that are used for submitting and assessing instructions ', [['mod/workshop','locallib.php',241]], 19],
'print_recent_activity_note': ['print_recent_activity_note', 'Display a recent activity note ', [['lib','weblib.php',2286]], 5],
'get_submission_by_author': ['get_submission_by_author', 'Returns a submission submitted by the given author ', [['mod/workshop','locallib.php',773]], 8],
'addhelpbutton': ['addhelpbutton', 'Add a help button to element, only one button per element is allowed. ', [['lib','formslib.php',1870]], 612],
'username_load_fields_from_object': ['username_load_fields_from_object', 'Reduces lines of duplicated code for getting user name fields. ', [['lib','moodlelib.php',3403]], 27],
'reset_userdata': ['reset_userdata', 'Actual implementation of the reset course functionality, delete all the assignment submissions for course $data->courseid. ', [['mod/assign','locallib.php',723],['mod/workshop','locallib.php',2392]], 8],
'fetch_all': ['fetch_all', 'Finds and returns all grade_object instances based on $params. ', [['lib/grade','grade_object.php',138],['lib/grade','grade_item.php',343],['completion/criteria','completion_criteria.php',153],['completion','data_object.php',165],['completion','completion_criteria_completion.php',84],['lib/grade','grade_grade.php',586],['lib/grade','grade_category.php',194],['lib/grade','grade_scale.php',100],['completion','completion_aggregation.php',79],['lib/grade','grade_outcome.php',193]], 65],
'grade_update': ['grade_update', 'Submit new or update grade; update/create grade_item definition. Grade must have userid specified, rawgrade and feedback with format are optional. rawgrade NULL means \'Not graded\'. Missing property or key means does not change the existing value. ', [['lib','gradelib.php',40]], 27],
'tag': ['tag', 'Outputs a tag with attributes and contents ', [['lib','outputcomponents.php',1063],['lib/zend/Zend/Service','Technorati.php',228]], 1254],
'workshop_get_file_info': ['workshop_get_file_info', 'File browsing support for workshop file areas ', [['mod/workshop','lib.php',1409]], 0],
'record_exists_sql': ['record_exists_sql', 'Test whether a SQL SELECT statement returns any records. ', [['lib/dml','moodle_database.php',1797]], 47],
'add': ['add', '', [['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',454],['blog','locallib.php',242],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['backup/cc','validator.php',51],['lib/google/src/Google/Http','Batch.php',47],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['lib/zend/Zend/Service/Simpy','WatchlistFilterSet.php',47],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/lessphp/Output','Mapped.php',50],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/google/src/Google/Service','Webmasters.php',375],['lib/horde/framework/Horde','Variables.php',297],['lib','outputcomponents.php',2700],['lib','outputcomponents.php',3375],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/zend/Zend','Date.php',1081],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['comment','lib.php',675],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',86],['lib/horde/framework/Horde','Stream.php',116],['backup/cc/cc_lib/gral_lib','cssparser.php',111],['lib/lessphp','Output.php',18],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib','adminlib.php',736],['lib','adminlib.php',895],['lib','adminlib.php',1447],['lib','csslib.php',1508],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib','navigationlib.php',302],['lib','navigationlib.php',758],['lib','navigationlib.php',3288],['lib','navigationlib.php',3542],['lib/phpexcel/PHPExcel','HashTable.php',85],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454]], 5988],
'end_tag': ['end_tag', '', [['backup/util/xml/parser','progressive_parser.class.php',261],['lib','outputcomponents.php',1086],['backup/util/xml','xml_writer.class.php',177]], 858],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',2001]], 277],
'pix_url': ['pix_url', 'Return the URL for an image ', [['lib','outputlib.php',1356],['lib','outputrenderers.php',234]], 406],
'out': ['out', 'Returns the string ', [['lib','moodlelib.php',9451],['lib','weblib.php',547],['lib','tablelib.php',1526],['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['report/loglive/classes','table_log_ajax.php',37]], 549],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1331]], 365],
'instance_is_visible': ['instance_is_visible', 'Determine whether a module instance is visible within a course ', [['lib','datalib.php',1510]], 6],
'workshop_update_grades': ['workshop_update_grades', 'Update workshop grades in the gradebook ', [['mod/workshop','lib.php',1098]], 1],
'create': ['create', 'Creates a new 2048 bit RSA key pair and returns a unique ID that can be used to reference this key pair when launching new instances. ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',39],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',271],['repository/filesystem','lib.php',283],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',39],['lib/google/src/Google/Service','Gmail.php',670],['lib/google/src/Google/Service','Gmail.php',827],['course','lib.php',2874],['lib/classes/event','base.php',139],['lib/google/src/Google/Service','Genomics.php',618],['lib/google/src/Google/Service','Genomics.php',717],['lib/google/src/Google/Service','Genomics.php',850],['lib/google/src/Google/Service','Genomics.php',1313],['lib','modinfolib.php',1747],['calendar','lib.php',2651],['lib/zend/Zend/Service/Amazon','Sqs.php',82],['lib','weblib.php',3048],['mod/lesson','locallib.php',1013],['mod/lesson','locallib.php',2166],['mod/lesson','locallib.php',3203],['lib/google/src/Google/Service','Fitness.php',340],['lib/google/src/Google/Service','TagManager.php',1034],['lib/google/src/Google/Service','TagManager.php',1124],['lib/google/src/Google/Service','TagManager.php',1217],['lib/google/src/Google/Service','TagManager.php',1310],['lib/google/src/Google/Service','TagManager.php',1403],['lib/google/src/Google/Service','TagManager.php',1497],['lib/google/src/Google/Service','TagManager.php',1591],['lib/google/src/Google/Service','TagManager.php',1742],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Container.php',314],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['repository','lib.php',206],['repository','lib.php',1960],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',555],['lib/google/src/Google/Service','Games.php',1648],['lib/google/src/Google/Service','Games.php',2012],['lib/google/src/Google/Service','MapsEngine.php',1676],['lib/google/src/Google/Service','MapsEngine.php',1976],['lib/google/src/Google/Service','MapsEngine.php',2252],['lib/google/src/Google/Service','MapsEngine.php',2329],['lib/google/src/Google/Service','MapsEngine.php',2897],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Pubsub.php',219],['lib/google/src/Google/Service','Pubsub.php',364],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/simplepie/library/SimplePie','Registry.php',153],['lib','navigationlib.php',266],['lib/google/src/Google/Service','Dns.php',282],['lib/google/src/Google/Service','Dns.php',355],['lib','coursecatlib.php',328],['mod/quiz/classes','structure.php',65]], 3074],
'workshop_grade_item_category_update': ['workshop_grade_item_category_update', 'Update the grade items categories if they are changed via mod_form.php ', [['mod/workshop','lib.php',1153]], 2],
'grade_floatval': ['grade_floatval', 'Convert a number to 5 decimal point float, an empty string or a null db compatible format (we need this to decide if db value changed) ', [['lib','gradelib.php',1434]], 53],
'workshop_get_view_actions': ['workshop_get_view_actions', 'List the actions that correspond to a view of this module. This is used by the participation report. ', [['mod/workshop','lib.php',250]], 0],
'submission_url': ['submission_url', '', [['mod/workshop','locallib.php',1453]], 12],
'isguestuser': ['isguestuser', 'Determines if a user is logged in as real guest user with username \'guest\'. ', [['lib','accesslib.php',1922]], 237],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',768]], 607],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'workshop_reset_userdata': ['workshop_reset_userdata', 'Performs the reset of all workshop instances in the course. ', [['mod/workshop','lib.php',1786]], 0],
'format_module_intro': ['format_module_intro', 'Formats activity intro text ', [['lib','weblib.php',1473]], 57],
'fields': ['fields', 'Get the value of a field in the current row by column name. Will not work if ADODB_FETCH_MODE is set to ADODB_FETCH_NUM. ', [['lib/adodb','adodb.inc.php',3469],['lib/adodb','adodb.inc.php',4073],['lib/adodb/drivers','adodb-odbtp.inc.php',718],['lib/adodb/drivers','adodb-sqlite.inc.php',369],['lib/adodb/drivers','adodb-pdo.inc.php',611],['lib/adodb/drivers','adodb-mysqli.inc.php',963],['lib/adodb/drivers','adodb-mssql.inc.php',904],['mod/quiz/classes','admin_review_setting.php',65],['lib/adodb/drivers','adodb-postgres64.inc.php',951],['lib/adodb/drivers','adodb-oracle.inc.php',265],['lib/adodb/drivers','adodb-ado.inc.php',373],['lib','outputcomponents.php',235],['lib/adodb/drivers','adodb-ado5.inc.php',410],['lib/adodb/drivers','adodb-db2.inc.php',754],['lib/adodb/drivers','adodb-sqlite3.inc.php',399],['lib/adodb/drivers','adodb-mssqlnative.inc.php',888],['lib/adodb/drivers','adodb-ibase.inc.php',833],['lib/adodb/drivers','adodb-oci8po.inc.php',91],['lib/adodb/drivers','adodb-ads.inc.php',690],['lib/adodb/drivers','adodb-odbc.inc.php',642],['lib/adodb/drivers','adodb-mysql.inc.php',764],['lib/adodb/drivers','adodb-oci8.inc.php',1549]], 145],
'groups_get_activity_allowed_groups': ['groups_get_activity_allowed_groups', 'Gets a list of groups that the user is allowed to access within the specified activity. ', [['lib','grouplib.php',866]], 14],
'heading': ['heading', 'Get the heading for this page. ', [['grade/report/singleview/classes/local/screen','grade.php',283],['grade/report/singleview/classes/local/screen','user.php',281],['lib','outputrenderers.php',2957],['lib','outputrenderers.php',4080],['lib','outputrenderers.php',4254],['grade/report/singleview/classes/local/screen','screen.php',197]], 763],
'workshop_calendar_update': ['workshop_calendar_update', 'Updates the calendar events associated to the given workshop ', [['mod/workshop','lib.php',1655]], 3],
'workshop_cron': ['workshop_cron', 'Regular jobs to execute via cron ', [['mod/workshop','lib.php',935]], 0],
's': ['s', 'Count of attempts selected by $this->whichattempts ', [['mod/quiz/report/statistics/classes','calculated.php',91],['lib','weblib.php',84]], 988],
'workshop_add_instance': ['workshop_add_instance', 'Saves a new instance of the workshop into the database ', [['mod/workshop','lib.php',59]], 0],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pgsql_native_moodle_database.php',1137],['lib/dml','oci_native_moodle_database.php',1355],['lib/dml','sqlsrv_native_moodle_database.php',1081],['lib/dml','mssql_native_moodle_database.php',1003],['lib/dml','mysqli_native_moodle_database.php',1397],['lib/dml/tests','dml_test.php',5430],['lib/dml','pdo_moodle_database.php',460]], 565],
'get_plugin_list': ['get_plugin_list', 'Get list of plugins of given type. ', [['lib/classes','component.php',781],['lib','deprecatedlib.php',467],['admin/tool/monitor/classes','eventlist.php',176]], 184],
'close': ['close', 'Close the connection to the server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',486],['lib/tests','completionlib_test.php',888],['lib/adodb','adodb.inc.php',2164],['lib/adodb','adodb.inc.php',2844],['lib/adodb','adodb.inc.php',3536],['lib','webdavlib.php',176],['admin/tool/uploaduser','locallib.php',149],['lib/dml','oci_native_moodle_recordset.php',80],['lib/tcpdf','tcpdf.php',2943],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['lib','excellib.class.php',93],['lib/zend/Zend/Http/Client/Adapter','Test.php',187],['lib/classes/dml','recordset_walk.php',153],['mod/assign/feedback/offline','importgradeslib.php',178],['lib/pear/Net','GeoIP.php',556],['backup/util/helper','backup_array_iterator.class.php',63],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',109],['lib/zend/Zend/Http/Client/Adapter','Proxy.php',266],['lib/dml','mssql_native_moodle_recordset.php',87],['lib/pear/Auth','RADIUS.php',542],['lib/pear/Auth','RADIUS.php',703],['lib/pear/Auth','RADIUS.php',824],['lib/phpmailer','class.smtp.php',507],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',80],['lib/phpunit/classes','event_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Interface.php',73],['lib/dml','pgsql_native_moodle_recordset.php',104],['auth/fc','fcFPP.php',72],['lib/filestorage','zip_archive.php',183],['lib','odslib.class.php',71],['lib/horde/framework/Horde/Socket','Client.php',135],['question/engine/tests','helpers.php',1225],['grade','lib.php',323],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib','csvlib.class.php',256],['lib/google/src/Google/Logger','File.php',130],['lib/horde/framework/Horde','Stream.php',585],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpunit/classes','message_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Curl.php',460],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',109],['backup/util/helper','backup_null_iterator.class.php',53],['grade/export','lib.php',662],['lib/dml','pdo_moodle_recordset.php',79]], 1036],
'groups_get_all_groups': ['groups_get_all_groups', 'Gets array of all groups in a specified course. ', [['lib','grouplib.php',189]], 104],
'workshop_page_type_list': ['workshop_page_type_list', 'Return a list of page types ', [['mod/workshop','lib.php',1640]], 0],
'get_all_user_name_fields': ['get_all_user_name_fields', 'A centralised location for the all name fields. Returns an array / sql string snippet. ', [['lib','moodlelib.php',3345]], 94],
'is_directory': ['is_directory', 'Whether or not this is a directory ', [['lib/filebrowser','file_info_context_course.php',372],['lib/filebrowser','file_info_context_course.php',657],['lib/filebrowser','file_info_context_course.php',803],['lib/filebrowser','file_info_context_system.php',83],['mod/book','locallib.php',454],['lib/filebrowser','file_info_context_coursecat.php',143],['mod/forum','locallib.php',463],['lib/filebrowser','file_info_context_module.php',249],['lib/filebrowser','file_info_context_user.php',265],['mod/data','locallib.php',475],['mod/workshop','fileinfolib.php',82],['mod/workshop','fileinfolib.php',241],['mod/imscp','locallib.php',328],['mod/lesson/classes','file_info.php',94],['mod/glossary','locallib.php',525],['lib/filestorage','stored_file.php',310],['lib/filebrowser','virtual_root_file.php',60],['lib/filebrowser','file_info_stored.php',267]], 131],
'groups_get_activity_groupmode': ['groups_get_activity_groupmode', 'Returns effective groupmode used in activity, course setting overrides activity setting if groupmodeforce enabled. ', [['lib','grouplib.php',468]], 133],
'get_file_by_hash': ['get_file_by_hash', 'Fetch file using local file full pathname hash ', [['lib/filestorage','file_storage.php',427]], 75],
'get_file': ['get_file', 'Return file path. ', [['repository/filesystem','lib.php',183],['repository/flickr_public','lib.php',453],['repository/boxnet','lib.php',179],['lib','webdavlib.php',391],['repository/dropbox','lib.php',410],['mod/data/field/picture','field.class.php',124],['repository/s3','lib.php',201],['lib/filestorage','file_storage.php',448],['repository/skydrive','lib.php',130],['repository/webdav','lib.php',73],['repository/dropbox','locallib.php',114],['repository','lib.php',1701],['repository/flickr','lib.php',277],['repository/googledocs','lib.php',408],['lib','externallib.php',870],['mod/data/field/file','field.class.php',121],['repository/equella','lib.php',166],['repository/alfresco','lib.php',195]], 162],
'workshop_extend_navigation': ['workshop_extend_navigation', 'Extends the global navigation tree by adding workshop nodes if there is a relevant content ', [['mod/workshop','lib.php',1596]], 0],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','moodle_database.php',1815],['lib/dml','sqlite3_pdo_moodle_database.php',337]], 778],
'get_groups': ['get_groups', 'Returns groups that the current user belongs to on the course. Note: If not already available, this may make a database query. ', [['lib','modinfolib.php',289],['group','externallib.php',155],['group','externallib.php',1338]], 30],
'workshop_get_extra_capabilities': ['workshop_get_extra_capabilities', 'Returns all other caps used in the module ', [['mod/workshop','lib.php',1052]], 0],
'workshop_reset_course_form_defaults': ['workshop_reset_course_form_defaults', 'Provides default values for the workshop settings in the course reset form. ', [['mod/workshop','lib.php',1770]], 0],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',5950]], 486],
'send_file_not_found': ['send_file_not_found', 'Requested file is not found or not accessible, does not return, terminates script ', [['lib','filelib.php',1758]], 126],
'is_readable': ['is_readable', '', [], 207],
'array_key_exists': ['array_key_exists', '', [], 1539],
'max': ['max', '', [], 1096],
'explode': ['explode', '', [], 1599],
'is_array': ['is_array', '', [], 1820],
'array_intersect': ['array_intersect', '', [], 51],
'array_merge': ['array_merge', '', [], 2320],
'count': ['count', '', [], 3984],
'defined': ['defined', '', [], 4098],
'is_null': ['is_null', '', [], 1992],
'sha1': ['sha1', '', [], 188],
'call_user_func_array': ['call_user_func_array', '', [], 101],
'time': ['time', '', [], 1768],
'method_exists': ['method_exists', '', [], 279],
'array_shift': ['array_shift', '', [], 607],
'reset': ['reset', '', [], 1070],
'call_user_func': ['call_user_func', '', [], 126],
'array_keys': ['array_keys', '', [], 1152],
'implode': ['implode', '', [], 1259],
'link': ['link', '', [], 635],
'dirname': ['dirname', '', [], 1071]};
CLASS_DATA={
'virtual_root_file': ['virtual_root_file', 'Represents the root directory of an empty file area in the tree navigated by {@link file_browser}. ', [['lib/filebrowser','virtual_root_file.php',28]], 22],
'workshop_file_info_overallfeedback_container': ['workshop_file_info_overallfeedback_container', 'Represents virtual root node for all files in overall feedbacks ', [['mod/workshop','fileinfolib.php',184]], 1],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',214]], 867],
'grade_item': ['grade_item', 'Class representing a grade item. ', [['lib/grade','grade_item.php',29]], 206],
'core_collator': ['core_collator', 'A collator class with static methods that can be used for sorting. ', [['lib/classes','collator.php',28]], 130],
'file_info_stored': ['file_info_stored', 'Represents an actual file or folder - a row in the file table in the tree navigated by {@link file_browser}. ', [['lib/filebrowser','file_info_stored.php',28]], 32],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'phase_switched': ['phase_switched', 'The mod_workshop phase switched event class. ', [['mod/workshop/classes/event','phase_switched.php',28]], 2],
'user_picture': ['user_picture', 'Data structure representing a user picture. ', [['lib','outputcomponents.php',142]], 135],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',6988]], 942],
'workshop_file_info_submissions_container': ['workshop_file_info_submissions_container', 'Represents virtual root node for all submissions ', [['mod/workshop','fileinfolib.php',29]], 1],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1052]], 4832],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 485],
'workshop': ['workshop', 'Full-featured workshop API ', [['mod/workshop','locallib.php',37]], 134],
'settings_navigation': ['settings_navigation', 'Class used to manage the settings option for the current page ', [['lib','navigationlib.php',3384]], 17],
'grade_category': ['grade_category', 'grade_category is an object mapped to DB table {prefix}grade_categories ', [['lib/grade','grade_category.php',29]], 144],
'calendar_event': ['calendar_event', 'Manage calendar events ', [['calendar','lib.php',1916]], 59]};
CONST_DATA={
'FEATURE_MOD_INTRO': ['FEATURE_MOD_INTRO', '', [['lib','moodlelib.php',426]], 31],
'FEATURE_PLAGIARISM': ['FEATURE_PLAGIARISM', '', [['lib','moodlelib.php',402]], 4],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 462],
'FEATURE_GRADE_HAS_GRADE': ['FEATURE_GRADE_HAS_GRADE', '', [['lib','moodlelib.php',394]], 29],
'GRADE_AGGREGATE_WEIGHTED_MEAN': ['GRADE_AGGREGATE_WEIGHTED_MEAN', '', [['lib/grade','constants.php',58]], 19],
'FEATURE_SHOW_DESCRIPTION': ['FEATURE_SHOW_DESCRIPTION', '', [['lib','moodlelib.php',437]], 22],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1252],
'FEATURE_BACKUP_MOODLE2': ['FEATURE_BACKUP_MOODLE2', '', [['lib','moodlelib.php',434]], 34],
'FEATURE_COMPLETION_TRACKS_VIEWS': ['FEATURE_COMPLETION_TRACKS_VIEWS', '', [['lib','moodlelib.php',405]], 23],
'PARAM_NOTAGS': ['PARAM_NOTAGS', '', [['lib','moodlelib.php',172]], 176],
'FEATURE_GROUPS': ['FEATURE_GROUPS', '', [['lib','moodlelib.php',414]], 25],
'GRADE_TYPE_VALUE': ['GRADE_TYPE_VALUE', '', [['lib/grade','constants.php',85]], 71],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532],
'SEPARATEGROUPS': ['SEPARATEGROUPS', '', [['lib','grouplib.php',34]], 158],
'FEATURE_GROUPINGS': ['FEATURE_GROUPINGS', '', [['lib','moodlelib.php',416]], 23]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
