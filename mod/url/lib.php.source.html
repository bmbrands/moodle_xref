<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/url/lib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/url';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/url/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Mandatory public API of url module</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @package    mod_url</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  2009 Petr Skoda  {@link http://skodak.org}</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die;
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment">/**</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * List of features supported in URL module</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @param string $feature FEATURE_xx constant for requested feature</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @return mixed True if module supports feature, false if not, null if doesn't know</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> */</span>
<a name="l33"><span class="linenum">  33</span></a>  function <a class="function" onClick="logFunction('url_supports')" href="../../_functions/url_supports.html" onMouseOver="funcPopup(event,'url_supports')">url_supports</a>(<a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l34"><span class="linenum">  34</span></a>      switch(<a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l35"><span class="linenum">  35</span></a>          case <a class="constant" onClick="logConstant('FEATURE_MOD_ARCHETYPE')" href="../../_constants/FEATURE_MOD_ARCHETYPE.html" onMouseOver="constPopup(event,'FEATURE_MOD_ARCHETYPE')">FEATURE_MOD_ARCHETYPE</a>:           return <a class="constant" onClick="logConstant('MOD_ARCHETYPE_RESOURCE')" href="../../_constants/MOD_ARCHETYPE_RESOURCE.html" onMouseOver="constPopup(event,'MOD_ARCHETYPE_RESOURCE')">MOD_ARCHETYPE_RESOURCE</a>;
<a name="l36"><span class="linenum">  36</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPS')" href="../../_constants/FEATURE_GROUPS.html" onMouseOver="constPopup(event,'FEATURE_GROUPS')">FEATURE_GROUPS</a>:                  return false;
<a name="l37"><span class="linenum">  37</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPINGS')" href="../../_constants/FEATURE_GROUPINGS.html" onMouseOver="constPopup(event,'FEATURE_GROUPINGS')">FEATURE_GROUPINGS</a>:               return false;
<a name="l38"><span class="linenum">  38</span></a>          case <a class="constant" onClick="logConstant('FEATURE_MOD_INTRO')" href="../../_constants/FEATURE_MOD_INTRO.html" onMouseOver="constPopup(event,'FEATURE_MOD_INTRO')">FEATURE_MOD_INTRO</a>:               return true;
<a name="l39"><span class="linenum">  39</span></a>          case <a class="constant" onClick="logConstant('FEATURE_COMPLETION_TRACKS_VIEWS')" href="../../_constants/FEATURE_COMPLETION_TRACKS_VIEWS.html" onMouseOver="constPopup(event,'FEATURE_COMPLETION_TRACKS_VIEWS')">FEATURE_COMPLETION_TRACKS_VIEWS</a>: return true;
<a name="l40"><span class="linenum">  40</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_HAS_GRADE')" href="../../_constants/FEATURE_GRADE_HAS_GRADE.html" onMouseOver="constPopup(event,'FEATURE_GRADE_HAS_GRADE')">FEATURE_GRADE_HAS_GRADE</a>:         return false;
<a name="l41"><span class="linenum">  41</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_OUTCOMES')" href="../../_constants/FEATURE_GRADE_OUTCOMES.html" onMouseOver="constPopup(event,'FEATURE_GRADE_OUTCOMES')">FEATURE_GRADE_OUTCOMES</a>:          return false;
<a name="l42"><span class="linenum">  42</span></a>          case <a class="constant" onClick="logConstant('FEATURE_BACKUP_MOODLE2')" href="../../_constants/FEATURE_BACKUP_MOODLE2.html" onMouseOver="constPopup(event,'FEATURE_BACKUP_MOODLE2')">FEATURE_BACKUP_MOODLE2</a>:          return true;
<a name="l43"><span class="linenum">  43</span></a>          case <a class="constant" onClick="logConstant('FEATURE_SHOW_DESCRIPTION')" href="../../_constants/FEATURE_SHOW_DESCRIPTION.html" onMouseOver="constPopup(event,'FEATURE_SHOW_DESCRIPTION')">FEATURE_SHOW_DESCRIPTION</a>:        return true;
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>          default: return null;
<a name="l46"><span class="linenum">  46</span></a>      }
<a name="l47"><span class="linenum">  47</span></a>  }
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">/**</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> * Returns all other caps used in module</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> * @return array</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment"> */</span>
<a name="l53"><span class="linenum">  53</span></a>  function <a class="function" onClick="logFunction('url_get_extra_capabilities')" href="../../_functions/url_get_extra_capabilities.html" onMouseOver="funcPopup(event,'url_get_extra_capabilities')">url_get_extra_capabilities</a>() {
<a name="l54"><span class="linenum">  54</span></a>      return array('moodle/site:accessallgroups');
<a name="l55"><span class="linenum">  55</span></a>  }
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">/**</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * This function is used by the reset_course_userdata function in moodlelib.</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> * @param $data the data submitted from the reset course.</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment"> * @return array status array</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment"> */</span>
<a name="l62"><span class="linenum">  62</span></a>  function <a class="function" onClick="logFunction('url_reset_userdata')" href="../../_functions/url_reset_userdata.html" onMouseOver="funcPopup(event,'url_reset_userdata')">url_reset_userdata</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l63"><span class="linenum">  63</span></a>      return array();
<a name="l64"><span class="linenum">  64</span></a>  }
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">/**</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment"> * List the actions that correspond to a view of this module.</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> *</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment"> *       crud = 'r' and edulevel = LEVEL_PARTICIPATING will</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment"> *       be considered as view action.</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> *</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment"> * @return array</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment"> */</span>
<a name="l76"><span class="linenum">  76</span></a>  function <a class="function" onClick="logFunction('url_get_view_actions')" href="../../_functions/url_get_view_actions.html" onMouseOver="funcPopup(event,'url_get_view_actions')">url_get_view_actions</a>() {
<a name="l77"><span class="linenum">  77</span></a>      return array('view', 'view all');
<a name="l78"><span class="linenum">  78</span></a>  }
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">/**</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment"> * List the actions that correspond to a post of this module.</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment"> *</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment"> *       crud = ('c' || 'u' || 'd') and edulevel = LEVEL_PARTICIPATING</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment"> *       will be considered as post action.</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment"> *</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment"> * @return array</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment"> */</span>
<a name="l90"><span class="linenum">  90</span></a>  function <a class="function" onClick="logFunction('url_get_post_actions')" href="../../_functions/url_get_post_actions.html" onMouseOver="funcPopup(event,'url_get_post_actions')">url_get_post_actions</a>() {
<a name="l91"><span class="linenum">  91</span></a>      return array('update', 'add');
<a name="l92"><span class="linenum">  92</span></a>  }
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">/**</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment"> * Add url instance.</span>
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment"> * @param object $data</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment"> * @param object $mform</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment"> * @return int new url instance id</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment"> */</span>
<a name="l100"><span class="linenum"> 100</span></a>  function <a class="function" onClick="logFunction('url_add_instance')" href="../../_functions/url_add_instance.html" onMouseOver="funcPopup(event,'url_add_instance')">url_add_instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l101"><span class="linenum"> 101</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../mod/url/locallib.php.html">/mod/url/locallib.php</a>');
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>      <a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a> = array();
<a name="l106"><span class="linenum"> 106</span></a>      for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>=0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; 100; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l107"><span class="linenum"> 107</span></a>          <a class="var it4851" onMouseOver="hilite(4851)" onMouseOut="lolite()" onClick="logVariable('parameter')" href="../../_variables/parameter.html">$parameter</a> = &quot;parameter_<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&quot;;
<a name="l108"><span class="linenum"> 108</span></a>          <a class="var it3332" onMouseOver="hilite(3332)" onMouseOut="lolite()" onClick="logVariable('variable')" href="../../_variables/variable.html">$variable</a>  = &quot;variable_<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&quot;;
<a name="l109"><span class="linenum"> 109</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="var it4851" onMouseOver="hilite(4851)" onMouseOut="lolite()" onClick="logVariable('parameter')" href="../../_variables/parameter.html">$parameter</a>) or empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="var it3332" onMouseOver="hilite(3332)" onMouseOut="lolite()" onClick="logVariable('variable')" href="../../_variables/variable.html">$variable</a>)) {
<a name="l110"><span class="linenum"> 110</span></a>              continue;
<a name="l111"><span class="linenum"> 111</span></a>          }
<a name="l112"><span class="linenum"> 112</span></a>          <a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="var it4851" onMouseOver="hilite(4851)" onMouseOut="lolite()" onClick="logVariable('parameter')" href="../../_variables/parameter.html">$parameter</a>] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="var it3332" onMouseOver="hilite(3332)" onMouseOut="lolite()" onClick="logVariable('variable')" href="../../_variables/variable.html">$variable</a>;
<a name="l113"><span class="linenum"> 113</span></a>      }
<a name="l114"><span class="linenum"> 114</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('parameters')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/parameters.html">parameters</a> = <a class="phpfunction" onClick="logFunction('serialize')" href="../../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a>);
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>      <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a> = array();
<a name="l117"><span class="linenum"> 117</span></a>      if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('display')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/display.html">display</a> == <a class="constant" onClick="logConstant('RESOURCELIB_DISPLAY_POPUP')" href="../../_constants/RESOURCELIB_DISPLAY_POPUP.html" onMouseOver="constPopup(event,'RESOURCELIB_DISPLAY_POPUP')">RESOURCELIB_DISPLAY_POPUP</a>) {
<a name="l118"><span class="linenum"> 118</span></a>          <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['popupwidth']  = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('popupwidth')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/popupwidth.html">popupwidth</a>;
<a name="l119"><span class="linenum"> 119</span></a>          <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['popupheight'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('popupheight')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/popupheight.html">popupheight</a>;
<a name="l120"><span class="linenum"> 120</span></a>      }
<a name="l121"><span class="linenum"> 121</span></a>      if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('display')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/display.html">display</a>, array(<a class="constant" onClick="logConstant('RESOURCELIB_DISPLAY_AUTO')" href="../../_constants/RESOURCELIB_DISPLAY_AUTO.html" onMouseOver="constPopup(event,'RESOURCELIB_DISPLAY_AUTO')">RESOURCELIB_DISPLAY_AUTO</a>, <a class="constant" onClick="logConstant('RESOURCELIB_DISPLAY_EMBED')" href="../../_constants/RESOURCELIB_DISPLAY_EMBED.html" onMouseOver="constPopup(event,'RESOURCELIB_DISPLAY_EMBED')">RESOURCELIB_DISPLAY_EMBED</a>, <a class="constant" onClick="logConstant('RESOURCELIB_DISPLAY_FRAME')" href="../../_constants/RESOURCELIB_DISPLAY_FRAME.html" onMouseOver="constPopup(event,'RESOURCELIB_DISPLAY_FRAME')">RESOURCELIB_DISPLAY_FRAME</a>))) {
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['printintro']   = (int)!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('printintro')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/printintro.html">printintro</a>);
<a name="l123"><span class="linenum"> 123</span></a>      }
<a name="l124"><span class="linenum"> 124</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('displayoptions')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/displayoptions.html">displayoptions</a> = <a class="phpfunction" onClick="logFunction('serialize')" href="../../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>);
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('externalurl')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/externalurl.html">externalurl</a> = <a class="function" onClick="logFunction('url_fix_submitted_url')" href="../../_functions/url_fix_submitted_url.html" onMouseOver="funcPopup(event,'url_fix_submitted_url')">url_fix_submitted_url</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('externalurl')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/externalurl.html">externalurl</a>);
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l129"><span class="linenum"> 129</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('url', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>      return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l132"><span class="linenum"> 132</span></a>  }
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">/**</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment"> * Update url instance.</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment"> * @param object $data</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment"> * @param object $mform</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment"> * @return bool true</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment"> */</span>
<a name="l140"><span class="linenum"> 140</span></a>  function <a class="function" onClick="logFunction('url_update_instance')" href="../../_functions/url_update_instance.html" onMouseOver="funcPopup(event,'url_update_instance')">url_update_instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l141"><span class="linenum"> 141</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l142"><span class="linenum"> 142</span></a>  
<a name="l143"><span class="linenum"> 143</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../mod/url/locallib.php.html">/mod/url/locallib.php</a>');
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>      <a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a> = array();
<a name="l146"><span class="linenum"> 146</span></a>      for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>=0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; 100; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l147"><span class="linenum"> 147</span></a>          <a class="var it4851" onMouseOver="hilite(4851)" onMouseOut="lolite()" onClick="logVariable('parameter')" href="../../_variables/parameter.html">$parameter</a> = &quot;parameter_<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&quot;;
<a name="l148"><span class="linenum"> 148</span></a>          <a class="var it3332" onMouseOver="hilite(3332)" onMouseOut="lolite()" onClick="logVariable('variable')" href="../../_variables/variable.html">$variable</a>  = &quot;variable_<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&quot;;
<a name="l149"><span class="linenum"> 149</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="var it4851" onMouseOver="hilite(4851)" onMouseOut="lolite()" onClick="logVariable('parameter')" href="../../_variables/parameter.html">$parameter</a>) or empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="var it3332" onMouseOver="hilite(3332)" onMouseOut="lolite()" onClick="logVariable('variable')" href="../../_variables/variable.html">$variable</a>)) {
<a name="l150"><span class="linenum"> 150</span></a>              continue;
<a name="l151"><span class="linenum"> 151</span></a>          }
<a name="l152"><span class="linenum"> 152</span></a>          <a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="var it4851" onMouseOver="hilite(4851)" onMouseOut="lolite()" onClick="logVariable('parameter')" href="../../_variables/parameter.html">$parameter</a>] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="var it3332" onMouseOver="hilite(3332)" onMouseOut="lolite()" onClick="logVariable('variable')" href="../../_variables/variable.html">$variable</a>;
<a name="l153"><span class="linenum"> 153</span></a>      }
<a name="l154"><span class="linenum"> 154</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('parameters')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/parameters.html">parameters</a> = <a class="phpfunction" onClick="logFunction('serialize')" href="../../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it2245" onMouseOver="hilite(2245)" onMouseOut="lolite()" onClick="logVariable('parameters')" href="../../_variables/parameters.html">$parameters</a>);
<a name="l155"><span class="linenum"> 155</span></a>  
<a name="l156"><span class="linenum"> 156</span></a>      <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a> = array();
<a name="l157"><span class="linenum"> 157</span></a>      if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('display')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/display.html">display</a> == <a class="constant" onClick="logConstant('RESOURCELIB_DISPLAY_POPUP')" href="../../_constants/RESOURCELIB_DISPLAY_POPUP.html" onMouseOver="constPopup(event,'RESOURCELIB_DISPLAY_POPUP')">RESOURCELIB_DISPLAY_POPUP</a>) {
<a name="l158"><span class="linenum"> 158</span></a>          <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['popupwidth']  = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('popupwidth')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/popupwidth.html">popupwidth</a>;
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['popupheight'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('popupheight')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/popupheight.html">popupheight</a>;
<a name="l160"><span class="linenum"> 160</span></a>      }
<a name="l161"><span class="linenum"> 161</span></a>      if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('display')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/display.html">display</a>, array(<a class="constant" onClick="logConstant('RESOURCELIB_DISPLAY_AUTO')" href="../../_constants/RESOURCELIB_DISPLAY_AUTO.html" onMouseOver="constPopup(event,'RESOURCELIB_DISPLAY_AUTO')">RESOURCELIB_DISPLAY_AUTO</a>, <a class="constant" onClick="logConstant('RESOURCELIB_DISPLAY_EMBED')" href="../../_constants/RESOURCELIB_DISPLAY_EMBED.html" onMouseOver="constPopup(event,'RESOURCELIB_DISPLAY_EMBED')">RESOURCELIB_DISPLAY_EMBED</a>, <a class="constant" onClick="logConstant('RESOURCELIB_DISPLAY_FRAME')" href="../../_constants/RESOURCELIB_DISPLAY_FRAME.html" onMouseOver="constPopup(event,'RESOURCELIB_DISPLAY_FRAME')">RESOURCELIB_DISPLAY_FRAME</a>))) {
<a name="l162"><span class="linenum"> 162</span></a>          <a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>['printintro']   = (int)!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('printintro')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/printintro.html">printintro</a>);
<a name="l163"><span class="linenum"> 163</span></a>      }
<a name="l164"><span class="linenum"> 164</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('displayoptions')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/displayoptions.html">displayoptions</a> = <a class="phpfunction" onClick="logFunction('serialize')" href="../../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it4390" onMouseOver="hilite(4390)" onMouseOut="lolite()" onClick="logVariable('displayoptions')" href="../../_variables/displayoptions.html">$displayoptions</a>);
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('externalurl')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/externalurl.html">externalurl</a> = <a class="function" onClick="logFunction('url_fix_submitted_url')" href="../../_functions/url_fix_submitted_url.html" onMouseOver="funcPopup(event,'url_fix_submitted_url')">url_fix_submitted_url</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('externalurl')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/externalurl.html">externalurl</a>);
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l169"><span class="linenum"> 169</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>           = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('instance')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('url', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>      return true;
<a name="l174"><span class="linenum"> 174</span></a>  }
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">/**</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment"> * Delete url instance.</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment"> * @param int $id</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment"> * @return bool true</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment"> */</span>
<a name="l181"><span class="linenum"> 181</span></a>  function <a class="function" onClick="logFunction('url_delete_instance')" href="../../_functions/url_delete_instance.html" onMouseOver="funcPopup(event,'url_delete_instance')">url_delete_instance</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l182"><span class="linenum"> 182</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>      if (!<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('url', array('id'=&gt;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>))) {
<a name="l185"><span class="linenum"> 185</span></a>          return false;
<a name="l186"><span class="linenum"> 186</span></a>      }
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">    // note: all context files are deleted automatically</span>
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('url', array('id'=&gt;<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('id')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>      return true;
<a name="l193"><span class="linenum"> 193</span></a>  }
<a name="l194"><span class="linenum"> 194</span></a>  
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">/**</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment"> * Given a course_module object, this function returns any</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment"> * &quot;extra&quot; information that may be needed when printing</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment"> * this activity in a course listing.</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment"> *</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment"> * See {@link get_array_of_activities()} in course/lib.php</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment"> *</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment"> * @param object $coursemodule</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment"> * @return cached_cm_info info</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment"> */</span>
<a name="l205"><span class="linenum"> 205</span></a>  function <a class="function" onClick="logFunction('url_get_coursemodule_info')" href="../../_functions/url_get_coursemodule_info.html" onMouseOver="funcPopup(event,'url_get_coursemodule_info')">url_get_coursemodule_info</a>(<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>) {
<a name="l206"><span class="linenum"> 206</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l207"><span class="linenum"> 207</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>/mod/url/locallib.php&quot;);
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>      if (!<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('url', array('id'=&gt;<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>-&gt;<a onClick="logVariable('instance')" class="var it43092" onMouseOver="hilite(43092)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>),
<a name="l210"><span class="linenum"> 210</span></a>              'id, name, display, displayoptions, externalurl, parameters, intro, introformat')) {
<a name="l211"><span class="linenum"> 211</span></a>          return NULL;
<a name="l212"><span class="linenum"> 212</span></a>      }
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>      <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = <span class="keyword">new </span><a class="class" onClick="logClass('cached_cm_info')" href="../../_classes/cached_cm_info.html" onMouseOver="classPopup(event,'cached_cm_info')">cached_cm_info</a>();
<a name="l215"><span class="linenum"> 215</span></a>      <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('name')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('name')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">    //note: there should be a way to differentiate links from normal resources</span>
<a name="l218"><span class="linenum"> 218</span></a>      <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('icon')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/icon.html">icon</a> = <a class="function" onClick="logFunction('url_guess_icon')" href="../../_functions/url_guess_icon.html" onMouseOver="funcPopup(event,'url_guess_icon')">url_guess_icon</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('externalurl')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../../_variables/externalurl.html">externalurl</a>, 24);
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>      <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../_variables/display.html">$display</a> = <a class="function" onClick="logFunction('url_get_final_display_type')" href="../../_functions/url_get_final_display_type.html" onMouseOver="funcPopup(event,'url_get_final_display_type')">url_get_final_display_type</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>);
<a name="l221"><span class="linenum"> 221</span></a>  
<a name="l222"><span class="linenum"> 222</span></a>      if (<a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../_variables/display.html">$display</a> == <a class="constant" onClick="logConstant('RESOURCELIB_DISPLAY_POPUP')" href="../../_constants/RESOURCELIB_DISPLAY_POPUP.html" onMouseOver="constPopup(event,'RESOURCELIB_DISPLAY_POPUP')">RESOURCELIB_DISPLAY_POPUP</a>) {
<a name="l223"><span class="linenum"> 223</span></a>          <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../../_variables/fullurl.html">$fullurl</a> = &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/url/view.php?id=<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>-&gt;<a onClick="logVariable('id')" class="var it43092" onMouseOver="hilite(43092)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;redirect=1&quot;;
<a name="l224"><span class="linenum"> 224</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = empty(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('displayoptions')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../../_variables/displayoptions.html">displayoptions</a>) ? array() : <a class="phpfunction" onClick="logFunction('unserialize')" href="../../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('displayoptions')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../../_variables/displayoptions.html">displayoptions</a>);
<a name="l225"><span class="linenum"> 225</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../../_variables/width.html">$width</a>  = empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['popupwidth'])  ? 620 : <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['popupwidth'];
<a name="l226"><span class="linenum"> 226</span></a>          <a class="var it293" onMouseOver="hilite(293)" onMouseOut="lolite()" onClick="logVariable('height')" href="../../_variables/height.html">$height</a> = empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['popupheight']) ? 450 : <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['popupheight'];
<a name="l227"><span class="linenum"> 227</span></a>          <a class="var it4391" onMouseOver="hilite(4391)" onMouseOut="lolite()" onClick="logVariable('wh')" href="../../_variables/wh.html">$wh</a> = &quot;width=<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../../_variables/width.html">$width</a>,height=<a class="var it293" onMouseOver="hilite(293)" onMouseOut="lolite()" onClick="logVariable('height')" href="../../_variables/height.html">$height</a>,toolbar=no,location=no,menubar=no,copyhistory=no,status=no,directories=no,scrollbars=yes,resizable=yes&quot;;
<a name="l228"><span class="linenum"> 228</span></a>          <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('onclick')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/onclick.html">onclick</a> = &quot;window.<a class="function" onClick="logFunction('open')" href="../../_functions/open.html" onMouseOver="funcPopup(event,'open')">open</a>('<a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../../_variables/fullurl.html">$fullurl</a>', '', '<a class="var it4391" onMouseOver="hilite(4391)" onMouseOut="lolite()" onClick="logVariable('wh')" href="../../_variables/wh.html">$wh</a>'); return false;&quot;;
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>      } else if (<a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../../_variables/display.html">$display</a> == <a class="constant" onClick="logConstant('RESOURCELIB_DISPLAY_NEW')" href="../../_constants/RESOURCELIB_DISPLAY_NEW.html" onMouseOver="constPopup(event,'RESOURCELIB_DISPLAY_NEW')">RESOURCELIB_DISPLAY_NEW</a>) {
<a name="l231"><span class="linenum"> 231</span></a>          <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../../_variables/fullurl.html">$fullurl</a> = &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/url/view.php?id=<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>-&gt;<a onClick="logVariable('id')" class="var it43092" onMouseOver="hilite(43092)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;redirect=1&quot;;
<a name="l232"><span class="linenum"> 232</span></a>          <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('onclick')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/onclick.html">onclick</a> = &quot;window.<a class="function" onClick="logFunction('open')" href="../../_functions/open.html" onMouseOver="funcPopup(event,'open')">open</a>('<a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../../_variables/fullurl.html">$fullurl</a>'); return false;&quot;;
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>      }
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>      if (<a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>-&gt;<a onClick="logVariable('showdescription')" class="var it43092" onMouseOver="hilite(43092)" onMouseOut="lolite()" href="../../_variables/showdescription.html">showdescription</a>) {
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">        // Convert intro to html. Do not filter cached version, filters run at display time.</span>
<a name="l238"><span class="linenum"> 238</span></a>          <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('content')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = <a class="function" onClick="logFunction('format_module_intro')" href="../../_functions/format_module_intro.html" onMouseOver="funcPopup(event,'format_module_intro')">format_module_intro</a>('url', <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it1880" onMouseOver="hilite(1880)" onMouseOut="lolite()" onClick="logVariable('coursemodule')" href="../../_variables/coursemodule.html">$coursemodule</a>-&gt;<a onClick="logVariable('id')" class="var it43092" onMouseOver="hilite(43092)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l239"><span class="linenum"> 239</span></a>      }
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>      return <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>;
<a name="l242"><span class="linenum"> 242</span></a>  }
<a name="l243"><span class="linenum"> 243</span></a>  
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">/**</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment"> * Return a list of page types</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment"> * @param string $pagetype current page type</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment"> * @param stdClass $parentcontext Block's parent context</span>
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment"> * @param stdClass $currentcontext Current context of block</span>
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment"> */</span>
<a name="l250"><span class="linenum"> 250</span></a>  function <a class="function" onClick="logFunction('url_page_type_list')" href="../../_functions/url_page_type_list.html" onMouseOver="funcPopup(event,'url_page_type_list')">url_page_type_list</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../../_variables/parentcontext.html">$parentcontext</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../../_variables/currentcontext.html">$currentcontext</a>) {
<a name="l251"><span class="linenum"> 251</span></a>      <a class="var it9844" onMouseOver="hilite(9844)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a> = array('mod-url-*'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-url-x', 'url'));
<a name="l252"><span class="linenum"> 252</span></a>      return <a class="var it9844" onMouseOver="hilite(9844)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a>;
<a name="l253"><span class="linenum"> 253</span></a>  }
<a name="l254"><span class="linenum"> 254</span></a>  
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">/**</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment"> * Export URL resource contents</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment"> *</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment"> * @return array of file content</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment"> */</span>
<a name="l260"><span class="linenum"> 260</span></a>  function <a class="function" onClick="logFunction('url_export_contents')" href="../../_functions/url_export_contents.html" onMouseOver="funcPopup(event,'url_export_contents')">url_export_contents</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>) {
<a name="l261"><span class="linenum"> 261</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l262"><span class="linenum"> 262</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>/mod/url/locallib.php&quot;);
<a name="l263"><span class="linenum"> 263</span></a>      <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a> = array();
<a name="l264"><span class="linenum"> 264</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l265"><span class="linenum"> 265</span></a>  
<a name="l266"><span class="linenum"> 266</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l267"><span class="linenum"> 267</span></a>      <a class="var it40411" onMouseOver="hilite(40411)" onMouseOut="lolite()" onClick="logVariable('urlrecord')" href="../../_variables/urlrecord.html">$urlrecord</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('url', array('id'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l268"><span class="linenum"> 268</span></a>  
<a name="l269"><span class="linenum"> 269</span></a>      <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../../_variables/fullurl.html">$fullurl</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&amp;amp;', '&amp;', <a class="function" onClick="logFunction('url_get_full_url')" href="../../_functions/url_get_full_url.html" onMouseOver="funcPopup(event,'url_get_full_url')">url_get_full_url</a>(<a class="var it40411" onMouseOver="hilite(40411)" onMouseOut="lolite()" onClick="logVariable('urlrecord')" href="../../_variables/urlrecord.html">$urlrecord</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>));
<a name="l270"><span class="linenum"> 270</span></a>      <a class="var it37502" onMouseOver="hilite(37502)" onMouseOut="lolite()" onClick="logVariable('isurl')" href="../../_variables/isurl.html">$isurl</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../../_variables/fullurl.html">$fullurl</a>, <a class="constant" onClick="logConstant('PARAM_URL')" href="../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>);
<a name="l271"><span class="linenum"> 271</span></a>      if (empty(<a class="var it37502" onMouseOver="hilite(37502)" onMouseOut="lolite()" onClick="logVariable('isurl')" href="../../_variables/isurl.html">$isurl</a>)) {
<a name="l272"><span class="linenum"> 272</span></a>          return null;
<a name="l273"><span class="linenum"> 273</span></a>      }
<a name="l274"><span class="linenum"> 274</span></a>  
<a name="l275"><span class="linenum"> 275</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = array();
<a name="l276"><span class="linenum"> 276</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>['type'] = 'url';
<a name="l277"><span class="linenum"> 277</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>['filename']     = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it40411" onMouseOver="hilite(40411)" onMouseOut="lolite()" onClick="logVariable('urlrecord')" href="../../_variables/urlrecord.html">$urlrecord</a>-&gt;<a onClick="logVariable('name')" class="var it43093" onMouseOver="hilite(43093)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>), <a class="constant" onClick="logConstant('PARAM_FILE')" href="../../_constants/PARAM_FILE.html" onMouseOver="constPopup(event,'PARAM_FILE')">PARAM_FILE</a>);
<a name="l278"><span class="linenum"> 278</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>['filepath']     = null;
<a name="l279"><span class="linenum"> 279</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>['filesize']     = 0;
<a name="l280"><span class="linenum"> 280</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>['fileurl']      = <a class="var it4383" onMouseOver="hilite(4383)" onMouseOut="lolite()" onClick="logVariable('fullurl')" href="../../_variables/fullurl.html">$fullurl</a>;
<a name="l281"><span class="linenum"> 281</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>['timecreated']  = null;
<a name="l282"><span class="linenum"> 282</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>['timemodified'] = <a class="var it40411" onMouseOver="hilite(40411)" onMouseOut="lolite()" onClick="logVariable('urlrecord')" href="../../_variables/urlrecord.html">$urlrecord</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43093" onMouseOver="hilite(43093)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>;
<a name="l283"><span class="linenum"> 283</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>['sortorder']    = null;
<a name="l284"><span class="linenum"> 284</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>['userid']       = null;
<a name="l285"><span class="linenum"> 285</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>['author']       = null;
<a name="l286"><span class="linenum"> 286</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>['license']      = null;
<a name="l287"><span class="linenum"> 287</span></a>      <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a>[] = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>;
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>      return <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../_variables/contents.html">$contents</a>;
<a name="l290"><span class="linenum"> 290</span></a>  }
<a name="l291"><span class="linenum"> 291</span></a>  
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">/**</span>
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment"> * Register the ability to handle drag and drop file uploads</span>
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment"> * @return array containing details of the files / types the mod can handle</span>
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment"> */</span>
<a name="l296"><span class="linenum"> 296</span></a>  function <a class="function" onClick="logFunction('url_dndupload_register')" href="../../_functions/url_dndupload_register.html" onMouseOver="funcPopup(event,'url_dndupload_register')">url_dndupload_register</a>() {
<a name="l297"><span class="linenum"> 297</span></a>      return array('types' =&gt; array(
<a name="l298"><span class="linenum"> 298</span></a>                       array('identifier' =&gt; 'url', 'message' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('createurl', 'url'))
<a name="l299"><span class="linenum"> 299</span></a>                   ));
<a name="l300"><span class="linenum"> 300</span></a>  }
<a name="l301"><span class="linenum"> 301</span></a>  
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">/**</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment"> * Handle a file that has been uploaded</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment"> * @param object $uploadinfo details of the file / content that has been uploaded</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment"> * @return int instance id of the newly created mod</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment"> */</span>
<a name="l307"><span class="linenum"> 307</span></a>  function <a class="function" onClick="logFunction('url_dndupload_handle')" href="../../_functions/url_dndupload_handle.html" onMouseOver="funcPopup(event,'url_dndupload_handle')">url_dndupload_handle</a>(<a class="var it11945" onMouseOver="hilite(11945)" onMouseOut="lolite()" onClick="logVariable('uploadinfo')" href="../../_variables/uploadinfo.html">$uploadinfo</a>) {
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">    // Gather all the required data.</span>
<a name="l309"><span class="linenum"> 309</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l310"><span class="linenum"> 310</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('course')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/course.html">course</a> = <a class="var it11945" onMouseOver="hilite(11945)" onMouseOut="lolite()" onClick="logVariable('uploadinfo')" href="../../_variables/uploadinfo.html">$uploadinfo</a>-&gt;<a onClick="logVariable('course')" class="var it43094" onMouseOver="hilite(43094)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>-&gt;id;
<a name="l311"><span class="linenum"> 311</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it11945" onMouseOver="hilite(11945)" onMouseOut="lolite()" onClick="logVariable('uploadinfo')" href="../../_variables/uploadinfo.html">$uploadinfo</a>-&gt;<a onClick="logVariable('displayname')" class="var it43094" onMouseOver="hilite(43094)" onMouseOut="lolite()" href="../../_variables/displayname.html">displayname</a>;
<a name="l312"><span class="linenum"> 312</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('intro')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a> = '&lt;p&gt;'.<a class="var it11945" onMouseOver="hilite(11945)" onMouseOut="lolite()" onClick="logVariable('uploadinfo')" href="../../_variables/uploadinfo.html">$uploadinfo</a>-&gt;<a onClick="logVariable('displayname')" class="var it43094" onMouseOver="hilite(43094)" onMouseOut="lolite()" href="../../_variables/displayname.html">displayname</a>.'&lt;/p&gt;';
<a name="l313"><span class="linenum"> 313</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('introformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/introformat.html">introformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l314"><span class="linenum"> 314</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('externalurl')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/externalurl.html">externalurl</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it11945" onMouseOver="hilite(11945)" onMouseOut="lolite()" onClick="logVariable('uploadinfo')" href="../../_variables/uploadinfo.html">$uploadinfo</a>-&gt;<a onClick="logVariable('content')" class="var it43094" onMouseOver="hilite(43094)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>, <a class="constant" onClick="logConstant('PARAM_URL')" href="../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>);
<a name="l315"><span class="linenum"> 315</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">    // Set the display options to the site defaults.</span>
<a name="l318"><span class="linenum"> 318</span></a>      <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a> = <a class="function" onClick="logFunction('get_config')" href="../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('url');
<a name="l319"><span class="linenum"> 319</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('display')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/display.html">display</a> = <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('display')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../../_variables/display.html">display</a>;
<a name="l320"><span class="linenum"> 320</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('popupwidth')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/popupwidth.html">popupwidth</a> = <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('popupwidth')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../../_variables/popupwidth.html">popupwidth</a>;
<a name="l321"><span class="linenum"> 321</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('popupheight')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/popupheight.html">popupheight</a> = <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('popupheight')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../../_variables/popupheight.html">popupheight</a>;
<a name="l322"><span class="linenum"> 322</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('printintro')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/printintro.html">printintro</a> = <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('printintro')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../../_variables/printintro.html">printintro</a>;
<a name="l323"><span class="linenum"> 323</span></a>  
<a name="l324"><span class="linenum"> 324</span></a>      return <a class="function" onClick="logFunction('url_add_instance')" href="../../_functions/url_add_instance.html" onMouseOver="funcPopup(event,'url_add_instance')">url_add_instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, null);
<a name="l325"><span class="linenum"> 325</span></a>  }
<a name="l326"><span class="linenum"> 326</span></a>  
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">/**</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment"> * Mark the activity completed (if required) and trigger the course_module_viewed event.</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment"> *</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment"> * @param  stdClass $url        url object</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment"> * @param  stdClass $course     course object</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment"> * @param  stdClass $cm         course module object</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment"> * @param  stdClass $context    context object</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment"> * @since Moodle 3.0</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment"> */</span>
<a name="l336"><span class="linenum"> 336</span></a>  function <a class="function" onClick="logFunction('url_view')" href="../../_functions/url_view.html" onMouseOver="funcPopup(event,'url_view')">url_view</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l337"><span class="linenum"> 337</span></a>  
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">    // Trigger course_module_viewed event.</span>
<a name="l339"><span class="linenum"> 339</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(
<a name="l340"><span class="linenum"> 340</span></a>          'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l341"><span class="linenum"> 341</span></a>          'objectid' =&gt; <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>-&gt;id
<a name="l342"><span class="linenum"> 342</span></a>      );
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_url\event\<a class="class" onClick="logClass('course_module_viewed')" href="../../_classes/course_module_viewed.html" onMouseOver="classPopup(event,'course_module_viewed')">course_module_viewed</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l345"><span class="linenum"> 345</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('course_modules', <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l346"><span class="linenum"> 346</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('course', <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l347"><span class="linenum"> 347</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('url', <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>);
<a name="l348"><span class="linenum"> 348</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l349"><span class="linenum"> 349</span></a>  
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">    // Completion.</span>
<a name="l351"><span class="linenum"> 351</span></a>      <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l352"><span class="linenum"> 352</span></a>      <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('set_module_viewed')" href="../../_functions/set_module_viewed.html" onMouseOver="funcPopup(event,'set_module_viewed')">set_module_viewed</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l353"><span class="linenum"> 353</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'url_export_contents': ['url_export_contents', 'Export URL resource contents ', [['mod/url','lib.php',255]], 0],
'url_supports': ['url_supports', 'List of features supported in URL module ', [['mod/url','lib.php',28]], 0],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'get_config': ['get_config', 'Config get method. ', [['lib/classes/antivirus','scanner.php',54],['competency/classes','competency_rule.php',59],['question/engine','bank.php',109],['admin/tool/log/classes/helper','store.php',63],['lib','moodlelib.php',1409],['lib','enrollib.php',1142],['lib/editor/tinymce/classes','plugin.php',73],['competency/classes','competency_rule_points.php',43],['search/classes','base.php',169],['mod/assign','assignmentplugin.php',345],['lib/portfolio','plugin.php',546]], 934],
'url_guess_icon': ['url_guess_icon', 'Optimised mimetype detection from general URL ', [['mod/url','locallib.php',535]], 1],
'url_get_coursemodule_info': ['url_get_coursemodule_info', 'Given a course_module object, this function returns any "extra" information that may be needed when printing this activity in a course listing. ', [['mod/url','lib.php',195]], 0],
'format_module_intro': ['format_module_intro', 'Formats activity intro text ', [['lib','weblib.php',1542]], 65],
'set_module_viewed': ['set_module_viewed', 'Update the module completion status (set it viewed). ', [['mod/assign','locallib.php',8075],['lib','completionlib.php',657]], 29],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'url_get_full_url': ['url_get_full_url', 'Return full url with all extra parameters ', [['mod/url','locallib.php',73]], 5],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'url_delete_instance': ['url_delete_instance', 'Delete url instance. ', [['mod/url','lib.php',176]], 0],
'url_fix_submitted_url': ['url_fix_submitted_url', 'Fix common URL problems that we want teachers to see fixed the next time they edit the resource. ', [['mod/url','locallib.php',48]], 2],
'url_add_instance': ['url_add_instance', 'Add url instance. ', [['mod/url','lib.php',94]], 1],
'url_get_extra_capabilities': ['url_get_extra_capabilities', 'Returns all other caps used in module ', [['mod/url','lib.php',49]], 0],
'url_reset_userdata': ['url_reset_userdata', 'This function is used by the reset_course_userdata function in moodlelib. ', [['mod/url','lib.php',57]], 0],
'url_get_view_actions': ['url_get_view_actions', 'List the actions that correspond to a view of this module. This is used by the participation report. ', [['mod/url','lib.php',66]], 0],
'url_dndupload_register': ['url_dndupload_register', 'Register the ability to handle drag and drop file uploads ', [['mod/url','lib.php',292]], 0],
'url_get_post_actions': ['url_get_post_actions', 'List the actions that correspond to a post of this module. This is used by the participation report. ', [['mod/url','lib.php',80]], 0],
'url_page_type_list': ['url_page_type_list', 'Return a list of page types ', [['mod/url','lib.php',244]], 0],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'open': ['open', 'Open or create archive (depending on $mode). ', [['lib/filestorage','zip_archive.php',73],['auth/fc','fcFPP.php',48],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/searchreplace','editor_plugin_src.js',14],['lib/spout/src/Spout/Reader','ReaderInterface.php',12],['auth/cas/CAS/CAS/ProxiedService','Imap.php',179],['lib/tcpdf','tcpdf.php',2931],['lib/google/src/Google/Logger','File.php',96],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',56],['lib/spout/src/Spout/Reader/Wrapper','XMLReader.php',17],['lib/spout/src/Spout/Reader','AbstractReader.php',61],['lib/pear/Net','GeoIP.php',400],['lib/pear/Auth','RADIUS.php',271],['lib/pear/Auth','RADIUS.php',593],['lib/pear/Auth','RADIUS.php',898],['lib','webdavlib.php',156]], 261],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',840]], 332],
'url_view': ['url_view', 'Mark the activity completed (if required) and trigger the course_module_viewed event. ', [['mod/url','lib.php',327]], 3],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'url_get_final_display_type': ['url_get_final_display_type', 'Decide the best display format. ', [['mod/url','locallib.php',337]], 3],
'url_update_instance': ['url_update_instance', 'Update url instance. ', [['mod/url','lib.php',134]], 0],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'url_dndupload_handle': ['url_dndupload_handle', 'Handle a file that has been uploaded ', [['mod/url','lib.php',302]], 0],
'unserialize': ['unserialize', '', [], 192],
'str_replace': ['str_replace', '', [], 1648],
'defined': ['defined', '', [], 4731],
'time': ['time', '', [], 1959],
'in_array': ['in_array', '', [], 1234],
'serialize': ['serialize', '', [], 282]};
CLASS_DATA={
'course_module_viewed': ['course_module_viewed', 'The mod_page course module viewed event class. ', [['mod/page/classes/event','course_module_viewed.php',28],['mod/chat/classes/event','course_module_viewed.php',29],['mod/quiz/classes/event','course_module_viewed.php',29],['mod/data/classes/event','course_module_viewed.php',30],['mod/choice/classes/event','course_module_viewed.php',28],['mod/forum/classes/event','course_module_viewed.php',29],['mod/resource/classes/event','course_module_viewed.php',29],['mod/book/classes/event','course_module_viewed.php',28],['mod/imscp/classes/event','course_module_viewed.php',30],['mod/lti/classes/event','course_module_viewed.php',29],['mod/feedback/classes/event','course_module_viewed.php',28],['mod/survey/classes/event','course_module_viewed.php',29],['mod/folder/classes/event','course_module_viewed.php',29],['mod/glossary/classes/event','course_module_viewed.php',28],['mod/scorm/classes/event','course_module_viewed.php',28],['mod/url/classes/event','course_module_viewed.php',29],['mod/wiki/classes/event','course_module_viewed.php',28],['lib/tests/fixtures','event_fixtures.php',232],['mod/lesson/classes/event','course_module_viewed.php',30],['mod/workshop/classes/event','course_module_viewed.php',32]], 37],
'cached_cm_info': ['cached_cm_info', 'Class that is the return value for the _get_coursemodule_info module API function. ', [['lib','modinfolib.php',2265]], 7],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'completion_info': ['completion_info', 'Class represents completion information for a course. ', [['lib','completionlib.php',210]], 141]};
CONST_DATA={
'FEATURE_MOD_INTRO': ['FEATURE_MOD_INTRO', '', [['lib','moodlelib.php',426]], 31],
'FEATURE_GROUPINGS': ['FEATURE_GROUPINGS', '', [['lib','moodlelib.php',416]], 23],
'FEATURE_MOD_ARCHETYPE': ['FEATURE_MOD_ARCHETYPE', '', [['lib','moodlelib.php',424]], 13],
'RESOURCELIB_DISPLAY_POPUP': ['RESOURCELIB_DISPLAY_POPUP', '', [['lib','resourcelib.php',42]], 32],
'FEATURE_SHOW_DESCRIPTION': ['FEATURE_SHOW_DESCRIPTION', '', [['lib','moodlelib.php',437]], 22],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'RESOURCELIB_DISPLAY_EMBED': ['RESOURCELIB_DISPLAY_EMBED', '', [['lib','resourcelib.php',32]], 17],
'RESOURCELIB_DISPLAY_NEW': ['RESOURCELIB_DISPLAY_NEW', '', [['lib','resourcelib.php',36]], 10],
'FEATURE_BACKUP_MOODLE2': ['FEATURE_BACKUP_MOODLE2', '', [['lib','moodlelib.php',434]], 35],
'PARAM_URL': ['PARAM_URL', '', [['lib','moodlelib.php',239]], 165],
'RESOURCELIB_DISPLAY_FRAME': ['RESOURCELIB_DISPLAY_FRAME', '', [['lib','resourcelib.php',34]], 13],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'MOD_ARCHETYPE_RESOURCE': ['MOD_ARCHETYPE_RESOURCE', '', [['lib','moodlelib.php',445]], 13],
'FEATURE_GROUPS': ['FEATURE_GROUPS', '', [['lib','moodlelib.php',414]], 25],
'RESOURCELIB_DISPLAY_AUTO': ['RESOURCELIB_DISPLAY_AUTO', '', [['lib','resourcelib.php',30]], 20],
'FEATURE_GRADE_HAS_GRADE': ['FEATURE_GRADE_HAS_GRADE', '', [['lib','moodlelib.php',394]], 29],
'FEATURE_GRADE_OUTCOMES': ['FEATURE_GRADE_OUTCOMES', '', [['lib','moodlelib.php',396]], 23],
'PARAM_FILE': ['PARAM_FILE', '', [['lib','moodlelib.php',133]], 121],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 1121],
'FEATURE_COMPLETION_TRACKS_VIEWS': ['FEATURE_COMPLETION_TRACKS_VIEWS', '', [['lib','moodlelib.php',405]], 23]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
